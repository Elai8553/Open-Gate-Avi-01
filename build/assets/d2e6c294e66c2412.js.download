;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="e94a6dba-0ebe-a80a-5517-8743eba821d8")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,927225,e=>{"use strict";var n=e.i(878420),t=e.i(64386),r=e.i(276385),i=e.i(116235);function s(e){return(0,r.jsx)(i.default,(0,t._)((0,n._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M3.25 12a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm7 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm7 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Z",clipRule:"evenodd"})}))}e.s(["default",()=>s])},342008,e=>{"use strict";var n=e.i(878420),t=e.i(64386),r=e.i(276385),i=e.i(116235);function s(e){return(0,r.jsxs)(i.default,(0,t._)((0,n._)({},e),{children:[(0,r.jsx)("path",{d:"M14.47 8.47a.75.75 0 0 1 1.06 1.06L13.06 12l2.47 2.47a.75.75 0 0 1-1.06 1.06L12 13.06l-2.47 2.47a.75.75 0 1 1-1.06-1.06L10.94 12 8.47 9.53a.75.75 0 1 1 1.06-1.06L12 10.94l2.47-2.47Z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M12 1.25c5.937 0 10.75 4.813 10.75 10.75S17.937 22.75 12 22.75 1.25 17.937 1.25 12 6.063 1.25 12 1.25Zm0 1.5a9.25 9.25 0 1 0 0 18.5 9.25 9.25 0 0 0 0-18.5Z",clipRule:"evenodd"})]}))}e.s(["default",()=>s])},452412,e=>{"use strict";var n=e.i(276385),t=e.i(269848),r=e.i(446530),i=e.i(613355),s=e.i(140487),a=e.i(960178),o=e.i(625484),l=o.SpecializedView.form,c=(0,r.cssRecord)({content:[i.rcss.colWithGap(24)]});function u(e){var r;return(0,n.jsxs)(l,{css:c.content,onSubmit:function(n){n.preventDefault(),e.onConfirm()},children:[(0,n.jsx)(a.Header,{variant:"headerDefault",level:2,children:e.title}),"string"==typeof e.children?(0,n.jsx)(a.Text,{children:e.children}):e.children,(0,n.jsxs)(o.View,{row:!0,gap:12,justify:"end",children:[(0,n.jsx)(s.Button,{type:"button",onClick:e.onCancel,text:null!=(r=e.cancelLabel)?r:"Cancel"}),(0,n.jsx)(s.Button,{type:"submit",disabled:e.loading,iconLeft:e.loading?(0,n.jsx)(t.default,{}):e.confirmIcon,colorway:e.isDestructive?"negative":"primary",text:e.confirmLabel||"Confirm"})]})]})}e.s(["default",()=>u])},491194,e=>{"use strict";var n=e.i(878420),t=e.i(64386),r=e.i(276385),i=e.i(116235);function s(e){return(0,r.jsx)(i.default,(0,t._)((0,n._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 2.75A1.25 1.25 0 0 0 8.75 4v1.25h6.5V4A1.25 1.25 0 0 0 14 2.75h-4Zm6.75 2.5V4A2.75 2.75 0 0 0 14 1.25h-4A2.75 2.75 0 0 0 7.25 4v1.25H3a.75.75 0 0 0 0 1.5h1.25V20A2.75 2.75 0 0 0 7 22.75h10A2.75 2.75 0 0 0 19.75 20V6.75H21a.75.75 0 0 0 0-1.5h-4.25Zm-11 1.5V20A1.25 1.25 0 0 0 7 21.25h10A1.25 1.25 0 0 0 18.25 20V6.75H5.75Zm4.25 3.5a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 .75-.75Zm4 0a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}e.s(["default",()=>s])},204977,e=>{"use strict";var n=e.i(878420),t=e.i(64386),r=e.i(276385),i=e.i(116235);function s(e){return(0,r.jsx)(i.default,(0,t._)((0,n._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M19.182 1.25a3.57 3.57 0 0 1 2.644 5.964l-.122.128-13.348 13.35a2.751 2.751 0 0 1-.981.63l-.16.054-4.354 1.32H2.86a1.249 1.249 0 0 1-1.556-1.555v-.003l1.321-4.352.001-.002a2.75 2.75 0 0 1 .688-1.14l13.344-13.35a3.57 3.57 0 0 1 2.525-1.044Zm0 1.5a2.07 2.07 0 0 0-1.463.605L4.372 16.705a1.254 1.254 0 0 0-.313.516v.001l-1.185 3.902 3.904-1.184c.196-.06.375-.166.52-.31L20.644 6.281a2.07 2.07 0 0 0-1.462-3.532Z",clipRule:"evenodd"})}))}e.s(["default",()=>s])},258941,e=>{"use strict";var n=e.i(276385),t=e.i(269848),r=e.i(140487),i=e.i(960178),s=e.i(625484);function a(e){var a=e.prompt,o=e.desc,l=e.confirmText,c=e.loading,u=void 0!==c&&c,d=e.onCancel,f=e.onConfirm,h=e.danger,m=e.icon;return(0,n.jsxs)(s.View,{gap:24,children:[(0,n.jsx)(i.Header,{level:3,variant:"headerDefault",children:a}),(0,n.jsx)(i.Text,{children:o}),(0,n.jsxs)(s.View,{row:!0,gap:12,justify:"end",children:[d?(0,n.jsx)(r.Button,{disabled:u,onClick:d,text:"Cancel"}):null,(0,n.jsx)(r.Button,{colorway:h?"negative":"primary",disabled:u,onClick:f,text:l||"Ok",iconLeft:u?(0,n.jsx)(t.default,{}):m})]})]})}e.s(["default",()=>a])},316599,843136,e=>{"use strict";var n=e.i(276385),t=e.i(960178);function r(e){var r=e.last4,i=e.fluent;return(0,n.jsx)(t.Text,{multiline:!1,children:i?"Card ending in ".concat(r):"路路路路".concat(r)})}e.s(["CardLastFour",()=>r],316599);var i=e.i(530658),s=e.i(346715),a=e.i(389959);function o(e){var n=(0,i._)((0,a.useState)(e),2),t=n[0],r=n[1],o=(0,i._)((0,a.useState)([]),2),l=o[0],c=o[1],u=(0,a.useCallback)(function(e){c((0,s._)(l).concat([t])),r(e)},[l,c,t,r]);return{currentStep:t,goTo:u,goBack:(0,a.useCallback)(function(){var e=l.pop();c(l),e&&r(e)},[l,c,r]),canGoBack:l.length>0}}e.s(["usePaymentSteps",()=>o],843136)},681953,e=>{"use strict";var n=e.i(276385),t=e.i(138716),r=e.i(389959),i=e.i(204977),s=e.i(416746),a=e.i(269848),o=e.i(40916),l=e.i(596139),c=e.i(316599),u=e.i(911928),d=e.i(878420),f=e.i(569384),h=e.i(973245),m=e.i(304277);function p(){var e=(0,f._)(["\n  fragment UserPaymentMethod on PaymentMethod {\n    id\n    last4\n  }\n"]);return p=function(){return e},e}e.i(566901);var g=(0,h.gql)(p());function v(){var e=(0,f._)(["\n  query UserPaymentMethod {\n    currentUser {\n      id\n      paymentMethod {\n        ... on PaymentMethod {\n          ...UserPaymentMethod\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var x={},S=(0,h.gql)(v(),g),y=e.i(446530),k=e.i(613355),j=e.i(140487),w=e.i(136540),b=e.i(396776),_=e.i(625484),C=(0,y.cssRecord)({loadingContainer:[k.rcss.minHeight(80)]});function D(e){var t,f,h,p,g,v,y,k,D=e.goToNewPaymentMethodForm,E=(0,u.useIsOnTrialPlan)(),V=E.loading,R=E.isOnTrialPlan,T=E.trialWillCancel,A=(k=(y=(t=(0,d._)({},x,void 0),m.useQuery(S,t))).data,y.loading?{paymentMethod:null,loading:!0,error:null}:(null==k||null==(h=k.currentUser)||null==(f=h.paymentMethod)?void 0:f.__typename)==="PaymentMethod"?{paymentMethod:{last4:null==k?void 0:k.currentUser.paymentMethod.last4},loading:!1,error:null}:(null==k||null==(g=k.currentUser)||null==(p=g.paymentMethod)?void 0:p.__typename)==="UnauthorizedError"?{paymentMethod:null,loading:!1,error:k.currentUser.paymentMethod.message}:(null==k||null==(v=k.currentUser)?void 0:v.paymentMethod)===null?{paymentMethod:null,loading:!1,error:null}:{paymentMethod:null,loading:!1,error:"Unknown error"}),M=A.paymentMethod,P=A.loading,U=A.error,I=(0,r.useMemo)(function(){return R&&!T?(0,n.jsx)(b.StatusBanner,{colorway:"primary",icon:(0,n.jsx)(s.default,{}),text:(0,n.jsxs)(n.Fragment,{children:["Adding a payment method will set your Replit ",l.corePlanName," ","membership to auto-renew at the end of the trial."]})}):(0,n.jsx)(b.StatusBanner,{colorway:"primary",icon:(0,n.jsx)(s.default,{}),text:"Add a payment method to enable additional resource usage."})},[R,T]);return P||V||null!=U?(0,n.jsx)(_.View,{css:C.loadingContainer,justify:"center",align:"center",children:(0,n.jsx)(a.default,{})}):(0,n.jsxs)(_.View,{gap:16,children:[null!=M?(0,n.jsx)(_.View,{gap:16,children:(0,n.jsxs)(_.View,{row:!0,gap:8,align:"center",children:[(0,n.jsx)(w.IconButton,{alt:"Update Payment Method",onClick:D,children:(0,n.jsx)(i.default,{})}),(0,n.jsx)(c.CardLastFour,{last4:M.last4})]})}):null," ",null==M?(0,n.jsxs)(_.View,{gap:6,children:[I,(0,n.jsx)(j.Button,{text:"Add Payment Method",iconLeft:(0,n.jsx)(o.default,{}),onClick:D})]}):null]})}var E=e.i(845228),V=e.i(843136),R=e.i(960178);function T(){var e=(0,V.usePaymentSteps)({step:"card_preferences"}),r=e.currentStep,i=e.goBack,s=e.goTo;switch(r.step){case"card_preferences":return(0,n.jsx)(D,{goToNewPaymentMethodForm:function(){return s({step:"new_payment_method_form"})}});case"new_payment_method_form":return(0,n.jsxs)(_.View,{gap:16,children:[(0,n.jsxs)(_.View,{row:!0,gap:8,align:"center",children:[(0,n.jsx)(w.IconButton,{alt:"Back",onClick:i,children:(0,n.jsx)(t.default,{})}),(0,n.jsx)(R.Text,{variant:"subheadDefault",multiline:!1,children:"Update Payment Method"})]}),(0,n.jsx)(E.NewPaymentMethodForm,{onClose:i,context:"account_page"})]})}}e.s(["AccountPaymentMethodFlow",()=>T],681953)},824108,133783,e=>{"use strict";var n=e.i(276385),t=e.i(402099),r=e.i(610357),i=e.i(480028),s=e.i(446530),a=e.i(173703),o=e.i(613355),l=e.i(136540),c=e.i(960178),u=e.i(625484),d=(0,s.cssRecord)({root:[o.rcss.borderRadius(4),o.rcss.border({color:i.tokens.outlineDimmer,width:1,style:"solid"}),o.rcss.p(8),o.rcss.backgroundColor.backgroundDefault],body:[o.rcss.overflow("auto"),o.rcss.font.code,o.rcss.flex.growAndShrink(1),o.rcss.scrollbar.hidden]});function f(e){var i=e.code,s=e.header,o=e.multiline,f=e.onCopy;return(0,n.jsxs)(a.ShadesSurface,{tag:"pre",css:d.root,gap:4,elevate:!1,children:[(0,n.jsxs)(u.View,{row:!0,justify:"space-between",children:[(0,n.jsx)(c.Text,{color:"dimmer",children:s}),(0,n.jsx)(l.IconButton,{onClick:function(){null==f||f(),(0,r.default)(i)},alt:"Copy",children:(0,n.jsx)(t.default,{})})]}),(0,n.jsx)(u.View,{children:(0,n.jsx)(c.Text,{multiline:o,css:d.body,maxLines:o?void 0:1,children:i})})]})}e.s(["default",()=>f],824108);var h=e.i(332441);function m(){return(0,h.useIsWindows)()?"%HOMEPATH%":"~"}e.s(["default",()=>m],133783)},811081,255614,e=>{"use strict";e.s(["SSH_KEY_LIMIT",()=>20],811081);var n=["ssh-rsa","ssh-dss","ecdsa-sha2-nistp256","sk-ecdsa-sha2-nistp256@openssh.com","ecdsa-sha2-nistp384","ecdsa-sha2-nistp521","ssh-ed25519","sk-ssh-ed25519@openssh.com"];function t(e){var t=e.trim();if(""===t)return"Key cannot be empty";var r=t.split(" ");if(r.length<3||r.length>4)return"Key must have either 3 or 4 separate components";var i=3===r.length?r[0]:r[1];return n.includes(i)?null:"".concat(i," is not a valid key type")}e.s(["VALID_KEY_TYPES",()=>n,"default",()=>t],255614)},903941,e=>{"use strict";var n=e.i(878420),t=e.i(569384),r=e.i(973245),i=e.i(951262),s=e.i(304277);function a(){var e=(0,t._)(["\n  mutation AddSshKey($input: AddPublicSshKeyInput!) {\n    addPublicSshKey(input: $input) {\n      __typename\n      ... on CurrentUser {\n        id\n        publicSshKeys {\n          ... on PublicSshKeysOutput {\n            __typename\n            keys {\n              id\n              key\n              label\n              timeCreated\n            }\n          }\n          ... on UnauthorizedError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return a=function(){return e},e}function o(){var e=(0,t._)(["\n  mutation DeleteSshKey($input: DeletePublicSshKeyInput!) {\n    deletePublicSshKey(input: $input) {\n      __typename\n      ... on CurrentUser {\n        id\n        publicSshKeys {\n          ... on PublicSshKeysOutput {\n            __typename\n            keys {\n              id\n              key\n              label\n              timeCreated\n            }\n          }\n          ... on UnauthorizedError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return o=function(){return e},e}function l(){var e=(0,t._)(["\n  query SshKeysCurrentUser {\n    currentUser {\n      id\n      __typename\n      publicSshKeys {\n        ... on PublicSshKeysOutput {\n          keys {\n            id\n            key\n            label\n            timeCreated\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}e.i(566901);var c={},u=(0,r.gql)(a());function d(e){var t=(0,n._)({},c,e);return i.useMutation(u,t)}var f=(0,r.gql)(o());function h(e){var t=(0,n._)({},c,e);return i.useMutation(f,t)}var m=(0,r.gql)(l());function p(e){var t=(0,n._)({},c,e);return s.useQuery(m,t)}e.s(["useAddSshKeyMutation",()=>d,"useDeleteSshKeyMutation",()=>h,"useSshKeysCurrentUserQuery",()=>p])},200004,948981,22866,961228,e=>{"use strict";var n=e.i(297083),t=e.i(530658),r=e.i(817556),i=e.i(276385),s=e.i(485273),a=e.i(903941),o=e.i(183035),l=e.i(257982),c=e.i(255614),u=e.i(322823),d=e.i(222342),f=e.i(858248),h=e.i(709485),m=e.i(824108),p=e.i(133783),g=e.i(480028),v=e.i(446530),x=e.i(613355),S=e.i(428596),y=e.i(965153),k=e.i(140487),j=e.i(607278),w=e.i(960178),b=e.i(625484),_=function(e){var c=e.onConfirm,g=(0,d.default)(),v=g.showConfirm,x=g.showError,_=(0,s.useRouter)(),C=(0,p.default)(),T=(0,S.useIdSeed)(),A=(0,u.useFormField)("",V),M=(0,u.useFormField)("",E),P=(0,t._)((0,a.useAddSshKeyMutation)({onCompleted:function(e){var n;switch(null==(n=e.addPublicSshKey)?void 0:n.__typename){case"UserError":case"UnauthorizedError":case"ServiceUnavailable":x(e.addPublicSshKey.message);break;case"CurrentUser":A.setValue(""),M.setValue(""),v("SSH key added"),c();break;case void 0:case null:x("An unkown error occurred. Please try again.");break;default:(0,l.default)(e.addPublicSshKey)}},onError:function(e){x("Error adding SSH key: ".concat(e.message))}}),2),U=P[0],I=P[1].loading,F="[ -s ".concat(C,"/.ssh/replit.pub ] || ssh-keygen -t ed25519 -f ").concat(C,'/.ssh/replit -q -N "" && cat ').concat(C,"/.ssh/replit.pub");return(0,i.jsxs)(b.View,{gap:16,children:[(0,i.jsx)(w.Text,{variant:"headerDefault",children:"Add a new SSH key"}),(0,i.jsxs)(b.View,{css:R.input,children:[(0,i.jsx)(b.View,{tag:"label",htmlFor:T("label-input"),children:"Label"}),(0,i.jsx)(j.Input,{id:T("label-input"),placeholder:"Enter a label to identify this SSH key...",value:M.value,onChange:function(e){return M.setValue(e.target.value,{preventValidation:!0})},onBlur:M.handleBlur}),M.error?(0,i.jsx)(w.Text,{multiline:!1,variant:"small",css:R.inputErrorMessage,children:M.error.message}):null]}),(0,i.jsxs)(b.View,{css:R.input,children:[(0,i.jsx)(b.View,{tag:"label",htmlFor:T("key-input"),children:"Key"}),(0,i.jsx)(j.MultiLineInput,{autoSize:!0,id:T("key-input"),placeholder:D,value:A.value,css:R.keyInput,onChange:function(e){return A.setValue(e.target.value,{preventValidation:!0})},onBlur:A.handleBlur}),A.error?(0,i.jsx)(w.Text,{multiline:!1,variant:"small",css:R.inputErrorMessage,children:A.error.message}):null]}),(0,i.jsx)(y.AccordionItem,{headerContent:(0,i.jsx)(w.Text,{color:"dimmer",children:"Learn how to generate an SSH key"}),headerProps:{style:{justifyContent:"start"}},children:(0,i.jsxs)(b.View,{px:6,gap:4,children:[(0,i.jsx)(w.Text,{color:"dimmer",children:"To generate an SSH key, run this shell command locally on your machine. The value it returns can be pasted into the key field."}),(0,i.jsx)(m.default,{code:F,header:"Shell command",multiline:!0})]})}),(0,i.jsx)(b.View,{row:!0,children:(0,i.jsx)(k.Button,{disabled:I||!!A.error||!!M.error,colorway:"primary",text:"Add SSH key",type:"submit",iconLeft:(0,i.jsx)(o.default,{}),onClick:function(){return(0,n._)(function(){var e,n;return(0,r._)(this,function(t){switch(t.label){case 0:return[4,A.validate()];case 1:return e=t.sent(),[4,M.validate()];case 2:if(n=t.sent(),e)return x(e.message),[2];if(n)return x(n.message),[2];return(0,f.track)(h.events.WORKSPACE,{action:"ssh_key_added",path:_.pathname}),[4,U({variables:{input:{key:A.value.trim(),label:M.value.trim()}}})];case 3:return t.sent(),[2]}})})()}})})]})},C=c.VALID_KEY_TYPES.map(function(e){return"'".concat(e,"'")}),D="Begins with ".concat(C.slice(0,-1).join(", "),", or ").concat(C[C.length-1]),E=function(e){return""===e.trim()?{message:"Label cannot be empty",severity:"error"}:null},V=function(e){var n=(0,c.default)(e);return n?{message:n,severity:"error"}:null},R=(0,v.cssRecord)({input:[x.rcss.colWithGap(8)],keyInput:[x.rcss.height(g.tokens.space128)],inputErrorMessage:[x.rcss.color.accentNegativeDefault]});e.s(["AddSshKeyDialog",()=>_],200004);var T=e.i(917255),A="https://docs.replit.com/replit-workspace/ssh";e.s(["SSH_AUTHORIZED_KEYS_FILE_PATH",()=>".config/ssh/.authorized_keys","SSH_DOCS_HREF",()=>A],948981);var M=e.i(91720),P=function(){return(0,i.jsx)(M.ButtonLink,{href:A,target:"_blank",rel:"noopener",text:"Need help? Read the docs",variant:"underlinedOnHover",colorway:"primary",iconLeft:(0,i.jsx)(T.default,{})})};e.s(["SshKeyTip",()=>P],22866);var U=e.i(389959),I=e.i(402099),F=e.i(844941),z=e.i(491194),H=e.i(968323),B=e.i(610357),K=e.i(416298),L=e.i(739521),N=e.i(396776),O=function(e){var n=e.onClose,t=e.onConfirm,r=e.keyId;return(0,i.jsx)(L.Modal,{centered:!0,isOpen:null!==r,onRequestClose:n,children:(0,i.jsxs)(b.View,{gap:16,children:[(0,i.jsx)(w.Text,{variant:"headerDefault",children:"Delete SSH key"}),(0,i.jsx)(N.StatusBanner,{icon:(0,i.jsx)(K.default,{}),colorway:"warning",text:"Are you sure you want to permanently delete this SSH key?"}),(0,i.jsx)(w.Text,{multiline:!0,children:"This action cannot be undone. If you want to use this key again in the future, you can add it again."}),(0,i.jsxs)(b.View,{row:!0,gap:16,justify:"start",children:[(0,i.jsx)(k.Button,{text:"Cancel",onClick:n}),(0,i.jsx)(k.Button,{colorway:"negative",text:"Confirm and delete SSH key",onClick:null!==r?function(){return t(r)}:function(){}})]})]})})},W=e.i(173703),q=e.i(136540),Z=function(e){var n=e.keys,r=(0,s.useRouter)(),o=(0,d.default)(),c=o.showConfirm,u=o.showError,m=(0,t._)((0,U.useState)(null),2),p=m[0],v=m[1],x=(0,t._)((0,a.useDeleteSshKeyMutation)({onCompleted:function(e){if(!e.deletePublicSshKey)throw Error("Expected response");switch(e.deletePublicSshKey.__typename){case"UnauthorizedError":case"ServiceUnavailable":case"NotFoundError":u(e.deletePublicSshKey.message);break;case"CurrentUser":c("SSH key deleted");break;default:(0,l.default)(e.deletePublicSshKey)}},onError:function(e){u("Something unexpected happened while deleting the SSH key")}}),2),S=x[0],y=x[1].loading;return 0===n.length?(0,i.jsxs)(b.View,{css:G.emptyState,gap:8,children:[(0,i.jsx)(F.default,{size:24,color:g.tokens.foregroundDimmest}),(0,i.jsx)(w.Text,{color:"dimmer",children:"You haven't added any SSH keys yet."})]}):(0,i.jsxs)(b.View,{tag:"ul",gap:8,children:[n.map(function(e){var n=e.timeCreated,t=e.label,r=e.key,s=e.id;return(0,i.jsxs)(W.ShadesSurface,{p:8,gap:4,tag:"li",children:[(0,i.jsxs)(b.View,{row:!0,gap:8,justify:"space-between",align:"center",children:[(0,i.jsx)(w.Text,{variant:"small",css:G.keyLabelText,children:t}),(0,i.jsxs)(b.View,{row:!0,gap:4,children:[(0,i.jsx)(q.IconButton,{alt:"Copy",onClick:function(){(0,B.default)(r)},children:(0,i.jsx)(I.default,{size:16})}),(0,i.jsx)(q.IconButton,{alt:"Delete public SSH key",disabled:y,onClick:function(){v(s)},children:(0,i.jsx)(z.default,{size:16})})]})]}),(0,i.jsxs)(b.View,{row:!0,gap:8,align:"center",children:[(0,i.jsx)(F.default,{css:G.keyIcon}),(0,i.jsx)($,{sshKey:r})]}),(0,i.jsx)(b.View,{css:G.keyTime,tag:"time",dateTime:n,children:(0,i.jsxs)(w.Text,{variant:"small",color:"dimmer",children:["Added on"," ",new Date(n).toLocaleDateString(void 0,{dateStyle:"long"})]})})]},s)}),(0,i.jsx)(O,{keyId:p,onClose:function(){return v(null)},onConfirm:function(e){(0,f.track)(h.events.WORKSPACE,{action:"ssh_key_removed",path:r.pathname}),S({variables:{input:{id:e}}}),v(null)}})]})},$=function(e){var n=e.sshKey,r=Y(n),s=(0,t._)(r.ok?["".concat(r.value.keyType," ").concat(r.value.encodedKey.slice(0,-8)),"".concat(r.value.encodedKey.slice(-8)," ").concat(r.value.comment)]:[n.slice(0,-8),n.slice(-8)],2),a=s[0],o=s[1];return(0,i.jsxs)(b.View,{shrink:!0,row:!0,gap:0,children:[(0,i.jsx)(w.Text,{variant:"small",color:"dimmer",maxLines:1,css:G.keyValuePrefix,children:a}),(0,i.jsx)(w.Text,{variant:"small",color:"dimmer",maxLines:1,css:G.keyValueSuffix,children:o})]})},Y=function(e){var n=e.split(" ");return n.length<3?H.default.Err("Key is in an unexpected format"):H.default.Ok({keyType:n[0],encodedKey:n[1],comment:n[2]})},G=(0,v.cssRecord)({keyIcon:[x.rcss.color.foregroundDimmer],keyTime:[x.rcss.color.foregroundDimmer],keyLabelText:[x.rcss.fontWeight.medium],keyValuePrefix:[x.rcss.flex.shrink(1),{whiteSpace:"nowrap"},x.rcss.truncate,x.rcss.font.code],keyValueSuffix:[{whiteSpace:"nowrap"},x.rcss.truncate,x.rcss.font.code],emptyState:[x.rcss.center,x.rcss.border({color:g.tokens.outlineDefault,width:1,style:"dashed"}),x.rcss.borderRadius(4),x.rcss.py(24),x.rcss.px(12)]});e.s(["UserSshKeyList",()=>Z],961228)},612054,e=>{"use strict";var n=e.i(878420),t=e.i(64386),r=e.i(276385),i=e.i(116235);function s(e){return(0,r.jsx)(i.default,(0,t._)((0,n._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M15.47 1.47a.75.75 0 0 1 1.06 1.06l-1.402 1.402c.403.609.622 1.327.622 2.068v.585a4.75 4.75 0 0 1 2.043 1.559 3.247 3.247 0 0 0 1.63-.982A3.251 3.251 0 0 0 20.25 5a.75.75 0 0 1 1.5.002 4.747 4.747 0 0 1-3.245 4.498c.16.48.245.986.245 1.501v1.25H22a.75.75 0 0 1 0 1.5h-3.25V14a6.75 6.75 0 0 1-.454 2.427A4.75 4.75 0 0 1 21.749 21a.75.75 0 1 1-1.5-.002 3.247 3.247 0 0 0-2.672-3.2 6.75 6.75 0 0 1-11.155 0A3.248 3.248 0 0 0 3.75 21a.75.75 0 0 1-1.5.002 4.75 4.75 0 0 1 3.453-4.574A6.75 6.75 0 0 1 5.25 14v-.25H2a.75.75 0 0 1 0-1.5h3.25V11c0-.515.084-1.021.244-1.501A4.746 4.746 0 0 1 2.25 5.001a.75.75 0 0 1 1.5-.002c0 .798.295 1.568.827 2.163a3.247 3.247 0 0 0 1.63.982A4.755 4.755 0 0 1 8.25 6.585V6c0-.74.218-1.46.621-2.068L7.47 2.53a.75.75 0 1 1 1.06-1.06L9.932 2.87A3.75 3.75 0 0 1 12 2.25l.185.005a3.748 3.748 0 0 1 1.881.617L15.47 1.47ZM10 7.75c-.28 0-.555.036-.82.105l-.035.01A3.251 3.251 0 0 0 6.75 11v3l.007.26c.04.824.275 1.62.676 2.327a5.248 5.248 0 0 0 3.817 2.608V11a.75.75 0 0 1 1.5 0v8.195a5.25 5.25 0 0 0 3.759-2.509c.01-.021.023-.041.035-.062A5.244 5.244 0 0 0 17.25 14v-3a3.25 3.25 0 0 0-3.089-3.246L14 7.75h-4Zm2-4c-.591 0-1.157.233-1.578.647l-.012.013c-.003.004-.008.006-.012.01A2.25 2.25 0 0 0 9.75 6v.257c.083-.005.166-.007.25-.007h4c.084 0 .167.002.25.007V6a2.25 2.25 0 0 0-.65-1.58l-.01-.01-.012-.013a2.25 2.25 0 0 0-1.355-.636L12 3.75Z",clipRule:"evenodd"})}))}e.s(["default",()=>s])},371375,e=>{"use strict";var n=e.i(480028);let t={fontFamily:{"sans-serif":n.tokens.fontFamilyDefault,serif:n.tokens.fontFamilyDefault,monospace:n.tokens.fontFamilyCode},fontWeight:{light:n.tokens.fontWeightRegular,regular:n.tokens.fontWeightRegular,medium:n.tokens.fontWeightMedium,bold:n.tokens.fontWeightBold},levels:{1:n.tokens.fontSizeHeaderBig,2:n.tokens.fontSizeHeaderBig,3:n.tokens.fontSizeHeaderDefault,4:n.tokens.fontSizeSubheadBig,5:n.tokens.fontSizeSubheadDefault,6:n.tokens.fontSizeSmall},foreground:{1:n.tokens.foregroundDefault,2:n.tokens.foregroundDimmer,3:n.tokens.foregroundDimmest,4:n.tokens.foregroundDimmest,"transparent-1":n.tokens.foregroundDimmest,"transparent-2":n.tokens.foregroundDimmest},background:{1:n.tokens.backgroundDefault,2:n.tokens.backgroundRoot,3:n.tokens.backgroundRoot},lineHeight:{xxsmall:n.tokens.lineHeightSmall,xsmall:n.tokens.lineHeightSmall,small:n.tokens.lineHeightDefault,medium:n.tokens.lineHeightSubheadDefault,large:n.tokens.lineHeightSubheadDefault,xlarge:n.tokens.lineHeightHeaderDefault,xxlarge:n.tokens.lineHeightHeaderDefault},fontSize:{xxsmall:n.tokens.fontSizeSmall,xsmall:n.tokens.fontSizeSmall,small:n.tokens.fontSizeDefault,medium:n.tokens.fontSizeSubheadDefault,large:n.tokens.fontSizeSubheadDefault,xlarge:n.tokens.fontSizeHeaderDefault,xxlarge:n.tokens.fontSizeHeaderDefault},spacing:{half:n.tokens.space4,1:n.tokens.space8,2:n.tokens.space16,3:n.tokens.space24,4:n.tokens.space32,5:n.tokens.space48,6:n.tokens.space48,7:n.tokens.space64,8:n.tokens.space64,9:n.tokens.space64,10:n.tokens.space64,11:n.tokens.space64,12:n.tokens.space128}};e.s(["default",0,t])},352758,e=>{"use strict";var n=e.i(276385),t=e.i(371375),r=function(e){return"number"==typeof e&&e>0&&e in t.default.spacing?t.default.spacing[e]:e};e.s(["default",0,function(e){var t=e.size,i=e.width,s=e.height,a=t&&r(t);return(0,n.jsx)("div",{style:{width:a||r(void 0===i?1:i),height:a||r(void 0===s?1:s),userSelect:"none",pointerEvents:"none"}})},"getSpacing",()=>r])},964269,e=>{"use strict";var n=e.i(878420),t=e.i(64386),r=e.i(886513),i=e.i(276385),s=e.i(967629),a=e.i(352758),o=function(e){return"start"===e||"end"===e?"flex-".concat(e):e},l=function(e){var l=e.dir,c=void 0===l?"row":l,u=e.spacing,d=void 0===u?0:u,f=e.align,h=e.justify,m=e.isInline,p=e.isReversed,g=void 0!==p&&p,v=e.wrap,x=e.constrainWidth,S=e.tag,y=e.className,k=e.children,j=(0,r._)(e,["dir","spacing","align","justify","isInline","isReversed","wrap","constrainWidth","tag","className","children"]),w="row"===c;return(0,i.jsx)(void 0===S?"div":S,(0,t._)((0,n._)({clsx:[y,{"h-stack":w,"v-stack":!w,"constrain-width":void 0!==x&&x}]},j),{css:(0,s.css)("display:",void 0!==m&&m?"inline-flex":"flex",";flex-direction:",g?"".concat(c,"-reverse"):c,";align-items:",o(void 0===f?"start":f),";justify-content:",o(void 0===h?"start":h),";flex-wrap:",void 0===v?"wrap":v,";&.h-stack > *{margin-",g?"left":"right",":",(0,a.getSpacing)(d),";}&.h-stack > *:last-child{margin-",g?"left":"right",":0;}&.v-stack > *{margin-",g?"top":"bottom",":",(0,a.getSpacing)(d),";}&.v-stack > *:last-child{margin-",g?"top":"bottom",":0;}&.constrain-width{max-width:100%;}"),children:k}))},c=function(e){return(0,i.jsx)(l,(0,t._)((0,n._)({},e),{dir:"row"}))},u=function(e){return(0,i.jsx)(l,(0,t._)((0,n._)({},e),{dir:"column"}))};e.s(["HStack",()=>c,"VStack",()=>u])},524101,e=>{"use strict";var n=e.i(878420),t=e.i(64386),r=e.i(276385),i=e.i(371375);function s(e){var s=e.size,a=e.tag,o=e.fontFamily,l=e.fontWeight,c=e.foreground,u=e.align,d=e.truncate,f=e.className,h=e.children,m=e.onClick,p={fontSize:i.default.fontSize[void 0===s?"medium":s],fontFamily:i.default.fontFamily[void 0===o?"sans-serif":o],fontWeight:i.default.fontWeight[void 0===l?"regular":l],color:i.default.foreground[void 0===c?1:c],textAlign:void 0===u?"left":u,transition:"opacity 0.1s"};return void 0!==d&&d&&(p=(0,t._)((0,n._)({},p),{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"inline-block",maxWidth:"100%"})),(0,r.jsx)(void 0===a?"span":a,{onClick:m,className:void 0===f?"":f,style:p,children:h})}e.s(["default",()=>s])},448600,e=>{"use strict";var n=e.i(878420),t=e.i(64386),r=e.i(886513),i=e.i(530658),s=e.i(276385),a=e.i(389959),o=e.i(183035),l=e.i(416746),c=e.i(269848),u=e.i(116235);function d(e){return(0,s.jsx)(u.default,(0,t._)((0,n._)({},e),{children:(0,s.jsx)("path",{d:"M12 7.25a4.75 4.75 0 1 1 0 9.5 4.75 4.75 0 0 1 0-9.5Z"})}))}var f=e.i(416298),h=e.i(967629),m=e.i(480028),p=e.i(428596),g=e.i(352758),v=e.i(964269),x=e.i(524101),S={default:"default",loading:"default",error:"negative",success:"positive",warning:"default"},y=(0,a.forwardRef)(function(e,u){var d,y,j,w=e.label,b=e.description,_=e.icon,C=e.id,D=e.onChange,E=e.large,V=e.placeholder,R=e.validationResults,T=e.onValidationError,A=e.dataCy,M=(0,r._)(e,["label","description","icon","id","onChange","large","placeholder","validationResults","onValidationError","dataCy"]),P=(0,p.useIdSeed)(),U=C||P("input"),I=b?P("input-description"):void 0,F=(0,i._)((0,a.useState)(!1),2),z=F[0],H=F[1];(null==R?void 0:R.some(function(e){return"loading"===e.state}))?(d="loading",y=(0,s.jsx)(c.default,{size:16})):(null==R?void 0:R.some(function(e){return"error"===e.state}))?(d="error",j=m.tokens.accentNegativeDefault,y=(0,s.jsx)(f.default,{}),z&&(null==T||T())):(null==R?void 0:R.some(function(e){return"warning"===e.state}))?(d="warning",j=m.tokens.foregroundDimmest,y=(0,s.jsx)(l.default,{})):(null==R?void 0:R.every(function(e){return"success"===e.state}))?(d="success",j=m.tokens.accentPositiveDefault,y=(0,s.jsx)(o.default,{})):d="default";var B=S[d],K=E?m.tokens.fontSizeSubheadDefault:m.tokens.fontSizeDefault;return(0,s.jsxs)("div",{css:(0,h.css)("display:flex;position:relative;flex-direction:column;width:100%;.required{color:",m.tokens.accentNegativeDefault,";font-size:",m.tokens.fontSizeSmall,";}.spacer.row{width:",m.tokens.space4,";}.spacer.col{height:",m.tokens.space4,";}.input-container{position:relative;}.icon-container{display:flex;align-items:center;justify-content:center;position:absolute;top:50%;transform:translateY(-50%);background-color:",m.tokens.backgroundDefault,";border-radius:100%;padding:",m.tokens.space4,";}.icon-container.right{right:",m.tokens.space8,";color:",j,";}.icon-container.left{left:",m.tokens.space4,";background-color:transparent;color:",m.tokens.foregroundDimmest,";}input{font-size:",K,";font-family:",M.monospace?m.tokens.fontFamilyCode:m.tokens.fontFamilyDefault,";line-height:",K,";background-color:",m.tokens.backgroundDefault,";color:",m.tokens.foregroundDefault,";padding:",m.tokens.space8,";padding-left:",_?m.tokens.space24:"auto",";border:1px solid ",m.tokens.outlineDimmest,";border-radius:",m.tokens.borderRadius4,";outline:none;width:100%;box-sizing:border-box;transition:color 0.1s,background-color 0.1s;}input:disabled{opacity:0.5;}input.default:hover{border-color:",m.tokens.accentPrimaryDimmer,";}input.success{border-color:",m.tokens.accentPositiveStronger,";}input.success:hover{border-color:",m.tokens.accentPositiveDimmer,";}input.negative{border-color:",m.tokens.accentNegativeDefault,";}input.negative:hover{border-color:",m.tokens.accentNegativeDimmer,";}input:active,input:focus{border-color:",m.tokens.accentPrimaryDefault,";}"),children:[w?(0,s.jsxs)(s.Fragment,{children:[M.required?(0,s.jsxs)(v.HStack,{spacing:"2px",children:[(0,s.jsx)(x.default,{tag:"label",foreground:z?1:2,size:E?"small":"xsmall",htmlFor:U,children:w}),(0,s.jsx)("span",{className:"required",children:"*"})]}):(0,s.jsx)(x.default,{tag:"label",foreground:z?1:2,size:E?"small":"xsmall",htmlFor:U,children:w}),(0,s.jsx)(g.default,{height:"4px"})]}):null,(0,s.jsxs)("div",{className:"input-container",children:[_?(0,s.jsx)("div",{className:"icon-container left",children:_}):null,(0,s.jsx)("input",(0,t._)((0,n._)({id:U,ref:u,required:M.required||!1,onChange:D,placeholder:void 0===V?"":V,"aria-busy":"loading"===d,"aria-invalid":"error"===d,"aria-describedby":I,"data-cy":A},M),{onFocus:function(e){H(!0),M.onFocus&&M.onFocus(e)},onBlur:function(e){H(!1),M.onBlur&&M.onBlur(e)},clsx:[B,M.className]})),y?(0,s.jsx)("div",{className:"icon-container right",onMouseEnter:function(){return H(!0)},onMouseLeave:function(){return H(!1)},children:y}):null]}),b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.default,{height:"4px"}),(0,s.jsx)(x.default,{id:I,tag:"span",foreground:3,size:E?"medium":"small",children:b})]}):null,(null==R?void 0:R.some(function(e){return!!e.message}))&&z?(0,s.jsx)(k,{validationResults:R}):null]})}),k=function(e){var n=e.validationResults;return(0,s.jsx)("div",{"aria-live":"polite",css:(0,h.css)("width:100%;display:flex;flex-direction:column;position:absolute;top:calc(100% + ",m.tokens.space4,");background-color:",m.tokens.backgroundDefault,";padding:",m.tokens.space8,";border-radius:",m.tokens.borderRadius4,";z-index:9999;box-shadow:",m.tokens.shadow2,";.validation-row{display:flex;align-items:flex-start;width:100%;padding-bottom:",m.tokens.space4,";}.validation-icon-container{flex-shrink:0;padding-right:",m.tokens.space4,";}"),children:n.map(function(e,n){var t;switch(e.state){case"success":t=(0,s.jsx)(o.default,{color:m.tokens.accentPositiveDefault});break;case"error":t=(0,s.jsx)(f.default,{color:m.tokens.accentNegativeDefault});break;case"warning":t=(0,s.jsx)(l.default,{color:m.tokens.foregroundDimmest});break;default:t=(0,s.jsx)(d,{color:m.tokens.foregroundDimmest})}return(0,s.jsxs)("div",{className:"validation-row",children:[(0,s.jsx)("div",{className:"validation-icon-container",children:t}),(0,s.jsx)(g.default,{width:"4px"}),(0,s.jsx)(x.default,{foreground:2,size:"small",children:e.message})]},e.state+n.toString())})})};e.s(["default",0,y],448600)},315315,e=>{"use strict";var n=function(e){var n=new Date(e),r=n.getHours(),i=n.getMinutes(),s="AM";return r>=12&&(s="PM"),0==(r%=12)&&(r="12"),i<10&&(i="0"+i),t(e)+" ".concat(r,":").concat(i," ").concat(s)},t=function(e){var n=new Date(e),t=n.getMonth()+1,r=n.getDate(),i=n.getFullYear();return"".concat(t,"/").concat(r,"/").concat(i)};e.s(["formatDate",()=>t,"formatDateTime",()=>n])},315801,e=>{"use strict";function n(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.root,i=t.rootMargin,s=t.threshold;if("undefined"==typeof IntersectionObserver)return function(){};var a=new WeakMap,o=new IntersectionObserver(function(e){e.forEach(function(e){var t=a.get(e.target);if(!!t!==e.isIntersecting)if(e.isIntersecting){var r=n(e);"function"==typeof r?a.set(e.target,r):o.unobserve(e.target)}else t&&(t(e),a.delete(e.target))})},{root:r,rootMargin:i,threshold:void 0===s?1:s});return o.observe(e),function(){return o.disconnect()}}e.s(["inView",()=>n])},467951,e=>{"use strict";var n=e.i(530658),t=e.i(389959),r=e.i(315801);function i(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.root,a=i.margin,o=i.amount,l=i.once,c=void 0!==l&&l,u=(0,n._)((0,t.useState)(!1),2),d=u[0],f=u[1];return(0,t.useEffect)(function(){if(e.current&&(!c||!d)){var n;return(0,r.inView)(e.current,function(){return f(!0),c?void 0:function(){return f(!1)}},{root:null!=(n=null==s?void 0:s.current)?n:void 0,rootMargin:a,threshold:o})}},[s,e,a,c,o,d]),d}e.s(["useInView",()=>i])},354429,e=>{"use strict";var n=/^[a-zA-Z_][a-zA-Z0-9_]*$/;e.s(["POSIX_ENV_VAR_ERROR",()=>"Use only letters, numbers, and underscores (must start with a letter or underscore)","POSIX_ENV_VAR_PATTERN",()=>n])},448337,e=>{"use strict";var n=e.i(878420),t=e.i(569384),r=e.i(973245),i=e.i(304277);e.i(566901);var s=e.i(951262);function a(){var e=(0,t._)(["\n  fragment SharedSecret on SharedSecret {\n    id\n    name\n    description\n    version\n    value\n    timeCreated\n    timeUpdated\n    links {\n      items {\n        id\n        resource {\n          __typename\n          ... on Repl {\n            id\n            url\n            title\n            iconUrl\n          }\n        }\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        nextCursor\n        previousCursor\n      }\n      totalCount\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return a=function(){return e},e}function o(){var e=(0,t._)(["\n  query AccountSecrets($secretsInput: SecretsInput) {\n    currentUser {\n      id\n      secrets(input: $secretsInput) {\n        ... on SharedSecretConnection {\n          items {\n            ...SharedSecret\n          }\n          pageInfo {\n            hasNextPage\n            hasPreviousPage\n            nextCursor\n            previousCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return o=function(){return e},e}function l(){var e=(0,t._)(["\n  mutation CreateSharedSecrets($input: CreateSharedSecretsInput!) {\n    createSharedSecrets(input: $input) {\n      __typename\n      ... on CreateSharedSecretsResult {\n        createdSecrets {\n          ...SharedSecret\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return l=function(){return e},e}function c(){var e=(0,t._)(["\n  mutation UpdateSharedSecrets($input: UpdateSharedSecretsInput!) {\n    updateSharedSecrets(input: $input) {\n      __typename\n      ... on UpdateSharedSecretsResult {\n        updatedSecrets {\n          ...SharedSecret\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,t._)(["\n  mutation DeleteSharedSecret($id: ID!) {\n    deleteSharedSecret(id: $id) {\n      __typename\n      ... on DeleteSharedSecretResult {\n        __typename\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},f=(0,r.gql)(a()),h=(0,r.gql)(o(),f);function m(e){var t=(0,n._)({},d,e);return i.useQuery(h,t)}var p=(0,r.gql)(l(),f);function g(e){var t=(0,n._)({},d,e);return s.useMutation(p,t)}var v=(0,r.gql)(c(),f);function x(e){var t=(0,n._)({},d,e);return s.useMutation(v,t)}var S=(0,r.gql)(u());function y(e){var t=(0,n._)({},d,e);return s.useMutation(S,t)}e.s(["SharedSecretFragmentDoc",()=>f,"useAccountSecretsQuery",()=>m,"useCreateSharedSecretsMutation",()=>g,"useDeleteSharedSecretMutation",()=>y,"useUpdateSharedSecretsMutation",()=>x])},466640,e=>{"use strict";var n=e.i(297083),t=e.i(721281),r=e.i(878420),i=e.i(64386),s=e.i(530658),a=e.i(346715),o=e.i(817556),l=e.i(276385),c=e.i(87995),u=e.i(389959),d=e.i(830675),f=e.i(417751),h=e.i(15053),m=e.i(448337),p=e.i(368964),g=e.i(204977),v=e.i(712771),x=e.i(979530),S=e.i(995691),y=e.i(40916),k=e.i(491194),j=e.i(709485),w=e.i(47503),b=e.i(222342),_=e.i(858248),C=e.i(354429),D=e.i(967629),E=e.i(480028),V=e.i(877249),R=e.i(446530),T=e.i(173703),A=e.i(613355),M=e.i(140487),P=e.i(258941),U=e.i(88619),I=e.i(939562),F=e.i(887877),z=e.i(136540),H=e.i(607278),B=e.i(818503),K=e.i(739521),L=e.i(604963),N=e.i(960178),O=e.i(795581),W=e.i(625484),q=e.i(418944),Z=(0,R.cssRecord)({root:[A.rcss.gap(16)]}),$=(0,R.cssRecord)({root:[A.rcss.flex.column,A.rcss.p(8),A.rcss.colWithGap(8)],clickableText:[A.rcss.color.accentPrimaryStronger,A.rcss.display.flex,A.rcss.cursor.pointer],disclaimer:[A.rcss.gap(4)],list:[{li:[A.rcss.flex.row,A.rcss.align.center,A.rcss.gap(4)]}]}),Y=function(e){var n=e.name,t=e.links,r=e.isOpen,i=e.onClose,a=e.onDelete,o=e.isLoading,c=(0,s._)((0,u.useState)(!1),2),d=c[0],f=c[1];return(0,l.jsx)(K.Modal,{isOpen:r,onRequestClose:function(){return i()},css:Z.root,children:(0,l.jsx)(P.default,{prompt:"Delete ".concat(n,"?"),desc:(0,l.jsxs)(l.Fragment,{children:[t&&t.totalCount>0?(0,l.jsxs)(L.PopoverTrigger,{label:"affected-repls",isOpen:d,onOpenChange:f,children:[(0,l.jsxs)("div",{children:[t.totalCount," Repl",1===t.totalCount?"":"s"," ","will immediately lose access to this secret"]}),(0,l.jsx)(ee,{links:t})]}):"No Apps are currently using this secret",(0,l.jsx)("br",{}),"This action cannot be undone."]}),onConfirm:a,onCancel:i,confirmText:"Yes, delete this secret",icon:(0,l.jsx)(k.default,{}),danger:!0,loading:o})})},G=(0,D.css)([A.rcss.border({color:E.tokens.outlineDimmer,width:1,direction:"bottom"}),{"&:last-child":{borderBottom:"none"}}]),Q=(0,R.cssRecord)({titleWrapper:[A.rcss.align.baseline],section:[A.rcss.borderRadius(12),A.rcss.p(16),A.rcss.flex.column,A.rcss.gap(12),{'*[data-sensitive="true"]':{fontFamily:"text-security-disc"}}],secretList:[A.rcss.borderRadius(),A.rcss.overflow("hidden")],secretItem:[G,A.rcss.align.center,A.rcss.p(8),A.rcss.display.grid,(0,t._)({gridTemplateColumns:"1fr 1fr 140px 50px",minWidth:0,overflow:"hidden"},"@media (max-width: ".concat(V.BREAKPOINTS.mobileMax,"px)"),{gridTemplateColumns:"1fr 2fr auto",gridTemplateRows:"auto auto",gridTemplateAreas:'\n          "name name edit"\n          "value value timestamp"\n        ',gap:"8px"})],secretValue:[A.rcss.display.grid,A.rcss.gap(4),A.rcss.overflow("hidden"),(0,t._)({gridTemplateColumns:"min-content minmax(50px, 1fr) min-content",minWidth:0,width:"100%","& > span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",minWidth:0,display:"block",width:"100%"}},"@media (max-width: ".concat(V.BREAKPOINTS.mobileMax,"px)"),{gridArea:"value"})],secretValueWrapper:[A.rcss.overflow("hidden"),A.rcss.width("100%"),{textOverflow:"ellipsis",minWidth:0}],secretValueText:[A.rcss.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block",width:"100%",maxWidth:"100%",minWidth:0}],secretName:[A.rcss.overflow("hidden"),A.rcss.width("100%"),(0,t._)({textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block",minWidth:0,maxWidth:"100%"},"@media (max-width: ".concat(V.BREAKPOINTS.mobileMax,"px)"),{gridArea:"name",fontWeight:500})],secretTimestamp:[A.rcss.color.foregroundDimmer,(0,t._)({},"@media (max-width: ".concat(V.BREAKPOINTS.mobileMax,"px)"),{gridArea:"timestamp",textAlign:"right",fontSize:"0.75rem",whiteSpace:"nowrap"})],emptyState:[A.rcss.center,A.rcss.border({color:E.tokens.outlineDefault,width:1,style:"dashed"}),A.rcss.borderRadius(4),A.rcss.py(24),A.rcss.px(12)],secretEditContainer:[(0,t._)({},"@media (max-width: ".concat(V.BREAKPOINTS.mobileMax,"px)"),{gridArea:"edit",justifySelf:"end"})]}),X=function(e){var n=e.value,t=(0,s._)((0,u.useState)(!1),2),r=t[0],i=t[1];return(0,l.jsxs)(W.View,{css:Q.secretValue,row:!0,align:"center","data-sensitive":!r,children:[(0,l.jsx)(U.CopyIconButton,{textToCopy:n}),(0,l.jsx)(W.View,{css:Q.secretValueWrapper,children:(0,l.jsx)("span",{css:Q.secretValueText,children:r?n:"****************"})}),(0,l.jsx)(z.IconButton,{onClick:function(){return i(!r)},alt:r?"Hide":"Show",children:r?(0,l.jsx)(x.default,{size:16}):(0,l.jsx)(v.default,{size:16})})]})},J=(0,R.cssRecord)({root:[A.rcss.display.flex,A.rcss.flex.column,A.rcss.p(8),A.rcss.gap(8),G,{borderBottomWidth:1,borderBottomStyle:"solid"}],formFields:[A.rcss.display.grid,A.rcss.gap(32),{gridTemplateColumns:"2fr 3fr"}],formField:[A.rcss.flex.column,A.rcss.gap(8)],formFieldLabel:[{label:[A.rcss.flex.row,A.rcss.align.center,A.rcss.gap(4)]}],disclaimer:[A.rcss.color.foregroundDimmer,{fontSize:E.tokens.fontSizeSmall,lineHeight:E.tokens.lineHeightSmall}],footer:[A.rcss.display.flex,A.rcss.flex.row,A.rcss.justify.spaceBetween],footerGroup:[A.rcss.display.flex,A.rcss.flex.row,A.rcss.gap(4)]}),ee=function(e){var n=e.links;return(0,l.jsxs)(W.View,{css:$.root,children:[(0,l.jsx)(N.Text,{children:"The following Apps will be affected:"}),(0,l.jsx)("ul",{css:$.list,children:n.items.map(function(e){return"Repl"===e.resource.__typename?(0,l.jsxs)("li",{children:[(0,l.jsx)(q.default,{size:16,iconUrl:e.resource.iconUrl,alt:e.resource.title}),(0,l.jsx)(c.default,{href:e.resource.url,target:"_blank",children:e.resource.title},e.id)]},e.id):null})}),(0,l.jsxs)(N.Text,{color:"dimmer",children:["Please refresh the App page, then Stop and Run the App",(0,l.jsx)("br",{})," to use the updated linked secrets."]})]})},en=function(e){var t=e.name,r=e.value,i=e.onSave,a=e.onCancel,c=e.onDelete,f=e.isNew,h=e.secrets,m=(0,u.useMemo)(function(){return h.find(function(e){return e.name===t})},[h,t]),p=null==m?void 0:m.links,g=(0,b.default)(),S=(0,s._)((0,u.useState)(t),2),y=S[0],j=S[1],w=(0,s._)((0,u.useState)(r),2),_=w[0],D=w[1],E=(0,s._)((0,u.useState)(!0),2),V=E[0],R=E[1],T=(0,s._)((0,u.useState)(!1),2),A=T[0],P=T[1],U=(0,s._)((0,u.useState)(!1),2),K=U[0],N=U[1],q=(0,s._)((0,u.useState)(!1),2),Z=q[0],G=q[1],Q=(0,u.useMemo)(function(){return null!==y.match(C.POSIX_ENV_VAR_PATTERN)},[y]),X=(0,u.useMemo)(function(){return!h.some(function(e){return e.name===y&&e.name!==t})},[t,y,h]),en=(0,s._)((0,u.useState)(!1),2),et=en[0],er=en[1],ei=(0,s._)((0,u.useState)(null),2),es=ei[0],ea=ei[1];(0,u.useEffect)(function(){X?!Q&&y?ea(C.POSIX_ENV_VAR_ERROR):ea(null):ea("Key must be unique")},[X,Q,y]);var eo=(0,u.useCallback)(function(){return(0,n._)(function(){var e;return(0,o._)(this,function(n){switch(n.label){case 0:G(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,c()];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),d.captureException(e),g.showError("Something went wrong. Please try again."),[3,4];case 4:return G(!1),[2]}})})()},[c,g]),el=(0,u.useCallback)(function(){return(0,n._)(function(){return(0,o._)(this,function(e){switch(e.label){case 0:if(!X||!Q)return[2];P(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,i({name:y,value:_})];case 2:return e.sent(),[3,4];case 3:return ea(e.sent().message),[3,4];case 4:return P(!1),[2]}})})()},[X,Q,y,_,i]);return(0,l.jsxs)(F.Form,{css:J.root,onSubmit:function(e){e.preventDefault(),el()},children:[(0,l.jsxs)(W.View,{css:J.formFields,children:[(0,l.jsx)(W.View,{css:J.formField,children:(0,l.jsxs)(O.TextField,{validate:function(){return X?!Q&&y?C.POSIX_ENV_VAR_ERROR:void 0:"Key must be unique"},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"secretName",value:y,onChange:function(e){return j(e)},isInvalid:null!==es,children:[(0,l.jsx)(B.Label,{color:"dimmer",multiline:!1,css:J.formFieldLabel,children:"Key"}),(0,l.jsx)(H.Input,{autoFocus:!0,autoComplete:"off","data-1p-ignore":!0}),(0,l.jsx)(I.FieldError,{children:es})]})}),(0,l.jsx)(W.View,{css:J.formField,children:(0,l.jsxs)(O.TextField,{isRequired:!0,minLength:1,name:"secretValue",value:_,onChange:function(e){return D(e)},children:[(0,l.jsxs)(B.Label,{color:"dimmer",multiline:!1,css:J.formFieldLabel,children:["Value"," ",(0,l.jsx)(z.IconButton,{alt:V?"Hide":"Show",size:12,onClick:function(){return R(!V)},children:V?(0,l.jsx)(x.default,{}):(0,l.jsx)(v.default,{})})]}),(0,l.jsx)(H.Input,{"data-sensitive":V,autoComplete:"off"})]})})]}),(0,l.jsx)(W.View,{css:J.disclaimer,children:(0,l.jsx)(l.Fragment,{children:p&&p.totalCount>0?(0,l.jsxs)(W.View,{css:$.disclaimer,row:!0,align:"center",children:[(0,l.jsxs)(L.PopoverTrigger,{label:"affected-repls",isOpen:et,onOpenChange:er,placement:"bottom start",children:[(0,l.jsxs)("span",{css:$.clickableText,children:[p.totalCount," Repl",1===p.totalCount?"":"s"," "]}),(0,l.jsx)(ee,{links:p})]}),"will be affected by this change."]}):null})}),(0,l.jsxs)(W.View,{css:J.footer,children:[f?(0,l.jsx)("div",{}):(0,l.jsx)(M.Button,{text:"Delete",colorway:"negative",onClick:function(){return N(!0)},iconLeft:(0,l.jsx)(k.default,{})}),(0,l.jsxs)(W.View,{css:J.footerGroup,children:[(0,l.jsx)(M.Button,{text:"Cancel",onClick:a,disabled:A}),(0,l.jsx)(M.Button,{text:"Save",colorway:"primary",loading:A,disabled:!X||!Q||!y.length,onClick:el,type:"submit"})]})]}),(0,l.jsx)(Y,{name:t,links:p,isOpen:K,onClose:function(){return N(!1)},onDelete:eo,isLoading:Z})]})},et=function(){var e=(0,w.useCurrentUserId)(),n=(0,b.default)().showError,t=(0,s._)((0,m.useCreateSharedSecretsMutation)({update:function(t,s){var o,l=s.data;if((null==l||null==(o=l.createSharedSecrets)?void 0:o.__typename)==="CreateSharedSecretsResult"){var c=l.createSharedSecrets.createdSecrets;t.modify({id:t.identify({__typename:"CurrentUser",id:e}),fields:{secrets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[]},n=c.map(function(e){return t.writeFragment({data:e,fragment:m.SharedSecretFragmentDoc})});return(0,i._)((0,r._)({},e),{items:(0,a._)(n).concat((0,a._)(e.items))})}}})}else(null==l?void 0:l.createSharedSecrets)&&n(l.createSharedSecrets.message)},onError:function(e){n("Failed to create secret. Please try again."),d.captureException(e)}}),2);return[t[0],t[1]]},er=function(){var e=(0,w.useCurrentUserId)(),n=(0,b.default)().showError,t=(0,s._)((0,m.useUpdateSharedSecretsMutation)({update:function(t,s){var a,o=s.data;if((null==o||null==(a=o.updateSharedSecrets)?void 0:a.__typename)==="UpdateSharedSecretsResult"){var l=o.updateSharedSecrets.updatedSecrets;t.modify({id:t.identify({__typename:"CurrentUser",id:e}),fields:{secrets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[]},n=e.items.map(function(e){var n=l.find(function(n){return n.id===e.id});return n?t.writeFragment({data:n,fragment:m.SharedSecretFragmentDoc}):e});return(0,i._)((0,r._)({},e),{items:n})}}})}else(null==o?void 0:o.updateSharedSecrets)&&n(o.updateSharedSecrets.message)},onError:function(e){n("Failed to update secret. Please try again."),d.captureException(e)}}),2);return[t[0],t[1]]},ei=function(){var e=(0,w.useCurrentUserId)(),n=(0,b.default)().showError,t=(0,s._)((0,m.useDeleteSharedSecretMutation)({update:function(t,s,a){var o,l=s.data,c=a.variables,u=null==c?void 0:c.id;u&&(null==l||null==(o=l.deleteSharedSecret)?void 0:o.__typename)==="DeleteSharedSecretResult"?t.modify({id:t.identify({__typename:"CurrentUser",id:e}),fields:{secrets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[]},n=(arguments.length>1?arguments[1]:void 0).readField;return(0,i._)((0,r._)({},e),{items:e.items.filter(function(e){return n("id",e)!==u})})}}}):(null==l?void 0:l.deleteSharedSecret)&&"message"in l.deleteSharedSecret&&n(l.deleteSharedSecret.message)},onError:function(e){n("Failed to delete secret. Please try again."),d.captureException(e)}}),2);return[t[0],t[1]]},es=function(e){var t=e.id,a=e.name,c=e.value,d=e.timeUpdated,h=e.onRemoveSecret,m=e.secrets,v="0"===e.version,x=(0,s._)((0,u.useState)(v),2),S=x[0],y=x[1],k=(0,u.useRef)(null),w=(0,u.useCallback)(function(){setTimeout(function(){var e;return null==(e=k.current)?void 0:e.focus()},0)},[]),b=(0,s._)(et(),1)[0],C=(0,s._)(er(),1)[0],D=(0,s._)(ei(),1)[0],E=(0,u.useCallback)(function(e){return(0,n._)(function(){return(0,o._)(this,function(n){switch(n.label){case 0:if(!v)return[3,2];return[4,b({variables:{input:{ownerType:p.SharedSecretOwnerType.Account,secrets:[e]}}})];case 1:return n.sent(),(0,_.track)(j.events.SHARED_SECRETS_USED,{ownerType:"account",action:"create",source:"account"}),[3,4];case 2:return[4,C({variables:{input:{ownerType:p.SharedSecretOwnerType.Account,secrets:[(0,i._)((0,r._)({},e),{id:t})]}}})];case 3:n.sent(),(0,_.track)(j.events.SHARED_SECRETS_USED,{ownerType:"account",action:"update",source:"account"}),n.label=4;case 4:return y(!1),[2]}})})()},[b,t,v,C]),V=(0,u.useCallback)(function(){y(!1),v?h():w()},[v,h,w]);return S||!d?(0,l.jsx)(en,{secrets:m,isNew:v,name:a,value:c,onDelete:function(){return(0,n._)(function(){return(0,o._)(this,function(e){switch(e.label){case 0:return[4,D({variables:{id:t}})];case 1:return e.sent(),(0,_.track)(j.events.SHARED_SECRETS_USED,{ownerType:"account",action:"delete",source:"account"}),h(),[2]}})})()},onSave:E,onCancel:V}):(0,l.jsxs)(W.View,{css:Q.secretItem,children:[(0,l.jsx)(W.View,{css:Q.secretName,children:a}),(0,l.jsx)(X,{value:c}),(0,l.jsxs)(W.View,{css:Q.secretTimestamp,children:["Updated ",(0,f.format)(new Date(d),"MM/dd/yy")]}),(0,l.jsx)(W.View,{css:Q.secretEditContainer,align:"end",children:(0,l.jsx)(z.IconButton,{alt:"Edit",onClick:function(){return y(!0)},ref:k,children:(0,l.jsx)(g.default,{})})})]})};function ea(){var e,n,t,i=(0,m.useAccountSecretsQuery)().data,o=(0,s._)((0,u.useState)((null==i||null==(n=i.currentUser)||null==(e=n.secrets)?void 0:e.__typename)==="SharedSecretConnection"?i.currentUser.secrets.items:[]),2),c=o[0],d=o[1];(0,u.useEffect)(function(){var e,n;d((null==i||null==(n=i.currentUser)||null==(e=n.secrets)?void 0:e.__typename)==="SharedSecretConnection"?i.currentUser.secrets.items:[])},[null==i||null==(t=i.currentUser)?void 0:t.secrets]);var f=(0,u.useCallback)(function(){d(function(e){return[{__typename:"SharedSecret",id:"temp-".concat((0,h.v4)()),name:"",value:"",timeUpdated:new Date().toISOString(),timeCreated:new Date().toISOString(),version:"0"}].concat((0,a._)(e))})},[]),p=(0,u.useCallback)(function(e){d(function(n){return n.filter(function(n,t){return t!==e})})},[]);return(0,l.jsxs)(W.View,{gap:8,children:[(0,l.jsxs)(W.View,{row:!0,justify:"space-between",children:[(0,l.jsx)(W.View,{css:Q.titleWrapper,row:!0,gap:8,children:(0,l.jsx)(N.Text,{variant:"subheadBig",multiline:!1,children:"Account Secrets"})}),(0,l.jsx)(W.View,{align:"center",row:!0,gap:8,children:(0,l.jsx)(M.Button,{text:"New secret",iconLeft:(0,l.jsx)(y.default,{}),size:"small",colorway:"primary",onClick:f})})]}),(0,l.jsxs)(T.ShadesSurface,{css:Q.section,children:["Add secrets to your account to access them in any of your Apps.",0===c.length?(0,l.jsxs)(W.View,{css:Q.emptyState,gap:8,children:[(0,l.jsx)(S.default,{size:24,color:E.tokens.foregroundDimmest}),(0,l.jsx)(N.Text,{color:"dimmer",children:"You haven't added any account secrets yet."})]}):(0,l.jsx)(T.ShadesSurface,{css:Q.secretList,elevate:"2x",children:c.map(function(e,n){return(0,l.jsx)(es,(0,r._)({secrets:c,onRemoveSecret:function(){return p(n)}},e),e.id)})})]})]})}e.s(["default",()=>ea,"useCreateSharedSecretsWithCache",()=>et,"useUpdateSharedSecretsWithCache",()=>er])}]);

//# debugId=e94a6dba-0ebe-a80a-5517-8743eba821d8
//# sourceMappingURL=35357d41fb99b50a.js.map