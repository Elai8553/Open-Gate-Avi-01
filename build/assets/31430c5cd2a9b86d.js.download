;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="ad1c4f32-6b19-feef-8d59-6b398eb686a2")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,644920,968263,e=>{"use strict";var t=e.i(346715);function r(){var e,t,r={promise:new Promise(function(r,n){e=r,t=n}),resolve:function(t){r.isFulfilled=!0,e(t)},reject:function(e){r.isFulfilled=!0,t(e)},isFulfilled:!1};return r}function n(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{wait:0},i=null,o=null,a=null,f=null;if(n.wait<0)throw Error("wait must be 0 or more");if(n.maxWait){if(n.maxWait<0)throw Error("maxWait must be 0 or more");if(n.maxWait<n.wait)throw Error("maxWait must be higher than wait")}function s(){o&&clearTimeout(o),o=null,f=null,i=null,a=null}function u(){if(!i||!o)throw Error("Expected to call debounced function once before flushing");var r=i,n=f;return s(),e.apply(void 0,(0,t._)(n)).then(function(e){return r.resolve(e),e}).catch(function(e){throw r.reject(e),e})}return Object.assign(function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];if(i){if(!o)throw Error("Did not expect to have deferred and no timeout");clearTimeout(o)}else i=r(),a=Date.now();return f=t,o=setTimeout(function(){u()},function(){if(!n.maxWait)return n.wait;if(!a)throw Error("Expected scheduledAt to be a set when getting wait");var e=Date.now()-a;return Math.min(n.maxWait-e,n.wait)}()),i.promise},{isScheduled:function(){return!!(i&&o)},cancel:function(){if(!o||!i)throw Error("Expected to call debounced function once before cancelling");var e=i;s(),e.reject(Error("Debounced function cancelled"))},flush:u})}e.s(["default",()=>r],968263),e.s(["default",()=>n],644920)},995683,e=>{"use strict";var t=e.i(331762),r=e.i(904851),n=e.i(90659),i=e.i(721281),o=e.i(167626),a=e.i(119468),f=function(){function e(n,f){if((0,r._)(this,e),(0,i._)(this,"asEncoding",{}),(0,i._)(this,"asBuffer",null),f&&"string"==typeof n)this.asEncoding[f]=n;else if(null==n)this.asBuffer=t.Buffer.alloc(0);else if((0,o._)(n,t.Buffer))this.asBuffer=n;else if("string"==typeof n)this.asEncoding.utf8=n;else if((0,o._)(n,ArrayBuffer))this.asBuffer=t.Buffer.from(n);else{if((0,o._)(n,e))return n;(0,o._)(n,Uint8Array)?this.asBuffer=t.Buffer.from(n):(void 0===n?"undefined":(0,a._)(n))==="object"&&"object"===(0,a._)(n.asEncoding)&&null!==n.asEncoding&&((0,o._)(n.asBuffer,t.Buffer)||null===n.asBuffer)&&(this.asBuffer=n.asBuffer||null,"string"==typeof n.asEncoding.base64&&(this.asEncoding={base64:n.asEncoding.base64}),"string"==typeof n.asEncoding.utf8&&(this.asEncoding={utf8:n.asEncoding.utf8}))}}return(0,n._)(e,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";if(void 0!==this.asEncoding[e])return this.asEncoding[e];var t=this.toBuffer().toString(e);return this.asEncoding[e]=t,t}},{key:"toJSON",value:function(){return{asEncoding:{base64:this.toString("base64")},asBuffer:null}}},{key:"length",get:function(){return void 0!==this.asEncoding.utf8?this.asEncoding.utf8.length:this.toBuffer().length}},{key:"toBuffer",value:function(){if(this.asBuffer)return this.asBuffer;for(var e in this.asEncoding){var r=this.asEncoding[e];if("string"==typeof r){var n=t.Buffer.from(r,e);return this.asBuffer=n,n}}return this.asBuffer=t.Buffer.alloc(0),this.asBuffer}}],[{key:"from",value:function(t,r){return new e(t,r)}},{key:"isBuffer",value:function(t){return(0,o._)(t,e)}}]),e}();e.s(["default",()=>f])},328751,676480,e=>{"use strict";var t,r=e.i(399119),n=e.i(904851),i=e.i(90659),o=e.i(445789),a=e.i(167626),f=e.i(530658),s=e.i(346715),u=e.i(179302),c=e.i(753950),h=e.i(66796),l=(e.i(486701),e.i(433772),function(){function e(t,r,i,o){(0,n._)(this,e),this.fromA=t,this.toA=r,this.fromB=i,this.toB=o}return(0,i._)(e,[{key:"offset",value:function(t,r){return new e(this.fromA+t,this.toA+t,this.fromB+r,this.toB+r)}}]),e}());function d(e,t,r,n,i,o){if(e==n)return[];var a=b(e,t,r,n,i,o),s=B(e,t+a,r,n,i+a,o);t+=a,r-=s,i+=a;var u=r-t,c=(o-=s)-i;if(!u||!c)return[new l(t,r,i,o)];if(u>c){var h=e.slice(t,r).indexOf(n.slice(i,o));if(h>-1)return[new l(t,t+h,i,i),new l(t+h+c,r,o,o)]}else if(c>u){var v=n.slice(i,o).indexOf(e.slice(t,r));if(v>-1)return[new l(t,t,i,i+v),new l(r,r,i+v+u,o)]}if(1==u||1==c)return[new l(t,r,i,o)];var A=function e(t,r,n,i,o,a){var f=n-r,s=a-o;if(f<s){var u=e(i,o,a,t,r,n);return u&&[u[1],u[0],u[2]]}return f<4||2*s<f?null:w(t,r,n,i,o,a,Math.floor(f/4),-1)}(e,t,r,n,i,o);if(A){var y=(0,f._)(A,3),C=y[0],x=y[1],E=y[2];return d(e,t,C,n,i,x).concat(d(e,C+E,r,n,x+E,o))}return function(e,t,r,n,i,o){var a=r-t,f=o-i;if(m<1e9&&Math.min(a,f)>16*m)return Math.min(a,f)>64*m?[new l(t,r,i,o)]:k(e,t,r,n,i,o);var s=Math.ceil((a+f)/2);g.reset(s),p.reset(s);for(var u=function(r,o){return e.charCodeAt(t+r)==n.charCodeAt(i+o)},c=function(t,i){return e.charCodeAt(r-t-1)==n.charCodeAt(o-i-1)},h=(a-f)%2!=0?p:null,v=h?null:g,A=0;A<s;A++){if(A>m)return k(e,t,r,n,i,o);var b=g.advance(A,a,f,s,h,!1,u)||p.advance(A,a,f,s,v,!0,c);if(b)return function(e,t,r,n,i,o,a,f){var s=!1;return(O(e,n)||++n!=r||(s=!0),O(i,f)||++f!=a||(s=!0),s)?[new l(t,r,o,a)]:d(e,t,n,i,o,f).concat(d(e,n,r,i,f,a))}(e,t,r,t+b[0],n,i,o,i+b[1])}return[new l(t,r,i,o)]}(e,t,r,n,i,o)}var m=1e9,v=function(){function e(){(0,n._)(this,e),this.vec=[]}return(0,i._)(e,[{key:"reset",value:function(e){this.len=e<<1;for(var t=0;t<this.len;t++)this.vec[t]=-1;this.vec[e+1]=0,this.start=this.end=0}},{key:"advance",value:function(e,t,r,n,i,o,a){for(var f=-e+this.start;f<=e-this.end;f+=2){for(var s=n+f,u=f==-e||f!=e&&this.vec[s-1]<this.vec[s+1]?this.vec[s+1]:this.vec[s-1]+1,c=u-f;u<t&&c<r&&a(u,c);)u++,c++;if(this.vec[s]=u,u>t)this.end+=2;else if(c>r)this.start+=2;else if(i){var h=n+(t-r)-f;if(h>=0&&h<this.len&&-1!=i.vec[h]){if(o){var l=i.vec[h];if(l>=t-u)return[l,n+l-h]}else if(u>=t-i.vec[h])return[u,c]}}}return null}}]),e}(),g=new v,p=new v;function A(e,t){for(var r=1,n=Math.min(e,t);r<n;)r<<=1;return r}function b(e,t,r,n,i,o){if(t==r||t==o||e.charCodeAt(t)!=n.charCodeAt(i))return 0;for(var a=A(r-t,o-i),f=t,s=i;;){var u=f+a,c=s+a;if(u>r||c>o||e.slice(f,u)!=n.slice(s,c)){if(1==a)return f-t-!O(e,f);a>>=1}else{if(u==r||c==o)return u-t;f=u,s=c}}}function B(e,t,r,n,i,o){if(t==r||i==o||e.charCodeAt(r-1)!=n.charCodeAt(o-1))return 0;for(var a=A(r-t,o-i),f=r,s=o;;){var u=f-a,c=s-a;if(u<t||c<i||e.slice(u,f)!=n.slice(c,s)){if(1==a)return r-f-!O(e,f);a>>=1}else{if(u==t||c==i)return r-u;f=u,s=c}}}function w(e,t,r,n,i,o,a,f){for(var s=n.slice(i,o),u=null;;){if(u||a<f)return u;for(var c=t+a;;){!O(e,c)&&c++;var h=c+a;if(O(e,h)||(h+=h==c+1?1:-1),h>=r)break;for(var l=e.slice(c,h),d=-1;-1!=(d=s.indexOf(l,d+1));){var m=b(e,h,r,n,i+d+l.length,o),v=B(e,t,c,n,i,i+d),g=l.length+m+v;(!u||u[2]<g)&&(u=[c-v,i+d-v,g])}c=h}if(f<0)return u;a>>=1}}function k(e,t,r,n,i,o){var a,s=r-t,u=o-i;if(s<u){var c=w(n,i,o,e,t,r,Math.floor(s/6),50);a=c&&[c[1],c[0],c[2]]}else a=w(e,t,r,n,i,o,Math.floor(u/6),50);if(!a)return[new l(t,r,i,o)];var h=(0,f._)(a,3),m=h[0],v=h[1],g=h[2];return d(e,t,m,n,i,v).concat(d(e,m+g,r,n,v+g,o))}function y(e,t){for(var r=1;r<e.length;r++){var n=e[r-1],i=e[r];n.toA>i.fromA-t&&n.toB>i.fromB-t&&(e[r-1]=new l(n.fromA,i.toA,n.fromB,i.toB),e.splice(r--,1))}}try{t=RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch(e){}function C(e){return e>48&&e<58||e>64&&e<91||e>96&&e<123}function x(e,r){if(r==e.length)return 0;var n=e.charCodeAt(r);return n<192?+!!C(n):t?_(n)&&r!=e.length-1?2*!!t.test(e.slice(r,r+2)):+!!t.test(String.fromCharCode(n)):0}function E(e,r){if(!r)return 0;var n=e.charCodeAt(r-1);return n<192?+!!C(n):t?S(n)&&1!=r?2*!!t.test(e.slice(r-2,r)):+!!t.test(String.fromCharCode(n)):0}function M(e,t,r){if(t==e.length||!E(e,t))return t;for(var n=t,i=t+r;;){var o=x(e,n);if(!o)return n;if((n+=o)>i)return t}}function D(e,t,r){if(!t||!x(e,t))return t;for(var n=t,i=t-r;;){var o=E(e,n);if(!o)return n;if((n-=o)<i)return t}}var _=function(e){return e>=55296&&e<=56319},S=function(e){return e>=56320&&e<=57343};function O(e,t){return!t||t==e.length||!_(e.charCodeAt(t-1))||!S(e.charCodeAt(t))}function L(e,t,r){var n;return m=(null!=(n=null==r?void 0:r.scanLimit)?n:1e9)>>1,function(e,t,r){for(;;){y(r,1);for(var n=!1,i=0;i<r.length;i++){var o=r[i],a=void 0,f=void 0;(a=b(e,o.fromA,o.toA,t,o.fromB,o.toB))&&(o=r[i]=new l(o.fromA+a,o.toA,o.fromB+a,o.toB)),(f=B(e,o.fromA,o.toA,t,o.fromB,o.toB))&&(o=r[i]=new l(o.fromA,o.toA-f,o.fromB,o.toB-f));var s=o.toA-o.fromA,u=o.toB-o.fromB;if(!s||!u){var c=o.fromA-(i?r[i-1].toA:0),h=(i<r.length-1?r[i+1].fromA:e.length)-o.toA;if(c&&h){var d=s?e.slice(o.fromA,o.toA):t.slice(o.fromB,o.toB);c<=d.length&&e.slice(o.fromA-c,o.fromA)==d.slice(d.length-c)?(r[i]=new l(o.fromA-c,o.toA-c,o.fromB-c,o.toB-c),n=!0):h<=d.length&&e.slice(o.toA,o.toA+h)==d.slice(0,h)&&(r[i]=new l(o.fromA+h,o.toA+h,o.fromB+h,o.toB+h),n=!0)}}}if(!n)break}return r}(e,t,d(e,0,e.length,t,0,t.length))}function T(e,t,r){return function(e,t,r){for(var n=0,i=0;i<e.length;i++){var o=e[i],a=o.toA-o.fromA,s=o.toB-o.fromB;if(a&&s||a>3||s>3){var u=i==e.length-1?t.length:e[i+1].fromA,c=o.fromA-n,h=u-o.toA,d=D(t,o.fromA,Math.min(c,5)),m=M(t,o.toA,Math.min(h,5)),v=o.fromA-d,g=m-o.toA;if(!a||!s){var p=Math.max(a,s),A=(0,f._)(a?[t,o.fromA,o.toA]:[r,o.fromB,o.toB],3),b=A[0],B=A[1],w=A[2],k=void 0,C=void 0;v&&g?(p>v&&t.slice(d,o.fromA)==b.slice(w-v,w)?(d=(o=e[i]=new l(d,d+a,o.fromB-v,o.toB-v)).fromA,m=M(t,o.toA,Math.min(u-o.toA,5))):p>g&&t.slice(o.toA,m)==b.slice(B,B+g)&&(m=(o=e[i]=new l(m-a,m,o.fromB+g,o.toB+g)).toA,d=D(t,o.fromA,Math.min(o.fromA-n,5))),v=o.fromA-d,g=m-o.toA):!v&&!g&&(C=o.fromA-(k=function(e,t,r){for(var n=t,i=t-r;;){var o=n?e.charCodeAt(n-1):10;if(10==o)return n;if(--n<i||32!=o&&9!=o)return t}}(t,o.fromA,c)))&&t.slice(k,o.fromA)==b.slice(w-C,w)&&(o=e[i]=new l(k,k+a,o.fromB-C,o.toB-C))}(v||g)&&(o=e[i]=new l(o.fromA-v,o.toA+g,o.fromB-v,o.toB+g)),n=o.toA}}return y(e,3),e}(L(e,t,r),e,t)}var R=c.Facet.define({combine:function(e){return e[0]}}),V=c.StateEffect.define(),G=c.StateField.define({create:function(e){return null},update:function(e,t){var r=!0,n=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var f=o.value;f.is(V)&&(e=f.value)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return e}}),N=function(){function e(t,r,i,o,a){(0,n._)(this,e),this.changes=t,this.fromA=r,this.toA=i,this.fromB=o,this.toB=a}return(0,i._)(e,[{key:"offset",value:function(t,r){return t||r?new e(this.changes,this.fromA+t,this.toA+t,this.fromB+r,this.toB+r):this}},{key:"endA",get:function(){return Math.max(this.fromA,this.toA-1)}},{key:"endB",get:function(){return Math.max(this.fromB,this.toB-1)}}],[{key:"build",value:function(e,t,r){return j(T(e.toString(),t.toString(),r),e,t,0,0)}},{key:"updateA",value:function(e,t,r,n,i){return q(P(e,n,!0,r.length),e,t,r,i)}},{key:"updateB",value:function(e,t,r,n,i){return q(P(e,n,!1,t.length),e,t,r,i)}}]),e}();function F(e,t,r,n){var i=r.lineAt(e),o=n.lineAt(t);return i.to==e&&o.to==t&&e<r.length&&t<n.length?[e+1,t+1]:[i.from,o.from]}function W(e,t,r,n){var i=r.lineAt(e),o=n.lineAt(t);return i.from==e&&o.from==t?[e,t]:[i.to+1,o.to+1]}function j(e,t,r,n,i){for(var o=[],a=0;a<e.length;a++){for(var s=e[a],u=(0,f._)(F(s.fromA+n,s.fromB+i,t,r),2),c=u[0],h=u[1],l=(0,f._)(W(s.toA+n,s.toB+i,t,r),2),d=l[0],m=l[1],v=[s.offset(-c+n,-h+i)];a<e.length-1;){var g,p=e[a+1],A=(0,f._)(F(p.fromA+n,p.fromB+i,t,r),2),b=A[0],B=A[1];if(b>d+1&&B>m+1)break;v.push(p.offset(-c+n,-h+i)),d=(g=(0,f._)(W(p.toA+n,p.toB+i,t,r),2))[0],m=g[1],a++}o.push(new N(v,c,Math.max(c,d),h,Math.max(h,m)))}return o}function U(e,t,r,n){for(var i=0,o=e.length;;){if(i==o){var a,s=0,u=0;i&&(s=(a=e[i-1]).toA,u=a.toB);var c=t-(r?s:u);return[s+c,u+c]}var h=i+o>>1,l=e[h],d=(0,f._)(r?[l.fromA,l.toA]:[l.fromB,l.toB],2),m=d[0],v=d[1];if(m>t)o=h;else{if(!(v<=t))return n?[l.fromA,l.fromB]:[l.toA,l.toB];i=h+1}}}function P(e,t,r,n){var i=[];return t.iterChangedRanges(function(o,a,s,u){var c=0,h=r?t.length:n,l=0,d=r?n:t.length;o>1e3&&(c=(m=(0,f._)(U(e,o-1e3,r,!0),2))[0],l=m[1]),a<t.length-1e3&&(h=(v=(0,f._)(U(e,a+1e3,r,!1),2))[0],d=v[1]);var m,v,g,p=u-s-(a-o),A=(0,f._)(r?[p,0]:[0,p],2),b=A[0],B=A[1];i.length&&(g=i[i.length-1]).toA>=c?i[i.length-1]={fromA:g.fromA,fromB:g.fromB,toA:h,toB:d,diffA:g.diffA+b,diffB:g.diffB+B}:i.push({fromA:c,toA:h,fromB:l,toB:d,diffA:b,diffB:B})}),i}function q(e,t,r,n,i){if(!e.length)return t;for(var o=[],a=0,f=0,s=0,u=0;;a++){for(var c=a==e.length?null:e[a],h=c?c.fromA+f:r.length,l=c?c.fromB+s:n.length;u<t.length;){var d=t[u];if(d.toA+f>h||d.toB+s>l)break;o.push(d.offset(f,s)),u++}if(!c)break;var m=c.toA+f+c.diffA,v=c.toB+s+c.diffB,g=T(r.sliceString(h,m),n.sliceString(l,v),i),p=!0,A=!1,b=void 0;try{for(var B,w=j(g,r,n,h,l)[Symbol.iterator]();!(p=(B=w.next()).done);p=!0){var k=B.value;o.push(k)}}catch(e){A=!0,b=e}finally{try{p||null==w.return||w.return()}finally{if(A)throw b}}for(f+=c.diffA,s+=c.diffB;u<t.length;){var y=t[u];if(y.fromA+f>m&&y.fromB+s>v)break;u++}}return o}var z={scanLimit:500},H=u.ViewPlugin.fromClass(function(){function e(t){var r;(0,n._)(this,e),r=X(t),this.deco=r.deco,this.gutter=r.gutter}return(0,i._)(e,[{key:"update",value:function(e){var t,r,n,i,o;(e.docChanged||e.viewportChanged||(r=e.startState,n=e.state,r.field(G,!1)!=n.field(G,!1))||(i=e.startState,o=e.state,i.facet(R)!=o.facet(R)))&&(t=X(e.view),this.deco=t.deco,this.gutter=t.gutter)}}]),e}(),{decorations:function(e){return e.deco}}),I=c.Prec.low((0,u.gutter)({class:"cm-changeGutter",markers:function(e){var t;return(null==(t=e.plugin(H))?void 0:t.gutter)||c.RangeSet.empty}})),K=u.Decoration.line({class:"cm-changedLine"}),Y=u.Decoration.mark({class:"cm-changedText"}),J=u.Decoration.mark({tagName:"ins",class:"cm-insertedLine"}),$=u.Decoration.mark({tagName:"del",class:"cm-deletedLine"}),Q=new(function(e){function t(){var e;return(0,n._)(this,t),e=(0,r._)(this,t,arguments),e.elementClass="cm-changedLineGutter",e}return(0,o._)(t,e),t}(u.GutterMarker));function X(e){var t=e.state.field(G),r=e.state.facet(R),n=r.side,i=r.highlightChanges,o=r.markGutter,a="a"==n,f=new c.RangeSetBuilder,s=o?new c.RangeSetBuilder:null,u=e.viewport,h=u.from,l=u.to,d=!0,m=!1,v=void 0;try{for(var g,p=t[Symbol.iterator]();!(d=(g=p.next()).done);d=!0){var A=g.value;if((a?A.fromA:A.fromB)>=l)break;(a?A.toA:A.toB)>h&&function(e,t,r,n,i,o){var a=r?e.fromA:e.fromB,f=r?e.toA:e.toB,s=0;if(a!=f){i.add(a,a,K),i.add(a,f,r?$:J),o&&o.add(a,a,Q);for(var u=t.iterRange(a,f-1),c=a;!u.next().done;){if(u.lineBreak){c++,i.add(c,c,K),o&&o.add(c,c,Q);continue}var h=c+u.value.length;if(n)for(;s<e.changes.length;){var l=e.changes[s],d=a+(r?l.fromA:l.fromB),m=a+(r?l.toA:l.toB),v=Math.max(c,d),g=Math.min(h,m);if(v<g&&i.add(v,g,Y),m<h)s++;else break}c=h}}}(A,e.state.doc,a,i,f,s)}}catch(e){m=!0,v=e}finally{try{d||null==p.return||p.return()}finally{if(m)throw v}}return{deco:f.finish(),gutter:s&&s.finish()}}var Z=function(e){function t(e){var i;return(0,n._)(this,t),(i=(0,r._)(this,t)).height=e,i}return(0,o._)(t,e),(0,i._)(t,[{key:"eq",value:function(e){return this.height==e.height}},{key:"toDOM",value:function(){var e=document.createElement("div");return e.className="cm-mergeSpacer",e.style.height=this.height+"px",e}},{key:"updateDOM",value:function(e){return e.style.height=this.height+"px",!0}},{key:"estimatedHeight",get:function(){return this.height}},{key:"ignoreEvent",value:function(){return!1}}]),t}(u.WidgetType),ee=c.StateEffect.define({map:function(e,t){return e.map(t)}}),et=c.StateField.define({create:function(){return u.Decoration.none},update:function(e,t){var r=!0,n=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var f=o.value;if(f.is(ee))return f.value}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return e.map(t.changes)},provide:function(e){return u.EditorView.decorations.from(e)}});function er(e,t){if(e.size!=t.size)return!1;for(var r=e.iter(),n=t.iter();r.value;){if(r.from!=n.from||Math.abs(r.value.spec.widget.height-n.value.spec.widget.height)>1)return!1;r.next(),n.next()}return!0}var en=c.StateEffect.define({map:function(e,t){return t.mapPos(e)}}),ei=function(e){function t(e){var i;return(0,n._)(this,t),(i=(0,r._)(this,t)).lines=e,i}return(0,o._)(t,e),(0,i._)(t,[{key:"eq",value:function(e){return this.lines==e.lines}},{key:"toDOM",value:function(e){var t=document.createElement("div");return t.className="cm-collapsedLines",t.textContent="⦚ "+e.state.phrase("$ unchanged lines",this.lines)+" ⦚",t.addEventListener("click",function(t){var r=e.posAtDOM(t.target);e.dispatch({effects:en.of(r)});var n=e.state.facet(R),i=n.side,o=n.sibling;o&&o().dispatch({effects:en.of(function(e,t,r){for(var n=0,i=0,o=0;;o++){var a,s=o<t.length?t[o]:null;if(!s||(r?s.fromA:s.fromB)>=e)return i+(e-n);n=(a=(0,f._)(r?[s.toA,s.toB]:[s.toB,s.toA],2))[0],i=a[1]}}(r,e.state.field(G),"a"==i))})}),t}},{key:"ignoreEvent",value:function(e){return(0,a._)(e,MouseEvent)}},{key:"estimatedHeight",get:function(){return 27}}]),t}(u.WidgetType),eo=c.StateField.define({create:function(e){return u.Decoration.none},update:function(e,t){e=e.map(t.changes);var r=!0,n=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(r=(o=a.next()).done);r=!0)!function(){var t=o.value;t.is(en)&&(e=e.update({filter:function(e){return e!=t.value}}))}()}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return e},provide:function(e){return u.EditorView.decorations.from(e)}});function ea(e){var t=e.margin,r=void 0===t?3:t,n=e.minSize,i=void 0===n?4:n;return eo.init(function(e){return function(e,t,r){for(var n=new c.RangeSetBuilder,i="a"==e.facet(R).side,o=e.field(G),a=1,f=0;;f++){var s=f<o.length?o[f]:null,h=f?a+t:1,l=s?e.doc.lineAt(i?s.fromA:s.fromB).number-1-t:e.doc.lines,d=l-h+1;if(d>=r&&n.add(e.doc.line(h).from,e.doc.line(l).to,u.Decoration.replace({widget:new ei(d),block:!0})),!s)break;a=e.doc.lineAt(Math.min(e.doc.length,i?s.toA:s.toB)).number}return n.finish()}(e,r,i)})}var ef=u.EditorView.styleModule.of(new h.StyleModule({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),es=u.EditorView.baseTheme({".cm-mergeView & .cm-scroller, .cm-mergeView &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb2266, #22bb2266) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff8866, #88ff8866) bottom/100% 2px no-repeat"},".cm-insertedLine, .cm-deletedLine":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer"},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"}}),eu=new c.Compartment,ec=new c.Compartment,eh=function(){function e(t){var r=this;(0,n._)(this,e),this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1,this.diffConf=t.diffConfig||z;var i=[c.Prec.low(H),es,ef,et,u.EditorView.updateListener.of(function(e){r.measuring<0&&(e.heightChanged||e.viewportChanged)&&!e.transactions.some(function(e){return e.effects.some(function(e){return e.is(ee)})})&&r.measure()})],o=[R.of({side:"a",sibling:function(){return r.b},highlightChanges:!1!==t.highlightChanges,markGutter:!1!==t.gutter})];!1!==t.gutter&&o.push(I);var a=c.EditorState.create({doc:t.a.doc,selection:t.a.selection,extensions:[t.a.extensions||[],u.EditorView.editorAttributes.of({class:"cm-merge-a"}),ec.of(o),i]}),f=[R.of({side:"b",sibling:function(){return r.a},highlightChanges:!1!==t.highlightChanges,markGutter:!1!==t.gutter})];!1!==t.gutter&&f.push(I);var s=c.EditorState.create({doc:t.b.doc,selection:t.b.selection,extensions:[t.b.extensions||[],u.EditorView.editorAttributes.of({class:"cm-merge-b"}),ec.of(f),i]});this.chunks=N.build(a.doc,s.doc,this.diffConf);var h=[G.init(function(){return r.chunks}),eu.of(t.collapseUnchanged?ea(t.collapseUnchanged):[])];a=a.update({effects:c.StateEffect.appendConfig.of(h)}).state,s=s.update({effects:c.StateEffect.appendConfig.of(h)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";var l=t.orientation||"a-b",d=document.createElement("div");d.className="cm-mergeViewEditor";var m=document.createElement("div");m.className="cm-mergeViewEditor",this.editorDOM.appendChild("a-b"==l?d:m),this.editorDOM.appendChild("a-b"==l?m:d),this.a=new u.EditorView({state:a,parent:d,root:t.root,dispatchTransactions:function(e){return r.dispatch(e,r.a)}}),this.b=new u.EditorView({state:s,parent:m,root:t.root,dispatchTransactions:function(e){return r.dispatch(e,r.b)}}),this.setupRevertControls(!!t.revertControls,"b-to-a"==t.revertControls,t.renderRevertControl),t.parent&&t.parent.appendChild(this.dom),this.scheduleMeasure()}return(0,i._)(e,[{key:"dispatch",value:function(e,t){if(e.some(function(e){return e.docChanged})){var r=e[e.length-1],n=e.reduce(function(e,t){return e.compose(t.changes)},c.ChangeSet.empty(e[0].startState.doc.length));this.chunks=t==this.a?N.updateA(this.chunks,r.newDoc,this.b.state.doc,n,this.diffConf):N.updateB(this.chunks,this.a.state.doc,r.newDoc,n,this.diffConf),t.update((0,s._)(e).concat([r.state.update({effects:V.of(this.chunks)})]));var i=t==this.a?this.b:this.a;i.update([i.state.update({effects:V.of(this.chunks)})]),this.scheduleMeasure()}else t.update(e)}},{key:"reconfigure",value:function(e){var t=this;if("diffConfig"in e&&(this.diffConf=e.diffConfig),"orientation"in e){var r="b-a"!=e.orientation;if(r!=(this.editorDOM.firstChild==this.a.dom.parentNode)){var n=this.a.dom.parentNode,i=this.b.dom.parentNode;n.remove(),i.remove(),this.editorDOM.insertBefore(r?n:i,this.editorDOM.firstChild),this.editorDOM.appendChild(r?i:n),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in e||"renderRevertControl"in e){var o=!!this.revertDOM,a=this.revertToA,f=this.renderRevert;"revertControls"in e&&(o=!!e.revertControls,a="b-to-a"==e.revertControls),"renderRevertControl"in e&&(f=e.renderRevertControl),this.setupRevertControls(o,a,f)}var s="highlightChanges"in e,u="gutter"in e,c="collapseUnchanged"in e;if(s||u||c){var h=[],l=[];if(s||u){var d=this.a.state.facet(R),m=u?!1!==e.gutter:d.markGutter,v=s?!1!==e.highlightChanges:d.highlightChanges;h.push(ec.reconfigure([R.of({side:"a",sibling:function(){return t.b},highlightChanges:v,markGutter:m}),m?I:[]])),l.push(ec.reconfigure([R.of({side:"b",sibling:function(){return t.a},highlightChanges:v,markGutter:m}),m?I:[]]))}if(c){var g=eu.reconfigure(e.collapseUnchanged?ea(e.collapseUnchanged):[]);h.push(g),l.push(g)}this.a.dispatch({effects:h}),this.b.dispatch({effects:l})}this.scheduleMeasure()}},{key:"setupRevertControls",value:function(e,t,r){var n=this;this.revertToA=t,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=r,!e&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):e&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",function(e){return n.revertClicked(e)}),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}},{key:"scheduleMeasure",value:function(){var e=this;if(this.measuring<0){var t=this.dom.ownerDocument.defaultView||window;this.measuring=t.requestAnimationFrame(function(){e.measuring=-1,e.measure()})}}},{key:"measure",value:function(){!function(e,t,r){for(var n=new c.RangeSetBuilder,i=new c.RangeSetBuilder,o=e.state.field(et).iter(),a=t.state.field(et).iter(),f=0,s=0,h=0,l=0,d=e.viewport,m=t.viewport,v=0;;v++){var g=v<r.length?r[v]:null,p=g?g.fromA:e.state.doc.length,A=g?g.fromB:t.state.doc.length;if(f<p){var b=e.lineBlockAt(f).top+h-(t.lineBlockAt(s).top+l);b<-.01?(h-=b,n.add(f,f,u.Decoration.widget({widget:new Z(-b),block:!0,side:-1}))):b>.01&&(l+=b,i.add(s,s,u.Decoration.widget({widget:new Z(b),block:!0,side:-1})))}if(p>f+1e3&&f<d.from&&p>d.from&&s<m.from&&A>m.from){var B=Math.min(d.from-f,m.from-s);f+=B,s+=B,v--}else if(g)f=g.toA,s=g.toB;else break;for(;o.value&&o.from<f;)h-=o.value.spec.widget.height,o.next();for(;a.value&&a.from<s;)l-=a.value.spec.widget.height,a.next()}for(;o.value;)h-=o.value.spec.widget.height,o.next();for(;a.value;)l-=a.value.spec.widget.height,a.next();var w=e.contentHeight+h-(t.contentHeight+l);w<.01?n.add(e.state.doc.length,e.state.doc.length,u.Decoration.widget({widget:new Z(-w),block:!0,side:1})):w>.01&&i.add(t.state.doc.length,t.state.doc.length,u.Decoration.widget({widget:new Z(w),block:!0,side:1}));var k=n.finish(),y=i.finish();er(k,e.state.field(et))||e.dispatch({effects:ee.of(k)}),er(y,t.state.field(et))||t.dispatch({effects:ee.of(y)})}(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}},{key:"updateRevertButtons",value:function(){for(var e=this.revertDOM,t=e.firstChild,r=this.a.viewport,n=this.b.viewport,i=0;i<this.chunks.length;i++){var o=this.chunks[i];if(o.fromA>r.to||o.fromB>n.to)break;if(!(o.fromA<r.from)&&!(o.fromB<n.from)){for(var a=this.a.lineBlockAt(o.fromA).top+"px";t&&+t.dataset.chunk<i;)t=el(t);t&&t.dataset.chunk==String(i)?(t.style.top!=a&&(t.style.top=a),t=t.nextSibling):e.insertBefore(this.renderRevertButton(a,i),t)}}for(;t;)t=el(t)}},{key:"renderRevertButton",value:function(e,t){var r;if(this.renderRevert)r=this.renderRevert();else{r=document.createElement("button");var n=this.a.state.phrase("Revert this chunk");r.setAttribute("aria-label",n),r.setAttribute("title",n),r.textContent=this.revertToLeft?"⇜":"⇝"}return r.style.top=e,r.setAttribute("data-chunk",String(t)),r}},{key:"revertClicked",value:function(e){for(var t,r=e.target;r&&r.parentNode!=this.revertDOM;)r=r.parentNode;if(r&&(t=this.chunks[r.dataset.chunk])){var n=(0,f._)(this.revertToA?[this.b,this.a,t.fromB,t.toB,t.fromA,t.toA]:[this.a,this.b,t.fromA,t.toA,t.fromB,t.toB],6),i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=n[5],h=i.state.sliceDoc(a,Math.max(a,s-1));a!=s&&c<=o.state.doc.length&&(h+=i.state.lineBreak),o.dispatch({changes:{from:u,to:Math.min(o.state.doc.length,c),insert:h},userEvent:"revert"}),e.preventDefault()}}},{key:"destroy",value:function(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}}]),e}();function el(e){var t=e.nextSibling;return e.remove(),t}var ed=c.StateEffect.define();function em(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,f=L(e.toString(),t.toString())[Symbol.iterator]();!(n=(a=f.next()).done);n=!0){var s=a.value,u=s.fromA,h=s.fromB,l=s.toA,d=s.toB;u===l&&r.push({from:u,insert:t.slice(h,d)}),h===d&&r.push({from:u,to:l,insert:""}),u!==l&&h!==d&&r.push({from:u,to:l,insert:t.slice(h,d)})}}catch(e){i=!0,o=e}finally{try{n||null==f.return||f.return()}finally{if(i)throw o}}return c.ChangeSet.of(r,e.length)}(function(e){function t(e){var i;return(0,n._)(this,t),(i=(0,r._)(this,t)).buildDOM=e,i.dom=null,i}(0,o._)(t,e),(0,i._)(t,[{key:"eq",value:function(e){return this.dom==e.dom}},{key:"toDOM",value:function(e){return this.dom||(this.dom=this.buildDOM(e))}}])})(u.WidgetType),e.s(["Change",()=>l,"Chunk",()=>N,"MergeView",()=>eh,"diff",()=>L],676480),e.s(["changeSetFromDiff",()=>em],328751)}]);

//# debugId=ad1c4f32-6b19-feef-8d59-6b398eb686a2
//# sourceMappingURL=ecdd812c7ea1636c.js.map