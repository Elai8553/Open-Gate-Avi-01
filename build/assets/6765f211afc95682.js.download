;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="8316dfd9-0e37-0cbb-9a6f-77f7c5eb2e4b")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,255444,e=>{"use strict";var t=function(e){return{op:"add",path:"run",value:JSON.stringify(e)}},n=function(e){return{op:"add",path:"compile",value:JSON.stringify(e)}},r=function(e){return{op:"remove",path:"string"==typeof e?e:e.join("/"),value:""}},i=function(e){return{op:"add",path:"auth/pageEnabled",value:JSON.stringify(e)}},a=function(e){return{op:"add",path:"auth/buttonEnabled",value:JSON.stringify(e)}},o=function(e){return{path:"deployment/run",op:"add",value:JSON.stringify(["sh","-c",e])}},s=function(e){return{path:"deployment/build",op:"add",value:JSON.stringify(["sh","-c",e])}},l=function(e){return{path:"deployment/ignorePorts",op:"add",value:e.toString()}},u=function(e){return{path:"deployment/deploymentTarget",op:"add",value:JSON.stringify(e)}},c=function(e){return{path:"deployment/publicDir",op:"add",value:JSON.stringify(e)}},d=function(e){return{path:"objectStorage/defaultBucketID",op:"add",value:JSON.stringify(e)}};e.s(["createCompileCommandOp",()=>n,"createDeploymentPublicDirOp",()=>c,"createDeploymentTargetOp",()=>u,"createDeploymentsBuildCommandOp",()=>s,"createDeploymentsIgnorePortsOp",()=>l,"createDeploymentsRunCommandOp",()=>o,"createRunCommandOp",()=>t,"enableAuthButtonOp",()=>a,"enableAuthPageOp",()=>i,"removeFieldOp",()=>r,"setObjectStorageDefaultBucketId",()=>d])},712516,e=>{"use strict";var t=e.i(721281),n=e.i(276385),r=e.i(269848);e.i(282890);var i=e.i(827456),a=e.i(446530),o=e.i(123850),s=e.i(613355),l=e.i(960178),u=e.i(625484),c=e.i(548190),d=(0,o.createCssVarTokens)(["maxWidth"]),p=d.cssVars,f=d.styleTokens,m=(0,a.cssRecord)({container:[s.rcss.width("100%"),s.rcss.minHeight("100%"),s.rcss.center],centeredContent:[s.rcss.width("100%"),s.rcss.maxWidth(f.maxWidth),s.rcss.colWithGap(16),s.rcss.p(16),s.rcss.center],imageWithHeader:[s.rcss.center,s.rcss.flex.shrink(1),s.rcss.textAlign.center],bodyText:[s.rcss.textAlign.center,s.rcss.color.foregroundDimmest]});function h(e){var a=e.pane,o=e.asciiArt,s=e.headerText,d=e.bodyText,f=e.body,h=e.action,g=e.icon,v=e.loading,x=e.maxWidth,y=e.innerRef,b=(0,i.usePaneUIContext)(),S=b.getDescription(a),_=(0,n.jsx)(b.Icon,{pane:a,size:48}),w=null!=f?f:S;void 0!==v&&v?w=(0,n.jsxs)(u.View,{gap:4,align:"center",row:!0,children:[(0,n.jsx)(r.default,{size:16}),(0,n.jsx)(l.Text,{css:m.bodyText,children:"Loading…"})]}):void 0!==d&&(w=(0,n.jsx)(u.View,{children:(0,n.jsx)(l.Text,{css:m.bodyText,multiline:!0,children:d})}));var j=_;return void 0!==g?j=g:void 0!==o&&(j=(0,n.jsx)(c.default,{art:o})),(0,n.jsx)(u.View,{css:m.container,style:(0,t._)({},p.maxWidth,"".concat(void 0===x?600:x,"px")),innerRef:y,children:(0,n.jsxs)(u.View,{css:m.centeredContent,children:[(0,n.jsxs)(u.View,{css:m.imageWithHeader,gap:16,children:[j,(0,n.jsx)(l.Header,{level:1,variant:"subheadBig",multiline:!0,children:null!=s?s:S})]}),w,h]})})}e.s(["default",()=>h])},952685,e=>{"use strict";var t=e.i(389959),n=e.i(205104),r=e.i(529810);function i(e){var i=(0,r.default)().fs,a=(0,t.useCallback)(function(t,r){var a=t.code,o=t.insertAt,s=t.newLine,l=void 0===s||s;if(!e||(0,n.isMedia)(e)||(0,n.isDrawFile)(e)||(0,n.isBinary)(e))throw Error("Invalid file, this should never happen");if(0!==a.length)var u=i.watchTextFile(e,{onReady:function(t){var n=t.initialContent,s=t.writeChange,c=n.toString(),d="end"===o?c.length:o,p=a;l&&(0!==d&&d!==c.length&&-1===(d=c.indexOf("\n",d))&&(d=c.length),0!==d&&"\n"!==c[d-1]&&(p="\n"+p),"\n"!==c[d]&&(p+="\n")),s({from:d,insert:p},r),i.flush(new Set([e])).finally(function(){u()})}})},[e,i]);return!e||(0,n.isMedia)(e)||(0,n.isDrawFile)(e)||(0,n.isBinary)(e)?null:a}e.s(["default",()=>i])},45442,762699,330069,e=>{"use strict";var t=e.i(297083),n=e.i(878420),r=e.i(530658),i=e.i(817556),a=e.i(389959),o=e.i(830675),s=e.i(368964),l=e.i(9270),u=e.i(634759),c=e.i(576255),d=e.i(943565);function p(){return(0,d.useExperimentParam)("prompt_limit_and_opus","allow_autonomous_agent_mode",!1)}e.s(["usePromptLimitOpusExperiment",()=>p],762699);var f=e.i(180703),m=e.i(207237),h=e.i(354093),g=e.i(117807),v=e.i(76961),x=e.i(569384),y=e.i(973245),b=e.i(304277);function S(){var e=(0,x._)(["\n  query GetShouldSeeFreemiumExperience($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          viewFreemiumExperience {\n            isAuthorized\n          }\n        }\n      }\n    }\n  }\n"]);return S=function(){return e},e}e.i(566901);var _={},w=(0,y.gql)(S());function j(){var e,t,r=(e={variables:{replId:(0,m.default)()}},t=(0,n._)({},_,e),b.useQuery(w,t)),i=r.data,a=r.loading,o=r.error,s=r.refetch;return{shouldSeeFreemiumExperience:(null==i?void 0:i.getRepl.__typename)==="Repl"&&i.getRepl.authorizations.viewFreemiumExperience.isAuthorized,loading:a,error:o,refetch:s}}e.s(["useShouldSeeFreemiumExperience",()=>j],330069);var T={thinkingEnabled:!1,modelProfile:s.ModelProfile.ModelProfileStandard,enableAutomatedTesting:!1,samplingRate:0,webSearchEnabled:!0,imageGenerationEnabled:!0,chatMode:s.AgentChatMode.Unspecified,maxAutonomyEnabled:!1,autonomyLevel:s.AutonomyLevel.Unspecified};function k(){var e=(0,m.default)(),d=(0,r._)((0,l.useUpdateReplAgentSettingsMutation)(),1)[0],x=j().shouldSeeFreemiumExperience,y=(0,r._)((0,f.default)("".concat(e,"-high-powered-model-opted-out"),!1),2),b=y[0],S=y[1],_=(0,l.useReplAgentSettingQuery)({variables:{replId:e}}),w=_.data,T=_.loading,k=(0,v.useIsAgentWebDesignMockup)().isWebDesignMockup,D=(null==w?void 0:w.getRepl.__typename)==="Repl"&&w.getRepl.timeCreated&&new Date(w.getRepl.timeCreated)<new Date("2025-09-10"),C=(null==w?void 0:w.getRepl.__typename)==="Repl"?w.getRepl.config.agentSettings:null,E=(null==w?void 0:w.getRepl.__typename)==="Repl"?w.getRepl.config.isInPlanningPhase:null,A=(0,g.useAgentStackBlueprint)().stackBlueprint,R=(0,c.getAutomatedTestingConfig)(A),I=R===c.AutomatedTestingConfig.DEFAULT_ON,P="slider-full"!==(0,h.useAutonomyControlVariant)(),M=p();return{settings:(0,a.useMemo)(function(){var e,t,n,r,i,a,o,l=R===c.AutomatedTestingConfig.DEFAULT_ON_AFTER_INITIAL_PROMPT,d=A===u.StackBlueprint.STACK_BLUEPRINT_EXPO||M,p=s.AutonomyLevel.High;M&&x||A===u.StackBlueprint.STACK_BLUEPRINT_EXPO&&x?p=s.AutonomyLevel.Low:D&&(p=s.AutonomyLevel.Medium),e=k?s.AutonomyLevel.Low:(null==C?void 0:C.autonomyLevel)&&C.autonomyLevel!==s.AutonomyLevel.Unspecified?C.autonomyLevel:p,P&&e===s.AutonomyLevel.Medium&&(e=s.AutonomyLevel.High);var f=s.AgentChatMode.Unspecified;return x&&!d?f=s.AgentChatMode.QuickEdit:k&&!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.AgentChatMode.Unspecified;return e===s.AgentChatMode.Unspecified||e===s.AgentChatMode.General||e===s.AgentChatMode.QuickEdit}(null==C?void 0:C.chatMode)?f=s.AgentChatMode.General:(null==C?void 0:C.chatMode)&&C.chatMode!==s.AgentChatMode.Unspecified?f=C.chatMode:E&&(f=s.AgentChatMode.InitialPlanning),t=!(R===c.AutomatedTestingConfig.DISABLED||f===s.AgentChatMode.QuickEdit||M&&x)&&((null==C?void 0:C.enableAutomatedTesting)!=null?C.enableAutomatedTesting:!!l||I),n=k?s.ModelProfile.ModelProfileUnspecified:b?null!=(r=null==C?void 0:C.modelProfile)?r:s.ModelProfile.ModelProfileStandard:s.ModelProfile.ModelProfileAdvanced,{thinkingEnabled:null!=(i=null==C?void 0:C.thinkingEnabled)&&i,modelProfile:n,enableAutomatedTesting:t,samplingRate:0,webSearchEnabled:null==(a=null==C?void 0:C.webSearchEnabled)||a,imageGenerationEnabled:null==(o=null==C?void 0:C.imageGenerationEnabled)||o,chatMode:f,maxAutonomyEnabled:!1,autonomyLevel:e}},[x,C,I,D,b,k,R,E,P,A,M]),updateSettings:(0,a.useCallback)(function(r){return(0,t._)(function(){var t,a,l;return(0,i._)(this,function(i){switch(i.label){case 0:t=(0,n._)({},C,r),(a=r.modelProfile)&&S(a===s.ModelProfile.ModelProfileStandard),a===s.ModelProfile.ModelProfileAdvanced&&(r.modelProfile=null==C?void 0:C.modelProfile),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,d({variables:{input:{id:e,agentSettings:r}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{__typename:"Repl",id:e,config:{__typename:"ReplConfig",agentSettings:(0,n._)({__typename:"AgentSettings"},t),isInPlanningPhase:E}}}}})];case 2:return i.sent(),[3,4];case 3:return l=i.sent(),o.captureException(l,{extra:{message:"Error updating agent settings",replId:e,attemptedSettings:r,currentSettings:C}}),[3,4];case 4:return[2]}})})()},[E,e,C,S,d]),loading:T}}e.s(["DEFAULT_AGENT_SETTINGS",()=>T,"useAgentSettings",()=>k],45442)},873379,e=>{"use strict";var t=e.i(530658),n=e.i(389959);function r(e){var r=(0,t._)((0,n.useState)(e.getConnectionState()),2),i=r[0],a=r[1];return(0,n.useEffect)(function(){return e.onConnectionStateChanged(a)},[e]),i}e.s(["default",()=>r])},12291,e=>{"use strict";var t=e.i(878420),n=e.i(886513),r=e.i(276385),i=e.i(927600),a=e.i(205104),o=e.i(446530),s=e.i(173703),l=e.i(613355),u=e.i(140487),c=e.i(88619),d=e.i(960178),p=e.i(625484),f=(0,o.cssRecord)({code:[l.rcss.font.code,l.rcss.flex.grow(1)],surface:[l.rcss.borderRadius(8),l.rcss.p(8),l.rcss.flex.row,l.rcss.rowWithGap(8),l.rcss.align.center,l.rcss.width("100%"),l.rcss.overflowX("auto")]});function m(e){var n=g(e.filePath,e.keyName);if(!n)return null;var i=n.import,a=n.access;return(0,r.jsxs)(p.View,{gap:8,children:[i?(0,r.jsx)(h,(0,t._)({code:i},e)):null,(0,r.jsx)(h,(0,t._)({code:a},e))]})}function h(e){var t=e.code,a=e.onInsert,o=(0,n._)(e,["code","onInsert"]);return(0,r.jsxs)(s.ShadesSurface,{elevate:o.elevate,css:f.surface,children:[(0,r.jsx)(c.CopyIconButton,{textToCopy:t}),(0,r.jsx)(d.Text,{variant:"small",css:f.code,multiline:!1,children:t}),a?(0,r.jsx)(u.Button,{variant:"outlined",size:"small",onClick:function(){return a(t)},text:"Insert",iconRight:(0,r.jsx)(i.default,{})}):null]})}function g(e,t){if(!e)return null;switch((0,a.getExt)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(t,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(t,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(t,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(t,'")')};case"rb":return{import:null,access:'ENV["'.concat(t,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(t,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(t,'");')};case"sh":return{import:null,access:'"$'.concat(t,'"')};default:return null}}e.s(["default",()=>m,"getEnvCodeForLanguage",()=>g])},611159,(e,t,n)=>{"use strict";var r=e.e&&e.e.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.isValidCron=void 0;var i=function(e){return/^\d+$/.test(e)?Number(e):NaN},a=function(e){return"?"===e},o=function(e,t,n){return e>=t&&e<=n},s=function(e,t,n){var r=e.split("-");switch(r.length){case 1:return"*"===e||o(i(e),t,n);case 2:var a=r.map(function(e){return i(e)}),s=a[0],l=a[1];return s<=l&&o(s,t,n)&&o(l,t,n);default:return!1}},l=function(e,t,n){return -1===e.search(/[^\d-,\/*]/)&&e.split(",").every(function(e){var r=e.split("/");if(e.trim().endsWith("/")||r.length>2)return!1;var a=r[0],o=r[1];return s(a,t,n)&&(void 0===o||-1===o.search(/[^\d]/)&&i(o)>0)})},u={jan:"1",feb:"2",mar:"3",apr:"4",may:"5",jun:"6",jul:"7",aug:"8",sep:"9",oct:"10",nov:"11",dec:"12"},c={sun:"0",mon:"1",tue:"2",wed:"3",thu:"4",fri:"5",sat:"6"},d={alias:!1,seconds:!1,allowBlankDay:!1,allowSevenAsSunday:!1};n.isValidCron=function(e,t){t=r(r({},d),t);var n,i,o,s,p=e.trim().split(/\s+/);if(p.length>(t.seconds?6:5)||p.length<5)return!1;var f=[];if(6===p.length){var m=p.shift();m&&f.push(l(m,0,59))}var h=p[0],g=p[1],v=p[2],x=p[3],y=p[4];return f.push(l(h,0,59)),f.push(l(g,0,23)),f.push(t.allowBlankDay&&a(v)||l(v,1,31)),f.push((n=t.alias,-1===x.search(/\/[a-zA-Z]/)&&(n?l(x.toLowerCase().replace(/[a-z]{3}/g,function(e){return void 0===u[e]?e:u[e]}),1,12):l(x,1,12)))),f.push((i=t.alias,o=t.allowBlankDay,s=t.allowSevenAsSunday,!!(o&&a(y))||!(!o&&a(y))&&-1===y.search(/\/[a-zA-Z]/)&&(i?l(y.toLowerCase().replace(/[a-z]{3}/g,function(e){return void 0===c[e]?e:c[e]}),0,s?7:6):l(y,0,s?7:6)))),f.push(!(t.allowBlankDay&&a(v)&&a(y))),f.every(Boolean)}},933572,(e,t,n)=>{var r,i,a=e.r(365738),o=1/0,s=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,l=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,u="\\ud800-\\udfff",c="\\u2700-\\u27bf",d="a-z\\xdf-\\xf6\\xf8-\\xff",p="A-Z\\xc0-\\xd6\\xd8-\\xde",f="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",m="['’]",h="["+f+"]",g="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",v="["+d+"]",x="[^"+u+f+"\\d+"+c+d+p+"]",y="(?:\\ud83c[\\udde6-\\uddff]){2}",b="[\\ud800-\\udbff][\\udc00-\\udfff]",S="["+p+"]",_="(?:"+v+"|"+x+")",w="(?:"+S+"|"+x+")",j="(?:"+m+"(?:d|ll|m|re|s|t|ve))?",T="(?:"+m+"(?:D|LL|M|RE|S|T|VE))?",k="(?:"+g+"|\\ud83c[\\udffb-\\udfff])?",D="[\\ufe0e\\ufe0f]?",C="(?:\\u200d(?:"+["[^"+u+"]",y,b].join("|")+")"+D+k+")*",E="(?:"+["["+c+"]",y,b].join("|")+")"+(D+k+C),A=RegExp(m,"g"),R=RegExp(g,"g"),I=RegExp([S+"?"+v+"+"+j+"(?="+[h,S,"$"].join("|")+")",w+"+"+T+"(?="+[h,S+_,"$"].join("|")+")",S+"?"+_+"+"+j,S+"+"+T,"\\d+",E].join("|"),"g"),P=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,M="object"==a._(e.g)&&e.g&&e.g.Object===Object&&e.g,O=("undefined"==typeof self?"undefined":a._(self))=="object"&&self&&self.Object===Object&&self,V=M||O||Function("return this")(),N=(r={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},function(e){return null==r?void 0:r[e]}),B=Object.prototype.toString,L=V.Symbol,U=L?L.prototype:void 0,H=U?U.toString:void 0;function F(e){return null==e?"":function(e){if("string"==typeof e)return e;if(function(e){return(void 0===e?"undefined":a._(e))=="symbol"||!!e&&(void 0===e?"undefined":a._(e))=="object"&&"[object Symbol]"==B.call(e)}(e))return H?H.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}(e)}t.exports=(i=function(e,t,n){return e+(n?"-":"")+t.toLowerCase()},function(e){var t;return function(e,t,n,r){for(var i=-1,a=e?e.length:0;++i<a;)n=t(n,e[i],i,e);return n}(function(e,t,n){if(e=F(e),void 0===t){var r;return(r=e,P.test(r))?e.match(I)||[]:e.match(s)||[]}return e.match(t)||[]}(((t=F(t=e))&&t.replace(l,N).replace(R,"")).replace(A,"")),i,"")})},403934,196127,165349,967963,262664,850834,424746,483820,830597,265957,68893,914279,271047,233693,165550,e=>{"use strict";var t,n,r,i,a,o=e.i(878420),s=e.i(569384),l=e.i(973245),u=e.i(304277),c=e.i(566901),d=e.i(613141),p=e.i(951262);function f(){var e=(0,s._)(["\n  fragment WorkspaceNeonDatabase on NeonDatabase {\n    id\n    type\n    databaseId\n    databaseName\n    projectId\n    connectionString\n    isFrozen\n    frozenReason\n    isEphemeral\n    scheduledFreezeTime\n    scheduledDeletionTime\n    quotaLogicalSizeBytes\n    minComputeUnits\n    maxComputeUnits\n    historyRetentionSeconds\n    timeCreated\n  }\n"]);return f=function(){return e},e}function m(){var e=(0,s._)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        database {\n          id\n          ...WorkspaceNeonDatabase\n        }\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function h(){var e=(0,s._)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return h=function(){return e},e}function g(){var e=(0,s._)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return g=function(){return e},e}var v={},x=(0,l.gql)(f());(0,l.gql)(m(),x);var y=(0,l.gql)(h());function b(e){var t=(0,o._)({},v,e);return p.useMutation(y,t)}var S=(0,l.gql)(g());function _(e){var t=(0,o._)({},v,e);return p.useMutation(S,t)}e.s(["WorkspaceNeonDatabaseFragmentDoc",()=>x,"useDeleteNeonDatabaseMutation",()=>b,"useUnfreezeNeonDatabaseMutation",()=>_],196127);var w=e.i(963084);function j(){var e=(0,s._)(["\n  fragment DeploymentSessionCurrentUser on CurrentUser {\n    id\n    isSubscribed\n  }\n"]);return j=function(){return e},e}function T(){var e=(0,s._)(["\n  fragment DeploymentSessionOrg on Org {\n    id\n    type\n  }\n"]);return T=function(){return e},e}function k(){var e=(0,s._)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return k=function(){return e},e}function D(){var e=(0,s._)(["\n  fragment DeploymentAuthorization on ReplAuthorization {\n    isAuthorized\n    code\n    message\n  }\n"]);return D=function(){return e},e}function C(){var e=(0,s._)(["\n  fragment DeploymentAuthorizations on Repl {\n    id\n    authorizations {\n      createAutoscaleDeployment: createDeployment(\n        provider: cloud_run\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createAutoscaleDeploymentPrivate: createDeployment(\n        provider: cloud_run\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      createRvmDeployment: createDeployment(provider: gce, isPrivate: false) {\n        ...DeploymentAuthorization\n      }\n      createRvmDeploymentPrivate: createDeployment(\n        provider: gce\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      createScheduledDeployment: createDeployment(\n        provider: cron\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createStaticDeployment: createDeployment(\n        provider: static\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createStaticDeploymentPrivate: createDeployment(\n        provider: static\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployAutoscaleDeployment: redeployDeployment(\n        provider: cloud_run\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployAutoscaleDeploymentPrivate: redeployDeployment(\n        provider: cloud_run\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployRvmDeployment: redeployDeployment(\n        provider: gce\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployRvmDeploymentPrivate: redeployDeployment(\n        provider: gce\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployScheduledDeployment: redeployDeployment(\n        provider: cron\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployStaticDeployment: redeployDeployment(\n        provider: static\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployStaticDeploymentPrivate: redeployDeployment(\n        provider: static\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      useDeploymentDebugSummaries {\n        ...DeploymentAuthorization\n      }\n      useFreeTierCloudServices {\n        ...DeploymentAuthorization\n      }\n    }\n  }\n  ","\n"]);return C=function(){return e},e}function E(){var e=(0,s._)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    lastUsedSubdomain\n    suggestedUniqueSubdomain\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    org {\n      ...DeploymentSessionOrg\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on Error {\n        message\n      }\n    }\n    hostingDeploymentPermissions {\n      hasNeonProductionDatabasesEnabled\n    }\n    ...DeploymentAuthorizations\n  }\n  ","\n  ","\n  ","\n"]);return E=function(){return e},e}function A(){var e=(0,s._)(["\n  query DeploymentSession($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      ...DeploymentSessionCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return A=function(){return e},e}function R(){var e=(0,s._)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n        debugSummary {\n          ...BuildDebugSummary\n        }\n      }\n    }\n  }\n  ","\n"]);return R=function(){return e},e}function I(){var e=(0,s._)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n        targetDatabase {\n          ...WorkspaceNeonDatabase\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return I=function(){return e},e}function P(){var e=(0,s._)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n          isFreeUserWithStaticDeployment\n          hostingDeployment {\n            ... on HostingDeployment {\n              ...DeploymentSessionHostingDeployment\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function M(){var e=(0,s._)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return M=function(){return e},e}function O(){var e=(0,s._)(["\n  query DeploymentGetIgnoredSecretsHostingDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            ignoredSecrets\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return O=function(){return e},e}function V(){var e=(0,s._)(["\n  query DeploymentGetEnvVarsHostingDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n              envVars {\n                name\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return V=function(){return e},e}var N={},B=(0,l.gql)(j()),L=(0,l.gql)(T()),U=(0,l.gql)(k(),w.TargetHostingDeploymentFragmentDoc,w.CurrentBuild2FragmentDoc),H=(0,l.gql)(D()),F=(0,l.gql)(C(),H),q=(0,l.gql)(E(),L,U,F),z=(0,l.gql)(A(),q,B);function G(e){var t=(0,o._)({},N,e);return c.useLazyQuery(z,t)}var W=(0,l.gql)(R(),w.BuildDebugSummaryFragmentDoc);function K(e){var t=(0,o._)({},N,e);return d.useSubscription(W,t)}var Y=(0,l.gql)(I(),w.CurrentBuild2FragmentDoc,w.TargetHostingDeploymentFragmentDoc,x);function Z(e){var t=(0,o._)({},N,e);return p.useMutation(Y,t)}var $=(0,l.gql)(P(),U),X=(0,l.gql)(M(),w.CurrentBuild2FragmentDoc),Q=(0,l.gql)(O());function J(e){var t=(0,o._)({},N,e);return c.useLazyQuery(Q,t)}var ee=(0,l.gql)(V());function et(){var e=(0,s._)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    hasDeployLogs\n    provider\n    timeCreated\n    user {\n      id\n      displayName\n      username\n      fullName\n      image\n    }\n    debugSummary {\n      ...BuildDebugSummary\n    }\n    rollbackSourceBuildId\n    envVars {\n      name\n      value\n    }\n  }\n  ","\n"]);return et=function(){return e},e}function en(){var e=(0,s._)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n    isRollbackCandidate\n  }\n  ","\n"]);return en=function(){return e},e}function er(){var e=(0,s._)(["\n  fragment ExpoLaunchDetailsForHistory on ExpoLaunchDetails {\n    id\n    platform\n    status\n    isFinished\n    startedAt\n    finishedAt\n    appId\n    authedDashboardUrl\n  }\n"]);return er=function(){return e},e}function ei(){var e=(0,s._)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int!\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n              rollbackSourceBuildId\n              envVars {\n                name\n                value\n              }\n            }\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return ei=function(){return e},e}function ea(){var e=(0,s._)(["\n  query HostingActivityLogBuildHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n        }\n      }\n    }\n  }\n"]);return ea=function(){return e},e}function eo(){var e=(0,s._)(["\n  mutation RollbackHostingBuild($input: RollbackHostingBuildInput!) {\n    rollbackHostingBuild(input: $input) {\n      ... on RollbackHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return eo=function(){return e},e}function es(){var e=(0,s._)(["\n  subscription ExpoLaunchStatusForHistory(\n    $replId: String!\n    $hostingBuildId: String!\n  ) {\n    expoLaunchStatus(replId: $replId, hostingBuildId: $hostingBuildId) {\n      status\n      hostingBuildId\n      errorMessage\n    }\n  }\n"]);return es=function(){return e},e}function el(){var e=(0,s._)(["\n  query ExpoLaunchHistoryForTimeline($replId: String!, $count: Int!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        expoLaunchHistory(count: $count) {\n          ... on ExpoLaunchHistoryConnectionV2 {\n            sessions {\n              id\n              hostingBuildId\n              launches {\n                ios {\n                  ...ExpoLaunchDetailsForHistory\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return el=function(){return e},e}e.s(["DeploymentGetEnvVarsHostingDeploymentDocument",()=>ee,"DeploymentGetIgnoredSecretsHostingDeploymentDocument",()=>Q,"DeploymentSessionCancelInProgressDeploymentsBuildDocument",()=>X,"DeploymentSessionSendDeploymentLifecycleCommandDocument",()=>$,"useDeploymentGetIgnoredSecretsHostingDeploymentLazyQuery",()=>J,"useDeploymentSessionBuildDeployActionUpdatesSubscription",()=>K,"useDeploymentSessionDeployBuildMutation",()=>Z,"useDeploymentSessionLazyQuery",()=>G],403934);var eu={},ec=(0,l.gql)(et(),w.BuildDebugSummaryFragmentDoc),ed=(0,l.gql)(en(),ec),ep=(0,l.gql)(er()),ef=(0,l.gql)(ei(),ed);function em(e){var t=(0,o._)({},eu,e);return u.useQuery(ef,t)}var eh=(0,l.gql)(ea());function eg(e){var t=(0,o._)({},eu,e);return u.useQuery(eh,t)}var ev=(0,l.gql)(eo(),w.CurrentBuild2FragmentDoc,w.TargetHostingDeploymentFragmentDoc);function ex(e){var t=(0,o._)({},eu,e);return p.useMutation(ev,t)}var ey=(0,l.gql)(es());function eb(e){var t=(0,o._)({},eu,e);return d.useSubscription(ey,t)}var eS=(0,l.gql)(el(),ep);function e_(e){var t=(0,o._)({},eu,e);return u.useQuery(eS,t)}e.s(["HostingActivityLogLine2FragmentDoc",()=>ed,"useExpoLaunchHistoryForTimelineQuery",()=>e_,"useExpoLaunchStatusForHistorySubscription",()=>eb,"useHostingActivityLogBuildHistoryQuery",()=>eg,"useHostingDeploymentActivityLogs2Query",()=>em,"useRollbackHostingBuildMutation",()=>ex],165349),e.i(148382);var ew=e.i(119468);e.i(933572),e.i(761201);var ej=function(e){return"string"==typeof e&&""!==e.trim()},eT=function(e){return e.includes("pane to configure your run command. For more info, see:")},ek=function(e){return(void 0===e?"undefined":(0,ew._)(e))==="object"&&"string"==typeof e.name&&"string"==typeof e.value&&""!==e.name};e.s(["hasCommand",()=>ej,"hasInvalidRunCommand",()=>eT,"isValidEnvVar",()=>ek],967963);var eD=e.i(297083),eC=e.i(530658),eE=e.i(817556),eA=e.i(389959),eR=e.i(927158);function eI(){var e=(0,eC._)((0,eA.useState)(!0),2),t=e[0],n=e[1],r=(0,eC._)((0,eA.useState)(void 0),2),i=r[0],a=r[1],o=(0,eC._)((0,eA.useState)(void 0),2),s=o[0],l=o[1],u=(0,eR.usePid2Callback)(function(e){return function(){return(0,eD._)(function(){var t;return(0,eE._)(this,function(r){switch(r.label){case 0:return n(!0),[4,e.helium.getHeliumInfo.rpc({})];case 1:return(t=r.sent()).ok&&t.payload.isHeliumEnabled&&(l(t.payload.heliumMigrationState),"USING_HELIUM"===t.payload.heliumMigrationState?a({kind:"helium",connectionString:t.payload.databaseUrl,databaseId:435486,maxSizeBytes:0x280000000}):a(void 0)),n(!1),[2]}})})()}},[]);(0,eA.useEffect)(function(){u&&u()},[u]);var c=(0,eR.usePid2Callback)(function(e){return function(){return(0,eD._)(function(){var t;return(0,eE._)(this,function(n){switch(n.label){case 0:if(!i)throw Error("No helium development database found");return[4,e.database.getPgMajorVersion.rpc({connectionString:i.connectionString})];case 1:if(!(t=n.sent()).ok)throw Error("Failed to fetch PostgreSQL major version for development database");return[2,t.payload.majorVersion]}})})()}},[i]),d=(0,eR.usePid2Callback)(function(e){return function(){return(0,eD._)(function(){var t;return(0,eE._)(this,function(n){switch(n.label){case 0:if(!i)throw Error("No helium development database found");return[4,e.database.getTables.rpc({connectionString:i.connectionString})];case 1:if(!(t=n.sent()).ok)throw Error("Failed to fetch table count for development database");return[2,t.payload.tables.length]}})})()}},[i]);return{loading:t,database:i,getPgVersion:c,getTableCount:d,heliumMigrationState:s,refetchHeliumState:u}}e.s(["useHeliumDevelopmentDatabase",()=>eI],262664);var eP=e.i(64386);function eM(){var e=(0,s._)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          id\n          ...WorkspaceNeonDatabase\n        }\n      }\n    }\n  }\n  ","\n"]);return eM=function(){return e},e}var eO={},eV=(0,l.gql)(eM(),x);function eN(e){var t=(0,o._)({},eO,e);return u.useQuery(eV,t)}e.s(["GetNeonDatabasesDocument",()=>eV,"useGetNeonDatabasesQuery",()=>eN],850834);var eB=e.i(207237),eL=function(e){return null!=e.connectionString&&null!=e.databaseId&&null!=e.databaseName&&null!=e.projectId};function eU(e){return(null==e?void 0:e.getNeonDatabases.__typename)==="GetNeonDatabasesResult"&&e.getNeonDatabases.databases.filter(eL)||[]}function eH(e){var t=e.fetchPolicy,n=e.skip,r=e.type,i=e.onDatabasesLoaded,a=(0,eB.default)(),s=eN((0,eP._)((0,o._)({variables:{input:{replId:a}}},"cache-first"===(void 0===t?"cache-first":t)?{fetchPolicy:"cache-first"}:{fetchPolicy:"network-only",ssr:!0}),{skip:void 0===n?void 0:n,onCompleted:function(e){eU(e).length>0&&(null==i||i())}})),l=s.data,u=s.loading,c=s.error,d=s.refetch;return{database:eU(l).find(function(e){return e.type===r}),loading:u,error:c,refetch:d}}function eF(e){return{refetch:eH({fetchPolicy:"network-only",skip:!0,type:e}).refetch}}function eq(e){return eH({type:"development",onDatabasesLoaded:e})}function ez(e){return eH({type:"production",onDatabasesLoaded:e})}e.s(["useNeonDevelopmentDatabase",()=>eq,"useNeonProductionDatabase",()=>ez,"useRefetchDatabasesLazy",()=>eF],424746);var eG=e.i(399119),eW=e.i(904851),eK=e.i(721281),eY=e.i(445789),eZ=e.i(463348),e$=function(e){function t(){var e;return(0,eW._)(this,t),e=(0,eG._)(this,t,arguments),(0,eK._)(e,"name","DeploymentNotFoundError"),(0,eK._)(e,"message","Could not find existing deployment"),e}return(0,eY._)(t,e),t}((0,eZ._)(Error)),eX=function(e){function t(){var e;return(0,eW._)(this,t),e=(0,eG._)(this,t,arguments),(0,eK._)(e,"name","CurrentBuildNotFoundError"),(0,eK._)(e,"message","Could not find existing current build"),e}return(0,eY._)(t,e),t}((0,eZ._)(Error)),eQ=function(e){function t(){var e;return(0,eW._)(this,t),e=(0,eG._)(this,t,arguments),(0,eK._)(e,"name","RollbackBuildNotProvidedError"),(0,eK._)(e,"message","Rollback target build not provided"),e}return(0,eY._)(t,e),t}((0,eZ._)(Error)),eJ=function(e){function t(){var e;return(0,eW._)(this,t),e=(0,eG._)(this,t,arguments),(0,eK._)(e,"name","RunCommandNotFoundError"),(0,eK._)(e,"message","Could not find run command"),e}return(0,eY._)(t,e),t}((0,eZ._)(Error)),e0=function(e){function t(){var e;return(0,eW._)(this,t),e=(0,eG._)(this,t,arguments),(0,eK._)(e,"name","InvalidRunCommandError"),(0,eK._)(e,"message","Invalid run command"),e}return(0,eY._)(t,e),t}((0,eZ._)(Error)),e1=function(e){function t(){var e;return(0,eW._)(this,t),e=(0,eG._)(this,t,arguments),(0,eK._)(e,"name","SubdomainNotFoundError"),(0,eK._)(e,"message","Could not find subdomain"),e}return(0,eY._)(t,e),t}((0,eZ._)(Error)),e2=function(e){function t(){var e;return(0,eW._)(this,t),e=(0,eG._)(this,t,arguments),(0,eK._)(e,"name","AppTypeFoundError"),(0,eK._)(e,"message","Could not find app type"),e}return(0,eY._)(t,e),t}((0,eZ._)(Error)),e5=function(e){function t(){var e;return(0,eW._)(this,t),e=(0,eG._)(this,t,arguments),(0,eK._)(e,"name","PublicDirNotFoundError"),(0,eK._)(e,"message","Could not find public directory"),e}return(0,eY._)(t,e),t}((0,eZ._)(Error)),e7=function(e){function t(){var e;return(0,eW._)(this,t),e=(0,eG._)(this,t,arguments),(0,eK._)(e,"name","ReplConnectionError"),(0,eK._)(e,"message","An App connection error occurred. App is reconnecting or has been disconnected."),e}return(0,eY._)(t,e),t}((0,eZ._)(Error)),e4=function(e){function t(){var e;return(0,eW._)(this,t),e=(0,eG._)(this,t,arguments),(0,eK._)(e,"name","InvalidTimezoneError"),e}return(0,eY._)(t,e),t}((0,eZ._)(Error)),e3=function(e){function t(){var e;return(0,eW._)(this,t),e=(0,eG._)(this,t,arguments),(0,eK._)(e,"name","CrontabNotFoundError"),e}return(0,eY._)(t,e),t}((0,eZ._)(Error)),e8=function(e){function t(){var e;return(0,eW._)(this,t),e=(0,eG._)(this,t,arguments),(0,eK._)(e,"name","PrivatePasswordError"),e}return(0,eY._)(t,e),t}((0,eZ._)(Error));e.s(["AppTypeFoundError",()=>e2,"CurrentBuildNotFoundError",()=>eX,"DeploymentNotFoundError",()=>e$,"InvalidCrontabError",()=>e3,"InvalidRunCommandError",()=>e0,"InvalidTimezoneError",()=>e4,"PrivatePasswordError",()=>e8,"PublicDirNotFoundError",()=>e5,"ReplConnectionError",()=>e7,"RollbackBuildNotProvidedError",()=>eQ,"RunCommandNotFoundError",()=>eJ,"SubdomainNotFoundError",()=>e1],483820);var e9=e.i(131141),e6=e.i(541793),te=e.i(15053),tt=e.i(161322),tn=e.i(719518),tr=e.i(824359),ti=(0,eA.createContext)(null);function ta(){var e=(0,eA.useContext)(ti);if(!e)throw Error("Expected store in context");return e}function to(e){return(0,tt.useAtomValue)(e,{store:ta()})}function ts(e){return(0,tr.useObservableAtom)(e,ta())}var tl=function(e){return(0,tt.useSetAtom)(e,{store:ta()})};function tu(e){return(0,tn.useAtomCallback)((0,eA.useCallback)(function(t){return t(e)},[e]),{store:ta()})}e.s(["DeploymentContext",()=>ti,"useGet",()=>tu,"useObservableValue",()=>ts,"useSet",()=>tl,"useValue",()=>to],830597);var tc=e.i(311106),td=e.i(368964),tp=e.i(858248),tf=e.i(709485);function tm(e,t,n){(0,tp.track)(tf.events.DEPLOYMENT_MIGRATION_PREPARATION_COMPLETED,(0,o._)((0,eP._)((0,o._)({},e),{stage:t}),n))}var th=((t={}).FoundDiff="FoundDiff",t.GeneratingDiffStatements="GeneratingDiffStatements",t.ValidatingDiffStatements="ValidatingDiffStatements",t),tg=((n={}).Completed="completed",n.Running="running",n.Paused="paused",n.Failed="failed",n),tv=((r={}).Building="building",r.Failed="failed",r.Ready="ready",r);function tx(e,t){var n=e.get(t);if(n&&n.type===t)return n}var ty=(0,e6.atom)({id:"",deployOptions:void 0,stages:new Map,focusedStage:"FoundDiff"}),tb=(0,e6.atom)(null,function(e,t,n){var r,i=(r=e(ty),(0,e9.produce)(r,function(e){switch(n.type){case"INIT":e.id=(0,te.v4)(),e.deployOptions=n.deployOptions,e.stages=new Map,e.stages.set("FoundDiff",{type:"FoundDiff",status:"completed"}),e.focusedStage="FoundDiff";var t,i,a,s,l,u,c,d,p,f,m,h,g=(c=(t={deployInputOptions:n.deployOptions.deployInputOptions,deployConfig:n.deployOptions.deployConfig,appType:n.deployOptions.appType,org:n.deployOptions.org}).deployInputOptions,d=t.deployConfig,p=t.appType,m=(f=t.org)&&("team"===f.type||"personal"===f.type)?(null==f?void 0:f.type)==="team"?td.OrgType.Team:td.OrgType.Personal:void 0,h=!!c.targetDeploymentId,{provider:null!=(a=c.provider)?a:"unknown",build:null!=(s=c.commands.build)?s:void 0,run:c.commands.run,redeploy:h,env_var_count:null!=(l=null==(i=c.envVars)?void 0:i.length)?l:0,ignore_ports:null===d.ignorePorts?void 0:d.ignorePorts,context:"workspace",app_type:p,machineJob:c.machineJob?{crontab:c.machineJob.crontab,timezone:c.machineJob.timezone}:void 0,orgType:m,hasAgentSession:null!=(u=c.hasAgentSession)&&u});e.trackingProperties=g,(0,tp.track)(tf.events.DEPLOYMENT_MIGRATION_PREPARATION_STARTED,(0,o._)({},g));break;case"CANCEL":e.id="",e.deployOptions=void 0,e.stages.clear(),e.focusedStage="FoundDiff",r.trackingProperties&&(x=r.trackingProperties,(0,tp.track)(tf.events.DEPLOYMENT_MIGRATION_PREPARATION_CANCELLED,(0,o._)({},x)),e.trackingProperties=void 0);break;case"SET_STAGE":var v=e.stages.get(n.stageState.type);((null==v?void 0:v.status)!=="completed"||"running"!==n.stageState.status)&&e.stages.set(n.stageState.type,n.stageState);break;case"STAGE_ERROR":var x,y,b,S=e.stages.get(n.stage);S&&(S.status="failed",S.errorMessage=n.errorMessage,e.focusedStage=n.stage,r.trackingProperties&&(y=r.trackingProperties,b=n.stage,(0,tp.track)(tf.events.DEPLOYMENT_MIGRATION_PREPARATION_STAGE_ERROR,(0,eP._)((0,o._)({},y),{stage:b})))),(0,tc.sendSentryError)({error:Error(n.errorMessage),context:"prepareDatabase"});break;case"CONFLICT_PROMPT":var _=e.stages.get("GeneratingDiffStatements");if(_&&"GeneratingDiffStatements"===_.type){var w,j,T={type:"GeneratingDiffStatements",status:"paused",conflictPrompt:n.conflictPrompt};e.stages.set(_.type,T),e.focusedStage="GeneratingDiffStatements",r.trackingProperties&&(w=r.trackingProperties,j={kind:n.conflictPrompt.$kind,optionsCount:n.conflictPrompt.result.options.length},(0,tp.track)(tf.events.DEPLOYMENT_MIGRATION_PREPARATION_CONFLICT_PROMPT,(0,o._)({},w,j)))}break;case"COMPLETED":var k=tx(e.stages,"GeneratingDiffStatements"),D=tx(e.stages,"ValidatingDiffStatements");if(k&&"statementsToExecute"in n&&n.statementsToExecute){var C={type:"GeneratingDiffStatements",status:"completed",statementsToExecute:n.statementsToExecute,shouldAskForApprove:n.shouldAskForApprove,maybeNonBackwardsCompatible:n.maybeNonBackwardsCompatible,infoToPrint:n.infoToPrint};e.stages.set(k.type,C),e.focusedStage="GeneratingDiffStatements",r.trackingProperties&&tm(r.trackingProperties,n.stage,{shouldAskForApproval:n.shouldAskForApprove,maybeNonBackwardsCompatible:n.maybeNonBackwardsCompatible,infoToPrintCount:n.infoToPrint.length,statementsCount:n.statementsToExecute.length})}if(D&&"previewId"in D&&D.previewId){var E={type:"ValidatingDiffStatements",status:"completed",previewId:D.previewId};e.stages.set(D.type,E),e.focusedStage="ValidatingDiffStatements",r.trackingProperties&&tm(r.trackingProperties,n.stage)}break;case"MIGRATION_VALIDATION_ERROR":var A=tx(e.stages,"ValidatingDiffStatements");if(A&&"previewId"in A&&A.previewId){var R,I={type:"ValidatingDiffStatements",status:"paused",previewId:A.previewId,statementError:n.statementError};e.stages.set(A.type,I),e.focusedStage="ValidatingDiffStatements",r.trackingProperties&&(R=r.trackingProperties,(0,tp.track)(tf.events.DEPLOYMENT_MIGRATION_PREPARATION_VALIDATION_ERROR,(0,o._)({},R)))}break;case"SET_PREVIEW_DEPLOY":var P,M,O=tx(e.stages,"ValidatingDiffStatements");(null==O?void 0:O.status)==="completed"&&(O.preview=n.preview,r.trackingProperties&&(P=r.trackingProperties,M=n.preview.status,(0,tp.track)(tf.events.DEPLOYMENT_MIGRATION_PREPARATION_PREVIEW_DEPLOY,(0,eP._)((0,o._)({},P),{status:M}))));break;case"APPROVE_AND_DEPLOY":var V,N,B,L=tx(e.stages,"ValidatingDiffStatements"),U=tx(e.stages,"GeneratingDiffStatements");(null==U?void 0:U.status)==="completed"&&(((null==L?void 0:L.status)==="completed"||(null==L?void 0:L.status)==="paused")&&(L.approved=!0),r.trackingProperties&&(V=r.trackingProperties,N=n.approved,B={shouldAskForApproval:U.shouldAskForApprove,maybeNonBackwardsCompatible:U.maybeNonBackwardsCompatible,infoToPrintCount:U.infoToPrint.length,statementsCount:U.statementsToExecute.length},(0,tp.track)(tf.events.DEPLOYMENT_MIGRATION_PREPARATION_APPROVED,(0,o._)((0,eP._)((0,o._)({},V),{approved:N}),B))))}}));t(ty,i)});function tS(){return{state:to(ty),dispatch:tl(tb),getState:tu(ty)}}e.s(["PrepareDatabaseBaseStageStateStatus",()=>tg,"PrepareDatabasePreviewDeployStatus",()=>tv,"PrepareDatabaseStageType",()=>th,"getStageByType",()=>tx,"usePrepareDatabaseState",()=>tS],265957);var t_=((i={}).Loading="Loading",i.Ready="Ready",i.Preparing="Preparing",i.PreparingDatabase="PreparingDatabase",i.Deploying="Deploying",i.ProcessingLifecycleCommand="ProcessingLifecycleCommand",i.Suspended="Paused",i);e.s(["DeploymentMode",()=>t_],68893);var tw=(0,e6.atom)(t_.Loading);function tj(){return to(tw)}function tT(){var e=tl(tw);return(0,eA.useCallback)(function(t){e(t)},[e])}function tk(){var e=tS().dispatch,t=tl(tw);return{requiresDatabasePreparation:(0,eR.usePid2Callback)(function(n){return function(r){var i=r.heliumDevelopmentDatabase,a=r.neonDevelopmentDatabase,o=r.neonProductionDatabase,s=r.deployConfig,l=r.deployInputOptions,u=r.context,c=r.appType,d=r.org;return(0,eD._)(function(){var r,p;return(0,eE._)(this,function(f){switch(f.label){case 0:if(!a&&!i)throw Error("Neon development database not found.");if(!(r=i?i.connectionString:null==a?void 0:a.connectionString))throw Error("Development database connection string not found.");return[4,n.prepareDatabaseMigrations.hasDiff.rpc({sourceConnectionString:r,targetConnectionString:null==o?void 0:o.connectionString})];case 1:if(!(p=f.sent()).ok)throw Error("Failed to check for database diff: ".concat(p.payload.message));if(p.payload.hasDiff)return t(t_.PreparingDatabase),e({type:"INIT",deployOptions:{deployConfig:s,deployInputOptions:l,context:u,appType:c,org:d}}),[2,!0];return[2]}})})()}},[t,e])}}e.s(["deploymentModeAtom",()=>tw,"useDeploymentMode",()=>tj,"useSetDeploymentMode",()=>tT],914279),e.s(["useHostingBuildRequiresDatabasePreparation",()=>tk],271047);var tD=e.i(173738);function tC(e){return(0,eD._)(function(e){var t,n,r,i,a,o,s,l,u,c,d,p;return(0,eE._)(this,function(f){switch(f.label){case 0:if(t=e.command,n=e.replId,r=e.buildId,i=e.machineConfigurationId,a=e.maxMachineInstances,o=e.replitBadgeEnabled,!tD.apolloClient)throw Error("expected apolloClient to be initialized");return[4,tD.apolloClient.mutate({mutation:$,variables:{input:{command:t,replId:n,buildId:r,machineConfigurationId:i,maxMachineInstances:a,replitBadgeEnabled:o}}})];case 1:if(null==(s=(c=f.sent()).errors)?void 0:s.length)throw Error(c.errors.map(function(e){return e.message}).join(", "));if((null==(u=c.data)||null==(l=u.sendDeploymentLifecycleCommand)?void 0:l.__typename)!=="SendDeploymentLifecycleCommandResult")throw Error((null==(p=c.data)||null==(d=p.sendDeploymentLifecycleCommand)?void 0:d.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}})}).apply(this,arguments)}function tE(e){return(0,eD._)(function(e){var t,n,r,i,a,o,s,l;return(0,eE._)(this,function(u){switch(u.label){case 0:if(t=e.buildId,n=e.targetDeploymentId,!tD.apolloClient)throw Error("expected apolloClient to be initialized");return[4,tD.apolloClient.mutate({mutation:X,variables:{input:{buildId:t,targetDeploymentId:n}}})];case 1:if(null==(r=(o=u.sent()).errors)?void 0:r.length)throw Error(o.errors.map(function(e){return e.message}).join(", "));if((null==(a=o.data)||null==(i=a.failHostingBuild)?void 0:i.__typename)!=="FailHostingBuildResult")throw Error((null==(l=o.data)||null==(s=l.failHostingBuild)?void 0:s.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}})}).apply(this,arguments)}function tA(e){return(0,eD._)(function(e){var t,n,r,i;return(0,eE._)(this,function(a){switch(a.label){case 0:return t=e.apolloClient,n=e.replId,[4,t.query({query:Q,variables:{replId:n}})];case 1:return[2,"Repl"===(i=a.sent().data).getRepl.__typename&&(null==(r=i.getRepl.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?i.getRepl.hostingDeployment.ignoredSecrets:[]]}})}).apply(this,arguments)}function tR(e){return(0,eD._)(function(e){var t,n,r,i;return(0,eE._)(this,function(a){switch(a.label){case 0:return t=e.apolloClient,n=e.replId,[4,t.query({query:ee,variables:{replId:n}})];case 1:return[2,"Repl"===(i=a.sent().data).getRepl.__typename&&(null==(r=i.getRepl.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?i.getRepl.hostingDeployment.currentBuild.envVars.map(function(e){return{name:e.name}}):[]]}})}).apply(this,arguments)}e.s(["cancelInProgressDeploymentsBuildMutation",()=>tE,"getDeploymentEnvVars",()=>tR,"getDeploymentIgnoredSecrets",()=>tA,"sendDeploymentLifecycleCommandMutation",()=>tC],233693);var tI=e.i(257982);function tP(e){switch(e){case td.HostingBuildStatus.Failed:case td.HostingBuildStatus.Success:case td.HostingBuildStatus.BuiltAndBundled:return t_.Ready;case td.HostingBuildStatus.Suspended:return t_.Suspended;case td.HostingBuildStatus.Suspending:case td.HostingBuildStatus.Resuming:case td.HostingBuildStatus.UpdatingTier:return t_.ProcessingLifecycleCommand;case td.HostingBuildStatus.Pending:case td.HostingBuildStatus.SecurityScanning:case td.HostingBuildStatus.Building:case td.HostingBuildStatus.Running:case td.HostingBuildStatus.Promoting:return t_.Deploying;default:(0,tI.default)(e)}}function tM(e){switch(e){case td.SendDeploymentLifecycleCommandType.Destroy:return null;case td.SendDeploymentLifecycleCommandType.UpdateMachineConfiguration:return td.HostingBuildStatus.UpdatingTier;case td.SendDeploymentLifecycleCommandType.Suspend:return td.HostingBuildStatus.Suspending;case td.SendDeploymentLifecycleCommandType.Resume:case td.SendDeploymentLifecycleCommandType.UpdateDeploymentFeatureConfig:return td.HostingBuildStatus.Resuming;default:(0,tI.default)(e)}}var tO=(a={},(0,eK._)(a,t_.Loading,"loading"),(0,eK._)(a,t_.Preparing,"preparing"),(0,eK._)(a,t_.PreparingDatabase,"preparing database"),(0,eK._)(a,t_.Ready,"ready"),(0,eK._)(a,t_.Suspended,"suspended"),(0,eK._)(a,t_.Deploying,"deploying"),(0,eK._)(a,t_.ProcessingLifecycleCommand,"processing a request"),a);function tV(e){var t=tO[e];return void 0===t?"":t}e.s(["getBuildStatusFromLifecycleCommandType",()=>tM,"getDeploymentModeFromBuildStatus",()=>tP,"getReadableMode",()=>tV],165550)},678420,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245),i=e.i(304277),a=e.i(566901),o=e.i(951262);function s(){var e=(0,n._)(["\n  fragment WorkspaceSharedSecret on SharedSecret {\n    id\n    name\n    description\n    version\n    timeCreated\n    timeUpdated\n    owner {\n      __typename\n      ... on User {\n        id\n      }\n    }\n    value\n    signedUrl\n  }\n"]);return s=function(){return e},e}function l(){var e=(0,n._)(["\n  fragment WorkspaceSharedSecretLink on SharedSecretLink {\n    id\n    alias\n    secret {\n      ...WorkspaceSharedSecret\n    }\n  }\n  ","\n"]);return l=function(){return e},e}function u(){var e=(0,n._)(["\n  query SecretsPaneAuthorizations($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        isOwner\n        authorizations {\n          editSecrets {\n            isAuthorized\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return u=function(){return e},e}function c(){var e=(0,n._)(["\n  query WorkspaceSecrets($secretsInput: SecretsInput) {\n    currentUser {\n      id\n      secrets(input: $secretsInput) {\n        ... on SharedSecretConnection {\n          items {\n            ...WorkspaceSharedSecret\n          }\n          pageInfo {\n            hasNextPage\n            hasPreviousPage\n            nextCursor\n            previousCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function d(){var e=(0,n._)(["\n  query ReplLinkedSecrets($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        sharedSecretLinks {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,n._)(["\n  query WorkspaceAndReplLinkedSecrets($replId: String!) {\n    currentUser {\n      id\n      secrets {\n        ... on SharedSecretConnection {\n          items {\n            ...WorkspaceSharedSecret\n          }\n        }\n      }\n    }\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        sharedSecretLinks {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,n._)(["\n  mutation LinkSharedSecrets($input: LinkSharedSecretsInput!) {\n    linkSharedSecrets(input: $input) {\n      ... on LinkSharedSecretsResult {\n        links {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function m(){var e=(0,n._)(["\n  mutation UnlinkSharedSecrets($input: UnlinkSharedSecretsInput!) {\n    unlinkSharedSecrets(input: $input) {\n      ... on UnlinkSharedSecretsResult {\n        success\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return m=function(){return e},e}function h(){var e=(0,n._)(["\n  mutation UpdateSharedSecretLink($input: UpdateSharedSecretLinkInput!) {\n    updateSharedSecretLink(input: $input) {\n      ... on UpdateSharedSecretLinkOutput {\n        ...WorkspaceSharedSecretLink\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var g={},v=(0,r.gql)(s()),x=(0,r.gql)(l(),v),y=(0,r.gql)(u());function b(e){var n=(0,t._)({},g,e);return i.useQuery(y,n)}var S=(0,r.gql)(c(),v);function _(e){var n=(0,t._)({},g,e);return i.useQuery(S,n)}var w=(0,r.gql)(d(),x);function j(e){var n=(0,t._)({},g,e);return i.useQuery(w,n)}var T=(0,r.gql)(p(),v,x);function k(e){var n=(0,t._)({},g,e);return a.useLazyQuery(T,n)}var D=(0,r.gql)(f(),x);function C(e){var n=(0,t._)({},g,e);return o.useMutation(D,n)}var E=(0,r.gql)(m());function A(e){var n=(0,t._)({},g,e);return o.useMutation(E,n)}var R=(0,r.gql)(h(),x);function I(e){var n=(0,t._)({},g,e);return o.useMutation(R,n)}e.s(["ReplLinkedSecretsDocument",()=>w,"useLinkSharedSecretsMutation",()=>C,"useReplLinkedSecretsQuery",()=>j,"useSecretsPaneAuthorizationsQuery",()=>b,"useUnlinkSharedSecretsMutation",()=>A,"useUpdateSharedSecretLinkMutation",()=>I,"useWorkspaceAndReplLinkedSecretsLazyQuery",()=>k,"useWorkspaceSecretsQuery",()=>_])},678317,e=>{"use strict";e.i(671901);var t=function(e){return e&&e.args?(e.args&&e.args.length>=3&&"sh"===e.args[0]&&"-c"===e.args[1]?e.args.slice(2):e.args).join(" "):""};e.s(["execToString",()=>t])},729678,107129,241703,957789,522029,198992,32995,686631,936239,589910,e=>{"use strict";var t,n,r,i,a=e.i(297083),o=e.i(530658),s=e.i(817556),l=e.i(389959),u=e.i(368964),c=e.i(678420),d=e.i(403934),p=e.i(62820),f=e.i(671901),m=e.i(967963),h=e.i(678317),g=e.i(255444),v=e.i(641326),x=e.i(903381),y=e.i(483820);function b(e){var t=e.secrets,n=e.replId,r=(0,o._)((0,c.useWorkspaceAndReplLinkedSecretsLazyQuery)(),1)[0],i=(0,o._)((0,d.useDeploymentGetIgnoredSecretsHostingDeploymentLazyQuery)(),1)[0];return(0,l.useCallback)(function(){return(0,a._)(function(){var e,a,l,u,c,d,p,f,m,h,g,v,x,y,b,S,_,w,j,T,k,D;return(0,s._)(this,function(s){switch(s.label){case 0:return[4,r({variables:{replId:n}})];case 1:return l=s.sent().data,[4,i({variables:{replId:n}})];case 2:if(u=s.sent().data,c=new Map,d=(null==u?void 0:u.getRepl.__typename)==="Repl"&&(null==u||null==(e=u.getRepl.hostingDeployment)?void 0:e.__typename)==="HostingDeployment"?u.getRepl.hostingDeployment.ignoredSecrets:[],(null==l?void 0:l.getRepl.__typename)==="Repl"&&l.getRepl.sharedSecretLinks&&(null==(a=l.currentUser)?void 0:a.secrets.__typename)==="SharedSecretConnection"){p=l.currentUser.secrets.items,f=!0,m=!1,h=void 0;try{for(g=function(){var e,t=x.value,n=p.find(function(e){return e.id===t.secret.id});c.set(t.alias,null!=(e=null==n?void 0:n.value)?e:"")},v=l.getRepl.sharedSecretLinks[Symbol.iterator]();!(f=(x=v.next()).done);f=!0)g()}catch(e){m=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(m)throw h}}}return[4,t.read()];case 3:y=s.sent(),b=!0,S=!1,_=void 0;try{for(w=y.entries()[Symbol.iterator]();!(b=(j=w.next()).done);b=!0)k=(T=(0,o._)(j.value,2))[0],D=T[1],d.includes(k)||c.set(k,D)}catch(e){S=!0,_=e}finally{try{b||null==w.return||w.return()}finally{if(S)throw _}}return[2,Array.from(c,function(e){var t=(0,o._)(e,2);return{name:t[0],value:t[1]}})]}})})()},[t,i,r,n])}function S(e){return(0,a._)(function(){var t,n,r,i,o,l,c,d,p,m,g,x,y,b;return(0,s._)(this,function(S){switch(S.label){case 0:return t=null,n=null,r=null,i=null,o=null,l=null,[4,(0,a._)(function(){var t,n,r;return(0,s._)(this,function(i){switch(i.label){case 0:return[4,e.getConfig()];case 1:if(n=(t=i.sent()).config,(r=t.error)===v.DotReplitErrors.NotFound)return[2];if(r)throw Error("Failed to get .replit config with Error: "+r);return[2,n]}})})()];case 1:if(!(c=S.sent()))return[2,{buildCommand:t,runCommand:n,ignorePorts:r,appType:i,publicDir:o,providerFromTarget:l}];if(!c.deployment)return[3,2];switch(p=(d=c.deployment).build,m=d.run,g=d.ignorePorts,x=d.target,y=d.publicDir,p&&(t=(0,h.execToString)(p)),m&&(n=(0,h.execToString)(m)),null!=g&&(r=g),x){case f.api.DeploymentConfig.Target.VM:case f.api.DeploymentConfig.Target.GCE:l=u.HostingBuildProvider.Gce,i=r?u.DeployHostingBuildAppType.Worker:u.DeployHostingBuildAppType.Server;break;case f.api.DeploymentConfig.Target.AUTOSCALE:case f.api.DeploymentConfig.Target.CLOUDRUN:l=u.HostingBuildProvider.CloudRun,i=u.DeployHostingBuildAppType.CloudRun;break;case f.api.DeploymentConfig.Target.STATIC:l=u.HostingBuildProvider.Static,i=u.DeployHostingBuildAppType.Static;break;case f.api.DeploymentConfig.Target.SCHEDULED:l=u.HostingBuildProvider.Cron,i=u.DeployHostingBuildAppType.Cron}return y&&(o=y),[3,4];case 2:return[4,e.getRunConfig()];case 3:b=S.sent(),c.compile&&(t=(0,h.execToString)(c.compile)),b.run?n=(0,h.execToString)(b.run.run):c.run&&(n=(0,h.execToString)(b.run)),S.label=4;case 4:return[2,{buildCommand:t,runCommand:n,ignorePorts:r,appType:i,publicDir:o,providerFromTarget:l}]}})})()}var _={buildCommand:{delete:function(){return(0,g.removeFieldOp)("deployment/build")},create:function(e){return(0,g.createDeploymentsBuildCommandOp)(e.toString())}},runCommand:{delete:function(){return(0,g.removeFieldOp)("deployment/run")},create:function(e){return(0,g.createDeploymentsRunCommandOp)(e.toString())}},ignorePorts:{delete:function(){return(0,g.removeFieldOp)("deployment/ignorePorts")},create:function(e){return(0,g.createDeploymentsIgnorePortsOp)(!!e)}},appType:{delete:function(){return(0,g.removeFieldOp)("deployment/deploymentTarget")},create:function(e){var t=null;switch(e){case u.DeployHostingBuildAppType.Server:case u.DeployHostingBuildAppType.Worker:t="gce";break;case u.DeployHostingBuildAppType.CloudRun:t="cloudrun";break;case u.DeployHostingBuildAppType.Static:t="static";break;case u.DeployHostingBuildAppType.Cron:t="scheduled"}return t?(0,g.createDeploymentTargetOp)(t):null}},publicDir:{delete:function(){return(0,g.removeFieldOp)("deployment/publicDir")},create:function(e){return(0,g.createDeploymentPublicDirOp)(e.toString())}},providerFromTarget:{delete:function(){return(0,g.removeFieldOp)("deployment/deploymentTarget")},create:function(e){var t=null;switch(e){case u.HostingBuildProvider.Gce:t="gce";break;case u.HostingBuildProvider.CloudRun:t="cloudrun";break;case u.HostingBuildProvider.Static:t="static";break;case u.HostingBuildProvider.Cron:t="scheduled";break;case u.HostingBuildProvider.Extension:case u.HostingBuildProvider.AzureContainerApp:case u.HostingBuildProvider.AzureVm:return null}return t?(0,g.createDeploymentTargetOp)(t):null}}};function w(e,t,n){return(0,a._)(function(e,t,n){var r,i,a,o,l,u,c,d,f,h,g,v,b,S,w,j;return(0,s._)(this,function(s){switch(s.label){case 0:r=n.fs,i=n.container,a=n.dotReplit,o=[],l=!0,u=!1,c=void 0;try{for(d=Object.keys(e)[Symbol.iterator]();!(l=(f=d.next()).done);l=!0)g=e[h=f.value],v=t[h],b=_[h],g!==v&&("string"==typeof g&&(0,m.hasCommand)(g)||"boolean"==typeof g&&g?(S=b.create(g))&&o.push(S):o.push(b.delete()))}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}if(i.getConnectionState()!==p.ConnectionState.CONNECTED)throw new y.ReplConnectionError;if(!o.length)return[3,2];return[4,a.updateDotReplit(o)];case 1:if(w=s.sent().error)throw Error(w);s.label=2;case 2:return j=null,[4,new Promise(function(e){r.getStatus()!==x.FsStatus.Syncing&&e(!0),j=setInterval(function(){r.getStatus()!==x.FsStatus.Syncing&&e(!0)},1e3)})];case 3:return s.sent(),j&&clearInterval(j),[2]}})}).apply(this,arguments)}e.s(["getDotReplitDeploymentConfig",()=>S,"setDotReplitDeploymentConfig",()=>w,"useGetSecretsAsDeploymentEntries",()=>b],729678),e.s(["AutoscaleMachineConfiguration",()=>tK,"getMachineConfigurationBySlug",()=>tG,"useAutoscaleConfigurations",()=>tW],589910);var j=e.i(276385),T=e.i(161322),k=e.i(878420),D=e.i(569384),C=e.i(973245),E=e.i(304277);e.i(566901);var A=e.i(963084);function R(){var e=(0,D._)(["\n  query AutoscaleMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return R=function(){return e},e}var I={},P=(0,C.gql)(R(),A.MachineConfigurationFragmentDoc),M=e.i(752539),O=e.i(761201),V=e.i(399344),N=e.i(914279),B=e.i(68893),L=e.i(858248),U=e.i(709485),H=function(e){var t=e.context;(0,L.track)(U.events.DEPLOYMENT_SECTION_VIEWED,{context:t})},F=function(e,t){(0,L.track)(U.events.DEPLOYMENT_DEBUG_SUMMARY_USED,{action:e,context:t})},q=function(e){(0,L.track)(U.events.DEPLOYMENT_ADD_SECRET_CLICKED,{context:e})};e.s(["trackDebugSummaryUsed",()=>F,"trackDeploymentAddSecretClicked",()=>q,"trackDeploymentSectionViewed",()=>H],107129);var z=((t={}).Intro="intro",t.Deployment="deployment",t.DeploymentInProgress="deployment_in_progress",t.Analytics="analytics",t.Logs="logs",t.Settings="settings",t.Schedule="schedule",t.ResourceMonitoring="resource_monitoring",t.Domains="domains",t.ReservedVMTierSelection="reserved_vm_tier_selection",t.AutoscaleMachineConfiguration="autoscale_machine_configuration",t),G=((n={}).SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",n.ChangeView="change_view",n.OpenPane="open_pane",n);e.s(["ViewActionType",()=>G,"Views",()=>z],241703);var W=e.i(541793),K=e.i(845822),Y=e.i(967629),Z=e.i(480028),$=[1,2,4,8],X=(0,W.atom)(K.defaultAutoscaleDeploymentCostDetails),Q=(0,W.atom)(function(e){var t=e(X),n=t.costPerComputeUnitUsd*t.computeUnitsPerCpu;return[n,2*n,4*n,8*n]}),J=[[0,3],[0,4],[2,5],[3,6]],ee=$.length-1,et=1/(2*ee),en=(0,W.atom)(2),er=(0,W.atom)(function(e){return $[e(en)]}),ei=(0,W.atom)(function(e){return e(Q)[e(en)]}),ea=(0,W.atom)(function(e){return J[e(en)]}),eo=(0,W.atom)(0),es=(0,W.atom)(function(e){var t=e(ev)[0]/ee,n=e(ev)[1]/ee,r=0,i=0;return e(eo)<t&&(r=(t-e(eo))/et,i=t-et),e(eo)>n&&(r=(e(eo)-n)/et,i=n+et),{overage:r,point:i}}),el=(0,W.atom)(0),eu=(0,W.atom)(0),ec=[.5,1,2,4,8,16,32],ed=[[0,1],[0,1],[0,2],[0,3],[1,3],[2,3],[3,3]],ep=ec.length-1,ef=1/(2*ep),em=(0,W.atom)(4),eh=(0,W.atom)(function(e){return ec[e(em)]}),eg=(0,W.atom)(function(e){var t=e(X).costPerComputeUnitUsd;return e(ej)*t}),ev=(0,W.atom)(function(e){return ed[e(em)]}),ex=(0,W.atom)(0),ey=(0,W.atom)(function(e){var t=e(ea)[0]/ep,n=e(ea)[1]/ep,r=0,i=0;return e(ex)<t&&(r=(t-e(ex))/ef,i=t-ef),e(ex)>n&&(r=(e(ex)-n)/ef,i=n+ef),{overage:r,point:i}}),eb=(0,W.atom)(null,function(e,t){var n=e(en),r=e(ev)[0],i=e(ev)[1];n<r&&t(en,r),n>i&&t(en,i)}),eS=(0,W.atom)(null,function(e,t){var n=e(em),r=e(ea)[0],i=e(ea)[1];n<r&&t(em,r),n>i&&t(em,i)}),e_=(0,W.atom)(function(e){var t=e(ev)[0]/ee,n=e(ev)[1]/ee,r=e(ea)[0]/ep,i=e(ea)[1]/ep;return e(eo)<t?(t-e(eo))/et:e(eo)>n?(e(eo)-n)/et:e(ex)<r?(r-e(ex))/ef:e(ex)>i?(e(ex)-i)/ef:0}),ew=(0,W.atom)(function(e){var t;return(1e5*(t={ramCost:e(eg),cpuCost:e(ei)}).ramCost+1e5*t.cpuCost)/1e5}),ej=(0,W.atom)(function(e){var t=e(X).computeUnitsPerRam;return e(eh)*t}),eT=(0,W.atom)(function(e){var t=e(X).computeUnitsPerCpu;return e(er)*t}),ek=(0,W.atom)(function(e){return e(ej)+e(eT)}),eD=((r={}).None="0ms",r.Normal="200ms",r),eC=["ArrowLeft","ArrowRight","Home","End"],eE=(0,Y.css)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),eA=(0,Y.css)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:Z.tokens.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(Z.tokens.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}});e.s(["CPUValues",()=>$,"MAX_CPU_INDEX",()=>ee,"MAX_RAM_INDEX",()=>ep,"RAMValues",()=>ec,"SCRUBBING_KEYS",()=>eC,"TransitionTime",()=>eD,"costDetailsAtom",()=>X,"cpuComputeUnitsAtom",()=>eT,"cpuIndexAtom",()=>en,"cpuMulAtom",()=>eo,"cpuRangeOverageAtom",()=>es,"cpuThumbLeftAtom",()=>el,"cpuValueAtom",()=>er,"ramComputeUnitsAtom",()=>ej,"ramIndexAtom",()=>em,"ramMulAtom",()=>ex,"ramRangeOverageAtom",()=>ey,"ramThumbLeftAtom",()=>eu,"ramValueAtom",()=>eh,"scrubberCss",()=>eE,"snapDistanceAtom",()=>e_,"thumbCss",()=>eA,"totalComputeUnitsAtom",()=>ek,"totalCostAtom",()=>ew,"validateCPUAtom",()=>eb,"validateRAMAtom",()=>eS],957789);var eR=[1,2,3,4,5,6,7,8,9,10],eI=eR.length-1,eP=1/(2*eI),eM=(0,W.atom)(2),eO=(0,W.atom)(function(e){return eR[e(eM)]}),eV=(0,W.atom)(function(e){return(e(ew)*e(eO)).toFixed(6)}),eN=(0,W.atom)(function(e){return e(ek)*e(eO)}),eB=(0,W.atom)(0),eL=(0,W.atom)(function(e){var t=0/eI,n=eR.length-1/eI,r=0,i=0;return e(eB)<t&&(r=(t-e(eB))/eP,i=t-eP),e(eB)>n&&(r=(e(eB)-n)/eP,i=n+eP),{overage:r,point:i}}),eU=((i={}).None="0ms",i.Normal="120ms",i),eH=["ArrowLeft","ArrowRight","Home","End"],eF=(0,Y.css)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),eq=(0,Y.css)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:Z.tokens.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(Z.tokens.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}});e.s(["MAX_MAX_INSTANCES_INDEX",()=>eI,"SCRUBBING_KEYS",()=>eH,"TransitionTime",()=>eU,"maxInstancesComputeUnitsAtom",()=>eN,"maxInstancesCostAtom",()=>eV,"maxInstancesIndexAtom",()=>eM,"maxInstancesMulAtom",()=>eB,"maxInstancesRangeOverageAtom",()=>eL,"maxInstancesValueAtom",()=>eO,"maxInstancesValues",()=>eR,"scrubberCss",()=>eF,"thumbCss",()=>eq],522029);var ez=e.i(64386),eG=e.i(886513),eW=e.i(721281),eK=e.i(351981),eK=eK,eY=e.i(446530),eZ=e.i(613355),e$=e.i(625484),eX=eZ.container.min(600),eQ=(0,eY.cssRecord)({maxWidth:{width:"100%",maxWidth:600,alignSelf:"center"},hiddenOnMobile:[eZ.rcss.display.none,(0,eW._)({},eX,eZ.rcss.display.flex)],hiddenOnDesktop:[eZ.rcss.display.flex,(0,eW._)({},eX,eZ.rcss.display.none)]});function eJ(e){var t,n,r,i,a=e.children,s=e.render,u=e.timeout,c=void 0===u?300:u,d=e.initialHeight,p=(0,l.useRef)(null),f=(0,l.useRef)(null),m=(t=f,r=(n=(0,o._)((0,l.useState)(0),2))[0],i=n[1],(0,l.useEffect)(function(){if(t.current){var e=new ResizeObserver(function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value.borderBoxSize[0].blockSize;i(s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}});return e.observe(t.current),function(){return e.disconnect()}}},[r,t]),r),h=m>0?m:d,g={transition:c+"ms ease-out",transitionProperty:"height, opacity",opacity:0,height:0,visibility:"hidden"},v={entering:{opacity:1,height:h},entered:{transitionProperty:"opacity",opacity:1,height:h,visibility:"visible"},exiting:{opacity:0,height:0,visibility:"visible"},exited:{opacity:0,height:0,visibility:"hidden"}};return(0,j.jsx)(eK.default,{nodeRef:p,timeout:c,in:s,children:function(e){return(0,j.jsx)(e$.View,{innerRef:p,style:(0,k._)({},g,v[e]),children:(0,j.jsx)(e$.View,{innerRef:f,children:a})})}})}e.s(["TimelineTransition",()=>eJ,"mobileWidthContainerQuery",()=>eX,"sharedCss",()=>eQ],198992);var e0=[eZ.rcss.width("100%"),eZ.rcss.p(8)],e1=[eZ.rcss.py(32),eZ.rcss.minHeight("100%"),eZ.rcss.center],e2=function(e){var t=e.children,n=e.centered,r=e.maxWidth,i=(0,eG._)(e,["children","centered","maxWidth"]),a=[e0,n&&e1,r&&eQ.maxWidth].filter(Boolean);return(0,j.jsx)(e$.View,(0,ez._)((0,k._)({},i),{css:a,children:t}))};e.s(["PaneSection",()=>e2],32995);var e5=e.i(138716),e7=e.i(269848),e4=e.i(416298),e3=e.i(136540),e8=e.i(396776),e9=[eZ.rcss.p(8),eZ.rcss.center],e6=function(){return(0,j.jsx)(e$.View,{css:e9,children:(0,j.jsx)(e7.default,{size:24})})},te=(0,eY.cssRecord)({error:[eZ.rcss.flex.grow(0),eZ.rcss.mt(0)]}),tt=function(e){var t=e.text,n=(0,eG._)(e,["text"]);return(0,j.jsx)(e2,(0,ez._)((0,k._)({css:te.error},n),{children:(0,j.jsx)(e8.StatusBanner,{colorway:"warning",icon:(0,j.jsx)(e4.default,{}),text:t})}))},tn=function(e){var t=e.onBack;return(0,j.jsx)(e$.View,{row:!0,align:"center",children:(0,j.jsx)(e3.IconButton,{alt:"Back",tooltipBehavior:"hidden",onClick:t,children:(0,j.jsx)(e5.default,{})})})};e.s(["ViewBack",()=>tn,"ViewError",()=>tt,"ViewLoading",()=>e6],686631);var tr=e.i(442966),ti=e.i(416746);let ta=(0,l.forwardRef)(function(e,t){var n=(0,o._)((0,T.useAtom)(er),1)[0],r=(0,T.useSetAtom)(el),i=(0,l.useRef)(null),a=(0,l.useRef)(null);return(0,l.useImperativeHandle)(t,function(){return i.current}),n&&i.current&&(i.current.setAttribute("aria-valuemin",String($[0])),i.current.setAttribute("aria-valuemax",String($[$.length-1])),i.current.setAttribute("aria-valuenow",String(n))),(0,l.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),a.current=requestAnimationFrame(e))};return e(),function(){a.current&&cancelAnimationFrame(a.current)}},[r]),(0,l.useMemo)(function(){return(0,j.jsx)("div",{ref:i,role:"slider",tabIndex:0,css:[eA,{left:"calc((100% - 16px) * var(--cpu-progress, 0))",transition:"left var(--cpu-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])});var to=e.i(337761),ts="min(var(--point), var(--position))",tl="max(var(--point), var(--position))";let tu=(0,l.forwardRef)(function(e,t){var n=(0,T.useAtomValue)(es),r=n.overage,i=n.point,a=(0,T.useAtomValue)(eo),o=(0,l.useRef)(null);return(0,l.useEffect)(function(){(0,to.styleSet)(o,"--opacity",String(r))},[r]),(0,l.useEffect)(function(){(0,to.styleSet)(o,"--point",String(100*i)+"%")},[i]),(0,l.useEffect)(function(){(0,to.styleSet)(o,"--position",String(100*a)+"%")},[a]),(0,l.useMemo)(function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,j.jsx)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:Z.tokens.interactiveBorder,borderRadius:"2px"},children:(0,j.jsx)("div",{ref:o,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(ts,", \n                  ").concat(Z.tokens.interactiveBorderHover," ").concat(ts,", \n                  ").concat(Z.tokens.interactiveBorderHover," ").concat(tl,", \n                  transparent ").concat(tl," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});var tc=(0,eY.cssRecord)({container:{flexDirection:"row",justifyContent:"space-between",height:6,paddingLeft:8,paddingRight:8},mark:{width:1,backgroundColor:Z.tokens.outlineStronger}});function td(e){var t=e.list;return(0,j.jsx)(e$.View,{css:tc.container,children:t.map(function(e){return(0,j.jsx)(e$.View,{css:tc.mark},e)})})}var tp=eZ.container.min(320),tf=(0,eY.cssRecord)({container:eZ.rcss.colWithGap(4),label:[eZ.rcss.flex.column,eZ.rcss.pb(4),(0,eW._)({},tp,[eZ.rcss.flex.row,eZ.rcss.justify.spaceBetween,eZ.rcss.pb(0)])],resource:eZ.rcss.fontWeight.medium,cost:[eZ.rcss.rowWithGap(1),eZ.rcss.align.baseline]}),tm=e.i(546284),th=e.i(960178);function tg(e){var t=e.setAttrs,n=(0,o._)((0,T.useAtom)(en),2),r=n[0],i=n[1],a=(0,o._)((0,l.useState)(!1),2),s=a[0],u=a[1],c=(0,l.useRef)(null),d=(0,l.useRef)(null),p=(0,l.useRef)(null),f=(0,l.useCallback)(function(e){t.setTransitionTime(e)},[t]),m=(0,l.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||s||(m(r/ee),f(eD.Normal)),(0,l.useEffect)(function(){if(void 0!==r&&d.current&&p.current&&!s){var e=d.current,t=p.current,n=function(n){if(0===n.button){u(!0),t.focus();var r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),o=r.width,s=a.width,l=n.target===e?s/2:n.clientX-a.left,c=null,d=function(e){var t=Math.max(0,Math.min(1,(e-r.left-l)/(o-s)));t!==c&&(c=t,m(t),i(Math.round(t*ee)))};d(n.clientX);var p=function(e){f(eD.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},h=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",h),f(eD.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",h),window.addEventListener("pointercancel",h),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,s,i,m,f]),(0,l.useEffect)(function(){if(void 0!==r&&p.current&&!s){var e=p.current,t=function(e){if(void 0!==r&&eC.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(ee,r+1),a=null;switch(e.key){case"ArrowLeft":a=t;break;case"ArrowRight":a=n;break;case"Home":a=0;break;case"End":a=ee}null!==a&&(i(a),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[s,r,i]),(0,l.useMemo)(function(){return(0,j.jsxs)(e$.View,{gap:8,children:[(0,j.jsxs)(e$.View,{innerRef:c,css:eE,children:[(0,j.jsx)(tu,{ref:d}),(0,j.jsx)(ta,{ref:p})]}),(0,j.jsx)(td,{list:$})]})},[])}function tv(e){var t=e.setAttrs,n=(0,o._)((0,T.useAtom)(er),1)[0],r=(0,o._)((0,T.useAtom)(eT),1)[0],i=(0,T.useSetAtom)(eS);return(0,l.useEffect)(function(){i()},[i,n]),(0,j.jsxs)(e$.View,{css:tf.container,children:[(0,j.jsxs)(e$.View,{css:tf.label,children:[(0,j.jsxs)(th.Text,{css:tf.resource,multiline:!1,children:[n," vCPU",n>1?"s":""]}),(0,j.jsxs)(e$.View,{css:tf.cost,children:[(0,j.jsxs)(th.Text,{color:"dimmer",multiline:!1,children:[r," ",(0,tm.default)("compute unit",r)]}),(0,j.jsx)(th.Text,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,j.jsx)(tg,{setAttrs:t})]})}let tx=(0,l.forwardRef)(function(e,t){var n=(0,o._)((0,T.useAtom)(eh),1)[0],r=(0,T.useSetAtom)(eu),i=(0,l.useRef)(null),a=(0,l.useRef)(null);return(0,l.useImperativeHandle)(t,function(){return i.current}),n&&i.current&&(i.current.setAttribute("aria-valuemin",String(ec[0])),i.current.setAttribute("aria-valuemax",String(ec[ec.length-1])),i.current.setAttribute("aria-valuenow",String(n))),(0,l.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),a.current=requestAnimationFrame(e))};return e(),function(){a.current&&cancelAnimationFrame(a.current)}},[r]),(0,l.useMemo)(function(){return(0,j.jsx)("div",{ref:i,role:"slider",tabIndex:0,"data-ram-thumb":!0,css:[eA,{left:"calc((100% - 16px) * var(--ram-progress, 0))",transition:"left var(--ram-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])});var ty="min(var(--point), var(--position))",tb="max(var(--point), var(--position))";let tS=(0,l.forwardRef)(function(e,t){var n=(0,T.useAtomValue)(ey),r=n.overage,i=n.point,a=(0,T.useAtomValue)(ex),o=(0,l.useRef)(null);return(0,l.useEffect)(function(){(0,to.styleSet)(o,"--opacity",String(r))},[r]),(0,l.useEffect)(function(){(0,to.styleSet)(o,"--point",String(100*i)+"%")},[i]),(0,l.useEffect)(function(){(0,to.styleSet)(o,"--position",String(100*a)+"%")},[a]),(0,l.useMemo)(function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,j.jsx)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:Z.tokens.interactiveBorder,borderRadius:"2px"},children:(0,j.jsx)("div",{ref:o,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(ty,", \n                  ").concat(Z.tokens.interactiveBorderHover," ").concat(ty,", \n                  ").concat(Z.tokens.interactiveBorderHover," ").concat(tb,", \n                  transparent ").concat(tb," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});function t_(e){var t=e.setAttrs,n=(0,o._)((0,T.useAtom)(em),2),r=n[0],i=n[1],a=(0,o._)((0,l.useState)(!1),2),s=a[0],u=a[1],c=(0,l.useRef)(null),d=(0,l.useRef)(null),p=(0,l.useRef)(null),f=(0,l.useCallback)(function(e){t.setTransitionTime(e)},[t]),m=(0,l.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||s||(m(r/ep),f(eD.Normal)),(0,l.useEffect)(function(){if(void 0!==r&&d.current&&p.current&&!s){var e=d.current,t=p.current,n=function(n){if(0===n.button){u(!0),t.focus();var r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),o=r.width,s=a.width,l=n.target===e?s/2:n.clientX-a.left,c=null,d=function(e){var t=Math.max(0,Math.min(1,(e-r.left-l)/(o-s)));t!==c&&(c=t,m(t),i(Math.round(t*ep)))};d(n.clientX);var p=function(e){f(eD.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},h=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",h),f(eD.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",h),window.addEventListener("pointercancel",h),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,s,i,m,f]),(0,l.useEffect)(function(){if(void 0!==r&&p.current&&!s){var e=p.current,t=function(e){if(void 0!==r&&eC.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(ep,r+1),a=null;switch(e.key){case"ArrowLeft":a=t;break;case"ArrowRight":a=n;break;case"Home":a=0;break;case"End":a=ep}null!==a&&(i(a),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[s,r,i]),(0,l.useMemo)(function(){return(0,j.jsxs)(e$.View,{gap:8,children:[(0,j.jsxs)(e$.View,{innerRef:c,css:eE,children:[(0,j.jsx)(tS,{ref:d}),(0,j.jsx)(tx,{ref:p})]}),(0,j.jsx)(td,{list:ec})]})},[])}function tw(e){var t=e.setAttrs,n=(0,o._)((0,T.useAtom)(eh),1)[0],r=(0,o._)((0,T.useAtom)(ej),1)[0],i=(0,T.useSetAtom)(eb);return(0,l.useEffect)(function(){i()},[i,n]),(0,j.jsxs)(e$.View,{css:tf.container,children:[(0,j.jsxs)(e$.View,{css:tf.label,children:[(0,j.jsxs)(th.Text,{css:tf.resource,multiline:!1,children:[n," GiB RAM"]}),(0,j.jsxs)(e$.View,{css:tf.cost,children:[(0,j.jsxs)(th.Text,{color:"dimmer",multiline:!1,children:[r," ",(0,tm.default)("compute unit",r)]}),(0,j.jsx)(th.Text,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,j.jsx)(t_,{setAttrs:t})]})}var tj=(0,eY.cssRecord)({container:[eZ.rcss.width("100%"),eZ.rcss.position.absolute,eZ.rcss.top(60),eZ.rcss.bottom(21),eZ.rcss.transition.snappy,eZ.rcss.zIndex(1),(0,eW._)({},eZ.container.min(320),eZ.rcss.top(34))],svg:[eZ.rcss.width("100%"),eZ.rcss.height("100%"),eZ.rcss.overflow("visible")],overage:{"--opacity":0,opacity:"var(--opacity)",transition:"opacity 80ms ease-out"}});function tT(){var e,t=(0,T.useAtomValue)(e_),n=(0,l.useRef)(null),r=(0,l.useRef)(null),i=(0,l.useRef)((null==(e=r.current)?void 0:e.offsetWidth)||0),a=(0,T.useAtomValue)(el),o=(0,T.useAtomValue)(eu);(0,l.useEffect)(function(){r.current&&(i.current=r.current.offsetWidth)});var s={x1:a/(i.current-16)*100,x2:o/(i.current-16)*100,y1:0,y2:100,strokeWidth:3,vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges"};return(0,l.useEffect)(function(){(0,to.styleSet)(n,"--opacity",String(Math.pow(t,1/3)))},[t]),(0,j.jsx)(e$.View,{css:tj.container,px:8,id:"rope",innerRef:r,children:(0,j.jsxs)("svg",{height:100,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",css:tj.svg,children:[(0,j.jsx)("line",(0,ez._)((0,k._)({},s),{stroke:Z.tokens.outlineDimmer})),(0,j.jsx)("line",(0,ez._)((0,k._)({},s),{stroke:Z.tokens.outlineDefault,strokeDasharray:8})),(0,j.jsxs)("g",{ref:n,css:tj.overage,children:[(0,j.jsx)("line",(0,ez._)((0,k._)({},s),{stroke:Z.tokens.accentPrimaryDefault})),(0,j.jsx)("line",(0,ez._)((0,k._)({},s),{stroke:Z.tokens.accentPrimaryStrongest,strokeDasharray:8}))]})]})})}var tk=e.i(508775),tD=e.i(754873),tC=e.i(173703),tE=e.i(140487),tA=e.i(751273),tR=[eZ.rcss.borderRadius(8)],tI=(0,eY.cssRecord)({container:[tR],disabled:[tR,{opacity:.5,pointerEvents:"none"}],bottom:[eZ.rcss.border({direction:"top",color:Z.tokens.outlineDimmer})],edit:tD.interactive.outlined,overviewLine:[eZ.rcss.flex.column,(0,eW._)({},eZ.container.min(320),[eZ.rcss.flex.row,eZ.rcss.justify.spaceBetween])],overviewValue:[eZ.rcss.fontWeight.medium],cost:[eZ.rcss.flex.row,eZ.rcss.align.baseline,{gap:1}],builder:[eZ.rcss.position.relative,{"--cpu-transition-time":eD.Normal,"--cpu-progress":1,"--ram-transition-time":eD.Normal,"--ram-progress":1,"#rope":{opacity:0}," *":{transitionTimingFunction:"ease"},":hover, :focus-within":{" #rope":{opacity:1}}}]});function tP(e){var t=e.initialMachineConfiguration,n=e.machineConfiguration,r=e.disabled,i=e.toggleEditable,a=void 0===i||i,s=(0,l.useRef)(null),u=(0,o._)((0,l.useState)(!a),2),c=u[0],d=u[1],p=(0,T.useAtomValue)(er),f=(0,T.useAtomValue)(eh),m=(0,T.useAtomValue)(eT),h=(0,T.useAtomValue)(ej),g=(0,T.useAtomValue)(ew),v=(0,T.useAtomValue)(ek),x=(0,T.useSetAtom)(X),y=(0,T.useSetAtom)(eo),b=(0,T.useSetAtom)(ex),S=(0,T.useSetAtom)(en),_=(0,T.useSetAtom)(em);return(0,l.useEffect)(function(){x((0,tk.getDeploymentCostDetails)().autoscaleDeploymentCostDetails)},[x]),(0,l.useEffect)(function(){var e=n||t;if(e){var r=$.findIndex(function(t){return t.toString()===e.vcpu}),i=ec.findIndex(function(t){return t.toString()===e.memory});S(r),_(i)}},[n,t,S,_]),(0,j.jsxs)(tC.ShadesSurface,{css:r?tI.disabled:tI.container,children:[(0,j.jsxs)(e$.View,{p:16,gap:12,children:[(0,j.jsxs)(e$.View,{row:!0,gap:8,children:[(0,j.jsxs)(e$.View,{grow:!0,shrink:!0,gap:4,children:[(0,j.jsxs)(e$.View,{row:!0,gap:4,align:"center",children:[(0,j.jsx)(tr.default,{}),(0,j.jsx)(th.Text,{variant:"subheadDefault",multiline:!1,children:"Machine power"})]}),(0,j.jsx)(th.Text,{multiline:!0,color:"dimmer",children:"The power level for each machine that spins up upon any request"})]}),a?(0,j.jsx)(tE.Button,{text:c?"Done":"Edit",css:tI.edit,onClick:function(){return d(!c)}}):null]}),c?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(e$.View,{css:tI.builder,gap:12,innerRef:s,children:[(0,j.jsx)(tT,{}),(0,j.jsx)(tv,{setAttrs:{setTransitionTime:function(e){(0,to.styleSet)(s,"--cpu-transition-time",e)},setProgress:function(e){(0,to.styleSet)(s,"--cpu-progress",e.toString()),y(e)}}}),(0,j.jsx)(tw,{setAttrs:{setTransitionTime:function(e){(0,to.styleSet)(s,"--ram-transition-time",e)},setProgress:function(e){(0,to.styleSet)(s,"--ram-progress",e.toString()),b(e)}}})]}),(0,j.jsx)(th.Text,{color:"dimmer",children:"Only some configurations are valid. When you change one slider, the other one will automatically adjust to remain valid."})]}):(0,j.jsxs)(e$.View,{gap:8,children:[(0,j.jsxs)(e$.View,{css:tI.overviewLine,children:[(0,j.jsxs)(th.Text,{css:tI.overviewValue,multiline:!1,children:[p," vCPU",p>1?"s":""]}),(0,j.jsxs)(e$.View,{css:tI.cost,children:[(0,j.jsxs)(th.Text,{multiline:!1,color:"dimmer",children:[m," ",(0,tm.default)("compute unit",m)]}),(0,j.jsx)(th.Text,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]}),(0,j.jsxs)(e$.View,{css:tI.overviewLine,children:[(0,j.jsxs)(th.Text,{css:tI.overviewValue,multiline:!1,children:[f," GiB RAM"]}),(0,j.jsxs)(e$.View,{css:tI.cost,children:[(0,j.jsxs)(th.Text,{multiline:!1,color:"dimmer",children:[h," ",(0,tm.default)("compute unit",h)]}),(0,j.jsx)(th.Text,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]})]})]}),(0,j.jsx)(e$.View,{css:tI.bottom,p:16,children:(0,j.jsxs)(e$.View,{css:tI.overviewLine,children:[(0,j.jsx)(th.Text,{css:tI.overviewValue,multiline:!1,children:"Total per machine"}),(0,j.jsxs)(e$.View,{shrink:!0,align:"center",row:!0,gap:4,children:[(0,j.jsxs)(e$.View,{css:tI.cost,children:[(0,j.jsxs)(th.Text,{multiline:!1,children:[v," ",(0,tm.default)("compute unit",v)]}),(0,j.jsx)(th.Text,{variant:"small",color:"dimmer",multiline:!1,children:"/sec"})]}),(0,j.jsx)(tA.Tooltip,{tooltip:(0,j.jsxs)(e$.View,{css:tI.cost,children:[(0,j.jsxs)(th.Text,{multiline:!1,children:["$",g.toFixed(6)]}),(0,j.jsx)(th.Text,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]}),children:(0,j.jsx)(ti.default,{color:Z.tokens.foregroundDimmest})})]})]})})]})}var tM=e.i(917736);let tO=(0,l.forwardRef)(function(e,t){var n=(0,o._)((0,T.useAtom)(eO),1)[0],r=(0,l.useRef)(null);return(0,l.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin",String(eR[0])),r.current.setAttribute("aria-valuemax",String(eR[eR.length-1])),r.current.setAttribute("aria-valuenow",String(n))),(0,l.useMemo)(function(){return(0,j.jsx)("div",{ref:r,role:"slider",tabIndex:0,css:[eq,{left:"calc((100% - 16px) * var(--max-instances-progress, 0))",transition:"left var(--max-instances-transition-time, 100ms) ease-out"}]})},[])});var tV="min(var(--point), var(--position))",tN="max(var(--point), var(--position))";let tB=(0,l.forwardRef)(function(e,t){var n=(0,T.useAtomValue)(eL),r=n.overage,i=n.point,a=(0,T.useAtomValue)(eB),o=(0,l.useRef)(null);return(0,l.useEffect)(function(){(0,to.styleSet)(o,"--opacity",String(r))},[r]),(0,l.useEffect)(function(){(0,to.styleSet)(o,"--point",String(100*i)+"%")},[i]),(0,l.useEffect)(function(){(0,to.styleSet)(o,"--position",String(100*a)+"%")},[a]),(0,l.useMemo)(function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,j.jsx)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:Z.tokens.interactiveBorder,borderRadius:"2px"},children:(0,j.jsx)("div",{ref:o,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(tV,", \n                  ").concat(Z.tokens.interactiveBorderHover," ").concat(tV,", \n                  ").concat(Z.tokens.interactiveBorderHover," ").concat(tN,", \n                  transparent ").concat(tN," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});function tL(e){var t=e.setAttrs,n=(0,o._)((0,T.useAtom)(eM),2),r=n[0],i=n[1],a=(0,o._)((0,l.useState)(!1),2),s=a[0],u=a[1],c=(0,l.useRef)(null),d=(0,l.useRef)(null),p=(0,l.useRef)(null),f=(0,l.useCallback)(function(e){t.setTransitionTime(e)},[t]),m=(0,l.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||s||(m(r/eI),f(eU.Normal)),(0,l.useEffect)(function(){if(void 0!==r&&d.current&&p.current&&!s){var e=d.current,t=p.current,n=function(n){if(0===n.button){u(!0),t.focus();var r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),o=r.width,s=a.width,l=n.target===e?s/2:n.clientX-a.left,c=null,d=function(e){var t=Math.max(0,Math.min(1,(e-r.left-l)/(o-s)));t!==c&&(c=t,m(t),i(Math.round(t*eI)))};d(n.clientX);var p=function(e){f(eU.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},h=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",h),f(eU.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",h),window.addEventListener("pointercancel",h),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,s,i,m,f]),(0,l.useEffect)(function(){if(void 0!==r&&p.current&&!s){var e=p.current,t=function(e){if(void 0!==r&&eH.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(eI,r+1),a=null;switch(e.key){case"ArrowLeft":a=t;break;case"ArrowRight":a=n;break;case"Home":a=0;break;case"End":a=eI}null!==a&&(i(a),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[s,r,i]),(0,l.useMemo)(function(){return(0,j.jsx)(e$.View,{gap:8,children:(0,j.jsxs)(e$.View,{innerRef:c,css:eF,children:[(0,j.jsx)(tB,{ref:d}),(0,j.jsx)(tO,{ref:p})]})})},[])}function tU(e){var t=e.setAttrs,n=(0,o._)((0,T.useAtom)(eO),1)[0],r=(0,o._)((0,T.useAtom)(eV),1)[0],i=(0,o._)((0,T.useAtom)(eN),1)[0];return(0,j.jsxs)(e$.View,{css:tf.container,children:[(0,j.jsxs)(e$.View,{css:tf.label,children:[(0,j.jsxs)(th.Text,{css:tf.resource,multiline:!1,children:[n," ",(0,tm.default)("machine",n)]}),(0,j.jsxs)(e$.View,{shrink:!0,align:"center",row:!0,gap:4,children:[(0,j.jsxs)(e$.View,{css:tf.cost,children:[(0,j.jsxs)(th.Text,{multiline:!1,children:[i," compute units"]}),(0,j.jsx)(th.Text,{color:"dimmer",variant:"small",multiline:!1,children:"/s at max traffic"})]}),(0,j.jsx)(tA.Tooltip,{tooltip:(0,j.jsxs)(e$.View,{css:tf.cost,children:[(0,j.jsxs)(th.Text,{multiline:!1,children:["$",r]}),(0,j.jsx)(th.Text,{variant:"small",color:"dimmest",multiline:!1,children:"/s"})]}),children:(0,j.jsx)(ti.default,{color:Z.tokens.foregroundDimmest})})]})]}),(0,j.jsx)(tL,{setAttrs:t})]})}var tH=[eZ.rcss.colWithGap(12),eZ.rcss.borderRadius("container"),eZ.rcss.p(16)],tF=(0,eY.cssRecord)({container:[tH],disabled:[tH,{opacity:.5,pointerEvents:"none"}],builder:[eZ.rcss.position.relative,{"--max-instances-transition-time":eU.Normal,"--max-instances":1," *":{transitionTimingFunction:"ease"}}]});function tq(e){var t=e.initialMaxMachineInstances,n=e.maxMachineInstances,r=e.disabled,i=e.onError,a=(0,l.useRef)(null),o=(0,T.useSetAtom)(eB),s=(0,T.useSetAtom)(eM);return(0,l.useEffect)(function(){var e=n||t;if(e){var r=eR.indexOf(e);if(-1===r)return void i("An error occurred while setting selected max machine instances.");s(r)}},[t,n,s,i]),(0,j.jsxs)(tC.ShadesSurface,{css:r?tF.disabled:tF.container,children:[(0,j.jsxs)(e$.View,{gap:4,children:[(0,j.jsxs)(e$.View,{row:!0,gap:4,align:"center",children:[(0,j.jsx)(tM.default,{}),(0,j.jsx)(th.Text,{variant:"subheadDefault",multiline:!1,children:"Max number of machines"})]}),(0,j.jsx)(th.Text,{multiline:!0,variant:"small",color:"dimmer",children:"The most machines that should ever spin up to handle your highest traffic. More machines means a faster experience for your users."})]}),(0,j.jsx)(e$.View,{css:tF.builder,gap:8,innerRef:a,children:(0,j.jsx)(tU,{setAttrs:{setTransitionTime:function(e){(0,to.styleSet)(a,"--max-instances-transition-time",e)},setProgress:function(e){(0,to.styleSet)(a,"--max-instances-progress",e.toString()),o(e)}}})})]})}function tz(e){var t=e.initialMachineConfiguration,n=e.machineConfiguration,r=e.initialMaxMachineInstances,i=e.maxMachineInstances,a=e.disabled,o=void 0!==a&&a,s=e.toggleEditable,l=e.onError;return(0,j.jsxs)(e$.View,{gap:16,children:[(0,j.jsxs)(e$.View,{gap:4,children:[(0,j.jsx)(th.Text,{variant:"subheadBig",children:"Autoscale machine configuration"}),(0,j.jsx)(th.Text,{variant:"small",color:"dimmer",children:"Autoscale apps spin up enough machines to meet demand at any point in time. You are billed for the total number of compute units across all machines."})]}),(0,j.jsxs)(e$.View,{gap:16,children:[(0,j.jsx)(tP,{initialMachineConfiguration:t,machineConfiguration:n,disabled:o,toggleEditable:void 0===s||s}),(0,j.jsx)(tq,{initialMaxMachineInstances:r,maxMachineInstances:i,disabled:o,onError:l})]})]})}function tG(e){var t=e.slug,n=e.machineConfigurations;if(t&&n)return n.find(function(e){return e.slug===t})}function tW(e){var t,n,r=e.isAzureDeployment,i=e.isFreeUser,a=e.onError,o=(t={onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&a("Something went wrong")},onError:function(e){return a(e.message)}},n=(0,k._)({},I,t),E.useQuery(P,n)),s=o.data,u=o.loading,c=(null==s?void 0:s.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?s.hostingMachineConfigurations.results:null,d=(0,T.useAtomValue)(er),p=(0,T.useAtomValue)(eh),f=(0,T.useAtomValue)(eO),m=(0,l.useMemo)(function(){return function(e){var t=e.autoscaleCpuValue,n=e.autoscaleRamValue,r=e.maxInstances,i=e.autoscaleConfigurations;if(i){var a=i.find(function(e){var r=e.vcpu,i=e.memory;return t.toString()===r&&n.toString()===i});if(a){var o=a.id,s=a.slug;return{configurationId:o,configurationLabel:a.label,configurationSlug:s,maxInstances:r}}}}({autoscaleCpuValue:d,autoscaleRamValue:p,maxInstances:f,autoscaleConfigurations:c})},[d,p,f,c]),h=(0,l.useMemo)(function(){return function(e){var t=e.selectedMachineConfiguration,n=e.machineConfigurations,r=e.isAzureDeployment,i=e.isFreeUser;if(r){var a=null==n?void 0:n.find(function(e){return"cr-4-8"===e.slug});if(!a)return;return{configurationId:a.id,configurationLabel:a.label,configurationSlug:a.slug,maxInstances:2}}if(i){var o=null==n?void 0:n.find(function(e){return"cr-2-4"===e.slug});if(!o)return;return{configurationId:o.id,configurationLabel:o.label,configurationSlug:o.slug,maxInstances:1}}return t}({selectedMachineConfiguration:m,machineConfigurations:c,isAzureDeployment:r,isFreeUser:i})},[m,c,r,i]);return{defaultMachineConfiguration:h,selectedMachineConfiguration:r||i?h:m,machineConfigurations:c,loading:u}}e.s(["AutoscaleConfigurationBuilder",()=>tz],936239);var tK=function(e){var t=e.type,n=e.fetching,r=e.onError,i=e.onConfirm,a=e.onBack,o=(0,N.useDeploymentMode)(),s=(0,V.useDeploymentId)(),u=(0,V.useDeploymentCurrentBuild)(),c=(0,V.useDeploymentInProgressBuild)(),d=(0,V.useFreeTierCloudServices)(),p=void 0!==c,f=!p&&"string"!=typeof s,m="azure_container_app"===t,h=tW({isAzureDeployment:m,isFreeUser:d,onError:r}),g=h.defaultMachineConfiguration,v=h.selectedMachineConfiguration,x=h.machineConfigurations,y=h.loading;(0,l.useEffect)(function(){H({context:z.AutoscaleMachineConfiguration})},[]);var b=(0,l.useCallback)(function(){v?i(v):r("An error occurred trying to validate selected machine configuration")},[v,r,i]),S=y||n||p||o!==B.DeploymentMode.Ready||m||d,_=(0,l.useMemo)(function(){return m?{initialMachineConfiguration:tG({slug:null==g?void 0:g.configurationSlug,machineConfigurations:x}),initialMaxMachineInstances:null==g?void 0:g.maxInstances}:{initialMachineConfiguration:void 0,initialMaxMachineInstances:void 0}},[g,x,m]),w=_.initialMachineConfiguration,T=_.initialMaxMachineInstances;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(e2,{maxWidth:!0,children:(0,j.jsx)(tn,{onBack:function(){a()}})}),(0,j.jsx)(e2,{maxWidth:!0,children:(0,j.jsxs)(e$.View,{gap:16,children:[(0,j.jsx)(tz,{initialMachineConfiguration:w,machineConfiguration:null==u?void 0:u.machineConfiguration,initialMaxMachineInstances:T,maxMachineInstances:null==u?void 0:u.maxMachineInstances,disabled:S,onError:r}),(0,j.jsxs)(e$.View,{gap:8,pt:8,children:[(0,j.jsx)(tE.Button,{colorway:"primary",text:f?"Approve and configure build settings":"Approve and update",iconRight:(0,j.jsx)(M.default,{}),onClick:b,loading:y}),(0,j.jsxs)(th.Text,{color:"dimmest",children:["Your published app will utilize any available monthly free allotment before charging for additional resource usage."," ",(0,j.jsx)("a",{href:O.LINKS_DOCS.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]})]})})]})}},492267,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245),i=e.i(304277);function a(){var e=(0,n._)(["\n  query IsAgentStackRepl($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isAgentStack\n        }\n      }\n    }\n  }\n"]);return a=function(){return e},e}e.i(566901);var o={},s=(0,r.gql)(a()),l=e.i(207237);function u(){var e,n,r,a,u,c=(a={variables:{replId:(0,l.default)()}},u=(0,t._)({},o,a),i.useQuery(s,u)),d=c.data,p=c.loading,f=c.refetch;return{isAgentStackRepl:(null==d||null==(e=d.getRepl)?void 0:e.__typename)==="Repl"&&null!=(r=null==(n=d.getRepl.config)?void 0:n.isAgentStack)&&r,loading:p,refetch:f}}e.s(["useIsAgentStackRepl",()=>u],492267)},399344,293265,e=>{"use strict";e.s(["Init",()=>eQ,"claimedFreeDomainAtom",()=>el,"containerAtom",()=>G,"determineIgnoredSecretKeys",()=>z,"dotReplitAtom",()=>Y,"fsAtom",()=>W,"getPrivacyMode",()=>e7,"hideFreeDomainClaimSectionAtom",()=>es,"mergeEnvironmentVariables",()=>q,"portsAtom",()=>Z,"secretsAtom",()=>K,"useActiveBuildAction",()=>eY,"useAgentInboxState",()=>eB,"useAvailableDeploymentProviders",()=>ej,"useCancelInProgressDeploymentsBuild",()=>te,"useDeployBuild",()=>e3,"useDeploymentCostDetails",()=>ew,"useDeploymentCurrentBuild",()=>eD,"useDeploymentDeployability",()=>eS,"useDeploymentError",()=>eP,"useDeploymentErrorGetter",()=>eM,"useDeploymentFailedBuild",()=>eR,"useDeploymentId",()=>eo,"useDeploymentInProgressBuild",()=>eE,"useDeploymentProvider",()=>eT,"useDeploymentScheduledDeletionTime",()=>ep,"useDeploymentSecurityScanState",()=>eV,"useDeploymentSessionOrg",()=>en,"useDeploymentSessionUser",()=>ei,"useDeploymentSubdomain",()=>eh,"useDeploymentTimeCreated",()=>ec,"useDotReplitService",()=>Q,"useFreeTierCloudServices",()=>eb,"useFsService",()=>$,"useIsMaybeVncRepl",()=>ev,"useLatestBuildActionUpdate",()=>eZ,"usePortsService",()=>J,"usePostDeployModal",()=>tn,"useRefetchDeployment",()=>eJ,"useReplitBadgeState",()=>eU,"useSecretsService",()=>X,"useSendDeploymentLifecycleCommand",()=>e9,"useSetDeploymentTriggerSource",()=>tt],399344);var t=e.i(297083),n=e.i(167626),r=e.i(878420),i=e.i(64386),a=e.i(530658),o=e.i(817556),s=e.i(389959),l=e.i(611159),u=e.i(131141),c=e.i(541793),d=e.i(442121),p=e.i(403934),f=e.i(165349),m=e.i(368964),h=e.i(257982),g=e.i(379334),v=e.i(967963),x=e.i(262664),y=e.i(424746),b=e.i(483820),S=e.i(271047),_=e.i(233693),w=e.i(265957),j=e.i(914279),T=e.i(830597),k=e.i(68893),D=e.i(165550),C=e.i(729678),E=e.i(589910),A=e.i(311106),R=e.i(508775),I=e.i(968783),P=e.i(993796),M=e.i(98816),O=e.i(574203),V=e.i(325990),N=e.i(207237);e.i(653863);var B=e.i(973519),L=e.i(492267),U=e.i(597103);function H(){var e,t=(0,U.useReplConfigAgentStackPlatformTypeQuery)({variables:{replId:(0,N.default)()}}),n=t.data,r=t.loading,i=t.refetch;return{agentStackPlatformType:(null==n||null==(e=n.getRepl)?void 0:e.__typename)==="Repl"&&n.getRepl.config.agentStackPlatformType,loading:r,refetch:i}}e.s(["useAgentStackPlatformType",()=>H],293265);var F=e.i(423111);function q(e){var t=e.currentBuildVars,n=e.workspaceSecrets,r=e.ignoredSecretKeys,i=new Map((null==t?void 0:t.map(function(e){return[e.name,e.value]}))||[]);return n&&n.forEach(function(e){var t=e.name,n=e.value;r.includes(t)||i.set(t,n)}),Array.from(i.entries()).map(function(e){var t=(0,a._)(e,2);return{name:t[0],value:t[1]}})}function z(e){return(0,t._)(function(e){var t,n,r,i,a;return(0,o._)(this,function(o){return(t=e.deploymentTimeCreated,n=e.buildTimeCreated,r=e.ignoreSecretsUntil,i=e.replId,a=e.apolloClient,t&&n&&r>new Date(t)&&r>new Date(n))?[2,(0,_.getDeploymentEnvVars)({replId:i,apolloClient:a}).then(function(e){return e.map(function(e){return e.name})})]:[2,(0,_.getDeploymentIgnoredSecrets)({replId:i,apolloClient:a})]})}).apply(this,arguments)}var G=(0,c.atom)({}),W=(0,c.atom)({}),K=(0,c.atom)({}),Y=(0,c.atom)({}),Z=(0,c.atom)({});function $(){return(0,T.useValue)(W)}function X(){return(0,T.useValue)(K)}function Q(){return(0,T.useValue)(Y)}function J(){return(0,T.useValue)(Z)}var ee=(0,c.atom)(void 0),et=(0,c.atom)(void 0);function en(){return(0,T.useValue)(et)}var er=(0,c.atom)(void 0);function ei(){return(0,T.useValue)(er)}var ea=(0,c.atom)(void 0);function eo(){return(0,T.useValue)(ea)}var es=(0,c.atom)(!1),el=(0,c.atom)(null),eu=(0,c.atom)(void 0);function ec(){return(0,T.useValue)(eu)}var ed=(0,c.atom)(void 0);function ep(){return(0,T.useValue)(ed)}var ef=(0,c.atom)(void 0),em=(0,c.atom)(void 0);function eh(){return(0,T.useValue)(em)}var eg=(0,c.atom)(void 0);function ev(){return(0,T.useValue)(eg)}var ex=(0,c.atom)(!1),ey=(0,c.atom)(void 0);function eb(){var e,t,n=(0,T.useValue)(ey);return null!=(t=null==n||null==(e=n.useFreeTierCloudServices)?void 0:e.isAuthorized)&&t}function eS(){var e,t,n,r=(0,T.useValue)(ee),i=(0,T.useValue)(ey),o=(0,T.useValue)(ek),s=(0,T.useSet)(eq),l=(0,T.useSet)(e0),u=(0,a._)((0,p.useDeploymentSessionLazyQuery)({fetchPolicy:"no-cache",onCompleted:s,onError:function(e){l(e.message)}}),1)[0],c=function(e,t){if(!e||!i)return{deploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:m.ReplAuthorizationCode.InsufficientPermissions,message:"Loading"},redeploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:m.ReplAuthorizationCode.InsufficientPermissions,message:"Loading"},isIncludedInSubscription:!1};var n=i.createAutoscaleDeployment,r=i.createAutoscaleDeploymentPrivate,a=i.createRvmDeployment,o=i.createRvmDeploymentPrivate,s=i.createScheduledDeployment,l=i.createStaticDeployment,u=i.createStaticDeploymentPrivate,c=i.redeployAutoscaleDeployment,d=i.redeployAutoscaleDeploymentPrivate,p=i.redeployRvmDeployment,f=i.redeployRvmDeploymentPrivate,g=i.redeployScheduledDeployment,v=i.redeployStaticDeployment,x=i.redeployStaticDeploymentPrivate;switch(e){case m.HostingBuildProvider.Static:return{deploy:t?u:l,redeploy:t?x:v,isIncludedInSubscription:!1};case m.HostingBuildProvider.Cron:return{deploy:s,redeploy:g,isIncludedInSubscription:!1};case m.HostingBuildProvider.AzureContainerApp:case m.HostingBuildProvider.CloudRun:return{deploy:t?r:n,redeploy:t?d:c,isIncludedInSubscription:!1};case m.HostingBuildProvider.AzureVm:case m.HostingBuildProvider.Gce:return{deploy:t?o:a,redeploy:t?f:p,isIncludedInSubscription:!1};case m.HostingBuildProvider.Extension:throw Error("Found unexpected provider");default:(0,h.default)(e)}};return{deployability:c(null==o?void 0:o.provider,null!=(t=null==o?void 0:o.isPrivate)?t:void 0),getDeployabilityByProvider:c,refetch:function(){if(r)return u({variables:{replId:r.id}})},hasDebugSummariesAuthorization:null!=(n=null==i||null==(e=i.useDeploymentDebugSummaries)?void 0:e.isAuthorized)&&n}}var e_=(0,c.atom)(R.defaultDeploymentCostDetails);function ew(){var e=(0,T.useValue)(e_),t=(0,s.useCallback)(function(t){return(0,R.getMachineConfigurationCostDetails)(t,e)},[e]);return(0,i._)((0,r._)({},e),{getMachineConfigurationCostDetailsBySlug:t})}function ej(){var e=en(),t=(0,V.useOrgFlag)({controlName:g.flagShowOnlyAzureDeployments,default:!1}),n=(0,P.useFlag)({controlName:g.flagShowOnlyAzureDeployments,default:!1}),r=e?t:n,i=(0,s.useCallback)(function(e){switch(e){case m.DeployHostingBuildAppType.CloudRun:return r?m.HostingBuildProvider.AzureContainerApp:m.HostingBuildProvider.CloudRun;case m.DeployHostingBuildAppType.Worker:case m.DeployHostingBuildAppType.Server:if(r)return m.HostingBuildProvider.AzureVm;return m.HostingBuildProvider.Gce;case m.DeployHostingBuildAppType.Cron:if(r)throw Error("Azure deployments are not supported for Cron jobs");return m.HostingBuildProvider.Cron;case m.DeployHostingBuildAppType.Static:if(r)throw Error("Azure deployments are not supported for Static sites");return m.HostingBuildProvider.Static;default:(0,h.default)(e)}},[r]),a=r?{deploymentProviders:[m.HostingBuildProvider.AzureContainerApp,m.HostingBuildProvider.AzureVm],defaultDeploymentProvider:m.HostingBuildProvider.AzureContainerApp}:{deploymentProviders:[m.HostingBuildProvider.Gce,m.HostingBuildProvider.CloudRun,m.HostingBuildProvider.Static,m.HostingBuildProvider.Cron],defaultDeploymentProvider:m.HostingBuildProvider.CloudRun};return{deploymentProviders:a.deploymentProviders,defaultDeploymentProvider:a.defaultDeploymentProvider,getProviderFromAppType:i}}function eT(e){var n=e.onError,r=e.dotReplitService,i=(0,a._)((0,s.useState)(!0),2),l=i[0],u=i[1],c=(0,a._)((0,s.useState)(void 0),2),d=c[0],p=c[1],f=(0,a._)((0,s.useState)(void 0),2),h=f[0],g=f[1],v=ej(),x=v.defaultDeploymentProvider,y=v.getProviderFromAppType,b=(0,L.useIsAgentStackRepl)().isAgentStackRepl;return(0,s.useEffect)(function(){(0,t._)(function(){var e,t,i;return(0,o._)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,2,3,4]),x===m.HostingBuildProvider.AzureContainerApp)return p(x),g(x),[2];if(b)return p(e=y(m.DeployHostingBuildAppType.CloudRun)),g(e),[2];return[4,(0,C.getDotReplitDeploymentConfig)(r)];case 1:if(null===(t=a.sent()).appType)return p(x),g(x),[2];return p(i=y(t.appType)),g(i),[3,4];case 2:return a.sent(),n("Something went wrong"),[3,4];case 3:return u(!1),[7];case 4:return[2]}})})()},[n,r,x,y,b]),{loading:l,activeProvider:d,setActiveProvider:p,recommendedProvider:h}}var ek=(0,c.atom)(void 0);function eD(){return(0,T.useValue)(ek)}var eC=(0,c.atom)(void 0);function eE(){return(0,T.useValue)(eC)}var eA=(0,c.atom)(void 0);function eR(){return(0,T.useValue)(eA)}var eI=(0,c.atom)(void 0);function eP(){return(0,T.useValue)(eI)}function eM(){return(0,T.useGet)(eI)}var eO=(0,c.atom)(!1);function eV(){var e=(0,T.useValue)(eO),t=(0,T.useSet)(eO),n=(0,I.useCurrentUserStoredOrgContext)().orgId,r=(0,O.default)(n),i=r.requireSecurityScanOnDeployment,a=r.adminOnlySecurityScanOnDeploymentBypass,o=r.isAdmin,l=(0,s.useMemo)(function(){return!!n&&(!!i||!!a&&!o)},[n,i,a,o]),u=!l,c=l||e,d=(0,s.useMemo)(function(){if(l){if(i)return"required";if(a&&!o)return"admin-only-bypass"}},[l,i,a,o]);return{enabled:c,userCanControl:u,isOrgEnforced:l,enforcementReason:d,setDeploymentSecurityScanEnabled:t}}var eN=(0,c.atom)(!1);function eB(){return{enabled:(0,T.useValue)(eN),setAgentInboxEnabled:(0,T.useSet)(eN)}}var eL=(0,c.atom)(null);function eU(){return{enabled:(0,T.useValue)(eL),setReplitBadgeEnabled:(0,T.useSet)(eL)}}var eH=(0,c.atom)(void 0),eF=(0,c.atom)(null,function(e,t){t(ea,void 0),t(eu,void 0),t(em,void 0),t(ek,void 0),t(eC,void 0),t(j.deploymentModeAtom,k.DeploymentMode.Ready)}),eq=(0,c.atom)(null,function(e,t,n){var r,i="Repl"===n.getRepl.__typename?n.getRepl:null,a=(null==(r=n.currentUser)?void 0:r.__typename)==="CurrentUser"?n.currentUser:null;i&&a&&t(ey,i.authorizations)}),ez=(0,c.atom)(null,function(e,t,n){var r,i,a,o,s,l="Repl"===n.getRepl.__typename?n.getRepl:null,u=(null==(r=n.currentUser)?void 0:r.__typename)==="CurrentUser"?n.currentUser:null;if(l&&u){t(ee,l),t(et,null!=(i=l.org)?i:void 0),t(er,u),t(eq,n),t(e_,(0,R.getDeploymentCostDetails)()),t(eg,!!l.config.isVnc);var c=l.hostingDeployment;if(c){if("HostingDeployment"!==c.__typename)return t(eI,"Unexpected hosting deployment typename: ".concat(c.__typename));if(t(ea,c.id),t(eu,c.timeCreated),t(ek,c.currentBuild),t(ed,c.scheduledDeletionTime||void 0),t(eO,c.securityScanEnabled),t(eN,null!=(a=c.agentInboxEnabled)&&a),t(eL,null!=(o=c.replitBadgeEnabled)?o:null),t(ef,null!=(s=c.latestBuildStatus)?s:void 0),t(em,c.replitAppSubdomain||l.suggestedUniqueSubdomain||""),c.inProgressBuild){t(eC,c.inProgressBuild),t(j.deploymentModeAtom,k.DeploymentMode.Deploying);return}return void t(j.deploymentModeAtom,(0,D.getDeploymentModeFromBuildStatus)(c.currentBuild.status))}t(em,l.suggestedUniqueSubdomain||""),t(j.deploymentModeAtom,k.DeploymentMode.Ready)}});function eG(){var e=(0,T.useSet)(ez),t=(0,T.useSet)(e0);return(0,a._)((0,p.useDeploymentSessionLazyQuery)({fetchPolicy:"no-cache",onCompleted:e,onError:function(e){t(e.message)}}),1)[0]}var eW=(0,c.atom)(null,function(e,t,n){if("HostingBuildDeployStatusAction"===n.__typename){var r=e(j.deploymentModeAtom),i=e(eC),a=e(ek),o=n.status;if(r===k.DeploymentMode.Deploying){if(!i)return void t(e0,"No deployment in progress found");t(eC,(0,u.produce)(i,function(e){e.status=o})),(o===m.HostingBuildStatus.Success||o===m.HostingBuildStatus.Failed)&&(o===m.HostingBuildStatus.Failed&&t(eA,(0,u.produce)(i,function(e){e.status=o})),t(eC,void 0),o!==m.HostingBuildStatus.Success&&a||t(ek,(0,u.produce)(i,function(e){e.status=o,e.hasImageTag=i.provider!==m.HostingBuildProvider.Static&&o===m.HostingBuildStatus.Success})))}else if(r===k.DeploymentMode.ProcessingLifecycleCommand){if(!a)return void t(e0,"No current build found");t(ek,(0,u.produce)(a,function(e){e.status=o}))}t(j.deploymentModeAtom,(0,D.getDeploymentModeFromBuildStatus)(o)),n.message&&o===m.HostingBuildStatus.Failed&&t(e0,n.message)}}),eK=(0,c.atom)(null);function eY(){return(0,T.useValue)(eK)}function eZ(e){var t=(0,T.useObservableValue)(eK),n=(0,M.default)(e);(0,s.useEffect)(function(){return t.subscribe(function(e){e&&n.current(e)})},[t,n])}var e$=(0,c.atom)(function(e){var t,n;switch(e(j.deploymentModeAtom)){case k.DeploymentMode.Deploying:return null==(t=e(eC))?void 0:t.id;case k.DeploymentMode.ProcessingLifecycleCommand:return null==(n=e(ek))?void 0:n.id;default:return}}),eX=(0,c.atom)(null,function(e,n,r){var i=r.data.data;return(0,t._)(function(){return(0,o._)(this,function(e){return i&&(n(eW,i.hostingBuildDeployActionUpdates),n(eK,i.hostingBuildDeployActionUpdates)),[2]})})()});function eQ(e){var t,n,r,i,a;return t=e.replId,n=eG(),r=(0,T.useSet)(eX),i=(0,T.useSet)(e0),(0,s.useEffect)(function(){n({variables:{replId:t}})},[n,t]),a=(0,T.useValue)(e$),(0,p.useDeploymentSessionBuildDeployActionUpdatesSubscription)({variables:{input:{buildId:null!=a?a:""}},skip:!a,onData:r,onError:function(e){i(e.message)}}),null}function eJ(){var e=(0,N.default)(),t=eG(),n=(0,T.useSet)(j.deploymentModeAtom);return(0,s.useCallback)(function(){return n(k.DeploymentMode.Loading),t({variables:{replId:e}})},[t,n,e])}var e0=(0,c.atom)(null,function(e,t,n){t(eI,n)}),e1=(0,c.atom)(null,function(e,t,n){var r,i=n.deployHostingBuild2;if(i){if("DeployHostingBuild2Result"!==i.__typename)return void t(e0,i.message);t(eI,void 0),t(eC,i.build),t(ea,i.targetDeployment.id),t(eu,i.targetDeployment.timeCreated),t(em,null!=(r=i.targetDeployment.replitAppSubdomain)?r:void 0),t(j.deploymentModeAtom,k.DeploymentMode.Deploying)}}),e2=(0,c.atom)(null,function(e,t,n){var r,i=n.rollbackHostingBuild;if(i){if("RollbackHostingBuildResult"!==i.__typename)return void t(e0,i.message);t(eC,i.build),t(ea,i.targetDeployment.id),t(eu,i.targetDeployment.timeCreated),t(em,null!=(r=i.targetDeployment.replitAppSubdomain)?r:void 0),t(j.deploymentModeAtom,k.DeploymentMode.Deploying)}});function e5(e){var t=e.provider,n=e.ignorePorts;switch(t){case m.HostingBuildProvider.Static:return m.DeployHostingBuildAppType.Static;case m.HostingBuildProvider.CloudRun:case m.HostingBuildProvider.AzureContainerApp:return m.DeployHostingBuildAppType.CloudRun;case m.HostingBuildProvider.Cron:return m.DeployHostingBuildAppType.Cron;case m.HostingBuildProvider.Gce:case m.HostingBuildProvider.AzureVm:case m.HostingBuildProvider.Extension:case void 0:return n?m.DeployHostingBuildAppType.Worker:m.DeployHostingBuildAppType.Server;default:(0,h.default)(t)}}function e7(e){var t=e.isPrivate,n=e.hasPrivatePassword;return t&&n?m.DeployHostingBuildPrivacyMode.Password:t?m.DeployHostingBuildPrivacyMode.Private:m.DeployHostingBuildPrivacyMode.Public}function e4(e){var t=e.selectedPrivacyMode,n=e.shouldRequirePrivateDeployments,r=e.shouldDisablePasswordProtectedDeployments;return n&&t===m.DeployHostingBuildPrivacyMode.Public||r&&t===m.DeployHostingBuildPrivacyMode.Password?m.DeployHostingBuildPrivacyMode.Private:t}function e3(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).openDeploymentsPane,n=(0,N.default)(),u=en(),c=(0,d.useApolloClient)(),_=eo(),D=ec(),R=Q(),I=(0,T.useValue)(G),M=$(),V=X(),B=eb(),L=(0,a._)((0,p.useDeploymentSessionDeployBuildMutation)(),1)[0],U=(0,T.useSet)(e1),H=(0,T.useSet)(e0),W=(0,T.useSet)(e2),K=(0,T.useSet)(j.deploymentModeAtom),Y=(0,T.useGet)(eC),Z=(0,T.useSet)(eA),J=(0,T.useGet)(eH),ee=eV().enabled,et=eB().enabled,er=eU().enabled,ei=eD(),ea=(0,a._)((0,f.useRollbackHostingBuildMutation)(),1)[0],es=(0,x.useHeliumDevelopmentDatabase)(),el=es.database,eu=es.getPgVersion,ed=es.getTableCount,ep=(0,y.useNeonDevelopmentDatabase)().database,ef=(0,y.useNeonProductionDatabase)().database,em=(0,w.usePrepareDatabaseState)(),eh=em.state,eg=em.dispatch,ev=(0,S.useHostingBuildRequiresDatabasePreparation)().requiresDatabasePreparation,ey=(0,y.useRefetchDatabasesLazy)("production").refetch,eS=(0,O.default)(null==u?void 0:u.id),e_=eS.requirePrivateDeployments,ew=eS.adminOnlyPublicDeployments,ej=eS.disablePasswordProtectedDeployments,eT=eS.adminOnlyPasswordProtectedDeploymentsBypass,ek=eS.isAdmin,eE=(0,F.useSetPublishClickedCompleted)(),eR=e_||!ek&&ew,eI=ej||!ek&&eT,eP=(0,s.useCallback)(function(e,t){var n,r,i;if(U(e),t&&!ef&&ey(),(null==(n=e.deployHostingBuild2)?void 0:n.__typename)!=="DeployHostingBuild2Result")throw Error(null!=(i=null==(r=e.deployHostingBuild2)?void 0:r.message)?i:"Unknown error")},[U,ef,ey]),eM=(0,P.useFlag)({controlName:g.flagEnableStandByBuilds,default:!1}),eO=(0,s.useCallback)(function(r){var i=r.envVars,a=r.subdomain,s=r.machineConfigurationId,c=r.maxMachineInstances,d=r.config,p=r.machineJob,f=r.privacyMode,x=r.privatePassword,y=r.hasAgentSession,S=r.ignoredSecrets,w=r.createNeonProductionDatabase,j=r.pushDevelopmentDatabaseObjects,T=r.syncStripe,D=r.enableSecurityScan,E=r.agentInboxEnabled,A=r.replitBadgeEnabled,P=r.provider,O=r.purchaseDomain;return(0,t._)(function(){var t,r,V,N,B,U,F,q,z,G,W,$;return(0,o._)(this,function(o){switch(o.label){case 0:if(eE(!0),Z(void 0),Y())return H("Deployment already in progress"),[2];o.label=1;case 1:if(o.trys.push([1,10,,11]),t=d.buildCommand,r=d.runCommand,V=d.publicDir,N=d.ignorePorts,!(B=P?e5({provider:P,ignorePorts:!!N}):d.appType))throw new b.AppTypeFoundError;if(!a)throw new b.SubdomainNotFoundError;switch(B){case m.DeployHostingBuildAppType.Static:if(!(0,v.hasCommand)(V))throw new b.PublicDirNotFoundError;break;case m.DeployHostingBuildAppType.Worker:case m.DeployHostingBuildAppType.Server:case m.DeployHostingBuildAppType.CloudRun:case m.DeployHostingBuildAppType.Cron:if(!(0,v.hasCommand)(r))throw new b.RunCommandNotFoundError;if((0,v.hasInvalidRunCommand)(r))throw new b.InvalidRunCommandError;if(B===m.DeployHostingBuildAppType.Cron){if(!(null==p?void 0:p.crontab)||""===p.crontab)throw new b.InvalidCrontabError("Schedule cannot be empty.");if(!(0,l.isValidCron)(p.crontab))throw new b.InvalidCrontabError("Invalid schedule. Must be a valid cron expression.");if(!(null==p?void 0:p.timezone)||""===p.timezone)throw new b.InvalidTimezoneError("Timezone cannot be empty.");if(!(0,g.isValidTimezone)(p.timezone))throw new b.InvalidTimezoneError("Invalid timezone. Must be valid a timezone abbreviation.")}break;default:(0,h.default)(B)}if(U=e4({selectedPrivacyMode:f,shouldRequirePrivateDeployments:eR,shouldDisablePasswordProtectedDeployments:eI}),void 0!==x&&U===m.DeployHostingBuildPrivacyMode.Password){if(""===x.trim())throw new b.PrivatePasswordError("Password cannot be empty.");if(x.length<5)throw new b.PrivatePasswordError("Password must be 5 or more characters.")}if(F=void 0,!(el&&eu&&ed))return[3,4];return[4,eu()];case 2:if(q=o.sent(),F={connectionString:el.connectionString,pgVersion:q},!(null===w&&!ep))return[3,4];return[4,ed()];case 3:(w=o.sent()>0)||(j=null),o.label=4;case 4:if(K(k.DeploymentMode.Preparing),z=J(),G={replId:n,targetDeploymentId:_,targetMachineConfigurationId:s,maxMachineInstances:c,commands:{build:t,run:r||""},envVars:i,subdomain:a,provider:P,appType:B,context:"workspace",machineJob:p,privacyMode:U,privatePassword:x,hasAgentSession:y,ignoredSecretKeys:S,createNeonProductionDatabase:w,pushDevelopmentDatabaseObjects:j,syncStripe:T,enableSecurityScan:D,agentInboxEnabled:E,replitBadgeEnabled:null!=A?A:er,heliumDevelopmentDatabase:F,triggerSource:z,purchaseDomain:O},!(!j&&w&&ev))return[3,6];return[4,ev({heliumDevelopmentDatabase:F,neonDevelopmentDatabase:ep,neonProductionDatabase:ef,deployInputOptions:G,deployConfig:d,context:"deployBuild",appType:B,org:u})];case 5:if(o.sent())return e&&e(),[2];o.label=6;case 6:return[4,(0,C.getDotReplitDeploymentConfig)(R)];case 7:return W=o.sent(),[4,(0,C.setDotReplitDeploymentConfig)({buildCommand:t,runCommand:r,appType:B,publicDir:V,ignorePorts:N},W,{dotReplit:R,fs:M,container:I})];case 8:return o.sent(),[4,L({variables:{input:G},onCompleted:function(e){return eP(e,null!=w&&w)}})];case 9:return o.sent(),[3,11];case 10:throw $=o.sent(),K(k.DeploymentMode.Ready),$;case 11:return[2]}})})()},[L,H,K,Y,ev,eP,e,eu,el,ed,_,n,ef,ep,I,M,R,eR,eI,u,eE,Z,J,er]),eN=(0,s.useCallback)(function(e){var r=e.envVars,i=e.subdomain,a=e.machineConfigurationId,s=e.maxMachineInstances,u=e.config,c=e.machineJob,d=e.privacyMode,p=e.privatePassword,f=e.hasAgentSession,x=e.ignoredSecrets,y=e.syncStripe,S=e.enableSecurityScan,w=e.provider,j=e.purchaseDomain,T=e.replitBadgeEnabled;return(0,t._)(function(){var e,t,k,D,C,E,R;return(0,o._)(this,function(o){switch(o.label){case 0:if(!eM)throw Error("Standby builds are not enabled");if((0,A.sendSentryError)({error:Error("Start standby build"),context:"kickOffStandbyBuild",isDeploymentsPane:!1}),e=u.buildCommand,t=u.runCommand,k=u.publicDir,D=u.ignorePorts,w===m.HostingBuildProvider.AzureVm||w===m.HostingBuildProvider.AzureContainerApp)throw Error("Standby builds are not enabled for azure deployments");if(!(C=w?e5({provider:w,ignorePorts:!!D}):u.appType))throw new b.AppTypeFoundError;switch(C){case m.DeployHostingBuildAppType.Static:if(!(0,v.hasCommand)(k))throw new b.PublicDirNotFoundError;break;case m.DeployHostingBuildAppType.Worker:case m.DeployHostingBuildAppType.Server:case m.DeployHostingBuildAppType.CloudRun:case m.DeployHostingBuildAppType.Cron:if(!(0,v.hasCommand)(t))throw new b.RunCommandNotFoundError;if((0,v.hasInvalidRunCommand)(t))throw new b.InvalidRunCommandError;if(C===m.DeployHostingBuildAppType.Cron){if(!(null==c?void 0:c.crontab)||""===c.crontab)throw new b.InvalidCrontabError("Schedule cannot be empty.");if(!(0,l.isValidCron)(c.crontab))throw new b.InvalidCrontabError("Invalid schedule. Must be a valid cron expression.");if(!(null==c?void 0:c.timezone)||""===c.timezone)throw new b.InvalidTimezoneError("Timezone cannot be empty.");if(!(0,g.isValidTimezone)(c.timezone))throw new b.InvalidTimezoneError("Invalid timezone. Must be valid a timezone abbreviation.")}break;default:(0,h.default)(C)}if(E=e4({selectedPrivacyMode:d,shouldRequirePrivateDeployments:eR}),void 0!==p&&E===m.DeployHostingBuildPrivacyMode.Password){if(""===p.trim())throw new b.PrivatePasswordError("Password cannot be empty.");if(p.length<5)throw new b.PrivatePasswordError("Password must be 5 or more characters.")}return R={replId:n,targetDeploymentId:_,targetMachineConfigurationId:a,maxMachineInstances:s,commands:{build:e,run:t||""},envVars:r,subdomain:i,provider:w,appType:C,context:"workspace",machineJob:c,privacyMode:E,hasAgentSession:f,ignoredSecretKeys:x,syncStripe:y,enableSecurityScan:S,replitBadgeEnabled:null!=T?T:er,triggerSource:J(),purchaseDomain:j,skipDeploy:!0},(0,A.sendSentryError)({error:Error("Call deploy mutation for standby build"),context:"kickOffStandbyBuild",isDeploymentsPane:!1}),[4,L({variables:{input:R}})];case 1:return o.sent(),[2]}})})()},[eM,L,_,n,J,eR,er]),eL=(0,C.useGetSecretsAsDeploymentEntries)({secrets:V,replId:n}),eF=(0,E.useAutoscaleConfigurations)({isAzureDeployment:!1,isFreeUser:B,onError:function(){}}).defaultMachineConfiguration,eq=(0,T.useGet)(ex);return{deployBuild:eO,kickOffStandbyBuild:eN,redeployWithNoNewOptions:(0,s.useCallback)(function(r){var i=r.hasAgentSession,a=r.purchaseDomain;return(0,t._)(function(){var t,r,s,l,d,p,f,x,y,S,w,j,T,E,A,I,P,M,O,V,N;return(0,o._)(this,function(o){switch(o.label){case 0:if(Z(void 0),Y())return H("Deployment already in progress"),[2];t=function(t){K(k.DeploymentMode.Ready),H(t.message),e&&e()},o.label=1;case 1:return o.trys.push([1,12,,13]),K(k.DeploymentMode.Preparing),[4,eL()];case 2:return r=o.sent(),[4,z({deploymentTimeCreated:D,buildTimeCreated:null==ei?void 0:ei.timeCreated,ignoreSecretsUntil:g.SYNCING_SECRETS_ROLLOUT_DATE,replId:n,apolloClient:c})];case 3:return s=o.sent(),l=q({currentBuildVars:null==ei?void 0:ei.envVars,workspaceSecrets:r,ignoredSecretKeys:s}),[4,(0,C.getDotReplitDeploymentConfig)(R)];case 4:if(p=(d=o.sent()).buildCommand,f=d.runCommand,x=d.publicDir,y=d.ignorePorts,S=d.providerFromTarget,!_)return t(new b.DeploymentNotFoundError),[2];if(!ei)return t(new b.CurrentBuildNotFoundError),[2];if(j=ei.provider,ei.provider===m.HostingBuildProvider.Static&&S===m.HostingBuildProvider.CloudRun&&(j=m.HostingBuildProvider.CloudRun,w=null==eF?void 0:eF.configurationId),(ei.provider===m.HostingBuildProvider.CloudRun||ei.provider===m.HostingBuildProvider.Gce)&&S===m.HostingBuildProvider.Static&&(j=m.HostingBuildProvider.Static,w=void 0),!(T=e5({provider:j,ignorePorts:!!y})))return t(new b.AppTypeFoundError),[2];switch(T){case m.DeployHostingBuildAppType.Static:if(!(0,v.hasCommand)(x))return t(new b.PublicDirNotFoundError),[2];break;case m.DeployHostingBuildAppType.Worker:case m.DeployHostingBuildAppType.Server:case m.DeployHostingBuildAppType.CloudRun:case m.DeployHostingBuildAppType.Cron:if(!(0,v.hasCommand)(f))return t(new b.RunCommandNotFoundError),[2];break;default:(0,h.default)(T)}if(E=void 0,!(el&&eu))return[3,6];return[4,eu()];case 5:A=o.sent(),E={connectionString:el.connectionString,pgVersion:A},o.label=6;case 6:if(!(!(I=!!ef)&&el&&!ep&&ed))return[3,8];return[4,ed()];case 7:I=o.sent()>0,o.label=8;case 8:if(P=e7({isPrivate:ei.isPrivate,hasPrivatePassword:ei.hasPrivatePassword}),M=J(),O=eq(),V={replId:n,targetDeploymentId:_,commands:{build:p,run:f||""},provider:j,targetMachineConfigurationId:w,appType:T,envVars:l,context:"workspace",privacyMode:P,hasAgentSession:i,ignoredSecretKeys:s,createNeonProductionDatabase:I,enableSecurityScan:ee,agentInboxEnabled:et,replitBadgeEnabled:er,heliumDevelopmentDatabase:E,triggerSource:M,syncStripe:O,purchaseDomain:a},!(I&&ev))return[3,10];return[4,ev({heliumDevelopmentDatabase:E,neonDevelopmentDatabase:ep,neonProductionDatabase:ef,deployConfig:d,deployInputOptions:V,context:"redeployWithNoNewOptions",appType:T,org:u})];case 9:if(o.sent())return e&&e(),[2];o.label=10;case 10:return[4,L({variables:{input:V},onCompleted:function(e){var n;(null==(n=e.deployHostingBuild2)?void 0:n.__typename)==="UserError"?t(Error(e.deployHostingBuild2.message)):eP(e,I)}})];case 11:return o.sent(),[3,13];case 12:return N=o.sent(),t(N),[3,13];case 13:return[2]}})})()},[L,H,K,Y,ee,et,er,eL,ev,eP,e,eu,ed,Z,el,_,n,ef,ep,R,ei,D,c,u,J,eF,eq]),approveAndDeployDatabaseChanges:(0,s.useCallback)(function(e){var n=e.prepareDatabaseStateId,a=e.sqlStatementsToExecute,s=e.pushDevelopmentDatabaseObjects;return(0,t._)(function(){var e,t,l,u,c,d,p;return(0,o._)(this,function(o){switch(o.label){case 0:if(!a&&!s)return H("No SQL statements or push development database objects found"),[2];if(eh.id!==n)return H("Preparing database state ID does not match current preparing database state ID"),[2];if(!(e=eh.deployOptions))return H("No deploy option found in preparing database state"),[2];if(Y())return H("Deployment already in progress"),[2];if(t=e.deployConfig,l=e.deployInputOptions,u=e.context,c=l,a&&(eg({type:"APPROVE_AND_DEPLOY",approved:"sqlStatementsToExecute"}),c=(0,i._)((0,r._)({},l),{sqlStatementsToExecute:a})),s&&(eg({type:"APPROVE_AND_DEPLOY",approved:s}),c=(0,i._)((0,r._)({},l),{pushDevelopmentDatabaseObjects:s})),"deployBuild"!==u)return[3,3];return[4,(0,C.getDotReplitDeploymentConfig)(R)];case 1:return d=o.sent(),[4,(0,C.setDotReplitDeploymentConfig)(t,d,{dotReplit:R,fs:M,container:I})];case 2:o.sent(),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,L({variables:{input:c},onCompleted:function(e){return eP(e,!0)}})];case 4:return o.sent(),[3,6];case 5:throw p=o.sent(),K(k.DeploymentMode.Ready),p;case 6:return[2]}})})()},[L,K,Y,eg,H,eP,I,R,M,eh]),rollbackToPreviousBuild:(0,s.useCallback)(function(e){var r=e.rollbackCandidateBuildId,i=e.envVars;return(0,t._)(function(){var e;return(0,o._)(this,function(t){switch(t.label){case 0:if(Y())return H("Deployment already in progress"),[2];t.label=1;case 1:if(t.trys.push([1,3,,4]),!r)throw new b.RollbackBuildNotProvidedError;if(!_)throw new b.DeploymentNotFoundError;return K(k.DeploymentMode.Preparing),[4,ea({variables:{input:{targetDeploymentId:_,rollbackCandidateBuildId:r,replId:n,envVars:i}},onCompleted:W})];case 2:return t.sent(),[3,4];case 3:throw e=t.sent(),K(k.DeploymentMode.Ready),e;case 4:return[2]}})})()},[ea,W,H,K,_,n,Y])}}var e8=(0,c.atom)(null,function(e,a,s){var l=s.args,c=s.replId;return(0,t._)(function(){var t,s,d,p,f,h,g,v,x,y;return(0,o._)(this,function(o){switch(o.label){case 0:if(t=void 0,(s=l.command)===m.SendDeploymentLifecycleCommandType.UpdateMachineConfiguration){if(!(d=e(ek)))return a(e0,"No current build found"),[2];if(!l.machineConfigurationId)return a(e0,"No machine configuration found"),[2];(p=(0,D.getBuildStatusFromLifecycleCommandType)(s))&&(a(ek,(0,u.produce)(d,function(e){e.status=p})),a(j.deploymentModeAtom,(0,D.getDeploymentModeFromBuildStatus)(p)))}if(s===m.SendDeploymentLifecycleCommandType.Resume||s===m.SendDeploymentLifecycleCommandType.Suspend){if(!(f=e(ek)))return a(e0,"No current build found"),[2];t=f.id,(h=(0,D.getBuildStatusFromLifecycleCommandType)(s))&&(a(ek,(0,u.produce)(f,function(e){e.status=h})),a(j.deploymentModeAtom,(0,D.getDeploymentModeFromBuildStatus)(h)))}if(s===m.SendDeploymentLifecycleCommandType.UpdateDeploymentFeatureConfig){if(!(g=e(ek)))return a(e0,"No current build found"),[2];(v=(0,D.getBuildStatusFromLifecycleCommandType)(s))&&(a(ek,(0,u.produce)(g,function(e){e.status=v})),a(j.deploymentModeAtom,(0,D.getDeploymentModeFromBuildStatus)(v)))}o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,_.sendDeploymentLifecycleCommandMutation)((0,i._)((0,r._)({},l),{buildId:t,replId:c}))];case 2:return o.sent(),s===m.SendDeploymentLifecycleCommandType.Destroy&&a(eF),[3,4];case 3:return x=o.sent(),y="Failed to send deployment lifecycle command",(0,n._)(x,Error)?y=x.message:"string"==typeof x&&(y=x),a(e0,y),[3,4];case 4:return[2]}})})()});function e9(){var e=(0,N.default)(),n=(0,T.useSet)(e8);return(0,s.useCallback)(function(r){return(0,t._)(function(){return(0,o._)(this,function(t){switch(t.label){case 0:return[4,n({replId:e,args:r})];case 1:return t.sent(),[2]}})})()},[n,e])}var e6=(0,c.atom)(null,function(e,n){return(0,t._)(function(){var t,r,i;return(0,o._)(this,function(a){switch(a.label){case 0:if(!(t=e(ea)))return n(e0,"No deployment found"),[2];if(!(r=e(eC)))return n(e0,"No deployment in progress found"),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,_.cancelInProgressDeploymentsBuildMutation)({buildId:r.id,targetDeploymentId:t})];case 2:return a.sent(),[3,4];case 3:return n(e0,a.sent().message),[2];case 4:if(n(eC,void 0),n(j.deploymentModeAtom,k.DeploymentMode.Ready),(i=e(ek))&&(i.status===m.HostingBuildStatus.Success||i.status===m.HostingBuildStatus.Failed))return[2];return n(ek,(0,u.produce)(r,function(e){e.status=m.HostingBuildStatus.Failed})),[2]}})})()});function te(){return(0,T.useSet)(e6)}function tt(){return(0,T.useSet)(eH)}function tn(){var e=(0,B.useGlobalModal)().show,t=eD(),n=eE(),r=en(),i=eh(),a=ec(),o=(0,N.default)(),l=eb(),u=(0,L.useIsAgentStackRepl)().isAgentStackRepl,c=H().agentStackPlatformType,d=(0,M.default)(null==n?void 0:n.id),p=(0,s.useRef)(void 0),f=(null==t?void 0:t.status)===m.HostingBuildStatus.Success,h=(null==t?void 0:t.id)===d.current,g=!!r,v=i?"https://".concat(i,".replit.app"):null;(0,s.useEffect)(function(){f&&h&&(null==t?void 0:t.id)&&p.current!==t.id&&(p.current=t.id,l&&!g&&v&&a?e("FreeDeployExpirationModal",{deploymentUrl:v}):u&&c===m.AgentStackPlatformType.Slack?e("SlackAgentStackPostDeployModal",{replId:o}):u&&c===m.AgentStackPlatformType.TimeBased?e("TimeBasedAgentStackPostDeployModal"):u&&c===m.AgentStackPlatformType.Telegram&&e("TelegramAgentStackPostDeployModal",{replId:o}))},[c,f,null==t?void 0:t.id,a,v,l,u,g,h,o,e])}},982829,e=>{"use strict";var t,n,r=e.i(119468),i=function(e){return e.startsWith("Run ")?e.slice(4):e};function a(e){return e.replace(/\/nix\/store\/[^/]+\/bin\/([^\s]+)/,"$1")}function o(e){return["PARSE_ERROR","NOT_FOUND","READ_FILE"].includes(e)}function s(e){return(void 0===e?"undefined":(0,r._)(e))==="object"&&null!==e&&"code"in e&&"string"==typeof e.code&&o(e.code)&&(void 0===e.message||"string"==typeof e.message)&&(void 0===e.extras||"string"==typeof e.extras)}var l=((t={}).OFFLINE="OFFLINE",t.IDLE="IDLE",t.BEFORE_RUN="BEFORE_RUN",t.RUNNING="RUNNING",t.STOPPING="STOPPING",t),u=((n={}).AUTO_RUN="AUTO_RUN",n.AGENT_RUN="AGENT_RUN",n.RUN_BUTTON_CLICKED="RUN_BUTTON_CLICKED",n.KEYBOARD_SHORTCUT="KEYBOARD_SHORTCUT",n.GITHUB_IMPORT="GITHUB_IMPORT",n);e.s(["PID1_RUNNER_NAME",()=>"Run App","RunReason",()=>u,"RunState",()=>l,"formatNixStorePath",()=>a,"isConfigErrorCode",()=>o,"isDotReplitError",()=>s,"removeRunPrefix",()=>i])},642049,e=>{"use strict";var t,n,r=e.i(878420),i=e.i(64386),a=e.i(960933),o=a.Type.Integer({minimum:0,maximum:65535}),s=a.Type.Object({forwarded:a.Type.Boolean(),port:o,address:a.Type.String(),externalPort:o,comm:a.Type.String({description:"Comm is the name chosen by the thread / process. Sometimes it has nice information to disambiguate between multiple instances of that process."}),cmdline:a.Type.Array(a.Type.String(),{description:"Cmdline is the commandline arguments provided when the process started."}),cgroup:a.Type.String({description:"Cgroup is the cgroup of the process, as reported by `/proc/${pid}/cgroup`"}),pid:a.Type.Integer(),pidChain:a.Type.Array(a.Type.Integer(),{description:"PidChain is the list of process ids in the hierarchy of the process, starting with the current process id and ending with 1 (pid1)."})});a.Type.Array(s);var l=((t={}).NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.FINISHED="FINISHED",t.FAILED="FAILED",t),u=((n={}).NOT_STARTED="NOT_STARTED",n.RUNNING="RUNNING",n.FINISHED="FINISHED",n.FAILED="FAILED",n.ERROR="ERROR",n),c=a.Type.Object({task:a.Type.Literal("shell.exec"),args:a.Type.String(),env:a.Type.Optional(a.Type.Record(a.Type.String(),a.Type.String())),waitForPort:a.Type.Optional(a.Type.Number()),ensurePreviewReachable:a.Type.Optional(a.Type.String())}),d=a.Type.Object({task:a.Type.Literal("shell.exec"),cgroupPath:a.Type.Optional(a.Type.String()),pid:a.Type.Optional(a.Type.Integer()),isInRecoveryMode:a.Type.Optional(a.Type.Boolean()),openPorts:a.Type.Optional(a.Type.Array(s)),isPreviewReachable:a.Type.Optional(a.Type.Boolean())}),p=a.Type.Object({task:a.Type.Literal("packager.installForLanguage"),args:a.Type.String(),enablePackageGuessing:a.Type.Optional(a.Type.Boolean()),continueOnFail:a.Type.Optional(a.Type.Boolean())}),f=a.Type.Object({task:a.Type.Literal("packager.installForLanguage"),hasUserFacingOutput:a.Type.Boolean()}),m=a.Type.Object({task:a.Type.Literal("packager.installForAll"),enablePackageGuessing:a.Type.Optional(a.Type.Boolean()),continueOnFail:a.Type.Optional(a.Type.Boolean())}),h=a.Type.Object({task:a.Type.Literal("packager.installForAll"),hasUserFacingOutput:a.Type.Boolean()}),g=a.Type.Object({task:a.Type.Literal("workflow.run"),args:a.Type.String()}),v=a.Type.Object({task:a.Type.Literal("workflow.run"),runId:a.Type.String()}),x=a.Type.Union([m,p,c,g]),y=a.Type.Union([h,f,d,v]),b=a.Type.Union([a.Type.Literal("parallel"),a.Type.Literal("sequential")]),S=a.Type.Object({agentRequireRestartOnSave:a.Type.Optional(a.Type.Boolean({description:"Meant for agent use only. Some frameworks have Hot Module Replacement or other mechanisms to automatically serve updated contents when files change. This metadata option is intended to be set to true when the frameworks do not have support for HMR, and the caller is expected to manually restart the workflow after saving files."})),agentRestartPatterns:a.Type.Optional(a.Type.Array(a.Type.String(),{description:"Meant for agent use only. Specify a list of glob patterns used for matching file change events that would require a restart."})),generated:a.Type.Optional(a.Type.Boolean({description:"Used for auto-generated workflows, generated workflows should be kept read-only, and do not persist in .replit, examples being run button workflow, or package.json generated workflows."})),dotReplitRun:a.Type.Optional(a.Type.Boolean({description:"Only used by the workflow generated from .replit run configuration, only to be set internally in workflow service state and should not be persisted in dotreplit (unless potentially duplicated by the user)"})),outputType:a.Type.Optional(a.Type.Enum({webview:"webview",console:"console",vnc:"vnc",automations:"automations"},{description:'Set by the agent to allow more integration with the workspace - mainly which pane do we focus on running the specific workflow; defaults to "webview"'}))}),_=a.Type.Union([a.Type.Literal("agent"),a.Type.Literal("system"),a.Type.Number()]),w=a.Type.Object({name:a.Type.String(),mode:a.Type.Optional(b),metadata:a.Type.Optional(S),tasks:a.Type.Array(x),author:a.Type.Optional(_)});a.Type.Object({workflows:a.Type.Object({runButton:a.Type.Optional(a.Type.String()),workflow:a.Type.Optional(a.Type.Array(w))})}),a.Type.Object({runButton:a.Type.Optional(a.Type.String()),workflow:a.Type.Optional(a.Type.Array(w))});var j={userIds:a.Type.Array(a.Type.Number()),metadata:a.Type.Optional(y),config:x},T=a.Type.Union([a.Type.Object((0,i._)((0,r._)({},j),{state:a.Type.Literal("NOT_STARTED")})),a.Type.Object((0,i._)((0,r._)({},j),{state:a.Type.Literal("RUNNING"),isReady:a.Type.Optional(a.Type.Boolean()),startTime:a.Type.Number()})),a.Type.Object((0,i._)((0,r._)({},j),{state:a.Type.Literal("FAILED"),startTime:a.Type.Number(),endTime:a.Type.Number(),result:a.Type.Optional(a.Type.Object({message:a.Type.Optional(a.Type.String()),exitCode:a.Type.Optional(a.Type.Number())}))})),a.Type.Object((0,i._)((0,r._)({},j),{state:a.Type.Literal("FINISHED"),startTime:a.Type.Number(),endTime:a.Type.Number(),result:a.Type.Optional(a.Type.Object({message:a.Type.Optional(a.Type.String()),exitCode:a.Type.Optional(a.Type.Number())}))})),a.Type.Object((0,i._)((0,r._)({},j),{state:a.Type.Literal("ERROR"),startTime:a.Type.Number(),endTime:a.Type.Number(),result:a.Type.Optional(a.Type.Object({message:a.Type.Optional(a.Type.String())}))}))]);a.Type.Record(a.Type.String(),a.Type.Object({runId:a.Type.String(),startTime:a.Type.Number(),endTime:a.Type.Optional(a.Type.Number()),step:a.Type.Enum(l),tasks:a.Type.Array(T),workflow:w,userId:a.Type.Optional(a.Type.Union([a.Type.Literal("agent"),a.Type.Number()]))})),e.s(["TaskConfigSchema",()=>x,"TaskState",()=>u,"WorkflowStateStep",()=>l],642049)},448154,e=>{"use strict";var t=e.i(394212),n=e.i(297083),r=e.i(817556),i=e.i(299798),a=e.i(982829),o=e.i(389959),s=e.i(529810);function l(e){var l,u,c=e.onWorkflowsConfigChange,d=e.onDotReplitStateChange,p=e.onRunStateChange,f=e.onConnectionStateChange;(0,i.usePid2)(function(e,i){var o=i.signal;return(0,n._)(function(){return(0,r._)(this,function(i){switch(i.label){case 0:return[4,e.workflows.init.rpc({useWorkflowGenerators:!0},{signal:o})];case 1:if(!i.sent().ok)return[2];return[4,Promise.all([(0,n._)(function(){var n,i,s,l,u,p,f,m;return(0,r._)(this,function(r){switch(r.label){case 0:n=e.workflows.config.subscribe({},{signal:o}).resReadable,i=!1,s=!1,r.label=1;case 1:r.trys.push([1,6,7,12]),u=(0,t._)(n),r.label=2;case 2:return[4,u.next()];case 3:if(!(i=!(p=r.sent()).done))return[3,5];if(!(f=p.value).ok)return(0,a.isDotReplitError)(f.payload)&&d(f.payload),[3,4];if(void 0!==f.payload.dotReplitState)return d(f.payload.dotReplitState),[3,4];c(f.payload.config),r.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return m=r.sent(),s=!0,l=m,[3,12];case 7:if(r.trys.push([7,,10,11]),!(i&&null!=u.return))return[3,9];return[4,u.return()];case 8:r.sent(),r.label=9;case 9:return[3,11];case 10:if(s)throw l;return[7];case 11:return[7];case 12:return[2]}})})(),(0,n._)(function(){var n,i,a,s,l,u,c,d;return(0,r._)(this,function(r){switch(r.label){case 0:n=e.workflows.runState.subscribe({},{signal:o}).resReadable,i=!1,a=!1,r.label=1;case 1:r.trys.push([1,6,7,12]),l=(0,t._)(n),r.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(u=r.sent()).done))return[3,5];if(!(c=u.value).ok)return[3,4];p(c.payload.state),r.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return d=r.sent(),a=!0,s=d,[3,12];case 7:if(r.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:r.sent(),r.label=9;case 9:return[3,11];case 10:if(a)throw s;return[7];case 11:return[7];case 12:return[2]}})})()])];case 2:return i.sent(),[2]}})})()},[c,d,p]),l=(0,s.default)().container,u=(0,o.useRef)(null),(0,o.useEffect)(function(){return l.onConnectionStateChanged(function(e){e!==u.current&&(u.current=e,f(e))})},[l,f])}e.s(["default",()=>l],448154)},8808,e=>{"use strict";e.i(963146);var t=e.i(62820);e.s(["ConnectionState",()=>t.ConnectionState])},729122,341727,e=>{"use strict";var t=e.i(297083),n=e.i(878420),r=e.i(530658),i=e.i(346715),a=e.i(119468),o=e.i(817556),s=e.i(694773),l=e.i(389959),u=e.i(992785),c=e.i(131141),d=e.i(541793),p=e.i(814563),f=e.i(642049),m=e.i(82259);e.i(925218);var h=e.i(267103),g=e.i(968323);e.i(963146);var v=e.i(62820),x=e.i(162914),y=e.i(98816),b=e.i(927158),S=e.i(529810),_=e.i(982829),w=e.i(448154),j=e.i(852819),T=e.i(417120);e.i(792e3);var k=e.i(8808),D=e.i(873379);function C(){var e=(0,S.default)().container,t=(0,D.default)(e),n=(0,r._)((0,l.useState)(!1),2),i=n[0],a=n[1];return((0,l.useEffect)(function(){t===k.ConnectionState.CONNECTED&&a(!0)},[t]),i)?{didConnectOnce:i,didDisconnect:t!==k.ConnectionState.CONNECTED}:{didConnectOnce:!1,didDisconnect:!1}}e.s(["default",()=>C],341727);var E=(0,d.atom)();function A(){return(0,j.useValue)(E)}var R=(0,d.atom)(!0);function I(){return(0,j.useValue)(R)}var P=(0,d.atom)(null,function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(0,c.produce)(e(E),n);return t(E,i),r.persist&&e(em).persist(),i});function M(){return(0,j.useSet)(P)}function O(){var e=M();return(0,l.useCallback)(function(t){return e(function(e){if(!e){e={runButton:t};return}e.runButton=t},{persist:!0})},[e])}function V(){var e=M();return(0,l.useCallback)(function(t,n){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).persist;return e(function(e){var r,i=null==e||null==(r=e.workflow)?void 0:r[t];i&&n(i)},{persist:r})},[e])}function N(){var e=M();return(0,l.useCallback)(function(t){return e(function(e){var n;null==e||null==(n=e.workflow)||n.splice(t,1)},{persist:!0})},[e])}function B(){var e=V();return(0,l.useCallback)(function(t){return e(t.workflowIndex,function(e){null==e||e.tasks.splice(t.taskIndex,1)},{persist:!0})},[e])}function L(){var e=V();return(0,l.useCallback)(function(t,n,r){var i=r.persist;return e(t.workflowIndex,function(e){e.tasks[t.taskIndex]=n},{persist:i})},[e])}function U(){var e=V();return(0,l.useCallback)(function(t,n,r){var i=r.persist;return e(t.workflowIndex,function(e){e.tasks=n},{persist:i})},[e])}function H(){var e=V();return(0,l.useCallback)(function(t){return e(t,function(e){var t,r=null!=(t=e.tasks[e.tasks.length-1])?t:{};e.tasks.push(r?(0,n._)({},r):{task:"shell.exec",args:""})})},[e])}var F=(0,d.atom)(null,function(e,t,n){var r=t(P,function(e){if(void 0===e)return{workflow:[n]};e.workflow?e.workflow.push(n):e.workflow=[n]},{persist:!0});return(0,s.default)(null==r?void 0:r.workflow),r.workflow.length-1});function q(){return(0,j.useSet)(F)}var z=(0,d.atom)(void 0);function G(){return(0,j.useValue)(z)}var W=(0,d.atom)(function(e){var t=e(z);return t?Object.entries(t).flatMap(function(e){var t=(0,r._)(e,2),n=t[0],i=t[1];return i.tasks.filter(function(e){return e.state===f.TaskState.RUNNING||e.state===f.TaskState.FINISHED||e.state===f.TaskState.FAILED||e.state===f.TaskState.ERROR}).map(function(e,t){return{task:e,taskIdx:t,runId:n,workflowId:i.workflow.name,config:i.workflow.tasks[t]}})}):[]});function K(){return(0,j.useValue)(W)}var Y=(0,d.atom)(function(e){var t,n=e(E);return null!=(t=null==n?void 0:n.workflow)?t:[]}),Z=(0,p.selectAtom)(Y,function(e){var t;return null!=(t=null==e?void 0:e.map(function(e,t){return t}))?t:[]},u.default),$=(0,d.atom)(function(e){var t=function(e){var t=!0,n=!1,i=void 0;try{for(var a,o=e.tasks[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;if("workflow.run"===s.task&&!r.includes(s.args))return(0,g.Err)('workflow "'.concat(s.args,'" not found'))}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return(0,g.Ok)(null)},n=e(Y),r=e(Q),i={};return n.forEach(function(e,n){var r=t(e);r.ok||(i[n]=r.error)}),i});function X(e){return(0,j.useValue)((0,l.useMemo)(function(){return(0,p.selectAtom)($,function(t){return e in t?t[e]:null})},[e]))}var Q=(0,p.selectAtom)(Y,function(e){var t;return null!=(t=null==e?void 0:e.map(function(e){return e.name}))?t:[]},u.default);function J(){return(0,j.useValue)(Y)}function ee(){return(0,j.useValue)(ec)}function et(){return(0,j.useValue)(Z)}function en(){return(0,j.useValue)(Q)}function er(e){var t,n;return(0,j.useValue)((t=e.workflowIndex,n=e.taskIndex,(0,l.useMemo)(function(){return(0,p.selectAtom)(Y,function(e){var r;return e?null==(r=e[t])?void 0:r.tasks[n]:null})},[t,n])))}function ei(e){return(0,j.useValue)((0,l.useMemo)(function(){return(0,p.selectAtom)(Y,function(t){return t?t[e]:null})},[e]))}function ea(){return(0,j.useGet)(Y)}function eo(e){var t=(0,l.useMemo)(function(){return(0,d.atom)(function(t){var n,r=null==(n=t(Y)[e])?void 0:n.name;if(!r)return null;var i=t(z);return i?function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=Object.values(e)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;l.workflow.name===t&&n.push(l)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n.length?n.sort(function(e,t){return e.startTime-t.startTime}):null}(i,r):null})},[e]);return(0,l.useMemo)(function(){return(0,p.selectAtom)(t,function(e){return e?e[e.length-1]:null})},[t])}function es(e){return(0,j.useGet)(eo(e))}function el(e){var t;return(0,j.useObservableValue)((t=eo(e),(0,l.useMemo)(function(){return(0,p.selectAtom)(t,function(e){return(null==e?void 0:e.step)===f.WorkflowStateStep.RUNNING})},[t])))}var eu=(0,d.atom)(function(e){var t=e(E);if(!(null==t?void 0:t.workflow)||!(null==t?void 0:t.runButton))return null;var n=!0,r=!1,i=void 0;try{for(var a,o=t.workflow[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.name===t.runButton)return s}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}),ec=(0,p.selectAtom)(eu,function(e){var t;return null!=(t=null==e?void 0:e.name)?t:null}),ed=(0,d.atom)(function(e){var t=e(Y).find(function(e){var t;return null==(t=e.metadata)?void 0:t.dotReplitRun});return t?t.name:null}),ep=(0,d.atom)(function(e){var t=e(z);if(!t)return null;var n=Object.values(t).filter(function(e){return e.step===f.WorkflowStateStep.RUNNING});return 0===n.length?null:n});function ef(){var e=(0,j.useValue)(ec),n=(0,S.default)().fs,r=(0,j.useValue)(ed);e||(e=r);var i=(0,j.useValue)(ep),a=e_(),s=(0,l.useMemo)(function(){return null!==i&&i.some(function(e){return"agent"===e.userId})},[i]),u=(0,l.useMemo)(function(){return s||(null==i?void 0:i.some(function(e){return e.step===f.WorkflowStateStep.RUNNING}))?_.RunState.RUNNING:_.RunState.IDLE},[s,i]),c=(0,b.usePid2Callback)(function(r){return function(i){return(0,t._)(function(){return(0,o._)(this,function(t){switch(t.label){case 0:return[4,n.flush()];case 1:return t.sent(),a(i),[2,!!e&&r.workflows.runWorkflow.rpc({workflowId:e})]}})})()}},[a,e,n]),d=(0,b.usePid2Callback)(function(e){return function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).graceful;null==i||i.forEach(function(n){e.workflows.stopRun.rpc({runId:n.runId,graceful:t})})}},[i]);return null!==e?{workflowId:e,run:c,stop:d,step:u,runningWorkflows:i,isAgentRunningWorkflow:s}:null}var em=(0,d.atom)({persist:function(){return(0,t._)(function(){return(0,o._)(this,function(e){return[2,(0,g.Ok)(null)]})})()}});function eh(){var e=(0,j.useGet)(em);return(0,l.useCallback)(function(){return(0,e().persist)()},[e])}var eg={PARSE_ERROR:"Failed to parse workflow configs from .replit",NOT_FOUND:"Missing .replit file",READ_FILE:"Error reading .replit"},ev=(0,d.atom)(void 0);function ex(){return(0,j.useValue)(ev)}function ey(e){var n=e.dotReplit,r=(0,j.useGet)(E),i=(0,j.useSet)(E),a=(0,j.useSet)(ev),s=(0,j.useSet)(z),c=(0,j.useSet)(R),d=(0,j.useValue)(R),p=(0,l.useCallback)(function(e){var t=r();t&&(0,u.default)(e,t)||i(e||{}),c(!1)},[c,r,i]),f=(0,l.useCallback)(function(e){c(!1),(0,_.isConfigErrorCode)(e.code)?a({code:e.code,message:eg[e.code],extras:e.extras}):a(void 0)},[a,c]),m=(0,l.useCallback)(function(e){switch(e){case v.ConnectionState.DISCONNECTED:s(void 0),c(!0);return;case v.ConnectionState.CONNECTING:c(!0);return;case v.ConnectionState.CONNECTED:d&&r()&&c(!1);return}},[c,s,d,r]);(0,w.default)({onWorkflowsConfigChange:p,onRunStateChange:s,onDotReplitStateChange:f,onConnectionStateChange:m});var h=(0,j.useObservableValue)(E),x=(0,j.useSet)(em);(0,l.useEffect)(function(){x({persist:function(){return(0,t._)(function(){var e,r,i;return(0,o._)(this,function(a){var s;return(r=h.current)?(i=null==(e=r.workflow)?void 0:e.filter(function(e){var t;return!(null==(t=e.metadata)?void 0:t.generated)}),[2,(s={runButton:r.runButton,workflow:i},(0,t._)(function(){var e;return(0,o._)(this,function(t){switch(t.label){case 0:return[4,n.updateDotReplit([(null==(e=s.workflow)?void 0:e.length)||s.runButton?{path:"workflows",op:"add",value:JSON.stringify(s)}:{path:"workflows",op:"remove",value:""}])];case 1:if(t.sent().error)return[2,(0,g.Err)("Error applying update")];return[2,(0,g.Ok)(null)]}})})())]):[2,(0,g.Err)("No config found")]})})()}})},[n,x,h])}var eb=(0,d.atom)([]);function eS(e,t){var n=(0,j.useSet)(eb),r=(0,y.default)(e);(0,l.useEffect)(function(){var e=function(e){r.current(e)};return n(function(t){return(0,i._)(t).concat([e])}),function(){n(function(t){return t.filter(function(t){return t!==e})})}},[n].concat((0,i._)(t)))}function e_(){var e=(0,j.useValue)(eb);return(0,l.useCallback)(function(t){e.forEach(function(e){return e(t)})},[e])}function ew(){var e=C().didDisconnect,t=I(),n=ef(),r=en(),i=(0,T.useAgentState)().agentState,a=(0,h.useObservable)(i),o=(0,l.useMemo)(function(){var e;return!!a&&null!=n&&!!n.isAgentRunningWorkflow&&(a.state===m.AgentRunState.AGENT_STATE_RUNNING||a.state===m.AgentRunState.AGENT_STATE_PAUSING||a.state===m.AgentRunState.AGENT_STATE_PAUSED&&(null==(e=a.reason)?void 0:e.$kind)==="waitingOnUserResponse")},[a,null==n?void 0:n.isAgentRunningWorkflow]),s=(0,x.default)(o,1e3),u=(0,l.useMemo)(function(){return(null==n?void 0:n.step)===_.RunState.RUNNING},[null==n?void 0:n.step]),c=(0,x.default)(u,100),d=(0,l.useMemo)(function(){return s?c:u},[s,c,u]),p=(0,l.useMemo)(function(){var e=null==n?void 0:n.workflowId;return!e||!r.includes(e)},[r,null==n?void 0:n.workflowId]);return{isWorkflowsLoading:t,isWorkflowsRunning:u,isRunning:d,isAgentRunningWorkflow:null==n?void 0:n.isAgentRunningWorkflow,isOffline:e,isDisabled:p,runButtonWorkflowName:null==n?void 0:n.workflowId}}function ej(){var e=ef(),t=ew().isRunning;return(0,l.useCallback)(function(n){var r;t||null==e||null==(r=e.run)||r.call(e,null!=n?n:_.RunReason.RUN_BUTTON_CLICKED)},[t,e])}function eT(){var e=ef(),t=ew(),n=t.isRunning,r=t.isWorkflowsRunning;return(0,l.useCallback)(function(){if(n&&r){var t;null==e||null==(t=e.stop)||t.call(e,{graceful:!0})}},[n,r,e])}function ek(){var e=ej(),t=eT(),n=ew().isRunning;return(0,l.useCallback)(function(r){n?t():e(r)},[n,e,t])}function eD(){var e=ej(),t=eT(),n=ew().isRunning,i=(0,y.default)(n),a=(0,r._)((0,l.useState)(!1),2),o=a[0],s=a[1];return(0,l.useEffect)(function(){o&&(i.current||(e(),s(!1)))},[o,i,e]),(0,l.useCallback)(function(){o||(i.current?(s(!0),t()):e())},[o,i,e,t])}function eC(e,t){return function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(r>=5)return!1;var i=!0,o=!1,s=void 0;try{for(var l,u=n.tasks[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=function(){var n=l.value;if("shell.exec"===n.task&&n.waitForPort)return{v:!0};if("workflow.run"===n.task){var i=t.find(function(e){return e.name===n.args});if(i&&e(i,r+1))return{v:!0}}}();if("object"===(0,a._)(c))return c.v}}catch(e){o=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}return!1}(e)}function eE(){var e=J();return(0,l.useMemo)(function(){return e.some(function(e){return"agent"===e.author})},[e])}function eA(){var e=J();return(0,l.useMemo)(function(){return e.some(function(e){var t;return(null==(t=e.metadata)?void 0:t.generated)!==!0})},[e])}e.s(["useAddTask",()=>H,"useAddWorkflow",()=>q,"useConfigError",()=>ex,"useDeleteTask",()=>B,"useDeleteWorkflow",()=>N,"useGetLatestWorkflowState",()=>es,"useGetWorkflows",()=>ea,"useHasAgentConfiguredWorkflows",()=>eE,"useHasNonGeneratedWorkflowSet",()=>eA,"useInitWorkflows",()=>ey,"useIsLoading",()=>I,"useObservableIsRunning",()=>el,"useOnLocalRun",()=>eS,"useOnReRun",()=>eD,"useOnStartRun",()=>ej,"useOnStopRun",()=>eT,"useOnToggleRun",()=>ek,"usePersistConfig",()=>eh,"useRunButton",()=>ee,"useRunInfo",()=>ew,"useSetRunButton",()=>O,"useTask",()=>er,"useTriggerLocalRun",()=>e_,"useUpdateWorkflow",()=>V,"useUpdateWorkflowTask",()=>L,"useUpdateWorkflowTasks",()=>U,"useWorkflow",()=>ei,"useWorkflowError",()=>X,"useWorkflowIndices",()=>et,"useWorkflowNames",()=>en,"useWorkflows",()=>J,"useWorkflowsConfig",()=>A,"useWorkflowsRunState",()=>G,"useWorkflowsRunner",()=>ef,"useWorkflowsTaskFlatMap",()=>K,"workflowOpensPort",()=>eC],729122)},516245,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{d:"M20 5.25a.75.75 0 0 1 .75.75v14a.75.75 0 0 1-1.5 0V6a.75.75 0 0 1 .75-.75ZM16.106 5.258a.75.75 0 0 1 .636.849l-2 14a.75.75 0 0 1-1.484-.213l2-14a.75.75 0 0 1 .848-.636ZM11.28 5.794a.75.75 0 0 1 1.44.412l-4 14a.75.75 0 1 1-1.44-.412l4-14ZM4.47 4.47a.75.75 0 0 1 1.06 0l3 3 .052.056c.008.01.014.022.022.033A.75.75 0 0 1 8.75 8l-.002.026a.795.795 0 0 1-.017.133c-.005.026-.014.05-.022.074-.007.023-.013.045-.022.066a.747.747 0 0 1-.157.231l-3 3a.75.75 0 0 1-1.06-1.06l1.72-1.72H2a.75.75 0 0 1 0-1.5h4.19L4.47 5.53a.75.75 0 0 1 0-1.06Z"})}))}e.s(["default",()=>a])},156669,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{d:"M8 2.25a.75.75 0 0 1 0 1.5H7A1.25 1.25 0 0 0 5.75 5v5c0 .73-.29 1.429-.806 1.944-.02.02-.041.037-.061.056.02.019.042.036.061.056A2.75 2.75 0 0 1 5.75 14v5c0 .686.564 1.25 1.25 1.25h1a.75.75 0 0 1 0 1.5H7A2.756 2.756 0 0 1 4.25 19v-5A1.25 1.25 0 0 0 3 12.75a.75.75 0 0 1 0-1.5 1.25 1.25 0 0 0 1.244-1.126L4.25 10V5A2.75 2.75 0 0 1 7 2.25h1ZM17 2.25A2.75 2.75 0 0 1 19.75 5v5A1.25 1.25 0 0 0 21 11.25a.75.75 0 0 1 0 1.5c-.686 0-1.25.564-1.25 1.25v5A2.75 2.75 0 0 1 17 21.75h-1a.75.75 0 0 1 0-1.5h1A1.25 1.25 0 0 0 18.25 19v-5c0-.787.335-1.497.868-1.999-.02-.02-.042-.037-.062-.057A2.75 2.75 0 0 1 18.25 10V5a1.25 1.25 0 0 0-1.126-1.244L17 3.75h-1a.75.75 0 0 1 0-1.5h1Z"})}))}e.s(["default",()=>a])},919061,303479,583342,294867,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M2.25 6A3.75 3.75 0 0 1 6 2.25h12A3.75 3.75 0 0 1 21.75 6v12A3.75 3.75 0 0 1 18 21.75H6A3.75 3.75 0 0 1 2.25 18V6ZM6 3.75A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6ZM6.25 8A.75.75 0 0 1 7 7.25h10a.75.75 0 0 1 0 1.5H7A.75.75 0 0 1 6.25 8Zm0 4a.75.75 0 0 1 .75-.75h4a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1-.75-.75Zm0 4a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}e.s(["default",()=>a],919061);var o=e.i(913965);function s(e){return(0,r.jsxs)(o.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{fill:"#3E474A",fillRule:"evenodd",d:"m19.91 5.492-6.945-4.123a2.62 2.62 0 0 0-2.68 0L3.34 5.492A2.77 2.77 0 0 0 2 7.878v8.245c0 .984.51 1.894 1.34 2.386l6.945 4.122a2.623 2.623 0 0 0 2.68 0l6.945-4.122a2.77 2.77 0 0 0 1.34-2.386V7.878a2.77 2.77 0 0 0-1.34-2.386Z",clipRule:"evenodd"}),(0,r.jsx)("path",{fill:"#FEFEFE",d:"m3.583 18.087 6.945 4.122a2.15 2.15 0 0 0 1.097.302c.123 0 .244-.014.365-.035-.367-.111-.606-.494-.605-1.086v-8.096c0-.988.604-1.526 1.424-2.005l6.57-4.058c.606-.354 1.125-.22 1.355.271a2.271 2.271 0 0 0-1.067-1.588l-6.945-4.123a2.15 2.15 0 0 0-2.194 0L3.582 5.914a2.285 2.285 0 0 0-1.1 1.964v8.245c0 .808.421 1.56 1.1 1.964Z"}),(0,r.jsx)("path",{fill:"#47B353",fillRule:"evenodd",d:"m18.09 16.92-1.73 1.035c-.046.027-.08.057-.08.112v.453c0 .055.037.078.083.051l1.756-1.067c.046-.027.053-.078.053-.133v-.4c0-.055-.037-.078-.082-.05Z",clipRule:"evenodd"}),(0,r.jsx)("path",{fill:"#FEFEFE",fillRule:"evenodd",d:"M14.407 13.11c.056-.028.102.007.102.08l.006.599c.25-.1.468-.126.666-.08.042.01.061.069.044.138l-.132.53a.227.227 0 0 1-.06.106.138.138 0 0 1-.035.025.078.078 0 0 1-.051.009c-.09-.02-.304-.067-.641.103-.353.18-.477.486-.474.714.003.271.142.354.624.362.642.01.919.291.926.938.006.634-.333 1.316-.85 1.733l.01.593c.001.071-.045.153-.101.181l-.35.202c-.057.029-.103-.006-.104-.078l-.006-.582c-.3.125-.605.155-.8.077-.036-.015-.052-.069-.037-.13l.127-.536a.221.221 0 0 1 .063-.111.132.132 0 0 1 .033-.024.07.07 0 0 1 .056-.006c.21.07.478.037.736-.093.327-.166.546-.5.543-.832-.004-.3-.167-.426-.563-.429-.504.002-.975-.098-.982-.84-.007-.612.311-1.248.815-1.65l-.007-.598c0-.073.044-.154.102-.183l.34-.217Z",clipRule:"evenodd"})]}))}function l(e){return(0,r.jsxs)(o.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{fill:"#009118",d:"M12.902.99a1.815 1.815 0 0 0-1.804 0l-2.02 1.165c-2.064 1.19-4.128 2.38-6.192 3.568A1.74 1.74 0 0 0 2 7.233v9.534a1.75 1.75 0 0 0 .92 1.525c.297.165.59.336.884.507.484.282.969.565 1.467.819.925.475 2.082.58 3.018.085.76-.41 1.097-1.323 1.096-2.162.004-1.987.003-3.974.002-5.961V8.102c.018-.14-.082-.289-.228-.286-.35-.005-.7-.003-1.05 0-.132-.014-.261.101-.251.24-.003 1.637-.002 3.275-.002 4.913l-.001 4.467c.008.432-.272.848-.671.994-.452.172-.956.038-1.366-.187l-.74-.426-1.446-.834a.263.263 0 0 1-.115-.108.272.272 0 0 1-.033-.157V7.283a.292.292 0 0 1 .173-.293L8.21 4.37c1.21-.698 2.42-1.394 3.63-2.09a.28.28 0 0 1 .32 0l3.615 2.08 4.569 2.629a.296.296 0 0 1 .172.294V16.718a.273.273 0 0 1-.147.268l-4.218 2.43-3.845 2.215-.051.03c-.117.07-.25.15-.38.072-.403-.233-.804-.471-1.205-.71-.298-.177-.597-.355-.897-.53-.076-.05-.173-.071-.253-.016-.02.01-.038.021-.057.032-.296.163-.593.327-.915.431-.041.017-.085.03-.128.045-.119.037-.24.075-.316.18.094.132.231.21.368.288a1140.648 1140.648 0 0 0 2.571 1.517c.54.351 1.266.377 1.824.05l3.893-2.24c1.44-.83 2.879-1.66 4.32-2.489.544-.29.924-.89.92-1.524V7.234a1.738 1.738 0 0 0-.857-1.492L16.317 2.96 12.902.99Z"}),(0,r.jsx)("path",{fill:"#009118",d:"M17.032 8.148c-1.074-.6-2.352-.633-3.546-.554-.863.089-1.77.338-2.398.984-.645.649-.785 1.697-.479 2.545.22.599.772.988 1.343 1.195.735.27 1.508.355 2.28.439.706.076 1.41.153 2.088.371.277.096.6.243.684.557.078.373-.007.806-.297 1.065-.52.43-1.226.46-1.871.489l-.105.004a45.379 45.379 0 0 0-.206-.002c-.754-.009-1.555-.018-2.205-.446-.367-.255-.525-.706-.59-1.136-.007-.134-.11-.257-.25-.247a50.703 50.703 0 0 0-1.046 0c-.122-.011-.248.08-.255.209-.028.768.254 1.564.83 2.075.674.607 1.582.842 2.455.943.929.093 1.878.087 2.792-.12.687-.164 1.376-.465 1.85-1.018.583-.672.697-1.673.436-2.51-.2-.625-.772-1.025-1.356-1.231-.795-.285-1.625-.397-2.456-.51-.645-.087-1.29-.174-1.92-.342l-.031-.01c-.244-.078-.528-.169-.634-.427-.118-.376-.018-.843.313-1.074.43-.306.977-.35 1.486-.378H14c.68-.008 1.4-.015 2.021.303.416.218.658.665.757 1.116.019.133.104.271.251.265.237.005.474.005.711.004l.328-.001c.12.009.25-.062.273-.189-.015-.943-.476-1.909-1.308-2.37Z"})]}))}function u(e){return(0,r.jsxs)(o.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{fill:"#56B3B4",d:"M20.238 4.762h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.595.595h-1.19a.59.59 0 0 1-.596-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#EA5E5E",d:"M2.38 23.81h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#BF85BF",d:"M16.667 14.286h3.571a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-3.571a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.jsx)("path",{fill:"#EA5E5E",d:"M9.524 14.286h4.762a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H9.524a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#56B3B4",d:"M2.38 14.286h4.763a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#BF85BF",d:"M2.38 19.048h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595ZM2.38 9.524h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#F7BA3E",d:"M8.333 2.381h11.905a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H8.333a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#EA5E5E",d:"M2.38 2.381h3.572a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#F7BA3E",d:"M7.143 21.429h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#56B3B4",d:"M7.143 7.143h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595ZM2.38 21.429h2.382a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#F7BA3E",d:"M2.38 7.143h2.382a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#56B3B4",d:"M11.905 11.905h9.524a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-9.524a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#F7BA3E",d:"M5.952 11.905h3.572a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H5.952a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#EA5E5E",d:"M2.38 11.905h1.191a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#BF85BF",d:"M13.095 4.762h4.762a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-4.762a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#56B3B4",d:"M2.38 4.762h8.334a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#F7BA3E",d:"M5.952 16.667h10.715a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H5.952a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#BF85BF",d:"M2.38 16.667h1.191a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.jsx)("path",{fill:"#EA5E5E",d:"M16.667 7.143h5.952a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-5.952a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.jsx)("path",{fill:"#F7BA3E",d:"M16.667 9.524h5.952a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-5.952a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.jsx)("path",{fill:"#56B3B4",d:"M2.38 0h14.287a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595A.59.59 0 0 1 2.38 0Z"})]}))}e.s(["default",()=>s],303479),e.s(["default",()=>l],583342),e.s(["default",()=>u],294867)},713996,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsxs)(i.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{d:"M10 18.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h7Z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.024 10.25c.31.004.613.091.878.251l4.996 2.996a1.752 1.752 0 0 1 .625 2.367 1.75 1.75 0 0 1-.625.639v-.001l-4.995 2.995.001.001a1.75 1.75 0 0 1-2.654-1.505v-5.99a1.751 1.751 0 0 1 1.774-1.753Zm-.02 1.5a.251.251 0 0 0-.254.251v5.998a.251.251 0 0 0 .254.251.25.25 0 0 0 .125-.036l.002-.001 4.997-2.997.002-.001a.252.252 0 0 0 .122-.215.251.251 0 0 0-.122-.215h-.002l-4.997-2.998h-.002a.25.25 0 0 0-.125-.037Z",clipRule:"evenodd"}),(0,r.jsx)("path",{d:"M10 11.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h7ZM21 4.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h18Z"})]}))}e.s(["default",()=>a])},646982,e=>{"use strict";var t=e.i(167626),n=e.i(276385),r=e.i(671901),i=e.i(156669),a=e.i(919061),o=e.i(303479),s=e.i(741917),l=e.i(587779),u=e.i(54893),c=e.i(574577),d=e.i(387975),p=e.i(868810),f=e.i(169372),m=e.i(99535),h=e.i(668461),g=e.i(321431),v=e.i(835910),x=e.i(626602),y=e.i(583342),b=e.i(255329),S=e.i(250194),_=e.i(294867),w=e.i(671536),j=e.i(45038),T=e.i(593750),k=e.i(404396),D=e.i(479425),C=e.i(954616),E=e.i(569884),A=e.i(812345),R=e.i(409570),I=e.i(95136),P=e.i(713996);function M(e){var M=e.module,O=M.name.toLowerCase(),V=O.split(" ");return O.includes("node")?(0,n.jsx)(y.default,{}):O.includes("typescript")?(0,n.jsx)(E.default,{}):O.includes("python")||O.includes("pyright")?(0,n.jsx)(w.default,{}):O.includes("c++")||O.includes("cpp")||O.includes("clang")||O.includes("ccls")?(0,n.jsx)(u.default,{}):O.includes("java")||O.includes("maven")?(0,n.jsx)(g.default,{}):O.includes("rust")||O.includes("cargo")?(0,n.jsx)(k.default,{}):V.includes("go")||O.includes("gopls")?(0,n.jsx)(f.default,{}):O.includes("ruby")?(0,n.jsx)(T.default,{}):O.includes("elixir")?(0,n.jsx)(p.default,{}):O.includes("bash")?(0,n.jsx)(o.default,{}):O.includes("clojure")?(0,n.jsx)(l.default,{}):O.includes("php")?(0,n.jsx)(S.default,{}):O.includes("swift")?(0,n.jsx)(C.default,{}):O.includes("haskell")?(0,n.jsx)(m.default,{}):O.includes("lua")?(0,n.jsx)(v.default,{}):O.includes("dart")?(0,n.jsx)(d.default,{}):O.includes("css")?(0,n.jsx)(c.default,{}):O.includes("html")?(0,n.jsx)(h.default,{}):V.includes("r")?(0,n.jsx)(j.default,{}):O.includes("nix")?(0,n.jsx)(x.default,{}):O.includes("npm")?(0,n.jsx)(b.default,{}):"bun"===O?(0,n.jsx)(s.default,{}):O.includes("prettier")?(0,n.jsx)(_.default,{}):O.includes("vue")?(0,n.jsx)(A.default,{}):O.includes("svelte")?(0,n.jsx)(D.default,{}):O.includes(".replit")?(0,n.jsx)(I.default,{}):(0,t._)(M,r.api.PackagerOption)?(0,n.jsx)(R.default,{}):(0,t._)(M,r.api.LanguageServerOption)?(0,n.jsx)(i.default,{}):(0,t._)(M,r.api.FormatterOption)?(0,n.jsx)(a.default,{}):(0,t._)(M,r.api.RunOption)?(0,n.jsx)(P.default,{}):(0,n.jsx)(R.default,{})}e.s(["default",()=>M])},76430,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(389959),a=e.i(634759),o=e.i(993796),s=e.i(441329),l=e.i(332441),u=e.i(927158),c=e.i(529810),d=e.i(117807);function p(e){var t,n;return!!e&&!(e.length<2)&&null!=(n=null==(t=e[1])?void 0:t.endsWith(".bin/expo"))&&n}function f(e,t){if("shell.exec"!==e.config.task||"RUNNING"!==e.task.state||!e.task.isReady||!e.task.metadata)return!1;var n=e.task.metadata;if(!n.openPorts)return!1;var r=e.config,i=n.openPorts;return"npm run expo:dev"===r.args?void 0!==t?i.some(function(e){return e.externalPort===t}):i.length>0:i.some(function(e){var n=p(e.cmdline);return void 0!==t?n&&e.externalPort===t:n})}function m(){var e=(0,n._)((0,i.useState)(),2),o=e[0],s=e[1],l=(0,c.default)().dotReplit,p=(0,d.useAgentStackBlueprint)().stackBlueprint,f=(0,u.usePid2Callback)(function(e){return function(){return e.agentReplConfig.getReplConfig.rpc({})}});return(0,i.useEffect)(function(){return p===a.StackBlueprint.STACK_BLUEPRINT_EXPO?void s(!0):l.watch(function(){return(0,t._)(function(){var e;return(0,r._)(this,function(t){switch(t.label){case 0:if(!f)return[2];return[4,f()];case 1:return s((e=t.sent()).ok&&"EXPO"===e.payload.stack),[2]}})})()})},[f,p,l]),o}function h(){var e=(0,o.useFlag)({controlName:"flag-exponential-amplifier"}),t=m();return e&&!0===t}function g(e){return e.filter(function(e){return p(e.cmdline)})}function v(e){return e.filter(function(e){return f(e)})}function x(e){return"https://appstoreconnect.apple.com/apps/".concat(e,"/distribution/")}function y(){var e=(0,l.useIsIOS)(),t=(0,s.useDoesBonsaiSupportFeature)("iosExpsDeeplink");return(0,i.useCallback)(function(n){return(!e||t?"exps://":"exp://")+new URL(n).host},[t,e])}e.s(["filterPortsForExpo",()=>g,"getAppStoreConnectUrl",()=>x,"getExpoTasks",()=>v,"isExpoTask",()=>f,"useGetExpoGoURL",()=>y,"useIsExpoStack",()=>m,"useIsExpoStackWithLaunchEnabled",()=>h])},708545,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M14.47 20.53a.75.75 0 0 0 1.06 0l5-5a.75.75 0 0 0 0-1.06l-5-5a.75.75 0 1 0-1.06 1.06l3.72 3.72H8A3.25 3.25 0 0 1 4.75 11V4a.75.75 0 0 0-1.5 0v7A4.75 4.75 0 0 0 8 15.75h10.19l-3.72 3.72a.75.75 0 0 0 0 1.06Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},822142,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M5 3.75c-.69 0-1.25.56-1.25 1.25v3.25h16.5V5c0-.69-.56-1.25-1.25-1.25H5ZM21.75 5A2.75 2.75 0 0 0 19 2.25H5A2.75 2.75 0 0 0 2.25 5v14A2.75 2.75 0 0 0 5 21.75h14A2.75 2.75 0 0 0 21.75 19V5Zm-1.5 4.75H9.75v10.5H19c.69 0 1.25-.56 1.25-1.25V9.75Zm-12 10.5V9.75h-4.5V19c0 .69.56 1.25 1.25 1.25h3.25Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},762211,818976,210481,e=>{"use strict";var t,n=e.i(878420),r=e.i(64386),i=e.i(886513),a=e.i(530658),o=e.i(276385),s=e.i(389959),l=e.i(98816),u=e.i(649960),c=e.i(529810);e.i(282890);var d=e.i(66718),p=e.i(297083),f=e.i(346715),m=e.i(817556),h=e.i(830675);e.i(312917);var g=e.i(265872),v=e.i(61524),x=e.i(142685),y=e.i(921521),b=e.i(650587),S=e.i(610357),_=e.i(37292),w=e.i(262206),j=e.i(384401),T=(0,e.i(316699).default)(function(){if("undefined"!=typeof AudioContext){var e=(t||(t=new AudioContext),t),n=e.createBufferSource();e.decodeAudioData(function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),function(t){n.buffer=t,n.connect(e.destination),n.start(0)})}},500,{leading:!0,trailing:!0});e.i(148382);var k="replit-icons-font",D=e.i(664152),C="BESbswy";function E(e){return(0,p._)(function(){return(0,m._)(this,function(t){switch(t.label){case 0:if(!document.fonts)return[3,2];return[4,function(e,t){return(0,p._)(function(e,t){var n,r,i,a,o,s;return(0,m._)(this,function(l){return n=t.fontInfo,i=void 0===(r=t.characters)?C:r,o=void 0===(a=t.timeout)?3e3:a,s=A(n),[2,new Promise(function(t,r){var a=!1,l=D.logger.timeStart({family:n.family,style:n.style,weight:n.weight}),u=setTimeout(function(){a=!0,l("xterm font loading timed out"),t()},o);e.load(s,i).then(function(){a||(clearTimeout(u),t())}).catch(function(e){a||(clearTimeout(u),r(e))})})]})}).apply(this,arguments)}(document.fonts,e)];case 1:case 3:return t.sent(),[2];case 2:return[4,Promise.all([R("serif",e),R("sans-serif",e),R("monospace",e)])]}})})()}function A(e){var t=e.family,n=e.style,r=e.weight;return"".concat(void 0===n?"normal":n," ").concat(void 0===r?"normal":r," 100px ").concat(t)}function R(e,t){return(0,p._)(function(e,t){var n,r,i,a,o,s,l,u,c;return(0,m._)(this,function(d){return(n=t.fontInfo,i=void 0===(r=t.characters)?C:r,o=void 0===(a=t.timeout)?3e3:a,s=A(n),(l=document.createElement("span")).innerText=i,l.style.font="normal normal 100px ".concat(e),l.style.position="absolute",l.style.left="-9999px",l.style.top="-9999px",document.body.appendChild(l),u=l.offsetWidth,l.style.font=s,(c=function(){return u!==l.offsetWidth})())?[2]:[2,new Promise(function(e,t){var r=setInterval(function(){c()&&(clearInterval(r),clearTimeout(i),document.body.removeChild(l),e())},50),i=setTimeout(function(){(clearInterval(r),document.body.removeChild(l),c())?e():t(Error("Font loading timed out "+n.family))},o)})]})}).apply(this,arguments)}function I(e){h.captureException(e)}var P='"ReplitHack"',M=String.fromCharCode(61095),O=e.i(546833),V=e.i(703774);e.i(375581);var N=e.i(182256),B=e.i(169099),L=e.i(585225);function U(){var e=(0,V.useTheme)(),t=e.values,n=e.colorScheme,r=(0,L.useIsShadesSupported)();return(0,s.useMemo)(function(){var e,i,a,o,s,l,u,c,d,p;return r?(e=n===N.ColorScheme.Dark?"dark":"light",i=t,o=(a="light"===e?O.lightSpectrumValues:O.darkSpectrumValues).defaultSurfaceColor000,s=a.defaultSurfaceColor200,l=a.defaultSurfaceColor300,u=a.defaultSurfaceColor500,c=a.defaultTextColor1400,d=a.defaultTextColor1500,{foreground:p="light"===e?d:c,background:s,cursor:p,cursorAccent:l,selectionBackground:p,black:o,brightBlack:u,red:i.global.redStronger,green:i.global.accentPositiveDefault,yellow:i.global.yellowDefault,blue:i.global.blueStronger,magenta:i.global.magentaDefault,cyan:i.global.tealDefault,white:i.global.foregroundDefault,brightRed:i.global.redStrongest,brightGreen:i.global.accentPositiveStronger,brightYellow:i.global.yellowStronger,brightBlue:i.global.blueStrongest,brightMagenta:i.global.magentaStronger,brightCyan:i.global.tealStronger,brightWhite:i.global.foregroundDefault}):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.replitDark.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(t)},[t,r,n])}function H(){return/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)}function F(t){var n,r,i,o,c,d,D,C,A,R,O,V=(0,a._)((0,s.useState)(null),2),N=V[0],B=V[1],L=(0,a._)((0,s.useState)(null),2),F=L[0],q=L[1],z=U(),G=(0,v.usePreferences)("fontSize","accessibleTerminal","shellBellAudio").preferences,W=G.fontSize,K=G.accessibleTerminal,Y=G.shellBellAudio,Z=(0,_.useThrowBsod)(),$=(0,y.default)(),X=(0,b.useIsMobile)(),Q=null==t?void 0:t.openFile,J=(0,l.default)(null==t?void 0:t.openWebview),ee=null==t?void 0:t.listFiles,et=(0,s.useMemo)(function(){return Q&&ee?{openFile:Q,listFiles:ee}:null},[Q,ee]),en=(0,l.default)(null==t?void 0:t.onInBandOSCMessages),er={screenReaderMode:K,fileLinking:et,terminalTheme:z,fontSize:W,scrollback:null==t?void 0:t.scrollback,openPane:null!=(R=null==t?void 0:t.openPane)?R:null,emitPaneMetrics:null==t?void 0:t.emitPaneMetrics,convertEol:null!=(O=null==t?void 0:t.convertEol)&&O},ei=(0,l.default)(er),ea=(0,u.default)(function(){(null==t?void 0:t.autoFit)!==!1&&(null==F||F.fit())},{type:"debounce",wait:200}),eo=(0,s.useRef)(null),es=(0,s.useRef)(null),el=(0,l.default)(null==t?void 0:t.size),eu=(0,j.useResolveKeyCombo)();return(0,s.useLayoutEffect)(function(){if(N){var n=[];return(0,p._)(function(){var r,i,o,s,l,u,c,d,v,y,b,_,T,D,C,A,R,O,V,B,L,U,F,z,G,W;return(0,m._)(this,function(K){switch(K.label){case 0:return[4,Promise.all([Promise.all([(0,g.lazyLoad)(function(){return e.A(546473)}),(0,g.lazyLoad)(function(){return e.A(628455)}),(0,g.lazyLoad)(function(){return e.A(114122)}),(0,g.lazyLoad)(function(){return e.A(800308)}),(0,g.lazyLoad)(function(){return e.A(840480)}),(0,g.lazyLoad)(function(){return e.A(305813)}),(0,g.lazyLoad)(function(){return e.A(537915)}),(0,g.lazyLoad)(function(){return e.A(967812)}),(0,g.lazyLoad)(function(){return e.A(617960)})]),(0,p._)(function(){return(0,m._)(this,function(e){switch(e.label){case 0:if(!document.getElementById(k)){var t=document.createElement("style");t.id=k,t.type="text/css",t.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(t)}return[4,Promise.all([E({fontInfo:{family:"replit-icons"},characters:M}).catch(I),E({fontInfo:{family:P,weight:"400"}}).catch(I),E({fontInfo:{family:P,weight:"400",style:"italic"}}).catch(I),E({fontInfo:{family:P,weight:"700"}}).catch(I),E({fontInfo:{family:P,weight:"700",style:"italic"}}).catch(I)])];case 1:return e.sent(),[2]}})})()])];case 1:var Y;if(c=a._.apply(void 0,[K.sent(),1]),v=(d=(0,a._)(c[0],9))[0].Terminal,y=d[1].FitAddon,b=d[2].SearchAddon,_=d[3].WebLinksAddon,T=d[4].Unicode11Addon,D=d[5].FileLinkAddon,C=d[6].PaneLinkAddon,A=d[7].CanvasAddon,R=d[8].WebglAddon,!N)return[2];return V={allowProposedApi:!0,cursorBlink:!1,scrollback:null!=(O=ei.current.scrollback)?O:1e4,tabStopWidth:4,fontFamily:"".concat(P,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:ei.current.fontSize,lineHeight:1,fontWeight:400,fontWeightBold:700,convertEol:ei.current.convertEol,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:ei.current.terminalTheme,screenReaderMode:ei.current.screenReaderMode,logger:{trace:function(e,t){return(r=console).trace.apply(r,["xterm: "+e].concat((0,f._)(t)))},debug:function(e,t){return(i=console).debug.apply(i,["xterm: "+e].concat((0,f._)(t)))},info:function(e,t){return(o=console).info.apply(o,["xterm: "+e].concat((0,f._)(t)))},warn:function(e,t){return(s=console).warn.apply(s,["xterm: "+e].concat((0,f._)(t)))},error:function(e,t){"string"==typeof e&&e.includes("Parsing error")||console.error("xterm: "+e,t)}}},(null==(l=el.current)?void 0:l.cols)!==void 0&&(V.cols=el.current.cols),(null==(u=el.current)?void 0:u.rows)!==void 0&&(V.rows=el.current.rows),B=new v(V),ei.current.fileLinking?(eo.current=new D(ei.current.fileLinking.openFile,ei.current.fileLinking.listFiles),B.loadAddon(eo.current)):eo.current=null,!es.current&&(null==t?void 0:t.openPane)&&(es.current=new C(t.openPane,t.emitPaneMetrics)),es.current&&B.loadAddon(es.current),L=new y,B.loadAddon(L),U=new _((Y=function(e){$?x.desktopAppApi.openExternalUrl(e):window.open(e,"_blank")},function(e,t){var n;try{n=new URL(t)}catch(e){return}("0.0.0.0"===n.hostname||"localhost"===n.hostname)&&void 0!==J.current?J.current(n.pathname,parseInt(n.port,10)):Y(t)})),B.loadAddon(U),F=new b,B.loadAddon(F),z=new T,B.loadAddon(z),B.unicode.activeVersion="11",B.open(N),n.push(function(){try{B.dispose()}catch(e){}}),function(){try{if(!(!function(){if(!H())return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||16>parseInt(e[1],10)}()&&(H()||!X||!(window.devicePixelRatio>1))&&document.createElement("canvas").getContext("webgl2"))){var e=new A;B.loadAddon(e);return}var t=new R;B.loadAddon(t),t.onContextLoss(function(){t.dispose(),B.loadAddon(new A)})}catch(e){var n=new A;B.loadAddon(n)}}(),G=!1,W=null,B.attachCustomKeyEventHandler(function(e){var t,n,r=(0,w.getKeyCombination)(e);if(r){var i=r;W&&(i=(0,w.keyChord)(W,r));var a=eu(i);switch(a.kind){case j.ResolutionResultKindEnum.NoMatch:W=null;break;case j.ResolutionResultKindEnum.WaitingForChord:return W=a.key,!1;case j.ResolutionResultKindEnum.MatchFound:return W=null,!1}}return t=B,n=e,(!window.navigator.clipboard||"c"!==n.key.toLowerCase()||!n.ctrlKey||!n.shiftKey||("keyup"===n.type&&t.hasSelection()&&(0,S.default)(t.getSelection()).catch(function(e){h.withScope(function(t){t.setTag("xterm-clipboard",!0),t.setExtra("type","copy"),h.captureException(e)})}),n.preventDefault(),n.stopPropagation(),!1))&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!G)&&(G="escape"===e.key.toLowerCase(),!0))}),en.current&&Object.entries(en.current).forEach(function(e){var t=(0,a._)(e,2),n=t[0],r=t[1];B.parser.registerOscHandler(Number(n),function(e){return r(B,e),!0})}),q({onKey:B.onKey.bind(B),onData:B.onData.bind(B),onResize:B.onResize.bind(B),write:B.write.bind(B),fit:function(){var e=N.getBoundingClientRect(),t=e.width,n=e.height;t>0&&n>0&&L.fit()},focus:function(){return B.focus()},clear:function(){return B.clear()},findPrevious:function(e,t){return F.findPrevious(e,t)},findNext:function(e,t){return F.findNext(e,t)},getSize:function(){return{cols:B.cols,rows:B.rows}},paste:function(e){return B.paste(e)},_term:B}),ea(N),[2]}})})().catch(function(e){e.message&&e.message.toLowerCase().includes("loading chunk")?h.withScope(function(t){t.setExtra("message",e.message),t.setExtra("stack",e.stack),h.captureException(Error("Loading chunk failed"))}):Z({error:e,origin:"Xterm: init"})}),function(){n.forEach(function(e){return e()})}}},[N,ea,ei,Z,el,eu,$,X,J,en,null==t?void 0:t.openPane,null==t?void 0:t.emitPaneMetrics]),n=null==F?void 0:F._term,r=eo,i=es,c=(o=er).screenReaderMode,d=o.fileLinking,D=o.terminalTheme,C=o.openPane,A=o.emitPaneMetrics,(0,s.useEffect)(function(){n&&D&&(n.options.theme=D)},[n,D]),(0,s.useEffect)(function(){n&&(n.options.screenReaderMode=c)},[n,c]),(0,s.useEffect)(function(){if(n){if(d){if(!r.current){var t=!1;return e.A(305813).then(function(e){var i=e.FileLinkAddon;t||(r.current=new i(d.openFile,d.listFiles),n.loadAddon(r.current))}),function(){t=!0}}r.current.update(d.openFile,d.listFiles),r.current.reactivate()}else r.current&&r.current.deactivate();if(C){if(!i.current){var a=!1;return e.A(537915).then(function(e){var t=e.PaneLinkAddon;a||(i.current=new t(C,A),n.loadAddon(i.current))}),function(){a=!0}}i.current.update(C,null!=A?A:null)}else i.current&&i.current.deactivate()}},[n,d,r,i,C,A]),(0,s.useEffect)(function(){var e=null==F?void 0:F._term;e&&W&&e.options.fontSize!==W&&(e.options.fontSize=W,e.refresh(0,e.rows-1),F.fit())},[W,F]),(0,s.useEffect)(function(){if(Y){var e=null==F?void 0:F._term;if(e)return e.onBell(T).dispose}},[Y,F]),[F,B]}e.s(["useTerminalTheme",()=>U],818976),e.s(["default",()=>F],210481);var q=e.i(446530),z=e.i(123850),G=e.i(613355),W=e.i(625484);function K(e){for(var t=1,n=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var i=n[r];if(i){for(var a=!1,o=0;o<e.cols;o++)if(0!==i.hasContent(o)){a=!0;break}if(a){t=r+1;break}}}return t}var Y=(0,z.createCssVarTokens)(["topOffset"]),Z=Y.cssVars,$=Y.styleTokens,X=(0,q.cssRecord)({wrapper:{display:"grid",gridTemplateColumns:"1fr"},terminal:{gridRow:1,gridColumn:1,position:"sticky",top:$.topOffset,"& .xterm":[G.rcss.my(8),G.rcss.ml(8),G.rcss.height("100%"),G.rcss.overflow("hidden")],"& .xterm-viewport":[G.rcss.overflow("hidden")]},terminalForHistoricalOutputWrapper:[G.rcss.overflow("hidden")]});function Q(e){var t=e.autoFocus,a=e.wrapperResizeRef,l=e.xterm,u=e.bufferHeight,c=e.onInput,d=e.setOnMessage,p=e.onResizeTerminal,f=e.children,m=(0,i._)(e,["autoFocus","wrapperResizeRef","xterm","bufferHeight","onInput","setOnMessage","onResizeTerminal","children"]);return(0,s.useEffect)(function(){t&&l&&l.focus()},[l,t]),(0,s.useEffect)(function(){if(l){var e=l.onData(function(e){c&&c(e)}),t=l.onResize(function(){p&&p(l.getSize())});return function(){e.dispose(),t.dispose()}}},[l,c,p]),(0,s.useEffect)(function(){if(l)return d(function(e){return l.write(e)})},[d,l]),(0,o.jsx)(W.View,{innerRef:a,children:(0,o.jsx)(W.View,(0,r._)((0,n._)({},m),{css:X.wrapper,style:(0,n._)({height:u},m.style),children:f}))})}function J(e){var t=e.xtermRef,a=e.visibleHeight,s=e.maxHeight,l=(0,i._)(e,["xtermRef","visibleHeight","maxHeight"]);return(0,o.jsx)(W.View,(0,r._)((0,n._)({innerRef:t,css:X.terminal},l),{style:(0,r._)((0,n._)({},l.style),{height:a,maxHeight:s})}))}function ee(e){var t=e.maxHeight,n=e.openPane,r=e.convertEol,i=(0,c.default)().fs,o=(0,s.useCallback)(function(e){return n({type:(0,d.getPaneTypeForFile)(e),data:e})},[n]),p=(0,s.useCallback)(function(e,t){return n({type:"webview",data:{ports:{type:"local",path:e,port:t}}})},[n]),f=(0,a._)(F({autoFit:!1,size:{rows:10},openFile:o,listFiles:i.listFiles,openWebview:p,openPane:n,convertEol:r}),2),m=f[0],h=f[1],g=(0,s.useMemo)(function(){return null==m?void 0:m._term},[m]),v=(0,a._)((0,s.useState)(function(){var e,t,n=null==g?void 0:g._core;return null!=(t=null==n||null==(e=n._renderService)?void 0:e.dimensions.css.cell.height)?t:16}),2),x=v[0],y=v[1];(0,s.useEffect)(function(){if(g){var e,t=null==g?void 0:g._core,n=null==t||null==(e=t._renderService)?void 0:e.onDimensionsChange(function(e){y(e.css.cell.height)});return function(){null==n||n.dispose()}}},[g]);var b=(0,s.useMemo)(function(){return Math.floor((t-16)/x)},[t,x]),S=(0,a._)((0,s.useState)("normal"),2),_=S[0],w=S[1],j=(0,a._)((0,s.useState)(1),2),T=j[0],k=j[1],D=(0,a._)((0,s.useState)(1),2),C=D[0],E=D[1],A=(0,a._)((0,s.useState)(!1),2),R=A[0],I=A[1],P=(0,l.default)(T),M=(0,l.default)(C),O=(0,l.default)(_);(0,s.useEffect)(function(){if(g){var e=g.buffer.onBufferChange(function(e){w(e.type),"alternate"===e.type&&(k(b),E(b),I(!1))});return function(){e.dispose()}}},[g,b]);var V=(0,s.useCallback)(function(){if(g)if("alternate"===O.current)k(b);else{var e=K(g),t=e>b;E(e),k(Math.min(e,b)),I(t)}},[g,b,O]),N=(0,u.default)(function(e){var t=e.widthChanged;g&&m&&t&&(m.fit(),V())},{type:"debounce",wait:200});(0,s.useEffect)(function(){var e=function(){if(g&&"alternate"!==O.current){var e=K(g),t=Math.min(e,b);e>M.current&&E(e),t>P.current&&k(t),e>b&&I(!0)}};if(g){var t=[g.onLineFeed(e),g.onCursorMove(e)];return function(){t.forEach(function(e){return e.dispose()})}}},[g,P,O,M,b]),(0,s.useEffect)(function(){if(g&&m){var e=m.getSize();e.rows!==b&&g.resize(e.cols,b),V()}},[g,m,b,V]);var B=(0,s.useMemo)(function(){return Math.ceil((Math.min(T,C)+1)*x+16)},[T,C,x]),L=(0,s.useMemo)(function(){return Math.ceil(R?(C+1)*x+16:B)},[x,R,B,C]);return(0,s.useEffect)(function(){m&&m.fit()},[m,T,C]),{visibleHeight:B,visibleLines:T,bufferHeight:L,bufferLines:C,bufferMode:_,hasScrollback:R,wrapperResizeRef:N,xterm:m,xtermRef:h}}function et(){}function en(e){var t=e.output,n=e.maxHeight,r=ee({maxHeight:n,openPane:e.openPane,convertEol:e.convertEol}),i=r.visibleHeight,a=r.bufferHeight,l=r.wrapperResizeRef,u=r.xterm,c=r.xtermRef,d=(0,s.useRef)(null);(0,s.useEffect)(function(){u&&d.current&&(u.clear(),d.current(t))},[d,u,t]);var p=U();return(0,o.jsx)(W.View,{css:X.terminalForHistoricalOutputWrapper,style:{height:i,background:null==p?void 0:p.background},children:(0,o.jsx)(Q,{onInput:et,xterm:u,wrapperResizeRef:l,bufferHeight:a,setOnMessage:function(e){return d.current=e,et},onResizeTerminal:et,children:(0,o.jsx)(J,{xtermRef:c,visibleHeight:i,maxHeight:n})})})}e.s(["AutoGrowingTerminalForHistoricalOutput",()=>en,"AutoGrowingTerminalInner",()=>J,"AutoGrowingTerminalWrapper",()=>Q,"TERMINAL_PADDING_PX",()=>8,"cssVars",()=>Z,"styleTokens",()=>$,"useAutoGrowingXTerm",()=>ee],762211)},825118,e=>{"use strict";var t,n,r,i=((t={}).UNKNOWN_NOT_GIT="UNKNOWN_NOT_GIT",t.UNKNOWN="UNKNOWN",t.TIMEOUT="TIMEOUT",t.CHANNEL_CLOSED="CHANNEL_CLOSED",t.UNEXPECTED_DISCONNECT="UNEXPECTED_DISCONNECT",t.UNKNOWN_REF="UNKNOWN_REF",t.NOT_INITIALIZED="NOT_INITIALIZED",t.UNAUTHENTICATED="UNAUTHENTICATED",t.INDEX_FILE_CORRUPT="INDEX_FILE_CORRUPT",t.UNKNOWN_REMOTE="UNKNOWN_REMOTE",t.INDEX_LOCKED="INDEX_LOCKED",t.CONFIG_LOCKED="CONFIG_LOCKED",t.NO_COMMITS="NO_COMMITS",t.PATH_MATCHED_NO_FILES="PATH_MATCHED_NO_FILES",t.USER_NOT_CONFIGURED="USER_NOT_CONFIGURED",t.INVALID_REFERENCE="INVALID_REFERENCE",t.BRANCH_ALREADY_EXISTS="BRANCH_ALREADY_EXISTS",t.MERGE_CONFLICT="MERGE_CONFLICT",t.UPSTREAM_NOT_SET="UPSTREAM_NOT_SET",t.HEAD_DETACHED="HEAD_DETACHED",t.DIRTY_WORKTREE="DIRTY_WORKTREE",t.PUSH_REJECTED="PUSH_REJECTED",t.REMOTE_ALREADY_EXISTS="REMOTE_ALREADY_EXISTS",t.ALREADY_INITIALIZED="ALREADY_INITIALIZED",t.INVALID_STATE="INVALID_STATE",t.PROTECTED_BRANCH="PROTECTED_BRANCH",t.NOTE_SUCCESSFULLY_REMOVED="NOTE_SUCCESSFULLY_REMOVED",t.OBJECT_HAS_NO_NOTE="OBJECT_HAS_NO_NOTE",t.OBJECT_ALREADY_HAS_NOTE="OBJECT_ALREADY_HAS_NOTE",t.NOTE_SUCCESSFULLY_OVERWRITTEN="NOTE_SUCCESSFULLY_OVERWRITTEN",t.PRE_COMMIT_HOOK_FAILED="PRE_COMMIT_HOOK_FAILED",t),a=/^(fatal: |error: |remote: error: |CONFLICT \([^)]+\): )/im,o=/^cat: .*: No such file or directory$/im;function s(e){return RegExp("^fatal: ".concat(e.source),"im")}function l(e){return RegExp("^error: ".concat(e.source),"im")}var u=[{error:"NOT_INITIALIZED",match:[s(/not a git repository/)]},{error:"UNAUTHENTICATED",match:[s(/Authentication failed/),s(/unable to access/),s(/repository \S+ not found/),s(/could not read Username/),s(/could not read Password/),s(/Could not read from remote/)]},{error:"INDEX_FILE_CORRUPT",match:[s(/index file corrupt/),s(/index file smaller than expected/),l(/index file .*?\.idx is too small/)]},{error:"UNKNOWN_REMOTE",match:[s(/No such remote/),l(/No such remote/)]},{error:"UNKNOWN_REF",match:[s(/couldn't find remote ref/)]},{error:"INDEX_LOCKED",match:[s(/Unable to create .*?\.git\/index\.lock/),l(/Unable to create .*?\.git\/index\.lock/)]},{error:"CONFIG_LOCKED",match:[s(/could not lock config file/),l(/could not lock config file/)]},{error:"NO_COMMITS",match:[s(/your current branch '.*?' does not have any commits yet/)]},{error:"PATH_MATCHED_NO_FILES",match:[s(/pathspec '.*?' did not match any files/),s(/pathspec '.*?' did not match any file\(s\) known to git/),s(/path '.*?' does not exist/),s(/path '.*?' exists on disk, but not in/)]},{error:"USER_NOT_CONFIGURED",match:[s(/unable to auto-detect email address/),s(/unable to auto-detect name/),s(/empty ident name \(for <.*?>\) not allowed/)]},{error:"INVALID_REFERENCE",match:[s(/invalid reference: .*?$/),s(/'.*?' - not a valid ref/)]},{error:"BRANCH_ALREADY_EXISTS",match:[s(/A branch named '.*?' already exists/)]},{error:"MERGE_CONFLICT",match:[s(/Not possible to fast-forward, aborting/),s(/refusing to merge unrelated histories/),s(/Exiting because of an unresolved conflict/),s(/Exiting because of unfinished merge/),l(/Failed to merge in the changes/),(n=/Merge conflict in/,RegExp("^CONFLICT \\([^\\)]+\\): ".concat(n.source),"im"))]},{error:"UPSTREAM_NOT_SET",match:[s(/The current branch \S+ has no upstream branch/),s(/No configured push destination/)]},{error:"HEAD_DETACHED",match:[s(/HEAD does not point to a branch/),s(/ref HEAD is not a symbolic ref/)]},{error:"DIRTY_WORKTREE",match:[l(/Your local changes to the following files would be overwritten/),l(/The following untracked working tree files would be overwritten/),l(/\S+ is not possible because you have unmerged files/),l(/cannot rebase: You have unstaged changes/)]},{error:"PROTECTED_BRANCH",match:[(r=/.*? Protected branch update failed/,RegExp("^remote: error: ".concat(r.source),"im"))]},{error:"PUSH_REJECTED",match:[l(/failed to push some refs to/)]},{error:"REMOTE_ALREADY_EXISTS",match:[s(/remote .*? already exists/),l(/remote .*? already exists/)]},{error:"INVALID_STATE",match:[s(/There is no merge in progress/),s(/There is no merge to abort/),s(/No rebase in progress/)]},{error:"OBJECT_ALREADY_HAS_NOTE",match:[l(/Cannot add notes. Found existing notes for object/)]}],c=[{error:"NOTE_SUCCESSFULLY_REMOVED",match:[/^Removing note for object/]},{error:"OBJECT_HAS_NO_NOTE",match:[/^Object \S+ has no note/]},{error:"NOTE_SUCCESSFULLY_OVERWRITTEN",match:[/^Overwriting existing notes for object \S+/]},{error:"PRE_COMMIT_HOOK_FAILED",match:[/pre-?commit/i]}];function d(e){if(a.test(e)){for(var t=0;t<u.length;t++)for(var n=0;n<u[t].match.length;n++)if(u[t].match[n].test(e))return u[t].error;return"UNKNOWN"}for(var r=0;r<c.length;r++)for(var i=0;i<c[r].match.length;i++)if(c[r].match[i].test(e))return c[r].error;return o.test(e)?"PATH_MATCHED_NO_FILES":"UNKNOWN_NOT_GIT"}e.s(["GitErrors",()=>i,"gitErrorFromOutput",()=>d])},97207,26857,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(389959),i=e.i(878420),a=e.i(64386),o=e.i(82259),s=e.i(257982),l=e.i(112942),u=e.i(45442),c=e.i(509908);function d(e){var t=(0,u.useAgentSettings)();return(0,r.useCallback)(function(n){if(!e)return Promise.reject(Error("Session is null, cannot send user action response"));var r=null,u=(0,l.convertAgentSettingsFromGQLToAiChat)(t.settings);switch(n.type){case"nextStepResponse":(0,c.trackAgentAnalyticsEvent)({action:"suggested_feature_selected",sessionId:e.id}),r={$kind:"nextStepResponse",nextStepResponse:{response:{$kind:"newFeatureResponse",newFeatureResponse:{selectedFeatureId:n.data.id,featureName:n.data.featureName}}}};break;case"userSecretsResponse":r={$kind:"userSecretsResponse",userSecretsResponse:{providedSecrets:n.providedSecretKeys.map(function(e){return{key:e,status:o.UserSecretResponseStatus.SECRET_COMPLETED}})}};break;case"queryResponse":r={$kind:"queryResponse",queryResponse:n.data};break;case"userMarkedTaskComplete":r={$kind:"userMarkedTaskComplete",userMarkedTaskComplete:n.data};break;case"approveTaskListResponse":r={$kind:"approveTaskListResponse",approveTaskListResponse:{taskListEventId:n.taskListEventId,approved:!0,agentConfig:u}};break;case"addingIntegrationsResponse":r={$kind:"addingIntegrationsResponse",addingIntegrationsResponse:{connectionIds:n.connectionIds,rejectedConnectorIds:n.rejectedConnectorIds}};break;case"approveInitialBuildVisualPhaseResponse":r={$kind:"approveInitialBuildVisualPhaseResponse",approveInitialBuildVisualPhaseResponse:(0,a._)((0,i._)({},n.data),{agentConfig:u})};break;case"approveInitialBuildMvpResponse":r={$kind:"approveInitialBuildMvpResponse",approveInitialBuildMvpResponse:(0,a._)((0,i._)({},n.data),{agentConfig:u})};break;case"approveBlueprintResponse":r={$kind:"approveBlueprintResponse",approveBlueprintResponse:{blueprintEventId:n.blueprintEventId,approved:n.approved,blueprintName:n.blueprintName}};break;case"convertMockupToAppResponse":r={$kind:"convertMockupToAppResponse",convertMockupToAppResponse:{approved:n.data.approved,additionalComments:n.data.additionalComments}};break;case"envVarsResponse":r={$kind:"envVarsResponse",envVarsResponse:{providedEnvVars:n.providedEnvVars}};break;default:(0,s.default)(n)}if(!r)return Promise.reject(Error("Failed to create response for user action"));var d={kind:"agentAskUserForActionResponse",response:r,requestEventId:n.requestEventId};return e.appendEvent(d)},[e,t.settings])}e.s(["useSendAskUserForActionResponse",()=>d],26857),e.i(545082);var p=e.i(423111);function f(e){var i=d(e),a=(0,p.useSetInProgressMockupToAppGraduation)();return(0,r.useCallback)(function(e){var r=e.approved,o=e.additionalComments,s=e.requestEventId;return(0,t._)(function(){var e;return(0,n._)(this,function(t){switch(t.label){case 0:r&&a(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i({type:"convertMockupToAppResponse",data:{approved:r,additionalComments:o},requestEventId:s})];case 2:return[2,t.sent()];case 3:throw e=t.sent(),a(!1),e;case 4:return[2]}})})()},[i,a])}e.s(["useSendConvertMockupToAppResponse",()=>f],97207)},387491,31290,e=>{"use strict";function t(e){var t=e.current,n=e.target,r=e.elapsed,i=e.delta,a=e.snappiness,o=e.ramp,s=void 0===o?1:o,l=e.minStepSize,u=void 0===l?.5:l,c=n-t;if(Math.abs(c)<=u)return n;var d=1;r<s&&(d=r/s);var p=1-Math.exp(-(void 0===a?16:a)*d*i),f=(1-p)*t+p*n;return Math.abs(f-t)<u?t+Math.sign(c)*u:f}function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0===n.moveThreshold;e.preventDefault();var i={x:e.pageX,y:e.pageY},a={x:0,y:0};t.start&&t.start({mouse:i,shiftKey:e.shiftKey});var o=function(e){var o={x:e.pageX,y:e.pageY};if(a={x:o.x-i.x,y:o.y-i.y},void 0!==n.moveThreshold&&!r){if(Math.abs(a.x)<n.moveThreshold&&Math.abs(a.y)<n.moveThreshold)return;r=!0}t.move({delta:a,shiftKey:e.shiftKey,mouse:o})},s=null,l=function(e){e.preventDefault(),s&&cancelAnimationFrame(s),s=requestAnimationFrame(function(){o(e)})},u=function(){s&&cancelAnimationFrame(s),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",u),document.removeEventListener("touchcancel",u),(void 0===n.moveThreshold||r)&&t.end&&t.end({delta:a,shiftKey:e.shiftKey})};document.addEventListener("pointermove",l),document.addEventListener("pointerup",u),document.addEventListener("touchcancel",u)}e.s(["damp",()=>t],387491),e.s(["measureMouseMove",()=>n],31290)},166876,e=>{"use strict";var t=e.i(82259),n=[t.TaskStatus.TASK_STATUS_PENDING,t.TaskStatus.TASK_STATUS_IN_PROGRESS];function r(e){var t=e.tasks;return!!t&&0!==t.length&&t.every(function(e){return e.updated&&n.includes(e.status)})}function i(e){return e.agentMode===t.AgentMode.AGENT_MODE_DISCUSSION}function a(e){return e.tasks.filter(function(e){return e.updated}).filter(function(e){return e.status===t.TaskStatus.TASK_STATUS_COMPLETED})}function o(e){return e.length>0&&e.every(function(e){return e.status===t.TaskStatus.TASK_STATUS_COMPLETED})}function s(e){return e.summary&&""!==e.summary?e.summary:e.content}function l(e){return!!e.extraDetails||!!e.content&&!!e.summary&&e.content!==e.summary}e.s(["getCompletedTasks",()=>a,"getTaskSummary",()=>s,"hasExpandableTaskDetails",()=>l,"isFirstInstanceOfTaskList",()=>r,"isFullyCompletedTaskList",()=>o,"isPlanModeProposedTaskList",()=>i])},231346,e=>{"use strict";e.i(877212);var t=e.i(924908);e.i(925218);var n=e.i(267103),r=e.i(641555);function i(e){var n=(0,t.useChatter)(),i=(0,r.useObservableMemo)(function(){return n.sessions.agent.all.list.map(function(e){return e[e.length-1]})},[n.sessions],{default:void 0});return null!=e&&null!=i&&i.id===e}function a(){var e,r=(0,t.useChatter)(),a=(0,n.useObservable)(r.sessions.agent.current);return i(null!=(e=null==a?void 0:a.id)?e:null)}e.s(["useIsCurrentSessionInitialAgentSession",()=>a,"useIsInitialAgentSession",()=>i])},277276,958115,755323,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(389959),a=e.i(116235);function o(e){return(0,r.jsxs)(a.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M11.883 13.42c-.246-1.147.892-2.101 1.978-1.66l7.415 3.012c1.286.522 1.188 2.374-.145 2.757l-2.933.843a.894.894 0 0 0-.555.467l-1.34 2.741c-.61 1.246-2.45 1.022-2.742-.335l-1.678-7.825Zm1.468-.402a.104.104 0 0 0-.14.118l1.678 7.825c.02.096.15.111.194.023L16.59 17.9c.173-.354.488-.618.867-.727l3.299-.948a.103.103 0 0 0 .01-.196l-7.415-3.011Z",clipRule:"evenodd"}),(0,r.jsx)("path",{d:"M3 18.25a.75.75 0 0 1 .75.75A1.25 1.25 0 0 0 5 20.25a.75.75 0 0 1 0 1.5A2.75 2.75 0 0 1 2.25 19a.75.75 0 0 1 .75-.75ZM10 20.25a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h1ZM3 13.25a.75.75 0 0 1 .75.75v1a.75.75 0 0 1-1.5 0v-1a.75.75 0 0 1 .75-.75ZM3 8.25a.75.75 0 0 1 .75.75v1a.75.75 0 0 1-1.5 0V9A.75.75 0 0 1 3 8.25ZM21 8.25a.75.75 0 0 1 .75.75v1a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75ZM5 2.25a.75.75 0 0 1 0 1.5A1.25 1.25 0 0 0 3.75 5a.75.75 0 0 1-1.5 0A2.75 2.75 0 0 1 5 2.25ZM19 2.25A2.75 2.75 0 0 1 21.75 5a.75.75 0 0 1-1.5 0A1.25 1.25 0 0 0 19 3.75a.75.75 0 0 1 0-1.5ZM10 2.25a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h1ZM15 2.25a.75.75 0 0 1 0 1.5h-1a.75.75 0 0 1 0-1.5h1Z"})]}))}e.s(["default",()=>o],958115);var s=e.i(709485),l=e.i(858248),u=e.i(826516),c=e.i(907371),d=e.i(173703),p=e.i(960178),f=e.i(625484);function m(e){var a=e.targetedElement,m=e.openPane,h=a.filePath&&!!m,g=(0,c.useCreateInteractive)({variant:"filled"}),v=(0,i.useCallback)(function(){a.filePath&&m&&((0,l.track)(s.events.TARGETED_ELEMENT_FILE_LINK_CLICKED,{componentName:a.componentName,filePath:a.filePath,lineNumber:a.lineNumber}),m({type:"codeEditor",data:{path:a.filePath,line:a.lineNumber}}))},[a,m]),x=(0,u.usePressedProps)(h?{onPress:v}:void 0);return a.componentName?(0,r.jsx)(f.View,{row:!0,align:"center",justify:"end",children:(0,r.jsxs)(d.ShadesSurface,(0,n._)((0,t._)({clsx:h?g.clsx:void 0,style:h?g.style:void 0,elevate:h?"2x":"1x",tag:h?"button":void 0,br:4,py:4,px:6,row:!0,align:"center",gap:4},h?x:{}),{children:[(0,r.jsx)(o,{size:16}),(0,r.jsx)(p.Text,{variant:"small",children:a.componentName})]}))}):null}e.s(["TargetedElement",()=>m],277276),e.s(["TARGETED_ELEMENT_SCREENSHOT_PREFIX",()=>"targeted_element_"],755323)},436725,e=>{"use strict";var t=e.i(276385),n=e.i(269848),r=e.i(446530),i=e.i(613355),a=e.i(625484),o=(0,r.cssRecord)({loadingState:[i.rcss.center]});function s(){return(0,t.jsx)(a.View,{css:o.loadingState,grow:!0,shrink:!0,children:(0,t.jsx)(n.default,{})})}e.s(["LoadingState",()=>s])},526017,178496,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{d:"M12 13.25c.068 0 .134.011.196.028.123.033.24.095.336.192l4.003 4.002a.75.75 0 0 1-1.06 1.06l-2.725-2.724V22a.75.75 0 0 1-1.5 0v-6.187l-2.72 2.72a.75.75 0 1 1-1.06-1.061l3.99-3.992.033-.03a.75.75 0 0 1 .225-.145l.014-.004A.744.744 0 0 1 12 13.25ZM12.002 1.25a.75.75 0 0 1 .75.75v6.194l2.723-2.722a.75.75 0 0 1 1.06 1.06l-4.003 4.003a.744.744 0 0 1-.178.127c-.021.012-.043.025-.066.034a.768.768 0 0 1-.093.03c-.015.004-.03.01-.045.013l-.016.003a.774.774 0 0 1-.132.013.764.764 0 0 1-.134-.014c-.004 0-.009 0-.014-.002-.021-.004-.041-.012-.062-.018-.026-.008-.052-.014-.077-.025-.024-.01-.045-.023-.067-.035a.743.743 0 0 1-.176-.126L7.47 6.532a.75.75 0 0 1 1.06-1.06l2.722 2.721V2a.75.75 0 0 1 .75-.75Z"})}))}function o(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{d:"M12 13.254a.75.75 0 0 1 .75.75v6.192l2.725-2.724a.75.75 0 0 1 1.06 1.06l-4.003 4.003a.744.744 0 0 1-.528.219H12a.742.742 0 0 1-.137-.013h-.006a.748.748 0 0 1-.117-.036l-.022-.007a.745.745 0 0 1-.223-.142c-.012-.011-.024-.021-.035-.033l-3.99-3.99a.75.75 0 0 1 1.06-1.061l2.72 2.72v-6.188a.75.75 0 0 1 .75-.75ZM12.002 1.25c.045 0 .089.004.132.012l.016.003c.014.002.026.008.04.011.033.009.066.017.098.03l.006.003.121.064c.042.027.08.06.117.097l4.003 4.002a.75.75 0 0 1-1.06 1.06L12.752 3.81v6.195a.75.75 0 0 1-1.5 0V3.81L8.53 6.532a.75.75 0 1 1-1.06-1.06l4.002-4.002a.75.75 0 0 1 .238-.161l.01-.004c.025-.01.051-.016.077-.024.019-.005.038-.012.057-.016l.014-.002a.754.754 0 0 1 .134-.013Z"})}))}e.s(["default",()=>a],526017),e.s(["default",()=>o],178496)},111456,e=>{e.v({codeText:"Summary-module__0fK4qa__codeText"})},362053,e=>{e.v({messageContainer:"MessagedBackgroundAgent-module__Worq2W__messageContainer",messageText:"MessagedBackgroundAgent-module__Worq2W__messageText"})},424608,e=>{e.v({bounce:"AnimatedEllipsis-module__5gLtQW__bounce",dot:"AnimatedEllipsis-module__5gLtQW__dot",root:"AnimatedEllipsis-module__5gLtQW__root"})},977591,e=>{e.v({resultContainer:"SubagentReportResult-module__b03XcW__resultContainer",resultText:"SubagentReportResult-module__b03XcW__resultText"})},887198,e=>{e.v({chevron:"ExpandableFeedContent-module__Y1wS9q__chevron",container:"ExpandableFeedContent-module__Y1wS9q__container",disableFade:"ExpandableFeedContent-module__Y1wS9q__disableFade",expandableButton:"ExpandableFeedContent-module__Y1wS9q__expandableButton",expanded:"ExpandableFeedContent-module__Y1wS9q__expanded",inner:"ExpandableFeedContent-module__Y1wS9q__inner"})},976926,389503,412887,672320,203576,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(82259),i=e.i(269848),a=e.i(568345),o=e.i(960178),s=e.i(111456);function l(e){var r=e.summary,i=e.variant,a=e.color,l=e.style,u=(0,n.useMemo)(function(){for(var e=r,t,n=/`([^`]+)`/g,i=[],a=0;null!==(t=n.exec(e));)a<t.index&&i.push({text:e.substring(a,t.index),isCode:!1}),i.push({text:t[1],isCode:!0}),a=t.index+t[0].length;return a<e.length&&i.push({text:e.substring(a),isCode:!1}),i},[r]);return(0,t.jsx)(o.Text,{shrink:!0,multiline:!1,variant:i,color:a,showTooltipOnTruncate:!0,style:l,children:u.map(function(e,r){return e.isCode?(0,t.jsx)("span",{className:s.default.codeText,children:e.text},r):(0,t.jsx)(n.Fragment,{children:e.text},r)})})}e.s(["Summary",()=>l],389503);var u=e.i(480028),c=e.i(173703),d=e.i(965153),p=e.i(625484),f=e.i(362053),m=(0,n.memo)(function(e){var n,s=e.data,m=e.state===r.EventState.IN_PROGRESS,h=!!(null==s?void 0:s.message),g=!!(null==s?void 0:s.summary);n=m&&!h?"Generating message for subagent":g?"Generated message for subagent: ".concat(s.summary):"Generated message for subagent";var v=m?(0,t.jsx)(i.default,{}):(0,t.jsx)(a.default,{color:u.tokens.foregroundDimmer});return(0,t.jsx)(d.AccordionItem,{variant:"compact",chevron:h?"end":"none",disabled:!h,headerContent:(0,t.jsxs)(p.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[v,(0,t.jsx)(l,{summary:n,color:"dimmer"})]}),children:(0,t.jsx)(c.ShadesSurface,{br:"container",py:8,px:12,clsx:f.default.messageContainer,children:(0,t.jsx)(o.Text,{variant:"small",color:"dimmer",clsx:f.default.messageText,children:s.message})})})});e.s(["MessagedBackgroundAgent",()=>m],976926);var h=e.i(416298),g=e.i(878420),v=e.i(64386),x=e.i(424608),y=function(e){return(0,t.jsxs)("span",(0,v._)((0,g._)({className:x.default.root},e),{children:[(0,t.jsx)("span",(0,v._)((0,g._)({className:x.default.dot},e),{children:"."})),(0,t.jsx)("span",(0,v._)((0,g._)({className:x.default.dot},e),{children:"."})),(0,t.jsx)("span",(0,v._)((0,g._)({className:x.default.dot},e),{children:"."}))]}))},b=(0,n.memo)(function(e){var n=e.state===r.EventState.COMPLETE;return(0,t.jsxs)(p.View,{row:!0,align:"center",gap:6,px:4,children:[(0,t.jsx)(h.default,{color:u.tokens.foregroundDimmer}),(0,t.jsxs)(o.Text,{color:"dimmer",children:[n?"Sent issue report to Replit Team":"Sending issue report to Replit Team",!n&&(0,t.jsx)(y,{})]})]})});e.s(["ReportAgentIssue",()=>b],412887);var S=e.i(977591);function _(e){var n=e.data,s=e.state===r.EventState.IN_PROGRESS,f=!!(null==n?void 0:n.result),m=s?(0,t.jsx)(i.default,{}):(0,t.jsx)(a.default,{color:u.tokens.foregroundDimmer});return(0,t.jsx)(d.AccordionItem,{variant:"compact",chevron:f?"end":"none",disabled:!f,headerContent:(0,t.jsxs)(p.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[m,(0,t.jsx)(l,{summary:s?"Generating response":"Generated response",color:"dimmer"})]}),children:(0,t.jsx)(c.ShadesSurface,{br:"container",py:8,px:12,clsx:S.default.resultContainer,children:(0,t.jsx)(o.Text,{variant:"small",color:"dimmer",clsx:S.default.resultText,children:n.result})})})}e.s(["SubagentReportResult",()=>_],672320);var w=e.i(721281),j=e.i(530658),T=e.i(167392),k=e.i(907371),D=e.i(887198);function C(e){var r=e.expanded,i=e.onToggle,a=e.triggerContent,o=e.disableChevron,s=e.children,l=e.onTransitionEnd,c=(0,j._)((0,n.useState)(r),2),d=c[0],f=c[1];(0,n.useEffect)(function(){r&&f(!0)},[r]);var m=(0,n.useCallback)(function(e){e.target!==e.currentTarget||r||f(!1),null==l||l()},[r,l]),h=(0,t.jsx)(p.View,{clsx:[D.default.container,(0,w._)({},D.default.expanded,r),D.default.disableFade],onTransitionEnd:m,children:(0,t.jsx)(p.View,{clsx:D.default.inner,children:d?s:null})});return a?(0,t.jsxs)(p.View,{gap:6*!!r,pb:6*!!r,children:[(0,t.jsxs)(k.Interactive,{variant:"nofill",tag:"button",row:!0,px:4,gap:6,borderRadius:12,align:"center",justify:"space-between",clsx:D.default.expandableButton,onClick:i,children:[a,void 0!==o&&o?null:(0,t.jsx)(T.default,{color:u.tokens.foregroundDimmest,rotate:180*!!r,clsx:D.default.chevron})]}),h]}):h}e.s(["ExpandableFeedContent",()=>C],203576)},121025,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M14.269 1.322a3.751 3.751 0 0 1 4.456 3.25 4.753 4.753 0 0 1 3.022 4.62 4.757 4.757 0 0 1-.318 1.522 4.75 4.75 0 0 1-.537 7.055c-.047.036-.096.07-.144.104a4.752 4.752 0 0 1-4.44 4.863A4.753 4.753 0 0 1 12 20.555a4.752 4.752 0 0 1-7.667.459 4.75 4.75 0 0 1-1.082-3.14 4.751 4.751 0 0 1-.682-7.16 4.756 4.756 0 0 1 .079-3.62 4.75 4.75 0 0 1 2.626-2.52A3.752 3.752 0 0 1 12 2.751a3.748 3.748 0 0 1 2.269-1.43Zm-4.83 1.471a2.252 2.252 0 0 0-2.387 3.332.75.75 0 0 1-1.299.75 3.762 3.762 0 0 1-.32-.722 3.25 3.25 0 0 0-1.411 1.543 3.251 3.251 0 0 0-.171 2.108.748.748 0 0 1 .524 1.382A3.252 3.252 0 0 0 2.86 14.84 3.252 3.252 0 0 0 6 17.251a.75.75 0 0 1 0 1.5 4.75 4.75 0 0 1-1.194-.154 3.276 3.276 0 0 0 .685 1.464 3.251 3.251 0 0 0 5.76-2.062v-5.467a4.92 4.92 0 0 1-2.04 1.188.75.75 0 0 1-.42-1.44 3.421 3.421 0 0 0 2.447-3.004L11.25 9V5a2.252 2.252 0 0 0-1.81-2.207Zm6.143.034a2.252 2.252 0 0 0-1.952.388 2.25 2.25 0 0 0-.865 1.527L12.75 5v4l.01.276a3.42 3.42 0 0 0 2.45 3.005.75.75 0 0 1-.42 1.439 4.92 4.92 0 0 1-2.04-1.187V18a3.252 3.252 0 0 0 2.154 3.056 3.253 3.253 0 0 0 3.605-.994 3.251 3.251 0 0 0 .683-1.464A4.75 4.75 0 0 1 18 18.75a.75.75 0 0 1 0-1.5 3.251 3.251 0 0 0 1.625-6.064.747.747 0 0 1 .522-1.382 3.235 3.235 0 0 0-1.581-3.652c-.082.25-.186.494-.319.723a.75.75 0 0 1-1.299-.75 2.252 2.252 0 0 0-.465-2.816 2.251 2.251 0 0 0-.9-.482Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},564604,103806,471693,555896,937360,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.055 2.055A2.75 2.75 0 0 1 6 1.25h8a.75.75 0 0 1 .53.22l6 6c.141.14.22.331.22.53v12A2.75 2.75 0 0 1 18 22.75H6A2.75 2.75 0 0 1 3.25 20V4c0-.73.29-1.429.805-1.945ZM6 2.75A1.25 1.25 0 0 0 4.75 4v16A1.25 1.25 0 0 0 6 21.25h12A1.25 1.25 0 0 0 19.25 20V8.75H14a.75.75 0 0 1-.75-.75V2.75H6Zm8.75 1.06 3.44 3.44h-3.44V3.81ZM12 11.25a.75.75 0 0 1 .75.75v2.25H15a.75.75 0 0 1 0 1.5h-2.25V18a.75.75 0 0 1-1.5 0v-2.25H9a.75.75 0 0 1 0-1.5h2.25V12a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}function o(e){return(0,r.jsxs)(i.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M11.88 11.251a2.873 2.873 0 0 1 2.028 4.904L8.89 21.168a2.75 2.75 0 0 1-1.174.694l-2.867.838a1.255 1.255 0 0 1-1.234-.316 1.251 1.251 0 0 1-.316-1.235l.836-2.868c.13-.443.37-.847.696-1.174l5.017-5.015a2.875 2.875 0 0 1 2.032-.841Zm-.001 1.5c-.319 0-.626.11-.87.31l-.1.091L5.89 18.17a1.251 1.251 0 0 0-.315.532l-.709 2.43 2.43-.708a1.25 1.25 0 0 0 .533-.317l5.019-5.012a1.372 1.372 0 0 0-.97-2.343Z",clipRule:"evenodd"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M14.038 1.251a3.148 3.148 0 0 1 2.198.925l3.587 3.587A3.152 3.152 0 0 1 20.75 8v12A2.75 2.75 0 0 1 18 22.75h-5.341a.75.75 0 0 1 0-1.5h5.34A1.25 1.25 0 0 0 19.25 20V8.75H15A1.75 1.75 0 0 1 13.25 7V2.75H6A1.25 1.25 0 0 0 4.75 4v9.34a.75.75 0 1 1-1.5 0V4A2.75 2.75 0 0 1 6 1.25h8l.039.001ZM14.75 7a.25.25 0 0 0 .25.25h4.071a1.65 1.65 0 0 0-.306-.425l-3.59-3.59a1.655 1.655 0 0 0-.425-.307V7Z",clipRule:"evenodd"})]}))}function s(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 21.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5ZM21.75 19a3.75 3.75 0 1 1-4.5-3.675V12c0-.69-.56-1.25-1.25-1.25H8c-.69 0-1.25.56-1.25 1.25v3.325A3.751 3.751 0 0 1 6 22.75a3.75 3.75 0 0 1-.75-7.425V12A2.75 2.75 0 0 1 8 9.25h3.25V2a.75.75 0 0 1 1.5 0v7.25H16A2.75 2.75 0 0 1 18.75 12v3.325c1.712.348 3 1.86 3 3.675ZM6 21.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5Z",clipRule:"evenodd"})}))}function l(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M19 1.25a.75.75 0 0 1 0 1.5h-1.25v3.422l-.014.272a2.75 2.75 0 0 1-.792 1.672L13.061 12l3.883 3.884a2.75 2.75 0 0 1 .806 1.944v3.422H19a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1 0-1.5h1.25v-3.422c0-.73.29-1.429.806-1.944L10.94 12 7.056 8.116a2.75 2.75 0 0 1-.792-1.672l-.014-.272V2.75H5a.75.75 0 0 1 0-1.5h14ZM8.116 16.944a1.25 1.25 0 0 0-.366.884v3.422h8.5v-3.422c0-.29-.101-.57-.283-.792l-.083-.092L12 13.061l-3.884 3.883ZM7.75 2.75v3.422l.006.123c.028.286.155.555.36.76L12 10.94l3.884-3.884.083-.092a1.25 1.25 0 0 0 .277-.67l.006-.122V2.75h-8.5Z",clipRule:"evenodd"})}))}function u(e){return(0,r.jsxs)(i.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M10.65 11.264c.18.023.356.083.515.175l4.066 2.352a1.399 1.399 0 0 1 .511 1.907 1.398 1.398 0 0 1-.51.511l-4.065 2.352a1.396 1.396 0 0 1-2.094-1.21v-4.703c0-.244.064-.485.186-.697l.101-.152c.111-.145.25-.268.41-.36l.164-.08c.168-.07.35-.107.533-.107l.182.012Zm-.077 5.907L14.326 15l-3.753-2.172v4.343Z",clipRule:"evenodd"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M19 2.25A2.75 2.75 0 0 1 21.75 5v14A2.75 2.75 0 0 1 19 21.75H5A2.75 2.75 0 0 1 2.25 19V5A2.75 2.75 0 0 1 5 2.25h14ZM3.75 19c0 .69.56 1.25 1.25 1.25h14c.69 0 1.25-.56 1.25-1.25V9.75H3.75V19ZM5 3.75c-.69 0-1.25.56-1.25 1.25v3.25h16.5V5c0-.69-.56-1.25-1.25-1.25H5Z",clipRule:"evenodd"})]}))}e.s(["default",()=>a],564604),e.s(["default",()=>o],103806),e.s(["default",()=>s],471693),e.s(["default",()=>l],555896),e.s(["default",()=>u],937360)},178815,971372,e=>{"use strict";e.i(148382);var t=e.i(886513),n=e.i(276385),r=e.i(389959),i=e.i(917255),a=e.i(121025),o=e.i(795570),s=e.i(96250),l=e.i(889176),u=e.i(806685),c=e.i(806930),d=e.i(156669),p=e.i(917736),f=e.i(516245),m=e.i(182409),h=e.i(712771),g=e.i(873169),v=e.i(564604),x=e.i(103806),y=e.i(302905),b=e.i(471693),S=e.i(399245),_=e.i(555896),w=e.i(493166),j=e.i(581554),T=e.i(887964),k=e.i(438844),D=e.i(146432),C=e.i(409570),E=e.i(393428),A=e.i(819906),R=e.i(40916),I=e.i(937360),P=e.i(820228),M=e.i(536262),O=e.i(713996),V=e.i(346781),N=e.i(82130),B=e.i(568345),L=e.i(195206),U=e.i(813707),H=e.i(416298),F=e.i(943172);function q(e){var q=e.kind,z=(0,t._)(e,["kind"]),G={alertData:(0,n.jsx)(H.default,{}),createPostgresqlDatabaseData:(0,n.jsx)(p.default,{}),createFileData:(0,n.jsx)(v.default,{}),deployData:(0,n.jsx)(m.default,{}),readFileData:(0,n.jsx)(i.default,{}),readDirData:(0,n.jsx)(y.default,{}),fileEditData:(0,n.jsx)(x.default,{}),shellExecutionData:(0,n.jsx)(L.default,{}),packagerInstallData:(0,n.jsx)(C.default,{}),screenshotData:(0,n.jsx)(o.default,{}),toolchainInstallData:(0,n.jsx)(U.default,{}),searchFilesystemData:(0,n.jsx)(V.default,{}),searchFileData:(0,n.jsx)(V.default,{}),planProgressData:(0,n.jsx)(l.default,{}),packagerUninstallData:(0,n.jsx)(C.default,{}),messageData:(0,n.jsx)(s.default,{}),memoryCompressionData:(0,n.jsx)(a.default,{}),systemDependencyInstallData:(0,n.jsx)(f.default,{}),systemDependencyUninstallData:(0,n.jsx)(f.default,{}),workflowsStartToolData:(0,n.jsx)(A.default,{}),workflowsRestartToolData:(0,n.jsx)(P.default,{}),workflowsStopToolData:(0,n.jsx)(N.default,{}),workflowsSetRunConfigToolData:(0,n.jsx)(A.default,{}),workflowsRemoveRunConfigToolData:(0,n.jsx)(d.default,{}),workflowsGetOutputToolData:(0,n.jsx)(h.default,{}),presentResultsToolData:(0,n.jsx)(I.default,{}),sqlExecutionData:(0,n.jsx)(p.default,{}),executedSandboxedCodeData:(0,n.jsx)(c.default,{}),summarizeObjectiveData:(0,n.jsx)(i.default,{}),revertData:(0,n.jsx)(M.default,{}),agentPlanStepBegin:(0,n.jsx)(O.default,{}),deployConfigData:(0,n.jsx)(m.default,{}),acknowledgeUserMessage:(0,n.jsx)(u.default,{}),newSessionNudge:(0,n.jsx)(R.default,{}),commitData:(0,n.jsx)(u.default,{}),thoughts:(0,n.jsx)(a.default,{}),blueprintsSetup:(0,n.jsx)(j.default,{}),webSearchData:(0,n.jsx)(S.default,{}),webPageVisitData:(0,n.jsx)(V.default,{}),imageGenerationData:(0,n.jsx)(w.default,{}),createAutomationPreviewData:(0,n.jsx)(b.default,{}),agentStoppedData:(0,n.jsx)(N.default,{}),videoGenerationData:(0,n.jsx)(w.default,{}),projectImportCompleted:(0,n.jsx)(y.default,{}),taskListData:(0,n.jsx)(T.default,{}),suggestRollbackData:(0,n.jsx)(M.default,{}),samplingEvent:(0,n.jsx)(F.default,{}),setupObjectStorageData:(0,n.jsx)(D.default,{}),endOfRunSummaryData:(0,n.jsx)(u.default,{}),stockImageData:(0,n.jsx)(w.default,{}),searchIntegrationsData:(0,n.jsx)(V.default,{}),viewIntegrationData:(0,n.jsx)(V.default,{}),setupModelfarmData:(0,n.jsx)(a.default,{}),skillLoadedData:(0,n.jsx)(U.default,{}),viewLogsData:(0,n.jsx)(O.default,{}),uiTestingSubagentTakeOverData:(0,n.jsx)(a.default,{}),viewSpecialFiles:(0,n.jsx)(g.default,{}),designGuidelinesData:(0,n.jsx)(E.default,{}),mcpToolData:(0,n.jsx)(k.default,{}),viewEnvVarData:(0,n.jsx)(h.default,{}),setEnvVarData:(0,n.jsx)(d.default,{}),deleteEnvVarData:(0,n.jsx)(d.default,{}),generateMediaData:(0,n.jsx)(w.default,{}),waitingForBackgroundJobsData:(0,n.jsx)(_.default,{}),suggestGeneralBuildModeData:(0,n.jsx)(C.default,{}),messagedBackgroundAgent:(0,n.jsx)(B.default,{}),subagentReportResultData:(0,n.jsx)(B.default,{}),reportAgentIssueData:(0,n.jsx)(H.default,{})};return q&&G[q]?(0,r.cloneElement)(G[q],z):(0,r.cloneElement)((0,n.jsx)(u.default,{}),z)}function z(e){var i=e.toolName,a=(0,t._)(e,["toolName"]),o={programming_language_install_tool:(0,n.jsx)(f.default,{}),wait_for_background_jobs:(0,n.jsx)(u.default,{})};return i&&o[i]?(0,r.cloneElement)(o[i],a):(0,r.cloneElement)((0,n.jsx)(u.default,{}),a)}e.s(["ToolDataIcon",()=>q],178815),e.s(["ToolNameIcon",()=>z],971372)},97845,e=>{"use strict";var t=e.i(389959);e.i(242933);var n=e.i(424360);e.i(925218);var r=e.i(112077);function i(){var e=(0,r.useCreateObservable)(null),i=(0,t.useMemo)(function(){return new n.Multicast(function(t){return e.subscribe(function(e){if(e){var n=!1,r=null,i=function(){var n=e.scrollHeight-(e.scrollTop+e.clientHeight);n!==r&&(r=n,t.next(n))},a=function(){n||(n=!0,requestAnimationFrame(function(){n=!1,i()}))};return i(),e.addEventListener("scroll",a,{passive:!0}),function(){return e.removeEventListener("scroll",a)}}})})},[e]);return{setElement:(0,t.useCallback)(function(t){return e.set(t)},[e]),distanceFromBottom:i}}e.s(["useDistanceFromBottom",()=>i])},652488,e=>{e.v({button:"ScrollToLatestButton-module__3hieVa__button",buttonContent:"ScrollToLatestButton-module__3hieVa__buttonContent"})},501431,e=>{e.v({content:"AutoScroller-module__ZCuA_W__content",root:"AutoScroller-module__ZCuA_W__root",scroll:"AutoScroller-module__ZCuA_W__scroll",thumb:"AutoScroller-module__ZCuA_W__thumb",thumbUi:"AutoScroller-module__ZCuA_W__thumbUi",track:"AutoScroller-module__ZCuA_W__track"})},488174,e=>{e.v({divider:"Pane-module__yukHDW__divider",left:"Pane-module__yukHDW__left",root:"Pane-module__yukHDW__root",wider:"Pane-module__yukHDW__wider"})},653412,376363,608434,901708,e=>{"use strict";var t=e.i(721281),n=e.i(878420),r=e.i(64386),i=e.i(886513),a=e.i(530658),o=e.i(276385),s=e.i(389959),l=e.i(220743),u=e.i(467951),c=e.i(649960),d=e.i(480028),p=e.i(446530),f=e.i(173703),m=e.i(613355),h=e.i(764848),g=e.i(136540),v=e.i(960178),x=e.i(625484);e.i(312917);var y=e.i(675186);e.i(925218);var b=e.i(112077),S=e.i(128068),_=e.i(802088),w=e.i(97845),j=e.i(98816),T=e.i(387491),k=e.i(315801),D=e.i(343252),C=e.i(31290),E=e.i(869226),A=e.i(337761),R=e.i(119468),I=function(e){return"object"==(void 0===e?"undefined":(0,R._)(e))&&null!=e&&1===e.nodeType},P=function(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e},M=function(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n,r=getComputedStyle(e,null);return P(r.overflowY,t)||P(r.overflowX,t)||!!(n=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e))&&(n.clientHeight<e.scrollHeight||n.clientWidth<e.scrollWidth)}return!1},O=function(e,t,n,r,i,a,o,s){return a<e&&o>t||a>e&&o<t?0:a<=e&&s<=n||o>=t&&s>=n?a-e-r:o>t&&s<n||a<e&&s>n?o-t+i:0},V=function(e){var t=e.parentElement;return null==t?e.getRootNode().host||null:t},N=function(e,t){if("undefined"==typeof document)return[];var n,r,i,a,o,s,l=t.scrollMode,u=t.block,c=t.inline,d=t.boundary,p=t.skipOverflowHiddenElements,f="function"==typeof d?d:function(e){return e!==d};if(!I(e))throw TypeError("Invalid target");for(var m=document.scrollingElement||document.documentElement,h=[],g=e;I(g)&&f(g);){if((g=V(g))===m){h.push(g);break}null!=g&&g===document.body&&M(g)&&!M(document.documentElement)||null!=g&&M(g,p)&&h.push(g)}for(var v=null!=(r=null==(n=window.visualViewport)?void 0:n.width)?r:innerWidth,x=null!=(a=null==(i=window.visualViewport)?void 0:i.height)?a:innerHeight,y=null!=(o=window.scrollX)?o:pageXOffset,b=null!=(s=window.scrollY)?s:pageYOffset,S=e.getBoundingClientRect(),_=S.height,w=S.width,j=S.top,T=S.right,k=S.bottom,D=S.left,C="start"===u||"nearest"===u?j:"end"===u?k:j+_/2,E="center"===c?D+w/2:"end"===c?T:D,A=[],R=0;R<h.length;R++){var P=h[R],N=P.getBoundingClientRect(),B=N.height,L=N.width,U=N.top,H=N.right,F=N.bottom,q=N.left;if("if-needed"===l&&j>=0&&D>=0&&k<=x&&T<=v&&j>=U&&k<=F&&D>=q&&T<=H)break;var z=getComputedStyle(P),G=parseInt(z.borderLeftWidth,10),W=parseInt(z.borderTopWidth,10),K=parseInt(z.borderRightWidth,10),Y=parseInt(z.borderBottomWidth,10),Z=0,$=0,X="offsetWidth"in P?P.offsetWidth-P.clientWidth-G-K:0,Q="offsetHeight"in P?P.offsetHeight-P.clientHeight-W-Y:0,J="offsetWidth"in P?0===P.offsetWidth?0:L/P.offsetWidth:0,ee="offsetHeight"in P?0===P.offsetHeight?0:B/P.offsetHeight:0;if(m===P)Z="start"===u?C:"end"===u?C-x:"nearest"===u?O(b,b+x,x,W,Y,b+C,b+C+_,_):C-x/2,$="start"===c?E:"center"===c?E-v/2:"end"===c?E-v:O(y,y+v,v,G,K,y+E,y+E+w,w),Z=Math.max(0,Z+b),$=Math.max(0,$+y);else{Z="start"===u?C-U-W:"end"===u?C-F+Y+Q:"nearest"===u?O(U,F,B,W,Y+Q,C,C+_,_):C-(U+B/2)+Q/2,$="start"===c?E-q-G:"center"===c?E-(q+L/2)+X/2:"end"===c?E-H+K+X:O(q,H,L,G,K+X,E,E+w,w);var et=P.scrollLeft,en=P.scrollTop;Z=Math.max(0,Math.min(en+Z/ee,P.scrollHeight-B/ee+Q)),$=Math.max(0,Math.min(et+$/J,P.scrollWidth-L/J+X)),C+=en-Z,E+=et-$}A.push({el:P,top:Z,left:$})}return A},B=function(e){return!1===e?{block:"end",inline:"nearest"}:e===Object(e)&&0!==Object.keys(e).length?e:{block:"start",inline:"nearest"}};function L(e,t){var n=e.isConnected||e.ownerDocument.documentElement.contains(e);if("object"==(void 0===t?"undefined":(0,R._)(t))&&"function"==typeof t.behavior)return t.behavior(n?N(e,t):[]);if(n){var r=B(t),i=N(e,r),a="scrollBehavior"in document.body.style;i.forEach(function(e){var t=e.el,n=e.top,i=e.left;t.scroll&&a?t.scroll({top:n,left:i,behavior:r.behavior}):(t.scrollTop=n,t.scrollLeft=i)})}}function U(e,t,n){n&&L(e,t),t&&(void 0===t?"undefined":(0,R._)(t))==="object"?(t.skipOverflowHiddenElements=!0,L(e,t)):L(e,{skipOverflowHiddenElements:!0})}e.s(["default",()=>U],376363);var H=e.i(682205),F=e.i(187505),q=e.i(754873),z=e.i(652488),G=(0,d.cvarsFrom)("ScrollToLatestButton.module.css",["--opacity","--scale","--y","--bottom-offset","--pointer-events"]);function W(e){var n;return n={},(0,t._)(n,G.y,e?"-8px":"0px"),(0,t._)(n,G.scale,e?"1":"0.25"),(0,t._)(n,G.opacity,e?"1":"0"),(0,t._)(n,G.pointerEvents,e?"auto":"none"),n}function K(e){var n=(0,F.useTrackClick)().trackClick,r=(0,s.useRef)(null);(0,E.useStyleSet)(r,e.show,W);var i=e.bottomOffset?(0,t._)({},G.bottomOffset,e.bottomOffset+"px"):void 0;return(0,o.jsxs)("button",{style:i,ref:r,clsx:z.default.button,css:q.interactive.filledAndOutlined,onClick:function(t){n({target:"scroll_to_latest_button",productArea:"agent"}),e.onClick(t)},children:[(0,o.jsx)(H.default,{size:12,clsx:z.default.buttonContent}),(0,o.jsx)(v.Text,{variant:"small",clsx:z.default.buttonContent,children:"Scroll to latest"})]})}e.s(["ScrollToLatestButton",()=>K],608434);var Y=e.i(501431),Z=(0,d.cvarsFrom)("AutoScroller.module.css",["--first-child-margin","--track-width","--track-height","--track-opacity","--track-pointer-events","--track-transition-delay","--thumb-ui-width","--thumb-width","--thumb-height","--thumb-transform","--scroll-height"]),$={height:Z.scrollHeight};function X(e){var l=e.children,u=e.scrollerRef,c=e.shouldAutoScrollRef,d=e.scrollCache,p=e.scrollCacheKey,f=e.alignToEnd,m=e.autoScrollBehavior,h=e.buttonOffset,g=(0,i._)(e,["children","scrollerRef","shouldAutoScrollRef","scrollCache","scrollCacheKey","alignToEnd","autoScrollBehavior","buttonOffset"]),v=function(e){var t,n,r,i,o,l,u,c,d,p,f,m,h,g,v,x=e.shouldAutoScrollRef,D=e.scrollCache,C=e.scrollCacheKey,E=e.autoScrollBehavior,A=e.scrollToEndOnInitialRender,R=void 0===A||A,I=(0,b.useCreateObservable)(!1),P=(0,a._)((0,s.useState)(null),2),M=P[0],O=P[1],V=(0,a._)((0,s.useState)(null),2),N=V[0],B=V[1],L=(0,a._)((0,s.useState)(null),2),H=L[0],F=L[1],q=(0,j.default)(D),z=(t=(0,b.useCreateObservable)({scrollTop:0,scrollHeight:0,clientHeight:0}),n=(0,b.useCreateObservable)("idle"),(0,s.useEffect)(function(){var e=function(){r&&clearTimeout(r),i||(i=!0,requestAnimationFrame(function(){if(i=!1,N){var e=N.scrollHeight,a=N.scrollTop,o=N.clientHeight;n.set(t.current.scrollTop>=a?"backwards":"forwards"),t.set({scrollHeight:e,scrollTop:a,clientHeight:o}),r=setTimeout(function(){n.set("idle")},200)}}))};if(N){var r=null,i=!1;return e(),N.addEventListener("scroll",e),function(){N.removeEventListener("scroll",e),r&&clearTimeout(r)}}},[N,t,n]),{measurements:t,scrollDirection:n}),G=z.measurements,W=z.scrollDirection,K=(r=(0,b.useCreateObservable)({width:0,height:0}),(0,s.useEffect)(function(){if(N){var e=null;return"undefined"!=typeof ResizeObserver&&(e=new ResizeObserver(function(e){var t=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;s.target===N&&r.set({width:Math.round(s.contentRect.width),height:Math.round(s.contentRect.height)})}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}})).observe(N),function(){null==e||e.disconnect()}}},[N,r]),{scrollSize:r}).scrollSize,Y=(o=(i={shouldAutoScrollRef:x,autoScrollBehavior:E,anchorEl:M,scrollEl:N,contentEl:H,scrollToEndOnInitialRender:R}).shouldAutoScrollRef,l=i.autoScrollBehavior,u=i.anchorEl,c=i.scrollEl,d=i.contentEl,f=void 0===(p=i.scrollToEndOnInitialRender)||p,h=(m=(0,a._)((0,s.useState)(!1),2))[0],g=m[1],v=(0,s.useRef)(l),(0,s.useEffect)(function(){if(u&&c&&d){var e=0,t=!f,n=new y.AnimationLoop(function(n,r){if(e+=n,!o.current)return e=0,g(!1),r();var i=c.scrollTop,a=Math.max(Math.min(u.getBoundingClientRect().top-c.getBoundingClientRect().top+i,c.scrollHeight-c.clientHeight),0);if("instant"===v.current||!t)return t=!0,e=0,c.scrollTop=a,g(!1),r();var s=(0,T.damp)({current:i,target:a,elapsed:e,delta:n});if(c.scrollTop=s,s===a)return e=0,g(!1),r();g(!0)}),r=new ResizeObserver(function(){o.current&&n.start()});return r.observe(u),r.observe(c),r.observe(d),o.current&&!f&&n.start(),function(){n.stop(),r.disconnect(),g(!1)}}},[o,u,c,d,f]),{autoScrolling:h}).autoScrolling;(0,s.useEffect)(function(){if(M&&N)return Y?void I.set(!1):(0,k.inView)(M,function(){return I.set(!1),function(){I.set(!0)}},{root:N,rootMargin:"100px"})},[I,Y,M,N]),(0,s.useEffect)(function(){if(M&&N){var e=q.current,t=e.get(C);return R&&(t?N.scrollTo(0,t):U(M,{behavior:"instant"})),function(){e.set(C,N.scrollTop)}}},[M,N,q,C,R]);var Z=(0,w.useDistanceFromBottom)(),$=Z.setElement,X=Z.distanceFromBottom,Q=(0,s.useMemo)(function(){return X.select(function(e){return e<=4})},[X]);(0,_.useObserver)(Q,{next:function(e){e&&(x.current=!0)}});var J=(0,S.useObservableRef)(Q);return(0,s.useEffect)(function(){if(N)return N.addEventListener("wheel",e),N.addEventListener("pointerdown",t),N.addEventListener("pointerup",n),function(){N.removeEventListener("wheel",e),N.removeEventListener("pointerdown",t),N.removeEventListener("pointerup",n)};function e(e){if(e.deltaY<0){x.current=!1;return}}function t(){x.current=!1}function n(){J.current&&(x.current=!0)}},[N,x,J]),{showButton:I,anchorRef:O,scrollRef:(0,s.useCallback)(function(e){$(e),B(e)},[$]),scrollEl:N,contentRef:F,scrollToLatest:function(){M&&U(M,{behavior:"smooth"})},scrollSize:K,measurements:G,scrollDirection:W,autoScrolling:Y}}({shouldAutoScrollRef:c,scrollCache:d,scrollCacheKey:p,autoScrollBehavior:void 0===m?"instant":m,scrollToEndOnInitialRender:!0}),C=v.showButton,A=v.anchorRef,R=v.scrollRef,I=v.contentRef,P=v.scrollToLatest,M=v.scrollSize,O=v.measurements,V=v.scrollEl,N=v.scrollDirection,B=(0,s.useRef)(null);(0,E.useStyleSet)(B,M,function(e){return(0,t._)({},Z.scrollHeight,e.height+"px")});var L="0";f&&(L="auto 0 0 0");var H=(0,D.useMergeRefs)([R,u],{breadcrumb:"client/components/AutoScroller.tsx"});return(0,o.jsxs)(x.View,{innerRef:B,clsx:Y.default.root,style:(0,t._)({},Z.firstChildMargin,L),children:[(0,o.jsxs)(x.View,(0,r._)((0,n._)({clsx:Y.default.scroll,grow:!0,shrink:!0,innerRef:H},g),{children:[(0,o.jsx)(x.View,{clsx:Y.default.content,grow:!0,innerRef:I,children:l}),(0,o.jsx)(x.View,{innerRef:A}),V?(0,o.jsx)(Q,{shouldAutoScrollRef:c,scrollDirection:N,scrollEl:V,measurements:O}):null]})),(0,o.jsx)(K,{bottomOffset:void 0===h?0:h,show:C,onClick:P})]})}function Q(e){var n=e.measurements,r=e.scrollDirection,i=e.scrollEl,a=e.shouldAutoScrollRef,l=(0,s.useRef)(null),u=(0,s.useRef)(!1),c=(0,s.useRef)(null),d=(0,s.useRef)(null),p=(0,s.useCallback)(function(){c.current&&clearTimeout(c.current),d.current&&clearTimeout(d.current)},[]),f=(0,s.useCallback)(function(){p(),u.current||(c.current=setTimeout(function(){(0,A.styleSet)(l,(0,t._)({},Z.trackOpacity,"0"))},600),d.current=setTimeout(function(){(0,A.styleSet)(l,(0,t._)({},Z.trackPointerEvents,"none"))},1200))},[p]);(0,s.useEffect)(function(){var e=function(e){var n;"idle"===e?f():(p(),(0,A.styleSet)(l,(n={},(0,t._)(n,Z.trackOpacity,a.current?"0":"1"),(0,t._)(n,Z.trackPointerEvents,"auto"),n)))};e(r.current);var n=r.subscribe(e);return function(){n(),p()}},[r,f,p,a]),(0,E.useStyleSet)(l,n,function(e){var n,r=e.clientHeight,i=e.clientHeight/e.scrollHeight*r,a=e.scrollHeight-e.clientHeight,o=a>0?e.scrollTop/a*(r-i):0,s=e.clientHeight>=e.scrollHeight?0:16;return n={},(0,t._)(n,Z.trackWidth,s+"px"),(0,t._)(n,Z.trackHeight,r+"px"),(0,t._)(n,Z.thumbWidth,s+"px"),(0,t._)(n,Z.thumbHeight,i+"px"),(0,t._)(n,Z.thumbTransform,"translate(0, ".concat(o,"px)")),n});var m=(0,s.useCallback)(function(e){var t=0;a.current=!1;var r=!1;(0,C.measureMouseMove)(e,{start:function(){t=i.scrollTop},move:function(e){var a=e.delta;r||(r=!0,requestAnimationFrame(function(){r=!1;var e=n.current,o=e.clientHeight,s=e.scrollHeight,l=a.y/o;i.scrollTop=t+s*l}))}})},[i,n,a]),h=(0,s.useRef)(!1),g=(0,s.useCallback)(function(e){if(e.target===e.currentTarget){var t=e.currentTarget.getBoundingClientRect(),r=(e.clientY-t.y)/t.height;i.scrollTop=n.current.scrollHeight*r}},[i,n]),v=(0,s.useCallback)(function(e){e.deltaY<0&&(a.current=!1),h.current||(h.current=!0,requestAnimationFrame(function(){h.current=!1,i.scrollTop=i.scrollTop+e.deltaY}))},[i,a]);return(0,o.jsx)(x.View,{innerRef:l,clsx:Y.default.track,onMouseEnter:function(){u.current=!0,p()},onMouseLeave:function(){u.current=!1,f()},onWheel:v,onClick:g,children:(0,o.jsx)(x.View,{clsx:Y.default.thumb,onPointerDown:m,children:(0,o.jsx)(x.View,{clsx:Y.default.thumbUi})})})}e.s(["AutoScroller",()=>X,"NEAR_END_THRESHOLD",()=>4,"scrollSizeTokens",()=>$],901708);var J=e.i(488174);function ee(e){var n=e.left,r=e.title,i=e.right,d=e.elevated,p=void 0===d||d,m=e.bordered,y=e.width,b=e.onOpenPane,S=e.openPaneButtonAlt,_=e.children,w=e.renderChildrenOnlyWhenInView,j=void 0!==w&&w,T=e.showOpenPaneButton,k=(0,s.useRef)(null),D=(0,u.useInView)(k,{amount:0}),C=(0,s.useMemo)(function(){return!j||D},[D,j]),E=(0,a._)((0,s.useState)(0),2),A=E[0],R=E[1],I=(0,c.default)(function(e){!j||(!j||D)&&e.height>A&&R(e.height)},{type:"debounce",wait:500});return(0,o.jsxs)(f.ShadesSurface,{elevate:!!p&&"1x",border:void 0===m||m?"regular":"ghost",br:8,clsx:[J.default.root,(0,t._)({},J.default.wider,"wider"===(void 0===y?"default":y))],innerRef:k,children:[(0,o.jsxs)(f.ShadesSurface,{elevate:"2x",border:{side:"bottom",strength:"subtle"},py:4,px:6,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,o.jsx)(x.View,{css:J.default.left,align:"center",children:n}),(0,o.jsx)(x.View,{grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:(0,o.jsx)(v.Text,{shrink:!0,multiline:!1,showTooltipOnTruncate:!0,children:r})}),(0,o.jsxs)(x.View,{align:"center",row:!0,gap:2,children:[i,b&&(void 0===T||T)?(0,o.jsxs)(o.Fragment,{children:[i?(0,o.jsx)(h.DividerV,{clsx:J.default.divider}):null,(0,o.jsx)(g.IconButton,{alt:void 0===S?"Open Pane":S,onClick:b,children:(0,o.jsx)(l.default,{})})]}):null]})]}),(0,o.jsx)(f.ShadesSurface,{innerRef:I,style:{minHeight:A},elevate:!!p&&"1x",children:C?_:null})]})}var et=(0,p.cssRecord)({content:[(0,t._)({},m.media.max("mobileMax"),[m.rcss.maxHeight("calc(".concat($.height," - 60px)")),m.rcss.overflowY("auto"),{"&::-webkit-scrollbar":{display:"none"}}])],package:[m.rcss.width("calc(50% - ".concat(d.tokens.space4,")")),m.rcss.overflow("hidden")]});function en(e){var t=e.text,a=e.packageList,s=e.getPackageIcon,l=e.children,u=(0,i._)(e,["text","packageList","getPackageIcon","children"]);return(0,o.jsxs)(ee,(0,r._)((0,n._)({renderChildrenOnlyWhenInView:!0},u),{children:[a.length?(0,o.jsx)(x.View,{css:et.content,p:8,children:(0,o.jsxs)(x.View,{gap:8,children:[(0,o.jsx)(v.Text,{color:"dimmest",children:t}),(0,o.jsx)(x.View,{row:!0,wrap:"wrap",gap:8,children:a.map(function(e,t){return(0,o.jsx)(f.ShadesSurface,{css:et.package,row:!0,gap:8,px:8,py:4,br:4,align:"center",justify:"space-between",elevate:"2x",children:(0,o.jsxs)(x.View,{grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:[s(e),(0,o.jsx)(v.Text,{variant:"small",multiline:!1,showTooltipOnTruncate:!0,shrink:!0,children:e})]})},t)})})]})}):null,l]}))}e.s(["EventPane",()=>ee,"EventPaneWithPackages",()=>en],653412)},198820,e=>{"use strict";var t=e.i(276385),n=e.i(917736),r=e.i(653412);function i(e){var i=e.openPane;return(0,t.jsx)(r.EventPane,{left:(0,t.jsx)(n.default,{size:16}),title:"Created PostgreSQL Database",onOpenPane:function(){return i({type:"neon"})}})}e.s(["CreatePostgreSQLDatabase",()=>i])},423804,e=>{e.v({terminalWrapper:"ExecutedSandboxedCode-module__mNX52q__terminalWrapper",wrapper:"ExecutedSandboxedCode-module__mNX52q__wrapper"})},291046,e=>{e.v({errorContent:"GenerateMedia-module__eXNImG__errorContent",grid:"GenerateMedia-module__eXNImG__grid",gridItem:"GenerateMedia-module__eXNImG__gridItem",imageOrVideo:"GenerateMedia-module__eXNImG__imageOrVideo",mediaEmptyState:"GenerateMedia-module__eXNImG__mediaEmptyState",promptItem:"GenerateMedia-module__eXNImG__promptItem",promptStatus:"GenerateMedia-module__eXNImG__promptStatus",promptText:"GenerateMedia-module__eXNImG__promptText"})},364343,e=>{e.v({container:"ImageGeneration-module__OtLLdq__container",error:"ImageGeneration-module__OtLLdq__error",image:"ImageGeneration-module__OtLLdq__image",loading:"ImageGeneration-module__OtLLdq__loading"})},785669,54073,641654,504186,e=>{"use strict";var t=e.i(276385),n=e.i(82259),r=e.i(806930),i=e.i(653412),a=e.i(762211),o=e.i(818976),s=e.i(625484),l=e.i(423804);function u(e){var a=e.data,u=a.data,d=a.state,p=e.openPane,f=(0,o.useTerminalTheme)(),m=d===n.EventState.IN_PROGRESS,h=u.code.split("\n").map(function(e){return">>> ".concat(e)}).join("\n");return u.stdout&&(h+="\n"+u.stdout),u.stderr&&(h+="\n\x1b[31m"+u.stderr+"\x1b[0m"),(0,t.jsx)(i.EventPane,{left:(0,t.jsx)(r.default,{size:16}),title:m?"Executing Python":"Python",renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:(0,t.jsx)(s.View,{clsx:l.default.wrapper,style:{backgroundColor:null==f?void 0:f.background},children:(0,t.jsx)(c,{output:h,openPane:p})})})}function c(e){var n=e.output,r=e.openPane;return 0===n.length?null:(0,t.jsx)(s.View,{clsx:l.default.terminalWrapper,children:(0,t.jsx)(a.AutoGrowingTerminalForHistoricalOutput,{convertEol:!0,maxHeight:300,output:n,openPane:r})})}e.s(["ExecutedSandboxedCode",()=>u],785669);var d=e.i(652172),p=e.i(183035),f=e.i(269848),m=e.i(416298),h=e.i(530658),g=e.i(389959),v=e.i(205104);function x(e,t){var n=(0,h._)((0,g.useState)(!1),2),r=n[0],i=n[1],a=(0,h._)((0,g.useState)(!0),2),o=a[0],s=a[1],l=(0,h._)((0,g.useState)(null),2),u=l[0],c=l[1],d=(0,g.useMemo)(function(){return t?e.readFile(t).then(function(e){if(e.error)return{error:e.error,data:null};try{var n=(0,v.getMediaMime)(t),r=e.content.toString("base64"),i="data:".concat(n,";base64,").concat(r);return{error:null,data:i}}catch(e){return{error:"Failed to process file",data:null}}}).catch(function(e){return{error:"Failed to read file",data:null}}):Promise.resolve({error:"No file path provided",data:null})},[e,t]);return(0,g.useEffect)(function(){i(!1),s(!0),c(null),d.then(function(e){var t=e.error,n=e.data;t?i(!0):c(n),s(!1)})},[d]),{isLoading:o,hasError:r,dataSrc:u}}e.s(["useFileAsDataUrl",()=>x],54073);var y=e.i(529810),b=e.i(173703),S=e.i(960178),_=e.i(291046);function w(e){return e.error?"error":e.path?"generated":"generating"}function j(e){var n=e.path,r=e.description,i=x((0,y.default)().fs,n),a=i.isLoading,o=i.hasError,l=i.dataSrc;return a?(0,t.jsx)(b.ShadesSurface,{elevate:"2x",clsx:_.default.mediaEmptyState,align:"center",justify:"center",children:(0,t.jsx)(f.default,{})}):o||!l?(0,t.jsx)(b.ShadesSurface,{elevate:"2x",clsx:_.default.mediaEmptyState,align:"center",justify:"center",children:(0,t.jsx)(S.Text,{color:"dimmer",variant:"small",children:"Failed to load"})}):(0,t.jsx)(s.View,{clsx:_.default.gridItem,br:"container",children:(0,t.jsx)(d.default,{src:l,alt:r||"Generated media",className:_.default.imageOrVideo,width:400,height:400,unoptimized:!0})})}function T(e){var n=e.path,r=x((0,y.default)().fs,n),i=r.isLoading,a=r.hasError,o=r.dataSrc;return i?(0,t.jsx)(b.ShadesSurface,{elevate:"2x",clsx:_.default.mediaEmptyState,border:"subtle",br:8,p:8,align:"center",justify:"center",children:(0,t.jsx)(f.default,{})}):a||!o?(0,t.jsx)(b.ShadesSurface,{elevate:"2x",clsx:_.default.mediaEmptyState,align:"center",justify:"center",children:(0,t.jsx)(S.Text,{color:"dimmer",variant:"small",children:"Failed to load"})}):(0,t.jsx)(s.View,{clsx:_.default.gridItem,br:"container",children:(0,t.jsx)("video",{src:o,className:_.default.imageOrVideo,muted:!0,controls:!0})})}function k(e){var r=e.item,i=w(r);return"generating"===i?(0,t.jsx)(b.ShadesSurface,{clsx:_.default.mediaEmptyState,align:"center",justify:"center",children:(0,t.jsx)(f.default,{})}):"error"===i?(0,t.jsx)(b.ShadesSurface,{clsx:_.default.mediaEmptyState,align:"center",justify:"center",children:(0,t.jsxs)(s.View,{clsx:_.default.errorContent,children:[(0,t.jsx)(m.default,{}),(0,t.jsx)(S.Text,{color:"dimmer",variant:"small",children:r.error||"Failed"})]})}):r.mediaType===n.GeneratedMediaType.MEDIA_TYPE_VIDEO?(0,t.jsx)(T,{path:r.path}):(0,t.jsx)(j,{path:r.path,description:r.description})}function D(e){var n=e.item,r=w(n);return(0,t.jsxs)(s.View,{clsx:_.default.promptItem,children:[(0,t.jsxs)(s.View,{clsx:_.default.promptStatus,children:["generating"===r&&(0,t.jsx)(f.default,{}),"generated"===r&&(0,t.jsx)(p.default,{}),"error"===r&&(0,t.jsx)(m.default,{})]}),(0,t.jsx)(S.Text,{variant:"small",color:"error"===r?"dimmer":"default",clsx:_.default.promptText,children:n.description})]})}function C(e){var r=e.data,i=e.state,a=r.media;if(!a||0===a.length)return(0,t.jsx)(s.View,{children:(0,t.jsx)(S.Text,{color:"dimmer",children:"No media to display"})});var o=a.filter(function(e){return e.path||e.error||i===n.EventState.IN_PROGRESS});return(0,t.jsxs)(s.View,{gap:8,children:[o.length>0&&(0,t.jsx)(s.View,{clsx:_.default.grid,children:o.map(function(e){return(0,t.jsx)(k,{item:e},e.id)})}),(0,t.jsx)(b.ShadesSurface,{gap:6,border:"subtle",br:8,p:4,children:a.map(function(e){return(0,t.jsx)(D,{item:e},e.id)})})]})}e.s(["GenerateMedia",()=>C],641654);var E=e.i(211397),A=e.i(364343);function R(e){var n=e.imagePath,r=e.imageDescription,i=x((0,y.default)().fs,n),a=i.isLoading,o=i.hasError,l=i.dataSrc;return a?(0,t.jsx)(s.View,{className:A.default.loading,children:(0,t.jsx)(f.default,{})}):o||!l?(0,t.jsx)(s.View,{className:A.default.error,children:(0,t.jsxs)(S.Text,{color:"dimmer",children:["Failed to load image from ",n]})}):(0,t.jsx)(s.View,{className:A.default.container,children:(0,t.jsx)(E.default,{src:l,alt:r||"Generated image",className:A.default.image,layout:"fill",objectFit:"cover"})})}e.s(["ImageGeneration",()=>R],504186)},687843,e=>{e.v({parameterKey:"MCPParameterRenderer-module__-cV15W__parameterKey",parameterValue:"MCPParameterRenderer-module__-cV15W__parameterValue",parametersGrid:"MCPParameterRenderer-module__-cV15W__parametersGrid"})},11286,e=>{e.v({expandableSubSection:"MCPToolResult-module__kM_UGq__expandableSubSection",securityErrorAlert:"MCPToolResult-module__kM_UGq__securityErrorAlert",securityErrorAlertTitle:"MCPToolResult-module__kM_UGq__securityErrorAlertTitle",subsectionButton:"MCPToolResult-module__kM_UGq__subsectionButton",wrappedText:"MCPToolResult-module__kM_UGq__wrappedText"})},83773,e=>{e.v({trajectoryItem:"SamplingEvent-module__iPtlaW__trajectoryItem"})},288885,e=>{e.v({container:"SearchIntegrations-module__CRsxhW__container"})},12977,e=>{e.v({container:"StockImageGeneration-module__nQ0zAW__container",image:"StockImageGeneration-module__nQ0zAW__image",imageEmptyState:"StockImageGeneration-module__nQ0zAW__imageEmptyState"})},132183,960008,582752,111328,122757,414018,645143,532717,245702,573201,865026,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(389959),i=e.i(526017),a=e.i(178496),o=e.i(438844),s=e.i(653412),l=e.i(119468),u=e.i(960933),c=e.i(862927),d=e.i(986194),p=u.Type.Union([u.Type.Object({type:u.Type.Optional(u.Type.String()),fields:u.Type.Array(u.Type.Object({key:u.Type.String(),value:u.Type.Unknown()}))}),u.Type.Object({type:u.Type.Optional(u.Type.String()),fields:u.Type.Record(u.Type.String(),u.Type.Unknown())}),u.Type.Record(u.Type.String(),u.Type.Unknown())]);function f(e){var n=c.Value.Cast(p,e),r={};return"fields"in n&&n.fields?Array.isArray(n.fields)?n.fields.forEach(function(e){return"type"!==e.key&&(r[e.key]=e.value)}):Object.entries(n.fields).forEach(function(e){var n=(0,t._)(e,2),i=n[0],a=n[1];return"type"!==i&&(r[i]=a)}):Object.entries(n).forEach(function(e){var n=(0,t._)(e,2),i=n[0],a=n[1];return"type"!==i&&(r[i]=a)}),Object.entries(r).map(function(e){var n=(0,t._)(e,2);return{key:n[0],value:function e(t){if(null==t||void 0===t)return"null";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return String(t);if((void 0===t?"undefined":(0,l._)(t))==="object"&&null!=t&&"kind"in t&&"object"===(0,l._)(t.kind)&&null!=t.kind&&"$kind"in t.kind&&"string"==typeof t.kind.$kind){var n=t.kind,r=n.$kind,i=(0,d.unkind)(n);return"nullValue"===r?"null":"listValue"===r&&(void 0===i?"undefined":(0,l._)(i))==="object"&&Array.isArray(i.values)?"[".concat(i.values.map(function(t){return e(t)}).join(", "),"]"):"structValue"===r&&(void 0===i?"undefined":(0,l._)(i))==="object"?JSON.stringify(i):String(i)}try{return JSON.stringify(t)}catch(e){return String(t)}}(n[1])}})}var m=e.i(960178),h=e.i(625484),g=e.i(687843),v=(0,r.memo)(function(e){var t=e.parameters;if(!(f(t).length>0))return(0,n.jsx)(h.View,{px:4,children:(0,n.jsx)(m.Text,{variant:"small",color:"dimmest",children:"No parameters"})});var i=f(t);return(0,n.jsx)(h.View,{className:g.default.parametersGrid,children:i.map(function(e,t){var i=e.key,a=e.value;return(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(m.Text,{variant:"small",color:"dimmer",className:g.default.parameterKey,children:i}),(0,n.jsx)(m.Text,{variant:"small",className:g.default.parameterValue,children:a})]},"".concat(i,"-").concat(t))})})}),x=e.i(173703),y=(0,r.memo)(function(e){var t,r,i,a,o,s=e.content,u=null==s||null==(t=s.resource)?void 0:t.uri,c=null==s||null==(i=s.resource)||null==(r=i.Meta)?void 0:r.meta;if((null==s||null==(a=s.resource)?void 0:a.contents)&&"object"===(0,l._)(s.resource.contents)){var d=s.resource.contents;"text"===d.$kind&&(o=d.text)}return(0,n.jsxs)(x.ShadesSurface,{p:8,children:[(0,n.jsxs)(m.Text,{color:"dimmer",variant:"small",children:["Embedded Resource: ",u||"Unknown resource"]}),c?(0,n.jsx)(m.Text,{variant:"small",children:c}):null,o?(0,n.jsx)(m.Text,{variant:"small",style:{whiteSpace:"pre-wrap"},children:o}):null]})}),b=(0,r.memo)(function(e){var t=e.content;if(!t.data)return(0,n.jsx)(x.ShadesSurface,{p:8,children:(0,n.jsx)(m.Text,{color:"dimmest",variant:"small",children:"No image data"})});var r="data:".concat(t.mimeType||"image/png",";base64,").concat(t.data);return(0,n.jsx)(x.ShadesSurface,{p:8,children:(0,n.jsx)(h.View,{align:"center",children:(0,n.jsx)("img",{src:r,alt:"MCP tool result",style:{maxWidth:"100%",maxHeight:"360px",borderRadius:"4px",display:"block"},onError:function(e){e.currentTarget.style.display="none"}})})})}),S=e.i(163525),_=(0,r.memo)(function(e){var t=e.content;return t.text?(0,n.jsx)(x.ShadesSurface,{p:8,children:(0,n.jsx)(S.MessageMarkdown,{text:t.text})}):null}),w=(0,r.memo)(function(e){var t=e.contentBlocks;return t.length?(0,n.jsx)(h.View,{gap:8,style:{overflow:"auto",maxHeight:"400px",borderRadius:"8px"},children:t.map(function(e,t){return(0,n.jsx)(j,{block:e},t)})}):(0,n.jsx)(h.View,{p:8,children:(0,n.jsx)(m.Text,{color:"dimmest",variant:"small",children:"No output content"})})}),j=(0,r.memo)(function(e){var t=e.block.block;if(!t)return(0,n.jsx)(x.ShadesSurface,{p:8,children:(0,n.jsx)(m.Text,{color:"dimmest",variant:"small",children:"Empty content block"})});if((null==t?void 0:t.$kind)==="textContent")return(0,n.jsx)(_,{content:t.textContent});if((null==t?void 0:t.$kind)==="imageContent")return(0,n.jsx)(b,{content:t.imageContent});if((null==t?void 0:t.$kind)==="audioContent"){var r=t.audioContent;return(0,n.jsx)(x.ShadesSurface,{p:8,children:(0,n.jsxs)(m.Text,{color:"dimmer",variant:"small",children:["Audio content: ",r.mimeType||"audio/wav"]})})}if((null==t?void 0:t.$kind)==="resourceLink"){var i,a,o=t.resourceLink,s=null==(i=o.Title)?void 0:i.title,l=null==(a=o.Description)?void 0:a.description;return(0,n.jsx)(x.ShadesSurface,{p:8,children:(0,n.jsxs)(h.View,{gap:2,children:[(0,n.jsx)(m.Text,{variant:"small",children:s||o.name||"Resource"}),l?(0,n.jsx)(m.Text,{variant:"small",color:"dimmer",children:l}):null,o.uri?(0,n.jsx)(m.Text,{variant:"small",color:"dimmest",children:o.uri}):null]})})}return(null==t?void 0:t.$kind)==="embeddedResource"?(0,n.jsx)(y,{content:t.embeddedResource}):(0,n.jsx)(x.ShadesSurface,{p:8,children:(0,n.jsx)(m.Text,{color:"dimmest",variant:"small",children:"Unsupported content type"})})}),T=e.i(140487),k=e.i(11286);function D(e){var t=e.title,r=e.expanded,o=e.onToggle,s=e.children;return(0,n.jsxs)(x.ShadesSurface,{clsx:k.default.expandableSubSection,children:[(0,n.jsx)(T.Button,{size:"small",variant:"nofill",alignment:"start",onClick:o,iconLeft:r?(0,n.jsx)(i.default,{}):(0,n.jsx)(a.default,{}),text:t,clsx:k.default.subsectionButton}),r?(0,n.jsx)(h.View,{children:s}):null]})}function C(e){var t,r=e.result,i=e.progress;return(null==r?void 0:r.contentBlocks)&&r.contentBlocks.length>0?(0,n.jsx)(w,{contentBlocks:r.contentBlocks}):(null==r?void 0:r.content)?(0,n.jsx)(m.Text,{variant:"small",clsx:k.default.wrappedText,children:r.content}):(null==r?void 0:r.isError)||(null==i||null==(t=i.Message)?void 0:t.message)?null:(0,n.jsx)(m.Text,{variant:"small",color:"dimmest",children:"No response content"})}function E(e){var i,a,l,u,c=e.toolName,d=e.parameters,p=e.result,f=e.progress,g=e.insecureError,y=null==p||null==(i=p.contentBlocks)?void 0:i.some(function(e){var t=e.block;return(null==t?void 0:t.$kind)==="imageContent"}),b=(0,t._)((0,r.useState)(!0),2),S=b[0],_=b[1],w=(0,t._)((0,r.useState)(null!=y&&y||!!g),2),j=w[0],T=w[1],E=(0,r.useCallback)(function(){_(function(e){return!e})},[]),A=(0,r.useCallback)(function(){T(function(e){return!e})},[]),R=d&&Object.keys(d).length>0,I=p||f||g;return(0,n.jsx)(x.ShadesSurface,{children:(0,n.jsx)(s.EventPane,{left:(0,n.jsx)(o.default,{size:16}),title:c||"MCP Tool Use",elevated:!1,bordered:!1,children:(0,n.jsxs)(h.View,{gap:4,p:8,children:[g?(0,n.jsx)(x.ShadesSurface,{clsx:k.default.securityErrorAlert,children:(0,n.jsx)(h.View,{row:!0,gap:8,p:12,align:"center",children:(0,n.jsxs)(h.View,{gap:4,style:{flex:1},children:[(0,n.jsx)(m.Text,{clsx:k.default.securityErrorAlertTitle,children:"Security Issue Detected"}),(0,n.jsx)(m.Text,{variant:"small",color:"default",children:g}),(0,n.jsx)(m.Text,{variant:"small",color:"dimmer",children:"The tool output was flagged for security issues and will not be accessible to the agent."})]})})}):null,R?(0,n.jsx)(D,{title:"Request",expanded:S,onToggle:E,children:(0,n.jsx)(v,{parameters:d})}):null,I&&!g?(0,n.jsx)(D,{title:"Response",expanded:j,onToggle:A,children:(0,n.jsxs)(h.View,{gap:4,p:8,children:[f&&(null==(a=f.Message)?void 0:a.message)?(0,n.jsxs)(m.Text,{variant:"small",color:"dimmer",children:[f.Message.message,void 0!==f.progress&&(null==(l=f.Total)?void 0:l.total)!==void 0?(0,n.jsxs)("span",{children:[" ","(",f.progress,"/",f.Total.total,")"]}):null]}):null,(null==p?void 0:p.isError)?(0,n.jsxs)(m.Text,{variant:"small",color:"default",children:["Error: ",p.content||"Tool execution failed"]}):null,(0,n.jsx)(C,{result:p,progress:f}),null==p||!p.structuredContent||(null==p||null==(u=p.contentBlocks)?void 0:u.length)||(null==p?void 0:p.content)?null:(0,n.jsxs)(h.View,{gap:2,children:[(0,n.jsx)(m.Text,{variant:"small",color:"dimmer",children:"Structured Content:"}),(0,n.jsx)(m.Text,{variant:"small",clsx:k.default.wrappedText,children:JSON.stringify(p.structuredContent,null,2)})]})]})}):null]})})})}e.s(["MCPToolResult",()=>E],132183);var A=e.i(82259),R=e.i(516245),I=e.i(409570),P=e.i(762211),M=e.i(818976),O=e.i(394212),V=e.i(297083),N=e.i(817556),B=e.i(299798),L=e.i(446530),U=e.i(613355);function H(){}var F=(0,L.cssRecord)({terminalWrapper:[{"> div":[U.rcss.borderRadius(4)],"& .xterm":[U.rcss.borderRadius(4)]}]});function q(e){var i=e.processId,a=e.openPane,o=e.maxHeight,s=(0,M.useTerminalTheme)(),l=(0,P.useAutoGrowingXTerm)({maxHeight:o,openPane:a}),u=l.visibleHeight,c=l.bufferHeight,d=l.wrapperResizeRef,p=l.xterm,f=l.xtermRef,m=(0,t._)((0,r.useState)(null),2),g=m[0],v=m[1],x=(0,r.useCallback)(function(e){return v(function(){return e}),function(){}},[]);return(0,B.usePid2)(function(e,t){var n=t.signal;return(0,V._)(function(){var t,r,a,o,s,l,u,c;return(0,N._)(this,function(d){switch(d.label){case 0:if(!g)return[2];t=e.agentToolPackager.connectToInstallPackages.subscribe({processId:i},{signal:n}).resReadable,r=!1,a=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),s=(0,O._)(t),d.label=2;case 2:return[4,s.next()];case 3:if(!(r=!(l=d.sent()).done))return[3,5];if(!(u=l.value).ok){if("UNEXPECTED_DISCONNECT"===u.payload.code||"CANCEL"===u.payload.code||"NO_PROCESS_MATCHING_ID"===u.payload.code)return[3,5];throw Error("[".concat(u.payload.code,"]: ").concat(u.payload.message))}"output"===u.payload.$kind&&g(u.payload.output),d.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return c=d.sent(),a=!0,o=c,[3,12];case 7:if(d.trys.push([7,,10,11]),!(r&&null!=s.return))return[3,9];return[4,s.return()];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(a)throw o;return[7];case 11:return[7];case 12:return[2]}})})()},[g,i]),(0,n.jsx)(h.View,{css:F.terminalWrapper,style:{height:u,background:null==s?void 0:s.background},children:(0,n.jsx)(P.AutoGrowingTerminalWrapper,{onInput:H,xterm:p,wrapperResizeRef:d,bufferHeight:c,setOnMessage:x,onResizeTerminal:H,children:(0,n.jsx)(P.AutoGrowingTerminalInner,{xtermRef:f,visibleHeight:u,maxHeight:o})})})}var z=(0,L.cssRecord)({terminalWrapperBottomRadius:[U.rcss.borderRadius(0,0,4,4),{"> div":[U.rcss.borderRadius(4)],"& .xterm":[U.rcss.borderRadius(4)]}],terminalWrapperFullRadius:[U.rcss.borderRadius(4),{"> div":[U.rcss.borderRadius(4)],"& .xterm":[U.rcss.borderRadius(4)]}]});function G(e){var t,r=e.data,i=e.openPane,a=r.installed,o=r.isExecuting,l=r.processId,u=r.state,c=null==(t=r.output)?void 0:t.trim().replaceAll("\n","\r\n"),d=(0,M.useTerminalTheme)(),p="";p=o?a.length>1?"".concat(a.length," packages are being installed:"):"A package is being installed:":a.length>1?"".concat(a.length," packages were installed:"):"A package was installed:";var f=u===A.EventState.IN_PROGRESS&&o&&!c,g=a.length>0,v=u===A.EventState.IN_PROGRESS||c?(0,n.jsxs)(h.View,{css:g?z.terminalWrapperFullRadius:z.terminalWrapperBottomRadius,style:{backgroundColor:null==d?void 0:d.background},children:[o&&l?(0,n.jsx)(q,{processId:l,openPane:i,maxHeight:300}):null,!o&&c?(0,n.jsx)(P.AutoGrowingTerminalForHistoricalOutput,{output:c,maxHeight:300,openPane:i}):null]}):null,x=g?(0,n.jsxs)(h.View,{gap:4,p:8,children:[(0,n.jsx)(m.Text,{color:"dimmest",children:f?"Installing…":"Command output:"}),v]}):v;return(0,n.jsx)(s.EventPaneWithPackages,{left:(0,n.jsx)(R.default,{size:16}),title:"Dependencies",onOpenPane:function(){i({type:"developer",data:{tab:["dependencies","import"]}})},text:p,packageList:a,getPackageIcon:function(){return(0,n.jsx)(I.default,{size:16})},children:x})}function W(e){var t=e.data.uninstalled,r=e.openPane,i=t.length>1?"".concat(t.length," packages were uninstalled:"):"A package was uninstalled:";return(0,n.jsx)(s.EventPaneWithPackages,{left:(0,n.jsx)(R.default,{size:16}),title:"Dependencies",onOpenPane:function(){r({type:"developer",data:{tab:["dependencies","import"]}})},text:i,packageList:t,getPackageIcon:function(){return(0,n.jsx)(I.default,{size:16})}})}e.s(["PackagerInstall",()=>G],960008),e.s(["PackagerUninstall",()=>W],582752);var K=e.i(183035),Y=e.i(429662),Z=e.i(269848),$=e.i(232949),X=e.i(416298),Q=e.i(943172),J=e.i(624782),ee=e.i(83773);function et(e){var t=e.id,r=e.contents,i=e.state,a=function(e){switch(e){case 1:return{icon:(0,n.jsx)(Z.default,{}),label:"In Progress",colorway:"default",bgColor:"var(--token-background-higher)"};case 2:return{icon:(0,n.jsx)(K.default,{}),label:"Successful",colorway:"positive",bgColor:"var(--token-background-positive-weak)"};case 3:return{icon:(0,n.jsx)(X.default,{}),label:"Failed",colorway:"negative",bgColor:"var(--token-background-negative-weak)"};case 4:return{icon:(0,n.jsx)($.default,{}),label:"Chosen",colorway:"accent",bgColor:"var(--token-background-accent-weak)"};default:return{icon:(0,n.jsx)(Y.default,{}),label:"Pending",colorway:"default",bgColor:"var(--token-background-higher)"}}}(i);return(0,n.jsxs)(h.View,{clsx:ee.default.trajectoryItem,p:8,children:[(0,n.jsxs)(h.View,{row:!0,align:"center",gap:8,children:[a.icon,(0,n.jsxs)(m.Text,{variant:"small",color:"default",children:["Trajectory ",t]}),(0,n.jsx)(J.Pill,{text:a.label,colorway:function(){switch(i){case 2:return"positive";case 3:return"negative";case 4:return"primary";default:return}}(),variant:"muted",compact:!0})]}),r?(0,n.jsx)(h.View,{pt:4,children:(0,n.jsx)(m.Text,{variant:"small",multiline:!0,color:"dimmer",children:r})}):null]})}function en(e){var t,r=(null==(t=e.data.data)?void 0:t.trajectories)||[];return(0,n.jsx)(s.EventPane,{left:(0,n.jsx)(Q.default,{size:16}),title:"Solution exploration",renderChildrenOnlyWhenInView:!0,children:(0,n.jsx)(h.View,{gap:6,pt:6,children:r.length>0?(0,n.jsx)(h.View,{gap:6,children:r.map(function(e){return(0,n.jsx)(et,{id:e.id||"unknown",contents:e.contents||"",state:e.state||0},e.id||Math.random())})}):(0,n.jsx)(h.View,{color:"dimmer",children:(0,n.jsx)(m.Text,{color:"dimmer",children:"Initializing solution exploration..."})})})})}e.s(["SamplingEvent",()=>en],111328);var er=e.i(480028),ei=e.i(211397),ea=(0,L.cssRecord)({loading:[U.rcss.center,{marginLeft:"auto",marginRight:"auto"}],aspectRatio:[U.rcss.position.relative,U.rcss.height(0),{paddingBottom:"".concat(56.25,"%")}],image:[U.rcss.coverContainer,{"& > span":[U.rcss.borderRadius(4),U.rcss.border({color:er.tokens.outlineDimmer})]}]});function eo(e){var t=e.data.imageUrl;return t?(0,n.jsx)(h.View,{css:ea.aspectRatio,children:(0,n.jsx)(h.View,{css:ea.image,children:(0,n.jsx)(ei.default,{layout:"fill",src:t,alt:"Screenshot",objectFit:"contain"})})}):(0,n.jsx)(h.View,{css:ea.loading,children:(0,n.jsx)(Z.default,{})})}e.s(["Screenshot",()=>eo],122757);var es=e.i(546284),el=e.i(288885),eu=function(e){var t=e.query,r=e.numResults;return(0,n.jsx)(x.ShadesSurface,{p:8,clsx:el.default.container,children:(0,n.jsxs)(m.Text,{children:['Searched for "',t,'" and found ',(0,es.default)("result",r,!0),"."]})})};e.s(["SearchIntegrations",()=>eu],414018);var ec=e.i(195206),ed=e.i(331762),ep=e.i(47503),ef=(0,L.cssRecord)({terminalWrapper:[U.rcss.overflow("hidden"),{"& .xterm":[U.rcss.borderRadius(0,0,4,4)]}]});function em(e){var i=e.processId,a=e.openPane,o=e.maxHeight,s=e.interactive,l=void 0!==s&&s,u=(0,ep.useCurrentUserId)(),c=(0,r.useId)(),d=(0,M.useTerminalTheme)(),p=(0,P.useAutoGrowingXTerm)({maxHeight:o,openPane:a}),f=p.visibleHeight,m=p.bufferHeight,g=p.wrapperResizeRef,v=p.xterm,x=p.xtermRef,y=(0,t._)((0,r.useState)(null),2),b=y[0],S=y[1],_=(0,r.useCallback)(function(e){return S(function(){return e}),function(){}},[]);return(0,B.usePid2)(function(e,t){var n=t.signal;return(0,V._)(function(){var t,r,a,o,s,d,p,f,m,h,g,x,y;return(0,N._)(this,function(S){switch(S.label){case 0:if(!u||!b||!v)return[2];r=(t=e.shellExec.connect.stream({id:i,userId:u,processViewId:c},{signal:n})).resReadable,a=t.reqWritable,o=function(e){l&&a.write({$kind:"stdin",stdin:new Uint8Array(ed.Buffer.from(e))})},s=v.onResize(function(t){return(0,V._)(function(){return(0,N._)(this,function(n){switch(n.label){case 0:return[4,e.shellExec.resize.rpc({id:i,userId:u,processViewId:c,size:t})];case 1:return n.sent(),[2]}})})()}),d=v.onData(o),p=!1,f=!1,S.label=1;case 1:S.trys.push([1,6,7,12]),h=(0,O._)(r),S.label=2;case 2:return[4,h.next()];case 3:if(!(p=!(g=S.sent()).done))return[3,5];if(!(x=g.value).ok){if("UNEXPECTED_DISCONNECT"===x.payload.code||"CANCEL"===x.payload.code||"NO_PROCESS_MATCHING_ID"===x.payload.code||"PROCESS_IS_NOT_RUNNING"===x.payload.code)return[3,5];throw Error("[".concat(x.payload.code,"]: ").concat(x.payload.message))}"output"===x.payload.$kind&&b(x.payload.output),S.label=4;case 4:return p=!1,[3,2];case 5:return[3,12];case 6:return y=S.sent(),f=!0,m=y,[3,12];case 7:if(S.trys.push([7,,10,11]),!(p&&null!=h.return))return[3,9];return[4,h.return()];case 8:S.sent(),S.label=9;case 9:return[3,11];case 10:if(f)throw m;return[7];case 11:return[7];case 12:return[2,function(){s.dispose(),d.dispose()}]}})})()},[u,l,b,i,c,v]),(0,n.jsx)(h.View,{css:ef.terminalWrapper,style:{height:f,background:null==d?void 0:d.background},children:(0,n.jsx)(P.AutoGrowingTerminalWrapper,{xterm:v,wrapperResizeRef:g,bufferHeight:m,setOnMessage:_,children:(0,n.jsx)(P.AutoGrowingTerminalInner,{xtermRef:x,visibleHeight:f,maxHeight:o})})})}var eh=e.i(751273),eg=(0,L.cssRecord)({wrapper:[U.rcss.height("100%")],terminalWrapper:[U.rcss.overflow("hidden"),{"& .xterm":[U.rcss.borderRadius(0,0,4,4)]}]});function ev(e){var t=e.data.data,r=e.openPane,i=(0,M.useTerminalTheme)(),a=null;t.isExecuting||(a=0===t.exitCode?(0,n.jsx)(K.default,{}):(0,n.jsx)(eh.Tooltip,{tooltip:"Command exited with: ".concat(t.exitCode),children:(0,n.jsx)(X.default,{})}));var o=!0===t.isExecuting,l=(0,n.jsx)(h.View,{css:eg.wrapper,style:{backgroundColor:null==i?void 0:i.background},children:o?(0,n.jsx)(em,{processId:t.processId,openPane:r,maxHeight:300,interactive:!1}):(0,n.jsx)(ex,{output:t.output,openPane:r})});return(0,n.jsx)(s.EventPane,{left:(0,n.jsx)(ec.default,{size:16}),title:"$ ".concat(t.command),right:a,renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:l})}function ex(e){var t=e.output,r=e.openPane;return 0===t.length?null:(0,n.jsx)(h.View,{css:eg.terminalWrapper,children:(0,n.jsx)(P.AutoGrowingTerminalForHistoricalOutput,{convertEol:!0,maxHeight:300,output:t,openPane:r})})}e.s(["ShellExecution",()=>ev],645143);var ey=e.i(917736),eb=(0,L.cssRecord)({wrapper:[U.rcss.height("100%")],terminalWrapper:[U.rcss.overflow("hidden"),{"& .xterm":[U.rcss.borderRadius(0,0,4,4)]}]});function eS(e){var t,r,i=e.data.data,a=e.openPane,o=(0,M.useTerminalTheme)(),l=null;(null==(t=i.status)?void 0:t.$kind)==="exitCode"&&(l=0===i.status.exitCode?(0,n.jsx)(K.default,{}):(0,n.jsx)(X.default,{}));var u="\r"+i.command.replaceAll("\n","\r\n")+"\r\n";i.output&&(u+="\r\n"+i.output.replaceAll("\n","\r\n"));var c=(null==(r=i.status)?void 0:r.$kind)==="isExecuting";return(0,n.jsx)(s.EventPane,{left:(0,n.jsx)(ey.default,{size:16}),title:c?"Executing SQL query":"Executed SQL query",right:l,renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:(0,n.jsx)(h.View,{css:eb.wrapper,style:{backgroundColor:null==o?void 0:o.background},children:(0,n.jsx)(e_,{output:u,openPane:a})})})}function e_(e){var t=e.output,r=e.openPane;return 0===t.length?null:(0,n.jsx)(h.View,{css:eb.terminalWrapper,children:(0,n.jsx)(P.AutoGrowingTerminalForHistoricalOutput,{maxHeight:300,output:t,openPane:r})})}e.s(["SqlExecution",()=>eS],532717);var ew=e.i(54073),ej=e.i(529810),eT=e.i(12977);function ek(e){var t=e.imagePath,r=e.alt,i=e.className,a=(0,ej.default)().fs,o=(0,ew.useFileAsDataUrl)(a,t),s=o.isLoading,l=o.hasError,u=o.dataSrc;return s?(0,n.jsx)(x.ShadesSurface,{clsx:eT.default.imageEmptyState,align:"center",justify:"center",children:(0,n.jsx)(Z.default,{})}):l||!u?(0,n.jsx)(x.ShadesSurface,{clsx:eT.default.imageEmptyState,align:"center",justify:"center",children:(0,n.jsx)(m.Text,{color:"dimmer",children:"Failed to load image"})}):(0,n.jsx)(ei.default,{src:u,alt:r,className:i,width:200,height:200})}function eD(e){var t=e.imageDescription,r=e.imageUrls;return(0,n.jsx)(h.View,{className:eT.default.container,children:r.length>0?r.map(function(e,r){return(0,n.jsx)(ek,{imagePath:e,alt:"".concat(t," - ").concat(r+1),className:eT.default.image},r)}):(0,n.jsx)(m.Text,{color:"dimmer",children:"No images found"})})}function eC(e){var t=e.data.deps,r=e.openPane,i=t.length>1?"".concat(t.length," system dependencies were installed:"):"A system dependency was installed:";return(0,n.jsx)(s.EventPaneWithPackages,{left:(0,n.jsx)(R.default,{size:16}),title:"Dependencies",onOpenPane:function(){r({type:"developer",data:{tab:["dependencies","nix"]}})},text:i,packageList:t,getPackageIcon:function(){return(0,n.jsx)(R.default,{size:16})}})}function eE(e){var t=e.data.deps,r=e.openPane,i=t.length>1?"".concat(t.length," system dependencies were uninstalled:"):"A system dependency was uninstalled:";return(0,n.jsx)(s.EventPaneWithPackages,{left:(0,n.jsx)(R.default,{size:16}),title:"Dependencies",onOpenPane:function(){r({type:"developer",data:{tab:["dependencies","nix"]}})},text:i,packageList:t,getPackageIcon:function(){return(0,n.jsx)(R.default,{size:16})}})}e.s(["StockImageGeneration",()=>eD],245702),e.s(["SystemDependencyInstall",()=>eC],573201),e.s(["SystemDependencyUninstall",()=>eE],865026)},833694,e=>{e.v({container:"ViewIntegrations-module__LQDTyW__container"})},411582,e=>{e.v({divider:"WebPageVisit-module__dp1tdq__divider",markdown:"WebPageVisit-module__dp1tdq__markdown",root:"WebPageVisit-module__dp1tdq__root",visitContent:"WebPageVisit-module__dp1tdq__visitContent"})},70877,e=>{e.v({showMoreLessButton:"ShowMoreLessBlock-module__DD7eCq__showMoreLessButton"})},36926,e=>{e.v({divider:"WebSearch-module__jv759a__divider",root:"WebSearch-module__jv759a__root",sourceLink:"WebSearch-module__jv759a__sourceLink",sourceLinkText:"WebSearch-module__jv759a__sourceLinkText"})},562125,245462,769741,935382,252788,e=>{"use strict";var t=e.i(276385),n=e.i(516245),r=e.i(653412),i=e.i(646982);function a(e){var a=e.data.modules,o=e.openPane,s=a.length>1?"".concat(a.length," system modules were installed:"):"A system module was installed:";return(0,t.jsx)(r.EventPaneWithPackages,{left:(0,t.jsx)(n.default,{size:16}),title:"Dependencies",onOpenPane:function(){o({type:"developer",data:{tab:["dependencies","nix"]}})},text:s,packageList:a,getPackageIcon:function(e){return(0,t.jsx)(i.default,{module:{name:e}})}})}e.s(["ToolchainInstall",()=>a],562125);var o=e.i(173703),s=e.i(960178),l=e.i(833694),u=function(e){var n=e.name;return(0,t.jsx)(o.ShadesSurface,{p:8,clsx:l.default.container,children:(0,t.jsxs)(s.Text,{children:["Viewed integrations data for ",n,"."]})})};e.s(["ViewIntegrations",()=>u],245462);var c=e.i(988676),d=e.i(625484),p=e.i(211397),f=e.i(916271),m=e.i(411582);function h(e){var n,r=e.url,i=e.favicon,a=e.title,l=e.snippet,u=!!a,h=!(!(n=i).startsWith("https://")&&!n.startsWith("http://")||n.includes("vertexaisearch.cloud.google.com"));return(0,t.jsxs)(o.ShadesSurface,{clsx:m.default.root,children:[u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.View,{row:!0,gap:8,p:8,children:[h?(0,t.jsx)(p.default,{src:i,alt:"Favicon",width:16,height:16}):null,(0,t.jsx)(s.Text,{multiline:!1,children:(0,t.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:a})})]}),(0,t.jsx)(c.DividerH,{clsx:m.default.divider})]}):null,(0,t.jsx)(o.ShadesSurface,{p:8,clsx:m.default.visitContent,gap:2,elevate:!1,children:(0,t.jsx)(f.default,{className:m.default.markdown,useRemarkGfm:!0,lineBreaks:!0,themed:!0,children:l})})]})}e.s(["WebPageVisit",()=>h],769741);var g=e.i(530658),v=e.i(389959),x=e.i(82259),y=e.i(399245),b=e.i(546284),S=e.i(140487),_=e.i(70877);function w(e){var n=e.title,r=e.children,i=e.isShowingMore,a=e.setIsShowingMore,o=e.showMoreDisabled;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.View,{row:!0,align:"center",justify:"space-between",gap:8,children:["string"==typeof n?(0,t.jsx)(s.Text,{variant:"small",color:"dimmer",children:n}):n,o?null:(0,t.jsx)(j,{isExpanded:i,setIsExpanded:a})]}),r]})}function j(e){var n=e.isExpanded,r=e.setIsExpanded;return(0,t.jsx)(S.Button,{text:n?"Show less":"Show more",variant:"underlinedOnHover",size:"small",clsx:_.default.showMoreLessButton,onClick:function(){return r(function(e){return!e})}})}var T=e.i(163525),k=e.i(480028),D=e.i(36926);function C(e){var n=e.query,r=e.response,i=e.pageResults,a=(0,g._)((0,v.useState)(!1),2),l=a[0],u=a[1],p=r.length>400&&!l?r.slice(0,400)+" …":r;return(0,t.jsxs)(o.ShadesSurface,{clsx:D.default.root,children:[(0,t.jsx)(o.ShadesSurface,{p:8,clsx:D.default.heading,elevate:!1,children:(0,t.jsx)(d.View,{shrink:!0,children:(0,t.jsx)(s.Text,{multiline:!1,children:n})})}),(0,t.jsx)(c.DividerH,{clsx:D.default.divider}),(0,t.jsxs)(o.ShadesSurface,{py:8,px:12,gap:8,elevate:!1,children:[(0,t.jsx)(w,{title:e.searchType===x.WebSearchType.WEB_SEARCH_TYPE_REPLIT_DOCUMENTATION?"Replit documentation search results":"Web search results",isShowingMore:l,setIsShowingMore:u,children:(0,t.jsx)(d.View,{clsx:D.default.resultText,gap:8,children:(0,t.jsx)(T.MessageMarkdown,{text:p})})}),i.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.DividerH,{clsx:D.default.divider}),(0,t.jsx)(E,{pageResults:i})]}):null]})]})}function E(e){var n=e.pageResults,r=(0,g._)((0,v.useState)(!1),2),i=r[0],a=r[1],o=n.length>5&&!i?n.slice(0,5):n;return(0,t.jsx)(w,{title:(0,t.jsxs)(d.View,{row:!0,align:"center",gap:8,children:[(0,t.jsx)(y.default,{color:k.tokens.foregroundDimmer}),(0,t.jsxs)(s.Text,{variant:"small",color:"dimmer",children:[n.length," ",(0,b.default)("source",n.length)]})]}),isShowingMore:i,setIsShowingMore:a,children:(0,t.jsx)(d.View,{gap:4,children:o.map(function(e){return(0,t.jsxs)(d.View,{row:!0,align:"center",gap:8,children:[(0,t.jsx)(d.View,{shrink:!0,children:(0,t.jsx)("a",{className:D.default.sourceLink,href:e.url,target:"_blank",rel:"noopener noreferrer",children:(0,t.jsx)(s.Text,{multiline:!1,clsx:D.default.sourceLinkText,children:e.title})})}),(0,t.jsx)(s.Text,{variant:"small",color:"dimmer",multiline:!1,children:new URL(e.url).hostname.replace("www.","")})]},e.url)})})})}e.s(["WebSearch",()=>C],935382);var A=e.i(394212),R=e.i(297083),I=e.i(817556),P=e.i(299798),M=e.i(762211),O=e.i(818976),V=e.i(446530),N=e.i(613355);function B(){}var L=(0,V.cssRecord)({terminalWrapper:[N.rcss.overflow("hidden"),{"& .xterm":[N.rcss.borderRadius(0,0,4,4)]}]});function U(e){var n=e.workflowRunState,r=e.currentUserId,i=e.openPane,a=e.maxHeight,o=void 0===a?300:a,s=(0,v.useId)(),l=(0,O.useTerminalTheme)(),u=n.runId,c=n.tasks.findIndex(function(e){var t;return(null==(t=e.metadata)?void 0:t.task)==="shell.exec"}),p=(0,M.useAutoGrowingXTerm)({maxHeight:o,openPane:i}),f=p.visibleHeight,m=p.bufferHeight,h=p.wrapperResizeRef,x=p.xterm,y=p.xtermRef,b=(0,g._)((0,v.useState)(null),2),S=b[0],_=b[1],w=(0,v.useCallback)(function(e){return _(function(){return e}),function(){}},[]),j=(0,v.useRef)(!1);return(0,P.usePid2)(function(e,t){var n=t.signal;return(0,R._)(function(){var t,i,a,o,l,d,p,f,m,h;return(0,I._)(this,function(g){switch(g.label){case 0:if(j.current||!x||!S)return[2];i=(t=e.workflows.connectToTask.stream({runId:u,taskIdx:c,userId:r,processViewId:s},{signal:n})).resReadable,a=t.reqWritable,j.current=!0,a.write({$kind:"resize",size:x.getSize()}),o=!1,l=!1,g.label=1;case 1:g.trys.push([1,6,7,12]),p=(0,A._)(i),g.label=2;case 2:return[4,p.next()];case 3:if(!(o=!(f=g.sent()).done))return[3,5];if(!(m=f.value).ok){if("UNEXPECTED_DISCONNECT"===m.payload.code||"CANCEL"===m.payload.code||"NO_MATCHING_TASK_STATE"===m.payload.code)return[3,5];throw Error("[".concat(m.payload.code,"] ").concat(m.payload.message))}"output"===m.payload.$kind&&S(m.payload.chunk),g.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return h=g.sent(),l=!0,d=h,[3,12];case 7:if(g.trys.push([7,,10,11]),!(o&&null!=p.return))return[3,9];return[4,p.return()];case 8:g.sent(),g.label=9;case 9:return[3,11];case 10:if(l)throw d;return[7];case 11:return[7];case 12:return a.close(),[2]}})})()},[u,c,S,x,r,s]),(0,t.jsx)(d.View,{css:L.terminalWrapper,style:{height:f,background:null==l?void 0:l.background},children:(0,t.jsx)(M.AutoGrowingTerminalWrapper,{onInput:B,xterm:x,wrapperResizeRef:h,bufferHeight:m,setOnMessage:w,onResizeTerminal:B,children:(0,t.jsx)(M.AutoGrowingTerminalInner,{xtermRef:y,visibleHeight:f,maxHeight:o})})})}e.s(["default",()=>U],252788)},776324,e=>{e.v({files:"SearchFilesystem-module__zrfULG__files"})},296038,e=>{e.v({button:"ToolUse-module__GDLg6G__button",iconSurface:"ToolUse-module__GDLg6G__iconSurface",label:"ToolUse-module__GDLg6G__label",openIcon:"ToolUse-module__GDLg6G__openIcon",toolUse:"ToolUse-module__GDLg6G__toolUse"})},250479,959406,64868,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(530658),i=e.i(276385),a=e.i(389959),o=e.i(82259),s=e.i(645674),l=e.i(269848),u=e.i(220743),c=e.i(976926),d=e.i(412887),p=e.i(672320),f=e.i(203576),m=e.i(178815),h=e.i(971372),g=e.i(198820),v=e.i(785669),x=e.i(641654),y=e.i(504186),b=e.i(132183),S=e.i(960008),_=e.i(582752),w=e.i(111328),j=e.i(122757),T=e.i(414018),k=e.i(645143),D=e.i(532717),C=e.i(245702),E=e.i(573201),A=e.i(865026),R=e.i(562125),I=e.i(245462),P=e.i(769741),M=e.i(935382),O=e.i(819906),V=e.i(820228),N=e.i(47503),B=e.i(653412),L=e.i(252788),U=e.i(729122),H=e.i(818976),F=e.i(446530),q=e.i(613355),z=e.i(625484),G=(0,F.cssRecord)({body:[q.rcss.height("100%"),q.rcss.minHeight("100%")]});function W(e){var t=e.data,n=e.openPane,r=t.workflowName,s=t.state,u=(0,U.useWorkflowsRunState)(),c=(0,N.useCurrentUserId)(),d=(0,H.useTerminalTheme)(),p=(0,a.useMemo)(function(){if(!u)return null;var e=Object.values(u).filter(function(e){return e.workflow.name===r});return 0===e.length?null:e.sort(function(e,t){return t.startTime-e.startTime})[0]},[r,u]);if(s===o.EventState.IN_PROGRESS)return(0,i.jsx)(z.View,{p:8,align:"center",children:(0,i.jsx)(l.default,{})});var f=(0,i.jsx)(z.View,{css:G.body,style:{backgroundColor:null==d?void 0:d.background},children:p&&c?(0,i.jsx)(L.default,{workflowRunState:p,currentUserId:c,openPane:n}):null});return(0,i.jsx)(B.EventPane,{left:t.restart?(0,i.jsx)(V.default,{size:16}):(0,i.jsx)(O.default,{size:16}),title:r,onOpenPane:function(){return n({type:"runnerOutput"})},renderChildrenOnlyWhenInView:!0,children:f})}var K=e.i(546284);e.i(282890);var Y=e.i(66718);function Z(e){return{type:(0,Y.getPaneTypeForFile)({path:e}),data:{path:e}}}e.s(["getPaneForFile",()=>Z],959406);var $=e.i(140487),X=e.i(630818),Q=e.i(960178),J=e.i(776324);function ee(e){return 0===e.resultFileNames.length?(0,i.jsx)(Q.Text,{variant:"small",color:"dimmer",children:"No files found"}):(0,i.jsxs)(z.View,{gap:4,px:4,children:[(0,i.jsxs)(Q.Text,{variant:"small",color:"dimmer",children:["Found ",(0,K.default)("file",e.resultFileNames.length,!0)]}),(0,i.jsx)(z.View,{row:!0,gap:6,align:"start",clsx:J.default.files,children:e.resultFileNames.map(function(t){return(0,i.jsx)($.Button,{size:"small",onClick:function(){return e.openPane(Z(t))},iconLeft:(0,i.jsx)(X.default,{size:12,path:t}),text:t,iconRight:(0,i.jsx)(u.default,{})},t)})})]})}var et=e.i(163525),en=e.i(173703),er=(0,a.memo)(function(e){return(0,i.jsx)(en.ShadesSurface,{elevate:"2x",br:8,p:8,children:(0,i.jsx)(et.MessageMarkdown,{text:e.thoughts})})});function ei(e){var n=e.data,r=e.openPane;switch(null==n?void 0:n.$kind){case"shellExecutionData":return(0,i.jsx)(k.ShellExecution,{data:n,openPane:r});case"packagerInstallData":return(0,i.jsx)(S.PackagerInstall,{data:n,openPane:r});case"packagerUninstallData":return(0,i.jsx)(_.PackagerUninstall,{data:n,openPane:r});case"systemDependencyInstallData":return(0,i.jsx)(E.SystemDependencyInstall,{data:n,openPane:r});case"systemDependencyUninstallData":return(0,i.jsx)(A.SystemDependencyUninstall,{data:n,openPane:r});case"toolchainInstallData":return(0,i.jsx)(R.ToolchainInstall,{data:n,openPane:r});case"screenshotData":return(0,i.jsx)(j.Screenshot,{data:n});case"workflowsStartToolData":case"workflowsRestartToolData":case"workflowsSetRunConfigToolData":return(0,i.jsx)(W,{data:n,openPane:r});case"createPostgresqlDatabaseData":return(0,i.jsx)(g.CreatePostgreSQLDatabase,{openPane:r});case"sqlExecutionData":return(0,i.jsx)(D.SqlExecution,{data:n,openPane:r});case"executedSandboxedCodeData":return(0,i.jsx)(v.ExecutedSandboxedCode,{data:n,openPane:r});case"webSearchData":return(0,i.jsx)(M.WebSearch,(0,t._)({},n.data));case"webPageVisitData":return(0,i.jsx)(P.WebPageVisit,(0,t._)({},n.data));case"imageGenerationData":return(0,i.jsx)(y.ImageGeneration,(0,t._)({},n.data));case"generateMediaData":return(0,i.jsx)(x.GenerateMedia,(0,t._)({},n));case"stockImageData":return(0,i.jsx)(C.StockImageGeneration,(0,t._)({},n.data));case"searchFilesystemData":return(0,i.jsx)(ee,{resultFileNames:n.resultFileNames,openPane:r});case"samplingEvent":return(0,i.jsx)(w.SamplingEvent,{data:n});case"thoughts":return(0,i.jsx)(er,(0,t._)({},n));case"searchIntegrationsData":return(0,i.jsx)(T.SearchIntegrations,(0,t._)({},n.data));case"viewIntegrationData":return(0,i.jsx)(I.ViewIntegrations,(0,t._)({},n.data));case"mcpToolData":return(0,i.jsx)(b.MCPToolResult,(0,t._)({},n.data));default:if((null==n?void 0:n.state)===o.EventState.IN_PROGRESS)return(0,i.jsx)(ea,{});return null}}function ea(){return(0,i.jsx)(z.View,{align:"center",justify:"center",px:16,py:48,children:(0,i.jsx)(l.default,{})})}var eo=e.i(389503),es=e.i(509908);function el(e){return!!e&&"figma"===e.toLowerCase()}function eu(e,t){var n,r,i,a;return r=(n={inProgress:t,serverName:null==e?void 0:e.serverName,toolName:null==e?void 0:e.toolName}).inProgress,i=n.serverName,a=n.toolName,"figma"===i?"".concat(r?"Using":"Used"," Figma MCP (Beta)"):"".concat(r?"Using":"Used"," ").concat(i||"MCP"," MCP").concat(a?" - ".concat(a):"")}e.s(["getMCPToolSummaryFromData",()=>eu,"isFigmaMCPTool",()=>el],64868);var ec=e.i(480028),ed=e.i(907371),ep=e.i(296038);function ef(e){var t=e.toolDataKind,n=e.summary,r=e.icon,a=n.replace(/`([^`]+)`/g,"$1");return(0,i.jsxs)(z.View,{row:!0,align:"center",gap:8,grow:!0,shrink:!0,children:[(0,i.jsx)(ey,{children:null!=r?r:(0,i.jsx)(m.ToolDataIcon,{color:ec.tokens.foregroundDimmest,kind:t,size:16})}),(0,i.jsx)(z.View,{align:"start",grow:!0,shrink:!0,children:(0,i.jsx)(Q.Text,{multiline:!1,color:"dimmest",showTooltipOnTruncate:!0,children:a})})]})}var em=(0,a.memo)(function(e){if(!e.toolDataKind)return(0,i.jsx)(ex,{toolName:e.toolName,summary:e.summary});if("skillLoadedData"===e.toolDataKind)return(0,i.jsx)(ev,{toolDataKind:e.toolDataKind,summary:e.summary});switch(null==(h=e.data)?void 0:h.$kind){case void 0:return(0,i.jsx)(ex,{toolName:e.toolName,summary:e.summary});case"readDirData":case"memoryCompressionData":case"blueprintsSetup":case"setupModelfarmData":case"viewLogsData":case"viewSpecialFiles":case"designGuidelinesData":case"videoGenerationData":case"waitingForBackgroundJobsData":return(0,i.jsx)(ev,{toolDataKind:e.data.$kind,summary:e.summary,state:e.data.state});case"messagedBackgroundAgent":return(0,i.jsx)(c.MessagedBackgroundAgent,{data:e.data.data,state:e.data.state});case"subagentReportResultData":return(0,i.jsx)(p.SubagentReportResult,{data:e.data.data,state:e.data.state});case"reportAgentIssueData":return(0,i.jsx)(d.ReportAgentIssue,{state:e.data.state});case"readFileData":var r,a=e.data.data.filePath;return(0,i.jsx)(eg,{toolDataKind:e.toolDataKind,summary:e.summary,label:"Open file",onClick:function(){e.openPane(Z(a))}});case"fileEditData":var l=e.data,u=l.path,f=l.diff;if(l.state===o.EventState.IN_PROGRESS)return(0,i.jsx)(ex,{toolName:e.toolName,summary:e.summary});return(0,i.jsx)(eg,{toolDataKind:e.toolDataKind,summary:e.summary,label:"View changes",onClick:function(){e.openPane({type:"diff",data:{type:"rawPatch",diffString:f,filePath:u}})}});case"createFileData":var m=e.data.path;return(0,i.jsx)(eg,{toolDataKind:e.toolDataKind,summary:e.summary,label:"Open file",onClick:function(){e.openPane(Z(m))}});case"setupObjectStorageData":return(0,i.jsx)(eg,{toolDataKind:e.toolDataKind,summary:e.summary,label:"Open Object Storage",onClick:function(){e.openPane({type:"objectStorage"})}});case"createPostgresqlDatabaseData":return(0,i.jsx)(eg,{toolDataKind:e.toolDataKind,summary:e.summary,label:"View Database",onClick:function(){e.openPane({type:"neon"})}});case"executedSandboxedCodeData":var h,g,v=(null==(g=e.data.data)?void 0:g.description)||e.summary;return(0,i.jsx)(eh,(0,n._)((0,t._)({},e),{summary:v}));case"mcpToolData":if(el(null==(r=e.data.data)?void 0:r.serverName))return(0,i.jsx)(eh,(0,n._)((0,t._)({},e),{icon:(0,i.jsx)(s.default,{color:ec.tokens.foregroundDefault})}));return(0,i.jsx)(eh,(0,t._)({},e));default:return(0,i.jsx)(eh,(0,t._)({},e))}}),eh=(0,a.memo)(function(e){var t="imageGenerationData"===e.toolDataKind||"generateMediaData"===e.toolDataKind,n=(0,r._)((0,a.useState)(t),2),o=n[0],s=n[1],l=e.id,u=e.sessionId,c=e.toolDataKind,d=(0,a.useCallback)(function(){s(function(e){return!e}),o||(0,es.trackAgentAnalyticsEvent)({action:"event_item_expanded",eventId:l,sessionId:u,toolDataKind:c})},[u,l,c,o]);return(0,i.jsx)(f.ExpandableFeedContent,{expanded:o,onToggle:d,triggerContent:(0,i.jsx)(ef,{toolDataKind:e.toolDataKind,summary:e.summary,icon:e.icon}),children:(0,i.jsx)(ei,{data:e.data,openPane:e.openPane})})});function eg(e){return(0,i.jsxs)(ed.Interactive,{variant:"nofill",tag:"button",row:!0,px:4,gap:6,borderRadius:12,align:"center",justify:"space-between",clsx:[ep.default.button,ep.default.toolUse],onClick:e.onClick,children:[(0,i.jsx)(ef,{toolDataKind:e.toolDataKind,summary:e.summary,icon:e.icon}),(0,i.jsxs)(z.View,{row:!0,gap:6,align:"center",children:[(0,i.jsx)(Q.Text,{variant:"small",color:"dimmer",clsx:ep.default.label,children:e.label}),(0,i.jsx)(u.default,{clsx:ep.default.openIcon})]})]})}function ev(e){return e.state===o.EventState.IN_PROGRESS?(0,i.jsx)(eb,{summary:e.summary}):(0,i.jsx)(z.View,{px:4,row:!0,gap:6,align:"center",justify:"space-between",clsx:ep.default.toolUse,children:(0,i.jsx)(ef,{toolDataKind:e.toolDataKind,summary:e.summary,icon:e.icon})})}function ex(e){var t=e.summary.replace(/`([^`]+)`/g,"$1");return(0,i.jsx)(z.View,{px:4,row:!0,gap:6,align:"center",justify:"space-between",clsx:ep.default.toolUse,children:(0,i.jsxs)(z.View,{row:!0,align:"center",gap:8,grow:!0,shrink:!0,children:[(0,i.jsx)(ey,{children:(0,i.jsx)(h.ToolNameIcon,{toolName:e.toolName,color:ec.tokens.outlineStrongest,size:16})}),(0,i.jsx)(z.View,{align:"start",grow:!0,shrink:!0,children:(0,i.jsx)(Q.Text,{multiline:!1,color:"dimmest",showTooltipOnTruncate:!0,children:t})})]})})}function ey(e){var t=e.children,n=e.className,r=e.clsx;return(0,i.jsx)(en.ShadesSurface,{p:4,br:8,clsx:[ep.default.iconSurface,n,r],border:"subtle",align:"center",justify:"center",children:t})}function eb(e){var t=e.summary;return(0,i.jsx)(z.View,{clsx:ep.default.toolUse,px:4,row:!0,gap:6,align:"center",children:(0,i.jsxs)(z.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[(0,i.jsx)(l.default,{color:ec.tokens.foregroundDimmer}),(0,i.jsx)(eo.Summary,{summary:t,color:"dimmer"})]})})}function eS(e){var t=e.summary,n=e.icon;return(0,i.jsx)(z.View,{clsx:ep.default.toolUse,px:4,row:!0,gap:6,align:"center",children:(0,i.jsxs)(z.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[n,(0,i.jsx)(eo.Summary,{summary:t,color:"dimmest"})]})})}e.s(["LoadingToolUse",()=>eb,"OpenableToolUse",()=>eg,"StaticToolUse",()=>ev,"StaticToolUseWithIcon",()=>eS,"TOOL_USE_ICON_SIZE",()=>16,"ToolUse",()=>em,"ToolUseIconSurface",()=>ey],250479)},708874,e=>{e.v({"pulse-blurple":"FeedStatusRow-module__jLbR_G__pulse-blurple",root:"FeedStatusRow-module__jLbR_G__root",slideInEnter:"FeedStatusRow-module__jLbR_G__slideInEnter",slideInEnterActive:"FeedStatusRow-module__jLbR_G__slideInEnterActive",slideInExit:"FeedStatusRow-module__jLbR_G__slideInExit",slideInExitActive:"FeedStatusRow-module__jLbR_G__slideInExitActive",statusTextContainer:"FeedStatusRow-module__jLbR_G__statusTextContainer"})},134663,876216,713295,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(389959),i=e.i(401262),a=e.i(360800),o=e.i(250479),s=e.i(530929),l=["years","months","weeks","days","hours","minutes","seconds"],u=e.i(82259),c=e.i(629536),d=e.i(546284),p=e.i(64868),f="Working";function m(e){var t,n,r,i,a=e.contents.contents;if((null==a?void 0:a.$kind)!=="agentTimelineEventContents")return f;var o=e.state===u.EventState.IN_PROGRESS,m=a.agentTimelineEventContents,h=m.toolName,g=m.toolData;if("screenshot_tool"===h)return"".concat(o?"Taking":"Took"," a screenshot");if("programming_language_install_tool"===h)return"".concat(o?"Configuring":"Configured"," programming environment");if("wait_for_background_jobs"===h)return a.agentTimelineEventContents.message||"Waiting for background jobs";switch(null==g?void 0:g.$kind){case"deployData":return"Suggested publishing project";case"createPostgresqlDatabaseData":return"Created PostgreSQL database";case"sqlExecutionData":return"".concat(o?"Executing":"Executed"," SQL query `").concat(g.sqlExecutionData.command,"`");case"executedSandboxedCodeData":return"".concat(o?"Executing":"Executed"," Python code");case"fileEditData":return"".concat(o?"Editing":"Edited"," `").concat(g.fileEditData.filePath,"`");case"createFileData":return"".concat(o?"Creating":"Created"," `").concat(g.createFileData.filePath,"`");case"readFileData":return"".concat(o?"Reading":"Opened"," `").concat(g.readFileData.filePath,"`");case"readDirData":var v=g.readDirData.path;return"."===v&&(v="home"),"".concat(o?"Reading":"Opened"," `").concat(v,"` directory");case"shellExecutionData":return"".concat(o?"Executing":"Executed"," `").concat(g.shellExecutionData.command,"`");case"toolchainInstallData":return"".concat(o?"Adding":"Added"," support for ").concat(g.toolchainInstallData.modules.map(function(e){return"`".concat(e,"`")}).join(", "));case"packagerInstallData":var x=g.packagerInstallData.inputPackages;if(!o){if(0===x.length)return"Installed dependencies";return"Installed ".concat(x.map(function(e){return"`".concat(e,"`")}).join(", "))}if(0===x.length)return"Installing packages";return"Installing ".concat(x.map(function(e){return"`".concat(e,"`")}).join(", "));case"packagerUninstallData":var y=g.packagerUninstallData.inputPackages;return"Uninstalled ".concat(y.map(function(e){return"`".concat(e,"`")}).join(", "));case"systemDependencyInstallData":return"Installed ".concat(g.systemDependencyInstallData.deps.map(function(e){return"`".concat(e,"`")}).join(", "));case"systemDependencyUninstallData":return"Uninstalled ".concat(g.systemDependencyUninstallData.deps.join(", "));case"searchFileData":return"".concat(o?"Searching":"Searched",' "').concat(g.searchFileData.filePath,'" for "').concat(g.searchFileData.query,'"');case"searchFilesystemData":return"".concat(o?"Searching":"Searched",' for "').concat(g.searchFilesystemData.queryDescription,'"');case"screenshotData":return"".concat(o?"Taking":"Took"," a screenshot");case"agentPlanStepBegin":case"planProgressData":case"presentResultsToolData":case"deployConfigData":return null;case"workflowsStartToolData":return"Started `".concat(g.workflowsStartToolData.name,"`");case"workflowsRestartToolData":return"Restarted `".concat(g.workflowsRestartToolData.name,"`");case"workflowsStopToolData":return"Stopped `".concat(g.workflowsStopToolData.name,"`");case"workflowsSetRunConfigToolData":var b=g.workflowsSetRunConfigToolData,S=b.name,_=b.command;if(o||0===S.length||0===_.length)return"Configuring run";return"Configured `".concat(S,"` to run `").concat(_,"`");case"workflowsRemoveRunConfigToolData":return"Removed configuration for `".concat(g.workflowsRemoveRunConfigToolData.name,"`");case"blueprintsSetup":var w=[],j=!0,T=!1,k=void 0;try{for(var D,C=g.blueprintsSetup.blueprintData[Symbol.iterator]();!(j=(D=C.next()).done);j=!0){var E=D.value;""!==E.displayName.trim()&&w.push(E.displayName)}}catch(e){T=!0,k=e}finally{try{j||null==C.return||C.return()}finally{if(T)throw k}}if(0===w.length)return null;return"Integrating with ".concat(w.map(function(e){return"`".concat(e,"`")}).join(", "));case"webSearchData":var A=g.webSearchData,R=A.searchType,I=A.query,P=e.state===u.EventState.IN_PROGRESS;if(R===u.WebSearchType.WEB_SEARCH_TYPE_REPLIT_DOCUMENTATION)return P?"Searching Replit documentation":'Searched Replit documentation for "'.concat(I,'"');return P?"Searching the web":'Searched the web for "'.concat(I,'"');case"samplingEvent":var M=g.samplingEvent.trajectories.length;if(e.state===u.EventState.IN_PROGRESS)return"Exploring ".concat(M," potential solutions");return"Explored ".concat(M," potential solutions");case"webPageVisitData":return"Visited ".concat(g.webPageVisitData.url);case"imageGenerationData":if(o)return(null==(n=g.imageGenerationData.imageDescription)?void 0:n.trim())?"Generating an image of ".concat(g.imageGenerationData.imageDescription.toLowerCase(),"..."):"Generating image...";return(null==(t=g.imageGenerationData.imageDescription)?void 0:t.trim())?"Generated an image of ".concat(g.imageGenerationData.imageDescription.toLowerCase(),"."):"Generated image.";case"videoGenerationData":if(o)return(null==(i=g.videoGenerationData.videoDescription)?void 0:i.trim())?"Generating a video of ".concat(g.videoGenerationData.videoDescription.toLowerCase()):"Generating video";return(null==(r=g.videoGenerationData.videoDescription)?void 0:r.trim())?"Generated a video of ".concat(g.videoGenerationData.videoDescription.toLowerCase()):"Generated video";case"stockImageData":var O=g.stockImageData,V=O.numberOfImages,N=O.imageDescription;return"Found ".concat(V," stock image").concat(1===V?"":"s"," of ").concat(N.toLowerCase(),".");case"generateMediaData":var B=g.generateMediaData.media.length;if(o)return"Generating ".concat(B," image").concat(1===B?"":"s");return"Generated ".concat(B," image").concat(1===B?"":"s");case"waitingForBackgroundJobsData":if(o)return"Waiting for background jobs to complete";var L=g.waitingForBackgroundJobsData.actualWaitTimeSeconds;if(!L)return"Waited for background jobs to complete";return"Waited ".concat(function(e){if(e<60)return(0,d.default)("second",e,!0);var t=Math.floor(e/60),n=e%60;return 0===n?(0,d.default)("minute",t,!0):"".concat((0,d.default)("minute",t,!0)," ").concat((0,d.default)("second",n,!0))}(L)," for background jobs to complete");case"memoryCompressionData":if(e.state===u.EventState.IN_PROGRESS)return"Optimizing ".concat(c.AGENT_NAME," memory");return"Optimized ".concat(c.AGENT_NAME," memory");case"thoughts":var U=g.thoughts.summary;if(e.state===u.EventState.IN_PROGRESS)return U||"Thinking";var H=Math.max(1,Math.round(g.thoughts.totalTimeTakenMs/1e3)),F=null!=U?U:"Finished thinking";if(H>3){var q=function(e,t){if(arguments.length<1)throw TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=(null==t?void 0:t.format)||l,r=(null==t?void 0:t.locale)||s.default,i=(null==t?void 0:t.zero)||!1,a=(null==t?void 0:t.delimiter)||" ";return n.reduce(function(t,n){var a="x".concat(n.replace(/(^.)/,function(e){return e.toUpperCase()}));return"number"==typeof e[n]&&(i||e[n])?t.concat(r.formatDistance(a,e[n])):t},[]).join(a)}({seconds:H});return"".concat(F," (").concat(q,")")}return F;case"setupObjectStorageData":return"Created a new Object Storage bucket";case"setupModelfarmData":return"Integrated with Replit AI Integrations";case"viewLogsData":if(g.viewLogsData.webviewConsole&&g.viewLogsData.workflows)return"Checked console and system logs";if(g.viewLogsData.webviewConsole)return"Checked console logs";if(g.viewLogsData.workflows)return"Checked system logs";else if(g.viewLogsData.lsp)return"Checked code issues";else return"Checked logs";case"viewSpecialFiles":if(g.viewSpecialFiles.fileType===u.SpecialFileType.LOG_FILE)return"Reading log files in detail";return"Analyzing files";case"designGuidelinesData":return"".concat(o?"Generating":"Generated"," design guidelines");case"searchIntegrationsData":return"".concat(o?"Searching":"Searched"," Replit's integrations for \"").concat(g.searchIntegrationsData.query,'"');case"viewIntegrationData":return"".concat(o?"Viewing":"Viewed"," ").concat(g.viewIntegrationData.name," integration");case"mcpToolData":return(0,p.getMCPToolSummaryFromData)(g.mcpToolData,o);case"messagedBackgroundAgent":return o?"Running background task":"Ran background task";case"subagentReportResultData":return o?"Generating response":"Generated response";case"reportAgentIssueData":return o?"Sending issue report to Replit Team":"Sent issue report to Replit Team";case"skillLoadedData":return"Loaded ".concat(g.skillLoadedData.skillName," skill");default:return o?f:null}}e.s(["DEFAULT_IN_PROGRESS_EVENT_SUMMARY",()=>f,"getToolUseSummary",()=>m],876216);var h=e.i(389503);e.i(925218);var g=e.i(641555);function v(e){return(0,g.useObservableMemo)(function(){return null==e?void 0:e.reduce(x,1)},[e],{default:{summary:null,startedAt:null,toolDataKind:null}})}var x={direction:"reverse",state:{summary:null,startedAt:null,toolDataKind:null},reducer:function(e,t){t.summary=e.state===u.EventState.IN_PROGRESS?m(e):null;var n,r,i=e.contents.contents,a=(null==i?void 0:i.$kind)==="agentTimelineEventContents"&&null!=(r=null==(n=i.agentTimelineEventContents.toolData)?void 0:n.$kind)?r:null;return t.startedAt="thoughts"===a?e.created:null,t.toolDataKind=t.summary&&"messageData"!==a?a:null,!1}};e.s(["useInProgressEventData",()=>v],713295);var y=e.i(480028),b=e.i(625484),S=e.i(708874);function _(e){var t=e.session,a=e.inline,o=e.slideIn,s=v(t).summary,l=(0,r.useRef)(null),u=(0,n.jsx)(w,{inProgressEventSummary:null!=s?s:f,inline:void 0!==a&&a,innerRef:l});return void 0!==o&&o?(0,n.jsx)(i.CSSTransition,{in:!0,appear:!0,timeout:150,classNames:{appear:S.default.slideInEnter,appearActive:S.default.slideInEnterActive,enter:S.default.slideInEnter,enterActive:S.default.slideInEnterActive,exit:S.default.slideInExit,exitActive:S.default.slideInExitActive},nodeRef:l,children:u}):u}function w(e){var t=e.inProgressEventSummary,r=e.inline,i=e.innerRef,s="".concat(t.replace(/`/g,""),"…");return void 0!==r&&r?(0,n.jsxs)(b.View,{innerRef:i,row:!0,gap:8,align:"center",shrink:!0,clsx:S.default.statusTextContainer,children:[(0,n.jsx)(o.ToolUseIconSurface,{children:(0,n.jsx)(a.default,{size:16})}),(0,n.jsx)(j,{text:s})]}):(0,n.jsx)(b.View,{innerRef:i,px:2,pt:4,pb:6,row:!0,align:"center",justify:"space-between",clsx:S.default.root,children:(0,n.jsxs)(b.View,{row:!0,gap:8,align:"center",px:2,shrink:!0,grow:!0,clsx:S.default.statusTextContainer,children:[(0,n.jsx)(o.ToolUseIconSurface,{children:(0,n.jsx)(a.default,{size:16})}),(0,n.jsx)(j,{text:s})]})})}function j(e){var i=e.text,a=(0,t._)((0,r.useState)(""),2),o=a[0],s=a[1];(0,r.useEffect)(function(){if(!i.endsWith("…"))return void s("");var e=0,t=!0,n=setInterval(function(){t?++e>=3&&(t=!1):--e<=0&&(t=!0),s(".".repeat(e))},200);return function(){return clearInterval(n)}},[i]);var l=i.endsWith("…")?i.slice(0,-1)+o:i;return(0,n.jsx)(h.Summary,{summary:l,style:{color:y.tokens.blurpleStrongest}})}e.s(["AnimatedStatusText",()=>j,"FeedStatusRow",()=>_,"FeedStatusRowUI",()=>w],134663)},149448,e=>{"use strict";e.i(925218);var t=e.i(641555);function n(e){return(0,t.useObservableMemo)(function(){return null==e?void 0:e.reduce(r,1)},[e],{default:null})}var r={direction:"reverse",state:{id:null,event:null,state:null,senderType:null},reducer:function(e,t){return t.id=e.id,t.state=e.state,t.event=e,t.senderType=e.sender.type,!1}};e.s(["useLastEvent",()=>n])},583158,250030,705539,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{d:"M13.758 21.082a.75.75 0 0 1 .285 1.473 10.753 10.753 0 0 1-4.085 0 .75.75 0 0 1 .285-1.473 9.251 9.251 0 0 0 3.515 0ZM19.658 17.188a.75.75 0 0 1 1.242.842 10.756 10.756 0 0 1-2.903 2.892.75.75 0 0 1-.836-1.245 9.25 9.25 0 0 0 2.497-2.489ZM3.283 16.957a.75.75 0 0 1 1.04.204 9.252 9.252 0 0 0 2.488 2.497.75.75 0 0 1-.84 1.242 10.755 10.755 0 0 1-2.892-2.903.75.75 0 0 1 .204-1.04ZM14.47 9.47a.75.75 0 0 1 1.06 1.06l-4 4a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 0 1 1.06-1.06L11 12.94l3.47-3.47ZM1.446 9.958a.75.75 0 1 1 1.473.285 9.251 9.251 0 0 0 0 3.515.751.751 0 0 1-1.473.285 10.752 10.752 0 0 1 0-4.085ZM21.676 9.364a.75.75 0 0 1 .879.594 10.754 10.754 0 0 1 0 4.085.75.75 0 0 1-1.473-.285 9.252 9.252 0 0 0 0-3.515.75.75 0 0 1 .594-.879ZM16.988 3.3a.75.75 0 0 1 1.042-.2 10.752 10.752 0 0 1 2.892 2.902.75.75 0 0 1-1.245.837 9.251 9.251 0 0 0-2.488-2.497.75.75 0 0 1-.2-1.042ZM6.002 3.079a.75.75 0 0 1 .837 1.244 9.251 9.251 0 0 0-2.497 2.488.75.75 0 0 1-1.242-.84 10.752 10.752 0 0 1 2.902-2.892ZM9.958 1.446a10.752 10.752 0 0 1 4.085 0 .75.75 0 1 1-.285 1.473 9.252 9.252 0 0 0-3.515 0 .75.75 0 0 1-.285-1.473Z"})}))}function o(e){return(0,r.jsxs)(i.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{d:"M13.758 21.082a.75.75 0 0 1 .285 1.473 10.753 10.753 0 0 1-4.085 0 .75.75 0 0 1 .285-1.473 9.251 9.251 0 0 0 3.515 0ZM19.658 17.188a.75.75 0 0 1 1.242.842 10.756 10.756 0 0 1-2.903 2.892.75.75 0 0 1-.836-1.245 9.25 9.25 0 0 0 2.497-2.489ZM3.283 16.957a.75.75 0 0 1 1.04.204 9.252 9.252 0 0 0 2.488 2.497.75.75 0 0 1-.84 1.242 10.755 10.755 0 0 1-2.892-2.903.75.75 0 0 1 .204-1.04Z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M10.024 7.25c.31.004.613.091.878.25l4.995 2.997A1.753 1.753 0 0 1 16.752 12a1.75 1.75 0 0 1-.854 1.503v-.001l-4.995 2.995h.001a1.75 1.75 0 0 1-2.654-1.504v-5.99a1.751 1.751 0 0 1 1.774-1.753Zm-.02 1.5a.252.252 0 0 0-.22.124A.253.253 0 0 0 9.75 9v5.998a.25.25 0 0 0 .379.215l.002-.001 4.997-2.997.002-.001a.253.253 0 0 0 .122-.215.25.25 0 0 0-.122-.215h-.002L10.13 8.786l-.002-.001a.25.25 0 0 0-.125-.036Z",clipRule:"evenodd"}),(0,r.jsx)("path",{d:"M1.446 9.958a.75.75 0 1 1 1.473.285 9.251 9.251 0 0 0 0 3.515.751.751 0 0 1-1.473.285 10.752 10.752 0 0 1 0-4.085ZM21.676 9.364a.75.75 0 0 1 .879.594 10.754 10.754 0 0 1 0 4.085.75.75 0 0 1-1.473-.285 9.252 9.252 0 0 0 0-3.515.75.75 0 0 1 .594-.879ZM16.988 3.3a.75.75 0 0 1 1.042-.2 10.752 10.752 0 0 1 2.892 2.902.75.75 0 0 1-1.245.837 9.251 9.251 0 0 0-2.488-2.497.75.75 0 0 1-.2-1.042ZM6.002 3.079a.75.75 0 0 1 .837 1.244 9.251 9.251 0 0 0-2.497 2.488.75.75 0 0 1-1.242-.84 10.752 10.752 0 0 1 2.902-2.892ZM9.958 1.446a10.752 10.752 0 0 1 4.085 0 .75.75 0 1 1-.285 1.473 9.252 9.252 0 0 0-3.515 0 .75.75 0 0 1-.285-1.473Z"})]}))}function s(e){return(0,r.jsxs)(i.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{d:"M13.567 20.1a.75.75 0 0 1 .285 1.472 9.752 9.752 0 0 1-3.704 0 .75.75 0 0 1 .285-1.472c1.035.2 2.1.2 3.134 0ZM18.831 16.627a.75.75 0 1 1 1.241.842 9.751 9.751 0 0 1-2.633 2.622.75.75 0 1 1-.835-1.244 8.254 8.254 0 0 0 2.227-2.22ZM4.113 16.398a.75.75 0 0 1 1.04.204 8.252 8.252 0 0 0 2.22 2.227.75.75 0 0 1-.842 1.242 9.753 9.753 0 0 1-2.622-2.633.75.75 0 0 1 .204-1.04ZM12 6.25a.75.75 0 0 1 .75.75v4.536l3.585 1.793a.75.75 0 0 1-.67 1.342l-4-2A.75.75 0 0 1 11.25 12V7a.75.75 0 0 1 .75-.75Z"}),(0,r.jsx)("path",{d:"M12 2.25a9.751 9.751 0 0 1 9.563 11.652.75.75 0 0 1-1.471-.293 8.25 8.25 0 0 0-7.785-9.853L12 3.75a9 9 0 0 0-6.22 2.53l-.97.97H8a.75.75 0 0 1 0 1.5H3a.752.752 0 0 1-.133-.013l-.016-.003c-.014-.002-.026-.008-.04-.011-.033-.009-.066-.017-.098-.03-.03-.013-.056-.029-.083-.045a.746.746 0 0 1-.16-.118.746.746 0 0 1-.12-.16c-.015-.028-.031-.055-.043-.084A.748.748 0 0 1 2.25 8V3a.75.75 0 0 1 1.5 0v3.19l.988-.989a10.502 10.502 0 0 1 7.26-2.951H12ZM3 11.25a.75.75 0 0 1 .75.75c0 .49 0 .918.145 1.541a.75.75 0 0 1-1.461.338C2.249 13.082 2.25 12.51 2.25 12a.75.75 0 0 1 .75-.75Z"})]}))}e.s(["default",()=>a],583158),e.s(["default",()=>o],250030),e.s(["default",()=>s],705539)},115820,613007,331820,546469,683736,e=>{"use strict";var t,n,r=e.i(297083),i=e.i(530658),a=e.i(817556),o=e.i(389959),s=e.i(199674),l=e.i(878420),u=e.i(569384),c=e.i(973245),d=e.i(951262);function p(){var e=(0,u._)(["\n  mutation CreateAgentRollbackPreview(\n    $input: CreateAgentRollbackPreviewInput!\n  ) {\n    createAgentRollbackPreview(input: $input) {\n      ... on CreateAgentRollbackPreviewResult {\n        preview {\n          id\n          url\n          expiresAt\n        }\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var f={},m=(0,c.gql)(p()),h=e.i(613141);function g(){var e=(0,u._)(["\n  subscription GetAgentRollbackPreviewStatus($input: RollbackPreviewInput!) {\n    getAgentRollbackPreviewStatus(input: $input) {\n      __typename\n      ... on RollbackPreviewOutput {\n        status\n        host\n        errorMessage\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return g=function(){return e},e}var v={},x=(0,c.gql)(g());function y(e){var t=(0,l._)({},v,e);return h.useSubscription(x,t)}e.s(["useGetAgentRollbackPreviewStatusSubscription",()=>y],613007);var b=e.i(791729),S=e.i(424746),_=e.i(399344),w=e.i(678420);function j(e){var t=e.secrets,n=e.replId,s=(0,i._)((0,o.useState)(null),2),l=s[0],u=s[1],c=T({secrets:t,replId:n});return(0,o.useEffect)(function(){(0,r._)(function(){return(0,a._)(this,function(e){switch(e.label){case 0:return[4,c()];case 1:return u.apply(void 0,[e.sent()]),[2]}})})()},[c]),{devSecrets:l}}function T(e){var t=e.secrets,n=e.replId,s=(0,i._)((0,w.useWorkspaceAndReplLinkedSecretsLazyQuery)({variables:{replId:n}}),1)[0];return(0,o.useCallback)(function(){return(0,r._)(function(){var e,n,r,o,l,u,c,d,p,f,m,h,g,v,x,y,b,S,_;return(0,a._)(this,function(a){switch(a.label){case 0:return[4,t.read()];case 1:return n=a.sent(),r=new Map,[4,s()];case 2:if((null==(o=a.sent().data)?void 0:o.getRepl.__typename)==="Repl"&&o.getRepl.sharedSecretLinks&&(null==(e=o.currentUser)?void 0:e.secrets.__typename)==="SharedSecretConnection"){l=o.currentUser.secrets.items,u=!0,c=!1,d=void 0;try{for(p=function(){var e=m.value,t=l.find(function(t){return t.id===e.secret.id});t&&r.set(e.alias,t.value)},f=o.getRepl.sharedSecretLinks[Symbol.iterator]();!(u=(m=f.next()).done);u=!0)p()}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}h=!0,g=!1,v=void 0;try{for(x=n.entries()[Symbol.iterator]();!(h=(y=x.next()).done);h=!0)S=(b=(0,i._)(y.value,2))[0],_=b[1],r.set(S,_)}catch(e){g=!0,v=e}finally{try{h||null==x.return||x.return()}finally{if(g)throw v}}return[2,r]}})})()},[s,t])}e.s(["useDevSecrets",()=>j,"useGetDevSecrets",()=>T],331820);var k=e.i(311106),D=e.i(222342),C=e.i(207237);(t={}).Idle="idle",t.Building="building",t.Ready="ready",t.Creating="creating";var E=new Map;function A(e){var t,n,u=e.commitId,c=e.enableHelium,p=e.date,h=(0,C.default)(),g=T({secrets:(0,_.useSecretsService)(),replId:h}),v=(0,S.useNeonDevelopmentDatabase)(),x=v.database,w=v.loading,j=x?x.projectId:null,A=(0,D.default)().showError,R=(0,i._)((0,o.useState)(null),2),I=R[0],P=R[1],M=(0,i._)((0,o.useState)(!1),2),O=M[0],V=M[1],N=(0,i._)((0,o.useState)(E.get(u)?{status:"ready",url:null!=(n=E.get(u))?n:""}:{status:"idle"}),2),B=N[0],L=N[1],U=(0,o.useCallback)(function(e,t){(0,k.sendSentryError)({context:"PreviewAgentCheckpointButton",error:null!=t?t:Error(e),extras:{replId:h}}),A(e),P(e)},[h,A]),H=(0,i._)((t=(0,l._)({},f,void 0),d.useMutation(m,t)),1)[0],F=w||"creating"===B.status||"building"===B.status,q=y({variables:{input:{previewID:"building"===B.status?B.previewId:null}},skip:"building"!==B.status||!B.previewId}),z=q.data,G=q.error;(0,o.useEffect)(function(){G&&(L({status:"idle"}),U("Failed to load preview",G))},[G,U]),(0,o.useEffect)(function(){if(null==z?void 0:z.getAgentRollbackPreviewStatus){var e=z.getAgentRollbackPreviewStatus;"RollbackPreviewOutput"===e.__typename?"success"===e.status&&e.host?L({status:"ready",url:e.host.includes(".localhost")?"http://".concat(e.host):"https://".concat(e.host)}):"fail"===e.status&&L({status:"idle"}):("NotFoundError"===e.__typename||"UnauthorizedError"===e.__typename||"UserError"===e.__typename||"ServiceUnavailable"===e.__typename)&&(L({status:"idle"}),U("Failed to load preview",Error(e.message)))}},[z,U]);var W=(0,o.useCallback)(function(){return(0,r._)(function(){var e,t,n,r,o,s,l,d,f,m,v;return(0,a._)(this,function(a){switch(a.label){case 0:if(F)return[2];return[4,g()];case 1:if(t=a.sent(),n=E.get(u))return L({status:"ready",url:n}),[2];return L({status:"creating"}),r=Array.from(t,function(e){var t=(0,i._)(e,2);return{name:t[0],value:t[1]}}),[4,H({variables:{input:{gitSha:u,replId:h,neonProjectId:j,timestamp:p.toISOString(),envVars:r,enableHelium:c}}})];case 2:if((null==(e=(o=a.sent()).data)?void 0:e.createAgentRollbackPreview.__typename)!=="CreateAgentRollbackPreviewResult")return(null==(s=o.data)?void 0:s.createAgentRollbackPreview.__typename)==="UnauthorizedError"&&((null==(l=o.data)?void 0:l.createAgentRollbackPreview.message)===b.isEligibleForUsageExplanationDetail.NEEDS_SUBSCRIPTION||(null==(d=o.data)?void 0:d.createAgentRollbackPreview.message)===b.isEligibleForUsageExplanationDetail.NEEDS_SUBSCRIPTION_OR_PAYMENT_METHOD)?V(!0):U(null!=(m=null==(f=o.data)?void 0:f.createAgentRollbackPreview.message)?m:"Something went wrong."),L({status:"idle"}),[2];return""===(v=o.data.createAgentRollbackPreview.preview.url)?L({status:"building",previewId:o.data.createAgentRollbackPreview.preview.id}):(L({status:"ready",url:v}),E.set(u,v)),[2]}})})()},[F,g,H,h,j,p,U,u,c]);return{ready:!F,isInCache:E.has(u),loading:"creating"===B.status||"building"===B.status,loadPreview:W,showUpgradeModal:O,setShowUpgradeModal:V,previewState:B,previewUrl:"ready"===B.status?B.url:null,error:I,validPreview:6>(0,s.differenceInDays)(new Date,p)}}e.s(["useAgentCheckpointPreview",()=>A],115820);var R=((n={}).Starter="starter",n.Paid="paid",n);e.s(["UsageIndicatorVariant",()=>R],546469);var I=e.i(304277);function P(){var e=(0,u._)(["\n  query blockDbRollback($replId: String!) {\n    getReplIdBlockDbRollback(input: { replId: $replId }) {\n      __typename\n      ... on GetReplIdBlockDbRollbackOutput {\n        __typename\n        blockAgentCheckpointRollbacks\n        blockDatabasePanePITR\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return P=function(){return e},e}e.i(566901);var M={},O=(0,c.gql)(P());function V(){var e,t,n,r,i=(n={variables:{replId:(0,C.default)()}},r=(0,l._)({},M,n),I.useQuery(O,r)),a=i.data,o=i.loading;return{blockAgentCheckpointRollbacks:(null==a||null==(e=a.getReplIdBlockDbRollback)?void 0:e.__typename)==="GetReplIdBlockDbRollbackOutput"&&a.getReplIdBlockDbRollback.blockAgentCheckpointRollbacks,blockDatabasePanePITR:(null==a||null==(t=a.getReplIdBlockDbRollback)?void 0:t.__typename)==="GetReplIdBlockDbRollbackOutput"&&a.getReplIdBlockDbRollback.blockDatabasePanePITR,loading:o}}e.s(["useIsDbRollbackBlocked",()=>V],683736)},597865,e=>{"use strict";var t=e.i(530658),n=e.i(346715),r=e.i(389959),i=e.i(992785),a=e.i(825118),o=e.i(125674),s=e.i(529810);function l(e){var l,u,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=(0,t._)((0,r.useState)(null),2),f=p[0],m=p[1],h=(0,r.useRef)(null),g=null==(u=null!=(l=d.keepStaleResult)?l:d.refresh)||u,v=(0,r.useCallback)(function(e){(0,i.default)(e,h.current)||(h.current=e,m(e))},[]),x=(0,o.default)(function(){return e},(0,n._)(c)),y=(0,s.default)().git,b=(0,r.useRef)(null),S=(0,r.useCallback)(function(){b.current?b.current():g||v(null);var e=!1;x(y).then(function(t){e||(v(t),b.current=null)}).catch(function(){e||(v({error:a.GitErrors.UNKNOWN}),b.current=null)}),b.current=function(){e=!0,b.current=null,g||v(null)}},[v,x,y,g]);return(0,r.useEffect)(function(){return S()},[S]),(0,r.useEffect)(function(){var e;if(null==(e=d.refresh)||e)return y.onRefresh(S)},[y,S,d.refresh]),f}e.s(["default",()=>l])},778063,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M3.75 4A.25.25 0 0 1 4 3.75h3a.25.25 0 0 1 .25.25v3a.25.25 0 0 1-.25.25H4A.25.25 0 0 1 3.75 7V4ZM4 2.25A1.75 1.75 0 0 0 2.25 4v3c0 .966.784 1.75 1.75 1.75h3A1.75 1.75 0 0 0 8.75 7V4A1.75 1.75 0 0 0 7 2.25H4ZM16.75 4a.25.25 0 0 1 .25-.25h3a.25.25 0 0 1 .25.25v3a.25.25 0 0 1-.25.25h-3a.25.25 0 0 1-.25-.25V4ZM17 2.25A1.75 1.75 0 0 0 15.25 4v3c0 .966.784 1.75 1.75 1.75h3A1.75 1.75 0 0 0 21.75 7V4A1.75 1.75 0 0 0 20 2.25h-3ZM4 16.75a.25.25 0 0 0-.25.25v3c0 .138.112.25.25.25h3a.25.25 0 0 0 .25-.25v-3a.25.25 0 0 0-.25-.25H4ZM2.25 17c0-.966.784-1.75 1.75-1.75h3c.966 0 1.75.784 1.75 1.75v3A1.75 1.75 0 0 1 7 21.75H4A1.75 1.75 0 0 1 2.25 20v-3ZM18 15.25A2.75 2.75 0 0 0 15.25 18v3a.75.75 0 0 0 1.5 0v-3A1.25 1.25 0 0 1 18 16.75h3a.75.75 0 0 0 0-1.5h-3Zm3 5a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V21a.75.75 0 0 1 .75-.75ZM12.75 7a.75.75 0 0 0-1.5 0v3A1.25 1.25 0 0 1 10 11.25H7a.75.75 0 0 0 0 1.5h3A2.75 2.75 0 0 0 12.75 10V7Zm-10.5 5a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75ZM12 2.25a.75.75 0 0 0 0 1.5h.01a.75.75 0 0 0 0-1.5H12Zm0 13a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V16a.75.75 0 0 1 .75-.75Zm4-4a.75.75 0 0 0 0 1.5h1a.75.75 0 0 0 0-1.5h-1Zm5 0a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V12a.75.75 0 0 1 .75-.75ZM12.75 20a.75.75 0 0 0-1.5 0v1a.75.75 0 0 0 1.5 0v-1Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},170938,e=>{e.v({container:"ExpoPreviewSection-module__ufBemW__container",errorState:"ExpoPreviewSection-module__ufBemW__errorState",qrContainer:"ExpoPreviewSection-module__ufBemW__qrContainer",qrInactive:"ExpoPreviewSection-module__ufBemW__qrInactive",qrPlaceholder:"ExpoPreviewSection-module__ufBemW__qrPlaceholder",qrWrapper:"ExpoPreviewSection-module__ufBemW__qrWrapper"})},26118,e=>{e.v({innerCircle:"LoadingSpinner-module__QOuyfW__innerCircle",progressCircle:"LoadingSpinner-module__QOuyfW__progressCircle"})},922084,e=>{e.v({card:"CheckpointCard-module__1K8xAG__card",checkpointStatusText:"CheckpointCard-module__1K8xAG__checkpointStatusText",editableTitle:"CheckpointCard-module__1K8xAG__editableTitle",editableTitleInput:"CheckpointCard-module__1K8xAG__editableTitleInput",noDescription:"CheckpointCard-module__1K8xAG__noDescription",previewIcon:"CheckpointCard-module__1K8xAG__previewIcon",previewLoading:"CheckpointCard-module__1K8xAG__previewLoading",previewOverlay:"CheckpointCard-module__1K8xAG__previewOverlay",previewText:"CheckpointCard-module__1K8xAG__previewText",screenshotContainer:"CheckpointCard-module__1K8xAG__screenshotContainer",statusIcon:"CheckpointCard-module__1K8xAG__statusIcon",statusIconFailed:"CheckpointCard-module__1K8xAG__statusIconFailed",statusIconReverted:"CheckpointCard-module__1K8xAG__statusIconReverted"})},195715,e=>{e.v({confirmationModalPreviewTextContainer:"ConfirmRollbackModal-module__aj-a0G__confirmationModalPreviewTextContainer",confirmationModalScreenshot:"ConfirmRollbackModal-module__aj-a0G__confirmationModalScreenshot",confirmationModalScreenshotContainer:"ConfirmRollbackModal-module__aj-a0G__confirmationModalScreenshotContainer",flexGrowAndShrink:"ConfirmRollbackModal-module__aj-a0G__flexGrowAndShrink",lineHeightOffset:"ConfirmRollbackModal-module__aj-a0G__lineHeightOffset",noScreenshotText:"ConfirmRollbackModal-module__aj-a0G__noScreenshotText",rollbackOptionHeading:"ConfirmRollbackModal-module__aj-a0G__rollbackOptionHeading",rollbackOptionsList:"ConfirmRollbackModal-module__aj-a0G__rollbackOptionsList",statusIconLoading:"ConfirmRollbackModal-module__aj-a0G__statusIconLoading"})},190120,984556,344481,548364,1074,e=>{"use strict";var t=e.i(721281),n=e.i(530658),r=e.i(276385),i=e.i(389959),a=e.i(873667),o=e.i(583158),s=e.i(806685),l=e.i(806930),u=e.i(204977),c=e.i(252204),d=e.i(882848),p=e.i(269848),f=e.i(155119),m=e.i(250030),h=e.i(705539),g=e.i(416298),v=e.i(379334),x=e.i(596139),y=e.i(399344),b=e.i(414761),S=e.i(993796),_=e.i(973519),w=e.i(115820),j=e.i(546469),T=e.i(297083),k=e.i(817556),D=e.i(789277),C=e.i(302973),E=e.i(968323),A=e.i(262664),R=e.i(424746),I=e.i(683736),P=e.i(597865),M=e.i(754458),O=e.i(778063),V=e.i(256758),N=e.i(441329),B=e.i(76430),L=e.i(480028),U=e.i(173703),H=e.i(140487),F=e.i(960178),q=e.i(625484),z=e.i(170938),G=(0,i.memo)(function(e){var t,n,i=e.previewUrl,a=e.onPreviewClick,o=e.isPreviewActive,s=e.isLoading,l=e.error,u=(0,N.useIsInMobileWorkspace)(),d=(0,B.useGetExpoGoURL)(),f=(0,S.useFlag)({controlName:"flag-expo-rollback-preview"}),m=i?d(i):"";t=o&&u?"Open in Expo Go":o?"Preview Active":s?"Loading preview...":"Load Preview";var h=o&&u,g=h&&m?function(){window.location.href=m}:a,v=h?(0,r.jsx)(c.default,{}):(0,r.jsx)(V.default,{});return(n=o?"Scan with Expo Go to see this version on your device":s?"Setting up your preview environment...":"Load preview to scan with Expo Go",f)?l&&!s?(0,r.jsxs)(q.View,{clsx:z.default.container,gap:16,children:[(0,r.jsxs)(U.ShadesSurface,{clsx:[z.default.qrContainer,z.default.errorState],p:16,align:"center",gap:12,elevate:!1,children:[(0,r.jsx)(q.View,{clsx:z.default.qrWrapper,children:(0,r.jsx)(q.View,{clsx:z.default.qrPlaceholder,align:"center",justify:"center",children:(0,r.jsx)(O.default,{size:48})})}),(0,r.jsx)(q.View,{align:"center",gap:8,children:(0,r.jsx)(F.Text,{color:"dimmer",variant:"small",children:l})})]}),(0,r.jsx)(H.Button,{text:"Try Again",onClick:a,iconLeft:(0,r.jsx)(V.default,{}),variant:"outlined"})]}):(0,r.jsxs)(q.View,{clsx:z.default.container,gap:16,children:[(0,r.jsxs)(U.ShadesSurface,{clsx:[z.default.qrContainer,!o&&z.default.qrInactive],p:16,align:"center",gap:12,elevate:!1,children:[(0,r.jsx)(q.View,{clsx:z.default.qrWrapper,children:o&&m?(0,r.jsx)(M.default,{bgColor:L.tokens.backgroundHigher,fgColor:L.tokens.foregroundDefault,size:140,value:m}):(0,r.jsx)(q.View,{clsx:z.default.qrPlaceholder,align:"center",justify:"center",children:s?(0,r.jsx)(p.default,{size:48}):(0,r.jsx)(O.default,{size:48})})}),(0,r.jsx)(q.View,{align:"center",children:(0,r.jsx)(F.Text,{color:"dimmer",variant:"small",children:n})})]}),(0,r.jsx)(H.Button,{text:t,onClick:g,disabled:s||o&&!u,iconLeft:v,variant:h?"default":"outlined",colorway:h?"primary":void 0})]}):(0,r.jsx)(q.View,{clsx:z.default.container,gap:16,children:(0,r.jsxs)(U.ShadesSurface,{clsx:[z.default.qrContainer,z.default.qrInactive],p:16,align:"center",gap:12,elevate:!1,children:[(0,r.jsx)(q.View,{clsx:z.default.qrWrapper,children:(0,r.jsx)(q.View,{clsx:z.default.qrPlaceholder,align:"center",justify:"center",children:(0,r.jsx)(O.default,{size:48})})}),(0,r.jsx)(q.View,{align:"center",children:(0,r.jsx)(F.Text,{color:"dimmer",variant:"small",children:"Rollback preview is coming soon for mobile apps"})})]})})}),W=e.i(26118);function K(e){var t,a=null!=(t=e.size)?t:12,o=(0,n._)((0,i.useState)(0),2),s=o[0],l=o[1],u=a/2,c=2*u*Math.PI;return(0,i.useEffect)(function(){var t,n=Date.now(),r=function(){l(Math.min(1,.9-Math.exp(-1.5*((Date.now()-n)/(1e3*e.estimatedTotalSeconds))))),t=setTimeout(r,100+500*Math.random())};return r(),function(){return clearTimeout(t)}},[e.estimatedTotalSeconds]),(0,r.jsxs)("svg",{width:a,height:a,className:W.default.progressCircle,children:[(0,r.jsx)("circle",{fill:"transparent",stroke:L.tokens.outlineDimmer,strokeWidth:2,r:u-1,cx:u,cy:u}),(0,r.jsx)("circle",{className:W.default.innerCircle,style:{strokeDashoffset:c*(1-s)},stroke:L.tokens.foregroundDimmer,fill:"transparent",strokeWidth:2,strokeDasharray:"".concat(c," ").concat(c),r:u-1,cx:u,cy:u})]})}var Y=e.i(878420),Z=e.i(232841),$=e.i(94516),X=e.i(569384),Q=e.i(973245),J=e.i(304277);e.i(566901);var ee=e.i(951262);function et(){var e=(0,X._)(["\n  query DatabaseUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            neonComputeTime {\n              usage\n            }\n            neonDataStorage {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return et=function(){return e},e}function en(){var e=(0,X._)(["\n  mutation RollbackNeonDatabase($input: RollbackNeonDatabaseInput!) {\n    rollbackNeonDatabase(input: $input) {\n      __typename\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on RollbackNeonDatabaseResult {\n        database {\n          id\n        }\n      }\n    }\n  }\n"]);return en=function(){return e},e}function er(){var e=(0,X._)(["\n  mutation SetNeonHistoryRetentionPeriod(\n    $input: SetNeonDatabaseConfigurationInput!\n  ) {\n    setNeonDatabaseConfiguration(input: $input) {\n      __typename\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on SetNeonDatabaseConfigurationResult {\n        database {\n          id\n          historyRetentionSeconds\n        }\n      }\n    }\n  }\n"]);return er=function(){return e},e}var ei={},ea=(0,Q.gql)(et());function eo(e){var t=(0,Y._)({},ei,e);return J.useQuery(ea,t)}var es=(0,Q.gql)(en());function el(e){var t=(0,Y._)({},ei,e);return ee.useMutation(es,t)}var eu=(0,Q.gql)(er());function ec(e){var t=(0,Y._)({},ei,e);return ee.useMutation(eu,t)}e.s(["useDatabaseUsageSectionCurrentUserQuery",()=>eo,"useRollbackNeonDatabaseMutation",()=>el,"useSetNeonHistoryRetentionPeriodMutation",()=>ec],984556);var ed=e.i(917736),ep=e.i(17036),ef=e.i(207237),em=e.i(830675);function eh(e,t,n){return em.withScope(function(r){r.setTag("neon-pane",!0),r.setTag("context",t),n&&r.setExtras(n),em.captureException(e)}),e}var eg=e.i(446530),ev=e.i(613355),ex=e.i(818503),ey=e.i(85742),eb=e.i(739521),eS=e.i(12034),e_=e.i(396776),ew=(0,eg.cssRecord)({title:ev.rcss.pb(8),card:[ev.rcss.p(8),ev.rcss.borderRadius(8),{outline:"1px solid transparent"}],error:[ev.rcss.color.accentNegativeStronger],dialogMessage:[ev.rcss.flex.growAndShrink(1)],dialogButtonContainer:[ev.rcss.display.flex,ev.rcss.flex.row,ev.rcss.justify.end],list:[ev.rcss.fontSize(12),{li:[ev.rcss.pt(1),{"&:before":[ev.rcss.mr(4),{content:'"•"'}]}]}]}),ej=new Z.DateFormatter("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"});function eT(e){var t=e.timeZone,n=e.validationError,i=e.commitError;return n?(0,r.jsx)(F.Text,{css:ew.error,children:n}):i?(0,r.jsx)(F.Text,{css:ew.error,children:"Could not determine timestamp from agent rollback"}):(0,r.jsx)(F.Text,{color:"dimmest",children:t})}function ek(e){var t=e.value,a=e.loading,o=e.restored,s=e.error,l=e.validationError,u=e.disabled,c=e.onRestore,d=(0,n._)((0,i.useState)(!1),2),f=d[0],m=d[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H.Button,{text:a?"":o?"Restored":"Restore",loading:a,iconLeft:a?(0,r.jsx)(p.default,{}):void 0,disabled:!!s||!!l||!t||a||o||u,onClick:function(){return m(!0)},colorway:o?"positive":"primary"}),s&&(0,r.jsx)(F.Text,{css:ew.error,children:s}),(0,r.jsx)(eb.Modal,{isOpen:f,onRequestClose:function(){return m(!1)},children:(0,r.jsxs)(q.View,{gap:16,children:[(0,r.jsxs)(q.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(ed.default,{size:20}),(0,r.jsx)(F.Header,{variant:"subheadDefault",level:1,children:"Restoring your database"})]}),(0,r.jsxs)(q.View,{gap:8,children:[(0,r.jsx)(F.Text,{multiline:!0,css:ew.dialogMessage,children:"Your database will be restored to it's past state at:"}),(0,r.jsx)(e_.StatusBanner,{text:t?ej.format(t.toDate()):"Could not determine restore date"}),(0,r.jsx)(e_.StatusBanner,{icon:(0,r.jsx)(g.default,{}),colorway:"warning",text:(0,r.jsxs)(r.Fragment,{children:["This action cannot be undone.",(0,r.jsx)("br",{}),(0,r.jsxs)("ul",{css:ew.list,children:[(0,r.jsx)("li",{children:"All current data will be replaced with data from this backup"}),(0,r.jsx)("li",{children:"Any changes made after this backup point will be lost"}),(0,r.jsx)("li",{children:"Connected services may need to be reconfigured"}),(0,r.jsx)("li",{children:"If you've deployed, any production data changed after this time will be lost"})]})]})})]}),(0,r.jsx)(q.View,{css:ew.dialogButtonContainer,children:(0,r.jsx)(H.Button,{colorway:"primary",onClick:function(){m(!1),c(t)},text:"Continue"})})]})})]})}function eD(e){var t=e.value,n=e.loading,i=e.restored,a=e.error,o=e.minValue,s=e.maxValue,l=e.disabled,u=e.validationError,c=e.timeZone,d=e.onChange,p=e.onRestore;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ep.default,{granularity:"second",hourCycle:24,minValue:o,maxValue:s,value:t?(0,D.toCalendarDateTime)(t):void 0,onChange:d,"aria-labelledby":"restore-timestamp",isDisabled:l||n}),(0,r.jsx)(eT,{timeZone:c,validationError:u}),(0,r.jsx)(ek,{value:t,loading:n,onRestore:p,restored:i,error:a,validationError:u,disabled:l})]})}function eC(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ex.Label,{variant:"text","aria-label":"restore-timestamp",children:"Timestamp"}),(0,r.jsx)(eD,(0,Y._)({},e))]})}function eE(e,t){if(e.isFrozen)return(0,E.Err)("Database is frozen and cannot be restored");var n=(0,C.getLocalTimeZone)(),r=(0,C.now)(n),i=e.historyRetentionSeconds;if(0===i)return(0,E.Err)("History retention is disabled so there are no restore points.");var a=(0,$.parseAbsolute)(new Date(e.timeCreated).toISOString(),n).add({minutes:1}),o=r.subtract({seconds:i}),s=(0,D.toZoned)(a,n),l=(0,D.toZoned)(o,n),u=(0,D.toZoned)(r,n);if(0>t.compare(s)){var c=s.toDate().toLocaleString();return(0,E.Err)("Restore point is before database creation time (".concat(c,")"))}if(0>t.compare(l)){var d=l.toDate().toLocaleString();return(0,E.Err)("Restore point is before the configured database history retention period (".concat(d,")"))}return t.compare(u)>0?(0,E.Err)("Restore point is in the future"):(0,E.Ok)(!0)}function eA(e){var t,a,o,s,l,u=e.neonDatabase,c=(0,ef.default)(),d=(0,I.useIsDbRollbackBlocked)(),f=d.blockDatabasePanePITR,m=d.loading,h=(0,C.getLocalTimeZone)(),v=(0,C.now)(h),x=u.historyRetentionSeconds,y=0===x,b=(0,$.parseAbsolute)(new Date(u.timeCreated).toISOString(),h).add({minutes:1}),S=v.subtract({seconds:x}),_=(0,n._)((0,i.useState)(),2),w=_[0],j=_[1],T=(0,n._)((0,i.useState)(),2),k=T[0],E=T[1],A=(0,n._)((0,i.useState)(!1),2),R=A[0],P=A[1],M=(0,n._)((0,i.useState)(),2),O=M[0],V=M[1],N=(0,n._)(el({onError:function(e){eh(e,"rollbackNeonDatabase",{replId:c,neonProjectId:u.projectId}),V("Something went wrong.")},onCompleted:function(e){"RollbackNeonDatabaseResult"!==e.rollbackNeonDatabase.__typename?V(e.rollbackNeonDatabase.message):P(!0)}}),2),B=N[0],L=N[1].loading,H=u.isFrozen||u.isEphemeral||y||f;return(0,r.jsxs)(q.View,{children:[(0,r.jsx)(F.Text,{variant:"subheadDefault",css:ew.title,children:"Restore"}),(0,r.jsxs)(U.ShadesSurface,{css:ew.card,gap:6,children:[(0,r.jsx)(q.View,{children:(0,r.jsx)(F.Text,{color:"dimmer",children:"Quickly restore a branch to a point within it's history retention period."})}),m?(0,r.jsx)(p.default,{}):null,m?null:(0,r.jsx)(eC,{value:w,loading:L,restored:R,error:O,minValue:S>b?S:b,maxValue:v,validationError:k,timeZone:h,onChange:function(e){if(e){R&&(P(!1),V(void 0));var t=(0,D.toZoned)(e,h),n=eE(u,t);n.ok?(E(void 0),j(t)):E(n.error)}},onRestore:function(e){e?B({variables:{input:{neonProjectId:u.projectId,replId:c,timestamp:e.toAbsoluteString()}}}):V("Could not determine restore date")},disabled:H}),H?(0,r.jsx)(e_.StatusBanner,{text:(a=(t={blockDatabasePanePITR:f,isFrozen:u.isFrozen,isEphemeral:u.isEphemeral,hasDisabledHistoryRetention:y}).blockDatabasePanePITR,o=t.isFrozen,s=t.isEphemeral,l=t.hasDisabledHistoryRetention,a?"Database rollbacks are temporarily disabled.":o?"Database is frozen. You cannot restore a database that has been frozen.":s?"Temporary databases created on the free Starter plan do not support restores.":l?"History retention is disabled. You cannot restore a database with history retention disabled.":void 0),colorway:"warning",icon:(0,r.jsx)(g.default,{})}):null]})]})}var eR=[{value:0,title:"Disabled"},{value:21600,title:"6 Hours"},{value:43200,title:"12 Hours"},{value:86400,title:"1 Day"},{value:172800,title:"2 Days"},{value:432e3,title:"5 Days"},{value:604800,title:"7 Days"}];function eI(e){var t=e.currentRetentionPeriod,a=e.loading,o=e.success,s=e.disabled,l=e.onClick,u=e.error,c=(0,n._)((0,i.useState)(t),2),d=c[0],f=c[1],m=o||d!==t;return(0,r.jsxs)(q.View,{gap:12,children:[(0,r.jsxs)(q.View,{gap:8,children:[(0,r.jsx)(ex.Label,{htmlFor:"history-retention-period",children:(0,r.jsx)(F.Text,{children:"History Retention Period"})}),(0,r.jsx)(eS.Select,{id:"history-retention-period","aria-labelledby":"history-retention-period",selectedKey:d,onSelectionChange:function(e){f(parseInt(String(e),10))},items:eR,isDisabled:s,children:function(e){return(0,r.jsx)(ey.ListBoxItem,{id:e.value,label:e.title},e.value)}})]}),m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e_.StatusBanner,{text:"Increasing your retention window will increase your project's storage usage. Decreasing your retention window will prevent you from restoring to a point in time older than the new retention window and will delete any historical data that was being retained beyond it.",colorway:"warning",icon:(0,r.jsx)(g.default,{})}),(0,r.jsx)(H.Button,{text:a?"":o?"Updated":"Confirm",loading:a,iconLeft:a?(0,r.jsx)(p.default,{}):void 0,disabled:!!u||a||o,onClick:function(){return l(d)},colorway:o?"positive":"primary"}),u&&(0,r.jsx)(F.Text,{css:ew.error,children:u})]}):null]})}function eP(e){var t=e.neonDatabase,a=(0,ef.default)(),o=(0,n._)((0,i.useState)(!1),2),s=o[0],l=o[1],u=(0,n._)((0,i.useState)(),2),c=u[0],d=u[1],p=(0,n._)(ec({onError:function(e){eh(e,"setNeonHistoryRetentionPeriod",{replId:a,neonProjectId:t.projectId}),d("Something went wrong.")},onCompleted:function(e){"SetNeonDatabaseConfigurationResult"!==e.setNeonDatabaseConfiguration.__typename?d(e.setNeonDatabaseConfiguration.message):l(!0)}}),2),f=p[0],m=p[1].loading;return(0,r.jsxs)(q.View,{children:[(0,r.jsx)(F.Text,{variant:"subheadDefault",css:ew.title,children:"History Retention"}),(0,r.jsxs)(U.ShadesSurface,{css:ew.card,gap:6,children:[(0,r.jsx)(q.View,{children:(0,r.jsx)(F.Text,{color:"dimmer",children:"Maintain a history of changes for a period of time, enabling features like point-in-time restore and restoring a database back to an agent checkpoint."})}),(0,r.jsx)(eI,{currentRetentionPeriod:t.historyRetentionSeconds,loading:m,success:s,disabled:m||t.isFrozen||t.isEphemeral,onClick:function(e){f({variables:{input:{neonProjectId:t.projectId,replId:a,historyRetentionSeconds:e}}})},error:c}),t.isFrozen||t.isEphemeral?(0,r.jsx)(e_.StatusBanner,{text:t.isFrozen?"Database is frozen. You cannot update the history retention of a frozen database.":"Temporary databases created on the free Starter plan do not support configurable history retention.",colorway:"warning",icon:(0,r.jsx)(g.default,{})}):null]})]})}e.s(["DatabaseSettingsHistoryRetentionSection",()=>eP,"DatabaseSettingsRestoreSection",()=>eA,"isValidRestorePoint",()=>eE],344481);var eM=e.i(346715),eO=e.i(368964),eV=e.i(182409),eN=e.i(399245),eB=e.i(928838),eL=e.i(914279),eU=e.i(68893),eH=e.i(391222),eF=e.i(222342),eq=e.i(610357),ez=e.i(902379),eG=[eO.HostingBuildStatus.Building,eO.HostingBuildStatus.Promoting,eO.HostingBuildStatus.Running,eO.HostingBuildStatus.Pending,eO.HostingBuildStatus.Resuming,eO.HostingBuildStatus.Suspending,eO.HostingBuildStatus.UpdatingTier],eW=function(e){var t=eB.buildStatuses[e];if(t)return"".concat(t.title,"...");switch(e){case eO.HostingBuildStatus.Building:return"Building...";case eO.HostingBuildStatus.Promoting:return"Promoting...";case eO.HostingBuildStatus.Running:return"Bundling...";case eO.HostingBuildStatus.Pending:return"Provisioning...";case eO.HostingBuildStatus.Resuming:return"Resuming...";case eO.HostingBuildStatus.Suspending:return"Pausing...";case eO.HostingBuildStatus.UpdatingTier:return"Updating tier...";default:return"Publishing..."}},eK=function(){var e=(0,n._)((0,i.useState)(!1),2),t=e[0],r=e[1];return(0,i.useEffect)(function(){r("undefined"!=typeof navigator&&navigator.share&&"function"==typeof navigator.share)},[]),t},eY=function(e,t,n){return(0,T._)(function(){return(0,k._)(this,function(r){switch(r.label){case 0:if(!(navigator.share&&"function"==typeof navigator.share))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.share({title:t,text:n,url:e})];case 2:return r.sent(),[2,!0];case 3:return r.sent(),[3,4];case 4:return(0,eq.default)(e),[2,!1]}})})()},eZ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openDeploymentsPane,n=e.includeSharing,a=void 0!==n&&n,o=!t,s=eK(),u=(0,y.useDeploymentId)(),c=(0,y.useDeployBuild)({openDeploymentsPane:t}).redeployWithNoNewOptions,d=(0,y.useDeploymentCurrentBuild)(),p=(0,y.useDeploymentInProgressBuild)(),f=(0,eL.useDeploymentMode)(),m=(0,y.useDeploymentSubdomain)(),h=(0,eF.default)().showConfirm,g=(0,ez.useDevUrl)({fallbackToReplCo:!0}).url,v=(0,b.useDeploymentLink)(d?{__typename:"HostingDeployment",id:u||"",replitAppSubdomain:m||"",domains2:[],currentBuild:{__typename:"HostingBuild",id:d.id,provider:null==d?void 0:d.provider}}:null).href,x=!d||!u||f!==eU.DeploymentMode.Ready&&f!==eU.DeploymentMode.Suspended&&f!==eU.DeploymentMode.ProcessingLifecycleCommand,S=(0,i.useCallback)(function(){return(0,T._)(function(){return(0,k._)(this,function(e){switch(e.label){case 0:if(!u)return t&&t(),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,c({hasAgentSession:!0})];case 2:case 3:return e.sent(),[3,4];case 4:return[2]}})})()},[u,t,c,!0]),_=(0,i.useCallback)(function(){if(o&&(!u||!d))return null;if(!u)return o?null:{data:{type:"action",icon:(0,r.jsx)(eV.default,{color:L.tokens.greenStrongest}),label:"Publish",run:t}};if(!d&&p)return{data:{type:"action",icon:(0,r.jsxs)(q.View,{row:!0,gap:4,align:"center",children:[(0,r.jsx)(eH.DeploymentStatusDot,{status:eO.HostingBuildStatus.Building}),(0,r.jsx)(eV.default,{color:L.tokens.foregroundDefault})]}),label:eW(p.status),run:function(){}}};if(!d)return null;var e=!!p,n=eG.includes(d.status),i=e&&p?{isDeploying:!0,buttonText:eW(p.status)}:n?{isDeploying:!0,buttonText:eW(d.status)}:x?{isDeploying:!0,buttonText:"Starting..."}:{isDeploying:!1,buttonText:"Republish"},a=i.isDeploying,s=i.buttonText;return{data:{type:"action",icon:o?(0,r.jsxs)(q.View,{row:!0,gap:4,align:"center",children:[d.status!==eO.HostingBuildStatus.Success||a?(0,r.jsx)(eH.DeploymentStatusDot,{status:a?eO.HostingBuildStatus.Building:d.status}):null,(0,r.jsx)(eV.default,{size:24,color:d.status!==eO.HostingBuildStatus.Success||a?L.tokens.foregroundDefault:L.tokens.greenStrongest})]}):(0,r.jsxs)(q.View,{row:!0,gap:4,align:"center",children:[d.status!==eO.HostingBuildStatus.Success||a?(0,r.jsx)(eH.DeploymentStatusDot,{status:a?eO.HostingBuildStatus.Building:d.status}):null,(0,r.jsx)(eV.default,{color:a?L.tokens.foregroundDefault:L.tokens.greenStrongest})]}),label:s,run:a?function(){}:S}}},[o,u,d,p,t,S,x]),w=(0,i.useCallback)(function(){if(!a)return[];var e=[];return g&&(!o||u&&m)&&e.push({data:{type:"action",icon:(0,r.jsx)(l.default,{color:L.tokens.foregroundDefault}),label:s?"Share development link":"Copy development link",run:function(){return(0,T._)(function(){return(0,k._)(this,function(e){switch(e.label){case 0:return[4,eY(g,"Check out my Replit development app!","I'm working on this app on Replit!")];case 1:return e.sent()||h("Development URL copied to clipboard"),[2]}})})()}}}),u&&m&&e.push({data:{type:"action",icon:(0,r.jsx)(eN.default,{color:L.tokens.foregroundDefault}),label:s?"Share published link":"Copy published link",run:function(){return(0,T._)(function(){return(0,k._)(this,function(e){switch(e.label){case 0:return[4,eY(v,"Check out my Replit app!")];case 1:return e.sent()||h("Published URL copied to clipboard"),[2]}})})()}}}),e},[u,m,h,o,g,v,a,s]),j=(0,i.useCallback)(function(){var e=w(),t=_();if(o){var n=[];return e.length>0&&n.push({name:"Sharing",commands:e}),t&&n.push({name:"Deployment",commands:[t]}),n}if(!u||!m){var r=(0,eM._)(e);return(t&&r.push(t),r.length>0)?[{name:"Development",commands:r}]:[]}var i=[];return e.length>0&&i.push({name:"Sharing",commands:e}),t&&i.push({name:"Deployment",commands:[t]}),i},[w,_,o,u,m]);return{deploymentId:u,currentBuild:d,inProgressBuild:p,handleDeployCommand:S,getDeploymentCommand:_,getShareCommands:w,getCommandGroups:j,hideRedeploy:x,mode:f}},e$=function(e){var t=e.openDeploymentsPane,n=eZ({openDeploymentsPane:t}),i=n.deploymentId,a=n.currentBuild,o=n.inProgressBuild,s=n.handleDeployCommand,l=n.hideRedeploy;if(!i)return(0,r.jsx)(H.Button,{onClick:t,iconLeft:(0,r.jsx)(eV.default,{color:L.tokens.greenStrongest}),text:"Publish",size:"small"});if(!a&&o)return(0,r.jsx)(H.Button,{onClick:function(){},iconLeft:(0,r.jsx)(eV.default,{color:L.tokens.foregroundDefault}),text:eW(o.status),size:"small",disabled:!0});if(!a)return null;var u=!!o,c=eG.includes(a.status),d=u&&o?{isDeploying:!0,buttonText:eW(o.status)}:c?{isDeploying:!0,buttonText:eW(a.status)}:l?{isDeploying:!0,buttonText:"Starting..."}:{isDeploying:!1,buttonText:"Republish"},p=d.isDeploying,f=d.buttonText;return(0,r.jsx)(H.Button,{onClick:s,iconLeft:(0,r.jsx)(eV.default,{color:L.tokens.greenStrongest}),text:f,size:"small",disabled:p})};e.s(["DeployButton",()=>e$,"useDeploymentCommands",()=>eZ],548364);var eX=e.i(127227),eQ=e.i(257811),eJ=e.i(751273),e0=e.i(481088),e1=e.i(211397),e2=e.i(922084),e5=e.i(195715);function e7(e){var t=e.setShowConfirmModal,a=e.onRevert,o=e.commitId,s=e.enableHelium,l=e.screenshot,u=e.date,d=(0,w.useAgentCheckpointPreview)({commitId:o,enableHelium:s,date:u}),p=d.loading,f=d.error,x=d.previewUrl,y=d.loadPreview,b=d.validPreview,_=(0,I.useIsDbRollbackBlocked)().blockAgentCheckpointRollbacks,j=(0,S.useFlag)({controlName:v.flagHasAgentCheckpointDatabaseRollbacks,logFlagToAnalytics:!1}),M=(0,S.useFlag)({type:"string",controlName:v.flagNeonRegionsExcludedFromRollback,default:""}).split(","),O=(0,P.default)(function(e){return(0,T._)(function(){return(0,k._)(this,function(t){switch(t.label){case 0:return[4,e.getCommit({commit:o})];case 1:return[2,t.sent()]}})})()},[o]),V=(0,R.useNeonDevelopmentDatabase)(),N=V.database,L=V.loading,U=(0,A.useHeliumDevelopmentDatabase)(),z=U.database,W=U.loading,Y=L||W,Z=null!=z?z:N,$=(0,B.useIsExpoStack)(),X=eZ().deploymentId,Q=(0,i.useMemo)(function(){if(Y)return(0,E.Ok)(!0);if(!Z)return(0,E.Err)("No database found");if(_)return(0,E.Err)("Database rollbacks are temporarily disabled");if(!j)return(0,E.Err)("Database rollbacks are not yet available");if(z)return(0,E.Ok)(!0);if(!N)return(0,E.Err)("No Neon database found");var e,t=(e=N.connectionString.match(/@.*?\.(.+?)\./))&&e[1]?e[1]:null;if(t&&M.includes(t))return(0,E.Err)("Database rollbacks have been temporarily disabled in your database region.");var n=(0,C.getLocalTimeZone)();return eE(N,(0,D.fromDate)(u,n))},[Y,Z,z,N,u,j,M,_]),J=(0,n._)((0,i.useState)(!X),2),ee=J[0],et=J[1];(0,i.useEffect)(function(){Q.error&&et(!1)},[Q]);var en=(0,r.jsx)(m.default,{});f?en=(0,r.jsx)(eJ.Tooltip,{tooltip:f,children:(0,r.jsx)(g.default,{})}):p?en=(0,r.jsx)(K,{estimatedTotalSeconds:25}):null!==x?en=(0,r.jsx)(c.default,{}):b||(en=(0,r.jsx)(eJ.Tooltip,{tooltip:"Cannot preview checkpoints older than 7 days",children:(0,r.jsx)(h.default,{})}));var er="Load interactive preview";return p?er="Loading interactive preview...":x?er="View interactive preview":f?er="Error loading preview":b||(er="Preview expired"),(0,r.jsxs)(q.View,{gap:24,children:[(0,r.jsxs)(q.View,{gap:16,children:[(0,r.jsx)(F.Header,{variant:"subheadBig",level:3,children:"Rollback to checkpoint"}),(0,r.jsxs)(q.View,{gap:24,children:[$?(0,r.jsx)(G,{previewUrl:x,isPreviewActive:!!x,isLoading:p,error:f,onPreviewClick:function(){b&&y()}}):(0,r.jsx)(q.View,{clsx:e5.default.confirmationModalScreenshotContainer,children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q.View,{clsx:e5.default.confirmationModalScreenshot,children:(0,r.jsx)(e1.default,{src:l,alt:"Screenshot",layout:"fill",objectFit:"cover"})}),(0,r.jsxs)(q.View,{row:!0,align:"center",justify:"space-between",clsx:e5.default.confirmationModalPreviewTextContainer,children:[(0,r.jsx)(F.Text,{color:"dimmer",variant:"small",children:"Screenshot taken by the Agent"}),(0,r.jsx)(H.Button,{size:"small",variant:"underlinedOnHover",text:er,disabled:p||!b,iconRight:en,onClick:function(){b&&(x?window.open(x,"_blank"):y())}})]})]}):(0,r.jsx)(q.View,{align:"center",justify:"center",clsx:e5.default.noScreenshotText,children:(0,r.jsx)(F.Text,{color:"dimmer",children:"No screenshot available"})})}),(0,r.jsxs)(q.View,{gap:8,children:[(0,r.jsx)(F.Header,{variant:"subheadDefault",level:3,children:"Target checkpoint"}),(0,r.jsx)(e4,{commitData:O})]}),(0,r.jsxs)(q.View,{gap:8,children:[(0,r.jsx)(F.Header,{variant:"subheadDefault",level:3,children:"What will be rolled back"}),(0,r.jsx)(q.View,{gap:8,children:(0,r.jsxs)("ul",{className:e5.default.rollbackOptionsList,children:[(0,r.jsx)("li",{children:(0,r.jsxs)(q.View,{children:[(0,r.jsx)(F.Text,{className:e5.default.rollbackOptionHeading,children:"Files"}),(0,r.jsx)(F.Text,{color:"dimmest",variant:"small",children:"All files in your app will be restored to the state they were in at the time of this checkpoint."})]})}),(0,r.jsx)("li",{children:(0,r.jsxs)(q.View,{children:[(0,r.jsx)(F.Text,{className:e5.default.rollbackOptionHeading,children:"Agent memory"}),(0,r.jsx)(F.Text,{color:"dimmest",variant:"small",children:"The Agent's memory will reset to what it knew about your app at the time of this checkpoint."})]})})]})})]}),Z?(0,r.jsxs)(q.View,{gap:12,children:[(0,r.jsx)(F.Header,{variant:"subheadDefault",level:3,children:"Additional rollback options"}),(0,r.jsx)(q.View,{gap:8,children:(0,r.jsxs)(q.View,{row:!0,align:"start",gap:8,children:[(0,r.jsx)(eJ.Tooltip,{isDisabled:Q.ok,tooltip:Q.error,children:(0,r.jsx)(eX.Checkbox,{id:"restore-database",name:"restore-database",disabled:!Q.ok,checked:ee,onChange:function(){return et(!ee)}})}),(0,r.jsxs)(ex.Label,{htmlFor:"restore-database",variant:"text",clsx:e5.default.flexGrowAndShrink,children:[(0,r.jsx)(F.Text,{children:"Database"}),(0,r.jsxs)(F.Text,{color:"dimmest",variant:"small",children:["Your data will be restored to the time of this checkpoint.",X?" Note that rolling back the database will also affect active deployments.":""]})]})]})})]}):null]})]}),(0,r.jsxs)(q.View,{row:!0,justify:"end",gap:8,children:[(0,r.jsx)(H.Button,{text:"Cancel",onClick:function(){return t(!1)},variant:"outlined"}),(0,r.jsx)(H.Button,{text:"Rollback to this checkpoint",loading:Y,onClick:function(){a({rollbackDatabaseTimestamp:ee?u.toISOString():void 0,rollbackDeploymentBuildId:void 0,rollbackDatabase:ee}),t(!1)},colorway:"primary"})]})]})}function e4(e){var t=e.commitData,n=!t,i=t&&(null==t?void 0:t.error);return n?(0,r.jsxs)(U.ShadesSurface,{clsx:[e2.default.root,e2.default.checkpointCard],row:!0,gap:8,elevate:!1,children:[(0,r.jsx)(p.default,{clsx:[e5.default.statusIconLoading,e5.default.lineHeightOffset]}),(0,r.jsx)(q.View,{gap:2,grow:!0,shrink:!0,children:(0,r.jsxs)(e0.default,{speed:2,height:40,backgroundColor:L.tokens.backgroundHighest,foregroundColor:L.tokens.backgroundHigher,children:[(0,r.jsx)("rect",{rx:"2",ry:"2",x:"0",y:"0",width:"200",height:"15"}),(0,r.jsx)("rect",{rx:"2",ry:"2",x:"0",y:"25",width:"300",height:"15"})]})})]}):i?(0,r.jsxs)(U.ShadesSurface,{clsx:[e2.default.checkpointCard,e2.default.checkpointFailed],row:!0,gap:8,elevate:!1,children:[(0,r.jsx)(s.default,{clsx:[e2.default.statusIcon,e5.default.lineHeightOffset]}),(0,r.jsxs)(q.View,{gap:2,grow:!0,shrink:!0,children:[(0,r.jsx)(F.Text,{children:"Failed to load commit"}),(0,r.jsx)(F.Text,{color:"dimmer",variant:"small",children:"The commit may have been deleted or is no longer accessible"})]})]}):(0,r.jsxs)(U.ShadesSurface,{clsx:[e2.default.root,e2.default.checkpointCard],row:!0,gap:8,elevate:!1,children:[(0,r.jsx)(a.default,{clsx:[e2.default.statusIcon,e5.default.lineHeightOffset]}),(0,r.jsxs)(q.View,{gap:2,grow:!0,shrink:!0,children:[(0,r.jsx)(F.Text,{children:t.subject}),(0,r.jsx)(F.Text,{color:"dimmer",children:t.body||(0,r.jsx)("span",{clsx:e2.default.noDescription,children:"No description provided"})}),(0,r.jsxs)(q.View,{row:!0,gap:6,align:"center",children:[(0,r.jsx)(eQ.Timestamp,{date:new Date(t.author.date),textColor:"dimmest",textVariant:"small"}),(0,r.jsx)(F.Text,{color:"dimmest",children:"•"}),(0,r.jsx)(F.Text,{color:"dimmest",variant:"small",children:t.hash.substring(0,8)})]})]})]})}e.s(["ConfirmRollbackModal",()=>e7],1074);var e3=e.i(443394),e8=e.i(607278),e9=e.i(624782);function e6(e){var t=e.title,a=e.onRenameTitle,o=e.color,s=e.isTitleLoading,l=(0,n._)((0,i.useState)(!1),2),c=l[0],d=l[1],p=(0,n._)((0,i.useState)(t||""),2),f=p[0],m=p[1];if(s)return(0,r.jsx)(e0.default,{speed:2,backgroundColor:L.tokens.backgroundHighest,foregroundColor:L.tokens.backgroundHigher,width:200,height:22,uniqueKey:"title-skeleton",children:(0,r.jsx)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"200",height:"22"})});var h=function(){a&&a(f),d(!1)};return c?(0,r.jsx)(e8.Input,{color:o,value:f,onChange:function(e){return m(e.target.value)},onBlur:h,autoFocus:!0,onKeyDown:function(e){"Enter"===e.key&&h()},className:e2.default.editableTitleInput}):(0,r.jsx)(q.View,{row:!0,gap:4,align:"center",onClick:function(){return a&&d(!0)},style:{cursor:a?"pointer":"text"},clsx:e2.default.editableTitle,children:(0,r.jsxs)(F.Text,{color:o,children:[f||t||(0,r.jsx)("span",{clsx:e2.default.noDescription,children:"No description provided"}),a?(0,r.jsx)(u.default,{size:16}):null]})})}function te(e){var t=e.title,a=e.commitId,o=e.enableHelium,u=e.onRevert,c=e.onOpenCommit,d=e.onRenameTitle,f=e.isInProgress,m=e.isReverting,g=e.isReverted,x=e.isLatest,y=void 0!==x&&x,b=e.isDirty,_=void 0===b||b,w=e.hasFurtherNonSummaryEvents,j=void 0!==w&&w,T=e.openPane,k=e.missingAgentState,D=void 0!==k&&k,C=e.beforeReplCreation,E=void 0!==C&&C,A=e.date,R=e.screenshot,I=(0,S.useFlag)({controlName:v.flagHasReplShares}),P=""===a&&!f,M=!a,O=(0,r.jsx)(h.default,{});m?O=(0,r.jsx)(p.default,{}):P&&(O=(0,r.jsx)(s.default,{}));var V=null!=u,N=(0,n._)((0,i.useState)(!1),2),B=N[0],z=N[1],G=(0,i.useCallback)(function(){z(!0)},[]),W=y&&!_&&!j,K=P||D||E||W,Y=I&&R&&!M&&a&&!P;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(U.ShadesSurface,{br:"container",colorShade:"default",background:!0,p:8,clsx:e2.default.card,children:(0,r.jsxs)(q.View,{gap:4,grow:!0,shrink:!0,children:[P?(0,r.jsx)(F.Text,{multiline:!0,children:"An unexpected error occurred while creating this checkpoint. This is most likely an issue with Replit."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e6,{title:t,onRenameTitle:d,color:g?"dimmer":"default",isTitleLoading:!t}),A&&(0,r.jsx)(eQ.Timestamp,{date:A,dateFormat:"absolute",textVariant:"small",textColor:"dimmest"})]}),(0,r.jsxs)(q.View,{row:!0,wrap:!0,align:"center",gap:8,children:[V&&!M?(0,r.jsx)(eJ.Tooltip,{tooltip:P?"This is a failed checkpoint":D?"Checkpoint not made by Agent":E?"Checkpoint created in a different app":W?"Already at this checkpoint":"Reset your app to this version",children:(0,r.jsx)(H.Button,{size:"small",onClick:G,iconLeft:O,disabled:K||m,text:"Rollback here"})}):null,V&&M?(0,r.jsx)(e0.default,{speed:2,backgroundColor:L.tokens.backgroundHighest,foregroundColor:L.tokens.backgroundHigher,width:130,height:28,uniqueKey:"rollback-button-skeleton",children:(0,r.jsx)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"130",height:"28"})}):null,M?(0,r.jsx)(e0.default,{speed:2,backgroundColor:L.tokens.backgroundHighest,foregroundColor:L.tokens.backgroundHigher,width:100,height:28,uniqueKey:"changes-button-skeleton",children:(0,r.jsx)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"100",height:"28"})}):(0,r.jsx)(H.Button,{size:"small",onClick:function(){return a&&c(a)},disabled:P,iconLeft:(0,r.jsx)(l.default,{}),text:"Changes"}),Y?(0,r.jsx)(ti,{commitId:a,commitDate:A,enableHelium:null!=o&&o,isFailed:P,isLatest:y,isDirty:_,hasFurtherNonSummaryEvents:j,openPane:T}):null]})]})}),V?(0,r.jsx)(eb.Modal,{isOpen:B,onRequestClose:function(){return z(!1)},centered:!0,children:(0,r.jsx)(e7,{author:"Agent",setShowConfirmModal:z,onRevert:u,commitId:a||"",enableHelium:null!=o&&o,screenshot:R,date:A})}):null]})}function tt(e){var t,u=e.title,c=e.date,f=e.author,m=e.screenshot,g=e.commitId,x=e.enableHelium,_=e.deploymentBuildId,w=e.onRevert,j=e.onOpenCommit,T=e.onRenameTitle,k=e.isInProgress,D=e.isReverting,C=e.isReverted,E=e.costInfo,A=e.isTimelineListItem,R=e.isLatest,I=void 0!==R&&R,P=e.isDirty,M=void 0===P||P,O=e.hasFurtherNonSummaryEvents,V=void 0!==O&&O,N=e.openPane,B=e.missingAgentState,z=void 0!==B&&B,G=e.beforeReplCreation,W=void 0!==G&&G,K=(0,S.useFlag)({controlName:v.flagHasReplShares}),Y=""===g&&!k,Z=!g,$=(0,r.jsx)(h.default,{});D?$=(0,r.jsx)(p.default,{}):Y&&($=(0,r.jsx)(s.default,{}));var X=(0,r.jsx)(a.default,{clsx:e2.default.statusIcon});C?X=(0,r.jsx)(o.default,{clsx:[e2.default.statusIconReverted,e2.default.statusIcon]}):Y&&(X=(0,r.jsx)(s.default,{clsx:[e2.default.statusIconFailed,e2.default.statusIcon]}));var Q=null!=w,J=(0,n._)((0,i.useState)(!1),2),ee=J[0],et=J[1],en=(0,i.useCallback)(function(){et(!0)},[]),er="Checkpoint made";Z&&!Y&&(er="Creating checkpoint"),Y&&(er="Couldn't make checkpoint");var ei=I&&!M&&!V,ea=Y||z||W||ei,eo="Deployment"===f,es=(0,y.useDeploymentCurrentBuild)(),el=null==es||null==(t=es.repl)?void 0:t.hostingDeployment,eu=el&&"HostingDeployment"===el.__typename?el:null,ec=(0,b.useDeploymentLink)(eu).href,ed=!!(ec&&es);return(0,r.jsxs)(U.ShadesSurface,{br:"container",colorShade:"default",elevate:!1,background:!1,clsx:e2.default.card,children:[(0,r.jsxs)(q.View,{gap:4,children:[(0,r.jsxs)(q.View,{row:!0,align:"center",gap:6,children:[X,(0,r.jsxs)(q.View,{row:!0,gap:4,children:[(0,r.jsx)(F.Text,{variant:"small",color:"dimmer",clsx:e2.default.checkpointStatusText,children:er}),!k&&(0,r.jsx)(eQ.Timestamp,{textVariant:"small",textColor:"dimmer",dateFormat:"switch",live:!0,placement:"top",date:c})]}),(0,r.jsx)(tn,{costInfo:E}),(0,r.jsx)(tr,{author:f})]}),(0,r.jsxs)(q.View,{pl:A?24:void 0,row:!0,justify:"space-between",align:"center",gap:12,children:[(0,r.jsxs)(q.View,{gap:4,grow:!0,shrink:!0,children:[Y?(0,r.jsx)(F.Text,{multiline:!0,children:"An unexpected error occurred while creating this checkpoint. This is most likely an issue with Replit."}):(0,r.jsx)(e6,{title:u,onRenameTitle:T,color:C?"dimmer":"default",isTitleLoading:!u}),(0,r.jsxs)(q.View,{row:!0,wrap:!0,align:"center",gap:8,children:[Q&&!Z?(0,r.jsx)(eJ.Tooltip,{tooltip:Y?"This is a failed checkpoint":z?"Checkpoint not made by Agent":W?"Checkpoint created in a different app":ei?"Already at this checkpoint":"Reset your app to this version",children:(0,r.jsx)(H.Button,{size:"small",onClick:en,iconLeft:$,disabled:ea||D,text:"Rollback here"})}):null,Q&&Z?(0,r.jsx)(e0.default,{speed:2,backgroundColor:L.tokens.backgroundHighest,foregroundColor:L.tokens.backgroundHigher,width:130,height:28,uniqueKey:"rollback-button-skeleton",children:(0,r.jsx)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"130",height:"28"})}):null,Z?(0,r.jsx)(e0.default,{speed:2,backgroundColor:L.tokens.backgroundHighest,foregroundColor:L.tokens.backgroundHigher,width:100,height:28,uniqueKey:"changes-button-skeleton",children:(0,r.jsx)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"100",height:"28"})}):(0,r.jsx)(H.Button,{size:"small",onClick:function(){return g&&j(g)},disabled:Y,iconLeft:(0,r.jsx)(l.default,{}),text:"Changes"}),eo&&ed?(0,r.jsx)(H.Button,{size:"small",onClick:function(){return window.open(ec,"_blank","noopener")},iconLeft:(0,r.jsx)(d.default,{}),text:"View Published App"}):null]})]}),K&&!Z&&g&&!ea?(0,r.jsx)(to,{screenshot:m,commitId:g,commitDate:c,enableHelium:null!=x&&x,isLatest:I,isDirty:M,hasFurtherNonSummaryEvents:V,openPane:N}):(0,r.jsx)(ta,{screenshot:m})]})]}),Q?(0,r.jsx)(eb.Modal,{isOpen:ee,onRequestClose:function(){return et(!1)},centered:!0,children:(0,r.jsx)(e7,{author:f,setShowConfirmModal:et,deploymentBuildId:_,onRevert:w,commitId:g||"",enableHelium:null!=x&&x,screenshot:m,date:c})}):null]})}function tn(e){var t=e.costInfo;if(!t||t.isPaid)return null;var n=t.usageIndicatorVariant===j.UsageIndicatorVariant.Starter?"This didn't use any of your ".concat(x.freePlanName," plan Agent usage. No significant changes were made."):"This checkpoint didn't cost you anything. No significant changes were made.";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.Text,{variant:"small",color:"dimmer",children:"•"}),(0,r.jsx)(eJ.Tooltip,{tooltip:n,placement:"top",children:(0,r.jsx)(F.Text,{variant:"small",style:{color:L.tokens.accentPositiveStronger},children:"Free"})})]})}function tr(e){var t=e.author;if("Agent"===t||!t)return null;var n="";"User"===t?n="This is a manually created checkpoint":"Deployment"===t&&(n="This checkpoint was created from publishing your App");var i="";return"User"===t?i="User":"Deployment"===t&&(i="Publish"),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.Text,{variant:"small",color:"dimmer",children:"•"}),(0,r.jsx)(eJ.Tooltip,{tooltip:n,placement:"top",children:(0,r.jsx)(e9.Pill,{variant:"muted",colorway:"blue",text:i,compact:!0})})]})}function ti(e){var t=e.commitId,n=e.commitDate,a=e.enableHelium,o=e.isFailed,l=e.isLatest,u=e.isDirty,d=e.hasFurtherNonSummaryEvents,h=e.openPane,v=(0,_.useGlobalModal)().show,y=(0,e3.getCurrentUrl)(),b=l&&!u&&!d,S=(0,w.useAgentCheckpointPreview)({commitId:t,enableHelium:a,date:n}),j=S.loadPreview,T=S.loading,k=S.error,D=S.previewUrl,C=S.validPreview,E=S.showUpgradeModal,A=S.setShowUpgradeModal;(0,i.useEffect)(function(){E&&v("MembershipPurchaseModal",{headingText:"Upgrade to preview past checkpoints",subHeadingText:"Upgrade to Replit ".concat(x.corePlanName," to preview past checkpoints"),analyticsContext:{upgrade:{context:"checkpoint_preview"}},onPurchaseComplete:function(){j()},redirectPath:y}).then(function(){A(!1)})},[E,v,j,A,y]);var R=null!==D,I=(0,r.jsx)(m.default,{});T?I=(0,r.jsx)(p.default,{}):b?I=(0,r.jsx)(f.default,{}):R?I=(0,r.jsx)(c.default,{}):C?k&&(I=(0,r.jsx)(g.default,{})):I=(0,r.jsx)(s.default,{});var P="Preview";T?P="Loading...":b||R?P="View preview":C?k&&(P="Failed to load"):P="Preview expired";var M="";return k?M=k:C||(M="Cannot preview checkpoints older than 7 days"),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(eJ.Tooltip,{tooltip:M,isDisabled:b||C,children:(0,r.jsx)(H.Button,{size:"small",onClick:function(){b&&h?h({type:"webview"}):C&&(R?window.open(D,"_blank","noopener"):j())},disabled:o||!b&&!C,iconLeft:I,text:P})})})}function ta(e){var t=e.screenshot;return t?(0,r.jsx)(q.View,{clsx:e2.default.screenshotContainer,children:(0,r.jsx)(e1.default,{layout:"fill",src:t,alt:"Screenshot",objectFit:"cover"})}):null}function to(e){var a=e.screenshot,o=e.commitId,s=e.enableHelium,l=e.commitDate,u=e.isLatest,d=e.isDirty,p=e.hasFurtherNonSummaryEvents,v=e.openPane,y=(0,_.useGlobalModal)().show,b=(0,e3.getCurrentUrl)(),S=u&&!d&&!p,j=(0,w.useAgentCheckpointPreview)({commitId:o,enableHelium:s,date:l}),T=j.loadPreview,k=j.loading,D=j.error,C=j.previewUrl,E=j.validPreview,A=j.showUpgradeModal,R=j.setShowUpgradeModal;(0,i.useEffect)(function(){A&&y("MembershipPurchaseModal",{headingText:"Upgrade to preview past checkpoints",subHeadingText:"Upgrade to Replit ".concat(x.corePlanName," to preview past checkpoints"),analyticsContext:{upgrade:{context:"checkpoint_preview"}},onPurchaseComplete:function(){T()},redirectPath:b}).then(function(){R(!1)})},[A,y,T,R,b]);var I=null!==C,P=(0,n._)((0,i.useState)(!1),2),M=P[0],O=P[1];if((0,i.useEffect)(function(){(I||k)&&O(!0)},[I,k]),!a)return null;var V=(0,r.jsx)(m.default,{clsx:e2.default.previewIcon,size:20});k?V=(0,r.jsx)(K,{estimatedTotalSeconds:25,size:20}):S?V=(0,r.jsx)(f.default,{clsx:e2.default.previewIcon,size:20}):I?V=(0,r.jsx)(c.default,{clsx:e2.default.previewIcon,size:16}):E?D&&(V=(0,r.jsx)(g.default,{clsx:e2.default.previewIcon,size:20})):V=(0,r.jsx)(h.default,{clsx:e2.default.previewIcon,size:20});var N="Load preview";k?N="Loading...":S||I?N="View preview":E?D&&(N="Failed to load"):N="Preview expired";var B="";return D?B=D:E||(B="Cannot preview checkpoints older than 7 days"),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(q.View,{clsx:e2.default.screenshotContainer,style:{cursor:S||E?"pointer":"default"},onClick:function(){S&&v?v({type:"webview"}):E&&(I?window.open(C,"_blank","noopener"):T())},onMouseLeave:function(){k||O(!1)},children:[(0,r.jsx)(e1.default,{layout:"fill",src:a,alt:"Screenshot",objectFit:"cover"}),(0,r.jsxs)(eJ.Tooltip,{placement:"right",tooltip:B,isDisabled:S||E,clsx:[e2.default.previewOverlay,(0,t._)({},e2.default.previewLoading,M)],children:[V,(0,r.jsx)(F.Text,{color:"default",variant:"small",clsx:e2.default.previewText,children:N})]})]})})}e.s(["CheckpointCard",()=>te,"CheckpointHistoryItem",()=>tt],190120)},287999,e=>{"use strict";var t=e.i(394212),n=e.i(297083),r=e.i(878420),i=e.i(64386),a=e.i(817556),o=e.i(276385),s=e.i(389959),l=e.i(82259),u=e.i(986194);e.i(877212);var c=e.i(924908),d=e.i(825118);e.i(242933);var p=e.i(279606),f=e.i(424360);e.i(925218);var m=e.i(112077),h=e.i(641555),g=e.i(802088),v=e.i(968323),x=e.i(98816),y=e.i(927158),b={screenshotUrl:"Replit-Commit-Screenshot-Url",sessionId:"Replit-Commit-Session-Id",eventId:"Replit-Commit-Event-Id",commitAuthor:"Replit-Commit-Author",deploymentBuildId:"Replit-Commit-Deployment-Build-Id",restoredToHash:"Replit-Restored-To",heliumCheckpointCreated:"Replit-Helium-Checkpoint-Created"};function S(e){switch(e){case l.CommitAuthor.COMMIT_AUTHOR_AGENT:return"Agent";case l.CommitAuthor.COMMIT_AUTHOR_USER:return"User";case l.CommitAuthor.COMMIT_AUTHOR_DEPLOYMENT:return"Deployment";default:return}}function _(e,t){var n=new Map,a=!0,o=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;n.set(c.id,{session:c,commitRanges:[]})}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}var d=!0,p=!1,f=void 0;try{for(var m,h=e[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var g=m.value,v=!0,x=!1,y=void 0;try{for(var b,S=g.commitRange[Symbol.iterator]();!(v=(b=S.next()).done);v=!0)!function(){var e,a=b.value,o=null!=(e=a.sessionId)?e:"unknown",s=n.get(o);s||(s={session:t.find(function(e){return e.id===o}),commitRanges:[]},n.set(o,s));var l=s.commitRanges[s.commitRanges.length-1];(void 0===l||l.collapsed!==g.collapsed)&&(l=(0,i._)((0,r._)({},g),{commitRange:[]}),s.commitRanges.push(l)),l.commitRange.push(a)}()}catch(e){x=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(x)throw y}}}}catch(e){p=!0,f=e}finally{try{d||null==h.return||h.return()}finally{if(p)throw f}}return Array.from(n.values()).sort(function(e,t){return e.session?t.session?e.session.created.getTime()-t.session.created.getTime():1:-1})}var w=(0,s.createContext)(null);function j(e){var h,S,j=e.children,T=e.replTimeCreated,k=(0,m.useCreateObservable)(null),D=(0,s.useRef)(null),C=(0,m.useCreateObservable)(!1),E=(0,y.usePid2Callback)(function(e){return function(){return(0,n._)(function(){var n,r,i,o,s,l,u,c,p,f,m,h,g,x,y,S,_,w,j,k;return(0,a._)(this,function(a){switch(a.label){case 0:n=[],r=e.git.checkpoints.subscribe({}).resReadable,i=!1,o=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),l=(0,t._)(r),a.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(u=a.sent()).done))return[3,5];if(!(c=u.value).ok){if("UNEXPECTED_DISCONNECT"===(p=c.payload).code)return[3,5];if(p.code===d.GitErrors.NOT_INITIALIZED)return[2,(0,v.Err)({type:"notInitialized"})];return[2,(0,v.Err)({type:"error",error:"".concat(p.code,": ").concat(p.message)})]}n.push(c.payload),a.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return f=a.sent(),o=!0,s=f,[3,12];case 7:if(a.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(o)throw s;return[7];case 11:return[7];case 12:m=[],h=new Set,g=T?new Date(T):null,x=!0,y=!1,S=void 0;try{for(_=n[Symbol.iterator]();!(x=(w=_.next()).done);x=!0)if(j=w.value,k=function(e,t){var n,r=e.trailers[b.commitAuthor];if(void 0!==r&&"User"!==r&&"Agent"!==r&&"Deployment"!==r||!e.trailers[b.restoredToHash]&&void 0===r)return null;var i=new Date(e.author.date);return{hash:e.hash,committer:e.committer,subject:e.subject,customSubject:null==(n=e.notes)?void 0:n.split("\n")[0],body:e.body,screenshotUrl:e.trailers[b.screenshotUrl],sessionId:e.trailers[b.sessionId],eventId:e.trailers[b.eventId],restoredToHash:e.trailers[b.restoredToHash],deploymentBuildId:e.trailers[b.deploymentBuildId],heliumCheckpointCreated:"true"===e.trailers[b.heliumCheckpointCreated],authoredBy:r,missingAgentState:e.missingAgentState,beforeReplCreation:null!=t&&i<t}}(j,g)){if(h.has(k.hash))continue;h.add(k.hash),m.push(k)}}catch(e){y=!0,S=e}finally{try{x||null==_.return||_.return()}finally{if(y)throw S}}return[2,(0,v.Ok)(m)]}})})()}},[T]),A=(0,c.useChatter)(),R=(0,s.useMemo)(function(){return E?function(){return(0,n._)(function(){var e,t,n;return(0,a._)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,A.sessions.query({types:[l.SessionType.AGENT_SESSION]}).list.once()];case 1:return e=a.sent(),[3,3];case 2:return a.sent(),[2];case 3:if(!e)return[2];return C.set(!0),[4,E()];case 4:return D.current=t=a.sent(),t.ok?(n=_((function(e){for(var t=[],n=null,r=null,i=0;i<e.length;i++){var a=e[i],o=void 0!==a.restoredToHash;!o||(null==n?void 0:n.collapsed)||(r=a),n?n.collapsed&&r&&r.restoredToHash===a.hash?(t.push(n),n={collapsed:!1,commitRange:[]}):!n.collapsed&&o&&(t.push(n),n={collapsed:!0,commitRange:[]}):n={collapsed:o,commitRange:[]},o||n.commitRange.push(a)}return n&&t.push(n),t})(t.value).reverse().map(function(e){return(0,i._)((0,r._)({},e),{commitRange:e.commitRange.reverse()})}),e),k.set((0,v.Ok)(n))):k.set("notInitialized"===t.error.type?(0,v.Ok)(_([],e)):(0,v.Err)(t.error)),C.set(!1),[2]}})})()}:null},[E,A,C,k]),I=(h=(0,m.useCreateObservable)(null),(0,c.useChatHook)("received-completed-event",function(e){var t=e.event,n=t.contents.contents;if((0,u.isKind)(n,"agentTimelineEventContents")){var r=n.agentTimelineEventContents.toolData;switch(null==r?void 0:r.$kind){case"commitData":case"revertData":h.set(t.id)}}}),(0,s.useMemo)(function(){return new f.StatelessMulticast(function(e){var t=h.subscribe(function(t){null!==t&&e.next(t)});return function(){return t.unsubscribe()}})},[h]));(0,g.useObserver)(I,{next:function(){return null==R?void 0:R()}});var P=(S=(0,m.useCreateObservable)(0),(0,c.useChatHook)("client-reverted-session",function(){S.set(S.current+1)}),(0,s.useMemo)(function(){return new f.StatelessMulticast(function(e){var t=S.subscribe(function(t){0!==t&&e.next(t)});return function(){return t.unsubscribe()}})},[S]));(0,g.useObserver)(P,{next:function(){null==R||R()}}),(0,s.useEffect)(function(){R&&R()},[R]);var M=(0,x.default)(R),O=(0,y.usePid2Callback)(function(e){return function(t,r){return(0,n._)(function(){var n,i;return(0,a._)(this,function(a){switch(a.label){case 0:return[4,e.git.addNote.rpc({object:t,message:r,force:!0})];case 1:if(!(i=a.sent()).ok){if("UNEXPECTED_DISCONNECT"===i.payload.code)return[2];throw Error("failed to rename commit")}return[4,null==(n=M.current)?void 0:n.call(M)];case 2:return a.sent(),[2]}})})()}},[M]),V=(0,s.useCallback)(function(e){var t=!0,n=!1,r=void 0;try{for(var i,a,o,s=(null!=(a=null==(i=D.current)?void 0:i.value)?a:[])[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var l=o.value;if(l.hash===e)return l}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return null},[]),N=(0,s.useMemo)(function(){return{checkpoints:p.Observable.from(k),loading:p.Observable.from(C),checkpointMade:I,renameCommit:O,findCommit:V}},[k,C,I,O,V]);return(0,o.jsx)(w.Provider,{value:N,children:j})}function T(){var e=(0,s.useContext)(w);if(!e)throw Error("useCheckpoints must be used within a CheckpointProvider");return e}function k(){var e=T().checkpoints;return(0,h.useObservableMemo)(function(){return e.map(function(e){return(null==e?void 0:e.ok)?e.value.reduce(function(e,t){return e+t.commitRanges.reduce(function(e,t){return e+t.commitRange.length},0)},0):0})},[e])}e.s(["CheckpointProvider",()=>j,"commitAuthorToCheckpointAuthor",()=>S,"trailers",()=>b,"useCheckpoints",()=>T,"useNumCheckpointsCompleted",()=>k])},849954,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(389959),i=e.i(82259);e.i(877212);var a=e.i(924908);e.i(925218);var o=e.i(267103),s=e.i(664152),l=e.i(509908);function u(e){return(0,t._)(function(e){var t,r,a,o,l,u,c,d,p,f,m,h;return(0,n._)(this,function(n){switch(n.label){case 0:t=e.chatter,r=e.revertedToSessionId,a=e.revertedToEventId,o=e.commitId,l=e.title,u=e.onSessionChange,c=e.currentSession,d=e.rollbackDatabaseTimestamp,p=e.rollbackDeploymentBuildId,f=e.rollbackDatabase,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,c.agent.update(i.AgentRunState.AGENT_STATE_PAUSED)];case 2:return n.sent(),[3,4];case 3:return n.sent(),s.logger.warn("Failed to stop agent before checkpoint rollback.",{sessionId:c.id,commitId:o,checkpointTitle:l}),[3,4];case 4:return[4,t.sessions.rollback({targetCommitId:o,newSessionTitle:"Revert to: '".concat(l,"'"),originalSessionId:c.id,deploymentBuildId:p,databaseRollbackTimestamp:d,rollbackDatabase:f,RevertedToSessionId:r?{$kind:"revertedToSessionId",revertedToSessionId:r}:void 0,RevertedToEventId:a?{$kind:"revertedToEventId",revertedToEventId:a}:void 0})];case 5:if(!(m=n.sent()).ok)throw Error("failed to revert");return h=m.payload,u(h),[2]}})}).apply(this,arguments)}function c(e){var i=e.checkpoint,s=e.onSessionChange,c=(0,a.useChatter)(),d=(0,o.useObservable)(c.sessions.agent.current);return{onRevert:(0,r.useCallback)(function(e){return(0,t._)(function(){var t;return(0,n._)(this,function(n){switch(n.label){case 0:if(!d)return[2];return(0,l.trackAgentAnalyticsEvent)({action:"revert_started",messageText:"Reverting to checkpoint: '".concat(i.title,"'"),sessionId:i.sessionId}),[4,u({chatter:c,revertedToSessionId:i.sessionId,revertedToEventId:i.parentEventId,commitId:i.commitId,title:i.title,onSessionChange:s,rollbackDatabaseTimestamp:null==e?void 0:e.rollbackDatabaseTimestamp,rollbackDeploymentBuildId:null==e?void 0:e.rollbackDeploymentBuildId,rollbackDatabase:null!=(t=null==e?void 0:e.rollbackDatabase)&&t,currentSession:d})];case 1:return n.sent(),[2]}})})()},[c,d,i,s])}}e.s(["default",()=>c,"revert",()=>u])},680183,705705,963931,e=>{"use strict";var t,n,r=e.i(960933),i=((t={}).HEAD="HEAD",t.REMOTE_HEAD="REMOTE_HEAD",t.BRANCH="BRANCH",t.REMOTE_BRANCH="REMOTE_BRANCH",t.TAG="TAG",t);r.Type.Enum(i);var a=r.Type.Object({type:r.Type.Literal("BRANCH"),name:r.Type.String()}),o=r.Type.Object({type:r.Type.Literal("HEAD"),name:r.Type.Literal("HEAD"),detached:r.Type.Boolean(),ref:r.Type.Union([a,r.Type.Null()])}),s=r.Type.Object({type:r.Type.Literal("REMOTE_HEAD"),name:r.Type.Literal("HEAD"),remote:r.Type.String()}),l=r.Type.Object({type:r.Type.Literal("REMOTE_BRANCH"),name:r.Type.String(),remote:r.Type.String(),branch:r.Type.String()}),u=r.Type.Object({type:r.Type.Literal("TAG"),name:r.Type.String()}),c=r.Type.Union([o,s,a,l,u]);e.s(["GitBranchRefSchema",()=>a,"GitRefSchema",()=>c,"GitRefType",()=>i,"GitRemoteBranchRefSchema",()=>l],705705);var d=r.Type.Object({name:r.Type.String(),email:r.Type.String(),date:r.Type.Number()});e.s(["GitUserSchema",()=>d],963931);var p=((n={}).LOCAL="LOCAL",n.REMOTE="REMOTE",n.TRACKED="TRACKED",n);r.Type.Enum(p);var f=r.Type.Object({hash:r.Type.String(),author:d}),m=r.Type.Object({type:r.Type.Literal("LOCAL"),name:r.Type.String(),push:r.Type.Union([l,a,r.Type.Null()]),commit:f,remote:r.Type.Null(),tracking:r.Type.Null()}),h=r.Type.Object({type:r.Type.Literal("REMOTE"),name:r.Type.String(),remote:r.Type.String(),commit:f,push:r.Type.Null(),tracking:r.Type.Null()}),g=r.Type.Object({type:r.Type.Literal("TRACKED"),name:r.Type.String(),remote:r.Type.String(),push:l,tracking:h,commit:f}),v=r.Type.Union([m,h,g]);r.Type.Union([v,a,l,r.Type.String()]),e.s(["GitBranchSchema",()=>v,"GitBranchType",()=>p],680183)},526962,e=>{"use strict";var t,n=e.i(960933),r=e.i(680183),i=((t={}).DASHBOARD="DASHBOARD",t.BRANCH="BRANCH",t.CURRENT_BRANCH="CURRENT_BRANCH",t.SETTINGS="SETTINGS",t.COMMIT="COMMIT",t),a=n.Type.Union([n.Type.Object({type:n.Type.Literal("DASHBOARD")}),n.Type.Object({type:n.Type.Literal("BRANCH"),branch:r.GitBranchSchema}),n.Type.Object({type:n.Type.Literal("CURRENT_BRANCH")}),n.Type.Object({type:n.Type.Literal("SETTINGS")}),n.Type.Object({type:n.Type.Literal("COMMIT"),hash:n.Type.String()})]);e.s(["GitPaneModeSchema",()=>a,"GitPaneModeType",()=>i])},535076,e=>{"use strict";e.s(["FEED_PADDING_BOTTOM",()=>6,"FEED_PADDING_INLINE_DESKTOP",()=>4,"FEED_PADDING_INLINE_MOBILE",()=>8,"FEED_PADDING_TOP",()=>6])},721341,e=>{e.v({grow1:"ConvertMockupToAppRequest-module__Cla0pq__grow1",grow3:"ConvertMockupToAppRequest-module__Cla0pq__grow3"})},418689,e=>{"use strict";e.s(["ConvertMockupToAppRequest",()=>w]);var t=e.i(297083),n=e.i(817556),r=e.i(276385);e.i(877212);var i=e.i(924908);e.i(925218);var a=e.i(267103),o=e.i(712903),s=e.i(409570),l=e.i(709485),u=e.i(596139),c=e.i(993796),d=e.i(142365),p=e.i(858248);e.i(653863);var f=e.i(973519),m=e.i(117328),h=e.i(97207),g=e.i(330069),v=e.i(443394),x=e.i(173703),y=e.i(140487),b=e.i(960178),S=e.i(625484),_=e.i(721341);function w(e){var w=e.message,j=e.id,T=(0,f.useGlobalModal)().show,k=(0,v.getCurrentUrl)(),D=(0,i.useChatter)(),C=(0,a.useObservable)(D.sessions.agent.current),E=(0,h.useSendConvertMockupToAppResponse)(null!=C?C:null),A=(0,g.useShouldSeeFreemiumExperience)().shouldSeeFreemiumExperience,R=(0,c.useFlag)({controlName:"flag-free-plan",default:!1});return(0,d.useTrackEffect)(l.events.MOCKUP_TO_APP_CHAT_NUDGE,{action:"impression",agent_message:w,event_id:j}),(0,r.jsx)(m.EventContainer,{children:(0,r.jsxs)(x.ShadesSurface,{gap:4,p:8,elevate:"2x",br:8,children:[(0,r.jsx)(b.Text,{textWrap:"pretty",children:w}),(0,r.jsxs)(S.View,{row:!0,gap:4,children:[(0,r.jsx)(y.Button,{clsx:_.default.grow1,text:"Dismiss",onClick:function(){(0,p.track)(l.events.MOCKUP_TO_APP_CHAT_NUDGE,{action:"select_dismiss",agent_message:w,event_id:j}),E({approved:!1,additionalComments:"",requestEventId:j})}}),R&&A?(0,r.jsx)(y.Button,{clsx:_.default.grow3,text:"Upgrade to ".concat(u.corePlanName),onClick:function(){return(0,t._)(function(){return(0,n._)(this,function(e){switch(e.label){case 0:return(0,p.track)(l.events.MOCKUP_TO_APP_CHAT_NUDGE,{action:"select_upgrade",agent_message:w,event_id:j}),[4,T("MembershipPurchaseModal",{analyticsContext:{upgrade:{context:"design_mode_conversion_upsell"}},redirectPath:k})];case 1:return e.sent(),[2]}})})()},iconLeft:(0,r.jsx)(o.default,{}),colorway:"primary"}):(0,r.jsx)(y.Button,{clsx:_.default.grow3,text:"Convert to App",onClick:function(){(0,p.track)(l.events.MOCKUP_TO_APP_CHAT_NUDGE,{action:"select_open_modal",agent_message:w,event_id:j}),T("MockupToAppModal",{onSendConvertMockupToAppResponse:E,origin:"chat_nudge",eventId:j})},iconLeft:(0,r.jsx)(s.default,{}),colorway:"primary"})]})]})})}},758365,e=>{e.v({tooltipTitle:"DynamicIntelligenceTooltip-module__dEmn7G__tooltipTitle"})},346227,e=>{e.v({userMessageAttachments:"UserMessage-module__wrN9Aa__userMessageAttachments",userMessageMain:"UserMessage-module__wrN9Aa__userMessageMain",userMessageSurface:"UserMessage-module__wrN9Aa__userMessageSurface",userMessageSurfaceShades:"UserMessage-module__wrN9Aa__userMessageSurfaceShades"})},831147,798790,e=>{"use strict";var t=e.i(276385),n=e.i(82259),r=e.i(389959),i=e.i(629536),a=e.i(731145),o=e.i(121025),s=e.i(97133),l=e.i(96250),u=e.i(659042),c=e.i(674347),d=e.i(815900),p=e.i(917095),f=e.i(993796),m=e.i(266645),h=e.i(200260),g=e.i(64256),v=e.i(163525),x=e.i(277276),y=e.i(755323),b=e.i(613355),S=e.i(960178),_=e.i(625484),w=e.i(758365),j={extendedThinking:{title:"Extended thinking",description:"~1.25x cost"},highPowerModel:{title:"High power model"}};function T(e){var n=j[e.type];return(0,t.jsxs)(_.View,{gap:4,children:[(0,t.jsx)(S.Text,{variant:"small",css:b.rcss.fontWeight.medium,clsx:w.default.tooltipTitle,children:n.title}),n.description?(0,t.jsx)(S.Text,{variant:"small",children:n.description}):null]})}var k=e.i(480028),D=e.i(173703),C=e.i(585225),E=e.i(257811),A=e.i(751273),R=e.i(346227);function I(e){var r,d=e.created,p=e.children,m=e.agentConfig,h=e.metaContent,g=(0,f.useFlag)({controlName:"flag-high-power-model-rollout",default:!1}),v=null!=(r=null==m?void 0:m.thinkingEnabled)&&r,x=(null==m?void 0:m.modelProfile)===n.ModelProfile.MODEL_PROFILE_ADVANCED,y=(null==m?void 0:m.agentMode)===n.AgentMode.AGENT_MODE_DISCUSSION,b=(null==m?void 0:m.agentMode)===n.AgentMode.AGENT_MODE_QUICK_EDIT,w=(null==m?void 0:m.agentInitialBuildTier)===n.AgentInitialBuildTier.AGENT_INITIAL_BUILD_TIER_LITE,j=(null==m?void 0:m.maxAutonomyEnabled)||(null==m?void 0:m.autonomyLevel)===n.AutonomyLevel.AUTONOMY_LEVEL_MAX,D=(null==m?void 0:m.initialBuildMode)===n.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_DESIGN;return(0,t.jsx)(_.View,{py:16,justify:"end",pl:32,row:!0,gap:8,"data-event-type":"user-message","data-cy":"user-message",children:(0,t.jsxs)(_.View,{clsx:R.default.userMessageMain,shrink:!0,align:"end",gap:6,children:[p,(0,t.jsxs)(_.View,{row:!0,gap:8,align:"center",children:[!x||b||g?null:(0,t.jsx)(A.Tooltip,{tooltip:(0,t.jsx)(T,{type:"highPowerModel"}),children:(0,t.jsx)(u.default,{size:12,color:k.tokens.foregroundDimmest})}),v?(0,t.jsx)(A.Tooltip,{tooltip:(0,t.jsx)(T,{type:"extendedThinking"}),children:(0,t.jsx)(o.default,{size:12,color:k.tokens.foregroundDimmest})}):null,y?(0,t.jsx)(A.Tooltip,{tooltip:(0,t.jsxs)(_.View,{children:[(0,t.jsx)(S.Text,{variant:"small",children:"Plan"}),(0,t.jsxs)(S.Text,{variant:"small",color:"dimmer",children:[i.AGENT_NAME," cannot make changes to your app."]})]}),children:(0,t.jsx)(l.default,{size:12,color:k.tokens.foregroundDimmest})}):null,b||w?(0,t.jsx)(A.Tooltip,{tooltip:(0,t.jsx)(S.Text,{variant:"small",children:"Fast"}),children:(0,t.jsx)(a.default,{size:12,color:k.tokens.foregroundDimmest})}):null,j&&!b?(0,t.jsx)(A.Tooltip,{tooltip:"Max autonomy",children:(0,t.jsx)(c.default,{size:12,color:k.tokens.foregroundDimmest})}):null,D?(0,t.jsx)(A.Tooltip,{tooltip:"Design",children:(0,t.jsx)(s.default,{size:12,color:k.tokens.foregroundDimmest})}):null,h,d?(0,t.jsx)(_.View,{row:!0,children:(0,t.jsx)(E.Timestamp,{live:!0,date:d,textVariant:"small",textColor:"dimmest",textTransform:"first-letter-capitalized",dateFormat:"switch"})}):null]})]})})}var P=(0,r.memo)(function(e){var n=e.message,a=e.attachments,o=e.created,s=e.acknowledged,l=e.readFile,u=e.targetedElement,c=e.openPane,d=e.agentConfig,f=e.requestedStackBlueprint,m=(0,r.useMemo)(function(){if(!f)return null;var e=(0,i.getStackOptionFromBlueprint)(f);if(!e)return null;var n=p.STACK_PILL_OPTIONS_MAP.get(e);if(!n)return null;var r=n.icon;return(0,t.jsx)(A.Tooltip,{tooltip:n.label,children:(0,t.jsx)(r,{size:12,color:k.tokens.foregroundDimmest})})},[f]);return(0,t.jsxs)(I,{created:o,agentConfig:d,metaContent:m,children:[l?(0,t.jsx)(M,{attachments:a,readFile:l}):null,(0,t.jsx)(O,{message:n,acknowledged:s,targetedElement:u,openPane:c,agentMode:null==d?void 0:d.agentMode})]})});function M(e){var n=e.attachments,r=e.readFile,a=n.filter(function(e){return!(e.path.split("/").pop()||"").startsWith(y.TARGETED_ELEMENT_SCREENSHOT_PREFIX)});return 0===a.length?null:(0,t.jsx)(_.View,{clsx:R.default.userMessageAttachments,children:(0,t.jsx)(m.default,{fileAttachments:a.map(function(e){return(0,t.jsx)(h.FileAttachment,{readFile:r,attachment:e,getAttachmentTypeDisclaimer:(0,g.getAttachmentTypeDisclaimer)({aiName:(0,i.getAgentName)({capitalizeFirstChar:!0})})},e.path)})})})}function O(e){var r=e.message,i=e.acknowledged,a=e.targetedElement,o=e.openPane,s=e.agentMode;if(!r)return null;var l=(0,d.replaceJsonMarkers)(r);return(0,t.jsx)(A.Tooltip,{tooltip:"The agent is wrapping up its current step, and will respond shortly",isDisabled:i,children:(0,t.jsxs)(V,{agentMode:s,acknowledged:i,children:[(0,t.jsx)(v.MessageMarkdown,{text:l,messageState:n.EventState.COMPLETE,textColor:"shades"}),a?(0,t.jsx)(x.TargetedElement,{targetedElement:a,openPane:o}):null]})})}function V(e){var r=e.agentMode,i=e.acknowledged,a=e.children;if((0,C.useIsShadesSupported)()){var o=r===n.AgentMode.AGENT_MODE_DISCUSSION;return(0,t.jsx)(D.ShadesSurface,{colorShade:o?"default":"notice",elevate:o?"2x":"1x","data-acknowledged":i,px:8,py:6,br:4,clsx:R.default.userMessageSurfaceShades,children:a})}return(0,t.jsx)(D.ShadesSurface,{clsx:R.default.userMessageSurface,"data-acknowledged":i,"data-agent-mode":function(e){if(e)switch(e){case n.AgentMode.AGENT_MODE_DISCUSSION:return"plan";case n.AgentMode.AGENT_MODE_GENERAL:return"general";default:return}}(r),px:8,py:6,children:a})}function N(e){var r=e.created,i=e.additionalComments;return(0,t.jsx)(I,{created:r,children:(0,t.jsx)(V,{agentMode:n.AgentMode.AGENT_MODE_GENERAL,acknowledged:!0,children:(0,t.jsx)(S.Text,{children:"Convert to app".concat(i?": ".concat(i):"")})})})}e.s(["UserMessage",()=>P,"UserMessageContainer",()=>I,"UserMessageContent",()=>O,"UserMessageSurface",()=>V],798790),e.s(["ConvertMockupToAppResponse",()=>N],831147)},269746,e=>{"use strict";var t=e.i(276385),n=e.i(87995),r=e.i(416746),i=e.i(761201),a=e.i(858248),o=e.i(709485),s=e.i(712516),l=e.i(140487),u=e.i(91720),c=e.i(396776),d=e.i(960178),p=e.i(625484);function f(e){var n=e.performPaneOperation,f=e.editSecretsAuthz;return(0,t.jsx)(s.default,{pane:{type:"envEditor"},bodyText:(0,t.jsxs)(p.View,{gap:8,children:[f.isAuthorized?null:(0,t.jsx)(c.StatusBanner,{icon:(0,t.jsx)(r.default,{}),text:f.message}),(0,t.jsx)(u.ButtonLink,{href:i.LINKS_DOCS.SECRETS_SAFETY,target:"_blank",rel:"noopener",variant:"underlined",text:"Learn how Replit keeps your Secrets safe."}),(0,t.jsxs)(p.View,{row:!0,gap:4,children:[(0,t.jsx)(d.Text,{children:"Not sure where to start? "}),(0,t.jsx)(l.Button,{variant:"underlined",text:"Explore Integrations.",onClick:function(){n({operation:"open",pane:{type:"integrations"}}),(0,a.track)(o.events.TOOL_OPENED,{source:"secretsPaneNudge",tool:"integrations"})}})]})]})})}function m(e){var r=e.message;return(0,t.jsx)(s.default,{pane:{type:"envEditor"},bodyText:(0,t.jsxs)(p.View,{gap:4,children:[(0,t.jsx)("div",{children:r}),(0,t.jsx)("div",{children:(0,t.jsx)(n.default,{href:i.LINKS_DOCS.SECRETS,target:"_blank",rel:"noopener",children:"Visit the secrets documentation to learn more."})})]})})}e.s(["EnvEditorEmpty",()=>f,"EnvEditorUnauthorized",()=>m])},18060,e=>{e.v({item:"AccountSecrets-module__MYsAnW__item",itemName:"AccountSecrets-module__MYsAnW__itemName",itemValue:"AccountSecrets-module__MYsAnW__itemValue",itemValueText:"AccountSecrets-module__MYsAnW__itemValueText",list:"AccountSecrets-module__MYsAnW__list",root:"AccountSecrets-module__MYsAnW__root"})},343166,e=>{e.v({iconBase:"EnvVarTypeIcon-module__7n-TXa__iconBase",iconDevOnly:"EnvVarTypeIcon-module__7n-TXa__iconDevOnly",iconProdOnly:"EnvVarTypeIcon-module__7n-TXa__iconProdOnly",iconShared:"EnvVarTypeIcon-module__7n-TXa__iconShared",iconSplit:"EnvVarTypeIcon-module__7n-TXa__iconSplit"})},800766,e=>{e.v({gridContainer:"AddEnvVar-module__a6fKCG__gridContainer"})},998803,e=>{e.v({copyButtonWrapper:"EnvVarField-module__tfLO-a__copyButtonWrapper",fieldInput:"EnvVarField-module__tfLO-a__fieldInput",inputWrapper:"EnvVarField-module__tfLO-a__inputWrapper",isEditing:"EnvVarField-module__tfLO-a__isEditing",isKey:"EnvVarField-module__tfLO-a__isKey"})},717574,e=>{e.v({wrapper:"SecretItemMenu-module__NqaiNa__wrapper"})},802743,e=>{e.v({devValueWrapperEditing:"EnvVarItem-module__qoP15G__devValueWrapperEditing",gridContainer:"EnvVarItem-module__qoP15G__gridContainer",gridRow:"EnvVarItem-module__qoP15G__gridRow",valueColumnEditing:"EnvVarItem-module__qoP15G__valueColumnEditing"})},365870,e=>{e.v({loadingContainer:"EnvVarsEditor-module__aQqAba__loadingContainer"})},305669,205158,630937,14257,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(389959),i=e.i(712771),a=e.i(979530),o=e.i(416746),s=e.i(882848),l=e.i(480028),u=e.i(173703),c=e.i(140487),d=e.i(127227),p=e.i(136540),f=e.i(51054),m=e.i(396776),h=e.i(960178),g=e.i(751273),v=e.i(625484),x=e.i(18060),y=function(e){var u=e.name,c=e.value,f=e.checked,m=e.onCheck,y=e.disabled,b=e.disabledReason,S=e.linked,_=(0,t._)((0,r.useState)(!0),2),w=_[0],j=_[1];return(0,n.jsxs)(v.View,{clsx:x.default.item,py:12,px:8,children:[(0,n.jsxs)(v.View,{row:!0,gap:8,align:"center",clsx:x.default.itemName,children:[S?(0,n.jsx)(g.Tooltip,{tooltip:"Linked to Account Secrets",children:(0,n.jsx)(s.default,{color:l.tokens.accentPrimaryStronger})}):(0,n.jsx)(d.Checkbox,{checked:f,onChange:m,id:"secret-".concat(u),name:"Select secret",disabled:y}),(0,n.jsx)("label",{htmlFor:"secret-".concat(u),children:u}),y&&!S&&b?(0,n.jsx)(g.Tooltip,{tooltip:b,children:(0,n.jsx)(o.default,{color:l.tokens.foregroundDimmer})}):null]}),(0,n.jsxs)(v.View,{row:!0,gap:4,align:"center",clsx:x.default.itemValue,"data-sensitive":w,justify:"end",children:[(0,n.jsx)(h.Text,{shrink:!0,clsx:x.default.itemValueText,multiline:!1,children:w?"****************":c}),(0,n.jsx)(p.IconButton,{alt:w?"Hide secret":"Show secret",onClick:function(){return j(!w)},children:w?(0,n.jsx)(a.default,{}):(0,n.jsx)(i.default,{})})]})]})};function b(e){var i=e.secrets,a=e.onSelectSecrets,s=e.actionText,l=e.helpText,d=e.existingKeys,p=e.linkedSecrets,g=void 0===p?[]:p,b=(0,t._)((0,r.useState)(new Set),2),S=b[0],_=b[1],w=(0,t._)((0,r.useState)(""),2),j=w[0],T=w[1],k=g.length>=10,D=g.length+S.size>=10,C=(0,r.useCallback)(function(){return i.filter(function(e){return S.has(e.name)})},[i,S]),E=new Set(g.map(function(e){return e.secret.id})),A=j.trim()?i.filter(function(e){return e.name.toLowerCase().includes(j.toLowerCase())}):i;return(0,n.jsxs)(v.View,{clsx:x.default.root,p:8,gap:8,children:[k?(0,n.jsx)(m.StatusBanner,{colorway:"warning",icon:(0,n.jsx)(o.default,{}),text:"You've reached the limit of ".concat(10," linked secrets. Please unlink some secrets before adding more.")}):D?(0,n.jsx)(m.StatusBanner,{colorway:"warning",icon:(0,n.jsx)(o.default,{}),text:"Selecting another secret would exceed the limit of ".concat(10," linked secrets.")}):null,(0,n.jsx)(v.View,{gap:4,row:!0,justify:"space-between",children:(0,n.jsx)(h.Text,{variant:"subheadDefault",children:"Account secrets"})}),(0,n.jsx)(h.Text,{color:"dimmer",children:l}),(0,n.jsx)(v.View,{shrink:0,children:(0,n.jsx)(f.SearchBar,{placeholder:"Search secrets...",value:j,onChange:function(e){return T(e.target.value)},onClear:function(){return T("")}})}),(0,n.jsx)(u.ShadesSurface,{shrink:!0,br:"default",clsx:x.default.list,children:0===A.length?(0,n.jsx)(v.View,{p:16,align:"center",children:(0,n.jsx)(h.Text,{color:"dimmer",children:j.trim()?"No secrets match your search":"No account secrets available"})}):A.map(function(e){return(0,n.jsx)(y,{checked:S.has(e.name),onCheck:function(t){t&&g.length+S.size>=10||_(function(n){var r=new Set(n);return t?r.add(e.name):r.delete(e.name),r})},value:e.value||"",name:e.name,linked:E.has(e.id),disabled:d.has(e.name)||k||!S.has(e.name)&&D,disabledReason:d.has(e.name)?"A secret with this name already exists in this Repl":k?"Secret limit reached. Please unlink some secrets before adding more.":D&&!S.has(e.name)?"Cannot select more secrets. This would exceed the limit of ".concat(10):void 0},e.name)})}),(0,n.jsx)(c.Button,{colorway:"primary",text:s,disabled:0===S.size,onClick:function(){return a(C())},size:"small"})]})}e.s(["default",()=>b],305669);var S=e.i(269848),_=e.i(297083),w=e.i(817556),j=e.i(40916),T=e.i(878420),k=e.i(64386),D=e.i(116235),C=e.i(399245);function E(e){return(0,n.jsx)(D.default,(0,k._)((0,T._)({},e),{children:(0,n.jsx)("path",{d:"M16 18.25a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3a.75.75 0 0 1 .75-.75ZM4.64 11.22a.75.75 0 0 1 1.06 1.06L4 13.98l-.143.156a4.254 4.254 0 0 0 .244 5.854l.15.14a4.257 4.257 0 0 0 5.759-.14l1.7-1.7a.75.75 0 0 1 1.06 1.06l-1.72 1.72a5.757 5.757 0 0 1-7.99 0l-.001-.002a5.754 5.754 0 0 1-.14-8.129l1.72-1.72ZM22 15.25a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5h3ZM16.945 1.317c1.49 0 2.923.578 3.995 1.613l.001.002a5.752 5.752 0 0 1 .253 8.003.751.751 0 0 1-.105.137l-1.72 1.71a.75.75 0 0 1-1.058-1.064l1.61-1.6A.755.755 0 0 1 20 10.02a4.255 4.255 0 0 0-.1-6.01l-.152-.14a4.257 4.257 0 0 0-5.75.131l-1.72 1.71a.75.75 0 1 1-1.056-1.063l1.72-1.71.007-.008a5.757 5.757 0 0 1 3.996-1.613ZM5 7.25a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1 0-1.5h3ZM8 1.25a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0V2A.75.75 0 0 1 8 1.25Z"})}))}e.s(["default",()=>E],205158);var A=e.i(343166),R={split:{tooltip:"This configuration has separate values for your published app and when testing on Replit",icon:E,styleClass:A.default.iconSplit},shared:{tooltip:"This configuration is shared between your published app and when testing on Replit",icon:s.default,styleClass:A.default.iconShared},prodOnly:{tooltip:"This configuration only exists in your published app",icon:C.default,styleClass:A.default.iconProdOnly},devOnly:{tooltip:"This configuration only exists when testing on Replit",icon:function(e){return(0,n.jsxs)(D.default,(0,k._)((0,T._)({},e),{children:[(0,n.jsx)("path",{d:"M9.47 6.47a.75.75 0 1 1 1.06 1.06L8.06 10l2.47 2.47a.75.75 0 0 1-1.06 1.06l-3-3a.75.75 0 0 1 0-1.06l3-3ZM13.47 6.47a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 0 1-1.06-1.06L15.94 10l-2.47-2.47a.75.75 0 0 1 0-1.06Z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M20 2.25A2.75 2.75 0 0 1 22.75 5v10A2.75 2.75 0 0 1 20 17.75h-7.25v2.5H16a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1 0-1.5h3.25v-2.5H4A2.75 2.75 0 0 1 1.25 15V5A2.75 2.75 0 0 1 4 2.25h16ZM4 3.75c-.69 0-1.25.56-1.25 1.25v10c0 .69.56 1.25 1.25 1.25h16c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25H4Z",clipRule:"evenodd"})]}))},styleClass:A.default.iconDevOnly}};function I(e){var t=R[e.envVarType];if(!t)return null;var r=t.icon;return(0,n.jsx)(g.Tooltip,{tooltip:t.tooltip,maxWidth:180,children:(0,n.jsx)(u.ShadesSurface,{align:"center",justify:"center",br:4,clsx:[A.default.iconBase,t.styleClass],children:(0,n.jsx)(r,{})})})}var P=e.i(939562),M=e.i(607278),O=e.i(818503),V=e.i(795581),N=e.i(800766),B={shared:"shared",production:"prodOnly",development:"devOnly"};function L(e){var i=e.onClose,a=e.onAdd,o=e.existingKeysMap,s=e.environment,l=(0,t._)((0,r.useState)({key:"",value:"",environment:s}),2),u=l[0],d=l[1],p=(0,t._)((0,r.useState)(!1),2),f=p[0],m=p[1],h=(0,r.useMemo)(function(){var e=u.key.trim();if(!e)return"Key is required";var t=o.get(e);if(t){if(t.has(u.environment))return"This variable already exists in this environment. Edit it instead.";if("shared"===u.environment){if(t.has("production")||t.has("development"))return"This key exists in production or development. Cannot add to shared as it would conflict."}else if(t.has("shared"))return"This key exists in shared. Cannot add to production/development as it would conflict."}},[o,u.key,u.environment]),g=u.key.trim().length>0&&!h,x=function(){m(!0),g&&(a({key:u.key.trim(),value:u.value,environment:u.environment}),i())};return(0,n.jsxs)(v.View,{py:8,gap:8,onKeyDown:function(e){"Enter"===e.key&&x()},children:[(0,n.jsxs)(v.View,{clsx:N.default.gridContainer,align:"end",children:[(0,n.jsx)(I,{envVarType:B[s]}),(0,n.jsx)(v.View,{gap:2,children:(0,n.jsxs)(V.TextField,{validate:function(){return h},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"envVarKey",value:u.key,onChange:function(e){return d(function(t){return(0,k._)((0,T._)({},t),{key:e})})},isInvalid:f&&!!h,children:[(0,n.jsx)(O.Label,{color:"dimmer",multiline:!1,children:"Key"}),(0,n.jsx)(M.Input,{autoComplete:"off",autoFocus:!0}),f?(0,n.jsx)(P.FieldError,{children:h}):null]})}),(0,n.jsx)(v.View,{gap:2,children:(0,n.jsxs)(V.TextField,{isRequired:!0,minLength:1,name:"envVarValue",value:u.value,onChange:function(e){return d(function(t){return(0,k._)((0,T._)({},t),{value:e})})},children:[(0,n.jsx)(O.Label,{color:"dimmer",multiline:!1,children:"Value"}),(0,n.jsx)(M.Input,{autoComplete:"off"})]})})]}),(0,n.jsxs)(v.View,{row:!0,gap:8,justify:"end",children:[(0,n.jsx)(c.Button,{size:"small",text:"Cancel",onClick:function(){return i()}}),(0,n.jsx)(c.Button,{size:"small",text:"Add configuration",colorway:"primary",disabled:!g,onClick:x})]})]})}var U=e.i(721281),H=e.i(88619),F=e.i(998803);function q(e){var t,r=e.value,i=e.isEditing,a=e.onChange,o=e.copyTooltipText,s=e.isKey,l=e.placeholder,u=i&&a;return(0,n.jsxs)(v.View,{clsx:F.default.inputWrapper,children:[!u&&(0,n.jsx)(v.View,{clsx:F.default.copyButtonWrapper,children:(0,n.jsx)(H.CopyIconButton,{tooltipText:o,textToCopy:r})}),(0,n.jsx)(M.Input,{value:r,onChange:function(e){return a(e.target.value)},clsx:[F.default.fieldInput,(t={},(0,U._)(t,F.default.isEditing,u),(0,U._)(t,F.default.isKey,void 0!==s&&s),t)],disabled:!i,placeholder:l})]})}var z=e.i(416298),G={both:{envLabel:"published app and workspace testing",buttonText:"Remove both",environments:["production","development"]},production:{envLabel:"published app",buttonText:"Remove published app value",environments:["production"]},development:{envLabel:"workspace testing",buttonText:"Remove workspace testing value",environments:["development"]}};function W(e){var t,r,i,a,o,s,l=e.conflict,u=e.onDeleteEnvVar,d=e.contextType,p=G[r=(t=l.conflictingEnvs).includes("production"),i=t.includes("development"),r&&i?"both":r?"production":"development"],f=(a=l.key,o=p.envLabel,s=p.environments.length>1,"singleEnv"===d?"This ".concat(o," value for ").concat(a," is overriding the shared value."):s?"".concat(a," has ").concat(o," values that override the shared value."):"".concat(a," has a ").concat(o," value that overrides the shared value."));return(0,n.jsx)(m.StatusBanner,{colorway:"warning",icon:(0,n.jsx)(z.default,{}),text:(0,n.jsx)(h.Text,{variant:"small",children:f}),action:(0,n.jsx)(c.Button,{size:"small",text:p.buttonText,onClick:function(){p.environments.forEach(function(e){u(l.key,e)})}})})}var K=e.i(602686),Y=e.i(204977),Z=e.i(828322),$=e.i(491194),X=e.i(257982),Q=e.i(119274),J=e.i(717574);function ee(e){var t=e.onEdit,r=e.onDelete,i=function(e){switch(e.type){case"disabled":case"deploymentOnly":return null;case"synced":return{label:"Unsync from workspace value",icon:(0,n.jsx)(E,{}),onClick:e.optOut};case"unsynced":return{label:"Sync to workspace value",icon:(0,n.jsx)(s.default,{}),onClick:e.sync};case"shared":return{label:"Add testing value",icon:(0,n.jsx)(j.default,{}),onClick:e.addTestingOverride};case"split":return{label:"Remove testing value",icon:(0,n.jsx)(K.default,{}),onClick:e.removeOverride};case"prodOnly":case"devOnly":return{label:"Convert to shared configuration",icon:(0,n.jsx)(s.default,{}),onClick:e.convertToShared};default:(0,X.default)(e)}}(e.environmentControlState);return(0,n.jsx)(u.ShadesSurface,{clsx:J.default.wrapper,children:(0,n.jsxs)(Q.PopupMenu,{placement:"bottom right",trigger:(0,n.jsx)(p.IconButton,{size:32,tooltipBehavior:"hidden",alt:"Options",children:(0,n.jsx)(Z.default,{})}),children:[(0,n.jsx)(Q.MenuItem,{label:"Edit",icon:(0,n.jsx)(Y.default,{}),onAction:t}),i?(0,n.jsx)(Q.MenuItem,{label:i.label,icon:i.icon,onAction:i.onClick}):null,(0,n.jsx)(Q.MenuItem,{label:"Delete",icon:(0,n.jsx)($.default,{}),isDestructive:!0,onAction:r})]})})}e.s(["SecretItemMenu",()=>ee],630937);var et=e.i(802743);function en(e){var i=e.envKey,a=e.onUpdate,s=e.onDeleteEnvVar,u=(0,t._)((0,r.useState)(!1),2),d=u[0],p=u[1],f=(0,t._)((0,r.useState)(!1),2),m=f[0],x=f[1],y=(0,t._)((0,r.useState)(i),2),b=y[0],S=y[1],_=(0,t._)((0,r.useState)(function(){switch(e.type){case"shared":case"devOnly":case"prodOnly":return e.value;case"split":return e.prodValue}}),2),w=_[0],j=_[1],T=(0,t._)((0,r.useState)(function(){return"split"===e.type?e.devValue:""}),2),k=T[0],D=T[1],C=function(){if(!d)switch(e.type){case"shared":case"devOnly":case"prodOnly":return e.value;case"split":return e.prodValue}return w}(),E="split"===e.type||m;return(0,n.jsxs)(v.View,{gap:4,children:[!d&&e.conflict?(0,n.jsx)(W,{conflict:e.conflict,onDeleteEnvVar:s,contextType:"shared"===e.type||"split"===e.type?"unified":"singleEnv"}):null,(0,n.jsxs)(v.View,{clsx:et.default.gridContainer,gap:4,children:[(0,n.jsxs)(v.View,{clsx:et.default.gridRow,children:[(0,n.jsx)(I,{envVarType:e.type}),(0,n.jsx)(q,{value:d?b:i,isEditing:d&&!m,onChange:S,copyTooltipText:"Copy key",isKey:!0,placeholder:"Key"}),(0,n.jsx)(v.View,{clsx:[d?et.default.valueColumnEditing:""],children:(0,n.jsx)(q,{value:C,isEditing:d,onChange:j,copyTooltipText:"Copy value",placeholder:"Value"})}),!d&&(0,n.jsx)(ee,{onEdit:function(){switch(S(i),e.type){case"shared":case"devOnly":case"prodOnly":j(e.value);break;case"split":j(e.prodValue),D(e.devValue)}p(!0)},onDelete:function(){switch(e.type){case"shared":s(i,"shared");break;case"split":s(i,"development"),s(i,"production");break;case"devOnly":s(i,"development");break;case"prodOnly":s(i,"production")}},environmentControlState:function(){switch(e.type){case"split":return{type:"split",removeOverride:function(){return e.onRemoveOverride(i,e.prodValue)}};case"shared":return{type:"shared",addTestingOverride:function(){x(!0),j(e.value),D(e.value),p(!0)}};case"prodOnly":return{type:"prodOnly",convertToShared:function(){return e.onConvertToShared(i,e.value)}};case"devOnly":return{type:"devOnly",convertToShared:function(){return e.onConvertToShared(i,e.value)}}}}()})]}),E?(0,n.jsxs)(v.View,{clsx:et.default.gridRow,children:[(0,n.jsx)(v.View,{}),(0,n.jsxs)(v.View,{row:!0,gap:6,pr:4,align:"center",justify:"end",children:[(0,n.jsx)(h.Text,{color:"dimmer",variant:"small",children:"Testing value"}),(0,n.jsx)(g.Tooltip,{tooltip:"The value used when testing your app on Replit",maxWidth:180,children:(0,n.jsx)(o.default,{color:l.tokens.foregroundDimmest})})]}),(0,n.jsx)(v.View,{clsx:[d?et.default.devValueWrapperEditing:""],children:(0,n.jsx)(q,{placeholder:"Testing value",value:d||m||"split"!==e.type?k:e.devValue,isEditing:d||m,onChange:D,copyTooltipText:"Copy testing value"})})]}):null]}),d?(0,n.jsxs)(v.View,{row:!0,gap:8,justify:"end",children:[(0,n.jsx)(c.Button,{size:"small",text:"Cancel",onClick:function(){switch(S(i),e.type){case"shared":case"devOnly":case"prodOnly":j(e.value);break;case"split":j(e.prodValue),D(e.devValue)}x(!1),p(!1)}}),(0,n.jsx)(c.Button,{size:"small",colorway:"primary",text:"Save",onClick:function(){if(m&&"shared"===e.type){e.onCreateOverride(i,k,w),x(!1),p(!1);return}if("shared"===e.type){a([{oldKey:i,envVar:{key:b,value:w,environment:"shared"}}]),p(!1);return}if("split"===e.type){a([{oldKey:i,envVar:{key:b,value:w,environment:"production"}},{oldKey:i,envVar:{key:b,value:k,environment:"development"}}]),p(!1);return}if("prodOnly"===e.type){a([{oldKey:i,envVar:{key:b,value:w,environment:"production"}}]),p(!1);return}if("devOnly"===e.type){a([{oldKey:i,envVar:{key:b,value:w,environment:"development"}}]),p(!1);return}}})]}):null]})}var er=e.i(988676);function ei(e){var i=e.groupedEnvVars,a=e.onUpdateEnvVar,o=e.onDeleteEnvVar,s=e.onAddEnvVar,l=e.onSplitDevAndProd,u=e.onReplaceWithShared,d=e.showAddEnvVar,p=e.onCloseAddEnvVar,f=e.onShowAdd,m=e.showAddProdOnly,g=e.setShowAddProdOnly,x=e.showAddDevOnly,y=e.setShowAddDevOnly,b=(0,t._)((0,r.useState)(!1),2),S=b[0],T=b[1],k=(0,t._)((0,r.useState)(!1),2),D=k[0],C=k[1],E=null!=m?m:S,A=null!=g?g:T,R=null!=x?x:D,I=null!=y?y:C,P=i.unified,M=i.prodOnly,O=i.devOnly,V=i.conflicts,N=(0,r.useMemo)(function(){var e=new Map;return P.forEach(function(t){var n,r,i;e.has(t.key)||e.set(t.key,new Set),"shared"===t.type?null==(n=e.get(t.key))||n.add("shared"):(null==(r=e.get(t.key))||r.add("development"),null==(i=e.get(t.key))||i.add("production"))}),M.forEach(function(t){var n;e.has(t.key)||e.set(t.key,new Set),null==(n=e.get(t.key))||n.add("production")}),O.forEach(function(t){var n;e.has(t.key)||e.set(t.key,new Set),null==(n=e.get(t.key))||n.add("development")}),e},[P,M,O]),B=function(e,t){return(0,_._)(function(){return(0,w._)(this,function(n){return a(e,"production",{key:e,value:t,environment:"shared"}),[2]})})()},U=function(e,t){return(0,_._)(function(){return(0,w._)(this,function(n){return a(e,"development",{key:e,value:t,environment:"shared"}),[2]})})()};return(0,n.jsx)(v.View,{py:8,gap:8,children:(0,n.jsxs)(v.View,{gap:8,children:[(0,n.jsxs)(v.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,n.jsx)(v.View,{gap:4,grow:!0,shrink:!0,children:(0,n.jsx)(h.Text,{variant:"small",children:"Configurations are similar to secrets, but should only be used for non-sensitive information. They're useful for having a variable that's different between your published app and when testing on Replit."})}),f?(0,n.jsx)(c.Button,{iconLeft:(0,n.jsx)(j.default,{}),text:"New configuration",colorway:"primary",size:"small",onClick:f}):null]}),d?(0,n.jsx)(L,{onClose:p,onAdd:s,existingKeysMap:N,environment:"shared"}):null,P.length>0?(0,n.jsx)(v.View,{gap:12,children:P.map(function(e){var t=V.find(function(t){return t.key===e.key});return"shared"===e.type&&l?(0,n.jsx)(en,{type:"shared",envKey:e.key,value:e.value,conflict:t,onUpdate:function(e){e.forEach(function(e){var t=e.oldKey,n=e.envVar;a(t,n.environment,n)})},onDeleteEnvVar:o,onCreateOverride:l},e.key):"split"===e.type&&u?(0,n.jsx)(en,{type:"split",envKey:e.key,devValue:e.devValue,prodValue:e.prodValue,conflict:t,onUpdate:function(e){e.forEach(function(e){var t=e.oldKey,n=e.envVar;a(t,n.environment,n)})},onDeleteEnvVar:o,onRemoveOverride:u},e.key):null})}):null,M.length>0||E?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(er.DividerH,{}),(0,n.jsxs)(v.View,{gap:8,children:[E?(0,n.jsx)(L,{onClose:function(){return A(!1)},onAdd:s,existingKeysMap:N,environment:"production"}):null,(0,n.jsx)(v.View,{gap:12,children:M.length?M.map(function(e){var t=V.find(function(t){return t.key===e.key});return(0,n.jsx)(en,{type:"prodOnly",envKey:e.key,value:e.value,conflict:t,onUpdate:function(e){e.forEach(function(e){a(e.oldKey,"production",e.envVar)})},onDeleteEnvVar:o,onConvertToShared:B},e.key)}):(0,n.jsx)(v.View,{px:6,children:(0,n.jsx)(h.Text,{color:"dimmer",variant:"small",children:"No published app only configurations"})})})]})]}):null,O.length>0||R?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(er.DividerH,{}),(0,n.jsxs)(v.View,{gap:8,children:[R?(0,n.jsx)(L,{onClose:function(){return I(!1)},onAdd:s,existingKeysMap:N,environment:"development"}):null,(0,n.jsx)(v.View,{gap:8,children:O.length?O.map(function(e){var t=V.find(function(t){return t.key===e.key});return(0,n.jsx)(en,{type:"devOnly",envKey:e.key,value:e.value,conflict:t,onUpdate:function(e){e.forEach(function(e){a(e.oldKey,"development",e.envVar)})},onDeleteEnvVar:o,onConvertToShared:U},e.key)}):(0,n.jsx)(v.View,{px:6,children:(0,n.jsx)(h.Text,{color:"dimmer",variant:"small",children:"No testing only configurations"})})})]})]}):null]})})}var ea=e.i(830675),eo=e.i(222342),es=e.i(858248),el=e.i(709485),eu=e.i(927158),ec=e.i(529810),ed=e.i(365870);function ep(e){var i,a,o,s,l,u,c,d,p,f,m,g,x,y,b=e.editAuthorization,j=e.error,T=e.showAddEnvVar,k=e.setShowAddEnvVar,D=e.showAddProdOnly,C=e.setShowAddProdOnly,E=e.showAddDevOnly,A=e.setShowAddDevOnly,R=(i=(0,eo.default)().showError,a=(0,ec.default)().dotReplit,s=(o=(0,t._)((0,r.useState)({unified:[],prodOnly:[],devOnly:[],conflicts:[]}),2))[0],l=o[1],c=(u=(0,t._)((0,r.useState)(!0),2))[0],d=u[1],p=(0,eu.usePid2Callback)(function(e){return function(){return(0,_._)(function(){var t,n;return(0,w._)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.environment.getEnvVarsGroupedByKey.rpc({})];case 1:return(t=r.sent()).ok&&l({unified:t.payload.unified,prodOnly:t.payload.prodOnly,devOnly:t.payload.devOnly,conflicts:t.payload.conflicts||[]}),d(!1),[3,3];case 2:return n=r.sent(),ea.captureException(n),i("Failed to fetch environment variables"),d(!1),[3,3];case 3:return[2]}})})()}},[i]),f=(0,eu.usePid2Callback)(function(e){return function(t){return(0,_._)(function(){var n;return(0,w._)(this,function(r){switch(r.label){case 0:return[4,e.environment.setEnvVars.rpc(t)];case 1:if(!(n=r.sent()).ok)return i("ENV_VAR_MUTATION_CONFLICT_ERROR"===n.payload.code?"Environment variable conflict detected":"DOT_REPLIT_EDITING_ERROR"===n.payload.code?"Failed to update .replit file":n.payload.message||"Failed to update environment variables"),[2];return(0,es.track)(el.events.ENV_EDITOR_USED,{action:"updated",multiline:!1}),[4,null==p?void 0:p()];case 2:return r.sent(),[2]}})})()}},[i,p]),m=(0,eu.usePid2Callback)(function(e){return function(t,n){return(0,_._)(function(){var r;return(0,w._)(this,function(a){switch(a.label){case 0:return[4,e.environment.deleteEnvVars.rpc([{key:t,env:n}])];case 1:if(!(r=a.sent()).ok)return i("DOT_REPLIT_EDITING_ERROR"===r.payload.code?"Failed to update .replit file":r.payload.message||"Failed to delete environment variable"),[2];return[4,null==p?void 0:p()];case 2:return a.sent(),[2]}})})()}},[i,p]),g=(0,eu.usePid2Callback)(function(e){return function(t,n,r){return(0,_._)(function(){var a;return(0,w._)(this,function(o){switch(o.label){case 0:return[4,e.environment.splitDevAndProd.rpc({key:t,devValue:n,prodValue:r})];case 1:if(!(a=o.sent()).ok)return i("DOT_REPLIT_EDITING_ERROR"===a.payload.code?"Failed to update .replit file":a.payload.message||"Failed to split environment variable"),[2];return[4,null==p?void 0:p()];case 2:return o.sent(),[2]}})})()}},[i,p]),x=(0,eu.usePid2Callback)(function(e){return function(t,n){return(0,_._)(function(){var r;return(0,w._)(this,function(a){switch(a.label){case 0:return[4,e.environment.replaceWithShared.rpc({key:t,value:n})];case 1:if(!(r=a.sent()).ok)return i("DOT_REPLIT_EDITING_ERROR"===r.payload.code?"Failed to update .replit file":r.payload.message||"Failed to combine environment variable"),[2];return[4,null==p?void 0:p()];case 2:return a.sent(),[2]}})})()}},[i,p]),(0,r.useEffect)(function(){if(p)return a.watch(function(){p()})},[a,p]),{groupedEnvVars:s,isLoading:c,addEnvVar:(0,r.useCallback)(function(e){return(0,_._)(function(){return(0,w._)(this,function(t){switch(t.label){case 0:return(0,es.track)(el.events.ENV_EDITOR_USED,{action:"created",multiline:!1}),[4,null==f?void 0:f([{key:e.key,value:e.value,env:e.environment}])];case 1:return t.sent(),[2]}})})()},[f]),updateEnvVar:(0,r.useCallback)(function(e,t,n){return(0,_._)(function(){return(0,w._)(this,function(r){switch(r.label){case 0:if((0,es.track)(el.events.ENV_EDITOR_USED,{action:"updated",multiline:!1}),t===n.environment)return[3,2];return[4,null==m?void 0:m(e,t)];case 1:r.sent(),r.label=2;case 2:if(e===n.key)return[3,4];return[4,null==m?void 0:m(e,t)];case 3:r.sent(),r.label=4;case 4:return[4,null==f?void 0:f([{key:n.key,value:n.value,env:n.environment}])];case 5:return r.sent(),[2]}})})()},[f,m]),deleteEnvVar:(0,r.useCallback)(function(e,t){return(0,_._)(function(){return(0,w._)(this,function(n){switch(n.label){case 0:return(0,es.track)(el.events.ENV_EDITOR_USED,{action:"deleted"}),[4,null==m?void 0:m(e,t)];case 1:return n.sent(),[2]}})})()},[m]),splitDevAndProd:(0,r.useCallback)(function(e,t,n){return(0,_._)(function(){return(0,w._)(this,function(r){switch(r.label){case 0:return(0,es.track)(el.events.ENV_EDITOR_USED,{action:"updated",multiline:!1}),[4,null==g?void 0:g(e,t,n)];case 1:return r.sent(),[2]}})})()},[g]),replaceWithShared:(0,r.useCallback)(function(e,t){return(0,_._)(function(){return(0,w._)(this,function(n){switch(n.label){case 0:return(0,es.track)(el.events.ENV_EDITOR_USED,{action:"updated",multiline:!1}),[4,null==x?void 0:x(e,t)];case 1:return n.sent(),[2]}})})()},[x])}),I=R.groupedEnvVars,P=R.isLoading,M=R.addEnvVar,O=R.updateEnvVar,V=R.deleteEnvVar,N=R.splitDevAndProd,B=R.replaceWithShared;return P?(0,n.jsx)(v.View,{className:ed.default.loadingContainer,align:"center",justify:"center",children:(0,n.jsx)(S.default,{size:24})}):!b||j?(0,n.jsx)(v.View,{className:ed.default.emptyState,p:16,children:(0,n.jsx)(h.Text,{color:"dimmer",children:null!=(y=null==j?void 0:j.message)?y:"Unable to determine environment variable permissions, please refresh your browser."})}):(0,n.jsxs)(v.View,{className:ed.default.body,grow:!0,shrink:!0,children:[b.isAuthorized?null:(0,n.jsx)(v.View,{p:8,children:(0,n.jsx)(h.Text,{children:b.message})}),(0,n.jsx)(ei,{groupedEnvVars:I,onUpdateEnvVar:O,onDeleteEnvVar:V,onAddEnvVar:M,onSplitDevAndProd:N,onReplaceWithShared:B,showAddEnvVar:T,onCloseAddEnvVar:function(){k(!1)},showAddProdOnly:D,setShowAddProdOnly:C,showAddDevOnly:E,setShowAddDevOnly:A})]})}e.s(["default",()=>ep],14257)},935835,e=>{"use strict";var t=e.i(167626),n=e.i(530658);function r(e,t){return e.split(t).length-1}var i={parse:function(e){var t=new Map,n=e.split(/\n|\r|\r\n/),i=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;if(!function(e){var t=e.trim();return 0===t.length||t.startsWith("#")}(u)){var c=(u=function(e){if(!e.includes("#"))return e;var t=e.split("#"),n=!1,i=[],a=!0,o=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;(1===r(c,'"')||r(c,"'"))&&(n?(n=!1,i.push(c)):n=!0),(0===i.length||n)&&i.push(c)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i.join("#")}(u)).indexOf("="),d=u.indexOf(":");if(-1!==d||-1!==c){var p=c;-1!==d&&(d<c||-1===c)&&(p=d);var f=u.slice(0,p).replace(/^\s*(?:export\s+)?(.*?)\s*$/,"$1"),m=function(e,t){var n=e.trim();if(0===n.length)return n;var r=n.length-1,i='"'===n[0]&&'"'===n[r],a="'"===n[0]&&"'"===n[r];return(a||i)&&(n=n.slice(1,-1)),i&&(n=(n=n.replace(/\\./g,function(e){return"\\n"===e?"\n":"\\r"===e?"\r":e})).replace(/\\([^$])/g,"$1")),a||(n=n.replace(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/g,function(e){var n=e.match(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/);if(null===n)return e;if("\\"===n[1]||"("===n[2])return n[0].slice(1);var r=n[4];return""!==r?t.get(r)||"":e})),n}(u.slice(p+1),t);t.set(f,m)}}}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return t},serialize:function(e){return((0,t._)(e,Map)?Array.from(e):Object.entries(e)).reduce(function(e,t){var r=(0,n._)(t,2),i=r[0],a=r[1].replace(/\\([^$])/g,"\\\\$1").replace(/\$/g,"\\\\$$").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r");return e+"".concat(i,'="').concat(a,'"\n')},"")}};e.s(["default",()=>i])},516866,e=>{e.v({editModeKeySection:"SecretItem-module__J0pS-a__editModeKeySection",linkedSecret:"SecretItem-module__J0pS-a__linkedSecret",secretKeyRoot:"SecretItem-module__J0pS-a__secretKeyRoot",secretKeyText:"SecretItem-module__J0pS-a__secretKeyText",secretValueInput:"SecretItem-module__J0pS-a__secretValueInput",secretValueText:"SecretItem-module__J0pS-a__secretValueText",valueInput:"SecretItem-module__J0pS-a__valueInput"})},644230,e=>{e.v({addSecretTitleContainer:"index-module__87l8Pa__addSecretTitleContainer",addSecretValueLabel:"index-module__87l8Pa__addSecretValueLabel",body:"index-module__87l8Pa__body",envEditorBody:"index-module__87l8Pa__envEditorBody",loadingContainer:"index-module__87l8Pa__loadingContainer",secretAccessibilityText:"index-module__87l8Pa__secretAccessibilityText",secretItem:"index-module__87l8Pa__secretItem",secretSelect:"index-module__87l8Pa__secretSelect",tabExtraText:"index-module__87l8Pa__tabExtraText"})},316799,837605,32967,e=>{"use strict";var t,n=e.i(530658),r=e.i(389959),i=e.i(368964),a=e.i(207237),o=e.i(297083),s=e.i(878420),l=e.i(64386),u=e.i(346715),c=e.i(817556),d=e.i(276385),p=e.i(678420),f=e.i(917255),m=e.i(156669),h=e.i(712771),g=e.i(979530),v=e.i(873169),x=e.i(416746),y=e.i(882848),b=e.i(269848),S=e.i(40916),_=e.i(761201),w=e.i(993796),j=e.i(222342),T=e.i(858248),k=e.i(709485),D=e.i(529810),C=e.i(952521),E=e.i(269746),A=e.i(12291),R=e.i(952685);e.i(545082);var I=e.i(91442),P=e.i(729122),M=e.i(305669),O=e.i(354429),V=e.i(14257),N=e.i(830675),B=e.i(682532),L=e.i(179302),U=e.i(221250),H=e.i(542101),F=e.i(935835),q=e.i(183035),z=e.i(803304),G=e.i(262206),W=e.i(480028),K=e.i(173703),Y=e.i(613355),Z=e.i(140487),$=e.i(739521),X=e.i(396776),Q=e.i(960178),J=e.i(625484),ee=k.events.ENV_EDITOR_USED;(t={})[t.VALID=0]="VALID",t[t.ERROR_PARSE_JSON=1]="ERROR_PARSE_JSON",t[t.ERROR_PARSE_ENV=2]="ERROR_PARSE_ENV",t[t.ERROR_STRINGS=3]="ERROR_STRINGS",t[t.ERROR_SAVE=4]="ERROR_SAVE",t[t.ERROR_MISSING_KEYS=5]="ERROR_MISSING_KEYS";var et=(0,r.forwardRef)(function(e,t){var i=e.secrets,a=e.update,s=e.disabledMessage,l=(0,n._)((0,r.useState)(!1),2),u=l[0],p=l[1],f=(0,n._)((0,r.useState)(!1),2),m=f[0],h=f[1],g=(0,n._)((0,r.useState)(!1),2),v=g[0],x=g[1],y=(0,n._)((0,r.useState)(0),2),b=y[0],S=y[1],_=(0,n._)((0,r.useState)(0),2),w=_[0],j=_[1],k=0===b,D=(0,B.linter)(function(e){var t=e.state.doc.toString(),n=0===w?en(t):er(t);return S(n),(0,T.track)(ee,{action:0===n?"rawEditorUpdatedSuccess":"rawEditorUpdatedError"}),[]}),C=(0,H.default)(),E=C.ref,A=C.view,R=function(){m||p(!1)},I=function(e){j(e),x(!1),p(!0),(0,T.track)(ee,{action:"rawEditorOpened"})},P=(0,r.useCallback)(function(){void 0!==s||m||I(0)},[s,m]),M=(0,r.useCallback)(function(){void 0!==s||m||I(1)},[s,m]);(0,r.useImperativeHandle)(t,function(){return{openJSONEditor:P,openEnvEditor:M,isSaving:m,disabledMessage:s}},[m,s,P,M]);var O=function(){if(!A)return!1;var e=A.state.doc.toString(),t=0===w?en(e):er(e);return S(t),0===t},V=function(){return(0,o._)(function(){var e,t;return(0,c._)(this,function(r){switch(r.label){case 0:if(!A||!O())return[2];h(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),e=A.state.doc.toString(),[4,a(0===w?new Map(Object.entries(JSON.parse(e)).map(function(e){var t=(0,n._)(e,2);return[t[0],t[1]]})):F.default.parse(e))];case 2:return r.sent(),h(!1),x(!0),setTimeout(function(){R(),setTimeout(function(){x(!1)},500)},500),[3,4];case 3:return t=r.sent(),N.captureException(t),(0,T.track)(ee,{action:"rawEditorUpdatedError"}),S(4),h(!1),[3,4];case 4:return[2]}})})()};return(0,r.useEffect)(function(){if(A){var e=0===w?JSON.stringify(Object.fromEntries(i.entries()),null,2):F.default.serialize(i);0===w&&"{}"===e&&(e="{\n  \n}"),A.dispatch({changes:{from:0,to:A.state.doc.length,insert:e}}),A.dispatch({selection:{anchor:A.state.doc.length-2*(0===w)}}),A.focus()}},[A,i,w]),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)($.Modal,{isOpen:u,onRequestClose:function(){return R()},children:(0,d.jsxs)(J.View,{gap:24,children:[(0,d.jsx)(Q.Header,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,d.jsx)(Q.Text,{children:0===w?"Secrets are specified in JSON. Values must be strings.":'Secrets are specified in .env format (KEY="value").'}),(0,d.jsx)(K.ShadesSurface,{css:[Y.rcss.borderRadius(8),Y.rcss.transition.snappy,Y.rcss.p(4),{border:"1px solid ".concat(W.tokens.outlineDimmer),":hover":{borderColor:W.tokens.outlineStronger}}],children:(0,d.jsx)(U.default,{ref:E,readOnly:m||v,extensions:[D,L.keymap.of([{key:(0,G.defaultKeyCombo)({cmdOrCtrl:!0,key:"Enter"}),run:function(){return V(),!0},preventDefault:!0,stopPropagation:!0}])],language:0===w?"json":"properties",hideGutter:!0})}),(0,d.jsxs)(J.View,{row:!0,gap:4,justify:"end",children:[!k&&(0,d.jsx)(X.StatusBanner,{icon:(0,d.jsx)(z.default,{}),colorway:"negative",text:function(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return'Make sure the data is in valid .env format (KEY="value").';case 3:return"Make sure that all values are strings.";case 5:return"Make sure that all keys are non-empty strings.";case 4:return"There was an error saving the secrets.";default:return""}}(b)}),(0,d.jsxs)(J.View,{row:!0,gap:12,children:[(0,d.jsx)(Z.Button,{onClick:R,text:"Cancel"}),(0,d.jsx)(Z.Button,{iconLeft:(0,d.jsx)(q.default,{}),stretch:!0,colorway:v?"positive":"primary",text:v?"Saved!":"Save",disabled:!k||m||v,onClick:function(){return V()}})]})]})]})})})});function en(e){try{var t=JSON.parse(e);for(var n in t){if("string"!=typeof n||"string"!=typeof t[n])return 3;if(!n.trim())return 5}return 0}catch(e){return 1}}function er(e){try{var t=e.replace(/#.*$/gm,"").split("\n"),r="",i=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;if((r+=(r?"\n":"")+u).trim()){var c=(r.match(/'/g)||[]).length,d=(r.match(/"/g)||[]).length;if(c%2!=0||d%2!=0){if(u===t[t.length-1])return 2;continue}r=""}}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}var p=F.default.parse(e),f=!0,m=!1,h=void 0;try{for(var g,v=p[Symbol.iterator]();!(f=(g=v.next()).done);f=!0)if(!(0,n._)(g.value,1)[0].trim())return 5}catch(e){m=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(m)throw h}}return 0}catch(e){return 2}}var ei=e.i(204977),ea=e.i(828322),eo=e.i(346781),es=e.i(491194),el=e.i(416298),eu=[{title:"OpenAI",description:"Integrate with GPT-4, DALL-E, Whisper, and more.",pattern:/^OPENAI_.*/,defaultLink:"https://replit.com/guides/gpt-4o-quickstart-guide#set-up-your-openai-api-key",presetSecrets:[{key:"OPENAI_API_KEY"},{key:"OPENAI_ORG_ID"}]},{title:"Gemini",description:"Leverage Google's latest AI models.",pattern:/^(GEMINI_.*|GOOGLE_API_KEY)/,defaultLink:"https://replit.com/guides/gemini-flash-quickstart-guide#set-up-a-google-api-key"},{title:"Groq",description:"Try a variety of AI models with Groq.",pattern:/^GROQ_.*/,defaultLink:"https://replit.com/guides/groq-chatbot-quickstart#set-up-your-groq-api-key"},{title:"Anthropic",description:"Explore Anthropic's latest Claude AI models.",pattern:/^ANTHROPIC_.*/,defaultLink:"https://replit.com/guides/image2text-ai-app-with-anthropic#add-anthropic-api-key-to-secrets"},{title:"Slack",description:"Use Slack to build interactive apps and bots.",pattern:/^SLACK_.*/,defaultLink:"https://replit.com/guides/slackbot-quickstart#add-secrets",presetSecrets:[{key:"SLACK_SIGNING_SECRET"},{key:"SLACK_APP_TOKEN"},{key:"SLACK_BOT_TOKEN"}]},{title:"HubSpot",description:"Use HubSpot's API to pull customer data.",pattern:/^HUBSPOT_.*/,defaultLink:"https://replit.com/guides/hubspot-deal-data-api-python-flask#getting-started"},{title:"Coinbase Developer Platform",description:"Use Coinbase Developer Platform to build on chain agents and apps.",pattern:/^(CDP_|COINBASE_).*/,defaultLink:"https://replit.com/guides/coinbase-developer-platform-agentkit-quickstart-guide"}],ec=e.i(88619),ed=e.i(939562),ep=e.i(136540),ef=e.i(607278),em=e.i(818503),eh=e.i(119274),eg=e.i(795581),ev=e.i(751273),ex=e.i(516866);function ey(e){var t=e.value;return(0,d.jsxs)(K.ShadesSurface,{p:4,row:!0,gap:4,br:4,clsx:ex.default.secretKeyRoot,children:[(0,d.jsx)(ec.CopyIconButton,{tooltipText:"Copy secret key",textToCopy:t}),(0,d.jsx)(ev.Tooltip,{tooltip:(0,d.jsx)(Q.Text,{children:t}),children:function(e,n){return(0,d.jsx)(Q.Text,(0,l._)((0,s._)({ref:n},e),{multiline:!1,clsx:ex.default.secretKeyText,children:t}))}})]})}function eb(e){var t=e.value,i=e.placeholder,a=void 0===i?"Enter your secret value":i,o=e.onChange,s=e.canEditDisabledMessage,l=e.defaultVisible,u=(0,n._)((0,r.useState)(void 0!==l&&l),2),c=u[0],p=u[1],f=void 0===s;return(0,d.jsxs)(K.ShadesSurface,{p:4,row:!0,gap:4,br:4,align:"center",grow:!0,shrink:!0,children:[(0,d.jsx)(ec.CopyIconButton,{tooltipText:f?"Copy secret value":s,textToCopy:f?t:""}),o&&f?(0,d.jsx)(ef.Input,{value:t,onChange:function(e){return o(e.target.value)},placeholder:a,clsx:ex.default.secretValueInput,"data-sensitive":t&&!c}):(0,d.jsx)(Q.Text,{multiline:!1,clsx:ex.default.secretValueText,children:t?(0,d.jsx)(d.Fragment,{children:c?t:"•".repeat(8)}):a}),(0,d.jsx)(ep.IconButton,{alt:"Toggle Secret",tooltipContents:s,tooltipBehavior:f?"hidden":void 0,onClick:function(){return p(!c)},disabled:!f,children:c?(0,d.jsx)(g.default,{}):(0,d.jsx)(h.default,{})})]})}function eS(e){var t=e.name,n=e.value,r=void 0===n?"":n,i=e.isEditing,a=e.isSensitive,o=e.canEdit,u=void 0===o||o,c=e.editDisabledMessage,p=e.onToggleSensitive,f=e.renderSuffix,m=e.renderKeyExtra;return(0,d.jsxs)(J.View,{row:!0,gap:8,align:"center",children:[(0,d.jsxs)(K.ShadesSurface,{p:4,row:!0,gap:4,br:4,clsx:ex.default.secretKeyRoot,children:[(0,d.jsx)(ec.CopyIconButton,{tooltipText:"Copy secret key",textToCopy:t}),(0,d.jsx)(ev.Tooltip,{tooltip:(0,d.jsx)(Q.Text,{children:t}),children:function(e,n){return(0,d.jsx)(Q.Text,(0,l._)((0,s._)({ref:n},e),{multiline:!1,clsx:ex.default.secretKeyText,children:t}))}}),m?(0,d.jsx)(J.View,{justify:"center",children:null==m?void 0:m()}):null]}),(0,d.jsxs)(K.ShadesSurface,{p:4,row:!0,gap:4,br:4,align:"center",grow:!0,shrink:!0,children:[(0,d.jsx)(ec.CopyIconButton,{tooltipText:u?"Copy secret value":c,textToCopy:u?r:""}),i&&u?(0,d.jsx)(ef.Input,{value:r,onChange:function(){},placeholder:"Enter your secret value",clsx:ex.default.secretValueInput,"data-sensitive":r&&a}):(0,d.jsx)(Q.Text,{multiline:!1,clsx:ex.default.secretValueText,children:r?(0,d.jsx)(d.Fragment,{children:a?"•".repeat(8):r}):"Enter your secret value"}),(0,d.jsx)(ep.IconButton,{alt:"Toggle Secret",tooltipContents:c,tooltipBehavior:u?"hidden":void 0,onClick:p,disabled:!u,children:a?(0,d.jsx)(h.default,{}):(0,d.jsx)(g.default,{})})]}),null==f?void 0:f()]})}function e_(e){var t=e.secret,i=e.onUpdateSecret,a=e.onDeleteSecret,o=e.onSearchSecret,u=e.editAuthorizationErrorMessage,c=(0,n._)((0,r.useState)(""===t.value?{key:t.key,value:""}:null),2),p=c[0],f=c[1],m=(0,n._)((0,r.useState)(!1),2),h=m[0],g=m[1],v=(0,n._)((0,r.useState)(!0),2),x=v[0],y=v[1],b=(0,r.useMemo)(function(){var e,n,r,i,a,o;return n=null!=(e=null==p?void 0:p.key)?e:t.key,null!=(i=null==(o=null==(a=eu.find(function(e){return e.pattern.test(n)}))||null==(r=a.presetSecrets)?void 0:r.find(function(e){return e.key===n}))?void 0:o.link)?i:null==a?void 0:a.defaultLink},[null==p?void 0:p.key,t.key]),S=void 0===u;return p?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ew,{keyValue:p.key,onKeyChange:function(e){return f(function(t){return t?(0,l._)((0,s._)({},t),{key:e}):t})},value:p.value,onValueChange:function(e){return f(function(t){return t?(0,l._)((0,s._)({},t),{value:e}):t})},isSensitive:x,onToggleSensitive:function(){return y(!x)},renderValueExtra:function(){return b&&(0,d.jsx)(Q.Text,{variant:"small",children:(0,d.jsx)("a",{href:b,target:"_blank",children:"Where do I find this?"})})},onDelete:function(){return g(!0)},onCancel:function(){return f(null)},onSave:function(){i(t.key,{key:p.key.trim(),value:p.value}),f(null)},saveButtonText:""===t.value?"Add Secret":"Update Secret"}),h&&(0,d.jsx)(eT,{keys:[t.key],isOpen:h,onClose:function(){return g(!1)},onConfirm:function(){return a(t.key)}})]}):(0,d.jsx)(eS,{name:t.key,value:t.value,isEditing:!1,isSensitive:x,canEdit:S,editDisabledMessage:u,onToggleSensitive:function(){return y(!x)},renderSuffix:function(){return(0,d.jsxs)(K.ShadesSurface,{br:4,children:[(0,d.jsxs)(eh.PopupMenu,{placement:"bottom right",trigger:(0,d.jsx)(ep.IconButton,{size:32,tooltipBehavior:"hidden",alt:"Options",children:(0,d.jsx)(ea.default,{})}),children:[S?(0,d.jsx)(eh.MenuItem,{label:"Edit",icon:(0,d.jsx)(ei.default,{}),onAction:function(){return f({key:t.key,value:t.value})}}):null,(0,d.jsx)(eh.MenuItem,{label:"Find Usages",icon:(0,d.jsx)(eo.default,{}),onAction:function(){return o(t.key)}}),S?(0,d.jsx)(eh.MenuItem,{label:"Delete",icon:(0,d.jsx)(es.default,{}),isDestructive:!0,onAction:function(){return g(!0)}}):null]}),h?(0,d.jsx)(eT,{keys:[t.key],isOpen:h,onClose:function(){return g(!1)},onConfirm:function(){return a(t.key)}}):null]})}})}function ew(e){var t=e.keyLabel,n=e.keyValue,i=e.onKeyChange,a=e.valueLabel,o=e.value,s=e.onValueChange,l=e.isSensitive,u=e.onToggleSensitive,c=e.isValueReadOnly,p=e.disableValueVisibilityToggle,f=e.renderValueExtra,m=e.onDelete,v=e.onCancel,x=e.onSave,y=e.saveButtonText,b=e.deleteButtonText,S=e.isSaving,_=e.keyError,w=(0,r.useMemo)(function(){return null!==n.match(O.POSIX_ENV_VAR_PATTERN)},[n]),j=_||(!w&&n?O.POSIX_ENV_VAR_ERROR:void 0);return(0,d.jsxs)(J.View,{gap:8,onKeyDown:function(e){"Enter"===e.key&&x()},children:[(0,d.jsxs)(J.View,{row:!0,gap:8,children:[(0,d.jsx)(J.View,{clsx:ex.default.editModeKeySection,gap:2,children:(0,d.jsxs)(eg.TextField,{validate:function(){return _||(!w&&n?O.POSIX_ENV_VAR_ERROR:void 0)},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"secretKey",value:n,onChange:i,isInvalid:!!j,children:[(0,d.jsx)(em.Label,{color:"dimmer",multiline:!1,children:void 0===t?"Key":t}),(0,d.jsx)(ef.Input,{placeholder:"SECRET_KEY",autoComplete:"off",autoFocus:!0}),(0,d.jsx)(ed.FieldError,{children:j})]})}),(0,d.jsxs)(J.View,{grow:!0,shrink:!0,gap:2,children:[(0,d.jsxs)(eg.TextField,{isRequired:!0,minLength:1,name:"secretValue",value:o,onChange:function(e){return null==s?void 0:s(e)},children:[(0,d.jsx)(em.Label,{color:"dimmer",multiline:!1,children:(0,d.jsxs)(J.View,{row:!0,gap:4,align:"center",children:[void 0===a?"Value":a,(0,d.jsx)(ep.IconButton,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:u,disabled:p,size:12,children:l?(0,d.jsx)(h.default,{}):(0,d.jsx)(g.default,{})})]})}),(0,d.jsx)(ef.Input,{"data-sensitive":l,clsx:ex.default.valueInput,readOnly:c,autoComplete:"off"})]}),null==f?void 0:f()]})]}),(0,d.jsxs)(J.View,{row:!0,gap:8,children:[m?(0,d.jsx)(Z.Button,{size:"small",text:void 0===b?"Delete":b,colorway:"negative",onClick:m,disabled:!!j,loading:S}):null,(0,d.jsx)(J.View,{grow:!0}),(0,d.jsxs)(J.View,{row:!0,gap:8,children:[(0,d.jsx)(Z.Button,{size:"small",text:"Cancel",onClick:v,loading:S}),(0,d.jsx)(Z.Button,{size:"small",colorway:"primary",text:y,disabled:!n.length||!!j||!w,loading:S,onClick:x})]})]})]})}function ej(e){var t=e.link,i=e.onUpdateLink,a=e.onUnlink,s=e.existingKeys,l=(0,n._)((0,r.useState)(null),2),u=l[0],p=l[1],f=(0,n._)((0,r.useState)(!0),2),m=f[0],h=f[1],g=(0,n._)((0,r.useState)(!1),2),v=g[0],x=g[1],b=(0,n._)((0,r.useState)(!1),2),S=b[0],_=b[1],w=u&&s.has(u.alias)&&u.alias!==t.alias?"A secret with this name already exists":void 0;return u?(0,d.jsx)(ew,{keyLabel:"Name",keyValue:u.alias,onKeyChange:function(e){return p({alias:e})},value:t.secret.value,isSensitive:m,onToggleSensitive:function(){return h(!m)},isValueReadOnly:!0,onDelete:function(){return(0,o._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:_(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,a(t.id)];case 2:return e.sent(),[3,4];case 3:return _(!1),[7];case 4:return[2]}})})()},onCancel:function(){return p(null)},onSave:function(){return(0,o._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:if(w)return[2];x(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,i(t.id,u.alias.trim())];case 2:return e.sent(),p(null),[3,4];case 3:return x(!1),[7];case 4:return[2]}})})()},saveButtonText:"Update",deleteButtonText:"Unlink",isSaving:v||S,keyError:w}):(0,d.jsx)(J.View,{clsx:ex.default.linkedSecret,"data-unlinking":S,children:(0,d.jsx)(eS,{name:t.alias,value:t.secret.value,isEditing:!1,isSensitive:m,canEdit:!0,onToggleSensitive:function(){return h(!m)},renderKeyExtra:function(){return(0,d.jsx)(ev.Tooltip,{tooltip:"Linked to Account Secret: ".concat(t.secret.name),children:(0,d.jsx)(y.default,{color:W.tokens.accentPrimaryStronger})})},renderSuffix:function(){return(0,d.jsxs)(eh.PopupMenu,{trigger:(0,d.jsx)(K.ShadesSurface,{br:4,children:(0,d.jsx)(ep.IconButton,{size:32,alt:"Options",children:(0,d.jsx)(ea.default,{})})}),children:[(0,d.jsx)(eh.MenuItem,{label:"Edit",icon:(0,d.jsx)(ei.default,{}),onAction:function(){return p({alias:t.alias})}}),(0,d.jsx)(eh.MenuItem,{label:"Unlink",icon:(0,d.jsx)(es.default,{}),isDestructive:!0,onAction:function(){return(0,o._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:_(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,a(t.id)];case 2:return e.sent(),[3,4];case 3:return _(!1),[7];case 4:return[2]}})})()}})]})}})})}function eT(e){var t=e.keys,n=e.isOpen,r=e.onClose,i=e.onConfirm,a=e.loading,o=t.length>1;return(0,d.jsx)($.Modal,{isOpen:n,onRequestClose:r,children:(0,d.jsxs)(J.View,{gap:12,children:[(0,d.jsx)(Q.Text,{variant:"subheadDefault",multiline:!1,children:o?"Delete secrets?":"Delete ".concat(t[0],"?")}),(0,d.jsxs)(Q.Text,{color:"dimmer",children:["Are you sure you would like to delete"," ",o?"these secrets (".concat(t.join(", "),")"):"this secret","? This cannot be undone."]}),(0,d.jsx)(X.StatusBanner,{icon:(0,d.jsx)(el.default,{}),text:"Deleting these secrets may break historical agent checkpoint previews that depend on them. Previews always use the latest secrets.",colorway:"warning"}),(0,d.jsxs)(J.View,{justify:"end",row:!0,gap:8,children:[(0,d.jsx)(Z.Button,{text:"Cancel",onClick:r}),(0,d.jsx)(Z.Button,{text:"Delete",colorway:"negative",onClick:i,loading:a})]})]})})}e.s(["LinkedSecretItem",()=>ej,"SecretItem",()=>e_,"SecretKey",()=>ey,"SecretValue",()=>eb],837605);var ek=e.i(988676),eD=e.i(604963),eC=e.i(679668),eE=e.i(644230);e.i(630937);var eA=["SLACK_API_KEY","GOOGLE_API_KEY","MONGO_API_KEY","FIREBASE_API_KEY"];function eR(e){var t=e.onClose,i=e.onAdd,a=e.otherKeys,o=(0,n._)((0,r.useState)(!0),2),u=o[0],c=o[1],p=(0,n._)((0,r.useState)({key:"",value:""}),2),f=p[0],m=p[1],v=(0,n._)((0,r.useState)(function(){var e=Math.floor(Math.random()*eA.length);return eA[e]}),1)[0],x=(0,r.useMemo)(function(){return null!==f.key.match(O.POSIX_ENV_VAR_PATTERN)},[f.key]),y=(0,r.useMemo)(function(){return a.includes(f.key)?"Secret already exists":!x&&f.key?O.POSIX_ENV_VAR_ERROR:void 0},[a,f.key,x]),b=f.key.length>0&&!y,S=function(){b&&(i({key:f.key.trim(),value:f.value}),m({key:"",value:""}))};return(0,d.jsxs)(J.View,{gap:8,py:8,onKeyDown:function(e){"Enter"===e.key&&S()},children:[(0,d.jsxs)(J.View,{row:!0,gap:8,children:[(0,d.jsx)(J.View,{clsx:eE.default.addSecretTitleContainer,children:(0,d.jsxs)(eg.TextField,{validate:function(){return y},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"secretKey",value:f.key,onChange:function(e){return m(function(t){return(0,l._)((0,s._)({},t),{key:e})})},isInvalid:!!y,children:[(0,d.jsx)(em.Label,{color:"dimmer",multiline:!1,children:"Key"}),(0,d.jsx)(ef.Input,{placeholder:v,autoComplete:"off",autoFocus:!0}),(0,d.jsx)(ed.FieldError,{children:y})]})}),(0,d.jsx)(J.View,{grow:!0,shrink:!0,gap:4,children:(0,d.jsxs)(eg.TextField,{isRequired:!0,minLength:1,name:"secretValue",value:f.value,onChange:function(e){return m(function(t){return(0,l._)((0,s._)({},t),{value:e})})},children:[(0,d.jsxs)(em.Label,{color:"dimmer",multiline:!1,clsx:eE.default.addSecretValueLabel,children:["Value",(0,d.jsx)(ep.IconButton,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return c(!u)},size:12,children:u?(0,d.jsx)(h.default,{}):(0,d.jsx)(g.default,{})})]}),(0,d.jsx)(ef.Input,{"data-sensitive":u,autoComplete:"off"})]})})]}),(0,d.jsxs)(J.View,{row:!0,gap:8,justify:"end",children:[(0,d.jsx)(Z.Button,{size:"small",text:"Cancel",onClick:function(){return t()}}),(0,d.jsx)(Z.Button,{size:"small",text:"Add Secret",colorway:"primary",disabled:!b,onClick:S})]})]})}function eI(e){var t=e.secrets,i=e.onUpdateSecret,a=e.onDeleteSecret,o=e.onAddSecret,s=e.showAddSecret,l=e.onSearch,c=e.onClose,p=e.editAuthorizationErrorMessage,f=e.linkedSecrets,m=e.userSecrets,h=e.onUpdateLink,g=e.onUnlink,v=(0,r.useMemo)(function(){return new Set((0,u._)(t.keys()).concat((0,u._)((null==f?void 0:f.map(function(e){return e.alias}))||[])))},[t,f]),x=(0,r.useMemo)(function(){return(0,u._)(t.entries()).filter(function(e){var t=(0,n._)(e,2);return""===(t[0],t[1])})},[t]),y=(0,r.useMemo)(function(){return(0,u._)(t.entries()).filter(function(e){var t=(0,n._)(e,2);return""!==(t[0],t[1])})},[t]);return s||0!==x.length||0!==y.length||(null==f?void 0:f.length)?(0,d.jsxs)(J.View,{py:8,gap:8,children:[0!==x.length&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(J.View,{px:8,gap:8,children:[(0,d.jsx)(Q.Text,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,d.jsx)(Q.Text,{variant:"small",children:"This App contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,d.jsx)(J.View,{gap:8,children:x.map(function(e){var t=(0,n._)(e,2),r=t[0],o=t[1];return(0,d.jsx)(K.ShadesSurface,{clsx:eE.default.secretItem,p:8,children:(0,d.jsx)(e_,{secret:{key:r,value:o},onUpdateSecret:i,onDeleteSecret:a,onSearchSecret:function(){},editAuthorizationErrorMessage:p})},r)})})]}),(0,d.jsx)(ek.DividerH,{})]}),(0,d.jsxs)(J.View,{gap:8,children:[s?(0,d.jsx)(eR,{onClose:c,onAdd:o,otherKeys:Object.keys(t)}):null,y.map(function(e){var t=(0,n._)(e,2),r=t[0],o=t[1];return(0,d.jsx)(e_,{secret:{key:r,value:o},onUpdateSecret:i,onDeleteSecret:a,onSearchSecret:l,editAuthorizationErrorMessage:p},r)}),f&&f.length>0?(0,d.jsxs)(d.Fragment,{children:[y.length>0?(0,d.jsx)(ek.DividerH,{}):null,f.map(function(e){return(0,d.jsx)(ej,{link:e,onUpdateLink:h,onUnlink:g,userSecrets:m,existingKeys:v},e.id)})]}):null]})]}):null}function eP(e){var t,i=e.secrets,a=e.activeFile,o=(0,n._)((0,r.useState)(null==(t=i.keys().next())?void 0:t.value),2),s=o[0],l=o[1],c=(0,R.default)(a);return void 0!==s&&c&&(0,A.getEnvCodeForLanguage)(a,s)&&i.size>0?(0,d.jsxs)(J.View,{px:8,py:16,gap:8,children:[(0,d.jsxs)(J.View,{row:!0,gap:8,align:"center",children:[(0,d.jsx)(Q.Text,{multiline:!1,children:"Access secret"}),(0,d.jsx)(eC.Select,{"aria-label":"Select secret to access",clsx:eE.default.secretSelect,items:(0,u._)(i.keys()).map(function(e){return{title:e}}),selectedItem:{title:s},onChange:function(e){return l(e.title)}})]}),(0,d.jsx)(A.default,{elevate:"1x",keyName:s,filePath:a})]}):null}var eM=function(e){var t,n=e.performPaneOperation,r=e.showAddSecret,i=e.setShowAddSecret,a=e.secrets,s=e.editAuthorization,l=e.error,u=e.dismissibleElement,p=u.isDone,f=u.setAsDone,m=e.linkedSecrets,h=e.userSecrets,g=e.onUpdateLink,v=e.onUnlink,y=e.rawEditorRef,b=(0,j.default)().showConfirm,S=(0,D.default)().secrets,w=(0,P.useRunInfo)().isRunning,C=(0,I.useCursorFilepath)(),A=function(){i(!1)},R=a.size>0||m&&m.length>0;return!s||l?(0,d.jsx)(E.EnvEditorUnauthorized,{message:null!=(t=null==l?void 0:l.message)?t:"Unable to determine secret eligibility, please refresh your browser."}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(J.View,{clsx:eE.default.envEditorBody,grow:!0,shrink:!0,children:[s.isAuthorized&&!p?(0,d.jsx)(J.View,{p:8,children:(0,d.jsx)(X.StatusBanner,{icon:(0,d.jsx)(x.default,{}),closable:!0,closeAction:function(){return f()},colorway:"primary",text:(0,d.jsxs)(Q.Text,{clsx:eE.default.secretAccessibilityText,children:["Secrets are accessible to anyone who has access to this App. To restrict secret access, you must update App invite permissions. For more information, visit"," ",(0,d.jsx)("a",{href:_.LINKS_DOCS.SECRETS,target:"_blank",children:"our documentation"}),"."]})})}):null,R||!1!==r?null:(0,d.jsx)(E.EnvEditorEmpty,{performPaneOperation:n,editSecretsAuthz:s}),(0,d.jsx)(eI,{secrets:a,onUpdateSecret:function(e,t){return(0,o._)(function(){var n;return(0,c._)(this,function(r){return(0,T.track)(k.events.ENV_EDITOR_USED,{action:"updated",multiline:t.value.includes("\n")}),(n=new Map(a)).delete(e),n.set(t.key,t.value),S.replaceAll(n),[2]})})()},onDeleteSecret:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){return(0,T.track)(k.events.ENV_EDITOR_USED,{action:"deleted"}),S.removeEntries(e),[2]})})()},onAddSecret:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){return(0,T.track)(k.events.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),S.addEntries([{key:e.key,value:e.value}]),w&&b("Re-run your App to use this secret"),A(),[2]})})()},showAddSecret:r,onSearch:function(e){return n({operation:"open",pane:{type:"searchReplace",data:{initialQuery:e}}})},editAuthorizationErrorMessage:s.isAuthorized?void 0:s.message,onClose:A,linkedSecrets:m,userSecrets:h,onUpdateLink:g,onUnlink:v}),C&&R?(0,d.jsx)(eP,{secrets:a,activeFile:C}):null]}),(0,d.jsx)(et,{ref:y,secrets:a,update:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){switch(t.label){case 0:return[4,S.replaceAll(e)];case 1:return t.sent(),[2]}})})()},disabledMessage:s.isAuthorized?void 0:s.message})]})};function eO(e,t){return(0,p.useUnlinkSharedSecretsMutation)({update:function(n,r,i){var a=r.data,o=i.variables;(null==a?void 0:a.unlinkSharedSecrets.__typename)==="UnlinkSharedSecretsResult"&&n.updateQuery({query:p.ReplLinkedSecretsDocument,variables:{replId:e}},function(e){if(!(null==e?void 0:e.getRepl)||"Repl"!==e.getRepl.__typename||!o)return e;var n,r,i=null!=(r=null==(n=e.getRepl.sharedSecretLinks)?void 0:n.filter(function(e){return!o.input.ids.includes(e.id)}))?r:[];return t(i.map(function(e){return{key:e.alias,url:e.secret.signedUrl}})),(0,l._)((0,s._)({},e),{getRepl:(0,l._)((0,s._)({},e.getRepl),{sharedSecretLinks:i})})})}})}function eV(e,t){return(0,p.useLinkSharedSecretsMutation)({update:function(n,r){return(0,o._)(function(n,r){var i,a,o,d,f,m,h;return(0,c._)(this,function(c){switch(c.label){case 0:if((null==(i=r.data)?void 0:i.linkSharedSecrets.__typename)!=="LinkSharedSecretsResult")return[3,2];return o=i.linkSharedSecrets.links,m=(null==(d=n.readQuery({query:p.ReplLinkedSecretsDocument,variables:{replId:e}}))||null==(a=d.getRepl)?void 0:a.__typename)==="Repl"&&null!=(f=d.getRepl.sharedSecretLinks)?f:[],[4,t((h=(0,u._)(m).concat((0,u._)(o))).map(function(e){return{key:e.alias,url:e.secret.signedUrl}}))];case 1:c.sent(),n.updateQuery({query:p.ReplLinkedSecretsDocument,variables:{replId:e}},function(e){return(null==e?void 0:e.getRepl)&&"Repl"===e.getRepl.__typename?(0,l._)((0,s._)({},e),{getRepl:(0,l._)((0,s._)({},e.getRepl),{sharedSecretLinks:h})}):e}),c.label=2;case 2:return[2]}})}).apply(this,arguments)}})}function eN(e){var t,h,g,x,E,A=e.performPaneOperation,R=(0,a.default)(),I=(0,D.default)().secrets,P=(0,n._)(eO(R,I.replaceAllExternalSecrets),1)[0],O=(0,n._)(eV(R,I.replaceAllExternalSecrets),1)[0],N=(0,n._)((t=(0,D.default)().secrets,(0,p.useUpdateSharedSecretLinkMutation)({update:function(e,n){var r=n.data;if((null==r?void 0:r.updateSharedSecretLink.__typename)==="SharedSecretLink"){var i=r.updateSharedSecretLink;e.updateQuery({query:p.ReplLinkedSecretsDocument,variables:{replId:R}},function(e){if((null==e||null==(n=e.getRepl)?void 0:n.__typename)!=="Repl")return e;var n,r,a,o=null!=(a=null==(r=e.getRepl.sharedSecretLinks)?void 0:r.map(function(e){return e.id===i.id?i:e}))?a:[];return t.replaceAllExternalSecrets(o.map(function(e){return{key:e.alias,url:e.secret.signedUrl}})),(0,l._)((0,s._)({},e),{getRepl:(0,l._)((0,s._)({},e.getRepl),{sharedSecretLinks:o})})})}}})),1)[0],B=(0,w.useFlag)({controlName:"flag-manage-environment-tool",default:!1}),L=(0,n._)((0,r.useState)(new Map),2),U=L[0],H=L[1],F=(0,n._)((0,r.useState)(!1),2),q=F[0],z=F[1],G=(0,n._)((0,r.useState)(!1),2),W=G[0],K=G[1],Y=(0,n._)((0,r.useState)(!1),2),$=Y[0],X=Y[1],ee=(0,n._)((0,r.useState)(!1),2),et=ee[0],en=ee[1],er=(0,n._)((0,r.useState)(!1),2),ei=er[0],ea=er[1],eo=(0,r.useRef)(null),es=(0,j.default)(),el=(0,C.useMemoedDismissibleElement)("editors-have-secret-access-warning"),eu=(0,p.useSecretsPaneAuthorizationsQuery)({variables:{replId:R}}),ec=eu.data,ed=eu.loading,ep=eu.error,ef=(null==ec?void 0:ec.getRepl.__typename)==="Repl"?ec.getRepl:void 0,em=null==ef?void 0:ef.authorizations.editSecrets,eg=(0,p.useReplLinkedSecretsQuery)({variables:{replId:R}}),ex=eg.data,ey=eg.loading,eb=(0,p.useWorkspaceSecretsQuery)({fetchPolicy:"cache-and-network",ssr:!1}).data,eS=(0,r.useMemo)(function(){if((null==ex?void 0:ex.getRepl.__typename)==="Repl"&&ex.getRepl.sharedSecretLinks)return ex.getRepl.sharedSecretLinks},[ex]),e_=(0,r.useMemo)(function(){var e;return(null==eb||null==(e=eb.currentUser)?void 0:e.secrets.__typename)==="SharedSecretConnection"?eb.currentUser.secrets.items:[]},[eb]),ew=(0,r.useMemo)(function(){return new Set((0,u._)(U.keys()).concat((0,u._)((null==eS?void 0:eS.map(function(e){return e.alias}))||[])))},[U,eS]),ej=(0,r.useMemo)(function(){return e_.map(function(e){return{id:e.id,value:e.value||""}})},[e_]);return((0,r.useEffect)(function(){(0,T.trackOnce)(k.events.ENV_EDITOR_USED,{action:"opened",tab:"repl"})},[]),(0,r.useEffect)(function(){var e=I.watch(function(e){H(e)});return function(){e()}},[I,H]),!U||ed||ey||el.isLoading)?(0,d.jsx)(J.View,{align:"center",justify:"center",clsx:eE.default.loadingContainer,children:(0,d.jsx)(b.default,{size:24})}):(0,d.jsxs)(J.View,{css:eE.default.body,grow:!0,p:8,gap:12,shrink:!0,children:[(0,d.jsxs)(J.View,{children:[(0,d.jsxs)(J.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,d.jsx)(Q.Text,{variant:"subheadDefault",multiline:!1,children:"Secrets"}),(0,d.jsxs)(J.View,{row:!0,gap:8,children:[(0,d.jsxs)(eh.PopupMenu,{placement:"bottom right",trigger:(0,d.jsx)(Z.Button,{text:"More",size:"small"}),children:[(0,d.jsx)(eh.MenuItem,{label:"Docs",icon:(0,d.jsx)(f.default,{}),href:_.LINKS_DOCS.SECRETS,target:"_blank"}),(0,d.jsx)(eh.MenuItem,{label:"Edit as JSON",icon:(0,d.jsx)(m.default,{}),onAction:function(){var e;null==(e=eo.current)||e.openJSONEditor()},isDisabled:!(null==em?void 0:em.isAuthorized)||(null==(h=eo.current)?void 0:h.isSaving)===!0||!!(null==(g=eo.current)?void 0:g.disabledMessage)}),(0,d.jsx)(eh.MenuItem,{label:"Edit as .env",icon:(0,d.jsx)(v.default,{}),onAction:function(){var e;null==(e=eo.current)||e.openEnvEditor()},isDisabled:!(null==em?void 0:em.isAuthorized)||(null==(x=eo.current)?void 0:x.isSaving)===!0||!!(null==(E=eo.current)?void 0:E.disabledMessage)})]}),(null==ef?void 0:ef.isOwner)?(0,d.jsxs)(eD.PopoverTrigger,{label:"Link Account Secrets",isOpen:ei,onOpenChange:ea,placement:"bottom",offset:8,children:[(0,d.jsx)(Z.Button,{iconLeft:(0,d.jsx)(y.default,{}),text:(0,d.jsxs)(d.Fragment,{children:["Link"," ",(0,d.jsx)("span",{css:eE.default.tabExtraText,children:"Account Secrets"})]}),size:"small",disabled:!(null==em?void 0:em.isAuthorized)}),(0,d.jsx)(M.default,{secrets:e_,actionText:"Link to this App",helpText:"Linked secrets will stay in sync with your Account Secrets",existingKeys:ew,onSelectSecrets:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,O({variables:{input:{resourceId:R,resourceType:i.SharedSecretResourceType.Repl,secrets:e.map(function(e){return{secretId:e.id,alias:e.name}})}}})];case 1:return t.sent(),es.showConfirm("Secrets linked to this App"),ea(!1),(0,T.track)(k.events.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"secrets-pane",count:e.length,keys:e.map(function(e){return e.name})}),[3,3];case 2:return t.sent(),es.showError("Failed to link secrets"),[3,3];case 3:return[2]}})})()},linkedSecrets:eS})]}):null,(0,d.jsx)(ev.Tooltip,{isDisabled:null==em?void 0:em.isAuthorized,tooltip:null==em?void 0:em.message,children:(0,d.jsx)(Z.Button,{iconLeft:(0,d.jsx)(S.default,{}),text:(0,d.jsxs)(d.Fragment,{children:["New ",(0,d.jsx)("span",{css:eE.default.tabExtraText,children:"Secret"})]}),colorway:"primary",size:"small",disabled:!(null==em?void 0:em.isAuthorized),onClick:function(){return z(!0)}})})]})]}),(0,d.jsx)(eM,{performPaneOperation:A,showAddSecret:q,setShowAddSecret:z,secrets:U,dismissibleElement:el,editAuthorization:em,error:ep,linkedSecrets:eS,userSecrets:ej,rawEditorRef:eo,onUpdateLink:function(e,t){return(0,o._)(function(){return(0,c._)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,N({variables:{input:{id:e,resourceId:R,resourceType:i.SharedSecretResourceType.Repl,alias:t}}})];case 1:return n.sent(),es.showConfirm("Secret link updated"),[3,3];case 2:return n.sent(),es.showError("Failed to update secret link"),[3,3];case 3:return[2]}})})()},onUnlink:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,P({variables:{input:{resourceId:R,resourceType:i.SharedSecretResourceType.Repl,ids:[e]}}})];case 1:return t.sent(),es.showConfirm("Secret unlinked"),[3,3];case 2:return t.sent(),es.showError("Failed to unlink secret"),[3,3];case 3:return[2]}})})()}})]}),B?(0,d.jsxs)(J.View,{css:eE.default.configurationsSection,children:[(0,d.jsxs)(J.View,{css:eE.default.sectionHeader,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,d.jsx)(Q.Text,{variant:"subheadDefault",multiline:!1,children:"Configurations"}),(0,d.jsxs)(J.View,{row:!0,gap:8,children:[(0,d.jsxs)(eh.PopupMenu,{placement:"bottom right",trigger:(0,d.jsx)(Z.Button,{text:"More",size:"small"}),children:[(0,d.jsx)(eh.MenuItem,{label:"New published app configuration",icon:(0,d.jsx)(S.default,{}),onAction:function(){return X(!0)}}),(0,d.jsx)(eh.MenuItem,{label:"New testing configuration",icon:(0,d.jsx)(S.default,{}),onAction:function(){return en(!0)}})]}),(0,d.jsx)(ev.Tooltip,{isDisabled:null==em?void 0:em.isAuthorized,tooltip:null==em?void 0:em.message,children:(0,d.jsx)(Z.Button,{iconLeft:(0,d.jsx)(S.default,{}),text:(0,d.jsxs)(d.Fragment,{children:["New ",(0,d.jsx)("span",{css:eE.default.tabExtraText,children:"configuration"})]}),colorway:"primary",size:"small",disabled:!(null==em?void 0:em.isAuthorized),onClick:function(){return K(!0)}})})]})]}),(0,d.jsx)(V.default,{performPaneOperation:A,editAuthorization:em,showAddEnvVar:W,setShowAddEnvVar:K,showAddProdOnly:$,setShowAddProdOnly:X,showAddDevOnly:et,setShowAddDevOnly:en})]}):null]})}function eB(e){var t=(0,a.default)(),o=(0,n._)(eV(t,e),1)[0],s=(0,r.useCallback)(function(e){return o({variables:{input:{resourceId:t,resourceType:i.SharedSecretResourceType.Repl,secrets:e}}})},[o,t]),l=(0,n._)(eO(t,e),1)[0];return{linkSecrets:s,unlinkSecrets:(0,r.useCallback)(function(e){return l({variables:{input:{resourceId:t,resourceType:i.SharedSecretResourceType.Repl,ids:e}}})},[l,t])}}e.s(["default",()=>eN,"useLinkSharedSecretsWithCache",()=>eV,"useUnlinkSharedSecretsWithCache",()=>eO],32967),e.s(["useLinkUnlinkSecrets",()=>eB],316799)},495663,e=>{e.v({envItem:"EnvironmentRequested-module__YzIbEq__envItem",envList:"EnvironmentRequested-module__YzIbEq__envList"})},932708,e=>{e.v({envHeader:"index-module__VR971W__envHeader",envRow:"index-module__VR971W__envRow",envValueRoot:"index-module__VR971W__envValueRoot",input:"index-module__VR971W__input",primaryButton:"index-module__VR971W__primaryButton"})},272643,e=>{e.v({requestedSecretsList:"SecretsRequested-module__FbxOSG__requestedSecretsList",requestedSecretsListItem:"SecretsRequested-module__FbxOSG__requestedSecretsListItem",root:"SecretsRequested-module__FbxOSG__root",seeAllButton:"SecretsRequested-module__FbxOSG__seeAllButton"})},147721,80858,922463,245329,822229,613909,593366,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(276385),a=e.i(389959),o=e.i(131141),s=e.i(712771),l=e.i(979530),u=e.i(269848),c=e.i(255701),d=e.i(653412);function p(e){switch(e){case 1:default:return"development";case 2:return"production";case 3:return"shared"}}e.s(["getEnvironmentLabel",()=>p],80858);var f=e.i(183035),m=e.i(480028),h=e.i(140487),g=e.i(960178),v=e.i(625484),x=e.i(495663);function y(e){var t=e.envVars,n=e.openEnvEditor;return(0,i.jsx)(d.EventPane,{left:(0,i.jsx)(c.default,{size:16}),title:"".concat(t.length," environment ").concat(1===t.length?"variable":"variables"," requested"),children:(0,i.jsxs)(v.View,{gap:12,p:12,children:[(0,i.jsx)(v.View,{className:x.default.envList,gap:4,children:t.map(function(e,t){return(0,i.jsxs)(v.View,{row:!0,align:"center",justify:"space-between",className:x.default.envItem,gap:4,p:8,children:[(0,i.jsxs)(v.View,{row:!0,align:"center",gap:8,children:[(0,i.jsx)(g.Text,{variant:"small",color:"default",children:e.key}),(0,i.jsxs)(g.Text,{variant:"small",color:"dimmer",children:["(",p(e.environment),")"]})]}),(0,i.jsx)(f.default,{size:16,color:m.tokens.accentPositiveDefault})]},"".concat(e.key,"-").concat(e.environment,"-").concat(t))})}),(0,i.jsx)(v.View,{children:(0,i.jsx)(h.Button,{onClick:n,variant:"outlined",size:"small",text:"See all environment variables"})})]})})}var b=e.i(136540),S=e.i(607278),_=e.i(751273),w=e.i(932708);function j(e){var f=e.openEnvEditor,m=e.envVars,x=e.onComplete,j=e.waitingOnUser,T=e.sessionId,k=e.addEnvEntries,D=(0,n._)((0,a.useState)(!0),2),C=D[0],E=D[1],A=(0,n._)((0,a.useState)(!1),2),R=A[0],I=A[1],P=(0,n._)((0,a.useState)(function(){return m.map(function(e){return{key:e.key,environment:e.environment,value:""}})}),2),M=P[0],O=P[1],V=(0,a.useCallback)(function(e,t){O((0,o.produce)(function(n){n[e].value=t}))},[]),N=(0,a.useMemo)(function(){return M.every(function(e){return""!==e.value.trim()})},[M]),B=(0,a.useCallback)(function(){return(0,t._)(function(){return(0,r._)(this,function(e){switch(e.label){case 0:if(!N||R)return[2];I(!0),e.label=1;case 1:return e.trys.push([1,,4,5]),[4,k(M)];case 2:return e.sent(),[4,x(M)];case 3:return e.sent(),[3,5];case 4:return I(!1),[7];case 5:return[2]}})})()},[M,N,x,R,k]);return j?(0,i.jsx)(d.EventPane,{left:(0,i.jsx)(c.default,{size:16}),title:"Environment Variables",children:(0,i.jsxs)(v.View,{gap:16,p:8,children:[(0,i.jsxs)(v.View,{gap:8,children:[(0,i.jsxs)(v.View,{className:"".concat(w.default.envRow," ").concat(w.default.envHeader),children:[(0,i.jsx)(v.View,{children:(0,i.jsx)(g.Text,{variant:"small",color:"dimmer",children:"Key"})}),(0,i.jsx)(v.View,{children:(0,i.jsx)(g.Text,{variant:"small",color:"dimmer",children:"Environment"})}),(0,i.jsxs)(v.View,{row:!0,align:"center",justify:"space-between",children:[(0,i.jsx)(g.Text,{variant:"small",color:"dimmer",children:"Value"}),(0,i.jsx)(_.Tooltip,{tooltip:C?"Show values":"Hide values",children:(0,i.jsx)(b.IconButton,{alt:C?"Show values":"Hide values",tooltipBehavior:"hidden",onClick:function(){return E(!C)},size:18,children:C?(0,i.jsx)(s.default,{}):(0,i.jsx)(l.default,{})})})]})]}),M.map(function(e,t){return(0,i.jsxs)(v.View,{className:w.default.envRow,children:[(0,i.jsx)(v.View,{children:(0,i.jsx)(S.Input,{value:e.key,disabled:!0,className:w.default.input})}),(0,i.jsx)(v.View,{children:(0,i.jsx)(S.Input,{value:p(e.environment),disabled:!0,className:w.default.input})}),(0,i.jsx)(v.View,{className:w.default.envValueRoot,"data-sensitive":C,gap:8,children:(0,i.jsx)(S.Input,{value:e.value,onChange:function(e){return V(t,e.target.value)},placeholder:"Enter value...",className:w.default.input,autoComplete:"off"})})]},"".concat(e.key,"-").concat(e.environment))})]}),(0,i.jsxs)(v.View,{row:!0,gap:4,wrap:"wrap",children:[(0,i.jsx)(h.Button,{className:w.default.primaryButton,onClick:B,disabled:!N,text:"Save Variables",loading:R,iconLeft:R?(0,i.jsx)(u.default,{size:16}):void 0,colorway:"primary"}),(0,i.jsx)(h.Button,{onClick:f,variant:"outlined",text:"Open Env Editor"})]})]})}):(0,i.jsx)(y,{envVars:m,openEnvEditor:f,sessionId:T})}e.s(["EnvironmentInput",()=>j],147721);var T=e.i(878420),k=e.i(64386),D=e.i(346715),C=e.i(830675),E=e.i(678420),A=e.i(844941),R=e.i(882848),I=e.i(995691),P=e.i(222342);function M(e){var t=(0,n._)((0,a.useState)(e),2),r=t[0],i=t[1],o=(0,n._)((0,a.useState)(null),2),s=o[0],l=o[1];return e!==r&&(l(r),i(e)),s}e.s(["usePrevious",()=>M],922463);var O=e.i(858248),V=e.i(709485),N=e.i(509908),B=e.i(368964),L=e.i(466640),U=e.i(207237),H=e.i(546284),F=e.i(32967),q=e.i(446530),z=e.i(613355),G=e.i(127227),W=e.i(739521),K=(0,q.cssRecord)({secretName:[z.rcss.fontWeight.medium],secretValueCellHeader:[z.rcss.gap(4),z.rcss.color.foregroundDimmer],tableRow:[z.rcss.flex.column,z.rcss.gap(8)],secretsRow:[z.rcss.gap(8)],checkboxCell:[{flexGrow:0,flexShrink:0,width:m.tokens.space24}],secretValueCell:[z.rcss.flex.column,z.rcss.gap(4),{width:"30%"}],confirmationMessage:[z.rcss.color.accentPositiveStronger,z.rcss.flex.row,z.rcss.align.center,z.rcss.gap(4)]});function Y(e){var t=e.value,r=e.label,o=(0,n._)((0,a.useState)(!1),2),u=o[0],c=o[1],d=(0,a.useCallback)(function(){c(function(e){return!e})},[]);return(0,i.jsxs)(v.View,{css:K.secretValueCell,children:[(0,i.jsxs)(v.View,{css:K.secretValueCellHeader,row:!0,align:"center",children:[(0,i.jsx)("span",{children:r}),(0,i.jsx)(b.IconButton,{alt:"Toggle Visibility",onClick:d,children:u?(0,i.jsx)(s.default,{}):(0,i.jsx)(l.default,{})})]}),(0,i.jsx)(g.Text,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:u?t:"••••••••"})]})}function Z(e){var o=e.existingSecrets,s=e.accountSecrets,l=e.onContinue,u=e.step,c=e.linkedSecrets,d=e.onSecretsUpdated,p=e.replaceAllExternalSecrets,m=e.removeEntries,x=(0,P.default)(),y=(0,n._)((0,L.useUpdateSharedSecretsWithCache)(),1)[0],b=(0,U.default)(),S=(0,n._)((0,F.useLinkSharedSecretsWithCache)(b,p),1)[0],_=(0,n._)((0,F.useUnlinkSharedSecretsWithCache)(b,p),1)[0],w=(0,n._)((0,a.useState)(o),2),j=w[0],T=w[1],k=(0,n._)((0,a.useState)(!0),2),E=k[0],A=k[1],R=(0,n._)((0,a.useState)(!1),2),I=R[0],M=R[1],N="done"===u,q=(0,n._)((0,a.useState)(new Set),2),z=q[0],Z=q[1],$=(0,n._)((0,a.useState)(!1),2),X=$[0],Q=$[1];(0,a.useEffect)(function(){T(o),1===o.length&&Z(new Set([o[0].key]))},[o]);var J=(0,a.useCallback)(function(e){Z(function(t){var n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]),ee=(0,a.useMemo)(function(){return new Map(s.map(function(e){return[e.name,e]}))},[s]),et=(0,a.useCallback)(function(){A(!1),l()},[l]),en=(0,a.useCallback)(function(){return(0,t._)(function(){var e,t,n,i,a,o,s,u,p,f;return(0,r._)(this,function(r){switch(r.label){case 0:if(0===z.size)return et(),[2];Q(!0),r.label=1;case 1:if(r.trys.push([1,8,,9]),o=j.filter(function(e){return z.has(e.key)}),!((u=((null==c||null==(e=c.getRepl)?void 0:e.__typename)==="Repl"&&null!=(s=c.getRepl.sharedSecretLinks)?s:[]).filter(function(e){return o.some(function(t){return t.key===e.alias})}).map(function(e){return e.id})).length>0))return[3,3];return[4,_({variables:{input:{resourceId:b,resourceType:B.SharedSecretResourceType.Repl,ids:u}}})];case 2:r.sent(),r.label=3;case 3:return[4,m.apply(void 0,(0,D._)(o.map(function(e){return e.key})))];case 4:return r.sent(),[4,y({variables:{input:{ownerType:B.SharedSecretOwnerType.Account,secrets:o.map(function(e){var t,n;return{id:null!=(n=null==(t=ee.get(e.key))?void 0:t.id)?n:"",name:e.key,value:e.value}})}}})];case 5:if(p=r.sent(),(0,O.track)(V.events.SHARED_SECRETS_USED,{ownerType:"account",action:"update",source:"agent"}),!((null==(t=p.data)?void 0:t.updateSharedSecrets.__typename)==="UpdateSharedSecretsResult"&&(null==(i=p.data)||null==(n=i.updateSharedSecrets)?void 0:n.updatedSecrets)))return[3,7];return[4,S({variables:{input:{resourceId:b,resourceType:B.SharedSecretResourceType.Repl,secrets:p.data.updateSharedSecrets.updatedSecrets.map(function(e){return{secretId:e.id,alias:e.name}})}}})];case 6:r.sent(),(0,O.track)(V.events.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"agent",count:p.data.updateSharedSecrets.updatedSecrets.length}),r.label=7;case 7:return A(!1),Q(!1),M(!0),l(),(null==(a=p.data)?void 0:a.updateSharedSecrets.__typename)==="UpdateSharedSecretsResult"&&(null==d||d(o.map(function(e){return{key:e.key,selectedKey:e.key}}))),[3,9];case 8:return f=r.sent(),C.captureException(f),x.showError("Something went wrong. Please try again."),Q(!1),[3,9];case 9:return[2]}})})()},[y,_,j,z,l,et,ee,x,S,b,c,d,m]),er=j.length,ei=(0,H.default)("Secret",er),ea=1===er?"it":"them",eo=z.size,es=(0,H.default)("Secret",eo),el=(0,a.useMemo)(function(){return 1===j.length?j[0]:null},[j]);return 0===er||"savingExistingSecrets"!==u&&"done"!==u?null:el?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(g.Text,{children:['A Secret named "',el.key,'" already exists in your Account Secrets. Would you like to replace it with the new value?']}),(0,i.jsxs)(v.View,{row:!0,gap:4,children:[(0,i.jsx)(h.Button,{text:"Replace Account Secret",onClick:en,loading:X,disabled:N}),(0,i.jsx)(h.Button,{text:"Not now",variant:"outlined",onClick:et,loading:X,disabled:N})]}),N&&I&&(0,i.jsxs)(v.View,{css:K.confirmationMessage,children:[(0,i.jsx)(f.default,{size:16}),"Secret updated and linked"]})]}):(0,i.jsx)(W.Modal,{isOpen:E,onRequestClose:et,children:(0,i.jsxs)(v.View,{gap:16,children:[(0,i.jsxs)(g.Header,{level:3,variant:"subheadDefault",children:[er," matching ",ei," already exist",1===er?"s":""," in your account.",(0,i.jsx)("br",{}),"Would you like to replace ",ea,"?"]}),(0,i.jsx)(v.View,{gap:8,children:j.map(function(e){var t=s.find(function(t){return t.name===e.key});return(0,i.jsxs)(v.View,{css:K.tableRow,p:6,children:[(0,i.jsx)(v.View,{row:!0,align:"center",children:(0,i.jsx)(g.Text,{css:K.secretName,children:e.key})}),(0,i.jsxs)(v.View,{css:K.secretsRow,row:!0,align:"center",children:[(0,i.jsx)(v.View,{css:K.checkboxCell,children:(0,i.jsx)(G.Checkbox,{checked:z.has(e.key),onChange:function(){return J(e.key)}})}),(0,i.jsx)(Y,{label:"Existing",value:(null==t?void 0:t.value)||""}),(0,i.jsx)(Y,{label:"New",value:e.value})]})]},e.key)})}),(0,i.jsxs)(v.View,{row:!0,gap:4,children:[(0,i.jsx)(h.Button,{text:"Cancel",onClick:et,disabled:X}),(0,i.jsx)(h.Button,{colorway:"primary",text:"Replace ".concat(eo," ").concat(es),onClick:en,loading:X})]})]})})}var $=e.i(40916),X=(0,q.cssRecord)({confirmationMessage:[z.rcss.color.accentPositiveStronger,z.rcss.flex.row,z.rcss.align.center,z.rcss.gap(4)]});function Q(e){var o=e.newSecrets,s=e.step,l=e.onContinue,u=e.linkSecrets,c=e.unlinkSecrets,d=e.linkedSecrets,p=e.onSecretsUpdated,m=e.removeEntries,x=(0,P.default)(),y=(0,n._)((0,a.useState)(!1),2),b=y[0],S=y[1],_=(0,n._)((0,L.useCreateSharedSecretsWithCache)(),1)[0],w=(0,n._)((0,a.useState)(!1),2),j=w[0],T=w[1],k=(0,a.useCallback)(function(){return(0,t._)(function(){var e,t,n,i,a,s,f;return(0,r._)(this,function(r){switch(r.label){case 0:S(!0),r.label=1;case 1:return r.trys.push([1,8,,9]),[4,_({variables:{input:{ownerType:B.SharedSecretOwnerType.Account,secrets:o.map(function(e){return{name:e.key,value:e.value}})}}})];case 2:if(!((null==(e=(t=r.sent()).data)?void 0:e.createSharedSecrets)&&"createdSecrets"in t.data.createSharedSecrets&&"CreateSharedSecretsResult"===t.data.createSharedSecrets.__typename&&t.data.createSharedSecrets.createdSecrets))return[3,7];return i=t.data.createSharedSecrets.createdSecrets,[4,m.apply(void 0,(0,D._)(o.map(function(e){return e.key})))];case 3:if(r.sent(),!((s=((null==d||null==(n=d.getRepl)?void 0:n.__typename)==="Repl"&&null!=(a=d.getRepl.sharedSecretLinks)?a:[]).filter(function(e){return o.some(function(t){return t.key===e.alias})}).map(function(e){return e.id})).length>0))return[3,5];return[4,c(s)];case 4:r.sent(),r.label=5;case 5:return[4,u(i.map(function(e){return{secretId:e.id,alias:e.name}}))];case 6:r.sent(),null==p||p(i.map(function(e){return{key:e.name,selectedKey:e.name}})),(0,O.track)(V.events.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"agent",count:i.length}),r.label=7;case 7:return(0,O.track)(V.events.SHARED_SECRETS_USED,{ownerType:"account",action:"create",source:"agent"}),T(!0),l(),[3,9];case 8:return f=r.sent(),C.captureException(f),x.showError("Something went wrong."),[3,9];case 9:return S(!1),[2]}})})()},[o,l,_,x,u,c,d,p,m]);return 0===o.length?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(g.Text,{children:["Would you like to save"," ",1===o.length?"this Secret":"these Secrets"," to your Account Secrets so you can easily access"," ",1===o.length?"it":"them"," in other Apps?"]}),o.length>1&&(0,i.jsx)(g.Text,{color:"dimmest",children:o.map(function(e){return e.key}).join(", ")}),(0,i.jsxs)(v.View,{row:!0,gap:4,children:[(0,i.jsx)(h.Button,{text:"Add to Account Secrets",onClick:k,iconLeft:(0,i.jsx)($.default,{}),loading:b,disabled:"savingNewSecrets"!==s||j}),(0,i.jsx)(h.Button,{text:"Not now",variant:"outlined",onClick:l,disabled:"savingNewSecrets"!==s||j,loading:b})]}),j&&(0,i.jsxs)(v.View,{css:X.confirmationMessage,children:[(0,i.jsx)(f.default,{size:16}),(0,H.default)("Secret",o.length)," saved to account"]})]})}var J=e.i(205158),ee=e.i(272643);function et(e){var t,r=e.watch,o=(0,n._)((0,a.useState)(new Map),2),s=o[0],l=o[1];return(0,a.useEffect)(function(){return r(l)},[r]),(0,i.jsx)(v.View,{clsx:ee.default.root,gap:4,children:(0,i.jsxs)(v.View,{gap:4,children:[(0,i.jsx)(v.View,{row:!0,align:"center",gap:6,justify:"space-between",children:(0,i.jsxs)(v.View,{row:!0,align:"center",gap:6,children:[(0,i.jsx)(I.default,{color:m.tokens.foregroundDimmer}),(0,i.jsxs)(g.Text,{color:"dimmer",children:[(0,H.default)("secrets",null==(t=e.keys)?void 0:t.length,!0)," requested"]}),(0,i.jsx)(g.Text,{variant:"small",multiline:!1,color:"dimmest",children:"•"}),(0,i.jsx)(h.Button,{clsx:ee.default.seeAllButton,variant:"underlinedOnHover",text:"See all secrets",onClick:e.openSecerets})]})}),(0,i.jsx)(v.View,{clsx:ee.default.requestedSecretsList,gap:6,row:!0,children:e.keys.map(function(e){return(0,i.jsxs)(v.View,{align:"center",row:!0,gap:4,clsx:ee.default.requestedSecretsListItem,p:4,children:[(null==s?void 0:s.get(e))?(0,i.jsx)(R.default,{color:m.tokens.foregroundDimmer,size:12}):(0,i.jsx)(J.default,{color:m.tokens.foregroundDimmest,size:12}),(0,i.jsx)(g.Text,{variant:"small",color:"dimmer",children:e})]},e)})})]})})}var en=e.i(886513),er=e.i(116235);function ei(e){return(0,i.jsxs)(er.default,(0,k._)((0,T._)({viewBox:"0 0 16 16"},e),{children:[(0,i.jsx)("path",{fillRule:"evenodd",d:"M6.95 2a2.85 2.85 0 1 0 0 5.7 2.85 2.85 0 0 0 0-5.7M5 4.85a1.95 1.95 0 1 1 3.9 0 1.95 1.95 0 0 1-3.9 0",clipRule:"evenodd"}),(0,i.jsx)("path",{d:"M4.55 9.2a2.85 2.85 0 0 0-2.85 2.85v1.2a.45.45 0 0 0 .9 0v-1.2a1.95 1.95 0 0 1 1.95-1.95h3.902a1.62 1.62 0 0 1 .322-.9z"}),(0,i.jsx)("path",{fillRule:"evenodd",d:"M11.783 7.05c-.384 0-.748.136-1.012.371a1.15 1.15 0 0 0-.404.86v.936H13.2v-.935c0-.317-.141-.627-.404-.86a1.53 1.53 0 0 0-1.013-.372M13.7 9.225v-.943c0-.47-.21-.913-.572-1.235a2.03 2.03 0 0 0-1.345-.497c-.5 0-.983.176-1.344.497a1.65 1.65 0 0 0-.572 1.235v.943a.73.73 0 0 0-.469.31 1.14 1.14 0 0 0-.198.66v2.545c0 .246.07.48.198.66a.7.7 0 0 0 .57.317h3.63c.245 0 .443-.14.57-.318.128-.179.199-.412.199-.66v-2.545c0-.247-.071-.48-.199-.66a.73.73 0 0 0-.468-.309m-3.732.492c-.04 0-.102.023-.163.108a.64.64 0 0 0-.105.37v2.545c0 .155.045.284.105.369.061.085.122.108.163.108h3.63c.041 0 .102-.023.163-.108a.64.64 0 0 0 .106-.37v-2.545a.64.64 0 0 0-.106-.369c-.06-.085-.122-.108-.163-.108z",clipRule:"evenodd"}),(0,i.jsx)("path",{fillRule:"evenodd",d:"M10.356 6.954c.385-.343.9-.529 1.427-.529.528 0 1.043.186 1.428.529.387.344.614.82.614 1.328v.845c.19.06.34.189.445.335.144.202.222.462.222.732v2.546c0 .27-.078.53-.222.732-.143.2-.376.37-.672.37h-3.63c-.296 0-.528-.17-.672-.37a1.27 1.27 0 0 1-.221-.732v-2.546c0-.27.077-.53.221-.732a.88.88 0 0 1 .446-.335v-.845c0-.508.227-.984.614-1.328m1.427-.279c-.47 0-.925.166-1.261.466-.338.3-.53.71-.53 1.14v.944a.125.125 0 0 1-.105.124.6.6 0 0 0-.387.258c-.11.156-.175.363-.175.587v2.546c0 .223.064.431.175.586.11.156.275.266.468.266h3.63c.194 0 .358-.11.468-.266.111-.155.176-.363.176-.586v-2.546c0-.224-.065-.431-.176-.587a.6.6 0 0 0-.386-.258.125.125 0 0 1-.105-.124v-.943c0-.431-.193-.841-.53-1.141s-.791-.466-1.262-.466m0 .5c-.356 0-.69.126-.93.34a1.03 1.03 0 0 0-.361.767v.81h2.583v-.81c0-.279-.124-.556-.362-.768a1.4 1.4 0 0 0-.93-.339m-1.095.153a1.65 1.65 0 0 1 1.095-.403c.414 0 .808.146 1.096.403.288.255.446.6.446.954v.935a.125.125 0 0 1-.125.125h-2.833a.125.125 0 0 1-.125-.125v-.935c0-.355.158-.699.446-.954m-.719 2.514c-.004 0-.028.008-.062.056a.5.5 0 0 0-.082.296v2.546a.5.5 0 0 0 .082.296c.034.048.058.055.062.056h3.628c.005 0 .028-.008.062-.056a.5.5 0 0 0 .083-.296v-2.546a.5.5 0 0 0-.083-.296c-.034-.048-.057-.055-.062-.056zm-.265-.09c.078-.109.173-.16.264-.16h3.63c.091 0 .187.051.265.16a.77.77 0 0 1 .129.442v2.546a.77.77 0 0 1-.129.441c-.078.11-.174.161-.265.161h-3.63c-.09 0-.186-.051-.264-.16a.77.77 0 0 1-.13-.442v-2.546c0-.178.053-.333.13-.441",clipRule:"evenodd"})]}))}var ea=e.i(880321),eo=e.i(85742),es=(0,q.cssRecord)({root:[z.rcss.flex.row,z.rcss.justify.spaceBetween,z.rcss.align.center],metadata:[z.rcss.flex.column,z.rcss.gap(8),z.rcss.width("100%")],label:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},value:{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},comboBox:[{"& > * > *":{backgroundColor:"".concat(m.tokens.backgroundDefault," !important")}}]}),el=(0,a.forwardRef)(function(e,t){var n=e.secretKey,r=e.secretValue,a=e.isSensitive,o=(0,en._)(e,["secretKey","secretValue","isSensitive"]);return(0,i.jsx)(eo.BaseListBoxItem,(0,k._)((0,T._)({},o),{ref:t,textValue:n,css:es.root,children:(0,i.jsxs)("div",{css:es.metadata,children:[(0,i.jsx)(g.Text,{color:"dimmer",variant:"small",css:es.label,children:n}),(0,i.jsx)(g.Text,{variant:"small",css:es.value,"data-sensitive":a,children:a?"********":r})]})}))}),eu=(0,a.forwardRef)(function(e,t){var n=e.accountSecrets,r=e.onChange,o=e.onSelectionChange,s=e.value,l=e.isSensitive,u=e.readOnly,c=e.keyName,d=e.selectedKey,p=(0,a.useRef)(!1);return(0,i.jsx)(ea.ComboBox,{ref:t,triggerIcon:(0,i.jsx)(ei,{}),css:es.comboBox,maxHeight:200,menuTrigger:"focus","aria-label":"".concat(c," Value"),isRequired:!0,isDisabled:u,allowsEmptyCollection:!1,selectedKey:d,onSelectionChange:function(e){if(e){p.current=!0;var t,i=n.find(function(t){return t.name===e});r(null!=(t=null==i?void 0:i.value)?t:""),o(e),setTimeout(function(){p.current=!1},50)}},onInputChange:function(e){p.current||(r(e),o(null))},inputValue:s,isInvalid:!1,allowsCustomValue:!0,formValue:"text",children:n.map(function(e){return(0,i.jsx)(el,{isSensitive:l,secretKey:e.name,secretValue:e.value,label:e.name,id:e.name},e.name)})})}),ec=(0,e.i(967629).css)({display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gridAutoFlow:"row",gap:m.tokens.space8,"> *":{height:"fit-content"}}),ed=(0,q.cssRecord)({root:[ec]}),ep=(0,q.cssRecord)({actions:[z.rcss.gap(4),z.rcss.flex.wrap],secretHeader:[ec,z.rcss.mb(4),z.rcss.fontSize("small"),z.rcss.color.foregroundDimmer,{lineHeight:m.tokens.lineHeightSmall,"> div":[z.rcss.gap(4),{display:"flex",alignItems:"center",flexDirection:"row"}]}],secretValueRoot:[z.rcss.gap(8),{'&[data-sensitive="true"] input':{fontFamily:"text-security-disc"}}],secretValueInput:[z.rcss.flex.column,z.rcss.flex.growAndShrink(1)],input:[{backgroundColor:m.tokens.backgroundDefault}],secretValueFooter:[z.rcss.p(4),{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}]}),ef=(0,a.forwardRef)(function(e,t){var n=e.keyName,r=e.value,o=e.onChange,s=e.readOnly,l=e.accountSecrets,u=e.isSensitive,c=e.selectedKey,d=e.onSelectedKeyChange,p=(0,a.useMemo)(function(){return(0,D._)(l).sort(function(e,t){return e.name===n?-1:+(t.name===n)})},[l,n]);return(0,i.jsxs)(v.View,{css:ed.root,children:[(0,i.jsx)(v.View,{children:(0,i.jsx)(S.Input,{value:n,disabled:!0,css:ep.input})}),(0,i.jsx)(v.View,{css:ep.secretValueRoot,row:!0,align:"start","data-sensitive":u,children:(0,i.jsxs)(v.View,{css:ep.secretValueInput,children:[(0,i.jsx)(eu,{ref:t,accountSecrets:p,onChange:o,onSelectionChange:d,value:r,isSensitive:u,readOnly:s,keyName:n,selectedKey:c}),c?(0,i.jsxs)(v.View,{row:!0,gap:4,align:"center",children:[(0,i.jsx)(_.Tooltip,{tooltip:"Link Account Secret to this Repl",children:(0,i.jsx)(R.default,{color:m.tokens.accentPrimaryStronger})}),(0,i.jsxs)(g.Text,{variant:"small",color:"dimmer",css:ep.secretValueFooter,children:["Using ",c]})]}):null]})})]})});function em(e){var c=e.keys,p=e.addEntries,f=e.removeEntries,m=e.onComplete,g=e.sessionId,x=e.waitingOnUser,y=e.replId,S=e.linkSecrets,_=e.unlinkSecrets,w=e.replaceAllExternalSecrets,j=e.watch,R=e.openSecrets,B=(0,P.default)(),L=(0,n._)((0,a.useState)(!1),2),U=L[0],H=L[1],F=(0,n._)((0,a.useState)(!0),2),q=F[0],z=F[1],G=(0,E.useWorkspaceSecretsQuery)({fetchPolicy:"cache-and-network",ssr:!1}).data,W=(0,a.useMemo)(function(){var e;return(null==G||null==(e=G.currentUser)?void 0:e.secrets.__typename)==="SharedSecretConnection"?G.currentUser.secrets.items:[]},[G]),K=(0,E.useReplLinkedSecretsQuery)({variables:{replId:y}}).data,Y=(0,n._)((0,a.useState)(c.map(function(e){return{key:e,value:""}})),2),$=Y[0],X=Y[1],J=(0,n._)((0,a.useState)(new Map),2),ee=J[0],en=J[1];(0,a.useEffect)(function(){W&&$.every(function(e){return""===e.value})&&(X((0,o.produce)(function(e){e.forEach(function(e){var t=W.find(function(t){return t.name===e.key});t&&(e.value=t.value)})})),en((0,o.produce)(function(e){c.forEach(function(t){var n=W.find(function(e){return e.name===t});n&&e.set(t,n.name)})})))},[W,c,$]);var er=(0,n._)((0,a.useState)(x?"selecting":"done"),2),ea=er[0],eo=er[1],es=(0,n._)((0,a.useState)([]),2),el=es[0],eu=es[1],ec=(0,n._)((0,a.useState)([]),2),ed=ec[0],em=ec[1],eh=(0,n._)((0,a.useState)([]),2),eg=(eh[0],eh[1]),ev=(0,a.useRef)(!1);(0,a.useEffect)(function(){!ev.current&&c&&((0,N.trackAgentAnalyticsEvent)({action:"secrets_requested",secretsRequested:c,sessionId:g}),ev.current=!0)},[c,g]);var ex=(0,a.useMemo)(function(){return $.every(function(e){return!!e.value})},[$]),ey=(0,a.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextNewSecrets,n=e.nextExistingEntries,r=e.nextMatchingEntries;t&&eu(t),n&&em(n),r&&eg(r);var i=null!=t?t:el,a=null!=n?n:ed,o={selecting:function(){return i.length>0?"savingNewSecrets":a.length>0?"savingExistingSecrets":"done"},savingNewSecrets:function(){return a.length>0?"savingExistingSecrets":"done"},savingExistingSecrets:"done",done:"done"};ea in o&&eo("function"==typeof o[ea]?o[ea]():o[ea])},[ed,el,ea]),eb=M(ea),eS=(0,a.useRef)("done"===ea);(0,a.useEffect)(function(){"selecting"===ea||eS.current||(ee.size>0&&(0,O.track)(V.events.SHARED_SECRETS_USED,{ownerType:"account",action:"copy",source:"agent",size:ee.size}),eS.current=!0,m().catch(function(e){C.captureException(e),B.showError("Something went wrong. Please try again."),eS.current=!1,eb&&eo(eb)}))},[m,ea,ee,B,eb]);var e_=(0,a.useRef)(null),ew=(0,a.useRef)(null),ej=(0,a.useCallback)(function(){ew.current&&ew.current.focus()},[]);return(0,i.jsxs)(v.View,{gap:8,children:[x?(0,i.jsx)(d.EventPane,{left:(0,i.jsx)(I.default,{size:16}),title:"Secrets",width:"wider",children:(0,i.jsxs)(v.View,{p:8,children:[(0,i.jsxs)(v.View,{css:ep.secretHeader,children:[(0,i.jsx)(v.View,{children:"Key"}),(0,i.jsxs)(v.View,{children:["Value",(0,i.jsx)(b.IconButton,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return z(!q)},size:18,children:q?(0,i.jsx)(s.default,{}):(0,i.jsx)(l.default,{})})]})]}),(0,i.jsxs)(v.View,{gap:8,innerRef:e_,children:[$.map(function(e,t){var n,r=e.key,a=e.value;return(0,i.jsx)(ef,{isSensitive:q,keyName:r,value:a,readOnly:"done"===ea,accountSecrets:W,selectedKey:null!=(n=ee.get(r))?n:null,onSelectedKeyChange:function(e){en(function(t){var n=new Map(t);return e?n.set(r,e):n.delete(r),n})},onChange:function(e){X(function(t){return t.map(function(t){return t.key===r?(0,k._)((0,T._)({},t),{value:e}):t})})},ref:t===$.length-1?ew:void 0},r)}),(0,i.jsxs)(v.View,{css:ep.actions,row:!0,justify:"space-between",children:[W.length>0&&"selecting"===ea?(0,i.jsx)(h.Button,{iconLeft:(0,i.jsx)(ei,{}),text:"Choose from Account Vault",onClick:ej,disabled:"selecting"!==ea,loading:U}):(0,i.jsx)("span",{}),(0,i.jsx)(h.Button,{colorway:"primary",iconLeft:U?(0,i.jsx)(u.default,{}):(0,i.jsx)(A.default,{}),text:"Continue",onClick:function(){return(0,t._)(function(){var e,t,n,i,a,o,s,l,u;return(0,r._)(this,function(r){switch(r.label){case 0:H(!0),r.label=1;case 1:if(r.trys.push([1,8,,9]),e=new Map(W.map(function(e){return[e.name,e]})),n=(t=$.reduce(function(t,n){var r=e.get(n.key);return r?r.value===n.value?t.matchingEntries.push(n):t.existingEntries.push(n):t.newEntries.push(n),t},{newEntries:[],existingEntries:[],matchingEntries:[]})).newEntries,i=t.existingEntries,!((a=t.matchingEntries).length>0||i.length>0||n.length>0))return[3,7];if(!((o=(0,D._)(a).concat((0,D._)(i),(0,D._)(n)).map(function(e){return e.key})).length>0))return[3,3];return[4,f.apply(void 0,(0,D._)(o.map(function(e){return e})))];case 2:r.sent(),r.label=3;case 3:if(s=(0,D._)(a).concat((0,D._)(i),(0,D._)(n)).map(function(e){var t=e.key,n=ee.get(t);if(n){var r=W.find(function(e){return e.name===n});if(r)return{secretId:r.id,alias:t}}return null}).filter(function(e){return null!==e}),l=(0,D._)(a).concat((0,D._)(i),(0,D._)(n)).filter(function(e){return!ee.has(e.key)}),!(s.length>0))return[3,5];return[4,S(s)];case 4:r.sent(),r.label=5;case 5:if(!(l.length>0))return[3,7];return[4,p(l)];case 6:r.sent(),r.label=7;case 7:return ey({nextNewSecrets:n,nextExistingEntries:i,nextMatchingEntries:a}),[3,9];case 8:return u=r.sent(),C.captureException(u),B.showError("Something went wrong. Please try again."),[3,9];case 9:return H(!1),[2]}})})()},loading:U,disabled:"selecting"!==ea||!ex||U})]})]})]})}):(0,i.jsx)(et,{openSecerets:R,watch:j,keys:c}),(0,i.jsx)(Q,{removeEntries:f,newSecrets:el,step:ea,onContinue:ey,linkSecrets:S,unlinkSecrets:_,linkedSecrets:K,onSecretsUpdated:function(e){en(function(t){var n=new Map(t);return e.forEach(function(e){var t=e.key,r=e.selectedKey;n.set(t,r)}),n})}}),(0,i.jsx)(Z,{removeEntries:f,replaceAllExternalSecrets:w,existingSecrets:ed,accountSecrets:W,onContinue:ey,step:ea,linkedSecrets:K,onSecretsUpdated:function(e){en(function(t){var n=new Map(t);return e.forEach(function(e){var t=e.key,r=e.selectedKey;n.set(t,r)}),n})}})]})}function eh(e){var n=e.sendAskUserForActionResponse,i=e.requestedEnvVars,o=e.eventId;return{handleCompleteEnvironmentConfigRequest:(0,a.useCallback)(function(e){return(0,t._)(function(){return(0,r._)(this,function(t){switch(t.label){case 0:if(!i||0===i.length)return[2];return[4,n({type:"envVarsResponse",requestEventId:o,providedEnvVars:e.map(function(e){return{key:e.key,value:e.value,environment:e.environment}})})];case 1:return t.sent(),[2]}})})()},[n,i,o])}}e.s(["SecretInput",()=>em,"SecretItem",()=>ef],245329),e.s(["useHandleCompleteEnvironmentConfigRequest",()=>eh],822229);var eg=e.i(541793),ev=e.i(924908),ex=(0,eg.atom)(new Set);function ey(){var e=(0,ev.useValue)(ex);return(0,a.useCallback)(function(t){return!!t&&e.has(t)},[e])}function eb(){var e=(0,ev.useSet)(ex);return(0,a.useCallback)(function(t){e(function(e){if(e.has(t))return e;var n=new Set(e);return n.add(t),n})},[e])}e.s(["useDismissActionRequest",()=>eb,"useIsActionRequestDismissed",()=>ey],613909);var eS=(0,eg.atom)(void 0);function e_(){return(0,ev.useValue)(eS)}function ew(){var e=(0,ev.useGet)(eS);return(0,a.useCallback)(function(){return e()},[e])}function ej(){var e=(0,ev.useSet)(eS);return(0,a.useCallback)(function(t){return e(t)},[e])}function eT(){var e=(0,ev.useSet)(eS);return(0,a.useCallback)(function(){return e(void 0)},[e])}e.s(["useClearInitialBuildApprovalUserSecretsResponse",()=>eT,"useGetInitialBuildApprovalUserSecretsResponse",()=>ew,"useInitialBuildApprovalUserSecretsResponse",()=>e_,"useSetInitialBuildApprovalUserSecretsResponse",()=>ej],593366)},858404,e=>{e.v({"border-rotate":"index-module__FzfM4q__border-rotate",content:"index-module__FzfM4q__content","fallback-animation":"index-module__FzfM4q__fallback-animation",highlightBackground:"index-module__FzfM4q__highlightBackground",inner:"index-module__FzfM4q__inner",root:"index-module__FzfM4q__root"})},68612,727894,39411,782416,621929,872069,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(276385),i=e.i(389959),a=e.i(207237),o=e.i(927158),s=e.i(147721),l=e.i(245329),u=e.i(822229),c=e.i(986194),d=e.i(82259);e.i(877212);var p=e.i(924908),f=e.i(613909),m=e.i(593366);e.i(925218);var h=e.i(641555),g=e.i(374106),v=e.i(231346),x={direction:"forward",state:{phase:null},reducer:function(e,t){(0,g.isEventContentsKind)(e,"initialBuildStateUpdateEventContents")&&(t.phase=e.contents.contents.initialBuildStateUpdateEventContents.phase)}};function y(e){var t,n=(0,v.useIsInitialAgentSession)(null!=(t=null==e?void 0:e.id)?t:null);return(0,h.useObservableMemo)(function(){return n?null==e?void 0:e.reduce(x,100):void 0},[e,n],{default:void 0})}function b(e){return!!e&&[d.InitialBuildPhase.INITIAL_BUILD_PHASE_VISUAL_STARTED,d.InitialBuildPhase.INITIAL_BUILD_PHASE_VISUAL_COMPLETE_PENDING_REVIEW,d.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_STARTED,d.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_COMPLETE_PENDING_REVIEW].includes(e)}function S(e){var t=y(e),n=(0,h.useObservableMemo)(function(){return null==e?void 0:e.reduce(_,100)},[e],{default:null});return(0,i.useMemo)(function(){if(!n)return null;var e=n.content;return(0,c.isKind)(e,"approveInitialBuildVisualPhaseRequest")&&(null==t?void 0:t.phase)!==d.InitialBuildPhase.INITIAL_BUILD_PHASE_VISUAL_COMPLETE_PENDING_REVIEW||(0,c.isKind)(e,"approveInitialBuildMvpRequest")&&(null==t?void 0:t.phase)!==d.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_COMPLETE_PENDING_REVIEW?null:n},[n,null==t?void 0:t.phase])}e.s(["isInitialBuildStarted",()=>b,"useInitialBuildState",()=>y],727894);var _={direction:"reverse",state:{content:null,eventId:null,respondedEventIds:new Set,supersededRequestTypes:new Set,hasAcknowledgedUserMessage:!1,isResponseInProgress:!1},map:function(e){return{content:e.content,eventId:e.eventId,isResponseInProgress:e.isResponseInProgress}},reducer:function(e,t){if(((0,c.isKind)(e.contents.contents,"acknowledgeUserMessage")||(0,g.isEventAgentToolDataKind)(e,"acknowledgeUserMessage"))&&(t.hasAcknowledgedUserMessage=!0),(0,g.isEventContentsKind)(e,"agentAskUserForActionResponse")){var n=(0,c.unkind)(e.contents.contents),r=n.response,i=n.requestEventId;if(r&&(t.respondedEventIds.add(i),t.supersededRequestTypes.add(r.$kind.replace("Response","Request")),(0,c.isKind)(r,"approveBlueprintResponse")))return!1}if((0,g.isEventContentsKind)(e,"agentAskUserForActionRequest")){var a=(0,c.unkind)(e.contents.contents).request,o=t.respondedEventIds.has(e.id),s=o&&!t.hasAcknowledgedUserMessage;if(a&&(0,c.isKind)(a,"approveTaskListRequest")&&!t.supersededRequestTypes.has("approveTaskListRequest")&&(!o||s))return t.content=(0,c.withKind)("approveTaskListRequest",a.approveTaskListRequest),t.eventId=e.id,t.isResponseInProgress=s,!1;if(a&&(0,c.isKind)(a,"approveInitialBuildVisualPhaseRequest")&&!t.supersededRequestTypes.has("approveInitialBuildVisualPhaseRequest")&&(!o||s))return t.content=(0,c.withKind)("approveInitialBuildVisualPhaseRequest",a.approveInitialBuildVisualPhaseRequest),t.eventId=e.id,t.isResponseInProgress=s,!1;if(a&&(0,c.isKind)(a,"approveInitialBuildMvpRequest")&&!t.supersededRequestTypes.has("approveInitialBuildMvpRequest")&&(!o||s))return t.content=(0,c.withKind)("approveInitialBuildMvpRequest",a.approveInitialBuildMvpRequest),t.eventId=e.id,t.isResponseInProgress=s,!1;if(a&&(0,c.isKind)(a,"approveBlueprintRequest")&&!t.supersededRequestTypes.has("approveBlueprintRequest")&&(!o||s))return t.content=(0,c.withKind)("approveBlueprintRequest",a.approveBlueprintRequest),t.eventId=e.id,t.isResponseInProgress=s,!1;if(a&&(0,c.isKind)(a,"queryRequest")&&!t.supersededRequestTypes.has("queryRequest")&&(!o||s))return t.content=(0,c.withKind)("queryRequest",a.queryRequest),t.eventId=e.id,t.isResponseInProgress=s,!1}}};function w(e){var r=e.sessionId,a=e.sendAskUserForActionResponse,o=e.requestedSecrets,s=e.eventId,l=(0,p.useChatter)(),u=(0,h.useObservableMemo)(function(){return r?l.sessions.get(r):null},[l,r]),g=y(u),v=b(null==g?void 0:g.phase),x=S(u),_=(0,f.useIsActionRequestDismissed)(),w=(null==x?void 0:x.content)&&((0,c.isKind)(x.content,"approveInitialBuildVisualPhaseRequest")||(0,c.isKind)(x.content,"approveInitialBuildMvpRequest"))&&!_(x.eventId),j=(0,m.useInitialBuildApprovalUserSecretsResponse)(),T=(0,m.useSetInitialBuildApprovalUserSecretsResponse)(),k=v&&(null==j?void 0:j.secretsRequestEventId)===s;return{handleCompleteSecretsRequest:(0,i.useCallback)(function(){return(0,t._)(function(){var e;return(0,n._)(this,function(t){switch(t.label){case 0:if(!o||0===o.length)return[2];if(v&&w)return T({providedSecrets:o.map(function(e){return{key:e.key,status:d.UserSecretResponseStatus.SECRET_COMPLETED}}),secretsRequestEventId:s}),[2];return[4,a({type:"userSecretsResponse",requestEventId:s,providedSecretKeys:null!=(e=null==o?void 0:o.map(function(e){return e.key}))?e:[]})];case 1:return t.sent(),[2]}})})()},[a,o,v,s,T,w]),isThisSecretsResponseStagedForInitialBuildApproval:k}}e.s(["useAgentAskUserForActionRequest",()=>S],39411),e.s(["useHandleCompleteSecretsRequest",()=>w],782416);var j=e.i(163525),T=e.i(878420),k=e.i(64386),D="file://",C=e.i(828224),E="rag://rag_source_",A=e.i(80858),R=e.i(625484),I=e.i(858404);function P(e){var c,d,p,f=e.openPane,m=e.sessionId,h=e.sendAskUserForActionResponse,g=e.requestedSecrets,v=e.requestedEnvVars,x=e.eventId,y=e.message,b=e.state,S=e.secrets,_=e.waitingOnUser,P=e.linkSecrets,M=e.unlinkSecrets,O=(d=(c={openWebview:(0,i.useCallback)(function(e,t){return f({type:"webview",data:{ports:{path:e,port:t,type:"local"}}})},[f])}).openWebview,p=c.ragSources,(0,i.useMemo)(function(){return function(e){var t,n=null==(t=e.node.properties)?void 0:t.href,a=(0,i.useMemo)(function(){if(d&&"string"==typeof n)try{var e=new URL(n);if("0.0.0.0"===e.hostname||"localhost"===e.hostname)return function(t){t.preventDefault(),d(e.pathname,parseInt(e.port,10))}}catch(e){return}},[n]);if("string"==typeof n&&n.startsWith(E)){var o,s,l=n.slice(E.length),u=null==p?void 0:p.find(function(e){return e.id===l});if(!u)return(0,r.jsxs)(i.Fragment,{children:["[",e.children,"]"]});var c=(s=o=u.url,o.startsWith(D)&&(s=o.slice(D.length)),s.startsWith("/")&&(s=s.slice(1)),s);return(0,r.jsx)(C.default,(0,k._)((0,T._)({},e),{href:"#"+c,filePath:"",target:""}))}return(0,r.jsx)(C.default,(0,k._)((0,T._)({},e),{type:void 0!==a?"button":e.type,href:void 0!==a?"#":e.href,onClick:a}))}},[d,p])),V=(0,i.useCallback)(function(){return f({type:"envEditor"})},[f]),N=(0,a.default)(),B=w({sessionId:m,sendAskUserForActionResponse:h,requestedSecrets:g,eventId:x}),L=B.handleCompleteSecretsRequest,U=B.isThisSecretsResponseStagedForInitialBuildApproval,H=(0,u.useHandleCompleteEnvironmentConfigRequest)({sendAskUserForActionResponse:h,requestedEnvVars:v,eventId:x}).handleCompleteEnvironmentConfigRequest,F=(0,o.usePid2Callback)(function(e){return function(r){return(0,t._)(function(){var t;return(0,n._)(this,function(n){switch(n.label){case 0:return t=r.map(function(e){return{key:e.key,value:e.value,env:(0,A.getEnvironmentLabel)(e.environment)}}),[4,e.environment.setEnvVars.rpc(t)];case 1:return n.sent(),[2]}})})()}});return(0,r.jsx)(R.View,{clsx:I.default.root,justify:"space-between",children:(0,r.jsxs)(R.View,{clsx:I.default.inner,children:[(0,r.jsx)(R.View,{align:"center",justify:"center",clsx:I.default.highlightBackground,children:(0,r.jsx)(R.View,{})}),(0,r.jsxs)(R.View,{clsx:I.default.content,gap:8,children:[(0,r.jsx)(j.MessageMarkdown,{messageState:b,text:y,linkComponent:O}),g?(0,r.jsx)(l.SecretInput,{openSecrets:V,replId:N,keys:g.map(function(e){return e.key}),addEntries:S.addEntries,removeEntries:S.removeEntries,watch:S.watch,replaceAllExternalSecrets:S.replaceAllExternalSecrets,onComplete:L,sessionId:m,waitingOnUser:_&&!U,linkSecrets:P,unlinkSecrets:M}):null,v&&F?(0,r.jsx)(s.EnvironmentInput,{openEnvEditor:V,envVars:v,onComplete:H,sessionId:m,waitingOnUser:_,addEnvEntries:F}):null]})]})})}e.s(["AgentMessage",()=>P],68612);var M=e.i(569384),O=e.i(973245),V=e.i(951262);function N(){var e=(0,M._)(["\n  mutation RecordTipInteraction(\n    $tipId: String!\n    $interactionType: TipInteractionType!\n    $interactionContext: String\n    $recommendedReason: String\n  ) {\n    recordTipInteraction(\n      tipId: $tipId\n      interactionType: $interactionType\n      interactionContext: $interactionContext\n      recommendedReason: $recommendedReason\n    ) {\n      __typename\n      ... on RecordTipInteractionResult {\n        tipState {\n          id\n          title\n          description\n          content\n          tags\n          priority\n          timeRecommended\n          timeCompleted\n          timeDismissed\n          timeInteracted\n          externalUrl\n        }\n        success\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return N=function(){return e},e}var B={},L=(0,O.gql)(N());function U(e){var t=(0,T._)({},B,e);return V.useMutation(L,t)}e.s(["useRecordTipInteractionMutation",()=>U],621929);var H=e.i(179104),F=e.i(134628),q=e.i(479407);function z(e){var t=e.type,n=e.onComplete;return(0,i.useEffect)(function(){var e=function(e){return(0,q.tourBridgeMessageHandler)(e,function(e){var r=e.tour;"complete"===r.action&&r.type===t&&n()})};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}},[n,t]),{showTour:(0,i.useCallback)(function(){(0,q.sendMessage)({messageType:F.BridgeMessageType.TOUR,tour:{type:t,action:"show"}},(0,H.nanoid)())},[t])}}e.s(["default",()=>z],872069)},585956,e=>{e.v({bodyCell:"TipRecommendation-module__Bzwv4q__bodyCell",headerCell:"TipRecommendation-module__Bzwv4q__headerCell",iconCell:"TipRecommendation-module__Bzwv4q__iconCell",iconCellExpanded:"TipRecommendation-module__Bzwv4q__iconCellExpanded",root:"TipRecommendation-module__Bzwv4q__root"})},995253,e=>{e.v({root:"AskUserForAction-module__Uw2Y3a__root"})},191654,840732,659131,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(276385),a=e.i(389959),o=e.i(621929),s=e.i(167392),l=e.i(965097),u=e.i(180703),c=e.i(207237),d=e.i(441329),p=e.i(952521),f=e.i(872069),m=e.i(492267),h=e.i(858248),g=e.i(709485);function v(e){var t=e.interactionType.toLowerCase(),n={tipId:e.tip.id,tipTitle:e.tip.title,action:t,context:e.context,replId:e.replId,sessionId:e.sessionId,eventId:e.eventId};e.tip.recommendedReason&&(n.recommendedReason=e.tip.recommendedReason),e.tipTags&&(n.tipTags=e.tipTags),void 0!==e.tipPriority&&(n.tipPriority=e.tipPriority),void 0!==e.wasInitiallyExpanded&&(n.wasInitiallyExpanded=e.wasInitiallyExpanded),void 0!==e.hasInteractedBefore&&(n.hasInteractedBefore=e.hasInteractedBefore),e.externalUrl&&(n.externalUrl=e.externalUrl),e.ctaTrigger&&(n.ctaTrigger=e.ctaTrigger),void 0!==e.isInteractive&&(n.isInteractive=e.isInteractive),(0,h.track)(g.events.TIP_SYSTEM_USED,n)}var x=e.i(480028),y=e.i(140487),b=e.i(91720),S=e.i(960178),_=e.i(625484),w=e.i(585956);function j(e,t,n){var r;return(null==e?void 0:e.id)===(null==t||null==(r=t.tip)?void 0:r.id)?"Bonsai tour tip override":n}function T(e){var t=e.tip,n=e.expanded,r=e.onToggleExpanded,a=e.onLearnMoreClick,o=e.loading,u=void 0!==o&&o;return(0,i.jsx)(_.View,{py:8,children:(0,i.jsxs)(_.View,{clsx:w.default.root,p:12,gap:8,style:n?void 0:{cursor:"pointer"},onClick:n?void 0:r,children:[(0,i.jsx)(_.View,{clsx:[w.default.iconCell,n&&w.default.iconCellExpanded],children:(0,i.jsx)(l.default,{size:16,color:x.tokens.foregroundDimmer})}),(0,i.jsxs)(_.View,{gap:8,clsx:w.default.headerCell,style:n?{cursor:"pointer"}:void 0,onClick:n?r:void 0,children:[(0,i.jsxs)(S.Text,{variant:"small",color:"dimmer",children:["Tip: ",t.title]}),(0,i.jsx)(s.default,{color:x.tokens.foregroundDimmer,rotate:180*!!n})]}),n?(0,i.jsxs)(_.View,{clsx:w.default.bodyCell,gap:4,children:[t.description?(0,i.jsx)(S.Text,{multiline:!0,children:t.description}):null,t.externalUrl||t.ctaTrigger?(0,i.jsx)(_.View,{row:!0,pt:4,children:t.externalUrl?(0,i.jsx)(b.ButtonLink,{variant:"outlined",text:t.ctaLabel||"Learn more",onClick:a,href:t.externalUrl,target:"_blank",disabled:u}):t.ctaTrigger?(0,i.jsx)(y.Button,{variant:"outlined",text:t.ctaLabel||"Learn more",onClick:a,disabled:u}):null}):null]}):null]})})}function k(e){var s,l,h,g,x,y,b,S,_,w,k,D,C,E,A,R,I,P,M,O,V,N,B=e.event,L=e.onDismiss,U=e.tipData,H=e.bonsaiTourTipInfo,F=e.openPane,q=e.onNewSession,z=(0,c.default)(),G=(0,m.useIsAgentStackRepl)(),W=(s=U.allTipsById,l=B.tip,(0,a.useMemo)(function(){return s.get(l.id)},[s,l.id])),K=(x=(g=(0,n._)((0,u.default)("bonsai-tour-tip-override-event-id",null),2))[0],y=g[1],S=(b=(0,p.useMemoedDismissibleElement)("bonsai-ws-agent-onboarding")).isDone,_=b.setAsDone,w=(0,d.useDoesBonsaiSupportFeatureFlag)("flag-mb-ws-agent-onboard"),k=(0,a.useMemo)(function(){if(x===B.id&&(null==H?void 0:H.tip))return H.tip;if(null==W?void 0:W.timeRecommended)return W;var e,t=null==H||null==(e=H.tip)?void 0:e.timeRecommended,n=!!x;return(null==H?void 0:H.isInBonsaiWebview)&&!S&&H.tip&&(!W||W.id!==H.tip.id)&&w&&!(t&&n)?H.tip:W},[x,B.id,H,W,S,w]),(0,a.useEffect)(function(){var e;(null==k?void 0:k.id)===(null==H||null==(e=H.tip)?void 0:e.id)&&x!==B.id&&y(B.id)},[null==k?void 0:k.id,null==H||null==(h=H.tip)?void 0:h.id,x,B.id,y]),D=(0,a.useMemo)(function(){return!U.recommendedTips.has((null==k?void 0:k.id)||"")},[U.recommendedTips,null==k?void 0:k.id]),{tip:k,setBonsaiTourAsDone:_,shouldRecordRecommendation:D}),Y=K.tip,Z=K.setBonsaiTourAsDone,$=K.shouldRecordRecommendation,X=(0,a.useMemo)(function(){return!!Y&&(!!(U.recommendedTips.size<5||U.recommendedTips.has(Y.id))||!!Y.timeInteracted&&!Y.timeCompleted||U.latestTipId===Y.id&&!!U.anyLatestFiveInteracted)},[Y,U]),Q=(C=U.hasInteractedBefore,A=(E=(0,n._)((0,o.useRecordTipInteractionMutation)(),2))[0],R=E[1].loading,I=(0,c.default)(),P=(0,a.useRef)(null),M=(0,a.useMemo)(function(){return Y?"".concat(B.id,"-").concat(Y.id):null},[B.id,Y]),(0,a.useEffect)(function(){if(Y&&!Y.timeRecommended&&!R&&$&&M&&P.current!==M){P.current=M;var e,t,n,r=j(Y,H,B.tip.recommendedReason);v({tip:{id:Y.id,title:Y.title,recommendedReason:r},interactionType:"recommended",context:"agent_chat",replId:I,sessionId:B.sessionId,eventId:B.id,tipTags:null==(e=Y.tags)?void 0:e.filter(Boolean),tipPriority:Y.priority,wasInitiallyExpanded:X,hasInteractedBefore:C,externalUrl:null!=(t=null==Y?void 0:Y.externalUrl)?t:null,ctaTrigger:null!=(n=null==Y?void 0:Y.ctaTrigger)?n:null,isInteractive:!!((null==Y?void 0:Y.externalUrl)||(null==Y?void 0:Y.ctaTrigger))}),A({variables:{tipId:Y.id,interactionType:"RECOMMENDED",recommendedReason:r}})}},[Y,R,$,B,I,X,C,A,M,H]),{recordTipInteractionMutation:A,loading:R}),J=Q.recordTipInteractionMutation,ee=Q.loading,et=(0,f.default)({type:"agent",onComplete:function(){null==L||L()}}).showTour,en=(0,n._)((0,a.useState)(!1),2),er=en[0],ei=en[1];(0,a.useEffect)(function(){ei(X)},[X]),O=U.hasInteractedBefore,V=(0,a.useRef)(!1),N=(0,c.default)(),(0,a.useEffect)(function(){V.current=!1},[B.tip.id]),(0,a.useEffect)(function(){var e=Date.now(),t=B.created?new Date(B.created).getTime():e;"none"===B.tip.id&&!V.current&&e-t<=5e3&&(V.current=!0,v({tip:B.tip,interactionType:"no_tip_recommended",context:"agent_chat",replId:N,sessionId:B.sessionId,eventId:B.id,hasInteractedBefore:O,externalUrl:null,ctaTrigger:null,isInteractive:!1}))},[B,N,O]);var ea=(0,a.useCallback)(function(){var e,t,n,r=!er;ei(r),v({tip:{id:(null==Y?void 0:Y.id)||B.tip.id,title:(null==Y?void 0:Y.title)||B.tip.title,recommendedReason:j(Y,H,B.tip.recommendedReason)},interactionType:r?"accordion_opened":"accordion_closed",context:"agent_chat",replId:z,sessionId:B.sessionId,eventId:B.id,tipTags:null==Y||null==(e=Y.tags)?void 0:e.filter(Boolean),tipPriority:null==Y?void 0:Y.priority,wasInitiallyExpanded:X,hasInteractedBefore:U.hasInteractedBefore,externalUrl:null!=(t=null==Y?void 0:Y.externalUrl)?t:null,ctaTrigger:null!=(n=null==Y?void 0:Y.ctaTrigger)?n:null,isInteractive:!!((null==Y?void 0:Y.externalUrl)||(null==Y?void 0:Y.ctaTrigger))})},[er,B.tip,z,B.sessionId,B.id,Y,X,U.hasInteractedBefore,H]);return!Y||G?null:(0,i.jsx)(T,{tip:Y,expanded:er,onToggleExpanded:ea,onLearnMoreClick:function(){return(0,t._)(function(){var e,t,n;return(0,r._)(this,function(r){switch(r.label){case 0:if(!Y||ee)return[2];return v({tip:{id:Y.id,title:Y.title,recommendedReason:B.tip.recommendedReason},interactionType:"interacted",context:"agent_chat",replId:z,sessionId:B.sessionId,eventId:B.id,tipTags:null==(e=Y.tags)?void 0:e.filter(Boolean),tipPriority:Y.priority,wasInitiallyExpanded:X,hasInteractedBefore:U.hasInteractedBefore,externalUrl:null!=(t=null==Y?void 0:Y.externalUrl)?t:null,ctaTrigger:null!=(n=null==Y?void 0:Y.ctaTrigger)?n:null,isInteractive:!!((null==Y?void 0:Y.externalUrl)||(null==Y?void 0:Y.ctaTrigger))}),[4,J({variables:{tipId:Y.id,interactionType:"INTERACTED",interactionContext:"agent_chat"}})];case 1:if(r.sent(),Y.ctaTrigger)switch(Y.ctaTrigger){case"bonsai_tour":Z(),et();break;case"auth_pane":null==F||F({type:"replitAuth"});break;case"database_pane":null==F||F({type:"neon"});break;case"create_new_chat":null==q||q();break;case"security_scan_pane":null==F||F({type:"securityScan"})}return[2]}})})()},loading:ee})}e.s(["TipRecommendation",()=>k],191654);var D=e.i(878420),C=e.i(346715),E=e.i(183035),A=e.i(245329),R=e.i(782416),I=e.i(163525),P=e.i(995253),M=(0,a.memo)(function(e){var t,n,r=e.newFeatureRequests,a=e.secretsRequest,o=e.addingIntegrationRequest;return(null==r?void 0:r.length)&&r.length>0?(0,i.jsx)(V,(0,D._)({},e)):(null==a||null==(t=a.secrets)?void 0:t.length)&&a.secrets.length>0?(0,i.jsx)(O,(0,D._)({},e)):((null==o||null==(n=o.connectionIds)?void 0:n.length)&&o.connectionIds.length,null)});function O(e){var t,n=e.eventId,r=e.sessionId,o=e.message,s=e.state,l=e.secretsRequest,u=e.openPane,d=e.sendAskUserForActionResponse,p=e.secrets,f=e.linkSecrets,m=e.unlinkSecrets,h=e.isSecretsRequestFulfilled,g=(0,R.useHandleCompleteSecretsRequest)({eventId:n,sessionId:r,requestedSecrets:null==l?void 0:l.secrets,sendAskUserForActionResponse:d}),v=g.handleCompleteSecretsRequest,x=g.isThisSecretsResponseStagedForInitialBuildApproval,y=(0,a.useCallback)(function(){return u({type:"envEditor"})},[u]),b=(0,c.default)();return(0,i.jsxs)(_.View,{p:8,gap:8,children:[(0,i.jsx)(I.MessageMarkdown,{messageState:s,text:o}),(0,i.jsx)(A.SecretInput,{openSecrets:y,replId:b,keys:null!=(t=null==l?void 0:l.secrets.map(function(e){return e.key}))?t:[],addEntries:p.addEntries,removeEntries:p.removeEntries,watch:p.watch,replaceAllExternalSecrets:p.replaceAllExternalSecrets,onComplete:v,sessionId:r,waitingOnUser:!x&&!h,linkSecrets:f,unlinkSecrets:m})]})}function V(e){var t,r,o,l,u,c,d,p,f,m,h=e.eventId,g=e.message,v=e.state,x=e.newFeatureRequests,b=e.sendAskUserForActionResponse,S=null==x?void 0:x.find(function(e){return e.isSelected}),w=S&&x?(0,C._)(x.filter(function(e){return e!==S})).concat([S]):null!=x?x:[],j=!!S,T=(r=(t={items:w,maxVisibleItems:2,reverse:!1}).items,o=t.maxVisibleItems,l=t.reverse,c=(u=(0,n._)((0,a.useState)(!1),2))[0],d=u[1],f=(p=r.length-o)>1,m=(0,a.useMemo)(function(){var e=l?(0,C._)(r).reverse():r;return f&&!c?l?e.slice(0,o):e.slice(-o):e},[r,f,c,o,l]),{isExpanded:c,setIsExpanded:d,maxItemsReached:f,visibleItems:m,hiddenItemsCount:p}),k=T.visibleItems,D=T.isExpanded,A=T.hiddenItemsCount,R=T.setIsExpanded,M=T.maxItemsReached;return(0,i.jsxs)(_.View,{clsx:P.default.root,gap:6,children:[(0,i.jsx)(I.MessageMarkdown,{text:g,messageState:v}),k.length?(0,i.jsxs)(_.View,{row:!0,style:{flexWrap:"wrap",gap:8},children:[k.map(function(e){return(0,i.jsx)(y.Button,{shrink:!0,iconLeft:e.isSelected?(0,i.jsx)(E.default,{}):void 0,disabled:j,colorway:e.isSelected?"primary":void 0,size:"small",variant:"outlined",onClick:function(){return b({type:"nextStepResponse",data:e,requestEventId:h})},text:e.featureName},e.id)}),M?(0,i.jsx)(y.Button,{iconLeft:(0,i.jsx)(s.default,{rotate:180*!!D}),size:"small",onClick:function(){return R(!D)},text:D?"Show less":"Show ".concat(A," more")}):null]}):null]})}e.s(["AskUserForAction",()=>M],840732);var N=e.i(546284);function B(e){if(e<60)return(0,N.default)("second",e,!0);if(e<3600){var t=Math.floor(e/60);return(0,N.default)("minute",t,!0)}var n=Math.floor(e/3600),r=Math.floor(e%3600/60);return r>0?"".concat(n,"h ").concat(r,"m"):"".concat(n,"h")}e.s(["humanizeDuration",()=>B],659131)},875797,e=>{e.v({breakdownDescription:"AgentWorkMetrics-module__ZNlk0W__breakdownDescription",hasUsageCostBreakdown:"AgentWorkMetrics-module__ZNlk0W__hasUsageCostBreakdown",strikethrough:"AgentWorkMetrics-module__ZNlk0W__strikethrough",usageCostItemLabel:"AgentWorkMetrics-module__ZNlk0W__usageCostItemLabel"})},44660,e=>{"use strict";var t=e.i(721281),n=e.i(530658),r=e.i(276385),i=e.i(389959),a=e.i(629536),o=e.i(121025),s=e.i(167392),l=e.i(659042),u=e.i(416746),c=e.i(993796),d=e.i(649960),p=e.i(659131),f=e.i(546284),m=e.i(878420),h=e.i(613355),g=e.i(960178),v=e.i(625484),x={timeWorked:{title:"Time worked"},workDone:{title:"Work done"},itemsRead:{title:"Items read"},codeChanged:{title:"Code changed"},agentUsage:{title:"Agent Usage"},extendedThinking:{title:"Extended thinking"},highPowerModel:{title:"High power model"}};function y(e){var t=e.type,n=e.description,i=e.maxWidth,a=e.whiteSpace,o=x[t],s=(0,m._)({},i&&{maxWidth:i}),l=(0,m._)({},a&&{whiteSpace:a});return(0,r.jsxs)(v.View,{gap:4,style:s,children:[(0,r.jsx)(g.Text,{variant:"small",css:h.rcss.fontWeight.medium,children:o.title}),n?(0,r.jsx)(g.Text,{variant:"small",style:l,children:n}):null]})}var b=e.i(480028),S=e.i(173703),_=e.i(396776),w=e.i(751273),j=e.i(875797),T=new Date("2025-12-08T22:00:00Z");function k(e){var m,x,k,C,E=e.workDurationSeconds,A=e.toolCalls,R=e.addedLinesOfCode,I=e.removedLinesOfCode,P=e.usageCents,M=e.capabilityUsage,O=e.relatedEffortBreakdowns,V=e.numLocRead,N=e.numFilesRead,B=e.refunded,L=e.workType,U=e.isFreeQuickEditRun,H=e.eventCreated,F=e.isLegacyUbbV1,q=void 0!==F&&F,z=e.preDiscountsUsageCents===P?void 0:e.preDiscountsUsageCents,G=(0,i.useMemo)(function(){return D(P,q)},[P,q]),W=(0,n._)((0,i.useState)(!1),2),K=W[0],Y=W[1],Z=(0,d.default)(function(e){Y(e.width<240)}),$=null!=V?V:0,X=null!=N?N:0,Q=(void 0!==R||void 0!==I)&&(null!=R?R:0)+(null!=I?I:0)>0,J=void 0!==P&&P>0,ee=O&&O.length>0,et=(0,n._)((0,i.useState)(!1),2),en=et[0],er=et[1],ei=(0,c.useFlag)({controlName:"flag-high-power-model-rollout",default:!1}),ea=(null!=(x=null==M?void 0:M.advancedModelProfileLlmCalls)?x:0)>0&&(!ei||H&&H<T);return(0,r.jsxs)(S.ShadesSurface,{elevate:"1x",br:"container",p:8,gap:8,innerRef:Z,children:[void 0!==E&&E>0?(0,r.jsxs)(v.View,{row:!0,align:"center",justify:K?void 0:"space-between",children:[!K&&(0,r.jsx)(g.Text,{variant:"small",color:"default",children:"Time worked"}),(0,r.jsx)(w.Tooltip,{tooltip:(m=E<60?(0,f.default)("second",E,!0):"".concat((0,f.default)("minute",Math.floor(E/60),!0)," and ").concat((0,f.default)("second",E%60,!0)),K?(0,r.jsx)(y,{type:"timeWorked",description:m}):m),children:(0,r.jsx)(g.Text,{variant:"small",children:(0,p.humanizeDuration)(E)})})]}):null,void 0!==A&&A>0?(0,r.jsxs)(v.View,{row:!0,align:"center",justify:K?void 0:"space-between",children:[!K&&(0,r.jsx)(g.Text,{variant:"small",color:"default",children:"Work done"}),(0,r.jsx)(w.Tooltip,{tooltip:K?(0,r.jsx)(y,{type:"workDone",description:"Number of actions taken by Agent"}):"Number of actions taken by Agent",children:(0,r.jsx)(g.Text,{variant:"small",children:(0,f.default)("action",A,!0)})})]}):null,$>0||X>0?(0,r.jsxs)(v.View,{row:!0,align:"center",justify:K?void 0:"space-between",children:[!K&&(0,r.jsx)(g.Text,{variant:"small",color:"default",children:"Items read"}),(0,r.jsx)(w.Tooltip,{tooltip:K?(0,r.jsx)(y,{type:"itemsRead",description:"".concat((0,f.default)("line",$,!0)," and ").concat((0,f.default)("file",X,!0))}):"".concat((0,f.default)("line",$,!0)," and ").concat((0,f.default)("file",X,!0)),children:(0,r.jsx)(g.Text,{variant:"small",children:$>X?(0,f.default)("line",$,!0):(0,f.default)("file",X,!0)})})]}):null,Q?(0,r.jsxs)(v.View,{row:!0,align:"center",justify:K?void 0:"space-between",children:[!K&&(0,r.jsx)(g.Text,{variant:"small",color:"default",children:"Code changed"}),(0,r.jsx)(w.Tooltip,{tooltip:K?(0,r.jsx)(y,{type:"codeChanged",description:"".concat((0,f.default)("line",null!=R?R:0,!0)," added and ").concat((0,f.default)("line",null!=I?I:0,!0)," removed")}):"".concat((0,f.default)("line",null!=R?R:0,!0)," added and ").concat((0,f.default)("line",null!=I?I:0,!0)," removed"),children:(0,r.jsxs)(v.View,{row:!0,gap:4,children:[(0,r.jsxs)(g.Text,{variant:"small",children:["+",R]}),(0,r.jsxs)(g.Text,{color:"dimmer",variant:"small",children:["-",I]})]})})]}):null,J?(0,r.jsxs)(v.View,{gap:8,children:[(0,r.jsxs)(v.View,{row:!0,align:"center",justify:K?void 0:"space-between",children:[!K&&(0,r.jsxs)(v.View,{row:!0,align:"center",onClick:function(){return ee?er(!en):void 0},clsx:[j.default.usageCostItemLabel,(0,t._)({},j.default.hasUsageCostBreakdown,ee)],gap:8,children:[(0,r.jsxs)(g.Text,{variant:"small",color:"default",children:[a.AGENT_NAME," Usage"]}),ee?(0,r.jsx)(s.default,{size:16,color:b.tokens.foregroundDimmest,rotate:180*!!en,css:h.rcss.transition.snappy}):null]}),(0,r.jsxs)(v.View,{row:!0,align:"center",gap:8,children:[!K&&(0,r.jsxs)(v.View,{row:!0,align:"center",gap:8,children:[(null!=(k=null==M?void 0:M.thinkingEnabledLlmCalls)?k:0)>0&&(0,r.jsx)(w.Tooltip,{tooltip:(0,r.jsx)(y,{type:"extendedThinking",description:"Increased cost by about 1.25x"}),children:(0,r.jsx)(o.default,{size:12,color:b.tokens.foregroundDimmer})}),ea?(0,r.jsx)(w.Tooltip,{tooltip:(0,r.jsx)(y,{type:"highPowerModel"}),children:(0,r.jsx)(l.default,{size:12,color:b.tokens.foregroundDimmer})}):null]}),(0,r.jsx)(w.Tooltip,{tooltip:K?(0,r.jsx)(y,{type:"agentUsage",description:"Usage is first deducted from your monthly credit",maxWidth:200,whiteSpace:"normal"}):"Usage is first deducted from your monthly credit",children:(0,r.jsxs)(v.View,{row:!0,gap:8,children:[void 0!==z&&z>0?(0,r.jsxs)(g.Text,{className:j.default.strikethrough,variant:"small",color:"dimmer",children:["$",(z/100).toFixed(2)]}):null,(0,r.jsxs)(g.Text,{variant:"small",children:["$",(G/100).toFixed(2)]})]})}),K?(0,r.jsxs)(v.View,{row:!0,align:"center",gap:8,children:[(null!=(C=null==M?void 0:M.thinkingEnabledLlmCalls)?C:0)>0&&(0,r.jsx)(w.Tooltip,{tooltip:(0,r.jsx)(y,{type:"extendedThinking",description:"Increased cost by about 1.25x"}),children:(0,r.jsx)(o.default,{size:12,color:b.tokens.foregroundDimmer})}),ea?(0,r.jsx)(w.Tooltip,{tooltip:(0,r.jsx)(y,{type:"highPowerModel"}),children:(0,r.jsx)(l.default,{size:12,color:b.tokens.foregroundDimmer})}):null]}):null]})]}),ee&&en?(0,r.jsx)(v.View,{pl:20,gap:8,children:O.map(function(e,t){return(0,r.jsxs)(v.View,{row:!0,gap:4,align:"center",justify:"space-between",children:[(0,r.jsx)(g.Text,{variant:"small",color:"dimmest",clsx:j.default.breakdownDescription,children:function(e){var t,n,r;if((null==(t=e.effortType)?void 0:t.$kind)==="task"&&(null==(n=e.effortType.task)?void 0:n.taskId))return e.effortType.task.description;switch(null==(r=e.effortType)?void 0:r.$kind){case"task":return"Task execution";case"general":return"General work";case"initialization":return"Agent initialization";case"discountedEffort":return"Promo: High power model at no extra cost";default:return"Work completed"}}(e)}),(0,r.jsxs)(g.Text,{variant:"small",color:"dimmest",children:[e.usageCents<0?"-":"","$",(Math.abs(e.usageCents)/100).toFixed(2)]})]},t)})}):null]}):null,U?(0,r.jsxs)(v.View,{row:!0,align:"center",justify:"space-between",gap:8,children:[(0,r.jsxs)(g.Text,{variant:"small",color:"default",children:[a.AGENT_NAME," Usage"]}),(0,r.jsx)(w.Tooltip,{tooltip:"Fast edits are free for a limited time",children:(0,r.jsx)(g.Text,{variant:"small",style:{color:b.tokens.accentPositiveStronger},children:"Free"})})]}):null,B?(0,r.jsx)(_.StatusBanner,{icon:(0,r.jsx)(u.default,{}),text:"You have been refunded for this ".concat(L),colorway:"blue"}):null]})}function D(e,t){return void 0===e||t?25:e}e.s(["WorkMetricsCard",()=>k,"computeCostToShow",()=>D],44660)},81143,e=>{"use strict";function t(e){return void 0!==e.workDurationSeconds&&e.workDurationSeconds>0||void 0!==e.addedLinesOfCode&&e.addedLinesOfCode>0||void 0!==e.removedLinesOfCode&&e.removedLinesOfCode>0||void 0!==e.toolCalls&&e.toolCalls>0||void 0!==e.usageCents&&e.usageCents>0||void 0!==e.numLocRead&&e.numLocRead>0||void 0!==e.numFilesRead&&e.numFilesRead>0}e.s(["hasAnyMetric",()=>t])},527717,e=>{e.v({root:"EndOfRunSummary-module__ipPvUG__root"})},314535,202975,774671,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(389959),i=e.i(82259),a=e.i(873667),o=e.i(806685),s=e.i(182409),l=e.i(269848),u=e.i(76112),c=e.i(659131),d=e.i(250479),p=e.i(203576),f=e.i(44660),m=e.i(190120),h=e.i(287999),g=e.i(81143),v=e.i(849954),x=e.i(480028),y=e.i(960178),b=e.i(257811),S=e.i(751273),_=e.i(625484),w=(0,r.memo)(function(e){var w=e.checkpoint,j=e.onSessionChange,T=e.onRenameTitle,k=e.eventState,D=w.id,C=w.revert,E=(0,t._)((0,r.useState)(!1),2),A=E[0],R=E[1],I=(0,t._)((0,r.useState)(w.triggerReason===i.CheckpointTriggerReason.CHECKPOINT_TRIGGER_REASON_RAPID_BUILD_FEEDBACK),2),P=I[0],M=I[1],O=(0,v.default)({checkpoint:w,onSessionChange:j}).onRevert,V=k===i.EventState.IN_PROGRESS,N=""===w.commitId&&!V,B=!w.commitId,L=w.triggerReason===i.CheckpointTriggerReason.CHECKPOINT_TRIGGER_REASON_WORKSPACE_TRIGGERED_DEPLOYMENT,U=L?"Published your app":"Checkpoint made",H=L?(0,n.jsx)(s.default,{color:x.tokens.accentPositiveDefault,size:d.TOOL_USE_ICON_SIZE}):(0,n.jsx)(a.default,{color:x.tokens.accentPositiveDefault,size:d.TOOL_USE_ICON_SIZE});B&&!N&&(U=L?"Publishing your app":"Creating checkpoint",H=(0,n.jsx)(l.default,{color:x.tokens.foregroundDimmest,size:d.TOOL_USE_ICON_SIZE})),N&&(U=L?"Couldn't publish your app":"Couldn't make checkpoint",H=(0,n.jsx)(o.default,{color:x.tokens.foregroundDimmest,size:d.TOOL_USE_ICON_SIZE}));var F=function(){if(w.refunded)return"You have been refunded for this checkpoint";if(!V&&void 0!==w.usageCents&&w.usageCents>0){var e=(0,f.computeCostToShow)(w.usageCents,!1===w.ubbV2);return"This work cost $".concat((e/100).toFixed(2))}return""};return(0,n.jsxs)(_.View,{"data-event-id":D,"data-commit-id":w.commitId,gap:2,children:[(0,n.jsx)(p.ExpandableFeedContent,{expanded:A,onToggle:function(){return R(!A)},triggerContent:(0,n.jsxs)(_.View,{row:!0,align:"center",gap:8,grow:!0,shrink:!0,children:[(0,n.jsx)(d.ToolUseIconSurface,{children:H}),(0,n.jsxs)(_.View,{row:!0,gap:4,align:"center",children:[(0,n.jsx)(y.Text,{color:"dimmest",children:U}),V||N?null:(0,n.jsx)(b.Timestamp,{textColor:"dimmest",dateFormat:"relative",live:!0,placement:"top",date:w.created})]})]}),children:(0,n.jsx)(m.CheckpointCard,{title:w.title,commitId:w.commitId,enableHelium:w.heliumCheckpointCreated,author:(0,h.commitAuthorToCheckpointAuthor)(w.author),onOpenCommit:e.onOpenCommit,date:w.created,screenshot:w.screenshotUrl,isReverting:(null==C?void 0:C.status)==="inflight",isInProgress:V,onRevert:O,onRenameTitle:T?function(e){return T(w.commitId,e)}:void 0,isLatest:w.isLatest,isDirty:w.isDirty,hasFurtherNonSummaryEvents:w.hasFurtherNonSummaryEvents,openPane:e.openPane})}),w.isPaid&&(0,g.hasAnyMetric)(w)?(0,n.jsx)(p.ExpandableFeedContent,{expanded:P,onToggle:function(){return M(!P)},triggerContent:(0,n.jsx)(S.Tooltip,{tooltip:F(),isDisabled:!F(),children:(0,n.jsxs)(_.View,{row:!0,align:"center",gap:8,grow:!0,shrink:!0,children:[(0,n.jsx)(d.ToolUseIconSurface,{children:(0,n.jsx)(u.default,{color:x.tokens.foregroundDimmest,size:d.TOOL_USE_ICON_SIZE})}),(0,n.jsxs)(y.Text,{color:"dimmest",variant:"small",children:["Worked for"," ",void 0!==w.workDurationSeconds&&w.workDurationSeconds>0?(0,c.humanizeDuration)(w.workDurationSeconds):"..."]})]})}),children:(0,n.jsx)(f.WorkMetricsCard,{workDurationSeconds:w.workDurationSeconds,addedLinesOfCode:w.addedLinesOfCode,removedLinesOfCode:w.removedLinesOfCode,toolCalls:w.toolCalls,usageCents:w.usageCents,numLocRead:w.numLocRead,numFilesRead:w.numFilesRead,capabilityUsage:w.capabilityUsage,isLegacyUbbV1:!1===w.ubbV2,refunded:w.refunded,workType:"checkpoint",isInProgress:V,eventCreated:w.created})}):null]})});e.s(["Checkpoint",()=>w],314535);var j=e.i(878420),T=e.i(64386),k=e.i(527717);function D(e){var i=e.summary,a=(0,t._)((0,r.useState)(!1),2),o=a[0],s=a[1];if(!(0,g.hasAnyMetric)(i))return null;var l=function(){if(i.refunded)return"You have been refunded for this run";if(void 0!==i.usageCents&&i.usageCents>0){var e=(0,f.computeCostToShow)(i.usageCents,!1);return"This work cost $".concat((e/100).toFixed(2))}return""};return(0,n.jsx)(_.View,{"data-event-id":i.id,gap:0,clsx:k.default.root,children:(0,n.jsx)(p.ExpandableFeedContent,{expanded:o,onToggle:function(){return s(!o)},triggerContent:(0,n.jsx)(S.Tooltip,{tooltip:l(),isDisabled:!l(),children:(0,n.jsxs)(_.View,{row:!0,align:"center",gap:8,grow:!0,shrink:!0,children:[(0,n.jsx)(d.ToolUseIconSurface,{children:(0,n.jsx)(u.default,{color:x.tokens.foregroundDefault,size:d.TOOL_USE_ICON_SIZE})}),(0,n.jsxs)(y.Text,{color:"dimmest",children:["Worked for"," ",void 0!==i.workDurationSeconds&&i.workDurationSeconds>0?(0,c.humanizeDuration)(i.workDurationSeconds):"..."]})]})}),children:(0,n.jsx)(f.WorkMetricsCard,(0,T._)((0,j._)({},i),{workType:"run",preDiscountsUsageCents:i.preDiscountsUsageCents,eventCreated:i.created,isLegacyUbbV1:!1}))})})}e.s(["EndOfRunSummary",()=>D],202975);var C=e.i(416298),E=e.i(173703),A=e.i(916271),R=(0,r.memo)(function(e){var i=(0,t._)((0,r.useState)(!1),2),a=i[0],o=i[1];return(0,n.jsx)(_.View,{py:2,children:(0,n.jsx)(p.ExpandableFeedContent,{expanded:a,onToggle:function(){return o(function(e){return!e})},triggerContent:(0,n.jsxs)(_.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[(0,n.jsx)(d.ToolUseIconSurface,{children:(0,n.jsx)(C.default,{color:x.tokens.foregroundDimmest,size:d.TOOL_USE_ICON_SIZE})}),(0,n.jsx)(y.Text,{color:"dimmer",children:e.shortMessage||"Agent ran into an error"})]}),children:(0,n.jsx)(E.ShadesSurface,{p:8,elevate:"1x",br:"container",children:(0,n.jsx)(A.default,{children:e.message})})})})});e.s(["ErrorMessage",()=>R],774671)},645424,e=>{e.v({cancelButton:"AgentPlanningDialogs-module__sqzuCW__cancelButton",disabled:"AgentPlanningDialogs-module__sqzuCW__disabled",editPlanButton:"AgentPlanningDialogs-module__sqzuCW__editPlanButton",grow1:"AgentPlanningDialogs-module__sqzuCW__grow1",initialBuildModeItem:"AgentPlanningDialogs-module__sqzuCW__initialBuildModeItem",initialBuildModeItemContainer:"AgentPlanningDialogs-module__sqzuCW__initialBuildModeItemContainer",initialBuildModeOptions:"AgentPlanningDialogs-module__sqzuCW__initialBuildModeOptions",interactiveLabel:"AgentPlanningDialogs-module__sqzuCW__interactiveLabel",noShades:"AgentPlanningDialogs-module__sqzuCW__noShades",selected:"AgentPlanningDialogs-module__sqzuCW__selected",statusRow:"AgentPlanningDialogs-module__sqzuCW__statusRow"})},857253,e=>{e.v({btnBonsai:"MobileAgentTourNudge-module__aJI9MG__btnBonsai",btnLeft:"MobileAgentTourNudge-module__aJI9MG__btnLeft",btnRight:"MobileAgentTourNudge-module__aJI9MG__btnRight",mobileQr:"MobileAgentTourNudge-module__aJI9MG__mobileQr",root:"MobileAgentTourNudge-module__aJI9MG__root"})},67760,(e,t,n)=>{var r,i,a=e.r(365738),o=Object.prototype.toString,s=Math.max;t.exports=(r=function(e){if(!(e&&e.length))return[];var t=0;e=function(e,t){for(var n=-1,r=e?e.length:0,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}(e,function(e){var n,r,i,l,u,c,d,p;if((i=n=e)&&(void 0===i?"undefined":a._(i))=="object"&&null!=(r=n)&&"number"==typeof(l=r.length)&&l>-1&&l%1==0&&l<=0x1fffffffffffff&&"[object Function]"!=(d=void 0===(c=u=r)?"undefined":a._(c),p=c&&("object"==d||"function"==d)?o.call(u):"")&&"[object GeneratorFunction]"!=p)return t=s(e.length,t),!0});for(var n=t,r=function(t){return function(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(e,function(e){return null==e?void 0:e[t]})},i=-1,l=Array(n);++i<n;)l[i]=r(i);return l},i=s(void 0===i?r.length-1:i,0),function(){for(var e=arguments,t=-1,n=s(e.length-i,0),a=Array(n);++t<n;)a[t]=e[i+t];t=-1;for(var o=Array(i+1);++t<i;)o[t]=e[t];o[i]=a;switch(o.length){case 0:return r.call(this);case 1:return r.call(this,o[0]);case 2:return r.call(this,o[0],o[1]);case 3:return r.call(this,o[0],o[1],o[2])}return r.apply(this,o)})},422145,484921,839575,454551,129928,66373,682872,489172,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(82259),i=e.i(493166),a=e.i(409570),o=e.i(798790),s=e.i(721281),l=e.i(530658),u=e.i(654647),c=e.i(634759),d=e.i(629536),p=e.i(145864),f=e.i(597853),m=e.i(183035),h=e.i(103806),g=e.i(822142),v=e.i(269848),x=e.i(670413),y=e.i(45442),b=e.i(131614),S="Start building";e.s(["TASK_LIST_START_BUILDING_MESSAGE",()=>S],484921);var _=e.i(509908),w=e.i(173703);function j(e){var n=e.colorShade,r=e.hasDrawerAbove,i=e.children;return(0,t.jsx)(w.ShadesSurface,{elevate:"1x",border:"regular",colorShade:void 0===n?"notice":n,p:8,gap:8,br:void 0!==r&&r?[0,0,8,8]:8,children:i})}e.s(["ChatTakeoverDialog",()=>j],839575);var T=e.i(262206),k=e.i(926118);function D(){return(0,t.jsx)(k.KeyComboBlocks,{keyCombo:(0,T.defaultKeyCombo)({cmdOrCtrl:!0,key:"Enter"}),small:!0,hideBorder:!0})}e.s(["CmdOrCtrlEnterComboIcon",()=>D],454551);var C=e.i(907371),E=e.i(585225),A=e.i(140487),R=e.i(127227),I=e.i(818503),P=e.i(734882),M=e.i(960178),O=e.i(751273),V=e.i(625484),N=e.i(645424),B="Build functionality",L="Continue building",U=[c.StackBlueprint.STACK_BLUEPRINT_FULLSTACK_JS,c.StackBlueprint.STACK_BLUEPRINT_EXPO];function H(e,t){(0,n.useEffect)(function(){if(!t){var n=function(t){"Enter"===t.key&&(0,x.getCmdOrCtrl)(t)&&(t.preventDefault(),e())};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}},[e,t])}function F(e){var i=e.isInMobileWorkspace,a=e.onStartBuilding,o=e.stackBlueprint,s=e.sessionId,u=!!o&&U.includes(o),c=(0,l._)((0,n.useState)(function(){return r.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC}),2),d=c[0],p=c[1];return(0,t.jsx)(q,{isDesignModeSupported:u,initialBuildMode:d,setInitialBuildMode:p,sessionId:s,stackBlueprint:o,onStartBuilding:a,isInMobileWorkspace:i,flagManagerWho:!0})}function q(e){var i=e.isDesignModeSupported,a=e.initialBuildMode,o=e.setInitialBuildMode,s=e.sessionId,c=e.stackBlueprint,d=e.onStartBuilding,m=e.isInMobileWorkspace,h=e.flagManagerWho,g=a===r.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC,v="Start building";!h&&g&&(v="Start designing");var x=(0,p.useGetPlanProposalUserSecretsResponse)(),S=(0,p.useClearPlanProposalUserSecretsResponse)(),w=(0,n.useCallback)(function(){a&&(d({initialBuildMode:a,userSecretsResponse:x()}),S())},[d,a,x,S]);H(w,m),(0,n.useEffect)(function(){!i&&g&&o(r.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC)},[i,g,o]);var T=(0,p.useSetAgentPlanApprovalState)(),k=(0,n.useCallback)(function(){T("revising"),(0,_.trackAgentPlanningAnalyticsEvent)({action:"plan_revision_initiated",sessionId:s,stackBlueprint:c,skipRapidBuild:!0})},[s,T,c]),D=(0,y.useAgentSettings)(),C=(0,l._)((0,n.useState)(!1),2),E=C[0],R=C[1];return(0,t.jsxs)(j,{colorShade:"default",children:[(0,t.jsx)(M.Text,{textWrap:"pretty",children:"I've created a feature list based on your request. If everything looks good, we can start building."}),!h&&(0,t.jsx)(M.Text,{textWrap:"pretty",children:"How do you want to continue?"}),(0,t.jsx)(V.View,{gap:8,children:h?(0,t.jsx)(A.Button,{text:v,onClick:w,iconRight:(0,t.jsx)(f.default,{}),colorway:"primary"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.ListBox,{"aria-label":"Initial build mode",selectionMode:"single",clsx:N.default.initialBuildModeOptions,children:[(0,t.jsx)(z,{mode:r.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC,isSelected:a===r.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC,onSelect:o,sessionId:s,stackBlueprint:c}),(0,t.jsx)(z,{mode:r.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC,disabledReason:i?void 0:"Unavailable with this app type",isSelected:a===r.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC,onSelect:o,sessionId:s,stackBlueprint:c})]}),(0,t.jsx)(V.View,{children:(0,t.jsx)(O.Tooltip,{tooltip:"Select an option above to continue",isDisabled:void 0!==a,placement:"top",children:(0,t.jsx)(A.Button,{text:v,onClick:w,iconRight:(0,t.jsx)(f.default,{}),colorway:"primary",disabled:void 0===a})})})]})}),(0,t.jsxs)(V.View,{justify:"space-between",row:!0,gap:8,children:[(0,t.jsx)(A.Button,{clsx:N.default.editPlanButton,size:"small",text:"Edit plan",variant:"nofill",onClick:k}),(0,t.jsx)(b.AgentSettingsDropdown,{agentSettings:D,isOpen:E,onOpenChange:R,buttonText:"Agent tools",fastModeDisabledReason:"Fast mode is not available while planning"})]})]})}function z(e){var a,o=e.mode,l=e.isSelected,c=e.disabledReason,p=e.onSelect,f=e.sessionId,m=e.stackBlueprint,h=(0,E.useIsShadesSupported)(),v=!!c,x=o===r.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC,y=x?"design":"build",b=x?"Start with a design":"Build the entire app",S=x?"Best if you want to see a design prototype first, then iterate on visuals or features":"Best if you want ".concat(d.AGENT_NAME," to build out the full functionality of your app"),j=(0,n.useCallback)(function(){!v&&(p(o),f&&(0,_.trackAgentPlanningAnalyticsEvent)({action:"plan_initial_build_mode_selected",sessionId:f,stackBlueprint:m,initialBuildMode:o}))},[p,o,v,f,m]),T=(0,C.useCreateInteractive)({variant:"filledAndOutlined"});return(0,t.jsx)(u.ListBoxItem,{clsx:N.default.initialBuildModeItemContainer,id:o,onAction:j,textValue:b,children:(0,t.jsx)(O.Tooltip,{tooltip:c,isDisabled:!v,placement:"top",children:(0,t.jsxs)(w.ShadesSurface,{gap:8,p:8,align:"stretch",border:"regular",br:"container",clsx:[T.clsx,N.default.initialBuildModeItem,(a={},(0,s._)(a,N.default.selected,l),(0,s._)(a,N.default.disabled,v),(0,s._)(a,N.default.noShades,!h),a)],style:T.style,children:[(0,t.jsxs)(V.View,{justify:"space-between",row:!0,align:"start",children:[x?(0,t.jsx)(i.default,{size:24}):(0,t.jsx)(g.default,{size:24}),(0,t.jsx)(P.Radio,{id:y,value:y,checked:l})]}),(0,t.jsxs)(V.View,{gap:4,children:[(0,t.jsx)(M.Text,{variant:"subheadDefault",children:b}),(0,t.jsx)(M.Text,{color:"dimmest",children:x?"5-10 mins":"20+ mins"}),(0,t.jsx)(M.Text,{color:"dimmer",children:S})]})]})})},o)}function G(e){var r=e.onStart,i=e.onRevise,a=e.onCancel,o=e.isInMobileWorkspace,s=e.hasDrawerAbove;H(r,o);var u=(0,y.useAgentSettings)(),c=(0,l._)((0,n.useState)(!1),2),p=c[0],f=c[1];return(0,t.jsxs)(j,{hasDrawerAbove:void 0!==s&&s,children:[(0,t.jsxs)(M.Text,{textWrap:"pretty",children:[d.AGENT_NAME," has identified a task list to work on. If everything looks good, start building to make these updates to your app."]}),(0,t.jsx)(V.View,{gap:8,children:(0,t.jsxs)(V.View,{row:!0,gap:8,children:[(0,t.jsx)(A.Button,{className:N.default.grow1,text:"Revise plan",onClick:i,iconLeft:(0,t.jsx)(h.default,{})}),(0,t.jsx)(A.Button,{className:N.default.grow1,text:S,onClick:r,iconLeft:(0,t.jsx)(m.default,{}),iconRight:o?void 0:(0,t.jsx)(D,{}),colorway:"primary"})]})}),(0,t.jsxs)(V.View,{row:!0,gap:8,justify:"space-between",align:"center",wrap:!0,clsx:N.default.statusRow,children:[(0,t.jsx)(V.View,{children:(0,t.jsx)(A.Button,{size:"small",variant:"nofill",text:"Cancel",onClick:a,clsx:N.default.cancelButton})}),(0,t.jsx)(V.View,{row:!0,gap:8,align:"center",children:(0,t.jsx)(b.AgentSettingsDropdown,{agentSettings:u,isOpen:p,onOpenChange:f,buttonText:"Agent tools",fastModeDisabledReason:"Fast mode is not available while planning"})})]})]})}function W(e){var r=e.onStart,i=e.onDismiss,a=e.isInMobileWorkspace,o=e.visualPhaseRequestCount,u=e.isApprovalResponseInProgress,c=void 0!==u&&u,d=(0,y.useAgentSettings)(),p=(0,l._)((0,n.useState)(!1),2),m=p[0],h=p[1],g=(0,l._)((0,n.useState)(!1),2),x=g[0],S=g[1];H(r,a);var _=(0,n.useCallback)(function(){i(x)},[i,x]),w=(void 0===o?0:o)>1;return(0,t.jsxs)(j,{children:[(0,t.jsx)(M.Text,{textWrap:"pretty",children:"I've created a visual preview of your app. If everything looks good to you, I can start building the functionality of your app."}),(0,t.jsxs)(V.View,{gap:8,children:[(0,t.jsxs)(V.View,{row:!0,gap:8,children:[(0,t.jsx)(A.Button,{clsx:N.default.grow1,text:"Keep iterating on design",onClick:_,disabled:c,iconRight:c?(0,t.jsx)(v.default,{}):void 0}),(0,t.jsx)(A.Button,{clsx:N.default.grow1,text:B,onClick:r,iconRight:(0,t.jsx)(f.default,{}),colorway:"primary",disabled:c})]}),(0,t.jsxs)(V.View,{row:!0,justify:w?"space-between":"end",children:[w?(0,t.jsxs)(V.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(R.Checkbox,{id:"dont-ask-again",checked:x,onChange:S,disabled:c}),(0,t.jsx)(I.Label,{htmlFor:"dont-ask-again",children:(0,t.jsx)(M.Text,{variant:"small",color:c?"dimmest":"dimmer",clsx:(0,s._)({},N.default.interactiveLabel,!c),children:"Don't ask again"})})]}):null,(0,t.jsx)(b.AgentSettingsDropdown,{agentSettings:d,isOpen:m,onOpenChange:h,buttonText:"Agent tools",fastModeDisabledReason:"Fast mode is not available while planning"})]})]})]})}function K(e){var r=e.onStart,i=e.onDismiss,a=e.isInMobileWorkspace,o=e.hasDrawerAbove;H(r,a);var s=(0,y.useAgentSettings)(),u=(0,l._)((0,n.useState)(!1),2),c=u[0],d=u[1];return(0,t.jsxs)(j,{hasDrawerAbove:void 0!==o&&o,children:[(0,t.jsxs)(M.Text,{textWrap:"pretty",children:["I've created an MVP and identified a task list to work on. If everything looks good, ",L.toLowerCase()," to make these updates to your app."]}),(0,t.jsx)(V.View,{gap:8,children:(0,t.jsxs)(V.View,{row:!0,gap:8,children:[(0,t.jsx)(A.Button,{clsx:N.default.grow1,text:"Dismiss",onClick:i}),(0,t.jsx)(A.Button,{clsx:N.default.grow1,text:L,onClick:r,iconRight:(0,t.jsx)(m.default,{}),colorway:"primary"})]})}),(0,t.jsx)(V.View,{row:!0,justify:"end",children:(0,t.jsx)(b.AgentSettingsDropdown,{agentSettings:s,isOpen:c,onOpenChange:d,buttonText:"Agent tools",fastModeDisabledReason:"Fast mode is not available while planning"})})]})}e.s(["AgentInitialBuildMVPReviewDialog",()=>K,"AgentInitialBuildVisualReviewDialog",()=>W,"AgentPlanApprovalDialog",()=>F,"AgentTaskListApprovalDialog",()=>G,"MVP_APPROVAL_MESSAGE",()=>L,"VISUAL_PROTOTYPE_APPROVAL_MESSAGE",()=>B],129928);var Y=e.i(480028);function Z(e){var s=e.created,l=e.initialBuildPhase,u=e.agentConfig,c=(0,n.useMemo)(function(){return l===r.InitialBuildPhase.INITIAL_BUILD_PHASE_VISUAL_COMPLETE_PENDING_REVIEW?{message:B,icon:(0,t.jsx)(O.Tooltip,{tooltip:"Design prototype approved",children:(0,t.jsx)(i.default,{size:12,color:Y.tokens.foregroundDimmest})})}:l===r.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_COMPLETE_PENDING_REVIEW?{message:L,icon:(0,t.jsx)(O.Tooltip,{tooltip:"Initial prototype approved",children:(0,t.jsx)(a.default,{size:12,color:Y.tokens.foregroundDimmest})})}:{message:"",icon:null}},[l]),d=c.message,p=c.icon;return(0,t.jsx)(o.UserMessageContainer,{created:s,agentConfig:u,metaContent:p,children:(0,t.jsx)(o.UserMessageSurface,{agentMode:r.AgentMode.AGENT_MODE_GENERAL,acknowledged:!0,children:(0,t.jsx)(M.Text,{children:d})})})}function $(e){var s=e.created,l=e.initialBuildMode,u=e.agentConfig,c=(0,n.useMemo)(function(){return l===r.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC?{message:"Start building",icon:(0,t.jsx)(O.Tooltip,{tooltip:"Full build selected",children:(0,t.jsx)(a.default,{size:12,color:Y.tokens.foregroundDimmest})})}:l===r.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC?{message:"Start designing",icon:(0,t.jsx)(O.Tooltip,{tooltip:"Design prototype selected",children:(0,t.jsx)(i.default,{size:12,color:Y.tokens.foregroundDimmest})})}:{message:"",icon:null}},[l]),d=c.message,p=c.icon;return(0,t.jsx)(o.UserMessageContainer,{created:s,agentConfig:u,metaContent:p,children:(0,t.jsx)(o.UserMessageSurface,{agentMode:r.AgentMode.AGENT_MODE_GENERAL,acknowledged:!0,children:(0,t.jsx)(M.Text,{children:d})})})}e.s(["InitialBuildPhaseApproval",()=>Z],422145),e.s(["PlanApproval",()=>$],66373);var X=e.i(878420),Q=e.i(569384),J=e.i(973245),ee=e.i(304277);function et(){var e=(0,Q._)(["\n  query MobileAgentTourNudgeCurrentUser {\n    currentUser {\n      id\n      hasPushDevicesRegistered\n    }\n  }\n"]);return et=function(){return e},e}e.i(566901);var en={},er=(0,J.gql)(et()),ei=e.i(602686),ea=e.i(210796),eo=e.i(256758),es=e.i(650587),el=e.i(441329),eu=e.i(952521),ec=e.i(872069),ed=e.i(604963),ep=e.i(259421),ef=e.i(857253);function em(e){var n=e.isPlanApproved,r=(0,el.useIsInBonsaiWebview)();return(0,t.jsx)(V.View,{className:ef.default.root,children:r?(0,t.jsx)(ev,{isPlanApproved:n}):(0,t.jsx)(eg,{})})}function eh(){var e,t,n,r=(0,el.useIsInBonsaiWebview)(),i=(e=(0,X._)({},en,void 0),ee.useQuery(er,e)).data,a=(0,eu.useMemoedDismissibleElement)("agent-mobile-notification-nudge",function(){(0,_.trackAgentAnalyticsEvent)({action:"mobile_download_qr_dismissed"})}),o=a.isDone,s=a.isLoading,l=a.setAsDone,u=null!=(n=null==i||null==(t=i.currentUser)?void 0:t.hasPushDevicesRegistered)&&n;return{isVisible:!r&&!s&&!o&&!u,dismiss:l}}var eg=function(){var e=(0,es.useIsMobile)(),r=(0,l._)((0,n.useState)(!1),2),i=r[0],a=r[1],o=eh(),s=o.isVisible,u=o.dismiss;if(!s)return null;var c=function(e){(0,_.trackAgentAnalyticsEvent)({action:"mobile_download_qr_clicked"}),window.open(e)},d=(0,t.jsx)(A.Button,{clsx:ef.default.btnLeft,iconLeft:(0,t.jsx)(eo.default,{}),text:"Get notified when your app is ready",variant:"outlined"});return(0,t.jsxs)(t.Fragment,{children:[e?(0,t.jsxs)(ed.PopoverTrigger,{isOpen:i,onOpenChange:function(e){e&&(0,_.trackAgentAnalyticsEvent)({action:"mobile_download_qr_viewed"}),a(e)},label:"Show download Replit mobile app QR",placement:"top",children:[d,(0,t.jsx)(V.View,{clsx:ef.default.mobileQr,children:(0,t.jsx)(ep.default,{source:"agent_plan_timeline",installText:"Tap to install the Replit app",onClick:c})})]}):(0,t.jsx)(O.Tooltip,{placement:"top",colorway:"darker",tooltip:(0,t.jsx)(V.View,{clsx:ef.default.mobileQr,children:(0,t.jsx)(ep.default,{source:"agent_plan_timeline",installText:"Scan to install the Replit app",onClick:c})}),children:d}),(0,t.jsx)(A.Button,{clsx:ef.default.btnRight,iconLeft:(0,t.jsx)(ei.default,{}),text:"",variant:"outlined",onClick:function(){u(),a(!1)}})]})},ev=function(e){var n=e.isPlanApproved,r=(0,eu.useMemoedDismissibleElement)("bonsai-ws-agent-onboarding"),i=r.isDone,a=r.isLoading,o=r.setAsDone,s=(0,el.useDoesBonsaiSupportFeatureFlag)("flag-mb-ws-agent-onboard"),l=(0,ec.default)({type:"agent",onComplete:o}).showTour;return s?(0,t.jsx)(A.Button,{clsx:ef.default.btnBonsai,iconLeft:(0,t.jsx)(ea.default,{}),colorway:a||i||!n?void 0:"primary",text:"Learn how to create with Agent",onClick:l}):null},ex=e.i(416746);e.i(545082);var ey=e.i(423111),eb=e.i(446530),eS=e.i(6338),e_=e.i(613355),ew=e.i(624782),ej=(0,eb.cssRecord)({item:[eS.loadingStyle.foregroundPulse(),e_.rcss.borderRadius(4),e_.rcss.height(20)]});function eT(){return(0,t.jsx)(V.View,{gap:8,children:(0,t.jsxs)(V.View,{row:!0,gap:8,align:"center",grow:!0,children:[(0,t.jsx)(M.Text,{color:"dimmer",children:"App type"}),(0,t.jsx)(O.Tooltip,{placement:"bottom-start",tooltip:"The primary framework ".concat(d.AGENT_NAME," will use to build the app"),children:(0,t.jsx)(ex.default,{size:12,color:Y.tokens.foregroundDimmer})}),(0,t.jsx)(V.View,{row:!0,grow:!0,css:ej.item})]})})}function ek(e){var n=e.stackBlueprint,r=e.blueprints,i=e.isEditable,a=null!=n&&n!==c.StackBlueprint.STACK_BLUEPRINT_NONE&&n!==c.StackBlueprint.STACK_BLUEPRINT_CUSTOM&&n!==c.StackBlueprint.STACK_BLUEPRINT_BEST_EFFORT_FALLBACK,o=r.length>0&&r.some(function(e){return""!==e.displayName.trim()});return a||o?(0,t.jsxs)(V.View,{gap:8,children:[a?(0,t.jsxs)(V.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(M.Text,{color:"dimmer",children:"App type"}),(0,t.jsx)(O.Tooltip,{placement:"bottom-start",tooltip:"The primary framework ".concat(d.AGENT_NAME," will use to build the app"),children:(0,t.jsx)(ex.default,{size:12,color:Y.tokens.foregroundDimmer})}),(0,t.jsx)(O.Tooltip,{tooltip:d.stackBlueprintDetails[n].description,children:(0,t.jsx)(ew.Pill,{text:d.stackBlueprintDetails[n].displayName,variant:"filled"})})]}):null,o?(0,t.jsxs)(V.View,{row:!0,gap:8,align:"center",wrap:!0,children:[(0,t.jsx)(M.Text,{color:"dimmer",children:"Integrations"}),(0,t.jsx)(O.Tooltip,{placement:"bottom-start",tooltip:"Any relevant integrations for your request",children:(0,t.jsx)(ex.default,{size:12,color:Y.tokens.foregroundDimmer})}),(0,t.jsx)(eD,{blueprints:r,isEditable:i})]}):null]}):null}function eD(e){var r=e.blueprints,i=e.isEditable,a=(0,l._)((0,ey.useAuthBlueprint)(),2)[1],o=[],s=!1,u=!0,c=!1,p=void 0;try{for(var f,m=r[Symbol.iterator]();!(u=(f=m.next()).done);u=!0){var h=f.value;if(""!==h.displayName.trim()){("javascript_log_in_with_replit"===h.name||"python_log_in_with_replit"===h.name)&&(s=!0);var g=h.name.endsWith("_ai_integrations"),v=g?"".concat(h.displayName," (Replit managed)"):h.displayName,x=g?d.REPLIT_MANAGED_DESCRIPTION:h.description,y=(0,t.jsx)(ew.Pill,{text:v,variant:"filled"});o.push(x?(0,t.jsx)(O.Tooltip,{tooltip:x,children:y},h.name):(0,t.jsx)(V.View,{children:y},h.name))}}}catch(e){c=!0,p=e}finally{try{u||null==m.return||m.return()}finally{if(c)throw p}}return((0,n.useEffect)(function(){s&&!i&&a(!0)},[s,i,a]),0===o.length)?null:(0,t.jsx)(t.Fragment,{children:o})}var eC=e.i(163525),eE=e.i(11235),eA=(0,eb.cssRecord)({item:[eS.loadingStyle.foregroundPulse(),e_.rcss.borderRadius(4),e_.rcss.height(20)]});function eR(e){var n=e.features,i=e.eventState===r.EventState.IN_PROGRESS,a=0===n.length;return(0,t.jsxs)(eE.Prose,{children:[(0,t.jsx)("p",{children:"I'll include the following features:"}),a?(0,t.jsx)(V.View,{gap:4,pt:4,children:Array.from({length:3}).map(function(e,n){return(0,t.jsx)(V.View,{css:eA.item},n)})}):(0,t.jsx)("ul",{children:n.map(function(e){return(0,t.jsx)("li",{children:i?(0,t.jsx)(eC.FadeInTextAnimation,{children:e.name}):e.name},e.id)})})]})}function eI(e){var r=e.stackBlueprint,i=e.blueprints,a=e.features,o=e.objective,s=e.sessionId,l=e.isLatestPlan,u=e.eventState,c=eh().isVisible,d=(0,p.useAgentPlanApprovalState)(),f=l&&"approved"!==d,m=(0,p.useSetAgentPlanApprovalState)(),g=(0,n.useCallback)(function(){m("revising"),(0,_.trackAgentPlanningAnalyticsEvent)({action:"plan_revision_initiated",sessionId:s,stackBlueprint:r,skipRapidBuild:!0})},[s,m,r]);return(0,t.jsxs)(V.View,{gap:12,p:8,children:[void 0===r?(0,t.jsx)(eT,{}):(0,t.jsx)(ek,{blueprints:i,stackBlueprint:r,isEditable:!0}),(0,t.jsx)(V.View,{children:(0,t.jsx)(M.Text,{children:o})}),(0,t.jsxs)(w.ShadesSurface,{elevate:!!f&&"2x",br:8,p:8*!!f,gap:8,children:[(0,t.jsx)(eR,{features:a,eventState:u}),l&&"revising"===d?(0,t.jsx)(V.View,{p:4,children:(0,t.jsx)(M.Text,{children:"Send a message below to revise the plan."})}):null,l&&("awaiting-approval"===d||"iterating"===d)?(0,t.jsx)(A.Button,{text:"Change plan",onClick:g,iconLeft:(0,t.jsx)(h.default,{})}):null]}),c?(0,t.jsx)(V.View,{row:!0,align:"center",justify:"start",children:(0,t.jsx)(em,{isPlanApproved:!0})}):null]})}e.s(["PlanProposal",()=>eI],682872);var eP=e.i(67760),eM=e.i(986194),eO=e.i(257811);function eV(e){var r=e.queries,i=e.responses,a=e.created,s=(0,eP.default)(r,null!=i?i:[]),u=s.findLastIndex(function(e){return null!=(0,l._)(e,2)[1]});return(0,t.jsx)(V.View,{gap:8,pb:4,children:s.map(function(e,r){var i=(0,l._)(e,2),s=i[0],c=i[1];if(!s)return null;var d=r===u&&null!=c;return(0,t.jsxs)(n.Fragment,{children:[(0,t.jsx)(V.View,{p:6,children:(0,t.jsx)(eN,{query:s})}),c?(0,t.jsx)(V.View,{justify:"end",pl:32,row:!0,gap:8,children:(0,t.jsxs)(V.View,{shrink:!0,align:"end",gap:6,children:[(0,t.jsx)(o.UserMessageSurface,{agentMode:void 0,acknowledged:!0,children:(0,t.jsx)(eB,{query:s,response:c})}),a&&d?(0,t.jsx)(V.View,{children:(0,t.jsx)(eO.Timestamp,{live:!0,date:a,textVariant:"small",textColor:"dimmest",textTransform:"first-letter-capitalized",dateFormat:"switch"})}):null]})}):null]},r)})})}function eN(e){var n=e.query;return(0,eM.isKind)(n.queryType,"booleanQuery")?(0,t.jsx)(eC.MessageMarkdown,{messageState:r.EventState.COMPLETE,text:n.queryType.booleanQuery.question,textColor:"shades"}):(0,eM.isKind)(n.queryType,"choiceQuery")?(0,t.jsx)(eC.MessageMarkdown,{messageState:r.EventState.COMPLETE,text:n.queryType.choiceQuery.question,textColor:"shades"}):(0,eM.isKind)(n.queryType,"textQuery")?(0,t.jsx)(eC.MessageMarkdown,{messageState:r.EventState.COMPLETE,text:n.queryType.textQuery.question,textColor:"shades"}):null}function eB(e){var n=e.query,r=e.response;if((0,eM.isKind)(n.queryType,"booleanQuery")&&(0,eM.isKind)(r.responseType,"booleanResponse")){var i=(0,eM.unkind)(r.responseType),a=i.response,o=i.reason;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.Text,{children:a?n.queryType.booleanQuery.confirmText:n.queryType.booleanQuery.rejectText}),o?(0,t.jsx)(M.Text,{children:o}):null]})}if((0,eM.isKind)(n.queryType,"choiceQuery")&&(0,eM.isKind)(r.responseType,"choiceResponse")){var s=(0,eM.unkind)(r.responseType),l=s.response,u=s.reason;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.Text,{children:l}),u?(0,t.jsx)(M.Text,{children:u}):null]})}if((0,eM.isKind)(n.queryType,"textQuery")&&(0,eM.isKind)(r.responseType,"textResponse")){var c=(0,eM.unkind)(r.responseType).response;return(0,t.jsx)(M.Text,{children:c})}return null}e.s(["QueryRequest",()=>eV],489172)},30305,e=>{e.v({dividerContainer:"RollbackStatus-module__ruRP2q__dividerContainer",dividerLine:"RollbackStatus-module__ruRP2q__dividerLine",dividerText:"RollbackStatus-module__ruRP2q__dividerText",revertIcon:"RollbackStatus-module__ruRP2q__revertIcon",subtext:"RollbackStatus-module__ruRP2q__subtext"})},523579,e=>{e.v({appIcon:"SetupImport-module__uC9EDa__appIcon",root:"SetupImport-module__uC9EDa__root",statusIcon:"SetupImport-module__uC9EDa__statusIcon"})},918388,e=>{e.v({borderedContainer:"AutoscaleMachineConfiguration2-module__LbpU1a__borderedContainer"})},14428,e=>{e.v({cost:"MachineConfigurationSelector-module__MyGrca__cost","loading-pulse":"MachineConfigurationSelector-module__MyGrca__loading-pulse",loadingState:"MachineConfigurationSelector-module__MyGrca__loadingState",select:"MachineConfigurationSelector-module__MyGrca__select",selectWrapper:"MachineConfigurationSelector-module__MyGrca__selectWrapper"})},759239,(e,t,n)=>{var r=e.r(365738),i=globalThis,a=function(){return function(){"use strict";var e,t,n={949:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CronParser=void 0;var r=n(515);t.CronParser=function(){function e(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1),this.expression=e,this.dayOfWeekStartIndexZero=t,this.monthStartIndexZero=n}return e.prototype.parse=function(){var e,t,n=null!=(e=this.expression)?e:"";if("@reboot"===n)return["@reboot","","","","","",""];if(n.startsWith("@")){var r=this.parseSpecial(this.expression);t=this.extractParts(r)}else t=this.extractParts(this.expression);return this.normalize(t),this.validate(t),t},e.prototype.parseSpecial=function(e){var t={"@yearly":"0 0 1 1 *","@annually":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@midnight":"0 0 * * *","@hourly":"0 * * * *","@reboot":"@reboot"}[e];if(!t)throw Error("Unknown special expression.");return t},e.prototype.extractParts=function(e){if(!this.expression)throw Error("cron expression is empty");for(var t=e.trim().split(/[ ]+/),n=0;n<t.length;n++)if(t[n].includes(",")){var r=t[n].split(",").map(function(e){return e.trim()}).filter(function(e){return""!==e}).map(function(e){return isNaN(Number(e))?e:Number(e)}).filter(function(e){return null!==e&&""!==e});0===r.length&&r.push("*"),r.sort(function(e,t){return null!==e&&null!==t?e-t:0}),t[n]=r.map(function(e){return null!==e?e.toString():""}).join(",")}if(t.length<5)throw Error("Expression has only ".concat(t.length," part").concat(1==t.length?"":"s",". At least 5 parts are required."));if(5==t.length)t.unshift(""),t.push("");else if(6==t.length)/\d{4}$/.test(t[5])||"?"==t[4]||"?"==t[2]?t.unshift(""):t.push("");else if(t.length>7)throw Error("Expression has ".concat(t.length," parts; too many!"));return t},e.prototype.normalize=function(e){var t=this;if(e[3]=e[3].replace("?","*"),e[5]=e[5].replace("?","*"),e[2]=e[2].replace("?","*"),0==e[0].indexOf("0/")&&(e[0]=e[0].replace("0/","*/")),0==e[1].indexOf("0/")&&(e[1]=e[1].replace("0/","*/")),0==e[2].indexOf("0/")&&(e[2]=e[2].replace("0/","*/")),0==e[3].indexOf("1/")&&(e[3]=e[3].replace("1/","*/")),0==e[4].indexOf("1/")&&(e[4]=e[4].replace("1/","*/")),0==e[6].indexOf("1/")&&(e[6]=e[6].replace("1/","*/")),e[5]=e[5].replace(/(^\d)|([^#/\s]\d)/g,function(e){var n=e.replace(/\D/,""),r=n;return t.dayOfWeekStartIndexZero?"7"==n&&(r="0"):r=(parseInt(n)-1).toString(),e.replace(n,r)}),"L"==e[5]&&(e[5]="6"),"?"==e[3]&&(e[3]="*"),e[3].indexOf("W")>-1&&(e[3].indexOf(",")>-1||e[3].indexOf("-")>-1))throw Error("The 'W' character can be specified only when the day-of-month is a single day, not a range or list of days.");var n={SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6};for(var r in n)e[5]=e[5].replace(RegExp(r,"gi"),n[r].toString());e[4]=e[4].replace(/(^\d{1,2})|([^#/\s]\d{1,2})/g,function(e){var n=e.replace(/\D/,""),r=n;return t.monthStartIndexZero&&(r=(parseInt(n)+1).toString()),e.replace(n,r)});var i={JAN:1,FEB:2,MAR:3,APR:4,MAY:5,JUN:6,JUL:7,AUG:8,SEP:9,OCT:10,NOV:11,DEC:12};for(var a in i)e[4]=e[4].replace(RegExp(a,"gi"),i[a].toString());"0"==e[0]&&(e[0]=""),!/\*|\-|\,|\//.test(e[2])&&(/\*|\//.test(e[1])||/\*|\//.test(e[0]))&&(e[2]+="-".concat(e[2]));for(var o=0;o<e.length;o++)if(-1!=e[o].indexOf(",")&&(e[o]=e[o].split(",").filter(function(e){return""!==e}).join(",")||"*"),"*/1"==e[o]&&(e[o]="*"),e[o].indexOf("/")>-1&&!/^\*|\-|\,/.test(e[o])){var s=null;switch(o){case 4:s="12";break;case 5:s="6";break;case 6:s="9999";break;default:s=null}if(null!==s){var l=e[o].split("/");e[o]="".concat(l[0],"-").concat(s,"/").concat(l[1])}}},e.prototype.validate=function(e){var t="0-9,\\-*/";this.validateOnlyExpectedCharactersFound(e[0],t),this.validateOnlyExpectedCharactersFound(e[1],t),this.validateOnlyExpectedCharactersFound(e[2],t),this.validateOnlyExpectedCharactersFound(e[3],"0-9,\\-*/LW"),this.validateOnlyExpectedCharactersFound(e[4],t),this.validateOnlyExpectedCharactersFound(e[5],"0-9,\\-*/L#"),this.validateOnlyExpectedCharactersFound(e[6],t),this.validateAnyRanges(e)},e.prototype.validateAnyRanges=function(e){r.default.secondRange(e[0]),r.default.minuteRange(e[1]),r.default.hourRange(e[2]),r.default.dayOfMonthRange(e[3]),r.default.monthRange(e[4],this.monthStartIndexZero),r.default.dayOfWeekRange(e[5],this.dayOfWeekStartIndexZero)},e.prototype.validateOnlyExpectedCharactersFound=function(e,t){var n=e.match(RegExp("[^".concat(t,"]+"),"gi"));if(n&&n.length)throw Error("Expression contains invalid values: '".concat(n.toString(),"'"))},e}()},333:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionDescriptor=void 0;var r=n(823),i=n(949);t.ExpressionDescriptor=function(){function e(t,n){if(this.expression=t,this.options=n,this.expressionParts=[,,,,,],!this.options.locale&&e.defaultLocale&&(this.options.locale=e.defaultLocale),!e.locales[this.options.locale]){var r=Object.keys(e.locales)[0];console.warn("Locale '".concat(this.options.locale,"' could not be found; falling back to '").concat(r,"'.")),this.options.locale=r}this.i18n=e.locales[this.options.locale],void 0===n.use24HourTimeFormat&&(n.use24HourTimeFormat=this.i18n.use24HourTimeFormatByDefault())}return e.toString=function(t,n){var r=void 0===n?{}:n,i=r.throwExceptionOnParseError,a=r.verbose,o=r.dayOfWeekStartIndexZero,s=r.monthStartIndexZero,l=r.use24HourTimeFormat,u=r.locale,c=r.logicalAndDayFields,d={throwExceptionOnParseError:void 0===i||i,verbose:void 0!==a&&a,dayOfWeekStartIndexZero:void 0===o||o,monthStartIndexZero:void 0!==s&&s,use24HourTimeFormat:l,locale:void 0===u?null:u,logicalAndDayFields:void 0!==c&&c};return d.tzOffset&&console.warn("'tzOffset' option has been deprecated and is no longer supported."),new e(t,d).getFullDescription()},e.initialize=function(t,n){void 0===n&&(n="en"),e.specialCharacters=["/","-",",","*"],e.defaultLocale=n,t.load(e.locales)},e.prototype.getFullDescription=function(){var e,t,n="";try{var r=new i.CronParser(this.expression,this.options.dayOfWeekStartIndexZero,this.options.monthStartIndexZero);if(this.expressionParts=r.parse(),"@reboot"===this.expressionParts[0])return(null==(t=(e=this.i18n).atReboot)?void 0:t.call(e))||"Run once, at startup";var a=this.getTimeOfDayDescription(),o=this.getDayOfMonthDescription(),s=this.getMonthDescription(),l=this.getDayOfWeekDescription(),u=this.getYearDescription();n+=a+o+l+s+u,n=(n=this.transformVerbosity(n,!!this.options.verbose)).charAt(0).toLocaleUpperCase()+n.substr(1)}catch(e){if(this.options.throwExceptionOnParseError)throw"".concat(e);n=this.i18n.anErrorOccuredWhenGeneratingTheExpressionD()}return n},e.prototype.getTimeOfDayDescription=function(){var t=this.expressionParts[0],n=this.expressionParts[1],i=this.expressionParts[2],a="";if(r.StringUtilities.containsAny(n,e.specialCharacters)||r.StringUtilities.containsAny(i,e.specialCharacters)||r.StringUtilities.containsAny(t,e.specialCharacters))if(!(!t&&n.indexOf("-")>-1)||n.indexOf(",")>-1||n.indexOf("/")>-1||r.StringUtilities.containsAny(i,e.specialCharacters))if(!t&&i.indexOf(",")>-1&&-1==i.indexOf("-")&&-1==i.indexOf("/")&&!r.StringUtilities.containsAny(n,e.specialCharacters)){var o=i.split(",");a+=this.i18n.at();for(var s=0;s<o.length;s++)a+=" ",a+=this.formatTime(o[s],n,""),s<o.length-2&&(a+=","),s==o.length-2&&(a+=this.i18n.spaceAnd())}else{var l=this.getSecondsDescription(),u=this.getMinutesDescription(),c=this.getHoursDescription();if((a+=l)&&u&&(a+=", "),a+=u,u===c)return a;a&&c&&(a+=", "),a+=c}else{var d=n.split("-");a+=r.StringUtilities.format(this.i18n.everyMinuteBetweenX0AndX1(),this.formatTime(i,d[0],""),this.formatTime(i,d[1],""))}else a+=this.i18n.atSpace()+this.formatTime(i,n,t);return a},e.prototype.getSecondsDescription=function(){var e=this;return this.getSegmentDescription(this.expressionParts[0],this.i18n.everySecond(),function(e){return e},function(t){return r.StringUtilities.format(e.i18n.everyX0Seconds(t),t)},function(t){return e.i18n.secondsX0ThroughX1PastTheMinute()},function(t){return"0"==t?"":20>parseInt(t)?e.i18n.atX0SecondsPastTheMinute(t):e.i18n.atX0SecondsPastTheMinuteGt20()||e.i18n.atX0SecondsPastTheMinute(t)})},e.prototype.getMinutesDescription=function(){var e=this,t=this.expressionParts[0],n=this.expressionParts[2];return this.getSegmentDescription(this.expressionParts[1],this.i18n.everyMinute(),function(e){return e},function(t){return r.StringUtilities.format(e.i18n.everyX0Minutes(t),t)},function(t){return e.i18n.minutesX0ThroughX1PastTheHour()},function(r){try{return"0"==r&&-1==n.indexOf("/")&&""==t?e.i18n.everyHour():20>parseInt(r)?e.i18n.atX0MinutesPastTheHour(r):e.i18n.atX0MinutesPastTheHourGt20()||e.i18n.atX0MinutesPastTheHour(r)}catch(t){return e.i18n.atX0MinutesPastTheHour(r)}})},e.prototype.getHoursDescription=function(){var e=this,t=this.expressionParts[2],n=0,i=[];t.split("/")[0].split(",").forEach(function(e){var t=e.split("-");2===t.length&&i.push({value:t[1],index:n+1}),n+=t.length});var a=0;return this.getSegmentDescription(t,this.i18n.everyHour(),function(t){var n=i.find(function(e){return e.value===t&&e.index===a})&&"0"!==e.expressionParts[1];return a++,n?e.formatTime(t,"59",""):e.formatTime(t,"0","")},function(t){return r.StringUtilities.format(e.i18n.everyX0Hours(t),t)},function(t){return e.i18n.betweenX0AndX1()},function(t){return e.i18n.atX0()})},e.prototype.getDayOfWeekDescription=function(){var e=this,t=this.i18n.daysOfTheWeek();return"*"==this.expressionParts[5]?"":this.getSegmentDescription(this.expressionParts[5],this.i18n.commaEveryDay(),function(n,r){var i=n;n.indexOf("#")>-1?i=n.substring(0,n.indexOf("#")):n.indexOf("L")>-1&&(i=i.replace("L",""));var a=parseInt(i),o=e.i18n.daysOfTheWeekInCase?e.i18n.daysOfTheWeekInCase(r)[a]:t[a];if(n.indexOf("#")>-1){var s=null,l=n.substring(n.indexOf("#")+1),u=n.substring(0,n.indexOf("#"));switch(l){case"1":s=e.i18n.first(u);break;case"2":s=e.i18n.second(u);break;case"3":s=e.i18n.third(u);break;case"4":s=e.i18n.fourth(u);break;case"5":s=e.i18n.fifth(u)}o=s+" "+o}return o},function(t){return 1==parseInt(t)?"":r.StringUtilities.format(e.i18n.commaEveryX0DaysOfTheWeek(t),t)},function(t){var n=t.substring(0,t.indexOf("-"));return"*"!=e.expressionParts[3]?e.i18n.commaAndX0ThroughX1(n):e.i18n.commaX0ThroughX1(n)},function(t){var n=null;if(t.indexOf("#")>-1){var r=t.substring(t.indexOf("#")+1),i=t.substring(0,t.indexOf("#"));n=e.i18n.commaOnThe(r,i).trim()+e.i18n.spaceX0OfTheMonth()}else n=t.indexOf("L")>-1?e.i18n.commaOnTheLastX0OfTheMonth(t.replace("L","")):"*"!=e.expressionParts[3]?e.options.logicalAndDayFields?e.i18n.commaOnlyOnX0(t):e.i18n.commaAndOnX0():e.i18n.commaOnlyOnX0(t);return n})},e.prototype.getMonthDescription=function(){var e=this,t=this.i18n.monthsOfTheYear();return this.getSegmentDescription(this.expressionParts[4],"",function(n,r){return r&&e.i18n.monthsOfTheYearInCase?e.i18n.monthsOfTheYearInCase(r)[parseInt(n)-1]:t[parseInt(n)-1]},function(t){return 1==parseInt(t)?"":r.StringUtilities.format(e.i18n.commaEveryX0Months(t),t)},function(t){return e.i18n.commaMonthX0ThroughMonthX1()||e.i18n.commaX0ThroughX1()},function(t){return e.i18n.commaOnlyInMonthX0?e.i18n.commaOnlyInMonthX0():e.i18n.commaOnlyInX0()})},e.prototype.getDayOfMonthDescription=function(){var e=this,t=null,n=this.expressionParts[3];switch(n){case"L":t=this.i18n.commaOnTheLastDayOfTheMonth();break;case"WL":case"LW":t=this.i18n.commaOnTheLastWeekdayOfTheMonth();break;default:var i=n.match(/(\d{1,2}W)|(W\d{1,2})/);if(i){var a=parseInt(i[0].replace("W","")),o=1==a?this.i18n.firstWeekday():r.StringUtilities.format(this.i18n.weekdayNearestDayX0(),a.toString());t=r.StringUtilities.format(this.i18n.commaOnTheX0OfTheMonth(),o)}else{var s=n.match(/L-(\d{1,2})/);if(s){var l=s[1];t=r.StringUtilities.format(this.i18n.commaDaysBeforeTheLastDayOfTheMonth(l),l)}else{if("*"==n&&"*"!=this.expressionParts[5])return"";t=this.getSegmentDescription(n,this.i18n.commaEveryDay(),function(t){return"L"==t?e.i18n.lastDay():e.i18n.dayX0?r.StringUtilities.format(e.i18n.dayX0(),t):t},function(t){return"1"==t?e.i18n.commaEveryDay():e.i18n.commaEveryX0Days(t)},function(t){return e.i18n.commaBetweenDayX0AndX1OfTheMonth(t)},function(t){return e.i18n.commaOnDayX0OfTheMonth(t)})}}}return t},e.prototype.getYearDescription=function(){var e=this;return this.getSegmentDescription(this.expressionParts[6],"",function(e){return/^\d+$/.test(e)?new Date(parseInt(e),1).getFullYear().toString():e},function(t){return r.StringUtilities.format(e.i18n.commaEveryX0Years(t),t)},function(t){return e.i18n.commaYearX0ThroughYearX1()||e.i18n.commaX0ThroughX1()},function(t){return e.i18n.commaOnlyInYearX0?e.i18n.commaOnlyInYearX0():e.i18n.commaOnlyInX0()})},e.prototype.getSegmentDescription=function(e,t,n,i,a,o){var s=null,l=e.indexOf("/")>-1,u=e.indexOf("-")>-1,c=e.indexOf(",")>-1;if(e)if("*"===e)s=t;else if(l||u||c)if(c){for(var d=e.split(","),p="",f=0;f<d.length;f++)if(f>0&&d.length>2&&(p+=",",f<d.length-1&&(p+=" ")),f>0&&d.length>1&&(f==d.length-1||2==d.length)&&(p+="".concat(this.i18n.spaceAnd()," ")),d[f].indexOf("/")>-1||d[f].indexOf("-")>-1){var m=d[f].indexOf("-")>-1&&-1==d[f].indexOf("/"),h=this.getSegmentDescription(d[f],t,n,i,m?this.i18n.commaX0ThroughX1:a,o);m&&(h=h.replace(", ","")),p+=h}else l?p+=this.getSegmentDescription(d[f],t,n,i,a,o):p+=n(d[f]);s=l?p:r.StringUtilities.format(o(e),p)}else if(l){var d=e.split("/");if(s=r.StringUtilities.format(i(d[1]),d[1]),d[0].indexOf("-")>-1){var g=this.generateRangeSegmentDescription(d[0],a,n);0!=g.indexOf(", ")&&(s+=", "),s+=g}else if(-1==d[0].indexOf("*")){var v=r.StringUtilities.format(o(d[0]),n(d[0]));v=v.replace(", ",""),s+=r.StringUtilities.format(this.i18n.commaStartingX0(),v)}}else u&&(s=this.generateRangeSegmentDescription(e,a,n));else s=r.StringUtilities.format(o(e),n(e));else s="";return s},e.prototype.generateRangeSegmentDescription=function(e,t,n){var i="",a=e.split("-"),o=n(a[0],1),s=n(a[1],2),l=t(e);return i+r.StringUtilities.format(l,o,s)},e.prototype.formatTime=function(e,t,n){var r=parseInt(e)+0,i=parseInt(t)+0;i>=60?(i-=60,r+=1):i<0&&(i+=60,r-=1),r>=24?r-=24:r<0&&(r=24+r);var a="",o=!1;this.options.use24HourTimeFormat||(a=(o=!!(this.i18n.setPeriodBeforeTime&&this.i18n.setPeriodBeforeTime()))?"".concat(this.getPeriod(r)," "):" ".concat(this.getPeriod(r)),r>12&&(r-=12),0===r&&(r=12));var s="";return n&&(s=":".concat(("00"+n).substring(n.length))),"".concat(o?a:"").concat(("00"+r.toString()).substring(r.toString().length),":").concat(("00"+i.toString()).substring(i.toString().length)).concat(s).concat(o?"":a)},e.prototype.transformVerbosity=function(e,t){if(!t&&(e=(e=(e=(e=e.replace(RegExp(", ".concat(this.i18n.everyMinute()),"g"),"")).replace(RegExp(", ".concat(this.i18n.everyHour()),"g"),"")).replace(RegExp(this.i18n.commaEveryDay(),"g"),"")).replace(/\, ?$/,""),this.i18n.conciseVerbosityReplacements))for(var n=0,r=Object.entries(this.i18n.conciseVerbosityReplacements());n<r.length;n++){var i=r[n],a=i[0],o=i[1];e=e.replace(RegExp(a,"g"),o)}return e},e.prototype.getPeriod=function(e){return e>=12?this.i18n.pm&&this.i18n.pm()||"PM":this.i18n.am&&this.i18n.am()||"AM"},e.locales={},e}()},747:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.enLocaleLoader=void 0;var r=n(486);t.enLocaleLoader=function(){function e(){}return e.prototype.load=function(e){e.en=new r.en},e}()},486:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.en=void 0,t.en=function(){function e(){}return e.prototype.atX0SecondsPastTheMinuteGt20=function(){return null},e.prototype.atX0MinutesPastTheHourGt20=function(){return null},e.prototype.commaMonthX0ThroughMonthX1=function(){return null},e.prototype.commaYearX0ThroughYearX1=function(){return null},e.prototype.use24HourTimeFormatByDefault=function(){return!1},e.prototype.anErrorOccuredWhenGeneratingTheExpressionD=function(){return"An error occurred when generating the expression description. Check the cron expression syntax."},e.prototype.everyMinute=function(){return"every minute"},e.prototype.everyHour=function(){return"every hour"},e.prototype.atSpace=function(){return"At "},e.prototype.everyMinuteBetweenX0AndX1=function(){return"Every minute between %s and %s"},e.prototype.at=function(){return"At"},e.prototype.spaceAnd=function(){return" and"},e.prototype.everySecond=function(){return"every second"},e.prototype.everyX0Seconds=function(){return"every %s seconds"},e.prototype.secondsX0ThroughX1PastTheMinute=function(){return"seconds %s through %s past the minute"},e.prototype.atX0SecondsPastTheMinute=function(){return"at %s seconds past the minute"},e.prototype.everyX0Minutes=function(){return"every %s minutes"},e.prototype.minutesX0ThroughX1PastTheHour=function(){return"minutes %s through %s past the hour"},e.prototype.atX0MinutesPastTheHour=function(){return"at %s minutes past the hour"},e.prototype.everyX0Hours=function(){return"every %s hours"},e.prototype.betweenX0AndX1=function(){return"between %s and %s"},e.prototype.atX0=function(){return"at %s"},e.prototype.commaEveryDay=function(){return", every day"},e.prototype.commaEveryX0DaysOfTheWeek=function(){return", every %s days of the week"},e.prototype.commaX0ThroughX1=function(){return", %s through %s"},e.prototype.commaAndX0ThroughX1=function(){return", %s through %s"},e.prototype.first=function(){return"first"},e.prototype.second=function(){return"second"},e.prototype.third=function(){return"third"},e.prototype.fourth=function(){return"fourth"},e.prototype.fifth=function(){return"fifth"},e.prototype.commaOnThe=function(){return", on the "},e.prototype.spaceX0OfTheMonth=function(){return" %s of the month"},e.prototype.lastDay=function(){return"the last day"},e.prototype.commaOnTheLastX0OfTheMonth=function(){return", on the last %s of the month"},e.prototype.commaOnlyOnX0=function(){return", only on %s"},e.prototype.commaAndOnX0=function(){return", and on %s"},e.prototype.commaEveryX0Months=function(){return", every %s months"},e.prototype.commaOnlyInX0=function(){return", only in %s"},e.prototype.commaOnTheLastDayOfTheMonth=function(){return", on the last day of the month"},e.prototype.commaOnTheLastWeekdayOfTheMonth=function(){return", on the last weekday of the month"},e.prototype.commaDaysBeforeTheLastDayOfTheMonth=function(){return", %s days before the last day of the month"},e.prototype.firstWeekday=function(){return"first weekday"},e.prototype.weekdayNearestDayX0=function(){return"weekday nearest day %s"},e.prototype.commaOnTheX0OfTheMonth=function(){return", on the %s of the month"},e.prototype.commaEveryX0Days=function(){return", every %s days"},e.prototype.commaBetweenDayX0AndX1OfTheMonth=function(){return", between day %s and %s of the month"},e.prototype.commaOnDayX0OfTheMonth=function(){return", on day %s of the month"},e.prototype.commaEveryHour=function(){return", every hour"},e.prototype.commaEveryX0Years=function(){return", every %s years"},e.prototype.commaStartingX0=function(){return", starting %s"},e.prototype.daysOfTheWeek=function(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},e.prototype.monthsOfTheYear=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]},e.prototype.atReboot=function(){return"Run once, at startup"},e}()},515:function(e,t){var n=function(e,t){if(!e)throw Error(t)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){}return e.secondRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var i=parseInt(t[r],10);n(i>=0&&i<=59,"seconds part must be >= 0 and <= 59")}},e.minuteRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var i=parseInt(t[r],10);n(i>=0&&i<=59,"minutes part must be >= 0 and <= 59")}},e.hourRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var i=parseInt(t[r],10);n(i>=0&&i<=23,"hours part must be >= 0 and <= 23")}},e.dayOfMonthRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var i=parseInt(t[r],10);n(i>=1&&i<=31,"DOM part must be >= 1 and <= 31")}},e.monthRange=function(e,t){for(var r=e.split(","),i=0;i<r.length;i++)if(!isNaN(parseInt(r[i],10))){var a=parseInt(r[i],10);n(a>=1&&a<=12,t?"month part must be >= 0 and <= 11":"month part must be >= 1 and <= 12")}},e.dayOfWeekRange=function(e,t){for(var r=e.split(","),i=0;i<r.length;i++)if(!isNaN(parseInt(r[i],10))){var a=parseInt(r[i],10);n(a>=0&&a<=6,t?"DOW part must be >= 0 and <= 6":"DOW part must be >= 1 and <= 7")}},e}()},823:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtilities=void 0,t.StringUtilities=function(){function e(){}return e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.replace(/%s/g,function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return t.shift()})},e.containsAny=function(e,t){return t.some(function(t){return e.indexOf(t)>-1})},e}()}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return n[e](a,a.exports,i),a.exports}var a={};return Object.defineProperty(a,"__esModule",{value:!0}),a.toString=void 0,e=i(333),t=i(747),e.ExpressionDescriptor.initialize(new t.enLocaleLoader),a.default=e.ExpressionDescriptor,a.toString=e.ExpressionDescriptor.toString,a}()};if("object"===r._(n)&&"object"===r._(t))t.exports=a();else if("function"==typeof define&&define.amd){let t;void 0!==(t=a())&&e.v(t)}else"object"===r._(n)?n.cronstrue=a():i.cronstrue=a()},947592,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")},t.exports=n.default},693955,(e,t,n)=>{"use strict";var r,i=e.r(954546),a=e.r(365738);Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,o.default)(1,arguments);var t=Object.prototype.toString.call(e);return i._(e,Date)||(void 0===e?"undefined":a._(e))==="object"&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(Error().stack)),new Date(NaN))};var o=(r=e.r(947592))&&r.__esModule?r:{default:r};t.exports=n.default},48654,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,i.default)(1,arguments),!isNaN((0,r.default)(e))};var r=a(e.r(693955)),i=a(e.r(947592));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},429881,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var i;if(n=n||{},i="string"==typeof r[e]?r[e]:1===t?r[e].one:r[e].other.replace("{{count}}",t),n.addSuffix)if(n.comparison>0)return"in "+i;else return i+" ago";return i};var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};t.exports=n.default},527508,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}},t.exports=n.default},488365,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e.r(527508))&&r.__esModule?r:{default:r};n.default={date:(0,i.default)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,i.default)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,i.default)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},t.exports=n.default},727525,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,i){return r[e]};var r={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};t.exports=n.default},8629,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=i.width?String(i.width):a;r=e.formattingValues[o]||e.formattingValues[a]}else{var s=e.defaultWidth,l=i.width?String(i.width):e.defaultWidth;r=e.values[l]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}},t.exports=n.default},691958,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e.r(8629))&&r.__esModule?r:{default:r};n.default={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:(0,i.default)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,i.default)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:(0,i.default)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,i.default)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,i.default)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},t.exports=n.default},678985,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n){var r=String(t),i=n||{},a=r.match(e.matchPattern);if(!a)return null;var o=a[0],s=r.match(e.parsePattern);if(!s)return null;var l=e.valueCallback?e.valueCallback(s[0]):s[0];return{value:l=i.valueCallback?i.valueCallback(l):l,rest:r.slice(o.length)}}},t.exports=n.default},417644,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n){var r,i=String(t),a=n||{},o=a.width,s=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],l=i.match(s);if(!l)return null;var u=l[0],c=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth];return r="[object Array]"===Object.prototype.toString.call(c)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(c,function(e){return e.test(u)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(c,function(e){return e.test(u)}),r=e.valueCallback?e.valueCallback(r):r,{value:r=a.valueCallback?a.valueCallback(r):r,rest:i.slice(u.length)}}},t.exports=n.default},207756,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e.r(678985)),i=a(e.r(417644));function a(e){return e&&e.__esModule?e:{default:e}}n.default={ordinalNumber:(0,r.default)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,i.default)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,i.default)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,i.default)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,i.default)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,i.default)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},t.exports=n.default},963919,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=l(e.r(429881)),i=l(e.r(488365)),a=l(e.r(727525)),o=l(e.r(691958)),s=l(e.r(207756));function l(e){return e&&e.__esModule?e:{default:e}}n.default={code:"en-US",formatDistance:r.default,formatLong:i.default,formatRelative:a.default,localize:o.default,match:s.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},t.exports=n.default},555023,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)},t.exports=n.default},970266,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return(0,a.default)(2,arguments),new Date((0,i.default)(e).getTime()+(0,r.default)(t))};var r=o(e.r(555023)),i=o(e.r(693955)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},209021,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(2,arguments);var n=(0,r.default)(t);return(0,i.default)(e,-n)};var r=o(e.r(555023)),i=o(e.r(970266)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},374369,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return(e<0?"-":"")+n},t.exports=n.default},474293,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e.r(374369))&&r.__esModule?r:{default:r};n.default={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return(0,i.default)("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):(0,i.default)(n+1,2)},d:function(e,t){return(0,i.default)(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return(0,i.default)(e.getUTCHours()%12||12,t.length)},H:function(e,t){return(0,i.default)(e.getUTCHours(),t.length)},m:function(e,t){return(0,i.default)(e.getUTCMinutes(),t.length)},s:function(e,t){return(0,i.default)(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=Math.floor(e.getUTCMilliseconds()*Math.pow(10,n-3));return(0,i.default)(r,t.length)}},t.exports=n.default},520019,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,i.default)(1,arguments);var t=(0,r.default)(e),n=t.getTime();return t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),Math.floor((n-t.getTime())/864e5)+1};var r=a(e.r(693955)),i=a(e.r(947592));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},167852,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,i.default)(1,arguments);var t=(0,r.default)(e),n=t.getUTCDay();return t.setUTCDate(t.getUTCDate()-(7*(n<1)+n-1)),t.setUTCHours(0,0,0,0),t};var r=a(e.r(693955)),i=a(e.r(947592));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},596841,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,a.default)(1,arguments);var t=(0,r.default)(e),n=t.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(n+1,0,4),o.setUTCHours(0,0,0,0);var s=(0,i.default)(o),l=new Date(0);l.setUTCFullYear(n,0,4),l.setUTCHours(0,0,0,0);var u=(0,i.default)(l);return t.getTime()>=s.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1};var r=o(e.r(693955)),i=o(e.r(167852)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},57269,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,a.default)(1,arguments);var t=(0,r.default)(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),(0,i.default)(n)};var r=o(e.r(596841)),i=o(e.r(167852)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},424341,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,o.default)(1,arguments);var t=(0,r.default)(e);return Math.round(((0,i.default)(t).getTime()-(0,a.default)(t).getTime())/6048e5)+1};var r=s(e.r(693955)),i=s(e.r(167852)),a=s(e.r(57269)),o=s(e.r(947592));function s(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},171771,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(1,arguments);var n=t||{},o=n.locale,s=o&&o.options&&o.options.weekStartsOn,l=null==s?0:(0,r.default)(s),u=null==n.weekStartsOn?l:(0,r.default)(n.weekStartsOn);if(!(u>=0&&u<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=(0,i.default)(e),d=c.getUTCDay();return c.setUTCDate(c.getUTCDate()-(7*(d<u)+d-u)),c.setUTCHours(0,0,0,0),c};var r=o(e.r(555023)),i=o(e.r(693955)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},247167,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,o.default)(1,arguments);var n=(0,i.default)(e,t),s=n.getUTCFullYear(),l=t||{},u=l.locale,c=u&&u.options&&u.options.firstWeekContainsDate,d=null==c?1:(0,r.default)(c),p=null==l.firstWeekContainsDate?d:(0,r.default)(l.firstWeekContainsDate);if(!(p>=1&&p<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(s+1,0,p),f.setUTCHours(0,0,0,0);var m=(0,a.default)(f,t),h=new Date(0);h.setUTCFullYear(s,0,p),h.setUTCHours(0,0,0,0);var g=(0,a.default)(h,t);return n.getTime()>=m.getTime()?s+1:n.getTime()>=g.getTime()?s:s-1};var r=s(e.r(555023)),i=s(e.r(693955)),a=s(e.r(171771)),o=s(e.r(947592));function s(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},129705,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,o.default)(1,arguments);var n=t||{},s=n.locale,l=s&&s.options&&s.options.firstWeekContainsDate,u=null==l?1:(0,r.default)(l),c=null==n.firstWeekContainsDate?u:(0,r.default)(n.firstWeekContainsDate),d=(0,i.default)(e,t),p=new Date(0);return p.setUTCFullYear(d,0,c),p.setUTCHours(0,0,0,0),(0,a.default)(p,t)};var r=s(e.r(555023)),i=s(e.r(247167)),a=s(e.r(171771)),o=s(e.r(947592));function s(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},711232,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,o.default)(1,arguments);var n=(0,r.default)(e);return Math.round(((0,i.default)(n,t).getTime()-(0,a.default)(n,t).getTime())/6048e5)+1};var r=s(e.r(693955)),i=s(e.r(171771)),a=s(e.r(129705)),o=s(e.r(947592));function s(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},175395,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=c(e.r(474293)),i=c(e.r(520019)),a=c(e.r(424341)),o=c(e.r(596841)),s=c(e.r(711232)),l=c(e.r(247167)),u=c(e.r(374369));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),a=r%60;return 0===a?n+String(i):n+String(i)+(t||"")+(0,u.default)(a,2)}function p(e,t){return e%60==0?(e>0?"-":"+")+(0,u.default)(Math.abs(e)/60,2):f(e,t)}function f(e,t){var n=Math.abs(e);return(e>0?"-":"+")+(0,u.default)(Math.floor(n/60),2)+(t||"")+(0,u.default)(n%60,2)}n.default={G:function(e,t,n){var r=+(e.getUTCFullYear()>0);switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var i=e.getUTCFullYear();return n.ordinalNumber(i>0?i:1-i,{unit:"year"})}return r.default.y(e,t)},Y:function(e,t,n,r){var i=(0,l.default)(e,r),a=i>0?i:1-i;if("YY"===t){var o=a%100;return(0,u.default)(o,2)}return"Yo"===t?n.ordinalNumber(a,{unit:"year"}):(0,u.default)(a,t.length)},R:function(e,t){var n=(0,o.default)(e);return(0,u.default)(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return(0,u.default)(n,t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return(0,u.default)(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return(0,u.default)(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var i=e.getUTCMonth();switch(t){case"M":case"MM":return r.default.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return(0,u.default)(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=(0,s.default)(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):(0,u.default)(i,t.length)},I:function(e,t,n){var r=(0,a.default)(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):(0,u.default)(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):r.default.d(e,t)},D:function(e,t,n){var r=(0,i.default)(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):(0,u.default)(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return(0,u.default)(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return(0,u.default)(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return(0,u.default)(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var i=e.getUTCHours()%12;return 0===i&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return r.default.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):r.default.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):(0,u.default)(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return(0===r&&(r=24),"ko"===t)?n.ordinalNumber(r,{unit:"hour"}):(0,u.default)(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):r.default.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):r.default.s(e,t)},S:function(e,t){return r.default.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return p(i);case"XXXX":case"XX":return f(i);default:return f(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return p(i);case"xxxx":case"xx":return f(i);default:return f(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+d(i,":");default:return"GMT"+f(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+d(i,":");default:return"GMT"+f(i,":")}},t:function(e,t,n,r){var i=Math.floor((r._originalDate||e).getTime()/1e3);return(0,u.default)(i,t.length)},T:function(e,t,n,r){var i=(r._originalDate||e).getTime();return(0,u.default)(i,t.length)}},t.exports=n.default},463849,(e,t,n)=>{"use strict";function r(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function i(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default={p:i,P:function(e,t){var n,a=e.match(/(P+)(p+)?/),o=a[1],s=a[2];if(!s)return r(e,t);switch(o){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",r(o,t)).replace("{{time}}",i(s,t))}},t.exports=n.default},906695,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()},t.exports=n.default},539530,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isProtectedDayOfYearToken=function(e){return -1!==r.indexOf(e)},n.isProtectedWeekYearToken=function(e){return -1!==i.indexOf(e)},n.throwProtectedError=function(e,t,n){if("YYYY"===e)throw RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))};var r=["D","DD"],i=["YY","YYYY"]},628251,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){(0,p.default)(2,arguments);var f=String(t),y=n||{},b=y.locale||i.default,S=b.options&&b.options.firstWeekContainsDate,_=null==S?1:(0,d.default)(S),w=null==y.firstWeekContainsDate?_:(0,d.default)(y.firstWeekContainsDate);if(!(w>=1&&w<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=b.options&&b.options.weekStartsOn,T=null==j?0:(0,d.default)(j),k=null==y.weekStartsOn?T:(0,d.default)(y.weekStartsOn);if(!(k>=0&&k<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!b.localize)throw RangeError("locale must contain localize property");if(!b.formatLong)throw RangeError("locale must contain formatLong property");var D=(0,o.default)(e);if(!(0,r.default)(D))throw RangeError("Invalid time value");var C=(0,u.default)(D),E=(0,a.default)(D,C),A={firstWeekContainsDate:w,weekStartsOn:k,locale:b,_originalDate:D};return f.match(h).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,l.default[t])(e,b.formatLong,A):e}).join("").match(m).map(function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return n.match(g)[1].replace(v,"'");var i=s.default[r];if(i)return!y.useAdditionalWeekYearTokens&&(0,c.isProtectedWeekYearToken)(n)&&(0,c.throwProtectedError)(n,t,e),!y.useAdditionalDayOfYearTokens&&(0,c.isProtectedDayOfYearToken)(n)&&(0,c.throwProtectedError)(n,t,e),i(E,n,b.localize,A);if(r.match(x))throw RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n}).join("")};var r=f(e.r(48654)),i=f(e.r(963919)),a=f(e.r(209021)),o=f(e.r(693955)),s=f(e.r(175395)),l=f(e.r(463849)),u=f(e.r(906695)),c=e.r(539530),d=f(e.r(555023)),p=f(e.r(947592));function f(e){return e&&e.__esModule?e:{default:e}}var m=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,h=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,g=/^'([^]*?)'?$/,v=/''/g,x=/[a-zA-Z]/;t.exports=n.default},454279,e=>{e.v({buildIdColumn:"ActivityLogText-module__xs4WqW__buildIdColumn",buildIdRow:"ActivityLogText-module__xs4WqW__buildIdRow",container:"ActivityLogText-module__xs4WqW__container",displayName:"ActivityLogText-module__xs4WqW__displayName",formattedText:"ActivityLogText-module__xs4WqW__formattedText",pillSpan:"ActivityLogText-module__xs4WqW__pillSpan",pillSpanMobile:"ActivityLogText-module__xs4WqW__pillSpanMobile",userRow:"ActivityLogText-module__xs4WqW__userRow"})},71393,e=>{e.v({iframe:"ExpoLaunchModal-module__rFxw_a__iframe"})},698646,e=>{e.v({container:"DeploymentInfoSection-module__ARuUVG__container",deployIcon:"DeploymentInfoSection-module__ARuUVG__deployIcon",replitAppLink:"DeploymentInfoSection-module__ARuUVG__replitAppLink"})},792130,e=>{e.v({button:"FreeDomainClaimSection-module__hng7Ia__button",buttonContainer:"FreeDomainClaimSection-module__hng7Ia__buttonContainer",container:"FreeDomainClaimSection-module__hng7Ia__container",content:"FreeDomainClaimSection-module__hng7Ia__content",freeText:"FreeDomainClaimSection-module__hng7Ia__freeText",header:"FreeDomainClaimSection-module__hng7Ia__header",headerText:"FreeDomainClaimSection-module__hng7Ia__headerText",strikethroughPrice:"FreeDomainClaimSection-module__hng7Ia__strikethroughPrice"})},867559,e=>{e.v({self:"FreeTierUpsellBanner-module__NxVGBW__self",text:"FreeTierUpsellBanner-module__NxVGBW__text"})},956002,71834,109644,664219,409049,479373,365692,777373,332822,788401,832550,34912,500179,691302,697859,823166,137737,32144,680250,713547,636567,358637,182492,863753,368487,791134,793203,295745,341734,828454,870078,57354,452831,635528,398594,605526,976191,e=>{"use strict";var t,n,r=e.i(297083),i=e.i(817556),a=e.i(276385),o=e.i(389959),s=e.i(82259);e.i(877212);var l=e.i(924908),u=e.i(708545),c=e.i(269848),d=e.i(536262),p=e.i(257982),f=e.i(993796),m=e.i(173703),h=e.i(140487),g=e.i(960178),v=e.i(257811),x=e.i(625484),y=e.i(30305),b=(0,o.memo)(function(e){var t=(0,l.useChatter)(),n=(0,f.useFlag)({controlName:"flag-session-pedigree"}),o=e.event,b=e.onSessionChange,S=o.status!==s.RevertStatus.REVERT_DATA_STAGE_COMPLETE;return(0,a.jsxs)(x.View,{children:[(0,a.jsx)(x.View,{p:8,children:(0,a.jsxs)(m.ShadesSurface,{elevate:"2x",br:"container","data-event-id":o.id,row:!0,gap:8,p:12,children:[S?(0,a.jsx)(c.default,{clsx:y.default.revertIcon}):(0,a.jsx)(d.default,{clsx:y.default.revertIcon}),(0,a.jsxs)(x.View,{gap:6,shrink:!0,children:[(0,a.jsx)(x.View,{gap:4,children:(0,a.jsx)(g.Text,{multiline:!0,variant:"text",color:"dimmer",shrink:!0,children:function(e){switch(e.status){case s.RevertStatus.REVERT_DATA_STAGE_UNKNOWN:return"Starting rollback...";case s.RevertStatus.REVERT_DATA_STAGE_LOADING_PREVIOUS_STATE:return"Loading previous checkpoint state...";case s.RevertStatus.REVERT_DATA_STAGE_SHUTTING_DOWN_WORKFLOWS:return"Shutting down workflows...";case s.RevertStatus.REVERT_DATA_STAGE_REVERTING_COMMIT:return"Reverting files to previous checkpoint...";case s.RevertStatus.REVERT_DATA_STAGE_RESTARTING_WORKFLOWS:return"Restarting workflows";case s.RevertStatus.REVERT_DATA_STAGE_ROLLING_BACK_DATABASE:return"Rolling back database...";case s.RevertStatus.REVERT_DATA_STAGE_ROLLING_BACK_DEPLOYMENT:return"Rolling back deployment...";case s.RevertStatus.REVERT_DATA_STAGE_COMPLETE:return"Rolled back to '".concat(e.checkpointTitle,"'");default:(0,p.default)(e.status)}}(o)})}),(0,a.jsxs)(x.View,{gap:12,row:!0,clsx:y.default.subtext,children:[(0,a.jsxs)(x.View,{row:!0,gap:4,children:[(0,a.jsx)(g.Text,{multiline:!1,variant:"small",children:S?"Started":"Finished"}),(0,a.jsx)(v.Timestamp,{textVariant:"small",live:!0,date:o.revertedAt,dateFormat:"switch"})]}),(0,a.jsx)(h.Button,{size:"small",onClick:function(){return(0,r._)(function(){return(0,i._)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t.sessions.get(o.originalSessionId).once()];case 1:return b(e.sent()),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}})})()},variant:"underlined",text:"View original chat",iconLeft:(0,a.jsx)(u.default,{})})]})]})]})}),n?null:(0,a.jsxs)(x.View,{clsx:y.default.dividerContainer,children:[(0,a.jsx)(x.View,{clsx:y.default.dividerLine}),(0,a.jsx)(g.Text,{clsx:y.default.dividerText,color:"dimmest",children:"New chat"})]})]})});e.s(["RollbackStatus",()=>b],956002);var S=e.i(873667),_=e.i(645674),w=e.i(819229),j=e.i(95136),T=e.i(523579),k=(0,o.memo)(function(e){var t=e.importSource,n=e.state,r=function(e){switch(e){case s.ProjectImportSource.PROJECT_IMPORT_SOURCE_LOVABLE:return{name:"Lovable",icon:null};case s.ProjectImportSource.PROJECT_IMPORT_SOURCE_BOLT:return{name:"Bolt",icon:null};case s.ProjectImportSource.PROJECT_IMPORT_SOURCE_REPLIT:return{name:"Replit",icon:(0,a.jsx)(j.default,{clsx:T.default.appIcon})};case s.ProjectImportSource.PROJECT_IMPORT_SOURCE_OTHER_GITHUB:return{name:"GitHub",icon:(0,a.jsx)(w.default,{clsx:T.default.appIcon})};case s.ProjectImportSource.PROJECT_IMPORT_SOURCE_FIGMA:return{name:"Figma",icon:(0,a.jsx)(_.default,{})};case s.ProjectImportSource.PROJECT_IMPORT_SOURCE_UNKNOWN:default:return{name:"",icon:null}}}(t),i=r.name,o=r.icon,l=n===s.EventState.COMPLETE,u=n===s.EventState.IN_PROGRESS,d=(0,a.jsx)(S.default,{clsx:T.default.statusIcon});return u&&(d=(0,a.jsx)(c.default,{})),(0,a.jsxs)(m.ShadesSurface,{elevate:"2x",br:"container",py:8,px:12,row:!0,justify:"space-between",align:"center",clsx:T.default.root,children:[(0,a.jsxs)(x.View,{row:!0,align:"center",gap:12,children:[d,(0,a.jsx)(g.Text,{color:"dimmer",children:l?"Successfully imported ".concat(""!==i?"from ".concat(i):"project"):"Setting up your project".concat(""!==i?" from ".concat(i):"","…")})]}),(0,a.jsx)(x.View,{children:o})]})});e.s(["SetupImport",()=>k],71834);var D=e.i(878420),C=e.i(569384),E=e.i(973245),A=e.i(304277),R=e.i(566901);function I(){var e=(0,C._)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return I=function(){return e},e}var P={},M=(0,E.gql)(I());function O(e){var t=(0,D._)({},P,e);return A.useQuery(M,t)}e.s(["useCheckReplitAppSubdomainAvailabilityQuery",()=>O],109644);var V=e.i(951262);function N(){var e=(0,C._)(["\n  fragment DeploymentsDeployOptionsDeployment on HostingDeployment {\n    id\n    latestBuildStatus\n    replitAppSubdomain\n    ignoredSecrets\n    timeCreated\n    securityScanEnabled\n    currentBuild {\n      timeCreated\n      id\n      provider\n      envVars {\n        name\n        value\n      }\n      machineJob {\n        timezone\n        crontab\n        timeoutSeconds\n        failureNotifications\n      }\n      isPrivate\n      hasPrivatePassword\n    }\n  }\n"]);return N=function(){return e},e}function B(){var e=(0,C._)(["\n  fragment DeploymentsDeployOptionsAuthzRepl on Repl {\n    id\n    authorizations {\n      editDeploymentSecrets {\n        isAuthorized\n        message\n      }\n      editSecrets {\n        isAuthorized\n        message\n      }\n      editDeploymentSubdomain(provider: $provider) {\n        isAuthorized\n        message\n      }\n    }\n  }\n"]);return B=function(){return e},e}function L(){var e=(0,C._)(["\n  mutation DeployOptionsToggleSecretSyncing($input: ToggleSyncingSecretInput!) {\n    toggleSyncingSecret(input: $input) {\n      __typename\n      ... on HostingDeployment {\n        id\n        ignoredSecrets\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return L=function(){return e},e}function U(){var e=(0,C._)(["\n  query DeploymentsDeployOptions($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n"]);return U=function(){return e},e}function H(){var e=(0,C._)(["\n  query DeploymentsDeployOptionsAuthz(\n    $replId: String!\n    $provider: HostingBuildProvider!\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...DeploymentsDeployOptionsAuthzRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return H=function(){return e},e}var F={},q=(0,E.gql)(N()),z=(0,E.gql)(B());(0,E.gql)(L());var G=(0,E.gql)(U(),q);function W(e){var t=(0,D._)({},F,e);return A.useQuery(G,t)}var K=(0,E.gql)(H(),z);function Y(e){var t=(0,D._)({},F,e);return A.useQuery(K,t)}e.s(["DeploymentsDeployOptionsDeploymentFragmentDoc",()=>q,"useDeploymentsDeployOptionsAuthzQuery",()=>Y,"useDeploymentsDeployOptionsQuery",()=>W],664219);var Z=e.i(64386),$=e.i(913965);function X(e){return(0,a.jsxs)($.default,(0,Z._)((0,D._)({},e),{children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_7378_478)",children:[(0,a.jsx)("path",{fill:"#E01E5A",d:"M5.14 15.118a2.492 2.492 0 0 1-2.494 2.495A2.492 2.492 0 0 1 .15 15.118a2.492 2.492 0 0 1 2.495-2.494H5.14v2.494Zm1.247 0a2.492 2.492 0 0 1 2.495-2.494 2.492 2.492 0 0 1 2.494 2.494v6.236a2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495v-6.236Z"}),(0,a.jsx)("path",{fill:"#36C5F0",d:"M8.882 5.102a2.492 2.492 0 0 1-2.495-2.494A2.492 2.492 0 0 1 8.882.113a2.492 2.492 0 0 1 2.494 2.495v2.494H8.882Zm0 1.267a2.492 2.492 0 0 1 2.494 2.494 2.492 2.492 0 0 1-2.494 2.495H2.627A2.492 2.492 0 0 1 .132 8.863a2.492 2.492 0 0 1 2.495-2.494h6.255Z"}),(0,a.jsx)("path",{fill:"#2EB67D",d:"M18.879 8.863a2.492 2.492 0 0 1 2.494-2.494 2.492 2.492 0 0 1 2.495 2.494 2.492 2.492 0 0 1-2.495 2.495H18.88V8.863Zm-1.248 0a2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495V2.608A2.492 2.492 0 0 1 15.138.113a2.492 2.492 0 0 1 2.494 2.495v6.255Z"}),(0,a.jsx)("path",{fill:"#ECB22E",d:"M15.137 18.86a2.492 2.492 0 0 1 2.494 2.494 2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495V18.86h2.495Zm0-1.247a2.492 2.492 0 0 1-2.495-2.495 2.492 2.492 0 0 1 2.495-2.494h6.255a2.492 2.492 0 0 1 2.495 2.494 2.492 2.492 0 0 1-2.495 2.495h-6.255Z"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_7378_478",children:(0,a.jsx)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}e.s(["default",()=>X],409049);var Q=e.i(368964),J=e.i(58261),ee=e.i(207237);function et(){var e=(0,J.useConnectorContext)(),t=e.connections,n=e.loading,r=(0,ee.default)(),i=t.find(function(e){var t;return e.connectorName===Q.ConnectorName.Stripe&&"development"===e.environment&&(null==(t=e.repls)?void 0:t.some(function(e){return e.id===r}))}),a=t.find(function(e){var t;return e.connectorName===Q.ConnectorName.Stripe&&"production"===e.environment&&(null==(t=e.repls)?void 0:t.some(function(e){return e.id===r}))});return{hasStripeSandboxConnection:!!i,hasStripeConnection:!!a,stripeConnection:a,stripeSandboxConnection:i,loading:n}}function en(e){var t=e.recommendedProvider,n=e.defaultAutoscaleConfiguration,r=e.defaultRvmMachineConfiguration;switch(t){case Q.HostingBuildProvider.CloudRun:case Q.HostingBuildProvider.AzureContainerApp:return n;case Q.HostingBuildProvider.Gce:case Q.HostingBuildProvider.AzureVm:return r;default:return}}e.s(["useStripeConnection",()=>et],479373),e.s(["getRecommendedProviderMachineConfiguration",()=>en],365692);var er=e.i(379334),ei=e.i(392079);function ea(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).provider,t=(0,o.useCallback)(function(e){var t,n,r=e.provider,i=(null==(n=window)||null==(t=n.location)?void 0:t.hostname)!=="replit.com";return(0,ei.getProviderInternalDomain)({provider:r,flaggedInternalDomain:er.DEPLOYMENTS_DEFAULT_DOMAIN,isStaging:i})},[]);return{internalDomain:(0,o.useMemo)(function(){return e?t({provider:e}):void 0},[t,e]),getInternalDomain:t,isShowingFallback:!1,fallbackDomain:void 0}}e.s(["useProviderInternalDomain",()=>ea],777373);var eo=e.i(530658);function es(){return(0,a.jsxs)(g.Text,{variant:"small",color:"dimmest",children:["Configure how your production database is created and populated when you publish."," ",(0,a.jsx)("a",{target:"_blank",href:"https://docs.replit.com/cloud-services/storage-and-databases/production-databases",children:"Learn more"})]})}var el=e.i(428596),eu=e.i(127227);function ec(e){var t=e.value,n=e.setValue,r=e.disabled,i=e.reason,o=(0,el.useIdSeed)()("createNeonProductionDatabase");return(0,a.jsxs)(x.View,{row:!0,gap:8,align:"start",children:[(0,a.jsx)(eu.Checkbox,{id:o,checked:t,disabled:r,onChange:n,"aria-label":"Create production database"}),(0,a.jsxs)(x.View,{shrink:!0,gap:2,children:[(0,a.jsx)("label",{htmlFor:o,children:(0,a.jsx)(g.Text,{variant:"small",color:"default",children:"Create production database"})}),i?(0,a.jsx)(g.Text,{variant:"small",color:"dimmest",children:i}):null]})]})}function ed(e){var t=e.value,n=e.setValue,r=e.disabled,i=(0,el.useIdSeed)()("pushDevelopmentDatabaseObjects");return(0,a.jsxs)(x.View,{row:!0,gap:8,align:"start",children:[(0,a.jsx)(eu.Checkbox,{id:i,checked:"data"===t,disabled:r,onChange:function(e){return n(e?"data":"schema")},"aria-label":"Copy development data to production database"}),(0,a.jsxs)(x.View,{shrink:!0,gap:2,children:[(0,a.jsx)("label",{htmlFor:i,children:(0,a.jsx)(g.Text,{variant:"small",color:"default",children:"Set up your production database with your current development data"})}),(0,a.jsx)(g.Text,{variant:"small",color:"dimmest",children:"This will initialize your production database with the data and schemas from your development database."})]})]})}function ep(e){var t=e.value,n=e.setValue,r=(0,o.useCallback)(function(e){e?n({createDatabase:!0,pushDevelopmentDatabaseObjects:"schema"}):n({createDatabase:!1,pushDevelopmentDatabaseObjects:null})},[n]),i=(0,o.useCallback)(function(e){return t.createDatabase&&n((0,Z._)((0,D._)({},t),{pushDevelopmentDatabaseObjects:e}))},[n,t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec,{value:t.createDatabase,setValue:r,disabled:!1}),t.createDatabase&&(0,a.jsx)(ed,{value:t.pushDevelopmentDatabaseObjects,setValue:i})]})}function ef(e){var t=e.value,n=e.setValue,r=e.reason;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec,{value:!0,reason:r,disabled:!0}),(0,a.jsx)(ed,{value:t.pushDevelopmentDatabaseObjects,setValue:function(e){return n((0,Z._)((0,D._)({},t),{pushDevelopmentDatabaseObjects:e}))}})]})}function em(e){var t=e.value,n=e.setValue,r=e.disabled,i=(0,el.useIdSeed)()("overwriteData");return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(x.View,{row:!0,gap:8,align:"start",children:[(0,a.jsx)(eu.Checkbox,{id:i,checked:"overwriteData"===t,disabled:r,onChange:function(e){return n(e?"overwriteData":null)},"aria-label":"Copy development database to production database"}),(0,a.jsxs)(x.View,{shrink:!0,gap:2,children:[(0,a.jsx)("label",{htmlFor:i,children:(0,a.jsx)(g.Text,{variant:"small",multiline:!1,children:"Copy your development database to production database"})}),(0,a.jsxs)(g.Text,{variant:"small",color:"dimmest",children:["This will replace your production database with your development database, overwriting any existing production data. This is a destructive action, but you can always restore your production database,"," ",(0,a.jsx)("a",{href:"https://docs.replit.com/cloud-services/storage-and-databases/sql-database#restore-tool",target:"_blank",children:"learn more."})]})]})]})})}function eh(e){var t=e.value,n=e.setValue;return(0,a.jsx)(em,{value:t.pushDevelopmentDatabaseObjects,setValue:function(e){return n({createDatabase:!0,pushDevelopmentDatabaseObjects:e})}})}var eg=e.i(416298),ev=e.i(396776);function ex(e){var t=e.value,n=e.reason;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ev.StatusBanner,{colorway:"warning",text:n,icon:(0,a.jsx)(eg.default,{})}),(0,a.jsx)(ec,{value:t.createDatabase,disabled:!0})]})}function ey(e){var t=e.state;switch(t.$case){case"noProdDbAllowed":return(0,a.jsx)(ex,{value:t.value,reason:t.reason});case"createProdDbIfDevData":return(0,a.jsx)(ef,{value:t.value,setValue:t.setValue,reason:t.reason});case"canCreateProdDb":return(0,a.jsx)(ep,{value:t.value,setValue:t.setValue});case"existingProdDb":return(0,a.jsx)(eh,{value:t.value,setValue:t.setValue});default:(0,p.default)(t)}}var eb=e.i(992785);function eS(e){var t=(0,eo._)((0,o.useState)(e),2),n=t[0],r=t[1],i=(0,o.useRef)(e);return(0,o.useEffect)(function(){(0,eb.default)(i.current,e)||(i.current=e,r(e))},[e]),[n,r]}var e_=e.i(965153);function ew(e){var t=e.state,n=(0,eo._)(eS("noProdDbAllowed"===t.$case?!!t.forceExpandToggle:!0===t.value.createDatabase),2),r=n[0],i=n[1];return(0,a.jsx)(e_.AccordionItem,{headerContent:(0,a.jsx)(x.View,{row:!0,gap:8,align:"center",children:(0,a.jsx)(g.Text,{children:"Production database settings"})}),expanded:r,onClick:function(){return i(!r)},children:(0,a.jsxs)(x.View,{gap:8,px:4,pb:6,children:[(0,a.jsx)(es,{}),(0,a.jsx)(ey,{state:t})]})})}function ej(e){var t=e.state,n=(0,eo._)(eS("noProdDbAllowed"===t.$case&&!!t.forceExpandToggle),2),r=n[0],i=n[1];return"noProdDbAllowed"!==t.$case||t.forceExpandToggle?(0,a.jsx)(e_.AccordionItem,{headerContent:(0,a.jsx)(x.View,{row:!0,gap:8,align:"center",children:(0,a.jsx)(g.Text,{children:"Production database settings"})}),expanded:r,onClick:function(){return i(!r)},children:(0,a.jsxs)(m.ShadesSurface,{p:4,br:"container",gap:12,children:[(0,a.jsx)(es,{}),(0,a.jsx)(ey,{state:t})]})}):null}e.s(["CreateNeonProductionDatabaseToggleSection",()=>ew,"SuggestDeployCreateNeonProductionDatabaseToggleSection",()=>ej],332822);var eT=e.i(927158);function ek(e){var t=new URL(e.connectionString.replace("postgres://","https://").replace("postgresql://","https://"));return t.pathname="/".concat(e.databaseName),t.search="?sslmode=require",t.toString().replace("https://","postgresql://")}e.s(["normalizeConnectionString",()=>ek],788401);var eD=function(e){var t=e.connectionString,n=e.skip,a=void 0!==n&&n,s=(0,eo._)((0,o.useState)([]),2),l=s[0],u=s[1],c=(0,eo._)((0,o.useState)(!1),2),d=c[0],p=c[1],f=(0,eT.usePid2Callback)(function(e){return function(){return(0,r._)(function(){var n;return(0,i._)(this,function(r){switch(r.label){case 0:if(a)return[2];return p(!0),[4,e.database.getTables.rpc({connectionString:t})];case 1:if(!(n=r.sent()).ok)return p(!1),[2];return u(n.payload.tables),p(!1),[2]}})})()}},[t,a]);return(0,o.useEffect)(function(){f&&f()},[f]),{tables:l,loading:d,refetch:f}},eC=function(e){var t=e.connectionString,n=e.skip,a=void 0!==n&&n,s=(0,eo._)((0,o.useState)(null),2),l=s[0],u=s[1],c=(0,eo._)((0,o.useState)(!1),2),d=c[0],p=c[1],f=(0,eT.usePid2Callback)(function(e){return function(){return(0,r._)(function(){var n;return(0,i._)(this,function(r){switch(r.label){case 0:if(a)return[2];return p(!0),[4,e.database.getPgMajorVersion.rpc({connectionString:t})];case 1:if(!(n=r.sent()).ok)return p(!1),[2];return u(n.payload.majorVersion),p(!1),[2]}})})()}},[t,a]);return(0,o.useEffect)(function(){!a&&f&&f()},[f,a]),{majorVersion:l,loading:d,refetch:f}},eE=function(e){var t=(0,eo._)((0,o.useState)(0),2),n=t[0],a=t[1],s=(0,eo._)((0,o.useState)(!1),2),l=s[0],u=s[1],c=(0,eo._)((0,o.useState)(null),2),d=c[0],p=c[1],f="neon"===e.kind?ek(e):e.connectionString,m=(0,eT.usePid2Callback)(function(t){return function(){return(0,r._)(function(){var n;return(0,i._)(this,function(r){switch(r.label){case 0:if("neon"===e.kind&&e.isFrozen)return a(0),p("Database is frozen"),u(!1),[2];return u(!0),p(null),[4,t.database.getDatabaseSize.rpc({connectionString:f})];case 1:if(!(n=r.sent()).ok)return u(!1),p(n.payload.message),a(0),[2];return a(n.payload.size),p(null),u(!1),[2]}})})()}},[f,e]);return(0,o.useEffect)(function(){m&&m()},[m]),{databaseSize:n,loading:l,error:d,refetch:m}};e.s(["useGetDatabaseSize",()=>eE,"useGetPgMajorVersion",()=>eC,"useGetTables",()=>eD],832550);var eA=function(e){return{$case:"noProdDbAllowed",defaultValue:{createDatabase:!1,pushDevelopmentDatabaseObjects:null},reason:e.reason,forceExpandToggle:e.forceExpandToggle}},eR=function(e){var t=e.reason,n=e.createDatabase;return{$case:"createProdDbIfDevData",defaultValue:{createDatabase:null!=n?n:null,pushDevelopmentDatabaseObjects:"schema"},reason:t}};function eI(e){var t,n=e.isRedeploy,r=e.neonDevelopmentDatabase,i=e.neonProductionDatabase,a=e.heliumDevelopmentDatabase,s=e.hasStripeSandboxConnection,l=void 0!==s&&s,u=null!=(t=null==r?void 0:r.connectionString)?t:null==a?void 0:a.connectionString,c=!a&&!!(null==r?void 0:r.isFrozen),d=eC({connectionString:null!=u?u:"",skip:!u||c}),p=d.majorVersion,f=d.loading,m=(0,o.useMemo)(function(){var e,t,o,s,u,d,f,m;return t=(e={hasNeonProductionDatabase:!!i,hasNeonDevelopmentDatabase:!!r,hasHeliumDevelopmentDatabase:!!a,isRedeploy:n,isFrozen:c,pgMajorVersion:p,hasStripeSandboxConnection:l}).hasNeonProductionDatabase,o=e.hasNeonDevelopmentDatabase,s=e.hasHeliumDevelopmentDatabase,u=e.isRedeploy,d=e.isFrozen,f=e.pgMajorVersion,m=e.hasStripeSandboxConnection,d?eA({reason:"Development database is frozen. Address outstanding invoices to unfreeze it.",forceExpandToggle:!0}):null!==f&&16!==f&&17!==f?eA({reason:"Development database is on PostgreSQL version ".concat(f,". Production databases are only supported on PostgreSQL 16 and 17."),forceExpandToggle:!0}):o||s?t?u?{$case:"existingProdDb",defaultValue:{createDatabase:!0,pushDevelopmentDatabaseObjects:null}}:eA({reason:"An existing production database from a previous published app was found. Delete the existing database via the settings tab in the Database pane and create a new one.",forceExpandToggle:!0}):m?eR({reason:"A production database is required for Stripe integration.",createDatabase:!0}):s?eR({reason:"A production database will only be created if you have data in your development database."}):{$case:"canCreateProdDb",defaultValue:{createDatabase:!1,pushDevelopmentDatabaseObjects:null}}:eA({reason:"A development database is required to create a production database. You can create a development database via the Database pane."})},[i,r,a,n,c,p,l]),h=(0,eo._)(eS(m.defaultValue),2),g=h[0],v=h[1];return(0,Z._)((0,D._)({},m),{value:g,setValue:v,loading:f})}e.s(["useCreateNeonProductionDatabaseState",()=>eI],34912);var eP=e.i(963084);function eM(){var e=(0,C._)(["\n  query ReservedVMMachineConfigurations(\n    $provider: HostingMachineConfigurationProvider!\n  ) {\n    hostingMachineConfigurations(input: { provider: $provider }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return eM=function(){return e},e}var eO={},eV=(0,E.gql)(eM(),eP.MachineConfigurationFragmentDoc),eN=e.i(107129),eB=e.i(241703),eL=e.i(416746),eU=e.i(480028),eH=e.i(446530),eF=e.i(6338),eq=e.i(613355),ez=e.i(607278),eG=e.i(751273),eW=(0,eH.cssRecord)({self:[eq.rcss.colWithGap(8)],selfGrow:[eq.rcss.colWithGap(8),eq.rcss.flex.grow(1)],label:[eq.rcss.maxWidth("100%")],labelText:[eq.rcss.flex.growAndShrink(1),{textOverflow:"ellipsis"}],labelTextWarning:[eq.rcss.flex.growAndShrink(1),eq.rcss.color.orangeStrongest,{textOverflow:"ellipsis"}],header:[eq.rcss.display.flex,eq.rcss.flex.row,eq.rcss.justify.spaceBetween,eq.rcss.align.center],labelLoading:[eF.loadingStyle.foregroundPulse(),eq.rcss.width(200),eq.rcss.borderRadius(8)],inputLoading:[eF.loadingStyle.foregroundPulse(),eq.rcss.borderRadius(8)]}),eK=function(e){var t=e.id,n=e.title,r=e.information,i=e.optional,o=e.detail,s=e.warning,l=e.actions,u=e.children,c=e.grow;return(0,a.jsxs)(x.View,{css:void 0!==c&&c?eW.selfGrow:eW.self,children:[(0,a.jsxs)(x.View,{css:eW.header,children:[(0,a.jsxs)(x.View,{tag:"label",htmlFor:t,css:eW.label,row:!0,gap:8,align:"center",children:[(0,a.jsx)(g.Text,{color:"dimmer",multiline:!1,children:n}),(0,a.jsx)(eG.Tooltip,{tooltip:r,children:(0,a.jsx)(eL.default,{color:eU.tokens.foregroundDimmest})}),void 0!==i&&i?(0,a.jsx)(g.Text,{css:eW.labelText,variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null,o?(0,a.jsx)(g.Text,{css:eW.labelText,variant:"small",color:"dimmest",multiline:!1,children:o}):null,s?(0,a.jsx)(g.Text,{css:eW.labelTextWarning,variant:"small",multiline:!1,children:s}):null]}),l?(0,a.jsx)(x.View,{row:!0,gap:4,children:l}):null]}),u]})},eY=function(){return(0,a.jsxs)(x.View,{gap:8,children:[(0,a.jsx)(x.View,{css:eW.header,children:(0,a.jsx)(x.View,{css:eW.labelLoading,row:!0,gap:8,align:"center",children:(0,a.jsx)(g.Text,{color:"dimmer",multiline:!1,children:" "})})}),(0,a.jsx)(x.View,{css:eW.inputLoading,children:(0,a.jsx)(ez.Input,{disabled:!0})})]})};e.s(["LabeledSectionWithHover",()=>eK,"LabeledSectionWithHoverLoading",()=>eY],500179);var eZ=e.i(32995),e$=e.i(686631),eX=e.i(752539),eQ=e.i(761201),eJ=e.i(399344),e0=e.i(161322),e1=e.i(845822),e2=e.i(957789),e5=e.i(589910),e7=e.i(918388),e4=function(e){var t=e.size,n=void 0===t?16:t,r=e.style;return(0,a.jsxs)("svg",{width:n,height:n,style:r,viewBox:"0 0 96 96",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"e399c19f-b68f-429d-b176-18c2117ff73c",x1:"-1032.172",x2:"-1059.213",y1:"145.312",y2:"65.426",gradientTransform:"matrix(1 0 0 -1 1075 158)",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{offset:"0","stop-color":"#114a8b"}),(0,a.jsx)("stop",{offset:"1","stop-color":"#0669bc"})]}),(0,a.jsxs)("linearGradient",{id:"ac2a6fc2-ca48-4327-9a3c-d4dcc3256e15",x1:"-1023.725",x2:"-1029.98",y1:"108.083",y2:"105.968",gradientTransform:"matrix(1 0 0 -1 1075 158)",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{offset:"0","stop-opacity":".3"}),(0,a.jsx)("stop",{offset:".071","stop-opacity":".2"}),(0,a.jsx)("stop",{offset:".321","stop-opacity":".1"}),(0,a.jsx)("stop",{offset:".623","stop-opacity":".05"}),(0,a.jsx)("stop",{offset:"1","stop-opacity":"0"})]}),(0,a.jsxs)("linearGradient",{id:"a7fee970-a784-4bb1-af8d-63d18e5f7db9",x1:"-1027.165",x2:"-997.482",y1:"147.642",y2:"68.561",gradientTransform:"matrix(1 0 0 -1 1075 158)",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{offset:"0","stop-color":"#3ccbf4"}),(0,a.jsx)("stop",{offset:"1","stop-color":"#2892df"})]})]}),(0,a.jsx)("path",{fill:"url(#e399c19f-b68f-429d-b176-18c2117ff73c)",d:"M33.338 6.544h26.038l-27.03 80.087a4.152 4.152 0 0 1-3.933 2.824H8.149a4.145 4.145 0 0 1-3.928-5.47L29.404 9.368a4.152 4.152 0 0 1 3.934-2.825z"}),(0,a.jsx)("path",{fill:"#0078d4",d:"M71.175 60.261h-41.29a1.911 1.911 0 0 0-1.305 3.309l26.532 24.764a4.171 4.171 0 0 0 2.846 1.121h23.38z"}),(0,a.jsx)("path",{fill:"url(#ac2a6fc2-ca48-4327-9a3c-d4dcc3256e15)",d:"M33.338 6.544a4.118 4.118 0 0 0-3.943 2.879L4.252 83.917a4.14 4.14 0 0 0 3.908 5.538h20.787a4.443 4.443 0 0 0 3.41-2.9l5.014-14.777 17.91 16.705a4.237 4.237 0 0 0 2.666.972H81.24L71.024 60.261l-29.781.007L59.47 6.544z"}),(0,a.jsx)("path",{fill:"url(#a7fee970-a784-4bb1-af8d-63d18e5f7db9)",d:"M66.595 9.364a4.145 4.145 0 0 0-3.928-2.82H33.648a4.146 4.146 0 0 1 3.928 2.82l25.184 74.62a4.146 4.146 0 0 1-3.928 5.472h29.02a4.146 4.146 0 0 0 3.927-5.472z"})]})};function e3(e){var t=e.onEditAutoscaleConfig,n=e.defaultMachineConfiguration,r=e.selectedMachineConfiguration,i=e.machineConfigurations,s=e.isAzureDeployment,l=e.isFreeUser,u=(0,o.useMemo)(function(){if(s){var e=(0,e5.getMachineConfigurationBySlug)({slug:null==n?void 0:n.configurationSlug,machineConfigurations:i});if(!e||!n)return;return{vcpu:e.vcpu,memory:e.memory,maxInstances:n.maxInstances}}if(l){var t=(0,e5.getMachineConfigurationBySlug)({slug:null==n?void 0:n.configurationSlug,machineConfigurations:i});if(!t||!n)return;return{vcpu:t.vcpu,memory:t.memory,maxInstances:n.maxInstances}}var a=(0,e5.getMachineConfigurationBySlug)({slug:null==r?void 0:r.configurationSlug,machineConfigurations:i});if(a&&r)return{vcpu:a.vcpu,memory:a.memory,maxInstances:r.maxInstances}},[n,r,i,s,l]),c=3600*(0,e0.useAtomValue)(e2.totalCostAtom)*(e1.AUTOSCALE_ESTIMATED_DAILY_COMPUTE_MINUTES/60/24);if(!u)return null;var d=u.vcpu,p=u.memory,f=u.maxInstances;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x.View,{row:!0,justify:"space-between",align:"center",className:e7.default.borderedContainer,children:[(0,a.jsxs)(g.Text,{children:[s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e4,{style:{position:"relative",top:"2px"}})," -"," "]}):null,d," vCPUs / ",p," GiB RAM / ",f," max"]}),s||l?null:(0,a.jsx)(h.Button,{size:"small",text:"Edit",iconRight:(0,a.jsx)(eX.default,{}),onClick:t})]}),s||l?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x.View,{row:!0,justify:"space-between",children:[(0,a.jsx)(g.Text,{variant:"small",children:"Per machine:"}),(0,a.jsxs)(g.Text,{variant:"small",children:["$",c.toFixed(3),"/hour"]})]}),(0,a.jsxs)(x.View,{row:!0,justify:"space-between",children:[(0,a.jsx)(g.Text,{variant:"small",children:"At max traffic:"}),(0,a.jsxs)(g.Text,{variant:"small",children:["$",(c*f).toFixed(3),"/hour"]})]})]})]})}e.s(["AutoscaleMachineConfiguration2",()=>e3,"AzureLogo",()=>e4],691302);var e8=e.i(508775),e9=e.i(679668),e6=e.i(14428);function te(e){var t=e.selectedItem,n=e.machineConfigurations,r=e.disabled,i=e.onError,s=e.onChange,l=e.onConfirm,u=e.loading,c=(0,eo._)((0,o.useState)(!1),2),d=c[0],p=c[1],f=(0,(0,eJ.useDeploymentCostDetails)().getMachineConfigurationCostDetailsBySlug)(null==t?void 0:t.configurationSlug),m=f.costPerHour,v=f.costPerMonth,y=n&&(null==n?void 0:n.length)>0;if(!t)return(0,a.jsx)(x.View,{className:e6.default.loadingState,children:(0,a.jsx)(ez.Input,{disabled:!0})});var b=(0,e8.isAzureDeploymentConfigurationSlug)(null==t?void 0:t.configurationSlug)?(0,a.jsx)(e4,{}):void 0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x.View,{className:e6.default.selectWrapper,children:[(0,a.jsx)(x.View,{grow:!0,shrink:!0,children:(0,a.jsx)(e9.Select,{"aria-label":"Select machine configuration",className:e6.default.select,initialSelectedItem:{id:t.configurationId,title:t.configurationLabel,icon:b},items:y?Object.values(n).map(function(e){var t=e.id;return{title:e.label,id:t,icon:b}}):[],onChange:function(e){var t=e.id,r=null==n?void 0:n.find(function(e){return e.id===t});if(!r)return void i("An error occurred trying to validate selected machine configuration");var a={configurationId:r.id,configurationLabel:r.label,configurationSlug:r.slug,maxInstances:1};"function"==typeof s&&s(a)},disabled:r})}),(0,a.jsx)(x.View,{shrink:!0,row:!0,gap:2,align:"center",children:(0,a.jsxs)(x.View,{className:e6.default.cost,row:!0,gap:4,children:[(0,a.jsxs)(g.Text,{variant:"subheadDefault",multiline:!1,children:["$",v]}),(0,a.jsx)(g.Text,{color:"dimmer",variant:"small",multiline:!1,children:"per month"}),(0,a.jsxs)(g.Text,{color:"dimmer",variant:"small",multiline:!1,children:["($",m,"/hour)"]})]})})]}),"function"==typeof l?(0,a.jsxs)(x.View,{gap:8,pt:8,children:[(0,a.jsx)(h.Button,{colorway:"primary",text:"Approve and update",iconRight:(0,a.jsx)(eX.default,{}),onClick:function(){p(!0),Promise.resolve(l(t)).catch(function(e){null==i||i(e.message||"Failed to update configuration")}).finally(function(){p(!1)})},loading:void 0!==u&&u,disabled:r||d}),(0,a.jsxs)(g.Text,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,a.jsx)("a",{href:eQ.LINKS_DOCS.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]}):null]})}function tt(e){var t,n,r=e.provider,i=e.onError,a=e.onLoad,s=e.skip,l=function(e){switch(e){case Q.HostingBuildProvider.AzureVm:return Q.HostingBuildProvider.AzureVm;case Q.HostingBuildProvider.AzureContainerApp:return Q.HostingBuildProvider.AzureContainerApp;case Q.HostingBuildProvider.Gce:default:return Q.HostingBuildProvider.Gce}}(r),u=(t={variables:{provider:l},skip:s,onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename?i("Something went wrong"):a&&a(e.hostingMachineConfigurations.results)},onError:function(e){return i(e.message)}},n=(0,D._)({},eO,t),A.useQuery(eV,n)),c=u.data,d=u.loading,p=(null==c?void 0:c.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?c.hostingMachineConfigurations.results:null;return{defaultMachineConfiguration:(0,o.useMemo)(function(){if(p)return function(e){var t=e.machineConfigurations,n=e.provider,r=e.onError;if(t){var i=t.find(function(e){return e.slug===function(e){switch(e.provider){case Q.HostingBuildProvider.AzureVm:return er.AZURE_VM_DEFAULT_MACHINE_CONFIGURATION_SLUG;case Q.HostingBuildProvider.AzureContainerApp:return er.AZURE_CONTAINER_APP_DEFAULT_MACHINE_CONFIGURATION_SLUG;case Q.HostingBuildProvider.Gce:return er.RVM_DEFAULT_MACHINE_CONFIGURATION_SLUG;default:throw Error("Unsupported provider for slug")}}({provider:n})});if(!i)return void r("An error occurred trying to validate default machine configuration");var a=i.id,o=i.slug;return{configurationId:a,configurationLabel:i.label,configurationSlug:o,maxInstances:1}}}({machineConfigurations:p,provider:l,onError:i})},[p,l,i]),machineConfigurations:p,loading:d}}e.s(["MachineConfigurationSelector",()=>te],697859);var tn=function(e){var t=e.type,n=e.initialMachineConfiguration,r=e.onChange,i=e.onConfirm,s=e.onError,l=e.onBack,u=e.provider,c=(0,eo._)((0,o.useState)(n?(0,Z._)((0,D._)({},n),{maxInstances:1}):void 0),2),d=c[0],p=c[1],f=tt({provider:u,onError:s}),m=f.defaultMachineConfiguration,h=f.machineConfigurations,v=f.loading;(0,o.useEffect)(function(){(0,eN.trackDeploymentSectionViewed)({context:eB.Views.AutoscaleMachineConfiguration})},[]),(0,o.useEffect)(function(){if(h&&!d){if(!m)return void s("An error occurred trying to validate default machine configuration2");p(m),"function"==typeof r&&r(m)}},[h,m,d,r,s]);var y=h&&(null==h?void 0:h.length)>0,b=v||!y||"azure_vm"===t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eZ.PaneSection,{maxWidth:!0,children:(0,a.jsx)(e$.ViewBack,{onBack:l})}),(0,a.jsx)(eZ.PaneSection,{maxWidth:!0,children:(0,a.jsxs)(x.View,{gap:16,children:[(0,a.jsxs)(x.View,{gap:4,children:[(0,a.jsx)(g.Text,{variant:"subheadBig",children:"Reserved VM configuration"}),(0,a.jsx)(g.Text,{variant:"small",color:"dimmer",children:"Reserved VM apps are always on and can have a dedicated machine. You are billed for the total number of hours your machines have been running for. The cost per hour changes depending on your machine configuration."})]}),(0,a.jsx)(eK,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app. You can change it at any time.",children:(0,a.jsx)(te,{selectedItem:d,machineConfigurations:h,disabled:b,provider:u,onError:s,onChange:function(e){p((0,Z._)((0,D._)({},e),{maxInstances:1})),r&&r(e)},onConfirm:i,loading:v})})]})})]})};e.s(["ReservedVMMachineConfiguration",()=>tn,"useReservedVmConfigurations",()=>tt],823166);var tr=e.i(167626),ti=e.i(346715),ta=e.i(694773),to=e.i(131141),ts=e.i(967963),tl=e.i(903381),tu=e.i(262664),tc=e.i(424746),td=e.i(483820),tp=e.i(914279),tf=e.i(729678),tm=e.i(331820);function th(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{domainName:e.domainName,contact:{firstName:t.firstName,lastName:t.lastName,companyName:t.companyName||null,address1:t.address1,address2:t.address2||null,city:t.city,state:t.state,zip:t.zip,country:t.country,phone:t.phone,email:t.email},expectedCharge:e.purchasePrice?Math.round(100*e.purchasePrice):0,years:1,isFreeDomain:n}}var tg=e.i(255615),tv=e.i(654647),tx=e.i(178339),ty=e.i(183035),tb=e.i(167392),tS=e.i(602686),t_=e.i(712771),tw=e.i(979530),tj=e.i(672963),tT=e.i(98816);e.i(32967);var tk=e.i(630937),tD=e.i(837605),tC=e.i(399245),tE=e.i(882848),tA=e.i(205158),tR=e.i(754873);function tI(e){var t=e.existsInDev;return e.isAutoSynced?(0,a.jsx)(eG.Tooltip,{tooltip:"This secret is automatically synced to your deployment",children:(0,a.jsx)(x.View,{css:tM.deploymentOnly,children:(0,a.jsx)(tE.default,{})})}):t?(0,a.jsx)(eG.Tooltip,{tooltip:"Syncing has been disabled for this secret",children:(0,a.jsx)(x.View,{css:tM.unsynced,children:(0,a.jsx)(tA.default,{})})}):(0,a.jsx)(eG.Tooltip,{tooltip:"This secret only exists as a deployment secret",children:(0,a.jsx)(x.View,{css:tM.deploymentOnly,children:(0,a.jsx)(tC.default,{})})})}var tP=[eq.rcss.borderRadius(8),eq.rcss.width(32),eq.rcss.height(32),tR.interactive.filled,eq.rcss.justify.center,eq.rcss.align.center],tM=(0,eH.cssRecord)({unsynced:(0,ti._)(tP).concat([eq.rcss.color.orangeStrongest]),deploymentOnly:(0,ti._)(tP).concat([eq.rcss.color.accentPrimaryStrongest])}),tO=e.i(721321),tV=e.i(136540),tN=(0,eH.cssRecord)({input:[eq.rcss.color.greyStrongest],loading:[eF.loadingStyle.backgroundPulse(eU.tokens.backgroundHighest,eU.tokens.backgroundHigher)],error:[eq.rcss.color.accentNegativeDefault]}),tB=function(e){var t=e.id,n=e.value,r=e.loading,i=e.disabled,s=e.onChange,l=e.error,u=e.placeholder,c=e.type,d=void 0===c?"text":c,p=e.onFocus,f=(0,ts.hasCommand)(n),m=(0,o.useId)();return d||(d="text"),(0,a.jsxs)(x.View,{grow:!0,shrink:!0,gap:4,children:[(0,a.jsx)(ez.Input,{id:t,value:!r&&f?n:"",onChange:function(e){return s(e.target.value)},css:r?tN.loading:tN.input,disabled:r||i,"aria-describedby":m,placeholder:r?"":u,type:d,onFocus:p}),l?(0,a.jsx)(x.View,{css:tN.error,"aria-live":"polite","aria-atomic":"true",id:m,children:(0,a.jsx)("span",{children:l})}):null]})},tL=(0,eH.cssRecord)({root:[eq.rcss.rowWithGap(8),eq.rcss.align.center],iconButton:[eq.rcss.height("100%"),eq.rcss.borderRadius(8),{"& button":eq.rcss.height(32)}],keyInput:[eq.rcss.width("40%")],error:[eq.rcss.color.accentNegativeDefault]}),tU=function(e){var t=e.index,n=e.name,r=e.value,i=e.disabled,s=e.updateEnvVarName,l=e.updateEnvVarValue,u=e.removeEnvVar,c=e.otherKeys,d=e.devSecrets,p=e.canEditDevSecretsDisabledMessage,f=e.canEditDeploySecretsDisabledMessage,h=e.ignoredSecrets,v=e.optOutSyncing,y=e.optInSyncing,b=e.syncToWorkspace,S=(0,el.useIdSeed)(),_=(0,eo._)((0,o.useState)(""===n||""===r),2),w=_[0],j=_[1],T=!!(n&&r),k=(0,tT.default)(T),D=(0,tj.default)(function(){D.current&&k.current&&j(!1)},[k]),C=!!(d&&d.has(n)),E=void 0===f,A=C?h.includes(n)?{type:"unsynced",sync:function(){return b(n)}}:{type:"synced",optOut:function(){return v(n)}}:{type:"deploymentOnly"};if(w)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x.View,{css:tL.root,innerRef:D,children:[(0,a.jsx)(x.View,{css:tL.keyInput,children:(0,a.jsx)(ez.Input,{placeholder:"Name",id:"".concat(S,"-name-").concat(t),value:n,onChange:function(e){return s(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&T&&(v(n),j(!1))},disabled:i})}),(0,a.jsx)(x.View,{grow:!0,shrink:!0,children:(0,a.jsx)(ez.Input,{placeholder:"Value",name:"".concat(S,"-value-").concat(t),value:r,onChange:function(e){return l(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&T&&(v(n),j(!1))},disabled:i})}),i?null:(0,a.jsx)(m.ShadesSurface,{css:tL.iconButton,children:(0,a.jsx)(tV.IconButton,{alt:"Add",tooltipBehavior:"hidden",onClick:function(){T?(v(n),j(!1)):(u(),y(n))},children:T?(0,a.jsx)(ty.default,{}):(0,a.jsx)(tS.default,{})})})]}),c.includes(n)?(0,a.jsxs)(g.Text,{variant:"small",css:tL.error,children:['Secret "',n,'" already exists']}):null]});var R=(0,a.jsx)(tI,{existsInDev:C,isAutoSynced:!h.includes(n)&&C});return(0,a.jsxs)(x.View,{css:tL.root,children:[void 0===p?R:null,(0,a.jsx)(tD.SecretKey,{value:n}),(0,a.jsx)(tD.SecretValue,{value:r,canEditDisabledMessage:f}),E?(0,a.jsx)(tk.SecretItemMenu,{onEdit:function(){return j(!0)},onDelete:function(){u(),y(n)},environmentControlState:A}):null]})},tH=function(e){var t,n=e.id,r=e.subdomain,i=e.provider,s=e.deploymentId,l=e.onChange,u=e.onBlur,d=e.updateValidity,p=e.disabled,f=e.canEditDisabledMessage,m=ea({provider:i}),h=m.internalDomain,v=m.isShowingFallback,y=O({variables:{subdomain:r,deploymentId:s},skip:0===r.length}),b=y.data,S=y.loading,_=y.error,w=(null==b?void 0:b.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&b.replitAppSubdomainAvailability.available,j=(null==b?void 0:b.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?b.replitAppSubdomainAvailability.message:null==b||null==(t=b.replitAppSubdomainAvailability)?void 0:t.errorMessage;return((0,o.useEffect)(function(){S||d(w)},[w,S,d]),_)?(0,a.jsx)(ev.StatusBanner,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,a.jsxs)(x.View,{children:[(0,a.jsxs)(x.View,{row:!0,gap:4,align:"center",children:[(0,a.jsx)(x.View,{grow:!0,shrink:!0,children:(0,a.jsx)(eG.Tooltip,{tooltip:f,isDisabled:!p,children:(0,a.jsx)(ez.Input,{id:n,placeholder:"subdomain",value:r,onChange:function(e){return l(e.target.value)},onBlur:u,disabled:p})})}),(0,a.jsx)(g.Text,{multiline:!1,children:h})]}),(0,a.jsxs)(x.View,{row:!0,gap:4,pt:4,align:"center",children:[S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.default,{}),(0,a.jsx)(g.Text,{multiline:!1,children:"Checking availability"})]}):null,w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ty.default,{color:"green"}),(0,a.jsx)(g.Text,{css:[eq.rcss.color.greenDefault],multiline:!1,children:"Available"})]}):null,w||S||!(r.length>0)?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eg.default,{color:"red"}),(0,a.jsx)(g.Text,{css:[eq.rcss.color.redDefault],multiline:!1,children:j})]}),v?(0,a.jsx)(ev.StatusBanner,{colorway:"warning",text:"The ".concat(er.DEPLOYMENTS_DEFAULT_DOMAIN," domain is currently unavailable, please use the ").concat(h," URL above.")}):null]})]})},tF=function(e){var t=e.appType,n=e.onChange,r=(0,el.useIdSeed)();return(0,a.jsx)(tO.ButtonGroup,{name:"deploymentTargetSelector",value:t,onChange:n,row:!0,css:[eq.rcss.width("100%"),eq.rcss.flex.row],children:[{value:Q.DeployHostingBuildAppType.Server,name:"Web Server",description:"ex. an API or website"},{value:Q.DeployHostingBuildAppType.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map(function(e,t){return(0,a.jsx)(x.View,{grow:!0,children:(0,a.jsx)(eG.Tooltip,{tooltip:e.description,children:(0,a.jsx)(tO.ButtonGroupItem,{id:r(e.value),value:e.value,text:e.name})})},t)})})},tq=(0,eH.cssRecord)({root:[eq.rcss.borderRadius(4),eq.rcss.flex.growAndShrink(1),eq.rcss.align.center,eq.rcss.backgroundColor.backgroundHigher],text:[eq.rcss.flex.growAndShrink(1),eq.rcss.truncate],input:[{border:"none",background:"inherit",'&[data-sensitive="true"]':{fontFamily:"text-security-disc"}}]});function tz(e){var t=e.value,n=e.placeholder,r=void 0===n?"Enter your deployment password":n,i=e.onChange,s=e.canEditDisabledMessage,l=e.error,u=(0,eo._)((0,o.useState)(!1),2),c=u[0],d=u[1],p=void 0===s,f=(0,o.useId)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.ShadesSurface,{css:tq.root,p:4,row:!0,gap:4,children:(0,a.jsxs)(x.View,{row:!0,align:"center",children:[i&&p?(0,a.jsx)(ez.Input,{value:t,size:r.length,onChange:function(e){return i(e.target.value)},placeholder:r,css:tq.input,"data-sensitive":t&&!c,"aria-describedby":f}):(0,a.jsx)(g.Text,{multiline:!1,css:tq.text,children:t?(0,a.jsx)(a.Fragment,{children:c?t:"•".repeat(8)}):r}),(0,a.jsx)(tV.IconButton,{alt:"Toggle Secret",tooltipContents:s,tooltipBehavior:p?"hidden":void 0,onClick:function(){return d(!c)},disabled:!p,children:c?(0,a.jsx)(tw.default,{}):(0,a.jsx)(t_.default,{})})]})}),l?(0,a.jsx)(x.View,{css:tN.error,"aria-live":"polite","aria-atomic":"true",id:f,children:(0,a.jsx)("span",{children:l})}):null]})}e.s(["CommandInput",()=>tB,"DeploymentPrivatePasswordInput",()=>tz,"DeploymentTargetSelector",()=>tF,"EnvVarInput",()=>tU,"PrimaryDomainInput",()=>tH],137737);var tG=e.i(721281),tW=e.i(341190),tK=e.i(223808),tY=e.i(11176),tZ=e.i(604963),t$=(0,eH.cssRecord)({self:{ul:{maxHeight:"300px"}},select:[eq.rcss.border()],error:[eq.rcss.color.accentNegativeStronger],button:[eq.rcss.reset.button,eq.rcss.viewStyle,tR.interactive.nofill,eq.rcss.align.center,eq.rcss.display.inlineFlex,{borderColor:tR.interactive.outlined.borderColor}],popover:[eq.rcss.width("max-content"),eq.rcss.overflow("auto"),eq.rcss.p(1),eq.rcss.minWidth(240)],listbox:[eq.rcss.maxHeight(300),eq.rcss.minWidth(300),eq.rcss.overflow("auto")],dropdownItemAndContainer:[eq.rcss.flex.row,eq.rcss.align.center,tR.interactive.listItem,eq.rcss.px(8),eq.rcss.py(4)],selectedTimezoneCode:[eq.rcss.textAlign.left,eq.rcss.rowWithGap(8)],timezoneCode:[eq.rcss.textAlign.left,eq.rcss.rowWithGap(8)],header:[eq.rcss.pt(8),eq.rcss.px(8),eq.rcss.pb(4),eq.rcss.flex.growAndShrink(1),{borderBottom:"1px solid ".concat(eU.tokens.outlineDimmest)}],search:[{borderBottom:"1px solid ".concat(eU.tokens.outlineDimmest)}],searchInput:[eq.rcss.width("100%")],dropdownHeader:[eq.rcss.fontWeight.medium],loading:[eq.rcss.maxWidth(70),eF.loadingStyle.backgroundPulse(eU.tokens.backgroundHighest,eU.tokens.backgroundHigher)]});function tX(e){var t=e.initialTimezone,n=e.onChange,r=e.loading,i=e.error,s=(0,eo._)((0,o.useState)(),2),l=s[0],u=s[1],c=(0,o.useId)();return(0,o.useEffect)(function(){if(!r){if(t&&!l)return void u(t);if(!l&&!t){var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if((0,er.isValidTimezone)(e)){n(e),u(e);return}var i="America/Los_Angeles";n(i),u(i)}}},[n,l,t,r]),(0,a.jsxs)(x.View,{css:t$.self,children:[r||!l?(0,a.jsx)(ez.Input,{css:t$.loading,disabled:!0}):(0,a.jsx)(t7,{selectedTzCode:l,onSelectionChange:function(e){"string"==typeof e&&(n(e),u(e))},css:t$.select}),i?(0,a.jsx)(x.View,{css:t$.error,"aria-live":"polite","aria-atomic":"true",id:c,children:(0,a.jsx)("span",{children:i})}):null]})}var tQ=(0,eH.cssRecord)({self:[t$.dropdownItemAndContainer,eq.rcss.justify.spaceBetween,{backgroundColor:eU.tokens.interactiveBackground}]});function tJ(e){var t=e.title;return(0,a.jsxs)(x.View,{px:8,py:4,justify:"space-between",align:"center",row:!0,gap:8,children:[(0,a.jsx)(x.View,{css:t$.selectedTimezoneCode,align:"center",children:(0,a.jsx)(g.Text,{variant:"text",color:"dimmer",children:t})}),(0,a.jsx)(tb.default,{})]})}function t0(e){var t=e.tzCode,n=e.selected;return(0,a.jsxs)(x.View,{css:n?tQ.self:t$.dropdownItemAndContainer,children:[(0,a.jsx)(x.View,{css:t$.timezoneCode,align:"center",children:(0,a.jsx)(g.Text,{variant:"text",color:n?"default":"dimmer",children:t.replace(/_/g," ").replace(/\//g,", ")})}),(0,a.jsx)(x.View,{align:"center",row:!0,children:n?(0,a.jsx)(ty.default,{size:16}):null})]})}var t1=(0,eH.cssRecord)({self:[t$.button,eq.rcss.align.center,eq.rcss.px(8),eq.rcss.py(4),(0,tG._)({},eq.media.min("mobileMax"),[eq.rcss.rowWithGap(4)])]});function t2(e){return e.toLowerCase().replaceAll("_"," ")}var t5=tY.validSchedulerTimezones.map(function(e){var t=e.value,n=e.abbr,r=e.utc,i=t2(t),a=t2(n),o=r.map(function(e){return{tzCode:e,normalizedUtcValue:t2(e)}});return(0,Z._)((0,D._)({},e),{normalizedValue:i,normalizedAbbr:a,normalizedUtc:o,searchableText:t2([e.value,e.abbr].concat((0,ti._)(e.utc)).join(" "))})});function t7(e){var t=e.selectedTzCode,n=e.onSelectionChange,r=(0,eo._)((0,o.useState)(""),2),i=r[0],s=r[1],l=(0,eo._)((0,o.useState)(tY.validSchedulerTimezones),2),u=l[0],c=l[1],d=(0,eo._)((0,o.useState)(tY.validSchedulerTimezones.find(function(e){return e.utc.includes(t)})),2),p=d[0],f=d[1];(0,o.useEffect)(function(){f(tY.validSchedulerTimezones.find(function(e){return e.utc.includes(t)}))},[t]);var m=(0,tK.default)(function(e){c(function(e){if(!e)return tY.validSchedulerTimezones;var t=t2(e);return t5.map(function(n){var r=0,i=n.searchableText,a=n.normalizedValue,o=n.normalizedAbbr,s=n.normalizedUtc,l=n.utc;if(i.includes(t)){a.includes(t)&&(r+=10/(a.indexOf(t)+1)),o.includes(t)&&(r+=8/(o.indexOf(t)+1));var u=l;return s.some(function(e){return e.normalizedUtcValue.includes(t)})&&(r+=5,e.length>=3&&(u=s.map(function(e){var n=e.tzCode,r=e.normalizedUtcValue;return r.includes(t)?{tzCode:n,utcScore:5/(r.indexOf(t)+1)}:{tzCode:n,utcScore:0}}).sort(function(e,t){return t.utcScore-e.utcScore}).map(function(e){return e.tzCode}))),(0,Z._)((0,D._)({},n),{utc:u,score:r})}return(0,Z._)((0,D._)({},n),{score:0})}).filter(function(e){return e.score>0}).sort(function(e,t){return t.score-e.score})}(e))},100),h=function(e){s(e),m(e)};return(0,a.jsxs)(tx.Select,{onSelectionChange:n,"aria-label":"Timezone Select",children:[p?(0,a.jsx)(tg.Button,{css:t$.button,children:(0,a.jsx)(tJ,{title:p.abbr})}):(0,a.jsx)(eG.Tooltip,{tooltip:"Could not detect valid timezone. Please try again, or contact support.",children:(0,a.jsxs)(tg.Button,{css:t1.self,children:[(0,a.jsx)(g.Text,{color:"dimmer",children:"Select"}),(0,a.jsx)(eL.default,{})]})}),(0,a.jsxs)(tZ.RawPopover,{css:t$.popover,background:"default",placement:"bottom right",children:[(0,a.jsx)(x.View,{css:t$.search,p:8,children:(0,a.jsx)(ez.Input,{css:t$.searchInput,value:i,onChange:function(e){return h(e.target.value)},placeholder:"Search"})}),(0,a.jsx)(tv.ListBox,{css:t$.listbox,children:u.map(function(e){var n=e.value,r=e.abbr,i=e.utc;return(0,a.jsxs)(tv.ListBoxSection,{children:[(0,a.jsx)(tW.Header,{css:t$.header,children:(0,a.jsxs)(g.Text,{variant:"small",color:"dimmest",css:t$.dropdownHeader,children:[n," (",r,")"]})}),i.map(function(e){return(0,a.jsx)(tv.ListBoxItem,{id:e,textValue:e,children:(0,a.jsx)(t0,{tzCode:e,selected:e===t})},e)})]},n)})})]})]})}var t4=e.i(611159),t3=e.i(759239),t8=e.i(986194);e.i(925218);var t9=e.i(802088),t6=e.i(311106),ne=e.i(858248),nt=e.i(709485),nn=function(e){var t,n,a,u,c,d,p,f,m,h,g,v,x,y=e.onDescriptionTranslation,b=e.onExpressionTranslation,S=e.onError,_=(0,o.useRef)(null),w=(0,eo._)((0,o.useState)(!1),2),j=w[0],T=w[1],k=function(e,t){(0,t6.sendSentryError)({error:Error(e),context:"useScheduledMachineConfigurationTranslator"}),S(t||e)},D=(n=(t={onTranslation:function(e,t,n){if(!j&&(_.current&&clearTimeout(_.current),t)){if(!e)return void y("Unable to derive valid translation from description");var r,i=(r=e.match(/`([^`]+)`(?=[^`]*$)/))?r[1]:null;if(!i||!(0,t4.isValidCron)(i))return void y("Unable to derive valid Cron expression from description");y(i),(0,ne.track)(nt.events.DEPLOYMENT_SCHEDULE_TRANSLATION_GENERATED,{type:"scheduleToCronExpression",translation:e,prompt:n})}},onError:function(e){return k(e,"Error translating description")}}).onTranslation,a=t.onError,u=(0,l.useChatter)(),d=(c=(0,eo._)((0,o.useState)(!1),2))[0],p=c[1],m=(f=(0,eo._)((0,o.useState)(null),2))[0],h=f[1],g=(0,o.useRef)(""),v=(0,o.useCallback)(function(e){return(0,r._)(function(){var t;return(0,i._)(this,function(n){switch(n.label){case 0:return p(!0),g.current=e.content,[4,u.sessions.create({sessionType:s.SessionType.SINGLE_USE_SESSION,title:"Cron Schedule Translation"})];case 1:if(!(t=n.sent()).ok)return p(!1),a("Failed to create session"),[2];return h(t.payload),[4,t.payload.appendEvent({kind:"translate",content:e.content,inputTarget:e.inputTarget,outputTarget:e.outputTarget,modelType:s.ModelType.BASIC})];case 2:return n.sent().ok||(p(!1),a("Failed to send translation request")),[2]}})})()},[u.sessions,a]),x=(0,o.useMemo)(function(){return null==m?void 0:m.reduce(nr,"global").result},[m]),(0,t9.useObserver)(x,{next:function(e){(null==e?void 0:e.completed)&&d&&p(!1),(null==e?void 0:e.code)&&n(e.code,e.completed,g.current)}}),{sendMessage:v,loading:d}),C=D.sendMessage,E=D.loading;return(0,o.useEffect)(function(){return function(){_.current&&clearTimeout(_.current)}},[_]),{translateDescriptionToExpression:function(e){return(0,r._)(function(){return(0,i._)(this,function(t){return(_.current&&clearTimeout(_.current),e)?(C({inputTarget:s.TranslationTarget.ENGLISH,outputTarget:s.TranslationTarget.CRON,content:e}),_.current=setTimeout(function(){T(!0),k("Translation timed out")},8e3)):y(""),[2]})})()},translateExpressionToDescription:function(e){if(!e)return void b("");if(!(0,t4.isValidCron)(e))return void b("Invalid cron expression");try{var t=t3.default.toString(e,{verbose:!0});b(t),(0,ne.track)(nt.events.DEPLOYMENT_SCHEDULE_TRANSLATION_GENERATED,{type:"cronExpressionToSchedule",translation:t,prompt:e})}catch(e){k((0,tr._)(e,Error)?e.message:"Failed to translate cron expression","Invalid cron expression")}},loading:E}},nr={direction:"reverse",state:{code:null,completed:!1},debug:{name:"TranslationReducer"},reducer:function(e,t){(0,t8.isKind)(e.contents.contents,"messageEventContents")&&e.sender.type===s.UserType.AI&&(t.code=(0,t8.unkind)(e.contents.contents).content,t.completed=e.state===s.EventState.COMPLETE&&!!t.code)}};function ni(){return(0,a.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.97978 15.6465C2.78451 15.8417 2.78451 16.1583 2.97978 16.3536L7.64644 21.0202C7.8417 21.2155 8.15829 21.2155 8.35355 21.0202C8.54881 20.825 8.54881 20.5084 8.35355 20.3131L4.54044 16.5L9.66666 16.5C9.9428 16.5 10.1667 16.2762 10.1667 16C10.1667 15.7239 9.9428 15.5 9.66666 15.5L4.54044 15.5L8.35355 11.6869C8.54881 11.4916 8.54881 11.1751 8.35355 10.9798C8.15829 10.7845 7.8417 10.7845 7.64644 10.9798L2.97978 15.6465Z",fill:eU.tokens.blurpleStronger}),(0,a.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.3889 12.2661C16.259 11.9113 15.741 11.9113 15.6111 12.2661L14.7182 14.7055C14.675 14.8237 14.577 14.9153 14.4536 14.9531L12.2883 15.6156C11.9044 15.7331 11.9037 16.2592 12.2873 16.3776L14.4544 17.0466C14.5773 17.0846 14.6749 17.1761 14.718 17.2939L15.6111 19.7339C15.741 20.0887 16.259 20.0887 16.3889 19.7339L17.2819 17.2942C17.3251 17.1762 17.4228 17.0846 17.546 17.0468L19.7122 16.381C20.0959 16.263 20.0959 15.737 19.7122 15.619L17.546 14.9532C17.4228 14.9154 17.3251 14.8238 17.2819 14.7058L16.3889 12.2661Z",fill:eU.tokens.blurpleStronger}),(0,a.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M29.0202 15.6465C29.2155 15.8417 29.2155 16.1583 29.0202 16.3536L24.3536 21.0202C24.1583 21.2155 23.8417 21.2155 23.6465 21.0202C23.4512 20.825 23.4512 20.5084 23.6465 20.3131L27.4596 16.5L22.3333 16.5C22.0572 16.5 21.8333 16.2762 21.8333 16C21.8333 15.7239 22.0572 15.5 22.3333 15.5L27.4596 15.5L23.6465 11.6869C23.4512 11.4916 23.4512 11.1751 23.6465 10.9798C23.8417 10.7845 24.1583 10.7845 24.3536 10.9798L29.0202 15.6465Z",fill:eU.tokens.blurpleStronger})]})}var na=eq.container.min(480),no=(0,eH.cssRecord)({cronConfig:[(0,tG._)({},na,[eq.rcss.colWithGap(0),eq.rcss.rowWithGap(8),eq.rcss.align.start])],crontabLabeledInput:[eq.rcss.flex.growAndShrink(1),eq.rcss.maxWidth(128)],translationSwitch:[eq.rcss.mb(4),(0,tG._)({transform:"rotate(90deg)",alignSelf:"flex-start"},na,{transform:"rotate(0deg)",marginBottom:0,paddingTop:30})],translationSwitchIcon:[eq.rcss.height(32),eq.rcss.width(32),eq.rcss.center],timezoneSelect:[eq.rcss.flex.shrink(1),(0,tG._)({minWidth:75},na,{paddingTop:30})]});function ns(e){var t=e.callback,n=e.delay,r=(0,o.useRef)();return(0,o.useEffect)(function(){return function(){r.current&&clearTimeout(r.current)}},[]),{callerFunction:function(e){r.current&&clearTimeout(r.current),r.current=setTimeout(function(){return t(e)},n)}}}function nl(e){var t=e.initialCrontab,n=e.initialTimezone,r=e.externalLoading,i=e.onCrontabChange,a=e.onTimezoneChange,s=(0,eo._)((0,o.useState)(!1),2),l=s[0],u=s[1],c=(0,eo._)((0,o.useState)(null),2),d=c[0],p=c[1],f=(0,eo._)((0,o.useState)(null),2),m=f[0],h=f[1],g=(0,eo._)((0,o.useState)(null!=t?t:null),2),v=g[0],x=g[1],y=(0,eo._)((0,o.useState)(null!=n?n:null),2),b=y[0],S=y[1],_=(0,eo._)((0,o.useState)("scheduleToCronExpression"),2),w=_[0],j=_[1],T=nn({onDescriptionTranslation:function(e){u(!1),x(e),null==i||i(e)},onExpressionTranslation:function(e){u(!1),h(e)},onError:function(e){u(!1),p(e)}}),k=T.translateDescriptionToExpression,D=T.translateExpressionToDescription,C=T.loading,E=ns({callback:function(e){return k(e)},delay:3e3}).callerFunction,A=ns({callback:u,delay:500}).callerFunction,R=C||l||null!=r&&r;return(0,o.useEffect)(function(){if(t&&!m&&!R){j("cronExpressionToSchedule");var e=setTimeout(function(){D(t)},100);return function(){return clearTimeout(e)}}},[t,m,R,D]),{describeSchedule:m,crontab:v,timezone:b,error:d,loading:R,scheduleToCronExpression:"scheduleToCronExpression"===w,cronExpressionToSchedule:"cronExpressionToSchedule"===w,setCrontab:function(e){x(e),null==i||i(e)},setTimezone:function(e){S(e),null==a||a(e)},handleOnInputChanged:function(e,t){switch(t){case"scheduleToCronExpression":h(e);break;case"cronExpressionToSchedule":x(e),null==i||i(e)}(C||l||null!=r&&r)&&u(!1),""!==e&&null!==e&&("cronExpressionToSchedule"===t?D(e):(A(!0),E(e)))},setTranslationType:j}}function nu(e){var t=e.crontab,n=e.timezone,r=e.crontabError,i=e.timezoneError,o=e.cronLoading,s=e.error,l=e.onCronExpressionChange,u=e.onTimezoneChange;return(0,a.jsxs)(x.View,{grow:!0,shrink:!0,pb:16,gap:8,children:[(0,a.jsx)(x.View,{css:no.crontabLabeledInput,children:(0,a.jsx)(eK,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",warning:"".concat(s,". Enter valid Cron expression."),grow:!0,children:(0,a.jsx)(tB,{id:"cronExpression",value:t,placeholder:"* * * * *",loading:o,disabled:!1,onChange:l,error:r})})}),(0,a.jsx)(x.View,{css:no.timezoneSelect,children:(0,a.jsx)(tX,{initialTimezone:n,onChange:u,error:i,loading:o})})]})}function nc(e){var t=e.describeSchedule,n=e.crontab,r=e.timezone,i=e.crontabError,o=e.cronLoading,s=e.timezoneError,l=e.loading,u=void 0!==l&&l,d=e.scheduleToCronExpression,p=e.cronExpressionToSchedule,f=e.onScheduleDescriptionChange,m=e.onCronExpressionChange,h=e.onTimezoneChange,g=e.onScheduleDescriptionFocus,v=e.onCronExpressionFocus;return(0,a.jsxs)(x.View,{css:no.cronConfig,grow:!0,shrink:!0,gap:8,children:[(0,a.jsx)(x.View,{grow:!0,shrink:!0,children:(0,a.jsx)(eK,{id:"schedule",title:"Schedule description",information:"Describe when you want your scheduled deployment to run",grow:!0,children:(0,a.jsx)(tB,{id:"describeSchedule",value:t,placeholder:n?"":"Every day at 3:00 AM",loading:o,disabled:u&&!d,onChange:f,onFocus:g})})}),(0,a.jsx)(x.View,{css:no.translationSwitch,shrink:!0,children:(0,a.jsx)(eG.Tooltip,{tooltip:"When you type, Replit AI will translate between these properties",children:(0,a.jsx)(x.View,{css:no.translationSwitchIcon,children:u?(0,a.jsx)(c.default,{color:eU.tokens.blurpleStronger}):(0,a.jsx)(ni,{})})})}),(0,a.jsx)(x.View,{css:no.crontabLabeledInput,children:(0,a.jsx)(eK,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",grow:!0,children:(0,a.jsx)(tB,{id:"cronExpression",value:n,placeholder:"* * * * *",loading:o,disabled:u&&!p,onChange:m,onFocus:v,error:i})})}),(0,a.jsx)(x.View,{css:no.timezoneSelect,children:(0,a.jsx)(tX,{initialTimezone:r,onChange:h,error:s,loading:o})})]})}e.s(["CronExpressionErrorFallback",()=>nu,"CronExpressionInterface",()=>nc,"useCronExpressionWithTranslation",()=>nl],32144),e.s(["DeploymentInfo",()=>aV,"LabeledSection",()=>aO,"Type",()=>aM],635528);var nd=e.i(87995),np=e.i(613141);function nf(){var e=(0,C._)(["\n  fragment PendingDomainsRepl on Repl {\n    id\n    pendingDomains {\n      domainName\n      status\n      message\n    }\n  }\n"]);return nf=function(){return e},e}function nm(){var e=(0,C._)(["\n  query PendingDomainsQuery($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...PendingDomainsRepl\n      }\n    }\n  }\n  ","\n"]);return nm=function(){return e},e}function nh(){var e=(0,C._)(["\n  subscription PendingDomainsUpdates($replId: String!) {\n    pendingDomainsUpdates(replId: $replId) {\n      id\n      ...PendingDomainsRepl\n    }\n  }\n  ","\n"]);return nh=function(){return e},e}var ng={},nv=(0,E.gql)(nf()),nx=(0,E.gql)(nm(),nv);function ny(e){var t=(0,D._)({},ng,e);return A.useQuery(nx,t)}var nb=(0,E.gql)(nh(),nv);function nS(e){var t=(0,D._)({},ng,e);return np.useSubscription(nb,t)}function n_(){var e=(0,C._)(["\n  fragment DomainItemDnsRecord on DnsRecord {\n    id\n    answer\n    type\n    ttl\n    host\n    isProtected\n  }\n"]);return n_=function(){return e},e}function nw(){var e=(0,C._)(["\n  fragment DomainItem on Domain {\n    id\n    status\n    state\n    domain\n    managed\n    timeCreated\n    purchaseDate\n    autorenew\n    registrantEmailVerified\n    dnsRecords {\n      id\n      ...DomainItemDnsRecord\n    }\n    user {\n      id\n    }\n  }\n  ","\n"]);return nw=function(){return e},e}function nj(){var e=(0,C._)(["\n  mutation CreateDnsRecord($input: CreateDnsRecordInput!) {\n    createDnsRecord(input: $input) {\n      ... on Error {\n        message\n      }\n      ... on CreateDnsRecordOutput {\n        domain {\n          id\n          ...DomainItem\n        }\n      }\n    }\n  }\n  ","\n"]);return nj=function(){return e},e}function nT(){var e=(0,C._)(["\n  mutation DeleteDnsRecord($input: DeleteDnsRecordInput!) {\n    deleteDnsRecord(input: $input) {\n      ... on Error {\n        message\n      }\n      ... on DeleteDnsRecordOutput {\n        domain {\n          id\n          ...DomainItem\n        }\n      }\n    }\n  }\n  ","\n"]);return nT=function(){return e},e}function nk(){var e=(0,C._)(["\n  mutation HostingDeploymentsUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains2 {\n          id\n        }\n        repl {\n          ...PendingDomainsRepl\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return nk=function(){return e},e}function nD(){var e=(0,C._)(["\n  mutation VerifyDomain($input: VerifyDomainInput!) {\n    verifyDomain(input: $input) {\n      ... on Domain {\n        id\n        state\n      }\n    }\n  }\n"]);return nD=function(){return e},e}function nC(){var e=(0,C._)(["\n  mutation setShouldDomainAutoRenew($input: SetShouldDomainAutoRenewInput!) {\n    setShouldDomainAutoRenew(input: $input) {\n      ... on Error {\n        message\n      }\n      ... on SetShouldDomainAutoRenewResult {\n        domain {\n          id\n          ...DomainItem\n        }\n      }\n    }\n  }\n  ","\n"]);return nC=function(){return e},e}e.s(["PendingDomainsReplFragmentDoc",()=>nv,"usePendingDomainsQueryQuery",()=>ny,"usePendingDomainsUpdatesSubscription",()=>nS],680250);var nE={},nA=(0,E.gql)(n_()),nR=(0,E.gql)(nw(),nA),nI=(0,E.gql)(nj(),nR);function nP(e){var t=(0,D._)({},nE,e);return V.useMutation(nI,t)}var nM=(0,E.gql)(nT(),nR);function nO(e){var t=(0,D._)({},nE,e);return V.useMutation(nM,t)}var nV=(0,E.gql)(nk(),nv);function nN(e){var t=(0,D._)({},nE,e);return V.useMutation(nV,t)}var nB=(0,E.gql)(nD());function nL(e){var t=(0,D._)({},nE,e);return V.useMutation(nB,t)}var nU=(0,E.gql)(nC(),nR);function nH(e){var t=(0,D._)({},nE,e);return V.useMutation(nU,t)}function nF(){var e=(0,C._)(["\n  fragment Domains2Repl on Repl {\n    id\n    org {\n      id\n    }\n  }\n"]);return nF=function(){return e},e}function nq(){var e=(0,C._)(["\n  fragment HostingDeploymentDomainsHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      title\n      apexProxy\n    }\n    domains2 {\n      id\n      ...DomainItem\n      whois @include(if: $isGlowup) {\n        registrar\n        creationDate\n        expiryDate\n      }\n      currentDnsRecords @include(if: $isGlowup) {\n        A\n        TXT\n      }\n      renewalPriceCents @include(if: $isGlowup)\n    }\n  }\n  ","\n"]);return nq=function(){return e},e}function nz(){var e=(0,C._)(["\n  query Domains2Repl($id: String!) {\n    getRepl(id: $id) {\n      ...Domains2Repl\n    }\n  }\n  ","\n"]);return nz=function(){return e},e}function nG(){var e=(0,C._)(["\n  query HostingDeploymentDomains($id: String!, $isGlowup: Boolean!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return nG=function(){return e},e}function nW(){var e=(0,C._)(["\n  mutation LinkHostingDeploymentDomain(\n    $input: LinkHostingDeploymentDomainInput!\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains2 {\n          ...DomainItem\n        }\n      }\n    }\n  }\n  ","\n"]);return nW=function(){return e},e}e.s(["DomainItemFragmentDoc",()=>nR,"useCreateDnsRecordMutation",()=>nP,"useDeleteDnsRecordMutation",()=>nO,"useHostingDeploymentsUnlinkDomainMutation",()=>nN,"useSetShouldDomainAutoRenewMutation",()=>nH,"useVerifyDomainMutation",()=>nL],713547);var nK={},nY=(0,E.gql)(nF()),nZ=(0,E.gql)(nq(),nR),n$=(0,E.gql)(nz(),nY);function nX(e){var t=(0,D._)({},nK,e);return A.useQuery(n$,t)}var nQ=(0,E.gql)(nG(),nZ);function nJ(e){var t=(0,D._)({},nK,e);return A.useQuery(nQ,t)}function n0(e){var t=(0,D._)({},nK,e);return R.useLazyQuery(nQ,t)}var n1=(0,E.gql)(nW(),nR);function n2(e){var t=(0,D._)({},nK,e);return V.useMutation(n1,t)}function n5(){var e=(0,C._)(["\n  fragment DeploymentSettingsAuthorizations on ReplAuthorizations {\n    addCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteDeployment {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentStatus(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentTier(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return n5=function(){return e},e}function n7(){var e=(0,C._)(["\n  query HostingDeploymentSettings($id: String!, $isGlowup: Boolean!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n        repl {\n          id\n          org {\n            id\n          }\n        }\n        currentBuild {\n          id\n          provider\n          suspendedReason\n          machineConfiguration {\n            ...MachineConfiguration\n          }\n          machineJob {\n            ... on HostingBuildMachineJob {\n              failureNotifications\n            }\n          }\n          envVars {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return n7=function(){return e},e}function n4(){var e=(0,C._)(["\n  query HostingDeploymentSettingsAuthz(\n    $replId: String!\n    $provider: HostingBuildProvider!\n  ) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          ...DeploymentSettingsAuthorizations\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return n4=function(){return e},e}e.s(["HostingDeploymentDomainsDocument",()=>nQ,"HostingDeploymentDomainsHostingDeploymentFragmentDoc",()=>nZ,"useDomains2ReplQuery",()=>nX,"useHostingDeploymentDomainsLazyQuery",()=>n0,"useHostingDeploymentDomainsQuery",()=>nJ,"useLinkHostingDeploymentDomainMutation",()=>n2],636567);var n3={},n8=(0,E.gql)(n5()),n9=(0,E.gql)(n7(),nZ,eP.MachineConfigurationFragmentDoc);function n6(e){var t=(0,D._)({},n3,e);return A.useQuery(n9,t)}var re=(0,E.gql)(n4(),n8);function rt(e){var t=(0,D._)({},n3,e);return A.useQuery(re,t)}function rn(e){var t=(0,D._)({},n3,e);return R.useLazyQuery(re,t)}e.s(["useHostingDeploymentSettingsAuthzLazyQuery",()=>rn,"useHostingDeploymentSettingsAuthzQuery",()=>rt,"useHostingDeploymentSettingsQuery",()=>n6],358637);var rr=e.i(641555),ri=e.i(995691),ra=e.i(40916),ro=e.i(327516);e.s(["formatDistance",()=>ro.default],182492);var ro=ro,rs=e.i(628251);function rl(e,t,n){var r,i,a,o,s=function(e,t,n){if(n&&!n.code)throw Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}(e,n.timeZone,n.locale);return s.formatToParts?function(e,t){for(var n=e.formatToParts(t),r=n.length-1;r>=0;--r)if("timeZoneName"===n[r].type)return n[r].value}(s,t):(r=s,i=t,a=r.format(i).replace(/\u200E/g,""),(o=/ [\w-+ ]+$/.exec(a))?o[0].substr(1):"")}var ru={year:0,month:1,day:2,hour:3,minute:4,second:5},rc={};function rd(e,t,n,r,i,a,o){var s=new Date(0);return s.setUTCFullYear(e,t,n),s.setUTCHours(r,i,a,o),s}var rp=/^(Z)$/,rf=/^([+-]\d{2})$/,rm=/^([+-]\d{2}):?(\d{2})$/;function rh(e,t,n){if(!e||(r=rp.exec(e)))return 0;if(r=rf.exec(e))return rv(a=parseInt(r[1],10))?-(36e5*a):NaN;if(r=rm.exec(e)){var r,i,a=parseInt(r[1],10),o=parseInt(r[2],10);return rv(a,o)?(i=36e5*Math.abs(a)+6e4*o,a>0?-i:i):NaN}if(function(e){if(rx[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),rx[e]=!0,!0}catch(e){return!1}}(e)){t=new Date(t||Date.now());var s,l=rg(n?t:rd((s=t).getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),e);return-(n?l:function(e,t,n){var r=e.getTime()-t,i=rg(new Date(r),n);if(t===i)return t;var a=rg(new Date(r-=i-t),n);return i===a?i:Math.max(i,a)}(t,l,e))}return NaN}function rg(e,t){var n,r,i,a,o,s=(o=function(e){if(!rc[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z"));rc[e]="06/25/2014, 00:00:00"===t||"‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00"===t?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return rc[e]}(t)).formatToParts?function(e,t){try{for(var n=e.formatToParts(t),r=[],i=0;i<n.length;i++){var a=ru[n[i].type];a>=0&&(r[a]=parseInt(n[i].value,10))}return r}catch(e){if((0,tr._)(e,RangeError))return[NaN];throw e}}(o,e):(n=o,r=e,i=n.format(r).replace(/\u200E/g,""),[(a=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(i))[3],a[1],a[2],a[4],a[5],a[6]]),l=rd(s[0],s[1]-1,s[2],s[3]%24,s[4],s[5],0).getTime(),u=e.getTime(),c=u%1e3;return l-(u-=c>=0?c:1e3+c)}function rv(e,t){return -23<=e&&e<=23&&(null==t||0<=t&&t<=59)}var rx={};function ry(e,t){var n=e?rh(e,t,!0)/6e4:t.getTimezoneOffset();if(Number.isNaN(n))throw RangeError("Invalid time zone specified: "+e);return n}function rb(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return(e<0?"-":"")+n}function rS(e,t){var n=Math.abs(e);return(e>0?"-":"+")+rb(Math.floor(n/60),2)+(t||"")+rb(Math.floor(n%60),2)}function r_(e,t){return e%60==0?(e>0?"-":"+")+rb(Math.abs(e)/60,2):rS(e,t)}let rw={X:function(e,t,n,r){var i=ry(r.timeZone,r._originalDate||e);if(0===i)return"Z";switch(t){case"X":return r_(i);case"XXXX":case"XX":return rS(i);default:return rS(i,":")}},x:function(e,t,n,r){var i=ry(r.timeZone,r._originalDate||e);switch(t){case"x":return r_(i);case"xxxx":case"xx":return rS(i);default:return rS(i,":")}},O:function(e,t,n,r){var i,a,o,s,l,u=ry(r.timeZone,r._originalDate||e);switch(t){case"O":case"OO":case"OOO":return"GMT"+(a=(i=u)>0?"-":"+",s=Math.floor((o=Math.abs(i))/60),0==(l=o%60)?a+String(s):a+String(s)+":"+rb(l,2));default:return"GMT"+rS(u,":")}},z:function(e,t,n,r){var i=r._originalDate||e;switch(t){case"z":case"zz":case"zzz":return rl("short",i,r);default:return rl("long",i,r)}}};var rj=e.i(119468),rT=e.i(555023),rk=e.i(906695),rD=/^([0-9W+-]+)(T| )(.*)/,rC=/^([0-9W+-]+)(.*)/,rE=/^(\d{2})$/,rA=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],rR=/^(\d{4})/,rI=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],rP=/^-(\d{2})$/,rM=/^-?(\d{3})$/,rO=/^-?(\d{2})-?(\d{2})$/,rV=/^-?W(\d{2})$/,rN=/^-?W(\d{2})-?(\d{1})$/,rB=/^(\d{2}([.,]\d*)?)$/,rL=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,rU=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,rH=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;function rF(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var i=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}var rq=[31,28,31,30,31,30,31,31,30,31,30,31],rz=[31,29,31,30,31,30,31,31,30,31,30,31];function rG(e){return e%400==0||e%4==0&&e%100!=0}function rW(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;var r=rG(e);if(r&&n>rz[t]||!r&&n>rq[t])return!1}return!0}function rK(e,t,n){return!(t<0)&&!(t>52)&&(null==n||!(n<0)&&!(n>6))}function rY(e,t,n){return(null==e||!(e<0)&&!(e>=25))&&(null==t||!(t<0)&&!(t>=60))&&(null==n||!(n<0)&&!(n>=60))}var rZ=/([xXOz]+)|''|'(''|[^'])+('|$)/g,r$=e.i(887964),rX=e.i(928838),rQ=e.i(68893),rJ=e.i(391222),r0=(0,eH.cssRecord)({name:[eq.rcss.color.foregroundDefault,eq.rcss.fontWeight.medium],itemRight:[eq.rcss.textAlign.right],disabledLog:{cursor:"not-allowed"}}),r1=function(e){var t,n,r=e.onClick,i=(0,tp.useDeploymentMode)(),o=(0,eJ.useDeploymentCurrentBuild)();if(i===rQ.DeploymentMode.Loading||!o)return(0,a.jsx)(c.default,{size:12});var s=o.status,l=o.hasDeployLogs,u=!l;return(0,a.jsx)(x.View,{shrink:!0,row:!0,gap:0,children:(0,a.jsxs)(x.View,{grow:!0,shrink:!0,pr:4,align:"center",row:!0,gap:8,children:[(0,a.jsx)(rJ.DeploymentStatusDot,{status:s}),(0,a.jsx)(x.View,{grow:!0,shrink:!0,align:"center",children:(0,a.jsxs)(g.Text,{multiline:!1,children:[(0,a.jsx)("span",{css:r0.name,children:(null!=(n=null==(t=o.user)?void 0:t.displayName)?n:er.DELETED_USER_DISPLAY_NAME)+" "}),(0,rX.getStatusSentenceText)(s,o.suspendedReason)+" ",!function(e){switch(e){case Q.HostingBuildStatus.Building:case Q.HostingBuildStatus.Promoting:case Q.HostingBuildStatus.Running:case Q.HostingBuildStatus.Pending:case Q.HostingBuildStatus.Failed:case Q.HostingBuildStatus.Success:return!0;case Q.HostingBuildStatus.Resuming:case Q.HostingBuildStatus.Suspending:case Q.HostingBuildStatus.Suspended:case Q.HostingBuildStatus.UpdatingTier:return!1}}(s)?null:(0,a.jsx)(eG.Tooltip,{tooltip:function(e,t,n){var r=String(t),i={},a=r.match(rZ);if(a){var o=function(e,t){if(arguments.length<1)throw TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var n=t||{},r=null==n.additionalDigits?2:(0,rT.default)(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw RangeError("additionalDigits must be 0, 1 or 2");if((0,tr._)(e,Date)||(void 0===e?"undefined":(0,rj._)(e))==="object"&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i=function(e){var t,n={},r=rD.exec(e);if(r?(n.date=r[1],t=r[3]):(r=rC.exec(e))?(n.date=r[1],t=r[2]):(n.date=null,t=e),t){var i=rH.exec(t);i?(n.time=t.replace(i[1],""),n.timeZone=i[1].trim()):n.time=t}return n}(e),a=function(e,t){var n,r=rA[t],i=rI[t];if(n=rR.exec(e)||i.exec(e)){var a=n[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(n=rE.exec(e)||r.exec(e)){var o=n[1];return{year:100*parseInt(o,10),restDateString:e.slice(o.length)}}return{year:null}}(i.date,r),o=a.year,s=function(e,t){if(null===t)return null;if(0===e.length)return(a=new Date(0)).setUTCFullYear(t),a;if(n=rP.exec(e))return(a=new Date(0),rW(t,r=parseInt(n[1],10)-1))?(a.setUTCFullYear(t,r),a):new Date(NaN);if(n=rM.exec(e)){var n,r,i,a=new Date(0),o=parseInt(n[1],10);return!function(e,t){if(t<1)return!1;var n=rG(e);return(!n||!(t>366))&&(!!n||!(t>365))}(t,o)?new Date(NaN):(a.setUTCFullYear(t,0,o),a)}if(n=rO.exec(e)){a=new Date(0),r=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return rW(t,r,s)?(a.setUTCFullYear(t,r,s),a):new Date(NaN)}if(n=rV.exec(e))return rK(t,i=parseInt(n[1],10)-1)?rF(t,i):new Date(NaN);if(n=rN.exec(e)){i=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return rK(t,i,l)?rF(t,i,l):new Date(NaN)}return null}(a.restDateString,o);if(isNaN(s)||!s)return new Date(NaN);var l,u=s.getTime(),c=0;if(i.time&&isNaN(c=function(e){if(t=rB.exec(e))return rY(n=parseFloat(t[1].replace(",",".")))?n%24*36e5:NaN;if(t=rL.exec(e))return rY(n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")))?n%24*36e5+6e4*r:NaN;if(t=rU.exec(e)){var t,n=parseInt(t[1],10),r=parseInt(t[2],10),i=parseFloat(t[3].replace(",","."));return rY(n,r,i)?n%24*36e5+6e4*r+1e3*i:NaN}return null}(i.time)))return new Date(NaN);if(i.timeZone||n.timeZone){if(isNaN(l=rh(i.timeZone||n.timeZone,new Date(u+c))))return new Date(NaN)}else l=(0,rk.default)(new Date(u+c)),l=(0,rk.default)(new Date(u+c+l));return new Date(u+c+l)}(e,i);r=a.reduce(function(e,t){if("'"===t[0])return e;var n=e.indexOf(t),r="'"===e[n-1],a=e.replace(t,"'"+rw[t[0]](o,t,null,i)+"'");return r?a.substring(0,n-1)+a.substring(n+1):a},r)}return(0,rs.default)(e,r,i)}(new Date(o.timeCreated),"MMMM do, Y 'at' h:m aa z"),maxWidth:250,children:function(e,t){return(0,a.jsx)("span",(0,Z._)((0,D._)({},e),{ref:t,children:(0,ro.default)(new Date(o.timeCreated),Date.now(),{addSuffix:!0})}))}})]})}),(0,a.jsx)(x.View,{css:r0.itemRight,children:(0,a.jsx)(tV.IconButton,{alt:l?"View deploy logs":"Deploy logs expire after 30 days",onClick:r,disabled:u,css:u&&r0.disabledLog,children:(0,a.jsx)(r$.default,{})})})]})})},r2=(t={},(0,tG._)(t,Q.HostingBuildProvider.Gce,"Reserved VM"),(0,tG._)(t,Q.HostingBuildProvider.CloudRun,"Autoscale"),(0,tG._)(t,Q.HostingBuildProvider.Static,"Static"),(0,tG._)(t,Q.HostingBuildProvider.Cron,"Scheduled"),(0,tG._)(t,Q.HostingBuildProvider.AzureVm,"Reserved VM"),(0,tG._)(t,Q.HostingBuildProvider.AzureContainerApp,"Autoscale"),t),r5=e.i(830597),ro=ro,r7=e.i(714165),r4=e.i(624782),r3=e.i(454279),r8=function(e){var t=e.build,n=t.id.slice(0,8);return(0,a.jsx)(eG.Tooltip,{tooltip:t.id,children:n})},r9=(n={},(0,tG._)(n,Q.HostingActivityLogType.Deploy,"published"),(0,tG._)(n,Q.HostingActivityLogType.Rollback,"rolled back"),(0,tG._)(n,Q.HostingActivityLogType.Fail,"failed to publish"),n),r6=function(e){var t=e.type,n=e.expoLaunchInfo;if(n)switch(n.status){case Q.ExpoLaunchStatus.Success:return"published to App Store";case Q.ExpoLaunchStatus.Failure:case Q.ExpoLaunchStatus.Canceled:return"failed to publish to App Store";case Q.ExpoLaunchStatus.New:case Q.ExpoLaunchStatus.InProgress:case Q.ExpoLaunchStatus.ActionRequired:return"publishing to App Store";default:return null}return t in r9?r9[t]:null},ie=function(e){var t,n=e.build,r=null==(t=n.rollbackSourceBuildId)?void 0:t.slice(0,8);return(0,a.jsx)(eG.Tooltip,{tooltip:n.rollbackSourceBuildId,children:(0,a.jsx)(r4.Pill,{iconLeft:(0,a.jsx)(d.default,{}),text:r})})},it=function(e){var t,n,r,i,o,s=e.activityLogItem,l=e.isMobile,u=s.build,c=null!=(o=null==(t=u.user)?void 0:t.displayName)?o:er.DELETED_USER_DISPLAY_NAME,d=new Date(s.expoLaunchInfo&&s.timeCreated?s.timeCreated:u.timeCreated),p=Date.now(),f=(0,ro.default)(d,p,{addSuffix:!0}),m=r6(s);if(!m)return null;var h=u.rollbackSourceBuildId;return(0,a.jsxs)(x.View,{clsx:r3.default.container,pb:4,children:[(0,a.jsxs)(x.View,{row:!0,align:"center",clsx:r3.default.buildIdRow,children:[(0,a.jsx)(x.View,{row:!0,clsx:r3.default.buildIdColumn,children:(0,a.jsx)(r8,{build:u})}),h?(0,a.jsx)("span",{clsx:r3.default.pillSpanMobile,children:(0,a.jsx)(ie,{build:u})}):null]}),(0,a.jsxs)(x.View,{row:!0,align:"center",clsx:r3.default.userRow,children:[(0,a.jsx)(r7.Avatar,{src:(null==(n=u.user)?void 0:n.image)||null,size:l?24:16,username:(null==(r=u.user)?void 0:r.username)||"",fullName:(null==(i=u.user)?void 0:i.fullName)||""}),(0,a.jsx)("span",{clsx:r3.default.displayName,children:c}),(0,a.jsxs)("span",{clsx:r3.default.formattedText,children:[m," ",f]})]}),h?(0,a.jsx)("span",{clsx:r3.default.pillSpan,children:(0,a.jsx)(ie,{build:u})}):null]})};function ir(){var e=(0,C._)(["\n  query DeploymentSuspendedReplOrg($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return ir=function(){return e},e}e.s(["ActivityLogText",()=>it,"ActivityLogTextBuildPill",()=>r8,"RollbackBuildPill",()=>ie],863753);var ii={},ia=(0,E.gql)(ir()),io=e.i(596139),is=(0,eH.cssRecord)({deploymentInfoWrapper:[eq.rcss.flex.growAndShrink(1),eq.rcss.rowWithGap(12),{':has( + [data-history-timeline-items="0"])':{"[data-timeline-line]":{display:"none"}}}],deploymentSuspension:[eq.rcss.flex.growAndShrink(1),eq.rcss.colWithGap(12)]});function il(){var e,t,n,r=(0,ee.default)(),i=(0,eJ.useDeploymentCurrentBuild)(),o=(0,eJ.useDeploymentDeployability)().deployability,s=(e={variables:{replId:r}},t=(0,D._)({},ii,e),A.useQuery(ia,t)).data;if(!i)return null;var l=(null==s?void 0:s.getRepl.__typename)==="Repl"&&(null==(n=s.getRepl.org)?void 0:n.__typename)==="Org"?"Org Settings > Billing":"Account > Subscription",u=o.redeploy.isAuthorized?"You can resume your deployment to make it available once again.":"Navigate to ".concat(l," to resolve."),c="If no action is taken your deployment will be deleted ".concat(er.UBBFailureGracePeriodDays," days after the date it was suspended. For more assistance reach out to support at ");return i.suspendedReason===Q.HostingBuildSuspendedReason.Ubb?(0,a.jsx)(x.View,{css:is.deploymentInfoWrapper,children:(0,a.jsx)(x.View,{css:is.deploymentSuspension,children:(0,a.jsx)(ev.StatusBanner,{icon:(0,a.jsx)(eL.default,{}),text:["Your deployment was suspended due to a billing failure. ".concat(u," ").concat(c),(0,a.jsx)("a",{href:"mailto:support@replit.com",children:(0,a.jsx)("u",{children:"support@replit.com"})},""),"."]})})}):i.suspendedReason===Q.HostingBuildSuspendedReason.SubscriptionRequired?(0,a.jsx)(x.View,{css:is.deploymentInfoWrapper,children:(0,a.jsx)(x.View,{css:is.deploymentSuspension,children:(0,a.jsx)(ev.StatusBanner,{icon:(0,a.jsx)(eL.default,{}),text:["Your deployment was suspended due to requiring an active ".concat(io.corePlanName," membership. ").concat(u," ").concat(c),(0,a.jsx)("a",{href:"mailto:support@replit.com",children:(0,a.jsx)("u",{children:"support@replit.com"})},""),"."]})})}):null}function iu(){var e=(0,C._)(["\n  fragment ExecuteScheduledJobExecution on ScheduledJobExecution {\n    id\n    startedAt\n    endedAt\n    status\n  }\n"]);return iu=function(){return e},e}function ic(){var e=(0,C._)(["\n  mutation ExecuteScheduledJob($deploymentId: String!) {\n    executeScheduledJob(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ExecuteScheduledJobResult {\n        execution {\n          ...ExecuteScheduledJobExecution\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return ic=function(){return e},e}e.s(["DeploymentSuspendedReason",()=>il],368487);var id={},ip=(0,E.gql)(iu()),im=(0,E.gql)(ic(),ip),ih=e.i(819906),ig=e.i(165550),iv=e.i(222342);function ix(e){var t,n,r=e.disabled,i=e.onSuccessfulExecution,s=(0,eJ.useDeploymentId)(),l=(0,eJ.useDeploymentCurrentBuild)(),u=(0,tp.useDeploymentMode)(),d=(0,iv.default)().showError,p=(0,eo._)((0,o.useState)(),2),f=p[0],m=p[1],g=function(e){m(e.message),d(e.message)},v=(0,eo._)((t={onError:g,onCompleted:function(e){var t=e.executeScheduledJob;if("ExecuteScheduledJobResult"===t.__typename){null==i||i(t.execution);return}g(Error("An error occurred while executing the scheduled job"))}},n=(0,D._)({},id,t),V.useMutation(im,n)),2),x=v[0],y=v[1].loading,b=!!(!s||!l||y||f||void 0!==r&&r),S=(null==l?void 0:l.status)===Q.HostingBuildStatus.Success,_=u===rQ.DeploymentMode.Ready,w=!b&&_&&S,j=_?"You must successfully publish your project before being able to run it":"Can't run while published app is ".concat((0,ig.getReadableMode)(u));return(0,a.jsx)(eG.Tooltip,{tooltip:j,isDisabled:w,children:(0,a.jsx)(h.Button,{text:"Run now",iconLeft:y?(0,a.jsx)(c.default,{}):(0,a.jsx)(ih.default,{}),size:"small",disabled:b||!w,onClick:function(){s&&!b&&x({variables:{deploymentId:s}})}})})}e.s(["ExecuteScheduledJobButton",()=>ix],791134);var iy=e.i(629536),ib=e.i(96250),iS=e.i(182409),i_=e.i(252204),iw=e.i(187505),ij=e.i(379846),iT=e.i(71393),ik=(0,o.memo)(function(e){var t=e.isOpen,n=e.onRequestClose,r=e.launchUrl,i=(0,iw.useTrackClick)().trackClick,s=(0,o.useCallback)(function(){n(!1)},[n]),l=(0,o.useCallback)(function(){i({productArea:"publishing",target:"expo_launch_modal_close_button"}),n(!0)},[i,n]);return(0,a.jsx)(ij.EmbedModal,{isOpen:t,onRequestClose:s,maxWidth:1200,maxHeight:"90vh",centered:!0,children:(0,a.jsxs)(m.ShadesSurface,{width:"100%",p:4,gap:4,children:[(0,a.jsx)(x.View,{row:!0,justify:"end",children:(0,a.jsx)(tV.IconButton,{alt:"Close modal",onClick:l,children:(0,a.jsx)(tS.default,{})})}),(0,a.jsx)("iframe",{src:r,title:"Expo Launch",clsx:iT.default.iframe})]})})});ik.displayName="ExpoLaunchModal";var iD=e.i(441329),iC=e.i(332441),iE=e.i(76430),iA=e.i(591895),iR=e.i(698646);function iI(e){var t=e.expoLaunchStateObservable,n=e.performExpoLaunchAction,r=(0,iw.useTrackClick)().trackClick,i=(0,rr.useObservableMemo)(function(){return t.map(function(e){return"modal"===e.state?e.url:null})},[t]),o=(0,rr.useObservableMemo)(function(){return t.map(function(e){return"success"===e.state?e:void 0})},[t]);return o?(0,a.jsx)(iV,{launchState:o}):(0,a.jsxs)(x.View,{pt:8,children:[(0,a.jsx)(iO,{expoLaunchStateObservable:t,performExpoLaunchAction:n}),i?(0,a.jsx)(ik,{isOpen:!0,onRequestClose:function(e){e||r({productArea:"publishing",target:"expo_launch_modal_close_auto"}),n({action:"hideLaunch"})},launchUrl:i}):null]})}var iP="You'll need an active Apple Developer account. After publishing, you can\n        test your app on TestFlight, then submit to App Store review.",iM={icon:(0,a.jsx)(eX.default,{}),text:"Start publishing to the App Store",action:{action:"presentLaunch"},disabled:!1};function iO(e){var t=e.expoLaunchStateObservable,n=e.performExpoLaunchAction,r=(0,iC.useUserAgent)(),i=(0,iD.useIsInBonsaiWebview)(),o=(0,iw.useTrackClick)().trackClick,s=(0,rr.useObservableMemo)(function(){return t.map(function(e){return"error"===e.state?e.message:null})},[t]),l=(0,rr.useObservableMemo)(function(){return t.map(function(e){return"bonsaiUpgradeRequired"===e.state})},[t]),u=(0,rr.useObservableMemo)(function(){return t.map(function(e){var t=e.state;switch(t){case"creatingLaunch":case"waitingForCommit":return{icon:(0,a.jsx)(c.default,{}),text:"Preparing",disabled:!0};case"launchingApp":return{icon:(0,a.jsx)(c.default,{}),text:"Publishing to App Store…",action:{action:"presentLaunch"},disabled:!0};case"deployRequired":return{icon:(0,a.jsx)(iS.default,{}),text:e.republish?"Republish App":"Publish App",action:{action:"deploy"},disabled:!1};case"deployingReplitApp":return{icon:(0,a.jsx)(iS.default,{}),text:"Republish App",disabled:!0};case"agentSessionRequired":return{icon:(0,a.jsx)(ib.default,{}),text:"Ask Agent",action:{action:"createAgentSession"},disabled:!1};case"idle":case"disabled":case"bonsaiUpgradeRequired":case"ready":case"error":case"success":case"modal":case"bonsai":return iM;default:(0,p.default)(t)}})},[t],{default:iM}),d=(0,rr.useObservableMemo)(function(){return t.map(function(e){var t=e.state;switch(t){case"idle":case"disabled":case"bonsaiUpgradeRequired":case"creatingLaunch":case"waitingForCommit":case"ready":case"modal":case"bonsai":case"error":case"success":return iP;case"launchingApp":return i?(0,a.jsxs)(a.Fragment,{children:["Publishing to the App Store, this can take up to 45 minutes. You can continue building with ",iy.AGENT_NAME," while publishing. Allow push notifications to get notified when publishing completes."]}):(0,a.jsxs)(a.Fragment,{children:["Publishing to the App Store, this can take up to 45 minutes. You can continue building with ",iy.AGENT_NAME," while publishing. Install the"," ",(0,a.jsx)("a",{clsx:iR.default.replitAppLink,href:"/mobile",target:"_blank",children:"Replit App"})," ","to get notified when publishing completes."]});case"agentSessionRequired":return"An active chat with Agent is required before publishing to the App Store.";case"deployingReplitApp":case"deployRequired":return"Republish your app to production to enable App Store publishing.";default:(0,p.default)(t)}})},[t,i],{default:iP});return l?(0,a.jsx)(iA.default,{userAgent:r,m:0,feature:"App Store Publishing",noticeText:"A newer version of the Replit app is required to publish to the App Store. Please update to continue."}):(0,a.jsxs)(m.ShadesSurface,{shrink:!0,gap:8,colorShade:"primaryInverted",elevate:"2x",p:8,clsx:iR.default.container,br:!0,children:[(0,a.jsxs)(x.View,{row:!0,gap:8,align:"center",shrink:!0,children:[(0,a.jsx)(iS.default,{clsx:iR.default.deployIcon}),(0,a.jsx)(g.Text,{variant:"subheadDefault",shrink:!0,children:"Ready to publish to the App Store?"})]}),(0,a.jsx)(g.Text,{shrink:!0,children:d}),s?(0,a.jsx)(ev.StatusBanner,{colorway:"negative",text:s}):null,(0,a.jsx)(h.Button,{colorway:"primary",disabled:u.disabled,iconRight:u.icon,text:u.text,loading:u.disabled,onClick:function(){u.action&&(o({productArea:"publishing",target:"expo_launch_button"}),n(u.action))}})]})}function iV(e){var t,n=e.launchState,r=(0,iw.useTrackClick)().trackClick,i=n.appId,o=n.finishedAt,s=n.status,l=n.authedDashboardUrl;return t="SUCCESS"===s?"Published":"Failed to publish",(0,a.jsx)(aO,{label:"App Store",children:(0,a.jsxs)(x.View,{row:!0,gap:12,align:"center",wrap:!0,shrink:!0,children:[(0,a.jsxs)(x.View,{row:!0,gap:4,align:"center",children:[(0,a.jsx)(g.Text,{children:t}),(0,a.jsx)(v.Timestamp,{date:o})]}),"SUCCESS"!==s&&l?(0,a.jsx)(h.Button,{text:"View Logs",variant:"underlined",onClick:function(){window.open(l,"_blank"),r({productArea:"publishing",target:"expo_launch_view_dashboard_button"})},iconRight:(0,a.jsx)(i_.default,{})}):null,(0,a.jsx)(h.Button,{text:"Manage App Store Settings",variant:"underlined",onClick:function(){window.open((0,iE.getAppStoreConnectUrl)(i),"_blank"),r({productArea:"publishing",target:"expo_launch_manage_settings_button"})},iconRight:(0,a.jsx)(i_.default,{})})]})})}function iN(){var e=(0,C._)(["\n  query GetDomainContactForPurchase {\n    getDomainContactForPurchase {\n      hasSavedContact\n      firstName\n      lastName\n      companyName\n      address1\n      address2\n      city\n      state\n      zip\n      country\n      phone\n      email\n    }\n  }\n"]);return iN=function(){return e},e}var iB={},iL=(0,E.gql)(iN()),iU=e.i(138716),iH=e.i(719335),iF=e.i(604999),iq=e.i(703774);e.i(375581);var iz=e.i(169099),iG=e.i(584426);function iW(e){var t=e.initialAddress,n=e.onAddressChange,r=e.onValidationChange,i=(0,eo._)((0,o.useState)(!1),2),s=i[0],l=i[1],u=(0,o.useRef)("");(0,o.useEffect)(function(){var e=JSON.stringify(t);u.current!==e&&(u.current=e,n(t))},[t,n]);var c=(0,o.useCallback)(function(e){var t=e.value.address,i=e.value.name,a=e.value.phone;r&&r(e.complete);var o="",s="";if(i&&(void 0===i?"undefined":(0,rj._)(i))==="object")o=i.first_name||"",s=i.last_name||"";else if("string"==typeof i){var l=i.trim().split(/\s+/);l.length>1?(o=l[0],s=l.slice(1).join(" ")):o=i}var u=(null==t?void 0:t.state)||"",c=(null==t?void 0:t.postal_code)||"",d=(null==t?void 0:t.city)||"",p=u,f=c,m=d;e.complete&&(u.trim()||(p="N/A"),c.trim()||(f="00000"),d.trim()||(m="N/A")),n({firstName:o,lastName:s,address1:(null==t?void 0:t.line1)||"",address2:(null==t?void 0:t.line2)||"",city:m,state:p,zip:f,country:(null==t?void 0:t.country)||"",phone:a||""})},[n,r]),d=(0,o.useMemo)(function(){return{mode:"billing",fields:{phone:"always"},validation:{phone:{required:"always"}},defaultValues:{firstName:t.firstName,lastName:t.lastName,phone:t.phone,address:{line1:t.address1,line2:t.address2,city:t.city,state:t.state,postal_code:t.zip,country:t.country}},display:{name:"split"}}},[t]);return s?(0,a.jsxs)(g.Text,{children:["Something went wrong loading the address form. Please contact us at"," ",(0,a.jsx)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"."]}):(0,a.jsxs)(x.View,{gap:8,children:[(0,a.jsx)(x.View,{style:{display:"none"},children:(0,a.jsx)(iH.PaymentElement,{})}),(0,a.jsx)(iH.AddressElement,{onLoadError:function(){return l(!0)},options:d,onChange:c})]})}function iK(e){var t=(0,iq.useTheme)().isDarkColorScheme,n=t?iz.replitDark:iG.replitLight,r={theme:t?"night":"stripe",variables:{colorPrimary:n.values.global.foregroundDefault,colorBackground:n.values.global.backgroundHigher,colorText:n.values.global.foregroundDefault,colorTextPlaceholder:n.values.global.foregroundDimmest,focusOutline:"2px solid ".concat(n.values.global.accentPrimaryDefault),colorDanger:n.values.global.accentNegativeDefault,colorDangerText:n.values.global.accentNegativeDefault,fontFamily:"'IBM Plex Sans', sans-serif",spacingUnit:"0px",fontSizeBase:eU.values.fontSizeDefault,focusBoxShadow:"0",borderRadius:eU.values.space4,gridRowSpacing:eU.values.space8},rules:{".Input":{boxShadow:"0px",fontSize:eU.values.fontSizeDefault,lineHeight:eU.values.lineHeightDefault,padding:"".concat(eU.values.space4," ").concat(eU.values.space8),outlineOffset:eq.sharedFocusStyles.outlineOffset},".Label":{paddingBottom:eU.values.space4,marginBottom:"0px",fontSize:eU.values.fontSizeSmall,lineHeight:eU.values.lineHeightSmall},".Block":{boxShadow:"0px"},".DropdownItem":{boxShadow:"0px"}}};return(0,a.jsx)(x.View,{children:(0,a.jsx)(iF.default,{options:{appearance:r,mode:"setup",currency:"usd",payment_method_types:["card"]},children:(0,a.jsx)(iW,(0,D._)({},e))})})}var iY=e.i(939562),iZ=e.i(887877),i$=e.i(818503),iX=e.i(795581),iQ=(0,eH.cssRecord)({scrollArea:[{overflowY:"auto",minHeight:0,maxHeight:"100%"}],primaryActionButton:[eq.rcss.py(12),{fontSize:eU.tokens.fontSizeDefault}],root:[eq.rcss.overflow("hidden")],relativeContainer:[{position:"relative",minHeight:0,maxHeight:"100%"}]});function iJ(e){var t,n,r,i=e.selectedDomain,s=e.onSubmit,l=e.onBack,u=e.isSubmitting,d=e.preservedContactInfo,p=e.title,f=e.description,v=e.submitButtonText,y=e.showBackButton,b=(t={fetchPolicy:"network-only",skip:!!d,ssr:!1},n=(0,D._)({},iB,t),A.useQuery(iL,n)),S=b.data,_=b.loading,w=(0,eo._)((0,o.useState)({firstName:"",lastName:"",companyName:"",address1:"",address2:"",city:"",state:"",zip:"",country:"US",phone:"",email:""}),2),j=w[0],T=w[1],k=(0,eo._)((0,o.useState)(!1),2),C=k[0],E=k[1],R=(0,eo._)((0,o.useState)(!1),2),I=R[0],P=R[1];(0,o.useEffect)(function(){if(d)T(d);else if(null==S?void 0:S.getDomainContactForPurchase){var e=S.getDomainContactForPurchase;T({firstName:e.firstName,lastName:e.lastName,companyName:e.companyName||"",address1:e.address1,address2:e.address2||"",city:e.city,state:e.state,zip:e.zip,country:e.country,phone:e.phone,email:e.email})}},[S,d]);var M=function(){V&&s(j)},O=(0,o.useCallback)(function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},[]),V=C&&I,N=(0,o.useCallback)(function(e){T(function(t){return(0,D._)({},t,e)})},[]),B=(0,o.useMemo)(function(){return{firstName:j.firstName||"",lastName:j.lastName||"",address1:j.address1||"",address2:j.address2||"",city:j.city||"",state:j.state||"",zip:j.zip||"",country:j.country||"US",phone:j.phone||""}},[j.firstName,j.lastName,j.address1,j.address2,j.city,j.state,j.zip,j.country,j.phone]);return((0,o.useEffect)(function(){j.email&&P(O(j.email))},[j.email,O]),_)?(0,a.jsxs)(x.View,{align:"center",p:8,children:[(0,a.jsx)(c.default,{size:16}),(0,a.jsx)(g.Text,{children:"Loading your information..."})]}):(0,a.jsxs)(x.View,{p:8,gap:16,css:iQ.root,shrink:!0,children:[(0,a.jsxs)(x.View,{row:!0,gap:8,align:"center",children:[void 0===y||y?(0,a.jsx)(tV.IconButton,{alt:"Go back",onClick:l,children:(0,a.jsx)(iU.default,{})}):null,(0,a.jsx)(g.Header,{level:2,children:void 0===p?"Domain registration contact":p}),(0,a.jsx)(r4.Pill,{colorway:"primary",text:"Beta"})]}),(0,a.jsx)(x.View,{css:iQ.relativeContainer,shrink:!0,children:(0,a.jsxs)(x.View,{css:iQ.scrollArea,gap:16,children:[(0,a.jsx)(x.View,{gap:8,children:(0,a.jsx)(g.Text,{color:"dimmer",children:void 0===f?"This information will be used for WHOIS records and domain registration. You can edit any field below.":f})}),(0,a.jsxs)(iZ.Form,{onSubmit:function(e){e.preventDefault(),M()},children:[(0,a.jsx)(m.ShadesSurface,{p:16,elevate:!1,children:(0,a.jsxs)(x.View,{gap:12,children:[(0,a.jsxs)(iX.TextField,{name:"companyName",children:[(0,a.jsx)(i$.Label,{children:"Company name (optional)"}),(0,a.jsx)(ez.Input,{value:null!=(r=j.companyName)?r:"",onChange:function(e){return T((0,Z._)((0,D._)({},j),{companyName:e.target.value}))},disabled:u})]}),(0,a.jsx)(iK,{initialAddress:B,onAddressChange:N,onValidationChange:E}),(0,a.jsxs)(iX.TextField,{isRequired:!0,name:"email",type:"email",children:[(0,a.jsx)(i$.Label,{children:"Email"}),(0,a.jsx)(ez.Input,{value:j.email,onChange:function(e){var t=e.target.value;T((0,Z._)((0,D._)({},j),{email:t})),P(O(t))},disabled:u}),(0,a.jsx)(iY.FieldError,{})]})]})}),(0,a.jsx)(x.View,{justify:"center",children:(0,a.jsx)(h.Button,{variant:"default",colorway:"positive",type:"submit",loading:u,text:null!=v?v:"Continue with ".concat(i.domainName),disabled:!V||u,css:iQ.primaryActionButton})})]})]})})]})}e.s(["ContactStep",()=>iJ],793203);var i0=e.i(739521);function i1(e){var t=e.isOpen,n=e.selectedDomain,r=e.onSubmit,i=e.onClose,o=e.isSubmitting;return(0,a.jsx)(i0.Modal,{isOpen:t,onRequestClose:i,children:(0,a.jsx)(iJ,{selectedDomain:n,onSubmit:r,onBack:i,isSubmitting:o,preservedContactInfo:null})})}function i2(){var e=(0,C._)(["\n  query SearchForDomain($input: SearchDomainsInput!) {\n    searchDomains(input: $input) {\n      ... on DomainSearchOutput {\n        results {\n          domainName\n          sld\n          tld\n          purchasable\n          premium\n          purchasePrice\n          purchaseType\n          renewalPrice\n          years\n        }\n      }\n    }\n  }\n"]);return i2=function(){return e},e}e.s(["DomainContactModal",()=>i1],295745);var i5={},i7=(0,E.gql)(i2());function i4(e){var t=(0,D._)({},i5,e);return A.useQuery(i7,t)}e.s(["useSearchForDomainQuery",()=>i4],341734);var i3=e.i(232949),i8=e.i(162914);function i9(e){return null==e?"N/A":"$".concat(e.toFixed(2))}function i6(e,t){switch(t.type){case"select_domain":return{step:"contact",selectedDomain:t.payload,contactInfo:null};case"contact_submitted":if(null==e.selectedDomain)throw Error("Selected domain is null");return{step:"confirm",selectedDomain:e.selectedDomain,contactInfo:t.payload,purchaseErrorMessage:null};case"edit_contact":if("confirm"!==e.step)break;return{step:"contact",selectedDomain:e.selectedDomain,contactInfo:e.contactInfo};case"purchase_failed":if(null==e.selectedDomain||"confirm"!==e.step)throw Error("Invalid state for purchase failure");return{step:"confirm",selectedDomain:e.selectedDomain,contactInfo:e.contactInfo,purchaseErrorMessage:t.payload};case"search":return{step:"search",selectedDomain:null,contactInfo:null};case"processing":if(null==e.selectedDomain||"confirm"!==e.step)throw Error("Invalid state for processing");return{step:"processing",selectedDomain:e.selectedDomain,contactInfo:e.contactInfo}}return e}function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{step:"search",selectedDomain:null,contactInfo:null},t=(0,eo._)((0,o.useReducer)(i6,e),2);return{state:t[0],dispatch:t[1]}}e.s(["formatPrice",()=>i9,"useDomainState",()=>ae],828454);var at=e.i(85742),an=e.i(698043),ar=e.i(498540),ai=e.i(792130),aa=(0,eH.cssRecord)({scrollArea:[eq.rcss.maxHeight(350),{display:"flex",flexDirection:"column",overflowY:"auto",paddingBottom:8}],domainResult:[eq.rcss.borderRadius(8),eq.rcss.border({color:eU.tokens.outlineDimmer}),eq.rcss.hover([eq.rcss.border({color:eU.tokens.outlineDefault}),eq.rcss.backgroundColor.accentPrimaryDimmest]),eq.rcss.mb(8),{flexShrink:0}],noResults:[eq.rcss.borderRadius(8),eq.rcss.border({color:eU.tokens.outlineDimmer}),eq.rcss.mb(8)]});function ao(e){var t,n,r,i,s,l,u,c=e.onClaimAndPublish,d=e.disabled,p=void 0!==d&&d,f=e.isPublishing,m=void 0!==f&&f,v=e.isRepublish,y=void 0!==v&&v,b=(0,eo._)((0,o.useState)(null),2),S=b[0],_=b[1],w=(0,eo._)((0,o.useState)(!0),2),j=w[0],T=w[1],k=(0,iw.useTrackClick)().trackClick,D=(n=(t=(0,eo._)((0,o.useState)(""),2))[0],r=t[1],l=(s=i4({variables:{input:{keyword:i=(0,i8.default)(n,500)}},skip:!i})).data,u=s.loading,{searchTerm:n,setSearchTerm:r,qualifyingDomains:((null==l?void 0:l.searchDomains)&&"DomainSearchOutput"===l.searchDomains.__typename?l.searchDomains.results.filter(function(e){return null!=e}):[]).filter(function(e){return null!=e.purchasePrice&&e.purchasePrice<=eQ.FREE_DOMAIN_PRICE_CAP_DOLLARS&&!0===e.purchasable}),debouncedSearchTerm:i,loading:u||n!==i}),C=D.searchTerm,E=D.setSearchTerm,A=D.qualifyingDomains,R=D.debouncedSearchTerm,I=D.loading;(0,o.useEffect)(function(){S&&C!==S.domainName&&(_(null),T(!0))},[C,S]);var P=C.length>0,M=S?y?"Claim and republish":"Claim and publish":y?"Republish":"Publish";return(0,a.jsxs)(x.View,{clsx:ai.default.container,children:[(0,a.jsx)(x.View,{clsx:ai.default.header,children:(0,a.jsxs)(g.Text,{variant:"small",clsx:ai.default.headerText,children:["Claim your free domain up to $",eQ.FREE_DOMAIN_PRICE_CAP_DOLLARS]})}),(0,a.jsx)(x.View,{clsx:ai.default.content,children:(0,a.jsxs)(x.View,{gap:8,children:[(0,a.jsxs)(x.View,{row:!0,gap:8,align:"center",children:[(0,a.jsx)(tE.default,{size:16}),(0,a.jsx)(g.Text,{variant:"small",children:"Search for a domain"})]}),(0,a.jsxs)(an.SearchableListBox,{children:[(0,a.jsx)(ar.SearchField,{placeholder:"Search for a domain...",value:C,onChange:function(e){return E(e)},isDisabled:p||m}),j&&P?(0,a.jsx)(at.ListBox,{css:aa.scrollArea,onAction:function(e){var t=A.find(function(t){return t.domainName===e});t&&(_(t),E(t.domainName),T(!1))},items:A,isLoading:I,renderEmptyState:function(){return I?null:(0,a.jsx)(x.View,{css:aa.noResults,align:"center",justify:"center",p:16,children:(0,a.jsxs)(g.Text,{color:"dimmer",children:['No qualifying domains found for "',R,'"']})})},disabledKeys:p||m?A.map(function(e){return e.domainName}):[],children:function(e){return(0,a.jsxs)(at.BaseListBoxItem,{textValue:"".concat(e.domainName," - ").concat(e.purchasable?"available":"unavailable"," ").concat(e.years>1?"".concat(i9(e.purchasePrice)," for ").concat(e.years," years"):i9(e.purchasePrice)),id:e.domainName,css:aa.domainResult,children:[(0,a.jsxs)(x.View,{gap:4,grow:!0,children:[(0,a.jsxs)(x.View,{row:!0,gap:4,align:"center",children:[(0,a.jsx)(g.Text,{children:e.domainName}),e.purchasable?(0,a.jsx)(x.View,{row:!0,gap:2,align:"center",children:(0,a.jsx)(ty.default,{size:12,color:eU.tokens.accentPositiveDefault})}):null,e.premium?(0,a.jsx)(i3.default,{size:12,color:eU.tokens.accentPrimaryDefault}):null]}),null!=e.renewalPrice&&(0,a.jsx)(g.Text,{variant:"small",color:"dimmer",children:e.years>1?(0,a.jsx)(eG.Tooltip,{tooltip:"Some domains such as .ai must be purchased and renewed in multi-year increments. Your domain will renew every ".concat(e.years," years for the displayed price."),children:(0,a.jsxs)("span",{children:["Renews at ",i9(e.renewalPrice)," ","every ",e.years," years"]})}):(0,a.jsxs)(a.Fragment,{children:["Renews at ",i9(e.renewalPrice),"/yr"]})})]}),(0,a.jsxs)(x.View,{row:!0,gap:8,align:"center",children:[(0,a.jsx)(g.Text,{clsx:ai.default.strikethroughPrice,children:e.years>1?(0,a.jsx)(eG.Tooltip,{tooltip:"Some domains such as .ai must be purchased and renewed in multi-year increments. You will be charged for ".concat(e.years," years up front."),children:(0,a.jsxs)("span",{children:[i9(e.purchasePrice)," for"," ",e.years," years"]})}):i9(e.purchasePrice)}),(0,a.jsx)(g.Text,{clsx:ai.default.freeText,children:"Free"})]})]},e.domainName)}}):null]}),S?(0,a.jsxs)(x.View,{row:!0,gap:4,align:"center",children:[(0,a.jsx)(ty.default,{color:eU.tokens.accentPositiveDefault}),(0,a.jsx)(g.Text,{style:{color:eU.tokens.accentPositiveStrongest},multiline:!1,children:y?"Republish your App to complete domain setup":"Publish your App to complete domain setup"})]}):null]})}),(0,a.jsx)(x.View,{clsx:ai.default.buttonContainer,children:(0,a.jsx)(h.Button,{colorway:"primary",onClick:function(){S?k({productArea:"publishing",target:y?"claim_and_republish_button":"claim_and_publish_button"}):k({productArea:"publishing",target:y?"republish_button":"publish_button"}),c(S)},text:M,iconLeft:(0,a.jsx)(iS.default,{}),disabled:p||m,loading:m,clsx:ai.default.button})})]})}function as(e,t){switch(t.type){case"select_domain":return{step:"domain_selected",selectedDomain:t.payload,contactInfo:null};case"submit_contact":if("domain_selected"!==e.step||null==e.selectedDomain)return e;return{step:"contact_submitted",selectedDomain:e.selectedDomain,contactInfo:t.payload};case"start_deployment":if("contact_submitted"!==e.step||null==e.selectedDomain||null==e.contactInfo)return console.error("Invalid state for deployment start",e),e;return{step:"deploying",selectedDomain:e.selectedDomain,contactInfo:e.contactInfo};case"reset":return{step:"idle",selectedDomain:null,contactInfo:null};default:return e}}function al(){var e=(0,C._)(["\n  query HasFreeDomainCredit {\n    currentUser {\n      id\n      hasFreeDomainCredit\n      isSubscribed\n    }\n  }\n"]);return al=function(){return e},e}e.s(["FreeDomainClaimSection",()=>ao],870078);var au={},ac=(0,E.gql)(al());function ad(e){var t,n,r,i=e.isAzureDeployment,a=e.isOrgRepl,s=(0,r5.useValue)(eJ.hideFreeDomainClaimSectionAtom),l=(0,r5.useSet)(eJ.hideFreeDomainClaimSectionAtom),u=(0,r5.useSet)(eJ.claimedFreeDomainAtom),c=(0,iE.useIsExpoStackWithLaunchEnabled)(),d=(0,eJ.useFreeTierCloudServices)(),p=(t={fetchPolicy:"cache-and-network",ssr:!1},n=(0,D._)({},au,t),A.useQuery(ac,n)),f=p.data,m=p.loading,h=p.refetch;return{showClaimSection:(0,o.useMemo)(function(){if(i||a||c||m)return!1;var e,t,n=null!=(t=null==f||null==(e=f.currentUser)?void 0:e.hasFreeDomainCredit)&&t;return!d&&n&&!s},[i,a,c,m,null==f||null==(r=f.currentUser)?void 0:r.hasFreeDomainCredit,d,s]),loading:m,refetchFreeDomainCredit:h,hideClaimSection:function(e){l(!0),e&&u(e)}}}e.s(["useFreeDomainClaimSection",()=>ad],57354);var ap=e.i(754458),af=e.i(402099),am=e.i(778063),ah=e.i(610357),ag=(0,eH.cssRecord)({qrCodeWrapper:[eq.rcss.borderRadius(4),{backgroundColor:"white"}]}),av=function(e){var t=e.currentBuild,n=e.optimisticDomain,s=(0,iv.default)().showConfirm,l=ea(),u=l.getInternalDomain,c=l.isShowingFallback,d=l.fallbackDomain,f=(0,r5.useSet)(eJ.claimedFreeDomainAtom),m=(0,eo._)((0,o.useState)([]),2),h=m[0],v=m[1];return(0,o.useEffect)(function(){var e=(null==(a=t.repl.hostingDeployment)?void 0:a.__typename)==="HostingDeployment"&&t.repl.hostingDeployment.id,r=[],i=t.provider;switch(i){case Q.HostingBuildProvider.Gce:case Q.HostingBuildProvider.AzureVm:case Q.HostingBuildProvider.CloudRun:case Q.HostingBuildProvider.AzureContainerApp:case Q.HostingBuildProvider.Static:var a,o,s,l,c=(null==(o=t.repl.hostingDeployment)?void 0:o.__typename)==="HostingDeployment"?null==(s=t.repl.hostingDeployment)?void 0:s.replitAppSubdomain:void 0;!c&&(null==(l=t.repl.owner)?void 0:l.username)&&(c="".concat(t.repl.slug,"-").concat(t.repl.owner.username)),c&&r.push({href:"https://".concat(c).concat(u({provider:i})),private:!1});break;case Q.HostingBuildProvider.Extension:case Q.HostingBuildProvider.Cron:break;default:(0,p.default)(i)}if(t.repl.domains){var d=t.repl.domains.filter(function(t){return(null==t?void 0:t.hosting_deployment_id)===e}),m=!0,h=!1,g=void 0;try{for(var x,y=d[Symbol.iterator]();!(m=(x=y.next()).done);m=!0){var b=x.value;b&&r.push({href:"https://".concat(b.domain),private:!1,state:"verified"!==b.state?b.state:void 0})}}catch(e){h=!0,g=e}finally{try{m||null==y.return||y.return()}finally{if(h)throw g}}}if(n){var S="https://".concat(n),_=r.some(function(e){return e.href===S});_?_&&f(null):r.push({href:S,private:!1,state:"pending"})}v(r)},[t,u,n,f]),(0,a.jsxs)(x.View,{gap:2,grow:!0,shrink:!0,children:[c?(0,a.jsx)(ev.StatusBanner,{colorway:"warning",text:"The ".concat(er.DEPLOYMENTS_DEFAULT_DOMAIN," domain is currently unavailable, please use the ").concat(d," URL below.")}):null,h.map(function(e,t){return(0,a.jsxs)(x.View,{row:!0,gap:8,align:"center",children:[(0,a.jsx)(g.Text,{css:[eq.rcss.flex.shrink(1)],multiline:!1,children:(0,a.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",css:[eq.rcss.color.foregroundDefault,{textDecoration:"none","&:hover":{textDecoration:"underline"}}],children:e.href})}),e.private?(0,a.jsx)(ri.default,{color:eU.tokens.foregroundDefault}):null,(0,a.jsx)(tV.IconButton,{alt:"Copy URL",onClick:function(){return(0,r._)(function(){return(0,i._)(this,function(t){switch(t.label){case 0:return[4,(0,ah.default)(e.href)];case 1:return t.sent(),s("Domain URL copied to clipboard!"),[2]}})})()},children:(0,a.jsx)(af.default,{})}),(0,a.jsx)(ax,{url:e.href}),e.state?(0,a.jsxs)(g.Text,{multiline:!1,children:["(","pushed_to_goval"===e.state||"temporal_verification"===e.state?"verifying":e.state,")"]}):null]},"domains-".concat(t))})]})};function ax(e){var t=e.url,n=(0,eo._)((0,o.useState)(!1),2),r=n[0],i=n[1];return(0,a.jsxs)(tZ.PopoverTrigger,{isOpen:r,onOpenChange:function(e){return i(e)},label:"QR Code",children:[(0,a.jsx)(tV.IconButton,{alt:"QR Code",children:(0,a.jsx)(am.default,{})}),(0,a.jsx)(x.View,{align:"start",children:(0,a.jsx)(x.View,{css:ag.qrCodeWrapper,p:8,children:(0,a.jsx)(ap.default,{size:128,value:t})})})]})}var ay=e.i(315315),ab=e.i(806804),aS=e.i(492267),a_=e.i(199674),aw=e.i(546284),aj=e.i(418725),aT=e.i(443394),ak=e.i(867559);function aD(e){switch(e){case"neon":return{productName:"production database",upgradeReason:"persist your production data long term",modalHeading:"Upgrade to keep your database",modalSubHeading:"Get a permanent PostgreSQL database with Replit ".concat(io.corePlanName)};case"deployment":return{productName:"published app",upgradeReason:"keep your published app running",modalHeading:"Upgrade to keep your published app",modalSubHeading:"Keep your app running 24/7 with Replit ".concat(io.corePlanName)};case"object_storage":return{productName:"object storage",upgradeReason:"store your files permanently",modalHeading:"Upgrade for permanent file storage",modalSubHeading:"Store your files permanently with Replit ".concat(io.corePlanName)};default:(0,p.default)(e)}}function aC(e){var t=e.product,n=e.suspendedReason,r=e.scheduledSuspensionTime,i=e.scheduledDeletionTime,o=(0,aT.getCurrentUrl)();if(void 0===i)return null;var s=new Date,l=function(e){var t=e.product,n=e.suspendedReason,r=e.daysTillScheduledSuspension,i=e.daysTillScheduledDeletion,a=aD(t),o=a.productName,s=a.upgradeReason,l=(0,aw.default)("day",i);if(n===Q.HostingBuildSuspendedReason.FreeTierCloudBudgetExceeded||n===Q.NeonDatabaseFrozenReason.FreeTierCloudBudgetExceeded||n===Q.ObjectStorageSuspendedReason.FreeTierCloudBudgetExceeded)return"Your ".concat(o," has been suspended and will expire in ").concat(i," ").concat(l," because you've used up your free Cloud credits. To unsuspend, upgrade to ").concat(io.corePlanName,".");if(null!=n)return"Your ".concat(o," has been suspended and will expire in ").concat(i," ").concat(l,". Upgrade to ").concat(io.corePlanName," to unsuspend.");if(void 0!==r){var u=(0,aw.default)("day",r);return"Your ".concat(o," will be suspended in ").concat(r," ").concat(u," and expire in ").concat(i," ").concat(l,". Upgrade to ").concat(s,".")}return"Your ".concat(o," will expire in ").concat(i," ").concat(l,". Upgrade to ").concat(s,".")}({product:t,suspendedReason:n,daysTillScheduledSuspension:r?Math.max(0,(0,a_.differenceInDays)(new Date(r),s)):void 0,daysTillScheduledDeletion:Math.max(0,(0,a_.differenceInDays)(new Date(i),s))}),u=aD(t),c=u.modalHeading,d=u.modalSubHeading;return(0,a.jsxs)(m.ShadesSurface,{gap:12,p:12,row:!0,className:ak.default.self,align:"center",justify:"space-between",wrap:"wrap",children:[(0,a.jsx)(x.View,{className:ak.default.text,children:(0,a.jsx)(g.Text,{children:l})}),(0,a.jsx)(aj.default,{context:"workspace_free_tier_upsell_banner_".concat(t),text:"Upgrade to ".concat(io.corePlanName),variant:"default",colorway:"primary",redirectPath:o,modalHeadingText:c,modalSubHeadingText:d})]})}e.s(["FreeTierUpsellBanner",()=>aC],452831);var aE=e.i(293265),aA=(0,e.i(967629).keyframes)("\n    50% {\n      background-color: ".concat(eU.tokens.accentPositiveDimmest,";\n      outline: 1px solid ").concat(eU.tokens.accentPositiveDimmer,";\n      box-shadow: 0px 0px 32px rgba(0, 145, 24, 0.3);\n    }\n")),aR=(0,eH.cssRecord)({deploymentInfo:[eq.rcss.colWithGap(8),eq.rcss.p(16),eq.rcss.borderRadius(),{outline:"1px solid transparent"}]}),aI=(0,eH.cssRecord)({textButton:[eq.rcss.reset.button,eq.rcss.color.foregroundDimmest,eq.rcss.hover(eq.rcss.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":[eq.rcss.cursor.pointer,eq.rcss.color.accentPrimaryStronger,eq.rcss.focusRing]}],textLink:eq.rcss.hover(eq.rcss.color.accentPrimaryStrongest),labeledSection:[eq.rcss.flex.growAndShrink(1),(0,tG._)({},eq.container.min(400),[eq.rcss.flex.row,eq.rcss.align.baseline])],labeledSectionFullWidth:[eq.rcss.flex.growAndShrink(1),(0,tG._)({},eq.container.min(400),[eq.rcss.flex.row,eq.rcss.align.baseline,eq.rcss.flex.grow(1),eq.rcss.justify.spaceBetween])],deploymentInfo:aR.deploymentInfo,deploymentInfoAnimate:[aR.deploymentInfo,{animation:"".concat(aA," 700ms ease-out")}],deploymentInfoTitle:[eq.rcss.flex.wrap,eq.rcss.flex.shrink(0),eq.rcss.justify.spaceBetween],deploymentInfoContent:[(0,tG._)({},eq.container.min(400),eq.rcss.colWithGap(4))],typeColumn:[eq.rcss.flex.wrap,eq.rcss.flex.shrink(1)]}),aP=function(e){var t=e.text,n=e.onClick,r=e.disabled;return(0,a.jsx)("button",{css:aI.textButton,onClick:n,disabled:void 0!==r&&r,children:t})},aM=function(e){var t=e.name,n=e.isAzure,r=e.sku,i=e.canManage,o=e.usageLink,s=e.onManageClick;return(0,a.jsxs)(x.View,{css:aI.typeColumn,row:!0,gap:6,children:[(0,a.jsx)(g.Text,{multiline:!1,children:t}),r?(0,a.jsxs)(g.Text,{color:"dimmest",multiline:!1,children:["(",void 0!==n&&n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e4,{style:{position:"relative",top:"2px"}})," -"," "]}):null,r,")"]}):null,"function"==typeof s?(0,a.jsx)(aP,{text:"Manage",onClick:s,disabled:!i}):null,o?(0,a.jsx)(nd.default,{href:"/usage",css:aI.textLink,children:(0,a.jsx)(g.Text,{children:"See all usage"})}):null]})},aO=function(e){var t=e.label,n=e.children,r=e.fullWidth;return(0,a.jsxs)(x.View,{css:r?aI.labeledSectionFullWidth:aI.labeledSection,children:[(0,a.jsx)(x.View,{css:eq.rcss.minWidth(100),children:(0,a.jsx)(g.Text,{color:"dimmer",multiline:!1,children:t})}),n]})},aV=function(e){var t=e.provider,n=e.machine,s=e.expoLaunchStateObservable,l=e.performExpoLaunchAction,u=e.onViewBuildLogs,c=e.onManageClick,d=e.onViewAction,f=(0,ee.default)(),v=(0,tp.useDeploymentMode)(),y=(0,eJ.useDeploymentCurrentBuild)(),b=(0,eJ.useDeploymentInProgressBuild)(),S=(0,tc.useNeonProductionDatabase)().database,_=(0,eJ.useDeployBuild)().redeployWithNoNewOptions,w=(0,eJ.useSetDeploymentTriggerSource)(),j=(0,eJ.useFreeTierCloudServices)(),T=(0,eJ.useDeploymentScheduledDeletionTime)(),k=(0,rr.useObservableMemo)(function(){return s.map(function(e){return"disabled"!==e.state})},[s]),D=(0,r5.useValue)(eJ.claimedFreeDomainAtom),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{step:"idle",selectedDomain:null,contactInfo:null},t=(0,eo._)((0,o.useReducer)(as,e),2);return{state:t[0],dispatch:t[1]}}(),E=C.state,A=C.dispatch,R=(0,o.useRef)(null),I="domain_selected"===E.step||"contact_submitted"===E.step,P=void 0!==y,M=t!==Q.HostingBuildProvider.Static&&P&&null===y.hasImageTag,O=t===Q.HostingBuildProvider.AzureContainerApp||t===Q.HostingBuildProvider.AzureVm,V=!!((v===rQ.DeploymentMode.Ready||v===rQ.DeploymentMode.Suspended)&&!M&&!O&&!j),N=!!(null==y||null==(ep=y.repl)||null==(ed=ep.org)?void 0:ed.id),B=(0,aS.useIsAgentStackRepl)().isAgentStackRepl,L=(0,aE.useAgentStackPlatformType)().agentStackPlatformType,U=rt({variables:{replId:f,provider:null!=t?t:Q.HostingBuildProvider.CloudRun},skip:!t}).data,H=((null==U||null==(ef=U.getRepl)?void 0:ef.__typename)==="Repl"?U.getRepl.authorizations:{addCustomDomain:{isAuthorized:!1}}).addCustomDomain.isAuthorized,F=v===rQ.DeploymentMode.Deploying||v===rQ.DeploymentMode.Preparing||!!b,q=ad({isAzureDeployment:O,isOrgRepl:N}),z=q.showClaimSection,G=q.hideClaimSection,W=(0,o.useCallback)(function(e){return(0,r._)(function(){return(0,i._)(this,function(t){switch(t.label){case 0:if(!e)return[3,1];return A({type:"select_domain",payload:e}),[3,3];case 1:return w("deployments_pane_republish_button"),[4,_({hasAgentSession:!1})];case 2:t.sent(),t.label=3;case 3:return[2]}})})()},[A,w,_]),K=(0,o.useCallback)(function(e){return(0,r._)(function(){return(0,i._)(this,function(t){switch(t.label){case 0:if(A({type:"submit_contact",payload:e}),w("deployments_pane_claim_and_republish_button"),!("domain_selected"===E.step&&E.selectedDomain))return[3,2];return R.current=E.selectedDomain.domainName,A({type:"start_deployment"}),[4,_({hasAgentSession:!1,purchaseDomain:th(E.selectedDomain,e,!0)})];case 1:t.sent(),A({type:"reset"}),t.label=2;case 2:return[2]}})})()},[E,A,w,_]),Y=null,Z=null,$=null,X=null,J=null,et=(0,o.useRef)(void 0);(0,o.useEffect)(function(){b&&(et.current=null==b?void 0:b.id)},[b,null==b?void 0:b.id]);var en=(null==y?void 0:y.status)===Q.HostingBuildStatus.Success,er=(null==y?void 0:y.id)===et.current,ei=en&&er;(0,o.useEffect)(function(){ei&&R.current&&!F&&(G(R.current),R.current=null)},[ei,G,F]);var ea=!!((null==y?void 0:y.provider)!==Q.HostingBuildProvider.Cron&&!B),es=function(){switch(L){case Q.AgentStackPlatformType.Slack:return"Slack";case Q.AgentStackPlatformType.Telegram:return"Telegram";case Q.AgentStackPlatformType.TimeBased:return"Time-based Automation"}}(),el=B&&es,eu=!!T,ec=T?(0,ay.formatDate)(T):null;switch(y&&(Z=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aO,{label:"Status",children:(0,a.jsx)(x.View,{shrink:!0,row:!0,gap:4,align:"center",children:(0,a.jsx)(r1,{onClick:function(){u(y)}})})}),B?null:(0,a.jsx)(aO,{label:"Visibility",children:(0,a.jsx)(x.View,{shrink:!0,row:!0,gap:4,align:"center",children:y.isPrivate?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ri.default,{color:eU.tokens.foregroundDefault}),(0,a.jsx)(g.Text,{multiline:!1,children:"Private"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tC.default,{color:eU.tokens.foregroundDefault}),(0,a.jsx)(g.Text,{multiline:!1,children:"Public"})]})})}),ea?(0,a.jsx)(aO,{label:"Domain",children:(0,a.jsxs)(x.View,{shrink:!0,gap:8,children:[(0,a.jsx)(av,{currentBuild:y,optimisticDomain:D||void 0}),O||N||!H?null:(0,a.jsx)("div",{children:(0,a.jsx)(h.Button,{variant:"outlined",text:"Buy a new domain",iconLeft:(0,a.jsx)(ra.default,{}),size:"small",iconRight:(0,a.jsx)(r4.Pill,{compact:!0,colorway:"primary",text:"Beta"}),onClick:function(){d({type:eB.ViewActionType.ChangeView,payload:{view:eB.Views.Domains,data:{buyDomain:!0}}})}})})]})}):null,el?(0,a.jsx)(aO,{label:"Platform",children:(0,a.jsx)(g.Text,{multiline:!1,children:es})}):null]})),t){case Q.HostingBuildProvider.AzureVm:case Q.HostingBuildProvider.Gce:$=(0,a.jsx)(aO,{label:"Type",fullWidth:!P,children:(0,a.jsx)(aM,{name:r2[t],sku:null==n?void 0:n.configurationLabel,canManage:V,isAzure:t===Q.HostingBuildProvider.AzureVm,onManageClick:O?void 0:c})});break;case Q.HostingBuildProvider.AzureContainerApp:case Q.HostingBuildProvider.CloudRun:$=(0,a.jsx)(aO,{label:"Type",fullWidth:!P,children:(0,a.jsx)(aM,{name:r2[t],isAzure:t===Q.HostingBuildProvider.AzureContainerApp,sku:n?"".concat(n.configurationLabel," / ").concat(n.maxInstances," Max"):"Beta",canManage:V,usageLink:!0,onManageClick:O?void 0:c})});break;case Q.HostingBuildProvider.Static:$=(0,a.jsx)(aO,{label:"Type",fullWidth:!P,children:(0,a.jsx)(aM,{name:r2[t],sku:void 0,canManage:V&&P,onManageClick:c})});break;case Q.HostingBuildProvider.Cron:if(!(null==y||null==(em=y.machineJob)?void 0:em.timezone))break;var ed,ep,ef,em,eh,ex,ey=null==y||null==(eh=y.machineJob)?void 0:eh.timezone,eb=tY.validSchedulerTimezones.find(function(e){return e.utc.includes(ey)}),eS=(null==eb?void 0:eb.abbr)||ey;$=(0,a.jsx)(aO,{label:"Type",fullWidth:!P,children:(0,a.jsx)(aM,{name:r2[t],sku:"".concat(eS,", ").concat(null==y||null==(ex=y.machineJob)?void 0:ex.crontab),canManage:!1})}),Y=(0,a.jsx)(ix,{onSuccessfulExecution:function(){d({type:eB.ViewActionType.ChangeView,payload:{view:eB.Views.Schedule}})}});break;case Q.HostingBuildProvider.Extension:case void 0:break;default:(0,p.default)(t)}var e_=(0,ab.default)("workspace","workspace-deployment-pane-production-database-banner"),ew=e_.shouldDisplay,ej=e_.register,eT=e_.dismiss;if((0,o.useEffect)(function(){S&&ej()},[S,ej]),S){var ek=ew&&S;X=(0,a.jsx)(aO,{label:"Database",children:(0,a.jsxs)(x.View,{shrink:!0,gap:8,children:[(0,a.jsxs)(x.View,{shrink:!0,row:!0,gap:8,align:"center",wrap:!0,children:[(0,a.jsx)(g.Text,{multiline:!1,children:"Production database connected"}),(0,a.jsx)(aP,{text:"Manage",onClick:function(){return d({type:eB.ViewActionType.OpenPane,payload:{type:"neon",data:{openAtDatabase:{databaseId:S.databaseId}}}})}})]}),ek?(0,a.jsx)(ev.StatusBanner,{colorway:"primary",text:(0,a.jsxs)(x.View,{shrink:!0,row:!0,gap:4,align:"center",children:["Your production database is ready! Your app can now save and manage live user data securely.",(0,a.jsx)(tV.IconButton,{alt:"Dismiss",onClick:eT,children:(0,a.jsx)(tS.default,{})})]})}):null]})})}return(M&&(J=(0,a.jsx)(x.View,{children:(0,a.jsx)(ev.StatusBanner,{icon:(0,a.jsx)(eg.default,{}),colorway:"warning",text:"To upgrade, please republish."})})),Z||$||J||X)?(0,a.jsxs)(o.Fragment,{children:[j&&y?(0,a.jsx)(aC,{product:"deployment",suspendedReason:y.suspendedReason,scheduledDeletionTime:T}):null,(0,a.jsxs)(m.ShadesSurface,{css:ei?aI.deploymentInfoAnimate:aI.deploymentInfo,style:{paddingTop:y?12:16},children:[y?(0,a.jsxs)(x.View,{css:aI.deploymentInfoTitle,row:!0,gap:8,children:[(0,a.jsx)(g.Text,{variant:"subheadDefault",multiline:!1,children:"Production"}),Y,y.rollbackSourceBuildId?(0,a.jsx)(ie,{build:y}):null]}):null,(0,a.jsxs)(x.View,{css:aI.deploymentInfoContent,gap:8,children:[(0,a.jsx)(il,{}),Z,B?null:$,X,eu?(0,a.jsx)(aO,{label:"Expiration",children:(0,a.jsx)(g.Text,{multiline:!1,children:ec})}):null,k&&(null==y?void 0:y.status)==="success"?(0,a.jsx)(iI,{expoLaunchStateObservable:s,performExpoLaunchAction:l}):null,z?(0,a.jsx)(ao,{onClaimAndPublish:W,disabled:F,isPublishing:F,isRepublish:!0}):null,J]})]}),I&&E.selectedDomain?(0,a.jsx)(i1,{isOpen:I,selectedDomain:E.selectedDomain,onSubmit:K,onClose:function(){A({type:"reset"})},isSubmitting:F}):null]}):null},aN=(0,eH.cssRecord)({timeoutConfig:[eq.rcss.width("100%"),eq.rcss.align.start,eq.rcss.pb(8)],selectedTimeoutUnits:[eq.rcss.textAlign.left,eq.rcss.rowWithGap(8)],button:[eq.rcss.reset.button,eq.rcss.viewStyle,tR.interactive.nofill,eq.rcss.align.center,eq.rcss.display.inlineFlex,{borderColor:tR.interactive.outlined.borderColor},eq.rcss.minWidth(100)],timeoutUnitsDropdown:[eq.rcss.ml(4)],dropdownItemAndContainer:[eq.rcss.flex.row,eq.rcss.align.center,tR.interactive.listItem,eq.rcss.px(8),eq.rcss.py(4)],dropdownItem:[eq.rcss.textAlign.left,eq.rcss.rowWithGap(8)],popover:[eq.rcss.width("max-content"),eq.rcss.overflow("auto"),eq.rcss.p(1),eq.rcss.minWidth(120)],type:[eq.rcss.borderRadius(8),eq.rcss.p(8)]}),aB=(0,eH.cssRecord)({self:[aN.dropdownItemAndContainer,eq.rcss.justify.spaceBetween,{backgroundColor:eU.tokens.interactiveBackground}]}),aL=["minutes","hours"];function aU(e,t){var n=parseInt(e,10);if(!isNaN(n))if("hours"===t.toLowerCase())return 3600*n;else return 60*n;return 0}function aH(e){return/^\d+$/.test(e.trim())&&!isNaN(parseInt(e,10))}function aF(e,t){return aH(e)&&aU(e,t)>86400}function aq(e){var t=e.title;return(0,a.jsxs)(x.View,{px:8,py:4,justify:"space-between",align:"center",row:!0,gap:8,children:[(0,a.jsx)(x.View,{css:aN.selectedTimeoutUnits,align:"center",children:(0,a.jsx)(g.Text,{variant:"text",color:"dimmer",children:t})}),(0,a.jsx)(tb.default,{})]})}function az(e){var t=e.item,n=e.selected;return(0,a.jsxs)(x.View,{css:n?aB.self:aN.dropdownItemAndContainer,children:[(0,a.jsx)(x.View,{css:aN.dropdownItem,align:"center",children:(0,a.jsx)(g.Text,{variant:"text",color:n?"default":"dimmer",children:t})}),(0,a.jsx)(x.View,{align:"center",row:!0,children:n?(0,a.jsx)(ty.default,{size:16}):null})]})}function aG(e){var t=e.crontab,n=e.setCrontab,r=e.crontabError,i=e.timezone,s=e.setTimezone,l=e.timezoneError,u=e.loading,c=void 0!==u&&u,d=e.timeoutValue,p=e.setTimeoutValue,f=e.timeoutUnits,h=e.setTimeoutUnits,g=e.setTimeoutValueError,v=nl({initialCrontab:t,initialTimezone:i,externalLoading:c,onCrontabChange:n,onTimezoneChange:s}),y=v.describeSchedule,b=v.crontab,S=v.timezone,_=v.error,w=v.loading,j=v.scheduleToCronExpression,T=v.cronExpressionToSchedule,k=v.setCrontab,D=v.setTimezone,C=v.handleOnInputChanged,E=v.setTranslationType,A=(0,eJ.useDeploymentCostDetails)().scheduledDeploymentCostDetails;if((0,o.useEffect)(function(){g(!aH(d)||aF(d,f))},[d,f,g]),_)return(0,a.jsx)(x.View,{children:(0,a.jsx)(nu,{crontab:b,timezone:S,crontabError:r,timezoneError:l,cronLoading:c,error:_,onCronExpressionChange:k,onTimezoneChange:D})});var R="";return aH(d)?aF(d,f)&&(R="Please enter a value less than the maximum of 24 hours"):R="Please enter a positive whole number",(0,a.jsxs)(x.View,{gap:8,children:[(0,a.jsx)(eK,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app.",children:(0,a.jsx)(m.ShadesSurface,{css:aN.type,children:(0,a.jsx)(aM,{name:"1 vCPU / 2 GiB RAM",sku:"$".concat(A.fixedConfigurationCostPerSec,"/sec")})})}),(0,a.jsx)(x.View,{pb:16,children:(0,a.jsx)(nc,{describeSchedule:y,crontab:b,timezone:S,crontabError:r,timezoneError:l,loading:w,cronLoading:c,scheduleToCronExpression:j,cronExpressionToSchedule:T,onScheduleDescriptionChange:function(e){return C(e,"scheduleToCronExpression")},onCronExpressionChange:function(e){return C(e,"cronExpressionToSchedule")},onTimezoneChange:D,onScheduleDescriptionFocus:function(){return E("scheduleToCronExpression")},onCronExpressionFocus:function(){return E("cronExpressionToSchedule")}})}),(0,a.jsx)(x.View,{css:aN.timeoutConfig,grow:!0,shrink:!0,row:!0,children:(0,a.jsx)(eK,{id:"timeout",title:"Job timeout",information:"The maximum amount of time each execution of your scheduled job will run before being stopped",grow:!0,children:(0,a.jsxs)(x.View,{row:!0,children:[(0,a.jsx)(tB,{id:"timeoutValue",value:d,placeholder:"",loading:c,disabled:!1,onChange:function(e){return p(null!=e?e:"")},error:R,type:"number"}),(0,a.jsxs)(tx.Select,{css:aN.timeoutUnitsDropdown,defaultSelectedKey:aL[0],selectedKey:f,onSelectionChange:function(e){return h(e.toString())},children:[(0,a.jsx)(tg.Button,{css:aN.button,children:(0,a.jsx)(aq,{title:f})}),(0,a.jsx)(tZ.RawPopover,{css:aN.popover,background:"default",placement:"bottom right",children:(0,a.jsx)(tv.ListBox,{children:aL.map(function(e){return(0,a.jsx)(tv.ListBoxItem,{id:e,textValue:e,children:(0,a.jsx)(az,{item:e,selected:e===f})},e)})})})]})]})})})]})}function aW(){var e=(0,C._)(["\n  query UseReplOrgId($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return aW=function(){return e},e}e.s(["ScheduledMachineConfiguration",()=>aG,"getTimeoutInSeconds",()=>aU,"validTimeoutUnits",()=>aL],398594);var aK={},aY=(0,E.gql)(aW());function aZ(e){var t,n,r,i=(t={variables:{replId:e}},n=(0,D._)({},aK,t),A.useQuery(aY,n)),a=i.data,o=i.loading,s=i.error;return o?{loading:o,hasError:!1,orgId:void 0}:{loading:o,hasError:void 0!==s||(null==a?void 0:a.getRepl.__typename)!=="Repl",orgId:(null==a?void 0:a.getRepl.__typename)==="Repl"?null==(r=a.getRepl.org)?void 0:r.id:void 0}}function a$(e){var t=e.replId,n=e.isNewDeployment,a=e.provider,s=e.fs,l=e.secrets,u=e.onOptions,c=e.onError,d=e.dotReplit,f=e.currentBuild,m=(0,eo._)((0,o.useState)(!0),2),h=m[0],g=m[1],v=(0,tT.default)(c),x=(0,tT.default)(u),y=(0,tf.useGetSecretsAsDeploymentEntries)({secrets:l,replId:t});return(0,o.useEffect)(function(){var e=!1;try{(0,r._)(function(){var t,o,l,u,c,m,h,v,b,S;return(0,i._)(this,function(_){switch(_.label){case 0:return t=Q.DeployHostingBuildAppType.Server,o=null,l=null,u=null,c=null,[4,Promise.all([n?y():Promise.resolve(null!=(m=null==f?void 0:f.envVars)?m:[]),(0,tf.getDotReplitDeploymentConfig)(d)])];case 1:if(v=(h=eo._.apply(void 0,[_.sent(),2]))[0],b=h[1],e)return[2];if(n)switch(a){case Q.HostingBuildProvider.AzureVm:case Q.HostingBuildProvider.Gce:t=b.ignorePorts?Q.DeployHostingBuildAppType.Worker:Q.DeployHostingBuildAppType.Server;break;case Q.HostingBuildProvider.AzureContainerApp:case Q.HostingBuildProvider.CloudRun:t=Q.DeployHostingBuildAppType.CloudRun;break;case Q.HostingBuildProvider.Static:t=Q.DeployHostingBuildAppType.Static;break;case Q.HostingBuildProvider.Cron:t=Q.DeployHostingBuildAppType.Cron;break;case Q.HostingBuildProvider.Extension:case void 0:break;default:(0,p.default)(a)}else b.appType&&(t=b.appType);if(l=b.buildCommand,t===Q.DeployHostingBuildAppType.Static)return[3,2];return o=b.runCommand,[3,5];case 2:if(!b.publicDir)return[3,3];return u=b.publicDir,[3,5];case 3:return[4,(0,r._)(function(){var e,t,n,r,a,o,l,u,c,d,p,f,m,h,g,v,x;return(0,i._)(this,function(i){switch(i.label){case 0:e=["webpack.config.js","vite.config.js","webpack.config.ts","vite.config.ts"],t=!0,n=!1,r=void 0,i.label=1;case 1:i.trys.push([1,6,7,8]),a=e[Symbol.iterator](),i.label=2;case 2:if(t=(o=a.next()).done)return[3,5];return l=o.value,[4,s.stat(l)];case 3:if(!((u=i.sent()).exists&&u.type===tl.FileType.File))return[3,4];return[2,"dist/public"];case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return c=i.sent(),n=!0,r=c,[3,8];case 7:try{t||null==a.return||a.return()}finally{if(n)throw r}return[7];case 8:d=["dist","build","public"],p=!0,f=!1,m=void 0,i.label=9;case 9:i.trys.push([9,14,15,16]),h=d[Symbol.iterator](),i.label=10;case 10:if(p=(g=h.next()).done)return[3,13];return v=g.value,[4,s.stat(v)];case 11:if(!((x=i.sent()).exists&&x.type===tl.FileType.Directory))return[3,12];return[2,v];case 12:return p=!0,[3,10];case 13:return[3,16];case 14:return c=i.sent(),f=!0,m=c,[3,16];case 15:try{p||null==h.return||h.return()}finally{if(f)throw m}return[7];case 16:return[2]}})})()];case 4:(S=_.sent())&&(u=S),_.label=5;case 5:return(a===Q.HostingBuildProvider.Gce||a===Q.HostingBuildProvider.AzureVm)&&(c=b.ignorePorts),x.current({appType:t,envVars:v,buildCommand:l,runCommand:o,publicDir:u,ignorePorts:c}),g(!1),[2]}})})()}catch(e){v.current(e.message),g(!1)}return function(){e=!0}},[a,s,d,v,x,n,y,f]),{loading:h}}function aX(e){var t,n,a=e.deploymentId,s=e.replId,l=e.initialSubdomain,u=e.initialProvider,c=e.initialMachineConfig,d=e.secrets,p=e.fs,f=e.dotReplit,m=e.onDeploy,h=e.onError,g=e.hasAgentSession,v=e.selectedFreeDomain,x=void 0===v?null:v,y=(0,tp.useDeploymentMode)(),b=(0,eJ.useDeployBuild)().deployBuild,S=(0,eJ.useSetDeploymentTriggerSource)(),_=et(),w=_.hasStripeSandboxConnection,j=_.loading,T=aZ(s).orgId,k=(0,eo._)((0,o.useState)(Q.DeployHostingBuildAppType.Server),2),D=k[0],C=k[1],E=(0,eo._)((0,o.useState)(l),2),A=E[0],R=E[1],I=(0,eo._)((0,o.useState)(!1),2),P=I[0],M=I[1],O=(0,o.useRef)(!1),V=(0,eo._)((0,o.useState)(null),2),N=V[0],B=V[1],L=(0,eo._)((0,o.useState)(null),2),U=L[0],H=L[1],F=(0,eo._)((0,o.useState)(void 0),2),q=F[0],z=F[1],G=(0,eo._)((0,o.useState)(null),2),K=G[0],Z=G[1],$=(0,eo._)((0,o.useState)(void 0),2),X=$[0],J=$[1],ee=(0,eo._)((0,o.useState)(null),2),en=ee[0],ei=ee[1],ea=(0,eo._)((0,o.useState)(void 0),2),es=ea[0],el=ea[1],eu=(0,eo._)((0,o.useState)([]),2),ec=eu[0],ed=eu[1],ep=(0,eo._)((0,o.useState)(!1),2),ef=ep[0],em=ep[1],eh=(0,eo._)((0,o.useState)(null),2),eg=eh[0],ev=eh[1],ex=(0,eo._)((0,o.useState)(void 0),2),ey=ex[0],eb=ex[1],eS=(0,eo._)((0,o.useState)("10"),2),e_=eS[0],ew=eS[1],ej=(0,eo._)((0,o.useState)(aL[0]),2),eT=ej[0],ek=ej[1],eD=(0,eo._)((0,o.useState)(!1),2),eC=eD[0],eE=eD[1],eA=(0,eo._)((0,o.useState)(T&&u!==Q.HostingBuildProvider.Cron?Q.DeployHostingBuildPrivacyMode.Private:Q.DeployHostingBuildPrivacyMode.Public),2),eR=eA[0],eP=eA[1],eM=(0,eo._)((0,o.useState)(void 0),2),eO=eM[0],eV=eM[1],eB=(0,eo._)((0,o.useState)(null),2),eL=eB[0],eU=eB[1],eH=(0,eo._)((0,o.useState)(!0),2),eF=eH[0],eq=eH[1],ez=(0,eo._)((0,o.useState)(!1),2),eG=ez[0],eW=ez[1],eK=(0,eo._)((0,o.useState)(!1),2),eY=eK[0],eZ=eK[1],e$=(0,eJ.useDeploymentSecurityScanState)(),eX=e$.enabled,eQ=e$.setDeploymentSecurityScanEnabled,e0=(0,eJ.useAgentInboxState)(),e1=e0.enabled,e2=e0.setAgentInboxEnabled,e5=(0,eJ.useReplitBadgeState)(),e7=e5.enabled,e4=e5.setReplitBadgeEnabled,e3=eR!==Q.DeployHostingBuildPrivacyMode.Public,e8=(0,eo._)((0,o.useState)(u),2),e9=e8[0],e6=e8[1],te=(0,eo._)((0,o.useState)(c),2),tt=te[0],tn=te[1],tl=(0,eo._)((0,o.useState)(!1),2),tf=tl[0],tg=tl[1],tv=W({skip:!a,variables:{id:null!=a?a:""},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){var t,n=(null==(r=e.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?e.hostingDeployment:null;if(n){if(n.replitAppSubdomain&&(R(n.replitAppSubdomain),M(!0)),n.currentBuild.machineJob&&(Z(n.currentBuild.machineJob.timezone),ei(n.currentBuild.machineJob.crontab),n.currentBuild.machineJob.timeoutSeconds)){var r,i,a,o=n.currentBuild.machineJob.timeoutSeconds;o%3600==0?(i=o/3600,a="Hours"):(i=Math.floor(o/60),a="Minutes"),ew(i.toString()),ek(a)}var s=n.currentBuild.envVars.map(function(e){return{name:e.name,value:e.value}}),l=new Set(s.map(function(e){return e.name})),u=er.SYNCING_SECRETS_ROLLOUT_DATE>new Date(n.currentBuild.timeCreated)&&er.SYNCING_SECRETS_ROLLOUT_DATE>new Date(n.timeCreated)?(0,ti._)(l):null!=(t=n.ignoredSecrets)?t:[];ed(s),tj(u),null!=n.currentBuild.isPrivate&&eP((0,eJ.getPrivacyMode)({isPrivate:n.currentBuild.isPrivate,hasPrivatePassword:n.currentBuild.hasPrivatePassword})),eQ(n.securityScanEnabled)}}}),tx=tv.data,ty=tv.loading,tb=Y({variables:{replId:s,provider:e9},skip:!e9}).data,tS=(null==tx||null==(t=tx.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"?tx.hostingDeployment:null,t_=(0,eo._)((0,o.useState)(null!=(n=null==tS?void 0:tS.ignoredSecrets)?n:[]),2),tw=t_[0],tj=t_[1],tT=a$({replId:s,provider:e9,fs:p,secrets:d,dotReplit:f,isNewDeployment:!a,onError:h,currentBuild:null==tS?void 0:tS.currentBuild,onOptions:function(e){e.appType&&C(e.appType),ed(e.envVars),e.ignorePorts&&em(e.ignorePorts),e.buildCommand&&B(e.buildCommand),e.runCommand&&H(e.runCommand),e.publicDir&&ev(e.publicDir)}}).loading,tk=null==tS?void 0:tS.currentBuild,tD=void 0!==tk,tC=!!(null==tk?void 0:tk.hasPrivatePassword),tE=(null==tb?void 0:tb.getRepl.__typename)==="Repl"?tb.getRepl.authorizations:void 0,tA=null==tE?void 0:tE.editDeploymentSecrets,tR=null==tE?void 0:tE.editSecrets,tI=null==tE?void 0:tE.editDeploymentSubdomain,tP=(0,tu.useHeliumDevelopmentDatabase)(),tM=tP.database,tO=tP.loading,tV=(0,tc.useNeonDevelopmentDatabase)(),tN=tV.database,tB=tV.loading,tL=(0,tc.useNeonProductionDatabase)(),tU=tL.database,tH=tL.loading,tF=eI({neonDevelopmentDatabase:tN,neonProductionDatabase:tU,heliumDevelopmentDatabase:tM,isRedeploy:tD,hasStripeSandboxConnection:w}),tq=(0,tm.useDevSecrets)({secrets:d,replId:s}).devSecrets;(0,o.useEffect)(function(){(0,eN.trackDeploymentSectionViewed)({context:"deploy_options"})},[]),(0,o.useEffect)(function(){!l||A||O.current||(R(l),O.current=!0)},[l,A]);var tz=(0,o.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value;ed(function(e){return(0,to.produce)(e,function(e){e.push({name:null!=t?t:"",value:null!=n?n:""})})})},[ed]),tG=function(e,t){return(0,r._)(function(){var n,r,a,o,s,l;return(0,i._)(this,function(i){switch(i.label){case 0:if(a=(!e||P)&&A.length?A:void 0,s=null!=(o=null==tS||null==(r=tS.currentBuild)||null==(n=r.machineJob)?void 0:n.failureNotifications)&&o,!a)return[2,!1];if(x&&!t)return tg(!0),[2,!1];i.label=1;case 1:return i.trys.push([1,3,,4]),S("deployments_pane_publish_button"),[4,b({ignoredSecrets:tw,envVars:ec.filter(function(e){return(0,ts.isValidEnvVar)(e)}).map(function(e){return{name:e.name,value:e.value}}),subdomain:a,machineConfigurationId:(null==tt?void 0:tt.configurationId)||void 0,maxMachineInstances:(null==tt?void 0:tt.maxInstances)||void 0,machineJob:K&&en?{timezone:K,crontab:en,timeoutSeconds:aU(e_,eT),failureNotifications:s}:void 0,config:{buildCommand:N,runCommand:U,appType:D,ignorePorts:ef,publicDir:eg},privacyMode:eR,privatePassword:eO,enableSecurityScan:eX,agentInboxEnabled:e1,replitBadgeEnabled:null!=e7?e7:void 0,hasAgentSession:g,createNeonProductionDatabase:tF.value.createDatabase,pushDevelopmentDatabaseObjects:tF.value.pushDevelopmentDatabaseObjects,syncStripe:eF,provider:e9,purchaseDomain:x&&t?th(x,t,!0):void 0})];case 2:return i.sent(),m(),[2,!0];case 3:if(l=i.sent(),(0,tr._)(l,td.RunCommandNotFoundError))return z("Run command cannot be empty."),[2,!1];if((0,tr._)(l,td.InvalidRunCommandError))return z("Invalid run command."),[2,!1];if((0,tr._)(l,td.PublicDirNotFoundError))return eb("Public directory cannot be empty."),[2,!1];if((0,tr._)(l,td.InvalidTimezoneError))return J(l.message||"Invalid timezone."),[2,!1];if((0,tr._)(l,td.InvalidCrontabError))return el(l.message||"Invalid crontab."),[2,!1];if((0,tr._)(l,td.PrivatePasswordError))return eU(l.message||"Invalid password."),[2,!1];return h(l.message),[2,!1];case 4:return[2]}})})()};return{mode:y,deployment:tS,queryLoading:ty,optionsLoading:tT,currentBuild:tk,isRedeploy:tD,authorizations:tE,editDeploySecretAuthorization:tA,editReplSecretsAuthorization:tR,editDeploymentSubdomainAuthorization:tI,appType:D,subdomain:A,validSubdomain:P,buildCommand:N,runCommand:U,runCommandError:q,timezone:K,timezoneError:X,crontab:en,crontabError:es,envVars:ec,ignorePorts:ef,publicDir:eg,publicDirError:ey,timeoutValue:e_,timeoutUnits:eT,timeoutValueError:eC,isPrivate:e3,privacyMode:eR,privatePassword:eO,privatePasswordError:eL,hasExistingPrivatePassword:tC,agentInboxEnabled:e1,replitBadgeEnabled:e7,syncSandboxWithLive:eF,ignoredSecrets:tw,isOverwritingSecrets:eG,isOverwriteSecretsModalOpen:eY,devSecrets:tq,orgId:T,provider:e9,canCreateNeonProductionDatabaseStateLoading:tO||tB||tH||j||tF.loading,machineConfig:tt,setAppType:C,setSubdomain:R,setValidSubdomain:M,setBuildCommand:B,setRunCommand:H,setRunCommandError:z,setTimezone:Z,setTimezoneError:J,setCrontab:ei,setCrontabError:el,setEnvVars:ed,setIgnorePorts:em,setPublicDir:ev,setPublicDirError:eb,setTimeoutValue:ew,setTimeoutUnits:ek,setTimeoutValueError:eE,setPrivacyMode:eP,setPrivatePassword:eV,setAgentInboxEnabled:e2,setReplitBadgeEnabled:e4,setSyncSandboxWithLive:eq,setIgnoredSecrets:tj,setIsOverwritingSecrets:eW,setIsOverwriteSecretsModalOpen:eZ,setProvider:e6,setMachineConfig:tn,showDomainContactModal:tf,setShowDomainContactModal:tg,createNeonProductionDatabaseState:tF,onAppTypeChanged:function(e){C(e),em((e===Q.DeployHostingBuildAppType.Server||e===Q.DeployHostingBuildAppType.Worker)&&e===Q.DeployHostingBuildAppType.Worker)},onSubdomainBlur:function(){(null==A?void 0:A.trim())||R(l)},addAnEnvVar:tz,updateEnvVarName:function(e,t){ed(function(n){return(0,to.produce)(n,function(n){n[e].name=t})})},updateEnvVarValue:function(e,t){ed(function(n){return(0,to.produce)(n,function(n){n[e].value=t})})},removeEnvVar:function(e){ed(function(t){return(0,to.produce)(t,function(t){t.splice(e,1)})})},handleDeployClick:tG,handleDomainContactSubmit:function(e){return(0,r._)(function(){return(0,i._)(this,function(t){switch(t.label){case 0:return tg(!1),[4,tG(!0,e)];case 1:return[2,t.sent()]}})})()},optOut:function(e){tj(function(t){return(0,ti._)(t).concat([e])})},optIn:function(e){tq&&tq.has(e)||tj(function(t){return t.filter(function(t){return t!==e})})},syncToWorkspace:function(e){return(0,r._)(function(){var t,n;return(0,i._)(this,function(r){return!((t=ec.findIndex(function(t){return t.name===e}))<0)&&tq&&tq.has(e)&&(n=tq.get(e),(0,ta.default)(n),tj(function(t){return t.filter(function(t){return t!==e})}),ed(function(r){return(0,ti._)(r.slice(0,t)).concat([{name:e,value:n}],(0,ti._)(r.slice(t+1)))})),[2]})})()},overwriteSecrets:function(){return(0,r._)(function(){return(0,i._)(this,function(e){switch(e.label){case 0:return eW(!0),[4,d.addEntries(ec.map(function(e){return{key:e.name,value:e.value}}))];case 1:return e.sent(),eW(!1),eZ(!1),[2]}})})()}}}e.s(["useOrgId",()=>aZ],605526),e.s(["useDeployOptionsData",()=>a$,"useDeploymentOptionsState",()=>aX],976191)},970755,e=>{e.v({cannotDeploy:"SuggestDeploy-module__DhkBmq__cannotDeploy",isConfiguredManually:"SuggestDeploy-module__DhkBmq__isConfiguredManually",isStale:"SuggestDeploy-module__DhkBmq__isStale",message:"SuggestDeploy-module__DhkBmq__message",propertiesHeader:"SuggestDeploy-module__DhkBmq__propertiesHeader",status:"SuggestDeploy-module__DhkBmq__status",urlContainer:"SuggestDeploy-module__DhkBmq__urlContainer"})},127704,e=>{e.v({continueButton:"SuggestGeneralBuildMode-module__a0pqrq__continueButton"})},401211,e=>{e.v({inlineButton:"SuggestRollback-module__W2kyQG__inlineButton"})},10537,225821,271280,202872,e=>{"use strict";var t,n=e.i(276385),r=e.i(389959),i=e.i(399344),a=e.i(297083),o=e.i(721281),s=e.i(530658),l=e.i(817556),u=e.i(109644),c=e.i(664219),d=e.i(368964),p=e.i(275122),f=e.i(183035),m=e.i(806685),h=e.i(490262),g=e.i(917736),v=e.i(182409),x=e.i(116235),y=e.i(409049),b=e.i(746776),S=e.i(882848),_=e.i(269848),w=e.i(155119),j=e.i(220743),T=e.i(416298),k=e.i(379334),D=e.i(967963),C=e.i(262664),E=e.i(424746),A=e.i(914279),R=e.i(68893),I=e.i(479373),P=e.i(365692),M=e.i(777373),O=e.i(589910),V=e.i(332822),N=e.i(34912),B=e.i(823166),L=e.i(311106),U=e.i(976191),H=e.i(993796),F=e.i(207237),q=e.i(187505),z=e.i(858248),G=e.i(709485),W=e.i(436725),K=e.i(446530),Y=e.i(173703),Z=e.i(613355),$=e.i(140487),X=e.i(607278),Q=e.i(396776),J=e.i(960178),ee=e.i(751273),et=e.i(625484),en=e.i(970755),er=(0,K.cssRecord)({titleShort:(0,o._)({display:"inline"},Z.container.min(411),{display:"none"}),titleLong:(0,o._)({display:"none"},Z.container.min(411),{display:"inline"})}),ei=(0,K.cssRecord)({root:[Z.rcss.my(12),Z.rcss.p(8)]});function ea(e){var t=e.openDeploymentsPane,i=e.isRedeploy,a=e.agentStackPlatformType,o=(0,r.useMemo)(function(){switch(a){case d.AgentStackPlatformType.Slack:return(0,n.jsx)(y.default,{});case d.AgentStackPlatformType.Telegram:return(0,n.jsx)(b.default,{});case d.AgentStackPlatformType.TimeBased:return(0,n.jsx)(p.default,{});default:return null}},[a]),s=(0,r.useMemo)(function(){switch(a){case d.AgentStackPlatformType.Slack:return{title:"Publish to Slack",deploy:"Publish your agent to interact with it on Slack.",redeploy:"Republish your agent to Slack to apply the latest changes."};case d.AgentStackPlatformType.Telegram:return{title:"Publish to Telegram",deploy:"Publish your agent to interact with it on Telegram.",redeploy:"Republish your agent to Telegram to apply the latest changes."};case d.AgentStackPlatformType.TimeBased:return{title:"Publish your Time-based Automation",deploy:"Publish to start running your automation.",redeploy:"Republish your automation to apply the latest changes."};case d.AgentStackPlatformType.ConnectorTrigger:return{title:"Publish your Automation",deploy:"Publish to start Automatically triggering workflows when events occur.",redeploy:"Republish your automation to apply the latest changes."};default:return{title:"Publish",deploy:"Publish your agent to interact with it.",redeploy:"Republish your agent to apply the latest changes."}}},[a]);return(0,n.jsxs)(Y.ShadesSurface,{gap:8,p:8,css:ei.root,children:[(0,n.jsxs)(et.View,{align:"center",gap:6,row:!0,children:[(0,n.jsx)(x.IconProvider,{size:16,children:o}),(0,n.jsx)(J.Text,{style:{fontWeight:"500"},children:s.title})]}),(0,n.jsx)(J.Text,{children:i?s.redeploy:s.deploy}),(0,n.jsx)(et.View,{row:!0,justify:"end",children:(0,n.jsx)($.Button,{iconLeft:(0,n.jsx)(v.default,{}),onClick:t,colorway:"primary",text:i?"Republish":"Publish now"})})]})}function eo(e){var t=e.openDeploymentsPane,r=e.isRedeploy;return(0,n.jsxs)(Y.ShadesSurface,{colorShade:"notice",elevate:"2x",border:"regular",br:"container",gap:12,p:8,css:ei.root,children:[(0,n.jsx)(J.Text,{children:r?"Republish your app to the App Store to apply the latest changes.":"Ready to share? Go live with a shareable link, then submit to the App Store."}),(0,n.jsx)(et.View,{row:!0,justify:"end",children:(0,n.jsx)($.Button,{iconLeft:(0,n.jsx)(v.default,{}),onClick:t,colorway:"primary",text:r?"Republish":"Start publishing"})})]})}function es(e){var t,o=e.currentBuild,u=e.openDeploymentsPane,c=e.isRedeploy,p=e.paneType,f=(0,s._)((0,r.useState)(void 0),2),m=f[0],v=f[1],x=(0,s._)((0,r.useState)(!1),2),y=x[0],b=x[1],S=(0,s._)((0,r.useState)(null),2),_=S[0],j=S[1],T=(0,s._)((0,r.useState)(!0),2),M=T[0],V=T[1],q=(0,r.useCallback)(function(e){(0,L.sendSentryError)({error:Error(e),context:"SuggestDeployCard",isDeploymentsPane:!1}),b(!0)},[]),W=(0,F.default)(),K=(0,i.useDotReplitService)(),Y=(0,i.useFsService)(),Z=(0,i.useSecretsService)(),$=(0,i.useDeploymentProvider)({onError:q,dotReplitService:K}),X=$.recommendedProvider,Q=$.loading,J=X===d.HostingBuildProvider.AzureContainerApp||X===d.HostingBuildProvider.AzureVm,ee=(0,i.useFreeTierCloudServices)(),et=(0,(0,i.useDeploymentDeployability)().getDeployabilityByProvider)(X).deploy,en=et.isAuthorized,ei="Loading"===et.message;(0,r.useEffect)(function(){!ei&&(en||v("NOT_AVAILABLE"))},[ei,en]);var ea=(0,B.useReservedVmConfigurations)({provider:X,onError:q}).defaultMachineConfiguration,eo=(0,O.useAutoscaleConfigurations)({isAzureDeployment:J,isFreeUser:ee,onError:q}).defaultMachineConfiguration,es=(0,P.getRecommendedProviderMachineConfiguration)({recommendedProvider:X,defaultAutoscaleConfiguration:eo,defaultRvmMachineConfiguration:ea}),eu=(0,s._)((0,r.useState)(d.DeployHostingBuildAppType.Server),2),ec=eu[0],ed=eu[1],ep=(0,s._)((0,r.useState)(null),2),ef=ep[0],em=ep[1],eh=(0,s._)((0,r.useState)(null),2),eg=eh[0],ev=eh[1],ex=(0,s._)((0,r.useState)(null!=(t=null==o?void 0:o.envVars.map(function(e){return{name:e.name,value:e.value}}))?t:[]),2),ey=ex[0],eb=ex[1],eS=(0,s._)((0,r.useState)(!1),2),e_=eS[0],ew=eS[1],ej=(0,s._)((0,r.useState)(null),2),eT=ej[0],ek=ej[1],eD=(0,U.useDeployOptionsData)({replId:W,provider:X,fs:Y,secrets:Z,dotReplit:K,isNewDeployment:!c,onError:q,onOptions:function(e){e.appType&&ed(e.appType),e.envVars&&eb(e.envVars),e.ignorePorts&&ew(e.ignorePorts),e.buildCommand&&em(e.buildCommand),e.runCommand&&ev(e.runCommand),e.publicDir&&ek(e.publicDir)}}).loading,eC=(0,s._)((0,r.useState)(void 0),2),eE=eC[0],eA=eC[1],eR=(0,s._)((0,r.useState)(void 0),2),eI=eR[0],eP=eR[1],eM=(0,s._)((0,r.useState)(void 0),2),eO=eM[0],eV=eM[1],eN=(0,s._)((0,r.useState)(void 0),2),eB=eN[0],eL=eN[1],eU=(0,i.useDeploymentSubdomain)(),eH=(0,i.useDeploymentCostDetails)().getMachineConfigurationCostDetailsBySlug;(0,r.useEffect)(function(){if(!eD){if(!X){eA(void 0),eP(void 0),eV(void 0),eL(void 0),v(void 0);return}var e,t,r="".concat(eU).concat((null==(t=window)||null==(e=t.location)?void 0:e.hostname)!=="replit.com"?".staging":"",".").concat(k.DEPLOYMENTS_DEFAULT_DOMAIN);switch(X){case d.HostingBuildProvider.AzureVm:case d.HostingBuildProvider.Gce:if(!es)return;var i=eH(es.configurationSlug).costPerMonth;eA((0,n.jsx)(g.default,{})),eP("Reserved VM Deployment"),eV("$".concat(i,"/month"));var a={};a["Default URL"]=r,ef&&(a["Build Command"]=ef),a["Run Command"]=eg,eL(a);break;case d.HostingBuildProvider.AzureContainerApp:case d.HostingBuildProvider.CloudRun:if(!es)return;eA((0,n.jsx)(h.default,{})),eP((0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{css:er.titleShort,children:"Autoscale"}),(0,n.jsx)("span",{css:er.titleLong,children:"Autoscale Deployment"})]}));var o={};o["Default URL"]=r,ef&&(o["Build Command"]=ef),o["Run Command"]=eg,eL(o);break;case d.HostingBuildProvider.Static:eA((0,n.jsx)(w.default,{})),eP("Static Deployment"),eV("Free");var s={"Public Directory":eT,"Default URL":r};ef&&(s["Build Command"]=ef),eL(s);break;default:eA(void 0),eP(void 0),eV(void 0),eL(void 0),v(void 0)}}},[ef,eU,eD,X,eg,es,eT,eH]);var eF=(0,i.useDeployBuild)({openDeploymentsPane:u}),eq=eF.deployBuild,ez=eF.redeployWithNoNewOptions,eG=(0,i.useSetDeploymentTriggerSource)(),eW=(0,C.useHeliumDevelopmentDatabase)(),eK=eW.database,eY=eW.loading,eZ=(0,E.useNeonDevelopmentDatabase)(),e$=eZ.database,eX=eZ.loading,eQ=(0,E.useNeonProductionDatabase)(),eJ=eQ.database,e0=eQ.loading,e1=(0,I.useStripeConnection)(),e2=e1.hasStripeSandboxConnection,e5=e1.loading,e7=(0,N.useCreateNeonProductionDatabaseState)({heliumDevelopmentDatabase:eK,neonDevelopmentDatabase:e$,neonProductionDatabase:eJ,isRedeploy:c,hasStripeSandboxConnection:e2}),e4=e7.value,e3=e4.createDatabase,e8=e4.pushDevelopmentDatabaseObjects,e9=(0,i.useDeploymentSecurityScanState)().enabled,e6=(0,i.useDeployBuild)({}).kickOffStandbyBuild,te=(0,r.useRef)(!1),tt=(0,H.useFlag)({controlName:"flag-enable-standby-builds",type:"boolean"});(0,r.useEffect)(function(){if(tt&&!te.current&&!c&&!eD){if(!X||!eg||!ec)return void(0,L.sendSentryError)({error:Error("Standby build blocked: "+JSON.stringify({recommendedProvider:X,runCommand:eg,appType:ec})),context:"StandbyBuildBlockedFromSuggestDeploy",isDeploymentsPane:!1});te.current=!0,(0,a._)(function(){var e;return(0,l._)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),(0,L.sendSentryError)({error:Error("Standby build triggered "),context:"StandbyBuildTriggeredFromSuggestDeploy",isDeploymentsPane:!1}),[4,e6({provider:X,envVars:ey.filter(function(e){return(0,D.isValidEnvVar)(e)}),subdomain:eU||"",machineConfigurationId:(null==es?void 0:es.configurationId)||void 0,maxMachineInstances:(null==es?void 0:es.maxInstances)||void 0,config:{buildCommand:ef,runCommand:eg,appType:ec,publicDir:eT,ignorePorts:!1},privacyMode:d.DeployHostingBuildPrivacyMode.Public,hasAgentSession:!0,ignoredSecrets:[],createNeonProductionDatabase:null,pushDevelopmentDatabaseObjects:null,enableSecurityScan:e9})];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),(0,L.sendSentryError)({error:Error("Failed to trigger standby build: "+e.message),context:"StandbyBuildTriggerFromSuggestDeploy"}),[3,3];case 3:return[2]}})})()}},[c,eD,eg,ec,ey,eU,null==es?void 0:es.configurationId,null==es?void 0:es.maxInstances,ef,eT,X,e7,e9,tt,e6]);var tn=(0,r.useCallback)(function(){return(0,a._)(function(){var e,t,n;return(0,l._)(this,function(r){switch(r.label){case 0:if(!en)return[2];if(v("DEPLOYING"),(0,z.track)(G.events.DEPLOY_PROJECT_SELECTED,{source:"one_click_deploy",redeploy:c,has_agent_session:!0}),!c)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),eG("agent_suggest_publish_tool"),[4,ez({hasAgentSession:!0})];case 2:return r.sent(),[3,4];case 3:return q(r.sent().message),[3,4];case 4:return[2];case 5:if(e=_&&M,t=(null==eU?void 0:eU.length)?eU:void 0,!(n=e?_:t)||!X)return[2];r.label=6;case 6:return r.trys.push([6,8,,9]),eG("agent_suggest_publish_tool"),[4,eq({ignoredSecrets:[],envVars:ey.filter(function(e){return(0,D.isValidEnvVar)(e)}),subdomain:n,machineConfigurationId:(null==es?void 0:es.configurationId)||void 0,maxMachineInstances:(null==es?void 0:es.maxInstances)||void 0,config:{buildCommand:ef,runCommand:eg,appType:ec,ignorePorts:e_,publicDir:eT},privacyMode:d.DeployHostingBuildPrivacyMode.Public,hasAgentSession:!0,createNeonProductionDatabase:e3,pushDevelopmentDatabaseObjects:e8,enableSecurityScan:e9,provider:X})];case 7:return r.sent(),u&&u(),[3,9];case 8:return q(r.sent().message),[3,9];case 9:return[2]}})})()},[ec,ef,e3,_,ey,c,e_,en,M,null==es?void 0:es.configurationId,null==es?void 0:es.maxInstances,eT,e8,eg,eU,eq,q,u,ez,e9,eG,X]),tr=(0,A.useDeploymentMode)();(0,r.useEffect)(function(){if(!y)switch(tr){case R.DeploymentMode.Ready:if("FAILED"===m||"FINISHED"===m)break;v("READY");break;case R.DeploymentMode.Suspended:v("NOT_AVAILABLE");break;case R.DeploymentMode.Preparing:case R.DeploymentMode.Deploying:v("DEPLOYING")}},[y,tr,m]),(0,i.useLatestBuildActionUpdate)(function(e){if(!y&&"HostingBuildDeployStatusAction"===e.__typename)switch(e.status){case d.HostingBuildStatus.Failed:v("FAILED");break;case d.HostingBuildStatus.Success:v("FINISHED")}});var ti=ei||eD||eY||eX||e0||e7.loading||Q||e5,ta=(0,r.useRef)(!1);return((0,r.useEffect)(function(){ta.current||ti||e2||(ta.current=!0,(0,z.track)(G.events.DEPLOY_PROJECT_SELECTED,{source:"one_click_deploy_shown",has_agent_session:!0}))},[ti,e2]),e2)?null:(0,n.jsx)(el,{icon:eE,title:eI,cost:eO,properties:eB,status:y?"NOT_AVAILABLE":m,onDeploy:en&&X&&X!==d.HostingBuildProvider.Cron?tn:void 0,defaultSubdomain:eU,recommendedProvider:X,replId:W,onSubdomainEdit:j,onSubdomainValidityChange:V,openDeploymentsPane:u,isRedeploy:c,loading:ti,paneType:p,state:e7})}function el(e){var t=e.icon,r=e.title,i=e.cost,a=e.properties,o=e.status,s=void 0===o?"READY":o,l=e.defaultSubdomain,u=e.recommendedProvider,c=e.replId,d=e.onDeploy,p=e.openDeploymentsPane,f=e.onSubdomainEdit,m=e.onSubdomainValidityChange,h=e.isRedeploy,g=e.loading,v=e.paneType,x=e.state,y=a&&Object.keys(a).length>0,b=g?(0,n.jsx)(W.LoadingState,{}):(0,n.jsxs)(et.View,{gap:8,"data-event-type":"deploy",children:[(0,n.jsx)(J.Text,{clsx:en.default.message,color:"STALE"===s?"dimmer":"default",children:h?"Want users to get these changes? Republish this App.":"Ready to share? Publish this App in ".concat(d?"one click":"a few clicks",".")}),u&&(null==a?void 0:a["Default URL"])&&!h?(0,n.jsx)(ec,{icon:void 0===t?null:t,title:void 0===r?"Deployment":r,cost:void 0===i?"":i,properties:a,paneType:v,initialSubdomain:l,recommendedProvider:u,replId:c,onSubdomainEdit:f,onSubdomainValidityChange:m}):null,d||p?(0,n.jsx)(et.View,{row:!0,gap:8,align:"center",justify:y?"start":"end",children:(0,n.jsx)(ef,{status:s,isRedeploy:h,loading:g,onDeploy:d,openDeploymentsPane:p?function(){p()}:void 0,state:x})}):null]});return(0,n.jsx)(Y.ShadesSurface,{elevate:"2x",br:"container",p:8,children:b})}(t={}).READY="READY",t.STALE="STALE",t.NOT_AVAILABLE="NOT_AVAILABLE",t.DEPLOYING="DEPLOYING",t.FINISHED="FINISHED",t.FAILED="FAILED",t.CONFIGURED_MANUALLY="CONFIGURED_MANUALLY";var eu=function(e){var t,i,a=e.id,o=e.initialSubdomain,l=e.deploymentId,p=e.recommendedProvider,m=e.replId,h=e.onSubdomainEdit,g=e.onSubdomainValidityChange,v=(0,s._)((0,r.useState)(o||""),2),x=v[0],y=v[1],b=(0,M.useProviderInternalDomain)({provider:p}),S=b.internalDomain,w=b.isShowingFallback,j=b.fallbackDomain,D=(0,u.useCheckReplitAppSubdomainAvailabilityQuery)({variables:{subdomain:x,deploymentId:l},skip:0===x.length}),C=D.data,E=D.loading,A=D.error,R=(0,c.useDeploymentsDeployOptionsAuthzQuery)({variables:{replId:m,provider:null!=p?p:d.HostingBuildProvider.CloudRun},skip:!p}),I=R.data,P=R.loading,O=(null==I?void 0:I.getRepl.__typename)==="Repl"?null==(t=I.getRepl.authorizations)?void 0:t.editDeploymentSubdomain:void 0,V=!(null==O?void 0:O.isAuthorized),N=null==O?void 0:O.message,B=(null==C?void 0:C.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&C.replitAppSubdomainAvailability.available,L=(null==C?void 0:C.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?C.replitAppSubdomainAvailability.message:null==C||null==(i=C.replitAppSubdomainAvailability)?void 0:i.errorMessage;return((0,r.useEffect)(function(){g(B)},[B,g]),A)?(0,n.jsx)(Q.StatusBanner,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,n.jsxs)(et.View,{grow:!0,shrink:!0,children:[(0,n.jsxs)(et.View,{row:!0,gap:8,align:"center",justify:"space-between",grow:!0,shrink:!0,children:[(0,n.jsxs)(et.View,{row:!0,gap:8,align:"center",grow:!0,children:[P?(0,n.jsx)(_.default,{}):(0,n.jsx)(ee.Tooltip,{tooltip:N,isDisabled:!V,children:(0,n.jsx)(X.Input,{id:a,value:x,onChange:function(e){y(e.target.value),h(e.target.value)},disabled:V})}),(0,n.jsx)(J.Text,{multiline:!1,children:S})]}),(0,n.jsxs)(et.View,{row:!0,gap:4,pt:4,align:"center",children:[E?(0,n.jsx)(_.default,{}):null,B?(0,n.jsx)(f.default,{color:"green"}):null,B||E?null:(0,n.jsx)(ee.Tooltip,{tooltip:L,isDisabled:!L,children:(0,n.jsx)(T.default,{color:"red"})})]})]}),w?(0,n.jsx)(Q.StatusBanner,{colorway:"warning",text:"The ".concat(k.DEPLOYMENTS_DEFAULT_DOMAIN," domain is currently unavailable, please use the ").concat(j," URL above.")}):null]})};function ec(e){var t=e.icon,r=e.title,i=e.cost,a=e.paneType,o=e.initialSubdomain,s=e.recommendedProvider,l=e.replId,u=e.onSubdomainEdit,c=e.onSubdomainValidityChange;return(0,n.jsxs)(Y.ShadesSurface,{elevate:"agentChat"===a?"1x":void 0,br:4,border:"regular",children:[(0,n.jsxs)(Y.ShadesSurface,{border:{side:"bottom"},px:8,py:4,clsx:en.default.propertiesHeader,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,n.jsxs)(et.View,{row:!0,gap:8,align:"center",children:[(0,n.jsx)(x.IconProvider,{size:20,children:t}),(0,n.jsx)(J.Text,{children:(0,n.jsx)("strong",{children:r})})]}),i?(0,n.jsx)(J.Text,{children:i}):null]}),(0,n.jsxs)(et.View,{clsx:en.default.urlContainer,gap:8,children:[(0,n.jsxs)(et.View,{row:!0,gap:8,align:"center",children:[(0,n.jsx)(S.default,{}),(0,n.jsx)(J.Text,{children:"Primary URL"})]}),(0,n.jsx)(et.View,{row:!0,gap:8,align:"center",children:(0,n.jsx)(eu,{id:"primaryDomain",initialSubdomain:o,recommendedProvider:s,replId:l,onSubdomainEdit:u,onSubdomainValidityChange:c})})]})]})}function ed(e){var t,r,i,a,s=e.status,l=e.onDeploy,u=e.openDeploymentsPane;if("NOT_AVAILABLE"===s)return(0,n.jsxs)(et.View,{clsx:en.default.cannotDeploy,gap:8,children:[(0,n.jsx)(Q.StatusBanner,{colorway:"warning",icon:(0,n.jsx)(T.default,{}),title:"Published apps not available",text:"There is an issue preventing you from publishing. You may be able to resolve this using the Publishing pane."}),u?(0,n.jsx)($.Button,{onClick:u,iconLeft:(0,n.jsx)(j.default,{}),text:"Open Published apps",alignment:"start",colorway:"primary"}):null]});var c=null;switch(s){case"DEPLOYING":c=(0,n.jsx)(_.default,{}),t="Publishing",r="primary";break;case"FINISHED":c=(0,n.jsx)(f.default,{}),t="Published",r="green",i="Click to republish";break;case"FAILED":c=(0,n.jsx)(T.default,{}),t="Failed",r="red",i="Click to republish";break;case"CONFIGURED_MANUALLY":c=(0,n.jsx)(m.default,{}),t="Published app configured manually";break;case"STALE":c=(0,n.jsx)(m.default,{}),t="This configuration is for an older version of the app";break;default:return null}var d=(0,n.jsx)($.Button,{onClick:l,text:t,iconLeft:c,colorway:r,loading:"DEPLOYING"===s});return"DEPLOYING"===s||"FINISHED"===s||"FAILED"===s?(0,n.jsxs)(n.Fragment,{children:[i?(0,n.jsx)(ee.Tooltip,{tooltip:i,children:d}):d,u&&"FAILED"===s?(0,n.jsx)($.Button,{onClick:u,iconLeft:(0,n.jsx)(j.default,{}),text:"Advanced configuration"}):null]}):(0,n.jsxs)(et.View,{clsx:(a={},(0,o._)(a,en.default.status,!0),(0,o._)(a,en.default.isConfiguredManually,"CONFIGURED_MANUALLY"===s),(0,o._)(a,en.default.isStale,"STALE"===s),a),row:!0,gap:8,align:"center",children:[c,(0,n.jsx)(J.Text,{children:t})]})}var ep=(0,K.cssRecord)({group:[Z.rcss.width("100%"),{"> div":{width:"100%"}}]});function ef(e){var t=e.status,r=void 0===t?"READY":t,i=e.onDeploy,a=e.openDeploymentsPane,o=e.isRedeploy,s=e.loading,l=e.state,u=(0,q.useTrackClick)().trackClick;if(!i&&!a)return null;if("READY"===r){if(i)return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(et.View,{css:ep.group,gap:6,justify:"start",align:"end",children:[(0,n.jsx)(V.SuggestDeployCreateNeonProductionDatabaseToggleSection,{state:l}),(0,n.jsxs)(et.View,{row:!0,gap:8,align:"center",justify:"end",children:[a?(0,n.jsx)($.Button,{onClick:function(){u({target:"configure_myself_button",productArea:"publishing"}),a()},iconLeft:(0,n.jsx)(j.default,{}),text:"Configure myself"}):null,(0,n.jsx)($.Button,{onClick:i,text:o?"Republish":"Publish now",iconLeft:(0,n.jsx)(v.default,{}),colorway:"primary",disabled:s})]})]})});if(a)return(0,n.jsx)($.Button,{onClick:a,text:"Open Publishing",iconLeft:(0,n.jsx)(v.default,{}),colorway:"primary"})}return(0,n.jsx)(ed,{status:r,onDeploy:i,openDeploymentsPane:a})}var em=e.i(293265),eh=e.i(76430),eg=e.i(782514),ev=(0,r.memo)(function(e){var t=(0,i.useDeploymentCurrentBuild)(),r=!!t,a=(0,eh.useIsExpoStackWithLaunchEnabled)(),o=(0,em.useAgentStackPlatformType)().agentStackPlatformType;return a?(0,n.jsx)(eo,{openDeploymentsPane:function(){return e.openPane({type:"deployments"})},isRedeploy:r}):o?(0,n.jsx)(ea,{openDeploymentsPane:function(){return e.openPane({type:"deployments"})},isRedeploy:r,agentStackPlatformType:o}):(0,n.jsx)(eg.TrackingHierarchyProvider,{hierarchy:{view:"suggest_deploy_in_chat"},children:(0,n.jsx)(es,{currentBuild:t,isRedeploy:r,openDeploymentsPane:function(){return e.openPane({type:"deployments"})},paneType:"agentChat"})})});e.s(["SuggestDeploy",()=>ev],10537);var ex=e.i(597853);e.i(653863);var ey=e.i(973519),eb=e.i(509908),eS=e.i(330069),e_=e.i(127704);function ew(e){var t=e.message,i=e.suggestedAutonomyLevel,o=e.onSwitchToAutonomousBuildMode,u=(0,s._)((0,r.useState)(!1),2),c=u[0],d=u[1],p=(0,ey.useGlobalModal)().show,f=(0,eS.useShouldSeeFreemiumExperience)().shouldSeeFreemiumExperience,m=(0,H.useFlag)({controlName:"flag-free-plan",default:!1});if(c)return null;var h=m&&f;return(0,n.jsxs)(Y.ShadesSurface,{elevate:"2x",br:"container",gap:4,px:8,py:6,children:[(0,n.jsx)(J.Text,{children:t}),(0,n.jsxs)(et.View,{row:!0,gap:4,align:"center",wrap:"wrap",children:[(0,n.jsx)($.Button,{text:"Dismiss",onClick:function(){(0,eb.trackAgentAnalyticsEvent)({action:"suggest_general_build_mode_dismissed"}),d(!0)}}),(0,n.jsx)($.Button,{variant:"default",colorway:"primary",iconRight:(0,n.jsx)(ex.default,{}),text:h?"Upgrade for Autonomous Agent":"Continue with Autonomous Agent",onClick:function(){return(0,a._)(function(){return(0,l._)(this,function(e){switch(e.label){case 0:if((0,eb.trackAgentAnalyticsEvent)({action:"suggest_general_build_mode_accepted",ctaLabel:"Continue with Autonomous Agent"}),!h)return[3,2];return[4,p("UpgradeEducationModal",{context:"agent_workspace_autonomous_mode_upsell",surface:"agent_chat",highlightedFeature:"autonomousBuildMode"})];case 1:return e.sent(),[2];case 2:return null==o||o(i),[2]}})})()},clsx:e_.default.continueButton})]})]})}e.s(["SuggestGeneralBuildMode",()=>ew],225821);var ej=e.i(87995),eT=e.i(878420),ek=e.i(64386);function eD(e){return(0,n.jsxs)(x.default,(0,ek._)((0,eT._)({},e),{children:[(0,n.jsx)("path",{d:"M12 2.25A9.751 9.751 0 1 1 2.25 12a.75.75 0 0 1 1.5 0 8.25 8.25 0 1 0 8.251-8.25 9 9 0 0 0-6.22 2.53l-.97.97H8a.75.75 0 0 1 0 1.5H3a.752.752 0 0 1-.133-.013l-.016-.003c-.014-.002-.026-.008-.04-.011-.033-.009-.066-.017-.098-.03-.03-.013-.056-.029-.083-.045a.746.746 0 0 1-.16-.118.746.746 0 0 1-.12-.16c-.015-.028-.031-.055-.043-.084A.748.748 0 0 1 2.25 8V3a.75.75 0 0 1 1.5 0v3.19l.988-.989a10.501 10.501 0 0 1 7.26-2.951H12Z"}),(0,n.jsx)("path",{d:"M12 6.25a.75.75 0 0 1 .75.75v4.536l3.585 1.793a.75.75 0 0 1-.67 1.342l-4-2A.75.75 0 0 1 11.25 12V7a.75.75 0 0 1 .75-.75Z"})]}))}e.s(["default",()=>eD],271280);var eC=e.i(401211),eE=(0,r.memo)(function(e){var t=e.suggestRollbackReason,r=e.onShowCheckpoints;return(0,n.jsxs)(Y.ShadesSurface,{elevate:"2x",br:"container",gap:8,py:8,px:12,children:[(0,n.jsxs)(et.View,{gap:4,children:[(0,n.jsx)(J.Text,{variant:"subheadDefault",children:"Choose a checkpoint to roll back to"}),(0,n.jsxs)(J.Text,{children:[t," ",(0,n.jsx)(ej.default,{href:"https://docs.replit.com/replitai/checkpoints-and-rollbacks#checkpoints-and-rollbacks",target:"_blank",children:"Learn more about rollbacks"})]})]}),(0,n.jsx)(et.View,{row:!0,gap:8,align:"center",justify:"start",children:(0,n.jsx)($.Button,{clsx:eC.default.inlineButton,size:"small",variant:"nofill",iconLeft:(0,n.jsx)(eD,{}),text:"View checkpoints",onClick:function(){(0,eb.trackAgentAnalyticsEvent)({action:"suggest_rollback_cta_clicked",ctaLabel:"View checkpoints"}),r()}})})]})});e.s(["SuggestRollback",()=>eE],202872)},694665,e=>{e.v({button:"TaskListCost-module__fVnFyG__button",loadingPlaceholder:"TaskListCost-module__fVnFyG__loadingPlaceholder","skeleton-data-loading":"TaskListCost-module__fVnFyG__skeleton-data-loading"})},562123,359699,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(76112),i=e.i(509908),a=e.i(136540),o=e.i(960178),s=e.i(751273),l=e.i(625484),u=e.i(694665);function c(e){var c=e.cents,d=e.isExpanded,p=e.setIsExpanded,f=(0,n.useCallback)(function(){p(!d),d||(0,i.trackAgentAnalyticsEvent)({action:"viewed_task_list_usage_cost"})},[d,p]);return(0,t.jsxs)(l.View,{row:!0,align:"center",gap:8,children:[(0,t.jsx)(a.IconButton,{alt:"Agent Usage",onClick:f,clsx:u.default.button,children:(0,t.jsx)(r.default,{})}),d?null==c?(0,t.jsx)(s.Tooltip,{tooltip:"Loading usage information…",children:(0,t.jsx)(l.View,{clsx:u.default.loadingPlaceholder})}):(0,t.jsxs)(o.Text,{color:"dimmer",variant:"small",children:["$",(c/100).toFixed(2)]}):null]})}e.s(["TaskListCost",()=>c],562123);var d=e.i(374106);e.i(877212);var p=e.i(924908);e.i(925218);var f=e.i(267103),m=e.i(641555);function h(e){var t,n=(0,p.useChatter)(),r=(0,f.useObservable)(n.sessions.agent.current),i=(0,m.useObservableMemo)(function(){return null==r?void 0:r.reduce(g,"global")},[r],{default:void 0}),a=null==i||null==(t=i.event)?void 0:t.created;return(0,m.useObservableMemo)(function(){return e&&a?null==r?void 0:r.agent.usage(a):void 0},[r,a,e])}var g={direction:"reverse",state:{event:void 0},reducer:function(e,t){if((0,d.isEventAgentToolDataKind)(e,"endOfRunSummaryData")||(0,d.isEventContentsKind)(e,"sessionCreationEventContents"))return t.event=e,!1}};e.s(["useAgentUsageSinceLastBillingEvent",()=>h],359699)},197761,e=>{e.v({rotate:"TaskStatusIcon-module__rEH1rq__rotate",rotatingIcon:"TaskStatusIcon-module__rEH1rq__rotatingIcon"})},638274,e=>{e.v({chevron:"TaskListDrawer-module__WGwI0G__chevron",chevronIconContainer:"TaskListDrawer-module__WGwI0G__chevronIconContainer",drawerItems:"TaskListDrawer-module__WGwI0G__drawerItems",drawerSurface:"TaskListDrawer-module__WGwI0G__drawerSurface",drawerSurfaceProposed:"TaskListDrawer-module__WGwI0G__drawerSurfaceProposed",emptyIconContainer:"TaskListDrawer-module__WGwI0G__emptyIconContainer",expandableTaskItem:"TaskListDrawer-module__WGwI0G__expandableTaskItem",expandedContent:"TaskListDrawer-module__WGwI0G__expandedContent",showMoreButton:"TaskListDrawer-module__WGwI0G__showMoreButton",statusIconContainer:"TaskListDrawer-module__WGwI0G__statusIconContainer",taskContent:"TaskListDrawer-module__WGwI0G__taskContent",truncatedSection:"TaskListDrawer-module__WGwI0G__truncatedSection"})},474429,e=>{e.v({agentAction:"EventRenderer-module__RTGgnG__agentAction",eventContainer:"EventRenderer-module__RTGgnG__eventContainer",userMessage:"EventRenderer-module__RTGgnG__userMessage"})},117328,690767,e=>{"use strict";e.s(["EventContainer",()=>eC,"EventRenderer",()=>eD],117328);var t=e.i(297083),n=e.i(878420),r=e.i(64386),i=e.i(886513),a=e.i(817556),o=e.i(276385),s=e.i(389959),l=e.i(992785);e.i(925218);var u=e.i(641555),c=e.i(257982),d=e.i(597865),p=e.i(418689),f=e.i(831147),m=e.i(287999),h=e.i(526962),g=e.i(316799),v=e.i(68612),x=e.i(191654),y=e.i(840732),b=e.i(314535),S=e.i(202975),_=e.i(774671),w=e.i(422145),j=e.i(66373),T=e.i(682872),k=e.i(489172),D=e.i(956002),C=e.i(71834),E=e.i(10537),A=e.i(225821),R=e.i(202872),I=e.i(530658),P=e.i(82259),M=e.i(806930),O=e.i(250479),V=e.i(203576),N=e.i(178815),B=e.i(509908),L=e.i(166876),U=e.i(721281),H=e.i(346715),F=e.i(167392),q=e.i(568430),z=e.i(562123),G=e.i(359699),W=e.i(374106);e.i(877212);var K=e.i(924908),Y=e.i(267103),Z=e.i(149448),$=e.i(183035),X=e.i(851722),Q=e.i(806685),J=e.i(429662),ee=e.i(116235);function et(e){return(0,o.jsx)(ee.default,(0,r._)((0,n._)({},e),{children:(0,o.jsx)("path",{d:"M21.47 9.47a.75.75 0 1 1 1.06 1.06l-7.5 7.5a.75.75 0 0 1-1.06 0l-1.5-1.5a.75.75 0 1 1 1.06-1.06l.97.97 6.97-6.97ZM17.47 5.47a.75.75 0 1 1 1.06 1.06l-11 11a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 1 1 1.06-1.06L7 15.94 17.47 5.47Z"})}))}var en=e.i(480028),er=e.i(751273),ei=e.i(625484),ea=e.i(197761);function eo(e){var t=e.status,n=e.oldStatus,r=e.tooltipContent,i=e.color,a=null!=i?i:en.tokens.foregroundDimmer,s=null!=i?i:en.tokens.foregroundDimmest;switch(t){case P.TaskStatus.TASK_STATUS_COMPLETED:if(n===P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW)return(0,o.jsx)(er.Tooltip,{tooltip:null!=r?r:"Task completed & reviewed",children:(0,o.jsx)(et,{color:a,size:16})});return(0,o.jsx)(er.Tooltip,{tooltip:null!=r?r:"Task completed",children:(0,o.jsx)($.default,{color:a,size:16})});case P.TaskStatus.TASK_STATUS_IN_PROGRESS:return(0,o.jsx)(er.Tooltip,{tooltip:null!=r?r:"Task in progress",children:(0,o.jsx)(ei.View,{clsx:ea.default.rotatingIcon,align:"center",justify:"center",children:(0,o.jsx)(Q.default,{color:a,size:16})})});case P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW:return(0,o.jsx)(er.Tooltip,{tooltip:null!=r?r:"Task completed, pending review",children:(0,o.jsx)(J.default,{color:a,size:16})});case P.TaskStatus.TASK_STATUS_PENDING:default:return(0,o.jsx)(er.Tooltip,{tooltip:null!=r?r:"Task pending",children:(0,o.jsx)(X.default,{color:s,size:16})})}}var es=e.i(907371),el=e.i(173703),eu=e.i(719976),ec=e.i(960178),ed=e.i(916271),ep=e.i(638274);function ef(e){var t=e.task,r=e.approvalStatus,i=(0,I._)((0,s.useState)(!1),2),a=i[0],l=i[1],u="proposed"!==r;return(0,o.jsxs)(ei.View,{gap:2,children:[(0,o.jsxs)(ei.View,{clsx:[ep.default.taskItem,ep.default.expandableTaskItem],row:!0,justify:"space-between",align:"center",gap:8,px:8,py:4,role:"button",children:[(0,o.jsx)(ei.View,{grow:!0,shrink:!0,row:!0,align:"center",gap:4,onClick:function(){return l(!a)},children:(0,o.jsxs)(ec.Text,{clsx:ep.default.taskContent,color:eh(t.status,r),shrink:!0,children:[(0,L.getTaskSummary)(t)," ",(0,o.jsx)(F.default,{rotate:180*!!a,clsx:ep.default.chevron,color:en.tokens.foregroundDimmest})]})}),u?(0,o.jsx)(ei.View,{clsx:ep.default.statusIconContainer,p:4,align:"center",justify:"center",children:(0,o.jsx)(eo,(0,n._)({},t))}):null]}),a?(0,o.jsx)(ei.View,{clsx:ep.default.expandedContent,pr:16,pt:4,pl:24,pb:8,children:t.extraDetails?(0,o.jsx)(ed.default,{children:t.extraDetails}):(0,o.jsx)(ec.Text,{color:"dimmer",children:t.content})}):null]})}function em(e){var t=e.task,r=e.approvalStatus,i="proposed"!==r;return(0,o.jsxs)(ei.View,{clsx:ep.default.taskItem,row:!0,justify:"space-between",align:"center",gap:8,px:8,py:4,children:[(0,o.jsx)(ei.View,{grow:!0,shrink:!0,children:(0,o.jsx)(ec.Text,{clsx:ep.default.taskContent,color:eh(t.status,r),children:(0,L.getTaskSummary)(t)})}),i?(0,o.jsx)(ei.View,{clsx:ep.default.statusIconContainer,p:4,align:"center",justify:"center",children:(0,o.jsx)(eo,(0,n._)({},t))}):null]})}function eh(e,t){return"proposed"===t?"default":e===P.TaskStatus.TASK_STATUS_COMPLETED||e===P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW?"dimmest":e===P.TaskStatus.TASK_STATUS_PENDING?"dimmer":"default"}function eg(e){var t=e.tasks,n=e.approvalStatus,r=e.areTaskDetailsExpandable,i=void 0!==r&&r;return(0,o.jsx)(o.Fragment,{children:t.map(function(e){return i&&(0,L.hasExpandableTaskDetails)(e)?(0,o.jsx)(ef,{task:e,approvalStatus:n},e.id):(0,o.jsx)(em,{task:e,approvalStatus:n},e.id)})})}function ev(e){var t=e.innerRef,r=e.approvalStatus,a=e.placement,l=e.isCollapsed,u=e.setIsCollapsed,c=e.areTaskDetailsExpandable,d=e.agentUsage,p=e.isCostInfoExpanded,f=e.setIsCostInfoExpanded,m=e.isCostInfoHidden,h=(0,i._)(e,["innerRef","approvalStatus","placement","isCollapsed","setIsCollapsed","areTaskDetailsExpandable","agentUsage","isCostInfoExpanded","setIsCostInfoExpanded","isCostInfoHidden"]),g=null!=a?a:"proposed"===r?"bottom":"top",v=h.tasks,x=(0,I._)((0,s.useState)(!1),2),y=x[0],b=x[1],S=(0,s.useRef)(null),_=v.filter(function(e){return e.status===P.TaskStatus.TASK_STATUS_COMPLETED||e.status===P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW}).length,w=(0,L.isFullyCompletedTaskList)(v),j=(0,s.useMemo)(function(){var e=[],t=[],n=[],r=[];return v.forEach(function(i){switch(i.status){case P.TaskStatus.TASK_STATUS_COMPLETED:e.push(i);break;case P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW:r.push(i);break;case P.TaskStatus.TASK_STATUS_IN_PROGRESS:t.push(i);break;case P.TaskStatus.TASK_STATUS_PENDING:default:n.push(i)}}),{completed:e,completedPendingReview:r,inProgress:t,pending:n}},[v]),T=!w&&j.completed.length>3,k=T&&!y?j.completed.length-3:0,D=T&&!y?j.completed.slice(k):j.completed,C=(0,s.useMemo)(function(){return j.inProgress[0]},[j.inProgress]),E=(0,s.useMemo)(function(){return"proposed"===r?"Planned tasks":w?"Completed tasks":l&&C?(0,L.getTaskSummary)(C):"In progress tasks"},[r,l,C,w]),A=(0,es.useCreateInteractive)({variant:"nofill",borderRadius:0});return(0,o.jsxs)(el.ShadesSurface,{clsx:[ep.default.drawerSurface,(0,U._)({},ep.default.drawerSurfaceProposed,"proposed"===r)],gap:4,grow:1,shrink:1,innerRef:t,elevate:"approved"===r&&"2x",children:[(0,o.jsxs)(el.ShadesSurface,{clsx:A.clsx,style:A.style,elevate:!1,border:l?void 0:{side:"bottom",strength:"subtle"},row:!0,gap:4,align:"center",justify:"space-between",py:8,pl:4,pr:12,onClick:function(){return u(function(e){return!e})},children:[(0,o.jsxs)(ei.View,{row:!0,gap:8,align:"center",shrink:!0,children:[(0,o.jsx)(er.Tooltip,{tooltip:l?"Expand":"Collapse",children:(0,o.jsx)(ei.View,{clsx:ep.default.chevronIconContainer,align:"center",justify:"center",children:"bottom"===g?l?(0,o.jsx)(q.default,{}):(0,o.jsx)(F.default,{}):l?(0,o.jsx)(F.default,{}):(0,o.jsx)(q.default,{})})}),(0,o.jsx)(ec.Text,{color:"dimmer",ref:S,shrink:!0,multiline:!1,showTooltipOnTruncate:!0,children:E})]}),"proposed"!==r?(0,o.jsxs)(ei.View,{row:!0,gap:8,align:"center",children:[(0,o.jsxs)(ec.Text,{color:"dimmer",variant:"small",children:[_," / ",v.length]}),C&&l?(0,o.jsx)(ei.View,{pr:2,children:(0,o.jsx)(eo,(0,n._)({},C))}):null,void 0!==m&&m||l?null:(0,o.jsx)(z.TaskListCost,{cents:null==d?void 0:d.cents,isExpanded:p,setIsExpanded:f})]}):null]}),l?null:(0,o.jsxs)(ei.View,{clsx:ep.default.drawerItems,shrink:!0,px:2,pb:8,children:[T&&!y?(0,o.jsx)(ei.View,{clsx:ep.default.truncatedSection,children:(0,o.jsx)(ei.View,{row:!0,justify:"center",align:"center",p:2,children:(0,o.jsx)(eu.PillButton,{clsx:ep.default.showMoreButton,onClick:function(){return b(!0)},text:"Show ".concat(k," more completed task").concat(1===k?"":"s")})})}):null,(0,o.jsx)(eg,{tasks:(0,H._)(D).concat((0,H._)(j.completedPendingReview),(0,H._)(j.inProgress),(0,H._)(j.pending)),approvalStatus:r,areTaskDetailsExpandable:void 0!==c&&c}),0===v.length?(0,o.jsxs)(ei.View,{row:!0,px:2,align:"center",gap:4,children:[(0,o.jsx)(ei.View,{clsx:ep.default.emptyIconContainer}),(0,o.jsx)(ec.Text,{color:"dimmest",children:"No tasks to show"})]}):null]})]})}function ex(e){var t,a,l,u=e.approvalStatus,c=(0,i._)(e,["approvalStatus"]),d="approved"===u,p=(0,I._)((0,s.useState)(null!=d?d:"approved"===u),2),f=p[0],m=p[1],h=(0,I._)((0,s.useState)(!1),2),g=h[0],v=h[1],x=(t=(0,K.useChatter)(),a=(0,Y.useObservable)(t.sessions.agent.current),!!(null==(l=(0,Z.useLastEvent)(a))?void 0:l.event)&&(0,W.isEventAgentToolDataKind)(l.event,"endOfRunSummaryData")),y=(0,G.useAgentUsageSinceLastBillingEvent)(!x&&g);return(0,o.jsx)(ev,(0,r._)((0,n._)({},c),{approvalStatus:u,isCollapsed:f,setIsCollapsed:m,isCostInfoExpanded:g,setIsCostInfoExpanded:v,agentUsage:y,isCostInfoHidden:x}))}e.s(["TaskListDrawer",()=>ex,"TaskListItems",()=>eg],690767);var ey=e.i(140487);function eb(e){var t=e.isAwaitingTaskListApproval,n=(0,i._)(e,["isAwaitingTaskListApproval"]).eventState;return void 0!==t&&t?null:(0,o.jsx)(O.StaticToolUse,{toolDataKind:"taskListData",summary:n===P.EventState.IN_PROGRESS?"Creating task list…":"Created task list"})}function eS(e){var t=e.onOpenCommit,n=e.tasks,r=e.commitData,i=e.id,a=e.sessionId,l=(0,I._)((0,s.useState)(!1),2),u=l[0],c=l[1],d=(0,s.useCallback)(function(){c(function(e){return!e}),u||(0,B.trackAgentAnalyticsEvent)({action:"event_item_expanded",eventId:i,sessionId:a,toolDataKind:"taskListData"})},[i,a,u]),p=(0,s.useCallback)(function(){(null==r?void 0:r.commitId)&&t(r.commitId)},[r,t]);return(0,o.jsx)(V.ExpandableFeedContent,{expanded:u,onToggle:d,triggerContent:(0,o.jsxs)(ei.View,{row:!0,align:"center",gap:8,grow:!0,shrink:!0,children:[(0,o.jsx)(O.ToolUseIconSurface,{children:(0,o.jsx)(N.ToolDataIcon,{kind:"taskListData",color:en.tokens.foregroundDimmest,size:O.TOOL_USE_ICON_SIZE})}),(0,o.jsx)(ec.Text,{color:"dimmest",children:"Completed tasks"})]}),children:(0,o.jsxs)(el.ShadesSurface,{elevate:"1x",p:2,border:"subtle",br:6,children:[(0,o.jsx)(eg,{tasks:n,approvalStatus:"approved"}),(null==r?void 0:r.commitId)?(0,o.jsx)(el.ShadesSurface,{background:!1,border:{side:"top"},p:2,justify:"end",row:!0,children:(0,o.jsx)(ey.Button,{variant:"nofill",size:"small",onClick:p,text:"View changes",iconLeft:(0,o.jsx)(M.default,{})})}):null]})})}function e_(e){var t=e.completedTasks,i=e.tasks,a=e.commitData,s=e.onOpenCommit;if((0,L.isFullyCompletedTaskList)(i)&&i.length>1)return(0,o.jsx)(eS,(0,n._)({},e));var l=en.tokens.foregroundDimmest;return(0,o.jsx)(ei.View,{gap:8,py:4,children:t.map(function(e){return a&&a.commitId?(0,o.jsx)(O.OpenableToolUse,{toolDataKind:"taskListData",icon:(0,o.jsx)(eo,(0,r._)((0,n._)({},e),{color:l})),summary:(0,L.getTaskSummary)(e),label:"View changes",onClick:function(){s(a.commitId)}},e.id):(0,o.jsx)(O.StaticToolUse,{toolDataKind:"taskListData",icon:(0,o.jsx)(eo,(0,r._)((0,n._)({},e),{color:l})),summary:(0,L.getTaskSummary)(e)},e.id)})})}var ew=e.i(798790),ej=e.i(484921);function eT(e){var t=e.created,n=e.agentConfig;return(0,o.jsx)(ew.UserMessageContainer,{created:t,agentConfig:n,children:(0,o.jsx)(ew.UserMessageSurface,{agentMode:P.AgentMode.AGENT_MODE_GENERAL,acknowledged:!0,children:(0,o.jsx)(ec.Text,{children:ej.TASK_LIST_START_BUILDING_MESSAGE})})})}var ek=e.i(474429),eD=(0,s.memo)(function(e){var I=e.data,P=e.subagentRenderer,M=(0,i._)(e,["data","subagentRenderer"]),V=M.openPane,N=(0,u.useObservableMemo)(function(){return I.select(function(e){return e},l.default)},[I]),B=(0,s.useCallback)(function(e){return V({type:"git",data:{mode:{type:h.GitPaneModeType.COMMIT,hash:e}}})},[V]),L=(0,g.useLinkUnlinkSecrets)(M.secrets.replaceAllExternalSecrets),U=L.linkSecrets,H=L.unlinkSecrets,F=(0,m.useCheckpoints)(),q=F.renameCommit,z=F.findCommit,G=(0,d.default)(function(e){return(0,t._)(function(){return(0,a._)(this,function(t){switch(t.label){case 0:return[4,e.status()];case 1:return[2,t.sent()]}})})()},[]);if(!N)return(0,o.jsx)(ei.View,{children:"No data found for event"});switch(N.type){case"planProposal":return(0,o.jsx)(eC,{children:(0,o.jsx)(T.PlanProposal,(0,n._)({},N))});case"userMessage":return(0,o.jsx)(eC,{clsx:ek.default.userMessage,children:(0,o.jsx)(ew.UserMessage,{message:N.message,attachments:N.uploadedFiles,acknowledged:N.acknowledged,created:N.created,readFile:M.readFile,targetedElement:N.targetedElement,openPane:M.openPane,agentConfig:N.agentConfig,requestedStackBlueprint:N.requestedStackBlueprint})});case"agentMessage":return(0,o.jsx)(eC,{children:(0,o.jsx)(v.AgentMessage,{eventId:N.id,state:N.state,message:N.message,requestedSecrets:N.requestedSecrets,requestedEnvVars:N.requestedEnvVars,waitingOnUser:N.waitingOnUser,sessionId:N.sessionId,openPane:M.openPane,secrets:M.secrets,sendAskUserForActionResponse:M.sendAskUserForActionResponse,linkSecrets:U,unlinkSecrets:H})});case"setupImport":return(0,o.jsx)(eC,{children:(0,o.jsx)(C.SetupImport,{sessionId:N.sessionId,importSource:N.importSource,state:N.state})});case"agentToolUse":return(0,o.jsx)(eC,{clsx:ek.default.agentAction,children:(0,o.jsx)(O.ToolUse,{toolName:N.toolName,toolDataKind:N.toolDataKind,summary:N.summary,data:N.data,sessionId:N.sessionId,id:N.id,openPane:M.openPane})});case"checkpoint":var W,K,Y,Z=(null==G?void 0:G.error)===null&&G.commit===N.commitId,$=!!((null==G?void 0:G.error)===null&&G.changes&&G.changes.length>0),X=z(N.commitId);return(0,o.jsx)(eC,{children:(0,o.jsx)(b.Checkpoint,{eventState:N.state,openPane:V,onOpenCommit:B,onSessionChange:M.onSessionChange,checkpoint:(0,r._)((0,n._)({},N),{title:null!=(W=null==X?void 0:X.customSubject)?W:N.title,isLatest:Z,isDirty:$,missingAgentState:null!=(K=null==X?void 0:X.missingAgentState)&&K,beforeReplCreation:null!=(Y=null==X?void 0:X.beforeReplCreation)&&Y}),onRenameTitle:q})});case"endOfRunSummary":return(0,o.jsx)(eC,{children:(0,o.jsx)(S.EndOfRunSummary,{summary:N})});case"suggestDeploy":return(0,o.jsx)(eC,{children:(0,o.jsx)(E.SuggestDeploy,{openPane:V})});case"suggestRollback":return(0,o.jsx)(eC,{children:(0,o.jsx)(R.SuggestRollback,{suggestRollbackReason:N.suggestRollbackReason,onShowCheckpoints:M.onShowCheckpoints})});case"suggestGeneralBuildMode":return(0,o.jsx)(eC,{children:(0,o.jsx)(A.SuggestGeneralBuildMode,{message:N.message,suggestedAutonomyLevel:N.suggestedAutonomyLevel,onSwitchToAutonomousBuildMode:M.onSwitchToAutonomousBuildMode})});case"askUserForAction":return(0,o.jsx)(eC,{children:(0,o.jsx)(y.AskUserForAction,(0,r._)((0,n._)({},N),{eventId:N.id,sendAskUserForActionResponse:M.sendAskUserForActionResponse,secrets:M.secrets,openPane:M.openPane,linkSecrets:U,unlinkSecrets:H}))});case"taskListApproval":return(0,o.jsx)(eC,{children:(0,o.jsx)(eT,{created:N.created,agentConfig:N.agentConfig})});case"revert":return(0,o.jsx)(eC,{children:(0,o.jsx)(D.RollbackStatus,{event:N,onSessionChange:M.onSessionChange})});case"taskList":if("itemsCompleted"===N.subType)return(0,o.jsx)(eC,{children:(0,o.jsx)(e_,(0,r._)((0,n._)({},N),{onOpenCommit:B,tasks:N.tasks,commitData:N.commitData,estimatedUsageCents:N.estimatedUsageCents}))});if("creation"===N.subType)return(0,o.jsx)(eC,{children:(0,o.jsx)(eb,(0,r._)((0,n._)({},N),{isAwaitingTaskListApproval:M.isAwaitingTaskListApproval}))});return null;case"error":return(0,o.jsx)(eC,{children:(0,o.jsx)(_.ErrorMessage,{message:N.message,shortMessage:N.shortMessage})});case"tipRecommendation":return M.tipData?(0,o.jsx)(eC,{children:(0,o.jsx)(x.TipRecommendation,{event:N,tipData:M.tipData,bonsaiTourTipInfo:M.bonsaiTourTipInfo,openPane:V,onNewSession:M.onNewSession})}):null;case"subagent":if(!P)return null;return(0,o.jsx)(eC,{children:(0,o.jsx)(P,(0,n._)({data:N},M))});case"planApproval":return(0,o.jsx)(eC,{children:(0,o.jsx)(j.PlanApproval,{created:N.created,initialBuildMode:N.initialBuildMode,agentConfig:N.agentConfig})});case"convertMockupToAppRequest":return(0,o.jsx)(p.ConvertMockupToAppRequest,{message:N.message,id:N.id,created:N.created});case"convertMockupToAppResponse":return(0,o.jsx)(f.ConvertMockupToAppResponse,{created:N.created,additionalComments:N.additionalComments});case"initialBuildPhaseApproval":return(0,o.jsx)(eC,{children:(0,o.jsx)(w.InitialBuildPhaseApproval,{created:N.created,agentConfig:N.agentConfig,initialBuildPhase:N.initialBuildPhase})});case"queryRequest":return(0,o.jsx)(eC,{children:(0,o.jsx)(k.QueryRequest,{id:N.id,created:N.created,queries:N.queries,responses:N.responses})});default:(0,c.default)(N)}});function eC(e){var t=e.children,a=(0,i._)(e,["children"]);return(0,o.jsx)(ei.View,(0,r._)((0,n._)({clsx:ek.default.eventContainer},a),{children:t}))}}]);

//# debugId=8316dfd9-0e37-0cbb-9a6f-77f7c5eb2e4b
//# sourceMappingURL=c675010011205db9.js.map