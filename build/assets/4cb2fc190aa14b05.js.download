;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="7d868166-7061-b833-a2a5-b9c61cfb919f")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,873169,e=>{"use strict";var n=e.i(878420),t=e.i(64386),r=e.i(276385),o=e.i(116235);function i(e){return(0,r.jsx)(o.default,(0,t._)((0,n._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"m14 1.25.038.001a3.151 3.151 0 0 1 2.196.925l3.586 3.586A3.156 3.156 0 0 1 20.75 8v12A2.75 2.75 0 0 1 18 22.75H6A2.75 2.75 0 0 1 3.25 20V4A2.75 2.75 0 0 1 6 1.25h8Zm-8 1.5A1.25 1.25 0 0 0 4.75 4v16A1.25 1.25 0 0 0 6 21.25h12A1.25 1.25 0 0 0 19.25 20V8.75H15A1.75 1.75 0 0 1 13.25 7V2.75H6ZM14.75 7a.25.25 0 0 0 .25.25h4.07a1.65 1.65 0 0 0-.306-.424l-3.591-3.59a1.648 1.648 0 0 0-.423-.306V7Z",clipRule:"evenodd"})}))}e.s(["default",()=>i])},668461,671536,e=>{"use strict";var n=e.i(878420),t=e.i(64386),r=e.i(276385),o=e.i(913965);function i(e){return(0,r.jsx)(o.default,(0,t._)((0,n._)({},e),{children:(0,r.jsx)("path",{fill:"#AD5700",d:"M3 2 4.64 20.4l7.35 2.045 7.371-2.047L21 2H3Zm3.404 4.367L6.35 5.76h5.643v2.256h-3.18l.205 2.312h2.974v2.256H6.959l-.554-6.219Zm10.772 4.568-.53 5.942-.034.38-4.623 1.284-4.616-1.283-.316-3.544H9.32l.16 1.8 2.512.678 2.513-.68.261-2.926h-2.767v-2.257h5.23l-.055.606h.003Zm.408-4.568L17.48 7.51l-.045.507H12V5.762h5.638l-.054.605Z"})}))}function a(e){return(0,r.jsx)(o.default,(0,t._)((0,n._)({},e),{children:(0,r.jsx)("path",{fill:"#0093B0",d:"M9.804 12.041h4.962c1.382 0 2.485-1.137 2.485-2.525v-4.73c0-1.347-1.136-2.359-2.485-2.583A15.437 15.437 0 0 0 12.178 2c-.849.005-1.66.076-2.374.203-2.103.37-2.485 1.149-2.485 2.582V6.68h4.968v.631H5.454c-1.444 0-2.708.868-3.104 2.52-.456 1.892-.477 3.073 0 5.05.353 1.47 1.196 2.519 2.64 2.519H6.7v-2.27c0-1.64 1.419-3.087 3.104-3.087ZM9.49 5.417a.938.938 0 0 1-.932-.944c0-.524.416-.95.932-.95.513 0 .933.426.933.95a.938.938 0 0 1-.933.944Zm12.728 4.412c-.356-1.438-1.038-2.52-2.484-2.52h-1.865v2.206c0 1.71-1.45 3.151-3.104 3.151H9.804c-1.36 0-2.485 1.164-2.485 2.525v4.731c0 1.347 1.17 2.138 2.485 2.525 1.573.463 3.08.546 4.962 0 1.251-.362 2.485-1.091 2.485-2.525v-1.894h-4.963v-.63h7.448c1.444 0 1.981-1.008 2.484-2.52.519-1.557.497-3.053 0-5.05Zm-7.14 9.463c.516 0 .933.422.933.943 0 .524-.417.95-.932.95a.943.943 0 0 1-.933-.95c0-.522.419-.943.933-.943Z"})}))}e.s(["default",()=>i],668461),e.s(["default",()=>a],671536)},290308,(e,n,t)=>{n.exports=function(e,n,t){var r=-1,o=e.length;n<0&&(n=-n>o?0:o+n),(t=t>o?o:t)<0&&(t+=o),o=n>t?0:t-n>>>0,n>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+n];return i}},693482,e=>{"use strict";var n=e.i(701105);function t(e){return new n._(e)}e.s(["_",()=>t])},638472,e=>{"use strict";var n=e.i(878420),t=e.i(792129),r=e.i(227062),o=e.i(627922),i=e.i(562563),a=e.i(297083),s=e.i(817556),u=e.i(960933),l=u.Type.Object({token:u.Type.String()}),c=e.i(167626),d=e.i(64386),f="SERVER",p={codec:o.BinaryCodec,heartbeatIntervalMs:2500,heartbeatsUntilDead:4,sessionDisconnectGraceMs:1e4,connectionTimeoutMs:1e4,handshakeTimeoutMs:1e4};(0,n._)({},p);var v=[4002,4004],x=(0,d._)((0,n._)({},p),{baseIntervalMs:250,maxJitterMs:250,maxBackoffMs:32e3,attemptBudgetCapacity:5,budgetRestoreIntervalMs:500,isFatalConnectionError:function(e){return!!((0,c._)(e,o.WebSocketCloseError)&&v.includes(e.code))}}),h=r.RIVER_VERSION,g=o.ProtocolError;e.s(["PID2_SERVER_ID",()=>f,"RIVER_VERSION",()=>h,"RiverProtocolError",()=>g,"default",0,function(e,r,o,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"info",d=arguments.length>5?arguments[5]:void 0,p=new i.WebSocketClientTransport(r,e,d?(0,n._)({},x,d):x);return p.bindLogger(u,c),{client:(0,t.createClient)(p,f,{eagerlyConnect:!1,connectOnInvoke:!1,handshakeOptions:(0,t.createClientHandshakeOptions)(l,function(){return(0,a._)(function(){var e;return(0,s._)(this,function(n){switch(n.label){case 0:return e={},[4,o()];case 1:return[2,(e.token=n.sent(),e)]}})})()})}),transport:p}}],638472)},37292,57168,e=>{"use strict";var n=e.i(878420),t=e.i(64386),r=e.i(389959),o=e.i(131141),i=e.i(541793),a=e.i(161322),s=e.i(719518),u=e.i(561979),l=e.i(830675),c=e.i(858248),d=e.i(709485),f={workspace:!0,bsod:!1},p="undefined-event-id";function v(e,t){var r=p;return l.withScope(function(o){var i;o.setTags((0,n._)({},f,null!=(i=null==t?void 0:t.tags)?i:{})),(null==t?void 0:t.componentStack)&&o.setContext("react",{componentStack:t.componentStack}),(null==t?void 0:t.extras)&&o.setExtras(t.extras),r=l.captureException(e)||p}),r}function x(e,r){return(0,c.track)(d.events.WORKSPACE,{action:"workspace_crashed"}),(r=null!=r?r:{}).tags=(0,t._)((0,n._)({},r.tags),{workspace:!0,bsod:!0}),u.datadogRum.addError(e,(0,n._)({},r.tags)),v(e,r)}function h(e,r){return(r=null!=r?r:{}).tags=(0,t._)((0,n._)({},r.tags),{workspace:!0,bsod:!1}),v(e,r)}e.s(["captureFatalWorkspaceException",()=>x,"captureNonFatalWorkspaceException",()=>h],57168);var g=(0,i.atom)(null),m=(0,i.atom)(null,function(e,r,o){var i=o.error,a=o.tags,s=o.extras,u=o.componentStack,l=o.origin,c=(0,t._)((0,n._)({},a),{origin:l});"statusCode"in i?c.statusCode=i.statusCode:"status"in i&&(c.statusCode=i.status),e(g)||r(g,{eventId:x(i,{tags:c,extras:s,componentStack:u}),error:i,componentStack:u,sentry:{tags:c,extras:s},origin:l})}),E=(0,i.atom)(null,function(e,n){n(g,null)}),_=(0,i.atom)(new Map);function I(){return(0,s.useAtomCallback)((0,r.useCallback)(function(e,n,t){var r=t.filePath;return e(_).get(r)},[]))}function b(){return(0,s.useAtomCallback)((0,r.useCallback)(function(e,n,t){var r=t.filePath,i=t.version;n(_,function(e){return(0,o.produce)(e,function(e){e.set(r,i)})})},[]))}function y(){return(0,s.useAtomCallback)((0,r.useCallback)(function(e,n,t){var r=t.filePath;n(_,function(e){return(0,o.produce)(e,function(e){e.delete(r)})})},[]))}function S(){return(0,a.useSetAtom)(m)}function w(){return[(0,a.useAtomValue)(g),S()]}function A(){return(0,a.useSetAtom)(E)}e.s(["useBsod",()=>w,"useClearBsod",()=>A,"useDeleteBsodFilePathVersion",()=>y,"useGetBsodFileVersionByPath",()=>I,"useSetBsodFilePathVersion",()=>b,"useThrowBsod",()=>S],37292)},545816,e=>{e.v({button:"ModalPleaseRefresh-module__Xw30la__button",closeButton:"ModalPleaseRefresh-module__Xw30la__closeButton",header:"ModalPleaseRefresh-module__Xw30la__header",root:"ModalPleaseRefresh-module__Xw30la__root"})},400081,376847,400082,e=>{"use strict";e.s(["Pid2Context",()=>F,"Pid2Provider",()=>Z,"usePid2InternalsContextDoNotUseOrYouWillBeFired",()=>O],400081);var n=e.i(148382),t=e.i(297083),r=e.i(878420),o=e.i(64386),i=e.i(530658),a=e.i(817556),s=e.i(276385),u=e.i(389959),l=e.i(830675),c=e.i(131141),d=e.i(161322),f=e.i(179104),p=e.i(671901),v=e.i(638472),x=e.i(993796),h=e.i(289074),g=e.i(664152),m=e.i(441329),E=e.i(668106),_=e.i(116680),I=e.i(37292),b=e.i(485273),y=e.i(602686),S=e.i(820228),w=e.i(921521),A=e.i(140487),C=e.i(136540),k=e.i(739521),R=e.i(960178),P=e.i(625484),M=e.i(545816);let L=function(e){var n=e.isOpen,t=e.text,r=e.disableHomeButton,o=e.onDismiss,i=(0,b.useRouter)(),a=(0,m.isInBonsaiWebview)(i),u=(0,w.default)();return(0,s.jsx)(k.Modal,{preventClose:!0,isOpen:n,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,s.jsxs)(P.View,{gap:16,clsx:M.default.root,children:[o?(0,s.jsx)(C.IconButton,{onClick:o,alt:"Close",clsx:M.default.closeButton,children:(0,s.jsx)(y.default,{size:16})}):null,(0,s.jsxs)(P.View,{row:!0,gap:16,align:"center",children:[(0,s.jsx)(S.default,{size:24}),(0,s.jsx)(R.Header,{clsx:M.default.header,level:2,variant:"subheadBig",children:"Please Refresh"})]}),(0,s.jsxs)(P.View,{pr:32,gap:16,children:[(0,s.jsx)(R.Text,{textWrap:"pretty",children:null!=t?t:"Your connection to this App has been temporarily interrupted.\n            Usually this is because of a network issue."}),a?(0,s.jsx)(R.Text,{children:"If the issue continues please logout and re-login."}):null]}),(0,s.jsxs)(P.View,{row:!0,gap:16,children:[r||a||u?null:(0,s.jsx)(A.Button,{clsx:M.default.button,text:"Back to Home",onClick:function(){i.push("/home","~/")}}),(0,s.jsx)(A.Button,{text:"Refresh",colorway:"primary",clsx:M.default.button,onClick:function(){window.location.reload()}})]})]})})};e.s(["default",0,L],376847);var T=e.i(386962),j=e.i(635984),B=function(e,n,t){var r;if(g.logger[null!=t?t:"info"](e,{river:n,riverTarget:"pid2",riverVersion:v.RIVER_VERSION}),null==n||null==(r=n.tags)?void 0:r.includes("invariant-violation")){var o=Error(e);l.withScope(function(e){e.setTag("pid2",!0),e.setExtras(n),l.captureException(o)})}},D=window.location.search.includes("debug=1")?function(e,n,t){console[null!=t?t:"info"](e,n),B(e,n,t)}:B,V=n.default.env.CI?{connectionTimeoutMs:6e4,handshakeTimeoutMs:6e4,sessionDisconnectGraceMs:12e4}:{};function U(e){var n=e.currentUsername,r=e.replId,o=e.children,x=(0,I.useThrowBsod)(),g=(0,d.useSetAtom)(h.connectionStateAtom),b=(0,d.useSetAtom)(h.connectionKillActionsAtom),y=(0,m.useIsInMobileWorkspace)(),S=(0,i._)((0,u.useState)(null),2),w=S[0],A=S[1],C=(0,i._)((0,u.useState)(!1),2),k=C[0],R=C[1];return(0,u.useEffect)(function(){var e,o,s,u,d,h,m,I,S,w,C,k,P,M="".concat(n,"-").concat((0,f.nanoid)(4)),L=(0,i._)((s=(e={clientId:M,replId:r,onRetryBudgetExhausted:function(){D("pid2: retry budget exhausted, showing refresh modal",{extras:{noBgReconnectEnabled:y}},"warn"),R(!0),g((0,c.produce)(function(e){e.pid2="fatal"}))},onProtocolError:function(e){if(l.addBreadcrumb({category:"pid2",message:"protocol error",data:e}),e.type===v.RiverProtocolError.HandshakeFailed){R(!0),g((0,c.produce)(function(e){e.pid2="fatal"}));return}x({error:Error(e.message),tags:{pid2:!0},origin:"pid2: RiverClientProvider",extras:e})},logLevel:"info",noBgReconnectEnabled:y}).clientId,u=e.replId,d=e.onProtocolError,h=e.onRetryBudgetExhausted,m=e.logLevel,I=e.overrideLog,S=e.overrideGetWs,w=e.overrideGetToken,C=e.noBgReconnectEnabled,k=(0,v.default)(s,function(){return(0,t._)(function(){var e;return(0,a._)(this,function(n){return e=Date.now(),D("pid2: getting ws"),[2,(null!=S?S:function(){return(0,t._)(function(){var e,n;return(0,a._)(this,function(r){switch(r.label){case 0:return[4,(0,t._)(function(){var e;return(0,a._)(this,function(n){switch(n.label){case 0:return e={replId:u,isLoggedIn:!0},[4,(0,j.getPid2Version)()];case 1:return e.requestedPid2Version=n.sent(),e.format=p.api.token.ReplToken.WireFormat.RIVER,[4,(0,_.default)()];case 2:return[4,E.default.apply(void 0,[(e.overrideClusterMetadata=n.sent(),e)])];case 3:return[2,n.sent()]}})})()];case 1:return(n=new URL((e=r.sent()).gurl)).pathname="/wsv2/".concat(e.token),o=e.token,[2,new WebSocket(n.toString())]}})})()})(u).finally(function(){D("pid2: ws open",{extras:{duration:Date.now()-e}})})]})})()},null!=w?w:function(){return o},null!=I?I:D,m,V),P=(0,T.setupRiverTransport)({logContext:{target:"pid2"},transport:k.transport,serverId:v.PID2_SERVER_ID,onRetryBudgetExhausted:h,onProtocolError:d,noBgReconnectEnabled:C,log:null!=I?I:D}),[k,P.dispose]),2),B=L[0],U=L[1];return A(B),b((0,c.produce)(function(e){e.pid2={label:"Close WebSocket",action:function(){var e=B.transport.sessions.get(v.PID2_SERVER_ID);(null==e?void 0:e.state)!=="Connected"?console.warn("Cannot close WebSocket: session is not connected"):(console.log("pid2: closing WebSocket connection",e.conn.ws),e.conn.ws.close())}}})),function(){A(null),U(),b((0,c.produce)(function(e){e.pid2=null}))}},[n,r,x,y,g,b]),(0,s.jsxs)(F.Provider,{value:w,children:[(0,s.jsx)(L,{isOpen:k}),o]})}var F=(0,u.createContext)(null);function O(){return(0,u.useContext)(F)}function Z(e){var n=e.currentUsername,t=e.replId,r=e.children;return(0,x.useFlag)({controlName:"flag-new-connection-manager",type:"boolean",default:!1})?(0,s.jsx)(U,{replId:t,currentUsername:n,children:r}):(0,s.jsx)(G,{replId:t,currentUsername:n,children:r})}var W=function(e,n,t){var r;if(g.logger[null!=t?t:"info"](e,{river:n,riverTarget:"pid2",riverVersion:v.RIVER_VERSION}),null==n||null==(r=n.tags)?void 0:r.includes("invariant-violation")){var o=Error(e);l.withScope(function(e){e.setTag("pid2",!0),e.setExtras(n),l.captureException(o)})}},H=window.location.search.includes("debug=1")?function(e,n,t){console[null!=t?t:"info"](e,n),W(e,n,t)}:W,N=n.default.env.CI?{connectionTimeoutMs:6e4,handshakeTimeoutMs:6e4,sessionDisconnectGraceMs:12e4}:{};function G(e){var n=e.currentUsername,g=e.replId,b=e.children,y=(0,I.useThrowBsod)(),S=(0,i._)((0,u.useState)(!1),2),w=S[0],A=S[1],C=(0,d.useSetAtom)(h.connectionStateAtom),k=(0,d.useSetAtom)(h.connectionKillActionsAtom),R=(0,m.useIsInMobileWorkspace)(),P=(0,x.useFlag)({controlName:"flag-pid2-no-bg-reconnect"})&&R,M=(0,i._)((0,u.useState)(null),2),T=M[0],B=M[1],D=(0,u.useRef)({});return(0,u.useEffect)(function(){var e="".concat(n,"-").concat((0,f.nanoid)(4)),s=(0,i._)(function(e){var n,r=e.clientId,o=e.replId,i=e.onSessionStatusChange,s=e.onSessionTransitionChange,u=e.onProtocolError,l=e.onRetryBudgetExhausted,c=e.logLevel,d=e.overrideLog,f=e.overrideGetWs,x=e.overrideGetToken,h=e.noBgReconnectEnabled,g=(0,v.default)(r,function(){return(0,t._)(function(){var e;return(0,a._)(this,function(r){return e=Date.now(),H("pid2: getting ws"),[2,(null!=f?f:function(){return(0,t._)(function(){var e,r;return(0,a._)(this,function(i){switch(i.label){case 0:return[4,(0,t._)(function(){var e;return(0,a._)(this,function(n){switch(n.label){case 0:return e={replId:o,isLoggedIn:!0},[4,(0,j.getPid2Version)()];case 1:return e.requestedPid2Version=n.sent(),e.format=p.api.token.ReplToken.WireFormat.RIVER,[4,(0,_.default)()];case 2:return[4,E.default.apply(void 0,[(e.overrideClusterMetadata=n.sent(),e)])];case 3:return[2,n.sent()]}})})()];case 1:return(r=new URL((e=i.sent()).gurl)).pathname="/wsv2/".concat(e.token),n=e.token,[2,new WebSocket(r.toString())]}})})()})(o).finally(function(){H("pid2: ws open",{extras:{duration:Date.now()-e}})})]})})()},null!=x?x:function(){return n},null!=d?d:H,c,N);function m(){H("pid2: visibility: attempting connection",{extras:{noBgReconnectEnabled:h}}),g.transport.reconnectOnConnectionDrop=!0,g.transport.connect(v.PID2_SERVER_ID)}function I(){H("pid2: visibility: disabling reconnect",{extras:{noBgReconnectEnabled:h}}),g.transport.reconnectOnConnectionDrop=!1}function b(e){null==i||i(e),"closed"===e.status&&setTimeout(function(){"visible"===document.visibilityState&&"open"===g.transport.getStatus()&&m()},0)}function y(e){null==s||s(e)}function S(e){if(e.type===v.RiverProtocolError.RetriesExceeded){I(),g.transport.retryBudget.startRestoringBudget(),l();return}u(e),g.transport.close()}function w(){"visible"===document.visibilityState?m():h&&I()}return g.transport.addEventListener("protocolError",S),g.transport.addEventListener("sessionStatus",b),g.transport.addEventListener("sessionTransition",y),document.addEventListener("visibilitychange",w),window.addEventListener("online",m),window.addEventListener("offline",I),!0===window.navigator.onLine&&m(),[g,function(){g.transport.removeEventListener("sessionStatus",b),g.transport.removeEventListener("sessionTransition",y),g.transport.removeEventListener("protocolError",S),g.transport.close(),document.removeEventListener("visibilitychange",w),window.removeEventListener("online",m),window.removeEventListener("offline",I)}]}({clientId:e,replId:g,onRetryBudgetExhausted:function(){H("pid2: retry budget exhausted, showing refresh modal",{extras:{noBgReconnectEnabled:P}},"warn"),A(!0),C((0,c.produce)(function(e){e.pid2="fatal"}))},onSessionStatusChange:function(n){"created"===n.status?(D.current.sessionStart=Date.now(),H("pid2: session started",{sessionId:n.session.id,clientId:e,extras:{noBgReconnectEnabled:P}})):"closed"===n.status&&D.current.sessionStart&&H("pid2: session ended",{sessionId:n.session.id,clientId:e,extras:{sessionDuration:Date.now()-D.current.sessionStart}}),("created"===n.status||"closed"===n.status)&&l.addBreadcrumb({category:"pid2",message:"session ".concat(n.status),data:n})},onSessionTransitionChange:function(n){"Connecting"===n.state&&(D.current.connectionStart=Date.now(),H("pid2: connecting",{sessionId:n.id,clientId:e})),"Handshaking"===n.state&&(D.current.handshakeStart=Date.now()),"Connected"===n.state&&(D.current.connectionStart&&D.current.handshakeStart&&H("pid2: connected",{sessionId:n.id,clientId:e,extras:(0,o._)((0,r._)({},D.current),{connectionDuration:D.current.handshakeStart-D.current.connectionStart,handshakeDuration:Date.now()-D.current.handshakeStart,totalDuration:Date.now()-D.current.connectionStart})}),D.current.connectionStart=void 0,D.current.handshakeStart=void 0),"NoConnection"===n.state&&(H("pid2: no connection"),D.current.connectionStart=void 0,D.current.handshakeStart=void 0),l.addBreadcrumb({category:"pid2",message:"session transition ".concat(n.state),data:n})},onProtocolError:function(e){if(l.addBreadcrumb({category:"pid2",message:"protocol error",data:e}),e.type===v.RiverProtocolError.HandshakeFailed){A(!0),C((0,c.produce)(function(e){e.pid2="fatal"}));return}y({error:Error(e.message),tags:{pid2:!0},origin:"pid2: RiverClientProvider",extras:e})},logLevel:"info",noBgReconnectEnabled:P}),2),u=s[0],d=s[1];return B(u),k((0,c.produce)(function(e){e.pid2={label:"Close WebSocket",action:function(){var e=u.transport.sessions.get(v.PID2_SERVER_ID);(null==e?void 0:e.state)!=="Connected"?console.warn("Cannot close WebSocket: session is not connected"):(console.log("pid2: closing WebSocket connection",e.conn.ws),e.conn.ws.close())}}})),function(){B(null),d(),k((0,c.produce)(function(e){e.pid2=null}))}},[n,g,y,P,C,k]),(0,s.jsxs)(F.Provider,{value:T,children:[(0,s.jsx)(L,{isOpen:w}),b]})}var $=e.i(971131);function z(){var e=O(),n=(0,i._)((0,u.useState)(null),2),t=n[0],r=n[1],o=(0,u.useRef)(null),a=(0,u.useRef)(null),s=function(e){o.current=e,r(e)};return(0,u.useEffect)(function(){var n=function(e){var n=Symbol("pid2-close");a.current=n,queueMicrotask(function(){var t;a.current!==n||e&&(null==(t=o.current)?void 0:t.id)!==e||(0,$.flushSync)(function(){s(null)})})},t=function(e){a.current=null,"created"===e.status?s({id:e.session.id,from:e.session.from,to:e.session.to}):"closed"===e.status&&n(e.session.id)};if(e){var r=e.transport.sessions.get(v.PID2_SERVER_ID);return r&&t({status:"created",session:r}),e.transport.addEventListener("sessionStatus",t),function(){n(),e.transport.removeEventListener("sessionStatus",t)}}},[e]),t}e.s(["usePid2Session",()=>z],400082)},927158,e=>{"use strict";var n=e.i(346715),t=e.i(389959),r=e.i(400081),o=e.i(400082);function i(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=(0,r.usePid2InternalsContextDoNotUseOrYouWillBeFired)(),s=(0,o.usePid2Session)();return(0,t.useMemo)(function(){return a&&s?e(a.client,s):null},[a,s].concat((0,n._)(i)))}e.s(["usePid2Callback",()=>i])},54893,321431,469305,593750,e=>{"use strict";var n=e.i(878420),t=e.i(64386),r=e.i(276385),o=e.i(913965);function i(e){return(0,r.jsxs)(o.default,(0,t._)((0,n._)({},e),{children:[(0,r.jsx)("path",{fill:"#0079F2",d:"M8.157 19.313C4.211 19.313 1 16.067 1 12.08c0-3.988 3.21-7.232 7.157-7.232 2.547 0 4.922 1.384 6.198 3.614l-3.097 1.81a3.587 3.587 0 0 0-3.1-1.808c-1.974 0-3.58 1.622-3.58 3.616s1.606 3.616 3.58 3.616a3.587 3.587 0 0 0 3.1-1.809l3.097 1.811c-1.276 2.23-3.651 3.614-6.198 3.614Z"}),(0,r.jsx)("path",{fill:"#0079F2",d:"M17.904 11.19H16.49V9.76h-1.414v1.429h-1.414v1.428h1.414v1.43h1.414v-1.43h1.414V11.19ZM21.792 11.19h1.413v1.428h-1.413v1.43h-1.414v-1.43h-1.414V11.19h1.414V9.76h1.413v1.429Z"})]}))}function a(e){return(0,r.jsxs)(o.default,(0,t._)((0,n._)({},e),{children:[(0,r.jsx)("path",{fill:"#0079F2",d:"M9.153 18.014s-.829.489.59.654c1.72.199 2.598.17 4.492-.193 0 0 .498.317 1.194.59-4.247 1.847-9.612-.106-6.276-1.051Zm-.519-2.409s-.93.698.49.847c1.837.192 3.287.208 5.796-.282 0 0 .348.357.893.552-5.134 1.522-10.854.12-7.179-1.117ZM13.009 11.52c1.046 1.221-.275 2.32-.275 2.32s2.657-1.39 1.437-3.132c-1.14-1.625-2.014-2.432 2.718-5.215 0 0-7.427 1.881-3.88 6.026Z"}),(0,r.jsx)("path",{fill:"#0079F2",d:"M18.626 19.795s.613.513-.676.91c-2.451.753-10.203.98-12.356.03-.774-.342.677-.816 1.134-.915.476-.105.748-.085.748-.085-.86-.615-5.564 1.207-2.389 1.729 8.66 1.424 15.785-.641 13.539-1.669ZM9.552 13.11s-3.943.95-1.397 1.295c1.076.146 3.22.113 5.216-.057 1.631-.14 3.27-.436 3.27-.436s-.575.25-.992.538c-4.004 1.068-11.738.571-9.512-.521 1.883-.923 3.415-.819 3.415-.819Zm7.073 4.01c4.07-2.145 2.188-4.206.875-3.928a3.016 3.016 0 0 0-.466.126s.12-.19.348-.272c2.598-.926 4.597 2.733-.84 4.182 0 0 .064-.057.083-.108ZM14.17 1s2.255 2.287-2.137 5.803c-3.522 2.82-.803 4.429-.002 6.266-2.055-1.88-3.564-3.537-2.552-5.078C10.965 5.73 15.08 4.632 14.171 1Z"}),(0,r.jsx)("path",{fill:"#0079F2",d:"M9.952 22.93c3.906.255 9.906-.14 10.048-2.014 0 0-.273.71-3.229 1.275-3.334.636-7.447.562-9.887.154 0 0 .5.419 3.068.586Z"})]}))}function s(e){return(0,r.jsx)(o.default,(0,t._)((0,n._)({},e),{children:(0,r.jsx)("path",{fill:"#967D00",d:"M4.271 2A2.271 2.271 0 0 0 2 4.271V19.73A2.271 2.271 0 0 0 4.271 22H19.73A2.272 2.272 0 0 0 22 19.729V4.27A2.271 2.271 0 0 0 19.729 2H4.27Zm8.167 17.109c-.294.599-.857.992-1.51 1.182-1.001.23-1.96.1-2.672-.329-.478-.293-.85-.743-1.103-1.262.508-.31 1.014-.622 1.521-.932.014.006.053.078.107.171.194.326.361.556.69.717.324.11 1.032.18 1.306-.388.168-.289.114-1.237.114-2.266 0-1.616.008-3.205.008-4.841h1.87c0 1.718.01 3.44 0 5.155.004 1.052.096 2.008-.33 2.793Zm7.761-.529c-.65 2.225-4.276 2.297-5.724.827-.306-.345-.498-.526-.68-.926.77-.443.77-.443 1.518-.876.408.626.784.97 1.46 1.11.92.112 1.843-.203 1.636-1.178-.213-.797-1.88-.99-3.015-1.843-1.152-.774-1.422-2.654-.475-3.728.315-.397.853-.694 1.418-.836.195-.025.393-.052.589-.076 1.131-.024 1.838.275 2.357.855.145.147.262.304.483.647-.602.384-.6.38-1.464.94a1.392 1.392 0 0 0-.813-.755c-.502-.152-1.135.013-1.266.543-.046.164-.036.316.036.586.204.464.886.665 1.498.946 1.763.715 2.358 1.481 2.504 2.394.14.785-.034 1.294-.06 1.37h-.002Z"})}))}function u(e){return(0,r.jsx)(o.default,(0,t._)((0,n._)({},e),{children:(0,r.jsx)("path",{fill:"#E52222",fillRule:"evenodd",d:"m7.314 19.688 12.806 1.748-4.33-7.21-8.476 5.462ZM21.33 6.19l-1.135 1.705c-1.298 1.952-2.595 3.904-3.891 5.857-.072.108-.166.195-.064.362 1.252 2.069 2.495 4.143 3.74 6.215.197.328.396.654.65.968l.755-15.09-.055-.017ZM4.233 12.64c.058.055.205.087.273.054 1.201-.59 2.41-1.168 3.585-1.807.384-.209.678-.582 1.008-.885C10.193 9 11.284 7.995 12.375 6.99c.067-.062.146-.121.186-.2.392-.765.777-1.535 1.176-2.327-.476-.179-.927-.354-1.383-.513-.062-.021-.16.022-.226.059-1.057.59-2.133 1.149-3.156 1.792-.512.322-.928.797-1.382 1.21-.73.667-1.46 1.335-2.179 2.013-.19.18-.365.386-.514.602-.492.717-.97 1.444-1.469 2.192.28.288.533.564.805.821Zm4.39-.98-1.805 7.628 8.484-5.467-6.678-2.161Zm11.974-5.445-7.21 1.205 2.446 5.952 4.764-7.157ZM8.724 11.143l6.546 2.125-2.422-5.896-4.124 3.771Zm-4.4 2.969c-.778 1.856-1.528 3.65-2.292 5.476l4.363-.129-2.072-5.347Zm2.123 4.077.054-.012c.524-2.178 1.055-4.341 1.59-6.605l-3.5 1.82c.596 1.55 1.233 3.187 1.856 4.797Zm13.27-12.327c-.697-.185-1.394-.37-2.09-.553-1.002-.264-2.005-.524-3.006-.79-.126-.033-.216-.055-.29.096-.354.725-.718 1.445-1.078 2.167-.011.022-.009.051-.017.107l6.48-.982v-.045Zm-4.042-1.65 5.678 1.571-.938-2.673-4.732 1.05-.008.053ZM6.928 20.107c-.703-.081-1.425-.007-2.138.006-.586.01-1.172.032-1.758.05a.233.233 0 0 0-.18.08l14.532 1.343.01-.065-4.659-.636c-1.935-.264-3.867-.554-5.807-.778Zm-4.8-2.19C2.752 16.469 3.374 15.02 4 13.572c.063-.145.058-.243-.064-.36-.263-.25-.506-.519-.793-.817L2 18.037l.042.02c.03-.047.065-.09.086-.14ZM14.431 3.83c1.053-.271 2.12-.484 3.182-.72.07-.016.136-.039.204-.058L17.807 3l-4.562.614c.428.187.758.326 1.186.216Z",clipRule:"evenodd"})}))}e.s(["default",()=>i],54893),e.s(["default",()=>a],321431),e.s(["default",()=>s],469305),e.s(["default",()=>u],593750)},761732,e=>{"use strict";var n=e.i(530658),t=e.i(389959);e.s(["default",0,function(e){var r=(0,n._)((0,t.useState)(function(){return e?e.current:null}),2),o=r[0],i=r[1];return(0,t.useEffect)(function(){if(i(function(){return e?e.current:null}),e)return e.subscribe(function(e){return i(function(){return e})})},[e]),o}])},545880,(e,n,t)=>{var r=e.r(279732),o=e.r(937657),i=e.r(595146),a=e.r(763377),s=e.r(713331);n.exports=function(e,n,t,u){if(!a(e))return e;n=o(n,e);for(var l=-1,c=n.length,d=c-1,f=e;null!=f&&++l<c;){var p=s(n[l]),v=t;if("__proto__"===p||"constructor"===p||"prototype"===p)break;if(l!=d){var x=f[p];void 0===(v=u?u(x,p,f):void 0)&&(v=a(x)?x:i(n[l+1])?[]:{})}r(f,p,v),f=f[p]}return e}},643607,(e,n,t)=>{var r=e.r(493103),o=e.r(545880),i=e.r(937657);n.exports=function(e,n,t){for(var a=-1,s=n.length,u={};++a<s;){var l=n[a],c=r(e,l);t(c,l)&&o(u,i(l,e),c)}return u}},739721,(e,n,t)=>{var r=e.r(643607),o=e.r(718645);n.exports=function(e,n){return r(e,n,function(n,t){return o(e,t)})}},294061,(e,n,t)=>{var r=e.r(848616),o=e.r(253536),i=e.r(724975);n.exports=function(e){return i(o(e,void 0,r),e+"")}},810547,(e,n,t)=>{var r=e.r(739721);n.exports=e.r(294061)(function(e,n){return null==e?{}:r(e,n)})},716636,66718,827456,902379,e=>{"use strict";var n,t=((n={}).CloudServices="Cloud Services",n.Collaboration="Collaboration",n.WorkspaceFeatures="Workspace Features",n.WorkspaceExtensions="Workspace Extensions",n.Other="Other",n);e.s(["PaneCategory",()=>t],716636);var r=e.i(721281),o=e.i(634759),i=e.i(205104),a=e.i(903381);function s(e){var n=e.path;return n?(0,i.isBinary)(n)?"binary":(0,i.isMedia)(n)?"media":(0,i.isDrawFile)(n)?"draw":"codeEditor":"codeEditor"}function u(e){return"codeEditor"===e||"binary"===e||"media"===e||"draw"===e||"history"===e}function l(e){var n=[],t=!0,r=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(t=(i=u.next()).done);t=!0){var l=i.value;l.type===a.FileType.File&&n.push({type:s({path:l.path}),data:{path:l.path}})}}catch(e){r=!0,o=e}finally{try{t||null==u.return||u.return()}finally{if(r)throw o}}return n}function c(e){return u(e.type)}function d(e){return c(e)?e.data.path:null}function f(e){return!c(e)&&"markdown"!==e.type}function p(e){return"extension"===e.type}var v=new Set(["extensionStore","vnc","automations","runnerOutput","git","envEditor","tutorial","database","neon","replAuth","preferences","deployments","extensionDevtools","objectStorage","workflows","project","config","agentProgress","agentChat","replitAuth","securityScan","developer"]);function x(e){return v.has(e)}var h=(0,r._)({},o.StackBlueprint.STACK_BLUEPRINT_AGENT,"automations");e.s(["STACK_TO_OUTPUT_PANE_MAP",()=>h,"fsNodeToPanes",()=>l,"getFilePathForPane",()=>d,"getPaneTypeForFile",()=>s,"isExtensionPane",()=>p,"isFilePane",()=>c,"isFilePaneType",()=>u,"isSingleton",()=>x,"isToolPane",()=>f],66718);var g=e.i(878420),m=e.i(276385),E=e.i(389959),_={type:"commands",data:{autoFocus:!1}};function I(e){var n=e.config,t=e.filePaneFlag,r=void 0!==t&&t;function o(e){return r&&c(e)?"codeEditor"===e.type||"history"===e.type?{type:"file",data:(0,g._)({type:"codeEditor"},e.data)}:{type:"file",data:(0,g._)({type:e.type},e.data)}:e}return{Icon:function(e){var t=e.pane,r=e.size,i=e.color,a=o(t),s=n[a.type]?a:_,u=n[s.type].Icon;return(0,m.jsx)(u,{pane:s,size:void 0===r?16:r,color:i})},Content:function(e){var t=e.pane,r=e.options,i=o(t),a=n[i.type]?i:_,s=n[a.type].Content;return(0,m.jsx)(s,{pane:a,options:r})},getTitle:function(e){var t=o(e),r=n[t.type]?t:_;return n[r.type].getTitle(r)},getTitlePill:function(e){var t,r=o(e),i=n[r.type]?r:_,a=n[i.type];return null==(t=a.getTitlePill)?void 0:t.call(a,i)},getDescription:function(e,t){var r=o(e),i=n[r.type]?r:_,a=n[i.type].description;return(null==t?void 0:t.short)&&a?a.split(/[a-zA-Z0-9]\. /)[0].trim():a},getCategory:function(e){var t=o(e),r=n[t.type]?t:_;return n[r.type].category},decode:function(e,t){var r,o=null;try{o=null==(r=n[e])?void 0:r.decode(t)}catch(e){}return o}}}var b=(0,E.createContext)(null);function y(){var e=(0,E.useContext)(b);if(!e)throw Error("Expected PaneUI in context");return e}var S=b.Provider;e.s(["PaneUIContextProvider",()=>S,"createPaneUI",()=>I,"usePaneUIContext",()=>y],827456);var w=e.i(297083),A=e.i(530658),C=e.i(817556),k=e.i(993796),R=e.i(701085),P=e.i(927158);function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fallbackToReplCo:!0},n=(0,A._)((0,E.useState)(null),2),t=n[0],r=n[1],o=(0,A._)((0,E.useState)(!0),2),i=o[0],a=o[1],s=(0,A._)((0,E.useState)(!0),2),u=s[0],l=s[1],c=(0,k.useFlag)({controlName:"flag-webview-fallback-url"}),d=(0,P.usePid2Callback)(function(e){return function(){return e.environment.devUrl.rpc({})}});return(0,E.useEffect)(function(){d&&(0,w._)(function(){var n,t,o,i,s,u;return(0,C._)(this,function(f){switch(f.label){case 0:if(!d)return[2];return[4,d()];case 1:if(!(n=f.sent()).ok)return[2];if(o=(t=n.payload.url.includes(".localhost"))?"http":"https",i="".concat(o,"://").concat(n.payload.url),t&&(i+=":8081"),s=(0,R.isDotDevReachable)(i),u=(0,R.isDotDevReachable)(null==i?void 0:i.replace(/.replit.dev$/,".repl.co")),a(s),l(u),!c||!e.fallbackToReplCo||s)return r(i),[2];return r(i.replace(/.replit.dev$/,".repl.co")),[2]}})})()},[d,c,e.fallbackToReplCo]),{url:t,reachability:{dotdev:i,replCo:u}}}e.s(["useDevUrl",()=>M],902379)},619593,(e,n,t)=>{var r,o=e.r(365738),i="__lodash_hash_undefined__",a=1/0,s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,l=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,f=/^\[object .+?Constructor\]$/,p="object"==o._(e.g)&&e.g&&e.g.Object===Object&&e.g,v=("undefined"==typeof self?"undefined":o._(self))=="object"&&self&&self.Object===Object&&self,x=p||v||Function("return this")(),h=Array.prototype,g=Function.prototype,m=Object.prototype,E=x["__core-js_shared__"],_=(r=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",I=g.toString,b=m.hasOwnProperty,y=m.toString,S=RegExp("^"+I.call(b).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=x.Symbol,A=h.splice,C=D(x,"Map"),k=D(Object,"create"),R=w?w.prototype:void 0,P=R?R.toString:void 0;function M(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function L(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function T(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function j(e,n){for(var t,r,o=e.length;o--;){if(t=e[o][0],t===(r=n)||t!=t&&r!=r)return o}return -1}function B(e,n){var t,r,i=e.__data__;return("string"==(r=void 0===(t=n)?"undefined":o._(t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?i["string"==typeof n?"string":"hash"]:i.map}function D(e,n){var t,r,o,i=null==e?void 0:e[n];return!(!O(i)||(t=i,_&&_ in t))&&("[object Function]"==(o=O(r=i)?y.call(r):"")||"[object GeneratorFunction]"==o||function(e){var n=!1;if(null!=e&&"function"!=typeof e.toString)try{n=!!(e+"")}catch(e){}return n}(i)?S:f).test(function(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(i))?i:void 0}M.prototype.clear=function(){this.__data__=k?k(null):{}},M.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},M.prototype.get=function(e){var n=this.__data__;if(k){var t=n[e];return t===i?void 0:t}return b.call(n,e)?n[e]:void 0},M.prototype.has=function(e){var n=this.__data__;return k?void 0!==n[e]:b.call(n,e)},M.prototype.set=function(e,n){return this.__data__[e]=k&&void 0===n?i:n,this},L.prototype.clear=function(){this.__data__=[]},L.prototype.delete=function(e){var n=this.__data__,t=j(n,e);return!(t<0)&&(t==n.length-1?n.pop():A.call(n,t,1),!0)},L.prototype.get=function(e){var n=this.__data__,t=j(n,e);return t<0?void 0:n[t][1]},L.prototype.has=function(e){return j(this.__data__,e)>-1},L.prototype.set=function(e,n){var t=this.__data__,r=j(t,e);return r<0?t.push([e,n]):t[r][1]=n,this},T.prototype.clear=function(){this.__data__={hash:new M,map:new(C||L),string:new M}},T.prototype.delete=function(e){return B(this,e).delete(e)},T.prototype.get=function(e){return B(this,e).get(e)},T.prototype.has=function(e){return B(this,e).has(e)},T.prototype.set=function(e,n){return B(this,e).set(e,n),this};var V=U(function(e){e=null==(n=e)?"":function(e){if("string"==typeof e)return e;if(Z(e))return P?P.call(e):"";var n=e+"";return"0"==n&&1/e==-a?"-0":n}(n);var n,t=[];return l.test(e)&&t.push(""),e.replace(c,function(e,n,r,o){t.push(r?o.replace(d,"$1"):n||e)}),t});function U(e,n){if("function"!=typeof e||n&&"function"!=typeof n)throw TypeError("Expected a function");var t=function(){var r=arguments,o=n?n.apply(this,r):r[0],i=t.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return t.cache=i.set(o,a),a};return t.cache=new(U.Cache||T),t}U.Cache=T;var F=Array.isArray;function O(e){var n=void 0===e?"undefined":o._(e);return!!e&&("object"==n||"function"==n)}function Z(e){return(void 0===e?"undefined":o._(e))=="symbol"||!!e&&(void 0===e?"undefined":o._(e))=="object"&&"[object Symbol]"==y.call(e)}n.exports=function(e,n,t){var r=null==e?void 0:function(e,n){var t;n=!function(e,n){if(F(e))return!1;var t=void 0===e?"undefined":o._(e);return!!("number"==t||"symbol"==t||"boolean"==t||null==e||Z(e))||u.test(e)||!s.test(e)||null!=n&&e in Object(n)}(n,e)?F(t=n)?t:V(t):[n];for(var r=0,i=n.length;null!=e&&r<i;)e=e[function(e){if("string"==typeof e||Z(e))return e;var n=e+"";return"0"==n&&1/e==-a?"-0":n}(n[r++])];return r&&r==i?e:void 0}(e,n);return void 0===r?t:r}},412284,e=>{"use strict";var n=e.i(530658),t=e.i(276385),r=e.i(389959),o=e.i(541793),i=e.i(161322),a=(0,r.createContext)(null);function s(){return function(){var e=(0,r.useContext)(a);if(!e)throw Error("Expected extensions context");return e}().store}var u=function(e){var n=s();return(0,i.useAtom)(e,{store:n})};function l(e){var n=s();return(0,i.useAtomValue)(e,{store:n})}var c=function(e){var n=s();return(0,i.useSetAtom)(e,{store:n})};function d(e){var i=e.children,s=(0,n._)((0,r.useState)(function(){return(0,o.createStore)()}),1)[0];return(0,t.jsx)(a.Provider,{value:{store:s},children:i})}e.s(["ExtensionStoreProvider",()=>d,"useExtAtom",()=>u,"useExtAtomValue",()=>l,"useExtensionsStore",()=>s,"useSetExtAtom",()=>c])},486289,(e,n,t)=>{var r=e.r(493103),o=e.r(290308);n.exports=function(e,n){return n.length<2?e:r(e,o(n,0,-1))}},440022,(e,n,t)=>{var r=e.r(937657),o=e.r(776327),i=e.r(486289),a=e.r(713331);n.exports=function(e,n){return n=r(n,e),null==(e=i(e,n))||delete e[a(o(n))]}},822216,(e,n,t)=>{var r=e.r(100515);n.exports=function(e){return r(e)?void 0:e}},223664,(e,n,t)=>{var r=e.r(70234),o=e.r(838915),i=e.r(440022),a=e.r(937657),s=e.r(436849),u=e.r(822216),l=e.r(294061),c=e.r(977042);n.exports=l(function(e,n){var t={};if(null==e)return t;var l=!1;n=r(n,function(n){return n=a(n,e),l||(l=n.length>1),n}),s(e,c(e),t),l&&(t=o(t,7,u));for(var d=n.length;d--;)i(t,n[d]);return t})},282890,410793,667279,196380,244719,466497,e=>{"use strict";e.i(716636);var n,t=e.i(66718),r=e.i(827456),o=e.i(297083),i=e.i(167626),a=e.i(878420),s=e.i(64386),u=e.i(530658),l=e.i(817556),c=e.i(389959),d=e.i(541793),f=e.i(810547),p=e.i(15053),v=e.i(9293),x=e.i(316953),h=e.i(253344),g=e.i(837399),m=e.i(858248),E=e.i(709485),_=e.i(902379),I=e.i(567807),b=e.i(346715),y=e.i(131141),S=e.i(619593),w=e.i(125674),A=e.i(412284),C=e.i(721281),k=e.i(223664),R=e.i(664152),P=((n={}).debug="debug",n.info="info",n.warn="warn",n.error="error",n);function M(e,n){var t=function(t){var r,o,i,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{logLevel:"debug"},l=null!=(r=(o={},(0,C._)(o,"debug",R.logger.debug),(0,C._)(o,"warn",R.logger.warn),(0,C._)(o,"info",R.logger.info),(0,C._)(o,"error",R.logger.error),o)[u.logLevel])?r:R.logger.debug;(null!=(i=(s={},(0,C._)(s,"debug",console.debug),(0,C._)(s,"warn",console.warn),(0,C._)(s,"info",console.info),(0,C._)(s,"error",console.error),s)[u.logLevel])?i:console.debug)(t,u),l(t,(0,k.default)((0,a._)({},u,e),["replId","logLevel"])),n.onLog((0,a._)({message:t},u,e))};return{context:e,info:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e,(0,s._)((0,a._)({},n),{logLevel:"info"}))},warn:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e,(0,s._)((0,a._)({},n),{logLevel:"warn"}))},error:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e,(0,s._)((0,a._)({},n),{logLevel:"error"}))},createLogger:function(t){return M((0,a._)({},e,t),n)}}}e.s(["LogLevel",()=>P,"createExtensionLogger",()=>M],410793);var L=(0,d.atom)(!1),T=(0,d.atom)([]),j=(0,d.atom)([]),B=(0,d.atom)(null),D=(0,d.atom)(M({extension:!0,isInitialized:!1},{onLog:function(){throw Error("Logged before extension system was initialized.")}})),V=(0,d.atom)([]),U=(0,d.atom)(null,function(e,n,t){var r=e(V);n(V,(0,y.produce)(r,function(e){e.push((0,y.produce)(t,function(n){n.index=e.length})),e.length>1e3&&e.splice(0,e.length-1e3)}))}),F=(0,d.atom)(null,function(e,n){n(V,[])}),O=(0,d.atom)("local:true"),Z=(0,d.atom)(function(e){var n=e(V),t=e(O);if(!t)return n;var r=t.split(" ").map(function(e){var n=(0,u._)(e.split(":"),2),t=n[0],r=n[1];return t&&void 0===r?function(e){return e.message.toLowerCase().includes(t.toLowerCase())}:t&&""===r?function(e){return void 0!==(0,S.default)(e,t)}:t&&r?function(e){try{return String((0,S.default)(e,t))===r}catch(e){return!1}}:null}).filter(function(e){return null!==e});return n.filter(function(e){return r.every(function(n){return n(e)})})}),W=(0,d.atom)(null,function(e,n,t){return(0,o._)(function(){return(0,l._)(this,function(r){if(e(T).find(function(e){return e.extensionId===t.extensionId}))throw Error("Extension already loaded");return n(T,function(e){return(0,y.produce)(e,function(e){var n,r,o,i,a,s,u,l,c=(r=t.baseUrl,o=t.extensionId,i=t.installationId,a=t.manifest,s=t.enableExperimentalApi,u=t.enableInternalApi,l=t.logger,{baseUrl:r,extensionId:o,installationId:i,manifest:a,isLocal:t.isLocal,stateAtom:(0,d.atom)({error:null,panes:[],scopes:new Set(null==(n=a.scopes)?void 0:n.map(function(e){return e.name})),enableExperimentalApi:s,enableInternalApi:u,commands:new Map}),logger:l});e.push(c)})}),[2]})})()}),H=(0,d.atom)(null,function(e,n,t){return(0,o._)(function(){return(0,l._)(this,function(r){if(e(j).find(function(e){return e.extensionId===t.extensionId||e.installationId===t.installationId||e.baseUrl===t.baseUrl}))throw Error("Extension already loaded");return n(j,function(e){return(0,y.produce)(e,function(e){e.push(t)})}),[2]})})()}),N=(0,d.atom)(null,function(e,n,t){var r=e(j).find(function(e){return e.baseUrl===t});if(r)return r;var o={baseUrl:t,extensionId:(0,h.asExtensionId)((0,p.v4)()),installationId:(0,h.asInstallationId)((0,p.v4)())};return n(j,function(e){return(0,y.produce)(e,function(e){e.push(o)})}),o}),G=(0,d.atom)(null,function(e,n,t){return(0,o._)(function(){return(0,l._)(this,function(e){return n(T,function(e){return(0,y.produce)(e,function(e){var n=e.findIndex(function(e){return"extensionId"in t?e.extensionId===t.extensionId:e.installationId===t.installationId});-1!==n&&e.splice(n,1)})}),[2]})})()}),$=(0,d.atom)(null,function(e,n,t){var r=e(T).find(function(e){return e.extensionId===t.extensionId});if(!r)throw Error("Extension not found");n(r.stateAtom,function(e){return(0,y.produce)(e,function(e){e.error=t.extensionError})})}),z=(0,d.atom)(null,function(e,n,t){var r=t.createCommand.id;if(!t.createCommand.id)throw Error("Expected createCommand to have id");if(!t.createCommand.contributions)throw Error("Expected createCommand to have contributions");n(t.extensionStateAtom,function(e){return(0,y.produce)(e,function(e){e.commands.set(r,t.createCommand)})})}),K=(0,d.atom)(function(e){return e(T).flatMap(function(n){return(0,b._)(e(n.stateAtom).commands.values())})}),X=(0,d.atom)(function(e){return e(T).map(function(e){var n;return null==(n=e.manifest.fileHandlers)?void 0:n.map(function(n){return(0,s._)((0,a._)({},n),{extension:e})})}).flat().filter(function(e){return!!e})}),q=(0,d.atom)(function(e){return e(T).map(function(e){var n;return null==(n=e.manifest.tools)?void 0:n.map(function(n){return(0,s._)((0,a._)({},n),{extension:e})})}).flat().filter(function(e){return!!e})});function Y(){return(0,A.useExtAtomValue)(T)}function J(e){return Y().find(function(n){return n.installationId===e})}function Q(e){var n=J(e);return n&&e?n.stateAtom:null}function ee(){return(0,A.useExtAtomValue)(X)}function en(){return(0,A.useExtAtomValue)(q)}function et(e){var n=(0,A.useExtAtomValue)(K);return(0,w.default)(function(){return n.filter(function(n){return n.contributions.includes(e)})},[n,e])}function er(){return(0,A.useExtAtomValue)(j)}function eo(){var e=(0,A.useSetExtAtom)(G);return(0,c.useCallback)(function(n){return(0,o._)(function(){return(0,l._)(this,function(t){return e({installationId:n}),[2]})})()},[e])}function ei(){var e=ex(),n=e.throwSystemError,t=e.throwExtensionError,r=(0,A.useSetExtAtom)(W),u=(0,A.useExtAtomValue)(D),d=(0,A.useExtensionsStore)();return(0,c.useCallback)(function(e){var c=e.installationId,p=e.forceRefetch,m=void 0===p||p;return(0,o._)(function(){var e,o,p,E,_,b,y,S,w,A,C,k,R,P,M,L,T;return(0,l._)(this,function(l){switch(l.label){case 0:return[4,(0,I.getExtensionUserContext)()];case 1:if(!(e=l.sent())||e.error)return n({friendlyMessage:"Failed to load user context",error:e.error}),[2];if(o=e.result.userHasInternalApiEnabled,!(p=d.get(j).find(function(e){return e.installationId===c})))return[3,3];return[4,(0,I.getExtensionManifest)(p.baseUrl)];case 2:if(E=l.sent(),_=u.createLogger({extensionId:p.extensionId,installationId:p.installationId,local:!0}),E.error)return b=(0,s._)((0,a._)({},p),{manifest:(0,x.createDefaultManifest)(),enableExperimentalApi:!1,enableInternalApi:!1,logger:_.createLogger({extensionName:"Unnamed Extension"}),isLocal:!0}),u.info("Adding extension: ".concat(b.manifest.name),{extensionArgs:(0,f.default)(b,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:b.isLocal,error:!0}),r(b),y="Failed to load extension manifest",(0,i._)(E.error,g.TypeboxError)&&(y=E.error.message),t({extensionId:p.extensionId,installationId:p.installationId,extensionError:{error:E.error,friendlyMessage:y}}),[2];return S=(0,x.hasScope)(E.result,"experimental-api"),w=(0,s._)((0,a._)({},p),{manifest:E.result,enableExperimentalApi:S,enableInternalApi:o,logger:_.createLogger({extensionName:E.result.name}),isLocal:!0}),u.info("Adding extension: ".concat(w.manifest.name),{extensionArgs:(0,f.default)(w,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!0}),r(w),[3,5];case 3:return[4,(0,I.getExtensionInstallation)(c,m)];case 4:if((A=l.sent()).error)return n({friendlyMessage:"Something went wrong while downloading an extension",error:A.error}),[2];if(!(C=A.result))return n({friendlyMessage:"Extension failed to install",error:Error("Expected installation to be defined")}),[2];if(!(k=C.extension))return n({friendlyMessage:"Extension failed to install",error:Error("Expected extension to be defined")}),[2];if(!k.manifest)return t({extensionId:(0,h.asExtensionId)(k.id),installationId:(0,h.asInstallationId)(C.id),extensionError:{friendlyMessage:"Extension failed to install",error:Error("Expected extension manifest to be defined")}}),[2];if("ExtensionManifestError"===k.manifest.__typename)return t({extensionId:(0,h.asExtensionId)(k.id),installationId:(0,h.asInstallationId)(C.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest: ".concat(k.manifest.message),error:Error(k.manifest.message)}}),[2];if(!k.manifest||"ExtensionManifest"!==k.manifest.__typename)return t({extensionId:(0,h.asExtensionId)(k.id),installationId:(0,h.asInstallationId)(C.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest",error:Error("Expected extension manifest to be defined")}}),[2];return R=(0,x.asManifest)(k.manifest),P=(0,x.hasScope)(R,"experimental-api"),M=(0,h.asExtensionId)(k.id),L=k.enableInternalApi,T={extensionId:M,installationId:c,manifest:R,baseUrl:(0,v.getValidBaseUrlOrThrow)(k.url),enableExperimentalApi:P,enableInternalApi:o||L,logger:u.createLogger({extensionId:M,installationId:c,extensionName:R.name,local:!1}),isLocal:!1},u.info("Adding extension: ".concat(T.manifest.name),{extensionArgs:(0,f.default)(T,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!1}),r(T),[2,C];case 5:return[2]}})})()},[r,t,n,d,u])}function ea(){var e=ei(),n=ex().throwSystemError;return(0,c.useCallback)(function(t){var r=t.extensionId,i=t.replId;return(0,o._)(function(){var t,o,a;return(0,l._)(this,function(s){switch(s.label){case 0:return[4,(0,I.installExtensionMutation)({extensionId:r,replId:i})];case 1:if((a=s.sent()).error)return n({error:a.error,friendlyMessage:"Something went wrong while installing an extension"}),[2];return(0,m.track)(E.events.EXTENSION_USED,{action:"installed",name:null==(o=a.result)||null==(t=o.extension)?void 0:t.name,extensionId:r}),[4,e({installationId:(0,h.asInstallationId)(a.result.id)})];case 2:return s.sent(),[2,a.result]}})})()},[e,n])}function es(){var e=eo(),n=(0,A.useExtensionsStore)(),t=ex().throwSystemError;return(0,c.useCallback)(function(r){var i=r.installationId,a=r.replId;return(0,o._)(function(){var r;return(0,l._)(this,function(o){switch(o.label){case 0:if(!(r=n.get(T).find(function(e){return e.installationId===i})))return t({friendlyMessage:"Extension appears to be already uninstalled",error:Error("Expected extension to be defined")}),[2];if(!r.installationId||!r.extensionId)return t({friendlyMessage:"Failed to uninstall extension",error:Error("Expected installationId to be defined")}),[2];return(0,m.track)(E.events.EXTENSION_USED,{action:"uninstalled",name:r.manifest.name,extensionId:r.extensionId}),[4,(0,I.uninstallExtensionMutation)({installationId:r.installationId,replId:a})];case 1:return o.sent(),[4,e(r.installationId)];case 2:return o.sent(),[2]}})})()},[e,n,t])}function eu(){var e=eo(),n=ei();return(0,c.useCallback)(function(t){return(0,o._)(function(){return(0,l._)(this,function(r){switch(r.label){case 0:return[4,e(t)];case 1:return r.sent(),[4,n({installationId:t,forceRefetch:!0})];case 2:return r.sent(),[2]}})})()},[e,n])}function el(){var e,n,t,r=(e=ei(),n=(0,A.useExtAtomValue)(D),t=ex().throwSystemError,(0,c.useCallback)(function(r){return(0,o._)(function(){var o,i,a,s,u,c,d,f,p,v;return(0,l._)(this,function(l){switch(l.label){case 0:return[4,(0,I.getExtensionInstallationsInRepl)(r)];case 1:if((o=l.sent()).error)return t({friendlyMessage:"Failed to load installed extensions",error:o.error}),[2];i=!0,a=!1,s=void 0,l.label=2;case 2:l.trys.push([2,9,10,11]),u=o.result[Symbol.iterator](),l.label=3;case 3:if(i=(c=u.next()).done)return[3,8];if(null==(f=(d=c.value).extension)?void 0:f.isDisabled)return n.info("Skipping disabled extension: ".concat(d.extension.name),{extension:!0,extensionId:d.extension.id,installationId:d.id}),[3,7];l.label=4;case 4:return l.trys.push([4,6,,7]),[4,e({installationId:(0,h.asInstallationId)(d.id),forceRefetch:!0})];case 5:return l.sent(),[3,7];case 6:return p=l.sent(),n.error("Extension Loading error: ".concat(p.message),{extension:!0,errors:p.message}),[3,7];case 7:return i=!0,[3,3];case 8:return[3,11];case 9:return v=l.sent(),a=!0,s=v,[3,11];case 10:try{i||null==u.return||u.return()}finally{if(a)throw s}return[7];case 11:return[2]}})})()},[e,t,n])),i=(0,A.useSetExtAtom)(D),a=(0,A.useSetExtAtom)(U),s=(0,u._)((0,A.useExtAtom)(L),2),d=s[0],f=s[1],p=(0,u._)((0,c.useState)(null),2),v=p[0],x=p[1],g=(0,u._)((0,c.useState)(null),2),m=g[0],E=g[1];return(0,c.useEffect)(function(){if(v&&m&&!d){var e=v.replId;f(!0),r(e)}},[v,m,r,d,f]),(0,c.useCallback)(function(e){var n=e.replId,t=e.userId;if(!d){x({replId:n,userId:t});var r=M({extension:!0,isInitialized:!0,replId:n,userId:t},{onLog:function(e){a(e)}});E(r),i(r)}},[i,a,d])}function ec(){var e=ei(),n=er(),t=Y(),r=(0,A.useSetExtAtom)(H);return(0,c.useCallback)(function(i){return(0,o._)(function(){var o,a;return(0,l._)(this,function(s){return o=(0,v.getValidBaseUrlOrThrow)(i),(a=n.find(function(e){return e.baseUrl===o}))||r(a={extensionId:(0,h.asExtensionId)((0,p.v4)()),installationId:(0,h.asInstallationId)((0,p.v4)()),baseUrl:o}),t.find(function(e){return e.extensionId===(null==a?void 0:a.extensionId)})||e({installationId:a.installationId}),[2]})})()},[n,t,r,e])}function ed(){var e=(0,_.useDevUrl)().url,n=(0,A.useSetExtAtom)(N),t=(0,A.useExtensionsStore)(),r=ei();return(0,c.useCallback)(function(){return(0,o._)(function(){var o;return(0,l._)(this,function(i){switch(i.label){case 0:if(!e)return[2];return[4,r({installationId:(o=n(e)).installationId,forceRefetch:!0})];case 1:return i.sent(),[2,t.get(T).find(function(e){return e.installationId===o.installationId})]}})})()},[e,n,r,t])}function ef(){var e=(0,_.useDevUrl)().url,n=(0,A.useSetExtAtom)(N),t=Y();return(0,c.useMemo)(function(){if(e){var r=n(e);return t.find(function(e){return r.installationId===e.installationId})}},[e,t,n])}e.s(["addExtensionAtom",()=>W,"addLocalExtensionAtom",()=>H,"addLogAtom",()=>U,"addOrGetLocalExtensionFromBaseUrlAtom",()=>N,"clearLogsAtom",()=>F,"extensionsAtom",()=>T,"filteredLogsAtom",()=>Z,"isExtensionSystemInitializedAtom",()=>L,"localExtensionsAtom",()=>j,"logFilterQueryAtom",()=>O,"registerExtensionCreateCommandAtom",()=>z,"removeExtensionAtom",()=>G,"rootExtensionSystemLoggerAtom",()=>D,"setExtensionErrorAtom",()=>$,"systemErrorAtom",()=>B,"useExtensionByInstallationId",()=>J,"useExtensionCommands",()=>et,"useExtensionStateAtom",()=>Q,"useExtensionTools",()=>en,"useExtensions",()=>Y,"useFileHandlers",()=>ee,"useLocallyInstalledExtensions",()=>er],667279);var ep=(0,d.atom)(null,function(e,n,t){var r=e(D);n(B,t),r.error("Extension System Error: ".concat(t.error.message),{extensionSystem:!0,originalError:t.error.message,friendlyMessage:t.friendlyMessage})}),ev=(0,d.atom)(null,function(e,n,t){var r=e(T),o=e(D),i=r.find(function(e){return e.extensionId===t.extensionId});if(o.error("Extension Error: ".concat(t.extensionError.friendlyMessage),{extension:!0,extensionId:t.extensionId,originalError:t.extensionError.error.message,friendlyMessage:t.extensionError.friendlyMessage}),!i){n(W,{extensionId:t.extensionId,installationId:t.installationId,manifest:(0,x.createDefaultManifest)({name:t.extensionId}),baseUrl:"",enableExperimentalApi:!1,enableInternalApi:!1,logger:o.createLogger({extensionId:t.extensionId,extensionName:t.extensionId,installationId:t.installationId,local:void 0}),isLocal:null}),n($,{extensionId:t.extensionId,extensionError:t.extensionError});return}n($,{extensionId:t.extensionId,extensionError:t.extensionError})});function ex(){return{throwSystemError:(0,A.useSetExtAtom)(ep),throwExtensionError:(0,A.useSetExtAtom)(ev)}}function eh(e,n){var o=(0,r.usePaneUIContext)().getDescription(e,n),i=J((0,t.isExtensionPane)(e)?e.data.installationId:void 0);return null!=o?o:null==i?void 0:i.manifest.description}e.s(["useCurrentReplExtension",()=>ef,"useInitializeExtensionSystem",()=>el,"useInstallCurrentReplAsExtension",()=>ed,"useInstallExtension",()=>ea,"useInstallExtensionLocallyByURL",()=>ec,"useLoadExtension",()=>ei,"useReloadExtension",()=>eu,"useUninstallExtension",()=>es,"useUnloadExtension",()=>eo],196380),e.s([],244719),e.s(["usePaneDescription",()=>eh],466497),e.s([],282890)}]);

//# debugId=7d868166-7061-b833-a2a5-b9c61cfb919f
//# sourceMappingURL=8ee560da246c73f8.js.map