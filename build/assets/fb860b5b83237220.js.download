;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="1ea50128-699b-2215-5bfb-42d5b275b017")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,737250,e=>{"use strict";var t=e.i(297083),n=e.i(530658),i=e.i(817556),r=e.i(389959),a=e.i(830675),s=e.i(222342),o=e.i(344188),l=e.i(282453),u="email-verification-resend-timestamp";function c(){var e=(0,n._)((0,r.useState)(!1),2),c=e[0],p=e[1],d=(0,n._)((0,r.useState)(0),2),T=d[0],y=d[1],E=(0,s.default)(),g=E.showConfirm,m=E.showError;return(0,r.useEffect)(function(){try{var e=l.default.get(u,"number");if(e){var t=Date.now()-e;t<6e4?(p(!0),y(Math.ceil((6e4-t)/1e3))):l.default.remove(u)}}catch(e){a.captureException(e)}},[]),(0,r.useEffect)(function(){if(c&&!(T<=0)){var e=setInterval(function(){y(function(t){var n=t-1;if(n<=0){p(!1);try{l.default.remove(u)}catch(e){a.captureException(e)}return clearInterval(e),0}return n})},1e3);return function(){return clearInterval(e)}}},[c,T]),{resendVerification:(0,r.useCallback)(function(){return(0,t._)(function(){var e,t;return(0,i._)(this,function(n){switch(n.label){case 0:if(c)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,o.postJson)("/data/user/resend_verification",{})];case 2:n.sent(),g("Verification email sent"),p(!0),y(60);try{l.default.set(u,Date.now())}catch(e){a.captureException(e)}return[3,4];case 3:return t=(e=n.sent()).message,m("Failed to resend verification email: ".concat(t)),a.captureException(e),[3,4];case 4:return[2]}})})()},[c,g,m]),isInCooldown:c,cooldownTimeRemaining:T}}e.s(["useEmailVerificationResend",()=>c])},891628,e=>{"use strict";var t=e.i(389959),n=e.i(878420),i=e.i(569384),r=e.i(973245),a=e.i(304277);function s(){var e=(0,i._)(["\n  query PollEmailVerification {\n    currentUser {\n      id\n      isVerified\n    }\n  }\n"]);return s=function(){return e},e}e.i(566901);var o={},l=(0,r.gql)(s());e.s(["default",0,function(e){var i,r,s=(0,t.useRef)(null==e?void 0:e.onEmailVerified),u=(0,t.useRef)(null==e?void 0:e.onError),c=(0,t.useCallback)(function(){s.current&&s.current()},[]),p=(0,t.useCallback)(function(e){u.current&&u.current(e)},[]),d=(i=(0,n._)({},o,void 0),a.useQuery(l,i)),T=d.loading,y=d.data,E=d.error,g=d.startPolling,m=d.stopPolling;return(0,t.useEffect)(function(){return g(2e3),function(){return m()}},[g,m]),(0,t.useEffect)(function(){var e;if(E){m(),p&&p(E);return}y&&(null==(e=y.currentUser)?void 0:e.isVerified)&&(m(),c&&c())},[y,E,m,p,c]),{loading:T,error:E,isVerified:null==y||null==(r=y.currentUser)?void 0:r.isVerified}}],891628)},837596,e=>{"use strict";var t=e.i(878420),n=e.i(569384),i=e.i(973245),r=e.i(304277);function a(){var e=(0,n._)(["\n  query EmailVerificationContent {\n    currentUser {\n      id\n      email\n    }\n  }\n"]);return a=function(){return e},e}e.i(566901);var s={},o=(0,i.gql)(a());function l(e){var n=(0,t._)({},s,e);return r.useQuery(o,n)}e.s(["useEmailVerificationContentQuery",()=>l])},82464,e=>{"use strict";var t=e.i(878420),n=e.i(886513),i=e.i(276385);e.i(148382);var r=e.i(837596),a=e.i(269848),s=e.i(11029),o=e.i(737250);e.i(344188);var l=e.i(446530),u=e.i(173703),c=e.i(613355),p=e.i(140487),d=e.i(960178),T=e.i(751273),y=e.i(625484),E=(0,l.cssRecord)({cooldownText:[c.rcss.p(8)]});let g=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.title,l=t.subtitle,g=(0,r.useEmailVerificationContentQuery)(),m=g.loading,S=g.data,_=(0,o.useEmailVerificationResend)(),f=_.resendVerification,h=_.isInCooldown,v=_.cooldownTimeRemaining;return(0,i.jsxs)(y.View,{gap:24,align:"center","data-cy":"email-verification-widget",children:[(0,i.jsxs)(y.View,{gap:8,align:"center",children:[(0,i.jsx)(d.Header,{level:2,variant:"headerDefault",css:c.rcss.textAlign.center,children:void 0===n?"Please verify your email address":n}),l?(0,i.jsx)(d.Text,{css:c.rcss.textAlign.center,variant:"small",children:l}):null]}),(0,i.jsxs)(d.Text,{css:c.rcss.textAlign.center,children:["We sent an email to"," ",m?(0,i.jsx)(a.default,{}):(0,i.jsx)(d.Text,{style:{textDecoration:"underline",textUnderlineOffset:"3px"},children:null==S||null==(e=S.currentUser)?void 0:e.email}),"."]}),(0,i.jsxs)(y.View,{row:!0,gap:8,children:[(0,i.jsxs)(u.ShadesSurface,{children:[(0,i.jsx)(T.Tooltip,{tooltip:"You can resend in ".concat(v," seconds"),placement:"bottom",isDisabled:!h,children:(0,i.jsx)(p.Button,{iconLeft:(0,i.jsx)(s.default,{}),onClick:f,text:"Resend email",variant:"outlined",disabled:h})}),h?(0,i.jsxs)(d.Text,{variant:"small",color:"dimmer",css:E.cooldownText,children:["You can resend in ",v," seconds"]}):null]}),!1]}),(0,i.jsx)(d.Text,{css:c.rcss.textAlign.center,variant:"small",textWrap:"balance",children:"Don't see an email? Check your spam or other filtered folders."})]})};var m=e.i(891628),S=e.i(222342);e.s(["default",0,function(e){var r=e.onEmailVerified,a=(0,n._)(e,["onEmailVerified"]),s=(0,S.default)(),o=s.showConfirm,l=s.showError;return(0,m.default)({onEmailVerified:function(){o("Email verified!"),null==r||r()},onError:function(e){l(e.message)}}),(0,i.jsx)(g,(0,t._)({},a))}],82464)},479407,134628,e=>{"use strict";var t,n,i,r,a=e.i(167626),s=e.i(15053),o=e.i(960933),l=e.i(862927),u=((t={}).ERROR="ERROR",t.ACK="ACK",t.RESET="RESET",t.DEBUG="DEBUG",t.TEXT_EDITOR_CLOSED="TEXT_EDITOR_CLOSED",t.TEXT_EDITOR_STATE="WORKSPACE_STATE",t.TEXT_EDITOR_STATE_REQUEST="WORKSPACE_STATE_REQUEST",t.WORKSPACE_STATE="WORKSPACE_STATE1",t.WORKSPACE_STATE_REQUEST="WORKSPACE_STATE_REQUEST1",t.REQUEST_SET_SELECTION="REQUEST_SET_SELECTION",t.REQUEST_REPLACE_SELECTION="REQUEST_REPLACE_SELECTION",t.REQUEST_SET_TEXT="REQUEST_SET_TEXT",t.REQUEST_INSERT_TEXT="REQUEST_INSERT_TEXT",t.REQUEST_PASTE_TEXT="REQUEST_PASTE_TEXT",t.TEXT_EDITOR_REQUEST_ACTION="TEXT_EDITOR_REQUEST_ACTION",t.WORKSPACE_REQUEST_ACTION="WORKSPACE_REQUEST_ACTION",t.SET_KEYBOARD_STATE="SET_KEYBOARD_STATE",t.WORKSPACE_REQUEST_OPEN_PANE="WORKSPACE_REQUEST_OPEN_PANE",t.SHELL_INSERT_INPUT="SHELL_INSERT_INPUT",t.SHELL_COMMAND="SHELL_COMMAND",t.SHELL_PASTE_TEXT="SHELL_PASTE_TEXT",t.GIT_REFRESH_GITHUB_CONNECTION="GIT_REFRESH_GITHUB_CONNECTION",t.UPSELL_REQUEST_OPEN="UPSELL_REQUEST_OPEN",t.SHOW_FORK_TEMPLATE="SHOW_FORK_TEMPLATE",t.REQUEST_PERMISSION="REQUEST_PERMISSION",t.REQUEST_PERMISSION_RESULT="REQUEST_PERMISSION_RESULT",t.SPEECH_TO_TEXT_RESULT="SPEECH_TO_TEXT_RESULT",t.REQUEST_SPEECH_TO_TEXT_ACTION="REQUEST_SPEECH_TO_TEXT_ACTION",t.REQUEST_PANE_ACTION="REQUEST_PANE_ACTION",t.PANE_RESPONSE="PANE_RESPONSE",t.REQUEST_STORE_REVIEW_PROMPT="REQUEST_STORE_REVIEW_PROMPT",t.DOWNLOAD_FILE="DOWNLOAD_FILE",t.REFETCH_REPL_DATA="REFETCH_REPL_DATA",t.TOUR="TOUR",t.SHOW_PAYMENT_FLOW="SHOW_PAYMENT_FLOW",t.PAYING_STATUS_CHANGED="PAYING_STATUS_CHANGED",t.OWNER_CONTEXT_CHANGED="OWNER_CONTEXT_CHANGED",t.SHOW_REPL_INFO="SHOW_REPL_INFO",t.EXIT_WORKSPACE="EXIT_WORKSPACE",t.OPEN_EXPO_LAUNCH="OPEN_EXPO_LAUNCH",t.CLOSE_EXPO_LAUNCH="CLOSE_EXPO_LAUNCH",t),c=((n={}).FROM_NATIVE="FROM_NATIVE",n.TO_NATIVE="TO_NATIVE",n),p=((i={}).OPEN_FILETREE="OPEN_FILETREE",i.OPEN_NEW_PANE="OPEN_NEW_PANE",i.TOGGLE_DRAWER="TOGGLE_DRAWER",i.TOGGLE_ALLPANES="TOGGLE_ALLPANES",i.TOGGLE_RUN_STATE="TOGGLE_RUN_STATE",i),d=((r={}).REQUEST_UNDO="REQUEST_UNDO",r.REQUEST_REDO="REQUEST_REDO",r.REQUEST_BLUR="REQUEST_BLUR",r.REQUEST_FOCUS="REQUEST_FOCUS",r.REQUEST_INDENT_SELECTION="REQUEST_INDENT_SELECTION",r.REQUEST_DEDENT_SELECTION="REQUEST_DEDENT_SELECTION",r.REQUEST_TOGGLE_COMMENT="REQUEST_TOGGLE_COMMENT",r.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION="REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION",r),T=o.Type.Object({location:o.Type.Number(),length:o.Type.Number()}),y=o.Type.Object({messageType:o.Type.Literal("ERROR")}),E=o.Type.Object({messageType:o.Type.Literal("ACK")}),g=o.Type.Object({messageType:o.Type.Literal("RESET")}),m=o.Type.Object({messageType:o.Type.Literal("TEXT_EDITOR_CLOSED"),filePath:o.Type.String()}),S=o.Type.Object({messageType:o.Type.Literal("WORKSPACE_STATE"),filePath:o.Type.String(),text:o.Type.String(),selections:o.Type.Array(T),hasFocus:o.Type.Boolean(),revisionId:o.Type.String(),hasGhostwriterSuggestion:o.Type.Boolean()}),_=o.Type.Object({messageType:o.Type.Literal("WORKSPACE_STATE_REQUEST"),filePath:o.Type.String()}),f=o.Type.Union([o.Type.Literal("OFFLINE"),o.Type.Literal("IDLE"),o.Type.Literal("RUNNING"),o.Type.Literal("STOPPING"),o.Type.Literal("BEFORE_RUN")]),h=o.Type.Object({messageType:o.Type.Literal("WORKSPACE_STATE1"),isDrawerOpen:o.Type.Boolean(),isShowingAllPanes:o.Type.Boolean(),isSaving:o.Type.Boolean(),isOffline:o.Type.Boolean(),runState:f,activePaneType:o.Type.Union([o.Type.Null(),o.Type.String()]),activePaneFilePath:o.Type.Union([o.Type.Null(),o.Type.String()]),isInAgentMode:o.Type.Optional(o.Type.Boolean()),insets:o.Type.Optional(o.Type.Object({top:o.Type.Number(),bottom:o.Type.Number()}))});function v(e){return l.Value.Check(h,e)}var x=o.Type.Object({messageType:o.Type.Literal("WORKSPACE_STATE_REQUEST1")}),O=o.Type.Object({messageType:o.Type.Literal("REQUEST_REPLACE_SELECTION"),filePath:o.Type.String(),text:o.Type.String(),revisionId:o.Type.String()});function b(e){return l.Value.Check(O,e)}var R=o.Type.Object({messageType:o.Type.Literal("REQUEST_SET_SELECTION"),filePath:o.Type.String(),selections:o.Type.Array(T),revisionId:o.Type.String()});function L(e){return l.Value.Check(R,e)}var P=o.Type.Object({messageType:o.Type.Literal("REQUEST_SET_TEXT"),filePath:o.Type.String(),text:o.Type.String(),selections:o.Type.Array(T),revisionId:o.Type.String()});function w(e){return l.Value.Check(P,e)}var C=o.Type.Object({messageType:o.Type.Literal("REQUEST_INSERT_TEXT"),filePath:o.Type.String(),text:o.Type.String(),insertionRange:T,selections:o.Type.Array(T),revisionId:o.Type.String()});function U(e){return l.Value.Check(C,e)}var N=o.Type.Object({messageType:o.Type.Literal("REQUEST_PASTE_TEXT"),text:o.Type.String(),filePath:o.Type.String(),revisionId:o.Type.String()});function A(e){return l.Value.Check(N,e)}var I=o.Type.Object({messageType:o.Type.Literal("TEXT_EDITOR_REQUEST_ACTION"),action:o.Type.Enum(d),revisionId:o.Type.String(),filePath:o.Type.String()});function j(e){return l.Value.Check(I,e)}var D=o.Type.Object({messageType:o.Type.Literal("WORKSPACE_REQUEST_ACTION"),action:o.Type.Enum(p)}),B=o.Type.Object({messageType:o.Type.Literal("SET_KEYBOARD_STATE"),isShown:o.Type.Boolean(),height:o.Type.Number()}),M=o.Type.Object({messageType:o.Type.Literal("WORKSPACE_REQUEST_OPEN_PANE"),paneType:o.Type.Union([o.Type.Literal("ghostwriterChat"),o.Type.Literal("deployments")])}),k=o.Type.Object({messageType:o.Type.Literal("SHELL_INSERT_INPUT"),input:o.Type.String()}),V=o.Type.Literal("unknown"),Q=o.Type.Object({messageType:o.Type.Literal("SHELL_COMMAND"),command:V}),W=o.Type.Object({messageType:o.Type.Literal("SHELL_PASTE_TEXT"),text:o.Type.String()}),H=o.Type.Object({messageType:o.Type.Literal("GIT_REFRESH_GITHUB_CONNECTION")}),F=o.Type.Object({messageType:o.Type.Literal("UPSELL_REQUEST_OPEN"),showcasedFeature:o.Type.Optional(o.Type.Union([o.Type.Literal("ghostwriter")]))}),G=o.Type.Object({messageType:o.Type.Literal("SHOW_FORK_TEMPLATE"),templateReplId:o.Type.String(),originAiSessionId:o.Type.Optional(o.Type.String()),initialPrompt:o.Type.String(),enterInAgentMode:o.Type.Boolean(),replName:o.Type.Optional(o.Type.String())}),X=o.Type.Union([o.Type.Literal("audioRecording")]),K=o.Type.Object({messageType:o.Type.Literal("REQUEST_PERMISSION"),permission:X}),Y=o.Type.Object({messageType:o.Type.Literal("REQUEST_PERMISSION_RESULT"),grantResult:o.Type.Object({permission:X,granted:o.Type.Boolean()})}),q=o.Type.Object({messageType:o.Type.Literal("SPEECH_TO_TEXT_RESULT"),result:o.Type.Union([o.Type.Object({event:o.Type.Literal("start")}),o.Type.Object({event:o.Type.Literal("end")}),o.Type.Object({event:o.Type.Literal("update"),transcript:o.Type.String()}),o.Type.Object({event:o.Type.Literal("error"),error:o.Type.Union([o.Type.Literal("aborted"),o.Type.Literal("language-not-supported"),o.Type.Literal("network"),o.Type.Literal("no-speech"),o.Type.Literal("not-allowed"),o.Type.Literal("busy"),o.Type.Literal("unknown")])})])}),z=o.Type.Object({messageType:o.Type.Literal("REQUEST_SPEECH_TO_TEXT_ACTION"),action:o.Type.Union([o.Type.Literal("startTranscription"),o.Type.Literal("stopTranscription")])}),$=o.Type.Object({paneType:o.Type.Literal("webview"),action:o.Type.Union([o.Type.Object({type:o.Type.Literal("refresh")}),o.Type.Object({type:o.Type.Literal("navigate"),base:o.Type.String(),url:o.Type.Optional(o.Type.String()),path:o.Type.Optional(o.Type.String()),port:o.Type.Optional(o.Type.Integer())}),o.Type.Object({type:o.Type.Literal("setInsets"),insets:o.Type.Object({top:o.Type.Number()})}),o.Type.Object({type:o.Type.Literal("setVisibility"),isVisible:o.Type.Boolean()})])}),Z=o.Type.Object({messageType:o.Type.Literal("REQUEST_PANE_ACTION"),paneAction:o.Type.Union([$])}),J=o.Type.Object({paneType:o.Type.Literal("webview"),response:o.Type.Union([o.Type.Object({type:o.Type.Literal("navigation"),path:o.Type.String(),base:o.Type.Optional(o.Type.String()),port:o.Type.Optional(o.Type.Integer())}),o.Type.Object({type:o.Type.Literal("logs"),logType:o.Type.String(),method:o.Type.String(),message:o.Type.Array(o.Type.Any())}),o.Type.Object({type:o.Type.Literal("screenshot"),dataUri:o.Type.String({pattern:"^data:image/png;base64,[A-Za-z0-9+/=]+$"})})])}),ee=o.Type.Object({messageType:o.Type.Literal("PANE_RESPONSE"),paneResponse:o.Type.Union([J])}),et=o.Type.Object({messageType:o.Type.Literal("REQUEST_STORE_REVIEW_PROMPT"),source:o.Type.Union([o.Type.Literal("deployProgress"),o.Type.Literal("corePurchaseSuccess")])}),en=o.Type.Object({messageType:o.Type.Literal("DOWNLOAD_FILE"),fileName:o.Type.String(),fileContent:o.Type.String({contentEncoding:"base64"})}),ei=o.Type.Object({messageType:o.Type.Literal("REFETCH_REPL_DATA")}),er=o.Type.Object({messageType:o.Type.Literal("TOUR"),tour:o.Type.Union([o.Type.Object({type:o.Type.Literal("agent"),action:o.Type.Union([o.Type.Literal("show"),o.Type.Literal("complete")])})])}),ea=o.Type.Object({messageType:o.Type.Literal("SHOW_PAYMENT_FLOW"),flow:o.Type.Union([o.Type.Object({type:o.Type.Literal("setup"),source:o.Type.String()}),o.Type.Object({type:o.Type.Literal("setUsageLimits")})])}),es=o.Type.Object({messageType:o.Type.Literal("PAYING_STATUS_CHANGED")}),eo=o.Type.Object({messageType:o.Type.Literal("OWNER_CONTEXT_CHANGED"),orgId:o.Type.Optional(o.Type.String())}),el=o.Type.Object({messageType:o.Type.Literal("SHOW_REPL_INFO")}),eu=o.Type.Object({messageType:o.Type.Literal("EXIT_WORKSPACE")}),ec=o.Type.Object({messageType:o.Type.Literal("OPEN_EXPO_LAUNCH"),url:o.Type.String()}),ep=o.Type.Object({messageType:o.Type.Literal("CLOSE_EXPO_LAUNCH")}),ed=o.Type.Object({messageType:o.Type.Literal("DEBUG"),debugMessage:o.Type.String()}),eT=o.Type.Union([y,E,g,ed,m,S,_,h,x,R,O,P,C,N,I,D,B,k,Q,W,H,M,F,G,K,Y,q,z,Z,ee,et,en,ei,er,ea,es,eo,el,eu,ec,ep]),ey=o.Type.Object({protocolVersion:o.Type.String(),messageDirection:o.Type.Enum(c),messageId:o.Type.String(),payload:eT});function eE(e){return l.Value.Check(ey,e)}e.s(["BridgeMessageDirection",()=>c,"BridgeMessageType",()=>u,"BridgeTextEditorAction",()=>d,"BridgeWorkspaceAction",()=>p,"isBridgeMessage",()=>eE,"isBridgePayloadRequestInsertText",()=>U,"isBridgePayloadRequestPasteText",()=>A,"isBridgePayloadRequestReplaceSelection",()=>b,"isBridgePayloadRequestSetSelection",()=>L,"isBridgePayloadRequestSetText",()=>w,"isBridgePayloadRequestTextEditorAction",()=>j,"isBridgePayloadWorkspaceState",()=>v,"nativeBridgeProtocolVersion",()=>"1"],134628);var eg=e.i(664152);function em(e){var t=e.data;if(!eE(t)||t.messageDirection!==c.FROM_NATIVE)return null;if("1"!==t.protocolVersion)throw Error("Invalid protocolVersion: ".concat(t.protocolVersion," != ").concat("1"));return t}function eS(e,t){var n=em(e);if(null!=n){var i=n.payload.messageType;switch(i){case u.TEXT_EDITOR_STATE_REQUEST:case u.REQUEST_SET_SELECTION:case u.REQUEST_REPLACE_SELECTION:case u.REQUEST_SET_TEXT:case u.REQUEST_INSERT_TEXT:case u.REQUEST_PASTE_TEXT:case u.TEXT_EDITOR_REQUEST_ACTION:t({type:i,bridgeMessage:n})}}}function e_(e,t){var n=em(e);if(null!=n){var i=n.payload.messageType;i===u.GIT_REFRESH_GITHUB_CONNECTION&&t({type:i,bridgeMessage:n})}}function ef(e,t){var n=em(e);if(null!=n){var i=n.payload.messageType;i===u.PANE_RESPONSE&&t({type:i,paneResponse:n.payload.paneResponse})}}function eh(e,t){var n=em(e);if(null!=n){var i=n.payload.messageType;i===u.TOUR&&t({type:i,tour:n.payload.tour})}}function ev(e,t){var n=em(e);if(null!=n){var i=n.payload.messageType;switch(i){case u.SET_KEYBOARD_STATE:t({type:i,keyboardState:n.payload});break;case u.WORKSPACE_REQUEST_ACTION:t({type:i,action:n.payload.action});break;case u.WORKSPACE_REQUEST_OPEN_PANE:t({type:i,id:n.messageId,paneType:n.payload.paneType})}}}function ex(e,t){var n=em(e);if(n){var i=n.payload.messageType;i===u.PAYING_STATUS_CHANGED&&t({type:i})}}function eO(e,t){var n=em(e);n&&n.payload.messageType===u.OWNER_CONTEXT_CHANGED&&t(n.payload)}var eb=!1,eR=null,eL=[];function eP(e,t){var n={protocolVersion:"1",messageDirection:c.TO_NATIVE,messageId:t,payload:e};if("ReactNativeWebView"in window&&null!=window.ReactNativeWebView&&window.ReactNativeWebView.postMessage)try{window.ReactNativeWebView.postMessage(JSON.stringify(n)),eb=!0,eR=Date.now(),eL.length>0&&(eg.logger.info("Bonsai webview crash recovered",{bridgeMessage:n,bridgeLastCrashMissedMessages:eL}),eL=[])}catch(e){var i={errorMessage:(0,a._)(e,Error)?e.message:String(e),errorStack:(0,a._)(e,Error)?e.stack:void 0,bridgeMessage:n,bridgeWasEverAvailable:eb,bridgeLastSuccessTime:eR,bridgeLastCrashMissedMessages:eL,bonsaiWebviewCrash:!0};eg.logger.error("Bonsai webview crash",i),(0,eg.datadogRumError)(e,i),eL.length<10||eL.shift(),eL.push(n)}else window.postMessage(n,window.origin),eg.logger.info("Bonsai webview bridge unavailable",{bridgeMessage:n,bridgeWasEverAvailable:eb,bridgeLastSuccessTime:eR,bonsaiWebviewUnavailable:!0})}function ew(e){var t=null!=e?e:(0,s.v4)();eP({messageType:u.ERROR},t)}function eC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.v4)();eP({messageType:u.ACK},e)}e.s(["gitBridgeMessageHandler",()=>e_,"ownerContextChangedBridgeMessageHandler",()=>eO,"paneResponseBridgeMessageHandler",()=>ef,"payingStatusChangedBridgeMessageHandler",()=>ex,"sendAckMessage",()=>eC,"sendErrorMessage",()=>ew,"sendMessage",()=>eP,"textEditorBridgeMessageHandler",()=>eS,"tourBridgeMessageHandler",()=>eh,"workspaceBridgeMessageHandler",()=>ev],479407)},884151,e=>{"use strict";var t=e.i(389959),n=e.i(441329),i=e.i(479407);function r(e){var r=e.onChange,a=(0,n.useIsInBonsaiWebview)();(0,t.useEffect)(function(){if(a){var e=function(e){return(0,i.payingStatusChangedBridgeMessageHandler)(e,function(){r()})};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}},[a,r])}e.s(["default",()=>r])},664961,e=>{"use strict";var t=e.i(485273),n=e.i(389959),i=e.i(15053),r=e.i(134628),a=e.i(441329),s=e.i(479407);function o(){var e=(0,t.useRouter)(),o=(0,a.isInBonsaiWebview)(e)&&(0,a.doesBonsaiWebviewSupportFeature)(e,"supportsUpsellBridge"),l=(0,n.useCallback)(function(e){if(o){var t={messageType:r.BridgeMessageType.UPSELL_REQUEST_OPEN,showcasedFeature:e};(0,s.sendMessage)(t,(0,i.v4)())}},[o]);return o?{showUpsell:l}:null}e.s(["default",()=>o])},619542,e=>{"use strict";var t=e.i(878420),n=e.i(64386),i=e.i(276385),r=e.i(116235);function a(e){return(0,i.jsx)(r.default,(0,n._)((0,t._)({},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M4.95 6.011A9.25 9.25 0 0 0 12 21.25a9.213 9.213 0 0 0 5.989-2.2L4.95 6.01Zm1.061-1.06L19.05 17.988A9.213 9.213 0 0 0 21.25 12 9.25 9.25 0 0 0 6.011 4.95ZM1.25 12C1.25 6.063 6.063 1.25 12 1.25S22.75 6.063 22.75 12 17.937 22.75 12 22.75 1.25 17.937 1.25 12Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},911928,e=>{"use strict";var t=e.i(878420),n=e.i(64386),i=e.i(886513),r=e.i(368964),a=e.i(569384),s=e.i(973245),o=e.i(304277);function l(){var e=(0,a._)(["\n  query IsOnTrialPlan {\n    currentUser {\n      id\n      userSubscriptionType\n      userSubscription {\n        isTrial\n      }\n      billingInfo {\n        planInfo {\n          cancelAt\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}e.i(566901);var u={},c=(0,s.gql)(l()),p=function(e){var a,s,l,p,d,T,y,E,g=(a=(0,t._)({},u,e),o.useQuery(c,a)),m=g.data,S=(0,i._)(g,["data"]),_=(null==m||null==(s=m.currentUser)?void 0:s.userSubscriptionType)===r.UserSubscriptionTypeEnum.HackerPro,f=null!=(E=null==m||null==(p=m.currentUser)||null==(l=p.userSubscription)?void 0:l.isTrial)&&E,h=f&&!!(null==m||null==(y=m.currentUser)||null==(T=y.billingInfo)||null==(d=T.planInfo)?void 0:d.cancelAt);return(0,n._)((0,t._)({},S),{isOnTrialPlan:f,trialWillCancel:h,isPro:_})};e.s(["useIsOnTrialPlan",()=>p],911928)},900130,e=>{"use strict";var t=e.i(878420),n=e.i(569384),i=e.i(973245),r=e.i(951262),a=e.i(304277),s=e.i(566901);function o(){var e=(0,n._)(["\n  fragment CurrentUserPaymentMethod on CurrentUser {\n    paymentMethod {\n      ... on PaymentMethod {\n        id\n        externalId\n        last4\n        expirationMonth\n        expirationYear\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return o=function(){return e},e}function l(){var e=(0,n._)(["\n  mutation CreateStripeSetupIntent($input: CreateSetupIntentInput!) {\n    createSetupIntent(input: $input) {\n      ... on CreateSetupIntentResult {\n        clientSecret\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n    }\n  }\n"]);return l=function(){return e},e}function u(){var e=(0,n._)(["\n  query SetupIntentFormCurrentUserEmailVerification {\n    currentUser {\n      id\n      isVerified\n    }\n  }\n"]);return u=function(){return e},e}function c(){var e=(0,n._)(["\n  query PollPaymentMethod {\n    currentUser {\n      id\n      ...CurrentUserPaymentMethod\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var p={},d=(0,i.gql)(o()),T=(0,i.gql)(l());function y(e){var n=(0,t._)({},p,e);return r.useMutation(T,n)}var E=(0,i.gql)(u());function g(e){var n=(0,t._)({},p,e);return a.useQuery(E,n)}var m=(0,i.gql)(c(),d);function S(e){var n=(0,t._)({},p,e);return s.useLazyQuery(m,n)}e.s(["useCreateStripeSetupIntentMutation",()=>y,"usePollPaymentMethodLazyQuery",()=>S,"useSetupIntentFormCurrentUserEmailVerificationQuery",()=>g])},333342,e=>{"use strict";var t=e.i(878420),n=e.i(530658),i=e.i(276385),r=e.i(389959),a=e.i(719335),s=e.i(761201),o=e.i(858248),l=e.i(709485),u=e.i(886513),c=e.i(183035),p=e.i(549645),d=e.i(269848),T=e.i(480028),y=e.i(6338),E=e.i(140487);function g(e){var n=e.isMakingPayment,r=e.showProcessingState,a=e.showSuccessState,s=e.initialStateTextOverride,o=e.processingStateTextOverride,l=e.initialIconOverride,g=(0,u._)(e,["isMakingPayment","showProcessingState","showSuccessState","initialStateTextOverride","processingStateTextOverride","initialIconOverride"]),m=null!=s?s:"Submit";a?m="Success":r&&(m=null!=o?o:"Processing...");var S=null!=l?l:(0,i.jsx)(p.default,{});a?S=(0,i.jsx)(c.default,{}):r&&(S=(0,i.jsx)(d.default,{}));var _=n||a?T.tokens.accentPositiveDimmest:T.tokens.accentPrimaryDimmest,f=n||a?T.tokens.accentPositiveDimmer:T.tokens.accentPrimaryDimmer;return(0,i.jsx)(E.Button,(0,t._)({text:m,iconRight:S,colorway:n||a?"positive":"primary",css:[r&&y.loadingStyle.backgroundPulse(_,f)]},g))}var m=e.i(604999),S=e.i(442966),_=e.i(664961),f=e.i(960178),h=e.i(625484),v={google_play_pwa:(0,i.jsx)(x,{disallowedLocation:"the Google Play Store"}),mobile_webview:(0,i.jsx)(x,{disallowedLocation:"mobile devices"}),privacy_user:"Unfortunately, making purchases is not currently available for education accounts.",via_upsell_bridge:"Continuing to mobile checkout…"};function x(e){var t=e.disallowedLocation;return(0,i.jsxs)(f.Text,{children:["Unfortunately, this is not currently available for purchase through"," ",t,". Manage on"," ",(0,i.jsx)("a",{href:"https://replit.com",children:"replit.com"}),"."]})}function O(e){var t=e.reason,n=(0,_.default)();return(0,r.useEffect)(function(){"via_upsell_bridge"===t&&n&&n.showUpsell()},[t,n]),(0,i.jsxs)(h.View,{css:[{minWidth:256}],p:16,children:["via_upsell_bridge"!==t?(0,i.jsxs)(h.View,{row:!0,gap:8,pb:16,align:"center",children:[(0,i.jsx)(S.default,{size:20}),(0,i.jsx)(f.Text,{variant:"subheadBig",multiline:!1,children:"Oops!"})]}):null,(0,i.jsx)(h.View,{children:v[t]})]})}var b=e.i(959910),R=e.i(703774);e.i(375581);var L=e.i(169099),P=e.i(584426),w=e.i(446530),C=e.i(613355),U=e.i(988676),N=(0,w.cssRecord)({form:[{height:"100%",flex:1,display:"flex",flexDirection:"column"}],termsLink:[C.rcss.color.foregroundDimmest,{textDecoration:"underline"}],errorText:[C.rcss.color.accentNegativeDefault]});function A(e){var n=(0,R.useTheme)().isDarkColorScheme,r=n?L.replitDark:P.replitLight,a={theme:n?"night":"stripe",variables:{colorPrimary:r.values.global.foregroundDefault,colorBackground:r.values.global.backgroundHigher,colorText:r.values.global.foregroundDefault,colorTextPlaceholder:r.values.global.foregroundDimmest,focusOutline:"2px solid ".concat(r.values.global.accentPrimaryDefault),colorDanger:r.values.global.accentNegativeDefault,colorDangerText:r.values.global.accentNegativeDefault,fontFamily:"'IBM Plex Sans', sans-serif",spacingUnit:"0px",fontSizeBase:T.values.fontSizeDefault,focusBoxShadow:"0",borderRadius:T.values.space4,gridRowSpacing:T.values.space8},rules:{".AccordionItem":{boxShadow:"0px"},".Action":{boxShadow:"0px"},".Block":{boxShadow:"0px"},".BlockAction":{boxShadow:"0px"},".Button":{boxShadow:"0px"},".CheckboxInput":{boxShadow:"0px"},".CodeInput":{boxShadow:"0px"},".CodeInputField":{boxShadow:"0px"},".Dropdown":{boxShadow:"0px"},".DropdownItem":{boxShadow:"0px"},".Error":{boxShadow:"0px"},".InputCloseIcon":{boxShadow:"0px"},".Link":{boxShadow:"0px"},".MenuAction":{boxShadow:"0px"},".MenuIcon":{boxShadow:"0px"},".PasscodeCloseIcon":{boxShadow:"0px"},".PasscodeShowIcon":{boxShadow:"0px"},".PickerAction":{boxShadow:"0px"},".PickerItem":{boxShadow:"0px"},".SecondaryLink":{boxShadow:"0px"},".Switch":{boxShadow:"0px"},".SwitchControl":{boxShadow:"0px"},".Tab":{boxShadow:"0px"},".TermsLink":{boxShadow:"0px"},".Toggle":{boxShadow:"0px"},".ToggleItem":{boxShadow:"0px"},".Menu":{boxShadow:"0px"},".Input":{boxShadow:"0px",fontSize:T.values.fontSizeDefault,lineHeight:T.values.lineHeightDefault,padding:"".concat(T.values.space4," ").concat(T.values.space8),outlineOffset:C.sharedFocusStyles.outlineOffset},".Label":{paddingBottom:T.values.space4,marginBottom:"0px",fontSize:T.values.fontSizeSmall,lineHeight:T.values.lineHeightSmall},".FieldLabel":{fontSize:T.values.fontSizeSmall,lineHeight:T.values.lineHeightSmall}}};return(0,i.jsx)(h.View,{grow:!0,children:(0,i.jsx)(m.default,{options:(0,t._)({appearance:a},e.elementsOptions),children:(0,i.jsx)(j,(0,t._)({},e))})})}var I=function(e){var t=e.disclaimerTextAction,n=e.teamsTerms,r=void 0!==n&&n?(0,i.jsxs)(i.Fragment,{children:["By ",t,", you agree to the"," ",(0,i.jsx)("a",{href:s.LINKS_LEGAL.REPLIT_TEAMS_TERMS,target:"_blank",css:N.termsLink,children:"Teams Agreement"}),","]}):(0,i.jsxs)(i.Fragment,{children:["By ",t,", you agree to our"," ",(0,i.jsx)("a",{href:s.LINKS_LEGAL.REPLIT_TERMS,target:"_blank",css:N.termsLink,children:"Terms"})," ","and"," ",(0,i.jsx)("a",{href:s.LINKS_LEGAL.PRIVACY_POLICY,target:"_blank",css:N.termsLink,children:"Privacy Policy"}),","]});return(0,i.jsxs)(f.Text,{variant:"small",children:[r," as well as our payment provider's"," ",(0,i.jsx)("a",{href:"https://stripe.com/legal/end-users",target:"_blank",css:N.termsLink,children:"Terms"})," ","and"," ",(0,i.jsx)("a",{href:"https://stripe.com/privacy",target:"_blank",css:N.termsLink,children:"Privacy Policy"}),"."]})};function j(e){var t=e.submitButtonText,s=e.submitButtonIcon,u=e.isPayment,c=e.onSubmit,p=e.disclaimerTextAction,d=e.purchaseItemDetails,T=e.context,y=e.powerUpCategory,E=e.children,m=e.teamsTerms,S=e.onAddressChange,_=e.submitDisabled,v=(0,a.useStripe)(),x=(0,a.useElements)(),R=(0,n._)((0,r.useState)(!1),2),L=R[0],P=R[1],w=(0,n._)((0,r.useState)(!1),2),C=w[0],A=w[1],j=(0,n._)((0,r.useState)(!1),2),D=j[0],B=j[1],M=(0,n._)((0,r.useState)(),2),k=M[0],V=M[1],Q=(0,n._)((0,r.useState)(null),2),W=Q[0],H=Q[1],F=d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U.DividerH,{}),d]}):null,G=(0,b.useIsPurchaseAllowed)(),X=G.isPurchaseAllowed,K=G.reasonPurchaseNotAllowed;return!X&&K?(0,i.jsx)(O,{reason:K}):(0,i.jsx)("form",{name:"credit-card-form",autoComplete:"on",onSubmit:function(e){e.preventDefault(),v&&x&&((0,o.track)(l.events.PAYMENT_METHOD_FORM_USED,{action:"submit_clicked",context:T,powerUpCategory:y}),A(!0),V(""),c({stripe:v,elements:x,onError:function(e){A(!1),setTimeout(function(){V(e)},500)},onSubmitComplete:function(){A(!1),B(!0)}}))},css:N.form,children:(0,i.jsxs)(h.View,{grow:!0,justify:"end",gap:16,children:[(0,i.jsx)(h.View,{gap:8,grow:!0,children:!1!==W?(0,i.jsxs)(h.View,{gap:8,children:[(0,i.jsx)(a.PaymentElement,{onLoadError:function(){return H(!0)},onReady:function(){P(!0),(0,o.track)(l.events.PAYMENT_METHOD_FORM_USED,{action:"viewed",context:T,powerUpCategory:y})},options:{terms:{card:"never"},paymentMethodOrder:["google_pay","apple_pay","card"]}}),(0,i.jsx)(a.AddressElement,{onLoadError:function(){return H(!0)},options:{mode:"billing",fields:{phone:"never"}},onChange:function(e){e.complete&&(null==S||S(e.value.address))}})]}):(0,i.jsxs)(f.Text,{children:["Something went wrong. Please contact us at"," ",(0,i.jsx)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"."]})}),L?(0,i.jsxs)(i.Fragment,{children:[F,(0,i.jsxs)(h.View,{gap:8,children:[(0,i.jsx)(g,{initialStateTextOverride:t,isMakingPayment:u,type:"submit",disabled:C||!v||!x||D||_,showProcessingState:C,showSuccessState:D,initialIconOverride:s}),E]})]}):null,k?(0,i.jsx)(f.Text,{css:N.errorText,children:k}):null,L?(0,i.jsx)(I,{teamsTerms:m,disclaimerTextAction:p}):null]})})}e.s(["StripePaymentTerms",()=>I,"default",()=>A],333342)},417939,e=>{"use strict";var t=e.i(913243);function n(e){var n;return("card_error"===e.type||"validation_error"===e.type||"invalid_request_error"===e.type)&&e.message?e.message:((0,t.captureSentryException)("Stripe Elements error: ".concat(null!=(n=e.message)?n:"unknown"),{extra:{message:e.message,type:e.type,code:e.code,declineCode:e.decline_code,docUrl:e.doc_url,paymentIntent:e.payment_intent,paymentMethod:e.payment_method,setupIntent:e.setup_intent,source:e.source}}),"Something went wrong. Please contact support.")}var i={return_url:window.location.href};function r(e){return e?{return_url:e}:i}var a={currency:"usd",payment_method_types:["card"]};e.s(["basicStripeElementsOptions",()=>a,"generateStripeErrorMessage",()=>n,"getStripeElementsConfirmParams",()=>r,"stripeElementsConfirmParams",()=>i])},845228,284325,e=>{"use strict";var t=e.i(297083),n=e.i(878420),i=e.i(64386),r=e.i(530658),a=e.i(817556),s=e.i(276385),o=e.i(900130),l=e.i(416746),u=e.i(596139),c=e.i(82464),p=e.i(441329),d=e.i(858248),T=e.i(709485),y=e.i(913243),E=e.i(333342),g=e.i(911928),m=e.i(417939),S=e.i(884151),_=e.i(485273),f=e.i(389959),h=e.i(179104),v=e.i(134628),x=e.i(479407);function O(){var e=(0,_.useRouter)(),t=(0,p.doesBonsaiWebviewSupportFeature)(e,"stripePayment")&&(0,p.isInBonsaiWebview)(e);return{showPaymentFlow:(0,f.useCallback)(function(e){var n={messageType:v.BridgeMessageType.SHOW_PAYMENT_FLOW,flow:e};switch(e.type){case"setup":if(!t)break;(0,x.sendMessage)(n,(0,h.nanoid)());break;case"setUsageLimits":(0,x.sendMessage)(n,(0,h.nanoid)())}},[t])}}e.s(["default",()=>O],284325);var b=e.i(613355),R=e.i(396776),L=e.i(625484);function P(e){var _,f=e.onClose,h=e.context,v=e.powerUpCategory,x=e.children,P=e.buttonText,w=e.buttonIcon,C=e.returnUrl,U=(0,p.useDoesBonsaiWebviewSupportFeature)("stripePayment"),N=(0,o.useSetupIntentFormCurrentUserEmailVerificationQuery)({skip:U}).data,A=O().showPaymentFlow,I=(0,g.useIsOnTrialPlan)(),j=I.isOnTrialPlan,D=I.isPro,B=I.trialWillCancel,M=(0,r._)((0,o.useCreateStripeSetupIntentMutation)(),1)[0],k=(0,r._)((0,o.usePollPaymentMethodLazyQuery)(),2),V=k[0],Q=k[1].stopPolling;return((0,S.default)({onChange:V}),U)?(A({type:"setup",source:null!=h?h:"new_payment_method_form"}),f(),null):(null==N||null==(_=N.currentUser)?void 0:_.isVerified)===!1?(0,s.jsx)(L.View,{css:[b.rcss.height("100%"),b.rcss.center],children:(0,s.jsx)(c.default,{})}):(0,s.jsxs)(L.View,{gap:8,children:[j&&!B?(0,s.jsx)(R.StatusBanner,{colorway:"primary",icon:(0,s.jsx)(l.default,{}),text:(0,s.jsxs)(s.Fragment,{children:["Adding a payment method will set your Replit"," ",D?u.corePlanName:u.hackerPlanName," membership to auto-renew at the end of the trial. Cancel anytime from your"," ",(0,s.jsx)("a",{href:"/account#billing",target:"_blank",children:"account settings"}),"."]})}):null,(0,s.jsx)(E.default,{elementsOptions:(0,i._)((0,n._)({},m.basicStripeElementsOptions),{mode:"setup"}),isPayment:!1,onSubmit:function(e){return(0,t._)(function(e){var n,i,r,s,o,l;return(0,a._)(this,function(u){switch(u.label){case 0:return n=e.stripe,i=e.elements,r=e.onError,s=e.onSubmitComplete,[4,i.submit()];case 1:if(o=u.sent().error)return l=(0,m.generateStripeErrorMessage)(o),r(l),[2];return M({variables:{input:{}},onError:function(e){r(e.message),(0,y.captureSentryException)("Error in NewPaymentMethodForm when creating Setup Intent: "+e.message)},onCompleted:function(e){var o=e.createSetupIntent;return(0,t._)(function(){var e,t,l,u;return(0,a._)(this,function(a){switch(a.label){case 0:if("CreateSetupIntentResult"!==o.__typename)return r(o.message),[2];return[4,n.confirmSetup({elements:i,clientSecret:o.clientSecret,confirmParams:(0,m.getStripeElementsConfirmParams)(C),redirect:"if_required"})];case 1:var c,p,y,E;return t=(e=a.sent()).error,l=e.setupIntent,t?(u=(0,m.generateStripeErrorMessage)(t),r(u)):null===l.payment_method||"string"!=typeof l.payment_method?r("Something went wrong. Please try again."):(p=(c={onSubmitComplete:s,onError:r,newPaymentMethod:l.payment_method}).onError,y=c.onSubmitComplete,E=c.newPaymentMethod,Q(),V({fetchPolicy:"cache-and-network",ssr:!1,pollInterval:1500,onCompleted:function(e){var t,n,i,r,a,s;(null==e||null==(n=e.currentUser)||null==(t=n.paymentMethod)?void 0:t.__typename)==="UnauthorizedError"&&(Q(),p(e.currentUser.paymentMethod.message)),(null==e||null==(r=e.currentUser)||null==(i=r.paymentMethod)?void 0:i.__typename)==="PaymentMethod"&&(null==e||null==(s=e.currentUser)||null==(a=s.paymentMethod)?void 0:a.externalId)===E&&(Q(),(0,d.track)(T.events.PAYMENT_METHOD_FORM_USED,{action:"payment_method_saved",context:h,powerUpCategory:v}),y(),setTimeout(function(){f()},1e3))},onError:function(e){Q(),p(e.message)}})),[2]}})})()}}),[2]}})}).apply(this,arguments)},submitButtonText:null!=P?P:"Save payment method",submitButtonIcon:w,disclaimerTextAction:"adding this payment method",context:h,powerUpCategory:v,children:x})]})}e.s(["NewPaymentMethodForm",()=>P],845228)},276273,e=>{"use strict";var t,n,i=e.i(700005),r=e.i(775973),a=e.i(15053),s=e.i(365669),o=e.i(427802),l=e.i(858248),u="gating_id",c="ld_uid",p=function(e){o.default.set(c,e)},d=function(){return o.default.get(c)},T={clientSideID:s.publicEnv.NEXT_PUBLIC_LAUNCH_DARKLY_CLIENT_ID||"",context:{key:d()||((null==(t=window)?void 0:t.ldAnonId)?n=window.ldAnonId:((n=(0,l.getAnonymousId)()||i.default.get(u))||(n=(0,a.v4)()),(0,l.getAnonymousId)()!==n&&(0,l.setAnonymousId)(n),window.ldAnonId=n),i.default.get(u)||i.default.set(u,n,{path:"/"}),n),kind:"user",anonymous:!d()},options:{bootstrap:"localStorage",sendEvents:!0,streaming:!1,fetchGoals:!1},reactOptions:{useCamelCaseFlagKeys:!1}};e.s(["default",0,function(){return(0,r.withLDProvider)(T)},"setLdUserId",()=>p])},78433,e=>{"use strict";var t=e.i(368964),n=e.i(761201);function i(e){if(e>1)return"100%+";var t=(100*e).toLocaleString(void 0,{maximumFractionDigits:0});return"".concat(t,"%")}var r=["/home","/cycles","/usage","/account","/bounties","/templates","/extensions","/learn","/repls","/replEnvironmentDesktop","/replEnvironmentMobile","/new","/profile","/templates/templates","/my-teams"],a=function(e){return r.includes(e)||e.startsWith("/t/[orgSlug]")},s=function(e){var i,r,a,s,o,l="";switch(e.type){case"org":if((null==(r=e.orgDealContext)?void 0:r.dealType)===t.OrgDealType.Trial||(null==(a=e.orgDealContext)?void 0:a.dealType)===t.OrgDealType.EnterpriseTrial){i=e.isAdmin?"Your Replit Teams trial has ended. Contact ".concat(null!=(o=null==(s=e.orgDealContext)?void 0:s.salesContactEmail)?o:n.SALES_TEAM_CONTACT_EMAIL," to resume services."):"Your Replit Teams trial has ended. Contact your team admin to resume services.";break}i=e.isSuspended?e.isAdmin?"Your team has been temporarily suspended due to a failed payment. Please update your team's payment method and address unpaid invoices to continue using Agent.":"Your team has been temporarily suspended due to a failed payment. Contact your team admin to continue using Agent.":e.isAdmin?"Your team has a failed payment. Please update your team's payment method to continue using Agent.":"Your team has a failed payment. Contact your team admin to continue using Agent.",l=e.isAdmin?"If you have already updated your team's payment method, please wait a few minutes and refresh the page.":"If your team admin has already updated your team's payment method, please wait a few minutes and refresh the page.";break;case"user":i=e.isSuspended?"Your account has been temporarily suspended due to a failed payment":"You have a failed payment. Please update your payment method to continue using Agent.",l="If you have already updated your payment method, please wait a few minutes and refresh the page."}return{headingText:i,subheadingText:l}};e.s(["convertDecimalToDisplayPercent",()=>i,"getUbbSuspensionDescription",()=>s,"shouldShowUsageAlert",()=>a])},851583,e=>{"use strict";var t=e.i(276385),n=e.i(183035),i=e.i(480028),r=e.i(960178),a=e.i(625484);function s(){return(0,t.jsxs)(a.View,{p:16,gap:16,children:[(0,t.jsxs)(a.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(n.default,{size:20,color:i.tokens.accentPositiveDefault}),(0,t.jsx)(r.Text,{variant:"subheadDefault",children:"Payment successful"})]}),(0,t.jsx)(a.View,{gap:16,children:(0,t.jsx)(r.Text,{children:"Your payment has been successfully processed and your account is now active again."})})]})}e.s(["PaymentSuccessNotification",()=>s])},765219,e=>{"use strict";var t=e.i(530658),n=e.i(276385),i=e.i(389959),r=e.i(138716),a=e.i(549645),s=e.i(706323),o=e.i(416298),l=e.i(596139),u=e.i(845228),c=e.i(480028),p=e.i(446530),d=e.i(613355),T=e.i(140487),y=e.i(91720),E=e.i(136540),g=e.i(11235),m=e.i(960178),S=e.i(625484);function _(e){var r=e.suspensionScheduledTime,u=e.onDone,p=e.context,d=(0,t._)((0,i.useState)(!1),2),E=d[0],_=d[1];if(E)return(0,n.jsx)(f,{onDone:u,onBack:function(){return _(!1)}});var v=r?new Date(r).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):null;return"org"===p.type?(0,n.jsxs)(S.View,{p:16,gap:16,children:[(0,n.jsxs)(S.View,{row:!0,gap:8,align:"center",children:[(0,n.jsx)(o.default,{size:20,color:c.tokens.orangeStronger}),(0,n.jsx)(m.Text,{variant:"subheadDefault",children:"Payment required to avoid suspension"})]}),(0,n.jsxs)(S.View,{gap:16,children:[(0,n.jsxs)(m.Text,{children:["Your recent payment for your team ",p.orgName,"'s plan didn’t go through. To prevent an interruption in your team's services, please update your team's payment method or pay the outstanding balance directly."]}),(0,n.jsxs)(g.Prose,{children:[(0,n.jsx)(m.Text,{children:"What this means:"}),(0,n.jsxs)("ul",{css:h.usageList,children:[(0,n.jsx)("li",{children:"Members of your team cannot create new deployments or access AI services until payment is cleared."}),(0,n.jsxs)("li",{children:["If payment is not made",v?" by ".concat(v):"",", active deployments of your team will be suspended and taken offline."]})]})]}),(0,n.jsxs)(S.View,{css:h.buttonContainer,row:!0,children:[(0,n.jsx)(S.View,{gap:8,children:(0,n.jsx)(y.ButtonLink,{iconLeft:(0,n.jsx)(s.default,{}),text:"View and pay invoices",href:"/orb-customer-portal/org/".concat(p.orgId),target:"_blank"})}),(0,n.jsx)(S.View,{gap:8,children:(0,n.jsx)(T.Button,{iconLeft:(0,n.jsx)(a.default,{}),text:"Update payment method",colorway:"primary",onClick:function(){return _(!0)}})})]})]})]}):(0,n.jsxs)(S.View,{p:16,gap:16,children:[(0,n.jsxs)(S.View,{row:!0,gap:8,align:"center",children:[(0,n.jsx)(o.default,{size:20,color:c.tokens.orangeStronger}),(0,n.jsx)(m.Text,{variant:"subheadDefault",children:"Payment required to avoid suspension"})]}),(0,n.jsxs)(S.View,{gap:16,children:[(0,n.jsxs)(m.Text,{children:["Your recent payment for your Replit ",l.corePlanName," plan didn’t go through. To prevent an interruption in your services, please update your payment method or pay the outstanding balance directly."]}),(0,n.jsxs)(g.Prose,{children:[(0,n.jsx)(m.Text,{children:"What this means:"}),(0,n.jsxs)("ul",{css:h.usageList,children:[(0,n.jsx)("li",{children:"You cannot create new deployments or access AI services until payment is cleared."}),(0,n.jsxs)("li",{children:["If payment is not made",v?" by ".concat(v):"",", your active deployments will be suspended and taken offline."]})]})]}),(0,n.jsxs)(S.View,{css:h.buttonContainer,row:!0,children:[(0,n.jsx)(S.View,{gap:8,children:(0,n.jsx)(y.ButtonLink,{iconLeft:(0,n.jsx)(s.default,{}),text:"View and pay invoices",href:"/orb-customer-portal",target:"_blank"})}),(0,n.jsx)(S.View,{gap:8,children:(0,n.jsx)(T.Button,{iconLeft:(0,n.jsx)(a.default,{}),text:"Update payment method",colorway:"primary",onClick:function(){return _(!0)}})})]})]})]})}function f(e){var t=e.onDone,i=e.onBack;return(0,n.jsxs)(S.View,{gap:16,children:[(0,n.jsxs)(S.View,{row:!0,gap:8,align:"center",children:[(0,n.jsx)(E.IconButton,{alt:"Back",onClick:i,children:(0,n.jsx)(r.default,{})}),(0,n.jsx)(m.Text,{variant:"subheadDefault",multiline:!1,children:"Update Payment Method"})]}),(0,n.jsx)(u.NewPaymentMethodForm,{onClose:t,context:"suspension_grace_period"})]})}var h=(0,p.cssRecord)({usageList:[{paddingLeft:c.tokens.space12,li:[{listStyleType:"disc"}]}],buttonContainer:[d.rcss.gap(16),d.rcss.justify.spaceBetween,{"@media (max-width: 600px)":{flexDirection:"column"}}]});e.s(["PaymentMethodForm",()=>f,"UBBSuspensionGracePeriod",()=>_])},872122,e=>{"use strict";var t=e.i(530658),n=e.i(276385),i=e.i(389959),r=e.i(619542),a=e.i(549645),s=e.i(706323),o=e.i(765219),l=e.i(480028),u=e.i(446530),c=e.i(613355),p=e.i(140487),d=e.i(91720),T=e.i(11235),y=e.i(960178),E=e.i(625484),g=(0,u.cssRecord)({usageList:[{paddingLeft:l.tokens.space12,li:[{listStyleType:"disc"}]}],buttonContainer:[c.rcss.gap(16),c.rcss.justify.spaceBetween,{"@media (max-width: 600px)":{flexDirection:"column"}}]});function m(e){var u=e.onDone,c=(0,t._)((0,i.useState)(!1),2),m=c[0],S=c[1];return m?(0,n.jsx)(o.PaymentMethodForm,{onDone:u,onBack:function(){return S(!1)}}):(0,n.jsxs)(E.View,{p:16,gap:16,children:[(0,n.jsxs)(E.View,{row:!0,gap:8,align:"center",children:[(0,n.jsx)(r.default,{size:20,color:l.tokens.accentNegativeDefault}),(0,n.jsx)(y.Text,{variant:"subheadDefault",children:"Services suspended"})]}),(0,n.jsxs)(E.View,{gap:16,children:[(0,n.jsx)(y.Text,{children:"Your account has been suspended due to a failed payment. To restore your services, please update your payment method or pay the outstanding balance directly."}),(0,n.jsxs)(T.Prose,{children:[(0,n.jsx)(y.Text,{children:"What this means:"}),(0,n.jsxs)("ul",{css:g.usageList,children:[(0,n.jsx)("li",{children:"Agent access, cloud services and deployments are halted."}),(0,n.jsx)("li",{children:"Active deployments are offline and inaccessible."})]})]}),(0,n.jsxs)(E.View,{row:!0,css:g.buttonContainer,children:[(0,n.jsx)(E.View,{gap:8,children:(0,n.jsx)(d.ButtonLink,{iconLeft:(0,n.jsx)(s.default,{}),text:"View and pay invoices",href:"/orb-customer-portal",target:"_blank"})}),(0,n.jsx)(E.View,{gap:8,children:(0,n.jsx)(p.Button,{iconLeft:(0,n.jsx)(a.default,{}),text:"Update payment method",colorway:"primary",onClick:function(){return S(!0)}})})]})]})]})}e.s(["UBBSuspension",()=>m])},780026,e=>{"use strict";var t=e.i(530658),n=e.i(389959),i=e.i(878420),r=e.i(569384),a=e.i(973245),s=e.i(613141),o=e.i(304277);e.i(566901);var l=e.i(951262);function u(){var e=(0,r._)(["\n  fragment UsageBasedBillingSuspensionNotification on UsageBasedBillingSuspensionStatusNotification {\n    id\n    isDismissed\n    user {\n      id\n    }\n    org {\n      id\n      name\n    }\n    type\n    suspensionScheduledTime\n  }\n"]);return u=function(){return e},e}function c(){var e=(0,r._)(["\n  subscription UsageBasedBillingSuspensionNotifications($orgId: String) {\n    usageBasedBillingSuspensionStatusNotifications(orgId: $orgId) {\n      id\n      ...UsageBasedBillingSuspensionNotification\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function p(){var e=(0,r._)(["\n  query UsageBasedBillingSuspensionNotificationsCurrentUser {\n    currentUser {\n      id\n    }\n  }\n"]);return p=function(){return e},e}function d(){var e=(0,r._)(["\n  mutation DismissUbbSuspensionNotification(\n    $input: DismissUbbSuspensionNotificationInput!\n  ) {\n    dismissUbbSuspensionNotification(input: $input) {\n      ... on UsageBasedBillingSuspensionStatusNotification {\n        ...UsageBasedBillingSuspensionNotification\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var T={},y=(0,a.gql)(u()),E=(0,a.gql)(c(),y),g=(0,a.gql)(p()),m=(0,a.gql)(d(),y),S=e.i(968783);function _(){var e,r,a,u,c,p,d=(0,S.useCurrentUserStoredOrgContext)().orgId,y=(e=(0,i._)({},T,void 0),o.useQuery(g,e)),_=y.data,f=y.loading,h=(r={variables:{orgId:null!=d?d:void 0},skip:(null==_||null==(c=_.currentUser)?void 0:c.__typename)!=="CurrentUser"||f},a=(0,i._)({},T,r),s.useSubscription(E,a)),v=h.data,x=h.loading,O=h.error,b=(0,t._)((u=(0,i._)({},T,void 0),l.useMutation(m,u)),1)[0],R=(0,t._)((0,n.useState)(null),2),L=R[0],P=R[1];return{suspensionNotification:(null==v||null==(p=v.usageBasedBillingSuspensionStatusNotifications)?void 0:p.__typename)==="UsageBasedBillingSuspensionStatusNotification"&&L!==v.usageBasedBillingSuspensionStatusNotifications.id?v.usageBasedBillingSuspensionStatusNotifications:null,suspensionNotificationsLoading:x,suspensionNotificationsError:O,handleDissmissNotification:function(e){P(e),b({variables:{input:{notificationId:e}}})}}}e.s(["useUBBSuspensionNotifications",()=>_],780026)},879226,e=>{"use strict";var t=e.i(530658),n=e.i(276385),i=e.i(485273),r=e.i(389959),a=e.i(368964),s=e.i(851583),o=e.i(872122),l=e.i(765219),u=e.i(780026),c=e.i(78433),p=e.i(739521);function d(){var e,d=(0,i.useRouter)(),T=(0,c.shouldShowUsageAlert)(d.pathname),y=(0,r.useRef)(null),E=(0,t._)((0,r.useState)(!1),2),g=E[0],m=E[1],S=(0,u.useUBBSuspensionNotifications)(),_=S.suspensionNotification,f=S.suspensionNotificationsLoading,h=S.suspensionNotificationsError,v=S.handleDissmissNotification;return((0,r.useEffect)(function(){return y.current&&(clearTimeout(y.current),y.current=null),_?y.current=setTimeout(function(){m(!0)},300):m(!1),function(){y.current&&clearTimeout(y.current)}},[_]),!T||!_||f||h)?null:_.type===a.Ubb_Suspension_Status_NotificationstypeEnumType.InGracePeriod?(0,n.jsx)(p.Modal,{isOpen:g,onRequestClose:function(){m(!1)},preventOutsideModalClickClose:!0,children:(0,n.jsx)(l.UBBSuspensionGracePeriod,{context:_.org?{type:"org",orgId:_.org.id,orgName:_.org.name}:{type:"user"},suspensionScheduledTime:null!=(e=_.suspensionScheduledTime)?e:null,onDone:function(){m(!1),v(_.id)}})}):_.type===a.Ubb_Suspension_Status_NotificationstypeEnumType.Suspended?(0,n.jsx)(p.Modal,{isOpen:!0,onRequestClose:function(){v(_.id)},preventOutsideModalClickClose:!0,children:(0,n.jsx)(o.UBBSuspension,{onDone:function(){v(_.id)}})}):_.type===a.Ubb_Suspension_Status_NotificationstypeEnumType.Resolved?(0,n.jsx)(p.Modal,{isOpen:!0,onRequestClose:function(){v(_.id)},preventOutsideModalClickClose:!0,children:(0,n.jsx)(s.PaymentSuccessNotification,{})}):null}e.s(["UBBSuspensionNotificationModals",()=>d])}]);

//# debugId=1ea50128-699b-2215-5bfb-42d5b275b017
//# sourceMappingURL=80e17f174cc16eb4.js.map