;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="835cc82e-1213-810a-c97d-6a260580282a")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,319237,e=>{e.v({content:"ReplOrgPermissionDeniedError-module__aTRzTW__content",description:"ReplOrgPermissionDeniedError-module__aTRzTW__description",ownerCard:"ReplOrgPermissionDeniedError-module__aTRzTW__ownerCard",ownerUsername:"ReplOrgPermissionDeniedError-module__aTRzTW__ownerUsername",root:"ReplOrgPermissionDeniedError-module__aTRzTW__root"})},911185,952914,e=>{"use strict";var t,n,r,i,a,o,s,l,u,c,d,f,p,h,m,g,x=e.i(276385),y=e.i(389959),b=e.i(7433),w=e.i(167626),_=e.i(231693),k=e.i(883153).DiagAPI.instance(),S=e.i(893299),C=function(){function e(){var e=this;this._promise=new Promise(function(t,n){e._resolve=t,e._reject=n})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),j=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},T=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},E=function(){function e(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new C}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,T([this._that],j(n),!1))).then(function(e){return t._deferred.resolve(e)},function(e){return t._deferred.reject(e)})}catch(e){this._deferred.reject(e)}}return this._deferred.promise},e}();(r=c||(c={}))[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED";var R=e.i(568126);(i=d||(d={})).AlwaysOff="always_off",i.AlwaysOn="always_on",i.ParentBasedAlwaysOff="parentbased_always_off",i.ParentBasedAlwaysOn="parentbased_always_on",i.ParentBasedTraceIdRatio="parentbased_traceidratio",i.TraceIdRatio="traceidratio";var I=["OTEL_SDK_DISABLED"],A=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"],P=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS","OTEL_SEMCONV_STABILITY_OPT_IN"],D=1/0,O={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:R.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:D,OTEL_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:D,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:D,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:d.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative",OTEL_SEMCONV_STABILITY_OPT_IN:[]},N={ALL:R.DiagLogLevel.ALL,VERBOSE:R.DiagLogLevel.VERBOSE,DEBUG:R.DiagLogLevel.DEBUG,INFO:R.DiagLogLevel.INFO,WARN:R.DiagLogLevel.WARN,ERROR:R.DiagLogLevel.ERROR,NONE:R.DiagLogLevel.NONE};function M(e){var t={};for(var n in O)if("OTEL_LOG_LEVEL"===n)!function(e,t,n){var r=n[e];if("string"==typeof r){var i=N[r.toUpperCase()];null!=i&&(t[e]=i)}}(n,t,e);else if(I.indexOf(n)>-1)!function(e,t,n){if(void 0!==n[e]){var r=String(n[e]);t[e]="true"===r.toLowerCase()}}(n,t,e);else if(A.indexOf(n)>-1)!function(e,t,n,r,i){if(void 0===r&&(r=-1/0),void 0===i&&(i=1/0),void 0!==n[e]){var a=Number(n[e]);isNaN(a)||(a<r?t[e]=r:a>i?t[e]=i:t[e]=a)}}(n,t,e);else if(P.indexOf(n)>-1)!function(e,t,n,r){void 0===r&&(r=",");var i=n[e];"string"==typeof i&&(t[e]=i.split(r).map(function(e){return e.trim()}))}(n,t,e);else{var r=e[n];null!=r&&(t[n]=String(r))}return t}var L=e.i(119468),B=("undefined"==typeof globalThis?"undefined":(0,L._)(globalThis))==="object"?globalThis:("undefined"==typeof self?"undefined":(0,L._)(self))==="object"?self:("undefined"==typeof window?"undefined":(0,L._)(window))==="object"?window:"object"===(0,L._)(e.g)?e.g:{};function V(){return Object.assign({},O,M(B))}var F=function(e){var t;k.error("string"==typeof(t=e)?t:JSON.stringify(function(e){for(var t={},n=e;null!==n;)Object.getOwnPropertyNames(n).forEach(function(e){if(!t[e]){var r=n[e];r&&(t[e]=String(r))}}),n=Object.getPrototypeOf(n);return t}(t)))};function U(e){try{F(e)}catch(e){}}var G=e.i(105823),$=function(){function e(e,t){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var n=V();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new E(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(k.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){this._shutdownOnce.isCalled||(e.spanContext().traceFlags&S.TraceFlags.SAMPLED)!=0&&this._addToBuffer(e)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},e.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){0===this._droppedSpansCount&&k.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(k.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},e.prototype._flushAll=function(){var e=this;return new Promise(function(t,n){for(var r=[],i=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),a=0;a<i;a++)r.push(e._flushOneBatch());Promise.all(r).then(function(){t()}).catch(n)})},e.prototype._flushOneBatch=function(){var e=this;return(this._clearTimer(),0===this._finishedSpans.length)?Promise.resolve():new Promise(function(t,n){var r=setTimeout(function(){n(Error("Timeout"))},e._exportTimeoutMillis);_.context.with((0,G.suppressTracing)(_.context.active()),function(){e._finishedSpans.length<=e._maxExportBatchSize?(i=e._finishedSpans,e._finishedSpans=[]):i=e._finishedSpans.splice(0,e._maxExportBatchSize);for(var i,a=function(){return e._exporter.export(i,function(e){var i;clearTimeout(r),e.code===c.SUCCESS?t():n(null!=(i=e.error)?i:Error("BatchSpanProcessor: span export failed"))})},o=null,s=0,l=i.length;s<l;s++){var u=i[s];u.resource.asyncAttributesPending&&u.resource.waitForAsyncAttributes&&(null!=o||(o=[]),o.push(u.resource.waitForAsyncAttributes()))}null===o?a():Promise.all(o).then(a,function(e){U(e),n(e)})})})},e.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var t=function(){e._isExporting=!0,e._flushOneBatch().finally(function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(t){e._isExporting=!1,U(t)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();void 0===this._timer&&(this._timer=setTimeout(function(){return t()},this._scheduledDelayMillis),this._timer)}},e.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},e}(),H=(a=function(e,t){return(a=Object.setPrototypeOf||(0,w._)({__proto__:[]},Array)&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),z=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.onInit(n),r}return H(t,e),t.prototype.onInit=function(e){var t=this;(null==e?void 0:e.disableAutoFlushOnDocumentHide)!==!0&&"undefined"!=typeof document&&(this._visibilityChangeListener=function(){"hidden"===document.visibilityState&&t.forceFlush().catch(function(e){U(e)})},this._pageHideListener=function(){t.forceFlush().catch(function(e){U(e)})},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},t.prototype.onShutdown=function(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},t}($),W=e.i(993796),q=e.i(297083),K=e.i(904851),Y=e.i(90659),Q=e.i(817556),X=e.i(664152),Z=new(function(){function e(){(0,K._)(this,e)}return(0,Y._)(e,[{key:"export",value:function(e,t){var n=new Map,r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l,u=o.value,d=u.spanContext(),f={name:u.name,service:"repl.it-web",trace_id:d.traceId,span_id:d.spanId,start:u.startTime,end:u.endTime,parent_id:u.parentSpanId,attributes:u.attributes};n.has(d.traceId)||n.set(d.traceId,[]),null==(l=n.get(d.traceId))||l.push(f)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var p=Array.from(n.values());if(0===p.length)return void t({code:c.SUCCESS});var h=(0,X.getReplContext)();fetch("/datadog/traces",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"fetch"},body:JSON.stringify({repl:{id:null==h?void 0:h.id,rootOriginReplUrl:null==h?void 0:h.rootOriginReplUrl},traces:p})}).then(function(){t({code:c.SUCCESS})}).catch(function(e){X.logger.error("Failed to send traces to Datadog: ".concat(e.message)),t({code:c.FAILED,error:e.message})})}},{key:"shutdown",value:function(){return(0,q._)(function(){return(0,Q._)(this,function(e){return[2]})})()}},{key:"forceFlush",value:function(){return(0,q._)(function(){return(0,Q._)(this,function(e){return[2]})})()}}]),e}()),J=e.i(399119),ee=e.i(721281),et=e.i(663355),en=e.i(862470),er=e.i(445789),ei=e.i(468930),ea=e.i(164760);(o=f||(f={}))[o.NOT_RECORD=0]="NOT_RECORD",o[o.RECORD=1]="RECORD",o[o.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED";var eo=e.i(846806),es=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},el=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};function eu(e){var t,n,r={};if((void 0===e?"undefined":(0,L._)(e))!=="object"||null==e)return r;try{for(var i=es(Object.entries(e)),a=i.next();!a.done;a=i.next()){var o,s=el(a.value,2),l=s[0],u=s[1];if(o=l,"string"!=typeof o||!(o.length>0)){k.warn("Invalid attribute key: "+l);continue}if(!ec(u)){k.warn("Invalid attribute value set for key: "+l);continue}Array.isArray(u)?r[l]=u.slice():r[l]=u}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function ec(e){return null==e||(Array.isArray(e)?function(e){try{for(var t,n,r,i=es(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(null!=o){if(!r){if(ed(o)){r=void 0===o?"undefined":(0,L._)(o);continue}return!1}if((void 0===o?"undefined":(0,L._)(o))!==r)return!1}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0}(e):ed(e))}function ed(e){switch(void 0===e?"undefined":(0,L._)(e)){case"number":case"boolean":case"string":return!0}return!1}var ef=e.i(619379),ep=performance;function eh(e){return[Math.trunc(e/1e3),Math.round(e%1e3*1e6)]}function em(){var e=ep.timeOrigin;return"number"!=typeof e&&(e=ep.timing&&ep.timing.fetchStart),e}function eg(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function ev(e){return eg(e)||"number"==typeof e||(0,w._)(e,Date)}function ex(e,t){var n=[e[0]+t[0],e[1]+t[1]];return n[1]>=1e9&&(n[1]-=1e9,n[0]+=1),n}var ey="exception.type",eb="exception.message",ew=function(){return(ew=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},e_=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ek=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},eS=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},eC=function(){function e(e,t,n,r,i,a,o,s,l,u){void 0===o&&(o=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:ef.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=r,this.parentSpanId=a,this.kind=i,this.links=o;var c=Date.now();this._performanceStartTime=ep.now(),this._performanceOffset=c-(this._performanceStartTime+em()),this._startTimeProvided=null!=s,this.startTime=this._getTime(null!=s?s:c),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,null!=u&&this.setAttributes(u),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t)}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return null==t||this._isSpanEnded()||(0===e.length?k.warn("Invalid attribute key: "+e):ec(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?this._droppedAttributesCount++:this.attributes[e]=this._truncateToSize(t):k.warn("Invalid attribute value set for key: "+e)),this},e.prototype.setAttributes=function(e){var t,n;try{for(var r=e_(Object.entries(e)),i=r.next();!i.done;i=r.next()){var a=ek(i.value,2),o=a[0],s=a[1];this.setAttribute(o,s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return this},e.prototype.addEvent=function(e,t,n){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return k.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(0===this._droppedEventsCount&&k.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),ev(t)&&(ev(n)||(n=t),t=void 0);var r=eu(t);return this.events.push({name:e,attributes:r,time:this._getTime(n),droppedAttributesCount:0}),this},e.prototype.addLink=function(e){return this.links.push(e),this},e.prototype.addLinks=function(e){var t;return(t=this.links).push.apply(t,eS([],ek(e),!1)),this},e.prototype.setStatus=function(e){return this._isSpanEnded()||(this.status=ew({},e),null!=this.status.message&&"string"!=typeof e.message&&(k.warn("Dropping invalid status.message of type '"+(0,L._)(e.message)+"', expected 'string'"),delete this.status.message)),this},e.prototype.updateName=function(e){return this._isSpanEnded()||(this.name=e),this},e.prototype.end=function(e){var t,n,r,i;this._isSpanEnded()?k.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once."):(this._ended=!0,this.endTime=this._getTime(e),this._duration=(t=this.startTime,r=(n=this.endTime)[0]-t[0],(i=n[1]-t[1])<0&&(r-=1,i+=1e9),[r,i]),this._duration[0]<0&&(k.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&k.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this))},e.prototype._getTime=function(e){if("number"==typeof e&&e<=ep.now()){var t;return t=e+this._performanceOffset,ex(eh(em()),eh("number"==typeof t?t:ep.now()))}if("number"==typeof e)return eh(e);if((0,w._)(e,Date))return eh(e.getTime());if(eg(e))return e;if(this._startTimeProvided)return eh(Date.now());var n=ep.now()-this._performanceStartTime;return ex(this.startTime,eh(n))},e.prototype.isRecording=function(){return!1===this._ended},e.prototype.recordException=function(e,t){var n={};"string"==typeof e?n[eb]=e:e&&(e.code?n[ey]=e.code.toString():e.name&&(n[ey]=e.name),e.message&&(n[eb]=e.message),e.stack&&(n["exception.stacktrace"]=e.stack)),n[ey]||n[eb]?this.addEvent("exception",n,t):k.warn("Failed to record an exception "+e)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&k.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substring(0,t)},e.prototype._truncateToSize=function(e){var t=this,n=this._attributeValueLengthLimit;return n<=0?(k.warn("Attribute value limit must be positive, got "+n),e):"string"==typeof e?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(e){return"string"==typeof e?t._truncateToLimitUtil(e,n):e}):e},e}();(s=p||(p={}))[s.NOT_RECORD=0]="NOT_RECORD",s[s.RECORD=1]="RECORD",s[s.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED";var ej=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:p.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),eT=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:p.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),eE=e.i(548452),eR=function(){function e(e){var t,n,r,i;this._root=e.root,this._root||(U(Error("ParentBasedSampler must have a root sampler configured")),this._root=new eT),this._remoteParentSampled=null!=(t=e.remoteParentSampled)?t:new eT,this._remoteParentNotSampled=null!=(n=e.remoteParentNotSampled)?n:new ej,this._localParentSampled=null!=(r=e.localParentSampled)?r:new eT,this._localParentNotSampled=null!=(i=e.localParentNotSampled)?i:new ej}return e.prototype.shouldSample=function(e,t,n,r,i,a){var o=ei.trace.getSpanContext(e);return o&&(0,eE.isSpanContextValid)(o)?o.isRemote?o.traceFlags&S.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,r,i,a):this._remoteParentNotSampled.shouldSample(e,t,n,r,i,a):o.traceFlags&S.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(e,t,n,r,i,a):this._localParentNotSampled.shouldSample(e,t,n,r,i,a):this._root.shouldSample(e,t,n,r,i,a)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),eI=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(0xffffffff*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:(0,eE.isValidTraceId)(t)&&this._accumulate(t)<this._upperBound?p.RECORD_AND_SAMPLED:p.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var r=8*n;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t},e}(),eA=d.AlwaysOn;function eP(){var e=V();return{sampler:eD(e),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:e.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:e.OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:e.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:e.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:e.OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:e.OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:e.OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:e.OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT},mergeResourceWithDefaults:!0}}function eD(e){switch(void 0===e&&(e=V()),e.OTEL_TRACES_SAMPLER){case d.AlwaysOn:return new eT;case d.AlwaysOff:return new ej;case d.ParentBasedAlwaysOn:return new eR({root:new eT});case d.ParentBasedAlwaysOff:return new eR({root:new ej});case d.TraceIdRatio:return new eI(eO(e));case d.ParentBasedTraceIdRatio:return new eR({root:new eI(eO(e))});default:return k.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+eA+'".'),new eT}}function eO(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return k.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(k.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to 1."),1):t<0||t>1?(k.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to 1."),1):t}var eN=function(){this.generateTraceId=eL(16),this.generateSpanId=eL(8)},eM=Array(32);function eL(e){return function(){for(var t=0;t<2*e;t++)eM[t]=Math.floor(16*Math.random())+48,eM[t]>=58&&(eM[t]+=39);return String.fromCharCode.apply(null,eM.slice(0,2*e))}}var eB=function(){function e(e,t,n){this._tracerProvider=n;var r,i,a,o=(r={sampler:eD()},(a=Object.assign({},i=eP(),r,t)).generalLimits=Object.assign({},i.generalLimits,t.generalLimits||{}),a.spanLimits=Object.assign({},i.spanLimits,t.spanLimits||{}),a);this._sampler=o.sampler,this._generalLimits=o.generalLimits,this._spanLimits=o.spanLimits,this._idGenerator=t.idGenerator||new eN,this.resource=n.resource,this.instrumentationLibrary=e}return e.prototype.startSpan=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=_.context.active()),t.root&&(n=ei.trace.deleteSpan(n));var r,i,a,o,s,l,u=ei.trace.getSpan(n);if((0,G.isTracingSuppressed)(n)){k.debug("Instrumentation suppressed, returning Noop Span");var c=ei.trace.wrapSpanContext(eo.INVALID_SPAN_CONTEXT);return c}var d=null==u?void 0:u.spanContext(),p=this._idGenerator.generateSpanId();d&&ei.trace.isSpanContextValid(d)?(o=d.traceId,s=d.traceState,l=d.spanId):o=this._idGenerator.generateTraceId();var h=null!=(r=t.kind)?r:ea.SpanKind.INTERNAL,m=(null!=(i=t.links)?i:[]).map(function(e){return{context:e.context,attributes:eu(e.attributes)}}),g=eu(t.attributes),x=this._sampler.shouldSample(n,o,e,h,g,m);s=null!=(a=x.traceState)?a:s;var y={traceId:o,spanId:p,traceFlags:x.decision===f.RECORD_AND_SAMPLED?S.TraceFlags.SAMPLED:S.TraceFlags.NONE,traceState:s};if(x.decision===f.NOT_RECORD){k.debug("Recording is off, propagating context in a non-recording span");var c=ei.trace.wrapSpanContext(y);return c}var b=eu(Object.assign(g,x.attributes));return new eC(this,n,e,y,h,l,m,t.startTime,void 0,b)},e.prototype.startActiveSpan=function(e,t,n,r){if(!(arguments.length<2)){2==arguments.length?o=t:3==arguments.length?(i=t,o=n):(i=t,a=n,o=r);var i,a,o,s=null!=a?a:_.context.active(),l=this.startSpan(e,i,s),u=ei.trace.setSpan(s,l);return _.context.with(u,o,void 0,l)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}(),eV=e.i(364520),eF=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},eU=function(){function e(e){var t;void 0===e&&(e={}),this._propagators=null!=(t=e.propagators)?t:[],this._fields=Array.from(new Set(this._propagators.map(function(e){return"function"==typeof e.fields?e.fields():[]}).reduce(function(e,t){return e.concat(t)},[])))}return e.prototype.inject=function(e,t,n){var r,i;try{for(var a=eF(this._propagators),o=a.next();!o.done;o=a.next()){var s=o.value;try{s.inject(e,t,n)}catch(e){k.warn("Failed to inject with "+s.constructor.name+". Err: "+e.message)}}}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e.prototype.extract=function(e,t,n){return this._propagators.reduce(function(e,r){try{return r.extract(e,t,n)}catch(e){k.warn("Failed to extract with "+r.constructor.name+". Err: "+e.message)}return e},e)},e.prototype.fields=function(){return this._fields.slice()},e}(),eG="baggage",e$=e.i(472278),eH=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},ez=function(){function e(){}return e.prototype.inject=function(e,t,n){var r=eV.propagation.getBaggage(e);if(!(!r||(0,G.isTracingSuppressed)(e))){var i=r.getAllEntries().map(function(e){var t=eH(e,2),n=t[0],r=t[1],i=encodeURIComponent(n)+"="+encodeURIComponent(r.value);return void 0!==r.metadata&&(i+=";"+r.metadata.toString()),i}).filter(function(e){return e.length<=4096}).slice(0,180).reduce(function(e,t){var n=""+e+(""!==e?",":"")+t;return n.length>8192?e:n},"");i.length>0&&n.set(t,eG,i)}},e.prototype.extract=function(e,t,n){var r=n.get(t,eG),i=Array.isArray(r)?r.join(","):r;if(!i)return e;var a={};return 0===i.length||(i.split(",").forEach(function(e){var t=function(e){var t,n=e.split(";");if(!(n.length<=0)){var r=n.shift();if(r){var i=r.indexOf("=");if(!(i<=0)){var a=decodeURIComponent(r.substring(0,i).trim()),o=decodeURIComponent(r.substring(i+1).trim());return n.length>0&&(t=(0,e$.baggageEntryMetadataFromString)(n.join(";"))),{key:a,value:o,metadata:t}}}}}(e);if(t){var n={value:t.value};t.metadata&&(n.metadata=t.metadata),a[t.key]=n}}),0===Object.entries(a).length)?e:eV.propagation.setBaggage(e,eV.propagation.createBaggage(a))},e.prototype.fields=function(){return[eG]},e}(),eW=Function.prototype.toString,eq=eW.call(Object),eK=(t=Object.getPrototypeOf,n=Object,function(e){return t(n(e))}),eY=Object.prototype,eQ=eY.hasOwnProperty,eX=Symbol?Symbol.toStringTag:void 0,eZ=eY.toString;function eJ(e){if(null==(t=e)||(void 0===t?"undefined":(0,L._)(t))!="object"||"[object Object]"!==(null==(n=e)?void 0===n?"[object Undefined]":"[object Null]":eX&&eX in Object(n)?function(e){var t=eQ.call(e,eX),n=e[eX],r=!1;try{e[eX]=void 0,r=!0}catch(e){}var i=eZ.call(e);return r&&(t?e[eX]=n:delete e[eX]),i}(n):(r=n,eZ.call(r))))return!1;var t,n,r,i=eK(e);if(null===i)return!0;var a=eQ.call(i,"constructor")&&i.constructor;return"function"==typeof a&&(0,w._)(a,a)&&eW.call(a)===eq}function e0(e){return e2(e)?e.slice():e}function e1(e,t,n){for(var r=n.get(e[t])||[],i=0,a=r.length;i<a;i++){var o=r[i];if(o.key===t&&o.obj===e)return!0}return!1}function e2(e){return Array.isArray(e)}function e3(e){return"function"==typeof e}function e5(e){return!e4(e)&&!e2(e)&&!e3(e)&&(void 0===e?"undefined":(0,L._)(e))==="object"}function e4(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||(0,w._)(e,Date)||(0,w._)(e,RegExp)||null===e}var e8="telemetry.sdk.name",e6="telemetry.sdk.language",e7="telemetry.sdk.version",e9=((h={})[e8]="opentelemetry",h["process.runtime.name"]="browser",h[e6]="webjs",h[e7]="1.30.1",h),te=function(){return(te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},tt=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var l=[a,s];if(n)throw TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},tn=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},tr=function(){function e(e,t){var n,r=this;this._attributes=e,this.asyncAttributesPending=null!=t,this._syncAttributes=null!=(n=this._attributes)?n:{},this._asyncAttributesPromise=null==t?void 0:t.then(function(e){return r._attributes=Object.assign({},r._attributes,e),r.asyncAttributesPending=!1,e},function(e){return k.debug("a resource's async attributes promise rejected: %s",e),r.asyncAttributesPending=!1,{}})}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e(((t={})["service.name"]="unknown_service",t[e6]=e9[e6],t[e8]=e9[e8],t[e7]=e9[e7],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&k.error("Accessing resource attributes before async attributes settled"),null!=(e=this._attributes)?e:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){var e,t,n,r;return e=this,t=void 0,n=void 0,r=function(){return tt(this,function(e){switch(e.label){case 0:if(!this.asyncAttributesPending)return[3,2];return[4,this._asyncAttributesPromise];case 1:e.sent(),e.label=2;case 2:return[2]}})},new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,(0,w._)(t,n)?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},e.prototype.merge=function(t){var n,r=this;if(!t)return this;var i=te(te({},this._syncAttributes),null!=(n=t._syncAttributes)?n:t.attributes);return this._asyncAttributesPromise||t._asyncAttributesPromise?new e(i,Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then(function(e){var n,i=tn(e,2),a=i[0],o=i[1];return te(te(te(te({},r._syncAttributes),a),null!=(n=t._syncAttributes)?n:t.attributes),o)})):new e(i)},e.EMPTY=new e({}),e}(),ti=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ta=function(){function e(e){this._spanProcessors=e}return e.prototype.forceFlush=function(){var e,t,n=[];try{for(var r=ti(this._spanProcessors),i=r.next();!i.done;i=r.next()){var a=i.value;n.push(a.forceFlush())}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise(function(e){Promise.all(n).then(function(){e()}).catch(function(t){U(t||Error("MultiSpanProcessor: forceFlush failed")),e()})})},e.prototype.onStart=function(e,t){var n,r;try{for(var i=ti(this._spanProcessors),a=i.next();!a.done;a=i.next())a.value.onStart(e,t)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.onEnd=function(e){var t,n;try{for(var r=ti(this._spanProcessors),i=r.next();!i.done;i=r.next())i.value.onEnd(e)}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.shutdown=function(){var e,t,n=[];try{for(var r=ti(this._spanProcessors),i=r.next();!i.done;i=r.next()){var a=i.value;n.push(a.shutdown())}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise(function(e,t){Promise.all(n).then(function(){e()},t)})},e}(),to=function(){function e(){}return e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}(),ts=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},tl=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};(l=m||(m={}))[l.resolved=0]="resolved",l[l.timeout=1]="timeout",l[l.error=2]="error",l[l.unresolved=3]="unresolved";var tu=function(){function e(e){void 0===e&&(e={}),this._registeredSpanProcessors=[],this._tracers=new Map;var t,n,r,i,a,o,s,l,u,c,d,f,p,h,m,g,x,y=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.shift(),r=new WeakMap;e.length>0;)n=function e(t,n,r,i){if(void 0===r&&(r=0),!(r>20)){if(r++,e4(t)||e4(n)||e3(n))s=e0(n);else if(e2(t)){if(s=t.slice(),e2(n))for(var a,o,s,l=0,u=n.length;l<u;l++)s.push(e0(n[l]));else if(e5(n))for(var c=Object.keys(n),l=0,u=c.length;l<u;l++){var d=c[l];s[d]=e0(n[d])}}else if(e5(t))if(e5(n)){if(a=t,o=n,!(eJ(a)&&eJ(o)))return n;s=Object.assign({},t);for(var c=Object.keys(n),l=0,u=c.length;l<u;l++){var d=c[l],f=n[d];if(e4(f))void 0===f?delete s[d]:s[d]=f;else{var p=s[d];if(e1(t,d,i)||e1(n,d,i))delete s[d];else{if(e5(p)&&e5(f)){var h=i.get(p)||[],m=i.get(f)||[];h.push({obj:t,key:d}),m.push({obj:n,key:d}),i.set(p,h),i.set(f,m)}s[d]=e(s[d],f,r,i)}}}}else s=n;return s}}(n,e.shift(),0,r);return n}({},eP(),(h=Object.assign({},(t=e).spanLimits),m=M(B),h.attributeCountLimit=null!=(s=null!=(o=null!=(a=null!=(r=null==(n=t.spanLimits)?void 0:n.attributeCountLimit)?r:null==(i=t.generalLimits)?void 0:i.attributeCountLimit)?a:m.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)?o:m.OTEL_ATTRIBUTE_COUNT_LIMIT)?s:128,h.attributeValueLengthLimit=null!=(p=null!=(f=null!=(d=null!=(u=null==(l=t.spanLimits)?void 0:l.attributeValueLengthLimit)?u:null==(c=t.generalLimits)?void 0:c.attributeValueLengthLimit)?d:m.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)?f:m.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)?p:D,Object.assign({},t,{spanLimits:h})));if(this.resource=null!=(g=y.resource)?g:tr.empty(),y.mergeResourceWithDefaults&&(this.resource=tr.default().merge(this.resource)),this._config=Object.assign({},y,{resource:this.resource}),null==(x=e.spanProcessors)?void 0:x.length)this._registeredSpanProcessors=tl([],ts(e.spanProcessors),!1),this.activeSpanProcessor=new ta(this._registeredSpanProcessors);else{var b=this._buildExporterFromEnv();if(void 0!==b){var w=new z(b);this.activeSpanProcessor=w}else this.activeSpanProcessor=new to}}return e.prototype.getTracer=function(e,t,n){var r=e+"@"+(t||"")+":"+((null==n?void 0:n.schemaUrl)||"");return this._tracers.has(r)||this._tracers.set(r,new eB({name:e,version:t,schemaUrl:null==n?void 0:n.schemaUrl},this._config,this)),this._tracers.get(r)},e.prototype.addSpanProcessor=function(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch(function(e){return k.error("Error while trying to shutdown current span processor",e)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new ta(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(e){void 0===e&&(e={}),ei.trace.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&_.context.setGlobalContextManager(e.contextManager),e.propagator&&eV.propagation.setGlobalPropagator(e.propagator)},e.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map(function(t){return new Promise(function(n){var r,i=setTimeout(function(){n(Error("Span processor did not completed within timeout period of "+e+" ms")),r=m.timeout},e);t.forceFlush().then(function(){clearTimeout(i),r!==m.timeout&&n(r=m.resolved)}).catch(function(e){clearTimeout(i),r=m.error,n(e)})})});return new Promise(function(e,n){Promise.all(t).then(function(t){var r=t.filter(function(e){return e!==m.resolved});r.length>0?n(r):e()}).catch(function(e){return n([e])})})},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(e){var t;return null==(t=this.constructor._registeredPropagators.get(e))?void 0:t()},e.prototype._getSpanExporter=function(e){var t;return null==(t=this.constructor._registeredExporters.get(e))?void 0:t()},e.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set(V().OTEL_PROPAGATORS)),n=t.map(function(t){var n=e._getPropagator(t);return n||k.warn('Propagator "'+t+'" requested through environment variable is unavailable.'),n}).reduce(function(e,t){return t&&e.push(t),e},[]);return 0===n.length?void 0:1===t.length?n[0]:new eU({propagators:n})},e.prototype._buildExporterFromEnv=function(){var e=V().OTEL_TRACES_EXPORTER;if("none"!==e&&""!==e){var t=this._getSpanExporter(e);return t||k.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},e._registeredPropagators=new Map([["tracecontext",function(){return new b.W3CTraceContextPropagator}],["baggage",function(){return new ez}]]),e._registeredExporters=new Map,e}(),tc=e.i(908564),td=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},tf=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},tp=function(){function e(){this._enabled=!1,this._currentContext=tc.ROOT_CONTEXT}return e.prototype._bindFunction=function(e,t){void 0===e&&(e=tc.ROOT_CONTEXT);var n=this,r=function(){for(var r=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return n.with(e,function(){return t.apply(r,i)})};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),r},e.prototype.active=function(){return this._currentContext},e.prototype.bind=function(e,t){return(void 0===e&&(e=this.active()),"function"==typeof t)?this._bindFunction(e,t):t},e.prototype.disable=function(){return this._currentContext=tc.ROOT_CONTEXT,this._enabled=!1,this},e.prototype.enable=function(){return this._enabled||(this._enabled=!0,this._currentContext=tc.ROOT_CONTEXT),this},e.prototype.with=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var a=this._currentContext;this._currentContext=e||tc.ROOT_CONTEXT;try{return t.call.apply(t,tf([n],td(r),!1))}finally{this._currentContext=a}},e}(),th=(u=function(e,t){return(u=Object.setPrototypeOf||(0,w._)({__proto__:[]},Array)&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tm=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;if(t.contextManager)throw"contextManager should be defined in register method not in constructor";if(t.propagator)throw"propagator should be defined in register method not in constructor";return n}return th(t,e),t.prototype.register=function(t){void 0===t&&(t={}),void 0===t.contextManager&&(t.contextManager=new tp),t.contextManager&&t.contextManager.enable(),e.prototype.register.call(this,t)},t}(tu),tg=function(e){function t(){var e;return(0,K._)(this,t),e=(0,J._)(this,t,arguments),(0,ee._)(e,"spanSet",new Map),e}return(0,er._)(t,e),(0,Y._)(t,[{key:"startSpan",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.context.active(),i=(0,et._)((0,en._)(t.prototype),"startSpan",this).call(this,e,n,r);return this.spanSet.set(i.spanContext().spanId,i),i}},{key:"pruneSpans",value:function(){this.spanSet.forEach(function(e){e.isRecording()&&e.setAttribute("pruned",!0)}),this.spanSet=new Map}}]),t}(eB),tv=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,K._)(this,t),e=(0,J._)(this,t,[n]),(0,ee._)(e,"_wsConfig",void 0),(0,ee._)(e,"_wsTracers",new Map),e._wsConfig=n,e}return(0,er._)(t,e),(0,Y._)(t,[{key:"getTracer",value:function(e,t,n){var r="".concat(e,"@").concat(t||"",":").concat((null==n?void 0:n.schemaUrl)||"");return this._wsTracers.has(r)||this._wsTracers.set(r,new tg({name:e,version:t,schemaUrl:null==n?void 0:n.schemaUrl},this._wsConfig,this)),this._wsTracers.get(r)}},{key:"pruneSpansForTracer",value:function(e,t,n){var r,i="".concat(e,"@").concat(t||"",":").concat((null==n?void 0:n.schemaUrl)||"");this._wsTracers.has(i)&&(null==(r=this._wsTracers.get(i))||r.pruneSpans())}}]),t}(tm);function tx(){var e=(0,W.useFlag)({controlName:"flag-open-telemetry-tracing"});return(0,y.useEffect)(function(){e&&((g=new tv).addSpanProcessor(new z(Z)),g.register({propagator:new b.W3CTraceContextPropagator}))},[e]),(0,x.jsx)(x.Fragment,{})}function ty(e){g.pruneSpansForTracer(e)}e.s(["OpenTelemetryTracer",()=>tx,"pruneSpans",()=>ty],911185);var tb=e.i(485273),tw=e.i(995691),t_=e.i(714165),tk=e.i(140487),tS=e.i(960178),tC=e.i(625484),tj=e.i(319237);function tT(e){var t=e.ownerUsername,n=e.ownerImage,r=(0,tb.useRouter)();return(0,x.jsx)(tC.View,{clsx:tj.default.root,children:(0,x.jsxs)(tC.View,{clsx:tj.default.content,children:[(0,x.jsx)(tw.default,{size:48}),(0,x.jsx)(tS.Header,{level:1,variant:"headerDefault",children:"Permission required"}),(0,x.jsx)(tS.Text,{clsx:tj.default.description,color:"dimmer",children:"You don't have permission to access this app. Contact the owner or a team admin to request access."}),(0,x.jsxs)(tC.View,{clsx:tj.default.ownerCard,row:!0,gap:12,align:"center",children:[(0,x.jsx)(t_.Avatar,{src:null!=n?n:null,username:t,size:40,layout:"intrinsic"}),(0,x.jsxs)(tC.View,{children:[(0,x.jsx)(tS.Text,{variant:"small",color:"dimmest",children:"Owner"}),(0,x.jsxs)(tS.Text,{clsx:tj.default.ownerUsername,children:["@",t]})]})]}),(0,x.jsx)(tk.Button,{text:"Return to home",colorway:"primary",onClick:function(){r.push("/~")}})]})})}e.s(["ReplOrgPermissionDeniedError",()=>tT],952914)},133320,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245),i=e.i(951262);function a(){var e=(0,n._)(["\n  mutation SaveReplLayoutState($input: SetReplLayoutStateInput!) {\n    setReplLayoutState(input: $input) {\n      ... on Repl {\n        id\n        layoutState\n      }\n    }\n  }\n"]);return a=function(){return e},e}var o={},s=(0,r.gql)(a());function l(e){var n=(0,t._)({},o,e);return i.useMutation(s,n)}e.s(["SaveReplLayoutStateDocument",()=>s,"useSaveReplLayoutStateMutation",()=>l])},207873,42783,e=>{"use strict";var t=e.i(389959),n=e.i(131141),r=e.i(161322),i=e.i(62820),a=e.i(289074);function o(e){var o=(0,r.useSetAtom)(a.connectionStateAtom),s=(0,r.useSetAtom)(a.connectionKillActionsAtom),l=(0,t.useRef)(null);(0,t.useEffect)(function(){if(e){var t=function(){null!==l.current&&(clearTimeout(l.current),l.current=null)},r=e.onConnectionStateChanged(function(e){e===i.ConnectionState.CONNECTED?(t(),o((0,n.produce)(function(e){e.pid1="ok"}))):(t(),l.current=setTimeout(function(){o((0,n.produce)(function(e){e.pid1="fatal"})),l.current=null},6e4))});return s((0,n.produce)(function(t){t.pid1={label:"Kill connection",action:function(){console.warn("pid1: killing connection via debug panel"),e.close()}}})),function(){t(),r(),s((0,n.produce)(function(e){e.pid1=null}))}}},[e,o,s])}e.s(["usePid1ConnectionMonitor",()=>o],207873),e.i(148382);var s=e.i(394212),l=e.i(297083),u=e.i(817556),c=e.i(299798);function d(){return(0,c.usePid2)(function(e,t){return t.signal,(0,l._)(function(){var e,t,n,r,i,a,o,l;return(0,u._)(this,function(u){switch(u.label){case 0:return[3,12];case 1:u.trys.push([1,6,7,12]),i=(0,s._)(e),u.label=2;case 2:return[4,i.next()];case 3:if(!(t=!(a=u.sent()).done))return[3,5];(o=a.value).ok&&(o.payload.extras?console.log("[pid2]: ".concat(o.payload.message),o.payload.extras):console.log("[pid2]: ".concat(o.payload.message))),u.label=4;case 4:return t=!1,[3,2];case 5:return[3,12];case 6:return l=u.sent(),n=!0,r=l,[3,12];case 7:if(u.trys.push([7,,10,11]),!(t&&null!=i.return))return[3,9];return[4,i.return()];case 8:u.sent(),u.label=9;case 9:return[3,11];case 10:if(n)throw r;return[7];case 11:return[7];case 12:return[2]}})})()},[]),null}e.s(["default",()=>d],42783)},821472,e=>{"use strict";var t=e.i(971131),n=e.i(541793),r=(0,n.atom)(!1),i=(0,n.atom)(null,function(e,n,i){e(r)?(0,t.flushSync)(function(){n(a,null),n(r,!1)}):(i&&n(a,i),n(r,!0))}),a=(0,n.atom)(null),o=(0,n.atom)([]);e.s(["commandBarIsOpenAtom",()=>r,"commandsAtom",()=>o,"initialSubCommandAtom",()=>a,"toggleCommandBarAtom",()=>i])},290625,406035,949874,926956,80725,906116,965265,555605,667183,67537,138841,592979,863117,810157,153626,134965,984008,781525,e=>{"use strict";var t=e.i(960933),n=t.Type.String();t.Type.String();var r=t.Type.Object({width:t.Type.Number(),height:t.Type.Number()}),i=t.Type.Object({x:t.Type.Number(),y:t.Type.Number()}),a=t.Type.Intersect([i,r]),o=t.Type.Object({top:t.Type.Number(),bottom:t.Type.Number(),left:t.Type.Number(),right:t.Type.Number()}),s=t.Type.Object({id:t.Type.String(),type:t.Type.Literal("paneGroup"),panes:t.Type.Array(n),percent:t.Type.Number(),activeIndex:t.Type.Number()}),l=t.Type.Object({id:t.Type.String(),type:t.Type.Literal("floatingPaneGroup"),panes:t.Type.Array(n),activeIndex:t.Type.Number(),rect:a}),u=t.Type.Recursive(function(e){return t.Type.Object({type:t.Type.Literal("split"),stacked:t.Type.Boolean(),children:t.Type.Array(t.Type.Union([s,e])),percent:t.Type.Number()})});t.Type.Union([s,u]);var c=t.Type.Object({tiling:t.Type.Union([u,s,t.Type.Null()]),floating:t.Type.Array(l)});t.Type.Union([t.Type.Literal("left"),t.Type.Literal("right")]),t.Type.Object({inset:t.Type.Optional(o),size:r,gap:t.Type.Number(),headerHeight:t.Type.Number()});var d=t.Type.Union([t.Type.Literal("above"),t.Type.Literal("below"),t.Type.Literal("leftOf"),t.Type.Literal("rightOf")]);function f(e){var t=e.rect,n=e.point,r=t.height>t.width?t.width/t.height:1,i=t.width>t.height?t.height/t.width:1,a=(n.x-t.x)*i,o=(t.x+t.width-n.x)*i,s=(n.y-t.y)*r,l=Math.min(a,o,s,(t.y+t.height-n.y)*r);return l===a?"left":l===o?"right":l===s?"top":"bottom"}function p(e,t){var n,r,i,a,o={width:n=.5*t.width,height:r=.5*t.height,x:t.x+(t.width-n)/2,y:t.y+(t.height-r)/2};if(i=e.x,a=e.y,i>o.x&&i<o.x+o.width&&a>o.y&&a<o.y+o.height)return{dropLocation:"middle",previewRect:t};var s={x:t.x+t.width/2,y:t.y+t.height/2},l=.3*t.width,u=s.x-l/2;if(e.x>=u&&e.x<=u+l){var c=e.y<=s.y?"above":"below",d=t.height/2;return{dropLocation:c,previewRect:{x:t.x,y:"above"===c?t.y:t.y+d,width:t.width,height:d}}}var f=e.x<=s.x?"leftOf":"rightOf",p=t.width/2;return{dropLocation:f,previewRect:{x:"leftOf"===f?t.x:t.x+p,y:t.y,width:p,height:t.height}}}t.Type.Union([d,t.Type.Literal("replace")]),t.Type.Union([t.Type.Literal("up"),t.Type.Literal("left"),t.Type.Literal("right"),t.Type.Literal("down")]),e.s(["LayoutRootSchema",()=>c],406035);var h=e.i(878420),m={height:0,width:0};function g(e,t){var n=t.edge,r=t.delta,i=t.minSize,a=void 0===i?m:i,o=(0,h._)({},e),s=a.height,l=a.width;if("top"===n||"topLeft"===n||"topRight"===n){var u=e.height-r.y;o.height=Math.max(u,s),u<s?o.y=e.y+e.height-s:o.y=e.y+r.y}else("bottom"===n||"bottomLeft"===n||"bottomRight"===n)&&(o.height=Math.max(e.height+r.y,s));if("right"===n||"bottomRight"===n||"topRight"===n)o.width=Math.max(e.width+r.x,l);else if("left"===n||"bottomLeft"===n||"topLeft"===n){var c=e.width-r.x;o.width=Math.max(c,l),c<l?o.x=e.x+e.width-l:o.x=e.x+r.x}return o}function x(e){if(e.length<1)throw Error("Expected a path with a parent");return e.slice(0,-1)}function y(e){return"floatingPaneGroup"!==e.type}e.s(["getParentPath",()=>x,"isTiledNode",()=>y],319105);var b=e.i(530658),w=e.i(633600),_=e.i(346715),k=e.i(119468);function S(e,t){var n=(0,w._)(t),r=n[0],i=n.slice(1);if("floating"===r){if(!e.floating)return null;var a=i[0];if("number"!=typeof a)throw Error("Expected floatingIndex");var o=e.floating[a];if(!o)throw Error("Expected paneGroup");return o}if("tiling"!==r)throw Error("Expected tiling path");var s=e.tiling;if(!s)return null;var l=s,u=i.length,c=0,d=!0,f=!1,p=void 0;try{for(var h,m=i[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value;if("paneGroup"===l.type)break;if("number"!=typeof g)throw Error("Expected number");c++,l=l.children[g]}}catch(e){f=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}return u===c?l:null}function C(e,t){var n=e.floating.find(function(e){return e.panes.includes(t)});if(n)return{index:n.panes.indexOf(t),paneGroup:n,paneGroupPath:["floating",e.floating.indexOf(n)],floating:!0};var r=e.tiling;if(!r)return null;for(var i=[{paneGroupPath:["tiling"],parent:null,grandparent:null,node:r}];i.length;){var a=i.shift();if(!a)throw Error("Expected item");if("split"===a.node.type){var o=!0,s=!1,l=void 0;try{for(var u,c=a.node.children[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;i.push({grandparent:a.parent,parent:a.node,node:d,paneGroupPath:(0,_._)(a.paneGroupPath).concat([a.node.children.indexOf(d)])})}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}}else if(a.node.panes.includes(t))return{paneGroupPath:a.paneGroupPath,paneGroup:a.node,parent:a.parent,grandparent:a.grandparent,index:a.node.panes.indexOf(t),floating:!1}}return null}function j(e,t){var n=e.tiling;return n?function e(t,n,r){if("paneGroup"===t.type)return{paneGroup:t,path:r};var i=0,a=t.children.length-1;return"topRight"!==n||t.stacked?"bottomRight"===n?i=a:"bottomLeft"===n&&t.stacked&&(i=a):i=a,e(t.children[i],n,(0,_._)(r).concat([i]))}(n,t,["tiling"]):null}function T(e,t){var n=e.tiling,r=e.floating,i=(0,_._)(r);for(n&&i.push(n);i.length;){var a=i.shift();if(!a)throw Error("Expected item");if("split"===a.type)i.push.apply(i,(0,_._)(a.children));else if(a.id===t)return a}return null}function E(e,t){var n=e.tiling;if(null===n)return null;for(var r=[[n,["tiling"]]];r.length;){var i=function(){var e=r.shift();if(!e)throw Error("Expected item");var n=(0,b._)(e,2),i=n[0],a=n[1];return"split"!==i.type?"continue":i.children.some(function(e){return"paneGroup"===e.type&&e.id===t})?{v:{node:i,path:a}}:void i.children.forEach(function(e,t){r.push([e,(0,_._)(a).concat([t])])})}();if("object"===(0,k._)(i))return i.v}return null}function R(e,t){var n=C(e,t);if((null==n?void 0:n.paneGroup.type)==="paneGroup"){var r=E(e,n.paneGroup.id);if(r){var i=r.node.children,a=i.indexOf(n.paneGroup);return a<i.length-1?i[a+1]:i[a-1]}}return null}function I(e,t){var n=C(e,t);if(!(null==n?void 0:n.paneGroup))throw Error("Expected pane group");var r=n.paneGroup,i=r.panes.indexOf(t);if(-1===i)throw Error("Expected index");r.activeIndex=i}function A(e){var t=e.relativeTo,n=e.rects,r=e.direction,i=n.get(t);if(!i)throw Error("Expected relativeTo rect to be included in rects");var a=null,o=!0,s=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=(0,b._)(u.value,2),f=d[0],p=d[1];if(f===t)continue;var h=function(e){var t=e.from,n=e.other;switch(e.direction){case"above":return t.y-n.y;case"below":return n.y-t.y;case"rightOf":return n.x-t.x;case"leftOf":return t.x-n.x}}({from:i,other:p,direction:r});if(("leftOf"!==r&&"above"!==r||!(h<=0))&&("rightOf"!==r&&"below"!==r||!(h<0))){var m=function(e,t,n){var r=(0,b._)("x"===n?[[e.x,e.x+e.width],[t.x,t.x+t.width]]:[[e.y,e.y+e.height],[t.y,t.y+t.height]],2),i=r[0],a=r[1],o=Math.max(i[0],a[0]);return Math.min(i[1],a[1])-o}(i,p,"leftOf"===r||"rightOf"===r?"y":"x");!(m<=0)&&(!a||a.distance>h||a.distance===h&&a.overlap<m)&&(a={key:f,rect:p,distance:h,overlap:m})}}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}return(null==a?void 0:a.key)||null}e.s(["findAdjacentPaneGroup",()=>R,"findCornerPaneGroup",()=>j,"findNodeByPath",()=>S,"findPaneById",()=>C,"findPaneGroupById",()=>T,"findParentSplit",()=>E],949874),e.s(["activatePane",()=>I],926956),e.s(["findNeighbor",()=>A],80725);var P={top:0,bottom:0,left:0,right:0};function D(e,t){var n=t.size,r=t.gap,i=t.headerHeight,a=t.inset,o=void 0===a?P:a,s=[],l=[],u=[],c=[],d=null,f={x:o.left,y:o.top,width:n.width-(o.left+o.right),height:n.height-(o.top+o.bottom)},p=e.tiling;if((null==p?void 0:p.type)==="paneGroup"){var h={x:f.x,y:f.y+i,width:f.width,height:f.height-i},m={x:h.x,y:h.y-i,width:h.width,height:i};c.push({id:p.id,rect:m,panes:p.panes,activeIndex:p.activeIndex,path:["tiling"]}),l.push.apply(l,(0,_._)(p.panes.map(function(e,t){return{paneId:e,rect:h,active:t===p.activeIndex}})))}else p&&p.children.forEach(function(t,n){return function t(n,a,o,s){var f,p,h,m=a.children.indexOf(n),g=a.children.length,b=a.stacked?o.height:o.width,w=(f=o.width,p=o.height,h=n.percent/100,a.stacked?p=(b-(r*(g-1)+i*g))*h+i:f=(b-r*(g-1))*h,{width:f,height:p}),k=w.width,C=w.height,j=function(){var e=o.x,t=o.y;if(0===m)return{x:e,y:t};if(!d)throw Error("Expected previousRect");return a.stacked?t=d.y+d.height+r:e=d.x+d.width+r,{x:e,y:t}}(),T={x:j.x,y:j.y,height:C,width:k};if(d=T,"paneGroup"===n.type){var E={x:T.x,y:T.y+i,width:T.width,height:T.height-i},R={x:E.x,y:E.y-i,width:E.width,height:i};c.push({id:n.id,rect:R,panes:n.panes,activeIndex:n.activeIndex,path:s}),l.push.apply(l,(0,_._)(n.panes.map(function(e,t){return{paneId:e,rect:E,active:t===n.activeIndex}})))}else n.children.forEach(function(e,r){return t(e,n,T,(0,_._)(s).concat([r]))});if(0!==m){var I={x:T.x-(a.stacked?0:r),y:T.y-(a.stacked?r:0),width:a.stacked?T.width:r,height:a.stacked?r:T.height},A=x(s),P=(0,_._)(A).concat([m-1]),D=S(e,P);if(!D||!y(D))throw Error("Expected leftNode");var O=void 0;0===D.percent?O="left":0===n.percent&&(O="right"),u.push({parentPath:A,leftPath:P,rightPath:s,stacked:a.stacked,rect:I,snapped:O})}}(t,p,f,["tiling",n])});var g={x:f.x-o.left,y:f.y-o.top,width:f.width+o.left+o.right,height:f.height+o.top+o.bottom};return e.floating.forEach(function(e,t){var n=O(e.rect,{inside:g,minVisibleX:2*i,minVisibleY:i}),r={height:i,width:e.rect.width,x:n.x,y:n.y},a={x:n.x,y:n.y+i,width:e.rect.width,height:Math.max(e.rect.height-i,0)};c.push({id:e.id,rect:r,panes:e.panes,activeIndex:e.activeIndex,path:["floating",t]}),s.push.apply(s,(0,_._)(e.panes.map(function(t,n){return{paneId:t,rect:a,active:n===e.activeIndex}})))}),{tiles:l,gutters:u,headers:c,floating:s}}function O(e,t){var n=t.inside,r=t.minVisibleX,i=t.minVisibleY,a=-e.width+r,o=n.width-r,s=n.height-i;return{x:Math.min(Math.max(a,e.x),o),y:Math.min(Math.max(0,e.y),s)}}function N(e){var t=e.layout,n=e.splitPath,r=e.tilingOptions,i=function(e,t){var n=t.splitPath,r=S(e,n);if(!r||"split"!==r.type)throw Error("Expected split node");for(var i=100,a=x(n);a.length;){var o=S(e,a);if(!o)break;a=x(a),"split"===o.type&&o.stacked===r.stacked&&(i*=o.percent/100)}return i}(t,{splitPath:n}),a=S(t,n);if((null==a?void 0:a.type)!=="split")throw Error("Expected split node");var o=r.size,s=r.gap,l=r.headerHeight,u=r.inset,c=void 0===u?{top:0,bottom:0,left:0,right:0}:u,d=a.children.length,f=a.stacked?s*(d-1)+l*d:s*(d-1);return i/100*((a.stacked?o.height-(c.top+c.bottom):o.width-(c.left+c.right))-f)}function M(e,t){var n=void 0===t.activeIndex?0:t.activeIndex;if(t.isFloating)return void e.floating.push({id:t.id,type:"floatingPaneGroup",panes:t.panes,activeIndex:n,rect:t.rect});var r=null;if(Array.isArray(t.relativeTo))r=t.relativeTo;else{var i=C(e,t.relativeTo);if(!i)throw Error("Expected pane");r=i.paneGroupPath}if(null===r)throw Error("Expected relativeTo");if("tiling"!==r[0])throw Error("Expected tiling path");var a=t.placement,o=t.panes,s=t.percent,l="above"===a||"below"===a,u="rightOf"===a||"below"===a;if(!e.tiling&&1===r.length){e.tiling={id:t.id,type:"paneGroup",percent:100,panes:o,activeIndex:n};return}if(!e.tiling)throw Error("Expected tiling");var c=S(e,r);if(!c||!y(c))throw Error("Expected tiled node");if(1===r.length&&"replace"===a){e.tiling={id:t.id,type:"paneGroup",percent:100,panes:o,activeIndex:n};return}if(1===r.length&&"paneGroup"===e.tiling.type){var d=[e.tiling];e.tiling={type:"split",percent:100,stacked:l,children:d},L({id:t.id,insertIndex:+!!u,panes:o,children:d,percent:s,activeIndex:n});return}if(1===r.length&&"split"===e.tiling.type){if(!!e.tiling.stacked==!!l)return void L({id:t.id,panes:o,percent:s,activeIndex:n,insertIndex:u?e.tiling.children.length:0,children:e.tiling.children});var f={id:t.id,panes:o,type:"paneGroup",percent:void 0===s?50:s,activeIndex:n},p=u?[c,f]:[f,c];return c.percent=100-f.percent,void(e.tiling={type:"split",stacked:l,children:p,percent:100})}if(0===r.length)throw Error("Expected relativeTo length");var h=S(e,x(r));if((null==h?void 0:h.type)!=="split")throw Error("Expected split parent");if("replace"===a){var m=h.children.indexOf(c);h.children.splice(m,1,{id:t.id,panes:o,percent:c.percent,type:"paneGroup",activeIndex:n});return}if(!!h.stacked==!!l){var g=h.children.indexOf(c);L({id:t.id,panes:o,percent:s,activeIndex:n,insertIndex:u?g+1:g,children:h.children});return}if(!!h.stacked!=!!l){var b={id:t.id,panes:o,type:"paneGroup",percent:void 0===s?50:s,activeIndex:n},w=u?[c,b]:[b,c],_=c.percent;c.percent=100-b.percent;var k=h.children.indexOf(c);h.children[k]={type:"split",stacked:l,children:w,percent:_};return}}function L(e){var t=e.id,n=e.percent,r=e.children,i=e.panes,a=e.insertIndex,o=e.activeIndex;if(void 0!==n){var s=(100-n)/100;r.forEach(function(e){e.percent=e.percent*s}),r.splice(a,0,{id:t,panes:i,type:"paneGroup",percent:n,activeIndex:o});return}var l=r.reduce(function(e,t){return e+t.percent},0)/r.length,u=100/(100+l);r.forEach(function(e){e.percent=e.percent*u}),r.splice(a,0,{id:t,panes:i,type:"paneGroup",percent:l*u,activeIndex:o})}function B(e,t){var n=T(e,t.paneGroupId);if(!n)throw Error("Expected paneGroup");!function(e,t){var n,r=t.index,i=t.paneIds,a=t.activate;if(void 0!==r&&r>e.panes.length)throw Error("Invalid index");var o=void 0===r?e.panes.length:r;(n=e.panes).splice.apply(n,[o,0].concat((0,_._)(i))),(void 0===a||a)&&(e.activeIndex=o)}(n,t)}function V(e,t){e.panes.splice(t,1),0===e.activeIndex||t>e.activeIndex||(e.activeIndex=e.activeIndex-1)}function F(e,t){var n=C(e,t);if(!n)throw Error("Expected pane");if(n.floating){if(1===n.paneGroup.panes.length){var r=n.paneGroupPath[1];if("number"!=typeof r)throw Error("Expected floatingIndex");U(e,["floating",r])}else V(n.paneGroup,n.index);return}var i=n.paneGroup,a=n.paneGroupPath,o=n.parent;if(!i)throw Error("paneGroup eith paneId not found: "+t);var s=i.panes.indexOf(t);if(-1===s)throw Error("Expected paneIndex");if(!o&&1===i.panes.length){e.tiling=null;return}i.panes.length>1?V(i,s):U(e,a)}function U(e,t){var n=(0,w._)(t),r=n[0],i=n.slice(1);if("tiling"===r&&0===i.length){e.tiling=null;return}if("floating"===r&&0===i.length){e.floating=[];return}var a=S(e,t);if(!a)throw Error("Expected node");if("floatingPaneGroup"===a.type){var o=e.floating.indexOf(a);if(-1===o)throw Error("Expected paneGroupIndex");e.floating.splice(o,1);return}var s=x(t),l=S(e,s);if((null==l?void 0:l.type)!=="split")throw Error("Expected split");var u=l.children.indexOf(a);if(-1===u)throw Error("Expected paneGroupIndex");var c=l.children;if(c.splice(u,1),c.length>1){var d=100/c.reduce(function(e,t){return e+t.percent},0);c.forEach(function(e){e.percent=e.percent*d});return}var f=(0,b._)(c,1)[0],p=s.length>1?S(e,x(s)):null;if(!p){f.percent=100,e.tiling=f;return}if("split"!==p.type)throw Error("Expected split");var h=p.children.indexOf(l);if(-1===h)throw Error("Expected parentIndex");f.percent=l.percent,p.children[h]=f}function G(e,t){var n=t.from,r=t.to,i=t.placement,a=C(e,n);if(!a)throw Error("Expected fromPane");var o=a.paneGroup,s=o.panes,l=o.activeIndex;U(e,a.paneGroupPath),M(e,{id:a.paneGroup.id,relativeTo:r,panes:s,placement:i,activeIndex:l})}function $(e,t){var n=t.paneGroupPath,r=t.rect,i=S(e,n);if((null==i?void 0:i.type)!=="paneGroup")throw Error("Expected paneGroup");U(e,n),M(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}function H(e,t){var n=t.paneGroupPath,r=t.placement,i=t.to,a=S(e,n);if((null==a?void 0:a.type)!=="floatingPaneGroup")throw Error("Expected floatingPaneGroup");if(U(e,n),null===i){e.tiling={id:a.id,panes:a.panes,percent:100,type:"paneGroup",activeIndex:a.activeIndex};return}M(e,{id:a.id,relativeTo:i,panes:a.panes,activeIndex:a.activeIndex,placement:r})}function z(e,t){var n="floatingIndex"in t?e.floating[t.floatingIndex]:S(e,t.paneGroupPath);if(!n||!("panes"in n))throw Error("Expected paneGroup");F(e,t.paneId);var r=void 0===t.index?n.panes.length:t.index;n.panes.splice(r,0,t.paneId),t.activate?n.activeIndex=r:n.activeIndex>=r&&n.activeIndex++}function W(e,t){var n=t.paneGroupId,r=t.direction,i=T(e,n),a=E(e,n);if((null==i?void 0:i.type)!=="paneGroup"||!a)return!1;var o=a.node.children.indexOf(i);if(-1===o)throw Error("Expected index");var s=(0,_._)(a.path).concat([o]),l="down"===r||"right"===r,u=0===o,c=o===a.node.children.length-1,d=a.node.stacked===("up"===r||"down"===r),f=a.path.length>2;if(d&&!((c&&l||u&&!l)&&f))return void function(e,t,n){var r=e.indexOf(t);if(-1===r)throw Error("Expected item to be in array");if(1!==e.length){var i=r===e.length-1;if("forward"===n&&i){e.pop(),e.unshift(t);return}if("back"===n&&0===r){e.shift(),e.push(t);return}var a="forward"===n?1:-1;e[r]=e[r+a],e[r+a]=t}}(a.node.children,i,l?"forward":"back");var p=(y=E(e,i.id))?function e(t,n){var r=n.path,i=n.forwards,a=n.vertical,o=S(t,r);if((null==o?void 0:o.type)!=="split")return null;var s=x(r);if(0===s.length)return null;var l=S(t,s);if((null==l?void 0:l.type)!=="split")return null;if(l.stacked!==a)return e(t,{path:s,forwards:i,vertical:a});var u=l.children.indexOf(o),c=0===u;if(!(u===l.children.length-1&&i||c&&!i)){var d=u+(i?1:-1),f=l.children[d],p=l.children[u];return f?{other:p,node:f,parent:l,path:(0,_._)(s).concat([d])}:null}if(1===s.length){var h=c&&!i?l.children.length-1:0;return{parent:l,other:l.children[u],path:(0,_._)(s).concat([h]),node:l.children[h]}}return e(t,{path:s,forwards:i,vertical:a})}(e,{path:y.path,forwards:"down"===r||"right"===r,vertical:"up"===r||"down"===r}):null;if(p){var h=s.slice(0,p.path.length+("paneGroup"===p.node.type?2:1));if("tiling"!==h[0])throw Error("Expected tiling path");var m=S(e,h);if(!m||"floatingPaneGroup"===m.type)throw Error("Expected adjacentNode");if("split"!==p.other.type)throw Error("Expected split");var g=function(e,t){var n=e.indexOf(t),r=0,i=!0,a=!1,o=void 0;try{for(var s,l=e.slice(0,n)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value.percent;r+=u}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return{start:r,end:r+t.percent}}(p.other.children,m);if("paneGroup"===p.node.type){var y,b,w,k=(b={start:0,end:100},w=!p.parent.stacked,g.start-b.start<b.end-g.end?w?"above":"rightOf":w?"below":"leftOf");U(e,(0,_._)(a.path).concat([o])),M(e,{placement:k,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:p.path});return}var C=function(e,t){var n=e.children,r=e.stacked,i="above",a=0,o=0,s=0,l=0,u=!0,c=!1,d=void 0;try{for(var f,p=n[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,m={start:s,end:s+h.percent},g=Math.max(0,Math.min(t.end,m.end)-Math.max(t.start,m.start));g>l&&(l=g,a=o,i=t.start-m.start<m.end-t.end?r?"above":"rightOf":r?"below":"leftOf"),s+=h.percent,o++}}catch(e){c=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}return{placement:i,index:a}}(p.node,g),j=C.index,R=C.placement;U(e,(0,_._)(a.path).concat([o])),M(e,{placement:R,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:(0,_._)(p.path).concat([j])})}}function q(e,t){var n=t.leftPath,r=t.percent,i=t.snapPercent,a=void 0===i?0:i,o=S(e,n);if(!o||!y(o))throw Error("Expected leftNode");var s=S(e,x(n));if((null==s?void 0:s.type)!=="split")throw Error("Expected splitNode");var l=s.children.indexOf(o);if(-1===l)throw Error("Expected leftNodeIndex");var u=l+1,c=s.children[u];if(!c)throw Error("Expected rightNode");if(r<=a){if(o.percent=0,r<0&&l>0)for(var d=Math.abs(r),f=l-1;d>0;){var p=s.children[f];if(p.percent>d){p.percent-=d;break}if(d-=p.percent,p.percent=0,0===f)break;f--}var h=s.children.reduce(function(e,t){return t===c?e:e+t.percent},0);c.percent=100-h;return}var m=o.percent+c.percent,g=s.children.slice(l).reduce(function(e,t){return e+t.percent},0);if(r>m-a){if(o.percent=Math.min(g,Math.max(m,r)),c.percent=0,r>m&&u<s.children.length-1)for(var b=r-m,w=u+1;b>0;){var _=s.children[w];if(_.percent>b){_.percent-=b;break}if(b-=_.percent,_.percent=0,w===s.children.length-1)break;w++}return}var k=o.percent-r;c.percent=c.percent+k,o.percent=r}function K(e,t){var n=C(e,t.paneId);if(!n)return!1;var r=n.paneGroupPath;n.paneGroup.activeIndex=n.index;var i=r.map(function(e,t){return r.slice(0,t+1)}),a=!0,o=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=S(e,c);if(!d)throw Error("Expected node");if("floatingPaneGroup"===d.type)throw Error("Expected tiled pane");if(1!==c.length){var f=c[c.length-1];if("number"!=typeof f)throw Error("Expected number");var p=S(e,x(c));if((null==p?void 0:p.type)!=="split")throw Error("Expected split");var h=p.stacked?t.minPercentVertical:t.minPercentHorizontal;if(!(d.percent>=h)){var m=f===p.children.length-1,g=m?(0,_._)(c.slice(0,-1)).concat([f-1]):c,y=m?p.children[f-1].percent-(h-d.percent):h;q(e,{leftPath:g,percent:y})}}}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return!0}function Y(e,t){var n=C(e,t.paneId);if(!n)return!1;var r=n.paneGroup;if("floatingPaneGroup"!==r.type)throw Error("Expected floatingPaneGroup");return r.activeIndex=n.index,r.rect.width=Math.max(r.rect.width,t.minWidth),r.rect.height=Math.max(r.rect.height,t.minHeight),!0}function Q(e){var t=new Set,n=!0,r=!1,i=void 0;try{for(var a,o=e.floating[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=!0,u=!1,c=void 0;try{for(var d,f=s.panes[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;t.add(p)}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e.tiling&&function e(n){if("paneGroup"!==n.type)return n.children.forEach(e);var r=!0,i=!1,a=void 0;try{for(var o,s=n.panes[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;t.add(l)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}(e.tiling),t}e.s(["containRectPosition",()=>O,"default",()=>D],906116),e.s(["getResizeDistance",()=>N],965265),e.s(["insertPaneGroup",()=>M,"insertPanes",()=>B],555605),e.s(["removeNode",()=>U,"removePane",()=>F],667183),e.s(["movePane",()=>z,"movePaneGroupToFloating",()=>$,"movePaneGroupToTiling",()=>H,"moveTiledPaneGroup",()=>G],67537),e.s(["moveTile",()=>W],138841),e.s(["default",()=>q],592979),e.s(["revealFloatingPane",()=>Y,"revealTiledPane",()=>K],863117),e.s(["getPaneIds",()=>Q],810157),e.s([],290625),e.i(319105),e.s(["closestSide",()=>f,"getDropDataForPoint",()=>p,"getParentPath",()=>x,"isTiledNode",()=>y,"resizeRect",()=>g],153626);var X=e.i(131141),Z=e.i(541793),J=e.i(814563),ee=(0,Z.atom)([]),et=(0,Z.atom)([]),en=(0,Z.atom)([]),er={x:0,y:0,width:0,height:0},ei={type:"commands",data:{autoFocus:!1}},ea=(0,J.atomFamily)(function(e){return(0,Z.atom)({paneId:e,type:"tile",rectAtom:(0,Z.atom)((0,h._)({},er)),dataAtom:(0,Z.atom)((0,h._)({},ei)),isHidden:!1,isCommitted:!1,highlight:!1})}),eo=(0,Z.atom)(function(e){return e(ee).map(function(t){return e(ea(t))})}),es=(0,Z.atom)(function(e){return e(eo).filter(function(e){return!e.isHidden})}),el=(0,Z.atom)(function(e){return e(eo).filter(function(e){return e.isHidden})}),eu=(0,Z.atom)(function(e){return e(en).map(function(t){return e(ed(t))})}),ec=(0,J.atomFamily)(function(e){return(0,Z.atom)({handleId:e,rect:er,stacked:!1,parentPath:["tiling"],leftPath:["tiling"],rightPath:["tiling"]})}),ed=(0,J.atomFamily)(function(e){return(0,Z.atom)({id:e,rectAtom:(0,Z.atom)((0,h._)({},er)),panes:[],path:["tiling"],activeIndex:0})}),ef=(0,Z.atom)(function(){return 34}),ep=(0,Z.atom)({x:0,y:0,width:0,height:0});e.s(["containerAtom",()=>ep,"handleIdsAtom",()=>et,"headerIdsAtom",()=>en,"headerViewsAtom",()=>eu,"headerViewsFamily",()=>ed,"hiddenPaneViewsAtom",()=>el,"paneIdsAtom",()=>ee,"paneViewsAtom",()=>eo,"paneViewsFamily",()=>ea,"tabsHeaderHeightAtom",()=>ef,"tileHandleViewsFamily",()=>ec,"visiblePaneViewsAtom",()=>es],134965),e.i(282890);var eh=e.i(66718),em=(0,Z.atom)(null),eg=(0,Z.atom)(null,function(e,t,n){n!==e(em)&&t(em,n)}),ev=(0,Z.atom)(null,function(e,t,n){var r=ea(n);e(r).isCommitted||t(r,function(e){return(0,X.produce)(e,function(e){e.isCommitted=!0})})}),ex=(0,Z.atom)(function(e){var t=e(em);if(!t)return null;var n=e(ea(t)),r=e(n.dataAtom);return"markdown"===r.type?r.data.path:(0,eh.isFilePane)(r)&&r.data.path||null});e.s(["activatePaneAtom",()=>eg,"activeFileAtom",()=>ex,"activePaneIdAtom",()=>em,"commitPaneAtom",()=>ev],984008),e.s(["flattenLayout",()=>D],781525)},568817,e=>{"use strict";function t(e,t){var n=t.existing,r=t.getKey,i=new Map,a=!0,o=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;i.set(r(c),c)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}var d=new Set,f=[],p=!0,h=!1,m=void 0;try{for(var g,x=n[Symbol.iterator]();!(p=(g=x.next()).done);p=!0){var y=g.value,b=r(y),w=i.get(b);w&&(f.push(w),d.add(b))}}catch(e){h=!0,m=e}finally{try{p||null==x.return||x.return()}finally{if(h)throw m}}var _=!0,k=!1,S=void 0;try{for(var C,j=e[Symbol.iterator]();!(_=(C=j.next()).done);_=!0){var T=C.value;d.has(r(T))||f.push(T)}}catch(e){k=!0,S=e}finally{try{_||null==j.return||j.return()}finally{if(k)throw S}}return f}e.s(["default",()=>t])},961603,633696,176412,218363,844561,554752,290352,245309,e=>{"use strict";var t=e.i(346715),n=e.i(992785),r=e.i(131141),i=e.i(541793);e.i(290625);var a=e.i(781525),o=e.i(568817),s=e.i(984008),l=e.i(960933);e.s(["DEFAULT_SIDEBAR_WIDTH",()=>260,"MAX_WIDTH_PERCENTAGE",()=>.4,"MIN_WIDTH",()=>230],633696),l.Type.Object({width:l.Type.Number({minimum:0}),isOpen:l.Type.Boolean(),activeContent:l.Type.Union([l.Type.Literal("filetree"),l.Type.Literal("inbox")])});var u=(0,i.atom)({width:260,isOpen:!1,activeContent:"filetree"}),c=(0,i.atom)(function(e){return e(u).isOpen}),d=(0,i.atom)(function(e){return e(u).activeContent}),f=(0,i.atom)(function(e){var t=e(u);return t.isOpen?t.width:0});function p(e){return Math.min(Math.round(.4*window.innerWidth),e)}e.s(["parseInitialSidebarWidth",()=>p,"sidebarActiveContentAtom",()=>d,"sidebarIsOpenAtom",()=>c,"sidebarStateAtom",()=>u,"sidebarWidthAtom",()=>f],176412);var h=e.i(134965);e.i(282890);var m=e.i(66718),g=(0,i.atom)(!0),x=(0,i.atom)(!1),y=(0,i.atom)({tiling:null,floating:[]}),b=(0,i.atom)(function(e){return e(h.paneViewsAtom).filter(function(t){return(0,m.isFilePane)(e(t.dataAtom))})}),w=(0,i.atom)(function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e(h.paneViewsAtom)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(!o.isCommitted&&(0,m.isFilePane)(e(o.dataAtom)))return o.paneId}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}),_=(0,i.atom)(function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e(h.paneViewsAtom)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(!o.isCommitted&&!(0,m.isFilePane)(e(o.dataAtom)))return o.paneId}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}),k=(0,i.atom)(function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=e(h.visiblePaneViewsAtom)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.push([s.paneId,e(s.dataAtom)])}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}),S=(0,i.atom)([]),C=(0,i.atom)(function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=e(h.hiddenPaneViewsAtom)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.push([s.paneId,e(s.dataAtom)])}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}),j=(0,i.atom)(function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=e(h.paneViewsAtom)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.push([s.paneId,e(s.dataAtom)])}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}),T=(0,i.atom)(function(e){return e(j).length}),E=(0,i.atom)(function(e){var t=e(h.containerAtom);return!!(t.width&&t.height)}),R=(0,i.atom)(null),I=(0,i.atom)(null,function(e,t,n){var r=e(h.paneViewsAtom).find(function(t){var r=e(t.dataAtom);return(0,m.isFilePane)(r)?n===(0,m.getFilePathForPane)(r):"markdown"===r.type&&n===r.data.path});r&&(t(s.activatePaneAtom,r.paneId),t(s.commitPaneAtom,r.paneId))}),A=(0,i.atom)(null);e.s(["animationsEnabledAtom",()=>g,"commitFileInWorkspaceAtom",()=>I,"containerElementIsInitializedAtom",()=>E,"extensionFileHandlersAtom",()=>S,"filePaneViewsAtom",()=>b,"hiddenPanesAtom",()=>C,"isTouchDeviceLayoutAtom",()=>x,"layoutAtom",()=>y,"layoutBsodArgsAtom",()=>R,"layoutInitTypeAtom",()=>A,"panesAtom",()=>j,"panesCountAtom",()=>T,"uncommittedFilePaneIdAtom",()=>w,"uncommittedToolPaneIdAtom",()=>_,"visiblePanesAtom",()=>k],218363);var P=e.i(814563),D=e.i(153626),O=e.i(125674);function N(e,t){var n=e.x,r=e.y;return n>t.x&&n<t.x+t.width&&r>t.y&&r<t.y+t.height}function M(e,t){var n=(0,D.closestSide)({point:e,rect:t}),r={x:t.x,y:t.y,width:t.width,height:t.height},i="below";return"top"===n?(r.height=t.height/2,i="above"):"bottom"===n?(r.height=t.height/2,r.y=t.y+t.height/2,i="below"):"left"===n?(r.width=t.width/2,r.x=t.x,i="leftOf"):"right"===n&&(r.width=t.width/2,r.x=t.x+t.width/2,i="rightOf"),{placement:i,rect:r}}function L(e){return"handle:"+e.leftPath.join(":")}function B(e){return(0,O.default)(function(){return(0,P.selectAtom)(e,function(e){return{width:e.width,height:e.height}},function(e,t){return e.height===t.height&&e.width===t.width})},[e])}function V(e){return(0,O.default)(function(){return(0,P.selectAtom)(e,function(e){return{x:e.x,y:e.y}},function(e,t){return e.x===t.x&&e.y===t.y})},[e])}e.s(["getDropDataForPoint",()=>M,"getHandleId",()=>L,"isInside",()=>N,"usePositionAtom",()=>V,"useSizeAtom",()=>B],844561),e.s(["COLLAPSED_WIDTH",()=>0,"DEFAULT_AGENT_WIDTH",()=>450,"MAX_WIDTH_PERCENTAGE",()=>.5,"MIN_SIDEBAR_WIDTH",()=>300],554752);var F=l.Type.Object({type:l.Type.Literal("centered")}),U=l.Type.Object({type:l.Type.Literal("sidebar"),width:l.Type.Number({minimum:300})}),G=(0,i.atom)("leftSidebar"),$=(0,i.atom)(function(e){return"leftSidebar"===e(G)?"agent-filetree":"filetree-agent"});l.Type.Union([U,F]);var H=(0,i.atom)({type:"sidebar",width:450});(0,P.selectAtom)(H,function(e){return null!==e});var z=(0,P.selectAtom)(H,function(e){return"centered"===e.type});function W(e){return Math.min(Math.round(.5*window.innerWidth),e)}e.s(["agentFiltreeOrderAtom",()=>$,"agentPositionAtom",()=>G,"agentStateAtom",()=>H,"isAgentCenteredAtom",()=>z,"parseInitialAgentWidth",()=>W],290352),(0,i.atom)(!0);var q=(0,i.atom)(6),K=(0,i.atom)(0),Y=(0,i.atom)(function(e){var t=e(u),n=e(q),r=n+e(K),i=e($),a=e(H),o=t.isOpen?t.width+2*n:n,s=n+("sidebar"===a.type?a.width:450)+("sidebar"===a.type&&0===a.width?0:n);return{top:r,bottom:n,left:"agent-filetree"===i?s:o,right:"agent-filetree"===i?o:s}}),Q=(0,i.atom)(function(e){var t=e(h.tabsHeaderHeightAtom),n=e(q),r=e(h.containerAtom);return{headerHeight:t,inset:e(Y),gap:n,size:{width:r.width,height:r.height}}}),X=(0,i.atom)(null,function(e,t,n){t(h.containerAtom,n),t(J,e(y))});function Z(e,t){return(0,n.default)(e,t)}var J=(0,i.atom)(null,function(e,n,i){var l=function(t){var i=t.paneId,a=t.rect,o=t.type,s=t.isHidden;f.delete(i);var l=(0,h.paneViewsFamily)(i),u=e(l);Z(e(u.rectAtom),a)||n(u.rectAtom,a);var c=(0,r.produce)(u,function(e){e.paneId=i,e.type=o,e.isHidden=s});Z(u,c)||n(l,c)},u=e(h.paneIdsAtom),c=e(h.handleIdsAtom),d=e(h.headerIdsAtom),f=new Set(u),p=new Set(c),m=new Set(d),g=(0,a.flattenLayout)(i,e(Q)),x=g.tiles,b=g.floating,w=g.gutters,_=g.headers,k=w.map(L);Z(c,k)||n(h.handleIdsAtom,k);var S=(0,t._)(x).concat((0,t._)(b)).map(function(e){return e.paneId});Z(u,S)||n(h.paneIdsAtom,(0,o.default)(S,{existing:u,getKey:function(e){return e}}));var C=[];_.forEach(function(t){m.delete(t.id);var i=(0,h.headerViewsFamily)(t.id),a=e(i);C.push(t.id),Z(e(a.rectAtom),t.rect)||n(a.rectAtom,t.rect);var o=(0,r.produce)(a,function(e){e.panes=t.panes,e.activeIndex=t.activeIndex,e.path=t.path});Z(a,o)||n(i,o)}),Z(d,C)||n(h.headerIdsAtom,C),x.forEach(function(e){l({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"tile"})}),b.forEach(function(e){l({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"floating"})}),w.forEach(function(t){var r={handleId:L(t),rect:t.rect,parentPath:t.parentPath,leftPath:t.leftPath,rightPath:t.rightPath,stacked:t.stacked,snapped:t.snapped};p.delete(r.handleId);var i=(0,h.tileHandleViewsFamily)(r.handleId);Z(e(i),r)||n(i,r)}),f.forEach(h.paneViewsFamily.remove),p.forEach(h.tileHandleViewsFamily.remove),m.forEach(h.headerViewsFamily.remove);var j=e(s.activePaneIdAtom);j&&f.has(j)&&n(s.activePaneIdAtom,null),n(y,i)});e.s(["calculateLayoutAtom",()=>J,"gapAtom",()=>q,"globalHeaderHeightAtom",()=>K,"snapSize",()=>30,"tilingOptionsAtom",()=>Q,"updateContainerAtom",()=>X],961603);var ee=e.i(721281),et=e.i(15053);function en(e){var t=e.variation,n=(0,et.v4)();return{data:(0,ee._)({},n,{type:"split-with-console"===t?"runnerOutput":"split-with-automations"===t?"automations":"webview"}),layout:{floating:[],tiling:{type:"paneGroup",panes:[n],activeIndex:0,id:(0,et.v4)(),percent:100}},type:"default"}}e.s(["getDefaultLayoutState",()=>en],245309)},706794,502108,634705,26127,705648,621624,709010,804375,917592,69838,881728,910447,838312,78777,113606,e=>{"use strict";var t,n=e.i(530658),r=e.i(131141),i=e.i(541793),a=e.i(961603),o=e.i(297083),s=e.i(817556),l=e.i(992785),u=e.i(15053),c=e.i(133320),d=e.i(173738),f=e.i(282453),p=(0,i.atom)(null);function h(e){var t=f.default.get(b(e));return!t||"string"==typeof t&&parseInt(t,10)<Date.now()?null:f.default.get(y(e))}var m=(0,i.atom)(null,function(e,t,n){f.default.set(b(n.popupId),Date.now()+6048e5),f.default.set(y(n.popupId),n.state);var r=!0,i=!1,a=void 0;try{for(var o,s=f.default.keys().filter(function(e){return e.startsWith(x)})[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value,u=f.default.get(l);if("number"==typeof u&&u<Date.now()){var c=l.split(":")[1];f.default.remove(b(c)),f.default.remove(y(c))}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}),g=(0,i.atom)(function(e){return!!e(p)}),x="popup-id-ttl:";function y(e){return"".concat("popup-id-data:").concat(e)}function b(e){return"".concat(x).concat(e)}e.s(["getPopupState",()=>h,"isInPopupAtom",()=>g,"popupIdAtom",()=>p,"storePopupStateAtom",()=>m],502108);var w=e.i(218363),_=e.i(134965),k=e.i(290352),S=e.i(176412),C=(0,i.atom)(function(e){var t=e(w.layoutAtom),n={};e(_.paneViewsAtom).forEach(function(t){n[t.paneId]=e(t.dataAtom)});var r=e(k.agentStateAtom),i=(null==r?void 0:r.type)==="sidebar"?{width:r.width}:void 0,a=e(S.sidebarStateAtom);return{layout:t,data:n,agent:i,filetree:a.isOpen?{width:a.width,isOpen:!0,activeContent:a.activeContent}:void 0}}),j=(0,i.atom)(null),T=(0,i.atom)(null),E=(0,i.atom)(null),R=(0,i.atom)(null,function(e,t,n){return(0,o._)(function(){var r,i,a,f,h,g,x;return(0,s._)(this,function(y){switch(y.label){case 0:var b;if((r=e(T))&&!r.retry||r&&Date.now()-r.timestamp<6e4||!e(w.containerElementIsInitializedAtom)||(i=e(C),a=n.replId,f=e(j),!n.force&&(0,l.default)(f,i)))return[2];if(h=e(p))return t(m,{popupId:h,state:i}),t(j,i),[2];return t(E,g=(0,u.v4)()),[4,(b=i,(0,o._)(function(){var e,t;return(0,s._)(this,function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,null===d.apolloClient||void 0===d.apolloClient?void 0:d.apolloClient.mutate({mutation:c.SaveReplLayoutStateDocument,variables:{input:{replId:a,state:b}}})];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[2,{success:!1,retry:!0}];case 4:if((null==t||null==(e=t.data)?void 0:e.setReplLayoutState.__typename)==="Repl")return[2,{success:!0,retry:void 0}];return[2,{success:!1,retry:!1}]}})})())];case 1:if(x=y.sent(),e(E)!==g)return[2];if(t(E,null),x.retry)return t(T,{timestamp:Date.now(),retry:!0}),[2];if(!x.success)return t(T,{timestamp:Date.now(),retry:!1}),[2];return t(j,i),[2]}})})()});e.s(["lastSavedAtom",()=>j,"layoutStateAtom",()=>C,"saveLayoutStateAtom",()=>R],634705);var I=(0,i.atom)(null,function(e,t,i){var o=i.data,s=i.layout,l=i.type;Object.entries(o).forEach(function(i){var a=(0,n._)(i,2),o=a[0],s=a[1],l=(0,_.paneViewsFamily)(o);t(l,(0,r.produce)(e(l),function(e){e.isCommitted=!0})),t(e(l).dataAtom,s)}),t(w.layoutAtom,s),t(a.calculateLayoutAtom,s),t(w.layoutInitTypeAtom,l),t(j,e(C))});e.s(["initLayoutStateAtom",()=>I],706794),e.i(290625);var A=e.i(949874),P=e.i(984008),D=(0,i.atom)(!1),O=(0,i.atom)(function(e){return e(D)?e(P.activePaneIdAtom):null}),N=(0,i.atom)(null,function(e,t,n){t(P.activatePaneAtom,n),t(D,!0)}),M=(0,i.atom)(null,function(e,t,n){t(D,!0);var r=(0,A.findPaneGroupById)(e(w.layoutAtom),n.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw t(w.layoutBsodArgsAtom,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),i}var a=r.panes[r.activeIndex];if(!a){var o=Error("Expected paneId");throw t(w.layoutBsodArgsAtom,{error:o,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),o}t(P.activatePaneAtom,a)}),L=(0,i.atom)(null,function(e,t){e(g)||t(D,!1)}),B=(0,i.atom)(null,function(e,t,n){e(O)===n?t(L):t(N,n)}),V=(0,i.atom)(null,function(e,t,n){var r=(0,A.findPaneGroupById)(e(w.layoutAtom),n.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw t(w.layoutBsodArgsAtom,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),i}var a=r.panes[r.activeIndex];if(!a){var o=Error("Expected paneId");throw t(w.layoutBsodArgsAtom,{error:o,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),o}t(B,a)}),F=(0,i.atom)(function(e){var t=e(_.containerAtom),n=t.width+t.x,r=-t.x,i=e(a.gapAtom);return{x:r,width:n,y:i,height:t.height-i}}),U=(0,i.atom)(function(e){var t=e(_.tabsHeaderHeightAtom),n=e(F);return{x:n.x,y:n.y,width:n.width,height:t}}),G=(0,i.atom)(function(e){var t=e(_.tabsHeaderHeightAtom),n=e(F);return{x:n.x,y:n.y+t,width:n.width,height:n.height-t}});e.s(["fullscreenRectAtom",()=>F,"isMaximizedAtom",()=>D,"maximizePaneAtom",()=>N,"maximizePaneGroupAtom",()=>M,"maximizedHeaderRectAtom",()=>U,"maximizedPaneIdAtom",()=>O,"maximizedPaneRectAtom",()=>G,"restoreMaximizedPaneGroupAtom",()=>L,"toggleMaximizePaneAtom",()=>B,"toggleMaximizePaneGroupAtom",()=>V],26127);var $=e.i(408880),H=e.i(555605),z=e.i(667183),W=e.i(125674),q=(0,i.atom)(null,function(e,t,n){var r=e(w.layoutAtom),i=(0,A.findPaneGroupById)(r,n);if(!i)return null;t(P.activatePaneAtom,i.panes[i.activeIndex])});function K(e){var t=e.paneGroupId;return(0,W.default)(function(){return(0,i.atom)(function(e){var n=e(w.layoutAtom),r=(0,A.findPaneGroupById)(n,t);return r?r.panes.length:null})},[t])}function Y(){return(0,W.default)(function(){return(0,i.atom)(function(e){var t=e(_.headerViewsAtom),n=[],r=[],i=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,c=u.panes.map(function(t){return[t,e(e((0,_.paneViewsFamily)(t)).dataAtom)]}),d="floating"===u.path[0];(d?n:r).push({activeIndex:u.activeIndex,paneGroupId:u.id,isFloating:d,panes:c})}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return{floating:n,tiling:r}})},[])}function Q(e){return(0,W.default)(function(){return(0,i.atom)(function(t){var n=t(w.layoutAtom),r=(0,A.findPaneById)(n,e);return r?r.paneGroup.panes.findIndex(function(t){return t===e}):null})},[e])}e.s(["activatePaneGroupAtom",()=>q,"usePaneGroupCountAtom",()=>K,"usePaneGroupIndexAtom",()=>Q,"usePaneGroupsAtom",()=>Y],705648);var X=(0,i.atom)(null,function(e,t,n){var i=e(w.layoutAtom),o=(0,A.findPaneById)(i,n);if(!o)throw Error("Expected pane");var s=!o.paneGroup.panes.some(function(e){return e!==n}),l=n===e(P.activePaneIdAtom),u=(0,A.findAdjacentPaneGroup)(i,n),c=(0,r.produce)(i,function(e){try{(0,z.removePane)(e,n)}catch(e){throw t(w.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});if(t(a.calculateLayoutAtom,c),s&&e(D)&&!e(g)&&t(D,!1),l&&(s||t(q,o.paneGroup.id),s&&u)){do"split"===u.type&&(u=u.children[0]);while("paneGroup"!==u.type)t(q,u.id)}}),Z=(0,i.atom)(null,function(e,t,n){var i=e(w.layoutAtom),o=(0,A.findPaneById)(i,n),s=null==o?void 0:o.paneGroup.panes.filter(function(e){return e!==n});if(null==s?void 0:s.length){var l=(0,r.produce)(i,function(e){try{var n=!0,r=!1,i=void 0;try{for(var a,o=s[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value;(0,z.removePane)(e,l)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}catch(e){throw t(w.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});t(a.calculateLayoutAtom,l)}}),J=(0,i.atom)(null,function(e,t,n){var i=e(w.layoutAtom),o=(0,A.findPaneById)(i,n);if(o){var s=(0,r.produce)(i,function(e){var t=!1,r=!0,i=!1,a=void 0;try{for(var s,l=o.paneGroup.panes[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;t&&(0,z.removePane)(e,u),u===n&&(t=!0)}}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}});t(a.calculateLayoutAtom,s)}});e.s(["removeOtherPanesInGroupAtom",()=>Z,"removePaneAtom",()=>X,"removePanesToRightInGroupAtom",()=>J],621624);var ee=e.i(592979);e.s(["setSplitPercent",()=>ee.default],709010);var ee=ee;e.i(282890);var et=e.i(66718),en=(0,i.atom)(null,function(e,t,n){var i=e(w.layoutAtom),o=(0,A.findPaneGroupById)(i,n.paneGroupId);if(!o){var s=Error("Expected pane group");throw t(w.layoutBsodArgsAtom,{error:s,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),s}var l=(0,r.produce)(i,function(e){try{o.panes.forEach(function(t){(0,z.removePane)(e,t)})}catch(e){throw t(w.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),e}});e(D)&&!e(g)&&t(D,!1),t(a.calculateLayoutAtom,l)}),er=(0,i.atom)(null,function(e,t,n){var i=e(w.layoutAtom),o=(0,A.findPaneById)(i,n.paneId);if(!o){var s=Error("Expected relativeToPane");throw t(w.layoutBsodArgsAtom,{error:s,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),s}var l=(0,u.v4)();t(e((0,_.paneViewsFamily)(l)).dataAtom,{type:"commands",data:{autoFocus:!!n.autoFocus}});var c=(0,r.produce)(i,function(e){try{(0,H.insertPaneGroup)(e,{id:(0,u.v4)(),isFloating:!1,placement:n.placement,relativeTo:o.paneGroupPath,panes:[l]})}catch(e){throw t(w.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),e}});t(a.calculateLayoutAtom,c),t(P.activatePaneAtom,l)}),ei=(0,i.atom)(null,function(e,t,n){var i=e(w.layoutAtom),o=(0,u.v4)();t(e((0,_.paneViewsFamily)(o)).dataAtom,n.pane),(0,et.isToolPane)(n.pane)&&t(P.commitPaneAtom,o);var s=(0,r.produce)(i,function(e){try{(0,H.insertPaneGroup)(e,{id:(0,u.v4)(),isFloating:!1,placement:n.placement,relativeTo:n.relativeTo,panes:[o],percent:n.percent})}catch(e){throw t(w.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/insertSplitPaneAtom"}),e}});return t(a.calculateLayoutAtom,s),o}),ea=(0,i.atom)(null,function(e,t,n){var i=e(w.layoutAtom),o=(0,r.produce)(i,function(e){(0,ee.default)(e,{leftPath:n.leftPath,percent:n.percent})});t(a.calculateLayoutAtom,o)});e.s(["insertSplitPaneAtom",()=>ei,"removePaneGroupAtom",()=>en,"setSplitPercentAtom",()=>ea,"splitPaneAtom",()=>er],804375);var eo=e.i(965863),es=(0,i.atom)(null,function(e,t,n){if(0===n.panes.length){var i=Error("Expect at least one pane");throw t(w.layoutBsodArgsAtom,{error:i,origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),i}var o=e(w.layoutAtom),s=n.panes.map(function(){return(0,u.v4)()}),l=(0,r.produce)(o,function(e){try{(0,H.insertPaneGroup)(e,{id:(0,u.v4)(),panes:s,relativeTo:n.relativeTo||["tiling"],placement:n.placement,percent:n.percent})}catch(e){throw t(w.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),e}});if(t(a.calculateLayoutAtom,l),n.panes.forEach(function(n,r){var i=s[r];t(e((0,_.paneViewsFamily)(i)).dataAtom,n),(0,et.isToolPane)(n)&&t(P.commitPaneAtom,i);var a=(0,et.isSingleton)(n.type)?e(_.paneViewsAtom).find(function(t){return e(t.dataAtom).type===n.type&&t.paneId!==i}):null;a&&t(X,a.paneId)}),n.commit){var c=!0,d=!1,f=void 0;try{for(var p,h=s[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var m=p.value;t(P.commitPaneAtom,m)}}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}}return n.makeActive&&t(P.activatePaneAtom,s[0]),s}),el={top:"above",left:"leftOf",right:"rightOf",bottom:"below"},eu=(0,i.atom)(null,function(e,t,n){t(ei,{pane:n.pane,relativeTo:["tiling"],placement:el[n.edge]})}),ec=(0,i.atom)(null,function(e,t,n){var i=e(w.layoutAtom),o=(0,u.v4)(),s=(0,u.v4)(),l=(0,r.produce)(i,function(e){try{(0,H.insertPaneGroup)(e,{id:s,panes:[o],isFloating:!0,rect:n.rect})}catch(e){throw t(w.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertFloatingPaneGroupAtom"}),e}});return t(a.calculateLayoutAtom,l),t(e((0,_.paneViewsFamily)(o)).dataAtom,n.pane),(0,et.isToolPane)(n.pane)&&t(P.commitPaneAtom,o),n.makeActive&&(t(P.activatePaneAtom,o),n.makeModal&&t(eo.modalPaneGroupIdAtom,s)),o});e.s(["insertFloatingPaneGroupAtom",()=>ec,"insertPaneGroupAtom",()=>es,"insertPaneToEdgeAtom",()=>eu],917592);var ed=e.i(863117),ef=(0,i.atom)(null,function(e,t,n){var i=n.paneId,o=n.activate,s=e(w.layoutAtom);if("tile"===e((0,_.paneViewsFamily)(i)).type?t(a.calculateLayoutAtom,(0,r.produce)(s,function(e){try{(0,ed.revealTiledPane)(e,{paneId:i,minPercentHorizontal:30,minPercentVertical:20})}catch(e){throw t(w.layoutBsodArgsAtom,{error:e,origin:"Layout: revealPaneAtom/revealTiledPane"}),e}})):t(a.calculateLayoutAtom,(0,r.produce)(s,function(e){try{(0,ed.revealFloatingPane)(e,{paneId:i,minWidth:200,minHeight:140})}catch(e){throw t(w.layoutBsodArgsAtom,{error:e,origin:"Layout: revealPaneAtom/revealFloatingPane"}),e}})),!o){var l=(0,A.findPaneById)(s,i),u=e(P.activePaneIdAtom);if(!l)throw Error("Expected pane");if(!u)return;var c=(0,A.findPaneById)(s,u);if(!c)throw Error("Expected active pane");if(c.paneGroup.id!==l.paneGroup.id)return}t(P.activatePaneAtom,i)});e.s(["revealPaneAtom",()=>ef],69838);var ep=(0,i.atom)(null);e.s(["agentChatRefAtom",()=>ep],881728);var eh=(0,i.atom)(null,function(e,t,i){if(0===i.panes.length)return[];var o=e(w.layoutAtom),s=i.panes.map(function(){return(0,u.v4)()}),l=(0,r.produce)(o,function(e){try{(0,H.insertPanes)(e,{paneIds:s,activate:i.activate,paneGroupId:i.paneGroupId,index:i.index})}catch(e){throw t(w.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/insertPanesAtom"}),e}});return t(a.calculateLayoutAtom,l),i.panes.forEach(function(n,r){var a=s[r];t(e((0,_.paneViewsFamily)(a)).dataAtom,n);var o=(0,et.isSingleton)(n.type)?e(_.paneViewsAtom).find(function(t){return e(t.dataAtom).type===n.type&&t.paneId!==a}):null;o&&t(X,o.paneId),(i.commit||(0,et.isToolPane)(n))&&t(P.commitPaneAtom,a)}),i.activate&&t(ef,{paneId:(0,n._)(s,1)[0],activate:!0}),s}),em=(0,i.atom)(null,function(e,t,r){var i=r.pane,a=r.activate,o=r.commit,s=r.placement;if("agentChat"===i.type){var l,u=e(ep);null==u||u.openAgent(null==(l=i.data)?void 0:l.sessionId);return}var c=e(w.layoutAtom);if(!c.tiling){var d=t(ei,{pane:i,relativeTo:["tiling"],placement:"replace"});return a&&t(P.activatePaneAtom,d),d}if("after"===s.type){var f=(0,A.findPaneById)(c,s.paneId);if(f){var p=(0,n._)(t(eh,{panes:[i],paneGroupId:f.paneGroup.id,index:f.index+1,activate:a}),1)[0];return a&&t(P.activatePaneAtom,p),p}}if("secondary"===s.type&&s.relativeTo){var h=(0,A.findAdjacentPaneGroup)(c,s.relativeTo);if(h){if("paneGroup"===h.type){var m=(0,n._)(t(eh,{panes:[i],paneGroupId:h.id,activate:a}),1)[0];return a&&t(P.activatePaneAtom,m),m}var g=t(ei,{pane:i,relativeTo:s.relativeTo,placement:"rightOf"});return a&&t(P.activatePaneAtom,g),g}var x=(0,A.findPaneById)(c,s.relativeTo);if((null==x?void 0:x.paneGroup.type)==="floatingPaneGroup"){var y=e((0,_.paneViewsFamily)(s.relativeTo)),b=e(y.rectAtom);return t(ec,{rect:{x:b.x+b.width,y:b.y,width:b.width,height:b.height},pane:i,makeActive:a})}}var k=t(ei,{pane:i,relativeTo:["tiling"],placement:"rightOf"});return a&&t(P.activatePaneAtom,k),o&&t(P.commitPaneAtom,k),k});e.s(["insertPaneAtom",()=>em,"insertPanesIntoGroupAtom",()=>eh],910447);var eg=e.i(814563),ev=e.i(926956),ex=e.i(80725),ey=e.i(903381),eb=(0,i.atom)(null,function(e,t,n){var r;t(e((0,_.paneViewsFamily)(n.paneId)).dataAtom,n.pane),(n.makeActive||n.reveal)&&t(ef,{paneId:n.paneId,activate:null!=(r=n.makeActive)&&r}),(n.commit||(0,et.isToolPane)(n.pane))&&t(P.commitPaneAtom,n.paneId)});e.s(["updatePaneAtom",()=>eb],838312);var ew=((t={}).EXACT="EXACT",t.FUZZY="FUZZY",t.NONE="NONE",t);function e_(e,t){return(null==e?void 0:e.ports)||(null==t?void 0:t.ports)?(null==e?void 0:e.ports)&&!(null==t?void 0:t.ports)||!(null==e?void 0:e.ports)&&(null==t?void 0:t.ports)?"FUZZY":(null==e?void 0:e.ports)&&(null==t?void 0:t.ports)&&e.ports.port!==t.ports.port?"NONE":(null==e?void 0:e.ports)&&(null==t?void 0:t.ports)&&e.ports.port===t.ports.port?e.ports.path===t.ports.path?"EXACT":"FUZZY":"NONE":"EXACT"}var ek=(0,i.atom)(null,function(e,t,n){var i=e(w.layoutAtom),a=(0,A.findPaneById)(i,n);if(!a){var o=Error("Expected selectedPane");throw t(w.layoutBsodArgsAtom,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}t((0,_.headerViewsFamily)(a.paneGroup.id),function(e){return(0,r.produce)(e,function(e){e.activeIndex=a.index})});var s=!0,l=!1,u=void 0;try{for(var c,d=a.paneGroup.panes[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value,p=(0,_.paneViewsFamily)(f);t(p,function(e){return(0,r.produce)(e,function(e){e.isHidden=e.paneId!==n})})}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}t(w.layoutAtom,(0,r.produce)(i,function(e){try{(0,ev.activatePane)(e,n)}catch(e){throw t(w.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),e}})),0===e(e((0,_.paneViewsFamily)(n)).rectAtom).width?t(ef,{paneId:n,activate:!0}):t(P.activatePaneAtom,n)}),eS=(0,i.atom)(null,function(e,t,n){var r=e(w.layoutAtom),i=(0,A.findCornerPaneGroup)(r,"topRight"),a=(0,A.findCornerPaneGroup)(r,"topLeft");if(!i||!a||!r.tiling){var o=t(ei,{pane:n,relativeTo:["tiling"],placement:"replace"});t(P.commitPaneAtom,o);return}if("paneGroup"===r.tiling.type){var s=t(ei,{pane:n,relativeTo:["tiling"],placement:"rightOf"});t(P.commitPaneAtom,s);return}if("split"===r.tiling.type&&2===r.tiling.children.length&&"paneGroup"===r.tiling.children[1].type){var l=r.tiling.stacked,u=t(ei,{pane:n,relativeTo:i.path,placement:l?"rightOf":"above"});t(P.commitPaneAtom,u);return}t(eh,{panes:[n],paneGroupId:i.paneGroup.id,commit:!0})}),eC=(0,i.atom)(null,function(e,t,n){if(!e(_.paneViewsAtom).find(function(t){var r=e(t.dataAtom);return"webview"===r.type&&e_(n,r.data)!==ew.NONE}))return void t(eS,{type:"webview",data:n})}),ej=(0,i.atom)(null,function(e,t,n){var i=e(w.layoutAtom),o=(0,r.produce)(i,function(e){var r=(0,A.findPaneById)(e,n.paneId);if(!r){var i=Error("Expected pane");throw t(w.layoutBsodArgsAtom,{error:i,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),i}var a=(0,A.findPaneGroupById)(e,n.toPaneGroupId);if(!a){var o=Error("Expected toPaneGroup");throw t(w.layoutBsodArgsAtom,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),o}var s=1===r.paneGroup.panes.length,l=!a.panes.includes(n.paneId);if(!s||l)try{(0,z.removePane)(e,n.paneId),(0,H.insertPanes)(e,{paneIds:[n.paneId],paneGroupId:n.toPaneGroupId,index:n.index}),l&&t(P.commitPaneAtom,n.paneId)}catch(e){throw t(w.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),e}});t(a.calculateLayoutAtom,o)}),eT=(0,i.atom)(null,function(e,t,n){var i=e(P.activePaneIdAtom);if(i){var o=e(w.layoutAtom),s=(0,A.findPaneById)(o,i);if(s){var l=s.paneGroup,c=new Map(e(_.paneViewsAtom).filter(function(e){return!e.isHidden}).map(function(t){return[t.paneId,e(t.rectAtom)]})),d=(0,ex.findNeighbor)({relativeTo:i,rects:c,direction:n}),f=d?(0,A.findPaneById)(o,d):null;if(f)return void t(ej,{paneId:i,toPaneGroupId:f.paneGroup.id});var p=l.panes.find(function(e){return e!==i});if(p){var h=(0,r.produce)(o,function(e){(0,z.removePane)(e,i),(0,H.insertPaneGroup)(e,{id:(0,u.v4)(),relativeTo:p,panes:[i],placement:n})});t(a.calculateLayoutAtom,h)}}}}),eE=(0,i.atom)(!1),eR=(0,i.atom)(null,function(e,t,n){var i=e(w.filePaneViewsAtom).map(function(t){return{paneId:t.paneId,path:(0,et.getFilePathForPane)(e(t.dataAtom))}}).filter(function(e){return n===e.path}),o=[],s=e(w.layoutAtom),l=(0,r.produce)(s,function(e){var n=!0,r=!1,a=void 0;try{for(var s,l=i[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value.paneId,c=(0,A.findPaneById)(e,u);if(!c){var d=Error("Expected pane");throw t(w.layoutBsodArgsAtom,{error:d,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePanesForFileAtom"}),d}c.floating||1!==c.paneGroup.panes.length?(0,z.removePane)(e,u):o.push(u)}}catch(e){r=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}}),u=!0,c=!1,d=void 0;try{for(var f,p=o[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;t(eb,{paneId:h,pane:{type:"commands",data:{autoFocus:!1}}})}}catch(e){c=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}t(a.calculateLayoutAtom,l)}),eI=(0,i.atom)(null,function(e,t,n){var r=n.node.path;if(n.eventType===ey.ChangeEventType.Delete)return void t(eR,r);var i=e(w.filePaneViewsAtom).filter(function(t){return(0,et.getFilePathForPane)(e(t.dataAtom))===r}),a={type:(0,et.getPaneTypeForFile)({path:n.to}),data:{path:n.to}},o=!0,s=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value.paneId;t(eb,{paneId:d,pane:a})}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}});function eA(e){var t=(0,_.headerViewsFamily)(e);return(0,W.default)(function(){return(0,i.atom)(function(e){var n=e(t);return e((0,_.paneViewsFamily)(n.panes[n.activeIndex])).paneId})},[t])}function eP(e){var t=(0,_.headerViewsFamily)(e);return{activeIndexAtom:(0,W.default)(function(){return(0,i.atom)(function(e){return e(t).activeIndex})},[t]),pathAtom:(0,W.default)(function(){return(0,eg.selectAtom)(t,function(e){return e.path},l.default)},[t]),panesAtom:(0,W.default)(function(){return(0,eg.selectAtom)(t,function(e){return e.panes},l.default)},[t]),activeFileAtom:(0,W.default)(function(){return(0,i.atom)(function(e){var n=e(t),r=e((0,_.paneViewsFamily)(n.panes[n.activeIndex])),i=e(r.dataAtom);return(0,et.isFilePane)(i)?(0,et.getFilePathForPane)(i):null})},[t])}}var eD=(0,i.atom)(null,function(e,t,n){var r=e(P.activePaneIdAtom),i=e(w.layoutAtom);if(r){var a=(0,A.findPaneById)(i,r);if(a)return void t(eh,{panes:n,paneGroupId:null==a?void 0:a.paneGroup.id,activate:!0,index:a.index+n.length})}var o=(0,A.findCornerPaneGroup)(i,"topLeft");if(o)return void t(eh,{activate:!0,paneGroupId:o.paneGroup.id,index:o.paneGroup.activeIndex+n.length,panes:n});var s=i.floating.length?i.floating[0]:null;s?t(eh,{activate:!0,paneGroupId:s.id,index:s.activeIndex+n.length,panes:n}):t(es,{panes:n,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),eO=(0,i.atom)(null,function(e,t){t(eD,[{type:"commands",data:{autoFocus:!0}}])}),eN=(0,i.atom)(null,function(e,t){var n=e(P.activePaneIdAtom);return!!n&&(t(X,n),!0)}),eM=(0,i.atom)(null,function(e,t,n){var r=e(P.activePaneIdAtom);if(r){var i=function(e,t){var n=t.paneId,r=t.dir,i=(0,A.findPaneById)(e,n);if(i){var a=i.index,o=i.paneGroup.panes;return"previous"===r?o[0===a?o.length-1:a-1]:o[a===o.length-1?0:a+1]}}(e(w.layoutAtom),{paneId:r,dir:n});i&&t(ek,i)}});function eL(){var e=(0,eo.usePopClosedPane)();return(0,W.default)(function(){return(0,i.atom)(null,function(t,n){var r=e();if(r){n(eD,[r.pane]);var i=t(P.activePaneIdAtom);i&&n(P.commitPaneAtom,i)}})},[e])}var eB=(0,i.atom)(null,function(e,t,n){var r=n.paneId,i=n.pane;t(eb,{paneId:r,pane:i});var a=(0,et.isSingleton)(i.type)?e(_.paneViewsAtom).find(function(t){return e(t.dataAtom).type===i.type&&t.paneId!==r}):null;if(a){var o=(0,A.findPaneById)(e(w.layoutAtom),a.paneId);if(!(null==o?void 0:o.floating)&&(null==o?void 0:o.paneGroup.panes.length)===1)return void t(eb,{paneId:a.paneId,pane:{type:"commands",data:{autoFocus:!1}}});t(X,a.paneId)}}),eV=(0,i.atom)(null,function(e,t,n){var r=e(e((0,_.paneViewsFamily)(n.b)).dataAtom);t(eb,{paneId:n.a,pane:r});var i=(0,A.findPaneById)(e(w.layoutAtom),n.b);(null==i?void 0:i.floating)||(null==i?void 0:i.paneGroup.panes.length)!==1?t(X,n.b):t(eB,{paneId:n.b,pane:{type:"commands",data:{autoFocus:!1}}})});e.s(["activateAdjacentPaneAtom",()=>eM,"changePaneAtom",()=>eB,"insertNewPaneAfterActivePaneAtom",()=>eO,"insertWebviewIfNotOpenOrNoneExistAtom",()=>eC,"isDraggingTabAtom",()=>eE,"moveOrDeleteFileAtom",()=>eI,"movePaneAtom",()=>ej,"relativeMovePaneAtom",()=>eT,"removeActivePaneAtom",()=>eN,"replacePaneAtom",()=>eV,"selectTabAtom",()=>ek,"useActiveTabPaneIdAtom",()=>eA,"usePaneGroupAtoms",()=>eP,"useReopenClosedPaneAtom",()=>eL],78777);var eF=(0,i.atom)(null,function(e,t,n){var i=(0,_.paneViewsFamily)(n);t(i,function(e){return(0,r.produce)(e,function(e){e.highlight=!0})}),setTimeout(function(){t(i,function(e){return(0,r.produce)(e,function(e){e.highlight=!1})})},200)}),eU=(0,i.atom)(null,function(e,t,n){if("agentChat"===n.pane.type){var r,i=e(ep);null==i||i.openAgent(null==(r=n.pane.data)?void 0:r.sessionId);return}var a=e(w.layoutAtom),o=n.activate,s=void 0===o||o,l=n.update,u=void 0===l||l,c=function(r){return r.paneId===e(P.activePaneIdAtom)&&t(eF,r.paneId),(s||n.reveal)&&t(ek,r.paneId),u&&t(eb,{paneId:r.paneId,pane:n.pane,makeActive:s,reveal:n.reveal}),r.paneId};if("diff"===n.pane.type){var d=e(_.paneViewsAtom).find(function(t){var r=e(t.dataAtom);return(0,$.default)(r,n.pane)});if(d)return c(d)}if("webview"===n.pane.type){var f=e(_.paneViewsAtom).filter(function(t){return"webview"===e(t.dataAtom).type}),p=f.find(function(t){var r=e(t.dataAtom);return"webview"===r.type&&"webview"===n.pane.type&&e_(r.data,n.pane.data)!==ew.NONE});if(p)return c(p);if(f.length>0)return c(f[0])}var h=e(_.paneViewsAtom).find(function(t){return e(t.dataAtom).type===n.pane.type});if((0,et.isSingleton)(n.pane.type)&&h)return c(h);var m=(0,A.findCornerPaneGroup)(a,"topRight");if(!m)return t(es,{panes:[n.pane],placement:"rightOf",relativeTo:["tiling"],makeActive:s,commit:n.commit})[0];var g=m.paneGroup.panes.find(function(t){var n=e((0,_.paneViewsFamily)(t));if(n.isHidden)return!1;var r=e(n.dataAtom);return!n.isCommitted&&!(0,et.isFilePaneType)(r.type)});if(g)return t(eb,{paneId:g,pane:n.pane,makeActive:s,reveal:n.reveal}),g;var x=!!n.commit||s,y=t(eh,{panes:[n.pane],paneGroupId:m.paneGroup.id,activate:x,commit:n.commit});return n.reveal&&t(ef,{paneId:y[0],activate:x}),y[0]});e.s(["openToolAtom",()=>eU],113606)},151386,e=>{"use strict";var t=e.i(993796);function n(){return(0,t.useFlag)({controlName:"flag-enraged-tremendous-squares"})}e.s(["useFilePaneFlag",()=>n])},906910,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(389959),i=e.i(541793),a=e.i(161322),o=e.i(719518);e.i(925218);var s=e.i(372988),l=e.i(921521),u=e.i(245309),c=e.i(706794),d=e.i(26127),f=e.i(113606),p=e.i(502108),h=e.i(134965),m=e.i(151386),g=e.i(485273),x=e.i(441329),y=e.i(219577),b=e.i(554752),w=e.i(290352),_=e.i(961603),k=(0,i.atom)(!1),S=(0,i.atom)(!1),C=e.i(176412),j=(0,r.createContext)(null);function T(e){var a,o,s,T=e.children,E=e.savedLayoutState,R=e.popupId,I=e.initialPane,A=e.agentCenteredLayout,P=void 0!==A&&A,D=e.agentLayoutVariation,O=e.agentPosition,N=void 0===O?"leftSidebar":O,M=(0,m.useFilePaneFlag)(),L=(a=(0,g.useRouter)(),o=(0,x.isInBonsaiWebview)(a),s=(0,x.doesBonsaiWebviewSupportFeature)(a,"workspace2"),o&&!s?6:y.APP_HEADER_HEIGHT),B=(0,l.default)(),V=(0,t._)((0,r.useState)(function(){var e=(0,i.createStore)();if(e.set(w.agentPositionAtom,N),e.set(S,M),e.set(k,B),e.set(_.globalHeaderHeightAtom,B?L:0),B||e.set(h.containerAtom,{width:window.innerWidth,height:window.innerHeight,x:0,y:0}),R&&(e.set(p.popupIdAtom,R),e.set(d.isMaximizedAtom,!0)),null==E?void 0:E.filetree){var t=(0,C.parseInitialSidebarWidth)(E.filetree.width),n="activeContent"in E.filetree?E.filetree.activeContent:null;e.set(C.sidebarStateAtom,{width:t,isOpen:t>0,activeContent:"inbox"===n?"inbox":"filetree"})}if(P)e.set(w.agentStateAtom,{type:"centered"});else{var r,a,o=null!=(a=null==E||null==(r=E.agent)?void 0:r.width)?a:null;e.set(w.agentStateAtom,{type:"sidebar",width:null===o?b.DEFAULT_AGENT_WIDTH:(0,w.parseInitialAgentWidth)(o)})}var s=null!=E?E:(0,u.getDefaultLayoutState)({variation:D});return e.set(c.initLayoutStateAtom,s),null!=I&&(e.get(h.visiblePaneViewsAtom).some(function(t){return e.get(t.dataAtom).type===(null==I?void 0:I.type)})||e.set(f.openToolAtom,{pane:I,commit:!0})),e}),1)[0];return(0,n.jsx)(j.Provider,{value:V,children:T})}function E(){var e=(0,r.useContext)(j);if(!e)throw Error("Expected store in context");return e}function R(e){return(0,a.useAtomValue)(e,{store:E()})}function I(e){return(0,s.useCreateObservableAtom)(e,E())}var A=function(e){return(0,a.useSetAtom)(e,{store:E()})};function P(e){return(0,o.useAtomCallback)((0,r.useCallback)(function(t){return t(e)},[e]),{store:E()})}e.s(["LayoutStoreProvider",()=>T,"useGet",()=>P,"useObservableValue",()=>I,"useSet",()=>A,"useStore",()=>E,"useValue",()=>R],906910)},323049,e=>{"use strict";var t=e.i(219577),n={overlay:t.SIDEBAR_Z_INDEX+20,gutterActive:t.SIDEBAR_Z_INDEX+19,maximizedTooltip:t.SIDEBAR_Z_INDEX+18,maximizedPane:t.SIDEBAR_Z_INDEX+17,maximizedHeader:t.SIDEBAR_Z_INDEX+16,filetreeDragLayer:17,detachPreview:16,draggingPane:15,draggingHeader:14,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,dropPreview:7,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1,hiddenPane:0};e.s(["zIndexLevels",()=>n])},71998,104671,303700,471576,142903,445171,535573,438166,797121,745736,483192,509787,805614,392096,256978,399130,374147,558,267782,291493,815233,674196,1834,460176,701583,544599,768828,623234,941798,808153,e=>{"use strict";var t=e.i(721281),n=e.i(276385),r=e.i(389959),i=e.i(992785),a=e.i(541793),o=e.i(814563),s=e.i(869226),l=e.i(906910),u=e.i(323049),c=e.i(480028),d=e.i(446530),f=e.i(123850),p=(0,a.atom)(null),h=(0,f.createCssVarTokens)(["backgroundColor","borderRadius","zIndex","border","opacity","visibility","width","height","x","y","innerScale","innerOpacity"]),m=h.cssVars,g=h.styleTokens,x=(0,o.selectAtom)(p,function(e){return(0,t._)({},m.border,(null==e?void 0:e.type)==="detachPreview"&&e.progress<.98?"1px dashed ".concat(c.tokens.foregroundDefault):"1px solid ".concat(c.tokens.accentPrimaryDefault))},i.default),y=(0,o.selectAtom)(p,function(e){return null==e?void 0:e.rect},i.default),b=(0,o.selectAtom)(y,function(e){var n;return e?(n={},(0,t._)(n,m.width,e.width+"px"),(0,t._)(n,m.height,e.height+"px"),n):null},i.default),w=(0,o.selectAtom)(y,function(e){var n;return e?(n={},(0,t._)(n,m.x,e.x+"px"),(0,t._)(n,m.y,e.y+"px"),n):null},i.default),_=(0,o.selectAtom)(p,function(e){var n,r;return e?"detachPreview"===e.type?(n={},(0,t._)(n,m.zIndex,u.zIndexLevels.detachPreview.toString()),(0,t._)(n,m.borderRadius,"100%"),(0,t._)(n,m.backgroundColor,"transparent"),n):(r={},(0,t._)(r,m.zIndex,u.zIndexLevels.dropPreview.toString()),(0,t._)(r,m.borderRadius,"8px"),(0,t._)(r,m.backgroundColor,c.tokens.accentPrimaryDimmer),r):null},i.default),k=(0,o.selectAtom)(p,function(e){var n,r,i;return e?"detachPreview"===e.type?(r={},(0,t._)(r,m.opacity,(.5*e.progress).toString()),(0,t._)(r,m.visibility,"visible"),r):(i={},(0,t._)(i,m.opacity,"0.2"),(0,t._)(i,m.visibility,"visible"),i):(n={},(0,t._)(n,m.opacity,"0"),(0,t._)(n,m.visibility,"hidden"),n)},i.default),S=(0,o.selectAtom)(p,function(e){return(0,t._)({},m.innerOpacity,(null==e?void 0:e.type)==="detachPreview"?"0.5":"0")},i.default),C=(0,o.selectAtom)(p,function(e){return(0,t._)({},m.innerScale,(null==e?void 0:e.type)==="detachPreview"?e.progress.toString():"1")},i.default),j=(0,d.cssRecord)({root:[{position:"absolute",pointerEvents:"none",opacity:g.opacity,width:g.width,height:g.height,transform:"translate(".concat(g.x,", ").concat(g.y,")"),backgroundColor:g.backgroundColor,borderRadius:g.borderRadius,border:g.border,zIndex:g.zIndex,visibility:g.visibility,transition:"transform 140ms, width 140ms, height 140ms, border-radius 140ms, opacity 140ms ease-out 200ms","@media (prefers-reduced-motion: reduce)":{transitionDuration:"0ms"}}],inner:[{width:"100%",height:"100%",borderRadius:"100%",background:"radial-gradient(transparent, ".concat(c.tokens.backgroundHighest,")"),opacity:g.innerOpacity,transform:"scale(".concat(g.innerScale,")")}]}),T=(0,r.memo)(function(){var e=(0,r.useRef)(null);(0,s.useStyleSet)(e,(0,l.useObservableValue)(w)),(0,s.useStyleSet)(e,(0,l.useObservableValue)(b)),(0,s.useStyleSet)(e,(0,l.useObservableValue)(x)),(0,s.useStyleSet)(e,(0,l.useObservableValue)(_)),(0,s.useStyleSet)(e,(0,l.useObservableValue)(k));var t=(0,r.useRef)(null);return(0,s.useStyleSet)(t,(0,l.useObservableValue)(S)),(0,s.useStyleSet)(t,(0,l.useObservableValue)(C)),(0,n.jsx)("div",{ref:e,css:j.root,children:(0,n.jsx)("div",{ref:t,css:j.inner})})});e.s(["DropPreview",()=>T,"dropPreviewAtom",()=>p],71998);var E=e.i(961603),R=e.i(917592),I=e.i(26127),A=e.i(502108),P=e.i(78777),D=e.i(134965),O=e.i(554752),N=e.i(290352),M=e.i(878420),L=e.i(176412),B=(0,a.atom)(function(e){var t=e(L.sidebarStateAtom),n=e(D.containerAtom),r=e(E.gapAtom),i=e(D.tabsHeaderHeightAtom)+r,a=t.width,o=t.isOpen,s={y:i,width:a,isOpen:o,opacity:+!!o,height:n.height-i};return"agent-filetree"===e(N.agentFiltreeOrderAtom)?(0,M._)({x:o?n.width-a-r:n.width},s):(0,M._)({x:o?r:-(a+r)},s)}),V=(0,a.atom)(function(e){var t=e(L.sidebarStateAtom),n=e(E.gapAtom);return t.isOpen?{isOpen:!0,width:n}:{isOpen:!1,width:n}});e.s(["sidebarResizeHandleViewStateAtom",()=>V,"sidebarViewStateAtom",()=>B],104671);var F=(0,a.atom)(function(e){var t=e(B),n=e(N.agentFiltreeOrderAtom),r=e(N.agentStateAtom),i=e(E.gapAtom),a="sidebar"===r.type?r.width:O.DEFAULT_AGENT_WIDTH;switch(n){case"filetree-agent":return{left:t.isOpen?t.width+2*i:i,right:i+a+i};case"agent-filetree":return{right:t.isOpen?t.width+2*i:i,left:i+a+i}}return{right:i,left:t.isOpen?t.width+i:i}});e.s(["sidebarWidthsAtom",()=>F],303700);var U=(0,a.atom)(null,function(e,t){t(p,{type:"dropPreview",rect:e($)})}),G=(0,a.atom)(null,function(e,t,n){t(p,null),t(P.isDraggingTabAtom,!1),t(R.insertPaneGroupAtom,{panes:n.panes,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),$=(0,a.atom)(function(e){if(e(A.isInPopupAtom))return e(I.fullscreenRectAtom);var t=e(E.globalHeaderHeightAtom),n=e(D.containerAtom),r=e(E.gapAtom),i=e(D.tabsHeaderHeightAtom),a=e(F),o=i+t+r;return{x:a.left,y:o,width:n.width-a.left-a.right,height:n.height-o-r}});e.s(["emptyLayoutDragAtom",()=>U,"emptyLayoutDropAtom",()=>G,"emptyLayoutRectAtom",()=>$],471576);var H=e.i(297083),z=e.i(817556),W=e.i(131141),q=e.i(569384),K=e.i(973245),Y=e.i(304277);function Q(){var e=(0,q._)(["\n  query FiletypeAssociations {\n    currentUser {\n      id\n      filetypeAssociations\n    }\n  }\n"]);return Q=function(){return e},e}function X(){var e=(0,q._)(["\n  mutation SetFiletypeAssociation($input: FiletypeAssociationInput!) {\n    setFiletypeAssociation(input: $input) {\n      ... on UserFiletypeAssociations {\n        associations\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return X=function(){return e},e}e.i(566901),e.i(951262);var Z={},J=(0,K.gql)(Q()),ee=(0,K.gql)(X()),et=e.i(173738),en=(0,a.atom)({}),er=(0,a.atom)(null),ei=(0,a.atom)(null,function(e,t,n){(0,i.default)(n,e(en))||t(en,n)}),ea=(0,a.atom)(null,function(e,t,n){return(0,H._)(function(){var r,i,a,o,s,l;return(0,z._)(this,function(u){switch(u.label){case 0:r=e(en),t(ei,(0,W.produce)(r,function(e){n.newAssociation?e[n.fileExtension]={extensionId:n.newAssociation.extensionId,fileHandlerId:n.newAssociation.fileHandlerId}:delete e[n.fileExtension]})),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,null===et.apolloClient||void 0===et.apolloClient?void 0:et.apolloClient.mutate({mutation:ee,variables:{input:n}})];case 2:if((null==(o=u.sent())||null==(a=o.data)||null==(i=a.setFiletypeAssociation)?void 0:i.__typename)!=="UserFiletypeAssociations")throw Error("Failed to set Filetype Association: "+(null==o||null==(l=o.data)||null==(s=l.setFiletypeAssociation)?void 0:s.message));return[3,4];case 3:return u.sent(),t(en,r),[3,4];case 4:return[2]}})})()});function eo(){var e,t,n=(e=(0,M._)({},Z,void 0),Y.useQuery(J,e)).data,i=(0,l.useSet)(ei),a=null==n||null==(t=n.currentUser)?void 0:t.filetypeAssociations;(0,r.useEffect)(function(){a&&i(a)},[i,a])}e.s(["associateFiletypeAtom",()=>ea,"filetypeAssociationRequest",()=>er,"filetypeAssociationsAtom",()=>en,"useInitializeFiletypeAssociations",()=>eo],142903);var es=e.i(984008),el=e.i(621624),eu=e.i(838312),ec=1920/1020,ed=(0,a.atom)(null,function(e,t,n){var r,i,a,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{location:"bottomRight"},l=e(D.paneViewsAtom).find(function(t){return e(t.dataAtom).type===n.type});if(l){t(eu.updatePaneAtom,{paneId:l.paneId,pane:n,reveal:!0}),s.commit&&t(es.commitPaneAtom,l.paneId);return}var u=e(D.containerAtom),c=e(D.tabsHeaderHeightAtom),d="bottomRight"===s.location?{width:r=Math.min(600,u.width),height:i=Math.min(600/ec+c,u.height),x:u.width-r,y:u.height-i}:(o=Math.min((a=Math.min(600,u.width))/ec+c,u.height),{width:a,height:o,x:(u.width-a)/2,y:(u.height-o)/2}),f=t(R.insertFloatingPaneGroupAtom,{pane:n,rect:d});s.commit&&t(es.commitPaneAtom,f)}),ef=(0,a.atom)(null,function(e,t,n){e(D.paneViewsAtom).filter(function(t){return e(t.dataAtom).type===n}).forEach(function(e){return t(el.removePaneAtom,e.paneId)})});e.s(["insertFloatingPaneIfNotExistsAtom",()=>ed,"removeFloatingPanesByTypeAtom",()=>ef],445171);var ep=e.i(125674);e.i(290625);var eh=e.i(949874),em=e.i(153626),eg=e.i(965265),ev=e.i(709010),ex=e.i(218363),ey=(0,a.atom)(null),eb=(0,a.atom)(null,function(e,t,n){if("end"===n.type)return void t(ey,null);if("update"===n.type){var r=e(ey);if(!r){var i=Error("Expected tilingResize");throw t(ex.layoutBsodArgsAtom,{error:i,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),i}var a=r.stacked,o=r.leftPath,s=r.startPercent,l=r.resizeDistance,u=r.initialLayout,c=r.snapPercent,d=s+(a?n.moveDelta.y:n.moveDelta.x)/l*100,f=e(D.containerAtom);d/100*f.width<240&&(d=240/f.width*100);var p=(0,W.produce)(u,function(e){(0,ev.setSplitPercent)(e,{leftPath:o,percent:d,snapPercent:c})});t(E.calculateLayoutAtom,p);return}var h=e(ex.layoutAtom),m=n.stacked?window.innerHeight:window.innerWidth,g=(0,eh.findNodeByPath)(h,n.leftPath);if(!g||!(0,em.isTiledNode)(g)){var x=Error("Expected left node");throw t(ex.layoutBsodArgsAtom,{error:x,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),x}var y=(0,em.getParentPath)(n.leftPath),b=g.percent,w=E.snapSize/m*100,_=null;try{_=(0,eg.getResizeDistance)({splitPath:y,layout:h,tilingOptions:e(E.tilingOptionsAtom)})}catch(e){throw t(ex.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),e}if(null===_)throw Error("Expected resizeDistance");t(ey,{stacked:n.stacked,leftPath:n.leftPath,startPercent:b,resizeDistance:_,snapPercent:w,initialLayout:h})});e.s(["resizeTilingAtom",()=>eb,"resizeTilingStateAtom",()=>ey],535573);var ew=e.i(844561);function e_(e){return(0,ep.default)(function(){return(0,D.tileHandleViewsFamily)(e)},[e])}function ek(e){var t=e_(e);return(0,ep.default)(function(){return(0,o.selectAtom)(t,function(e){return e.rect})},[t])}function eS(e){return(0,ep.default)(function(){return(0,a.atom)(function(t){var n=t(ey);return!!n&&e===(0,ew.getHandleId)({leftPath:n.leftPath})})},[e])}function eC(e){var t=e_(e);return(0,ep.default)(function(){return(0,o.selectAtom)(t,function(e){return!!e.snapped})},[t])}function ej(e){var t=e_(e);return(0,ep.default)(function(){return(0,o.selectAtom)(t,function(e){return e.stacked})},[t])}function eT(e){var t=(0,ew.useSizeAtom)(ek(e)),n=ej(e);return(0,ep.default)(function(){return(0,a.atom)(function(e){var r=e(t),i=r.width,a=r.height;return e(n)?i:a})},[t,n])}function eE(e){var t=ej(e),n=eS(e),r=(0,ew.useSizeAtom)(ek(e));return(0,ep.default)(function(){return(0,a.atom)(function(e){var i=e(r),a=i.width,o=i.height,s=e(n),l=e(t),u=e(ex.isTouchDeviceLayoutAtom);return l?{width:s?a:24,height:u?6:2}:{height:s?o:24,width:u?6:2}})},[r,t,n])}function eR(e){var t=(0,ew.useSizeAtom)(ek(e)),n=ej(e);return(0,ep.default)(function(){return(0,a.atom)(function(e){var r=e(t),i=r.width,a=r.height;return(e(n)?i:a)<24})},[t,n])}function eI(e){var t=e_(e);return(0,ep.default)(function(){return(0,a.atom)(function(e){var n=e(t),r=n.snapped,i=n.stacked;return"right"===r?i?180:90:"left"===r?270*!i:0})},[t])}e.s(["useHandleAtom",()=>e_,"useHandleGripIsHiddenAtom",()=>eR,"useHandleGripSizeAtom",()=>eE,"useHandleIsActiveAtom",()=>eS,"useHandleIsSnappedAtom",()=>eC,"useHandleIsStackedAtom",()=>ej,"useHandleLenghtAtom",()=>eT,"useHandleRectAtom",()=>ek,"useHandleRotationAtom",()=>eI],438166);var eA=e.i(64386),eP=e.i(530658),eD=e.i(15053),eO=e.i(906116),eN=e.i(555605),eM=e.i(67537),eL=function(e){var t=e.container,n=e.sidebarWidths,r=e.gap,i=t.width-n.left-n.right,a=t.width-100-i/2,o=(t.height-r)/2-100;return{middle:{rect:{x:0,y:0,width:0,height:0},paneId:null,visible:!1},above:{visible:!1,rect:{x:a,y:0,width:200,height:100}},below:{visible:!1,rect:{x:a,y:t.height-100-r,width:200,height:100}},leftOf:{visible:!1,rect:{x:n.left+r,y:o,width:100,height:200}},rightOf:{visible:!1,rect:{x:t.width-100-r,y:o,width:100,height:200}}}},eB=["above","rightOf","leftOf","below","middle"];function eV(e,t){var n=t.container,r=t.gap,i=t.sidebarWidths,a=t.headerHeight,o=t.paneRects,s=t.mouse,l={x:s.x-n.x,y:s.y-n.y},u=null,c=null;if(o.length){var d=!0,f=!1,p=void 0;try{for(var h,m=o[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=(0,eP._)(h.value,2),x=g[0],y=g[1],b={x:y.x-r/2,y:y.y-r/2-a,width:y.width+r,height:y.height+r+a};if((0,ew.isInside)(s,b)){u=x,c=y;break}}}catch(e){f=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}if(e.middle.visible=!!c,c){var w={width:Math.min(100,c.width),height:Math.min(100,c.height)};e.middle.paneId=u,e.middle.rect={x:c.x+c.width/2-w.width/2,y:c.y-a+(c.height+a)/2-w.height/2-r,width:w.width,height:w.height+a/2}}}else{var _={x:n.x+i.left+r,y:n.y,width:n.width-r-i.left-i.right-r,height:n.height},k={width:Math.min(100,_.width),height:Math.min(100,_.height)};e.middle.rect={x:_.x+_.width/2-k.width/2,y:_.height/2-k.height/2,width:k.width,height:k.height},e.middle.visible=!0}var S=null,C=!0,j=!1,T=void 0;try{for(var E,R=eB[Symbol.iterator]();!(C=(E=R.next()).done);C=!0){var I=E.value,A=e[I].rect;if((0,ew.isInside)(l,A)){S=I;break}}}catch(e){j=!0,T=e}finally{try{C||null==R.return||R.return()}finally{if(j)throw T}}var P=!0,D=!1,O=void 0;try{for(var N,M=eB[Symbol.iterator]();!(P=(N=M.next()).done);P=!0){var L=N.value;e[L].visible=!S||L===S}}catch(e){D=!0,O=e}finally{try{P||null==M.return||M.return()}finally{if(D)throw O}}}function eF(e,t){var n=t.container,r=t.sidebarWidth,i=t.position,a=t.gap,o={x:r+a,y:0,width:n.width-r-2*a,height:n.height-a};if((null==e?void 0:e.type)!=="split"){switch(i){case"above":case"below":o.height=o.height/2,"below"===i&&(o.y+=o.height);break;case"rightOf":case"leftOf":o.width=o.width/2,"rightOf"===i&&(o.x+=o.width)}return o}if(e.stacked){switch(i){case"above":o.height=o.height*(e.children[0].percent/100)/2;break;case"below":o.height=o.height*(e.children[e.children.length-1].percent/100)/2,o.y=n.height-o.height;break;case"leftOf":o.width=o.width/2;break;case"rightOf":o.width=o.width/2,o.x=n.width-o.width-a}return o}switch(i){case"above":o.height=o.height/2;break;case"below":o.height=o.height/2,o.y=n.height-o.height-a;break;case"leftOf":o.width=o.width*(e.children[0].percent/100)/2;break;case"rightOf":o.width=o.width*(e.children[e.children.length-1].percent/100)/2,o.x=n.width-o.width}return o}e.s(["createDropPoints",()=>eL,"getSplitRect",()=>eF,"updateDropPoints",()=>eV],797121);var eU=(0,a.atom)(null),eG=(0,o.selectAtom)(eU,function(e){return null!==e}),e$=(0,a.atom)(null,function(e,t,n){t(eU,n),requestAnimationFrame(function(){t(eU,null)})});e.s(["enableTransitionsAtom",()=>e$,"transitionInProgressAtom",()=>eG,"transitionStateAtom",()=>eU],745736);var eH=e.i(965863),ez=(0,a.atom)(null),eW=(0,a.atom)(function(e){var t=e(ez);if(!t)return null;var n=(0,eh.findPaneGroupById)(e(ex.layoutAtom),t.paneGroupId);return n&&n.panes[n.activeIndex]||null}),eq=(0,o.selectAtom)(ez,function(e){return null==e?void 0:e.dropPoints}),eK=(0,a.atom)(null,function(e,t,n){if(!e(I.isMaximizedAtom)){var r=e(D.containerAtom),i=(0,eh.findPaneGroupById)(e(ex.layoutAtom),n.paneGroupId);if(!i){var a=Error("Expected paneGroup");throw t(ex.layoutBsodArgsAtom,{error:a,origin:"Layout: state/paneGroupDragAndDrop/dragStartAtom"}),a}var o=e((0,D.paneViewsFamily)(i.panes[i.activeIndex])),s=e(o.rectAtom),l=e(D.tabsHeaderHeightAtom),u={x:s.x,y:s.y-l,width:s.width,height:s.height+l},c=n.mouse.x-(r.x+s.x),d=e(E.gapAtom),f=new Map(e(D.headerIdsAtom).filter(function(e){return e!==i.id}).map(function(e){return[e,{snappiness:400}]}));t(e$,{panes:new Map(e(D.paneIdsAtom).filter(function(e){return e!==o.paneId}).map(function(e){return[e,{snappiness:400}]})),headers:f}),t(ez,{startType:o.type,startPoint:{x:n.mouse.x-r.x,y:n.mouse.y-r.y},paneGroupId:n.paneGroupId,transformOriginX:Math.round(c)+"px",scale:1,fromRect:u,movedAtAll:!1,dropPoints:"floating"===o.type?eL({container:r,sidebarWidths:e(F),gap:d}):null})}}),eY=(0,a.atom)(null,function(e,t,n){if(!e(I.isMaximizedAtom)){var r=e(ez);if(!r)return void t(p,null);var i=n.delta,a=r.paneGroupId,o=r.fromRect,s=e(ex.layoutAtom),l=(0,eh.findPaneGroupById)(e(ex.layoutAtom),a);if(!l){var u=Error("Expected paneGroup");throw t(ex.layoutBsodArgsAtom,{error:u,origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),u}var c=l.panes[l.activeIndex],d=(0,eh.findPaneById)(s,c);if(!d){var f=Error("Expected pane");throw t(ex.layoutBsodArgsAtom,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),f}var h=(0,D.paneViewsFamily)(c),m=(0,D.headerViewsFamily)(d.paneGroup.id),g=e(D.tabsHeaderHeightAtom),x=Math.max(Math.abs(i.x),Math.abs(i.y)),y=x>=50,b=x>0;if(y&&!d.floating){var w=e(h).rectAtom,_=e(w),k=(0,W.produce)(s,function(e){try{(0,eM.movePaneGroupToFloating)(e,{paneGroupPath:d.paneGroupPath,rect:{x:_.x+i.x,y:_.y-g+i.y,width:_.width,height:_.height+g}})}catch(e){throw t(ex.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),e}});t(e$,{headers:new Map(e(D.headerIdsAtom).filter(function(e){return e!==d.paneGroup.id}).map(function(e){return[e,{snappiness:400}]})),panes:new Map(e(D.paneIdsAtom).filter(function(e){return e!==c}).map(function(e){return[e,{snappiness:400}]}))}),t(E.calculateLayoutAtom,k),t(eX,n.mouse);return}var S=e(m),C=e(h);l.id===e(eH.modalPaneGroupIdAtom)&&t(eH.modalPaneGroupIdAtom,null);var j="floating"===r.startType?(0,eO.containRectPosition)({x:o.x+i.x,y:o.y+i.y,width:o.width,height:o.height},{inside:e(D.containerAtom),minVisibleX:2*g,minVisibleY:g}):{x:o.x+i.x,y:o.y+i.y},T=j.x,R=j.y;if(t(S.rectAtom,function(e){return(0,W.produce)(e,function(e){e.x=T,e.y=R})}),t(C.rectAtom,function(e){return(0,W.produce)(e,function(e){e.x=T,e.y=R+g})}),!y&&!d.floating){var A=r.startPoint,P=1-.7*(1-Math.sqrt(1-Math.pow(x/50,2)));t(p,{type:"detachPreview",rect:{x:A.x-50,y:A.y-50,width:100,height:100},progress:x/50}),t(ez,(0,W.produce)(r,function(e){e.scale=P,e.movedAtAll=e.movedAtAll||b}));return}var O=e(E.gapAtom);if(r.dropPoints)return void t(ez,function(t){return(0,W.produce)(t,function(t){(null==t?void 0:t.dropPoints)&&eV(t.dropPoints,{paneRects:e(eQ),container:e(D.containerAtom),sidebarWidths:e(F),headerHeight:e(D.tabsHeaderHeightAtom),gap:O,mouse:n.mouse})})});if(!d.floating)throw Error("Expected floating pane");t(eX,n.mouse)}}),eQ=(0,a.atom)(function(e){return e(D.paneViewsAtom).filter(function(e){return"tile"===e.type&&!e.isHidden}).map(function(t){return[t.paneId,e(t.rectAtom)]})}),eX=(0,a.atom)(null,function(e,t,n){var r=e(D.tabsHeaderHeightAtom),i=e(D.containerAtom),a=e(eQ),o=e(E.gapAtom),s=function(e){var t=e.views,n=e.mouse,r=e.container,i=e.headerHeight,a=e.sidebarWidths,o=e.gap,s={x:Math.min(Math.max(n.x-r.x,1),r.width-1),y:Math.min(Math.max(n.y-r.y,1),r.height-1)},l=!0,u=!1,c=void 0;try{for(var d,f=t[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=(0,eP._)(d.value,2),h=p[0],m=p[1],g={x:m.x,y:m.y-i,width:m.width,height:i},x={x:g.x-o/2,y:g.y-o/2,width:g.width+o,height:i+o/2};if((0,ew.isInside)(s,x))return{dropPreview:g,drop:{type:"insert",paneId:h}};var y={x:m.x,y:m.y-i,width:m.width,height:m.height+i},b={x:y.x-o/2,y:y.y-o/2,width:y.width+o,height:y.height+o};if((0,ew.isInside)(s,b)){var w=(0,ew.getDropDataForPoint)(s,y);return{dropPreview:w.rect,drop:{type:"split",relativeTo:h,placement:w.placement}}}}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}var _=(0,ew.getDropDataForPoint)(s,{x:a.left,y:0,width:r.width-a.left-a.right,height:r.height});return{dropPreview:_.rect,drop:{type:"split",relativeTo:["tiling"],placement:_.placement}}}({views:a,container:i,mouse:n,headerHeight:r,sidebarWidths:e(F),gap:o}),l=s.drop;t(p,{type:"dropPreview",rect:s.dropPreview}),t(ez,function(e){return(0,W.produce)(e,function(e){e&&(e.drop=l,e.movedAtAll=!0)})})}),eZ=(0,a.atom)(null,function(e,t,n){var r=n.delta;if(!e(I.isMaximizedAtom)){t(p,null);var i=e(ez);if(i){var a=i.paneGroupId,o=i.drop,s=i.fromRect,l=e(ex.layoutAtom),u=(0,eh.findPaneGroupById)(e(ex.layoutAtom),a);if(!u){var c=Error("Expected paneGroup");throw t(ex.layoutBsodArgsAtom,{error:c,origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),c}var d=u.panes[u.activeIndex],f=(0,eh.findPaneById)(l,d);if(!f){var h=Error("Expected pane");throw t(ex.layoutBsodArgsAtom,{error:h,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),h}var m=(0,W.produce)(l,function(n){if(!o&&f.floating&&"floating"===i.startType){var a=(0,eh.findNodeByPath)(n,f.paneGroupPath);if((null==a?void 0:a.type)!=="floatingPaneGroup")return;var l=e(D.tabsHeaderHeightAtom),u=(0,eO.containRectPosition)({x:s.x+r.x,y:s.y+r.y,width:s.width,height:s.height},{inside:e(D.containerAtom),minVisibleX:2*l,minVisibleY:l}),c=u.x,p=u.y;a.rect.x=c,a.rect.y=p;return}if(o){if(f.paneGroup.panes.forEach(function(e){t(es.commitPaneAtom,e)}),"split"===o.type){if(null===n.tiling){var h=(0,eD.v4)();try{(0,eN.insertPaneGroup)(n,{id:(0,eD.v4)(),panes:[h],placement:"leftOf",relativeTo:["tiling"]})}catch(e){throw t(ex.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}}try{(0,eM.moveTiledPaneGroup)(n,{from:d,to:o.relativeTo,placement:o.placement})}catch(e){throw t(ex.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}return}var m=(0,eh.findPaneById)(n,o.paneId);f.paneGroup.panes.forEach(function(e){(0,eM.movePane)(n,{paneId:e,paneGroupPath:(null==m?void 0:m.paneGroupPath)||["tiling"],activate:!1})})}});t(ez,null),t(E.calculateLayoutAtom,m),(null==o?void 0:o.type)==="insert"&&t(P.selectTabAtom,d)}}});e.s(["dragAndDropStateAtom",()=>ez,"dropPointsAtom",()=>eq,"paneBeingDraggedAtom",()=>eW,"paneGroupDragEndAtom",()=>eZ,"paneGroupDragStartAtom",()=>eK,"paneGroupDragUpdateAtom",()=>eY],483192);var eJ=(0,a.atom)(function(e){var t=e(N.agentStateAtom);switch(t.type){case"sidebar":return t.width===O.COLLAPSED_WIDTH;case"centered":return!1}}),e0=(0,a.atom)(function(e){var t=e(N.agentStateAtom);switch(t.type){case"sidebar":return e(eJ)?"collapsed":"sidebar";case"centered":return t.type}}),e1=(0,a.atom)(function(e){var t=e(N.agentStateAtom),n=e(D.tabsHeaderHeightAtom),r=e(D.containerAtom),i=e(N.agentFiltreeOrderAtom),a=n+e(E.gapAtom),o=r.height-a;switch(t.type){case"sidebar":var s=e(E.gapAtom),l={width:t.width,height:o,y:a};switch(i){case"filetree-agent":return(0,M._)({x:r.width-t.width-s},l);case"agent-filetree":return(0,M._)({x:0===t.width?0:s},l);default:return{x:0,y:0,width:0,height:0}}case"centered":return{x:0,y:a,width:r.width,height:o}}});function e2(e){var t=e.rect,n=e.insets,r=e.agentFiltreeOrder,i=e.gap,a=e.paneGroupId,o=e.topLeftPaneGroup,s=e.topRightPaneGroup,l=e.sidebar,u=e.agent,c=e.agentRect,d=e.container,f=t.x,p=t.width;if(n.left>0&&(null==o?void 0:o.id)===a&&(f=n.left,"filetree-agent"===r?l.isOpen&&l.x+l.width+i>=n.left&&(f=t.x):"agent-filetree"===r&&(null==u?void 0:u.type)==="sidebar"&&c.x+c.width>n.left&&(f=t.x),p=t.width-(f-t.x)),n.right>0&&(null==s?void 0:s.id)===a){if("agent-filetree"===r){var h=d.width-(l.x+l.width),m=l.isOpen?h+l.width+i:0;m<=n.right&&(p-=n.right-(m-i))}else if("filetree-agent"===r&&(null==u?void 0:u.type)==="sidebar"){var g=u.width+i+i;g<=n.right&&(p-=n.right-g)}}return{x:f,width:p}}e.s(["agentDisplayStateAtom",()=>e0,"agentRectAtom",()=>e1],509787);var e3=(0,a.atom)({left:0,right:0}),e5=(0,a.atom)(null,function(e,n,r,i){n(e3,function(e){return(0,eA._)((0,M._)({},e),(0,t._)({},r,i))}),n(E.calculateLayoutAtom,e(ex.layoutAtom))}),e4=(0,a.atom)(function(e){var t,n,r=e(ex.layoutAtom),i=e(I.maximizePaneGroupAtom),a={topLeft:null==(t=(0,eh.findCornerPaneGroup)(r,"topLeft"))?void 0:t.paneGroup,topRight:null==(n=(0,eh.findCornerPaneGroup)(r,"topRight"))?void 0:n.paneGroup};if(!a.topLeft||!a.topRight)return{left:0,right:0,leftPaneWidth:0,rightPaneWidth:0};if(i===a.topLeft||i===a.topRight){var o=e(I.maximizedPaneRectAtom).width;return{left:o,right:o,leftPaneWidth:o,rightPaneWidth:o}}var s={left:e((0,D.headerViewsFamily)(a.topLeft.id)),right:e((0,D.headerViewsFamily)(a.topRight.id))},l={left:e(s.left.rectAtom),right:e(s.right.rectAtom)},u={insets:e(e3),agentFiltreeOrder:e(N.agentFiltreeOrderAtom),gap:e(E.gapAtom),topLeftPaneGroup:a.topLeft,topRightPaneGroup:a.topRight,sidebar:e(B),agent:e(N.agentStateAtom),agentRect:e(e1),container:e(D.containerAtom)},c={left:e2((0,eA._)((0,M._)({},u),{rect:l.left,paneGroupId:a.topLeft.id})),right:e2((0,eA._)((0,M._)({},u),{rect:l.right,paneGroupId:a.topRight.id}))};return{leftPaneWidth:l.left.width,left:c.left.width,rightPaneWidth:l.right.width,right:c.right.width}});function e8(e){var t=ta(e);return(0,ep.default)(function(){return(0,a.atom)(function(n){if(n(t))return n(I.maximizedHeaderRectAtom);var r,i,a=n(ex.layoutAtom),o=n((0,D.headerViewsFamily)(e)),s=n(o.rectAtom),l={topLeft:null==(r=(0,eh.findCornerPaneGroup)(a,"topLeft"))?void 0:r.paneGroup,topRight:null==(i=(0,eh.findCornerPaneGroup)(a,"topRight"))?void 0:i.paneGroup},u=n(E.gapAtom),c=e2({rect:s,insets:n(e3),agentFiltreeOrder:n(N.agentFiltreeOrderAtom),gap:u,paneGroupId:e,topLeftPaneGroup:l.topLeft||null,topRightPaneGroup:l.topRight||null,sidebar:n(B),agent:n(N.agentStateAtom),agentRect:n(e1),container:n(D.containerAtom)});if("floating"===o.path[0]){var d=s.y-u,f=s.height+u+1;return(0,eA._)((0,M._)({},s,c),{y:d,height:f})}return(0,M._)({},s,c)})},[t,e])}function e6(e){var t=e7(e),n=e8(e);return(0,ep.default)(function(){var r=(0,a.atom)(function(r){var i,a,o,s=r(n),l=r(t)||(null==(o=r(eU))||null==(a=o.headers)||null==(i=a.get(e))?void 0:i.dropState)?"transform":"top-left";return{x:s.x,y:s.y,positioning:l}});return(0,o.selectAtom)(r,function(e){return e},i.default)},[t,e,n])}function e7(e){return(0,ep.default)(function(){return(0,a.atom)(function(t){var n=t(ez);return n&&e===n.paneGroupId?n:null})},[e])}function e9(e){var t=e8(e),n=te(e),r=e6(e);return(0,ep.default)(function(){return(0,a.atom)(function(e){var i=e(N.isAgentCenteredAtom);return(0,eA._)((0,M._)({},e(t)),{scale:e(n),positioning:e(r).positioning,opacity:+!i})})},[t,n,r])}function te(e){var t=e7(e);return(0,ep.default)(function(){return(0,o.selectAtom)(t,function(e){var t;return null!=(t=null==e?void 0:e.scale)?t:1})},[t])}function tt(e){var t=e7(e);return(0,ep.default)(function(){return(0,a.atom)(function(n){var r,i,a,o,s,l=n(t);if(l)return null!=(o=l.transformOriginX)?o:"0px";var u=null==(a=n(eU))||null==(i=a.headers)||null==(r=i.get(e))?void 0:r.dropState;return null!=(s=null==u?void 0:u.transformOrginX)?s:"0x"})},[t,e])}function tn(e){return(0,ep.default)(function(){return(0,a.atom)(function(t){var n,r,i=t(eU);return null!=(r=null==i||null==(n=i.headers)?void 0:n.get(e))&&r})},[e])}function tr(e){var t,n=e7(e),r=ta(e),i=to(e),o=(t=ti(e),(0,ep.default)(function(){return(0,a.atom)(function(e){var n=e(es.activePaneIdAtom);if(!n)return!1;var r=e(t);return!!r&&r.panes.includes(n)})},[t]));return(0,ep.default)(function(){return(0,a.atom)(function(t){var a,s,l;return t(r)?u.zIndexLevels.maximizedHeader:t(n)||(null==(l=t(eU))||null==(s=l.headers)||null==(a=s.get(e))?void 0:a.dropState)?u.zIndexLevels.draggingHeader:t(i)?t(o)?u.zIndexLevels.floatingHeaderActive:u.zIndexLevels.floatingHeader:u.zIndexLevels.tiledHeader})},[n,r,i,o,e])}function ti(e){return(0,ep.default)(function(){return(0,o.selectAtom)(ex.layoutAtom,function(t){return(0,eh.findPaneGroupById)(t,e)})},[e])}function ta(e){var t=ti(e);return(0,ep.default)(function(){return(0,a.atom)(function(e){if(e(A.isInPopupAtom))return!0;if(!e(I.isMaximizedAtom))return!1;var n=e(t);if(!n)return!1;var r=e(es.activePaneIdAtom);return!!r&&n.panes.includes(r)})},[t])}function to(e){var t=(0,D.headerViewsFamily)(e);return(0,ep.default)(function(){return(0,o.selectAtom)(t,function(e){return"floating"===e.path[0]})},[t])}function ts(e){return(0,ep.default)(function(){return(0,a.atom)(function(t){return t(eH.modalPaneGroupIdAtom)===e})},[e])}function tl(e){return(0,ep.default)(function(){return(0,a.atom)(function(t){var n;return(null==(n=t(ez))?void 0:n.paneGroupId)===e})},[e])}e.s(["cornerPaneHeaderWidthsAtom",()=>e4,"headerInsetsAtom",()=>e3,"setHeaderInsetAtom",()=>e5],805614),e.s(["useHeaderIsBeingDraggedAtom",()=>tl,"useHeaderIsFloatingAtom",()=>to,"useHeaderIsMaximizedAtom",()=>ta,"useHeaderIsModalAtom",()=>ts,"useHeaderPositionAtom",()=>e6,"useHeaderPropertiesAtom",()=>e9,"useHeaderRectAtom",()=>e8,"useHeaderScaleAtom",()=>te,"useHeaderTransformOriginXAtom",()=>tt,"useHeaderZIndexAtom",()=>tr,"usePaneHeaderTransitionEnabledAtom",()=>tn],392096);var tu=e.i(205104),tc=e.i(780671),td=e.i(910447),tf=e.i(804375);e.i(282890);var tp=e.i(66718),th=(0,a.atom)(null,function(e,t,n){var r,i=n.path,a=e(ex.layoutAtom),o=(0,M._)({},n);if(!o.opener){var s=e(en),l=(0,tc.getFileExtension)(i);if(l){var u=s[l];if(u){var c=e(ex.extensionFileHandlersAtom).find(function(e){return e.extension.extensionId===u.extensionId});c&&(o.opener={paneType:"extension",extensionFileHandler:c,supports:function(){return!0}})}}}if(o.newPane)return void t(R.insertPaneToEdgeAtom,{pane:tm(o),edge:null!=(r=o.newPaneEdge)?r:"left"});var d=(0,eh.findCornerPaneGroup)(a,"topLeft");if(!d)return void t(tf.insertSplitPaneAtom,{pane:tm(o),relativeTo:["tiling"],placement:"replace"});var f=e(D.paneViewsAtom).find(function(t){var n,r=e(t.dataAtom);return(0,tp.isFilePane)(r)?i===(0,tp.getFilePathForPane)(r):!!((null==(n=o.opener)?void 0:n.paneType)==="extension"&&(0,tp.isExtensionPane)(r))&&r.data.filePath===i&&o.opener.extensionFileHandler.extension.installationId===r.data.installationId||"markdown"===r.type&&i===r.data.path});if(f&&!o.newTab){var p=e(f.dataAtom);if((0,tp.isFilePane)(p)||"markdown"===p.type){t(P.selectTabAtom,f.paneId),t(eu.updatePaneAtom,{paneId:f.paneId,pane:tm((0,M._)({opener:{paneType:p.type}},o))});return}if((0,tp.isExtensionPane)(p))return void t(P.selectTabAtom,f.paneId)}var h=d.paneGroup,m=(0,eh.findCornerPaneGroup)(a,"topRight");if(m&&(h=m.paneGroup),o.newTab)return void t(td.insertPanesIntoGroupAtom,{panes:[tm(o)],paneGroupId:h.id,activate:!0,commit:!0,index:h.activeIndex+1});var g=e(D.paneViewsAtom).find(function(t){return!t.isCommitted&&((0,tp.isFilePane)(e(t.dataAtom))||"markdown"===e(t.dataAtom).type)});if(g){t(eu.updatePaneAtom,{paneId:g.paneId,pane:tm(o)}),t(P.selectTabAtom,g.paneId);return}var x=e(ex.filePaneViewsAtom).find(function(t){var n=e(t.dataAtom);return"codeEditor"===n.type&&""===(0,tp.getFilePathForPane)(n)});if(x){t(eu.updatePaneAtom,{paneId:x.paneId,pane:tm(o)}),t(P.selectTabAtom,x.paneId);return}var y=h.panes.find(function(t){var n=e((0,D.paneViewsFamily)(t));return"commands"===e(n.dataAtom).type});if(y){t(eu.updatePaneAtom,{paneId:y,pane:tm(o)}),t((0,D.paneViewsFamily)(y),function(e){return(0,W.produce)(e,function(e){e.isCommitted=!1})}),t(P.selectTabAtom,y);return}t(td.insertPanesIntoGroupAtom,{panes:[tm(o)],paneGroupId:h.id,activate:!0})});function tm(e){var t=e.path,n=e.col,r=e.line,i=e.opener;if(!(null==i?void 0:i.paneType)&&(0,tu.isMarkdownFile)(t.toLowerCase()))return{type:"markdown",data:{path:t}};if(!(null==i?void 0:i.paneType)&&(0,tu.isCsvFile)(t.toLowerCase()))return{type:"csvPreview",data:{path:t}};var a=(null==i?void 0:i.paneType)||(0,tp.getPaneTypeForFile)({path:t});if("codeEditor"===a)return{type:"codeEditor",data:{path:t,col:n,line:r}};if("extension"===a){var o=i.extensionFileHandler;return{type:"extension",data:{filePath:t,extensionId:o.extension.extensionId,installationId:o.extension.installationId,name:o.extension.manifest.name,baseUrl:o.extension.baseUrl,path:o.handler}}}return"markdown"===a?{type:"markdown",data:{path:t}}:{type:a,data:{path:t}}}e.s(["openFileAtom",()=>th],256978);var tg=(0,a.atom)(null,function(e,t,n){var r=n.paths.map(function(e){var t=e.match(/(.+?)(:(\d+))?(:(\d+))?$/);if(!t)return!1;var n=[t[1],void 0!==t[3]&&parseInt(t[3],10),void 0!==t[5]&&parseInt(t[5],10)],r=n[0],i=n[1],a=n[2];return{type:(0,tp.getPaneTypeForFile)({path:r}),data:{path:r,line:i,col:a}}}).filter(Boolean),i=r.length-1,a=e(es.activePaneIdAtom);r.forEach(function(e,n){return(0,H._)(function(){return(0,z._)(this,function(r){return t(td.insertPaneAtom,{pane:e,activate:i===n,placement:{type:"secondary",relativeTo:a}}),[2]})})()})});e.s(["openMultipleFilesAtom",()=>tg],399130);var tv=(0,a.atom)(null,function(e,t,n){var r=n.urls.map(function(e){var t;try{t=new URL(e)}catch(e){return!1}return"0.0.0.0"===t.hostname||"localhost"===t.hostname?{ports:{type:"local",path:t.pathname,port:parseInt(t.port,10)}}:(window.open(e,"_blank"),!1)}).filter(Boolean);if(0!==r.length){var i=!0,a=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;t(P.insertWebviewIfNotOpenOrNoneExistAtom,u)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}});e.s(["openMultipleURLsAtom",()=>tv],374147);var tx=e.i(667183),ty=(0,a.atom)(null,function(e,t,n){if(!e(I.isMaximizedAtom)){var r=e(D.containerAtom),i=n.pageX,a=n.pageY,o=n.over,s=e((0,D.paneViewsFamily)(o)),l={x:i-r.x,y:a-r.y},u=(0,em.getDropDataForPoint)(l,e(s.rectAtom)).previewRect;t(P.isDraggingTabAtom,!0),t(p,{type:"dropPreview",rect:u})}}),tb=(0,a.atom)(null,function(e,t,n){if(!e(I.isMaximizedAtom)){var r=e(D.containerAtom),i=n.pageX,a=n.pageY,o=n.over,s=e((0,D.paneViewsFamily)(o)),l={x:i-r.x,y:a-r.y},u=(0,em.getDropDataForPoint)(l,e(s.rectAtom)).dropLocation;t(p,null),t(P.isDraggingTabAtom,!1);var c=e(ex.layoutAtom);if("newPaneGroup"===n.type){if("middle"===u){var d=(0,eh.findPaneById)(c,s.paneId);if(!d)return;t(td.insertPanesIntoGroupAtom,{panes:n.panes,paneGroupId:d.paneGroup.id,activate:!0,index:d.index+1});return}t(R.insertPaneGroupAtom,{panes:n.panes,placement:u,makeActive:!0,relativeTo:s.paneId});return}var f=o;if("middle"===u){if(f===n.paneId)return;var h=(0,eh.findPaneById)(c,s.paneId);if(!h)return;t(P.movePaneAtom,{paneId:n.paneId,toPaneGroupId:h.paneGroup.id,index:h.index+1});return}if(f===n.paneId){var m=(0,eh.findPaneById)(c,n.paneId);if(!m){var g=Error("Expected pane");throw t(ex.layoutBsodArgsAtom,{error:g,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/expectedPane"}),g}if(m.floating)throw Error("Expected paneGroup");var x=m.paneGroup.panes.find(function(e){return e!==n.paneId});if(!x)return;f=x}var y=(0,W.produce)(c,function(e){try{(0,tx.removePane)(e,n.paneId),(0,eN.insertPaneGroup)(e,{id:(0,eD.v4)(),panes:[n.paneId],relativeTo:f,placement:u}),t(es.commitPaneAtom,n.paneId)}catch(e){throw t(ex.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/updatedLayout"}),e}});t(E.calculateLayoutAtom,y)}});function tw(e){var t=(0,ep.default)(function(){return(0,a.atom)(function(t){return!!t(A.isInPopupAtom)||!!t(I.isMaximizedAtom)&&t(es.activePaneIdAtom)===e})},[e]);return(0,ep.default)(function(){return(0,a.atom)(function(n){if(n(t))return n(I.maximizedPaneRectAtom);var r=n((0,D.paneViewsFamily)(e));return n(r.rectAtom)})},[e,t])}function t_(e){var t=tw(e);return(0,ep.default)(function(){return(0,a.atom)(function(e){var n=e(t),r=e(D.containerAtom);return{x:Math.round(r.x+n.x),y:Math.round(r.y+n.y)}})},[t])}function tk(e){return(0,ep.default)(function(){return(0,a.atom)(function(t){var n=t(ez);return n&&e===t(eW)?n:null})},[e])}function tS(e){var t=tk(e);return(0,ep.default)(function(){return(0,o.selectAtom)(t,function(e){var t;return null!=(t=null==e?void 0:e.movedAtAll)&&t})},[t])}function tC(e){var t=tk(e);return(0,ep.default)(function(){return(0,a.atom)(function(n){var r,i,a;return!!n(t)||!!(null==(a=n(eU))||null==(i=a.panes)||null==(r=i.get(e))?void 0:r.dropState)})},[t,e])}function tj(e){var t=tw(e),n=tT(e),r=tN(e);return(0,ep.default)(function(){return(0,a.atom)(function(e){var i=e(r);return(0,eA._)((0,M._)({},e(t)),{scale:e(n),opacity:+!i})})},[t,n,r])}function tT(e){var t=tk(e);return(0,ep.default)(function(){return(0,o.selectAtom)(t,function(e){var t;return null!=(t=null==e?void 0:e.scale)?t:1})},[t])}function tE(e){var t=tk(e);return(0,ep.default)(function(){return(0,a.atom)(function(n){var r,i,a,o,s,l=n(t);if(l)return null!=(o=l.transformOriginX)?o:"0px";var u=null==(a=n(eU))||null==(i=a.panes)||null==(r=i.get(e))?void 0:r.dropState;return null!=(s=null==u?void 0:u.transformOrginX)?s:"0x"})},[t,e])}function tR(e){return(0,ep.default)(function(){return(0,a.atom)(function(t){var n,r,i=t(eU);return null!=(r=null==i||null==(n=i.panes)?void 0:n.get(e))&&r})},[e])}function tI(e){return(0,ep.default)(function(){return(0,a.atom)(function(t){return t(I.maximizedPaneIdAtom)===e})},[e])}function tA(e){return(0,ep.default)(function(){return(0,a.atom)(function(t){var n,r,i,a=t((0,D.paneViewsFamily)(e));if(a.isHidden)return u.zIndexLevels.hiddenPane;var o=e===t(es.activePaneIdAtom);return t(I.maximizedPaneIdAtom)===e?u.zIndexLevels.maximizedPane:e===t(eW)||(null==(i=t(eU))||null==(r=i.panes)||null==(n=r.get(e))?void 0:n.dropState)?u.zIndexLevels.draggingPane:"floating"===a.type?o?u.zIndexLevels.floatingPaneActive:u.zIndexLevels.floatingPane:o?u.zIndexLevels.tiledPaneActive:u.zIndexLevels.tiledPane})},[e])}function tP(e){return(0,ep.default)(function(){return(0,a.atom)(function(t){return t(es.activePaneIdAtom)===e})},[e])}function tD(e){return(0,ep.default)(function(){return(0,a.atom)(function(t){return t(t((0,D.paneViewsFamily)(e)).dataAtom)})},[e])}function tO(e){var t=tD(e);return(0,ep.default)(function(){return(0,o.selectAtom)(t,function(e){return e.type})},[t])}function tN(e){return(0,ep.default)(function(){return(0,a.atom)(function(t){return!!t(N.isAgentCenteredAtom)||t((0,D.paneViewsFamily)(e)).isHidden})},[e])}function tM(e){return(0,ep.default)(function(){return(0,o.selectAtom)((0,D.paneViewsFamily)(e),function(e){return"floating"===e.type})},[e])}function tL(e){return(0,ep.default)(function(){return(0,a.atom)(function(t){var n,r=null==(n=(0,eh.findPaneById)(t(ex.layoutAtom),e))?void 0:n.paneGroup;return!!r&&r.id===t(eH.modalPaneGroupIdAtom)})},[e])}function tB(e){return(0,ep.default)(function(){return(0,a.atom)(function(t){if((null==(n=t(ex.layoutAtom).tiling)?void 0:n.type)!=="paneGroup")return!1;var n,r,i=null==(r=(0,eh.findPaneById)(t(ex.layoutAtom),e))?void 0:r.paneGroup;return!!i&&1===i.panes.length})},[e])}function tV(e){return(0,ep.default)(function(){return(0,o.selectAtom)((0,D.paneViewsFamily)(e),function(e){return e.isCommitted})},[e])}function tF(e){var t=tM(e),n=tk(e);return(0,ep.default)(function(){return(0,a.atom)(function(e){return e(I.isMaximizedAtom)?null:e(n)?"dragging":e(t)?"floating":"tiled"})},[t,n])}e.s(["paneDragAtom",()=>ty,"paneDropAtom",()=>tb],558),e.s(["useIsOnlyPane",()=>tB,"usePaneBorderAtom",()=>tF,"usePaneDataAtom",()=>tD,"usePaneHasMovedWhileDraggingAtom",()=>tS,"usePaneIsActiveAtom",()=>tP,"usePaneIsBeingDraggedAtom",()=>tC,"usePaneIsCommitedAtom",()=>tV,"usePaneIsFloatingAtom",()=>tM,"usePaneIsHiddenAtom",()=>tN,"usePaneIsMaximizedAtom",()=>tI,"usePaneIsModalAtom",()=>tL,"usePanePropertiesAtom",()=>tj,"usePaneRectAtom",()=>tw,"usePaneScaleAtom",()=>tT,"usePaneTransformOriginXAtom",()=>tE,"usePaneTransitionEnabledAtom",()=>tR,"usePaneTypeAtom",()=>tO,"usePaneViewportInsetAtom",()=>t_,"usePaneZIndexAtom",()=>tA],267782);var tU=e.i(80725),tG=e.i(138841),t$=e.i(69838),tH=(0,a.atom)(null),tz=(0,a.atom)(function(e){var t=e(tH);if(!t)return null;if("sidebar"===t.target)return{target:"sidebar"};var n=(0,eh.findPaneById)(e(ex.layoutAtom),t.paneId);if(!n)return null;var r=n.paneGroup;return{target:"pane",paneGroupId:r.id,activeIndex:r.activeIndex,panes:r.panes.map(function(t){var n=e((0,D.paneViewsFamily)(t));return[n.paneId,e(n.dataAtom)]})}}),tW=(0,a.atom)(function(e){var t=e(tz);if(!t)return null;if("sidebar"===t.target)return{target:"sidebar"};var n=t.paneGroupId,r=t.activeIndex;return{target:"pane",paneId:t.panes[r][0],paneGroupId:n}}),tq=(0,a.atom)(function(e){var t=e(tH);if(!t||"sidebar"===t.target)return null;if(e(I.maximizedPaneIdAtom)===t.paneId)return e(I.maximizedPaneRectAtom);var n=e((0,D.paneViewsFamily)(t.paneId)),r=e(n.rectAtom),i=e(D.tabsHeaderHeightAtom);return{x:Math.round(r.x),y:Math.round(r.y-i),width:Math.round(r.width),height:Math.round(r.height+i)}}),tK=(0,a.atom)(null,function(e,t,n){var r=e(es.activePaneIdAtom),i=null!=n?n:r;if(i){t(tH,{target:"pane",paneId:i}),i!==r&&t(es.activatePaneAtom,i);return}var a=(0,eh.findCornerPaneGroup)(e(ex.layoutAtom),"topLeft"),o=a?a.paneGroup.panes[a.paneGroup.activeIndex]:null;if(o)return void t(tH,{target:"pane",paneId:o})}),tY=(0,a.atom)(null,function(e,t){var n=e(tH);n&&(t(tH,null),"sidebar"!==n.target&&t(t$.revealPaneAtom,{paneId:n.paneId,activate:!0}))}),tQ=(0,a.atom)(null,function(e,t){if(e(tz))return void t(tY);var n=e(es.activePaneIdAtom);if(n)return void t(tK,n);var r=(0,eh.findCornerPaneGroup)(e(ex.layoutAtom),"topLeft"),i=r?r.paneGroup.panes[r.paneGroup.activeIndex]:null;if(i)return void t(tK,i)}),tX=(0,a.atom)(function(e){return null!==e(tH)}),tZ=(0,a.atom)(null,function(e,t){t(tH,null)}),tJ=(0,a.atom)(null,function(e,t,n){var r=e(es.activePaneIdAtom);if(!(!r||e(I.maximizedPaneIdAtom))){var i=new Map(e(D.paneViewsAtom).filter(function(e){return!e.isHidden}).map(function(t){return[t.paneId,e(t.rectAtom)]})),a=(0,tU.findNeighbor)({relativeTo:r,rects:i,direction:n});a&&(t(es.activePaneIdAtom,a),e(tH)&&t(tH,{target:"pane",paneId:a}))}}),t0=(0,a.atom)(null,function(e,t,n){var r=e(tz);null===r||"sidebar"!==r.target&&t(E.calculateLayoutAtom,(0,W.produce)(e(ex.layoutAtom),function(e){(0,tG.moveTile)(e,{paneGroupId:r.paneGroupId,direction:n.direction})}))});e.s(["cancelQuickJumpAtom",()=>tZ,"isQuickJumpActiveAtom",()=>tX,"moveFocusAtom",()=>tJ,"movePaneGroupAtom",()=>t0,"quickJumpFocusRectAtom",()=>tq,"quickJumpMenuStateAtom",()=>tW,"quickJumpToAtom",()=>tY,"toggleQuickJumpAtom",()=>tQ],291493);var t1={width:120,height:120},t2=(0,a.atom)(null),t3=(0,a.atom)(null,function(e,t,n){var r=e(ex.layoutAtom);if("end"===n.type){t(t2,null),t(E.calculateLayoutAtom,r);return}if("update"===n.type){var i=e(t2);if(!i){var a=Error("Expected floatingResizeState");throw t(ex.layoutBsodArgsAtom,{error:a,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),a}var o=e(D.tabsHeaderHeightAtom),s=(0,em.resizeRect)(i.rectStart,{delta:n.moveDelta,edge:i.edge,minSize:t1}),l=i.paneId,u=(0,W.produce)(r,function(e){var n=e.floating.find(function(e){return e.panes.includes(l)});if(!n){var r=Error("Expected floating");throw t(ex.layoutBsodArgsAtom,{error:r,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),r}var i=n.rect;i.x=s.x,i.y=s.y-o,i.width=s.width,i.height=s.height+o});t(E.calculateLayoutAtom,u);return}var c=e(D.paneViewsAtom).find(function(e){return e.paneId===n.paneId});if(!c){var d=Error("Expected pane");throw t(ex.layoutBsodArgsAtom,{error:d,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),d}t(es.activatePaneAtom,n.paneId),t(t2,{paneId:n.paneId,edge:n.edge,rectStart:e(c.rectAtom)})});e.s(["resizeFloatingAtom",()=>t3,"resizeFloatingStateAtom",()=>t2],815233);var t5=e.i(633696),t4=(0,a.atom)(null,function(e,t,n){t(e$,{headers:new Map(e(D.headerIdsAtom).map(function(e){return[e,{snappiness:400}]})),panes:new Map(e(D.paneIdsAtom).map(function(e){return[e,{snappiness:400}]}))}),t(L.sidebarStateAtom,function(e){return(0,W.produce)(e,function(e){e.activeContent===n&&e.isOpen?e.isOpen=!1:(e.isOpen=!0,e.activeContent=n,0===e.width&&(e.width=t5.DEFAULT_SIDEBAR_WIDTH))})}),t(E.calculateLayoutAtom,e(ex.layoutAtom))}),t8=(0,a.atom)(null,function(e,t){t(e$,{headers:new Map(e(D.headerIdsAtom).map(function(e){return[e,{snappiness:400}]})),panes:new Map(e(D.paneIdsAtom).map(function(e){return[e,{snappiness:400}]}))}),t(L.sidebarStateAtom,function(e){return(0,W.produce)(e,function(e){e.isOpen=!1})}),t(E.calculateLayoutAtom,e(ex.layoutAtom))}),t6=(0,a.atom)(null,function(e,t){var n=e(L.sidebarStateAtom);n.isOpen?t(t8):t(t4,n.activeContent)});e.s(["closeSidebarAtom",()=>t8,"toggleSidebarAtom",()=>t6,"toggleSidebarContentAtom",()=>t4],674196);var t7=(0,a.atom)(null),t9=(0,a.atom)(null,function(e,t){var n=e(L.sidebarStateAtom);t(t7,{startWidth:n.width,startIsOpen:n.isOpen})}),ne=(0,a.atom)(function(e){return!!e(t7)}),nt=(0,a.atom)(null,function(e,t,n){var r=e(t7);if(r){var i=n*("agent-filetree"===e(N.agentFiltreeOrderAtom)?-1:1),a=e(D.containerAtom).width*t5.MAX_WIDTH_PERCENTAGE,o=Math.min(Math.max(r.startWidth+i,0),a),s=i>0;0===o&&s?o=t5.MIN_WIDTH:!s&&o<t5.MIN_WIDTH&&t5.MIN_WIDTH-o>10&&(o=0),t(L.sidebarStateAtom,function(e){return(0,W.produce)(e,function(e){e.width=o,0===o?e.isOpen=!1:e.isOpen=r.startIsOpen})}),r.startIsOpen&&t(E.calculateLayoutAtom,e(ex.layoutAtom))}}),nn=(0,a.atom)(null,function(e,t){var n=e(L.sidebarStateAtom),r=e(t7);n.isOpen||t(L.sidebarStateAtom,function(e){return(0,W.produce)(e,function(e){var t;e.width=null!=(t=null==r?void 0:r.startWidth)?t:t5.MIN_WIDTH})}),t(t7,null)});function nr(){return{start:(0,l.useSet)(t9),update:(0,l.useSet)(nt),end:(0,l.useSet)(nn)}}e.s(["isResizingSidebarAtom",()=>ne,"useSidebarResize",()=>nr],1834);var ni=(0,a.atom)(null,function(e,t,n){var r=e(ex.layoutAtom),i=e((0,D.paneViewsFamily)(n)),a=i.rectAtom,o=i.type,s=e(a),l=(0,eh.findPaneById)(r,n);if(!l){var u=Error("Expected pane");throw t(ex.layoutBsodArgsAtom,{error:u,tags:{layoutstate:!0},origin:"Layout: state/toggleFloating"}),u}if("tile"===o)return void t(E.calculateLayoutAtom,(0,W.produce)(r,function(e){(0,eM.movePaneGroupToFloating)(e,{paneGroupPath:l.paneGroupPath,rect:{x:s.x-16,y:s.y-16,width:s.width,height:s.height}})}));l.paneGroup.id===e(eH.modalPaneGroupIdAtom)&&t(eH.modalPaneGroupIdAtom,null);var c=e(D.paneViewsAtom).filter(function(e){return"tile"===e.type&&!e.isHidden}),d=e(D.tabsHeaderHeightAtom),f={x:s.x+s.width/2,y:s.y+s.height/2},p=c.find(function(t){var n=e(t.rectAtom);return(0,ew.isInside)(f,{x:n.x,y:n.y-d,width:n.width,height:n.height+d})});if(!p)return void t(E.calculateLayoutAtom,(0,W.produce)(r,function(e){(0,eM.movePaneGroupToTiling)(e,{paneGroupPath:l.paneGroupPath,to:["tiling"],placement:"leftOf"})}));t(E.calculateLayoutAtom,(0,W.produce)(r,function(e){var t=(0,eh.findPaneById)(e,p.paneId);l.paneGroup.panes.forEach(function(n){(0,eM.movePane)(e,{paneId:n,paneGroupPath:(null==t?void 0:t.paneGroupPath)||["tiling"],activate:!1})})}));var h=l.paneGroup.panes[l.paneGroup.activeIndex];t(P.selectTabAtom,h)});e.s(["toggleFloatingAtom",()=>ni],460176);var na=(0,a.atom)(null),no=(0,a.atom)(function(e){var t=e(na);return t&&e(D.paneViewsAtom).find(function(n){var r=e(n.dataAtom);return"videoPlayer"===r.type&&r.data.embedUrl===(null==t?void 0:t.embedUrl)})||null}),ns=(0,a.atom)(function(e){var t=e(no);return t&&!t.isHidden?t:null}),nl=(0,a.atom)(null,function(e,t,n){t(na,n);var r,i="videoPlayer";n?t(ed,{type:i,data:{title:null!=(r=n.title)?r:"Tutorial",embedUrl:n.embedUrl}},{commit:!0,location:"center"}):t(ef,i)}),nu=(0,a.atom)(null,function(e,t){var n=e(no);if(null==n?void 0:n.isHidden){t(P.selectTabAtom,n.paneId),t(es.commitPaneAtom,n.paneId);return}var r=e(na);r&&t(nl,r)}),nc=(0,a.atom)(function(e){return e(D.paneViewsAtom).find(function(t){return"tutorial"===e(t.dataAtom).type})||null}),nd=(0,a.atom)(null,function(e,t){var n=e(nc);(null==n?void 0:n.isHidden)?t(P.selectTabAtom,n.paneId):t(R.insertPaneGroupAtom,{panes:[{type:"tutorial"}],placement:"leftOf",percent:25,relativeTo:["tiling"],makeActive:!1,commit:!0})});e.s(["showTutorialPaneAtom",()=>nd,"showTutorialVideoAtom",()=>nu,"toggleTutorialVideoAtom",()=>nl,"tutorialVideoAtom",()=>na,"visibleTutorialVideoPaneAtom",()=>ns],701583);var nf=(0,a.atom)(null),np=(0,o.selectAtom)(nf,Boolean),nh=O.MIN_SIDEBAR_WIDTH/2,nm=(0,a.atom)(null,function(e,t,n){switch(n.type){case"start":var r=e(N.agentStateAtom);if("sidebar"!==r.type)return;t(nf,{startWidth:r.width});break;case"update":var i=e(nf);if(!i)return;var a=e(N.agentFiltreeOrderAtom),o=i.startWidth+n.moveDelta.x*("filetree-agent"===a?-1:1),s=e(D.containerAtom).width*O.MAX_WIDTH_PERCENTAGE;t(N.agentStateAtom,function(e){return(0,W.produce)(e,function(e){"sidebar"===e.type&&(o<O.MIN_SIDEBAR_WIDTH?e.width=O.MIN_SIDEBAR_WIDTH-o>nh?O.COLLAPSED_WIDTH:O.MIN_SIDEBAR_WIDTH:o>s?e.width=s:e.width=o)})}),t(E.calculateLayoutAtom,e(ex.layoutAtom));break;case"end":var l=e(N.agentStateAtom);if("sidebar"!==l.type)return;var u=e(nf);if(t(nf,null),l.width>O.COLLAPSED_WIDTH&&l.width<O.MIN_SIDEBAR_WIDTH&&u){var c={width:l.width}.width>u.startWidth?{width:O.DEFAULT_AGENT_WIDTH}:{width:O.MIN_SIDEBAR_WIDTH};t(ng,(0,M._)({type:"sidebar"},c))}}}),ng=(0,a.atom)(null,function(e,t,n){t(e$,{headers:new Map(e(D.headerIdsAtom).map(function(e){return[e,{snappiness:400}]})),panes:new Map(e(D.paneIdsAtom).map(function(e){return[e,{snappiness:400}]}))}),t(N.agentStateAtom,n),t(E.calculateLayoutAtom,e(ex.layoutAtom))}),nv=(0,a.atom)(null,function(e,t,n){t(ng,{type:"sidebar",width:n?O.DEFAULT_AGENT_WIDTH:O.COLLAPSED_WIDTH})}),nx=(0,o.selectAtom)(N.agentStateAtom,function(e){return"sidebar"===e.type&&e.width===O.COLLAPSED_WIDTH}),ny=(0,a.atom)(null,function(e,t,n){t(ng,"centered"===n?{type:n}:{type:"sidebar",width:O.DEFAULT_AGENT_WIDTH})});e.s(["isAgentCollapsedAtom",()=>nx,"isResizingAgentSidebarAtom",()=>np,"resizeAgentSidebarAtom",()=>nm,"toggleAgentSidebarAtom",()=>nv,"transtionToAgentSidebarAtom",()=>ny],544599);var nb=(0,a.atom)(function(e){return!!(e(ez)||e(t2)||e(ey)||e(P.isDraggingTabAtom)||e(ne)||e(np))});e.s(["disablePaneContentInteractionsAtom",()=>nb],768828);var nw=(0,a.atom)(null,function(e,t,n){t(N.agentPositionAtom,n),t(E.calculateLayoutAtom,e(ex.layoutAtom))});e.s(["setAgentPositionAtom",()=>nw],623234);var n_=(0,a.atom)(null,function(e,t,n){setTimeout(function(){t(nk,!1)},400),t(ny,n)}),nk=(0,a.atom)(!1);e.s(["isAgentPresentationTransitionInProgressAtom",()=>nk,"transitionToAgentPresentationAtom",()=>n_],941798);var nS=(0,a.atom)(null,function(e,t,n){var r=e(ex.layoutAtom),i=e(es.activePaneIdAtom)===n.to,a=(0,W.produce)(r,function(e){try{(0,tx.removePane)(e,n.from);var r=(0,eh.findPaneById)(e,n.to);r&&((0,eN.insertPanes)(e,{paneIds:[n.from],activate:i,paneGroupId:r.paneGroup.id,index:r.index}),(0,tx.removePane)(e,n.to))}catch(e){throw t(ex.layoutBsodArgsAtom,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});t(E.calculateLayoutAtom,a)});e.s(["moveAndReplacePaneAtom",()=>nS],808153)},979931,304969,886753,122129,596608,834903,67647,14146,696896,e=>{"use strict";var t=e.i(389959),n=e.i(541793),r=e.i(814563),i=e.i(223808);e.i(242933);var a=e.i(424360);e.i(925218);var o=e.i(372988);e.i(290625);var s=e.i(949874),l=e.i(153626),u=e.i(125674),c=e.i(984008),d=e.i(961603),f=e.i(71998),p=e.i(471576),h=e.i(142903),m=e.i(445171),g=e.i(438166),x=e.i(392096),y=e.i(706794),b=e.i(910447),w=e.i(917592),_=e.i(26127),k=e.i(256978),S=e.i(399130),C=e.i(374147),j=e.i(113606),T=e.i(558),E=e.i(705648),R=e.i(483192),I=e.i(267782),A=e.i(502108),P=e.i(291493),D=e.i(621624),O=e.i(815233),N=e.i(535573),M=e.i(69838),L=e.i(634705),B=e.i(674196),V=e.i(1834),F=e.i(176412),U=e.i(104671),G=e.i(804375),$=e.i(218363),H=e.i(906910),z=e.i(78777),W=e.i(460176),q=e.i(701583),K=e.i(838312),Y=e.i(768828),Q=e.i(844561),X=e.i(134965),Z=e.i(881728),J=e.i(554752),ee=e.i(623234),et=e.i(544599),en=e.i(290352),er=e.i(941798),ei=e.i(509787),ea=e.i(805614),eo=e.i(808153),es=e.i(303700),el=e.i(745736),eu=e.i(98816),ec=e.i(821472);e.i(282890);var ed=e.i(66718),ef=(0,n.atom)(function(e){if(e(P.isQuickJumpActiveAtom)||e(ec.commandBarIsOpenAtom))return null;var t=e(c.activePaneIdAtom);if(!t)return null;var n=e((0,X.paneViewsFamily)(t)),r=e(n.dataAtom),i=n.paneId+r.type;return(0,ed.isFilePane)(r)&&(i+=r.data.path),i});function ep(e){var n=(0,H.useObservableValue)(ef),r=(0,H.useGet)(c.activePaneIdAtom),i=(0,eu.default)(e);(0,t.useEffect)(function(){var e=function(e){e&&(null!==t&&clearTimeout(t),t=setTimeout(function(){var e=r();e&&i.current(e)}))},t=null;e(n.current);var a=n.subscribe(e);return function(){null!==t&&clearTimeout(t),a()}},[n,i,r])}e.s(["usePaneFocusTrigger",()=>ep],304969);var eh=e.i(323049),em=e.i(721281),eg=e.i(276385),ev=e.i(992785),ex=e.i(131141),ey=e.i(878420),eb=e.i(64386),ew=e.i(116235);function e_(e){return(0,eg.jsxs)(ew.default,(0,eb._)((0,ey._)({},e),{children:[(0,eg.jsx)("path",{d:"M15.056 6.25c.467 0 .882 0 1.207.035.319.036.717.12 1.024.428.307.307.392.705.428 1.024.036.325.035.74.035 1.207v6.667l-.003.474c-.003.15-.01.289-.023.412-.027.241-.095.587-.368.86-.272.272-.618.34-.859.367-.123.013-.263.02-.412.023l-.474.003H8.39c-.33 0-.64.001-.886-.026-.241-.027-.587-.095-.86-.368-.272-.272-.34-.618-.367-.859a4.719 4.719 0 0 1-.023-.412l-.003-.474V8.39c0-.329-.001-.64.026-.886.027-.241.095-.587.368-.86.272-.272.618-.34.859-.367.246-.027.557-.026.886-.026h6.667Z"}),(0,eg.jsx)("path",{fillRule:"evenodd",d:"M16 2.25c1.995 0 3.542.231 4.53 1.22.989.988 1.22 2.535 1.22 4.53v9c0 1.541-.247 2.808-1.095 3.655-.847.848-2.114 1.095-3.655 1.095H7c-1.542 0-2.808-.247-3.655-1.095C2.497 19.808 2.25 18.541 2.25 17V7c0-1.542.247-2.808 1.095-3.655C4.192 2.497 5.458 2.25 7 2.25h9Zm-9 1.5c-1.458 0-2.192.253-2.595.655C4.003 4.808 3.75 5.542 3.75 7v10c0 1.459.253 2.192.655 2.595.403.402 1.137.655 2.595.655h10c1.459 0 2.192-.253 2.595-.655.402-.403.655-1.136.655-2.595V8c0-2.005-.269-2.958-.78-3.47-.512-.511-1.465-.78-3.47-.78H7Z",clipRule:"evenodd"})]}))}function ek(e){return(0,eg.jsx)(ew.default,(0,eb._)((0,ey._)({},e),{children:(0,eg.jsx)("path",{fillRule:"evenodd",d:"M16 2.25c1.995 0 3.542.231 4.53 1.22.989.988 1.22 2.535 1.22 4.53v9c0 1.541-.247 2.808-1.095 3.655-.847.848-2.114 1.095-3.655 1.095H7c-1.542 0-2.808-.247-3.655-1.095C2.497 19.808 2.25 18.541 2.25 17V7c0-1.542.247-2.808 1.095-3.655C4.192 2.497 5.458 2.25 7 2.25h9Zm-9 1.5c-1.458 0-2.192.253-2.595.655C4.003 4.808 3.75 5.542 3.75 7v3.75h16.5V8c0-2.005-.269-2.958-.78-3.47-.512-.511-1.465-.78-3.47-.78H7Z",clipRule:"evenodd"})}))}function eS(e){return(0,eg.jsx)(ew.default,(0,eb._)((0,ey._)({},e),{children:(0,eg.jsx)("path",{fillRule:"evenodd",d:"M13.613 2.25c1.518.002 2.757.019 3.748.116 1.312.128 2.376.41 3.119 1.153.743.743 1.025 1.808 1.153 3.12.098.991.114 2.23.117 3.748v3.226c-.003 1.518-.02 2.757-.117 3.748-.128 1.312-.41 2.376-1.153 3.12-.743.742-1.807 1.024-3.12 1.152-.99.098-2.23.114-3.747.117h-3.226c-1.518-.003-2.757-.02-3.748-.117-1.312-.128-2.377-.41-3.12-1.153-.743-.743-1.025-1.807-1.153-3.119-.097-.991-.114-2.23-.116-3.748v-3.226c.002-1.518.019-2.757.116-3.748.128-1.312.41-2.377 1.153-3.12.743-.743 1.808-1.025 3.12-1.153.991-.097 2.23-.114 3.748-.116h3.226Zm-.864 18c1.937 0 3.373-.002 4.465-.109 1.238-.121 1.849-.365 2.205-.721.357-.357.6-.968.722-2.206.09-.92.106-2.087.109-3.592v-3.243c-.003-1.506-.019-2.672-.109-3.593-.121-1.238-.365-1.848-.722-2.205-.356-.357-.967-.6-2.205-.722-1.092-.107-2.528-.11-4.464-.11v16.5Z",clipRule:"evenodd"})}))}function eC(e){return(0,eg.jsx)(ew.default,(0,eb._)((0,ey._)({},e),{children:(0,eg.jsx)("path",{fillRule:"evenodd",d:"M16 2.25c1.995 0 3.542.231 4.53 1.22.989.988 1.22 2.535 1.22 4.53v9c0 1.541-.247 2.808-1.095 3.655-.847.848-2.114 1.095-3.655 1.095H7c-1.542 0-2.808-.247-3.655-1.095C2.497 19.808 2.25 18.541 2.25 17V7c0-1.542.247-2.808 1.095-3.655C4.192 2.497 5.458 2.25 7 2.25h9Zm-9 1.5c-1.458 0-2.192.253-2.595.655C4.003 4.808 3.75 5.542 3.75 7v10c0 1.459.253 2.192.655 2.595.403.402 1.137.655 2.595.655h4.25V3.75H7Z",clipRule:"evenodd"})}))}function ej(e){return(0,eg.jsx)(ew.default,(0,eb._)((0,ey._)({},e),{children:(0,eg.jsx)("path",{fillRule:"evenodd",d:"M16 2.25c1.995 0 3.542.231 4.53 1.22.989.988 1.22 2.535 1.22 4.53v9c0 1.541-.247 2.808-1.095 3.655-.847.848-2.114 1.095-3.655 1.095H7c-1.542 0-2.808-.247-3.655-1.095C2.497 19.808 2.25 18.541 2.25 17V7c0-1.542.247-2.808 1.095-3.655C4.192 2.497 5.458 2.25 7 2.25h9ZM3.75 17c0 1.459.253 2.192.655 2.595.403.402 1.137.655 2.595.655h10c1.459 0 2.192-.253 2.595-.655.402-.403.655-1.136.655-2.595v-4.75H3.75V17Z",clipRule:"evenodd"})}))}e.s(["default",()=>e_],886753),e.s(["default",()=>ek],122129),e.s(["default",()=>eS],596608),e.s(["default",()=>eC],834903),e.s(["default",()=>ej],67647);var eT=e.i(869226),eE=e.i(797121),eR=e.i(480028),eI=e.i(446530),eA=e.i(123850),eP=e.i(613355),eD=e.i(625484),eO=(0,n.atom)(null,function(e,t,n){if(null===n){t(f.dropPreviewAtom,null),t(R.dragAndDropStateAtom,function(e){return e?(0,ex.produce)(e,function(e){e.drop=null}):e});return}t(R.dragAndDropStateAtom,function(e){return e?(0,ex.produce)(e,function(e){!function(e,t){if("edge"===t.type||"emptyLayout"===t.type){e.drop={type:"split",relativeTo:["tiling"],placement:"edge"===t.type?t.position:"replace"};return}var n=t.paneId;if("middle"===t.position){e.drop={type:"insert",paneId:n};return}e.drop={type:"split",relativeTo:n,placement:t.position}}(e,n)}):e});var r=e(X.containerAtom),i=e(X.tabsHeaderHeightAtom),a=e(F.sidebarWidthAtom),o=e(d.gapAtom);if("pane"===n.type){var s=e((0,X.paneViewsFamily)(n.paneId)),l=e(s.rectAtom);t(f.dropPreviewAtom,{type:"dropPreview",rect:{x:l.x,y:l.y-i,width:l.width,height:l.height+i}});return}if("emptyLayout"===n.type)return void t(f.dropPreviewAtom,{type:"dropPreview",rect:function(e){var t=e.container,n=e.sidebarWidth,r=e.gap,i=e.location,a={x:n+r,y:0,width:t.width-n-2*r,height:t.height-r},o=a.x,s=a.y,l=a.width,u=a.height;switch(i){case"middle":return a;case"leftOf":return{x:o,y:s,width:l/2,height:u};case"rightOf":return{x:o+l/2,y:s,width:l/2,height:u};case"above":return{x:o,y:s,width:l,height:u/2};case"below":return{x:o,y:s+u/2,width:l,height:u/2}}}({container:r,sidebarWidth:a,location:n.position,gap:o})});var u=e($.layoutAtom).tiling,c=(0,eE.getSplitRect)(u,{container:r,sidebarWidth:a,position:n.position,gap:o});t(f.dropPreviewAtom,{type:"dropPreview",rect:c})}),eN=(0,eA.createCssVarTokens)(["opacity","width","height","transform","pointerEvents"]),eM=eN.cssVars,eL=eN.styleTokens,eB=(0,eI.cssRecord)({dropPoint:[eP.rcss.center,eP.rcss.top(0),eP.rcss.left(0),eP.rcss.position.absolute,{zIndex:eh.zIndexLevels.overlay,cursor:"grabbing",width:eL.width,height:eL.height,transform:eL.transform,opacity:"var(".concat(eM.opacity,", 0)"),pointerEvents:eL.pointerEvents,transition:"opacity 200ms ease-out 200ms","&:hover":{color:eR.tokens.accentPrimaryStronger}}]}),eV={above:(0,eg.jsx)(ej,{}),below:(0,eg.jsx)(ek,{}),leftOf:(0,eg.jsx)(eS,{}),rightOf:(0,eg.jsx)(eC,{}),middle:(0,eg.jsx)(e_,{})};function eF(e){var n=(0,t.useRef)(null),i=(0,t.useMemo)(function(){return(0,r.selectAtom)(R.dropPointsAtom,function(t){return null==t?void 0:t[e]})},[e]),a=(0,t.useMemo)(function(){return(0,r.selectAtom)(i,function(e){return e?(0,em._)({},eM.transform,"translate(".concat(e.rect.x,"px, ").concat(e.rect.y,"px)")):null},ev.default)},[i]);(0,eT.useStyleSet)(n,(0,H.useObservableValue)(a));var o=(0,t.useMemo)(function(){return(0,r.selectAtom)(i,function(e){var t;return e?(t={},(0,em._)(t,eM.width,e.rect.width+"px"),(0,em._)(t,eM.height,e.rect.height+"px"),t):null},ev.default)},[i]);(0,eT.useStyleSet)(n,(0,H.useObservableValue)(o));var s=(0,t.useMemo)(function(){return(0,r.selectAtom)(i,function(e){var t;return t={},(0,em._)(t,eM.opacity,(null==e?void 0:e.visible)?"1":"0"),(0,em._)(t,eM.pointerEvents,(null==e?void 0:e.visible)?"all":"none"),t},ev.default)},[i]);return(0,eT.useStyleSet)(n,(0,H.useObservableValue)(s)),n}function eU(){var e=eF("middle"),n=(0,H.useSet)(eO),i=(0,H.useGet)((0,t.useMemo)(function(){return(0,r.selectAtom)(R.dropPointsAtom,function(e){var t;return null!=(t=null==e?void 0:e.middle.paneId)?t:null})},[]));return(0,eg.jsx)(eD.View,{css:eB.dropPoint,innerRef:e,onMouseEnter:function(){var e=i(),t="middle";n(e?{type:"pane",position:t,paneId:e}:{type:"emptyLayout",position:t})},onMouseLeave:function(){return n(null)},children:(0,eg.jsx)(e_,{size:32})})}function eG(e){var n=e.position,r=eF(n),i=(0,H.useSet)(eO);return(0,eg.jsx)(eD.View,{css:eB.dropPoint,innerRef:r,onMouseEnter:function(){return i({type:"edge",position:n})},onMouseLeave:function(){return i(null)},children:(0,t.cloneElement)(eV[n],{size:32})})}var e$=(0,t.memo)(function(){return(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)(eG,{position:"above"}),(0,eg.jsx)(eG,{position:"below"}),(0,eg.jsx)(eG,{position:"leftOf"}),(0,eg.jsx)(eG,{position:"rightOf"}),(0,eg.jsx)(eU,{})]})});e.s(["DropPoints",()=>e$],14146);var eH=(0,n.atom)(null);function ez(){return(0,H.useSet)(eH)}function eW(e){return(0,H.useObservableValue)((0,t.useMemo)(function(){return(0,n.atom)(function(t){return t(eH)===e})},[e]))}function eq(){return(0,H.useValue)($.layoutBsodArgsAtom)}function eK(){return(0,H.useSet)(d.updateContainerAtom)}function eY(){return(0,H.useGet)(X.containerAtom)}function eQ(){return(0,H.useValue)(p.emptyLayoutRectAtom)}function eX(){return(0,H.useValue)($.layoutInitTypeAtom)}function eZ(){var e=(0,H.useSet)(L.saveLayoutStateAtom);return(0,u.default)(function(){return(0,i.default)(e,1e3)},[e])}function eJ(){return(0,H.useSet)(A.storePopupStateAtom)}function e0(){return(0,H.useSet)($.commitFileInWorkspaceAtom)}function e1(){return(0,H.useGet)($.uncommittedFilePaneIdAtom)}function e2(){return(0,H.useGet)($.uncommittedToolPaneIdAtom)}function e3(e){var t=(0,u.default)(function(){return(0,n.atom)(function(t){var n=t((0,X.paneViewsFamily)(e));return t(n.dataAtom)})},[e]);return(0,H.useValue)(t)}function e5(){var e=(0,H.useStore)();return(0,t.useCallback)(function(t){var n=e.get((0,X.paneViewsFamily)(t));return{pane:e.get(n.dataAtom),isCommitted:n.isCommitted}},[e])}function e4(){return(0,H.useValue)(X.paneIdsAtom)}function e8(){return(0,H.useValue)(X.headerIdsAtom)}function e6(){return(0,H.useValue)(X.handleIdsAtom)}function e7(){return(0,H.useValue)(P.quickJumpMenuStateAtom)}function e9(){return(0,H.useValue)(P.quickJumpFocusRectAtom)}function te(){return(0,H.useSet)(P.quickJumpToAtom)}function tt(){return(0,H.useSet)(P.toggleQuickJumpAtom)}function tn(){return(0,H.useValue)(P.isQuickJumpActiveAtom)}function tr(){return(0,H.useSet)(P.cancelQuickJumpAtom)}function ti(){return(0,H.useSet)(P.moveFocusAtom)}function ta(){return(0,H.useSet)(P.movePaneGroupAtom)}function to(){return(0,H.useSet)(N.resizeTilingAtom)}function ts(e){var n=e.isOver,r=(0,H.useSet)(f.dropPreviewAtom);return(0,t.useEffect)(function(){n||r(null)},[n,r]),{drag:(0,H.useSet)(p.emptyLayoutDragAtom),drop:(0,H.useSet)(p.emptyLayoutDropAtom)}}function tl(){return(0,H.useValue)(c.activeFileAtom)}function tu(e){var t=e.paneId,r=(0,u.default)(function(){return(0,n.atom)(function(e){return e(c.activePaneIdAtom)===t})},[t]);return(0,H.useValue)(r)}function tc(){return(0,H.useValue)(c.activePaneIdAtom)}function td(){var e=(0,u.default)(function(){return(0,n.atom)(function(e){var t=e(c.activePaneIdAtom);if(!t)return null;var n=e($.layoutAtom),r=(0,s.findPaneById)(n,t);return r?r.paneGroup.id:null})},[]);return(0,H.useValue)(e)}function tf(){return(0,H.useValue)(_.isMaximizedAtom)}function tp(){return(0,H.useGet)(_.isMaximizedAtom)}function th(){return(0,H.useValue)(A.isInPopupAtom)}function tm(){var e=(0,H.useSet)(c.activatePaneAtom),t=(0,H.useSet)(c.commitPaneAtom);return(0,u.default)(function(){return function(n,r){(null==r?void 0:r.commit)&&t(n),e(n)}},[t,e])}function tg(){return(0,H.useSet)(K.updatePaneAtom)}function tv(){return(0,H.useSet)(c.commitPaneAtom)}function tx(){return(0,H.useSet)(M.revealPaneAtom)}function ty(){return(0,H.useSet)(b.insertPaneAtom)}function tb(){return(0,H.useSet)(m.insertFloatingPaneIfNotExistsAtom)}function tw(){return(0,H.useSet)(j.openToolAtom)}function t_(){return(0,H.useSet)(D.removePaneAtom)}function tk(){return(0,H.useSet)(eo.moveAndReplacePaneAtom)}function tS(){return(0,H.useSet)(D.removeOtherPanesInGroupAtom)}function tC(){return(0,H.useSet)(D.removePanesToRightInGroupAtom)}function tj(e){var n=e.isOver,r=(0,H.useSet)(f.dropPreviewAtom);return(0,t.useEffect)(function(){n||r(null)},[n,r]),{drag:(0,H.useSet)(T.paneDragAtom),drop:(0,H.useSet)(T.paneDropAtom)}}e.s(["useIsPaneHovered",()=>eW,"useSetHoveredPane",()=>ez],696896);var tT=(0,n.atom)(null,function(e,t){t(z.isDraggingTabAtom,!1)});function tE(){return(0,H.useSet)(tT)}function tR(e){var t,r=e.paneGroupId,i=(0,H.useSet)(R.paneGroupDragStartAtom),a=(0,H.useSet)(R.paneGroupDragUpdateAtom),o=(0,H.useSet)(R.paneGroupDragEndAtom),s=(0,u.default)(function(){return{start:function(e){i({paneGroupId:r,mouse:e.mouse})},update:function(e){a(e)},end:function(e){o(e)}}},[r,i,a,o]);return{isDragging:(t=(0,u.default)(function(){return(0,n.atom)(function(e){var t;return r===(null==(t=e(R.dragAndDropStateAtom))?void 0:t.paneGroupId)})},[r]),(0,H.useValue)(t)),dnd:s}}function tI(){return(0,H.useSet)(k.openFileAtom)}function tA(){return(0,H.useSet)(S.openMultipleFilesAtom)}function tP(){return(0,H.useSet)(C.openMultipleURLsAtom)}function tD(){return(0,H.useSet)(W.toggleFloatingAtom)}function tO(){return(0,H.useSet)(O.resizeFloatingAtom)}function tN(){return{maximizePane:(0,H.useSet)(_.maximizePaneAtom),maximizePaneGroup:(0,H.useSet)(_.maximizePaneGroupAtom),restoreMaximizedPaneGroup:(0,H.useSet)(_.restoreMaximizedPaneGroupAtom),toggleMaximizePane:(0,H.useSet)(_.toggleMaximizePaneAtom),toggleMaximizedPaneGroup:(0,H.useSet)(_.toggleMaximizePaneGroupAtom)}}function tM(){return(0,H.useSet)(z.selectTabAtom)}function tL(){return(0,H.useValue)(z.isDraggingTabAtom)}function tB(){return(0,H.useSet)(z.isDraggingTabAtom)}function tV(){return(0,H.useSet)(z.moveOrDeleteFileAtom)}function tF(e){var t=(0,z.usePaneGroupAtoms)(e),n=t.activeIndexAtom,r=t.pathAtom,i=t.panesAtom;return{activeIndex:(0,H.useObservableValue)(n),path:(0,H.useObservableValue)(r),panes:(0,H.useObservableValue)(i),activeTabPaneId:(0,H.useObservableValue)((0,z.useActiveTabPaneIdAtom)(e))}}function tU(){return(0,H.useSet)(z.movePaneAtom)}function tG(){return(0,H.useSet)(z.relativeMovePaneAtom)}function t$(){return(0,H.useSet)(b.insertPanesIntoGroupAtom)}function tH(){return(0,H.useSet)(z.insertNewPaneAfterActivePaneAtom)}function tz(){return(0,H.useSet)(z.removeActivePaneAtom)}function tW(){return(0,H.useSet)(z.activateAdjacentPaneAtom)}function tq(){return(0,H.useSet)((0,z.useReopenClosedPaneAtom)())}function tK(){return(0,H.useSet)(z.changePaneAtom)}function tY(){return(0,H.useSet)(z.replacePaneAtom)}function tQ(e){var t=e.paneGroupId;return(0,H.useValue)((0,E.usePaneGroupCountAtom)({paneGroupId:t}))}function tX(e){var t=e.paneId;return(0,H.useValue)((0,E.usePaneGroupIndexAtom)(t))}function tZ(){return(0,H.useValue)((0,E.usePaneGroupsAtom)())}function tJ(){return(0,H.useSet)(w.insertPaneToEdgeAtom)}function t0(){return(0,H.useSet)(G.removePaneGroupAtom)}function t1(){return(0,H.useSet)(G.splitPaneAtom)}function t2(){return(0,H.useSet)(q.toggleTutorialVideoAtom)}function t3(){var e=(0,H.useValue)(q.tutorialVideoAtom),t=(0,H.useValue)(q.visibleTutorialVideoPaneAtom),n=(0,H.useSet)(q.showTutorialVideoAtom);return t||!e?null:n}function t5(){return(0,H.useSet)(q.showTutorialPaneAtom)}function t4(){return(0,H.useValue)($.containerElementIsInitializedAtom)}function t8(){return(0,H.useGet)($.layoutAtom)}function t6(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,t.useRef)(e),r=(0,H.useSet)(G.setSplitPercentAtom),i=t8();return(0,t.useCallback)(function(t){t.snapped?r({leftPath:t.leftPath,percent:n.current}):Promise.resolve(i()).then(function(i){var a=(0,s.findNodeByPath)(i,t.leftPath);if(!a||!(0,l.isTiledNode)(a))throw Error("Expected split or paneGroup");n.current=a.percent,r({leftPath:t.leftPath,percent:e})})},[e,r,i])}function t7(){return(0,H.useSet)($.animationsEnabledAtom)}function t9(){return(0,H.useSet)($.isTouchDeviceLayoutAtom)}function ne(e){var t=(0,I.usePaneRectAtom)(e),r=(0,Q.useSizeAtom)(t),i=(0,Q.usePositionAtom)(t),a=(0,I.usePaneScaleAtom)(e),o=(0,I.usePaneTransformOriginXAtom)(e),s=(0,I.usePaneViewportInsetAtom)(e),l=(0,I.usePaneIsHiddenAtom)(e),d=(0,I.usePaneZIndexAtom)(e),f=(0,I.usePaneTransitionEnabledAtom)(e),p=(0,I.usePaneTypeAtom)(e),h=(0,I.usePaneIsFloatingAtom)(e),m=(0,I.usePaneIsModalAtom)(e),g=(0,I.usePaneIsActiveAtom)(e),x=(0,u.default)(function(){return(0,n.atom)(function(t){return t(c.activePaneIdAtom)===e})},[e]),y=(0,I.usePaneIsCommitedAtom)(e),b=(0,I.usePaneDataAtom)(e),w=(0,I.usePaneBorderAtom)(e),_=(0,I.usePaneIsBeingDraggedAtom)(e),k=(0,I.usePaneHasMovedWhileDraggingAtom)(e),S=(0,I.useIsOnlyPane)(e),C=(0,I.usePanePropertiesAtom)(e),j=(0,I.usePaneIsMaximizedAtom)(e);return{properties:(0,H.useObservableValue)(C),size:(0,H.useObservableValue)(r),position:(0,H.useObservableValue)(i),scale:(0,H.useObservableValue)(a),paneType:(0,H.useObservableValue)(p),transformOriginXAtom:(0,H.useObservableValue)(o),viewportInset:(0,H.useObservableValue)(s),zIndex:(0,H.useObservableValue)(d),disableInteractions:(0,H.useObservableValue)(Y.disablePaneContentInteractionsAtom),getTransitionEnabled:(0,H.useGet)(f),data:(0,H.useObservableValue)(b),isFloating:(0,H.useObservableValue)(h),isModal:(0,H.useObservableValue)(m),isActive:(0,H.useObservableValue)(g),isActivePane:(0,H.useObservableValue)(x),isCommitted:(0,H.useObservableValue)(y),isHidden:(0,H.useObservableValue)(l),isBeingDragged:(0,H.useObservableValue)(_),hasMovedWhileDragging:(0,H.useObservableValue)(k),headerHeight:(0,H.useObservableValue)(X.tabsHeaderHeightAtom),border:(0,H.useObservableValue)(w),isOnlyPane:(0,H.useObservableValue)(S),isMaximized:(0,H.useObservableValue)(j)}}function nt(e){var t=(0,x.useHeaderRectAtom)(e),n=(0,Q.useSizeAtom)(t),r=(0,x.useHeaderPositionAtom)(e),i=(0,x.useHeaderScaleAtom)(e),a=(0,x.useHeaderTransformOriginXAtom)(e),o=(0,x.useHeaderZIndexAtom)(e),s=(0,x.usePaneHeaderTransitionEnabledAtom)(e),l=(0,x.useHeaderIsMaximizedAtom)(e),u=(0,x.useHeaderIsFloatingAtom)(e),c=(0,x.useHeaderIsModalAtom)(e),d=(0,x.useHeaderIsBeingDraggedAtom)(e),f=(0,x.useHeaderPropertiesAtom)(e);return{properties:(0,H.useObservableValue)(f),size:(0,H.useObservableValue)(n),position:(0,H.useObservableValue)(r),scale:(0,H.useObservableValue)(i),transformOriginX:(0,H.useObservableValue)(a),zIndex:(0,H.useObservableValue)(o),getTransitionEnabled:(0,H.useGet)(s),isMaximized:(0,H.useObservableValue)(l),isFloating:(0,H.useObservableValue)(u),isModal:(0,H.useObservableValue)(c),isBeingDragged:(0,H.useObservableValue)(d)}}function nn(e){var t=(0,g.useHandleAtom)(e),n=(0,g.useHandleRectAtom)(e),r=(0,Q.useSizeAtom)(n),i=(0,Q.usePositionAtom)(n),a=(0,g.useHandleIsActiveAtom)(e),o=(0,g.useHandleIsSnappedAtom)(e),s=(0,g.useHandleIsStackedAtom)(e),l=(0,g.useHandleLenghtAtom)(e),u=(0,g.useHandleRotationAtom)(e),c=(0,g.useHandleGripSizeAtom)(e),d=(0,g.useHandleGripIsHiddenAtom)(e);return{handle:(0,H.useObservableValue)(t),size:(0,H.useObservableValue)(r),position:(0,H.useObservableValue)(i),isActive:(0,H.useObservableValue)(a),isSnapped:(0,H.useObservableValue)(o),isStacked:(0,H.useObservableValue)(s),length:(0,H.useObservableValue)(l),rotation:(0,H.useObservableValue)(u),gripSize:(0,H.useObservableValue)(c),gripIsHidden:(0,H.useObservableValue)(d)}}function nr(){return(0,H.useValue)(en.isAgentCenteredAtom)}function ni(){var e=(0,H.useStore)();return(0,t.useCallback)(function(t){var n=e.get(Z.agentChatRefAtom);null==n||n.openAgentWithPrompt(t)},[e])}function na(){return(0,H.useSet)(er.transitionToAgentPresentationAtom)}function no(){return(0,H.useValue)(er.isAgentPresentationTransitionInProgressAtom)}function ns(){return(0,H.useGet)($.panesAtom)}function nl(){return(0,H.useValue)($.panesAtom)}function nu(){return(0,H.useGet)($.visiblePanesAtom)}function nc(){return(0,H.useGet)($.hiddenPanesAtom)}function nd(){return(0,H.useGet)($.panesCountAtom)}function nf(){return(0,H.useGet)(L.layoutStateAtom)}function np(){return(0,H.useSet)(y.initLayoutStateAtom)}function nh(){return(0,H.useValue)($.extensionFileHandlersAtom)}function nm(){return(0,H.useSet)($.extensionFileHandlersAtom)}function ng(){return(0,H.useValue)(h.filetypeAssociationsAtom)}function nv(){return(0,H.useValue)(h.filetypeAssociationRequest)}function nx(){return(0,H.useSet)(h.filetypeAssociationRequest)}function ny(){return(0,H.useSet)(h.associateFiletypeAtom)}function nb(){return{view:(0,H.useObservableValue)(U.sidebarViewStateAtom),resizeHandleView:(0,H.useObservableValue)(U.sidebarResizeHandleViewStateAtom),isOpen:(0,H.useObservableValue)(F.sidebarIsOpenAtom),activeContent:(0,H.useObservableValue)(F.sidebarActiveContentAtom),toggle:(0,H.useSet)(B.toggleSidebarAtom),toggleContent:(0,H.useSet)(B.toggleSidebarContentAtom),closeSidebar:(0,H.useSet)(B.closeSidebarAtom),resize:(0,V.useSidebarResize)(),getTransitionEnabled:(0,H.useGet)(el.transitionInProgressAtom)}}function nw(){var e=(0,H.useObservableValue)(ei.agentRectAtom),t=(0,H.useObservableValue)(d.gapAtom),n=(0,H.useObservableValue)(ei.agentDisplayStateAtom),r=(0,H.useSet)(et.resizeAgentSidebarAtom),i=(0,H.useSet)(et.toggleAgentSidebarAtom),a=(0,H.useGet)(el.transitionInProgressAtom),o=(0,H.useSet)(Z.agentChatRefAtom),s=(0,H.useObservableValue)(en.agentFiltreeOrderAtom),l=(0,H.useSet)(ee.setAgentPositionAtom),u=(0,H.useObservableValue)(X.tabsHeaderHeightAtom),c=(0,H.useObservableValue)(et.isAgentCollapsedAtom);return{rect:e,gutter:t,displayState:n,collapsedWidth:J.COLLAPSED_WIDTH,getTransitionEnabled:a,resizeSidebar:r,toggle:i,setChatRef:o,agentFiletreeOrder:s,setAgentPosition:l,headerHeight:u,isCollapsed:c}}function n_(){return(0,H.useSet)(ea.setHeaderInsetAtom)}function nk(){return(0,o.useCreateObservableAtom)(ea.headerInsetsAtom,(0,H.useStore)())}function nS(){var e=(0,H.useObservableValue)(ea.cornerPaneHeaderWidthsAtom);return(0,t.useMemo)(function(){return new a.Multicast(function(t){return t.next(e.current),e.subscribe(function(e){return t.next(e)})})},[e])}function nC(){return(0,o.useCreateObservableAtom)(es.sidebarWidthsAtom,(0,H.useStore)())}var nj=(0,r.selectAtom)($.layoutAtom,function(e){var t=e.tiling;return(null==t?void 0:t.type)==="paneGroup"&&1===t.panes.length});function nT(){return(0,H.useValue)(nj)}e.s(["useActivatePane",()=>tm,"useActiveFile",()=>tl,"useActivePaneGroupId",()=>td,"useActivePaneId",()=>tc,"useAgentLayout",()=>nw,"useAssociateFiletype",()=>ny,"useCancelQuickJump",()=>tr,"useChangePane",()=>tK,"useClearDragState",()=>tE,"useCloseTab",()=>tz,"useCommitFileInWorkspace",()=>e0,"useCommitPane",()=>tv,"useContainerElementIsInitialized",()=>t4,"useCornerPaneHeaderWidths",()=>nS,"useEmptyLayoutDragAndDrop",()=>ts,"useEmptyLayoutRect",()=>eQ,"useExtensionFileHandlers",()=>nh,"useFiletypeAssociationRequest",()=>nv,"useFiletypeAssociations",()=>ng,"useGetContainer",()=>eY,"useGetHiddenPanes",()=>nc,"useGetIsMaximized",()=>tp,"useGetLayout",()=>t8,"useGetLayoutState",()=>nf,"useGetPane",()=>e5,"useGetPanes",()=>ns,"useGetUncommittedFilePaneId",()=>e1,"useGetUncommittedToolPaneId",()=>e2,"useGetVisiblePanes",()=>nu,"useHandleIds",()=>e6,"useHandleView",()=>nn,"useHasSingleTiledPane",()=>nT,"useHeaderIds",()=>e8,"useHeaderInset",()=>nk,"useHeaderView",()=>nt,"useInsertFloatingPaneIfNotExists",()=>tb,"useInsertPane",()=>ty,"useInsertPaneToEdge",()=>tJ,"useInsertTab",()=>t$,"useIsActivePane",()=>tu,"useIsAgentCentered",()=>nr,"useIsAgentPresentationTransitionInProgress",()=>no,"useIsDraggingTab",()=>tL,"useIsInPopup",()=>th,"useIsMaximized",()=>tf,"useIsQuickJumpActive",()=>tn,"useLayoutBSODArgs",()=>eq,"useLayoutInitType",()=>eX,"useMaximizedPane",()=>tN,"useMoveAndReplacePane",()=>tk,"useMoveFocus",()=>ti,"useMoveOrDeleteFile",()=>tV,"useMovePaneGroup",()=>ta,"useMoveTab",()=>tU,"useNewTab",()=>tH,"useOpenAgentWithPrompt",()=>ni,"useOpenFile",()=>tI,"useOpenMultipleFiles",()=>tA,"useOpenMultipleURLs",()=>tP,"useOpenTool",()=>tw,"usePane",()=>e3,"usePaneDragAndDrop",()=>tj,"usePaneGroup",()=>tF,"usePaneGroupCount",()=>tQ,"usePaneGroupDragAndDrop",()=>tR,"usePaneGroupIndex",()=>tX,"usePaneGroups",()=>tZ,"usePaneIds",()=>e4,"usePaneView",()=>ne,"usePanes",()=>nl,"usePanesCount",()=>nd,"useQuickJumpFocusRect",()=>e9,"useQuickJumpMenuState",()=>e7,"useQuickJumpTo",()=>te,"useRelativeMoveTab",()=>tG,"useRemoveOtherPanesInGroup",()=>tS,"useRemovePane",()=>t_,"useRemovePaneGroup",()=>t0,"useRemovePanesToRightInGroup",()=>tC,"useReopenClosedTab",()=>tq,"useReplacePane",()=>tY,"useResizeFloating",()=>tO,"useResizeTiling",()=>to,"useRevealPane",()=>tx,"useSaveLayoutState",()=>eZ,"useSelectTab",()=>tM,"useSetAnimationsEnabled",()=>t7,"useSetExtensionFileHandlers",()=>nm,"useSetFiletypeAssociationRequest",()=>nx,"useSetHeaderInset",()=>n_,"useSetIsDraggingTab",()=>tB,"useSetIsTouchDeviceLayout",()=>t9,"useSetLayoutState",()=>np,"useShowTutorialPane",()=>t5,"useShowTutorialVideo",()=>t3,"useSidebar",()=>nb,"useSidebarWidths",()=>nC,"useSplitPane",()=>t1,"useStorePopupLayoutState",()=>eJ,"useSwitchTab",()=>tW,"useToggleFloating",()=>tD,"useToggleQuickJump",()=>tt,"useToggleTutorialVideo",()=>t2,"useTogglingSnap",()=>t6,"useTransitionToAgentPresentation",()=>na,"useUpdateContainer",()=>eK,"useUpdatePane",()=>tg],979931)},292849,989481,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(276385),i=e.i(415756),a=e.i(205104),o=e.i(890963),s=e.i(480028),l=e.i(446530),u=e.i(613355),c=e.i(630818),d=e.i(960178),f=e.i(625484),p={findOrCreateFile:1,searchFileContents:2,fork:.5,createNewRepl:.5,askAssistant:.5,codeSearch:.5,myRepls:.5,settings:.5},h={files:.98,settings:.9,toolDescription:.8,askAssistant:.5,codeSearch:.7,fileContentsSearch:.4};e.s(["commandDefaultScores",()=>p,"commandMatchScoreMultipliers",()=>h],989481);var m=e.i(290446),g=(0,l.cssRecord)({root:[{userSelect:"none"}],header:[{fontSize:s.tokens.fontSizeSmall,opacity:.6},u.rcss.color.foregroundDimmest,u.rcss.truncate],fileName:[u.rcss.truncate,u.rcss.flex.row]});function x(e){var t=e.height,n=e.active,i=e.match,a=i.directory,o=i.filename,s=e.description;return(0,r.jsxs)(f.View,{css:g.root,grow:!0,shrink:!0,px:8,row:!0,gap:8,align:"center",style:{height:t},children:[(0,r.jsx)(c.default,{path:o.text,size:16}),(0,r.jsxs)(f.View,{gap:0,children:[a?(0,r.jsx)(f.View,{css:g.header,children:(0,r.jsx)(m.HighlightMatches,{text:a.text+"/",highlight:a.ranges,dimmed:!n})}):null,(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(f.View,{css:g.fileName,children:(0,r.jsx)(m.HighlightMatches,{text:o.text,highlight:o.ranges,dimmed:!n})}),(0,r.jsx)(d.Text,{variant:"small",color:"dimmest",children:s})]})]})]})}var y={match:i.asyncExtendedMatch,forward:!1,tiebreakers:[function(e,t,n){var r=n(e.item),i=n(t.item),a=r.lastIndexOf("/"),o=i.lastIndexOf("/"),s=Array.from(e.positions).filter(function(e){return e>a}).length;return Array.from(t.positions).filter(function(e){return e>o}).length-s},function(e,t,n){return n(e.item).trim().length-n(t.item).trim().length}]};function b(e,r){return(0,t._)(function(){var t,a;return(0,n._)(this,function(n){switch(n.label){case 0:return[4,new i.AsyncFzf(r,y).find(e)];case 1:return t=n.sent().map(function(e){return{path:e.item,score:Math.floor(e.score*h.files),ranges:(0,o.indiciesToRanges)(e.positions)}}),[2,(a=(0,o.getMinMatchScoreForQuery)({queryLength:e.length}))?t.filter(function(e){return e.score>=a}):t]}})})()}function w(e){var t=e.ranges,n=e.path,r=(0,a.getFileName)(n),i=(0,a.getParentPath)(n);if(!i)return{filename:{text:r,ranges:t.length?t:void 0}};var o=i.length,s=o+1,l=[],u=[],c=!0,d=!1,f=void 0;try{for(var p,h=t[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var m=p.value;if(m.from<o){l.push({from:m.from,to:Math.min(m.to,o)});var g=m.to-s;if(g<=0)continue;u.push({from:0,to:g});continue}m.from<s||u.push({from:m.from-s,to:m.to-s})}}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}return{filename:{text:r,ranges:u.length?u:void 0},directory:{text:i,ranges:l.length?l:void 0}}}function _(e){var t=e.path,n=e.ranges,i=e.description,a=w({path:t,ranges:null!=n?n:[]}),o=a.directory?44:32;return{height:o,content:(0,r.jsx)(x,{match:a,height:o,description:i})}}e.s(["createFileMatchRender",()=>_,"filterFiles",()=>b,"matchFilepath",()=>w],292849)},333980,927989,198822,e=>{"use strict";var t=e.i(721281),n=e.i(878420),r=e.i(276385),i=e.i(890963),a=e.i(64386),o=e.i(886513),s=e.i(332441);e.i(32109);var l=e.i(926118),u=e.i(384401),c=e.i(967629),d=e.i(613355),f=e.i(624782),p=e.i(960178),h=(0,c.css)([d.rcss.fontSize(13)]);function m(e){var t=e.name,i=(0,o._)(e,["name"]),c=(0,u.useKeyCombo)(t.id),d=(0,s.useIsMac)();if(!c)return null;var m=(0,l.keyComboText)(c,d);return""===m.trim()?null:(0,r.jsx)(f.Pill,(0,a._)((0,n._)({},i),{text:(0,r.jsx)(p.Text,{css:h,color:"dimmest",children:m})}))}var g=e.i(480028),x=e.i(625484),y=(0,c.css)([d.rcss.borderRadius("full"),d.rcss.position.absolute,d.rcss.top(-3),d.rcss.right(-3)]);function b(e){var t=e.color,n=void 0===t?g.tokens.redStronger:t,i=e.small,a=e.className,o=i?6:8;return(0,r.jsx)(x.View,{className:a,style:{backgroundColor:n,width:o,height:o,zIndex:2},css:y})}e.i(282890);var w=e.i(466497),_=e.i(827456);e.i(545082);var k=e.i(803542),S=e.i(446530),C=e.i(447724),j=e.i(581972),T=e.i(989481),E=e.i(290446),R=(0,S.cssRecord)({root:[{paddingInline:j.styleTokens.inputBarPadding,"&:hover .icon":{backgroundColor:"var(".concat(g.properties.interactiveBackground,")")}}],iconAndIndicator:[d.rcss.position.relative],iconContainer:[d.rcss.position.relative,j.iconSizeCss,{width:j.styleTokens.iconSize,height:j.styleTokens.iconSize}],textContent:[d.rcss.flex.growAndShrink(1)],aliasContainer:[d.rcss.color.foregroundDimmest,d.rcss.align.center,d.rcss.flex.growAndShrink(1)],descriptionText:[{fontSize:"0.9em"}]});function I(e){var i=e.pane,a=e.active,o=e.labelHighlights,s=(0,_.usePaneUIContext)(),l=s.Icon({pane:i,size:e.iconSize}),u=s.getTitle(i),c=(0,w.usePaneDescription)(i,{short:!0}),d=s.getTitlePill(i),h=(0,k.usePaneIndicator)({paneType:i.type}),g=(0,C.useShowToolDescriptions)();return(0,r.jsxs)(x.View,{css:R.root,grow:!0,shrink:!0,row:!0,align:"center",gap:j.styleTokens.inputBarPadding,style:g?(0,t._)({paddingTop:j.styleTokens.inputBarPadding,paddingBottom:j.styleTokens.inputBarPadding},j.cssVars.iconSize,e.iconSize+"px"):void 0,children:[(0,r.jsxs)(x.View,{css:R.iconAndIndicator,children:[(0,r.jsx)(x.View,{css:R.iconContainer,style:{opacity:e.active?1:.7},children:l}),h?(0,r.jsx)(b,{color:h}):null]}),(0,r.jsxs)(x.View,{css:R.textContent,gap:2,"data-cy":"command-bar-tool-".concat(u.toLowerCase()),children:[(0,r.jsxs)(x.View,{row:!0,gap:4,justify:"space-between",children:[e.alias?(0,r.jsxs)(x.View,{row:!0,gap:8,css:R.textContent,children:[(0,r.jsx)(p.Text,{children:u}),(0,r.jsxs)(x.View,{css:R.aliasContainer,row:!0,gap:4,children:["(",e.aliasPrefix?(0,r.jsxs)(p.Text,{color:"dimmest",children:[e.aliasPrefix," "]}):null,(0,r.jsx)(E.HighlightMatches,{dimmed:!0,text:e.alias,highlight:o}),")"]})]}):(0,r.jsx)(E.HighlightMatches,{dimmed:!a,text:u,highlight:o}),g&&null!=d?(0,r.jsx)(f.Pill,(0,n._)({},d)):null]}),g&&null!=c?(0,r.jsx)(E.HighlightMatches,{dimmed:!a,text:c,highlight:e.descriptionHighlights,multiline:!0,css:R.descriptionText}):null]}),e.shortcutCommand?(0,r.jsx)(m,{name:e.shortcutCommand}):null]})}function A(e){var t=e.pane,n=e.aliases,a=void 0===n?[]:n,o=e.iconSize;return function(e){var n=e.searchQuery,s=e.data,l=e.active;if("group"===s.type)return null;if(!n)return{score:1,render:{content:(0,r.jsx)(I,{iconSize:o,pane:t})}};var u=(0,i.fzfMatch)(n,s.label,{casing:"case-insensitive"}),c=null;if(null!=s.description&&(c=(0,i.fzfMatch)(n,s.description,{filterLowMatchScores:!0,fuzzy:!1,casing:"case-insensitive"}))&&(c.score*=T.commandMatchScoreMultipliers.toolDescription),null!=u||null!=c)return{score:null!=(m=null!=(h=null==u?void 0:u.score)?h:null==c?void 0:c.score)?m:0,render:{content:(0,r.jsx)(I,{iconSize:o,pane:t,labelHighlights:null!=(g=null==u?void 0:u.ranges)?g:[],descriptionHighlights:null!=(x=null==c?void 0:c.ranges)?x:[],active:l})}};var d=!0,f=!1,p=void 0;try{for(var h,m,g,x,y,b=a[Symbol.iterator]();!(d=(y=b.next()).done);d=!0){var w=y.value,_="string"==typeof w?{alias:w,prefix:void 0}:w,k=_.alias,S=_.prefix,C=(0,i.fzfMatch)(n,k,{casing:"case-insensitive"});if(C)return{score:C.score,render:{content:(0,r.jsx)(I,{iconSize:o,pane:t,active:l,alias:k,aliasPrefix:S,labelHighlights:C.ranges})}}}}catch(e){f=!0,p=e}finally{try{d||null==b.return||b.return()}finally{if(f)throw p}}return null}}e.s(["matchToolPane",()=>A],333980);var P=new Map([["envEditor",["Environment variables"]],["shell",["Terminal"]],["objectStorage",[{alias:"Object Storage",prefix:"previously"},"Blobject Storage","Blob Cloud"]],["integrations",["Cloud Services","OpenAI","Slack"]],["agentProgress",["Agent Progress","AI Agent","Preview","Output","Webview"]],["neon",[{alias:"Supabase",prefix:"similar to"}]],["webview",["Preview","Output",{alias:"Webview",prefix:"previously"}]],["deployments",[{alias:"Deployments",prefix:"previously"}]],["preferences",["Sound","Chime","Notifications","Audio","Settings"]]]);e.s(["paneAliases",()=>P],927989);var D=e.i(569384),O=e.i(973245),N=e.i(304277);function M(){var e=(0,D._)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    workspaceCta\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n      editPermissions {\n        isAuthorized\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return M=function(){return e},e}function L(){var e=(0,D._)(["\n  query WorkspaceToolPanes($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n      isSubscribed\n    }\n  }\n  ","\n"]);return L=function(){return e},e}e.i(566901);var B={},V=(0,O.gql)(M()),F=(0,O.gql)(L(),V);function U(e){var t=(0,n._)({},B,e);return N.useQuery(F,t)}e.s(["useWorkspaceToolPanesQuery",()=>U],198822)},545453,570271,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(389959),i=e.i(761732),a=e.i(529810);function o(){var e=(0,a.default)().toolchain;return(0,i.default)(e.configs)}e.s(["useToolchainConfigs",()=>o],570271);var s={nodejs:["package.json","package-lock.json","yarn.lock","node_modules/"],python2:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],python3:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function l(){var e=o();return{configs:(0,r.useMemo)(function(){var r=(null==e?void 0:e.packagers)||[],i=(null==r?void 0:r.map(function(e){var r,i;return(0,n._)((0,t._)({},e),{title:e.language,packagerFiles:(null==(r=e.packagerFiles)?void 0:r.length)?e.packagerFiles:null!=(i=s[e.language])?i:[]})}))||[];return i.push({id:"nix",title:"system",name:"System Dependencies",language:"nix",packageSearch:!0,guessImports:!1,packagerFiles:["replit.nix"]}),i},[e]),loading:!e}}e.s(["usePackagerConfigs",()=>l],545453)},794633,273042,257042,838124,49416,e=>{"use strict";e.i(148382);var t=e.i(530658),n=e.i(346715),r=e.i(485273),i=e.i(389959),a=e.i(992785),o=e.i(541793),s=e.i(814563),l=e.i(198822),u=e.i(993796),c=e.i(207237),d=e.i(441329),f=e.i(545453),p=e.i(878420),h=e.i(64386),m=e.i(368964),g=e.i(569384),x=e.i(973245),y=e.i(304277);function b(){var e=(0,g._)(["\n  query CheckForProjectByRepl($id: String!) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n          type\n          name\n          authorizations {\n            createPublicRepl: createRepl(private: false) {\n              isAuthorized\n              message\n            }\n            createPrivateRepl: createRepl(private: true) {\n              isAuthorized\n              message\n            }\n            createProject {\n              isAuthorized\n              message\n            }\n          }\n        }\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return b=function(){return e},e}e.i(566901);var w={},_=(0,x.gql)(b());function k(){var e,t,n,r,i,a,o=(i={variables:{id:(0,c.default)()}},a=(0,p._)({},w,i),y.useQuery(_,a)),s=(null==(t=o.data)||null==(e=t.getRepl)?void 0:e.__typename)==="Repl"?o.data.getRepl.org:void 0,l=!!s&&s.type===m.OrgstypeEnumType.Team&&(s.authorizations.createPrivateRepl.isAuthorized||s.authorizations.createPublicRepl.isAuthorized)&&s.authorizations.createProject.isAuthorized;return(0,h._)((0,p._)({},o),{hasProject:(null==(n=o.data)?void 0:n.getRepl.__typename)==="Repl"&&!!(null==(r=o.data.getRepl.project)?void 0:r.id),isEligibleForProject:l})}e.s(["useCheckForProject",()=>k],273042);var S=e.i(297083),C=e.i(817556),j=e.i(276385);function T(){var e=(0,g._)(["\n  query ReplAuth($replID: String!) {\n    getRepl(id: $replID) {\n      ... on Repl {\n        id\n        config {\n          isServer\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n"]);return T=function(){return e},e}var E={},R=(0,x.gql)(T()),I=e.i(787527),A=e.i(749556),P=e.i(334028),D=e.i(416298),O=e.i(761201),N=e.i(205104),M=e.i(19004),L=e.i(255444),B=e.i(641326),V=e.i(858248),F=e.i(709485),U=e.i(529810),G=e.i(712516),$="Import HTML package",H=[{title:"Get user info",content:[{type:"code",value:'<script type="module">const user = await getUserInfo() </script>'}]}],z=[{title:$,content:[{type:"code",value:'<script src="https://replit.com/public/js/repl-auth-v2.js"></script>'}]}],W=[{title:"Insert custom button",content:[{type:"code",value:'<button onclick="LoginWithReplit()"> Login </button>'}]}],q=e.i(752539),K=e.i(402099),Y=e.i(416746),Q=e.i(257982),X=e.i(995683),Z=e.i(610357),J="Import Node package",ee=[{title:"Get user info",content:[{type:"code",value:"const user = getUserInfo("},{type:"input",placeholder:"req"},{type:"code",value:")"}]}],et=[{title:J,content:[{type:"code",value:'const { getUserInfo } = require("@replit/repl-auth")'}]}],en=e.i(952685);e.i(545082);var er=e.i(91442),ei=e.i(446530),ea=e.i(173703),eo=e.i(613355),es=e.i(140487),el=e.i(136540),eu=e.i(607278),ec=e.i(960178),ed=e.i(625484),ef=(0,ei.cssRecord)({templateContainer:[eo.rcss.backgroundColor.backgroundRoot,eo.rcss.borderRadius(4),eo.rcss.p(4),eo.rcss.align.center],input:[eo.rcss.minWidth(64),eo.rcss.flex.growAndShrink(1)],codeExampleContainer:[eo.rcss.borderRadius(4),eo.rcss.flex.shrink(1)],codeExampleText:[eo.rcss.font.code,eo.rcss.color.foregroundDimmer,eo.rcss.py(4),eo.rcss.flex.growAndShrink(1)]}),ep=function(e){var r=e.title,a=e.content,o=(0,t._)((0,i.useState)(a),2),s=o[0],l=o[1];return(0,j.jsxs)(ed.View,{gap:4,children:[(0,j.jsxs)(ed.View,{row:!0,gap:4,align:"center",children:[(0,j.jsx)(ec.Text,{variant:"subheadDefault",children:r}),"Get user info"===r?(0,j.jsx)(el.IconButton,{disabled:!0,tooltipPlacement:"top",alt:"User object contains 'id', 'name', 'roles', and 'teams'",children:(0,j.jsx)(Y.default,{})}):null]}),(0,j.jsxs)(ed.View,{gap:4,children:[(0,j.jsx)(ed.View,{css:ef.templateContainer,row:!0,gap:4,justify:"center",children:a.map(function(e,t){var i=e.type;switch(i){case"input":return(0,j.jsx)(eu.Input,{onChange:function(e){var r=(0,n._)(s);r[t].value=e.target.value,l(r)},placeholder:e.placeholder,value:e.value||"",css:ef.input},"".concat(r,"-").concat(t));case"code":return(0,j.jsx)(ed.View,{css:ef.codeExampleContainer,children:(0,j.jsx)(ec.Text,{multiline:!1,css:ef.codeExampleText,children:e.value})},"".concat(r,"-").concat(t));default:(0,Q.default)(i)}})}),(0,j.jsx)(eh,{code:s.reduce(function(e,t){return"input"===t.type?e+(t.value||t.placeholder):e+t.value},""),packageImport:r===J||r===$})]})]})},eh=function(e){var t=e.code,n=e.packageImport,r=(0,er.useCursorFilepath)(),i=(0,en.default)(r),a=(0,U.default)().fs,o=(0,er.useGetCursorState)();return i?(0,j.jsx)(ea.ShadesSurface,{elevate:!1,children:(0,j.jsx)(es.Button,{size:"small",variant:"outlined",onClick:function(){var e,s;n&&r&&a?"html"!==(0,N.getExt)(r)?i({code:t,insertAt:0}):a.readFile(r).then(function(e){if(e.error)throw e.error;var n=X.default.from(e.content).toString(),r=n.indexOf("</head>")-1;-1===r&&(r=n.indexOf("<script")),-1===r&&(r=n.indexOf("</body>")),-1===r&&(r=n.length),i({code:t,insertAt:r})}):i({code:t,insertAt:null!=(s=null==(e=o())?void 0:e.position.offset)?s:0})},text:n?"Auto add":"Insert",iconRight:(0,j.jsx)(q.default,{}),css:{width:"fit-content"}})}):(0,j.jsx)(ea.ShadesSurface,{elevate:!1,children:(0,j.jsx)(es.Button,{size:"small",variant:"outlined",onClick:function(){return(0,Z.default)(t)},text:"Copy",iconLeft:(0,j.jsx)(K.default,{}),css:{width:"fit-content"}})})},em=function(e){var t=e.examples;return(0,j.jsx)(ed.View,{gap:16,children:t.map(function(e,t){return(0,j.jsx)(ep,{title:e.title,content:e.content},t)})})};let eg=function(e){var t=e.langKey;return(0,j.jsxs)(ed.View,{gap:8,children:[" ","html"!==t&&(0,j.jsx)(em,{examples:z}),(0,j.jsx)(em,{examples:W})]})};var ev=[{title:"Fetch from client",content:[{type:"code",value:"CURL /__replauthuser"}]},{title:"Or access server request headers",content:[{type:"code",value:"X-Replit-User-Id"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Name"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Teams"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Roles"}]}],ex=e.i(967629),ey=(0,ex.css)([eo.rcss.colWithGap(16)]);let eb=function(){return(0,j.jsx)(ed.View,{css:ey,children:ev.map(function(e,t){return(0,j.jsx)(ep,{title:e.title,content:e.content},t)})})};var ew=(0,ex.css)([eo.rcss.colWithGap(8)]);let e_=function(e){var t=e.langKey,n=(0,j.jsx)(eb,{});switch(t){case"html":n=(0,j.jsx)(em,{examples:H});break;case"nodejs":n=(0,j.jsx)(em,{examples:ee})}return(0,j.jsx)(ed.View,{css:ew,children:n})},ek=function(e){var t=e.langKey,n=null;switch(t){case"html":n=z;break;case"nodejs":n=et}return n?(0,j.jsx)(ed.View,{gap:8,children:(0,j.jsx)(em,{examples:n})}):null};e.i(282890);var eS=e.i(827456),eC=e.i(480028),ej=e.i(91720),eT=e.i(988676),eE=e.i(396776),eR=(0,ei.cssRecord)({link:[eo.rcss.color.accentPrimaryStronger,eo.rcss.cursor.pointer],errorContainer:[eo.rcss.textAlign.center,eo.rcss.colWithGap(4)],usageSectionTitleText:[{color:eC.tokens.foregroundDimmest,textTransform:"uppercase",fontWeight:eC.tokens.fontWeightMedium}],divider:[eo.rcss.backgroundColor.outlineDimmer]}),eI=function(){var e=(0,U.default)(),n=e.dotReplit,r=e.fs,a=(0,t._)((0,i.useState)(),2),o=a[0],s=a[1],l=(0,t._)((0,i.useState)(!1),2),u=l[0],c=l[1],d=(0,t._)((0,i.useState)(!1),2),f=d[0],p=d[1],h=(0,t._)((0,i.useState)(!0),2),m=h[0],g=h[1],x=(0,t._)((0,i.useState)(!0),2),y=x[0],b=x[1],w=(0,i.useCallback)(function(){return(0,S._)(function(){var e,t,r,i,a;return(0,C._)(this,function(o){switch(o.label){case 0:s(void 0),g(!0),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,n.getConfig({bypassCache:!0})];case 2:switch((a=o.sent()).error){case B.DotReplitErrors.ParseError:throw Error("An error occurred parsing the .replit file, please ensure the syntax is valid");case B.DotReplitErrors.Disconnected:throw Error("Disconnected, cannot read .replit file.");case B.DotReplitErrors.NotFound:return b(!1),[2]}return c(!!(null==a||null==(t=a.config)||null==(e=t.auth)?void 0:e.buttonEnabled)),p(!!(null==a||null==(i=a.config)||null==(r=i.auth)?void 0:r.pageEnabled)),[3,5];case 3:return s(o.sent().message),[3,5];case 4:return g(!1),[7];case 5:return[2]}})})()},[n,s,g,b,c,p]);return(0,i.useEffect)(function(){(0,S._)(function(){return(0,C._)(this,function(e){switch(e.label){case 0:if(!r)return[2];return[4,w()];case 1:return e.sent(),[2]}})})()},[r,w]),(0,i.useEffect)(function(){if(r){var e=r.watchTextFile(M.dotReplitPath,{onChange:function(){return(0,S._)(function(){return(0,C._)(this,function(e){switch(e.label){case 0:return[4,w()];case 1:return e.sent(),[2]}})})()}});return function(){e(),p(!1),c(!1),g(!1)}}},[r,p,w]),{error:o,isDotReplitAuthButtonEnabled:u,isDotReplitAuthPageEnabled:f,isDotReplitAuthLoading:m,hasDotReplit:y,setError:s,setIsDotReplitAuthLoading:g,isDotReplitAuthEnabled:u||f}};function eA(){var e,n,r,a,o,s,l=(0,c.default)(),u=(0,U.default)().dotReplit,d=(0,er.useCursorFilepath)(),h=d?(0,N.getExt)(d):null,m=(0,f.usePackagerConfigs)().configs,g=(0,t._)((0,i.useState)(""),2),x=g[0],b=g[1],w=(e={variables:{replID:l}},n=(0,p._)({},E,e),y.useQuery(R,n)),_=w.data,k=w.error,T=w.loading,A=(null==_?void 0:_.getRepl.__typename)==="Repl"&&(null==_||null==(a=_.getRepl)||null==(r=a.config)?void 0:r.isServer),M=null!=(s=null==_||null==(o=_.currentUser)?void 0:o.isLoggedIn)&&s,B=eI(),$=B.error,H=B.isDotReplitAuthButtonEnabled,z=B.isDotReplitAuthPageEnabled,W=B.isDotReplitAuthLoading,q=B.hasDotReplit,K=B.setError,Y=B.setIsDotReplitAuthLoading,Q=B.isDotReplitAuthEnabled;(0,i.useEffect)(function(){m.find(function(e){return"react"===e.language})||"jsx"===h||"tsx"===h?b("react"):m.length>0&&b(m[0].language)},[h,x,b,m]);var X=(0,i.useCallback)(function(){return(0,S._)(function(){return(0,C._)(this,function(e){switch(e.label){case 0:return Y(!0),(0,V.track)(F.events.AUTH_SIDEBAR_USED,{action:"Login Page Enabled"}),[4,u.updateDotReplit([(0,L.enableAuthPageOp)(!0),(0,L.enableAuthButtonOp)(!1)])];case 1:return e.sent().error&&(K("Couldn't enable login page, please try again"),Y(!1)),[2]}})})()},[Y,u,K]),Z=(0,i.useCallback)(function(){return(0,S._)(function(){return(0,C._)(this,function(e){switch(e.label){case 0:return Y(!0),(0,V.track)(F.events.AUTH_SIDEBAR_USED,{action:"Login Button Enabled"}),[4,u.updateDotReplit([(0,L.enableAuthPageOp)(!1),(0,L.enableAuthButtonOp)(!0)])];case 1:return e.sent().error&&(K("Couldn't enable login button, please try again"),Y(!1)),[2]}})})()},[Y,u,K]),J=(0,i.useCallback)(function(){return(0,S._)(function(){return(0,C._)(this,function(e){switch(e.label){case 0:return Y(!0),(0,V.track)(F.events.AUTH_SIDEBAR_USED,{action:"Repl auth disabled"}),[4,u.updateDotReplit([(0,L.enableAuthPageOp)(!1),(0,L.enableAuthButtonOp)(!1)])];case 1:return e.sent().error&&(K("Couldn't disable Log in with Replit, please try again"),Y(!1)),[2]}})})()},[Y,u,K]),ee=(0,i.useMemo)(function(){return M?q?k?(0,j.jsx)(ed.View,{css:eR.errorContainer,children:(0,j.jsx)(eE.StatusBanner,{colorway:"warning",text:"An error ocurred retrieving auth for this App. Please try again later."})}):"html"===x||A?void 0:(0,j.jsx)(ed.View,{css:eR.errorContainer,children:(0,j.jsx)(eE.StatusBanner,{colorway:"warning",text:"Run your web app to use Log in with Replit"})}):(0,j.jsxs)(ed.View,{css:eR.errorContainer,children:[(0,j.jsx)(eE.StatusBanner,{colorway:"warning",text:"Please create a .replit file to use Log in with Replit"}),(0,j.jsx)(ec.Text,{children:(0,j.jsx)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl",target:"_blank",rel:"noopener",children:"Learn more about the .replit file"})})]}):(0,j.jsx)(ed.View,{css:eR.errorContainer,children:(0,j.jsx)(eP,{})})},[k,q,M,A,x]),et="html"===x||"nodejs"===x,en=(0,j.jsx)(ec.Text,{color:"dimmer",children:"You can use Log in with Replit with all web Apps. We have language clients for Nodejs and HTML - switch to an App that uses that language to see how to use it."}),ei=(0,j.jsxs)(ed.View,{gap:24,children:[(0,j.jsxs)(ed.View,{gap:8,children:[z?(0,j.jsxs)(ec.Text,{color:"dimmer",children:["Your App will automatically direct users to a prebuilt login page. Start by importing the package below"," ",(0,j.jsxs)("span",{onClick:Z,css:eR.link,onKeyDown:Z,role:"button",tabIndex:0,children:[" ","or use your own custom button."]}),(0,j.jsx)("br",{}),"Repl Auth is not intended for API authentication."]}):(0,j.jsxs)(ec.Text,{color:"dimmer",children:["Your users can log in to your App using a custom button. Start by importing the package below"," ",(0,j.jsxs)("span",{onClick:X,css:eR.link,onKeyDown:X,role:"button",tabIndex:0,children:[" ","or use a prebuilt login page."]})]}),et?void 0:en]}),(0,j.jsxs)(ed.View,{children:["nodejs"===x&&H?null:(0,j.jsx)(ek,{langKey:x}),H?(0,j.jsx)(eg,{langKey:x}):null]}),(0,j.jsxs)(ed.View,{gap:8,children:[(0,j.jsxs)(ed.View,{gap:2,children:[(0,j.jsx)(ec.Text,{multiline:!1,variant:"small",css:eR.usageSectionTitleText,children:"Usage"}),(0,j.jsx)(eT.DividerH,{css:eR.divider})]}),(0,j.jsx)(ed.View,{children:(0,j.jsxs)(ed.View,{gap:12,children:[" ","nodejs"===x&&H?(0,j.jsx)(ek,{langKey:x}):null,(0,j.jsx)(e_,{langKey:x})]})})]}),(0,j.jsx)(es.Button,{onClick:J,text:"Disable Auth",colorway:"negative",variant:"outlined",loading:W||T})]}),ea=(0,eS.usePaneUIContext)().getDescription({type:"replAuth"}),el=(0,j.jsxs)(ed.View,{gap:8,children:[(0,j.jsx)(ec.Text,{css:eo.rcss.textAlign.center,children:ea}),(0,j.jsx)(es.Button,{colorway:"primary",onClick:X,text:"Enable Login Page",loading:W||T,disabled:!!$,iconLeft:(0,j.jsx)(P.default,{})}),(0,j.jsxs)(ec.Text,{color:"dimmer",css:eo.rcss.textAlign.center,children:["Alternatively,"," ",(0,j.jsx)("span",{onClick:Z,css:eR.link,onKeyDown:Z,role:"button",tabIndex:0,children:"use a custom login button"}),".",(0,j.jsx)("br",{}),"Repl Auth is not intended for API authentication."]})]}),eu=(0,j.jsx)(ej.ButtonLink,{href:O.LINKS_DOCS.REPL_AUTH,variant:"nofill",target:"_blank",rel:"noopener",iconLeft:(0,j.jsx)(I.default,{}),text:"Learn more"});return(0,j.jsx)(G.default,{pane:{type:"replAuth"},maxWidth:Q?600:450,headerText:"Login with Replit",body:(0,j.jsxs)(j.Fragment,{children:[$?(0,j.jsx)(eE.StatusBanner,{text:$,colorway:Q?void 0:"warning",icon:(0,j.jsx)(D.default,{})}):null,null!=ee?ee:Q?ei:el]}),action:ee?void 0:eu})}var eP=function(){return(0,j.jsxs)(ed.View,{gap:16,children:[(0,j.jsxs)(ec.Text,{children:[(0,j.jsx)("a",{href:O.LINKS_DOCS.REPL_AUTH,target:"_blank",rel:"noopener",css:eR.link,children:"Replit Authentication"})," ","is the fastest and easiest way to set up authentication in your App. Try it out by logging in or signing up."]}),(0,j.jsx)(ej.ButtonLink,{href:"/auth",as:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,j.jsx)(A.default,{})})]})};e.s(["default",()=>eA,"useReplAuthStatus",()=>eI],257042),e.i(244719);var eD=e.i(667279),eO=e.i(951262);function eN(){var e=(0,g._)(["\n  query ReplConfigIsExtension($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return eN=function(){return e},e}function eM(){var e=(0,g._)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return eM=function(){return e},e}var eL={},eB=(0,x.gql)(eN());function eV(e){var t=(0,p._)({},eL,e);return y.useQuery(eB,t)}var eF=(0,x.gql)(eM()),eU=e.i(253344);function eG(){var e=eV({variables:{replId:(0,c.default)()},fetchPolicy:"cache-only"}).data,n=(0,t._)((0,i.useState)(function(){var t,n;return(null==e||null==(t=e.getRepl)?void 0:t.__typename)==="Repl"&&null!=(n=e.getRepl.config.isExtension)&&n}),2),r=n[0],a=n[1],o=(0,U.default)().dotReplit;return(0,i.useEffect)(function(){return o.watch(function(e){var t,n,r;a(null!=(r=null==(n=e.config)||null==(t=n.extension)?void 0:t.isExtension)&&r)})},[o]),r}function e$(){var e=(0,t._)((0,i.useState)(null),2),n=e[0],r=e[1],a=(0,U.default)().dotReplit;return(0,i.useEffect)(function(){return a.watch(function(e){var t,n,i=null==(n=e.config)||null==(t=n.extension)?void 0:t.extensionID;i?r((0,eU.asExtensionId)(i)):r(null)})},[a]),n}var eH=function(){var e=(0,U.default)().dotReplit,n=(0,t._)((0,i.useState)(null),2),r=n[0],a=n[1];return(0,i.useEffect)(function(){return e.watch(function(e){var t,n,r=null==(n=e.config)||null==(t=n.extension)?void 0:t.staticDirectory;r?a({path:r,relativePath:r.replace(/^\.\//,"")}):a(null)})},[e]),r};function ez(){var e,n,r,a=(0,c.default)(),o=eV({variables:{replId:a}}),s=o.data,l=o.loading,u=o.error,d=(0,t._)((e=(0,p._)({},eL,void 0),eO.useMutation(eF,e)),1)[0],f=!l&&!u&&!!(null==s?void 0:s.getRepl)&&"Repl"===s.getRepl.__typename&&null!=(r=null==(n=s.getRepl.config)?void 0:n.isExtension)&&r,h=(0,t._)((0,i.useState)(!1),2),m=h[0],g=h[1],x=(0,U.default)().dotReplit;(0,i.useEffect)(function(){return x.watch(function(e){var t,n,r;g(null!=(r=null==(n=e.config)||null==(t=n.extension)?void 0:t.isExtension)&&r)})},[x]),(0,i.useEffect)(function(){l||u||m!==f&&d({variables:{replId:a,isExtension:m},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:a,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:m}}}}})},[l,u,a,f,m,d])}e.s(["useIsExtensionRepl",()=>eG,"useReplExtensionId",()=>e$,"useStaticDirectoryPath",()=>eH,"useSyncReplConfigIsExtension",()=>ez],838124);var eW=e.i(240913),eq=e.i(903381),eK=".tutorial";function eY(){var e=(0,U.default)().fs,n=(0,t._)((0,i.useState)({isLoading:!0,isTutorial:!1}),2),r=n[0],a=n[1];return(0,i.useEffect)(function(){e.watchDir(eW.ROOT_PATH,{onChange:function(e){a({isLoading:!1,isTutorial:e.some(function(e){return e.type===eq.FileType.Directory&&e.filename===eK})})},onMoveOrDelete:function(){a({isLoading:!1,isTutorial:!1})},onError:function(){a({isLoading:!1,isTutorial:!1})}})},[e]),r}e.s(["TUTORIAL_DIR",()=>eK,"default",()=>eY],49416);var eQ=e.i(66718),eX=e.i(965863),eZ=e.i(852819),eJ=(0,o.atom)([]);(0,s.selectAtom)(eJ,function(e){return new Set(e.map(function(e){return e.type}))},a.default);var e0=["shell","git","diff","envEditor","deployments","database","neon","preferences","multiplayer","objectStorage","adminPanel","webview","project","workflows","integrations","runnerOutput","replitAuth","securityScan","developer","agentChat"],e1=["agentChat","deployments"];function e2(){return(0,eZ.useValue)(eJ)}function e3(){return(0,eZ.useGet)(eJ)}function e5(){var e,n,a,o,s,p,h=(0,eZ.useSet)(eJ),m=(n=(0,c.default)(),(o=(null==(a=(0,l.useWorkspaceToolPanesQuery)({variables:{replId:n}}).data)||null==(e=a.getRepl)?void 0:e.__typename)==="Repl"?null==a?void 0:a.getRepl:null)?{repl:o,currentUser:(null==a?void 0:a.currentUser)||null}:{repl:null,currentUser:null}),g=m.repl,x=m.currentUser,y=(0,r.useRouter)(),b=(0,d.useIsInMobileWorkspace)(),w=(0,u.useFlag)({controlName:"flag-neon-databases",logFlagToAnalytics:!1}),_=!!(null==g||null==(p=g.authorizations)||null==(s=p.viewDeploymentConfig)?void 0:s.isAuthorized),S=(0,u.useFlag)({controlName:"flag-nostalgic-spreadsheet"}),C=(0,u.useFlag)({controlName:"flag-recursive-robotonometry"}),j=k().hasProject,T=eG(),E=eY().isTutorial,R=(0,f.usePackagerConfigs)().configs.some(function(e){return"nix"!==e.id}),I=(0,eD.useExtensionTools)(),A=(null==x?void 0:x.isAdmin)||!!y.query.debug,P=(0,eS.usePaneUIContext)(),D=eI(),O=D.isDotReplitAuthButtonEnabled,N=D.isDotReplitAuthPageEnabled,M=D.isDotReplitAuthLoading,L=D.hasDotReplit&&!M&&(O||N);(0,i.useEffect)(function(){var e=b&&(null==g?void 0:g.authorizations.editPermissions.isAuthorized)?[{type:"multiplayer"}]:[];if(g&&x){var n=[[{type:"shell"},!0],[{type:"webview"},!0],[{type:"vnc"},!0],[{type:"runnerOutput"},!0],[{type:"git"},!0],[{type:"envEditor"},!0],[{type:"tutorial"},E],[{type:"database"},!S],[{type:"neon"},w],[{type:"replAuth"},R&&L],[{type:"replitAuth"},!0],[{type:"preferences"},!0],[{type:"adminPanel"},A],[{type:"deployments"},_],[{type:"searchReplace"},!0],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"extensionDevtools"},T],[{type:"objectStorage"},!0],[{type:"automations"},C],[{type:"workflows"},!0],[{type:"project"},j],[{type:"integrations"},!0],[{type:"agentChat"},b],[{type:"securityScan"},!0],[{type:"developer"},!0]],r=!0,i=!1,a=void 0;try{for(var o,s=I[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;n.push([{type:"extension",data:{extensionId:l.extension.extensionId,installationId:l.extension.installationId,name:l.name||l.extension.manifest.name,icon:l.icon||l.extension.manifest.icon,baseUrl:l.extension.baseUrl,path:l.handler}},!0])}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var u=!0,c=!1,d=void 0;try{for(var f,p=n[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=(0,t._)(f.value,2),y=m[0];m[1]&&(!b||e0.includes(y.type))&&e.push(y)}}catch(e){c=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}h(e.map(function(e){return{title:P.getTitle(e),pane:e}}).sort(function(e,t){return e1.includes(e.pane.type)?-1:e1.includes(t.pane.type)?1:e.title.localeCompare(t.title)}).map(function(e){return e.pane}))}},[h,b,g,x,R,w,E,A,_,T,I,P,j,L,S,C])}(0,o.atom)(function(e){var t=Array.from(e(eX.paneSessionsAtom).values()).flat(),r=e(eX.closedPaneSessionsAtom),i=(0,n._)(t).concat((0,n._)(r)).sort(function(e,t){return t.lastActiveAt-e.lastActiveAt}),a=[],o=!0,s=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=function(){var e=u.value;return 8===a.length?"break":(0,eQ.isFilePaneType)(e.pane.type)||"commands"===e.pane.type?"continue":void(-1===a.findIndex(function(t){return t.type===e.pane.type})&&a.push(e.pane))}();if("break"===d)break}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}return a}),e.s(["useGetToolPanes",()=>e3,"useSetToolPanes",()=>e5,"useToolPanes",()=>e2],794633)},744809,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235),a=e.i(480028);function o(e){return(0,r.jsxs)(i.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_7329_267)",children:[(0,r.jsx)("path",{fill:a.tokens.tealDefault,d:"M7.714 0a3.429 3.429 0 0 1 3.429 3.429v.026a5.143 5.143 0 0 0 5.137 5.116h.006a3.429 3.429 0 0 1 0 6.858 5.143 5.143 0 0 0-5.143 5.142 3.429 3.429 0 1 1-3.429-3.428h.007a5.143 5.143 0 0 0-.007-10.286 3.429 3.429 0 0 1 0-6.857Z"}),(0,r.jsx)("path",{fill:a.tokens.tealStronger,d:"M11.143 12a3.429 3.429 0 1 0-6.857 0 3.429 3.429 0 0 0 6.857 0Z"}),(0,r.jsx)("path",{fill:"url(#paint0_radial_7329_267)",d:"M7.714 0a3.429 3.429 0 0 1 3.429 3.429v.026a5.143 5.143 0 0 0 5.137 5.116h.006a3.429 3.429 0 0 1 0 6.858 5.143 5.143 0 0 0-5.143 5.142 3.429 3.429 0 1 1-3.429-3.428h.007a5.143 5.143 0 0 0-.007-10.286 3.429 3.429 0 0 1 0-6.857Z",opacity:".5"}),(0,r.jsx)("path",{fill:"url(#paint1_radial_7329_267)",d:"M7.714 8.571a3.429 3.429 0 1 1 0 6.858 3.429 3.429 0 0 1 0-6.858Z",opacity:".5"})]}),(0,r.jsxs)("defs",{children:[(0,r.jsxs)("radialGradient",{id:"paint0_radial_7329_267",cx:"0",cy:"0",r:"1",gradientTransform:"rotate(44.479 -2.762 5.679)scale(29.1694)",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#fff",stopOpacity:".79"}),(0,r.jsx)("stop",{offset:"1"})]}),(0,r.jsxs)("radialGradient",{id:"paint1_radial_7329_267",cx:"0",cy:"0",r:"1",gradientTransform:"rotate(44.479 -2.762 5.679)scale(29.1694)",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#fff",stopOpacity:".79"}),(0,r.jsx)("stop",{offset:"1"})]}),(0,r.jsx)("clipPath",{id:"clip0_7329_267",children:(0,r.jsx)("path",{fill:"#fff",d:"M0 .274C0 .123.123 0 .274 0h23.452c.151 0 .274.123.274.274v23.452a.274.274 0 0 1-.274.274H.274A.274.274 0 0 1 0 23.726V.274Z"})})]})]}))}e.s(["default",()=>o])},872274,e=>{e.v({banner:"FooterBanner-module__jOuvMW__banner",text:"FooterBanner-module__jOuvMW__text",textContainer:"FooterBanner-module__jOuvMW__textContainer"})},387457,e=>{"use strict";var t=e.i(276385),n=e.i(173703),r=e.i(960178),i=e.i(625484),a=e.i(872274);function o(e){var o=e.leftElement,s=e.text,l=e.actions,u="string"==typeof s;return(0,t.jsx)(n.ShadesSurface,{clsx:a.default.banner,p:6,gap:6,elevate:!1,children:(0,t.jsxs)(i.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,t.jsxs)(i.View,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,clsx:a.default.textContainer,children:[o,u?(0,t.jsx)(r.Text,{clsx:a.default.text,children:s}):s]}),l]})})}e.s(["FooterBanner",()=>o])},778203,e=>{"use strict";var t=e.i(207237),n=e.i(902379);function r(){var e=(0,t.default)(),r=(0,n.useDevUrl)({fallbackToReplCo:!1}).url;if(!r)return null;var i=new URL(r).host,a=i.indexOf(":"),o="22";return -1!==a&&(i=i.substring(0,a),o="2022"),{sshUser:e,sshHostname:i,sshPort:o}}e.s(["default",()=>r])},100811,623059,e=>{"use strict";var t,n=e.i(297083),r=e.i(346715),i=e.i(817556),a=e.i(276385),o=e.i(960933),s=e.i(862927),l=e.i(9293),u=e.i(106020),c=((t={}).CommandBar="commandbar",t.FiletreeContextMenu="filetree-context-menu",t.SidebarSearch="sidebar-search",t.EditorContextMenu="editor-context-menu",t);e.s(["ContributionType",()=>c],623059);var d=e.i(211397),f=o.Type.Object({id:o.Type.Optional(o.Type.String()),icon:o.Type.Optional(o.Type.String()),type:o.Type.Union([o.Type.Literal("action"),o.Type.Literal("context")]),label:o.Type.String(),description:o.Type.String(),contributions:o.Type.Optional(o.Type.Array(o.Type.Enum(c)))});e.s(["parseCommandProxyToExtensionCommand",()=>function e(t,r){return(0,n._)(function(){var a,o,l;return(0,i._)(this,function(u){switch(u.label){case 0:return[4,t.data];case 1:if(a=u.sent(),!s.Value.Check(f,a))throw Error("Invalid command");if(o=null,"string"==typeof a.icon){if(""===a.icon)throw Error("Command icon cannot be empty. Omit it if you do not want an icon.");o=a.icon}return l={data:{label:a.label,description:a.description,type:a.type,iconPath:o,id:a.id?a.id:void 0},extension:r.extension},a.contributions&&(l.data.contributions=a.contributions,r.logger.warn("Command ".concat(a.label," uses deprecated contributions field"))),"context"===a.type?l.commands=function(a){var o=a.active,s=a.searchQuery,l=a.path;return(0,n._)(function(){var n,a,u,c,d,f;return(0,i._)(this,function(i){switch(i.label){case 0:n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.commands({active:o,searchQuery:s,path:l})];case 2:return n=i.sent(),[3,4];case 3:return a=i.sent(),r.logger.error(a.message,{commandError:a,api:"command"}),[2,[]];case 4:return[4,n.length];case 5:u=i.sent(),c=[],d=0,i.label=6;case 6:if(!(d<u))return[3,9];return f=c.push,[4,e(n[d],r)];case 7:f.apply(c,[i.sent()]),i.label=8;case 8:return d++,[3,6];case 9:return[2,c]}})})()}:l.run=function(){return(0,n._)(function(){var e;return(0,i._)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t.run()];case 1:return n.sent(),[2,void 0];case 2:return e=n.sent(),r.logger.error(e.message,{runError:e,api:"command"}),[2,{type:"error",message:e.message}];case 3:return[2]}})})()},[2,l]}})})()},"wrapExtensionCommand",()=>function e(t,o){if(!["context","action"].includes(t.data.type))throw Error("Command type not supported: "+t.data.type);if("action"===t.data.type)return{match:u.matchLabel,data:{label:t.data.label,description:t.data.description,icon:t.data.iconPath?(0,a.jsx)(d.default,{src:(0,l.getAssetUrl)(t.extension.baseUrl,t.data.iconPath),layout:"fill",alt:""}):(0,a.jsx)(a.Fragment,{children:" "}),type:"action",run:function(){return(0,n._)(function(){var e;return(0,i._)(this,function(n){switch(n.label){case 0:if(!(e=t.run))throw Error("Action command must have run");return[4,e()];case 1:return[2,n.sent()]}})})()}}};var s=t.commands;if(!s)throw Error("Context command must have commands");return{match:u.matchLabel,data:{label:t.data.label,description:t.data.description,icon:t.data.iconPath?(0,a.jsx)(d.default,{src:(0,l.getAssetUrl)(t.extension.baseUrl,t.data.iconPath),layout:"fill",alt:""}):(0,a.jsx)(a.Fragment,{}),type:t.data.type},commands:function(a){var l=a.active,u=a.searchQuery;return(0,n._)(function(){var n;return(0,i._)(this,function(i){switch(i.label){case 0:return[4,s({active:l,searchQuery:u,path:n=(0,r._)(o.path).concat([{data:t.data}])})];case 1:return[2,i.sent().map(function(t){return e(t,{path:n})})]}})})()}}}],100811)},409792,e=>{"use strict";var t={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-pointer-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write; pointer-lock",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true",allowpopups:"true"};t.allow,e.s(["default",0,t])},160083,(e,t,n)=>{var r=e.r(365738),i=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32};i.Diff=function(e,t){return[e,t]},i.prototype.diff_main=function(e,t,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var a=r;if(null==e||null==t)throw Error("Null input. (diff_main)");if(e==t)return e?[new i.Diff(0,e)]:[];void 0===n&&(n=!0);var o=n,s=this.diff_commonPrefix(e,t),l=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);var u=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var c=this.diff_compute_(e,t,o,a);return l&&c.unshift(new i.Diff(0,l)),u&&c.push(new i.Diff(0,u)),this.diff_cleanupMerge(c),c},i.prototype.diff_compute_=function(e,t,n,r){if(!e)return[new i.Diff(1,t)];if(!t)return[new i.Diff(-1,e)];var a,o=e.length>t.length?e:t,s=e.length>t.length?t:e,l=o.indexOf(s);if(-1!=l)return a=[new i.Diff(1,o.substring(0,l)),new i.Diff(0,s),new i.Diff(1,o.substring(l+s.length))],e.length>t.length&&(a[0][0]=a[2][0]=-1),a;if(1==s.length)return[new i.Diff(-1,e),new i.Diff(1,t)];var u=this.diff_halfMatch_(e,t);if(u){var c=u[0],d=u[1],f=u[2],p=u[3],h=u[4],m=this.diff_main(c,f,n,r),g=this.diff_main(d,p,n,r);return m.concat([new i.Diff(0,h)],g)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,r):this.diff_bisect_(e,t,r)},i.prototype.diff_lineMode_=function(e,t,n){var r=this.diff_linesToChars_(e,t);e=r.chars1,t=r.chars2;var a=r.lineArray,o=this.diff_main(e,t,!1,n);this.diff_charsToLines_(o,a),this.diff_cleanupSemantic(o),o.push(new i.Diff(0,""));for(var s=0,l=0,u=0,c="",d="";s<o.length;){switch(o[s][0]){case 1:u++,d+=o[s][1];break;case -1:l++,c+=o[s][1];break;case 0:if(l>=1&&u>=1){o.splice(s-l-u,l+u),s=s-l-u;for(var f=this.diff_main(c,d,!1,n),p=f.length-1;p>=0;p--)o.splice(s,0,f[p]);s+=f.length}u=0,l=0,c="",d=""}s++}return o.pop(),o},i.prototype.diff_bisect_=function(e,t,n){for(var r=e.length,a=t.length,o=Math.ceil((r+a)/2),s=2*o,l=Array(s),u=Array(s),c=0;c<s;c++)l[c]=-1,u[c]=-1;l[o+1]=0,u[o+1]=0;for(var d=r-a,f=d%2!=0,p=0,h=0,m=0,g=0,x=0;x<o&&!(new Date().getTime()>n);x++){for(var y=-x+p;y<=x-h;y+=2){for(var b,w=o+y,_=(b=y==-x||y!=x&&l[w-1]<l[w+1]?l[w+1]:l[w-1]+1)-y;b<r&&_<a&&e.charAt(b)==t.charAt(_);)b++,_++;if(l[w]=b,b>r)h+=2;else if(_>a)p+=2;else if(f){var k=o+d-y;if(k>=0&&k<s&&-1!=u[k]){var S=r-u[k];if(b>=S)return this.diff_bisectSplit_(e,t,b,_,n)}}}for(var C=-x+m;C<=x-g;C+=2){for(var S,k=o+C,j=(S=C==-x||C!=x&&u[k-1]<u[k+1]?u[k+1]:u[k-1]+1)-C;S<r&&j<a&&e.charAt(r-S-1)==t.charAt(a-j-1);)S++,j++;if(u[k]=S,S>r)g+=2;else if(j>a)m+=2;else if(!f){var w=o+d-C;if(w>=0&&w<s&&-1!=l[w]){var b=l[w],_=o+b-w;if(b>=(S=r-S))return this.diff_bisectSplit_(e,t,b,_,n)}}}}return[new i.Diff(-1,e),new i.Diff(1,t)]},i.prototype.diff_bisectSplit_=function(e,t,n,r,i){var a=e.substring(0,n),o=t.substring(0,r),s=e.substring(n),l=t.substring(r),u=this.diff_main(a,o,!1,i),c=this.diff_main(s,l,!1,i);return u.concat(c)},i.prototype.diff_linesToChars_=function(e,t){var n=[],r={};function i(e){for(var t="",i=0,o=-1,s=n.length;o<e.length-1;){-1==(o=e.indexOf("\n",i))&&(o=e.length-1);var l=e.substring(i,o+1);(r.hasOwnProperty?r.hasOwnProperty(l):void 0!==r[l])?t+=String.fromCharCode(r[l]):(s==a&&(l=e.substring(i),o=e.length),t+=String.fromCharCode(s),r[l]=s,n[s++]=l),i=o+1}return t}n[0]="";var a=4e4,o=i(e);return a=65535,{chars1:o,chars2:i(t),lineArray:n}},i.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],i=[],a=0;a<r.length;a++)i[a]=t[r.charCodeAt(a)];e[n][1]=i.join("")}},i.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,a=0;n<i;)e.substring(a,i)==t.substring(a,i)?a=n=i:r=i,i=Math.floor((r-n)/2+n);return i},i.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,a=0;n<i;)e.substring(e.length-i,e.length-a)==t.substring(t.length-i,t.length-a)?a=n=i:r=i,i=Math.floor((r-n)/2+n);return i},i.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var i=Math.min(n,r);if(e==t)return i;for(var a=0,o=1;;){var s=e.substring(i-o),l=t.indexOf(s);if(-1==l)return a;o+=l,(0==l||e.substring(i-o)==t.substring(0,o))&&(a=o,o++)}},i.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n,r,i,a,o,s=e.length>t.length?e:t,l=e.length>t.length?t:e;if(s.length<4||2*l.length<s.length)return null;var u=this;function c(e,t,n){for(var r,i,a,o,s=e.substring(n,n+Math.floor(e.length/4)),l=-1,c="";-1!=(l=t.indexOf(s,l+1));){var d=u.diff_commonPrefix(e.substring(n),t.substring(l)),f=u.diff_commonSuffix(e.substring(0,n),t.substring(0,l));c.length<f+d&&(c=t.substring(l-f,l)+t.substring(l,l+d),r=e.substring(0,n-f),i=e.substring(n+d),a=t.substring(0,l-f),o=t.substring(l+d))}return 2*c.length>=e.length?[r,i,a,o,c]:null}var d=c(s,l,Math.ceil(s.length/4)),f=c(s,l,Math.ceil(s.length/2));return d||f?(n=f?d&&d[4].length>f[4].length?d:f:d,e.length>t.length?(r=n[0],i=n[1],a=n[2],o=n[3]):(a=n[0],o=n[1],r=n[2],i=n[3]),[r,i,a,o,n[4]]):null},i.prototype.diff_cleanupSemantic=function(e){for(var t=!1,n=[],r=0,a=null,o=0,s=0,l=0,u=0,c=0;o<e.length;)0==e[o][0]?(n[r++]=o,s=u,l=c,u=0,c=0,a=e[o][1]):(1==e[o][0]?u+=e[o][1].length:c+=e[o][1].length,a&&a.length<=Math.max(s,l)&&a.length<=Math.max(u,c)&&(e.splice(n[r-1],0,new i.Diff(-1,a)),e[n[r-1]+1][0]=1,r--,o=--r>0?n[r-1]:-1,s=0,l=0,u=0,c=0,a=null,t=!0)),o++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),o=1;o<e.length;){if(-1==e[o-1][0]&&1==e[o][0]){var d=e[o-1][1],f=e[o][1],p=this.diff_commonOverlap_(d,f),h=this.diff_commonOverlap_(f,d);p>=h?(p>=d.length/2||p>=f.length/2)&&(e.splice(o,0,new i.Diff(0,f.substring(0,p))),e[o-1][1]=d.substring(0,d.length-p),e[o+1][1]=f.substring(p),o++):(h>=d.length/2||h>=f.length/2)&&(e.splice(o,0,new i.Diff(0,d.substring(0,h))),e[o-1][0]=1,e[o-1][1]=f.substring(0,f.length-h),e[o+1][0]=-1,e[o+1][1]=d.substring(h),o++),o++}o++}},i.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var n=e.charAt(e.length-1),r=t.charAt(0),a=n.match(i.nonAlphaNumericRegex_),o=r.match(i.nonAlphaNumericRegex_),s=a&&n.match(i.whitespaceRegex_),l=o&&r.match(i.whitespaceRegex_),u=s&&n.match(i.linebreakRegex_),c=l&&r.match(i.linebreakRegex_),d=u&&e.match(i.blanklineEndRegex_),f=c&&t.match(i.blanklineStartRegex_);if(d||f)return 5;if(u||c)return 4;if(a&&!s&&l)return 3;if(s||l)return 2;if(a||o)return 1;return 0}for(var n=1;n<e.length-1;){if(0==e[n-1][0]&&0==e[n+1][0]){var r=e[n-1][1],a=e[n][1],o=e[n+1][1],s=this.diff_commonSuffix(r,a);if(s){var l=a.substring(a.length-s);r=r.substring(0,r.length-s),a=l+a.substring(0,a.length-s),o=l+o}for(var u=r,c=a,d=o,f=t(r,a)+t(a,o);a.charAt(0)===o.charAt(0);){r+=a.charAt(0),a=a.substring(1)+o.charAt(0),o=o.substring(1);var p=t(r,a)+t(a,o);p>=f&&(f=p,u=r,c=a,d=o)}e[n-1][1]!=u&&(u?e[n-1][1]=u:(e.splice(n-1,1),n--),e[n][1]=c,d?e[n+1][1]=d:(e.splice(n+1,1),n--))}n++}},i.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,i.whitespaceRegex_=/\s/,i.linebreakRegex_=/[\r\n]/,i.blanklineEndRegex_=/\n\r?\n$/,i.blanklineStartRegex_=/^\r?\n\r?\n/,i.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],r=0,a=null,o=0,s=!1,l=!1,u=!1,c=!1;o<e.length;)0==e[o][0]?(e[o][1].length<this.Diff_EditCost&&(u||c)?(n[r++]=o,s=u,l=c,a=e[o][1]):(r=0,a=null),u=c=!1):(-1==e[o][0]?c=!0:u=!0,a&&(s&&l&&u&&c||a.length<this.Diff_EditCost/2&&s+l+u+c==3)&&(e.splice(n[r-1],0,new i.Diff(-1,a)),e[n[r-1]+1][0]=1,r--,a=null,s&&l?(u=c=!0,r=0):(o=--r>0?n[r-1]:-1,u=c=!1),t=!0)),o++;t&&this.diff_cleanupMerge(e)},i.prototype.diff_cleanupMerge=function(e){e.push(new i.Diff(0,""));for(var t,n=0,r=0,a=0,o="",s="";n<e.length;)switch(e[n][0]){case 1:a++,s+=e[n][1],n++;break;case -1:r++,o+=e[n][1],n++;break;case 0:r+a>1?(0!==r&&0!==a&&(0!==(t=this.diff_commonPrefix(s,o))&&(n-r-a>0&&0==e[n-r-a-1][0]?e[n-r-a-1][1]+=s.substring(0,t):(e.splice(0,0,new i.Diff(0,s.substring(0,t))),n++),s=s.substring(t),o=o.substring(t)),0!==(t=this.diff_commonSuffix(s,o))&&(e[n][1]=s.substring(s.length-t)+e[n][1],s=s.substring(0,s.length-t),o=o.substring(0,o.length-t))),n-=r+a,e.splice(n,r+a),o.length&&(e.splice(n,0,new i.Diff(-1,o)),n++),s.length&&(e.splice(n,0,new i.Diff(1,s)),n++),n++):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,a=0,r=0,o="",s=""}""===e[e.length-1][1]&&e.pop();var l=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),l=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),l=!0)),n++;l&&this.diff_cleanupMerge(e)},i.prototype.diff_xIndex=function(e,t){var n,r=0,i=0,a=0,o=0;for(n=0;n<e.length&&(1!==e[n][0]&&(r+=e[n][1].length),-1!==e[n][0]&&(i+=e[n][1].length),!(r>t));n++)a=r,o=i;return e.length!=n&&-1===e[n][0]?o:o+(t-a)},i.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,r=/</g,i=/>/g,a=/\n/g,o=0;o<e.length;o++){var s=e[o][0],l=e[o][1].replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(a,"&para;<br>");switch(s){case 1:t[o]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case -1:t[o]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:t[o]="<span>"+l+"</span>"}}return t.join("")},i.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},i.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)-1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},i.prototype.diff_levenshtein=function(e){for(var t=0,n=0,r=0,i=0;i<e.length;i++){var a=e[i][0],o=e[i][1];switch(a){case 1:n+=o.length;break;case -1:r+=o.length;break;case 0:t+=Math.max(n,r),n=0,r=0}}return t+Math.max(n,r)},i.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case -1:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("	").replace(/%20/g," ")},i.prototype.diff_fromDelta=function(e,t){for(var n=[],r=0,a=0,o=t.split(/\t/g),s=0;s<o.length;s++){var l=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{n[r++]=new i.Diff(1,decodeURI(l))}catch(e){throw Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var u=parseInt(l,10);if(isNaN(u)||u<0)throw Error("Invalid number in diff_fromDelta: "+l);var c=e.substring(a,a+=u);"="==o[s].charAt(0)?n[r++]=new i.Diff(0,c):n[r++]=new i.Diff(-1,c);break;default:if(o[s])throw Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(a!=e.length)throw Error("Delta length ("+a+") does not equal source text length ("+e.length+").");return n},i.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw Error("Null input. (match_main)");return(n=Math.max(0,Math.min(n,e.length)),e==t)?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},i.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var r,i,a,o=this.match_alphabet_(t),s=this;function l(e,r){var i=e/t.length,a=Math.abs(n-r);return s.Match_Distance?i+a/s.Match_Distance:a?1:i}var u=this.Match_Threshold,c=e.indexOf(t,n);-1!=c&&(u=Math.min(l(0,c),u),-1!=(c=e.lastIndexOf(t,n+t.length))&&(u=Math.min(l(0,c),u)));var d=1<<t.length-1;c=-1;for(var f=t.length+e.length,p=0;p<t.length;p++){for(r=0,i=f;r<i;)l(p,n+i)<=u?r=i:f=i,i=Math.floor((f-r)/2+r);f=i;var h=Math.max(1,n-i+1),m=Math.min(n+i,e.length)+t.length,g=Array(m+2);g[m+1]=(1<<p)-1;for(var x=m;x>=h;x--){var y=o[e.charAt(x-1)];if(0===p?g[x]=(g[x+1]<<1|1)&y:g[x]=(g[x+1]<<1|1)&y|((a[x+1]|a[x])<<1|1)|a[x+1],g[x]&d){var b=l(p,x-1);if(b<=u)if(u=b,(c=x-1)>n)h=Math.max(1,2*n-c);else break}}if(l(p+1,n)>u)break;a=g}return c},i.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(var n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},i.prototype.patch_addContext_=function(e,t){if(0!=t.length){if(null===e.start2)throw Error("patch not initialized");for(var n=t.substring(e.start2,e.start2+e.length1),r=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=t.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin;var a=t.substring(e.start2-r,e.start2);a&&e.diffs.unshift(new i.Diff(0,a));var o=t.substring(e.start2+e.length1,e.start2+e.length1+r);o&&e.diffs.push(new i.Diff(0,o)),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+o.length,e.length2+=a.length+o.length}},i.prototype.patch_make=function(e,t,n){if("string"==typeof e&&"string"==typeof t&&void 0===n)a=e,(o=this.diff_main(a,t,!0)).length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&(void 0===e?"undefined":r._(e))=="object"&&void 0===t&&void 0===n)o=e,a=this.diff_text1(o);else if("string"==typeof e&&t&&(void 0===t?"undefined":r._(t))=="object"&&void 0===n)a=e,o=t;else if("string"==typeof e&&"string"==typeof t&&n&&(void 0===n?"undefined":r._(n))=="object")a=e,o=n;else throw Error("Unknown call format to patch_make.");if(0===o.length)return[];for(var a,o,s=[],l=new i.patch_obj,u=0,c=0,d=0,f=a,p=a,h=0;h<o.length;h++){var m=o[h][0],g=o[h][1];switch(!u&&0!==m&&(l.start1=c,l.start2=d),m){case 1:l.diffs[u++]=o[h],l.length2+=g.length,p=p.substring(0,d)+g+p.substring(d);break;case -1:l.length1+=g.length,l.diffs[u++]=o[h],p=p.substring(0,d)+p.substring(d+g.length);break;case 0:g.length<=2*this.Patch_Margin&&u&&o.length!=h+1?(l.diffs[u++]=o[h],l.length1+=g.length,l.length2+=g.length):g.length>=2*this.Patch_Margin&&u&&(this.patch_addContext_(l,f),s.push(l),l=new i.patch_obj,u=0,f=p,c=d)}1!==m&&(c+=g.length),-1!==m&&(d+=g.length)}return u&&(this.patch_addContext_(l,f),s.push(l)),s},i.prototype.patch_deepCopy=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],a=new i.patch_obj;a.diffs=[];for(var o=0;o<r.diffs.length;o++)a.diffs[o]=new i.Diff(r.diffs[o][0],r.diffs[o][1]);a.start1=r.start1,a.start2=r.start2,a.length1=r.length1,a.length2=r.length2,t[n]=a}return t},i.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var r=0,i=[],a=0;a<e.length;a++){var o=e[a].start2+r,s=this.diff_text1(e[a].diffs),l=-1;if(s.length>this.Match_MaxBits?-1!=(c=this.match_main(t,s.substring(0,this.Match_MaxBits),o))&&(-1==(l=this.match_main(t,s.substring(s.length-this.Match_MaxBits),o+s.length-this.Match_MaxBits))||c>=l)&&(c=-1):c=this.match_main(t,s,o),-1==c)i[a]=!1,r-=e[a].length2-e[a].length1;else if(i[a]=!0,r=c-o,d=-1==l?t.substring(c,c+s.length):t.substring(c,l+this.Match_MaxBits),s==d)t=t.substring(0,c)+this.diff_text2(e[a].diffs)+t.substring(c+s.length);else{var u=this.diff_main(s,d,!1);if(s.length>this.Match_MaxBits&&this.diff_levenshtein(u)/s.length>this.Patch_DeleteThreshold)i[a]=!1;else{this.diff_cleanupSemanticLossless(u);for(var c,d,f,p=0,h=0;h<e[a].diffs.length;h++){var m=e[a].diffs[h];0!==m[0]&&(f=this.diff_xIndex(u,p)),1===m[0]?t=t.substring(0,c+f)+m[1]+t.substring(c+f):-1===m[0]&&(t=t.substring(0,c+f)+t.substring(c+this.diff_xIndex(u,p+m[1].length))),-1!==m[0]&&(p+=m[1].length)}}}}return[t=t.substring(n.length,t.length-n.length),i]},i.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",r=1;r<=t;r++)n+=String.fromCharCode(r);for(var r=0;r<e.length;r++)e[r].start1+=t,e[r].start2+=t;var a=e[0],o=a.diffs;if(0==o.length||0!=o[0][0])o.unshift(new i.Diff(0,n)),a.start1-=t,a.start2-=t,a.length1+=t,a.length2+=t;else if(t>o[0][1].length){var s=t-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],a.start1-=s,a.start2-=s,a.length1+=s,a.length2+=s}if(0==(o=(a=e[e.length-1]).diffs).length||0!=o[o.length-1][0])o.push(new i.Diff(0,n)),a.length1+=t,a.length2+=t;else if(t>o[o.length-1][1].length){var s=t-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,s),a.length1+=s,a.length2+=s}return n},i.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=t)){var r=e[n];e.splice(n--,1);for(var a=r.start1,o=r.start2,s="";0!==r.diffs.length;){var l=new i.patch_obj,u=!0;for(l.start1=a-s.length,l.start2=o-s.length,""!==s&&(l.length1=l.length2=s.length,l.diffs.push(new i.Diff(0,s)));0!==r.diffs.length&&l.length1<t-this.Patch_Margin;){var c=r.diffs[0][0],d=r.diffs[0][1];1===c?(l.length2+=d.length,o+=d.length,l.diffs.push(r.diffs.shift()),u=!1):-1===c&&1==l.diffs.length&&0==l.diffs[0][0]&&d.length>2*t?(l.length1+=d.length,a+=d.length,u=!1,l.diffs.push(new i.Diff(c,d)),r.diffs.shift()):(d=d.substring(0,t-l.length1-this.Patch_Margin),l.length1+=d.length,a+=d.length,0===c?(l.length2+=d.length,o+=d.length):u=!1,l.diffs.push(new i.Diff(c,d)),d==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(d.length))}s=(s=this.diff_text2(l.diffs)).substring(s.length-this.Patch_Margin);var f=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==f&&(l.length1+=f.length,l.length2+=f.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=f:l.diffs.push(new i.Diff(0,f))),u||e.splice(++n,0,l)}}},i.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},i.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var n=e.split("\n"),r=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<n.length;){var o=n[r].match(a);if(!o)throw Error("Invalid patch string: "+n[r]);var s=new i.patch_obj;for(t.push(s),s.start1=parseInt(o[1],10),""===o[2]?(s.start1--,s.length1=1):"0"==o[2]?s.length1=0:(s.start1--,s.length1=parseInt(o[2],10)),s.start2=parseInt(o[3],10),""===o[4]?(s.start2--,s.length2=1):"0"==o[4]?s.length2=0:(s.start2--,s.length2=parseInt(o[4],10)),r++;r<n.length;){var l=n[r].charAt(0);try{var u=decodeURI(n[r].substring(1))}catch(e){throw Error("Illegal escape in patch_fromText: "+u)}if("-"==l)s.diffs.push(new i.Diff(-1,u));else if("+"==l)s.diffs.push(new i.Diff(1,u));else if(" "==l)s.diffs.push(new i.Diff(0,u));else if("@"==l)break;else if(""===l);else throw Error('Invalid patch mode "'+l+'" in: '+u);r++}}return t},i.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},i.patch_obj.prototype.toString=function(){e=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1;for(var e,t,n=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2,r=["@@ -"+e+" +"+n+" @@\n"],i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case 1:t="+";break;case -1:t="-";break;case 0:t=" "}r[i+1]=t+encodeURI(this.diffs[i][1])+"\n"}return r.join("").replace(/%20/g," ")},t.exports=i,t.exports.diff_match_patch=i,t.exports.DIFF_DELETE=-1,t.exports.DIFF_INSERT=1,t.exports.DIFF_EQUAL=0},960308,e=>{"use strict";var t=e.i(904851),n=e.i(90659),r=e.i(721281),i=e.i(530658),a=e.i(817556),o=e.i(160083),s=o.default.DIFF_DELETE,l=o.default.DIFF_INSERT,u=o.default.DIFF_EQUAL;function c(e,t){var n=new o.default,r=n.diff_linesToChars_(e,t),i=r.chars1,a=r.chars2,s=r.lineArray,l=n.diff_main(i,a,!1);return n.diff_charsToLines_(l,s),l}function d(e){return e.split("\n").length-1}function f(e,t,n){if(e>0){var r=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===n)return 0;var i=t.indexOf("\n",r);return -1===i?null:1===n?i+1:e(t,n-1,i+1)}(n,t);if(null!==r)return{lineNumber:t,character:r,padding:e}}return null}function p(e,t){var n=!1,r=!1;n="\n"===e[e.length-1],r="\n"===t[t.length-1];for(var a=c(e+(n?"":"\n"),t+(r?"":"\n")),o=0,p=0,h=[],m=[],g=[],x=[],y=0,b=0,w=0;w<a.length;w++){var _=(0,i._)(a[w],2),k=_[0],S=d(_[1]);switch(k){case s:var C,j=(0,i._)(null!=(C=a[w+1])?C:[],2),T=j[0],E=j[1];o+=S;for(var R=0;R<S;R++)h.push(o-R);var I=S;T===l&&(I-=d(E));var A=f(I,p,t);A&&x.push(A);break;case l:var P,D=(0,i._)(null!=(P=a[w-1])?P:[],2),O=D[0],N=D[1];p+=S;for(var M=0;M<S;M++)m.push(p-M);var L=S;O===s&&(L-=d(N));var B=f(L,o,e);B&&g.push(B);break;case u:p>b&&(b=p),o>y&&(y=o),o+=S,p+=S}}return{leftPadded:g.filter(function(e){return e.lineNumber<b}),rightPadded:x.filter(function(e){return e.lineNumber<y}),leftColored:h,rightColored:m,changedTrailingNewline:n!==r,leftTrailingNewline:n,rightTrailingNewline:r}}var h=function(){function e(n,a){(0,t._)(this,e),(0,r._)(this,"deleted",void 0),(0,r._)(this,"inserted",void 0),(0,r._)(this,"linePositions",void 0),(0,r._)(this,"lineLengths",void 0),(0,r._)(this,"currentTrailingNewline",void 0),(0,r._)(this,"otherTrailingNewline",void 0),(0,r._)(this,"changedTrailingNewline",void 0),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===n[n.length-1],this.otherTrailingNewline="\n"===a[a.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=c(n,a),d=[],f=!0,p=!1,h=void 0;try{for(var m,g=o[Symbol.iterator]();!(f=(m=g.next()).done);f=!0){var x=(0,i._)(m.value,2),y=x[0],b=x[1].split("\n");""===b[b.length-1]&&b.pop();var w=!0,_=!1,k=void 0;try{for(var S,C=b[Symbol.iterator]();!(w=(S=C.next()).done);w=!0){var j=S.value;d.push([y,j])}}catch(e){_=!0,k=e}finally{try{w||null==C.return||C.return()}finally{if(_)throw k}}}}catch(e){p=!0,h=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}this.currentTrailingNewline&&!this.otherTrailingNewline?d.push([s,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?d.push([l,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&d.push([u,""]);var T=1,E=0,R=1,I=!0,A=!1,P=void 0;try{for(var D,O=d[Symbol.iterator]();!(I=(D=O.next()).done);I=!0){var N=(0,i._)(D.value,2),M=N[0],L=N[1];switch(M){case s:this.linePositions.set(T,E),this.lineLengths.set(T,L.length),this.deleted.add(T),E+=L.length+1,T++;break;case l:var B=T-1,V=this.inserted.get(B);V||(V=[],this.inserted.set(B,V)),V.push({number:R,content:L}),R++;break;case u:this.linePositions.set(T,E),this.lineLengths.set(T,L.length),E+=L.length+1,T++,R++}}}catch(e){A=!0,P=e}finally{try{I||null==O.return||O.return()}finally{if(A)throw P}}}return(0,n._)(e,[{key:"startInsertions",value:function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null}},{key:"lineIsDeleted",value:function(e){return this.deleted.has(e)}},{key:"lineInsertions",value:function(e){var t=this.inserted.get(e);return t&&0!==t.length?t:null}},{key:"lineInsertedContent",value:function(e){var t=this.lineInsertions(e);return t?t.map(function(e){return e.content}).join("\n"):null}},{key:"offsetFor",value:function(e){var t,n,r;r=0+(null!=(n=null==(t=this.inserted.get(0))?void 0:t.length)?n:0);for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var a=this.lineInsertions(i);a&&(r+=a.length)}return r}},{key:"linePosition",value:function(e){var t;return null!=(t=this.linePositions.get(e))?t:null}},{key:"lineLength",value:function(e){var t;return null!=(t=this.lineLengths.get(e))?t:null}},{key:"line",value:function(e){var t=this.linePosition(e),n=this.lineLength(e);if(null===t||null===n)return null;var r=this.offsetFor(e),i=this.lineIsDeleted(e),a=this.lineInsertions(e);return{number:e,from:t,to:t+n,length:n,offset:r,isDeleted:i,insertions:a}}},{key:"lines",value:function(){var e,t,n,r,o,s,l,u;return(0,a._)(this,function(a){switch(a.label){case 0:e=!0,t=!1,n=void 0,a.label=1;case 1:a.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),a.label=2;case 2:if(e=(o=r.next()).done)return[3,5];if(s=(0,i._)(o.value,1)[0],!(l=this.line(s)))throw Error("line should not be null");return[4,l];case 3:a.sent(),a.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return u=a.sent(),t=!0,n=u,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}})}}]),e}();e.s(["LineBasedDiff",()=>h,"getDiffViewerInstructions",()=>p])},816639,e=>{"use strict";var t,n,r,i=e.i(878420),a=e.i(64386),o=e.i(886513),s=e.i(530658),l=e.i(276385),u=e.i(389959),c=e.i(399119),d=e.i(904851),f=e.i(90659),p=e.i(721281),h=e.i(445789),m=e.i(753950),g=e.i(179302),x=e.i(960308),y=g.EditorView.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),b=g.Decoration.line({attributes:{class:"cm-diff-inserted"}}),w=g.Decoration.line({attributes:{class:"cm-diff-deleted"}}),_=m.StateEffect.define({map:function(e,t){return e.map(t)}}),k=function(e){function t(){return(0,d._)(this,t),(0,c._)(this,t,arguments)}return(0,h._)(t,e),(0,f._)(t,[{key:"toDOM",value:function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e}},{key:"ignoreEvent",value:function(){return!1}}]),t}(g.WidgetType);function S(e){var t=new m.RangeSetBuilder,n=new k;e.sort(function(e,t){return e.character-t.character});var r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)for(var l=o.value,u=l.character,c=l.padding,d=0;d<c;d++)t.add(u,u,g.Decoration.widget({widget:n,side:-1,block:!0}))}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t.finish()}function C(e){var t=e.coloredLines,n=e.colorDecoration;return[y,g.ViewPlugin.fromClass(function e(r){(0,d._)(this,e),(0,p._)(this,"decorations",void 0);var i=new m.RangeSetBuilder,a=!0,o=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,f=r.state.doc.line(c);i.add(f.from,f.from,n)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}this.decorations=i.finish()},{decorations:function(e){return e.decorations}}),m.StateField.define({create:function(){return g.Decoration.none},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t.effects[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.is(_))return s.value}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t.docChanged?e.map(t.changes):e},provide:function(e){return g.EditorView.decorations.from(e)}})]}var j=e.i(221250),T=e.i(542101),E=e.i(409146),R=(t=function(e,t){return g.EditorView.domEventHandlers({scroll:function(n,r){if(r===e&&n.target){var i=n.target;if(i.scrollTop){var a=i.scrollTop;t.scrollDOM.scrollTo({top:a})}}}})},n=new m.Compartment,r=new m.Compartment,{extensions:function(){return{right:n.of([]),left:r.of([])}},setup:function(e,i){e.dispatch({effects:r.reconfigure(t(e,i))}),i.dispatch({effects:n.reconfigure(t(i,e))})}}),I=R.extensions,A=R.setup;function P(e){var t=e.left,n=e.right,r=e.showDiffDecorations,l=void 0===r||r,c=t.code,d=(0,o._)(t,["code"]),f=n.code,p=(0,o._)(n,["code"]),h=(0,T.default)(),g=h.ref,y=h.view,k=(0,T.default)(),j=k.ref,E=k.view,R=(0,u.useMemo)(function(){var e=I().left;return d.extensions?[d.extensions,e]:e},[d.extensions]),P=(0,u.useMemo)(function(){var e=I().right;return p.extensions?[p.extensions,e]:e},[p.extensions]);d=(0,a._)((0,i._)({},d),{extensions:R}),p=(0,a._)((0,i._)({},p),{extensions:P});var D=(0,s._)((0,u.useState)(!1),2),O=D[0],N=D[1],M=(0,s._)((0,u.useState)(!1),2),L=M[0],B=M[1];return(0,u.useEffect)(function(){if(y&&E&&O&&L&&l){var e=setTimeout(function(){var e;A(y,E),e=(0,x.getDiffViewerInstructions)(y.state.doc.sliceString(0),E.state.doc.sliceString(0)),y.dispatch({effects:[m.StateEffect.appendConfig.of(C({coloredLines:e.leftColored.sort(function(e,t){return e-t}),colorDecoration:w})),_.of(S(e.leftPadded))]}),E.dispatch({effects:[m.StateEffect.appendConfig.of(C({coloredLines:e.rightColored.sort(function(e,t){return e-t}),colorDecoration:b})),_.of(S(e.rightPadded))]})});return function(){return clearTimeout(e)}}},[y,E,O,L,l]),(0,u.useEffect)(function(){y&&(y.dispatch({changes:{from:0,to:y.state.doc.length,insert:c}}),N(!0))},[c,y]),(0,u.useEffect)(function(){E&&(E.dispatch({changes:{from:0,to:E.state.doc.length,insert:f}}),B(!0))},[f,E]),{left:{view:y,ref:g,code:c,options:d,ready:O},right:{view:E,ref:j,code:f,options:p,ready:L}}}function D(e){var t=e.diffViewer,n=(0,o._)(e,["diffViewer"]),r=(0,i._)({},t.options,n);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.default,(0,i._)({ref:t.ref,css:{height:t.ready?0:"auto"},initialDoc:t.code,lineWrapping:!1,readOnly:!0},r)),!t.ready&&(0,l.jsx)(E.default,{code:t.code,language:r.language,filePath:r.filePath,lineNumbers:!r.hideGutter,fontSize:r.fontSize})]})}e.s(["DiffComponent",()=>D,"useDiffViewers",()=>P],816639)},725182,e=>{"use strict";e.i(148382);var t=e.i(485273),n=e.i(878420),r=e.i(569384),i=e.i(973245),a=e.i(304277);function o(){var e=(0,r._)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return o=function(){return e},e}e.i(566901);var s={},l=(0,i.gql)(o());function u(){var e,r,i=(e=(0,n._)({},s,void 0),a.useQuery(l,e)).data,o=(0,t.useRouter)();return(null==i||null==(r=i.currentUser)?void 0:r.isAdmin)||!!o.query.debug}e.s(["useShowAdmin",()=>u],725182)},989740,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(346715),i=e.i(817556),a=e.i(389959),o=e.i(816639),s=e.i(205104),l=e.i(903381),u=e.i(858248),c=e.i(709485),d=e.i(529810),f=e.i(37292),p=e.i(725182),h=e.i(965863);function m(e){var m,g,x=e.moveOrDeleteFile,y=(0,d.default)().fs,b=(0,a.useRef)(new Map),w=(0,h.useActiveFile)(),_=(0,n._)((0,a.useState)(!1),2),k=_[0],S=_[1],C=(0,n._)((0,a.useState)(!1),2),j=C[0],T=C[1],E=(0,n._)((0,a.useState)([]),2),R=E[0],I=E[1],A=(0,p.useShowAdmin)(),P=(0,f.useThrowBsod)(),D=R.map(function(e){return e.path}).map(function(e){return{title:e,path:e}}),O=(0,n._)((0,a.useState)(),2),N=O[0],M=O[1],L=(0,h.useHandleFileMoveOrDelete)();(0,a.useEffect)(function(){if(w&&!b.current.has(w)){var e=function(e){var t=e.node.path;L(e.eventType===l.ChangeEventType.Move?{path:t,type:"move",to:e.to}:{path:t,type:"delete"}),x&&x(e),b.current.delete(w),I(function(e){return e.filter(function(e){return e.path!==w})})};(0,s.isOTFile)(w)?y.watchTextFile(w,{onMoveOrDelete:e,onError:function(e,t){e.code||(y.flush(),y.persist({skipDebounce:!0}),P({error:e,extras:t,tags:{ot:!0},origin:"useContentsDiverged: fs.watchTextFile"}))},onReconnectFail:function(e,t){I(function(n){return(0,r._)(n.filter(function(e){return e.path!==w})||[]).concat([{path:w,prompt:t,cb:e}])}),S(!0),N||M(w)}}):y.watchFile(w,{onChange:function(){},onMoveOrDelete:e}),b.current.set(w,!0)}},[w,y,P,x,N,L]);var B=N?R.find(function(e){return e.path===N}):null,V=null==B?void 0:B.prompt,F=(0,o.useDiffViewers)({left:{code:null!=(m=null==V?void 0:V.localContent)?m:"",filePath:N},right:{code:null!=(g=null==V?void 0:V.remoteContent)?g:"",filePath:N}});return{isConverging:j,didContentsDiverge:k,showMoreDetail:A,failedFiles:R,failedFilesOptions:D,selectedFile:N,setSelectedFile:M,reviewingPrompt:V,onChoice:function(e){return(0,t._)(function(){return(0,i._)(this,function(t){switch(t.label){case 0:return(0,u.track)(c.events.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,u.track)(c.events.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),T(!0),[4,Promise.all(R.map(function(t){return I(function(e){var n=e.filter(function(e){return e.path!==t.path});return 0===n.length?S(!1):M(n[0].path),n}),t.cb(e)}))];case 1:return t.sent(),T(!1),[2]}})})()},local:F.left,remote:F.right}}e.s(["default",()=>m])},260924,317919,e=>{"use strict";var t=e.i(904851),n=e.i(90659),r=e.i(721281),i=e.i(530658),a=e.i(119468),o=e.i(389959),s=e.i(223808),l=e.i(110812),u=e.i(282453),c=function(){function e(n){var o=this;if((0,t._)(this,e),(0,r._)(this,"map",void 0),(0,r._)(this,"saveToLocalStorage",(0,s.default)(function(){u.default.set("stateCache",{version:2,entries:Array.from(o.map.entries())})},500,{leading:!1,trailing:!0,maxWait:1e3})),this.map=new l.LRU(20),n){if((void 0===n?"undefined":(0,a._)(n))!=="object"||null===n||!Object.prototype.hasOwnProperty.call(n,"version")||!Object.prototype.hasOwnProperty.call(n,"entries")||"number"!=typeof n.version||2!==n.version)return;var c=n.entries,d=!0,f=!1,p=void 0;try{for(var h,m=c[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=(0,i._)(h.value,2),x=g[0],y=g[1];this.map.set(x,y)}}catch(e){f=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}}}return(0,n._)(e,[{key:"set",value:function(e,t){this.map.set(e,t),this.saveToLocalStorage()}},{key:"get",value:function(e){return this.map.get(e)}}]),e}(),d=(0,o.createContext)(null);e.s(["StateCache",()=>c,"StateCacheContext",()=>d],260924);var f=e.i(276385),p=e.i(541793),h=e.i(399344),m=e.i(830597);function g(e){var t=(0,i._)((0,o.useState)(function(){var t,n,r,i,a,o,s;return n=(t={fs:e.fs,container:e.container,dotReplit:e.dotReplit,ports:e.ports,secrets:e.secrets}).container,r=t.fs,i=t.dotReplit,a=t.ports,o=t.secrets,(s=(0,p.createStore)()).set(h.containerAtom,n),s.set(h.fsAtom,r),s.set(h.dotReplitAtom,i),s.set(h.portsAtom,a),s.set(h.secretsAtom,o),s}),1)[0];return(0,f.jsxs)(m.DeploymentContext.Provider,{value:t,children:[e.children,(0,f.jsx)(h.Init,{replId:e.replId,orgId:e.orgId})]})}e.s(["DeploymentProvider",()=>g],317919)},612633,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18.667 1.25c1.328 0 2.458.148 3.196.887.739.738.887 1.868.887 3.196v6c0 1.042-.164 1.975-.803 2.614-.552.553-1.325.749-2.197.792v2.705c0 1.375-.22 2.531-.997 3.309-.778.778-1.934.997-3.309.997H6.556c-1.375 0-2.531-.22-3.309-.997-.778-.778-.997-1.934-.997-3.309V8.556c0-1.375.22-2.53.997-3.309.778-.778 1.934-.997 3.309-.997H9.26c.043-.872.24-1.645.793-2.197.639-.64 1.572-.803 2.614-.803h6ZM6.556 5.75c-1.292 0-1.914.225-2.247.559-.334.333-.559.955-.559 2.247v8.888c0 1.292.225 1.914.559 2.247.333.334.955.559 2.247.559h8.888c1.292 0 1.914-.226 2.247-.559.334-.333.559-.955.559-2.247V14.75h-5.583c-1.042 0-1.975-.164-2.614-.803-.64-.639-.803-1.572-.803-2.614V5.75H6.556Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},602389,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsxs)(i.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{d:"M15.721.681A2.137 2.137 0 0 1 18.146.28l4.638 2.233a2.142 2.142 0 0 1 1.213 1.93v.299h-.735v-.303c0-.54-.31-1.033-.797-1.267L17.828.942a1.403 1.403 0 0 0-1.6.272c.485-.486 1.294-.195 1.396.445l-.115-.055a.667.667 0 0 0-.762.13l-.016.015-8.786 8.01-1.19-.902L15.72.68Z"}),(0,r.jsx)("path",{d:"m17.634 5.968-7.343 5.571 1.215.922 6.128-4.649V5.968ZM6.798 14.189l1.104 1.006-3.975 3.016a1.673 1.673 0 0 1-2.136-.095l-1.24-1.128a1.673 1.673 0 0 1-.002-2.473l3.303-3.012 1.09.994-3.403 3.104a.203.203 0 0 0 0 .3l1.24 1.128c.073.066.182.07.26.011l3.759-2.851Z"}),(0,r.jsx)("path",{d:"M16.228 22.786c.42.421 1.063.53 1.6.272l4.637-2.23c.487-.234.797-.727.797-1.267v-.302H24v.298c0 .824-.472 1.575-1.214 1.933l-4.639 2.233a2.14 2.14 0 0 1-2.428-.402L.547 9.488a1.676 1.676 0 0 1 .002-2.479l1.24-1.127a1.676 1.676 0 0 1 2.14-.095l13.705 10.397v1.852L3.037 6.964a.2.2 0 0 0-.255.01l-1.24 1.128a.2.2 0 0 0 0 .296l15.2 13.86.007.007c.2.2.504.252.758.13l.117-.057c-.1.643-.91.936-1.396.45Z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.576 1.562 15.88.865A1.896 1.896 0 0 1 18.04.497l4.637 2.23a1.9 1.9 0 0 1 1.077 1.712v15.122a1.9 1.9 0 0 1-1.076 1.712l-4.638 2.23a1.896 1.896 0 0 1-2.162-.368l.697-.698c.209.209.565.061.565-.234V1.797a.331.331 0 0 0-.565-.235Zm1.541 20.81 4.134-1.988a.914.914 0 0 0 .518-.823V4.439a.914.914 0 0 0-.518-.823l-4.134-1.988c.007.055.01.111.01.169v20.406c0 .058-.003.114-.01.169Z",clipRule:"evenodd"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M15.706.692a2.141 2.141 0 0 1 2.441-.416l4.638 2.23A2.145 2.145 0 0 1 24 4.44v15.122c0 .824-.473 1.575-1.215 1.933l-4.637 2.229a2.14 2.14 0 0 1-2.442-.415l-.173-.173 1.043-1.044.173.173a.086.086 0 0 0 .147-.06V1.796a.086.086 0 0 0-.147-.061l-.173-.174-.173.174-.87-.87.173-.174Zm.908.562a.577.577 0 0 1 .772.543v20.406a.577.577 0 0 1-.773.544l-.375.375a1.65 1.65 0 0 0 1.697.16l4.637-2.23c.574-.276.938-.855.938-1.491V4.439c0-.636-.364-1.215-.938-1.491L17.935.718a1.651 1.651 0 0 0-1.697.16l.376.376Zm1.207-.04 4.316 2.075.107-.224.442.213-.12.247c.28.217.448.553.448.914v15.122c0 .445-.255.85-.657 1.044l-4.536 2.181.053-.444c.006-.044.009-.09.009-.139V1.797c0-.048-.003-.095-.009-.14l-.053-.443Zm.551.808v19.956l3.773-1.815a.669.669 0 0 0 .379-.602V4.439a.669.669 0 0 0-.379-.602l-3.773-1.815Z",clipRule:"evenodd"})]}))}e.s(["default",()=>a])},41e4,e=>{"use strict";var t,n=e.i(297083),r=e.i(530658),i=e.i(817556),a=e.i(422183),o=e.i(389959),s=e.i(541793),l=e.i(161322),u=e.i(995683),c=e.i(240913),d=e.i(903381),f=e.i(98816),p=e.i(635984),h=e.i(927158),m=e.i(529810),g=e.i(982829),x=e.i(729122),y=((t={}).IDLE="IDLE",t.STARTING="STARTING",t.UPLOADING="UPLOADING",t.UPLOADED="UPLOADED",t.RESTARTING="RESTARTING",t.ERROR="ERROR",t),b="(click to upload dev build)",w=(0,s.atom)(["IDLE","pid2 running latest prod ".concat(b)]);function _(){return(0,l.useAtomValue)(w)}function k(){var e,t=(0,m.default)(),s=t.fs,y=t.container,k=null==(e=y.getContext())?void 0:e.repl,C=(0,l.useSetAtom)(w),j=(0,r._)(_(),2),T=j[0];j[1];var E=(0,f.default)(T),R=(0,x.useRunInfo)().isRunning,I=(0,x.useWorkflowsRunner)(),A=(0,f.default)(R),P=(0,h.usePid2Callback)(function(e){return function(t){return(0,n._)(function(){var n,r,a;return(0,i._)(this,function(i){switch(i.label){case 0:n=10,r=500,a=0,i.label=1;case 1:if(!(a<n))return[3,11];i.label=2;case 2:return i.trys.push([2,7,,8]),[4,e.healthCheck.ping.rpc({})];case 3:if(!i.sent().ok)return[3,6];if(!(t&&(null==I?void 0:I.run)))return[3,5];return[4,I.run(g.RunReason.RUN_BUTTON_CLICKED)];case 4:i.sent(),i.label=5;case 5:return[2,!0];case 6:return[3,8];case 7:return i.sent(),[3,8];case 8:if(!(a<n-1))return[3,10];return[4,new Promise(function(e){return setTimeout(e,r)})];case 9:i.sent(),i.label=10;case 10:return a++,[3,1];case 11:return[2,!1]}})})()}},[I]);return(0,o.useCallback)(function(){return(0,n._)(function(){return(0,i._)(this,function(e){switch(e.label){case 0:var t,r,o,l,f;if(!k||"IDLE"!==E.current&&"ERROR"!==E.current)return[2];return C(["STARTING","starting pid2 upload process"]),[4,(t=y,r=s,o=function(e,t){C([e,t])},l=A.current,f=P,(0,n._)(function(){var e,s,h,m,g,x,y,w,_,k,C,j,T,E,R;return(0,i._)(this,function(I){switch(I.label){case 0:return[4,(0,p.getPid2Version)()];case 1:var A,P,D,O;if("dev"===(h=I.sent()))return o("IDLE","dev is not a version we can upload to the container"),[2];return[4,(A=h,P=t,D=r,O=o,(0,n._)(function(){var e,t,n,r,o,s,l,f,p,h;return(0,i._)(this,function(i){switch(i.label){case 0:return e=a.default.join(c.ROOT_PATH,".cache/replit/pid2/".concat(A)),t=a.default.join(e,"success"),[4,D.stat(t)];case 1:if((n=i.sent()).exists&&n.type===d.FileType.File)return[2];return O("UPLOADING","pid2: uploading version ".concat(A," to container...")),[4,fetch("/pid2/bundle")];case 2:if(!(r=i.sent()).ok)throw Error("Error fetching PID2 bundle: ".concat(r.statusText));if(!r.body)throw Error("Error fetching PID2 bundle: ".concat(r));return[4,r.arrayBuffer()];case 3:return o=i.sent(),s=".cache/replit/pid2/pid2-".concat(A,".tar.gz"),[4,D.writeFile(s,u.default.from(o))];case 4:if((l=i.sent()).error)throw Error("pid2: writing tarball: ".concat(l.error));return[4,P.exec("mkdir","-p",e)];case 5:if((f=i.sent()).error)throw Error("pid2: mkdir: ".concat(f.error));return[4,P.exec("tar","-C",e,"-xf",s)];case 6:if((p=i.sent()).error)throw Error("pid2: untar: ".concat(p.error));return[4,D.writeFile(a.default.join(e,"pid2.version"),A)];case 7:if((h=i.sent()).error)throw Error("pid2: writeVersion: ".concat(h.error));return[4,P.exec("touch",t)];case 8:return i.sent(),[4,P.exec("rm","-f",s)];case 9:return i.sent(),O("UPLOADED","pid2: ".concat(A," upload success")),[2]}})})())];case 2:return I.sent(),[4,S(t,o)];case 3:if(!(m=I.sent()))return[2];return g=a.default.join(m.REPL_HOME,".cache/replit/pid2/".concat(h)),x=a.default.join(g,"pid2"),[4,t.exec("stat","-c","%N",m.pid2BinDst)];case 4:return y=I.sent(),[4,t.exec("stat","-c","%N",m.pid2BinDst2)];case 5:if(w=I.sent(),!y.error&&(null==(e=y.output)?void 0:e.includes(x))&&!w.error&&(null==(s=w.output)?void 0:s.includes(x)))return o("IDLE","pid2 version ".concat(h," already exists in container ").concat(b)),[2];return _=a.default.dirname(m.pid2BinDst),[4,t.exec("mkdir","-p",_)];case 6:if((k=I.sent()).error)throw Error("pid2: mkdir ".concat(_,": ").concat(k.error));return[4,t.exec("ln","-sf",x,m.pid2BinDst)];case 7:if((C=I.sent()).error)throw Error("pid2: link ".concat(m.pid2BinDst,": ").concat(C.error));return j=a.default.dirname(m.pid2BinDst2),[4,t.exec("mkdir","-p",j)];case 8:if((T=I.sent()).error)throw Error("pid2: mkdir ".concat(j,": ").concat(T.error));return[4,t.exec("ln","-sf",x,m.pid2BinDst2)];case 9:if((E=I.sent()).error)throw Error("pid2: link ".concat(m.pid2BinDst2,": ").concat(E.error));return o("RESTARTING","pid2 version ".concat(h," installed, restarting pid2")),[4,t.exec("bash","-c","kill -9 $(pidof pid2)")];case 10:if((R=I.sent()).error)return o("ERROR","pid2: couldn't kill ".concat(R.error)),[2];if(!f)return[3,12];return o("RESTARTING",l?"pid2 version ".concat(h," installed, waiting for pid2 to restart and then running repl..."):"pid2 version ".concat(h," installed, waiting for pid2 to restart...")),[4,f(l)];case 11:if(!I.sent())return o("ERROR","pid2 version ".concat(h," installed, but pid2 failed to restart after waiting")),[2];I.label=12;case 12:return o("IDLE","pid2 version ".concat(h," installed ").concat(b)),[2]}})})())];case 1:return e.sent(),[2]}})})()},[E,k,C,y,s,A,P])}function S(e,t){return(0,n._)(function(){var n,r,o;return(0,i._)(this,function(i){switch(i.label){case 0:return[4,e.exec("printenv","REPL_HOME")];case 1:if((n=i.sent()).error||!n.output)return t("IDLE","could not printenv REPL_HOME"),[2,null];return r=n.output.trim(),o=a.default.join(r,".local/bin/pid2"),[2,{REPL_HOME:r,pid2BinDst:"/home/runner/bin/pid2",pid2BinDst2:o}]}})})()}e.s(["Pid2UploadState",()=>y,"getPid2Paths",()=>S,"usePid2UploadState",()=>_,"useUploadPid2",()=>k])},799634,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsxs)(i.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{d:"M16 15.25a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1 0-1.5h8ZM8 11.25a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1 0-1.5h2ZM13 11.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h2ZM18 11.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h2ZM7 7.25a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1 0-1.5h2ZM14 7.25a.75.75 0 0 1 0 1.5h-4a.75.75 0 0 1 0-1.5h4ZM19 7.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h2Z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M20 3.25A2.75 2.75 0 0 1 22.75 6v12A2.75 2.75 0 0 1 20 20.75H4A2.75 2.75 0 0 1 1.25 18V6A2.75 2.75 0 0 1 4 3.25h16ZM4 4.75c-.69 0-1.25.56-1.25 1.25v12c0 .69.56 1.25 1.25 1.25h16c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25H4Z",clipRule:"evenodd"})]}))}e.s(["default",()=>a])},556088,e=>{"use strict";var t=e.i(346715),n=e.i(55796),r=[{id:"true",editorPreferencesValue:!0,title:"true"},{id:"false",editorPreferencesValue:!1,title:"false"}],i={fontSize:{id:"fontSize",name:"Font Size",description:"Change the font size of the editor.",type:"select",editorPreferencesKey:"fontSize",options:[{id:"10",editorPreferencesValue:10,title:"tiny"},{id:"12",editorPreferencesValue:12,title:"small"},{id:"14",editorPreferencesValue:14,title:"normal"},{id:"18",editorPreferencesValue:18,title:"large"},{id:"24",editorPreferencesValue:24,title:"huge"}]},wrapping:{id:"wrapping",name:"Wrapping",description:"Change whether the editor wraps lines or not.",type:"select",editorPreferencesKey:"wrapping",options:[{id:"none",editorPreferencesValue:!1,title:"none"},{id:"soft",editorPreferencesValue:!0,title:"soft wrap"}]},minimap:{id:"minimap",name:"Minimap",description:"Change the minimap display.",type:"select",editorPreferencesKey:"minimapDisplay",options:[{id:"none",editorPreferencesValue:"none",title:"none"},{id:"blocks",editorPreferencesValue:"blocks",title:"blocks"},{id:"characters",editorPreferencesValue:"characters",title:"characters"}]},indentationDetection:{id:"indentDetection",name:"Indentation Detection",description:"Automatically detect indentation settings when opening a file.",type:"boolean",editorPreferencesKey:"indentDetection",options:r},indentFormatPastes:{id:"indentFormatPastes",name:"Format Pasted Text Indentation",description:"Automatically format the indentation of pasted text.",type:"boolean",editorPreferencesKey:"indentFormatPastes",options:r},indentIsSpaces:{id:"indentationCharacter",name:"Indentation Character",description:"The character used for indenting lines.",type:"select",editorPreferencesKey:"indentIsSpaces",options:[{id:"spaces",editorPreferencesValue:!0,title:"spaces"},{id:"tabs",editorPreferencesValue:!1,title:"tabs"}]},keyboardHandler:{id:"keyboardHandler",name:"Keybinds",description:"Use another keyboard mapping",type:"select",editorPreferencesKey:"keyboardHandler",options:[{id:"default",editorPreferencesValue:null,title:"default"},{id:"emacs",editorPreferencesValue:"emacs",title:"emacs"},{id:"vim",editorPreferencesValue:"vim",title:"vim"}]},showFileTreeGitStatus:{id:"showFileTreeGitStatus",name:"Filetree Git Status",description:"Show the Git status of files in the file tree.",type:"boolean",editorPreferencesKey:"showFileTreeGitStatus",options:r},codeIntelligence:{id:"codeIntelligence",name:"Code Intelligence",description:"Code intelligence gives you autocomplete, as well as hints as you type.",type:"boolean",editorPreferencesKey:"codeIntelligence",options:r},semanticTokens:{id:"semanticTokens",name:"Semantic Tokens",description:"Enables enhanced syntax highlighting from language servers.",type:"boolean",editorPreferencesKey:"semanticTokens",options:r},shellBellAudio:{id:"shellBellAudio",name:"Shell Bell Audible Indicator",description:"Play sound in the Shell on issues like a failed tab completion.",type:"boolean",editorPreferencesKey:"shellBellAudio",options:r},accessibleTerminal:{id:"accessibleTerminal",name:"Accessible Terminal Output",description:"Enable this setting to use a screen reader. Warning: this can negatively affect performance.",type:"boolean",editorPreferencesKey:"accessibleTerminal",options:r},webviewAutoOpenOnPortOpened:{id:"webviewAutoOpenOnPortOpened",name:"Automatic Webview",description:"Open a webview automatically when a port is open.",type:"boolean",editorPreferencesKey:"webviewAutoOpenOnPortOpened",options:r},forwardPortsAutomatically:{id:"forwardPortsAutomatically",name:"Forward Opened Ports Automatically",description:"Automatically configure detected newly opened ports.",type:"select",editorPreferencesKey:"forwardPortsAutomatically",options:[{id:"none",editorPreferencesValue:"none",title:"never"},{id:"only-global",editorPreferencesValue:"only-global",title:"all ports except localhost"},{id:"all",editorPreferencesValue:"all",title:"all ports"}]},agentAudioNotification:{id:"agentAudioNotification",name:"Agent Audio Notification",description:"Play a sound when the Agent needs your response.",type:"boolean",editorPreferencesKey:"agentAudioNotification",options:r},agentPushNotification:{id:"agentPushNotification",name:"Agent Push Notification",description:"Send a push notification when the Agent needs your response.",type:"boolean",editorPreferencesKey:"agentPushNotification",options:r},agentPosition:{id:"agentPosition",name:"Agent Position",description:"Choose whether the Agent appears in the left or right sidebar.",type:"select",editorPreferencesKey:"agentPosition",options:[{id:"leftSidebar",editorPreferencesValue:"leftSidebar",title:"Left"},{id:"rightSidebar",editorPreferencesValue:"rightSidebar",title:"Right"}]},assistantPushNotification:{id:"assistantPushNotification",name:"Assistant Push Notification",description:"Send a push notification when the Assistant needs your response.",type:"boolean",editorPreferencesKey:"assistantPushNotification",options:r},multiselectModifierKey:{id:"multiselectModifierKey",name:"Multiselect Modifier Key",description:"Modifier key for selecting multiple items in the filetree.",type:"select",editorPreferencesKey:"multiselectModifierKey",options:[{id:"cmdOrCtrlKey",editorPreferencesValue:"cmdOrCtrlKey",title:"cmdOrCtrlKey"},{id:"altKey",editorPreferencesValue:"altKey",title:"altKey"}]},codeSuggestion:{id:"codeSuggestion",name:"AI Code Completion",description:'Code completion provides inline "ghost text" suggestions while you code.',type:"boolean",editorPreferencesKey:"codeSuggestion",options:r},assistantAutoApplyChanges:{id:"assistantAutoApplyChanges",name:"Auto Apply Changes",description:"Automatically apply changes made by the AI assistant to your code.",type:"boolean",editorPreferencesKey:"assistantAutoApplyChanges",options:r},assistantAutoRestartRepl:{id:"assistantAutoRestartRepl",name:"Auto Restart Workflows",description:"Automatically restart workflows after applying code changes.",type:"boolean",editorPreferencesKey:"assistantAutoRestartRepl",options:r},assistantAdvancedModelOverride:{id:"assistantAdvancedModelOverride",name:"Advanced Model Override",description:"Override the default advanced model.",type:"select",editorPreferencesKey:"assistantAdvancedModelOverride",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,t._)(Array.from(n.ASSISTANT_ADVANCED_MODEL_OVERRIDE_OPTIONS).map(function(e){return{id:e.qualified,editorPreferencesValue:e.qualified,title:e.readable}})))}};e.s(["userPreferences",()=>i])},211733,e=>{"use strict";var t=e.i(276385),n=e.i(183035),r=e.i(416746),i=e.i(824108),a=e.i(133783),o=e.i(446530),s=e.i(173703),l=e.i(613355),u=e.i(140487),c=e.i(396776),d=e.i(960178),f=e.i(625484),p=(0,o.cssRecord)({connectButtonRow:[l.rcss.flex.rowReverse]});function h(e){var o=e.onConfirm,l=(0,a.default)(),h="Host *.replit.dev\n  Port 22\n  IdentityFile ".concat(l,"/.ssh/replit");return(0,t.jsxs)(s.ShadesSurface,{gap:12,elevate:!1,children:[(0,t.jsxs)(f.View,{gap:4,children:[(0,t.jsx)(d.Header,{level:1,variant:"subheadBig",children:"Update your SSH configuration"}),(0,t.jsxs)(d.Text,{color:"dimmer",children:["Before connecting over SSH, you need to update your local SSH configuration file, which is usually located at ",l,"/.ssh/config"]})]}),(0,t.jsx)(i.default,{code:h,header:".ssh/config",multiline:!0}),(0,t.jsx)(c.StatusBanner,{text:"You can find this information later in the SSH docs",icon:(0,t.jsx)(r.default,{})}),(0,t.jsx)(f.View,{css:p.connectButtonRow,children:(0,t.jsx)(u.Button,{text:"I updated my config",iconLeft:(0,t.jsx)(n.default,{}),onClick:o,colorway:"primary",stretch:!1})})]})}e.s(["default",()=>h])},959407,e=>{"use strict";var t=e.i(530658),n=e.i(389959),r=e.i(529810),i=e.i(778203),a=e.i(806804);function o(e){var o=(0,t._)((0,n.useState)(!1),2),s=o[0],l=o[1],u=function(e){var a,o,s,l,u=(0,i.default)(),c=(a=(0,r.default)().container,s=(o=(0,t._)((0,n.useState)("/home/runner"),2))[0],l=o[1],(0,n.useEffect)(function(){a.exec("pwd").then(function(e){var t;e.output&&l((null==(t=e.output)?void 0:t.replace("\n",""))||"")})},[a]),s);if(!u)return"".concat(e,"://vscode-remote/ssh-remote");var d=u.sshUser,f=u.sshHostname,p=u.sshPort,h="".concat(e,"://vscode-remote/ssh-remote+").concat(d,"@").concat(f,":").concat(p).concat(c);try{return window.encodeURI(h)}catch(e){return h}}(e),c=(0,a.default)("ssh","workspace-ssh-connect-to-vscode-config-tour"),d=c.register;return(0,n.useEffect)(function(){d()},[d]),{openEditor:(0,n.useCallback)(function(){c.shouldDisplay?l(!0):window.location.href=u},[c.shouldDisplay,u]),onConfirmConfig:(0,n.useCallback)(function(){l(!1),c.dismiss(),window.location.href=u},[c,u]),isConfigModalOpen:s,closeConfigModal:(0,n.useCallback)(function(){l(!1)},[])}}e.s(["default",()=>o])},6560,843754,316346,189920,431544,606296,578166,e=>{"use strict";var t,n,r,i,a,o=e.i(297083),s=e.i(530658),l=e.i(346715),u=e.i(817556),c=e.i(276385),d=e.i(830675),f=e.i(873169),p=e.i(416298),h=e.i(995683),m=e.i(106020),g=e.i(292849),x=e.i(630818),y=e.i(960178),b=e.i(625484),w=e.i(989481);function _(e){return(0,o._)(function(e){var t,n,r,i;return(0,u._)(this,function(a){switch(a.label){case 0:if(t=e.searchQuery,n=e.paths,r=e.run,i=e.description,!t)return[2,n.map(function(e){return{data:{type:"action",label:e,icon:(0,c.jsx)(x.default,{path:e}),description:i,run:function(){return r(e)}},match:function(){return{score:1,render:(0,g.createFileMatchRender)({path:e,description:i})}}}})];return[4,(0,g.filterFiles)(t,n)];case 1:return[2,a.sent().map(function(e){var t=e.path,n=e.score,a=e.ranges;return{data:{type:"action",label:t,icon:(0,c.jsx)(x.default,{path:t}),run:function(){return r(t)}},match:function(){return{score:n,render:(0,g.createFileMatchRender)({path:t,ranges:a,description:i})}}}})]}})}).apply(this,arguments)}function k(){return(0,c.jsxs)(b.View,{row:!0,gap:8,children:[(0,c.jsx)(p.default,{}),(0,c.jsx)(y.Text,{color:"dimmest",multiline:!1,children:"Something went wrong searching your App's files. Please try again."})]})}function S(e){return(0,m.createCommand)({type:"context",label:"Files",description:"Find a file",icon:(0,c.jsx)(f.default,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:e.lazyLoad?m.fzfMatchLabel:(0,m.createFzfMatchLabel)({defaultScore:w.commandDefaultScores.findOrCreateFile}),commands:function(t){return(0,o._)(function(){var n,r,i,a,f,m,g,y,b,w,S,C,j,T,E,R,I,A,P,D;return(0,u._)(this,function(O){switch(O.label){case 0:if(e.lazyLoad&&!t.active)return[2,[]];return n=e.fs,r=e.shouldHideFile,[4,Promise.resolve(e.getRecentFiles())];case 1:if(i=O.sent(),a=[],!(t.searchQuery||t.active))return[3,3];return[4,n.listFiles()];case 2:if((f=O.sent()).error)return d.captureException(Error("Find or create file returned an error"),{extra:{message:f.error}}),[2,[{data:{type:"error",label:f.error,icon:(0,c.jsx)(p.default,{})},match:function(){return{score:1,render:{content:(0,c.jsx)(k,{})}}}}]];if(!f.files)throw Error("Expected files");m=!0,g=!1,y=void 0;try{for(b=f.files[Symbol.iterator]();!(m=(w=b.next()).done);m=!0)S=w.value,r(S)||i.includes(S)||a.push(S)}catch(e){g=!0,y=e}finally{try{m||null==b.return||b.return()}finally{if(g)throw y}}O.label=3;case 3:return C=[],[4,Promise.all([_({searchQuery:t.searchQuery,paths:i,description:"Recently opened",run:function(t){e.openFile({path:t})}}),_({searchQuery:t.searchQuery,paths:a,run:function(t){e.openFile({path:t})}})])];case 4:if(T=(j=s._.apply(void 0,[O.sent(),2]))[0],E=j[1],!e.getCurrentlyOpenFilePanesCommands)return[3,6];return[4,e.getCurrentlyOpenFilePanesCommands({searchQuery:t.searchQuery})];case 5:I=O.sent(),(R=C).push.apply(R,(0,l._)(I)),O.label=6;case 6:return T.length&&(A=C).push.apply(A,(0,l._)(T)),E.length&&(P=C).push.apply(P,(0,l._)(E)),0===E.length&&0===T.length&&t.active&&(D=t.searchQuery,C.push({data:{label:D,description:"Create a new file",icon:(0,c.jsx)(x.default,{path:D}),type:"action",run:function(){return(0,o._)(function(){return(0,u._)(this,function(t){switch(t.label){case 0:return[4,n.writeFile(D,h.default.from(""))];case 1:if(t.sent().error)return[2,{type:"error",message:'Could not create "'+D+'"'}];return e.openFile({path:D}),[2]}})})()}},match:function(){return{score:1}}})),[2,C]}})})()}})}e.s(["createFileCommands",()=>_,"createFindOrCreateFileCommand",()=>S],6560);var C=e.i(346781),j=e.i(890963),T=e.i(262206),E=e.i(878420),R=e.i(223808),I=e.i(15053),A=e.i(886513),P=e.i(671901),D=e.i(866408),O=e.i(272391),N=((i={}).CHANNEL_OPENED="CHANNEL_OPENED",i.OUTPUT_RECEIVED="OUTPUT_RECEIVED",i.STDERR_RECEIVED="STDERR_RECEIVED",i.STATE_CHANGED="STATE_CHANGED",i);function M(e){var t=e.container,n=(0,D.default)(),r=null,i=!1,a="",s="",l=t.openChannel({service:"exec"},function(e){var t=e.channel,i=!1;return t.onCommand(function(e){try{if(null!=e.output)a+=e.output,n.emit(N.OUTPUT_RECEIVED,e.output);else if(null!=e.stderr)s+=e.stderr,n.emit(N.STDERR_RECEIVED,e.stderr);else if(null!=e.state){if(!i){i=!0;return}n.emit(N.STATE_CHANGED,{state:e.state,outputBuffer:a,stderrBuffer:s}),e.state===P.api.State.Stopped&&(a="",s="")}}catch(t){throw O.default.wrap(t).setExtra("command",e.input)}}),r=t,n.emit(N.CHANNEL_OPENED,t),function(){r=null}});return{request:function(e){return(0,o._)(function(){var t,a,s,l,c,d,f,p,h,m;return(0,u._)(this,function(g){switch(g.label){case 0:return t=e.env,a=e.args,l=void 0===(s=e.lifecycle)?P.api.Exec.Lifecycle.NON_BLOCKING:s,d=void 0!==(c=e.splitStderr)&&c,f=e.noUserEnv,p=(0,A._)(e,["env","args","lifecycle","splitStderr","noUserEnv"]),[4,(0,o._)(function(){return(0,u._)(this,function(e){if(i)throw Error("closed");return r?[2,r]:[2,new Promise(function(e){n.once(N.CHANNEL_OPENED,function(t){e(t)})})]})})()];case 1:return m=(h=g.sent()).request({exec:{env:t,args:a,lifecycle:l,splitStderr:d,noUserEnv:null!=f&&f}}),l===P.api.Exec.Lifecycle.STDIN&&"stdin"in p&&(h.send({input:p.stdin}),h.send({inputClose:{}})),[2,m]}})})()},onOutput:function(e){return n.on(N.OUTPUT_RECEIVED,e),function(){n.off(N.OUTPUT_RECEIVED,e)}},onStderr:function(e){return n.on(N.STDERR_RECEIVED,e),function(){n.off(N.STDERR_RECEIVED,e)}},onStateChanged:function(e){return n.on(N.STATE_CHANGED,e),function(){n.off(N.STATE_CHANGED,e)}},getStatus:function(){return r?r.status:"closed"},dispose:function(){i=!0,l(),r=null}}}e.s(["default",()=>M],843754);var L=e.i(664152),B=e.i(331762),V=e.i(64386);e.i(694906);var F=e.i(55449);function U(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")}).join(" ")}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=function(e){return e.forEach(function(e){return e&&n.push("-g",e)})},i=[],a=[],o=!0,s=!1,u=void 0;try{for(var c,d=e[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var f=c.value,p=H(f);p.startsWith("**")?i.push(p):a.push(p)}}catch(e){s=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(s)throw u}}return a.length>0&&(r(["!*"]),new Set(a).forEach(function(e){r((function(e){var t=function(e){Array.isArray(r[e])||(r[e]=[]);var t,i=n[e],a=i.startsWith("{")&&i.endsWith("}")?W(i.substring(1,i.length-1),","):[i];(t=r[e]).push.apply(t,(0,l._)(a.map(function(t){var n=r[e-1];return n&&n.length>0?n.map(function(e){return"".concat(e,"/").concat(t)}):t}).flat(2)))},n=W(e,"/").filter(function(e){return e.length>0});"**"!==n[n.length-1]&&n.push("**");for(var r={},i=0;i<n.length;i++)t(i);return Object.values(r).flat(2)})(e).map($))})),r(i),r(t.map(function(e){return"!".concat($(H(e)))})),n}function $(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function H(e){return e.replaceAll(/\*/g,function(e,t,n){return t>0&&("*"===n[t-1]||"\\"===n[t-1])||t<n.length-1&&"*"===n[t+1]?e:"**"})}var z=(t={},n={},(r=function(e,r){t[e]=r,n[r]=e})("{","}"),r("(",")"),r("[","]"),{hasKey:function(e){return e in t},getKey:function(e){return t[e]},hasValue:function(e){return e in n},getValue:function(e){return n[e]}});function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var n=[],r=[],i="",a=!0,o=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;if(c===t){if(0===r.length){n.push(i),i="";continue}}else if(z.hasKey(c))r.push(c);else if(z.hasValue(c)&&r.pop()!==z.getValue(c))return[e];i+=c}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return 0!==r.length?[e]:(i.length>0&&n.push(i),n)}e.s(["optimizeGlobs",()=>G,"splitGlobAware",()=>W],316346);var q=((a={}).PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",a.EMPTY_RESULTS="Nothing came up searching your App's content.",a.EMPTY_QUERY="No search query was provided.",a.INVALID_LINE="We encountered an invalid line while parsing your search results.",a.INVALID_COMMAND="Ripgrep returned an invalid response.",a.CONTAINER_DISCONNECTED="Disconnected from the container.",a.CONTAINER_CONNECTING="Connecting to the container.",a.CHANNEL_CLOSED="Channel was closed.",a);function K(){var e="",t=new Map;return function(n){var r=new Set,i=!1;if(n.trim().startsWith("error"))return{error:q.INVALID_COMMAND,filesMap:t,filesMapChanges:r};var a=n.indexOf("\n"),o=0,s=e+n;if(a>=0)a+=e.length;else{e=s;return}for(;a>=0;){var l=s.substring(o,a).trim();if(0!==l.length){var u=function(e){try{return JSON.parse(e)}catch(e){return null}}(l);u&&!function(e,t,n){switch(e.type){case"begin":var r=Y(e.data.path);if(!r)return!1;t.set(r,{path:r,lines:[],dedentBy:0}),n.add(r);break;case"end":break;case"match":case"context":var i=Y(e.data.path);if(!i)return!1;n.add(i);var a=t.get(i);if(!a)return!1;var o=function(e,t){var n,r,i=Y(e.data.lines);if(!i)return null;var a=i.trimEnd().split(/\r?\n/),o=[];(null==(n=a[0])?void 0:n.trim())===""&&a.shift(),(null==(r=a[a.length-1])?void 0:r.trim())===""&&a.pop();var s=0,l=0,u=e.data.submatches;return a.forEach(function(t,n){var r=e.data.line_number+n,i=l;l+=t.length+1;for(var a=[];s<u.length;){var c=u[s];if(c.start>=l)break;var d=c.start-i,f=void 0;if(f=c.end<l?c.end-c.start:c.end===l?c.end-c.start-1:t.length-d,d<t.length&&a.push({start:d,length:f}),c.end>l){c.start=l;break}s++}o.push({lineNumber:r,content:t,matches:a})}),(0,V._)((0,E._)({},t),{lines:t.lines.concat(o)})}(e,a);o&&t.set(i,o);break;case"error":return L.logger.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}(u,t,r)&&(i=!0)}o=a+1,a=s.indexOf("\n",o)}return e=s.substring(o),{error:i?q.INVALID_LINE:null,filesMap:t,filesMapChanges:r}}}function Y(e){return e?"bytes"in e?B.Buffer.from(e.bytes,"base64").toString():e.text:null}function Q(e){var t,n=e.lines.length>0?(t=Math).min.apply(t,(0,l._)(e.lines.map(function(e){return e.content.match(/^[\t ]+/)}).flat().map(function(e){return(null==e?void 0:e.length)||0}))):0;return(0,V._)((0,E._)({},e),{dedentBy:n})}function X(e,t,n){for(var r=(0,l._)(e),i=new Set,a=0;a<r.length;a++){var o=r[a].path,s=t.get(o);n.has(o)&&s&&(r[a]=s,i.add(o))}var u=!0,c=!1,d=void 0;try{for(var f,p=n[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,m=t.get(h);!i.has(h)&&m&&r.push(m)}}catch(e){c=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}return r}function Z(e){var t=e.mode,n=e.query,r=e.context,i=e.isRegex,a=e.isCaseSensitive,o=e.isMatchingWholeWords,s=e.includeGlobs,u=e.excludeGlobs,c=void 0===u?(0,l._)(F.ignoredDirs):u,d=["rg"];switch(t){case"json":d.push("--json");break;case"files":d.push("--files-with-matches")}return null!==r&&d.push("--context","".concat(r)),n.includes("\n")&&d.push("--multiline"),i||d.push("--fixed-strings"),d.push("--max-count","100"),d.push("--max-filesize","4M"),d.push("--max-depth","24"),d.push("--max-columns","512"),d.push("--max-columns-preview"),d.push(a?"--case-sensitive":"--ignore-case"),d.push("--hidden"),o&&d.push("--word-regexp"),d.push.apply(d,(0,l._)(G(s,c))),d.push("--",n),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:524288;return["sh","-c","".concat(U.apply(void 0,(0,l._)(e))," | head -c ").concat(t)]}(d)}e.s(["SearchError",()=>q],189920),e.s(["RG_LIMIT",()=>524288,"createParseOutput",()=>K,"createSearchCommand",()=>Z,"dedentSearchFile",()=>Q,"updateSearchFiles",()=>X],431544);var J="exit status 1";e.i(282332);var ee=e.i(8808);function et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:t}}var en="File Search Used";function er(e){var t=e.container,n=e.onError,r=e.onUpdate,i=e.onLoadingStateChange,a=e.isStreaming,o=e.trackLatency,s=void 0!==o&&o,l=M({container:t}),u=[],c=(0,I.v4)(),f=Date.now(),p=function(e){r(u=e)};return(0,R.default)(function(e){var t=(0,I.v4)();c=t,f=Date.now(),n(null),i(!0);var r=!0;if(""===e.query){p([]),i(!1);return}!function(e){var t=e.execer,n=e.onComplete,r=e.onError,i=e.onParse,a=(0,A._)(e,["execer","onComplete","onError","onParse"]);if(0===a.query.length)return n("abort");var o=new TextEncoder,s=K(),l=0,u=0,c=function(){},f=function(e){r(e),n("error")},p=function(e){0===l&&"finished"===e?f(q.EMPTY_RESULTS):("finished"===e?n(e,{bytes:u}):n(e),c())},h=t.onOutput(function(e){var t=o.encode(e).length;u+=t;var n=s(e);if(n){var r=n.error,a=n.filesMap,c=n.filesMapChanges;r&&f(r),l=a.size,c.forEach(function(e){var t=a.get(e);t&&a.set(e,Q(t))}),i(a,c)}}),m=t.onStderr(function(e){if(e.trim()===J)return f(q.EMPTY_RESULTS);f(q.INVALID_COMMAND)});c=function(){h(),m()};var g=Z(a);t.request({args:g,noUserEnv:!0}).then(function(e){if(e.error)return e.error.trim()===J?f(q.EMPTY_RESULTS):f(q.INVALID_COMMAND);p("finished")}).catch(function(e){return d.captureException(Error("Ripgrep search command failed with error: ".concat(e))),f(q.INVALID_COMMAND)})}((0,E._)({execer:l,onComplete:function(r,a){if(c===t){i(!1);var o,l,u,d,p="finished"===r&&a&&524288===a.bytes;p&&n(q.PARTIAL_RESULTS),s&&L.logger.time("".concat(en," - complete"),Date.now()-f,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!=(u=null==e||null==(o=e.includeGlobs)?void 0:o.length)?u:0)>0,hasExcludes:(null!=(d=null==e||null==(l=e.excludeGlobs)?void 0:l.length)?d:0)>0,latency:Date.now()-f,isPartialResults:p})}},onError:function(e){c===t&&n(e)},onParse:function(n,o){if(c===t){if(r){if(s){var l,d,h,m;L.logger.time("".concat(en," - first_chunk"),Date.now()-f,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!=(h=null==e||null==(l=e.includeGlobs)?void 0:l.length)?h:0)>0,hasExcludes:(null!=(m=null==e||null==(d=e.excludeGlobs)?void 0:d.length)?m:0)>0})}p(X([],n,o)),r=!1}else p(X(u,n,o));a&&i(!1)}},mode:"json",context:0},e))},200)}function ei(e){var t=e.container,n=(0,R.default)(function(e,n,r){var i;(i=(0,E._)({container:t,mode:"json",context:1,isCaseSensitive:!1},e),(0,o._)(function(){var e,t,n,r,a,o,s;return(0,u._)(this,function(u){switch(u.label){case 0:if(t=i.container,0===(n=(0,A._)(i,["container"])).query.trim().length)return[2,et(q.EMPTY_QUERY)];if(t.getConnectionState()===ee.ConnectionState.DISCONNECTED)return[2,et(q.CONTAINER_DISCONNECTED)];if(t.getConnectionState()===ee.ConnectionState.CONNECTING)return[2,et(q.CONTAINER_CONNECTING)];return[4,(e=t).exec.apply(e,(0,l._)(Z(n)))];case 1:if(a=(r=u.sent()).output,o=r.error)switch(o){case J:return[2,et(q.EMPTY_RESULTS)];case"signal: broken pipe":return[2,et(q.PARTIAL_RESULTS)];case"Channel closed":return[2,et(q.CHANNEL_CLOSED)];default:return d.captureException(Error("Ripgrep search command failed with error: ".concat(o))),[2,{error:o,data:null}]}if(!(null==a?void 0:a.trim())||!(s=K()(a))||0===s.filesMap.size)return[2,et(q.EMPTY_RESULTS)];return[2,et(s.error,s.filesMap)]}})})()).then(function(e){var t=e.data?function(e){var t={},n=!0,r=!1,i=void 0;try{for(var a,o=e.entries()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=(0,s._)(a.value,2),u=l[0],c=l[1];t[u]=c.lines.map(function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map(function(e){return{column:e.start,length:e.length}})}}).filter(function(e){return e.matches.length>0})}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}(e.data):{},r=e.error===q.PARTIAL_RESULTS;if(r);else if(e.error)return n({error:e.error,results:null,isPartialResult:r});return n({error:null,results:t,isPartialResult:r})}).catch(r)},200);return function(e){return new Promise(function(t,r){return n(e,t,r)})}}e.s(["createAsyncSearchFunction",()=>ei,"default",()=>er],606296);var ea=e.i(480028),eo=e.i(446530),es=e.i(613355),el=e.i(37068),eu=(0,eo.cssRecord)({singleLine:[{whiteSpace:"nowrap",fontFamily:ea.tokens.fontFamilyCode},es.rcss.truncate,es.rcss.color.foregroundDimmest]});function ec(e){var t=e.path,n=e.line;return(0,c.jsxs)(b.View,{grow:!0,shrink:!0,p:8,gap:4,align:"start",children:[(0,c.jsxs)(b.View,{row:!0,gap:4,align:"center",children:[(0,c.jsx)(x.default,{path:t,size:12}),(0,c.jsxs)(y.Text,{variant:"small",color:"dimmest",multiline:!1,children:[t.replace(/^\.\//,""),":",n.lineNumber]})]}),(0,c.jsx)(b.View,{css:eu.singleLine,children:(0,c.jsx)(el.HighlightMatches,{source:n.content,matches:n.matches})})]})}function ed(){return(0,c.jsxs)(b.View,{px:8,row:!0,gap:8,align:"center",children:[(0,c.jsx)(p.default,{}),(0,c.jsx)(y.Text,{color:"dimmest",multiline:!1,children:"Something went wrong searching your App's contents. Please try again."})]})}function ef(){return(0,c.jsxs)(b.View,{row:!0,gap:8,p:8,align:"center",children:[(0,c.jsx)(p.default,{}),(0,c.jsx)(y.Text,{color:"dimmest",multiline:!1,children:"Displaying only part of the results, try being more specific with your search."})]})}function ep(){return(0,c.jsx)(b.View,{row:!0,gap:8,p:8,align:"center",children:(0,c.jsx)(y.Text,{color:"dimmest",multiline:!1,children:"Nothing came up searching your App's content."})})}var eh=(0,T.defaultKeyCombo)({cmdOrCtrl:!0,shift:!0,key:"f"});function em(e){var t,n=ei({container:e.container});return(0,m.createCommand)({type:"context",description:"Search through your files",label:"Search",icon:(0,c.jsx)(C.default,{}),keyboardShortcut:e.keyboardShortcut?eh:void 0},{match:e.activeOnly?m.fzfMatchLabel:(0,m.createFzfMatchLabel)({defaultScore:w.commandDefaultScores.searchFileContents}),commands:function(r){return(0,o._)(function(){var i,a,o,l,f,h,m,g,y,_,k,S;return(0,u._)(this,function(u){switch(u.label){case 0:if(!r.searchQuery||!r.active&&e.activeOnly)return[2,[]];return t=i=Math.random(),[4,n({query:r.searchQuery})];case 1:if(o=(a=u.sent()).results,l=a.error,f=a.isPartialResult,i!==t)return[2,[]];if(null!==l){if(!r.active)return[2,[]];return d.captureException(Error("Search file contents returned an error"),{extra:{message:l}}),[2,[{data:{type:"error",label:"error",icon:(0,c.jsx)(p.default,{})},match:function(){return{score:1,render:{content:(0,c.jsx)(ed,{})}}}}]]}h=[],m=!0,g=!1,y=void 0;try{for(_=function(){var t=(0,s._)(S.value,2),n=t[0];t[1].forEach(function(t){var i=t.matches[0].column;h.push({match:function(){var e=(0,j.fzfMatch)(r.searchQuery,t.content,{filterLowMatchScores:!0});return{score:Math.floor(((null==e?void 0:e.score)||1)*w.commandMatchScoreMultipliers.fileContentsSearch),render:{height:60,content:(0,c.jsx)(ec,{path:n,line:t})}}},data:{type:"action",label:n,icon:(0,c.jsx)(x.default,{path:n}),key:[n,t.lineNumber,i].join(":"),run:function(){e.openFile({path:n,line:t.lineNumber,col:i})}}})})},k=Object.entries(o)[Symbol.iterator]();!(m=(S=k.next()).done);m=!0)_()}catch(e){g=!0,y=e}finally{try{m||null==k.return||k.return()}finally{if(g)throw y}}if(0===h.length&&r.active)return[2,[{data:{type:"output",label:"",icon:(0,c.jsx)(b.View,{})},match:function(){return{score:1,render:{content:(0,c.jsx)(ep,{})}}}}]];if(r.active)if(0===h.length)return[2,[{data:{type:"output",label:"",icon:(0,c.jsx)(b.View,{})},match:function(){return{score:1,render:{content:(0,c.jsx)(ep,{})}}}}]];else f&&h.push({data:{type:"error",label:"error",icon:(0,c.jsx)(p.default,{})},match:function(){return{score:1/0,render:{content:(0,c.jsx)(ef,{})}}}});return[2,h]}})})()}})}e.s(["createSearchFileContentsCommand",()=>em,"keyboardShortcut",()=>eh],578166)},338188,e=>{"use strict";var t=e.i(297083),n=e.i(721281),r=e.i(878420),i=e.i(64386),a=e.i(886513),o=e.i(530658),s=e.i(346715),l=e.i(817556),u=e.i(478902),c=e.i(389959),d=e.i(971131),f=Math.min,p=Math.max,h=Math.abs,m=Math.floor,g=function(e,t,n){return f(n,p(t,e))},x=function(e){return(0,s._)(e).sort(function(e,t){return e-t})},y="function"==typeof queueMicrotask?queueMicrotask:function(e){Promise.resolve().then(e)},b=function(e){var t,n;return function(){return t||(t=!0,n=e()),n}},w=function(e,t,n){for(var r=n?"unshift":"push",i=0;i<t;i++)e[r](-1);return e},_=function(e,t){var n=e.t[t];return -1===n?e.o:n},k=function(e,t,n){var r=-1===e.t[t];return e.t[t]=n,e.i=f(t,e.i),r},S=function(e,t){if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);for(var n=e.i,r=e.u[n];n<t;)r+=_(e,n),e.u[++n]=r;return e.i=t,r},C=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.l-1;n<=r;){var i=m((n+r)/2),a=S(e,i);if(a<=t){if(a+_(e,i)>t)return i;n=i+1}else r=i-1}return g(n,0,e.l-1)},j=function(e,t,n){var r=t-e.l;return e.i=n?-1:f(t-1,e.i),e.l=t,r>0?(w(e.u,r),w(e.t,r,n),e.o*r):(e.u.splice(r),(n?e.t.splice(0,-r):e.t.splice(r)).reduce(function(t,n){return t-(-1===n?e.o:n)},0))},T="undefined"!=typeof window,E=function(){return document.documentElement},R=function(e){return e.ownerDocument},I=function(e){return e.defaultView},A=b(function(){return!!T&&"rtl"===getComputedStyle(E()).direction}),P=b(function(){return/iP(hone|od|ad)/.test(navigator.userAgent)}),D=b(function(){return"scrollBehavior"in E().style}),O=function(e){return!!e.v()},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!!r,l=1,u=0,c=0,d=0,m=0,g=0,y=0,b=0,T=0,E=s?[0,p(r-1,0)]:null,R=[0,0],I=0,A={o:i?i[1]:t,t:i&&i[0]?w(i[0].slice(0,f(e,i[0].length)),p(0,e-i[0].length)):w([],e),l:e,i:-1,u:w([],e)},D=new Set,O=function(){return d-c},N=function(){return O()+g+m},M=function(e){var t=u,n=R[0];if(n=f(n,A.l-1),S(A,n)<=e){var r=C(A,e+t,n);return[C(A,e,n,r),r]}var i=C(A,e,void 0,n);return[i,C(A,e+t,i)]},L=function(){return A.l?S(A,A.l-1)+_(A,A.l-1):0},B=function(e){return S(A,e)-g},V=function(e){return _(A,e)},F=function(e){e&&(P()&&0!==b?g+=e:m+=e)};return{p:function(){return l},m:function(){return[A.t.slice(),A.o]},_:function(){var e,t,r,i;return y?(e=(r=(0,o._)(R,2))[0],t=r[1]):(e=(i=(0,o._)(R=M(p(0,N())),2))[0],t=i[1],E&&(e=f(e,E[0]),t=p(t,E[1]))),1!==b&&(e-=p(0,n)),2!==b&&(t+=p(0,n)),[p(e,0),f(t,A.l-1)]},S:function(){return C(A,N())},$:function(){return C(A,N()+u)},I:function(e){return -1===A.t[e]},k:function(){return!!E&&A.t.slice(p(0,E[0]-1),f(A.l-1,E[1]+1)+1).includes(-1)},T:B,R:V,M:function(){return A.l},C:function(){return d},H:function(){return 0!==b},v:function(){return u},W:function(){return c},h:L,O:function(){return y=m,m=0,[y,2===T||O()+u>=L()]},B:function(e,t){var n=[e,t];return D.add(n),function(){D.delete(n)}},J:function(e,t){var n,r,i=0;switch(e){case 1:var f=y;y=0;var w=t-d,_=h(w);f&&_<h(f)+1||0!==T||(b=w<0?2:1),s&&(E=null,s=!1),d=t,i=4;var S=O();S>=-u&&S<=L()&&(i+=1,r=_>u);break;case 2:i=8,0!==b&&(n=!0,i+=1),b=0,T=0,E=null;break;case 3:var R,P,U,G,$,H,z,W,q=t.filter(function(e){var t=(0,o._)(e,2),n=t[0],r=t[1];return A.t[n]!==r});if(!q.length)break;F(q.reduce(function(e,t){var n=(0,o._)(t,2),r=n[0],i=n[1];return(2===T||(E?!s&&r<E[0]:B(r)+(0===b&&0===T?V(r):0)<O()))&&(e+=i-V(r)),e},0));var K=!0,Y=!1,Q=void 0;try{for(var X,Z=q[Symbol.iterator]();!(K=(X=Z.next()).done);K=!0){var J=(0,o._)(X.value,2),ee=J[0],et=J[1],en=V(ee),er=k(A,ee,et);a&&(I+=er?et:et-en)}}catch(e){Y=!0,Q=e}finally{try{K||null==Z.return||Z.return()}finally{if(Y)throw Q}}a&&u&&I>u&&(F((R=C(A,N()),P=0,U=[],A.t.forEach(function(e,t){-1!==e&&(U.push(e),t<R&&P++)}),A.i=-1,H=($=(G=x(U)).length)/2|0,z=$%2==0?(G[H-1]+G[H])/2:G[H],W=A.o,((A.o=z)-W)*p(R-P,0))),a=!1),i=3,r=!0;break;case 4:u!==t&&(u=t,i=3);break;case 5:t[1]?(F(j(A,t[0],!0)),T=2):j(A,t[0]),i=1;break;case 6:c=t;break;case 7:T=1;break;case 8:E=M(t),i=1}i&&(l=1+(0x7fffffff&l),n&&g&&(m+=g,g=0),D.forEach(function(e){var t=(0,o._)(e,2),n=t[0],a=t[1];i&n&&a(r)}))}}},M=setTimeout,L=function(e,t){return t&&A()?-e:e},B=function(e,t,n,r,i,a){var s,l,u,c=Date.now,d=0,f=!1,p=!1,h=!1,m=!1,g=(l=function(){null!=s&&clearTimeout(s)},(u=function(){l(),s=M(function(){s=null,function(){if(f||p)return f=!1,g();h=!1,e.J(2)}()},150)}).L=l,u),x=function(){d=c(),h&&(m=!0),a&&e.J(6,a()),e.J(1,r()),g()},y=function(t){if(!f&&e.H()&&!t.ctrlKey){var r=c()-d;150>r&&50<r&&(n?t.deltaX:t.deltaY)&&(f=!0)}},b=function(){p=!0,h=m=!1},w=function(){p=!1,P()&&(h=!0)};return t.addEventListener("scroll",x),t.addEventListener("wheel",y,{passive:!0}),t.addEventListener("touchstart",b,{passive:!0}),t.addEventListener("touchend",w,{passive:!0}),{P:function(){t.removeEventListener("scroll",x),t.removeEventListener("wheel",y),t.removeEventListener("touchstart",b),t.removeEventListener("touchend",w),g.L()},A:function(){var t=(0,o._)(e.O(),2),a=t[0],s=t[1];a&&(i(L(a,n),s,m),m=!1,s&&e.v()>e.h()&&e.J(1,r()))}}},V=function(e,r){var i,a,s,u=r?"scrollLeft":"scrollTop",c=r?"overflowX":"overflowY",d=function(a,c){return(0,t._)(function(){var t,f,p,h,m,g,x,b;return(0,l._)(this,function(l){switch(l.label){case 0:if(!i)return[2,void y(function(){return d(a,c)})];if(s&&s(),t=function(){var t;return[new Promise(function(n,r){t=n,s=r,O(e)&&M(r,150)}),e.B(2,function(){t&&t()})]},!(c&&D()))return[3,8];l.label=1;case 1:if(e.J(8,a()),!e.k())return[3,7];p=(f=(0,o._)(t(),2))[0],h=f[1],l.label=2;case 2:return l.trys.push([2,4,5,6]),[4,p];case 3:return l.sent(),[3,6];case 4:return l.sent(),[2];case 5:return h(),[7];case 6:return[3,1];case 7:return i.scrollTo((m={},(0,n._)(m,r?"left":"top",L(a(),r)),(0,n._)(m,"behavior","smooth"),m)),[3,14];case 8:x=(g=(0,o._)(t(),2))[0],b=g[1],l.label=9;case 9:return l.trys.push([9,11,12,13]),i[u]=L(a(),r),e.J(7),[4,x];case 10:return l.sent(),[3,13];case 11:return l.sent(),[2];case 12:return b(),[7];case 13:return[3,8];case 14:return[2]}})})()};return{V:function(t){i=t,a=B(e,t,r,function(){return L(t[u],r)},function(n,r,i){if(i){var a=t.style,o=a[c];a[c]="hidden",M(function(){a[c]=o})}r?(t[u]=e.C()+n,s&&s()):t[u]+=n})},X:function(){a&&a.P()},Y:function(e){d(function(){return e})},j:function(t){t+=e.C(),d(function(){return t})},q:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.align,i=n.smooth,a=n.offset,o=void 0===a?0:a;if(t=g(t,0,e.M()-1),"nearest"===r){var s=e.T(t),l=e.C();if(s<l)r="start";else{if(!(s+e.R(t)>l+e.v()))return;r="end"}}d(function(){return o+e.W()+e.T(t)+("end"===r?e.R(t)-e.v():"center"===r?(e.R(t)-e.v())/2:0)},i)},D:function(){a&&a.A()}}},F=function(e){var t;return{U:function(n){(t||(t=new(I(R(n))).ResizeObserver(e))).observe(n)},F:function(e){t.unobserve(e)},P:function(){t&&t.disconnect()}}},U=function(e,t){var n,r=t?"width":"height",i=new WeakMap,a=F(function(t){var a=[],o=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value,f=d.target,p=d.contentRect;if(f.offsetParent)if(f===n)e.J(4,p[r]);else{var h=i.get(f);null!=h&&a.push([h,p[r]])}}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}a.length&&e.J(3,a)});return{G:function(e){a.U(n=e)},K:function(e,t){return i.set(e,t),a.U(e),function(){i.delete(e),a.F(e)}},X:a.P}},G=T?c.useLayoutEffect:c.useEffect,$="current",H=function(e,t){var n=!0,r=!1,i=void 0;if(Array.isArray(e))try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;H(s,t)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}else null==e||"boolean"==typeof e||t.push(e)},z=function(e,t){var n=e.key;return null!=n?n:"_"+t},W=function(e){var t=(0,c.useRef)();return t[$]||(t[$]=e())},q=function(e){var t=(0,c.useRef)(e);return G(function(){t[$]=e},[e]),t},K=(0,c.memo)(function(e){var t=e.N,r=e.Z,i=e.ee,a=e.te,o=e.ne,s=e.oe,l=e.re,d=e.ie,f=(0,c.useRef)(null);G(function(){return r(f[$],i)},[i]);var p=(0,c.useMemo)(function(){var e,t=(e={position:o&&d?void 0:"absolute"},(0,n._)(e,l?"height":"width","100%"),(0,n._)(e,l?"top":"left",0),(0,n._)(e,l?A()?"right":"left":"top",a),(0,n._)(e,"visibility",!o||d?"visible":"hidden"),e);return l&&(t.display="flex"),t},[a,o,d,l]);return(0,u.jsx)(s,"string"==typeof s?{ref:f,style:p,children:t}:{ref:f,style:p,index:i,children:t})}),Y=(0,c.forwardRef)(function(e,t){var n,r,i=e.children,a=e.count,l=e.overscan,f=e.itemSize,h=e.shift,m=e.horizontal,g=e.keepMounted,b=e.cache,w=e.startMargin,_=void 0===w?0:w,k=e.ssrCount,S=e.as,C=e.item,j=void 0===C?"div":C,T=e.scrollRef,E=e.onScroll,R=e.onScrollEnd,I=(0,o._)((n=i,r=a,(0,c.useMemo)(function(){if("function"==typeof n)return[n,r||0];var e,t=(H(n,e=[]),e);return[function(e){return t[e]},t.length]},[n,r])),2),A=I[0],P=I[1],D=(0,c.useRef)(null),O=(0,c.useRef)(!!k),M=q(E),L=q(R),B=(0,o._)(W(function(){var e=!!m,t=N(P,f,l,k,b,!f);return[t,U(t,e),V(t,e),e]}),4),F=B[0],Y=B[1],Q=B[2],X=B[3];P!==F.M()&&F.J(5,[P,h]),_!==F.W()&&F.J(6,_);var Z=(0,o._)((0,c.useReducer)(F.p,void 0,F.p),2),J=Z[0],ee=Z[1],et=(0,o._)(F._(),2),en=et[0],er=et[1],ei=F.H(),ea=F.h(),eo=[],es=function(e){var t=A(e);return(0,u.jsx)(K,{Z:Y.K,ee:e,te:F.T(e),ne:F.I(e),oe:j,N:t,re:X,ie:O[$]},z(t,e))};G(function(){O[$]=!1;var e=F.B(1,function(e){e?(0,d.flushSync)(ee):ee()}),t=F.B(4,function(){M[$]&&M[$](F.C())}),n=F.B(8,function(){L[$]&&L[$]()}),r=function(e){Y.G(e),Q.V(e)};return T?y(function(){return r(T[$])}):r(D[$].parentElement),function(){e(),t(),n(),Y.X(),Q.X()}},[]),G(function(){Q.D()},[J]),(0,c.useImperativeHandle)(t,function(){return{get cache(){return F.m()},get scrollOffset(){return F.C()},get scrollSize(){var e;return p((e=F).h(),e.v())},get viewportSize(){return F.v()},findStartIndex:F.S,findEndIndex:F.$,getItemOffset:F.T,getItemSize:F.R,scrollToIndex:Q.q,scrollTo:Q.Y,scrollBy:Q.j}},[]);for(var el=en;el<=er;el++)eo.push(es(el));if(g){var eu=[],ec=[];x(g).forEach(function(e){e<en&&eu.push(es(e)),e>er&&ec.push(es(e))}),eo.unshift.apply(eo,(0,s._)(eu)),eo.push.apply(eo,(0,s._)(ec))}return(0,u.jsx)(void 0===S?"div":S,{ref:D,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:X?ea:"100%",height:X?"100%":ea,pointerEvents:ei?"none":void 0},children:eo})}),Q=(0,c.forwardRef)(function(e,t){var o,s=e.children,l=e.count,d=e.overscan,f=e.itemSize,p=e.shift,h=e.horizontal,m=e.keepMounted,g=e.reverse,x=e.cache,y=e.ssrCount,b=e.item,w=e.onScroll,_=e.onScrollEnd,k=e.style,S=(0,a._)(e,["children","count","overscan","itemSize","shift","horizontal","keepMounted","reverse","cache","ssrCount","item","onScroll","onScrollEnd","style"]),C=(0,c.useRef)(null),j=g&&!h,T=(0,u.jsx)(Y,{ref:t,scrollRef:j?C:void 0,count:l,overscan:d,itemSize:f,shift:p,horizontal:h,keepMounted:m,cache:x,ssrCount:y,item:b,onScroll:w,onScrollEnd:_,children:s});return j&&(T=(0,u.jsx)("div",{style:{visibility:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-end",minHeight:"100%"},children:T})),(0,u.jsx)("div",(0,i._)((0,r._)({ref:C},S),{style:(0,r._)((o={display:h?"inline-block":"block"},(0,n._)(o,h?"overflowX":"overflowY","auto"),(0,n._)(o,"contain","strict"),(0,n._)(o,"width","100%"),(0,n._)(o,"height","100%"),o),k),children:T}))});e.s(["VList",()=>Q])},72675,e=>{e.v(["0BSD","AAL","ADSL","AFL-1.1","AFL-1.2","AFL-2.0","AFL-2.1","AFL-3.0","AGPL-1.0-only","AGPL-1.0-or-later","AGPL-3.0-only","AGPL-3.0-or-later","AMDPLPA","AML","AMPAS","ANTLR-PD","ANTLR-PD-fallback","APAFML","APL-1.0","APSL-1.0","APSL-1.1","APSL-1.2","APSL-2.0","Abstyles","AdaCore-doc","Adobe-2006","Adobe-Glyph","Afmparse","Aladdin","Apache-1.0","Apache-1.1","Apache-2.0","App-s2p","Arphic-1999","Artistic-1.0","Artistic-1.0-Perl","Artistic-1.0-cl8","Artistic-2.0","BSD-1-Clause","BSD-2-Clause","BSD-2-Clause-Patent","BSD-2-Clause-Views","BSD-3-Clause","BSD-3-Clause-Attribution","BSD-3-Clause-Clear","BSD-3-Clause-LBNL","BSD-3-Clause-Modification","BSD-3-Clause-No-Military-License","BSD-3-Clause-No-Nuclear-License","BSD-3-Clause-No-Nuclear-License-2014","BSD-3-Clause-No-Nuclear-Warranty","BSD-3-Clause-Open-MPI","BSD-4-Clause","BSD-4-Clause-Shortened","BSD-4-Clause-UC","BSD-4.3RENO","BSD-4.3TAHOE","BSD-Advertising-Acknowledgement","BSD-Attribution-HPND-disclaimer","BSD-Protection","BSD-Source-Code","BSL-1.0","BUSL-1.1","Baekmuk","Bahyph","Barr","Beerware","BitTorrent-1.0","BitTorrent-1.1","Bitstream-Charter","Bitstream-Vera","BlueOak-1.0.0","Borceux","Brian-Gladman-3-Clause","C-UDA-1.0","CAL-1.0","CAL-1.0-Combined-Work-Exception","CATOSL-1.1","CC-BY-1.0","CC-BY-2.0","CC-BY-2.5","CC-BY-2.5-AU","CC-BY-3.0","CC-BY-3.0-AT","CC-BY-3.0-DE","CC-BY-3.0-IGO","CC-BY-3.0-NL","CC-BY-3.0-US","CC-BY-4.0","CC-BY-NC-1.0","CC-BY-NC-2.0","CC-BY-NC-2.5","CC-BY-NC-3.0","CC-BY-NC-3.0-DE","CC-BY-NC-4.0","CC-BY-NC-ND-1.0","CC-BY-NC-ND-2.0","CC-BY-NC-ND-2.5","CC-BY-NC-ND-3.0","CC-BY-NC-ND-3.0-DE","CC-BY-NC-ND-3.0-IGO","CC-BY-NC-ND-4.0","CC-BY-NC-SA-1.0","CC-BY-NC-SA-2.0","CC-BY-NC-SA-2.0-DE","CC-BY-NC-SA-2.0-FR","CC-BY-NC-SA-2.0-UK","CC-BY-NC-SA-2.5","CC-BY-NC-SA-3.0","CC-BY-NC-SA-3.0-DE","CC-BY-NC-SA-3.0-IGO","CC-BY-NC-SA-4.0","CC-BY-ND-1.0","CC-BY-ND-2.0","CC-BY-ND-2.5","CC-BY-ND-3.0","CC-BY-ND-3.0-DE","CC-BY-ND-4.0","CC-BY-SA-1.0","CC-BY-SA-2.0","CC-BY-SA-2.0-UK","CC-BY-SA-2.1-JP","CC-BY-SA-2.5","CC-BY-SA-3.0","CC-BY-SA-3.0-AT","CC-BY-SA-3.0-DE","CC-BY-SA-4.0","CC-PDDC","CC0-1.0","CDDL-1.0","CDDL-1.1","CDL-1.0","CDLA-Permissive-1.0","CDLA-Permissive-2.0","CDLA-Sharing-1.0","CECILL-1.0","CECILL-1.1","CECILL-2.0","CECILL-2.1","CECILL-B","CECILL-C","CERN-OHL-1.1","CERN-OHL-1.2","CERN-OHL-P-2.0","CERN-OHL-S-2.0","CERN-OHL-W-2.0","CFITSIO","CMU-Mach","CNRI-Jython","CNRI-Python","CNRI-Python-GPL-Compatible","COIL-1.0","CPAL-1.0","CPL-1.0","CPOL-1.02","CUA-OPL-1.0","Caldera","ClArtistic","Clips","Community-Spec-1.0","Condor-1.1","Cornell-Lossless-JPEG","Crossword","CrystalStacker","Cube","D-FSL-1.0","DL-DE-BY-2.0","DOC","DRL-1.0","DSDP","Dotseqn","ECL-1.0","ECL-2.0","EFL-1.0","EFL-2.0","EPICS","EPL-1.0","EPL-2.0","EUDatagrid","EUPL-1.0","EUPL-1.1","EUPL-1.2","Elastic-2.0","Entessa","ErlPL-1.1","Eurosym","FDK-AAC","FSFAP","FSFUL","FSFULLR","FSFULLRWD","FTL","Fair","Frameworx-1.0","FreeBSD-DOC","FreeImage","GD","GFDL-1.1-invariants-only","GFDL-1.1-invariants-or-later","GFDL-1.1-no-invariants-only","GFDL-1.1-no-invariants-or-later","GFDL-1.1-only","GFDL-1.1-or-later","GFDL-1.2-invariants-only","GFDL-1.2-invariants-or-later","GFDL-1.2-no-invariants-only","GFDL-1.2-no-invariants-or-later","GFDL-1.2-only","GFDL-1.2-or-later","GFDL-1.3-invariants-only","GFDL-1.3-invariants-or-later","GFDL-1.3-no-invariants-only","GFDL-1.3-no-invariants-or-later","GFDL-1.3-only","GFDL-1.3-or-later","GL2PS","GLWTPL","GPL-1.0-only","GPL-1.0-or-later","GPL-2.0-only","GPL-2.0-or-later","GPL-3.0-only","GPL-3.0-or-later","Giftware","Glide","Glulxe","Graphics-Gems","HP-1986","HPND","HPND-Markus-Kuhn","HPND-export-US","HPND-sell-variant","HPND-sell-variant-MIT-disclaimer","HTMLTIDY","HaskellReport","Hippocratic-2.1","IBM-pibs","ICU","IEC-Code-Components-EULA","IJG","IJG-short","IPA","IPL-1.0","ISC","ImageMagick","Imlib2","Info-ZIP","Intel","Intel-ACPI","Interbase-1.0","JPL-image","JPNIC","JSON","Jam","JasPer-2.0","Kazlib","Knuth-CTAN","LAL-1.2","LAL-1.3","LGPL-2.0-only","LGPL-2.0-or-later","LGPL-2.1-only","LGPL-2.1-or-later","LGPL-3.0-only","LGPL-3.0-or-later","LGPLLR","LOOP","LPL-1.0","LPL-1.02","LPPL-1.0","LPPL-1.1","LPPL-1.2","LPPL-1.3a","LPPL-1.3c","LZMA-SDK-9.11-to-9.20","LZMA-SDK-9.22","Latex2e","Leptonica","LiLiQ-P-1.1","LiLiQ-R-1.1","LiLiQ-Rplus-1.1","Libpng","Linux-OpenIB","Linux-man-pages-copyleft","MIT","MIT-0","MIT-CMU","MIT-Modern-Variant","MIT-Wu","MIT-advertising","MIT-enna","MIT-feh","MIT-open-group","MITNFA","MPL-1.0","MPL-1.1","MPL-2.0","MPL-2.0-no-copyleft-exception","MS-LPL","MS-PL","MS-RL","MTLL","MakeIndex","Martin-Birgmeier","Minpack","MirOS","Motosoto","MulanPSL-1.0","MulanPSL-2.0","Multics","Mup","NAIST-2003","NASA-1.3","NBPL-1.0","NCGL-UK-2.0","NCSA","NGPL","NICTA-1.0","NIST-PD","NIST-PD-fallback","NLOD-1.0","NLOD-2.0","NLPL","NOSL","NPL-1.0","NPL-1.1","NPOSL-3.0","NRL","NTP","NTP-0","Naumen","Net-SNMP","NetCDF","Newsletr","Nokia","Noweb","O-UDA-1.0","OCCT-PL","OCLC-2.0","ODC-By-1.0","ODbL-1.0","OFFIS","OFL-1.0","OFL-1.0-RFN","OFL-1.0-no-RFN","OFL-1.1","OFL-1.1-RFN","OFL-1.1-no-RFN","OGC-1.0","OGDL-Taiwan-1.0","OGL-Canada-2.0","OGL-UK-1.0","OGL-UK-2.0","OGL-UK-3.0","OGTSL","OLDAP-1.1","OLDAP-1.2","OLDAP-1.3","OLDAP-1.4","OLDAP-2.0","OLDAP-2.0.1","OLDAP-2.1","OLDAP-2.2","OLDAP-2.2.1","OLDAP-2.2.2","OLDAP-2.3","OLDAP-2.4","OLDAP-2.5","OLDAP-2.6","OLDAP-2.7","OLDAP-2.8","OML","OPL-1.0","OPUBL-1.0","OSET-PL-2.1","OSL-1.0","OSL-1.1","OSL-2.0","OSL-2.1","OSL-3.0","OpenPBS-2.3","OpenSSL","PDDL-1.0","PHP-3.0","PHP-3.01","PSF-2.0","Parity-6.0.0","Parity-7.0.0","Plexus","PolyForm-Noncommercial-1.0.0","PolyForm-Small-Business-1.0.0","PostgreSQL","Python-2.0","Python-2.0.1","QPL-1.0","QPL-1.0-INRIA-2004","Qhull","RHeCos-1.1","RPL-1.1","RPL-1.5","RPSL-1.0","RSA-MD","RSCPL","Rdisc","Ruby","SAX-PD","SCEA","SGI-B-1.0","SGI-B-1.1","SGI-B-2.0","SHL-0.5","SHL-0.51","SISSL","SISSL-1.2","SMLNJ","SMPPL","SNIA","SPL-1.0","SSH-OpenSSH","SSH-short","SSPL-1.0","SWL","Saxpath","SchemeReport","Sendmail","Sendmail-8.23","SimPL-2.0","Sleepycat","Spencer-86","Spencer-94","Spencer-99","SugarCRM-1.1.3","SunPro","Symlinks","TAPR-OHL-1.0","TCL","TCP-wrappers","TMate","TORQUE-1.1","TOSL","TPDL","TPL-1.0","TTWL","TU-Berlin-1.0","TU-Berlin-2.0","UCAR","UCL-1.0","UPL-1.0","Unicode-DFS-2015","Unicode-DFS-2016","Unicode-TOU","Unlicense","VOSTROM","VSL-1.0","Vim","W3C","W3C-19980720","W3C-20150513","WTFPL","Watcom-1.0","Wsuipa","X11","X11-distribute-modifications-variant","XFree86-1.1","XSkat","Xerox","Xnet","YPL-1.0","YPL-1.1","ZPL-1.1","ZPL-2.0","ZPL-2.1","Zed","Zend-2.0","Zimbra-1.3","Zimbra-1.4","Zlib","blessing","bzip2-1.0.6","checkmk","copyleft-next-0.3.0","copyleft-next-0.3.1","curl","diffmark","dvipdfm","eGenix","etalab-2.0","gSOAP-1.3b","gnuplot","iMatix","libpng-2.0","libselinux-1.0","libtiff","libutil-David-Nugent","mpi-permissive","mpich2","mplus","psfrag","psutils","snprintf","w3m","xinetd","xlock","xpp","zlib-acknowledgement"])},170957,e=>{e.v(["AGPL-1.0","AGPL-3.0","BSD-2-Clause-FreeBSD","BSD-2-Clause-NetBSD","GFDL-1.1","GFDL-1.2","GFDL-1.3","GPL-1.0","GPL-2.0","GPL-2.0-with-GCC-exception","GPL-2.0-with-autoconf-exception","GPL-2.0-with-bison-exception","GPL-2.0-with-classpath-exception","GPL-2.0-with-font-exception","GPL-3.0","GPL-3.0-with-GCC-exception","GPL-3.0-with-autoconf-exception","LGPL-2.0","LGPL-2.1","LGPL-3.0","Nunit","StandardML-NJ","bzip2-1.0.5","eCos-2.0","wxWindows"])},125107,e=>{e.v(["389-exception","Autoconf-exception-2.0","Autoconf-exception-3.0","Bison-exception-2.2","Bootloader-exception","CLISP-exception-2.0","Classpath-exception-2.0","DigiRule-FOSS-exception","FLTK-exception","Fawkes-Runtime-exception","Font-exception-2.0","GCC-exception-2.0","GCC-exception-3.1","LZMA-exception","Libtool-exception","Linux-syscall-note","Nokia-Qt-exception-1.1","OCCT-exception-1.0","Qwt-exception-1.0","WxWindows-exception-3.1","eCos-exception-2.0","freertos-exception-2.0","gnu-javamail-exception","i2p-gpl-java-exception","mif-exception","openvpn-openssl-exception","u-boot-exception-2.0"])},706373,(e,t,n)=>{"use strict";var r=e.r(954546),i=[].concat(e.r(72675)).concat(e.r(170957)),a=e.r(125107);t.exports=function(e){var t=0;function n(){return t<e.length}function o(n){if(r._(n,RegExp)){var i=e.slice(t).match(n);if(i)return t+=i[0].length,i[0]}else if(e.indexOf(n,t)===t)return t+=n.length,n}function s(){return o(/[A-Za-z0-9-.]+/)}function l(){var e=s();if(!e)throw Error("Expected idstring at offset "+t);return e}for(var u=[];n()&&(o(/[ ]*/),n());){var c=function(){var n,r;return function(){for(var n,r=["WITH","AND","OR","(",")",":","+"],i=0;i<r.length&&!(n=o(r[i]));i++);if("+"===n&&t>1&&" "===e[t-2])throw Error("Space before `+`");return n&&{type:"OPERATOR",string:n}}()||function(){if(o("DocumentRef-"))return{type:"DOCUMENTREF",string:l()}}()||function(){if(o("LicenseRef-"))return{type:"LICENSEREF",string:l()}}()||(n=t,r=s(),-1!==i.indexOf(r)?{type:"LICENSE",string:r}:-1!==a.indexOf(r)?{type:"EXCEPTION",string:r}:void(t=n))}();if(!c)throw Error("Unexpected `"+e[t]+"` at offset "+t);u.push(c)}return u}},512225,(e,t,n)=>{"use strict";t.exports=function(e){var t=0;function n(){return t<e.length}function r(){return n()?e[t]:null}function i(){if(!n())throw Error();t++}function a(e){var t=r();if(t&&"OPERATOR"===t.type&&e===t.string)return i(),t.string}function o(e,t){return function n(){var r=t();if(r){if(!a(e))return r;var i=n();if(!i)throw Error("Expected expression");return{left:r,conjunction:e.toLowerCase(),right:i}}}}var s=o("AND",function(){return function(){if(a("(")){var e=l();if(!a(")"))throw Error("Expected `)`");return e}}()||function(){var e=t,n="",o=r();if("DOCUMENTREF"===o.type&&(i(),n+="DocumentRef-"+o.string+":",!a(":")))throw Error("Expected `:` after `DocumentRef-...`");if("LICENSEREF"===(o=r()).type)return i(),{license:n+="LicenseRef-"+o.string};t=e}()||function(){var e=r();if(e&&"LICENSE"===e.type){i();var t={license:e.string};a("+")&&(t.plus=!0);var n=function(){if(a("WITH")){var e=r();if(e&&"EXCEPTION"===e.type)return i(),e.string;throw Error("Expected exception after `WITH`")}}();return n&&(t.exception=n),t}}()}),l=o("OR",s),u=l();if(!u||n())throw Error("Syntax error");return u}},977122,(e,t,n)=>{"use strict";var r=e.r(706373),i=e.r(512225);t.exports=function(e){return i(r(e))}},994296,(e,t,n)=>{var r=e.r(977122),i=e.r(72675);function a(e){try{return r(e),!0}catch(e){return!1}}function o(e,t){var n=t[0].length-e[0].length;return 0!==n?n:e[0].toUpperCase().localeCompare(t[0].toUpperCase())}var s=[["APGL","AGPL"],["Gpl","GPL"],["GLP","GPL"],["APL","Apache"],["ISD","ISC"],["GLP","GPL"],["IST","ISC"],["Claude","Clause"],[" or later","+"],[" International",""],["GNU","GPL"],["GUN","GPL"],["+",""],["GNU GPL","GPL"],["GNU LGPL","LGPL"],["GNU/GPL","GPL"],["GNU GLP","GPL"],["GNU LESSER GENERAL PUBLIC LICENSE","LGPL"],["GNU Lesser General Public License","LGPL"],["GNU LESSER GENERAL PUBLIC LICENSE","LGPL-2.1"],["GNU Lesser General Public License","LGPL-2.1"],["LESSER GENERAL PUBLIC LICENSE","LGPL"],["Lesser General Public License","LGPL"],["LESSER GENERAL PUBLIC LICENSE","LGPL-2.1"],["Lesser General Public License","LGPL-2.1"],["GNU General Public License","GPL"],["Gnu public license","GPL"],["GNU Public License","GPL"],["GNU GENERAL PUBLIC LICENSE","GPL"],["MTI","MIT"],["Mozilla Public License","MPL"],["Universal Permissive License","UPL"],["WTH","WTF"],["WTFGPL","WTFPL"],["-License",""]].sort(o),l=[function(e){return e.toUpperCase()},function(e){return e.trim()},function(e){return e.replace(/\./g,"")},function(e){return e.replace(/\s+/g,"")},function(e){return e.replace(/\s+/g,"-")},function(e){return e.replace("v","-")},function(e){return e.replace(/,?\s*(\d)/,"-$1")},function(e){return e.replace(/,?\s*(\d)/,"-$1.0")},function(e){return e.replace(/,?\s*(V\.|v\.|V|v|Version|version)\s*(\d)/,"-$2")},function(e){return e.replace(/,?\s*(V\.|v\.|V|v|Version|version)\s*(\d)/,"-$2.0")},function(e){return e[0].toUpperCase()+e.slice(1)},function(e){return e.replace("/","-")},function(e){return e.replace(/\s*V\s*(\d)/,"-$1").replace(/(\d)$/,"$1.0")},function(e){return -1!==e.indexOf("3.0")?e+"-or-later":e+"-only"},function(e){return e+"only"},function(e){return e.replace(/(\d)$/,"-$1.0")},function(e){return e.replace(/(-| )?(\d)$/,"-$2-Clause")},function(e){return e.replace(/(-| )clause(-| )(\d)/,"-$3-Clause")},function(e){return e.replace(/\b(Modified|New|Revised)(-| )?BSD((-| )License)?/i,"BSD-3-Clause")},function(e){return e.replace(/\bSimplified(-| )?BSD((-| )License)?/i,"BSD-2-Clause")},function(e){return e.replace(/\b(Free|Net)(-| )?BSD((-| )License)?/i,"BSD-2-Clause-$1BSD")},function(e){return e.replace(/\bClear(-| )?BSD((-| )License)?/i,"BSD-3-Clause-Clear")},function(e){return e.replace(/\b(Old|Original)(-| )?BSD((-| )License)?/i,"BSD-4-Clause")},function(e){return"CC-"+e},function(e){return"CC-"+e+"-4.0"},function(e){return e.replace("Attribution","BY").replace("NonCommercial","NC").replace("NoDerivatives","ND").replace(/ (\d)/,"-$1").replace(/ ?International/,"")},function(e){return"CC-"+e.replace("Attribution","BY").replace("NonCommercial","NC").replace("NoDerivatives","ND").replace(/ (\d)/,"-$1").replace(/ ?International/,"")+"-4.0"}],u=i.map(function(e){var t=/^(.*)-\d+\.\d+$/.exec(e);return t?[t[0],t[1]]:[e,null]}).reduce(function(e,t){var n=t[1];return e[n]=e[n]||[],e[n].push(t[0]),e},{}),c=Object.keys(u).map(function(e){return[e,u[e]]}).filter(function(e){return 1===e[1].length&&null!==e[0]&&"APL"!==e[0]}).map(function(e){return[e[0],e[1][0]]});u=void 0;var d=[["UNLI","Unlicense"],["WTF","WTFPL"],["2 CLAUSE","BSD-2-Clause"],["2-CLAUSE","BSD-2-Clause"],["3 CLAUSE","BSD-3-Clause"],["3-CLAUSE","BSD-3-Clause"],["AFFERO","AGPL-3.0-or-later"],["AGPL","AGPL-3.0-or-later"],["APACHE","Apache-2.0"],["ARTISTIC","Artistic-2.0"],["Affero","AGPL-3.0-or-later"],["BEER","Beerware"],["BOOST","BSL-1.0"],["BSD","BSD-2-Clause"],["CDDL","CDDL-1.1"],["ECLIPSE","EPL-1.0"],["FUCK","WTFPL"],["GNU","GPL-3.0-or-later"],["LGPL","LGPL-3.0-or-later"],["GPLV1","GPL-1.0-only"],["GPL-1","GPL-1.0-only"],["GPLV2","GPL-2.0-only"],["GPL-2","GPL-2.0-only"],["GPL","GPL-3.0-or-later"],["MIT +NO-FALSE-ATTRIBS","MITNFA"],["MIT","MIT"],["MPL","MPL-2.0"],["X11","X11"],["ZLIB","Zlib"]].concat(c).sort(o),f=function(e){for(var t=0;t<l.length;t++){var n=l[t](e).trim();if(n!==e&&a(n))return n}return null},p=function(e){for(var t=e.toUpperCase(),n=0;n<d.length;n++){var r=d[n];if(t.indexOf(r[0])>-1)return r[1]}return null},h=function(e,t){for(var n=0;n<s.length;n++){var r=s[n],i=r[0];if(e.indexOf(i)>-1){var a=t(e.replace(i,r[1]));if(null!==a)return a}}return null};t.exports=function(e,t){var n=void 0===(t=t||{}).upgrade||!!t.upgrade;function r(e){var t;return n?-1!==["GPL-1.0","LGPL-1.0","AGPL-1.0","GPL-2.0","LGPL-2.0","AGPL-2.0","LGPL-2.1"].indexOf(t=e)?t+"-only":-1!==["GPL-1.0+","GPL-2.0+","GPL-3.0+","LGPL-2.0+","LGPL-2.1+","LGPL-3.0+","AGPL-1.0+","AGPL-3.0+"].indexOf(t)?t.replace(/\+$/,"-or-later"):-1!==["GPL-3.0","LGPL-3.0","AGPL-3.0"].indexOf(t)?t+"-or-later":t:e}if("string"!=typeof e||0===e.trim().length)throw Error("Invalid argument. Expected non-empty string.");if(a(e=e.trim()))return r(e);var i=e.replace(/\+$/,"").trim();if(a(i))return r(i);var o=f(e);return null!==o||null!==(o=h(e,function(e){return a(e)?e:f(e)}))||null!==(o=p(e))||null!==(o=h(e,p))?r(o):null}},477758,e=>{"use strict";var t=e.i(389959),n=e.i(994296);function r(e){return(0,t.useMemo)(function(){if(!e||e.length>40)return"Unknown License";var t=(0,n.default)(e,{upgrade:!1});return t||"Unknown License"},[e])}e.s(["default",()=>r])},102905,642714,e=>{"use strict";var t=e.i(297083),n=e.i(817556);function r(e){return null==e?void 0:e.replace(/^pkgs\./,"")}let i={name:"nix",getInstalledPackages:function(e){return(0,t._)(function(e){var t;return(0,n._)(this,function(n){switch(n.label){case 0:return[4,e.services.nixService.listPackages()];case 1:if(null!==(t=n.sent()).error)return[2,[]];return[2,t.packages.filter(function(e){return!!e.name}).map(function(e){return{name:e.name,version:e.version}})]}})}).apply(this,arguments)},getPackageInfo:function(e){return(0,t._)(function(e){var t,r;return(0,n._)(this,function(n){switch(n.label){case 0:return t=e.name,[4,e.services.nixService.packageInfo(t)];case 1:if(null!==(r=n.sent()).error)return[2,{}];return[2,r.package]}})}).apply(this,arguments)},search:function(e){return(0,t._)(function(e){var t,r,i,a;return(0,n._)(this,function(n){switch(n.label){case 0:return t=e.query,r=e.services.nixService,i=e.nixOpts,[4,r.searchPackages(t,i)];case 1:if(null!==(a=n.sent()).error)throw Error("Could not search Nix packages");return[2,a.packages.map(function(e){var t,n;return{name:e.name,version:e.version,description:e.description,homepageURL:null!=(t=e.homepageURL[0])?t:null,license:null!=(n=e.licenses[0])?n:null}})]}})}).apply(this,arguments)},install:function(e){return(0,t._)(function(e){var t,r,i;return(0,n._)(this,function(n){switch(n.label){case 0:return t=e.pkgs,r=e.services.nixService,i=t.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,r.addPackages(i)];case 1:return n.sent(),[2]}})}).apply(this,arguments)},uninstall:function(e){return(0,t._)(function(e){var t,r,i;return(0,n._)(this,function(n){switch(n.label){case 0:return t=e.pkgs,r=e.services.nixService,i=t.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,r.removePackages(i)];case 1:return n.sent(),[2]}})}).apply(this,arguments)}};e.s(["default",0,i,"normalizeNixPackageName",()=>r],642714);let a={name:"upm",getInstalledPackages:function(e){return(0,t._)(function(e){var t,r;return(0,n._)(this,function(n){switch(n.label){case 0:return t=e.id,[4,e.services.packager.listSpecfile(t)];case 1:if((r=n.sent()).error||null===r.packages)return[2,[]];return[2,r.packages]}})}).apply(this,arguments)},getPackageInfo:function(e){return(0,t._)(function(e){var t,r;return(0,n._)(this,function(n){return t=e.id,r=e.name,[2,e.services.packager.fetchPackageInfo(r,t)]})}).apply(this,arguments)},search:function(e){return(0,t._)(function(e){var t,r;return(0,n._)(this,function(n){return t=e.id,r=e.query,[2,e.services.packager.searchPackages(r,t)]})}).apply(this,arguments)},install:function(e){return(0,t._)(function(e){var t,r;return(0,n._)(this,function(n){switch(n.label){case 0:return t=e.id,r=e.pkgs,[4,e.services.packager.addPackages(r,t)];case 1:if(!n.sent())throw Error("Package install failed");return[2]}})}).apply(this,arguments)},uninstall:function(e){return(0,t._)(function(e){var t,r,i,a;return(0,n._)(this,function(n){switch(n.label){case 0:return t=e.id,r=e.pkgs,i=e.services.packager,a=r.filter(function(e){return e.name}).map(function(e){return e.name}),[4,i.removePackages(a,t)];case 1:if(!n.sent())throw Error("Package uninstall failed");return[2]}})}).apply(this,arguments)}};function o(e){return"nix"===e?i:a}e.s(["getPackager",()=>o],102905)},943695,e=>{"use strict";var t=e.i(530658),n=e.i(389959),r=e.i(541793),i=e.i(161322),a=e.i(719518);function o(){return(0,t._)((0,n.useState)(function(){return(0,r.createStore)()}),1)[0]}var s=(0,n.createContext)(null);function l(){var e=(0,n.useContext)(s);if(!e)throw Error("Expected store in context");return e}var u=function(e){return(0,i.useSetAtom)(e,{store:l()})},c=(0,r.atom)(null);function d(){return(0,i.useAtomValue)(c,{store:l()})}function f(){return(0,a.useAtomCallback)((0,n.useCallback)(function(e){return e(c)},[c]),{store:l()})}e.s(["PackagerContext",()=>s,"configAtom",()=>c,"useConfig",()=>d,"useGetConfig",()=>f,"useInitStore",()=>o,"useSet",()=>u])},919159,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(389959),a=e.i(529810),o=e.i(102905),s=e.i(943695),l=new Map;function u(e){var u,c=(0,s.useConfig)(),d=(0,a.default)(),f=(0,n._)((0,i.useState)(null!=(u=l.get("".concat(null==c?void 0:c.id,":").concat(e.name)))?u:null),2),p=f[0],h=f[1];return(0,i.useEffect)(function(){if((null==c?void 0:c.id)&&e.name){var n=e.name;if(!l.has(n)){var i=(0,o.getPackager)(c.id),a=!1;return(0,t._)(function(){var e;return(0,r._)(this,function(t){switch(t.label){case 0:return[4,i.getPackageInfo({id:c.id,name:n,services:d})];case 1:if((e=t.sent())&&"string"!=typeof(null==e?void 0:e.homepageURL)&&delete e.homepageURL,a)return[2];return l.set("".concat(c.id,":").concat(n),null!=e?e:null),h(null!=e?e:null),[2]}})})(),function(){a=!0}}}},[null==c?void 0:c.id,e.name]),p}e.s(["default",()=>u])},465713,e=>{"use strict";var t=e.i(276385),n=e.i(943695);function r(e){var r=e.children,i=e.config,a=(0,n.useSet)(n.configAtom);return i.id&&a(i),(0,t.jsx)(t.Fragment,{children:r})}function i(e){var i=e.children,a=e.config,o=(0,n.useInitStore)();return(0,t.jsx)(n.PackagerContext.Provider,{value:o,children:a?(0,t.jsx)(r,{config:a,children:i}):i})}e.s(["default",()=>i])},595974,e=>{"use strict";var t,n,r=e.i(721281),i=e.i(878420),a=e.i(64386),o=e.i(530658),s=e.i(633600),l=e.i(389959),u=e.i(131141),c=e.i(541793),d=e.i(161322),f=e.i(719518),p=e.i(642714),h=((t={}).Uninitialized="Uninitialized",t.Initializing="Initializing",t.Installing="Installing",t.Uninstalling="Uninstalling",t.Idle="Idle",t),m=((n={}).Install="Install",n.Uninstall="Uninstall",n);function g(){return(0,o._)((0,l.useState)(function(){return(0,c.createStore)()}),1)[0]}var x=(0,l.createContext)(null);function y(){var e=(0,l.useContext)(x);if(!e)throw Error("Expected store in context");return e}var b=function(e){return(0,d.useSetAtom)(e,{store:y()})};function w(e){return(0,f.useAtomCallback)((0,l.useCallback)(function(t){return t(e)},[e]),{store:y()})}function _(e){return(0,d.useAtomValue)(e,{store:y()})}var k=(0,c.atom)({});function S(e){var t,n=_(k);return e&&null!=(t=n[e])?t:[]}function C(){var e=b(k);return function(t,n){e(function(e){return(0,u.produce)(e,function(e){var r=e[t];if(!r||0===r.length){e[t]=n;return}var i=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)!function(){var e=s.value;r.find(function(t){return t.name===e.name})||r.push(e)}()}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}})})}}function j(){var e=b(k);return function(t,n){e(function(e){return(0,u.produce)(e,function(e){var r=e[t];if(r&&0!==r.length){var i=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)!function(){var e=s.value,t=r.findIndex(function(t){return t.name===e.name});-1!==t&&r.splice(t,1)}()}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}})})}}var T=(0,c.atom)({});function E(){var e=w(T);return function(t){var n;return null!=(n=e()[t])?n:null}}function R(){var e=b(T);return function(t,n){e(function(e){return(0,a._)((0,i._)({},e),(0,r._)({},t,n))})}}var I=(0,c.atom)(null);function A(){return _(I)}var P=(0,c.atom)([]);function D(){return _(P)}var O=(0,c.atom)({});function N(e){var t,n=_(O);return e&&null!=(t=n[e])?t:[]}function M(){var e=w(O);return function(t){var n;return null!=(n=e()[t])?n:[]}}function L(){var e=b(O);return function(t,n){e(function(e){return(0,a._)((0,i._)({},e),(0,r._)({},t,n.map(function(e){return"nix"===t?(0,a._)((0,i._)({},e),{name:(0,p.normalizeNixPackageName)(e.name)}):e})))})}}var B=(0,c.atom)(null,function(e,t,n){var r=n.id,i=n.pkg;if(!i.name)throw Error("Package does not have a name.");t(P,function(e){return(0,u.produce)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(t){return e.id===r&&t.name===i.name})})){var t=e.find(function(e){return"Install"===e.kind});t?t.pkgs.push(i):e.push({kind:"Install",id:r,pkgs:[i]})}})})});function V(){return b(B)}var F=(0,c.atom)(null,function(e,t,n){var r=n.id,i=n.pkg;if(!i.name)throw Error("Package does not have a name.");t(P,function(e){return(0,u.produce)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(t){return e.id===r&&t.name===i.name})})){var t=e.find(function(e){return"Uninstall"===e.kind});t?t.pkgs.push(i):e.push({kind:"Uninstall",id:r,pkgs:[i]})}})})});function U(){return b(F)}var G=(0,c.atom)(null,function(e,t,n){var r=(0,s._)(e(P)),i=r[0],a=r.slice(1);n===i&&(t(P,a),t(I,n))});function $(){return b(G)}var H=(0,c.atom)(null,function(e,t,n){t(P,function(e){return(0,u.produce)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value,l=s.pkgs.findIndex(function(e){return e.name===n});-1!==l&&s.pkgs.splice(l,1)}}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}})})});function z(){return b(H)}e.s(["GlobalPackagerContext",()=>x,"PackagerActionKind",()=>m,"PackagerStatus",()=>h,"actionQueueAtom",()=>P,"currentActionAtom",()=>I,"statusAtom",()=>T,"useActionQueue",()=>D,"useAddErrors",()=>C,"useCancelPackageAction",()=>z,"useCurrentAction",()=>A,"useErrors",()=>S,"useGet",()=>w,"useGetInstalledPackages",()=>M,"useGetStatus",()=>E,"useInitStore",()=>g,"useInstallPackage",()=>V,"useInstalledPackages",()=>N,"useRemoveErrors",()=>j,"useSet",()=>b,"useSetInstalledPackages",()=>L,"useSetStatus",()=>R,"useShiftActionQueue",()=>$,"useUninstallPackage",()=>U,"useValue",()=>_])},416086,e=>{"use strict";var t=e.i(297083),n=e.i(878420),r=e.i(64386),i=e.i(886513),a=e.i(530658),o=e.i(817556),s=e.i(276385),l=e.i(389959),u=e.i(338188),c=e.i(252204),d=e.i(416746),f=e.i(409570),p=e.i(40916),h=e.i(491194),m=e.i(709485),g=e.i(399344),x=e.i(858248),y=e.i(477758),b=e.i(919159),w=e.i(545453),_=e.i(465713),k=e.i(595974),S=e.i(943695),C=e.i(480028),j=e.i(446530),T=e.i(613355),E=e.i(965153),R=e.i(140487),I=e.i(136540),A=e.i(11235),P=e.i(960178),D=e.i(751273),O=e.i(625484),N=(0,j.cssRecord)({header:[T.rcss.height(36)],description:[T.rcss.flex.column,T.rcss.gap(8)],divider:[T.rcss.backgroundColor.outlineDimmer],package:[T.rcss.border({color:"transparent"}),T.rcss.justify.spaceBetween,{"&:hover":{backgroundColor:C.tokens.backgroundHighest}}],packageList:[T.rcss.height(220),T.rcss.overflowY("auto")],packageMetadata:[T.rcss.overflow("hidden"),T.rcss.mr(8)],packageName:[T.rcss.truncate,T.rcss.flex.growAndShrink(1),T.rcss.mx(8),{"> a":[T.rcss.ml(4),{color:"currentColor",lineHeight:0}]}],packagerRoot:[T.rcss.flex.column,T.rcss.gap(8)],packager:[T.rcss.backgroundColor.backgroundHigher,T.rcss.borderRadius(4),T.rcss.overflow("hidden")],packagerHeaderTitle:[T.rcss.truncate,T.rcss.flex.shrink(1)],packagerEmptyState:[T.rcss.backgroundColor.backgroundOverlay,T.rcss.borderRadius(0,0,4,4),T.rcss.color.foregroundDimmest],dividerInner:[T.rcss.p(0),T.rcss.m(0),{borderBottom:"1px solid",borderBottomColor:C.tokens.backgroundHighest}]});function M(e){var t=e.pkg,i=e.uninstall,a=(0,S.useConfig)(),o=(0,b.default)(t),u=(0,l.useMemo)(function(){var e=(null==o?void 0:o.description)||t.description;if(e&&/<[^>]+>|<\/[^>]+>/.test(e)){var n=document.createElement("DIV");return n.innerHTML=e,(n.textContent||n.innerText||"").trim()}return e},[null==o?void 0:o.description,t.description]),p=(0,y.default)((null==o?void 0:o.license)||t.license),m=(0,l.useMemo)(function(){if(o){var e;return(0,r._)((0,n._)({},o),{version:null!=(e=null==o?void 0:o.version)?e:t.spec,name:(null==a?void 0:a.id)==="nix"&&(null==o?void 0:o.prettyName)||t.name,license:p,description:u})}return t},[null==a?void 0:a.id,u,o,p,t]),g=(0,k.useActionQueue)(),x=(0,k.useCurrentAction)(),w=(0,l.useMemo)(function(){return g.some(function(e){return e.pkgs.some(function(e){return e.name===t.name})})},[t.name,g]),_=(0,l.useMemo)(function(){return!!(null!==x&&x.pkgs.find(function(e){return e.name===t.name}))},[x]);return(0,s.jsxs)(O.View,{css:N.package,p:4,row:!0,align:"center",tag:"li",children:[(0,s.jsxs)(O.View,{css:N.packageMetadata,grow:!0,shrink:!0,align:"center",row:!0,children:[(0,s.jsx)(f.default,{}),(0,s.jsxs)(P.Text,{css:N.packageName,children:[m.name,m.homepageURL?(0,s.jsx)("a",{href:m.homepageURL,target:"_blank",children:(0,s.jsx)(c.default,{})}):null]}),m.version?(0,s.jsx)(P.Text,{color:"dimmer",children:m.version}):null]}),(0,s.jsxs)(O.View,{css:[T.rcss.gap(4),T.rcss.align.center],row:!0,children:[m.description||m.license?(0,s.jsx)(D.Tooltip,{tooltip:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:m.description}),m.license?(0,s.jsx)(P.Text,{variant:"small",color:"dimmer",children:m.license}):null]}),children:(0,s.jsx)(d.default,{})}):null,(0,s.jsx)(I.IconButton,{alt:"Uninstall",disabled:_||w,onClick:function(){i()},children:(0,s.jsx)(h.default,{})})]})]})}function L(e){var t=e.onAddPackage,n=e.name,r=e.id,i=e.addText;return(0,s.jsxs)(O.View,{grow:!0,shrink:!0,pl:4,row:!0,justify:"space-between",children:[(0,s.jsx)(P.Text,{css:N.packagerHeaderTitle,id:r,children:n}),(0,s.jsx)(I.IconButton,{alt:i,onClick:t,children:(0,s.jsx)(p.default,{})})]})}function B(e){var t=e.packages,n=e.labelId,r=(0,S.useConfig)(),i=(0,k.useUninstallPackage)();return r?(0,s.jsx)(O.View,{css:N.packageList,children:(0,s.jsx)(u.VList,{style:{height:"100%"},role:"list","aria-labelledby":n,children:t.map(function(e){return(0,s.jsx)(M,{pkg:e,uninstall:function(){i({id:r.id,pkg:e})}},e.name)})})}):null}var V=new Map;function F(e){var n=e.onAddPackage,r=e.openFile,i=(0,S.useConfig)(),u=(0,k.useInstalledPackages)(null==i?void 0:i.id),c=(0,l.useMemo)(function(){return u.filter(function(e){return e.name}).sort(function(e,t){return e.name&&t.name?e.name.localeCompare(t.name):0})},[u]),d=(0,l.useId)(),h=(0,l.useCallback)(function(){n(null==i?void 0:i.id)},[n,null==i?void 0:i.id]),y=(null==i?void 0:i.id)==="nix",b=(0,l.useMemo)(function(){return null==i?void 0:i.packagerFiles.filter(function(e){return!e.includes("lock")&&!e.endsWith("/")})},[null==i?void 0:i.packagerFiles]),w=(0,g.useFsService)(),_=(0,a._)((0,l.useState)(i?V.get(i.id):void 0),2),C=_[0],j=_[1];return((0,l.useEffect)(function(){(0,t._)(function(){var e,t,n,r,a,s,l;return(0,o._)(this,function(o){switch(o.label){case 0:if(!b||!i)return[2];e=!0,t=!1,n=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=b[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];return s=a.value,[4,w.readFile(s)];case 3:if("content"in o.sent())return V.set(i.id,s),j(s),[3,5];o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return l=o.sent(),t=!0,n=l,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}})})()},[i,w,b]),i)?(0,s.jsxs)(O.View,{css:N.packagerRoot,children:[(0,s.jsx)(O.View,{css:N.packager,children:(0,s.jsx)(E.AccordionItem,{defaultExpanded:!0,headerContent:(0,s.jsx)(L,{id:d,name:i.name,addText:y?"Add new dependency":"Add new package",onAddPackage:h}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($,{css:N.divider}),c.length>0?(0,s.jsx)(B,{packages:c,labelId:d}):(0,s.jsx)(O.View,{css:N.packagerEmptyState,p:8,align:"center",children:y?"No dependencies found":"No packages found"})]})})}),(0,s.jsx)(R.Button,{colorway:"primary",variant:"outlined",text:y?"Add new dependency":"Add new package",iconLeft:(0,s.jsx)(p.default,{}),onClick:h}),C?(0,s.jsx)(R.Button,{variant:"nofill",text:"Open ".concat(C),iconLeft:(0,s.jsx)(f.default,{}),onClick:function(){(0,x.track)(m.events.DEPENDENCIES_PACKAGER_FILE_OPENED,{packagerId:i.id,file:C}),r({path:C})}}):null]}):null}function U(e){var t=e.configs,r=e.description,a=e.title,o=e.openFile,l=(0,i._)(e,["configs","description","title","openFile"]);return(0,s.jsxs)(O.View,{children:[(0,s.jsx)(O.View,{css:N.header,row:!0,justify:"space-between",children:(0,s.jsx)(P.Header,{variant:"subheadDefault",level:2,children:a})}),(0,s.jsxs)(O.View,{gap:8,children:[(0,s.jsx)(A.Prose,{color:"dimmer",css:N.description,children:r}),t.length>0?t.map(function(e){return(0,s.jsx)(_.default,{config:e,children:(0,s.jsx)(F,(0,n._)({openFile:o},l))},e.id)}):null]})]})}function G(e){var t=(0,w.usePackagerConfigs)().configs,i=(0,l.useMemo)(function(){return t.find(function(e){return"nix"===e.id})},[t]);return i?(0,s.jsx)(U,(0,r._)((0,n._)({title:"System Dependencies",description:(0,s.jsxs)("span",{children:["Add additional support to your environment with"," ",(0,s.jsx)("a",{href:"https://search.nixos.org/packages",target:"_blank",children:"Nix packages"}),"."]})},e),{configs:[i]})):null}var $=function(){return(0,s.jsx)("div",{css:N.dividerInner})};e.s(["NixPackager",()=>G,"PackagerSection",()=>U])},539143,(e,t,n)=>{var r,i=e.i(148382),a=e.r(561584),o=e.r(365738);t.exports=(void 0===i.default?"undefined":o._(i.default))==="object"&&i.default.env&&i.default.env.NODE_DEBUG&&/\bsemver\b/i.test(i.default.env.NODE_DEBUG)?function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(r=console).error.apply(r,["SEMVER"].concat(a._(t)))}:function(){}},511234,(e,t,n)=>{t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},308145,(e,t,n)=>{var r=e.r(316330),i=e.r(511234),a=i.MAX_SAFE_COMPONENT_LENGTH,o=i.MAX_SAFE_BUILD_LENGTH,s=i.MAX_LENGTH,l=e.r(539143),u=(n=t.exports={}).re=[],c=n.safeRe=[],d=n.src=[],f=n.t={},p=0,h="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",s],[h,o]],g=function(e){var t=!0,n=!1,i=void 0;try{for(var a,o=m[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=r._(a.value,2),l=s[0],u=s[1];e=e.split("".concat(l,"*")).join("".concat(l,"{0,").concat(u,"}")).split("".concat(l,"+")).join("".concat(l,"{1,").concat(u,"}"))}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e},x=function(e,t,n){var r=g(t),i=p++;l(e,i,t),f[e]=i,d[i]=t,u[i]=new RegExp(t,n?"g":void 0),c[i]=new RegExp(r,n?"g":void 0)};x("NUMERICIDENTIFIER","0|[1-9]\\d*"),x("NUMERICIDENTIFIERLOOSE","\\d+"),x("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(h,"*")),x("MAINVERSION","(".concat(d[f.NUMERICIDENTIFIER],")\\.")+"(".concat(d[f.NUMERICIDENTIFIER],")\\.")+"(".concat(d[f.NUMERICIDENTIFIER],")")),x("MAINVERSIONLOOSE","(".concat(d[f.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(d[f.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(d[f.NUMERICIDENTIFIERLOOSE],")")),x("PRERELEASEIDENTIFIER","(?:".concat(d[f.NUMERICIDENTIFIER],"|").concat(d[f.NONNUMERICIDENTIFIER],")")),x("PRERELEASEIDENTIFIERLOOSE","(?:".concat(d[f.NUMERICIDENTIFIERLOOSE],"|").concat(d[f.NONNUMERICIDENTIFIER],")")),x("PRERELEASE","(?:-(".concat(d[f.PRERELEASEIDENTIFIER],"(?:\\.").concat(d[f.PRERELEASEIDENTIFIER],")*))")),x("PRERELEASELOOSE","(?:-?(".concat(d[f.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(d[f.PRERELEASEIDENTIFIERLOOSE],")*))")),x("BUILDIDENTIFIER","".concat(h,"+")),x("BUILD","(?:\\+(".concat(d[f.BUILDIDENTIFIER],"(?:\\.").concat(d[f.BUILDIDENTIFIER],")*))")),x("FULLPLAIN","v?".concat(d[f.MAINVERSION]).concat(d[f.PRERELEASE],"?").concat(d[f.BUILD],"?")),x("FULL","^".concat(d[f.FULLPLAIN],"$")),x("LOOSEPLAIN","[v=\\s]*".concat(d[f.MAINVERSIONLOOSE]).concat(d[f.PRERELEASELOOSE],"?").concat(d[f.BUILD],"?")),x("LOOSE","^".concat(d[f.LOOSEPLAIN],"$")),x("GTLT","((?:<|>)?=?)"),x("XRANGEIDENTIFIERLOOSE","".concat(d[f.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),x("XRANGEIDENTIFIER","".concat(d[f.NUMERICIDENTIFIER],"|x|X|\\*")),x("XRANGEPLAIN","[v=\\s]*(".concat(d[f.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(d[f.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(d[f.XRANGEIDENTIFIER],")")+"(?:".concat(d[f.PRERELEASE],")?").concat(d[f.BUILD],"?")+")?)?"),x("XRANGEPLAINLOOSE","[v=\\s]*(".concat(d[f.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(d[f.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(d[f.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(d[f.PRERELEASELOOSE],")?").concat(d[f.BUILD],"?")+")?)?"),x("XRANGE","^".concat(d[f.GTLT],"\\s*").concat(d[f.XRANGEPLAIN],"$")),x("XRANGELOOSE","^".concat(d[f.GTLT],"\\s*").concat(d[f.XRANGEPLAINLOOSE],"$")),x("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(a,"})")+"(?:\\.(\\d{1,".concat(a,"}))?")+"(?:\\.(\\d{1,".concat(a,"}))?")+"(?:$|[^\\d])"),x("COERCERTL",d[f.COERCE],!0),x("LONETILDE","(?:~>?)"),x("TILDETRIM","(\\s*)".concat(d[f.LONETILDE],"\\s+"),!0),n.tildeTrimReplace="$1~",x("TILDE","^".concat(d[f.LONETILDE]).concat(d[f.XRANGEPLAIN],"$")),x("TILDELOOSE","^".concat(d[f.LONETILDE]).concat(d[f.XRANGEPLAINLOOSE],"$")),x("LONECARET","(?:\\^)"),x("CARETTRIM","(\\s*)".concat(d[f.LONECARET],"\\s+"),!0),n.caretTrimReplace="$1^",x("CARET","^".concat(d[f.LONECARET]).concat(d[f.XRANGEPLAIN],"$")),x("CARETLOOSE","^".concat(d[f.LONECARET]).concat(d[f.XRANGEPLAINLOOSE],"$")),x("COMPARATORLOOSE","^".concat(d[f.GTLT],"\\s*(").concat(d[f.LOOSEPLAIN],")$|^$")),x("COMPARATOR","^".concat(d[f.GTLT],"\\s*(").concat(d[f.FULLPLAIN],")$|^$")),x("COMPARATORTRIM","(\\s*)".concat(d[f.GTLT],"\\s*(").concat(d[f.LOOSEPLAIN],"|").concat(d[f.XRANGEPLAIN],")"),!0),n.comparatorTrimReplace="$1$2$3",x("HYPHENRANGE","^\\s*(".concat(d[f.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(d[f.XRANGEPLAIN],")")+"\\s*$"),x("HYPHENRANGELOOSE","^\\s*(".concat(d[f.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(d[f.XRANGEPLAINLOOSE],")")+"\\s*$"),x("STAR","(<|>)?=?\\s*\\*"),x("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),x("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},169781,(e,t,n)=>{var r=e.r(365738),i=Object.freeze({loose:!0}),a=Object.freeze({});t.exports=function(e){return e?(void 0===e?"undefined":r._(e))!=="object"?i:e:a}},430622,(e,t,n)=>{var r=/^[0-9]+$/,i=function(e,t){var n=r.test(e),i=r.test(t);return n&&i&&(e*=1,t*=1),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1};t.exports={compareIdentifiers:i,rcompareIdentifiers:function(e,t){return i(t,e)}}},769627,(e,t,n)=>{var r=e.r(883735),i=e.r(619314),a=e.r(954546),o=e.r(365738),s=e.r(539143),l=e.r(511234),u=l.MAX_LENGTH,c=l.MAX_SAFE_INTEGER,d=e.r(308145),f=d.safeRe,p=d.t,h=e.r(169781),m=e.r(430622).compareIdentifiers;t.exports=function(){"use strict";function e(t,n){if(r._(this,e),n=h(n),a._(t,e))if(!!n.loose===t.loose&&!!n.includePrerelease===t.includePrerelease)return t;else t=t.version;else if("string"!=typeof t)throw TypeError('Invalid version. Must be a string. Got type "'.concat(void 0===t?"undefined":o._(t),'".'));if(t.length>u)throw TypeError("version is longer than ".concat(u," characters"));s("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var i=t.trim().match(n.loose?f[p.LOOSE]:f[p.FULL]);if(!i)throw TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>c||this.major<0)throw TypeError("Invalid major version");if(this.minor>c||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>c||this.patch<0)throw TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<c)return t}return e}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}return i._(e,[{key:"format",value:function(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}},{key:"toString",value:function(){return this.version}},{key:"compare",value:function(t){if(s("SemVer.compare",this.version,this.options,t),!a._(t,e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}},{key:"compareMain",value:function(t){return a._(t,e)||(t=new e(t,this.options)),m(this.major,t.major)||m(this.minor,t.minor)||m(this.patch,t.patch)}},{key:"comparePre",value:function(t){if(a._(t,e)||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return -1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],i=t.prerelease[n];if(s("prerelease compare",n,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;else if(r===i)continue;else return m(r,i)}while(++n)}},{key:"compareBuild",value:function(t){a._(t,e)||(t=new e(t,this.options));var n=0;do{var r=this.build[n],i=t.build[n];if(s("prerelease compare",n,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;else if(r===i)continue;else return m(r,i)}while(++n)}},{key:"inc",value:function(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":var r=+!!Number(n);if(!t&&!1===n)throw Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[r];else{for(var i=this.prerelease.length;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(t===this.prerelease.join(".")&&!1===n)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(t){var a=[t,r];!1===n&&(a=[t]),0===m(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break;default:throw Error("invalid increment argument: ".concat(e))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}}]),e}()},499116,(e,t,n)=>{var r=e.r(769627);t.exports=function(e,t,n){return new r(e,n).compare(new r(t,n))}},483776,(e,t,n)=>{var r=e.r(499116);t.exports=function(e,t,n){return r(e,t,n)>0}},790951,(e,t,n)=>{var r=e.r(954546),i=e.r(769627);t.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r._(e,i))return e;try{return new i(e,t)}catch(e){if(!n)return null;throw e}}},182435,(e,t,n)=>{var r=e.r(790951);t.exports=function(e,t){var n=r(e,t);return n?n.version:null}},691056,e=>{"use strict";var t=e.i(389959);e.s(["default",0,function(e,n,r){(0,t.useEffect)(function(){var t=setTimeout(e,r);return function(){clearTimeout(t)}},n)}])},241828,608738,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(761732),i=e.i(664152),a=e.i(529810);function o(){var e=(0,a.default)().toolchain;return{modules:(0,r.default)(e.modules),configs:(0,r.default)(e.configs),moduleConfig:(0,r.default)(e.moduleConfig),setModuleConfig:function(r){return(0,t._)(function(){return(0,n._)(this,function(t){return[2,e.setModuleConfig(r)]})})()},addModule:function(r){return(0,t._)(function(){return(0,n._)(this,function(t){switch(t.label){case 0:return[4,e.addModule(r).catch(function(e){i.logger.error("Toolchain: failed to add Nix module: "+e.message)})];case 1:return t.sent(),[2]}})})()},removeModule:function(r){return(0,t._)(function(){return(0,n._)(this,function(t){switch(t.label){case 0:return[4,e.removeModule(r).catch(function(e){i.logger.error("Toolchain: failed to remove Nix module: "+e.message)})];case 1:return t.sent(),[2]}})})()},upgradeModule:function(r,a){return(0,t._)(function(){return(0,n._)(this,function(t){switch(t.label){case 0:return[4,e.upgradeModule(r,a).catch(function(e){i.logger.error("Toolchain: failed to upgrade Nix module: "+e.message)})];case 1:return t.sent(),[2]}})})()}}}e.s(["useNixModules",()=>o],241828);var s=e.i(530658),l=e.i(389959),u=e.i(790155);function c(){var e=(0,a.default)().toolchain,t=(0,s._)((0,l.useState)(null),2),n=t[0],r=t[1];return(0,l.useEffect)(function(){var t=!1;return e.getRegistry().then(function(e){t||r(e)}).catch(function(e){u.logger.error("Toolchain: failed to get module registry: ".concat(e.message))}),function(){t=!0}},[e]),n}e.s(["default",()=>c],608738)},795122,e=>{"use strict";var t=e.i(530658),n=e.i(346715),r=e.i(276385),i=e.i(389959),a=e.i(36654),o=e.i(416746),s=e.i(269848),l=e.i(491194),u=e.i(241828),c=e.i(858248),d=e.i(709485),f=e.i(646982),p=e.i(446530),h=e.i(173703),m=e.i(613355),g=e.i(965153),x=e.i(988676),y=e.i(136540),b=e.i(960178),w=e.i(751273),_=e.i(625484),k=(0,p.cssRecord)({module:[m.rcss.borderRadius(4),m.rcss.width("100%"),m.rcss.overflow("hidden")],submoduleName:[m.rcss.truncate,m.rcss.mx(8),m.rcss.flex.growAndShrink(1)],moduleActions:[m.rcss.center],divider:[m.rcss.backgroundColor.outlineDimmer]});function S(e){var t=e.isModifying,n=e.isInstalled,i=e.onInstallClick,o=e.onRemoveClick,u=e.module;if(t)return(0,r.jsx)(y.IconButton,{alt:"Updating module",tooltipBehavior:"hidden",children:(0,r.jsx)(s.default,{})});if(n){var c="replit"===u.id;return(0,r.jsx)(y.IconButton,{alt:c?"The base module can't be removed":"Remove module",disabled:c,onClick:o,children:(0,r.jsx)(l.default,{})})}return(0,r.jsx)(y.IconButton,{alt:"Add module",onClick:i,children:(0,r.jsx)(a.default,{})})}function C(e){var n=e.module,a=e.isInstalled,s=(0,u.useNixModules)(),l=s.addModule,f=s.removeModule,p=(0,t._)((0,i.useState)(!1),2),h=p[0],m=p[1];return(0,i.useEffect)(function(){m(!1)},[a]),(0,r.jsxs)(_.View,{grow:!0,shrink:!0,row:!0,justify:"space-between",children:[(0,r.jsxs)(_.View,{row:!0,gap:12,children:[(0,r.jsx)(b.Text,{children:n.name}),n.displayVersion?(0,r.jsx)(b.Text,{color:"dimmer",children:n.displayVersion}):null]}),(0,r.jsxs)(_.View,{css:k.moduleActions,row:!0,gap:4,children:[n.description?(0,r.jsx)(w.Tooltip,{tooltip:n.description,children:(0,r.jsx)(o.default,{})}):null,(0,r.jsx)(S,{module:n,isInstalled:a,isModifying:h,onInstallClick:function(){m(!0),l(n.id),(0,c.track)(d.events.NIX_MODULE,{action:"added",moduleId:n.id})},onRemoveClick:function(){m(!0),f(n.id),(0,c.track)(d.events.NIX_MODULE,{action:"removed",moduleId:n.id})}})]})]})}function j(e){var t=e.module,i=e.defaultExpanded,a=e.isInstalled,o=(0,n._)(t.runners).concat((0,n._)(t.packagers),(0,n._)(t.formatters),(0,n._)(t.languageServers));return(0,r.jsx)(h.ShadesSurface,{css:k.module,children:(0,r.jsxs)(g.AccordionItem,{round:!1,defaultExpanded:i,headerContent:(0,r.jsx)(C,{module:t,isInstalled:a}),children:[o.length>0?(0,r.jsx)(x.DividerH,{css:k.divider}):null,o.map(function(e){return(0,r.jsxs)(_.View,{p:4,row:!0,align:"center",children:[(0,r.jsx)(f.default,{module:e}),(0,r.jsx)(b.Text,{css:k.submoduleName,children:e.name}),e.displayVersion?(0,r.jsx)(b.Text,{color:"dimmer",children:e.displayVersion}):null]},e.id)})]})})}e.s(["default",()=>j])},227980,161777,117710,e=>{"use strict";var t=e.i(276385),n=e.i(269848),r=e.i(446530),i=e.i(613355),a=e.i(625484),o=(0,r.cssRecord)({overviewPane:[i.rcss.flex.column,i.rcss.gap(24),i.rcss.width("100%"),i.rcss.maxWidth(600),{margin:"0 auto"}],loading:[i.rcss.center,i.rcss.flex.growAndShrink(1)],emptyState:[i.rcss.center,i.rcss.flex.growAndShrink(1)]}),s=function(){return(0,t.jsx)(a.View,{css:o.loading,children:(0,t.jsx)(n.default,{})})},l=function(e){var n=e.children;return(0,t.jsx)(a.View,{css:o.emptyState,children:n})},u=function(e){var n=e.children;return(0,t.jsx)(a.View,{css:o.overviewPane,p:12,children:n})};e.s(["EmptyState",()=>l,"LoadingState",()=>s,"MAX_PANE_CONTENT_WIDTH",()=>600,"OverviewPane",()=>u],227980);var c=/(.+)(?:\S+)?<([^>,]+)[>,]/,d=a.SpecializedView.span;function f(e){var n=e.author,r=c.exec(n);if(r){var i=r[1],a=r[2];return(0,t.jsxs)(t.Fragment,{children:["By ",i,(0,t.jsxs)("a",{href:"mailto:".concat(a),children:["<",a,">"]})]})}return(0,t.jsxs)(d,{children:["By ",n]})}e.s(["default",()=>f],161777);var p=e.i(429662),h=e.i(36654),m=e.i(491194);function g(e){var r=e.isInstalled,i=e.isInQueue;return e.isCurrentAction?(0,t.jsx)(n.default,{}):i?(0,t.jsx)(p.default,{}):r?(0,t.jsx)(m.default,{}):(0,t.jsx)(h.default,{})}e.s(["default",()=>g],117710)},838322,886080,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(389959),i=e.i(927600),a=e.i(195206),o=e.i(416298),s=e.i(161777),l=e.i(117710),u=e.i(477758),c=e.i(595974),d=e.i(943695),f=e.i(480028),p=e.i(446530),h=e.i(6338),m=e.i(173703),g=e.i(613355),x=e.i(140487),y=e.i(136540),b=e.i(396776),w=e.i(960178),_=e.i(625484),k=_.SpecializedView.span,S=(0,p.cssRecord)({metadataSkeletonVersion:[h.loadingStyle.foregroundPulse(),g.rcss.height(16),g.rcss.maxWidth(64),g.rcss.borderRadius(4)],metadataSkeletonDescription:[h.loadingStyle.foregroundPulse(),g.rcss.height(16),g.rcss.borderRadius(4),g.rcss.maxWidth(425)],root:[g.rcss.borderRadius(8),g.rcss.p(8)],headerTitle:[g.rcss.display.flex,g.rcss.rowWithGap(8),g.rcss.flex.growAndShrink(1)],headerTitleText:[g.rcss.display.inline,g.rcss.flex.growAndShrink(1),g.rcss.overflow("hidden"),g.rcss.truncate],headerTitlePills:[g.rcss.display.inlineFlex,g.rcss.rowWithGap(4),g.rcss.flex.shrink(0)],headerButton:[],error:[g.rcss.mt(4)],actions:[g.rcss.mt(8)],consoleButton:[g.rcss.width("calc(50% - ".concat(f.tokens.space8,")"))],cancelButton:[g.rcss.width("calc(50% - ".concat(f.tokens.space8,")"))],actionButton:[g.rcss.flex.grow(1),g.rcss.flex.shrink(0)]});function C(e){var t=e.title,r=e.content,i=e.isExpanded;return(0,n.jsxs)(_.View,{gap:2,children:[t?(0,n.jsx)(w.Text,{color:"dimmer",children:t}):null,r?(0,n.jsx)(w.Text,{maxLines:i?void 0:1,children:r}):null]})}function j(e){var t=e.title,r=e.content;return(0,n.jsxs)(_.View,{pt:4,gap:8,children:[void 0===t||t?(0,n.jsx)(_.View,{css:S.metadataSkeletonVersion}):null,void 0===r||r?(0,n.jsx)(_.View,{css:S.metadataSkeletonDescription}):null]})}function T(e){var f,p=e.name,h=e.pkg,g=e.isMetadataLoading,T=e.openConsole,E=e.pills,R=(0,d.useConfig)(),I=(0,c.useInstalledPackages)(null==R?void 0:R.id),A=(0,c.useErrors)(null==R?void 0:R.id),P=(0,c.useCurrentAction)(),D=(0,c.useActionQueue)(),O=(0,c.useRemoveErrors)(),N=(0,u.default)(h.license),M=(0,r.useMemo)(function(){return!!(null!==P&&P.pkgs.find(function(e){return e.name===h.name}))},[P]),L=(0,r.useMemo)(function(){return D.find(function(e){return e.pkgs.find(function(e){return e.name===h.name})})},[D]),B=D.length>1&&!!L,V=(0,r.useMemo)(function(){return!!I.find(function(e){var t,n;return(null==(t=e.name)?void 0:t.toLowerCase())===(null==(n=h.name)?void 0:n.toLowerCase())})},[I]),F=!!(h.homepageURL||h.license||h.author),U=(0,r.useMemo)(function(){return!!A.find(function(e){return e.name===h.name})},[A]),G=(0,t._)((0,r.useState)(!1),2),$=G[0],H=G[1],z=(0,c.useInstallPackage)(),W=(0,c.useUninstallPackage)(),q=(0,c.useCancelPackageAction)();return(0,n.jsxs)(m.ShadesSurface,{css:S.root,children:[(0,n.jsxs)(_.View,{row:!0,justify:"space-between",children:[(0,n.jsxs)(w.Header,{css:S.headerTitle,level:2,variant:"subheadDefault",multiline:!1,children:[(0,n.jsxs)(k,{css:S.headerTitleText,children:[null!=p?p:h.name,h.version?(0,n.jsxs)(w.Text,{color:"dimmer",children:["@",h.version]}):null]}),E?(0,n.jsx)(_.View,{css:S.headerTitlePills,children:E}):null]}),F?(0,n.jsx)(y.IconButton,{css:S.headerButton,alt:"Show more info",tooltipBehavior:"hidden",onClick:function(){return H(function(e){return!e})},children:(0,n.jsx)(i.default,{rotate:90*!!$})}):null]}),(0,n.jsx)(_.View,{gap:4,children:void 0!==g&&g?(0,n.jsx)(j,{title:!1}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C,{content:null!=(f=h.description)?f:"This package has no description.",isExpanded:!0}),h.homepageURL&&$?(0,n.jsx)(C,{content:(0,n.jsx)("a",{href:h.homepageURL,rel:"noreferrer noopener",target:"_blank",children:h.homepageURL}),isExpanded:$}):null,N&&$?(0,n.jsx)(C,{content:N,isExpanded:$}):null,h.author&&$?(0,n.jsx)(C,{content:(0,n.jsx)(s.default,{author:h.author}),isExpanded:$}):null]})}),U?(0,n.jsx)(b.StatusBanner,{css:S.error,colorway:"negative",icon:(0,n.jsx)(o.default,{}),text:"Couldn't ".concat(V?"uninstall":"install"," package. See Console for details, or try again.")}):null,(0,n.jsx)(_.View,{css:S.actions,row:!0,gap:8,children:U?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Button,{css:S.consoleButton,text:"Console",onClick:function(){T()},disabled:M||B,colorway:"primary",iconLeft:(0,n.jsx)(a.default,{})}),(0,n.jsx)(x.Button,{css:S.actionButton,text:"Try Again",onClick:function(){(null==R?void 0:R.id)&&(O(R.id,[h]),V?W({id:R.id,pkg:h}):z({id:R.id,pkg:h}))},loading:M||B,colorway:V?"red":void 0,variant:V?"outlined":void 0,iconLeft:(0,n.jsx)(l.default,{isInstalled:V,isInQueue:B,isCurrentAction:M})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Button,{css:S.actionButton,text:M?(null==P?void 0:P.kind)===c.PackagerActionKind.Install?"Installing":"Removing":B?(null==L?void 0:L.kind)===c.PackagerActionKind.Install?"Waiting to install":"Waiting to remove":V?"Remove":"Install",onClick:function(){(null==R?void 0:R.id)&&(V?W({id:R.id,pkg:h}):z({id:R.id,pkg:h}))},loading:M||B,colorway:V?"red":void 0,variant:V?"outlined":void 0,iconLeft:(0,n.jsx)(l.default,{isInstalled:V,isInQueue:B,isCurrentAction:M})}),B?(0,n.jsx)(x.Button,{css:S.cancelButton,text:"Cancel",onClick:function(){h.name&&q(h.name)},disabled:M,loading:M}):null]})})]})}e.s(["default",()=>T],838322);var E=e.i(878420),R=e.i(529810),I=e.i(102905);function A(){var e=(0,R.default)(),t=(0,d.useGetConfig)();return(0,r.useCallback)(function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t();return(null==i?void 0:i.id)?(0,I.getPackager)(i.id).search((0,E._)({id:i.id,query:n,services:e},r)):[]},[])}e.s(["default",()=>A],886080)},271112,e=>{"use strict";var t=e.i(297083),n=e.i(878420),r=e.i(64386),i=e.i(886513),a=e.i(530658),o=e.i(817556),s=e.i(276385),l=e.i(389959),u=e.i(415756),c=e.i(483776),d=e.i(182435),f=e.i(138716),p=e.i(237221),h=e.i(709485),m=e.i(691056),g=e.i(241828),x=e.i(142365),y=e.i(608738),b=e.i(795122),w=e.i(227980),_=e.i(838322),k=e.i(545453),S=e.i(886080),C=e.i(465713),j=e.i(480028),T=e.i(446530),E=e.i(613355),R=e.i(136540),I=e.i(85742),A=e.i(624782),P=e.i(51054),D=e.i(12034),O=e.i(751273),N=e.i(625484),M=(0,T.cssRecord)({root:[E.rcss.flex.column,E.rcss.flex.growAndShrink(1)],headerRoot:[E.rcss.border({color:j.tokens.outlineDimmest,width:1,direction:"bottom"})],header:[E.rcss.width("100%"),E.rcss.maxWidth(w.MAX_PANE_CONTENT_WIDTH),E.rcss.colWithGap(8),E.rcss.p(8),{margin:"0 auto"},E.rcss.rowWithGap(8),E.rcss.p(8),E.rcss.align.center],select:[E.rcss.minWidth(160)],resultsRoot:[E.rcss.overflow("auto")],resultsScroller:[E.rcss.width("100%"),E.rcss.maxWidth(600),E.rcss.flex.growAndShrink(1),E.rcss.p(8),{margin:"0 auto"},E.rcss.overflow("auto")]});function L(e){var n=e.query,r=e.openConsole,i=e.computePills,u=(0,a._)((0,l.useState)([]),2),c=u[0],d=u[1],f=(0,l.useRef)(0),p=(0,a._)((0,l.useState)(!1),2),h=p[0],g=p[1],x=(0,S.default)();return((0,l.useEffect)(function(){""===n.trim()?d([]):g(!0)},[n]),(0,m.default)(function(){var e=++f.current;(0,t._)(function(){var t;return(0,o._)(this,function(r){switch(r.label){case 0:return[4,x(n)];case 1:return t=r.sent(),e===f.current&&(d(t),g(!1)),[2]}})})()},[n],500),h)?(0,s.jsx)(w.LoadingState,{}):0===c.length?(0,s.jsx)(w.EmptyState,{children:n?"No results were found.":"Start typing above to see results."}):(0,s.jsx)(N.View,{gap:8,children:c.map(function(e){var t,n=null!=(t=null==i?void 0:i(e))?t:[];return(0,s.jsx)(_.default,{pkg:e,openConsole:r,pills:n},e.name)})})}function B(e){return e.length>0&&(0,d.default)(e)}function V(e){var t,n,r,i,a,o=e.query,d=(0,y.default)(),f=(0,g.useNixModules)().modules,p=(0,l.useMemo)(function(){return new Set(null==f?void 0:f.map(function(e){return e.id}))},[f]),h=(n=(t={modules:null!=(a=null==d?void 0:d.fullModules)?a:[],query:o}).modules,r=t.query,i=(0,l.useMemo)(function(){return new u.Fzf(n,{selector:function(e){return e.name},tiebreakers:[function(e,t){var n=2===e.item.displayVersion.split(".").length?"".concat(e.item.displayVersion,".0"):e.item.displayVersion,r=2===t.item.displayVersion.split(".").length?"".concat(t.item.displayVersion,".0"):t.item.displayVersion;return B(n)||B(r)?!B(r)&&B(n)?1:!B(n)&&B(r)||(0,c.default)(n,r)?-1:+!!(0,c.default)(r,n):0}]})},[n]),(0,l.useMemo)(function(){return r?i.find(r).map(function(e){return e.item}):n},[i,n,r]));return 0===(h=(0,l.useMemo)(function(){return h.sort(function(e,t){var n=e.internal||e.demoted,r=t.internal||t.demoted;return n&&!r?1:!n&&r?-1:0})},[h])).length?(0,s.jsx)(w.EmptyState,{children:o?"No results were found.":"Start typing above to see results."}):(0,s.jsx)(N.View,{gap:8,children:h?h.map(function(e){var t="".concat(e.id,"-").concat(e.resolutionPath,"-").concat(e.version),n=p.has(e.id);return(0,s.jsx)(N.View,{row:!0,align:"center",justify:"space-between",children:(0,s.jsx)(b.default,{module:e,isInstalled:n,defaultExpanded:!1})},t)}):null})}function F(e){var t=e.onBack,n=e.initialQuery,r=e.setQuery,i=e.categories,o=e.category,u=e.setCategory,c=e.children,d=e.disableCategorySelection,p=e.searchPlaceholder,h=(0,a._)((0,l.useState)(null!=n?n:""),2),m=h[0],g=h[1],x=(0,l.useDeferredValue)(m);return(0,l.useEffect)(function(){r(x)},[x,r]),(0,s.jsxs)(N.View,{css:M.root,children:[(0,s.jsx)(N.View,{css:M.headerRoot,children:(0,s.jsxs)(N.View,{css:M.header,children:[(0,s.jsx)(R.IconButton,{alt:"Back",onClick:function(){return t()},children:(0,s.jsx)(f.default,{})}),!d&&i&&i.length>0?(0,s.jsx)(D.Select,{items:i,css:M.select,"aria-label":"Change search context",selectedKey:o,onSelectionChange:function(e){var t=null==i?void 0:i.find(function(t){return t.value===e});if(!t)throw Error("Expected config");g(""),u(t.value)},children:function(e){return(0,s.jsx)(I.ListBoxItem,{id:e.value,label:e.label})}}):null,(0,s.jsx)(N.View,{grow:!0,shrink:!0,children:(0,s.jsx)(P.SearchBar,{value:m,onChange:function(e){g(e.target.value)},onClear:function(){return g("")},placeholder:void 0===p?"Search packages...":p,autoFocus:!0})})]})}),(0,s.jsx)(N.View,{css:M.resultsRoot,grow:!0,shrink:!0,children:(0,s.jsx)(N.View,{css:M.resultsScroller,children:c})})]})}function U(e){var t=e.onBack,o=e.initialCategory,u=e.openConsole,c=(0,i._)(e,["onBack","initialCategory","openConsole"]),d=(0,k.usePackagerConfigs)().configs,f=(0,a._)((0,l.useState)(""),2),p=f[0],h=f[1],m=(0,l.useMemo)(function(){return d.filter(function(e){return"nix"!==e.id}).map(function(e){return{value:e.id,label:e.name.replace(/\s*packager\s*.*$/,"")}})},[d]),g=(0,a._)((0,l.useState)(null!=o?o:m[0].value),2),x=g[0],y=g[1],b=(0,l.useMemo)(function(){return d.find(function(e){return e.id===x})},[x,d]);return(0,s.jsx)(F,(0,r._)((0,n._)({categories:m,initialQuery:p,setQuery:h,onBack:t,setCategory:function(e){h(""),y(e)},category:x},c),{children:(0,s.jsx)(C.default,{config:b,children:(0,s.jsx)(L,{query:p,openConsole:u})})}))}var G=[{value:"Modules",label:"Modules"},{value:"Packages",label:"Packages"}];function $(e){var t=e.onBack,o=e.initialCategory,u=void 0===o?G[0].value:o,c=e.openConsole,d=(0,i._)(e,["onBack","initialCategory","openConsole"]),f=(0,k.usePackagerConfigs)().configs,m=(0,l.useMemo)(function(){return f.find(function(e){return"nix"===e.id})},[f]),g=(0,a._)((0,l.useState)(""),2),y=g[0],b=g[1],w=(0,a._)((0,l.useState)(u),2),_=w[0],S=w[1];return((0,x.useTrackEffectWithPredicate)(h.events.NIX_MODULE,{action:"search_viewed"},function(){return"Modules"===_},[]),(0,x.useTrackEffectWithPredicate)(h.events.NIX_MODULE,{action:"search_used",query:y},function(){return!!(y&&"Modules"===_)},[y]),m)?(0,s.jsx)(F,(0,r._)((0,n._)({categories:G,initialQuery:y,setQuery:b,onBack:t,setCategory:function(e){b(""),S(e)},category:_,searchPlaceholder:"Modules"===_?"Search modules...":void 0},d),{children:"Packages"===_?(0,s.jsx)(C.default,{config:m,children:(0,s.jsx)(L,{query:y,openConsole:c,computePills:function(e){var t;return null!=(t=e.present)&&t?[(0,s.jsx)(O.Tooltip,{tooltip:"Cached packages are faster to install in your App",children:(0,s.jsx)(A.Pill,{text:"cached",iconLeft:(0,s.jsx)(p.default,{}),colorway:"green"})},"cached-".concat(e.name,"-").concat(e.version))]:[]}})}):(0,s.jsx)(V,{query:y})})):null}e.s(["ImportSearch",()=>U,"NixSearch",()=>$])},9303,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(409570),i=e.i(530658),a=e.i(709485),o=e.i(142365),s=e.i(416086),l=e.i(271112),u=e.i(227980),c=e.i(545453),d=e.i(960178);function f(e){var r=e.openFile,f=e.openConsole,p=e.openNixTab,h=(0,c.usePackagerConfigs)().configs,m=(0,n.useMemo)(function(){return h.filter(function(e){return"nix"!==e.id})},[h]),g=(0,i._)((0,n.useState)({mode:"Overview"}),2),x=g[0],y=g[1];switch((0,o.useTrackEffect)(a.events.DEPENDENCIES_TAB_VIEWED,{tab:"import"}),x.mode){case"Overview":return(0,t.jsx)(u.OverviewPane,{children:(0,t.jsx)(s.PackagerSection,{title:"Manage Imports",configs:m,openFile:r,onAddPackage:function(e){y({mode:"Search",initialPackager:e})},description:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Text,{children:"Packagers manage language-specific dependencies for your project. These can be imported directly from your codebase."}),0===m.length?(0,t.jsx)(d.Text,{color:"dimmest",children:(0,t.jsxs)("p",{children:["You don't currently have any packagers. Add language support by"," ",(0,t.jsx)("a",{href:"",onClick:function(e){e.preventDefault(),p()},children:"adding a System Module"}),"."]})}):null]})})});case"Search":return(0,t.jsx)(l.ImportSearch,{onBack:function(){return y({mode:"Overview"})},initialCategory:x.initialPackager,openConsole:f})}}var p={label:"Imports",description:"Import and manage language-specific packages and dependencies",icon:(0,t.jsx)(r.default,{}),component:function(e){var r=e.openPane,i=(0,n.useCallback)(function(e){return r({type:"codeEditor",data:e})},[r]),a=(0,n.useCallback)(function(){r({type:"shell"})},[r]);return(0,t.jsx)(f,{openFile:i,openConsole:a,openNixTab:function(){}})}};e.s(["dependenciesImportTab",()=>p],9303)},363966,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(795122),i=e.i(625484);function a(e){var a=e.modules,o=(0,n.useMemo)(function(){return a.filter(function(e){return"replit"!==e.id})},[a]);return(0,t.jsx)(i.View,{gap:8,children:o.map(function(e){return(0,t.jsx)(r.default,{module:e,defaultExpanded:!0,isInstalled:!0},e.id)})})}e.s(["default",()=>a])},162225,224386,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(626602),i=e.i(530658),a=e.i(252204),o=e.i(40916),s=e.i(95136),l=e.i(761201),u=e.i(709485),c=e.i(241828),d=e.i(142365),f=e.i(363966),p=e.i(416086),h=e.i(271112),m=e.i(227980),g=e.i(446530),x=e.i(613355),y=e.i(140487),b=e.i(91720),w=e.i(11235),_=e.i(960178),k=e.i(625484),S=(0,g.cssRecord)({systemModules:[x.rcss.flex.column,x.rcss.gap(8)],sectionHeader:[x.rcss.height(36)]});function C(e){var r=e.openFile,g=e.openConsole,x=(0,c.useNixModules)().modules,C=(0,i._)((0,n.useState)({mode:"Overview"}),2),j=C[0],T=C[1];if((0,d.useTrackEffect)(u.events.DEPENDENCIES_TAB_VIEWED,{tab:"nix"}),!x)return null;switch(j.mode){case"Overview":return(0,t.jsxs)(m.OverviewPane,{children:[(0,t.jsxs)(k.View,{children:[(0,t.jsx)(k.View,{css:S.sectionHeader,row:!0,justify:"space-between",children:(0,t.jsx)(_.Header,{variant:"subheadDefault",level:2,children:"System Modules"})}),(0,t.jsxs)(k.View,{css:S.systemModules,children:[(0,t.jsx)(w.Prose,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers. These provide the foundation for your App."}),(0,t.jsx)(f.default,{modules:x}),(0,t.jsx)(y.Button,{text:"Add new module",variant:x.length>0?"outlined":"default",colorway:"primary",iconLeft:(0,t.jsx)(o.default,{}),onClick:function(){T({mode:"Search",initialCategory:"Modules"})}}),(0,t.jsx)(y.Button,{text:"Open .replit",variant:"nofill",iconLeft:(0,t.jsx)(s.default,{}),onClick:function(){r({path:".replit"})}})]})]}),(0,t.jsx)(p.NixPackager,{onAddPackage:function(){T({mode:"Search",initialCategory:"Packages"})},openFile:r}),(0,t.jsx)(b.ButtonLink,{href:l.LINKS_DOCS.DEPENDENCY_MANAGEMENT,target:"_blank",rel:"noopener",variant:"underlinedOnHover",colorway:"primary",iconRight:(0,t.jsx)(a.default,{}),text:"Learn more about Nix and .replit configuration"})]});case"Search":return(0,t.jsx)(h.NixSearch,{onBack:function(){return T({mode:"Overview"})},initialCategory:j.initialCategory,openConsole:g})}}var j={label:"System",description:"Manage system-level packages and dependencies using Nix package manager",icon:(0,t.jsx)(r.default,{}),component:function(e){var r=e.openPane,i=(0,n.useCallback)(function(e){return r({type:"codeEditor",data:e})},[r]),a=(0,n.useCallback)(function(){r({type:"shell"})},[r]);return(0,t.jsx)(C,{openFile:i,openConsole:a})}};e.s(["dependenciesNixTab",()=>j],162225);var T=e.i(878420),E=e.i(64386),R=e.i(116235);function I(e){return(0,t.jsx)(R.default,(0,E._)((0,T._)({},e),{children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M14 1.25c.966 0 1.75.784 1.75 1.75v4A1.75 1.75 0 0 1 14 8.75h-1.25v2.5H18A1.75 1.75 0 0 1 19.75 13v2.25H21c.966 0 1.75.784 1.75 1.75v4A1.75 1.75 0 0 1 21 22.75h-4A1.75 1.75 0 0 1 15.25 21v-4c0-.966.784-1.75 1.75-1.75h1.25V13a.25.25 0 0 0-.25-.25H6a.25.25 0 0 0-.25.25v2.25H7c.966 0 1.75.784 1.75 1.75v4A1.75 1.75 0 0 1 7 22.75H3A1.75 1.75 0 0 1 1.25 21v-4c0-.966.784-1.75 1.75-1.75h1.25V13A1.75 1.75 0 0 1 6 11.25h5.25v-2.5H10A1.75 1.75 0 0 1 8.25 7V3c0-.966.784-1.75 1.75-1.75h4ZM3 16.75a.25.25 0 0 0-.25.25v4c0 .138.112.25.25.25h4a.25.25 0 0 0 .25-.25v-4a.25.25 0 0 0-.25-.25H3Zm14 0a.25.25 0 0 0-.25.25v4c0 .138.112.25.25.25h4a.25.25 0 0 0 .25-.25v-4a.25.25 0 0 0-.25-.25h-4Zm-7-14a.25.25 0 0 0-.25.25v4c0 .138.112.25.25.25h4a.25.25 0 0 0 .25-.25V3a.25.25 0 0 0-.25-.25h-4Z",clipRule:"evenodd"})}))}e.s(["default",()=>I],224386)},813675,336563,e=>{"use strict";var t=e.i(642049);function n(e){return e.filter(function(e){return e.task.state===t.TaskState.RUNNING}).flatMap(function(e){return e.task.metadata&&"openPorts"in e.task.metadata&&e.task.metadata.openPorts?e.task.metadata.openPorts:[]}).filter(function(e){return e.forwarded})}function r(e){var t,r=n(e);return 0===r.length||r.find(function(e){return 80===e.externalPort})?80:null!=(t=r[0].externalPort)?t:80}e.s(["getExternalPortFromTasks",()=>r,"getForwardedPortsFromTasks",()=>n],336563);var i=e.i(729122),a=e.i(902379);function o(e){return 80===e||443===e}function s(e,t){var n=new URL(e);return!t||o(t)?(n.hostname.endsWith(".localhost")?n.port="8081":n.port&&(n.port=""),n):(n.port=t.toString(),n)}function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.addDevToolsSuffix,o=r((0,i.useWorkflowsTaskFlatMap)()),l=(0,a.useDevUrl)(),u=l.url,c=l.reachability;if(!o||!u)return null;var d=s(u,o).toString(),f=s(u+"/__replco/workspace_iframe.html",o).toString();return{iframeSrc:void 0===n||n?f:(e=new URL(d)).hostname.endsWith(".localhost")?d:(e.protocol="https:",e.toString()),presentationUrl:d,baseUrl:u,reachability:c}}e.s(["addPortToUrl",()=>s,"isDefaultPort",()=>o,"useUrls",()=>l],813675)},801127,e=>{"use strict";var t,n=e.i(297083),r=e.i(878420),i=e.i(64386),a=e.i(346715),o=e.i(817556),s=e.i(830675),l=e.i(992785),u=e.i(131141),c=e.i(223808),d=e.i(257982),f=e.i(826771),p=e.i(282332),h=e.i(8808),m=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,80,8e3,8008,8080,8081,8099,9e3]);function g(e){return 32768<=e&&e<=60999}function x(e,t){return new Set(Array.from(e).filter(function(e){return!t.has(e)}))}var y=((t={}).FORWARDED="FORWARDED",t.INTERNAL_ONLY="INTERNAL_ONLY",t.NO_MORE_EXTERNAL_PORTS_AVAILABLE="NO_MORE_EXTERNAL_PORTS_AVAILABLE",t.MISCONFIGURED="MISCONFIGURED",t.CONFIG_MISSING="CONFIG_MISSING",t);function b(e){var t=e.type;switch(t){case"FORWARDED":case"MISCONFIGURED":return e.externalPort;case"INTERNAL_ONLY":case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return;default:(0,d.default)(t)}}function w(e){var t;return null!=(t=e.isLocalhost)&&t}function _(e){return e===p.VNC_PORT}function k(e){return e===p.VSCODE_PORT}function S(e){return e===p.GALLERY_PREVIEW_PORT}function C(e){return _(e.localPort)}function j(e){return k(e.localPort)}function T(e){return e?x(m,new Set(e.map(function(e){return b(e.configuration)}))):m}function E(e){var t=e.localPort,n=T(e.portsState.current);if(0!==n.size){var r=n.has(80),i=n.has(t);return r?80:i?t:Array.from(n).sort()[0]}}function R(e){var t=e.container,p=e.dotReplit,m=(0,f.observableValue)(null),y=(0,f.observableValue)(!1),R=(0,f.observableValue)("only-global"),I=(0,c.default)(function(){return(0,n._)(function(){var e;return(0,o._)(this,function(t){switch(t.label){case 0:if(!m.current)return[2];return e=m.current.filter(function(e){return!e.isTemporary&&!g(e.configuration.localPort)}).map(function(e){var t=e.configuration.type;switch(t){case"FORWARDED":case"MISCONFIGURED":return(0,r._)({localPort:e.configuration.localPort,externalPort:e.configuration.externalPort},w(e.configuration)?{exposeLocalhost:!0}:void 0);case"INTERNAL_ONLY":return{localPort:e.configuration.localPort};case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return!1;default:(0,d.default)(t)}}).filter(Boolean).sort(function(e,t){return e.localPort-t.localPort}),[4,p.updateDotReplit([{op:"add",path:"ports",value:JSON.stringify(e)}])];case 1:return t.sent(),[2]}})})()},1e3,{leading:!1,trailing:!0});function A(){y.set(!0),I()}return!function(e){var t=e.container,n=e.dotReplit,o=e.portsState,c=e.writeDotReplitPortsConfig,d=e.isThisServiceUpdatingDotReplit,f=e.forwardPortsAutomatically;function p(e){return e.sort(function(e,t){var n,r;return(null!=(n=e.configuration.localPort)?n:0)-(null!=(r=t.configuration.localPort)?r:0)})}var m=[];function y(e){try{var t=function(e){var t=e.portsState,n=e.portInfo,a=e.forwardPortsAutomatically;if(null===t.current)throw Error("processOpenedPort can only assign ports if dotReplit config was read");var o={pid:n.pid,cgroup:n.cgroup,address:n.address,cmdline:n.cmdline},s="127.0.0.1"===o.address,l=_(n.port),u=k(n.port),c=S(n.port),d=t.current.find(function(e){return e.configuration.localPort===n.port});if(void 0!==d)return{isOpen:!0,isTemporary:!!l||d.isTemporary,processInfo:o,configuration:(0,i._)((0,r._)({},d.configuration),{isLocalhost:s})};if(c)return{isOpen:!0,isTemporary:!0,processInfo:o,configuration:{type:"FORWARDED",localPort:n.port,externalPort:n.port,isLocalhost:s,isVscode:u,isVnc:l}};if("none"===a.current||"only-global"===a.current&&s||l||u)return{isOpen:!0,isTemporary:!0,processInfo:o,configuration:{type:"INTERNAL_ONLY",localPort:n.port,isLocalhost:s,isVscode:u,isVnc:l}};var f=E({localPort:n.port,portsState:t});return void 0===f?{isOpen:!0,isTemporary:!1,processInfo:o,configuration:{type:"NO_MORE_EXTERNAL_PORTS_AVAILABLE",localPort:n.port,isLocalhost:s,isVscode:u,isVnc:l}}:{isOpen:!0,isTemporary:!1,processInfo:o,configuration:{type:"FORWARDED",localPort:n.port,externalPort:f,isLocalhost:s,isVscode:u,isVnc:l}}}({portsState:o,portInfo:e,forwardPortsAutomatically:f}),n=!1;o.update(function(r){if(!r)throw Error("processOpenedPort can only execute if we red .replit first");return(0,u.produce)(r,function(i){var a=i.findIndex(function(t){return t.configuration.localPort===e.port});return -1===a?(a=r.length,n=!0):(0,l.default)(r[a].configuration,t.configuration)||(n=!0),i[a]=t,p(i)})}),n&&c()}catch(e){throw s.withScope(function(t){t.setTag("service","ports"),s.captureException(e)}),e}}function R(e){try{var t=!1;o.update(function(n){if(!n)throw Error("onPortClosed can only execute if we red .replit first");return(0,u.produce)(n,function(n){var r=n.findIndex(function(t){return t.configuration.localPort===e.port});if(-1!==r){var i=n[r];i.isTemporary||g(i.configuration.localPort)?(n.splice(r,1),t=!0):i.isOpen=!1}})}),t&&c()}catch(e){throw s.withScope(function(t){t.setTag("service","ports"),s.captureException(e)}),e}}t.onPortOpened(function(e){null===o.current?m.push({type:"portOpen",portInfo:e}):y(e)}),t.onPortClosed(function(e){null===o.current?m.push({type:"portClose",portInfo:e}):R(e)}),t.onConnectionStateChanged(function(e){e!==h.ConnectionState.CONNECTED&&null!==o.current&&o.set(o.current.filter(function(e){return!e.isTemporary}).map(function(e){return{isOpen:!1,isTemporary:e.isTemporary,configuration:e.configuration}}))}),n.watch(function(e){var t,n=e.config,s=null!=(t=null==n?void 0:n.ports)?t:[];if(!0===d.current){var l=o.current;if(!l)return;var u=l.filter(function(e){return!e.isTemporary&&!g(e.configuration.localPort)});if(s.length!==u.length)return;s.every(function(e,t){var n,r=u[t];return e.localPort===r.configuration.localPort&&e.externalPort===(null!=(n=b(r.configuration))?n:0)})&&d.set(!1);return}o.update(function(e){e||(e=[]);var t=new Set(s.map(function(e){return e.localPort}).filter(function(e){return null!=e})),n=new Set(e.map(function(e){return e.configuration.localPort})),o=new Set(e.filter(function(e){return e.isOpen}).map(function(e){return e.configuration.localPort})),l=x(t,n),u=(m=new Set((0,a._)(Array.from(t)).concat((0,a._)(Array.from(o)))),new Set(Array.from(n).filter(function(e){return m.has(e)}))),c=[],d=!0,f=!1,h=void 0;try{for(var m,g,y=u[Symbol.iterator]();!(d=(g=y.next()).done);d=!0)!function(){var t=g.value,n=e.find(function(e){return e.configuration.localPort===t}),a=s.find(function(e){return e.localPort===t});if(!n)throw Error("couldn't find match for local port: ".concat(t));if(!a)return c.push((0,i._)((0,r._)({},n),{configuration:{type:"CONFIG_MISSING",localPort:n.configuration.localPort,isLocalhost:w(n.configuration),isVscode:j(n.configuration),isVnc:C(n.configuration)}}));var o=n.configuration;o=null!=a.externalPort&&0!==a.externalPort?{type:T(c).has(a.externalPort)?"FORWARDED":"MISCONFIGURED",localPort:n.configuration.localPort,externalPort:a.externalPort,isLocalhost:w(n.configuration),isVscode:j(n.configuration),isVnc:C(n.configuration)}:{type:"INTERNAL_ONLY",localPort:n.configuration.localPort,isLocalhost:w(n.configuration),isVscode:j(n.configuration),isVnc:C(n.configuration)},c.push((0,i._)((0,r._)({},n),{configuration:o}))}()}catch(e){f=!0,h=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}var b=!0,S=!1,E=void 0;try{for(var R,I=l[Symbol.iterator]();!(b=(R=I.next()).done);b=!0)!function(){var e,t=R.value,n=s.find(function(e){return e.localPort===t});if(!n)throw Error("couldn't find match for local port: ".concat(t));var r=null!=n.externalPort&&0!==n.externalPort?n.externalPort:void 0;if(void 0!==r){var i,a=T(c).has(r);c.push({isOpen:!1,isTemporary:!1,configuration:{type:a?"FORWARDED":"MISCONFIGURED",localPort:t,externalPort:r,isLocalhost:null!=(i=n.exposeLocalhost)&&i,isVscode:k(t),isVnc:_(t)}})}else c.push({isOpen:!1,isTemporary:!1,configuration:{type:"INTERNAL_ONLY",localPort:t,isLocalhost:null!=(e=n.exposeLocalhost)&&e,isVscode:k(t),isVnc:_(t)}})}()}catch(e){S=!0,E=e}finally{try{b||null==I.return||I.return()}finally{if(S)throw E}}return p(c)}),m.length>0&&(m.forEach(function(e){var t=e.type,n=e.portInfo;"portOpen"===t?y(n):"portClose"===t&&R(n)}),m=[])})}({container:t,dotReplit:p,portsState:m,writeDotReplitPortsConfig:A,isThisServiceUpdatingDotReplit:y,forwardPortsAutomatically:R}),{tryExposingPortAutomatically:function(e){var t=E({localPort:e,portsState:m});void 0!==t&&(m.update((0,u.produce)(function(n){if(n){var r=n.find(function(t){return t.configuration.localPort===e});r&&(r.isTemporary=!1,r.configuration={type:"FORWARDED",localPort:e,externalPort:t,isLocalhost:r.configuration.isLocalhost,isVscode:k(e),isVnc:_(e)})}})),A())},updateDotReplitPortsMapping:function(e,t,n){m.update((0,u.produce)(function(r){var i,a=null==r?void 0:r.find(function(t){return t.configuration.localPort===e}),o=n;void 0===o&&(o=null!=(i=null==a?void 0:a.configuration.isLocalhost)&&i);var s=void 0!==t?{type:"FORWARDED",localPort:e,externalPort:t,isLocalhost:o,isVscode:k(e),isVnc:_(e)}:{type:"INTERNAL_ONLY",localPort:e,isLocalhost:o,isVscode:k(e),isVnc:_(e)};a?(a.isTemporary=!1,a.configuration=s):(r||(r=[]),r.push({isOpen:!1,isTemporary:!1,configuration:s}))})),A()},removeDotReplitPortsMapping:function(e,t){m.update((0,u.produce)(function(n){var r;void 0!==(r=void 0!==t?null==n?void 0:n.findIndex(function(n){return n.configuration.localPort===e&&("FORWARDED"===n.configuration.type||"MISCONFIGURED"===n.configuration.type)&&n.configuration.externalPort===t}):null==n?void 0:n.findIndex(function(t){return t.configuration.localPort===e}))&&(null==n||n.splice(r,1))})),A()},portsState:m,setForwardPortsAutomatically:function(e){R.set(e)}}}e.s(["ForwardableExternalPortsDotDevDomain",()=>m,"PortConfigurationType",()=>y,"createPortsService",()=>R,"getExternalPort",()=>b,"getIsLocalhost",()=>w,"isGalleryPreviewPort",()=>S])},408450,e=>{e.v({expoGoLink:"DevURLInfo-module__Y2imda__expoGoLink",qrCode:"DevURLInfo-module__Y2imda__qrCode",url:"DevURLInfo-module__Y2imda__url"})},371222,282094,531875,460513,886977,100915,604957,154488,840752,93728,305464,e=>{"use strict";var t,n,r,i=e.i(276385),a=e.i(389959),o=e.i(224386),s=e.i(530658),l=e.i(87995),u=e.i(752539),c=e.i(602686),d=e.i(252204),f=e.i(416746),p=e.i(155119),h=e.i(828322),m=e.i(40916),g=e.i(491194),x=e.i(602389),y=e.i(416298),b=e.i(921521),w=e.i(222342),_=e.i(761732),k=e.i(813675),S=e.i(801127),C=e.i(529810),j=e.i(878420),T=e.i(64386),E=e.i(886513),R=e.i(446530),I=e.i(613355),A=e.i(625484),P=(0,R.cssRecord)({table:{},tableRow:[I.rcss.rowWithGap(12),I.rcss.align.center,I.rcss.border({direction:"bottom"}),{boxSizing:"border-box"}],column:[I.rcss.display.flex,I.rcss.colWithGap(0),I.rcss.justify.center,I.rcss.border({direction:"right"}),{":last-child":{borderRight:0}}],cell:[I.rcss.rowWithGap(4),I.rcss.align.center,I.rcss.color.foregroundDimmest,I.rcss.justify.spaceBetween,I.rcss.fontSize("small"),I.rcss.mx(4),I.rcss.py(2),{overflow:"hidden",whiteSpace:"nowrap"}]}),D=function(e){var t=e.children,n=(0,E._)(e,["children"]);return(0,i.jsx)("tr",(0,T._)((0,j._)({css:P.tableRow},n),{children:(0,i.jsx)(A.View,{row:!0,gap:0,children:t})}))},O=function(e){var t=e.header,n=e.width,r=e.last,a=e.children,o={};return(n&&(o.width=n),r&&(o.marginLeft="auto"),void 0!==t&&t)?(0,i.jsx)("th",{style:o,children:(0,i.jsx)(A.View,{css:P.cell,children:a})}):(0,i.jsx)("td",{css:P.column,style:o,children:(0,i.jsx)(A.View,{css:P.cell,children:a})})},N=function(e){var t=e.children;return(0,i.jsx)("table",{css:P.table,children:t})};e.s(["Column",()=>O,"Row",()=>D,"Table",()=>N],282094);var M=e.i(754458),L=e.i(480028),B=e.i(88619),V=e.i(960178),F=e.i(408450);function U(e){var t=e.url,n=e.expoUrl,r=e.onCopy;return(0,i.jsxs)(A.View,{gap:8,children:[(0,i.jsxs)(A.View,{children:[(0,i.jsxs)(A.View,{row:!0,gap:4,align:"center",children:[(0,i.jsx)(l.default,{href:t,clsx:F.default.url,target:"_blank",children:t}),(0,i.jsx)(B.CopyIconButton,{textToCopy:t,tooltipText:"Copy link",onCopy:r})]}),(0,i.jsx)(V.Text,{color:"dimmer",variant:"small",children:"Dev URLs are temporary and will sleep after you leave the workspace."})]}),(0,i.jsxs)(A.View,{gap:4,children:[(0,i.jsx)(M.default,{bgColor:L.tokens.backgroundHigher,fgColor:L.tokens.foregroundDefault,clsx:F.default.qrCode,size:128,value:null!=n?n:t}),n?(0,i.jsx)(A.View,{children:(0,i.jsxs)(V.Text,{variant:"small",color:"dimmer",children:["Install"," ",(0,i.jsx)(l.default,{href:"https://expo.dev/go",clsx:F.default.expoGoLink,target:"_blank",children:"Expo Go"})," ","to scan and preview"]})}):null]})]})}e.s(["default",()=>U],531875);var G=e.i(297083),$=e.i(817556),H=e.i(569384),z=e.i(973245),W=e.i(304277);e.i(566901);var q=e.i(951262);function K(){var e=(0,H._)(["\n  query GetReplShieldStatus($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        isReplShieldEnabled\n        authorizations {\n          editDevUrlPrivacy {\n            isAuthorized\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return K=function(){return e},e}function Y(){var e=(0,H._)(["\n  mutation ToggleReplShield($input: SetReplShieldInput!) {\n    setReplShield(input: $input) {\n      ... on Repl {\n        id\n        isReplShieldEnabled\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Y=function(){return e},e}var Q={},X=(0,z.gql)(K()),Z=(0,z.gql)(Y()),J=e.i(596139),ee=e.i(968783),et=e.i(207237),en=e.i(541793),er=e.i(161322);function ei(){var e=(0,H._)(["\n  mutation MintReplShieldToken($input: MintReplShieldTokenInput!) {\n    mintReplShieldToken(input: $input) {\n      ... on ReplShieldToken {\n        token\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return ei=function(){return e},e}var ea={},eo=(0,z.gql)(ei()),es=e.i(98816),el=function(e){try{var t=e.split(".")[1],n=JSON.parse(atob(t));return n.exp?1e3*n.exp:null}catch(e){return null}},eu=(0,en.atom)(null),ec=(0,en.atom)(!1);function ed(){var e,t=(0,et.default)(),n=(0,s._)((e=(0,j._)({},ea,void 0),q.useMutation(eo,e)),2),r=n[0],i=n[1].loading,o=(0,s._)((0,er.useAtom)(eu),2),l=o[0],u=o[1],c=(0,s._)((0,er.useAtom)(ec),2),d=c[0],f=c[1],p=(0,a.useRef)(null),h=(0,es.default)(i),m=(0,a.useCallback)(function(){return(0,G._)(function(){var e,n,i;return(0,$._)(this,function(a){switch(a.label){case 0:if(!t||h.current)return[2];f(!1),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r({variables:{input:{replId:t}}})];case 2:if((n=null==(e=a.sent().data)?void 0:e.mintReplShieldToken)&&"ReplShieldToken"===n.__typename){if(!(i=n.token))return[2,null];return u(i),[2,i]}return f(!0),[2,null];case 3:return a.sent(),f(!0),[2,null];case 4:return[2]}})})()},[t,r,u,f,h]),g=(0,a.useCallback)(function(){return(0,G._)(function(){return(0,$._)(this,function(e){return u(null),f(!1),[2,m()]})})()},[m,u,f]),x=(0,a.useCallback)(function(){if(!l)return!1;var e=el(l);if(!e)return!1;var t=e-Date.now();return!(t<=0)&&!(t<=3e5)},[l]),y=(0,a.useCallback)(function(){if(p.current&&(clearTimeout(p.current),p.current=null),l){var e=el(l);if(e){var t=e-Date.now();if(t<=3e5)return void m();p.current=setTimeout(function(){m()},t-3e5)}}},[l,m]);return(0,a.useEffect)(function(){return!t||l||h.current||d||m(),t&&l&&!h.current&&!d&&(x()?y():m()),function(){p.current&&(clearTimeout(p.current),p.current=null)}},[t,l,m,d,x,y,h]),{token:l,error:d,retry:m,loading:i,forceRemint:g}}e.s(["useReplShieldToken",()=>ed],460513);var ef=e.i(76430),ep=e.i(396776),eh=e.i(112767),em=e.i(751273),eg=e.i(947108),ev=(0,R.cssRecord)({titleRow:[I.rcss.gap(8),I.rcss.align.center]});function ex(){var e,t,n,r,o,l,u,c,d,f,p=(0,w.default)().showError,h=(0,et.default)(),m=(0,s._)((0,a.useState)(null),2),g=m[0],x=m[1],b=ed().forceRemint,_=(0,ee.useCurrentUserStoredOrgContext)(),k=_.loading,S=_.orgId,C=!k&&!S,T=(e={variables:{replId:h},skip:!h},t=(0,j._)({},Q,e),W.useQuery(X,t)),E=T.data,R=T.loading,I=(0,s._)((n=(0,j._)({},Q,void 0),q.useMutation(Z,n)),2),P=I[0],D=I[1].loading,O=(null==E||null==(r=E.getRepl)?void 0:r.__typename)==="Repl"&&E.getRepl.isReplShieldEnabled,N=(null==E||null==(o=E.getRepl)?void 0:o.__typename)==="Repl"&&(null==(u=E.getRepl.authorizations)||null==(l=u.editDevUrlPrivacy)?void 0:l.isAuthorized),M=(null==E||null==(c=E.getRepl)?void 0:c.__typename)==="Repl"&&(null==(f=E.getRepl.authorizations)||null==(d=f.editDevUrlPrivacy)?void 0:d.message),L=null!==g?g:O,B=(0,ef.useIsExpoStackWithLaunchEnabled)()&&L;return(0,i.jsxs)(A.View,{p:4,children:[(0,i.jsxs)(A.View,{row:!0,justify:"space-between",children:[(0,i.jsxs)(A.View,{gap:4,children:[(0,i.jsxs)(A.View,{css:ev.titleRow,row:!0,children:[(0,i.jsx)(V.Text,{children:"Private Dev URL"}),C?(0,i.jsx)(eg.default,{plan:"Teams",size:"small",tooltipProps:{description:"Private Dev URL is only available on Replit ".concat(J.replitTeamsPlanName,".")}}):null]}),(0,i.jsx)(V.Text,{variant:"small",color:"dimmer",children:"Restrict Dev URL access to authenticated editors only."}),(0,i.jsx)(V.Text,{variant:"small",color:"dimmer",children:"When this option is disabled, anyone with the Dev URL can access your app preview."})]}),(0,i.jsx)(A.View,{row:!0,align:"center",children:(0,i.jsx)(em.Tooltip,{tooltip:D?"Loading...":R?"Loading status...":N?C?"Private Dev URL is only available on Replit ".concat(J.replitTeamsPlanName,"."):"Toggle to ".concat(L?"disable":"enable"," private dev URL"):M||"You do not have permission to change this setting",children:(0,i.jsx)(A.View,{children:(0,i.jsx)(eh.Switch,{"aria-label":"Toggle private dev URL",isSelected:L,onChange:function(){return(0,G._)(function(){var e,t,n,r,i,a,o;return(0,$._)(this,function(s){switch(s.label){case 0:if(!h||!N)return[2];x(!L),s.label=1;case 1:return s.trys.push([1,6,,7]),[4,P({variables:{input:{replId:h,isEnabled:!L}},refetchQueries:[{query:X,variables:{replId:h}}]})];case 2:if((null==(t=(o=s.sent()).data)||null==(e=t.setReplShield)?void 0:e.__typename)!=="UserError"&&(null==(r=o.data)||null==(n=r.setReplShield)?void 0:n.__typename)!=="NotFoundError"&&(null==(a=o.data)||null==(i=a.setReplShield)?void 0:i.__typename)!=="UnauthorizedError")return[3,3];return p(o.data.setReplShield.message),x(null),[3,5];case 3:return[4,b()];case 4:s.sent(),s.label=5;case 5:return[3,7];case 6:return s.sent(),p("Failed to toggle configuration"),x(null),[3,7];case 7:return[2]}})})()},isDisabled:D||R||!N||C,colorway:L?"positive":"primary"})})})})]}),B?(0,i.jsx)(A.View,{pt:8,children:(0,i.jsx)(ep.StatusBanner,{colorway:"warning",icon:(0,i.jsx)(y.default,{}),text:"Private Dev URL will prevent mobile apps from loading in Expo Go and may break server-side functionality."})}):null]})}e.s(["default",()=>ex],886977);var ey=e.i(858248),eb=e.i(709485);function ew(){(0,ey.track)(eb.events.WORKSPACE,{action:"networking_pane_used",type:"dev_url_copied"})}var e_=e.i(140487),ek=e.i(988676),eS=e.i(136540),eC=e.i(607278),ej=e.i(119274),eT="VNC ports do not require external port",eE="VSCode ports do not require external port",eR=(0,R.cssRecord)({secondaryUrl:[I.rcss.color.foregroundDimmest,I.rcss.fontSize("small"),I.rcss.focusRing,{"&:hover":[I.rcss.cursor.pointer,I.rcss.color.accentPrimaryStrongest]}],portHeader:[I.rcss.align.baseline],openPort:[I.rcss.color.accentPositiveStronger],localPortIcon:[I.rcss.color.foregroundDefault,I.rcss.px(4),{flex:"0 0 auto",marginLeft:"auto"}],portStatus:[I.rcss.py(0),I.rcss.px(4),I.rcss.overflow("hidden")],newPort:[I.rcss.color.foregroundDefault,I.rcss.rowWithGap(4),I.rcss.align.center,I.rcss.my(1),I.rcss.borderRadius(16),I.rcss.height(20)],externalPortButton:[{"&":[I.rcss.height(20),I.rcss.borderRadius(16),I.rcss.color.foregroundDefault]}],textButton:[I.rcss.cursor.pointer,I.rcss.reset.button,I.rcss.color.accentPrimaryStronger,I.rcss.focusRing,I.rcss.hover(I.rcss.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],newPortInput:[I.rcss.height(20),I.rcss.my(1)],newPortClose:I.rcss.mr(4),vncTooltip:[I.rcss.flex.growAndShrink(1)],vscodeTooltip:[I.rcss.flex.growAndShrink(1)]});function eI(e){var t,n,r,a=e.localPort,o=e.externalPort,s=e.isLocalhost,l=e.onPortChange,u=(0,C.default)().ports.updateDotReplitPortsMapping,d=(t=(0,C.default)().ports,r=new Set(null==(n=(0,_.default)(t.portsState))?void 0:n.map(function(e){var t;return null!=(t=(0,S.getExternalPort)(e.configuration))&&t}).filter(Boolean)),Array.from(S.ForwardableExternalPortsDotDevDomain).sort(function(e,t){return e-t}).map(function(e){return{isAvailable:!r.has(e),externalPort:e}}));return(0,i.jsx)(A.View,{row:!0,children:void 0!==o&&0!==o?(0,i.jsx)(e_.Button,{css:eR.externalPortButton,iconRight:(0,i.jsx)(c.default,{}),text:":".concat(o),size:"small",onClick:function(){a&&(u(a,void 0,s),null==l||l())}}):(0,i.jsx)(ej.PopupMenu,{label:"Set external port",onAction:function(e){if(a){var t=d.find(function(t){return String(t.externalPort)===e});t&&t.isAvailable&&(u(a,t.externalPort,s),null==l||l())}},children:d.map(function(e){var t=e.isAvailable,n=e.externalPort;return(0,i.jsx)(ej.MenuItem,{id:String(n),"aria-label":String(n),isDisabled:!t,label:":".concat(n)},String(n))})})})}function eA(e){var t=e.portState,n=null;switch(t.configuration.type){case S.PortConfigurationType.MISCONFIGURED:n=(0,i.jsx)(em.Tooltip,{tooltip:"Port misconfigured",delay:"default",children:(0,i.jsx)(y.default,{})});break;case S.PortConfigurationType.CONFIG_MISSING:n=(0,i.jsx)(em.Tooltip,{tooltip:"Configuration missing",delay:"default",children:(0,i.jsx)(y.default,{})});break;case S.PortConfigurationType.NO_MORE_EXTERNAL_PORTS_AVAILABLE:n=(0,i.jsx)(y.default,{});break;case S.PortConfigurationType.FORWARDED:n=(0,i.jsx)(u.default,{});case S.PortConfigurationType.INTERNAL_ONLY:}return(0,i.jsx)("span",{css:eR.localPortIcon,children:n})}function eP(e){var t=e.portState,n=e.width,r=(0,S.getIsLocalhost)(t.configuration)?"localhost":"0.0.0.0";return(0,i.jsxs)(O,{width:n||130,children:[(0,i.jsxs)(V.Text,{css:t.isOpen&&eR.openPort,children:[r,":",t.configuration.localPort]}),(0,i.jsx)(eA,{portState:t})]})}function eD(e){var t,n=e.portState,r=e.openWebview,a=e.openVncOutput,o=e.openVscode,s=e.width;if(n.configuration.type===S.PortConfigurationType.NO_MORE_EXTERNAL_PORTS_AVAILABLE)return(0,i.jsx)(O,{width:s||180,children:(0,i.jsx)(ep.StatusBanner,{css:eR.portStatus,icon:(0,i.jsx)(y.default,{}),text:"No ports available"})});var l=!!a&&n.configuration.isVnc,u=!!o&&n.configuration.isVscode,c=!l&&!u&&!!r&&n.isOpen&&n.configuration.type===S.PortConfigurationType.FORWARDED;return t=n.configuration.isVnc?(0,i.jsx)(em.Tooltip,{tooltip:eT,css:eR.vncTooltip,children:(0,i.jsx)(ep.StatusBanner,{css:eR.portStatus,icon:(0,i.jsx)(f.default,{}),text:eT})}):n.configuration.isVscode?(0,i.jsx)(em.Tooltip,{tooltip:eE,css:eR.vscodeTooltip,children:(0,i.jsx)(ep.StatusBanner,{css:eR.portStatus,icon:(0,i.jsx)(f.default,{}),text:eE})}):(0,i.jsx)(eI,{localPort:n.configuration.localPort,externalPort:(0,S.getExternalPort)(n.configuration),isLocalhost:(0,S.getIsLocalhost)(n.configuration)}),(0,i.jsxs)(O,{width:s||180,children:[t,c?(0,i.jsx)(eS.IconButton,{alt:"Open in Preview",onClick:r,css:I.rcss.color.foregroundDefault,children:(0,i.jsx)(p.default,{})}):null,l?(0,i.jsx)(eS.IconButton,{alt:"View VNC output",onClick:a,css:I.rcss.color.foregroundDefault,children:(0,i.jsx)(p.default,{})}):null,u?(0,i.jsx)(eS.IconButton,{alt:"Open VSCode",onClick:o,css:I.rcss.color.foregroundDefault,children:(0,i.jsx)(x.default,{})}):null]})}function eO(e){var t,n=e.portState;return n.isOpen?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(O,{width:100,children:(t=n.processInfo.cmdline[0].split("/"))[t.length-1]}),(0,i.jsx)(O,{width:100,children:n.processInfo.pid})]}):(0,i.jsx)(O,{width:100})}var eN=((t=eN||{}).OPEN_WEBVIEW="OPEN_WEBVIEW",t.OPEN_VNC_OUTPUT="OPEN_VNC_OUTPUT",t.OPEN_VSCODE="OPEN_VSCODE",t.EXTERNAL_LINK="EXTERNAL_LINK",t.REMOVE="REMOVE",t);function eM(e){var t=e.portState,n=e.onAction,r=[{label:"Open external link",key:"EXTERNAL_LINK",icon:(0,i.jsx)(d.default,{})},{label:"Remove port config",key:"REMOVE",icon:(0,i.jsx)(g.default,{})}];return t.configuration.isVnc?r.unshift({label:"View VNC output",key:"OPEN_VNC_OUTPUT",icon:(0,i.jsx)(p.default,{})}):t.configuration.isVscode?r.unshift({label:"Open VSCode",key:"OPEN_VSCODE",icon:(0,i.jsx)(x.default,{})}):r.unshift({label:"Open Preview",key:"OPEN_WEBVIEW",icon:(0,i.jsx)(p.default,{})}),(0,i.jsx)(O,{width:30,last:!0,children:(0,i.jsx)(ej.PopupMenu,{trigger:(0,i.jsx)(eS.IconButton,{alt:"More",children:(0,i.jsx)(h.default,{})}),items:r,onAction:function(e){switch(e){case"OPEN_WEBVIEW":case"OPEN_VNC_OUTPUT":case"OPEN_VSCODE":case"EXTERNAL_LINK":case"REMOVE":n({type:e,payload:{portState:t}})}},children:function(e){return(0,i.jsx)(ej.MenuItem,{label:e.label,icon:e.icon},e.key)}})})}function eL(e){var t=e.portState,n=e.portAction;return(0,i.jsxs)(D,{children:[(0,i.jsx)(eP,{portState:t}),(0,i.jsx)(eD,{portState:t,openWebview:function(){n({type:"OPEN_WEBVIEW",payload:{portState:t}})},openVncOutput:function(){n({type:"OPEN_VNC_OUTPUT",payload:{portState:t}})},openVscode:function(){n({type:"OPEN_VSCODE",payload:{portState:t}})}}),(0,i.jsx)(eO,{portState:t}),(0,i.jsx)(eM,{portState:t,onAction:n})]},t.configuration.localPort)}var eB=function(e){var t=e.text,n=e.onClick;return(0,i.jsx)("button",{css:eR.textButton,onClick:n,children:t})};function eV(e){var t,n=e.openDotReplit,r=(0,s._)((0,a.useState)(!1),2),o=r[0],l=r[1],u=(0,s._)((0,a.useState)(),2),d=u[0],f=u[1],p=null==(t=(0,C.default)().ports.portsState.current)?void 0:t.some(function(e){return e.configuration.localPort===d});return o?(0,i.jsxs)(D,{children:[(0,i.jsxs)(O,{width:130,children:[(0,i.jsx)(eS.IconButton,{css:eR.newPortClose,alt:"Close",onClick:function(){return l(!1)},size:18,children:(0,i.jsx)(c.default,{})}),(0,i.jsx)(eC.Input,{css:eR.newPortInput,value:(null==d?void 0:d.toString())||"",onChange:function(e){return f(e.target.value?parseInt(e.target.value,10):void 0)}})]}),(0,i.jsx)(O,{children:p?(0,i.jsx)(ep.StatusBanner,{css:eR.portStatus,colorway:"warning",text:"Local port already exists"}):(0,i.jsx)(eI,{localPort:d,isLocalhost:!1,onPortChange:function(){return l(!1)}})})]}):(0,i.jsxs)(D,{children:[(0,i.jsx)(O,{width:130,children:(0,i.jsx)(e_.Button,{css:eR.newPort,iconLeft:(0,i.jsx)(m.default,{size:12}),text:"New port",size:"small",onClick:function(){return l(!0)}})}),(0,i.jsx)(O,{children:(0,i.jsxs)(V.Text,{variant:"small",children:["This port config is saved in the"," ",(0,i.jsx)(eB,{text:".replit file",onClick:n}),"."," "]})})]})}function eF(e){var t,n=e.openDotReplit,r=e.openWebview,a=e.openVncOutput,o=e.openVscode,s=(0,b.default)(),u=(0,k.useUrls)({addDevToolsSuffix:!s}),c=(0,w.default)().showError,d=(0,C.default)().ports,f=d.portsState,p=d.removeDotReplitPortsMapping,h=function(e){switch(e.type){case"OPEN_WEBVIEW":r(e.payload.portState.configuration.localPort);break;case"OPEN_VNC_OUTPUT":a();break;case"OPEN_VSCODE":o();break;case"EXTERNAL_LINK":var t=(0,S.getExternalPort)(e.payload.portState.configuration);if(!(null==u?void 0:u.presentationUrl))return void c("URL not available.");var n=(0,k.addPortToUrl)(null==u?void 0:u.presentationUrl,t).toString();window.open(n,"_blank");break;case"REMOVE":p(e.payload.portState.configuration.localPort,(0,S.getExternalPort)(e.payload.portState.configuration))}};return(0,i.jsxs)(A.View,{p:12,gap:16,children:[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ex,{}),(0,i.jsx)(ek.DividerH,{})]}),(null==u?void 0:u.presentationUrl)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U,{url:u.presentationUrl,onCopy:ew}),(0,i.jsx)(ek.DividerH,{})]}):null,(0,i.jsxs)(A.View,{gap:4,children:[(0,i.jsxs)(A.View,{css:eR.portHeader,row:!0,gap:8,children:[(0,i.jsx)(V.Text,{children:"Ports"}),(0,i.jsx)(l.default,{href:"https://docs.replit.com/replit-workspace/workspace-features/webview",css:eR.secondaryUrl,target:"_blank",children:"Learn more"})]}),(0,i.jsxs)(N,{children:[(0,i.jsxs)(D,{children:[(0,i.jsx)(O,{header:!0,width:130,children:"Internal Port"}),(0,i.jsx)(O,{header:!0,width:180,children:"External Port"}),(0,i.jsx)(O,{header:!0,width:100,children:"Name"}),(0,i.jsx)(O,{header:!0,width:100,children:"Pid"})]}),f.current&&(null==(t=f.current)?void 0:t.length)>0?f.current.map(function(e){return(0,i.jsx)(eL,{portState:e,portAction:h},e.configuration.localPort)}):null,(0,i.jsx)(eV,{openDotReplit:n})]})]})]})}var eU={label:"Networking",description:"Configure web server ports for your App",icon:(0,i.jsx)(o.default,{}),component:function(e){var t=e.openPane,n=(0,a.useCallback)(function(){t({type:"codeEditor",data:{path:".replit"}})},[t]),r=(0,a.useCallback)(function(e){t({type:"webview",data:e?{ports:{type:"local",port:e}}:void 0})},[t]),o=(0,a.useCallback)(function(){t({type:"vnc"})},[t]),s=(0,a.useCallback)(function(){t({type:"webview",data:{ports:{type:"local",port:8080}}})},[t]);return(0,i.jsx)(eF,{openDotReplit:n,openWebview:r,openVncOutput:o,openVscode:s})}};function eG(){var e=(0,H._)(["\n  fragment DeveloperToolsResourcesRepl on Repl {\n    id\n    owner {\n      __typename\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return eG=function(){return e},e}function e$(){var e=(0,H._)(["\n  fragment DeveloperToolsResourcesCurrentUser on CurrentUser {\n    id\n    userSubscriptionType\n  }\n"]);return e$=function(){return e},e}function eH(){var e=(0,H._)(["\n  query DeveloperToolsResources($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...DeveloperToolsResourcesRepl\n      }\n    }\n    currentUser {\n      ...DeveloperToolsResourcesCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return eH=function(){return e},e}e.s(["networkingTab",()=>eU],371222);var ez={},eW=(0,z.gql)(eG()),eq=(0,z.gql)(e$()),eK=(0,z.gql)(eH(),eW,eq),eY=e.i(269848),eQ=e.i(225185),eX=e.i(973519),eZ=e.i(399119),eJ=e.i(904851),e0=e.i(90659),e1=e.i(721281),e2=e.i(663355),e3=e.i(862470),e5=e.i(445789),e4=e.i(167626),e8=e.i(346715),e6=e.i(119468),e7=e.i(463348);function e9(e){return e+.5|0}var te=function(e,t,n){return Math.max(Math.min(e,n),t)};function tt(e){return te(e9(2.55*e),0,255)}function tn(e){return te(e9(255*e),0,255)}function tr(e){return te(e9(e/2.55)/100,0,1)}function ti(e){return te(e9(100*e),0,100)}var ta={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},to=Array.from("0123456789ABCDEF"),ts=function(e){return to[15&e]},tl=function(e){return to[(240&e)>>4]+to[15&e]},tu=function(e){return(240&e)>>4==(15&e)},tc=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function td(e,t,n){var r=t*Math.min(n,1-n),i=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function tf(e,t,n){var r=function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function tp(e,t,n){var r,i=td(e,1,.5);for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function th(e){var t,n,r,i=e.r/255,a=e.g/255,o=e.b/255,s=Math.max(i,a,o),l=Math.min(i,a,o),u=(s+l)/2;return s!==l&&(r=s-l,n=u>.5?r/(2-s-l):r/(s+l),t=60*(t=i===s?(a-o)/r+6*(a<o):a===s?(o-i)/r+2:(i-a)/r+4)+.5),[0|t,n||0,u]}function tm(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(tn)}function tg(e){return(e%360+360)%360}var tv={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},tx={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"},ty=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,tb=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055},tw=function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)};function t_(e,t,n){if(e){var r=th(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),e.r=(r=tm(td,r,void 0,void 0))[0],e.g=r[1],e.b=r[2]}}function tk(e,t){return e?Object.assign(t||{},e):e}function tS(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=tn(e[3]))):(t=tk(e,{r:0,g:0,b:0,a:1})).a=tn(t.a),t}var tC=function(){function e(t){if((0,eJ._)(this,e),(0,e4._)(t,e))return t;var n,i,a,o,s=void 0===t?"undefined":(0,e6._)(t);"object"===s?o=tS(t):"string"===s&&(i=t.length,"#"===t[0]&&(4===i||5===i?n={r:255&17*ta[t[1]],g:255&17*ta[t[2]],b:255&17*ta[t[3]],a:5===i?17*ta[t[4]]:255}:(7===i||9===i)&&(n={r:ta[t[1]]<<4|ta[t[2]],g:ta[t[3]]<<4|ta[t[4]],b:ta[t[5]]<<4|ta[t[6]],a:9===i?ta[t[7]]<<4|ta[t[8]]:255})),o=n||(r||((r=function(){var e,t,n,r,i,a={},o=Object.keys(tx),s=Object.keys(tv);for(e=0;e<o.length;e++){for(t=0,r=i=o[e];t<s.length;t++)n=s[t],i=i.replace(n,tv[n]);n=parseInt(tx[r],16),a[i]=[n>>16&255,n>>8&255,255&n]}return a}()).transparent=[0,0,0,0]),(a=r[t.toLowerCase()])&&{r:a[0],g:a[1],b:a[2],a:4===a.length?a[3]:255})||("r"===t.charAt(0)?function(e){var t,n,r,i=ty.exec(e),a=255;if(i){if(i[7]!==t){var o=+i[7];a=i[8]?tt(o):te(255*o,0,255)}return t=+i[1],n=+i[3],r=+i[5],t=255&(i[2]?tt(t):te(t,0,255)),{r:t,g:n=255&(i[4]?tt(n):te(n,0,255)),b:r=255&(i[6]?tt(r):te(r,0,255)),a:a}}}(t):function(e){var t,n=tc.exec(e),r=255;if(n){n[5]!==t&&(r=n[6]?tt(+n[5]):tn(+n[5]));var i=tg(+n[2]),a=n[3]/100,o=n[4]/100;return{r:(t="hwb"===n[1]?tm(tp,i,a,o):"hsv"===n[1]?tm(tf,i,a,o):tm(td,i,a,o))[0],g:t[1],b:t[2],a:r}}}(t))),this._rgb=o,this._valid=!!o}return(0,e0._)(e,[{key:"valid",get:function(){return this._valid}},{key:"rgb",get:function(){var e=tk(this._rgb);return e&&(e.a=tr(e.a)),e},set:function(e){this._rgb=tS(e)}},{key:"rgbString",value:function(){var e;return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(tr(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0}},{key:"hexString",value:function(){var e,t,n,r;return this._valid?(n=tu((t=e=this._rgb).r)&&tu(t.g)&&tu(t.b)&&tu(t.a)?ts:tl,e?"#"+n(e.r)+n(e.g)+n(e.b)+(r=e.a,r<255?n(r):""):void 0):void 0}},{key:"hslString",value:function(){return this._valid?function(e){if(e){var t=th(e),n=t[0],r=ti(t[1]),i=ti(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(tr(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}}(this._rgb):void 0}},{key:"mix",value:function(e,t){if(e){var n,r=this.rgb,i=e.rgb,a=t===n?.5:t,o=2*a-1,s=r.a-i.a,l=((o*s==-1?o:(o+s)/(1+o*s))+1)/2;n=1-l,r.r=255&l*r.r+n*i.r+.5,r.g=255&l*r.g+n*i.g+.5,r.b=255&l*r.b+n*i.b+.5,r.a=a*r.a+(1-a)*i.a,this.rgb=r}return this}},{key:"interpolate",value:function(e,t){var n,r,i,a,o;return e&&(this._rgb=(n=this._rgb,r=e._rgb,i=tw(tr(n.r)),a=tw(tr(n.g)),o=tw(tr(n.b)),{r:tn(tb(i+t*(tw(tr(r.r))-i))),g:tn(tb(a+t*(tw(tr(r.g))-a))),b:tn(tb(o+t*(tw(tr(r.b))-o))),a:n.a+t*(r.a-n.a)})),this}},{key:"clone",value:function(){return new e(this.rgb)}},{key:"alpha",value:function(e){return this._rgb.a=tn(e),this}},{key:"clearer",value:function(e){var t=this._rgb;return t.a*=1-e,this}},{key:"greyscale",value:function(){var e=this._rgb,t=e9(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}},{key:"opaquer",value:function(e){var t=this._rgb;return t.a*=1+e,this}},{key:"negate",value:function(){var e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}},{key:"lighten",value:function(e){return t_(this._rgb,2,e),this}},{key:"darken",value:function(e){return t_(this._rgb,2,-e),this}},{key:"saturate",value:function(e){return t_(this._rgb,1,e),this}},{key:"desaturate",value:function(e){return t_(this._rgb,1,-e),this}},{key:"rotate",value:function(e){var t,n;return t=this._rgb,(n=th(t))[0]=tg(n[0]+e),t.r=(n=tm(td,n,void 0,void 0))[0],t.g=n[1],t.b=n[2],this}}]),e}();function tj(){}var tT=(n=0,function(){return n++});function tE(e){return null==e}function tR(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function tI(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function tA(e){return("number"==typeof e||(0,e4._)(e,Number))&&isFinite(+e)}function tP(e,t){return tA(e)?e:t}function tD(e,t){return void 0===e?t:e}var tO=function(e,t){return"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e};function tN(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)}function tM(e,t,n,r){var i,a,o;if(tR(e))if(a=e.length,r)for(i=a-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<a;i++)t.call(n,e[i],i);else if(tI(e))for(i=0,a=(o=Object.keys(e)).length;i<a;i++)t.call(n,e[o[i]],o[i])}function tL(e,t){var n,r,i,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],a=t[n],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function tB(e){if(tR(e))return e.map(tB);if(tI(e)){for(var t=Object.create(null),n=Object.keys(e),r=n.length,i=0;i<r;++i)t[n[i]]=tB(e[n[i]]);return t}return e}function tV(e){return -1===["__proto__","prototype","constructor"].indexOf(e)}function tF(e,t,n,r){if(tV(e)){var i=t[e],a=n[e];tI(i)&&tI(a)?tU(i,a,r):t[e]=tB(a)}}function tU(e,t,n){var r,i=tR(t)?t:[t],a=i.length;if(!tI(e))return e;for(var o=(n=n||{}).merger||tF,s=0;s<a;++s)if(tI(r=i[s]))for(var l=Object.keys(r),u=0,c=l.length;u<c;++u)o(l[u],e,r,n);return e}function tG(e,t){return tU(e,t,{merger:t$})}function t$(e,t,n){if(tV(e)){var r=t[e],i=n[e];tI(r)&&tI(i)?tG(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=tB(i))}}var tH={"":function(e){return e},x:function(e){return e.x},y:function(e){return e.y}};function tz(e,t){var n;return(tH[t]||(tH[t]=(n=function(e){var t=e.split("."),n=[],r="",i=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;(r+=u).endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="")}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return n}(t),function(e){var t=!0,r=!1,i=void 0;try{for(var a,o=n[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;if(""===s)break;e=e&&e[s]}}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return e})))(e)}function tW(e){return e.charAt(0).toUpperCase()+e.slice(1)}var tq=function(e){return void 0!==e},tK=function(e){return"function"==typeof e},tY=function(e,t){if(e.size!==t.size)return!1;var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!t.has(s))return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0},tQ=Math.PI,tX=2*tQ,tZ=tX+tQ,tJ=1/0,t0=tQ/180,t1=tQ/2,t2=tQ/4,t3=2*tQ/3,t5=Math.log10,t4=Math.sign;function t8(e,t,n){return Math.abs(e-t)<n}function t6(e){var t=Math.round(e),n=Math.pow(10,Math.floor(t5(e=t8(e,t,e/1e3)?t:e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function t7(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t9(e,t,n){var r,i,a;for(r=0,i=e.length;r<i;r++)isNaN(a=e[r][n])||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function ne(e){return tQ/180*e}function nt(e){if(tA(e)){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}}function nn(e,t){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r),a=Math.atan2(r,n);return a<-.5*tQ&&(a+=tX),{angle:a,distance:i}}function nr(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ni(e,t){return(e-t+tZ)%tX-tQ}function na(e){return(e%tX+tX)%tX}function no(e,t,n,r){var i=na(e),a=na(t),o=na(n),s=na(a-i),l=na(o-i),u=na(i-a),c=na(i-o);return i===a||i===o||r&&a===o||s>l&&u<c}function ns(e,t,n){return Math.max(t,Math.min(n,e))}function nl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function nu(e,t,n){n=n||function(n){return e[n]<t};for(var r,i=e.length-1,a=0;i-a>1;)n(r=a+i>>1)?a=r:i=r;return{lo:a,hi:i}}var nc=function(e,t,n,r){return nu(e,n,r?function(r){var i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:function(r){return e[r][t]<n})},nd=function(e,t,n){return nu(e,n,function(r){return e[r][t]>=n})},nf=["push","pop","shift","splice","unshift"];function np(e,t){var n=e._chartjs;if(n){var r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(nf.forEach(function(t){delete e[t]}),delete e._chartjs)}}function nh(e){var t=new Set(e);return t.size===e.length?e:Array.from(t)}var nm="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function ng(e,t){var n=[],r=!1;return function(){for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];n=a,r||(r=!0,nm.call(window,function(){r=!1,e.apply(t,n)}))}}var nv=function(e){return"start"===e?"left":"end"===e?"right":"center"},nx=function(e,t,n){return"start"===e?t:"end"===e?n:(t+n)/2};function ny(e,t,n){var r=t.length,i=0,a=r;if(e._sorted){var o=e.iScale,s=e._parsed,l=o.axis,u=o.getUserBounds(),c=u.min,d=u.max,f=u.minDefined,p=u.maxDefined;f&&(i=ns(Math.min(nc(s,l,c).lo,n?r:nc(t,l,o.getPixelForValue(c)).lo),0,r-1)),a=p?ns(Math.max(nc(s,o.axis,d,!0).hi+1,n?0:nc(t,l,o.getPixelForValue(d),!0).hi+1),i,r)-i:r-i}return{start:i,count:a}}function nb(e){var t=e.xScale,n=e.yScale,r=e._scaleRanges,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;var a=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),a}var nw=function(e){return 0===e||1===e},n_=function(e,t,n){return-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*tX/n))},nk=function(e,t,n){return Math.pow(2,-10*e)*Math.sin((e-t)*tX/n)+1},nS={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-Math.cos(e*t1)+1},easeOutSine:function(e){return Math.sin(e*t1)},easeInOutSine:function(e){return -.5*(Math.cos(tQ*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:-Math.pow(2,-10*e)+1},easeInOutExpo:function(e){return nw(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(-Math.pow(2,-10*(2*e-1))+2)},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){return nw(e)?e:n_(e,.075,.3)},easeOutElastic:function(e){return nw(e)?e:nk(e,.075,.3)},easeInOutElastic:function(e){return nw(e)?e:e<.5?.5*n_(2*e,.1125,.45):.5+.5*nk(2*e-1,.1125,.45)},easeInBack:function(e){return e*e*(2.70158*e-1.70158)},easeOutBack:function(e){return(e-=1)*e*(2.70158*e+1.70158)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:function(e){return 1-nS.easeOutBounce(1-e)},easeOutBounce:function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*nS.easeInBounce(2*e):.5*nS.easeOutBounce(2*e-1)+.5}};function nC(e){if(e&&(void 0===e?"undefined":(0,e6._)(e))==="object"){var t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function nj(e){return nC(e)?e:new tC(e)}function nT(e){return nC(e)?e:new tC(e).saturate(.5).darken(.1).hexString()}var nE=["x","y","borderWidth","radius","tension"],nR=["color","borderColor","backgroundColor"],nI=new Map;function nA(e,t,n){var r,i,a;return(i=t+JSON.stringify(r=(r=n)||{}),!(a=nI.get(i))&&(a=new Intl.NumberFormat(t,r),nI.set(i,a)),a).format(e)}var nP={values:function(e){return tR(e)?e:""+e},numeric:function(e,t,n){if(0===e)return"0";var r,i=this.chart.options.locale,a=e;if(n.length>1){var o,s,l,u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),o=e,Math.abs(l=(s=n).length>3?s[2].value-s[1].value:s[1].value-s[0].value)>=1&&o!==Math.floor(o)&&(l=o-Math.floor(o)),a=l}var c=t5(Math.abs(a)),d=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),f={notation:r,minimumFractionDigits:d,maximumFractionDigits:d};return Object.assign(f,this.options.ticks.format),nA(e,i,f)},logarithmic:function(e,t,n){return 0===e?"0":[1,2,3,5,10,15].includes(n[t].significand||e/Math.pow(10,Math.floor(t5(e))))||t>.8*n.length?nP.numeric.call(this,e,t,n):""}},nD=Object.create(null),nO=Object.create(null);function nN(e,t){if(!t)return e;for(var n=t.split("."),r=0,i=n.length;r<i;++r){var a=n[r];e=e[a]||(e[a]=Object.create(null))}return e}function nM(e,t,n){return"string"==typeof t?tU(nN(e,t),n):tU(nN(e,""),t)}var nL=new(function(){function e(t,n){(0,eJ._)(this,e),this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=function(e){return e.chart.platform.getDevicePixelRatio()},this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=function(e,t){return nT(t.backgroundColor)},this.hoverBorderColor=function(e,t){return nT(t.borderColor)},this.hoverColor=function(e,t){return nT(t.color)},this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}return(0,e0._)(e,[{key:"set",value:function(e,t){return nM(this,e,t)}},{key:"get",value:function(e){return nN(this,e)}},{key:"describe",value:function(e,t){return nM(nO,e,t)}},{key:"override",value:function(e,t){return nM(nD,e,t)}},{key:"route",value:function(e,t,n,r){var i,a=nN(this,e),o=nN(this,n),s="_"+t;Object.defineProperties(a,(i={},(0,e1._)(i,s,{value:a[t],writable:!0}),(0,e1._)(i,t,{enumerable:!0,get:function(){var e=this[s],t=o[r];return tI(e)?Object.assign({},t,e):tD(e,t)},set:function(e){this[s]=e}}),i))}},{key:"apply",value:function(e){var t=this;e.forEach(function(e){return e(t)})}}]),e}())({_scriptable:function(e){return!e.startsWith("on")},_indexable:function(e){return"events"!==e},hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:function(e){return"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}}),e.set("animations",{colors:{type:"color",properties:nR},numbers:{type:"number",properties:nE}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:function(e){return 0|e}}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:function(e,t){return t.lineWidth},tickColor:function(e,t){return t.color},offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:nP.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:function(e){return!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e},_indexable:function(e){return"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:function(e){return"backdropPadding"!==e&&"callback"!==e},_indexable:function(e){return"backdropPadding"!==e}})}]);function nB(e,t,n,r,i){var a=t[i];return a||(a=t[i]=e.measureText(i).width,n.push(i)),a>r&&(r=a),r}function nV(e,t,n){var r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function nF(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function nU(e,t,n,r){nG(e,t,n,r,null)}function nG(e,t,n,r,i){var a,o,s,l,u,c,d,f,p=t.pointStyle,h=t.rotation,m=t.radius,g=(h||0)*t0;if(p&&(void 0===p?"undefined":(0,e6._)(p))==="object"&&("[object HTMLImageElement]"===(a=p.toString())||"[object HTMLCanvasElement]"===a)){e.save(),e.translate(n,r),e.rotate(g),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!isNaN(m)&&!(m<=0)){switch(e.beginPath(),p){default:i?e.ellipse(n,r,i/2,m,0,0,tX):e.arc(n,r,m,0,tX),e.closePath();break;case"triangle":c=i?i/2:m,e.moveTo(n+Math.sin(g)*c,r-Math.cos(g)*m),g+=t3,e.lineTo(n+Math.sin(g)*c,r-Math.cos(g)*m),g+=t3,e.lineTo(n+Math.sin(g)*c,r-Math.cos(g)*m),e.closePath();break;case"rectRounded":u=.516*m,o=Math.cos(g+t2)*(l=m-u),d=Math.cos(g+t2)*(i?i/2-u:l),s=Math.sin(g+t2)*l,f=Math.sin(g+t2)*(i?i/2-u:l),e.arc(n-d,r-s,u,g-tQ,g-t1),e.arc(n+f,r-o,u,g-t1,g),e.arc(n+d,r+s,u,g,g+t1),e.arc(n-f,r+o,u,g+t1,g+tQ),e.closePath();break;case"rect":if(!h){l=Math.SQRT1_2*m,c=i?i/2:l,e.rect(n-c,r-l,2*c,2*l);break}g+=t2;case"rectRot":d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,s=Math.sin(g)*m,f=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-s),e.lineTo(n+f,r-o),e.lineTo(n+d,r+s),e.lineTo(n-f,r+o),e.closePath();break;case"crossRot":g+=t2;case"cross":d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,s=Math.sin(g)*m,f=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-s),e.lineTo(n+d,r+s),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o);break;case"star":d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,s=Math.sin(g)*m,f=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-s),e.lineTo(n+d,r+s),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o),g+=t2,d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,s=Math.sin(g)*m,f=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-s),e.lineTo(n+d,r+s),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(g)*m,s=Math.sin(g)*m,e.moveTo(n-o,r-s),e.lineTo(n+o,r+s);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(i?i/2:m),r+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function n$(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function nH(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function nz(e){e.restore()}function nW(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){var a=(t.x+n.x)/2;e.lineTo(a,t.y),e.lineTo(a,n.y)}else"after"===i!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function nq(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function nK(e,t,n,r,i){var a,o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=tR(t)?t:[t],u=s.strokeWidth>0&&""!==s.strokeColor;for(e.save(),e.font=i.string,s.translation&&e.translate(s.translation[0],s.translation[1]),tE(s.rotation)||e.rotate(s.rotation),s.color&&(e.fillStyle=s.color),s.textAlign&&(e.textAlign=s.textAlign),s.textBaseline&&(e.textBaseline=s.textBaseline),a=0;a<l.length;++a)o=l[a],s.backdrop&&function(e,t){var n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}(e,s.backdrop),u&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),tE(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(o,n,r,s.maxWidth)),e.fillText(o,n,r,s.maxWidth),function(e,t,n,r,i){if(i.strikethrough||i.underline){var a=e.measureText(r),o=t-a.actualBoundingBoxLeft,s=t+a.actualBoundingBoxRight,l=n-a.actualBoundingBoxAscent,u=n+a.actualBoundingBoxDescent,c=i.strikethrough?(l+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,c),e.lineTo(s,c),e.stroke()}}(e,n,r,o,s),r+=Number(i.lineHeight);e.restore()}function nY(e,t){var n=t.x,r=t.y,i=t.w,a=t.h,o=t.radius;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*tQ,tQ,!0),e.lineTo(n,r+a-o.bottomLeft),e.arc(n+o.bottomLeft,r+a-o.bottomLeft,o.bottomLeft,tQ,t1,!0),e.lineTo(n+i-o.bottomRight,r+a),e.arc(n+i-o.bottomRight,r+a-o.bottomRight,o.bottomRight,t1,0,!0),e.lineTo(n+i,r+o.topRight),e.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-t1,!0),e.lineTo(n+o.topLeft,r)}var nQ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,nX=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function nZ(e,t){var n={},r=tI(t),i=r?Object.keys(t):t,a=tI(e)?r?function(n){return tD(e[n],e[t[n]])}:function(t){return e[t]}:function(){return e},o=!0,s=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;n[d]=+a(d)||0}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}return n}function nJ(e){return nZ(e,{top:"y",right:"x",bottom:"y",left:"x"})}function n0(e){return nZ(e,["topLeft","topRight","bottomLeft","bottomRight"])}function n1(e){var t=nJ(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function n2(e,t){e=e||{},t=t||nL.font;var n=tD(e.size,t.size);"string"==typeof n&&(n=parseInt(n,10));var r=tD(e.style,t.style);r&&!(""+r).match(nX)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);var i={family:tD(e.family,t.family),lineHeight:function(e,t){var n=(""+e).match(nQ);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}(tD(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:tD(e.weight,t.weight),string:""};return i.string=!i||tE(i.size)||tE(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family,i}function n3(e,t,n,r){var i,a,o,s=!0;for(i=0,a=e.length;i<a;++i)if(void 0!==(o=e[i])&&(void 0!==t&&"function"==typeof o&&(o=o(t),s=!1),void 0!==n&&tR(o)&&(o=o[n%o.length],s=!1),void 0!==o))return r&&!s&&(r.cacheable=!1),o}function n5(e,t){return Object.assign(Object.create(e),t)}function n4(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return e[0]},o=r||e;return void 0===i&&(i=rn("_fallback",e)),new Proxy((t={},(0,e1._)(t,Symbol.toStringTag,"Object"),(0,e1._)(t,"_cacheable",!0),(0,e1._)(t,"_scopes",e),(0,e1._)(t,"_rootScopes",o),(0,e1._)(t,"_fallback",i),(0,e1._)(t,"_getTarget",a),(0,e1._)(t,"override",function(t){return n4([t].concat((0,e8._)(e)),n,o,i)}),t),{deleteProperty:function(t,n){return delete t[n],delete t._keys,delete e[0][n],!0},get:function(t,r){return n9(t,r,function(){return function(e,t,n,r){var i=!0,a=!1,o=void 0;try{for(var s,l,u=t[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;if(s=rn(c?c+tW(e):e,n),void 0!==s)return n7(e,s)?re(n,r,e,s):s}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}(r,n,e,t)})},getOwnPropertyDescriptor:function(e,t){return Reflect.getOwnPropertyDescriptor(e._scopes[0],t)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e[0])},has:function(e,t){return rr(e).includes(t)},ownKeys:function(e){return rr(e)},set:function(e,t,n){var r=e._storage||(e._storage=a());return e[t]=r[t]=n,delete e._keys,!0}})}function n8(e,t,n,r){return new Proxy({_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:n6(e,r),setContext:function(t){return n8(e,t,n,r)},override:function(i){return n8(e.override(i),t,n,r)}},{deleteProperty:function(t,n){return delete t[n],delete e[n],!0},get:function(e,t,n){return n9(e,t,function(){var r,i,a,o,s,l,u,c;return r=e,i=t,a=n,o=r._proxy,s=r._context,l=r._subProxy,u=r._descriptors,tK(c=o[i])&&u.isScriptable(i)&&(c=function(e,t,n,r){var i=n._proxy,a=n._context,o=n._subProxy,s=n._stack;if(s.has(e))throw Error("Recursion detected: "+Array.from(s).join("->")+"->"+e);s.add(e);var l=t(a,o||r);return s.delete(e),n7(e,l)&&(l=re(i._scopes,i,e,l)),l}(i,c,r,a)),tR(c)&&c.length&&(c=function(e,t,n,r){var i=n._proxy,a=n._context,o=n._subProxy,s=n._descriptors;if(void 0!==a.index&&r(e))return t[a.index%t.length];if(tI(t[0])){var l=t,u=i._scopes.filter(function(e){return e!==l});t=[];var c=!0,d=!1,f=void 0;try{for(var p,h=l[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var m=p.value,g=re(u,i,e,m);t.push(n8(g,a,o&&o[e],s))}}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}}return t}(i,c,r,u.isIndexable)),n7(i,c)&&(c=n8(c,s,l&&l[i],u)),c})},getOwnPropertyDescriptor:function(t,n){return t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e)},has:function(t,n){return Reflect.has(e,n)},ownKeys:function(){return Reflect.ownKeys(e)},set:function(t,n,r){return e[n]=r,delete t[n],!0}})}function n6(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0},n=e._scriptable,r=void 0===n?t.scriptable:n,i=e._indexable,a=void 0===i?t.indexable:i,o=e._allKeys;return{allKeys:void 0===o?t.allKeys:o,scriptable:r,indexable:a,isScriptable:tK(r)?r:function(){return r},isIndexable:tK(a)?a:function(){return a}}}var n7=function(e,t){return tI(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object)};function n9(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];var r=n();return e[t]=r,r}function re(e,t,n,r){var i,a=t._rootScopes,o=(i=t._fallback,tK(i)?i(n,r):i),s=(0,e8._)(e).concat((0,e8._)(a)),l=new Set;l.add(r);var u=rt(l,s,n,o||n,r);return null!==u&&(void 0===o||o===n||null!==(u=rt(l,s,o,u,r)))&&n4(Array.from(l),[""],a,o,function(){var e,i,a,o,s;return e=t,i=n,a=r,i in(o=e._getTarget())||(o[i]={}),tR(s=o[i])&&tI(a)?a:s||{}})}function rt(e,t,n,r,i){for(;n;)n=function(e,t,n,r,i){var a=!0,o=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=!0===n?c:"string"==typeof n?tz(c,n):void 0;if(d){e.add(d);var f,p=(f=d._fallback,tK(f)?f(n,i):f);if(void 0!==p&&p!==n&&p!==r)return p}else if(!1===d&&void 0!==r&&n!==r)return null}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return!1}(e,t,n,r,i);return n}function rn(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s){var l=s[e];if(void 0!==l)return l}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}function rr(e){var t=e._keys;return t||(t=e._keys=function(e){var t=new Set,n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=!0,u=!1,c=void 0;try{for(var d,f=Object.keys(s).filter(function(e){return!e.startsWith("_")})[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;t.add(p)}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return Array.from(t)}(e._scopes)),t}function ri(e,t,n,r){var i,a,o,s=e.iScale,l=this._parsing.key,u=void 0===l?"r":l,c=Array(r);for(i=0;i<r;++i)o=t[a=i+n],c[i]={r:s.parse(tz(o,u),a)};return c}var ra=Number.EPSILON||1e-14,ro=function(e,t){return t<e.length&&!e[t].skip&&e[t]},rs=function(e){return"x"===e?"y":"x"};function rl(e,t,n){return Math.max(Math.min(e,n),t)}function ru(){return"undefined"!=typeof window&&"undefined"!=typeof document}function rc(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function rd(e,t,n){var r;return"string"==typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}var rf=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},rp=["top","right","bottom","left"];function rh(e,t,n){var r={};n=n?"-"+n:"";for(var i=0;i<4;i++){var a=rp[i];r[a]=parseFloat(e[t+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function rm(e,t){if("native"in e)return e;var n=t.canvas,r=t.currentDevicePixelRatio,i=rf(n),a="border-box"===i.boxSizing,o=rh(i,"padding"),s=rh(i,"border","width"),l=function(e,t){var n,r,i,a=e.touches,o=a&&a.length?a[0]:e,s=o.offsetX,l=o.offsetY,u=!1;if(n=e.target,(s>0||l>0)&&(!n||!n.shadowRoot))r=s,i=l;else{var c=t.getBoundingClientRect();r=o.clientX-c.left,i=o.clientY-c.top,u=!0}return{x:r,y:i,box:u}}(e,n),u=l.x,c=l.y,d=l.box,f=o.left+(d&&s.left),p=o.top+(d&&s.top),h=t.width,m=t.height;return a&&(h-=o.width+s.width,m-=o.height+s.height),{x:Math.round((u-f)/h*n.width/r),y:Math.round((c-p)/m*n.height/r)}}var rg=function(e){return Math.round(10*e)/10};function rv(e,t,n){var r=t||1,i=Math.floor(e.height*r),a=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);var o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||o.height!==i||o.width!==a)&&(e.currentDevicePixelRatio=r,o.height=i,o.width=a,e.ctx.setTransform(r,0,0,r,0,0),!0)}var rx=function(){var e=!1;try{var t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function ry(e,t){var n=rf(e).getPropertyValue(t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function rb(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function rw(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function r_(e,t,n,r){var i={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},o=rb(e,i,n),s=rb(i,a,n),l=rb(a,t,n),u=rb(o,s,n),c=rb(s,l,n);return rb(u,c,n)}function rk(e,t,n){var r;return e?(r=n,{x:function(e){return t+t+r-e},setWidth:function(e){r=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}}function rS(e,t){var n,r;("ltr"===t||"rtl"===t)&&(r=[(n=e.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function rC(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function rj(e){return"angle"===e?{between:no,compare:ni,normalize:na}:{between:nl,compare:function(e,t){return e-t},normalize:function(e){return e}}}function rT(e){var t=e.start,n=e.end,r=e.count;return{start:t%r,end:n%r,loop:e.loop&&(n-t+1)%r==0,style:e.style}}function rE(e,t,n){if(!n)return[e];for(var r,i,a,o=n.property,s=n.start,l=n.end,u=t.length,c=rj(o),d=c.compare,f=c.between,p=c.normalize,h=function(e,t,n){var r,i=n.property,a=n.start,o=n.end,s=rj(i),l=s.between,u=s.normalize,c=t.length,d=e.start,f=e.end,p=e.loop;if(p){for(d+=c,f+=c,r=0;r<c&&l(u(t[d%c][i]),a,o);++r)d--,f--;d%=c,f%=c}return f<d&&(f+=c),{start:d,end:f,loop:p,style:e.style}}(e,t,n),m=h.start,g=h.end,x=h.loop,y=h.style,b=[],w=!1,_=null,k=m,S=m;k<=g;++k)(i=t[k%u]).skip||(r=p(i[o]))!==a&&(w=f(r,s,l),null===_&&(w||f(s,a,r)&&0!==d(s,a))&&(_=0===d(r,s)?k:S),null!==_&&(!w||0===d(l,r)||f(l,a,r))&&(b.push(rT({start:_,end:k,loop:x,count:u,style:y})),_=null),S=k,a=r);return null!==_&&b.push(rT({start:_,end:g,loop:x,count:u,style:y})),b}function rR(e,t){for(var n=[],r=e.segments,i=0;i<r.length;i++){var a=rE(r[i],e.points,t);a.length&&n.push.apply(n,(0,e8._)(a))}return n}function rI(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){var i=e._chart.getContext(),a=rA(e.options),o=e._datasetIndex,s=e.options.spanGaps,l=n.length,u=[],c=a,d=t[0].start,f=d;function p(e,t,r,i){var a=s?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=a;for(;n[t%l].skip;)t+=a;e%l!=t%l&&(u.push({start:e%l,end:t%l,loop:r,style:i}),c=i,d=t%l)}}var h=!0,m=!1,g=void 0;try{for(var x,y=t[Symbol.iterator]();!(h=(x=y.next()).done);h=!0){var b=x.value,w=n[(d=s?d:b.start)%l],_=void 0;for(f=d+1;f<=b.end;f++){var k=n[f%l];_=rA(r.setContext(n5(i,{type:"segment",p0:w,p1:k,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),function(e,t){if(!t)return!1;var n=[],r=function(e,t){return nC(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}(_,c)&&p(d,f-1,b.loop,c),w=k,c=_}d<f-1&&p(d,f-1,b.loop,c)}}catch(e){m=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw g}}return u}(e,t,n,r):t}function rA(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}var rP=new(function(){function e(){(0,eJ._)(this,e),this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}return(0,e0._)(e,[{key:"_notify",value:function(e,t,n,r){var i=t.listeners[r],a=t.duration;i.forEach(function(r){return r({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)})})}},{key:"_refresh",value:function(){var e=this;this._request||(this._running=!0,this._request=nm.call(window,function(){e._update(),e._request=null,e._running&&e._refresh()}))}},{key:"_update",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),n=0;this._charts.forEach(function(r,i){if(r.running&&r.items.length){for(var a,o=r.items,s=o.length-1,l=!1;s>=0;--s)(a=o[s])._active?(a._total>r.duration&&(r.duration=a._total),a.tick(t),l=!0):(o[s]=o[o.length-1],o.pop());l&&(i.draw(),e._notify(i,r,t,"progress")),o.length||(r.running=!1,e._notify(i,r,t,"complete"),r.initial=!1),n+=o.length}}),this._lastDate=t,0===n&&(this._running=!1)}},{key:"_getAnims",value:function(e){var t=this._charts,n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}},{key:"listen",value:function(e,t,n){this._getAnims(e).listeners[t].push(n)}},{key:"add",value:function(e,t){var n;t&&t.length&&(n=this._getAnims(e).items).push.apply(n,(0,e8._)(t))}},{key:"has",value:function(e){return this._getAnims(e).items.length>0}},{key:"start",value:function(e){var t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(function(e,t){return Math.max(e,t._duration)},0),this._refresh())}},{key:"running",value:function(e){if(!this._running)return!1;var t=this._charts.get(e);return!!t&&!!t.running&&!!t.items.length}},{key:"stop",value:function(e){var t=this._charts.get(e);if(t&&t.items.length){for(var n=t.items,r=n.length-1;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}}},{key:"remove",value:function(e){return this._charts.delete(e)}}]),e}()),rD="transparent",rO={boolean:function(e,t,n){return n>.5?t:e},color:function(e,t,n){var r=nj(e||rD),i=r.valid&&nj(t||rD);return i&&i.valid?i.mix(r,n).hexString():t},number:function(e,t,n){return e+(t-e)*n}},rN=function(){function e(t,n,r,i){(0,eJ._)(this,e);var a=n[r];i=n3([t.to,i,a,t.from]);var o=n3([t.from,a,i]);this._active=!0,this._fn=t.fn||rO[t.type||(void 0===o?"undefined":(0,e6._)(o))],this._easing=nS[t.easing]||nS.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}return(0,e0._)(e,[{key:"active",value:function(){return this._active}},{key:"update",value:function(e,t,n){if(this._active){this._notify(!1);var r=this._target[this._prop],i=n-this._start,a=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=n3([e.to,t,r,e.from]),this._from=n3([e.from,r,t])}}},{key:"cancel",value:function(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}},{key:"tick",value:function(e){var t,n=e-this._start,r=this._duration,i=this._prop,a=this._from,o=this._loop,s=this._to;if(this._active=a!==s&&(o||n<r),!this._active){this._target[i]=s,this._notify(!0);return}if(n<0){this._target[i]=a;return}t=n/r%2,t=o&&t>1?2-t:t,t=this._easing(Math.min(1,Math.max(0,t))),this._target[i]=this._fn(a,s,t)}},{key:"wait",value:function(){var e=this._promises||(this._promises=[]);return new Promise(function(t,n){e.push({res:t,rej:n})})}},{key:"_notify",value:function(e){for(var t=e?"res":"rej",n=this._promises||[],r=0;r<n.length;r++)n[r][t]()}}]),e}(),rM=function(){function e(t,n){(0,eJ._)(this,e),this._chart=t,this._properties=new Map,this.configure(n)}return(0,e0._)(e,[{key:"configure",value:function(e){if(tI(e)){var t=Object.keys(nL.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(function(r){var i=e[r];if(tI(i)){var a={},o=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;a[d]=i[d]}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}(tR(i.properties)&&i.properties||[r]).forEach(function(e){e!==r&&n.has(e)||n.set(e,a)})}})}}},{key:"_animateOptions",value:function(e,t){var n=t.options,r=function(e,t){if(t){var n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}}(e,n);if(!r)return[];var i=this._createAnimations(r,n);return n.$shared&&(function(e,t){for(var n=[],r=Object.keys(t),i=0;i<r.length;i++){var a=e[r[i]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)})(e.options.$animations,n).then(function(){e.options=n},function(){}),i}},{key:"_createAnimations",value:function(e,t){var n=this._properties,r=[],i=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now();for(s=a.length-1;s>=0;--s){var s,l=a[s];if("$"!==l.charAt(0)){if("options"===l){r.push.apply(r,(0,e8._)(this._animateOptions(e,t)));continue}var u=t[l],c=i[l],d=n.get(l);if(c)if(d&&c.active()){c.update(d,u,o);continue}else c.cancel();if(!d||!d.duration){e[l]=u;continue}i[l]=c=new rN(d,e,l,u),r.push(c)}}return r}},{key:"update",value:function(e,t){if(0===this._properties.size)return void Object.assign(e,t);var n=this._createAnimations(e,t);if(n.length)return rP.add(this._chart,n),!0}}]),e}();function rL(e,t){var n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,a=void 0===n.max?t:0;return{start:r?a:i,end:r?i:a}}function rB(e,t){var n,r,i=[],a=e._getSortedDatasetMetas(t);for(n=0,r=a.length;n<r;++n)i.push(a[n].index);return i}function rV(e,t,n){var r,i,a,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=e.keys,u="single"===s.mode;if(null!==t){for(r=0,i=l.length;r<i;++r){if((a=+l[r])===n){if(s.all)continue;break}tA(o=e.values[a])&&(u||0===t||t4(t)===t4(o))&&(t+=o)}return t}}function rF(e,t){var n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function rU(e,t,n,r){var i=!0,a=!1,o=void 0;try{for(var s,l=t.getMatchingVisibleMetas(r).reverse()[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,c=e[u.index];if(n&&c>0||!n&&c<0)return u.index}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return null}function rG(e,t){for(var n,r=e.chart,i=e._cachedMeta,a=r._stacks||(r._stacks={}),o=i.iScale,s=i.vScale,l=i.index,u=o.axis,c=s.axis,d="".concat(o.id,".").concat(s.id,".").concat(i.stack||i.type),f=t.length,p=0;p<f;++p){var h=t[p],m=h[u],g=h[c];(n=(h._stacks||(h._stacks={}))[c]=function(e,t,n){var r=e[t]||(e[t]={});return r[n]||(r[n]={})}(a,d,m))[l]=g,n._top=rU(n,s,!0,i.type),n._bottom=rU(n,s,!1,i.type),(n._visualValues||(n._visualValues={}))[l]=g}}function r$(e,t){var n=e.scales;return Object.keys(n).filter(function(e){return n[e].axis===t}).shift()}function rH(e,t){var n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;var i=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value._stacks;if(!u||void 0===u[r]||void 0===u[r][n])return;delete u[r][n],void 0!==u[r]._visualValues&&void 0!==u[r]._visualValues[n]&&delete u[r]._visualValues[n]}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}}var rz=function(e){return"reset"===e||"none"===e},rW=function(e,t){return t?e:Object.assign({},e)},rq=function(){function e(t,n){(0,eJ._)(this,e),this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=((0,e4._)(this,e)?this.constructor:void 0).datasetElementType,this.dataElementType=((0,e4._)(this,e)?this.constructor:void 0).dataElementType,this.initialize()}return(0,e0._)(e,[{key:"initialize",value:function(){var e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=rF(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}},{key:"updateIndex",value:function(e){this.index!==e&&rH(this._cachedMeta),this.index=e}},{key:"linkScales",value:function(){var e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=function(e,t,n,r){return"x"===e?t:"r"===e?r:n},i=t.xAxisID=tD(n.xAxisID,r$(e,"x")),a=t.yAxisID=tD(n.yAxisID,r$(e,"y")),o=t.rAxisID=tD(n.rAxisID,r$(e,"r")),s=t.indexAxis,l=t.iAxisID=r(s,i,a,o),u=t.vAxisID=r(s,a,i,o);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(u)}},{key:"getDataset",value:function(){return this.chart.data.datasets[this.index]}},{key:"getMeta",value:function(){return this.chart.getDatasetMeta(this.index)}},{key:"getScaleForId",value:function(e){return this.chart.scales[e]}},{key:"_getOtherScale",value:function(e){var t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}},{key:"reset",value:function(){this._update("reset")}},{key:"_destroy",value:function(){var e=this._cachedMeta;this._data&&np(this._data,this),e._stacked&&rH(e)}},{key:"_dataCheck",value:function(){var e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(tI(t))this._data=function(e){var t,n,r,i=Object.keys(e),a=Array(i.length);for(t=0,n=i.length;t<n;++t)r=i[t],a[t]={x:r,y:e[r]};return a}(t);else if(n!==t){if(n){np(n,this);var r=this._cachedMeta;rH(r),r._parsed=[]}t&&Object.isExtensible(t)&&(t._chartjs?t._chartjs.listeners.push(this):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[this]}}),nf.forEach(function(e){var n="_onData"+tW(e),r=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){for(var e=arguments.length,i=Array(e),a=0;a<e;a++)i[a]=arguments[a];var o=r.apply(this,i);return t._chartjs.listeners.forEach(function(e){"function"==typeof e[n]&&e[n].apply(e,(0,e8._)(i))}),o}})}))),this._syncList=[],this._data=t}}},{key:"addElements",value:function(){var e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}},{key:"buildOrUpdateElements",value:function(e){var t=this._cachedMeta,n=this.getDataset(),r=!1;this._dataCheck();var i=t._stacked;t._stacked=rF(t.vScale,t),t.stack!==n.stack&&(r=!0,rH(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&rG(this,t._parsed)}},{key:"configure",value:function(){var e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}},{key:"parse",value:function(e,t){var n,r,i,a=this._cachedMeta,o=this._data,s=a.iScale,l=a._stacked,u=s.axis,c=0===e&&t===o.length||a._sorted,d=e>0&&a._parsed[e-1];if(!1===this._parsing)a._parsed=o,a._sorted=!0,i=o;else{for(n=0,i=tR(o[e])?this.parseArrayData(a,o,e,t):tI(o[e])?this.parseObjectData(a,o,e,t):this.parsePrimitiveData(a,o,e,t);n<t;++n)a._parsed[n+e]=r=i[n],c&&((null===r[u]||d&&r[u]<d[u])&&(c=!1),d=r);a._sorted=c}l&&rG(this,i)}},{key:"parsePrimitiveData",value:function(e,t,n,r){var i,a,o,s=e.iScale,l=e.vScale,u=s.axis,c=l.axis,d=s.getLabels(),f=s===l,p=Array(r);for(i=0;i<r;++i)a=i+n,p[i]=(o={},(0,e1._)(o,u,f||s.parse(d[a],a)),(0,e1._)(o,c,l.parse(t[a],a)),o);return p}},{key:"parseArrayData",value:function(e,t,n,r){var i,a,o,s=e.xScale,l=e.yScale,u=Array(r);for(i=0;i<r;++i)o=t[a=i+n],u[i]={x:s.parse(o[0],a),y:l.parse(o[1],a)};return u}},{key:"parseObjectData",value:function(e,t,n,r){var i,a,o,s=e.xScale,l=e.yScale,u=this._parsing,c=u.xAxisKey,d=void 0===c?"x":c,f=u.yAxisKey,p=void 0===f?"y":f,h=Array(r);for(i=0;i<r;++i)o=t[a=i+n],h[i]={x:s.parse(tz(o,d),a),y:l.parse(tz(o,p),a)};return h}},{key:"getParsed",value:function(e){return this._cachedMeta._parsed[e]}},{key:"getDataElement",value:function(e){return this._cachedMeta.data[e]}},{key:"applyStack",value:function(e,t,n){var r=this.chart,i=this._cachedMeta,a=t[e.axis];return rV({keys:rB(r,!0),values:t._stacks[e.axis]._visualValues},a,i.index,{mode:n})}},{key:"updateRangeFromParsed",value:function(e,t,n,r){var i=n[t.axis],a=null===i?NaN:i,o=r&&n._stacks[t.axis];r&&o&&(r.values=o,a=rV(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}},{key:"getMinMax",value:function(e,t){var n,r,i,a,o,s,l=this._cachedMeta,u=l._parsed,c=l._sorted&&e===l.iScale,d=u.length,f=this._getOtherScale(e),p=(n=this.chart,t&&!l.hidden&&l._stacked&&{keys:rB(n,!0),values:null}),h={min:1/0,max:-1/0},m=(i=(r=f.getUserBounds()).min,a=r.max,{min:r.minDefined?i:-1/0,max:r.maxDefined?a:1/0}),g=m.min,x=m.max;function y(){var t=(s=u[o])[f.axis];return!tA(s[e.axis])||g>t||x<t}for(o=0;o<d&&(y()||(this.updateRangeFromParsed(h,e,s,p),!c));++o);if(c){for(o=d-1;o>=0;--o)if(!y()){this.updateRangeFromParsed(h,e,s,p);break}}return h}},{key:"getAllParsedValues",value:function(e){var t,n,r,i=this._cachedMeta._parsed,a=[];for(t=0,n=i.length;t<n;++t)tA(r=i[t][e.axis])&&a.push(r);return a}},{key:"getMaxOverflow",value:function(){return!1}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}},{key:"_update",value:function(e){var t,n,r,i,a,o=this._cachedMeta;this.update(e||"default"),tI(t=tD(this.options.clip,function(e,t,n){if(!1===n)return!1;var r=rL(e,n),i=rL(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(o.xScale,o.yScale,this.getMaxOverflow())))?(n=t.top,r=t.right,i=t.bottom,a=t.left):n=r=i=a=t,o._clip={top:n,right:r,bottom:i,left:a,disabled:!1===t}}},{key:"update",value:function(e){}},{key:"draw",value:function(){var e,t=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],a=n.chartArea,o=[],s=this._drawStart||0,l=this._drawCount||i.length-s,u=this.options.drawActiveElementsOnTop;for(r.dataset&&r.dataset.draw(t,a,s,l),e=s;e<s+l;++e){var c=i[e];c.hidden||(c.active&&u?o.push(c):c.draw(t,a))}for(e=0;e<o.length;++e)o[e].draw(t,a)}},{key:"getStyle",value:function(e,t){var n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}},{key:"getContext",value:function(e,t,n){var r,i,a=this.getDataset();if(e>=0&&e<this._cachedMeta.data.length){var o=this._cachedMeta.data[e];(i=o.$context||(o.$context=n5(this.getContext(),{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:o,index:e,mode:"default",type:"data"}))).parsed=this.getParsed(e),i.raw=a.data[e],i.index=i.dataIndex=e}else(i=this.$context||(this.$context=n5(this.chart.getContext(),{active:!1,dataset:void 0,datasetIndex:r=this.index,index:r,mode:"default",type:"dataset"}))).dataset=a,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}},{key:"resolveDatasetElementOptions",value:function(e){return this._resolveElementOptions(this.datasetElementType.id,e)}},{key:"resolveDataElementOptions",value:function(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}},{key:"_resolveElementOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0,i="active"===n,a=this._cachedDataOpts,o=e+"-"+n,s=a[o],l=this.enableOptionSharing&&tq(r);if(s)return rW(s,l);var u=this.chart.config,c=u.datasetElementScopeKeys(this._type,e),d=u.getOptionScopes(this.getDataset(),c),f=Object.keys(nL.elements[e]),p=u.resolveNamedOptions(d,f,function(){return t.getContext(r,i,n)},i?["".concat(e,"Hover"),"hover",e,""]:[e,""]);return p.$shared&&(p.$shared=l,a[o]=Object.freeze(rW(p,l))),p}},{key:"_resolveAnimations",value:function(e,t,n){var r,i=this.chart,a=this._cachedDataOpts,o="animation-".concat(t),s=a[o];if(s)return s;if(!1!==i.options.animation){var l=this.chart.config,u=l.datasetAnimationScopeKeys(this._type,t),c=l.getOptionScopes(this.getDataset(),u);r=l.createResolver(c,this.getContext(e,n,t))}var d=new rM(i,r&&r.animations);return r&&r._cacheable&&(a[o]=Object.freeze(d)),d}},{key:"getSharedOptions",value:function(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}},{key:"includeOptions",value:function(e,t){return!t||rz(e)||this.chart._animationsDisabled}},{key:"_getSharedOptions",value:function(e,t){var n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),a=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:a}}},{key:"updateElement",value:function(e,t,n,r){rz(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}},{key:"updateSharedOptions",value:function(e,t,n){e&&!rz(t)&&this._resolveAnimations(void 0,t).update(e,n)}},{key:"_setStyle",value:function(e,t,n,r){e.active=r;var i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}},{key:"removeHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!1)}},{key:"setHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!0)}},{key:"_removeDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}},{key:"_setDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}},{key:"_resyncElements",value:function(e){var t=this._data,n=this._cachedMeta.data,r=!0,i=!1,a=void 0;try{for(var o,l=this._syncList[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=(0,s._)(o.value,3),c=u[0],d=u[1],f=u[2];this[c](d,f)}}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}this._syncList=[];var p=n.length,h=t.length,m=Math.min(h,p);m&&this.parse(0,m),h>p?this._insertElements(p,h-p,e):h<p&&this._removeElements(h,p-h)}},{key:"_insertElements",value:function(e,t){var n,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=this._cachedMeta,a=i.data,o=e+t,s=function(e){for(e.length+=t,n=e.length-1;n>=o;n--)e[n]=e[n-t]};for(s(a),n=e;n<o;++n)a[n]=new this.dataElementType;this._parsing&&s(i._parsed),this.parse(e,t),r&&this.updateElements(a,e,t,"reset")}},{key:"updateElements",value:function(e,t,n,r){}},{key:"_removeElements",value:function(e,t){var n=this._cachedMeta;if(this._parsing){var r=n._parsed.splice(e,t);n._stacked&&rH(n,r)}n.data.splice(e,t)}},{key:"_sync",value:function(e){if(this._parsing)this._syncList.push(e);else{var t=(0,s._)(e,3),n=t[0],r=t[1],i=t[2];this[n](r,i)}this.chart._dataChanges.push([this.index].concat((0,e8._)(e)))}},{key:"_onDataPush",value:function(){var e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}},{key:"_onDataPop",value:function(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}},{key:"_onDataShift",value:function(){this._sync(["_removeElements",0,1])}},{key:"_onDataSplice",value:function(e,t){t&&this._sync(["_removeElements",e,t]);var n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}},{key:"_onDataUnshift",value:function(){this._sync(["_insertElements",0,arguments.length])}}]),e}();function rK(e,t,n,r){if(tR(e)){var i,a,o,s,l,u;o=Math.min(i=n.parse(e[0],r),a=n.parse(e[1],r)),s=Math.max(i,a),l=o,u=s,Math.abs(o)>Math.abs(s)&&(l=s,u=o),t[n.axis]=u,t._custom={barStart:l,barEnd:u,start:i,end:a,min:o,max:s}}else t[n.axis]=n.parse(e,r);return t}function rY(e,t,n,r){var i,a,o,s,l=e.iScale,u=e.vScale,c=l.getLabels(),d=l===u,f=[];for(i=n,a=n+r;i<a;++i)s=t[i],(o={})[l.axis]=d||l.parse(c[i],i),f.push(rK(s,o,u,i));return f}function rQ(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function rX(e,t,n,r){var i,a,o;return r?rZ((i=e,a=t,o=n,e=i===a?o:i===o?a:i),n,t):rZ(e,t,n)}function rZ(e,t,n){return"start"===e?t:"end"===e?n:e}(0,e1._)(rq,"defaults",{}),(0,e1._)(rq,"datasetElementType",null),(0,e1._)(rq,"dataElementType",null);var rJ=function(e){function t(){return(0,eJ._)(this,t),(0,eZ._)(this,t,arguments)}return(0,e5._)(t,e),(0,e0._)(t,[{key:"parsePrimitiveData",value:function(e,t,n,r){return rY(e,t,n,r)}},{key:"parseArrayData",value:function(e,t,n,r){return rY(e,t,n,r)}},{key:"parseObjectData",value:function(e,t,n,r){var i,a,o,s,l=e.iScale,u=e.vScale,c=this._parsing,d=c.xAxisKey,f=void 0===d?"x":d,p=c.yAxisKey,h=void 0===p?"y":p,m="x"===l.axis?f:h,g="x"===u.axis?f:h,x=[];for(i=n,a=n+r;i<a;++i)s=t[i],(o={})[l.axis]=l.parse(tz(s,m),i),x.push(rK(tz(s,g),o,u,i));return x}},{key:"updateRangeFromParsed",value:function(e,n,r,i){(0,e2._)((0,e3._)(t.prototype),"updateRangeFromParsed",this).call(this,e,n,r,i);var a=r._custom;a&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}},{key:"getMaxOverflow",value:function(){return 0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e),a=i._custom,o=rQ(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:o}}},{key:"initialize",value:function(){this.enableOptionSharing=!0,(0,e2._)((0,e3._)(t.prototype),"initialize",this).call(this),this._cachedMeta.stack=this.getDataset().stack}},{key:"update",value:function(e){var t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var i="reset"===r,a=this.index,o=this._cachedMeta.vScale,s=o.getBasePixel(),l=o.isHorizontal(),u=this._getRuler(),c=this._getSharedOptions(t,r),d=c.sharedOptions,f=c.includeOptions,p=t;p<t+n;p++){var h=this.getParsed(p),m=i||tE(h[o.axis])?{base:s,head:s}:this._calculateBarValuePixels(p),g=this._calculateBarIndexPixels(p,u),x=(h._stacks||{})[o.axis],y={horizontal:l,base:m.base,enableBorderRadius:!x||rQ(h._custom)||a===x._top||a===x._bottom,x:l?m.head:g.center,y:l?g.center:m.head,height:l?g.size:Math.abs(m.size),width:l?Math.abs(m.size):g.size};f&&(y.options=d||this.resolveDataElementOptions(p,e[p].active?"active":r));var b=y.options||e[p].options;!function(e,t,n,r){var i,a,o,s,l,u=t.borderSkipped,c={};if(!u){e.borderSkipped=c;return}if(!0===u){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}var d=(e.horizontal?(i=e.base>e.x,a="left",o="right"):(i=e.base<e.y,a="bottom",o="top"),i?(s="end",l="start"):(s="start",l="end"),{start:a,end:o,reverse:i,top:s,bottom:l}),f=d.start,p=d.end,h=d.reverse,m=d.top,g=d.bottom;"middle"===u&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?u=m:(n._bottom||0)===r?u=g:(c[rX(g,f,p,h)]=!0,u=m)),c[rX(u,f,p,h)]=!0,e.borderSkipped=c}(y,b,x,a),function(e,t,n){var r=t.inflateAmount;e.inflateAmount="auto"===r?.33*(1===n):r}(y,b,u.ratio),this.updateElement(e[p],p,y,r)}}},{key:"_getStacks",value:function(e,t){var n=this._cachedMeta.iScale,r=n.getMatchingVisibleMetas(this._type).filter(function(e){return e.controller.options.grouped}),i=n.options.stacked,a=[],o=!0,s=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;if(!(void 0!==t&&function(e){var n=e.controller.getParsed(t),r=n&&n[e.vScale.axis];if(tE(r)||isNaN(r))return!0}(d))&&((!1===i||-1===a.indexOf(d.stack)||void 0===i&&void 0===d.stack)&&a.push(d.stack),d.index===e))break}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}return a.length||a.push(void 0),a}},{key:"_getStackCount",value:function(e){return this._getStacks(void 0,e).length}},{key:"_getStackIndex",value:function(e,t,n){var r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return -1===i?r.length-1:i}},{key:"_getRuler",value:function(){var e,t,n=this.options,r=this._cachedMeta,i=r.iScale,a=[];for(e=0,t=r.data.length;e<t;++e)a.push(i.getPixelForValue(this.getParsed(e)[i.axis],e));var o=n.barThickness;return{min:o||function(e){var t,n,r,i,a=e.iScale,o=function(e,t){if(!e._cache.$bar){for(var n=e.getMatchingVisibleMetas(t),r=[],i=0,a=n.length;i<a;i++)r=r.concat(n[i].controller.getAllParsedValues(e));e._cache.$bar=nh(r.sort(function(e,t){return e-t}))}return e._cache.$bar}(a,e.type),s=a._length,l=function(){32767!==r&&-32768!==r&&(tq(i)&&(s=Math.min(s,Math.abs(r-i)||s)),i=r)};for(t=0,n=o.length;t<n;++t)r=a.getPixelForValue(o[t]),l();for(t=0,i=void 0,n=a.ticks.length;t<n;++t)r=a.getPixelForTick(t),l();return s}(r),pixels:a,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:n.grouped,ratio:o?1:n.categoryPercentage*n.barPercentage}}},{key:"_calculateBarValuePixels",value:function(e){var t,n,r=this._cachedMeta,i=r.vScale,a=r._stacked,o=r.index,s=this.options,l=s.base,u=s.minBarLength,c=l||0,d=this.getParsed(e),f=d._custom,p=rQ(f),h=d[i.axis],m=0,g=a?this.applyStack(i,d,a):h;g!==h&&(m=g-h,g=h),p&&(h=f.barStart,g=f.barEnd-f.barStart,0!==h&&t4(h)!==t4(f.barEnd)&&(m=0),m+=h);var x=tE(l)||p?m:l,y=i.getPixelForValue(x);if(Math.abs(n=(t=this.chart.getDataVisibility(e)?i.getPixelForValue(m+g):y)-y)<u){n=(0!==(b=n)?t4(b):(i.isHorizontal()?1:-1)*(i.min>=c?1:-1))*u,h===c&&(y-=n/2);var b,w=i.getPixelForDecimal(0),_=i.getPixelForDecimal(1),k=Math.min(w,_);t=(y=Math.max(Math.min(y,Math.max(w,_)),k))+n,a&&!p&&(d._stacks[i.axis]._visualValues[o]=i.getValueForPixel(t)-i.getValueForPixel(y))}if(y===i.getPixelForValue(c)){var S=t4(n)*i.getLineWidthForValue(c)/2;y+=S,n-=S}return{size:n,base:y,head:t,center:t+n/2}}},{key:"_calculateBarIndexPixels",value:function(e,t){var n,r,i=t.scale,a=this.options,o=a.skipNull,s=tD(a.maxBarThickness,1/0);if(t.grouped){var l,u,c,d,f,p,h,m,g,x=o?this._getStackCount(e):t.stackCount,y="flex"===a.barThickness?(u=(l=t.pixels)[e],c=e>0?l[e-1]:null,d=e<l.length-1?l[e+1]:null,f=a.categoryPercentage,null===c&&(c=u-(null===d?t.end-t.start:d-u)),null===d&&(d=u+u-c),p=u-(u-Math.min(c,d))/2*f,{chunk:Math.abs(d-c)/2*f/x,ratio:a.barPercentage,start:p}):(tE(g=a.barThickness)?(h=t.min*a.categoryPercentage,m=a.barPercentage):(h=g*x,m=1),{chunk:h/x,ratio:m,start:t.pixels[e]-h/2}),b=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);n=y.start+y.chunk*b+y.chunk/2,r=Math.min(s,y.chunk*y.ratio)}else n=i.getPixelForValue(this.getParsed(e)[i.axis],e),r=Math.min(s,t.min*t.ratio);return{base:n-r/2,head:n+r/2,center:n,size:r}}},{key:"draw",value:function(){for(var e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length,i=0;i<r;++i)null!==this.getParsed(i)[t.axis]&&n[i].draw(this._ctx)}}]),t}(rq);(0,e1._)(rJ,"id","bar"),(0,e1._)(rJ,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,e1._)(rJ,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});var r0=function(e){function t(){return(0,eJ._)(this,t),(0,eZ._)(this,t,arguments)}return(0,e5._)(t,e),(0,e0._)(t,[{key:"initialize",value:function(){this.enableOptionSharing=!0,(0,e2._)((0,e3._)(t.prototype),"initialize",this).call(this)}},{key:"parsePrimitiveData",value:function(e,n,r,i){for(var a=(0,e2._)((0,e3._)(t.prototype),"parsePrimitiveData",this).call(this,e,n,r,i),o=0;o<a.length;o++)a[o]._custom=this.resolveDataElementOptions(o+r).radius;return a}},{key:"parseArrayData",value:function(e,n,r,i){for(var a=(0,e2._)((0,e3._)(t.prototype),"parseArrayData",this).call(this,e,n,r,i),o=0;o<a.length;o++){var s=n[r+o];a[o]._custom=tD(s[2],this.resolveDataElementOptions(o+r).radius)}return a}},{key:"parseObjectData",value:function(e,n,r,i){for(var a=(0,e2._)((0,e3._)(t.prototype),"parseObjectData",this).call(this,e,n,r,i),o=0;o<a.length;o++){var s=n[r+o];a[o]._custom=tD(s&&s.r&&+s.r,this.resolveDataElementOptions(o+r).radius)}return a}},{key:"getMaxOverflow",value:function(){for(var e=this._cachedMeta.data,t=0,n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart.data.labels||[],r=t.xScale,i=t.yScale,a=this.getParsed(e),o=r.getLabelForValue(a.x),s=i.getLabelForValue(a.y),l=a._custom;return{label:n[e]||"",value:"("+o+", "+s+(l?", "+l:"")+")"}}},{key:"update",value:function(e){var t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var i="reset"===r,a=this._cachedMeta,o=a.iScale,s=a.vScale,l=this._getSharedOptions(t,r),u=l.sharedOptions,c=l.includeOptions,d=o.axis,f=s.axis,p=t;p<t+n;p++){var h=e[p],m=!i&&this.getParsed(p),g={},x=g[d]=i?o.getPixelForDecimal(.5):o.getPixelForValue(m[d]),y=g[f]=i?s.getBasePixel():s.getPixelForValue(m[f]);g.skip=isNaN(x)||isNaN(y),c&&(g.options=u||this.resolveDataElementOptions(p,h.active?"active":r),i&&(g.options.radius=0)),this.updateElement(h,p,g,r)}}},{key:"resolveDataElementOptions",value:function(e,n){var r=this.getParsed(e),i=(0,e2._)((0,e3._)(t.prototype),"resolveDataElementOptions",this).call(this,e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));var a=i.radius;return"active"!==n&&(i.radius=0),i.radius+=tD(r&&r._custom,a),i}}]),t}(rq);(0,e1._)(r0,"id","bubble"),(0,e1._)(r0,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,e1._)(r0,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});var r1=function(e){function t(e,n){var r;return(0,eJ._)(this,t),(r=(0,eZ._)(this,t,[e,n])).enableOptionSharing=!0,r.innerRadius=void 0,r.outerRadius=void 0,r.offsetX=void 0,r.offsetY=void 0,r}return(0,e5._)(t,e),(0,e0._)(t,[{key:"linkScales",value:function(){}},{key:"parse",value:function(e,t){var n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{var i,a,o=function(e){return+n[e]};if(tI(n[e])){var s=this._parsing.key,l=void 0===s?"value":s;o=function(e){return+tz(n[e],l)}}for(i=e,a=e+t;i<a;++i)r._parsed[i]=o(i)}}},{key:"_getRotation",value:function(){return ne(this.options.rotation-90)}},{key:"_getCircumference",value:function(){return ne(this.options.circumference)}},{key:"_getRotationExtents",value:function(){for(var e=tX,t=-tX,n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){var r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),a=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+a)}return{rotation:e,circumference:t-e}}},{key:"update",value:function(e){var t,n=this.chart.chartArea,r=this._cachedMeta,i=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-a)/2,0),s=Math.min((t=this.options.cutout,"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:t/o),1),l=this._getRingWeight(this.index),u=this._getRotationExtents(),c=u.circumference,d=function(e,t,n){var r=1,i=1,a=0,o=0;if(t<tX){var s=e+t,l=Math.cos(e),u=Math.sin(e),c=Math.cos(s),d=Math.sin(s),f=function(t,r,i){return no(t,e,s,!0)?1:Math.max(r,r*n,i,i*n)},p=function(t,r,i){return no(t,e,s,!0)?-1:Math.min(r,r*n,i,i*n)},h=f(0,l,c),m=f(t1,u,d),g=p(tQ,l,c),x=p(tQ+t1,u,d);r=(h-g)/2,i=(m-x)/2,a=-(h+g)/2,o=-(m+x)/2}return{ratioX:r,ratioY:i,offsetX:a,offsetY:o}}(u.rotation,c,s),f=d.ratioX,p=d.ratioY,h=d.offsetX,m=d.offsetY,g=Math.max(Math.min((n.width-a)/f,(n.height-a)/p)/2,0),x=tO(this.options.radius,g),y=Math.max(x*s,0),b=(x-y)/this._getVisibleDatasetWeightTotal();this.offsetX=h*x,this.offsetY=m*x,r.total=this.calculateTotal(),this.outerRadius=x-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*l,0),this.updateElements(i,0,i.length,e)}},{key:"_circumference",value:function(e,t){var n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/tX)}},{key:"updateElements",value:function(e,t,n,r){var i,a="reset"===r,o=this.chart,s=o.chartArea,l=o.options.animation,u=(s.left+s.right)/2,c=(s.top+s.bottom)/2,d=a&&l.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,h=this._getSharedOptions(t,r),m=h.sharedOptions,g=h.includeOptions,x=this._getRotation();for(i=0;i<t;++i)x+=this._circumference(i,a);for(i=t;i<t+n;++i){var y=this._circumference(i,a),b=e[i],w={x:u+this.offsetX,y:c+this.offsetY,startAngle:x,endAngle:x+y,circumference:y,outerRadius:p,innerRadius:f};g&&(w.options=m||this.resolveDataElementOptions(i,b.active?"active":r)),x+=y,this.updateElement(b,i,w,r)}}},{key:"calculateTotal",value:function(){var e,t=this._cachedMeta,n=t.data,r=0;for(e=0;e<n.length;e++){var i=t._parsed[e];null!==i&&!isNaN(i)&&this.chart.getDataVisibility(e)&&!n[e].hidden&&(r+=Math.abs(i))}return r}},{key:"calculateCircumference",value:function(e){var t=this._cachedMeta.total;return t>0&&!isNaN(e)?Math.abs(e)/t*tX:0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=nA(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}},{key:"getMaxBorderWidth",value:function(e){var t,n,r,i,a,o=0,s=this.chart;if(!e){for(t=0,n=s.data.datasets.length;t<n;++t)if(s.isDatasetVisible(t)){e=(r=s.getDatasetMeta(t)).data,i=r.controller;break}}if(!e)return 0;for(t=0,n=e.length;t<n;++t)"inner"!==(a=i.resolveDataElementOptions(t)).borderAlign&&(o=Math.max(o,a.borderWidth||0,a.hoverBorderWidth||0));return o}},{key:"getMaxOffset",value:function(e){for(var t=0,n=0,r=e.length;n<r;++n){var i=this.resolveDataElementOptions(n);t=Math.max(t,i.offset||0,i.hoverOffset||0)}return t}},{key:"_getRingWeightOffset",value:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}},{key:"_getRingWeight",value:function(e){return Math.max(tD(this.chart.data.datasets[e].weight,1),0)}},{key:"_getVisibleDatasetWeightTotal",value:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}]),t}(rq);(0,e1._)(r1,"id","doughnut"),(0,e1._)(r1,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,e1._)(r1,"descriptors",{_scriptable:function(e){return"spacing"!==e},_indexable:function(e){return"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}}),(0,e1._)(r1,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels,r=n.pointStyle,i=n.color;return t.labels.map(function(t,n){var a=e.getDatasetMeta(0).controller.getStyle(n);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(n),index:n}})}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});var r2=function(e){function t(){return(0,eJ._)(this,t),(0,eZ._)(this,t,arguments)}return(0,e5._)(t,e),(0,e0._)(t,[{key:"initialize",value:function(){this.enableOptionSharing=!0,this.supportsDecimation=!0,(0,e2._)((0,e3._)(t.prototype),"initialize",this).call(this)}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,r=t.data,i=void 0===r?[]:r,a=t._dataset,o=this.chart._animationsDisabled,s=ny(t,i,o),l=s.start,u=s.count;this._drawStart=l,this._drawCount=u,nb(t)&&(l=0,u=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!a._decimated,n.points=i;var c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:c},e),this.updateElements(i,l,u,e)}},{key:"updateElements",value:function(e,t,n,r){for(var i="reset"===r,a=this._cachedMeta,o=a.iScale,s=a.vScale,l=a._stacked,u=a._dataset,c=this._getSharedOptions(t,r),d=c.sharedOptions,f=c.includeOptions,p=o.axis,h=s.axis,m=this.options,g=m.spanGaps,x=m.segment,y=t7(g)?g:1/0,b=this.chart._animationsDisabled||i||"none"===r,w=t+n,_=e.length,k=t>0&&this.getParsed(t-1),S=0;S<_;++S){var C=e[S],j=b?C:{};if(S<t||S>=w){j.skip=!0;continue}var T=this.getParsed(S),E=tE(T[h]),R=j[p]=o.getPixelForValue(T[p],S),I=j[h]=i||E?s.getBasePixel():s.getPixelForValue(l?this.applyStack(s,T,l):T[h],S);j.skip=isNaN(R)||isNaN(I)||E,j.stop=S>0&&Math.abs(T[p]-k[p])>y,x&&(j.parsed=T,j.raw=u.data[S]),f&&(j.options=d||this.resolveDataElementOptions(S,C.active?"active":r)),b||this.updateElement(C,S,j,r),k=T}}},{key:"getMaxOverflow",value:function(){var e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];return r.length?Math.max(n,r[0].size(this.resolveDataElementOptions(0)),r[r.length-1].size(this.resolveDataElementOptions(r.length-1)))/2:n}},{key:"draw",value:function(){var e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),(0,e2._)((0,e3._)(t.prototype),"draw",this).call(this)}}]),t}(rq);(0,e1._)(r2,"id","line"),(0,e1._)(r2,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,e1._)(r2,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});var r3=function(e){function t(e,n){var r;return(0,eJ._)(this,t),(r=(0,eZ._)(this,t,[e,n])).innerRadius=void 0,r.outerRadius=void 0,r}return(0,e5._)(t,e),(0,e0._)(t,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=nA(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}},{key:"parseObjectData",value:function(e,t,n,r){return ri.bind(this)(e,t,n,r)}},{key:"update",value:function(e){var t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}},{key:"getMinMax",value:function(){var e=this,t=this._cachedMeta,n={min:1/0,max:-1/0};return t.data.forEach(function(t,r){var i=e.getParsed(r).r;!isNaN(i)&&e.chart.getDataVisibility(r)&&(i<n.min&&(n.min=i),i>n.max&&(n.max=i))}),n}},{key:"_updateRadius",value:function(){var e=this.chart,t=e.chartArea,n=e.options,r=Math.max(Math.min(t.right-t.left,t.bottom-t.top)/2,0),i=Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0),a=(r-i)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}},{key:"updateElements",value:function(e,t,n,r){var i,a="reset"===r,o=this.chart,s=o.options.animation,l=this._cachedMeta.rScale,u=l.xCenter,c=l.yCenter,d=l.getIndexAngle(0)-.5*tQ,f=d,p=360/this.countVisibleElements();for(i=0;i<t;++i)f+=this._computeAngle(i,r,p);for(i=t;i<t+n;i++){var h=e[i],m=f,g=f+this._computeAngle(i,r,p),x=o.getDataVisibility(i)?l.getDistanceFromCenterForValue(this.getParsed(i).r):0;f=g,a&&(s.animateScale&&(x=0),s.animateRotate&&(m=g=d));var y={x:u,y:c,innerRadius:0,outerRadius:x,startAngle:m,endAngle:g,options:this.resolveDataElementOptions(i,h.active?"active":r)};this.updateElement(h,i,y,r)}}},{key:"countVisibleElements",value:function(){var e=this,t=this._cachedMeta,n=0;return t.data.forEach(function(t,r){!isNaN(e.getParsed(r).r)&&e.chart.getDataVisibility(r)&&n++}),n}},{key:"_computeAngle",value:function(e,t,n){return this.chart.getDataVisibility(e)?ne(this.resolveDataElementOptions(e,t).angle||n):0}}]),t}(rq);(0,e1._)(r3,"id","polarArea"),(0,e1._)(r3,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,e1._)(r3,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels,r=n.pointStyle,i=n.color;return t.labels.map(function(t,n){var a=e.getDatasetMeta(0).controller.getStyle(n);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(n),index:n}})}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});var r5=function(e){function t(){return(0,eJ._)(this,t),(0,eZ._)(this,t,arguments)}return(0,e5._)(t,e),t}(r1);(0,e1._)(r5,"id","pie"),(0,e1._)(r5,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});var r4=function(e){function t(){return(0,eJ._)(this,t),(0,eZ._)(this,t,arguments)}return(0,e5._)(t,e),(0,e0._)(t,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}},{key:"parseObjectData",value:function(e,t,n,r){return ri.bind(this)(e,t,n,r)}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){var a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);var o={_loop:!0,_fullLoop:i.length===r.length,options:a};this.updateElement(n,void 0,o,e)}this.updateElements(r,0,r.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var i=this._cachedMeta.rScale,a="reset"===r,o=t;o<t+n;o++){var s=e[o],l=this.resolveDataElementOptions(o,s.active?"active":r),u=i.getPointPositionForValue(o,this.getParsed(o).r),c=a?i.xCenter:u.x,d=a?i.yCenter:u.y,f={x:c,y:d,angle:u.angle,skip:isNaN(c)||isNaN(d),options:l};this.updateElement(s,o,f,r)}}}]),t}(rq);(0,e1._)(r4,"id","radar"),(0,e1._)(r4,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,e1._)(r4,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});var r8=function(e){function t(){return(0,eJ._)(this,t),(0,eZ._)(this,t,arguments)}return(0,e5._)(t,e),(0,e0._)(t,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart.data.labels||[],r=t.xScale,i=t.yScale,a=this.getParsed(e),o=r.getLabelForValue(a.x),s=i.getLabelForValue(a.y);return{label:n[e]||"",value:"("+o+", "+s+")"}}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.data,r=void 0===n?[]:n,i=this.chart._animationsDisabled,a=ny(t,r,i),o=a.start,s=a.count;if(this._drawStart=o,this._drawCount=s,nb(t)&&(o=0,s=r.length),this.options.showLine){this.datasetElementType||this.addElements();var l=t.dataset,u=t._dataset;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!u._decimated,l.points=r;var c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(l,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,o,s,e)}},{key:"addElements",value:function(){var e=this.options.showLine;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),(0,e2._)((0,e3._)(t.prototype),"addElements",this).call(this)}},{key:"updateElements",value:function(e,t,n,r){for(var i="reset"===r,a=this._cachedMeta,o=a.iScale,s=a.vScale,l=a._stacked,u=a._dataset,c=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(c),f=this.includeOptions(r,d),p=o.axis,h=s.axis,m=this.options,g=m.spanGaps,x=m.segment,y=t7(g)?g:1/0,b=this.chart._animationsDisabled||i||"none"===r,w=t>0&&this.getParsed(t-1),_=t;_<t+n;++_){var k=e[_],S=this.getParsed(_),C=b?k:{},j=tE(S[h]),T=C[p]=o.getPixelForValue(S[p],_),E=C[h]=i||j?s.getBasePixel():s.getPixelForValue(l?this.applyStack(s,S,l):S[h],_);C.skip=isNaN(T)||isNaN(E)||j,C.stop=_>0&&Math.abs(S[p]-w[p])>y,x&&(C.parsed=S,C.raw=u.data[_]),f&&(C.options=d||this.resolveDataElementOptions(_,k.active?"active":r)),b||this.updateElement(k,_,C,r),w=S}this.updateSharedOptions(d,r,c)}},{key:"getMaxOverflow",value:function(){var e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){for(var n=0,r=t.length-1;r>=0;--r)n=Math.max(n,t[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}var i=e.dataset,a=i.options&&i.options.borderWidth||0;return t.length?Math.max(a,t[0].size(this.resolveDataElementOptions(0)),t[t.length-1].size(this.resolveDataElementOptions(t.length-1)))/2:a}}]),t}(rq);function r6(){throw Error("This method is not implemented: Check that a complete date adapter is provided.")}(0,e1._)(r8,"id","scatter"),(0,e1._)(r8,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,e1._)(r8,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var r7={_date:function(){function e(t){(0,eJ._)(this,e),(0,e1._)(this,"options",void 0),this.options=t||{}}return(0,e0._)(e,[{key:"init",value:function(){}},{key:"formats",value:function(){return r6()}},{key:"parse",value:function(){return r6()}},{key:"format",value:function(){return r6()}},{key:"add",value:function(){return r6()}},{key:"diff",value:function(){return r6()}},{key:"startOf",value:function(){return r6()}},{key:"endOf",value:function(){return r6()}}],[{key:"override",value:function(t){Object.assign(e.prototype,t)}}]),e}()};function r9(e,t,n,r,i){for(var a=e.getSortedVisibleDatasetMetas(),o=n[t],s=0,l=a.length;s<l;++s)for(var u=a[s],c=u.index,d=u.data,f=function(e,t,n,r){var i=e.controller,a=e.data,o=e._sorted,s=i._cachedMeta.iScale;if(s&&t===s.axis&&"r"!==t&&o&&a.length){var l=s._reversePixels?nd:nc;if(!r)return l(a,t,n);if(i._sharedOptions){var u=a[0],c="function"==typeof u.getRange&&u.getRange(t);if(c){var d=l(a,t,n-c),f=l(a,t,n+c);return{lo:d.lo,hi:f.hi}}}}return{lo:0,hi:a.length-1}}(a[s],t,o,i),p=f.lo,h=f.hi,m=p;m<=h;++m){var g=d[m];g.skip||r(g,c,m)}}function ie(e,t,n,r,i){var a=[];return(i||e.isPointInArea(t))&&r9(e,n,t,function(n,o,s){(i||n$(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&a.push({element:n,datasetIndex:o,index:s})},!0),a}function it(e,t,n,r,i,a){var o,s,l,u,c,d;return a||e.isPointInArea(t)?"r"!==n||r?(o=[],s=-1!==n.indexOf("x"),l=-1!==n.indexOf("y"),u=function(e,t){return Math.sqrt(Math.pow(s?Math.abs(e.x-t.x):0,2)+Math.pow(l?Math.abs(e.y-t.y):0,2))},c=1/0,r9(e,n,t,function(n,s,l){var d=n.inRange(t.x,t.y,i);if(!r||d){var f=n.getCenterPoint(i);if(a||e.isPointInArea(f)||d){var p=u(t,f);p<c?(o=[{element:n,datasetIndex:s,index:l}],c=p):p===c&&o.push({element:n,datasetIndex:s,index:l})}}}),o):(d=[],r9(e,n,t,function(e,n,r){var a=e.getProps(["startAngle","endAngle"],i),o=a.startAngle,s=a.endAngle;no(nn(e,{x:t.x,y:t.y}).angle,o,s)&&d.push({element:e,datasetIndex:n,index:r})}),d):[]}function ir(e,t,n,r,i){var a=[],o="x"===n?"inXRange":"inYRange",s=!1;return(r9(e,n,t,function(e,r,l){e[o](t[n],i)&&(a.push({element:e,datasetIndex:r,index:l}),s=s||e.inRange(t.x,t.y,i))}),r&&!s)?[]:a}var ii={index:function(e,t,n,r){var i=rm(t,e),a=n.axis||"x",o=n.includeInvisible||!1,s=n.intersect?ie(e,i,a,r,o):it(e,i,a,!1,r,o),l=[];return s.length?(e.getSortedVisibleDatasetMetas().forEach(function(e){var t=s[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset:function(e,t,n,r){var i=rm(t,e),a=n.axis||"xy",o=n.includeInvisible||!1,s=n.intersect?ie(e,i,a,r,o):it(e,i,a,!1,r,o);if(s.length>0){var l=s[0].datasetIndex,u=e.getDatasetMeta(l).data;s=[];for(var c=0;c<u.length;++c)s.push({element:u[c],datasetIndex:l,index:c})}return s},point:function(e,t,n,r){var i=rm(t,e);return ie(e,i,n.axis||"xy",r,n.includeInvisible||!1)},nearest:function(e,t,n,r){var i=rm(t,e),a=n.axis||"xy",o=n.includeInvisible||!1;return it(e,i,a,n.intersect,r,o)},x:function(e,t,n,r){var i=rm(t,e);return ir(e,i,"x",n.intersect,r)},y:function(e,t,n,r){var i=rm(t,e);return ir(e,i,"y",n.intersect,r)}},ia=["left","top","right","bottom"];function io(e,t){return e.filter(function(e){return e.pos===t})}function is(e,t){return e.filter(function(e){return -1===ia.indexOf(e.pos)&&e.box.axis===t})}function il(e,t){return e.sort(function(e,n){var r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function iu(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function ic(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function id(e,t,n,r){var i,a,o,s,l,u,c=[];for(i=0,a=e.length,l=0;i<a;++i){(s=(o=e[i]).box).update(o.width||t.w,o.height||t.h,function(e,t){var n=t.maxPadding;return function(e){var r={left:0,top:0,right:0,bottom:0};return e.forEach(function(e){r[e]=Math.max(t[e],n[e])}),r}(e?["left","right"]:["top","bottom"])}(o.horizontal,t));var d=function(e,t,n,r){var i=n.pos,a=n.box,o=e.maxPadding;if(!tI(i)){n.size&&(e[i]-=n.size);var s=r[n.stack]||{size:0,count:1};s.size=Math.max(s.size,n.horizontal?a.height:a.width),n.size=s.size/s.count,e[i]+=n.size}a.getPadding&&ic(o,a.getPadding());var l=Math.max(0,t.outerWidth-iu(o,e,"left","right")),u=Math.max(0,t.outerHeight-iu(o,e,"top","bottom")),c=l!==e.w,d=u!==e.h;return e.w=l,e.h=u,n.horizontal?{same:c,other:d}:{same:d,other:c}}(t,n,o,r),f=d.same,p=d.other;l|=f&&c.length,u=u||p,s.fullSize||c.push(o)}return l&&id(c,t,n,r)||u}function ip(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function ih(e,t,n,r){var i=n.padding,a=t.x,o=t.y,s=!0,l=!1,u=void 0;try{for(var c,d=e[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value,p=f.box,h=r[f.stack]||{count:1,placed:0,weight:1},m=f.stackWeight/h.weight||1;if(f.horizontal){var g=t.w*m,x=h.size||p.height;tq(h.start)&&(o=h.start),p.fullSize?ip(p,i.left,o,n.outerWidth-i.right-i.left,x):ip(p,t.left+h.placed,o,g,x),h.start=o,h.placed+=g,o=p.bottom}else{var y=t.h*m,b=h.size||p.width;tq(h.start)&&(a=h.start),p.fullSize?ip(p,a,i.top,b,n.outerHeight-i.bottom-i.top):ip(p,a,t.top+h.placed,b,y),h.start=a,h.placed+=y,a=p.right}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}t.x=a,t.y=o}var im=function(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(e){t.draw(e)}}]},e.boxes.push(t)},ig=function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},iv=function(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},ix=function(e,t,n,r){if(e){var i,a,o,s,l,u,c,d,f=n1(e.options.layout.padding),p=Math.max(t-f.width,0),h=Math.max(n-f.height,0),m=(a=il((i=function(e){var t,n,r,i,a,o,s,l,u=[];for(t=0,n=(e||[]).length;t<n;++t)i=(r=e[t]).position,a=(s=r.options).stack,o=void 0===(l=s.stackWeight)?1:l,u.push({index:t,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&i+a,stackWeight:o});return u}(e.boxes)).filter(function(e){return e.box.fullSize}),!0),o=il(io(i,"left"),!0),s=il(io(i,"right")),l=il(io(i,"top"),!0),u=il(io(i,"bottom")),c=is(i,"x"),d=is(i,"y"),{fullSize:a,leftAndTop:o.concat(l),rightAndBottom:s.concat(d).concat(u).concat(c),chartArea:io(i,"chartArea"),vertical:o.concat(s).concat(d),horizontal:l.concat(u).concat(c)}),g=m.vertical,x=m.horizontal;tM(e.boxes,function(e){"function"==typeof e.beforeLayout&&e.beforeLayout()});var y=Object.freeze({outerWidth:t,outerHeight:n,padding:f,availableWidth:p,availableHeight:h,vBoxMaxWidth:p/2/(g.reduce(function(e,t){return t.box.options&&!1===t.box.options.display?e:e+1},0)||1),hBoxMaxHeight:h/2}),b=Object.assign({},f);ic(b,n1(r));var w=Object.assign({maxPadding:b,w:p,h:h,x:f.left,y:f.top},f),_=function(e,t){var n,r,i,a=function(e){var t={},n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=s.stack,u=s.pos,c=s.stackWeight;if(l&&ia.includes(u)){var d=t[l]||(t[l]={count:0,placed:0,weight:0,size:0});d.count++,d.weight+=c}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}(e),o=t.vBoxMaxWidth,s=t.hBoxMaxHeight;for(n=0,r=e.length;n<r;++n){var l=(i=e[n]).box.fullSize,u=a[i.stack],c=u&&i.stackWeight/u.weight;i.horizontal?(i.width=c?c*o:l&&t.availableWidth,i.height=s):(i.width=o,i.height=c?c*s:l&&t.availableHeight)}return a}(g.concat(x),y);id(m.fullSize,w,y,_),id(g,w,y,_),id(x,w,y,_)&&id(g,w,y,_);var k=w.maxPadding;function S(e){var t=Math.max(k[e]-w[e],0);return w[e]+=t,t}w.y+=S("top"),w.x+=S("left"),S("right"),S("bottom"),ih(m.leftAndTop,w,y,_),w.x+=w.w,w.y+=w.h,ih(m.rightAndBottom,w,y,_),e.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},tM(m.chartArea,function(t){var n=t.box;Object.assign(n,e.chartArea),n.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}},iy=function(){function e(){(0,eJ._)(this,e)}return(0,e0._)(e,[{key:"acquireContext",value:function(e,t){}},{key:"releaseContext",value:function(e){return!1}},{key:"addEventListener",value:function(e,t,n){}},{key:"removeEventListener",value:function(e,t,n){}},{key:"getDevicePixelRatio",value:function(){return 1}},{key:"getMaximumSize",value:function(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}},{key:"isAttached",value:function(e){return!0}},{key:"updateConfig",value:function(e){}}]),e}(),ib=function(e){function t(){return(0,eJ._)(this,t),(0,eZ._)(this,t,arguments)}return(0,e5._)(t,e),(0,e0._)(t,[{key:"acquireContext",value:function(e){return e&&e.getContext&&e.getContext("2d")||null}},{key:"updateConfig",value:function(e){e.options.animation=!1}}]),t}(iy),iw="$chartjs",i_={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ik=function(e){return null===e||""===e},iS=!!rx&&{passive:!0};function iC(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s===t||s.contains(t))return!0}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}function ij(e,t,n){var r=e.canvas,i=new MutationObserver(function(e){var t=!1,i=!0,a=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;t=(t=t||iC(u.addedNodes,r))&&!iC(u.removedNodes,r)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function iT(e,t,n){var r=e.canvas,i=new MutationObserver(function(e){var t=!1,i=!0,a=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;t=(t=t||iC(u.removedNodes,r))&&!iC(u.addedNodes,r)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}var iE=new Map,iR=0;function iI(){var e=window.devicePixelRatio;e!==iR&&(iR=e,iE.forEach(function(t,n){n.currentDevicePixelRatio!==e&&t()}))}function iA(e,t,n){var r=e.canvas,i=r&&rc(r);if(i){var a=ng(function(e,t){var r=i.clientWidth;n(e,t),r<i.clientWidth&&n()},window),o=new ResizeObserver(function(e){var t=e[0],n=t.contentRect.width,r=t.contentRect.height;(0!==n||0!==r)&&a(n,r)});return o.observe(i),iE.size||window.addEventListener("resize",iI),iE.set(e,a),o}}function iP(e,t,n){n&&n.disconnect(),"resize"===t&&(iE.delete(e),iE.size||window.removeEventListener("resize",iI))}function iD(e,t,n){var r=e.canvas,i=ng(function(t){var r,i,a,o;null!==e.ctx&&n((r=i_[t.type]||t.type,a=(i=rm(t,e)).x,{type:r,chart:e,native:t,x:void 0!==a?a:null,y:void 0!==(o=i.y)?o:null}))},e);return r.addEventListener(t,i,iS),i}var iO=function(e){function t(){return(0,eJ._)(this,t),(0,eZ._)(this,t,arguments)}return(0,e5._)(t,e),(0,e0._)(t,[{key:"acquireContext",value:function(e,t){var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(!function(e,t){var n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[iw]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ik(i)){var a=ry(e,"width");void 0!==a&&(e.width=a)}if(ik(r))if(""===e.style.height)e.height=e.width/(t||2);else{var o=ry(e,"height");void 0!==o&&(e.height=o)}}(e,t),n):null}},{key:"releaseContext",value:function(e){var t=e.canvas;if(!t[iw])return!1;var n=t[iw].initial;["height","width"].forEach(function(e){var r=n[e];tE(r)?t.removeAttribute(e):t.setAttribute(e,r)});var r=n.style||{};return Object.keys(r).forEach(function(e){t.style[e]=r[e]}),t.width=t.width,delete t[iw],!0}},{key:"addEventListener",value:function(e,t,n){this.removeEventListener(e,t);var r=e.$proxies||(e.$proxies={}),i={attach:ij,detach:iT,resize:iA}[t]||iD;r[t]=i(e,t,n)}},{key:"removeEventListener",value:function(e,t){var n=e.$proxies||(e.$proxies={}),r=n[t];r&&((({attach:iP,detach:iP,resize:iP})[t]||function(e,t,n){e.canvas.removeEventListener(t,n,iS)})(e,t,r),n[t]=void 0)}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio}},{key:"getMaximumSize",value:function(e,t,n,r){return function(e,t,n,r){var i=rf(e),a=rh(i,"margin"),o=rd(i.maxWidth,e,"clientWidth")||tJ,s=rd(i.maxHeight,e,"clientHeight")||tJ,l=function(e,t,n){var r,i;if(void 0===t||void 0===n){var a=rc(e);if(a){var o=a.getBoundingClientRect(),s=rf(a),l=rh(s,"border","width"),u=rh(s,"padding");t=o.width-u.width-l.width,n=o.height-u.height-l.height,r=rd(s.maxWidth,a,"clientWidth"),i=rd(s.maxHeight,a,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||tJ,maxHeight:i||tJ}}(e,t,n),u=l.width,c=l.height;if("content-box"===i.boxSizing){var d=rh(i,"border","width"),f=rh(i,"padding");u-=f.width+d.width,c-=f.height+d.height}return u=Math.max(0,u-a.width),c=Math.max(0,r?u/r:c-a.height),u=rg(Math.min(u,o,l.maxWidth)),c=rg(Math.min(c,s,l.maxHeight)),u&&!c&&(c=rg(u/2)),(void 0!==t||void 0!==n)&&r&&l.height&&c>l.height&&(u=rg(Math.floor((c=l.height)*r))),{width:u,height:c}}(e,t,n,r)}},{key:"isAttached",value:function(e){var t=rc(e);return!!(t&&t.isConnected)}}]),t}(iy),iN=function(){function e(){(0,eJ._)(this,e),(0,e1._)(this,"x",void 0),(0,e1._)(this,"y",void 0),(0,e1._)(this,"active",!1),(0,e1._)(this,"options",void 0),(0,e1._)(this,"$animations",void 0)}return(0,e0._)(e,[{key:"tooltipPosition",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"hasValue",value:function(){return t7(this.x)&&t7(this.y)}},{key:"getProps",value:function(e,t){var n=this,r=this.$animations;if(!t||!r)return this;var i={};return e.forEach(function(e){i[e]=r[e]&&r[e].active()?r[e]._to:n[e]}),i}}]),e}();function iM(e,t,n,r,i){var a,o,s,l=tD(r,0),u=Math.min(tD(i,e.length),e.length),c=0;for(n=Math.ceil(n),i&&(n=(a=i-r)/Math.floor(a/n)),s=l;s<0;)s=Math.round(l+ ++c*n);for(o=Math.max(l,0);o<u;o++)o===s&&(t.push(e[o]),s=Math.round(l+ ++c*n))}(0,e1._)(iN,"defaults",{}),(0,e1._)(iN,"defaultRoutes",void 0);var iL=function(e,t,n){return"top"===t||"left"===t?e[t]+n:e[t]-n},iB=function(e,t){return Math.min(t||e,e)};function iV(e,t){for(var n=[],r=e.length/t,i=e.length,a=0;a<i;a+=r)n.push(e[Math.floor(a)]);return n}function iF(e){return e.drawTicks?e.tickLength:0}function iU(e,t){if(!e.display)return 0;var n=n2(e.font,t),r=n1(e.padding);return(tR(e.text)?e.text.length:1)*n.lineHeight+r.height}var iG=function(e){function t(e){var n;return(0,eJ._)(this,t),(n=(0,eZ._)(this,t)).id=e.id,n.type=e.type,n.options=void 0,n.ctx=e.ctx,n.chart=e.chart,n.top=void 0,n.bottom=void 0,n.left=void 0,n.right=void 0,n.width=void 0,n.height=void 0,n._margins={left:0,right:0,top:0,bottom:0},n.maxWidth=void 0,n.maxHeight=void 0,n.paddingTop=void 0,n.paddingBottom=void 0,n.paddingLeft=void 0,n.paddingRight=void 0,n.axis=void 0,n.labelRotation=void 0,n.min=void 0,n.max=void 0,n._range=void 0,n.ticks=[],n._gridLineItems=null,n._labelItems=null,n._labelSizes=null,n._length=0,n._maxLength=0,n._longestTextCache={},n._startPixel=void 0,n._endPixel=void 0,n._reversePixels=!1,n._userMax=void 0,n._userMin=void 0,n._suggestedMax=void 0,n._suggestedMin=void 0,n._ticksLength=0,n._borderValue=0,n._cache={},n._dataLimitsCached=!1,n.$context=void 0,n}return(0,e5._)(t,e),(0,e0._)(t,[{key:"init",value:function(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}},{key:"parse",value:function(e,t){return e}},{key:"getUserBounds",value:function(){var e=this._userMin,t=this._userMax,n=this._suggestedMin,r=this._suggestedMax;return e=tP(e,1/0),t=tP(t,-1/0),n=tP(n,1/0),r=tP(r,-1/0),{min:tP(e,n),max:tP(t,r),minDefined:tA(e),maxDefined:tA(t)}}},{key:"getMinMax",value:function(e){var t,n=this.getUserBounds(),r=n.min,i=n.max,a=n.minDefined,o=n.maxDefined;if(a&&o)return{min:r,max:i};for(var s=this.getMatchingVisibleMetas(),l=0,u=s.length;l<u;++l)t=s[l].controller.getMinMax(this,e),a||(r=Math.min(r,t.min)),o||(i=Math.max(i,t.max));return r=o&&r>i?i:r,i=a&&r>i?r:i,{min:tP(r,tP(i,r)),max:tP(i,tP(r,i))}}},{key:"getPadding",value:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}},{key:"getTicks",value:function(){return this.ticks}},{key:"getLabels",value:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}},{key:"getLabelItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}},{key:"beforeLayout",value:function(){this._cache={},this._dataLimitsCached=!1}},{key:"beforeUpdate",value:function(){tN(this.options.beforeUpdate,[this])}},{key:"update",value:function(e,t,n){var r,i,a,o,s=this.options,l=s.beginAtZero,u=s.grace,c=s.ticks,d=c.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=(r=this.min,a=tO(u,((i=this.max)-r)/2),{min:(o=function(e,t){return l&&0===e?0:e+t})(r,-Math.abs(a)),max:o(i,a)}),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();var f=d<this.ticks.length;this._convertTicksToLabels(f?iV(this.ticks,d):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||"auto"===c.source)&&(this.ticks=function(e,t){var n=e.options.ticks,r=(f=(d=e).options.offset,p=d._tickSize(),Math.floor(Math.min(d._length/p+ +!f,d._maxLength/p))),i=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?function(e){var t,n,r=[];for(t=0,n=e.length;t<n;t++)e[t].major&&r.push(t);return r}(t):[],o=a.length,s=a[0],l=a[o-1],u=[];if(o>i)return function(e,t,n,r){var i,a=0,o=n[0];for(i=0,r=Math.ceil(r);i<e.length;i++)i===o&&(t.push(e[i]),o=n[++a*r])}(t,u,a,o/i),u;var c=function(e,t,n){var r=function(e){var t,n,r=e.length;if(r<2)return!1;for(n=e[0],t=1;t<r;++t)if(e[t]-e[t-1]!==n)return!1;return n}(e),i=t.length/n;if(!r)return Math.max(i,1);for(var a=function(e){var t,n=[],r=Math.sqrt(e);for(t=1;t<r;t++)e%t==0&&(n.push(t),n.push(e/t));return r===(0|r)&&n.push(r),n.sort(function(e,t){return e-t}).pop(),n}(r),o=0,s=a.length-1;o<s;o++){var l=a[o];if(l>i)return l}return Math.max(i,1)}(a,t,i);if(o>0){var d,f,p,h,m,g=o>1?Math.round((l-s)/(o-1)):null;for(iM(t,u,c,tE(g)?0:s-g,s),h=0,m=o-1;h<m;h++)iM(t,u,c,a[h],a[h+1]);return iM(t,u,c,l,tE(g)?t.length:l+g),u}return iM(t,u,c),u}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}},{key:"configure",value:function(){var e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}},{key:"afterUpdate",value:function(){tN(this.options.afterUpdate,[this])}},{key:"beforeSetDimensions",value:function(){tN(this.options.beforeSetDimensions,[this])}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}},{key:"afterSetDimensions",value:function(){tN(this.options.afterSetDimensions,[this])}},{key:"_callHooks",value:function(e){this.chart.notifyPlugins(e,this.getContext()),tN(this.options[e],[this])}},{key:"beforeDataLimits",value:function(){this._callHooks("beforeDataLimits")}},{key:"determineDataLimits",value:function(){}},{key:"afterDataLimits",value:function(){this._callHooks("afterDataLimits")}},{key:"beforeBuildTicks",value:function(){this._callHooks("beforeBuildTicks")}},{key:"buildTicks",value:function(){return[]}},{key:"afterBuildTicks",value:function(){this._callHooks("afterBuildTicks")}},{key:"beforeTickToLabelConversion",value:function(){tN(this.options.beforeTickToLabelConversion,[this])}},{key:"generateTickLabels",value:function(e){var t,n,r,i=this.options.ticks;for(t=0,n=e.length;t<n;t++)(r=e[t]).label=tN(i.callback,[r.value,t,e],this)}},{key:"afterTickToLabelConversion",value:function(){tN(this.options.afterTickToLabelConversion,[this])}},{key:"beforeCalculateLabelRotation",value:function(){tN(this.options.beforeCalculateLabelRotation,[this])}},{key:"calculateLabelRotation",value:function(){var e,t,n,r=this.options,i=r.ticks,a=iB(this.ticks.length,r.ticks.maxTicksLimit),o=i.minRotation||0,s=i.maxRotation,l=o;if(!this._isVisible()||!i.display||o>=s||a<=1||!this.isHorizontal()){this.labelRotation=o;return}var u=this._getLabelSizes(),c=u.widest.width,d=u.highest.height,f=ns(this.chart.width-c,0,this.maxWidth);c+6>(e=r.offset?this.maxWidth/a:f/(a-1))&&(e=f/(a-(r.offset?.5:1)),t=this.maxHeight-iF(r.grid)-i.padding-iU(r.title,this.chart.options.font),n=Math.sqrt(c*c+d*d),l=Math.max(o,Math.min(s,l=180/tQ*Math.min(Math.asin(ns((u.highest.height+6)/e,-1,1)),Math.asin(ns(t/n,-1,1))-Math.asin(ns(d/n,-1,1)))))),this.labelRotation=l}},{key:"afterCalculateLabelRotation",value:function(){tN(this.options.afterCalculateLabelRotation,[this])}},{key:"afterAutoSkip",value:function(){}},{key:"beforeFit",value:function(){tN(this.options.beforeFit,[this])}},{key:"fit",value:function(){var e={width:0,height:0},t=this.chart,n=this.options,r=n.ticks,i=n.title,a=n.grid,o=this._isVisible(),s=this.isHorizontal();if(o){var l=iU(i,t.options.font);if(s?(e.width=this.maxWidth,e.height=iF(a)+l):(e.height=this.maxHeight,e.width=iF(a)+l),r.display&&this.ticks.length){var u=this._getLabelSizes(),c=u.first,d=u.last,f=u.widest,p=u.highest,h=2*r.padding,m=ne(this.labelRotation),g=Math.cos(m),x=Math.sin(m);if(s){var y=r.mirror?0:x*f.width+g*p.height;e.height=Math.min(this.maxHeight,e.height+y+h)}else{var b=r.mirror?0:g*f.width+x*p.height;e.width=Math.min(this.maxWidth,e.width+b+h)}this._calculatePadding(c,d,x,g)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}},{key:"_calculatePadding",value:function(e,t,n,r){var i=this.options,a=i.ticks,o=a.align,s=a.padding,l=i.position,u=0!==this.labelRotation,c="top"!==l&&"x"===this.axis;if(this.isHorizontal()){var d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1),p=0,h=0;u?c?(p=r*e.width,h=n*t.height):(p=n*e.height,h=r*t.width):"start"===o?h=t.width:"end"===o?p=e.width:"inner"!==o&&(p=e.width/2,h=t.width/2),this.paddingLeft=Math.max((p-d+s)*this.width/(this.width-d),0),this.paddingRight=Math.max((h-f+s)*this.width/(this.width-f),0)}else{var m=t.height/2,g=e.height/2;"start"===o?(m=0,g=e.height):"end"===o&&(m=t.height,g=0),this.paddingTop=m+s,this.paddingBottom=g+s}}},{key:"_handleMargins",value:function(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}},{key:"afterFit",value:function(){tN(this.options.afterFit,[this])}},{key:"isHorizontal",value:function(){var e=this.options,t=e.axis,n=e.position;return"top"===n||"bottom"===n||"x"===t}},{key:"isFullSize",value:function(){return this.options.fullSize}},{key:"_convertTicksToLabels",value:function(e){var t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)tE(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}},{key:"_getLabelSizes",value:function(){var e=this._labelSizes;if(!e){var t=this.options.ticks.sampleSize,n=this.ticks;t<n.length&&(n=iV(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}},{key:"_computeLabelSizes",value:function(e,t,n){var r,i,a,o,s,l,u,c,d,f,p,h=this.ctx,m=this._longestTextCache,g=[],x=[],y=Math.floor(t/iB(t,n)),b=0,w=0;for(r=0;r<t;r+=y){if(o=e[r].label,h.font=l=(s=this._resolveTickFontOptions(r)).string,u=m[l]=m[l]||{data:{},gc:[]},c=s.lineHeight,d=f=0,tE(o)||tR(o)){if(tR(o))for(i=0,a=o.length;i<a;++i)tE(p=o[i])||tR(p)||(d=nB(h,u.data,u.gc,d,p),f+=c)}else d=nB(h,u.data,u.gc,d,o),f=c;g.push(d),x.push(f),b=Math.max(d,b),w=Math.max(f,w)}tM(m,function(e){var n,r=e.gc,i=r.length/2;if(i>t){for(n=0;n<i;++n)delete e.data[r[n]];r.splice(0,i)}});var _=g.indexOf(b),k=x.indexOf(w),S=function(e){return{width:g[e]||0,height:x[e]||0}};return{first:S(0),last:S(t-1),widest:S(_),highest:S(k),widths:g,heights:x}}},{key:"getLabelForValue",value:function(e){return e}},{key:"getPixelForValue",value:function(e,t){return NaN}},{key:"getValueForPixel",value:function(e){}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getPixelForDecimal",value:function(e){this._reversePixels&&(e=1-e);var t=this._startPixel+e*this._length;return ns(this._alignToPixels?nV(this.chart,t,0):t,-32768,32767)}},{key:"getDecimalForPixel",value:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}},{key:"getBasePixel",value:function(){return this.getPixelForValue(this.getBaseValue())}},{key:"getBaseValue",value:function(){var e=this.min,t=this.max;return e<0&&t<0?t:e>0&&t>0?e:0}},{key:"getContext",value:function(e){var t,n=this.ticks||[];if(e>=0&&e<n.length){var r=n[e];return r.$context||(r.$context=n5(this.getContext(),{tick:r,index:e,type:"tick"}))}return this.$context||(this.$context=(t=this.chart.getContext(),n5(t,{scale:this,type:"scale"})))}},{key:"_tickSize",value:function(){var e=this.options.ticks,t=ne(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,o=i?i.widest.width+a:0,s=i?i.highest.height+a:0;return this.isHorizontal()?s*n>o*r?o/n:s/r:s*r<o*n?s/n:o/r}},{key:"_isVisible",value:function(){var e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}},{key:"_computeGridLineItems",value:function(e){var t,n,r,i,a,o,s,l,u,c,d,f,p=this.axis,h=this.chart,m=this.options,g=m.grid,x=m.position,y=m.border,b=g.offset,w=this.isHorizontal(),_=this.ticks.length+ +!!b,k=iF(g),S=[],C=y.setContext(this.getContext()),j=C.display?C.width:0,T=j/2,E=function(e){return nV(h,e,j)};if("top"===x)t=E(this.bottom),o=this.bottom-k,l=t-T,c=E(e.top)+T,f=e.bottom;else if("bottom"===x)t=E(this.top),c=e.top,f=E(e.bottom)-T,o=t+T,l=this.top+k;else if("left"===x)t=E(this.right),a=this.right-k,s=t-T,u=E(e.left)+T,d=e.right;else if("right"===x)t=E(this.left),u=e.left,d=E(e.right)-T,a=t+T,s=this.left+k;else if("x"===p){if("center"===x)t=E((e.top+e.bottom)/2+.5);else if(tI(x)){var R=Object.keys(x)[0],I=x[R];t=E(this.chart.scales[R].getPixelForValue(I))}c=e.top,f=e.bottom,l=(o=t+T)+k}else if("y"===p){if("center"===x)t=E((e.left+e.right)/2);else if(tI(x)){var A=Object.keys(x)[0],P=x[A];t=E(this.chart.scales[A].getPixelForValue(P))}s=(a=t-T)-k,u=e.left,d=e.right}var D=tD(m.ticks.maxTicksLimit,_),O=Math.max(1,Math.ceil(_/D));for(n=0;n<_;n+=O){var N=this.getContext(n),M=g.setContext(N),L=y.setContext(N),B=M.lineWidth,V=M.color,F=L.dash||[],U=L.dashOffset,G=M.tickWidth,$=M.tickColor,H=M.tickBorderDash||[],z=M.tickBorderDashOffset;void 0!==(r=function(e,t,n){var r,i=e.ticks.length,a=Math.min(t,i-1),o=e._startPixel,s=e._endPixel,l=e.getPixelForTick(a);if(!n||(r=1===i?Math.max(l-o,s-l):0===t?(e.getPixelForTick(1)-l)/2:(l-e.getPixelForTick(a-1))/2,!((l+=a<t?r:-r)<o-1e-6)&&!(l>s+1e-6)))return l}(this,n,b))&&(i=nV(h,r,B),w?a=s=u=d=i:o=l=c=f=i,S.push({tx1:a,ty1:o,tx2:s,ty2:l,x1:u,y1:c,x2:d,y2:f,width:B,color:V,borderDash:F,borderDashOffset:U,tickWidth:G,tickColor:$,tickBorderDash:H,tickBorderDashOffset:z}))}return this._ticksLength=_,this._borderValue=t,S}},{key:"_computeLabelItems",value:function(e){var t,n,r,i,a,o,s,l,u,c,d,f=this.axis,p=this.options,h=p.position,m=p.ticks,g=this.isHorizontal(),x=this.ticks,y=m.align,b=m.crossAlign,w=m.padding,_=m.mirror,k=iF(p.grid),S=k+w,C=_?-w:S,j=-ne(this.labelRotation),T=[],E="middle";if("top"===h)a=this.bottom-C,o=this._getXAxisLabelAlignment();else if("bottom"===h)a=this.top+C,o=this._getXAxisLabelAlignment();else if("left"===h){var R=this._getYAxisLabelAlignment(k);o=R.textAlign,i=R.x}else if("right"===h){var I=this._getYAxisLabelAlignment(k);o=I.textAlign,i=I.x}else if("x"===f){if("center"===h)a=(e.top+e.bottom)/2+S;else if(tI(h)){var A=Object.keys(h)[0],P=h[A];a=this.chart.scales[A].getPixelForValue(P)+S}o=this._getXAxisLabelAlignment()}else if("y"===f){if("center"===h)i=(e.left+e.right)/2-S;else if(tI(h)){var D=Object.keys(h)[0],O=h[D];i=this.chart.scales[D].getPixelForValue(O)}o=this._getYAxisLabelAlignment(k).textAlign}"y"===f&&("start"===y?E="top":"end"===y&&(E="bottom"));var N=this._getLabelSizes();for(t=0,n=x.length;t<n;++t){r=x[t].label;var M=m.setContext(this.getContext(t));s=this.getPixelForTick(t)+m.labelOffset,u=(l=this._resolveTickFontOptions(t)).lineHeight;var L=(c=tR(r)?r.length:1)/2,B=M.color,V=M.textStrokeColor,F=M.textStrokeWidth,U=o;g?(i=s,"inner"===o&&(U=t===n-1?this.options.reverse?"left":"right":0===t?this.options.reverse?"right":"left":"center"),d="top"===h?"near"===b||0!==j?-c*u+u/2:"center"===b?-N.highest.height/2-L*u+u:-N.highest.height+u/2:"near"===b||0!==j?u/2:"center"===b?N.highest.height/2-L*u:N.highest.height-c*u,_&&(d*=-1),0===j||M.showLabelBackdrop||(i+=u/2*Math.sin(j))):(a=s,d=(1-c)*u/2);var G=void 0;if(M.showLabelBackdrop){var $=n1(M.backdropPadding),H=N.heights[t],z=N.widths[t],W=d-$.top,q=0-$.left;switch(E){case"middle":W-=H/2;break;case"bottom":W-=H}switch(o){case"center":q-=z/2;break;case"right":q-=z}G={left:q,top:W,width:z+$.width,height:H+$.height,color:M.backdropColor}}T.push({label:r,font:l,textOffset:d,options:{rotation:j,color:B,strokeColor:V,strokeWidth:F,textAlign:U,textBaseline:E,translation:[i,a],backdrop:G}})}return T}},{key:"_getXAxisLabelAlignment",value:function(){var e=this.options,t=e.position,n=e.ticks;if(-ne(this.labelRotation))return"top"===t?"left":"right";var r="center";return"start"===n.align?r="left":"end"===n.align?r="right":"inner"===n.align&&(r="inner"),r}},{key:"_getYAxisLabelAlignment",value:function(e){var t,n,r=this.options,i=r.position,a=r.ticks,o=a.crossAlign,s=a.mirror,l=a.padding,u=this._getLabelSizes(),c=e+l,d=u.widest.width;return"left"===i?s?(n=this.right+l,"near"===o?t="left":"center"===o?(t="center",n+=d/2):(t="right",n+=d)):(n=this.right-c,"near"===o?t="right":"center"===o?(t="center",n-=d/2):(t="left",n=this.left)):"right"===i?s?(n=this.left+l,"near"===o?t="right":"center"===o?(t="center",n-=d/2):(t="left",n-=d)):(n=this.left+c,"near"===o?t="left":"center"===o?(t="center",n+=d/2):(t="right",n=this.right)):t="right",{textAlign:t,x:n}}},{key:"_computeLabelArea",value:function(){if(!this.options.ticks.mirror){var e=this.chart,t=this.options.position;if("left"===t||"right"===t)return{top:0,left:this.left,bottom:e.height,right:this.right};if("top"===t||"bottom"===t)return{top:this.top,left:0,bottom:this.bottom,right:e.width}}}},{key:"drawBackground",value:function(){var e=this.ctx,t=this.options.backgroundColor,n=this.left,r=this.top,i=this.width,a=this.height;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,a),e.restore())}},{key:"getLineWidthForValue",value:function(e){var t=this.options.grid;if(!this._isVisible()||!t.display)return 0;var n=this.ticks.findIndex(function(t){return t.value===e});return n>=0?t.setContext(this.getContext(n)).lineWidth:0}},{key:"drawGrid",value:function(e){var t,n,r=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o=function(e,t,n){n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.stroke(),i.restore())};if(r.display)for(t=0,n=a.length;t<n;++t){var s=a[t];r.drawOnChartArea&&o({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),r.drawTicks&&o({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}},{key:"drawBorder",value:function(){var e,t,n,r,i=this.chart,a=this.ctx,o=this.options,s=o.border,l=o.grid,u=s.setContext(this.getContext()),c=s.display?u.width:0;if(c){var d=l.setContext(this.getContext(0)).lineWidth,f=this._borderValue;this.isHorizontal()?(e=nV(i,this.left,c)-c/2,t=nV(i,this.right,d)+d/2,n=r=f):(n=nV(i,this.top,c)-c/2,r=nV(i,this.bottom,d)+d/2,e=t=f),a.save(),a.lineWidth=u.width,a.strokeStyle=u.color,a.beginPath(),a.moveTo(e,n),a.lineTo(t,r),a.stroke(),a.restore()}}},{key:"drawLabels",value:function(e){if(this.options.ticks.display){var t=this.ctx,n=this._computeLabelArea();n&&nH(t,n);var r=this.getLabelItems(e),i=!0,a=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,c=u.options,d=u.font,f=u.label,p=u.textOffset;nK(t,f,0,p,d,c)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}n&&nz(t)}}},{key:"drawTitle",value:function(){var e=this.ctx,t=this.options,n=t.position,r=t.title,i=t.reverse;if(r.display){var a,o,s=n2(r.font),l=n1(r.padding),u=r.align,c=s.lineHeight/2;"bottom"===n||"center"===n||tI(n)?(c+=l.bottom,tR(r.text)&&(c+=s.lineHeight*(r.text.length-1))):c+=l.top;var d=function(e,t,n,r){var i,a,o,s=e.top,l=e.left,u=e.bottom,c=e.right,d=e.chart,f=d.chartArea,p=d.scales,h=0,m=u-s,g=c-l;if(e.isHorizontal()){if(a=nx(r,l,c),tI(n)){var x=Object.keys(n)[0],y=n[x];o=p[x].getPixelForValue(y)+m-t}else o="center"===n?(f.bottom+f.top)/2+m-t:iL(e,n,t);i=c-l}else{if(tI(n)){var b=Object.keys(n)[0],w=n[b];a=p[b].getPixelForValue(w)-g+t}else a="center"===n?(f.left+f.right)/2-g+t:iL(e,n,t);o=nx(r,u,s),h="left"===n?-t1:t1}return{titleX:a,titleY:o,maxWidth:i,rotation:h}}(this,c,n,u),f=d.titleX,p=d.titleY,h=d.maxWidth,m=d.rotation;nK(e,r.text,0,0,s,{color:r.color,maxWidth:h,rotation:m,textAlign:(a=nv(u),(i&&"right"!==n||!i&&"right"===n)&&(a="left"===(o=a)?"right":"right"===o?"left":o),a),textBaseline:"middle",translation:[f,p]})}}},{key:"draw",value:function(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}},{key:"_layers",value:function(){var e=this,n=this.options,r=n.ticks&&n.ticks.z||0,i=tD(n.grid&&n.grid.z,-1),a=tD(n.border&&n.border.z,0);return this._isVisible()&&this.draw===t.prototype.draw?[{z:i,draw:function(t){e.drawBackground(),e.drawGrid(t),e.drawTitle()}},{z:a,draw:function(){e.drawBorder()}},{z:r,draw:function(t){e.drawLabels(t)}}]:[{z:r,draw:function(t){e.draw(t)}}]}},{key:"getMatchingVisibleMetas",value:function(e){var t,n,r=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];for(t=0,n=r.length;t<n;++t){var o=r[t];o[i]!==this.id||e&&o.type!==e||a.push(o)}return a}},{key:"_resolveTickFontOptions",value:function(e){return n2(this.options.ticks.setContext(this.getContext(e)).font)}},{key:"_maxDigits",value:function(){var e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}]),t}((0,e7._)(iN)),i$=function(){function e(t,n,r){(0,eJ._)(this,e),this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}return(0,e0._)(e,[{key:"isForType",value:function(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}},{key:"register",value:function(e){var t,n,r,i,a,o,s,l,u=Object.getPrototypeOf(e);"id"in(t=u)&&"defaults"in t&&(l=this.register(u));var c=this.items,d=e.id,f=this.scope+"."+d;if(!d)throw Error("class does not have id: "+e);return d in c||(c[d]=e,n=e,r=f,i=l,a=tU(Object.create(null),[i?nL.get(i):{},nL.get(r),n.defaults]),nL.set(r,a),n.defaultRoutes&&(o=r,Object.keys(s=n.defaultRoutes).forEach(function(e){var t=e.split("."),n=t.pop(),r=[o].concat(t).join("."),i=s[e].split("."),a=i.pop(),l=i.join(".");nL.route(r,n,l,a)})),n.descriptors&&nL.describe(r,n.descriptors),this.override&&nL.override(e.id,e.overrides)),f}},{key:"get",value:function(e){return this.items[e]}},{key:"unregister",value:function(e){var t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in nL[r]&&(delete nL[r][n],this.override&&delete nD[n])}}]),e}(),iH=new(function(){function e(){(0,eJ._)(this,e),this.controllers=new i$(rq,"datasets",!0),this.elements=new i$(iN,"elements"),this.plugins=new i$(Object,"plugins"),this.scales=new i$(iG,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}return(0,e0._)(e,[{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}},{key:"remove",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}},{key:"addControllers",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}},{key:"addElements",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}},{key:"addPlugins",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}},{key:"addScales",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}},{key:"getController",value:function(e){return this._get(e,this.controllers,"controller")}},{key:"getElement",value:function(e){return this._get(e,this.elements,"element")}},{key:"getPlugin",value:function(e){return this._get(e,this.plugins,"plugin")}},{key:"getScale",value:function(e){return this._get(e,this.scales,"scale")}},{key:"removeControllers",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}},{key:"removeElements",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}},{key:"removePlugins",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}},{key:"removeScales",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}},{key:"_each",value:function(e,t,n){var r=this;(0,e8._)(t).forEach(function(t){var i=n||r._getRegistryForType(t);n||i.isForType(t)||i===r.plugins&&t.id?r._exec(e,i,t):tM(t,function(t){var i=n||r._getRegistryForType(t);r._exec(e,i,t)})})}},{key:"_exec",value:function(e,t,n){var r=tW(e);tN(n["before"+r],[],n),t[e](n),tN(n["after"+r],[],n)}},{key:"_getRegistryForType",value:function(e){for(var t=0;t<this._typedRegistries.length;t++){var n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}},{key:"_get",value:function(e,t,n){var r=t.get(e);if(void 0===r)throw Error('"'+e+'" is not a registered '+n+".");return r}}]),e}()),iz=function(){function e(){(0,eJ._)(this,e),this._init=[]}return(0,e0._)(e,[{key:"notify",value:function(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));var i=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),a}},{key:"_notify",value:function(e,t,n,r){r=r||{};var i=!0,a=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,c=u.plugin,d=c[n],f=[t,r,u.options];if(!1===tN(d,f,c)&&r.cancelable)return!1}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return!0}},{key:"invalidate",value:function(){tE(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}},{key:"_descriptors",value:function(e){if(this._cache)return this._cache;var t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}},{key:"_createDescriptors",value:function(e,t){var n=e&&e.config,r=tD(n.options&&n.options.plugins,{}),i=function(e){for(var t={},n=[],r=Object.keys(iH.plugins.items),i=0;i<r.length;i++)n.push(iH.getPlugin(r[i]));for(var a=e.plugins||[],o=0;o<a.length;o++){var s=a[o];-1===n.indexOf(s)&&(n.push(s),t[s.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){var i=t.plugins,a=t.localIds,o=[],s=e.getContext(),l=!0,u=!1,c=void 0;try{for(var d,f=i[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p,h=d.value,m=h.id,g=(p=n[m],r||!1!==p?!0===p?{}:p:null);null!==g&&o.push({plugin:h,options:function(e,t,n,r){var i=t.plugin,a=t.local,o=e.pluginScopeKeys(i),s=e.getOptionScopes(n,o);return a&&i.defaults&&s.push(i.defaults),e.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}(e.config,{plugin:h,local:a[m]},g,s)})}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}return o}(e,i,r,t):[]}},{key:"_notifyStateChanges",value:function(e){var t=this._oldCache||[],n=this._cache,r=function(e,t){return e.filter(function(e){return!t.some(function(t){return e.plugin.id===t.plugin.id})})};this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}]),e}();function iW(e,t){var n=nL.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function iq(e){if("x"===e||"y"===e||"r"===e)return e}function iK(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(iq(e))return e;var i=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u,c=s.value,d=c.axis||(u=c.position,"top"===u||"bottom"===u?"x":"left"===u||"right"===u?"y":void 0)||e.length>1&&iq(e[0].toLowerCase());if(d)return d}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}throw Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function iY(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function iQ(e){var t,n,r,i,a=e.options||(e.options={});a.plugins=tD(a.plugins,{}),t=nD[e.type]||{scales:{}},n=a.scales||{},r=iW(e.type,a),i=Object.create(null),Object.keys(n).forEach(function(a){var o=n[a];if(!tI(o))return console.error("Invalid scale configuration for scale: ".concat(a));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(a));var s=iK(a,o,function(e,t){if(t.data&&t.data.datasets){var n=t.data.datasets.filter(function(t){return t.xAxisID===e||t.yAxisID===e});if(n.length)return iY(e,"x",n[0])||iY(e,"y",n[0])}return{}}(a,e),nL.scales[o.type]),l=s===r?"_index_":"_value_",u=t.scales||{};i[a]=tG(Object.create(null),[{axis:s},o,u[s],u[l]])}),e.data.datasets.forEach(function(t){var r=t.type||e.type,o=t.indexAxis||iW(r,a),s=(nD[r]||{}).scales||{};Object.keys(s).forEach(function(e){var r,a=(r=e,"_index_"===e?r=o:"_value_"===e&&(r="x"===o?"y":"x"),r),l=t[a+"AxisID"]||a;i[l]=i[l]||Object.create(null),tG(i[l],[{axis:a},n[l],s[e]])})}),Object.keys(i).forEach(function(e){var t=i[e];tG(t,[nL.scales[t.type],nL.scale])}),a.scales=i}function iX(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}var iZ=new Map,iJ=new Set;function i0(e,t){var n=iZ.get(e);return n||(n=t(),iZ.set(e,n),iJ.add(n)),n}var i1=function(e,t,n){var r=tz(t,n);void 0!==r&&e.add(r)},i2=function(){function e(t){var n;(0,eJ._)(this,e),this._config=((n=(n=t)||{}).data=iX(n.data),iQ(n),n),this._scopeCache=new Map,this._resolverCache=new Map}return(0,e0._)(e,[{key:"platform",get:function(){return this._config.platform}},{key:"type",get:function(){return this._config.type},set:function(e){this._config.type=e}},{key:"data",get:function(){return this._config.data},set:function(e){this._config.data=iX(e)}},{key:"options",get:function(){return this._config.options},set:function(e){this._config.options=e}},{key:"plugins",get:function(){return this._config.plugins}},{key:"update",value:function(){var e=this._config;this.clearCache(),iQ(e)}},{key:"clearCache",value:function(){this._scopeCache.clear(),this._resolverCache.clear()}},{key:"datasetScopeKeys",value:function(e){return i0(e,function(){return[["datasets.".concat(e),""]]})}},{key:"datasetAnimationScopeKeys",value:function(e,t){return i0("".concat(e,".transition.").concat(t),function(){return[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]})}},{key:"datasetElementScopeKeys",value:function(e,t){return i0("".concat(e,"-").concat(t),function(){return[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]})}},{key:"pluginScopeKeys",value:function(e){var t=e.id,n=this.type;return i0("".concat(n,"-plugin-").concat(t),function(){return[["plugins.".concat(t)].concat((0,e8._)(e.additionalOptionScopes||[]))]})}},{key:"_cachedScopes",value:function(e,t){var n=this._scopeCache,r=n.get(e);return(!r||t)&&(r=new Map,n.set(e,r)),r}},{key:"getOptionScopes",value:function(e,t,n){var r=this.options,i=this.type,a=this._cachedScopes(e,n),o=a.get(t);if(o)return o;var s=new Set;t.forEach(function(t){e&&(s.add(e),t.forEach(function(t){return i1(s,e,t)})),t.forEach(function(e){return i1(s,r,e)}),t.forEach(function(e){return i1(s,nD[i]||{},e)}),t.forEach(function(e){return i1(s,nL,e)}),t.forEach(function(e){return i1(s,nO,e)})});var l=Array.from(s);return 0===l.length&&l.push(Object.create(null)),iJ.has(t)&&a.set(t,l),l}},{key:"chartOptionScopes",value:function(){var e=this.options,t=this.type;return[e,nD[t]||{},nL.datasets[t]||{},{type:t},nL,nO]}},{key:"resolveNamedOptions",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""],i={$shared:!0},a=i3(this._resolverCache,e,r),o=a.resolver,s=a.subPrefixes,l=o;if(function(e,t){var n=n6(e),r=n.isScriptable,i=n.isIndexable,a=!0,o=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=r(c),f=i(c),p=(f||d)&&e[c];if(d&&(tK(p)||i5(p))||f&&tR(p))return!0}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return!1}(o,t)){i.$shared=!1,n=tK(n)?n():n;var u=this.createResolver(e,n,s);l=n8(o,n,u)}var c=!0,d=!1,f=void 0;try{for(var p,h=t[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var m=p.value;i[m]=l[m]}}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}return i}},{key:"createResolver",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0,i=i3(this._resolverCache,e,n).resolver;return tI(t)?n8(i,t,void 0,r):i}}]),e}();function i3(e,t,n){var r=e.get(t);r||(r=new Map,e.set(t,r));var i=n.join(),a=r.get(i);return a||(a={resolver:n4(t,n),subPrefixes:n.filter(function(e){return!e.toLowerCase().includes("hover")})},r.set(i,a)),a}var i5=function(e){return tI(e)&&Object.getOwnPropertyNames(e).reduce(function(t,n){return t||tK(e[n])},!1)},i4=["top","bottom","left","right","chartArea"];function i8(e,t){return"top"===e||"bottom"===e||-1===i4.indexOf(e)&&"x"===t}function i6(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function i7(e){var t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),tN(n&&n.onComplete,[e],t)}function i9(e){var t=e.chart,n=t.options.animation;tN(n&&n.onProgress,[e],t)}function ae(e){return ru()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var at={},an=function(e){var t=ae(e);return Object.values(at).filter(function(e){return e.canvas===t}).pop()};function ar(e,t,n){return e.options.clip?e[n]:t[n]}var ai=function(){function e(t,n){var r,i,a,o=this;(0,eJ._)(this,e);var s=this.config=new i2(n),l=ae(t),u=an(l);if(u)throw Error("Canvas is already in use. Chart with ID '"+u.id+"' must be destroyed before the canvas with ID '"+u.canvas.id+"' can be reused.");var c=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||(!ru()||"undefined"!=typeof OffscreenCanvas&&(0,e4._)(l,OffscreenCanvas)?ib:iO)),this.platform.updateConfig(s);var d=this.platform.acquireContext(l,c.aspectRatio),f=d&&d.canvas,p=f&&f.height,h=f&&f.width;(this.id=tT(),this.ctx=d,this.canvas=f,this.width=h,this.height=p,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new iz,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=(r=function(e){return o.update(e)},i=c.resizeDelay||0,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i?(clearTimeout(a),a=setTimeout(r,i,t)):r.apply(this,t),i}),this._dataChanges=[],at[this.id]=this,d&&f)?(rP.listen(this,"complete",i7),rP.listen(this,"progress",i9),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}return(0,e0._)(e,[{key:"aspectRatio",get:function(){var e=this.options,t=e.aspectRatio,n=e.maintainAspectRatio,r=this.width,i=this.height,a=this._aspectRatio;return tE(t)?n&&a?a:i?r/i:null:t}},{key:"data",get:function(){return this.config.data},set:function(e){this.config.data=e}},{key:"options",get:function(){return this._options},set:function(e){this.config.options=e}},{key:"registry",get:function(){return iH}},{key:"_initialize",value:function(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():rv(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}},{key:"clear",value:function(){return nF(this.canvas,this.ctx),this}},{key:"stop",value:function(){return rP.stop(this),this}},{key:"resize",value:function(e,t){rP.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}},{key:"_resize",value:function(e,t){var n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,t,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,rv(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),tN(n.onResize,[this,a],this),this.attached&&this._doResize(s)&&this.render())}},{key:"ensureScalesHaveIDs",value:function(){tM(this.options.scales||{},function(e,t){e.id=t})}},{key:"buildOrUpdateScales",value:function(){var e=this,t=this.options,n=t.scales,r=this.scales,i=Object.keys(r).reduce(function(e,t){return e[t]=!1,e},{}),a=[];n&&(a=a.concat(Object.keys(n).map(function(e){var t=n[e],r=iK(e,t),i="r"===r,a="x"===r;return{options:t,dposition:i?"chartArea":a?"bottom":"left",dtype:i?"radialLinear":a?"category":"linear"}}))),tM(a,function(n){var a=n.options,o=a.id,s=iK(o,a),l=tD(a.type,n.dtype);(void 0===a.position||i8(a.position,s)!==i8(n.dposition))&&(a.position=n.dposition),i[o]=!0;var u=null;o in r&&r[o].type===l?u=r[o]:r[(u=new(iH.getScale(l))({id:o,type:l,ctx:e.ctx,chart:e})).id]=u,u.init(a,t)}),tM(i,function(e,t){e||delete r[t]}),tM(r,function(t){iv(e,t,t.options),im(e,t)})}},{key:"_updateMetasets",value:function(){var e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(function(e,t){return e.index-t.index}),n>t){for(var r=t;r<n;++r)this._destroyDatasetMeta(r);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(i6("order","index"))}},{key:"_removeUnreferencedMetasets",value:function(){var e=this,t=this._metasets,n=this.data.datasets;t.length>n.length&&delete this._stacks,t.forEach(function(t,r){0===n.filter(function(e){return e===t._dataset}).length&&e._destroyDatasetMeta(r)})}},{key:"buildOrUpdateControllers",value:function(){var e,t,n=[],r=this.data.datasets;for(this._removeUnreferencedMetasets(),e=0,t=r.length;e<t;e++){var i=r[e],a=this.getDatasetMeta(e),o=i.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(e),a=this.getDatasetMeta(e)),a.type=o,a.indexAxis=i.indexAxis||iW(o,this.options),a.order=i.order||0,a.index=e,a.label=""+i.label,a.visible=this.isDatasetVisible(e),a.controller)a.controller.updateIndex(e),a.controller.linkScales();else{var s=iH.getController(o),l=nL.datasets[o],u=l.datasetElementType,c=l.dataElementType;Object.assign(s,{dataElementType:iH.getElement(c),datasetElementType:u&&iH.getElement(u)}),a.controller=new s(this,e),n.push(a.controller)}}return this._updateMetasets(),n}},{key:"_resetElements",value:function(){var e=this;tM(this.data.datasets,function(t,n){e.getDatasetMeta(n).controller.reset()},this)}},{key:"reset",value:function(){this._resetElements(),this.notifyPlugins("reset")}},{key:"update",value:function(e){var t=this.config;t.update();var n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1!==this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})){var i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");for(var a=0,o=0,s=this.data.datasets.length;o<s;o++){var l=this.getDatasetMeta(o).controller,u=!r&&-1===i.indexOf(l);l.buildOrUpdateElements(u),a=Math.max(+l.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||tM(i,function(e){e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(i6("z","_idx"));var c=this._active,d=this._lastEvent;d?this._eventHandler(d,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}}},{key:"_updateScales",value:function(){var e=this;tM(this.scales,function(t){ig(e,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}},{key:"_checkEventBindings",value:function(){var e=this.options;tY(new Set(Object.keys(this._listeners)),new Set(e.events))&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}},{key:"_updateHiddenIndices",value:function(){var e=this._hiddenIndices,t=this._getUniformDataChanges()||[],n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=s.method,u=s.start,c=s.count,d="_removeElements"===l?-c:c;!function(e,t,n){var r=Object.keys(e),i=!0,a=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,c=+u;if(c>=t){var d=e[u];delete e[u],(n>0||c>t)&&(e[c+n]=d)}}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}(e,u,d)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"_getUniformDataChanges",value:function(){var e=this._dataChanges;if(e&&e.length){this._dataChanges=[];for(var t=this.data.datasets.length,n=function(t){return new Set(e.filter(function(e){return e[0]===t}).map(function(e,t){return t+","+e.splice(1).join(",")}))},r=n(0),i=1;i<t;i++)if(!tY(r,n(i)))return;return Array.from(r).map(function(e){return e.split(",")}).map(function(e){return{method:e[1],start:+e[2],count:+e[3]}})}}},{key:"_updateLayout",value:function(e){var t=this;if(!1!==this.notifyPlugins("beforeLayout",{cancelable:!0})){ix(this,this.width,this.height,e);var n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],tM(this.boxes,function(e){var n;r&&"chartArea"===e.position||(e.configure&&e.configure(),(n=t._layers).push.apply(n,(0,e8._)(e._layers())))},this),this._layers.forEach(function(e,t){e._idx=t}),this.notifyPlugins("afterLayout")}}},{key:"_updateDatasets",value:function(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(var t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(var r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,tK(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}},{key:"_updateDataset",value:function(e,t){var n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}},{key:"render",value:function(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(rP.has(this)?this.attached&&!rP.running(this)&&rP.start(this):(this.draw(),i7({chart:this})))}},{key:"draw",value:function(){if(this._resizeBeforeDraw){var e,t=this._resizeBeforeDraw,n=t.width,r=t.height;this._resize(n,r),this._resizeBeforeDraw=null}if((this.clear(),!(this.width<=0)&&!(this.height<=0))&&!1!==this.notifyPlugins("beforeDraw",{cancelable:!0})){var i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}}},{key:"_getSortedDatasetMetas",value:function(e){var t,n,r=this._sortedMetasets,i=[];for(t=0,n=r.length;t<n;++t){var a=r[t];(!e||a.visible)&&i.push(a)}return i}},{key:"getSortedVisibleDatasetMetas",value:function(){return this._getSortedDatasetMetas(!0)}},{key:"_drawDatasets",value:function(){if(!1!==this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})){for(var e=this.getSortedVisibleDatasetMetas(),t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}}},{key:"_drawDataset",value:function(e){var t,n,r,i=this.ctx,a=e._clip,o=!a.disabled,s=(t=this.chartArea,n=e.xScale,r=e.yScale,n&&r?{left:ar(n,t,"left"),right:ar(n,t,"right"),top:ar(r,t,"top"),bottom:ar(r,t,"bottom")}:t),l={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",l)&&(o&&nH(i,{left:!1===a.left?0:s.left-a.left,right:!1===a.right?this.width:s.right+a.right,top:!1===a.top?0:s.top-a.top,bottom:!1===a.bottom?this.height:s.bottom+a.bottom}),e.controller.draw(),o&&nz(i),l.cancelable=!1,this.notifyPlugins("afterDatasetDraw",l))}},{key:"isPointInArea",value:function(e){return n$(e,this.chartArea,this._minPadding)}},{key:"getElementsAtEventForMode",value:function(e,t,n,r){var i=ii[t];return"function"==typeof i?i(this,e,n,r):[]}},{key:"getDatasetMeta",value:function(e){var t=this.data.datasets[e],n=this._metasets,r=n.filter(function(e){return e&&e._dataset===t}).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}},{key:"getContext",value:function(){return this.$context||(this.$context=n5(null,{chart:this,type:"chart"}))}},{key:"getVisibleDatasetCount",value:function(){return this.getSortedVisibleDatasetMetas().length}},{key:"isDatasetVisible",value:function(e){var t=this.data.datasets[e];if(!t)return!1;var n=this.getDatasetMeta(e);return"boolean"==typeof n.hidden?!n.hidden:!t.hidden}},{key:"setDatasetVisibility",value:function(e,t){this.getDatasetMeta(e).hidden=!t}},{key:"toggleDataVisibility",value:function(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}},{key:"getDataVisibility",value:function(e){return!this._hiddenIndices[e]}},{key:"_updateVisibility",value:function(e,t,n){var r=n?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,r);tq(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(i,{visible:n}),this.update(function(t){return t.datasetIndex===e?r:void 0}))}},{key:"hide",value:function(e,t){this._updateVisibility(e,t,!1)}},{key:"show",value:function(e,t){this._updateVisibility(e,t,!0)}},{key:"_destroyDatasetMeta",value:function(e){var t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}},{key:"_stop",value:function(){var e,t;for(this.stop(),rP.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}},{key:"destroy",value:function(){this.notifyPlugins("beforeDestroy");var e=this.canvas,t=this.ctx;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),nF(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete at[this.id],this.notifyPlugins("afterDestroy")}},{key:"toBase64Image",value:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.canvas).toDataURL.apply(e,(0,e8._)(n))}},{key:"bindEvents",value:function(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}},{key:"bindUserEvents",value:function(){var e=this,t=this._listeners,n=this.platform,r=function(r,i){n.addEventListener(e,r,i),t[r]=i},i=function(t,n,r){t.offsetX=n,t.offsetY=r,e._eventHandler(t)};tM(this.options.events,function(e){return r(e,i)})}},{key:"bindResponsiveEvents",value:function(){var e,t=this;this._responsiveListeners||(this._responsiveListeners={});var n=this._responsiveListeners,r=this.platform,i=function(e,i){r.addEventListener(t,e,i),n[e]=i},a=function(e,i){n[e]&&(r.removeEventListener(t,e,i),delete n[e])},o=function(e,n){t.canvas&&t.resize(e,n)},s=function(){a("attach",s),t.attached=!0,t.resize(),i("resize",o),i("detach",e)};e=function(){t.attached=!1,a("resize",o),t._stop(),t._resize(0,0),i("attach",s)},r.isAttached(this.canvas)?s():e()}},{key:"unbindEvents",value:function(){var e=this;tM(this._listeners,function(t,n){e.platform.removeEventListener(e,n,t)}),this._listeners={},tM(this._responsiveListeners,function(t,n){e.platform.removeEventListener(e,n,t)}),this._responsiveListeners=void 0}},{key:"updateHoverStyle",value:function(e,t,n){var r,i,a,o=n?"set":"remove";for("dataset"===t&&this.getDatasetMeta(e[0].datasetIndex).controller["_"+o+"DatasetHoverStyle"](),i=0,a=e.length;i<a;++i){var s=(r=e[i])&&this.getDatasetMeta(r.datasetIndex).controller;s&&s[o+"HoverStyle"](r.element,r.datasetIndex,r.index)}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e){var t=this,n=this._active||[],r=e.map(function(e){var n=e.datasetIndex,r=e.index,i=t.getDatasetMeta(n);if(!i)throw Error("No dataset found at index "+n);return{datasetIndex:n,element:i.data[r],index:r}});tL(r,n)||(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}},{key:"notifyPlugins",value:function(e,t,n){return this._plugins.notify(this,e,t,n)}},{key:"isPluginEnabled",value:function(e){return 1===this._plugins._cache.filter(function(t){return t.plugin.id===e}).length}},{key:"_updateHoverStyles",value:function(e,t,n){var r=this.options.hover,i=function(e,t){return e.filter(function(e){return!t.some(function(t){return e.datasetIndex===t.datasetIndex&&e.index===t.index})})},a=i(t,e),o=n?e:i(e,t);a.length&&this.updateHoverStyle(a,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}},{key:"_eventHandler",value:function(e,t){var n=this,r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=function(t){return(t.options.events||n.options.events).includes(e.native.type)};if(!1!==this.notifyPlugins("beforeEvent",r,i)){var a=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(a||r.changed)&&this.render(),this}}},{key:"_handleEvent",value:function(e,t,n){var r,i=this._active,a=void 0===i?[]:i,o=this.options,s=this._getActiveElements(e,a,n,t),l="mouseup"===e.type||"click"===e.type||"contextmenu"===e.type,u=(r=this._lastEvent,n&&"mouseout"!==e.type?l?r:e:null);n&&(this._lastEvent=null,tN(o.onHover,[e,s,this],this),l&&tN(o.onClick,[e,s,this],this));var c=!tL(s,a);return(c||t)&&(this._active=s,this._updateHoverStyles(s,a,t)),this._lastEvent=u,c}},{key:"_getActiveElements",value:function(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;var i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}],[{key:"register",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];iH.add.apply(iH,(0,e8._)(t)),aa()}},{key:"unregister",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];iH.remove.apply(iH,(0,e8._)(t)),aa()}}]),e}();function aa(){return tM(ai.instances,function(e){return e._plugins.invalidate()})}function ao(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function as(e,t,n,r,i,a){var o,s,l,u,c,d,f,p,h=t.x,m=t.y,g=t.startAngle,x=t.pixelMargin,y=t.innerRadius,b=Math.max(t.outerRadius+r+n-x,0),w=y>0?y+r+n+x:0,_=0,k=i-g;if(r){var S=b>0?b-r:0,C=((y>0?y-r:0)+S)/2;_=(k-(0!==C?k*C/(C+r):k))/2}var j=Math.max(.001,k*b-n/tQ)/b,T=(k-j)/2,E=g+T+_,R=i-T-_,I=(o=t,s=w,l=b,u=R-E,c=nZ(o.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),f=Math.min(d=(l-s)/2,u*s/2),{outerStart:(p=function(e){var t=(l-Math.min(d,e))*u/2;return ns(e,0,Math.min(d,t))})(c.outerStart),outerEnd:p(c.outerEnd),innerStart:ns(c.innerStart,0,f),innerEnd:ns(c.innerEnd,0,f)}),A=I.outerStart,P=I.outerEnd,D=I.innerStart,O=I.innerEnd,N=b-A,M=b-P,L=E+A/N,B=R-P/M,V=w+D,F=w+O,U=E+D/V,G=R-O/F;if(e.beginPath(),a){var $=(L+B)/2;if(e.arc(h,m,b,L,$),e.arc(h,m,b,$,B),P>0){var H=ao(M,B,h,m);e.arc(H.x,H.y,P,B,R+t1)}var z=ao(F,R,h,m);if(e.lineTo(z.x,z.y),O>0){var W=ao(F,G,h,m);e.arc(W.x,W.y,O,R+t1,G+Math.PI)}var q=(R-O/w+(E+D/w))/2;if(e.arc(h,m,w,R-O/w,q,!0),e.arc(h,m,w,q,E+D/w,!0),D>0){var K=ao(V,U,h,m);e.arc(K.x,K.y,D,U+Math.PI,E-t1)}var Y=ao(N,E,h,m);if(e.lineTo(Y.x,Y.y),A>0){var Q=ao(N,L,h,m);e.arc(Q.x,Q.y,A,E-t1,L)}}else{e.moveTo(h,m);var X=Math.cos(L)*b+h,Z=Math.sin(L)*b+m;e.lineTo(X,Z);var J=Math.cos(B)*b+h,ee=Math.sin(B)*b+m;e.lineTo(J,ee)}e.closePath()}(0,e1._)(ai,"defaults",nL),(0,e1._)(ai,"instances",at),(0,e1._)(ai,"overrides",nD),(0,e1._)(ai,"registry",iH),(0,e1._)(ai,"version","4.4.0"),(0,e1._)(ai,"getChart",an);var al=function(e){function t(e){var n;return(0,eJ._)(this,t),n=(0,eZ._)(this,t),(0,e1._)(n,"circumference",void 0),(0,e1._)(n,"endAngle",void 0),(0,e1._)(n,"fullCircles",void 0),(0,e1._)(n,"innerRadius",void 0),(0,e1._)(n,"outerRadius",void 0),(0,e1._)(n,"pixelMargin",void 0),(0,e1._)(n,"startAngle",void 0),n.options=void 0,n.circumference=void 0,n.startAngle=void 0,n.endAngle=void 0,n.innerRadius=void 0,n.outerRadius=void 0,n.pixelMargin=0,n.fullCircles=0,e&&Object.assign(n,e),n}return(0,e5._)(t,e),(0,e0._)(t,[{key:"inRange",value:function(e,t,n){var r=nn(this.getProps(["x","y"],n),{x:e,y:t}),i=r.angle,a=r.distance,o=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),s=o.startAngle,l=o.endAngle,u=o.innerRadius,c=o.outerRadius,d=o.circumference,f=(this.options.spacing+this.options.borderWidth)/2,p=tD(d,l-s)>=tX||no(i,s,l),h=nl(a,u+f,c+f);return p&&h}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),n=t.x,r=t.y,i=t.startAngle,a=t.endAngle,o=t.innerRadius,s=t.outerRadius,l=this.options,u=l.offset,c=l.spacing,d=(i+a)/2,f=(o+s+c+u)/2;return{x:n+Math.cos(d)*f,y:r+Math.sin(d)*f}}},{key:"tooltipPosition",value:function(e){return this.getCenterPoint(e)}},{key:"draw",value:function(e){var t=this.options,n=this.circumference,r=(t.offset||0)/4,i=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin=.33*("inner"===t.borderAlign),this.fullCircles=n>tX?Math.floor(n/tX):0,0!==n&&!(this.innerRadius<0)&&!(this.outerRadius<0)){e.save();var o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*r,Math.sin(o)*r);var s=r*(1-Math.sin(Math.min(tQ,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){var a=t.fullCircles,o=t.startAngle,s=t.circumference,l=t.endAngle;if(a){as(e,t,n,r,l,i);for(var u=0;u<a;++u)e.fill();isNaN(s)||(l=o+(s%tX||tX))}as(e,t,n,r,l,i),e.fill()}(e,this,s,i,a),function(e,t,n,r,i){var a=t.fullCircles,o=t.startAngle,s=t.circumference,l=t.options,u=l.borderWidth,c=l.borderJoinStyle,d=l.borderDash,f=l.borderDashOffset,p="inner"===l.borderAlign;if(u){e.setLineDash(d||[]),e.lineDashOffset=f,p?(e.lineWidth=2*u,e.lineJoin=c||"round"):(e.lineWidth=u,e.lineJoin=c||"bevel");var h,m,g,x,y,b,w,_,k=t.endAngle;if(a){as(e,t,n,r,k,i);for(var S=0;S<a;++S)e.stroke();isNaN(s)||(k=o+(s%tX||tX))}p&&(h=k,m=t.startAngle,g=t.pixelMargin,x=t.x,y=t.y,b=t.outerRadius,w=t.innerRadius,_=g/b,e.beginPath(),e.arc(x,y,b,m-_,h+_),w>g?(_=g/w,e.arc(x,y,w,h+_,m-_,!0)):e.arc(x,y,g,h+t1,m-t1),e.closePath(),e.clip()),a||(as(e,t,n,r,k,i),e.stroke())}}(e,this,s,i,a),e.restore()}}}]),t}((0,e7._)(iN));function au(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=tD(n.borderCapStyle,t.borderCapStyle),e.setLineDash(tD(n.borderDash,t.borderDash)),e.lineDashOffset=tD(n.borderDashOffset,t.borderDashOffset),e.lineJoin=tD(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=tD(n.borderWidth,t.borderWidth),e.strokeStyle=tD(n.borderColor,t.borderColor)}function ac(e,t,n){e.lineTo(n.x,n.y)}function ad(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.length,i=n.start,a=void 0===i?0:i,o=n.end,s=void 0===o?r-1:o,l=t.start,u=t.end,c=Math.max(a,l),d=Math.min(s,u);return{count:r,start:c,loop:t.loop,ilen:d<c&&!(a<l&&s<l||a>u&&s>u)?r+d-c:d-c}}function af(e,t,n,r){var i,a,o,s=t.points,l=t.options,u=ad(s,n,r),c=u.count,d=u.start,f=u.loop,p=u.ilen,h=l.stepped?nW:l.tension||"monotone"===l.cubicInterpolationMode?nq:ac,m=r||{},g=m.move,x=void 0===g||g,y=m.reverse;for(i=0;i<=p;++i)(a=s[(d+(y?p-i:i))%c]).skip||(x?(e.moveTo(a.x,a.y),x=!1):h(e,o,a,y,l.stepped),o=a);return f&&h(e,o,a=s[(d+(y?p:0))%c],y,l.stepped),!!f}function ap(e,t,n,r){var i,a,o,s,l,u,c=t.points,d=ad(c,n,r),f=d.count,p=d.start,h=d.ilen,m=r||{},g=m.move,x=m.reverse,y=0,b=0,w=function(e){return(p+(x?h-e:e))%f},_=function(){s!==l&&(e.lineTo(y,l),e.lineTo(y,s),e.lineTo(y,u))};for((void 0===g||g)&&(a=c[w(0)],e.moveTo(a.x,a.y)),i=0;i<=h;++i)if(!(a=c[w(i)]).skip){var k=a.x,S=a.y,C=0|k;C===o?(S<s?s=S:S>l&&(l=S),y=(b*y+k)/++b):(_(),e.lineTo(k,S),o=C,b=0,s=l=S),u=S}_()}function ah(e){var t=e.options,n=t.borderDash&&t.borderDash.length;return e._decimated||e._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||n?af:ap}(0,e1._)(al,"id","arc"),(0,e1._)(al,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),(0,e1._)(al,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,e1._)(al,"descriptors",{_scriptable:!0,_indexable:function(e){return"borderDash"!==e}});var am="function"==typeof Path2D,ag=function(e){function t(e){var n;return(0,eJ._)(this,t),(n=(0,eZ._)(this,t)).animated=!0,n.options=void 0,n._chart=void 0,n._loop=void 0,n._fullLoop=void 0,n._path=void 0,n._points=void 0,n._segments=void 0,n._decimated=!1,n._pointsUpdated=!1,n._datasetIndex=void 0,e&&Object.assign(n,e),n}return(0,e5._)(t,e),(0,e0._)(t,[{key:"updateControlPoints",value:function(e,t){var n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){var r=n.spanGaps?this._loop:this._fullLoop;!function(e,t,n,r,i){var a,o,s,l;if(t.spanGaps&&(e=e.filter(function(e){return!e.skip})),"monotone"===t.cubicInterpolationMode)!function(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",a=rs(i),o=e.length,s=Array(o).fill(0),l=Array(o),u=ro(e,0);for(t=0;t<o;++t)if(n=r,r=u,u=ro(e,t+1),r){if(u){var c=u[i]-r[i];s[t]=0!==c?(u[a]-r[a])/c:0}l[t]=n?u?t4(s[t-1])!==t4(s[t])?0:(s[t-1]+s[t])/2:s[t-1]:s[t]}!function(e,t,n){for(var r,i,a,o,s,l=e.length,u=ro(e,0),c=0;c<l-1;++c)if(s=u,u=ro(e,c+1),s&&u){if(t8(t[c],0,ra)){n[c]=n[c+1]=0;continue}(o=Math.pow(r=n[c]/t[c],2)+Math.pow(i=n[c+1]/t[c],2))<=9||(a=3/Math.sqrt(o),n[c]=r*a*t[c],n[c+1]=i*a*t[c])}}(e,s,l),function(e,t){for(var n,r,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",o=rs(a),s=e.length,l=ro(e,0),u=0;u<s;++u)if(r=i,i=l,l=ro(e,u+1),i){var c=i[a],d=i[o];r&&(n=(c-r[a])/3,i["cp1".concat(a)]=c-n,i["cp1".concat(o)]=d-n*t[u]),l&&(n=(l[a]-c)/3,i["cp2".concat(a)]=c+n,i["cp2".concat(o)]=d+n*t[u])}}(e,l,i)}(e,i);else{var u=r?e[e.length-1]:e[0];for(a=0,o=e.length;a<o;++a)l=function(e,t,n,r){var i=e.skip?t:e,a=n.skip?t:n,o=nr(t,i),s=nr(a,t),l=o/(o+s),u=s/(o+s);l=isNaN(l)?0:l,u=isNaN(u)?0:u;var c=r*l,d=r*u;return{previous:{x:t.x-c*(a.x-i.x),y:t.y-c*(a.y-i.y)},next:{x:t.x+d*(a.x-i.x),y:t.y+d*(a.y-i.y)}}}(u,s=e[a],e[Math.min(a+1,o-!r)%o],t.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,u=s}t.capBezierPoints&&function(e,t){var n,r,i,a,o,s=n$(e[0],t);for(n=0,r=e.length;n<r;++n)o=a,a=s,s=n<r-1&&n$(e[n+1],t),a&&(i=e[n],o&&(i.cp1x=rl(i.cp1x,t.left,t.right),i.cp1y=rl(i.cp1y,t.top,t.bottom)),s&&(i.cp2x=rl(i.cp2x,t.left,t.right),i.cp2y=rl(i.cp2y,t.top,t.bottom)))}(e,n)}(this._points,n,e,r,t),this._pointsUpdated=!0}}},{key:"points",get:function(){return this._points},set:function(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}},{key:"segments",get:function(){return this._segments||(this._segments=function(e,t){var n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];var a=!!e._loop,o=function(e,t,n,r){var i=0,a=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(a+=i);a>i&&e[a%t].skip;)a--;return{start:i,end:a%=t}}(n,i,a,r),s=o.start,l=o.end;if(!0===r)return rI(e,[{start:s,end:l,loop:a}],n,t);var u=l<s?l+i:l,c=!!e._fullLoop&&0===s&&l===i-1;return rI(e,function(e,t,n,r){var i,a=e.length,o=[],s=t,l=e[t];for(i=t+1;i<=n;++i){var u=e[i%a];u.skip||u.stop?l.skip||(r=!1,o.push({start:t%a,end:(i-1)%a,loop:r}),t=s=u.stop?i:null):(s=i,l.skip&&(t=i)),l=u}return null!==s&&o.push({start:t%a,end:s%a,loop:r}),o}(n,s,u,c),n,t)}(this,this.options.segment))}},{key:"first",value:function(){var e=this.segments,t=this.points;return e.length&&t[e[0].start]}},{key:"last",value:function(){var e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}},{key:"interpolate",value:function(e,t){var n,r,i=this.options,a=e[t],o=this.points,s=rR(this,{property:t,start:a,end:a});if(s.length){var l=[],u=i.stepped?rw:i.tension||"monotone"===i.cubicInterpolationMode?r_:rb;for(n=0,r=s.length;n<r;++n){var c=s[n],d=c.start,f=c.end,p=o[d],h=o[f];if(p===h){l.push(p);continue}var m=Math.abs((a-p[t])/(h[t]-p[t])),g=u(p,h,m,i.stepped);g[t]=e[t],l.push(g)}return 1===l.length?l[0]:l}}},{key:"pathSegment",value:function(e,t,n){return ah(this)(e,this,t,n)}},{key:"path",value:function(e,t,n){var r=this.segments,i=ah(this),a=this._loop;t=t||0,n=n||this.points.length-t;var o=!0,s=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;a&=i(e,this,d,{start:t,end:t+n-1})}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}return!!a}},{key:"draw",value:function(e,t,n,r){var i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),function(e,t,n,r){if(am&&!t.options.segment){var i;(i=t._path)||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),au(e,t.options),e.stroke(i)}else!function(e,t,n,r){var i=t.segments,a=t.options,o=ah(t),s=!0,l=!1,u=void 0;try{for(var c,d=i[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value;au(e,a,f.style),e.beginPath(),o(e,t,f,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}(e,t,n,r)}(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}]),t}((0,e7._)(iN));function av(e,t,n,r){var i=e.options;return Math.abs(t-e.getProps([n],r)[n])<i.radius+i.hitRadius}(0,e1._)(ag,"id","line"),(0,e1._)(ag,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,e1._)(ag,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,e1._)(ag,"descriptors",{_scriptable:!0,_indexable:function(e){return"borderDash"!==e&&"fill"!==e}});var ax=function(e){function t(e){var n;return(0,eJ._)(this,t),n=(0,eZ._)(this,t),(0,e1._)(n,"parsed",void 0),(0,e1._)(n,"skip",void 0),(0,e1._)(n,"stop",void 0),n.options=void 0,n.parsed=void 0,n.skip=void 0,n.stop=void 0,e&&Object.assign(n,e),n}return(0,e5._)(t,e),(0,e0._)(t,[{key:"inRange",value:function(e,t,n){var r=this.options,i=this.getProps(["x","y"],n);return Math.pow(e-i.x,2)+Math.pow(t-i.y,2)<Math.pow(r.hitRadius+r.radius,2)}},{key:"inXRange",value:function(e,t){return av(this,e,"x",t)}},{key:"inYRange",value:function(e,t){return av(this,e,"y",t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"size",value:function(e){var t=(e=e||this.options||{}).radius||0,n=(t=Math.max(t,t&&e.hoverRadius||0))&&e.borderWidth||0;return(t+n)*2}},{key:"draw",value:function(e,t){var n=this.options;!this.skip&&!(n.radius<.1)&&n$(this,t,this.size(n)/2)&&(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,nU(e,n,this.x,this.y))}},{key:"getRange",value:function(){var e=this.options||{};return e.radius+e.hitRadius}}]),t}((0,e7._)(iN));function ay(e,t){var n,r,i,a,o,s=e.getProps(["x","y","base","width","height"],t),l=s.x,u=s.y,c=s.base,d=s.width,f=s.height;return e.horizontal?(o=f/2,n=Math.min(l,c),r=Math.max(l,c),i=u-o,a=u+o):(n=l-(o=d/2),r=l+o,i=Math.min(u,c),a=Math.max(u,c)),{left:n,top:i,right:r,bottom:a}}function ab(e,t,n,r){return e?0:ns(t,n,r)}function aw(e,t,n,r){var i=null===t,a=null===n,o=e&&!(i&&a)&&ay(e,r);return o&&(i||nl(t,o.left,o.right))&&(a||nl(n,o.top,o.bottom))}function a_(e,t){e.rect(t.x,t.y,t.w,t.h)}function ak(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+a,h:e.h+o,radius:e.radius}}(0,e1._)(ax,"id","point"),(0,e1._)(ax,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,e1._)(ax,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var aS=function(e){function t(e){var n;return(0,eJ._)(this,t),(n=(0,eZ._)(this,t)).options=void 0,n.horizontal=void 0,n.base=void 0,n.width=void 0,n.height=void 0,n.inflateAmount=void 0,e&&Object.assign(n,e),n}return(0,e5._)(t,e),(0,e0._)(t,[{key:"draw",value:function(e){var t,n,r,i,a,o,s,l,u,c,d,f,p,h,m,g,x,y,b,w=this.inflateAmount,_=this.options,k=_.borderColor,S=_.backgroundColor,C=(n=(t=ay(this)).right-t.left,r=t.bottom-t.top,i=n/2,a=r/2,o=this.options.borderWidth,s=this.borderSkipped,l=nJ(o),u={t:ab(s.top,l.top,0,a),r:ab(s.right,l.right,0,i),b:ab(s.bottom,l.bottom,0,a),l:ab(s.left,l.left,0,i)},c=n/2,d=r/2,f=this.getProps(["enableBorderRadius"]).enableBorderRadius,h=n0(p=this.options.borderRadius),m=Math.min(c,d),g=this.borderSkipped,y={topLeft:ab(!(x=f||tI(p))||g.top||g.left,h.topLeft,0,m),topRight:ab(!x||g.top||g.right,h.topRight,0,m),bottomLeft:ab(!x||g.bottom||g.left,h.bottomLeft,0,m),bottomRight:ab(!x||g.bottom||g.right,h.bottomRight,0,m)},{outer:{x:t.left,y:t.top,w:n,h:r,radius:y},inner:{x:t.left+u.l,y:t.top+u.t,w:n-u.l-u.r,h:r-u.t-u.b,radius:{topLeft:Math.max(0,y.topLeft-Math.max(u.t,u.l)),topRight:Math.max(0,y.topRight-Math.max(u.t,u.r)),bottomLeft:Math.max(0,y.bottomLeft-Math.max(u.b,u.l)),bottomRight:Math.max(0,y.bottomRight-Math.max(u.b,u.r))}}}),j=C.inner,T=C.outer,E=(b=T.radius).topLeft||b.topRight||b.bottomLeft||b.bottomRight?nY:a_;e.save(),(T.w!==j.w||T.h!==j.h)&&(e.beginPath(),E(e,ak(T,w,j)),e.clip(),E(e,ak(j,-w,T)),e.fillStyle=k,e.fill("evenodd")),e.beginPath(),E(e,ak(j,w)),e.fillStyle=S,e.fill(),e.restore()}},{key:"inRange",value:function(e,t,n){return aw(this,e,t,n)}},{key:"inXRange",value:function(e,t){return aw(this,e,null,t)}},{key:"inYRange",value:function(e,t){return aw(this,null,e,t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","base","horizontal"],e),n=t.x,r=t.y,i=t.base,a=t.horizontal;return{x:a?(n+i)/2:n,y:a?r:(r+i)/2}}},{key:"getRange",value:function(e){return"x"===e?this.width/2:this.height/2}}]),t}((0,e7._)(iN));(0,e1._)(aS,"id","bar"),(0,e1._)(aS,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,e1._)(aS,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var aC=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],aj=aC.map(function(e){return e.replace("rgb(","rgba(").replace(")",", 0.5)")});function aT(e,t,n,r){if(!r){var i=t[e],a=n[e];return"angle"===e&&(i=na(i),a=na(a)),{property:e,start:i,end:a}}}function aE(e,t,n){for(;t>e;t--){var r=n[t];if(!isNaN(r.x)&&!isNaN(r.y))break}return t}function aR(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function aI(e,t){var n,r,i,a,o,s,l,u=[],c=!1;return tR(e)?(c=!0,u=e):(i=void 0===(r=(n=e||{}).x)?null:r,o=void 0===(a=n.y)?null:a,s=t.points,l=[],t.segments.forEach(function(e){var t=e.start,n=e.end;n=aE(t,n,s);var r=s[t],a=s[n];null!==o?(l.push({x:r.x,y:o}),l.push({x:a.x,y:o})):null!==i&&(l.push({x:i,y:r.y}),l.push({x:i,y:a.y}))}),u=l),u.length?new ag({points:u,options:{tension:0},_loop:c,_fullLoop:c}):null}function aA(e){return e&&!1!==e.fill}var aP=function(){function e(t){(0,eJ._)(this,e),this.x=t.x,this.y=t.y,this.radius=t.radius}return(0,e0._)(e,[{key:"pathSegment",value:function(e,t,n){var r=this.x,i=this.y,a=this.radius;return t=t||{start:0,end:tX},e.arc(r,i,a,t.end,t.start,!0),!n.bounds}},{key:"interpolate",value:function(e){var t=this.x,n=this.y,r=this.radius,i=e.angle;return{x:t+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}]),e}();function aD(e,t,n){var r,i,a,o,s,l,u,c,d,f=function(e){var t,n,r,i,a=e.chart,o=e.fill,s=e.line;if(tA(o)){return t=a,n=o,(r=t.getDatasetMeta(n))&&t.isDatasetVisible(n)?r.dataset:null}if("stack"===o)return function(e){var t=e.scale,n=e.index,r=e.line,i=[],a=r.segments,o=r.points,s=function(e,t){for(var n=[],r=e.getMatchingVisibleMetas("line"),i=0;i<r.length;i++){var a=r[i];if(a.index===t)break;a.hidden||n.unshift(a.dataset)}return n}(t,n);s.push(aI({x:null,y:t.bottom},r));for(var l=0;l<a.length;l++)for(var u=a[l],c=u.start;c<=u.end;c++)!function(e,t,n){for(var r=[],i=0;i<n.length;i++){var a=function(e,t,n){var r=e.interpolate(t,"x");if(!r)return{};for(var i=r.x,a=e.segments,o=e.points,s=!1,l=!1,u=0;u<a.length;u++){var c=a[u],d=o[c.start].x,f=o[c.end].x;if(nl(i,d,f)){s=i===d,l=i===f;break}}return{first:s,last:l,point:r}}(n[i],t,"x"),o=a.first,s=a.last,l=a.point;if(l&&(!o||!s)){if(o)r.unshift(l);else if(e.push(l),!s)break}}e.push.apply(e,(0,e8._)(r))}(i,o[c],s);return new ag({points:i,options:{}})}(e);if("shape"===o)return!0;var l=((i=e).scale||{}).getPointPositionForValue?function(e){var t=e.scale,n=e.fill,r=t.options,i=t.getLabels().length,a=r.reverse?t.max:t.min,o="start"===n?a:"end"===n?t.options.reverse?t.min:t.max:tI(n)?n.value:t.getBaseValue(),s=[];if(r.grid.circular){var l=t.getPointPositionForValue(0,a);return new aP({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(var u=0;u<i;++u)s.push(t.getPointPositionForValue(u,o));return s}(i):function(e){var t,n,r=e.scale,i=void 0===r?{}:r,a=(t=e.fill,n=null,"start"===t?n=i.bottom:"end"===t?n=i.top:tI(t)?n=i.getPixelForValue(t.value):i.getBasePixel&&(n=i.getBasePixel()),n);if(tA(a)){var o=i.isHorizontal();return{x:o?a:null,y:o?null:a}}return null}(i);return(0,e4._)(l,aP)?l:aI(l,s)}(t),p=t.line,h=t.scale,m=t.axis,g=p.options,x=g.fill,y=g.backgroundColor,b=x||{},w=b.above,_=b.below;f&&p.points.length&&(nH(e,n),r=e,a=(i={line:p,target:f,above:void 0===w?y:w,below:void 0===_?y:_,area:n,scale:h,axis:m}).line,o=i.target,s=i.above,l=i.below,u=i.area,c=i.scale,d=a._loop?"angle":i.axis,r.save(),"x"===d&&l!==s&&(aO(r,o,u.top),aN(r,{line:a,target:o,color:s,scale:c,property:d}),r.restore(),r.save(),aO(r,o,u.bottom)),aN(r,{line:a,target:o,color:l,scale:c,property:d}),r.restore(),nz(e))}function aO(e,t,n){var r=t.segments,i=t.points,a=!0,o=!1;e.beginPath();var s=!0,l=!1,u=void 0;try{for(var c,d=r[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value,p=f.start,h=f.end,m=i[p],g=i[aE(p,h,i)];a?(e.moveTo(m.x,m.y),a=!1):(e.lineTo(m.x,n),e.lineTo(m.x,m.y)),(o=!!t.pathSegment(e,f,{move:o}))?e.closePath():e.lineTo(g.x,n)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function aN(e,t){var n=t.line,r=t.target,i=t.property,a=t.color,o=t.scale,s=function(e,t,n){var r=e.segments,i=e.points,a=t.points,o=[],s=!0,l=!1,u=void 0;try{for(var c,d=r[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value,p=f.start,h=f.end;h=aE(p,h,i);var m=aT(n,i[p],i[h],f.loop);if(!t.segments){o.push({source:f,target:m,start:i[p],end:i[h]});continue}var g=rR(t,m),x=!0,y=!1,b=void 0;try{for(var w,_=g[Symbol.iterator]();!(x=(w=_.next()).done);x=!0){var k=w.value,S=aT(n,a[k.start],a[k.end],k.loop),C=rE(f,i,S),j=!0,T=!1,E=void 0;try{for(var R,I=C[Symbol.iterator]();!(j=(R=I.next()).done);j=!0){var A=R.value;o.push({source:A,target:k,start:(0,e1._)({},n,aR(m,S,"start",Math.max)),end:(0,e1._)({},n,aR(m,S,"end",Math.min))})}}catch(e){T=!0,E=e}finally{try{j||null==I.return||I.return()}finally{if(T)throw E}}}}catch(e){y=!0,b=e}finally{try{x||null==_.return||_.return()}finally{if(y)throw b}}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return o}(n,r,i),l=!0,u=!1,c=void 0;try{for(var d,f=s[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value,h=p.source,m=p.target,g=p.start,x=p.end,y=h.style,b=(void 0===y?{}:y).backgroundColor,w=void 0===b?a:b,_=!0!==r;e.save(),e.fillStyle=w,function(e,t,n){var r=t.chart.chartArea,i=r.top,a=r.bottom,o=n||{},s=o.property,l=o.start,u=o.end;"x"===s&&(e.beginPath(),e.rect(l,i,u-l,a-i),e.clip())}(e,o,_&&aT(i,g,x)),e.beginPath();var k=!!n.pathSegment(e,h),S=void 0;if(_){k?e.closePath():aM(e,r,x,i);var C=!!r.pathSegment(e,m,{move:k,reverse:!0});(S=k&&C)||aM(e,r,g,i)}e.closePath(),e.fill(S?"evenodd":"nonzero"),e.restore()}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}}function aM(e,t,n,r){var i=t.interpolate(n,r);i&&e.lineTo(i.x,i.y)}var aL={id:"filler",afterDatasetsUpdate:function(e,t,n){var r,i,a,o,s=(e.data.datasets||[]).length,l=[];for(i=0;i<s;++i)a=(r=e.getDatasetMeta(i)).dataset,o=null,a&&a.options&&(0,e4._)(a,ag)&&(o={visible:e.isDatasetVisible(i),index:i,fill:function(e,t,n){var r,i,a,o,s=function(e){var t=e.options,n=t.fill,r=tD(n&&n.target,n);return void 0===r&&(r=!!t.backgroundColor),!1!==r&&null!==r&&(!0===r?"origin":r)}(e);if(tI(s))return!isNaN(s.value)&&s;var l=parseFloat(s);return tA(l)&&Math.floor(l)===l?(r=s[0],i=t,a=l,o=n,("-"===r||"+"===r)&&(a=i+a),a!==i&&!(a<0)&&!(a>=o)&&a):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}(a,i,s),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=o,l.push(o);for(i=0;i<s;++i)(o=l[i])&&!1!==o.fill&&(o.fill=function(e,t,n){var r,i=e[t].fill,a=[t];if(!n)return i;for(;!1!==i&&-1===a.indexOf(i);){if(!tA(i))return i;if(!(r=e[i]))break;if(r.visible)return i;a.push(i),i=r.fill}return!1}(l,i,n.propagate))},beforeDraw:function(e,t,n){for(var r="beforeDraw"===n.drawTime,i=e.getSortedVisibleDatasetMetas(),a=e.chartArea,o=i.length-1;o>=0;--o){var s=i[o].$filler;s&&(s.line.updateControlPoints(a,s.axis),r&&s.fill&&aD(e.ctx,s,a))}},beforeDatasetsDraw:function(e,t,n){if("beforeDatasetsDraw"===n.drawTime)for(var r=e.getSortedVisibleDatasetMetas(),i=r.length-1;i>=0;--i){var a=r[i].$filler;aA(a)&&aD(e.ctx,a,e.chartArea)}},beforeDatasetDraw:function(e,t,n){var r=t.meta.$filler;aA(r)&&"beforeDatasetDraw"===n.drawTime&&aD(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},aB=function(e,t){var n=e.boxHeight,r=void 0===n?t:n,i=e.boxWidth,a=void 0===i?t:i;return e.usePointStyle&&(r=Math.min(r,t),a=e.pointStyleWidth||Math.min(a,t)),{boxWidth:a,boxHeight:r,itemHeight:Math.max(t,r)}};function aV(e,t){return t*(e.text?e.text.length:0)}(function(e){function t(e){var n;return(0,eJ._)(this,t),(n=(0,eZ._)(this,t))._added=!1,n.legendHitBoxes=[],n._hoveredItem=null,n.doughnutMode=!1,n.chart=e.chart,n.options=e.options,n.ctx=e.ctx,n.legendItems=void 0,n.columnSizes=void 0,n.lineWidths=void 0,n.maxHeight=void 0,n.maxWidth=void 0,n.top=void 0,n.bottom=void 0,n.left=void 0,n.right=void 0,n.height=void 0,n.width=void 0,n._margins=void 0,n.position=void 0,n.weight=void 0,n.fullSize=void 0,n}(0,e5._)(t,e),(0,e0._)(t,[{key:"update",value:function(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}},{key:"buildLabels",value:function(){var e=this,t=this.options.labels||{},n=tN(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(function(n){return t.filter(n,e.chart.data)})),t.sort&&(n=n.sort(function(n,r){return t.sort(n,r,e.chart.data)})),this.options.reverse&&n.reverse(),this.legendItems=n}},{key:"fit",value:function(){var e,t,n=this.options,r=this.ctx;if(!n.display){this.width=this.height=0;return}var i=n.labels,a=n2(i.font),o=a.size,s=this._computeTitleHeight(),l=aB(i,o),u=l.boxWidth,c=l.itemHeight;r.font=a.string,this.isHorizontal()?(e=this.maxWidth,t=this._fitRows(s,o,u,c)+10):(t=this.maxHeight,e=this._fitCols(s,a,u,c)+10),this.width=Math.min(e,n.maxWidth||this.maxWidth),this.height=Math.min(t,n.maxHeight||this.maxHeight)}},{key:"_fitRows",value:function(e,t,n,r){var i=this.ctx,a=this.maxWidth,o=this.options.labels.padding,s=this.legendHitBoxes=[],l=this.lineWidths=[0],u=r+o,c=e;i.textAlign="left",i.textBaseline="middle";var d=-1,f=-u;return this.legendItems.forEach(function(e,p){var h=n+t/2+i.measureText(e.text).width;(0===p||l[l.length-1]+h+2*o>a)&&(c+=u,l[l.length-(p>0?0:1)]=0,f+=u,d++),s[p]={left:0,top:f,row:d,width:h,height:r},l[l.length-1]+=h+o}),c}},{key:"_fitCols",value:function(e,t,n,r){var i=this.ctx,a=this.maxHeight,o=this.options.labels.padding,s=this.legendHitBoxes=[],l=this.columnSizes=[],u=a-e,c=o,d=0,f=0,p=0,h=0;return this.legendItems.forEach(function(e,a){var m,g,x,y,b,w,_,k,S,C,j,T,E,R,I=(m=n,g=t,x=i,y=e,b=r,{itemWidth:(w=y,_=m,k=g,S=x,(C=w.text)&&"string"!=typeof C&&(C=C.reduce(function(e,t){return e.length>t.length?e:t})),_+k.size/2+S.measureText(C).width),itemHeight:(j=b,T=y,E=g.lineHeight,R=j,"string"!=typeof T.text&&(R=aV(T,E)),R)}),A=I.itemWidth,P=I.itemHeight;a>0&&f+P+2*o>u&&(c+=d+o,l.push({width:d,height:f}),p+=d+o,h++,d=f=0),s[a]={left:p,top:f,col:h,width:A,height:P},d=Math.max(d,A),f+=P+o}),c+=d,l.push({width:d,height:f}),c}},{key:"adjustHitBoxes",value:function(){if(this.options.display){var e=this._computeTitleHeight(),t=this.legendHitBoxes,n=this.options,r=n.align,i=n.labels.padding,a=rk(n.rtl,this.left,this.width);if(this.isHorizontal()){var o=0,s=nx(r,this.left+i,this.right-this.lineWidths[o]),l=!0,u=!1,c=void 0;try{for(var d,f=t[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;o!==p.row&&(o=p.row,s=nx(r,this.left+i,this.right-this.lineWidths[o])),p.top+=this.top+e+i,p.left=a.leftForLtr(a.x(s),p.width),s+=p.width+i}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}}else{var h=0,m=nx(r,this.top+e+i,this.bottom-this.columnSizes[h].height),g=!0,x=!1,y=void 0;try{for(var b,w=t[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var _=b.value;_.col!==h&&(h=_.col,m=nx(r,this.top+e+i,this.bottom-this.columnSizes[h].height)),_.top=m,_.left+=this.left+i,_.left=a.leftForLtr(a.x(_.left),_.width),m+=_.height+i}}catch(e){x=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(x)throw y}}}}}},{key:"isHorizontal",value:function(){return"top"===this.options.position||"bottom"===this.options.position}},{key:"draw",value:function(){if(this.options.display){var e=this.ctx;nH(e,this),this._draw(),nz(e)}}},{key:"_draw",value:function(){var e,t=this,n=this.options,r=this.columnSizes,i=this.lineWidths,a=this.ctx,o=n.align,s=n.labels,l=nL.color,u=rk(n.rtl,this.left,this.width),c=n2(s.font),d=s.padding,f=c.size,p=f/2;this.drawTitle(),a.textAlign=u.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=c.string;var h=aB(s,f),m=h.boxWidth,g=h.boxHeight,x=h.itemHeight,y=function(e,t,n){if(!(isNaN(m)||m<=0||isNaN(g))&&!(g<0)){a.save();var r=tD(n.lineWidth,1);if(a.fillStyle=tD(n.fillStyle,l),a.lineCap=tD(n.lineCap,"butt"),a.lineDashOffset=tD(n.lineDashOffset,0),a.lineJoin=tD(n.lineJoin,"miter"),a.lineWidth=r,a.strokeStyle=tD(n.strokeStyle,l),a.setLineDash(tD(n.lineDash,[])),s.usePointStyle)nG(a,{radius:g*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},u.xPlus(e,m/2),t+p,s.pointStyleWidth&&m);else{var i=t+Math.max((f-g)/2,0),o=u.leftForLtr(e,m),c=n0(n.borderRadius);a.beginPath(),Object.values(c).some(function(e){return 0!==e})?nY(a,{x:o,y:i,w:m,h:g,radius:c}):a.rect(o,i,m,g),a.fill(),0!==r&&a.stroke()}a.restore()}},b=function(e,t,n){nK(a,n.text,e,t+x/2,c,{strikethrough:n.hidden,textAlign:u.textAlign(n.textAlign)})},w=this.isHorizontal(),_=this._computeTitleHeight();e=w?{x:nx(o,this.left+d,this.right-i[0]),y:this.top+d+_,line:0}:{x:this.left+d,y:nx(o,this.top+_+d,this.bottom-r[0].height),line:0},rS(this.ctx,n.textDirection);var k=x+d;this.legendItems.forEach(function(l,f){a.strokeStyle=l.fontColor,a.fillStyle=l.fontColor;var h,g,x=a.measureText(l.text).width,S=u.textAlign(l.textAlign||(l.textAlign=s.textAlign)),C=m+p+x,j=e.x,T=e.y;if(u.setWidth(t.width),w?f>0&&j+C+d>t.right&&(T=e.y+=k,e.line++,j=e.x=nx(o,t.left+d,t.right-i[e.line])):f>0&&T+k>t.bottom&&(j=e.x=j+r[e.line].width+d,e.line++,T=e.y=nx(o,t.top+_+d,t.bottom-r[e.line].height)),y(u.x(j),T,l),h=j+m+p,g=w?j+C:t.right,j=S===(n.rtl?"left":"right")?g:"center"===S?(h+g)/2:h,b(u.x(j),T,l),w)e.x+=C+d;else if("string"!=typeof l.text){var E=c.lineHeight;e.y+=aV(l,E)+d}else e.y+=k}),rC(this.ctx,n.textDirection)}},{key:"drawTitle",value:function(){var e,t,n=this.options,r=n.title,i=n2(r.font),a=n1(r.padding);if(r.display){var o=rk(n.rtl,this.left,this.width),s=this.ctx,l=r.position,u=i.size/2,c=a.top+u,d=this.left,f=this.width;if(this.isHorizontal())f=(t=Math).max.apply(t,(0,e8._)(this.lineWidths)),e=this.top+c,d=nx(n.align,d,this.right-f);else{var p=this.columnSizes.reduce(function(e,t){return Math.max(e,t.height)},0);e=c+nx(n.align,this.top,this.bottom-p-n.labels.padding-this._computeTitleHeight())}var h=nx(l,d,d+f);s.textAlign=o.textAlign(nv(l)),s.textBaseline="middle",s.strokeStyle=r.color,s.fillStyle=r.color,s.font=i.string,nK(s,r.text,h,e,i)}}},{key:"_computeTitleHeight",value:function(){var e=this.options.title,t=n2(e.font),n=n1(e.padding);return e.display?t.lineHeight+n.height:0}},{key:"_getLegendItemAt",value:function(e,t){var n,r,i;if(nl(e,this.left,this.right)&&nl(t,this.top,this.bottom)){for(n=0,i=this.legendHitBoxes;n<i.length;++n)if(nl(e,(r=i[n]).left,r.left+r.width)&&nl(t,r.top,r.top+r.height))return this.legendItems[n]}return null}},{key:"handleEvent",value:function(e){var t,n,r=this.options;if(t=e.type,n=r,("mousemove"===t||"mouseout"===t)&&(n.onHover||n.onLeave)||n.onClick&&("click"===t||"mouseup"===t)){var i=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){var a=this._hoveredItem,o=null!==a&&null!==i&&a.datasetIndex===i.datasetIndex&&a.index===i.index;a&&!o&&tN(r.onLeave,[e,a,this],this),this._hoveredItem=i,i&&!o&&tN(r.onHover,[e,i,this],this)}else i&&tN(r.onClick,[e,i,this],this)}}}])})((0,e7._)(iN));var aF=function(e){function t(e){var n;return(0,eJ._)(this,t),(n=(0,eZ._)(this,t)).chart=e.chart,n.options=e.options,n.ctx=e.ctx,n._padding=void 0,n.top=void 0,n.bottom=void 0,n.left=void 0,n.right=void 0,n.width=void 0,n.height=void 0,n.position=void 0,n.weight=void 0,n.fullSize=void 0,n}return(0,e5._)(t,e),(0,e0._)(t,[{key:"update",value:function(e,t){var n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;var r=tR(n.text)?n.text.length:1;this._padding=n1(n.padding);var i=r*n2(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}},{key:"isHorizontal",value:function(){var e=this.options.position;return"top"===e||"bottom"===e}},{key:"_drawArgs",value:function(e){var t,n,r,i=this.top,a=this.left,o=this.bottom,s=this.right,l=this.options,u=l.align,c=0;return this.isHorizontal()?(n=nx(u,a,s),r=i+e,t=s-a):("left"===l.position?(n=a+e,r=nx(u,o,i),c=-.5*tQ):(n=s-e,r=nx(u,i,o),c=.5*tQ),t=o-i),{titleX:n,titleY:r,maxWidth:t,rotation:c}}},{key:"draw",value:function(){var e=this.ctx,t=this.options;if(t.display){var n=n2(t.font),r=n.lineHeight/2+this._padding.top,i=this._drawArgs(r),a=i.titleX,o=i.titleY,s=i.maxWidth,l=i.rotation;nK(e,t.text,0,0,n,{color:t.color,maxWidth:s,rotation:l,textAlign:nv(t.align),textBaseline:"middle",translation:[a,o]})}}}]),t}((0,e7._)(iN)),aU={id:"title",_element:aF,start:function(e,t,n){var r;r=new aF({ctx:e.ctx,options:n,chart:e}),iv(e,r,n),im(e,r),e.titleBlock=r},stop:function(e){var t=e.titleBlock;ig(e,t),delete e.titleBlock},beforeUpdate:function(e,t,n){var r=e.titleBlock;iv(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},aG=(new WeakMap,{average:function(e){if(!e.length)return!1;var t,n,r=0,i=0,a=0;for(t=0,n=e.length;t<n;++t){var o=e[t].element;if(o&&o.hasValue()){var s=o.tooltipPosition();r+=s.x,i+=s.y,++a}}return{x:r/a,y:i/a}},nearest:function(e,t){if(!e.length)return!1;var n,r,i,a=t.x,o=t.y,s=1/0;for(n=0,r=e.length;n<r;++n){var l=e[n].element;if(l&&l.hasValue()){var u=nr(t,l.getCenterPoint());u<s&&(s=u,i=l)}}if(i){var c=i.tooltipPosition();a=c.x,o=c.y}return{x:a,y:o}}});function a$(e,t){return t&&(tR(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function aH(e){return("string"==typeof e||(0,e4._)(e,String))&&e.indexOf("\n")>-1?e.split("\n"):e}function az(e,t){var n=e.chart.ctx,r=e.body,i=e.footer,a=e.title,o=t.boxWidth,s=t.boxHeight,l=n2(t.bodyFont),u=n2(t.titleFont),c=n2(t.footerFont),d=a.length,f=i.length,p=r.length,h=n1(t.padding),m=h.height,g=0,x=r.reduce(function(e,t){return e+t.before.length+t.lines.length+t.after.length},0);x+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*u.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),x&&(m+=p*(t.displayColors?Math.max(s,l.lineHeight):l.lineHeight)+(x-p)*l.lineHeight+(x-1)*t.bodySpacing),f&&(m+=t.footerMarginTop+f*c.lineHeight+(f-1)*t.footerSpacing);var y=0,b=function(e){g=Math.max(g,n.measureText(e).width+y)};return n.save(),n.font=u.string,tM(e.title,b),n.font=l.string,tM(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?o+2+t.boxPadding:0,tM(r,function(e){tM(e.before,b),tM(e.lines,b),tM(e.after,b)}),y=0,n.font=c.string,tM(e.footer,b),n.restore(),{width:g+=h.width,height:m}}function aW(e,t,n){var r,i,a,o,s,l,u,c,d,f=n.yAlign||t.yAlign||((r=n.y)<(i=n.height)/2?"top":r>e.height-i/2?"bottom":"center");return{xAlign:n.xAlign||t.xAlign||(a=n.x,o=n.width,s=e.width,u=(l=e.chartArea).left,c=l.right,d="center","center"===f?d=a<=(u+c)/2?"left":"right":a<=o/2?d="left":a>=s-o/2&&(d="right"),function(e,t,n,r){var i=r.x,a=r.width,o=n.caretSize+n.caretPadding;if("left"===e&&i+a+o>t.width||"right"===e&&i-a-o<0)return!0}(d,e,t,n)&&(d="center"),d),yAlign:f}}function aq(e,t,n,r){var i,a,o,s,l=e.caretSize,u=e.caretPadding,c=e.cornerRadius,d=n.xAlign,f=n.yAlign,p=l+u,h=n0(c),m=h.topLeft,g=h.topRight,x=h.bottomLeft,y=h.bottomRight,b=(i=t.x,a=t.width,"right"===d?i-=a:"center"===d&&(i-=a/2),i),w=(o=t.y,s=t.height,"top"===f?o+=p:"bottom"===f?o-=s+p:o-=s/2,o);return"center"===f?"left"===d?b+=p:"right"===d&&(b-=p):"left"===d?b-=Math.max(m,x)+l:"right"===d&&(b+=Math.max(g,y)+l),{x:ns(b,0,r.width-t.width),y:ns(w,0,r.height-t.height)}}function aK(e,t,n){var r=n1(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function aY(e,t){var n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}var aQ={beforeTitle:tj,title:function(e){if(e.length>0){var t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:tj,beforeBody:tj,beforeLabel:tj,label:function(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;var t=e.dataset.label||"";t&&(t+=": ");var n=e.formattedValue;return tE(n)||(t+=n),t},labelColor:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor:function(){return this.options.bodyColor},labelPointStyle:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:tj,afterBody:tj,beforeFooter:tj,footer:tj,afterFooter:tj};function aX(e,t,n,r){var i=e[t].call(n,r);return void 0===i?aQ[t].call(n,r):i}var aZ=function(e){function t(e){var n;return(0,eJ._)(this,t),(n=(0,eZ._)(this,t)).opacity=0,n._active=[],n._eventPosition=void 0,n._size=void 0,n._cachedAnimations=void 0,n._tooltipItems=[],n.$animations=void 0,n.$context=void 0,n.chart=e.chart,n.options=e.options,n.dataPoints=void 0,n.title=void 0,n.beforeBody=void 0,n.body=void 0,n.afterBody=void 0,n.footer=void 0,n.xAlign=void 0,n.yAlign=void 0,n.x=void 0,n.y=void 0,n.height=void 0,n.width=void 0,n.caretX=void 0,n.caretY=void 0,n.labelColors=void 0,n.labelPointStyles=void 0,n.labelTextColors=void 0,n}return(0,e5._)(t,e),(0,e0._)(t,[{key:"initialize",value:function(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}},{key:"_resolveAnimations",value:function(){var e=this._cachedAnimations;if(e)return e;var t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new rM(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}},{key:"getContext",value:function(){var e;return this.$context||(this.$context=(e=this.chart.getContext(),n5(e,{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"})))}},{key:"getTitle",value:function(e,t){var n=t.callbacks,r=aX(n,"beforeTitle",this,e),i=aX(n,"title",this,e),a=aX(n,"afterTitle",this,e),o=[];return o=a$(o,aH(r)),o=a$(o,aH(i)),o=a$(o,aH(a))}},{key:"getBeforeBody",value:function(e,t){return a$([],aH(aX(t.callbacks,"beforeBody",this,e)))}},{key:"getBody",value:function(e,t){var n=this,r=t.callbacks,i=[];return tM(e,function(e){var t={before:[],lines:[],after:[]},a=aY(r,e);a$(t.before,aH(aX(a,"beforeLabel",n,e))),a$(t.lines,aX(a,"label",n,e)),a$(t.after,aH(aX(a,"afterLabel",n,e))),i.push(t)}),i}},{key:"getAfterBody",value:function(e,t){return a$([],aH(aX(t.callbacks,"afterBody",this,e)))}},{key:"getFooter",value:function(e,t){var n=t.callbacks,r=aX(n,"beforeFooter",this,e),i=aX(n,"footer",this,e),a=aX(n,"afterFooter",this,e),o=[];return o=a$(o,aH(r)),o=a$(o,aH(i)),o=a$(o,aH(a))}},{key:"_createItems",value:function(e){var t,n,r=this,i=this._active,a=this.chart.data,o=[],s=[],l=[],u=[];for(t=0,n=i.length;t<n;++t)u.push(function(e,t){var n=t.element,r=t.datasetIndex,i=t.index,a=e.getDatasetMeta(r).controller,o=a.getLabelAndValue(i),s=o.label,l=o.value;return{chart:e,label:s,parsed:a.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:l,dataset:a.getDataset(),dataIndex:i,datasetIndex:r,element:n}}(this.chart,i[t]));return e.filter&&(u=u.filter(function(t,n,r){return e.filter(t,n,r,a)})),e.itemSort&&(u=u.sort(function(t,n){return e.itemSort(t,n,a)})),tM(u,function(t){var n=aY(e.callbacks,t);o.push(aX(n,"labelColor",r,t)),s.push(aX(n,"labelPointStyle",r,t)),l.push(aX(n,"labelTextColor",r,t))}),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=l,this.dataPoints=u,u}},{key:"update",value:function(e,t){var n,r=this.options.setContext(this.getContext()),i=this._active,a=[];if(i.length){var o=aG[r.position].call(this,i,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);var s=this._size=az(this,r),l=Object.assign({},o,s),u=aW(this.chart,r,l),c=aq(r,l,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,n={opacity:1,x:c.x,y:c.y,width:s.width,height:s.height,caretX:o.x,caretY:o.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=a,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}},{key:"drawCaret",value:function(e,t,n,r){var i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}},{key:"getCaretPosition",value:function(e,t,n){var r,i,a,o,s,l,u=this.xAlign,c=this.yAlign,d=n.caretSize,f=n0(n.cornerRadius),p=f.topLeft,h=f.topRight,m=f.bottomLeft,g=f.bottomRight,x=e.x,y=e.y,b=t.width,w=t.height;return"center"===c?(s=y+w/2,"left"===u?(i=(r=x)-d,o=s+d,l=s-d):(i=(r=x+b)+d,o=s-d,l=s+d),a=r):(i="left"===u?x+Math.max(p,m)+d:"right"===u?x+b-Math.max(h,g)-d:this.caretX,"top"===c?(s=(o=y)-d,r=i-d,a=i+d):(s=(o=y+w)+d,r=i+d,a=i-d),l=o),{x1:r,x2:i,x3:a,y1:o,y2:s,y3:l}}},{key:"drawTitle",value:function(e,t,n){var r,i,a,o=this.title,s=o.length;if(s){var l=rk(n.rtl,this.x,this.width);for(a=0,e.x=aK(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",r=n2(n.titleFont),i=n.titleSpacing,t.fillStyle=n.titleColor,t.font=r.string;a<s;++a)t.fillText(o[a],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+i,a+1===s&&(e.y+=n.titleMarginBottom-i)}}},{key:"_drawColorBox",value:function(e,t,n,r,i){var a=this.labelColors[n],o=this.labelPointStyles[n],s=i.boxHeight,l=i.boxWidth,u=n2(i.bodyFont),c=aK(this,"left",i),d=r.x(c),f=s<u.lineHeight?(u.lineHeight-s)/2:0,p=t.y+f;if(i.usePointStyle){var h={radius:Math.min(l,s)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},m=r.leftForLtr(d,l)+l/2,g=p+s/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,nU(e,h,m,g),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,nU(e,h,m,g)}else{e.lineWidth=tI(a.borderWidth)?(x=Math).max.apply(x,(0,e8._)(Object.values(a.borderWidth))):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;var x,y=r.leftForLtr(d,l),b=r.leftForLtr(r.xPlus(d,1),l-2),w=n0(a.borderRadius);Object.values(w).some(function(e){return 0!==e})?(e.beginPath(),e.fillStyle=i.multiKeyBackground,nY(e,{x:y,y:p,w:l,h:s,radius:w}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),nY(e,{x:b,y:p+1,w:l-2,h:s-2,radius:w}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(y,p,l,s),e.strokeRect(y,p,l,s),e.fillStyle=a.backgroundColor,e.fillRect(b,p+1,l-2,s-2))}e.fillStyle=this.labelTextColors[n]}},{key:"drawBody",value:function(e,t,n){var r,i,a,o,s,l,u=this.body,c=n.bodySpacing,d=n.bodyAlign,f=n.displayColors,p=n.boxHeight,h=n.boxWidth,m=n.boxPadding,g=n2(n.bodyFont),x=g.lineHeight,y=0,b=rk(n.rtl,this.x,this.width),w=function(n){t.fillText(n,b.x(e.x+y),e.y+x/2),e.y+=x+c},_=b.textAlign(d);for(t.textAlign=d,t.textBaseline="middle",t.font=g.string,e.x=aK(this,_,n),t.fillStyle=n.bodyColor,tM(this.beforeBody,w),y=f&&"right"!==_?"center"===d?h/2+m:h+2+m:0,a=0,s=u.length;a<s;++a){for(r=u[a],t.fillStyle=this.labelTextColors[a],tM(r.before,w),i=r.lines,f&&i.length&&(this._drawColorBox(t,e,a,b,n),x=Math.max(g.lineHeight,p)),o=0,l=i.length;o<l;++o)w(i[o]),x=g.lineHeight;tM(r.after,w)}y=0,x=g.lineHeight,tM(this.afterBody,w),e.y-=c}},{key:"drawFooter",value:function(e,t,n){var r,i,a=this.footer,o=a.length;if(o){var s=rk(n.rtl,this.x,this.width);for(e.x=aK(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=s.textAlign(n.footerAlign),t.textBaseline="middle",r=n2(n.footerFont),t.fillStyle=n.footerColor,t.font=r.string,i=0;i<o;++i)t.fillText(a[i],s.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n.footerSpacing}}},{key:"drawBackground",value:function(e,t,n,r){var i=this.xAlign,a=this.yAlign,o=e.x,s=e.y,l=n.width,u=n.height,c=n0(r.cornerRadius),d=c.topLeft,f=c.topRight,p=c.bottomLeft,h=c.bottomRight;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+d,s),"top"===a&&this.drawCaret(e,t,n,r),t.lineTo(o+l-f,s),t.quadraticCurveTo(o+l,s,o+l,s+f),"center"===a&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+l,s+u-h),t.quadraticCurveTo(o+l,s+u,o+l-h,s+u),"bottom"===a&&this.drawCaret(e,t,n,r),t.lineTo(o+p,s+u),t.quadraticCurveTo(o,s+u,o,s+u-p),"center"===a&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(o,s+d),t.quadraticCurveTo(o,s,o+d,s),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}},{key:"_updateAnimationTarget",value:function(e){var t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){var a=aG[e.position].call(this,this._active,this._eventPosition);if(!a)return;var o=this._size=az(this,e),s=Object.assign({},a,this._size),l=aW(t,e,s),u=aq(e,s,l,t);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}},{key:"_willRender",value:function(){return!!this.opacity}},{key:"draw",value:function(e){var t=this.options.setContext(this.getContext()),n=this.opacity;if(n){this._updateAnimationTarget(t);var r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=.001>Math.abs(n)?0:n;var a=n1(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),rS(e,t.textDirection),i.y+=a.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),rC(e,t.textDirection),e.restore())}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e,t){var n=this,r=this._active,i=e.map(function(e){var t=e.datasetIndex,r=e.index,i=n.chart.getDatasetMeta(t);if(!i)throw Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[r],index:r}}),a=!tL(r,i),o=this._positionChanged(i,t);(a||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}},{key:"handleEvent",value:function(e,t){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;var r=this.options,i=this._active||[],a=this._getActiveElements(e,i,t,n),o=this._positionChanged(a,e),s=t||!tL(a,i)||o;return s&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),s}},{key:"_getActiveElements",value:function(e,t,n,r){var i=this.options;if("mouseout"===e.type)return[];if(!r)return t;var a=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&a.reverse(),a}},{key:"_positionChanged",value:function(e,t){var n=this.caretX,r=this.caretY,i=aG[this.options.position].call(this,e,t);return!1!==i&&(n!==i.x||r!==i.y)}}]),t}((0,e7._)(iN));(0,e1._)(aZ,"positioners",aG);var aJ={id:"tooltip",_element:aZ,positioners:aG,afterInit:function(e,t,n){n&&(e.tooltip=new aZ({chart:e,options:n}))},beforeUpdate:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw:function(e){var t=e.tooltip;if(t&&t._willRender()){var n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",(0,T._)((0,j._)({},n),{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent:function(e,t){if(e.tooltip){var n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:function(e,t){return t.bodyFont.size},boxWidth:function(e,t){return t.bodyFont.size},multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:aQ},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:function(e){return"filter"!==e&&"itemSort"!==e&&"external"!==e},_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function a0(e){var t=this.getLabels();return e>=0&&e<t.length?t[e]:e}var a1=function(e){function t(e){var n;return(0,eJ._)(this,t),(n=(0,eZ._)(this,t,[e]))._startValue=void 0,n._valueRange=0,n._addedLabels=[],n}return(0,e5._)(t,e),(0,e0._)(t,[{key:"init",value:function(e){var n=this._addedLabels;if(n.length){var r=this.getLabels(),i=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,c=u.index,d=u.label;r[c]===d&&r.splice(c,1)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}this._addedLabels=[]}(0,e2._)((0,e3._)(t.prototype),"init",this).call(this,e)}},{key:"parse",value:function(e,t){if(tE(e))return null;var n,r,i=this.getLabels();return n=t=isFinite(t)&&i[t]===e?t:function(e,t,n,r){var i,a=e.indexOf(t);return -1===a?(i=n,"string"==typeof t?(i=e.push(t)-1,r.unshift({index:i,label:t})):isNaN(t)&&(i=null),i):a!==e.lastIndexOf(t)?n:a}(i,e,tD(t,e),this._addedLabels),r=i.length-1,null===n?null:ns(Math.round(n),0,r)}},{key:"determineDataLimits",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,r=this.getMinMax(!0),i=r.min,a=r.max;"ticks"===this.options.bounds&&(t||(i=0),n||(a=this.getLabels().length-1)),this.min=i,this.max=a}},{key:"buildTicks",value:function(){var e=this.min,t=this.max,n=this.options.offset,r=[],i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-!n,1),this._startValue=this.min-.5*!!n;for(var a=e;a<=t;a++)r.push({value:a});return r}},{key:"getLabelForValue",value:function(e){return a0.call(this,e)}},{key:"configure",value:function(){(0,e2._)((0,e3._)(t.prototype),"configure",this).call(this),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}},{key:"getPixelForValue",value:function(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getValueForPixel",value:function(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}},{key:"getBasePixel",value:function(){return this.bottom}}]),t}(iG);function a2(e,t,n){var r=n.horizontal,i=ne(n.minRotation),a=(r?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}(0,e1._)(a1,"id","category"),(0,e1._)(a1,"defaults",{ticks:{callback:a0}});var a3=function(e){function t(e){var n;return(0,eJ._)(this,t),(n=(0,eZ._)(this,t,[e])).start=void 0,n.end=void 0,n._startValue=void 0,n._endValue=void 0,n._valueRange=0,n}return(0,e5._)(t,e),(0,e0._)(t,[{key:"parse",value:function(e,t){return tE(e)||("number"==typeof e||(0,e4._)(e,Number))&&!isFinite(+e)?null:+e}},{key:"handleTickRangeOptions",value:function(){var e=this.options.beginAtZero,t=this.getUserBounds(),n=t.minDefined,r=t.maxDefined,i=this.min,a=this.max,o=function(e){return i=n?i:e},s=function(e){return a=r?a:e};if(e){var l=t4(i),u=t4(a);l<0&&u<0?s(0):l>0&&u>0&&o(0)}if(i===a){var c=0===a?1:Math.abs(.05*a);s(a+c),e||o(i-c)}this.min=i,this.max=a}},{key:"getTickLimit",value:function(){var e,t=this.options.ticks,n=t.maxTicksLimit,r=t.stepSize;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1)>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}},{key:"computeTickLimit",value:function(){return 1/0}},{key:"buildTicks",value:function(){var e=this.options,t=e.ticks,n=this.getTickLimit(),r=function(e,t){var n,r,i,a,o,s,l,u=[],c=e.bounds,d=e.step,f=e.min,p=e.max,h=e.precision,m=e.count,g=e.maxTicks,x=e.maxDigits,y=e.includeBounds,b=d||1,w=g-1,_=t.min,k=t.max,S=!tE(f),C=!tE(p),j=!tE(m),T=(k-_)/(x+1),E=t6((k-_)/w/b)*b;if(E<1e-14&&!S&&!C)return[{value:_},{value:k}];((l=Math.ceil(k/E)-Math.floor(_/E))>w&&(E=t6(l*E/w/b)*b),tE(h)||(E=Math.ceil(E*(a=Math.pow(10,h)))/a),"ticks"===c?(o=Math.floor(_/E)*E,s=Math.ceil(k/E)*E):(o=_,s=k),S&&C&&d&&(n=(p-f)/d,r=E/1e3,(i=Math.round(n))-r<=n&&i+r>=n))?(l=Math.round(Math.min((p-f)/E,g)),E=(p-f)/l,o=f,s=p):j?(o=S?f:o,E=((s=C?p:s)-o)/(l=m-1)):l=t8(l=(s-o)/E,Math.round(l),E/1e3)?Math.round(l):Math.ceil(l);var R=Math.max(nt(E),nt(o));o=Math.round(o*(a=Math.pow(10,tE(h)?R:h)))/a,s=Math.round(s*a)/a;var I=0;for(S&&(y&&o!==f?(u.push({value:f}),o<f&&I++,t8(Math.round((o+I*E)*a)/a,f,a2(f,T,e))&&I++):o<f&&I++);I<l;++I){var A=Math.round((o+I*E)*a)/a;if(C&&A>p)break;u.push({value:A})}return C&&y&&s!==p?u.length&&t8(u[u.length-1].value,p,a2(p,T,e))?u[u.length-1].value=p:u.push({value:p}):C&&s!==p||u.push({value:s}),u}({maxTicks:n=Math.max(2,n),bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&t9(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}},{key:"configure",value:function(){var e=this.ticks,n=this.min,r=this.max;if((0,e2._)((0,e3._)(t.prototype),"configure",this).call(this),this.options.offset&&e.length){var i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}},{key:"getLabelForValue",value:function(e){return nA(e,this.chart.options.locale,this.options.ticks.format)}}]),t}(iG),a5=function(e){function t(){return(0,eJ._)(this,t),(0,eZ._)(this,t,arguments)}return(0,e5._)(t,e),(0,e0._)(t,[{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=tA(t)?t:0,this.max=tA(n)?n:1,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){var e=this.isHorizontal(),t=e?this.width:this.height,n=ne(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001;return Math.ceil(t/Math.min(40,this._resolveTickFontOptions(0).lineHeight/r))}},{key:"getPixelForValue",value:function(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}]),t}(a3);(0,e1._)(a5,"id","linear"),(0,e1._)(a5,"defaults",{ticks:{callback:nP.numeric}});var a4=function(e){return Math.floor(t5(e))},a8=function(e,t){return Math.pow(10,a4(e)+t)};function a6(e){return 1==e/Math.pow(10,a4(e))}function a7(e,t,n){var r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}var a9=function(e){function t(e){var n;return(0,eJ._)(this,t),(n=(0,eZ._)(this,t,[e])).start=void 0,n.end=void 0,n._startValue=void 0,n._valueRange=0,n}return(0,e5._)(t,e),(0,e0._)(t,[{key:"parse",value:function(e,t){var n=a3.prototype.parse.apply(this,[e,t]);if(0===n){this._zero=!0;return}return tA(n)&&n>0?n:null}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=tA(t)?Math.max(0,t):null,this.max=tA(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!tA(this._userMin)&&(this.min=t===a8(this.min,0)?a8(this.min,-1):a8(this.min,0)),this.handleTickRangeOptions()}},{key:"handleTickRangeOptions",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,r=this.min,i=this.max,a=function(e){return r=t?r:e},o=function(e){return i=n?i:e};r===i&&(r<=0?(a(1),o(10)):(a(a8(r,-1)),o(a8(i,1)))),r<=0&&a(a8(i,-1)),i<=0&&o(a8(r,1)),this.min=r,this.max=i}},{key:"buildTicks",value:function(){var e=this.options,t=function(e,t){var n=t.min,r=t.max;n=tP(e.min,n);for(var i=[],a=a4(n),o=function(e,t){for(var n=a4(t-e);a7(e,t,n)>10;)n++;for(;10>a7(e,t,n);)n--;return Math.min(n,a4(e))}(n,r),s=o<0?Math.pow(10,Math.abs(o)):1,l=Math.pow(10,o),u=a>o?Math.pow(10,a):0,c=Math.round((n-u)*s)/s,d=Math.floor((n-u)/l/10)*l*10,f=Math.floor((c-d)/Math.pow(10,o)),p=tP(e.min,Math.round((u+d+f*Math.pow(10,o))*s)/s);p<r;)i.push({value:p,major:a6(p),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(f=2,s=++o>=0?1:s),p=Math.round((u+d+f*Math.pow(10,o))*s)/s;var h=tP(e.max,p);return i.push({value:h,major:a6(h),significand:f}),i}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&t9(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}},{key:"getLabelForValue",value:function(e){return void 0===e?"0":nA(e,this.chart.options.locale,this.options.ticks.format)}},{key:"configure",value:function(){var e=this.min;(0,e2._)((0,e3._)(t.prototype),"configure",this).call(this),this._startValue=t5(e),this._valueRange=t5(this.max)-t5(e)}},{key:"getPixelForValue",value:function(e){return((void 0===e||0===e)&&(e=this.min),null===e||isNaN(e))?NaN:this.getPixelForDecimal(e===this.min?0:(t5(e)-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){var t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}]),t}(iG);function oe(e){var t=e.ticks;if(t.display&&e.display){var n=n1(t.backdropPadding);return tD(t.font&&t.font.size,nL.font.size)+n.height}return 0}function ot(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function on(e,t,n,r){var i=e.ctx;if(n)i.arc(e.xCenter,e.yCenter,t,0,tX);else{var a=e.getPointPosition(0,t);i.moveTo(a.x,a.y);for(var o=1;o<r;o++)a=e.getPointPosition(o,t),i.lineTo(a.x,a.y)}}(0,e1._)(a9,"id","logarithmic"),(0,e1._)(a9,"defaults",{ticks:{callback:nP.logarithmic,major:{enabled:!0}}});var or=function(e){function t(e){var n;return(0,eJ._)(this,t),(n=(0,eZ._)(this,t,[e])).xCenter=void 0,n.yCenter=void 0,n.drawingArea=void 0,n._pointLabels=[],n._pointLabelItems=[],n}return(0,e5._)(t,e),(0,e0._)(t,[{key:"setDimensions",value:function(){var e=this._padding=n1(oe(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!1),t=e.min,n=e.max;this.min=tA(t)&&!isNaN(t)?t:0,this.max=tA(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){return Math.ceil(this.drawingArea/oe(this.options))}},{key:"generateTickLabels",value:function(e){var t=this;a3.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(function(e,n){var r=tN(t.options.pointLabels.callback,[e,n],t);return r||0===r?r:""}).filter(function(e,n){return t.chart.getDataVisibility(n)})}},{key:"fit",value:function(){var e=this.options;e.display&&e.pointLabels.display?function(e){for(var t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],a=e._pointLabels.length,o=e.options.pointLabels,s=o.centerPointLabels?tQ/a:0,l=0;l<a;l++){var u,c,d=o.setContext(e.getPointLabelContext(l));i[l]=d.padding;var f=e.getPointPosition(l,e.drawingArea+i[l],s),p=n2(d.font),h=(u=e.ctx,c=tR(c=e._pointLabels[l])?c:[c],{w:function(e,t,n,r){var i,a,o,s,l,u=(r=r||{}).data=r.data||{},c=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(u=r.data={},c=r.garbageCollect=[],r.font=t),e.save(),e.font=t;var d=0,f=n.length;for(i=0;i<f;i++)if(null==(s=n[i])||tR(s)){if(tR(s))for(a=0,o=s.length;a<o;a++)null==(l=s[a])||tR(l)||(d=nB(e,u,c,d,l))}else d=nB(e,u,c,d,s);e.restore();var p=c.length/2;if(p>n.length){for(i=0;i<p;i++)delete u[c[i]];c.splice(0,p)}return d}(u,p.string,c),h:c.length*p.lineHeight});r[l]=h;var m=na(e.getIndexAngle(l)+s),g=Math.round(180/tQ*m);!function(e,t,n,r,i){var a=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n)),s=0,l=0;r.start<t.l?(s=(t.l-r.start)/a,e.l=Math.min(e.l,t.l-s)):r.end>t.r&&(s=(r.end-t.r)/a,e.r=Math.max(e.r,t.r+s)),i.start<t.t?(l=(t.t-i.start)/o,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}(n,t,m,ot(g,f.x,h.w,0,180),ot(g,f.y,h.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){for(var r,i=[],a=e._pointLabels.length,o=e.options,s=o.pointLabels,l=s.centerPointLabels,u=s.display,c={extra:oe(o)/2,additionalAngle:l?tQ/a:0},d=0;d<a;d++){c.padding=n[d],c.size=t[d];var f=function(e,t,n){var r,i,a,o,s,l,u,c=e.drawingArea,d=n.extra,f=n.additionalAngle,p=n.padding,h=n.size,m=e.getPointPosition(t,c+d+p,f),g=Math.round(180/tQ*na(m.angle+t1)),x=(r=m.y,i=h.h,90===(a=g)||270===a?r-=i/2:(a>270||a<90)&&(r-=i),r),y=0===(o=g)||180===o?"center":o<180?"left":"right",b=(s=m.x,l=h.w,"right"===(u=y)?s-=l:"center"===u&&(s-=l/2),s);return{visible:!0,x:m.x,y:x,textAlign:y,left:b,top:x,right:b+h.w,bottom:x+h.h}}(e,d,c);i.push(f),"auto"===u&&(f.visible=function(e,t){if(!t)return!0;var n=e.left,r=e.top,i=e.right,a=e.bottom;return!(n$({x:n,y:r},t)||n$({x:n,y:a},t)||n$({x:i,y:r},t)||n$({x:i,y:a},t))}(f,r),f.visible&&(r=f))}return i}(e,r,i)}(this):this.setCenterPoint(0,0,0,0)}},{key:"setCenterPoint",value:function(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}},{key:"getIndexAngle",value:function(e){return na(e*(tX/(this._pointLabels.length||1))+ne(this.options.startAngle||0))}},{key:"getDistanceFromCenterForValue",value:function(e){if(tE(e))return NaN;var t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}},{key:"getValueForDistanceFromCenter",value:function(e){if(tE(e))return NaN;var t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}},{key:"getPointLabelContext",value:function(e){var t=this._pointLabels||[];if(e>=0&&e<t.length){var n=t[e];return n5(this.getContext(),{label:n,index:e,type:"pointLabel"})}}},{key:"getPointPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getIndexAngle(e)-t1+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}},{key:"getPointPositionForValue",value:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}},{key:"getBasePosition",value:function(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}},{key:"getPointLabelPosition",value:function(e){var t=this._pointLabelItems[e];return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}},{key:"drawBackground",value:function(){var e=this.options,t=e.backgroundColor,n=e.grid.circular;if(t){var r=this.ctx;r.save(),r.beginPath(),on(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=t,r.fill(),r.restore()}}},{key:"drawGrid",value:function(){var e,t,n,r=this,i=this.ctx,a=this.options,o=a.angleLines,s=a.grid,l=a.border,u=this._pointLabels.length;if(a.pointLabels.display&&function(e,t){for(var n=e.ctx,r=e.options.pointLabels,i=t-1;i>=0;i--){var a=e._pointLabelItems[i];if(a.visible){var o=r.setContext(e.getPointLabelContext(i));!function(e,t,n){var r=n.left,i=n.top,a=n.right,o=n.bottom,s=t.backdropColor;if(!tE(s)){var l=n0(t.borderRadius),u=n1(t.backdropPadding);e.fillStyle=s;var c=r-u.left,d=i-u.top,f=a-r+u.width,p=o-i+u.height;Object.values(l).some(function(e){return 0!==e})?(e.beginPath(),nY(e,{x:c,y:d,w:f,h:p,radius:l}),e.fill()):e.fillRect(c,d,f,p)}}(n,o,a);var s=n2(o.font),l=a.x,u=a.y,c=a.textAlign;nK(n,e._pointLabels[i],l,u+s.lineHeight/2,s,{color:o.color,textAlign:c,textBaseline:"middle"})}}}(this,u),s.display&&this.ticks.forEach(function(e,n){if(0!==n){t=r.getDistanceFromCenterForValue(e.value);var i,a,o,c,d,f=r.getContext(n),p=s.setContext(f),h=l.setContext(f);i=t,a=r.ctx,o=p.circular,c=p.color,d=p.lineWidth,(o||u)&&c&&d&&!(i<0)&&(a.save(),a.strokeStyle=c,a.lineWidth=d,a.setLineDash(h.dash),a.lineDashOffset=h.dashOffset,a.beginPath(),on(r,i,o,u),a.closePath(),a.stroke(),a.restore())}}),o.display){for(i.save(),e=u-1;e>=0;e--){var c=o.setContext(this.getPointLabelContext(e)),d=c.color,f=c.lineWidth;f&&d&&(i.lineWidth=f,i.strokeStyle=d,i.setLineDash(c.borderDash),i.lineDashOffset=c.borderDashOffset,t=this.getDistanceFromCenterForValue(a.ticks.reverse?this.min:this.max),n=this.getPointPosition(e,t),i.beginPath(),i.moveTo(this.xCenter,this.yCenter),i.lineTo(n.x,n.y),i.stroke())}i.restore()}}},{key:"drawBorder",value:function(){}},{key:"drawLabels",value:function(){var e,t,n=this,r=this.ctx,i=this.options,a=i.ticks;if(a.display){var o=this.getIndexAngle(0);r.save(),r.translate(this.xCenter,this.yCenter),r.rotate(o),r.textAlign="center",r.textBaseline="middle",this.ticks.forEach(function(o,s){if(0!==s||i.reverse){var l=a.setContext(n.getContext(s)),u=n2(l.font);if(e=n.getDistanceFromCenterForValue(n.ticks[s].value),l.showLabelBackdrop){r.font=u.string,t=r.measureText(o.label).width,r.fillStyle=l.backdropColor;var c=n1(l.backdropPadding);r.fillRect(-t/2-c.left,-e-u.size/2-c.top,t+c.width,u.size+c.height)}nK(r,o.label,0,-e,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}}),r.restore()}}},{key:"drawTitle",value:function(){}}]),t}(a3);(0,e1._)(or,"id","radialLinear"),(0,e1._)(or,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:nP.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:function(e){return e},padding:5,centerPointLabels:!1}}),(0,e1._)(or,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,e1._)(or,"descriptors",{angleLines:{_fallback:"grid"}});var oi={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},oa=Object.keys(oi);function oo(e,t){return e-t}function os(e,t){if(tE(t))return null;var n=e._adapter,r=e._parseOpts,i=r.parser,a=r.round,o=r.isoWeekday,s=t;return("function"==typeof i&&(s=i(s)),tA(s)||(s="string"==typeof i?n.parse(s,i):n.parse(s)),null===s)?null:(a&&(s="week"===a&&(t7(o)||!0===o)?n.startOf(s,"isoWeek",o):n.startOf(s,a)),+s)}function ol(e,t,n,r){for(var i=oa.length,a=oa.indexOf(e);a<i-1;++a){var o=oi[oa[a]],s=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(s*o.size))<=r)return oa[a]}return oa[i-1]}function ou(e,t,n){if(n){if(n.length){var r=nu(n,t),i=r.lo,a=r.hi;e[n[i]>=t?n[i]:n[a]]=!0}}else e[t]=!0}function oc(e,t,n){var r,i,a=[],o={},s=t.length;for(r=0;r<s;++r)o[i=t[r]]=r,a.push({value:i,major:!1});return 0!==s&&n?function(e,t,n,r){var i,a,o=e._adapter,s=+o.startOf(t[0].value,r),l=t[t.length-1].value;for(i=s;i<=l;i=+o.add(i,1,r))(a=n[i])>=0&&(t[a].major=!0);return t}(e,a,o,n):a}var od=function(e){function t(e){var n;return(0,eJ._)(this,t),(n=(0,eZ._)(this,t,[e]))._cache={data:[],labels:[],all:[]},n._unit="day",n._majorUnit=void 0,n._offsets={},n._normalized=!1,n._parseOpts=void 0,n}return(0,e5._)(t,e),(0,e0._)(t,[{key:"init",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.time||(e.time={}),i=this._adapter=new r7._date(e.adapters.date);i.init(n),tG(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},(0,e2._)((0,e3._)(t.prototype),"init",this).call(this,e),this._normalized=n.normalized}},{key:"parse",value:function(e,t){return void 0===e?null:os(this,e)}},{key:"beforeLayout",value:function(){(0,e2._)((0,e3._)(t.prototype),"beforeLayout",this).call(this),this._cache={data:[],labels:[],all:[]}}},{key:"determineDataLimits",value:function(){var e=this.options,t=this._adapter,n=e.time.unit||"day",r=this.getUserBounds(),i=r.min,a=r.max,o=r.minDefined,s=r.maxDefined;function l(e){o||isNaN(e.min)||(i=Math.min(i,e.min)),s||isNaN(e.max)||(a=Math.max(a,e.max))}o&&s||(l(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&l(this.getMinMax(!1))),i=tA(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),a=tA(a)&&!isNaN(a)?a:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}},{key:"_getLabelBounds",value:function(){var e=this.getLabelTimestamps(),t=1/0,n=-1/0;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}},{key:"buildTicks",value:function(){var e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);var i=this.min,a=function(e,t,n){for(var r=0,i=e.length;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?ol(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(var a=oa.length-1;a>=oa.indexOf(n);a--){var o=oa[a];if(oi[o].common&&e._adapter.diff(i,r,o)>=t-1)return o}return oa[n?oa.indexOf(n):0]}(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(var t=oa.indexOf(e)+1,n=oa.length;t<n;++t)if(oi[oa[t]].common)return oa[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&a.reverse(),oc(this,a,this._majorUnit)}},{key:"afterAutoSkip",value:function(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(function(e){return+e.value}))}},{key:"initOffsets",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);var a=n.length<3?.5:.25;r=ns(r,0,a),i=ns(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}},{key:"_generate",value:function(){var e,t,n=this._adapter,r=this.min,i=this.max,a=this.options,o=a.time,s=o.unit||ol(o.minUnit,r,i,this._getLabelCapacity(r)),l=tD(a.ticks.stepSize,1),u="week"===s&&o.isoWeekday,c=t7(u)||!0===u,d={},f=r;if(c&&(f=+n.startOf(f,"isoWeek",u)),f=+n.startOf(f,c?"day":s),n.diff(i,r,s)>1e5*l)throw Error(r+" and "+i+" are too far apart with stepSize of "+l+" "+s);var p="data"===a.ticks.source&&this.getDataTimestamps();for(e=f,t=0;e<i;e=+n.add(e,l,s),t++)ou(d,e,p);return(e===i||"ticks"===a.bounds||1===t)&&ou(d,e,p),Object.keys(d).sort(oo).map(function(e){return+e})}},{key:"getLabelForValue",value:function(e){var t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}},{key:"format",value:function(e,t){var n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}},{key:"_tickFormatFunction",value:function(e,t,n,r){var i=this.options,a=i.ticks.callback;if(a)return tN(a,[e,t,n],this);var o=i.time.displayFormats,s=this._unit,l=this._majorUnit,u=s&&o[s],c=l&&o[l],d=n[t],f=l&&c&&d&&d.major;return this._adapter.format(e,r||(f?c:u))}},{key:"generateTickLabels",value:function(e){var t,n,r;for(t=0,n=e.length;t<n;++t)(r=e[t]).label=this._tickFormatFunction(r.value,t,e)}},{key:"getDecimalForValue",value:function(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}},{key:"getPixelForValue",value:function(e){var t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}},{key:"_getLabelSize",value:function(e){var t=this.options.ticks,n=this.ctx.measureText(e).width,r=ne(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),a=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*a,h:n*a+o*i}}},{key:"_getLabelCapacity",value:function(e){var t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,oc(this,[e],this._majorUnit),r),a=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}},{key:"getDataTimestamps",value:function(){var e,t,n=this._cache.data||[];if(n.length)return n;var r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}},{key:"getLabelTimestamps",value:function(){var e,t,n=this._cache.labels||[];if(n.length)return n;var r=this.getLabels();for(e=0,t=r.length;e<t;++e)n.push(os(this,r[e]));return this._cache.labels=this._normalized?n:this.normalize(n)}},{key:"normalize",value:function(e){return nh(e.sort(oo))}}]),t}(iG);function of(e,t,n){var r,i,a,o,s,l,u,c,d,f,p=0,h=e.length-1;n?(t>=e[p].pos&&t<=e[h].pos&&(p=(s=nc(e,"pos",t)).lo,h=s.hi),r=(l=e[p]).pos,a=l.time,i=(u=e[h]).pos,o=u.time):(t>=e[p].time&&t<=e[h].time&&(p=(c=nc(e,"time",t)).lo,h=c.hi),r=(d=e[p]).time,a=d.pos,i=(f=e[h]).time,o=f.pos);var m=i-r;return m?a+(o-a)*(t-r)/m:a}(0,e1._)(od,"id","time"),(0,e1._)(od,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});var op=function(e){function t(e){var n;return(0,eJ._)(this,t),(n=(0,eZ._)(this,t,[e]))._table=[],n._minPos=void 0,n._tableRange=void 0,n}return(0,e5._)(t,e),(0,e0._)(t,[{key:"initOffsets",value:function(){var e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=of(n,this.min),this._tableRange=of(n,this.max)-this._minPos,(0,e2._)((0,e3._)(t.prototype),"initOffsets",this).call(this,e)}},{key:"buildLookupTable",value:function(e){var t,n,r,i=this.min,a=this.max,o=[],s=[];for(t=0,n=e.length;t<n;++t)(r=e[t])>=i&&r<=a&&o.push(r);if(o.length<2)return[{time:i,pos:0},{time:a,pos:1}];for(t=0,n=o.length;t<n;++t)Math.round((o[t+1]+o[t-1])/2)!==(r=o[t])&&s.push({time:r,pos:t/(n-1)});return s}},{key:"_generate",value:function(){var e=this.min,n=this.max,r=(0,e2._)((0,e3._)(t.prototype),"getDataTimestamps",this).call(this);return r.includes(e)&&r.length||r.splice(0,0,e),r.includes(n)&&1!==r.length||r.push(n),r.sort(function(e,t){return e-t})}},{key:"_getTimestampsForTable",value:function(){var e=this._cache.all||[];if(e.length)return e;var t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e}},{key:"getDecimalForValue",value:function(e){return(of(this._table,e)-this._minPos)/this._tableRange}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return of(this._table,n*this._tableRange+this._minPos,!0)}}]),t}(od);(0,e1._)(op,"id","timeseries"),(0,e1._)(op,"defaults",od.defaults),e.s(["ArcElement",()=>al,"BarController",()=>rJ,"BarElement",()=>aS,"BubbleController",()=>r0,"CategoryScale",()=>a1,"Chart",()=>ai,"DoughnutController",()=>r1,"Filler",()=>aL,"LineController",()=>r2,"LineElement",()=>ag,"LinearScale",()=>a5,"PieController",()=>r5,"PointElement",()=>ax,"PolarAreaController",()=>r3,"RadarController",()=>r4,"ScatterController",()=>r8,"TimeScale",()=>od,"Title",()=>aU,"Tooltip",()=>aJ,"_adapters",()=>r7],100915);var oh="label";function om(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function og(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oh,r=[];e.datasets=t.map(function(t){var i=e.datasets.find(function(e){return e[n]===t[n]});return!i||!t.data||r.includes(i)?(0,j._)({},t):(r.push(i),Object.assign(i,t),i)})}var ov=(0,a.forwardRef)(function(e,t){var n=e.height,r=e.width,i=e.redraw,o=void 0!==i&&i,s=e.datasetIdKey,l=e.type,u=e.data,c=e.options,d=e.plugins,f=void 0===d?[]:d,p=e.fallbackContent,h=e.updateMode,m=(0,E._)(e,["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"]),g=(0,a.useRef)(null),x=(0,a.useRef)(),y=function(){g.current&&(x.current=new ai(g.current,{type:l,data:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oh,n={labels:[],datasets:[]};return n.labels=e.labels,og(n,e.datasets,t),n}(u,s),options:c&&(0,j._)({},c),plugins:f}),om(t,x.current))},b=function(){om(t,null),x.current&&(x.current.destroy(),x.current=null)};return(0,a.useEffect)(function(){var e;!o&&x.current&&c&&(e=x.current,Object.assign(e.options,c))},[o,c]),(0,a.useEffect)(function(){!o&&x.current&&(x.current.config.data.labels=u.labels)},[o,u.labels]),(0,a.useEffect)(function(){!o&&x.current&&u.datasets&&og(x.current.config.data,u.datasets,s)},[o,u.datasets]),(0,a.useEffect)(function(){x.current&&(o?(b(),setTimeout(y)):x.current.update(h))},[o,c,u.labels,u.datasets,h]),(0,a.useEffect)(function(){x.current&&(b(),setTimeout(y))},[l]),(0,a.useEffect)(function(){return y(),function(){return b()}},[]),a.default.createElement("canvas",Object.assign({ref:g,role:"img",height:void 0===n?150:n,width:void 0===r?300:r},m),p)});function ox(e,t){return ai.register(t),(0,a.forwardRef)(function(t,n){return a.default.createElement(ov,Object.assign({},t,{ref:n,type:e}))})}var oy=ox("line",r2),ob=ox("bar",rJ),ow=ox("pie",r5);e.s(["Bar",()=>ob,"Line",()=>oy,"Pie",()=>ow],604957);var o_=e.i(604963),ok=A.SpecializedView.span,oS=(0,R.cssRecord)({triggerWrapper:[{":focus":{outline:"2px solid ".concat(L.tokens.accentPrimaryDefault),outlineOffset:"-1px",borderRadius:"4px"}}]});function oC(e){var t=e.label,n=e.children,r=e.inline,o=(0,s._)(n,2),l=o[0],u=o[1],c=(0,s._)((0,a.useState)(!1),2),d=c[0],f=c[1],p=(0,s._)((0,a.useState)(!1),2),h=p[0],m=p[1],g=(0,a.useRef)(!1);return((0,a.useEffect)(function(){h&&(g.current=!0);var e=setTimeout(function(){f(h)},200);return function(){clearTimeout(e)}},[h]),void 0!==r&&r)?(0,i.jsxs)(A.View,{children:[l,u]}):(0,i.jsxs)(o_.PopoverTrigger,{label:t,isOpen:d,onOpenChange:function(){return f(!d)},placement:"right",offset:16,children:[(0,i.jsx)(ok,{onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)},onClick:function(){return f(!0)},onKeyDown:function(e){"Enter"===e.key&&f(!0)},tabIndex:0,css:oS.triggerWrapper,children:l}),(0,i.jsx)(ok,{onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)},children:u})]})}var oj=e.i(394212),oT=e.i(960933),oE=e.i(992785),oR=e.i(131141),oI=e.i(814563),oA=e.i(299798),oP=e.i(852819),oD=e.i(912790);function oO(e,t){var n=100*t;return e.slice(0,oU).filter(function(e){return e>=n}).length}function oN(e){return oO(e,oF)>=oG?"danger":oO(e,oV)>=oG?"warning":"ok"}function oM(e){return Math.round(10*e)/10}function oL(e){return Math.round((e+Number.EPSILON)*100)/100}function oB(e){return e/1024/1024}var oV=.9,oF=1,oU=10,oG=5,o$=oT.Type.Union([oT.Type.Literal("ok"),oT.Type.Literal("warning"),oT.Type.Literal("danger")]);oT.Type.Object({cpu:oT.Type.Object({numVCpu:oT.Type.Number(),utilPercent:oT.Type.Number(),recentUtilPercents:oT.Type.Array(oT.Type.Number()),status:o$,user:oT.Type.Object({utilPercent:oT.Type.Number(),recentUtilPercents:oT.Type.Array(oT.Type.Number())}),system:oT.Type.Object({utilPercent:oT.Type.Number(),recentUtilPercents:oT.Type.Array(oT.Type.Number())})}),memory:oT.Type.Object({softLimitBytes:oT.Type.Number(),hardLimitBytes:oT.Type.Number(),usageBytes:oT.Type.Number(),recentUtilPercents:oT.Type.Array(oT.Type.Number()),status:o$,rss:oT.Type.Object({usageBytes:oT.Type.Number(),recentUtilPercents:oT.Type.Array(oT.Type.Number())}),cache:oT.Type.Object({usageBytes:oT.Type.Number(),recentUtilPercents:oT.Type.Array(oT.Type.Number())})}),storage:oT.Type.Object({usedBytes:oT.Type.Number(),totalBytes:oT.Type.Number(),scratchUsedBytes:oT.Type.Number(),scratchTotalBytes:oT.Type.Number(),nixUsedBytes:oT.Type.Number(),workspaceUsedBytes:oT.Type.Number()})});var oH={cpu:{numVCpu:0,utilPercent:0,recentUtilPercents:Array(20).fill(0),status:"ok",user:{utilPercent:0,recentUtilPercents:Array(20).fill(0)},system:{utilPercent:0,recentUtilPercents:Array(20).fill(0)}},memory:{softLimitBytes:0,hardLimitBytes:0,usageBytes:0,recentUtilPercents:Array(20).fill(0),status:"ok",rss:{usageBytes:0,recentUtilPercents:Array(20).fill(0)},cache:{usageBytes:0,recentUtilPercents:Array(20).fill(0)}},storage:{usedBytes:0,totalBytes:0,scratchUsedBytes:0,scratchTotalBytes:0,nixUsedBytes:0,workspaceUsedBytes:0}},oz=(0,en.atom)(oH),oW=(0,en.atom)(!0);function oq(){return(0,oP.useValue)(oW)}var oK=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.min(t?Math.round(e):e,100)};function oY(e,t){e.unshift(t),e.pop()}var oQ=(0,en.atom)(null,function(e,t,n){t(oz,function(e){return(0,oR.produce)(e,function(e){var t,r,i,a,o,s,l,u,c,d,f,p,h,m;l=e.cpu,u=e.memory,c=e.storage,l.numVCpu=n.numVCpu,l.utilPercent=oK(n.cpuUtilizationPercent,!0),l.recentUtilPercents.unshift(l.utilPercent),l.status=oN(l.recentUtilPercents),d=l.user,f=l.system,d.utilPercent=oK(n.user.cpuUtilizationPercent),oY(d.recentUtilPercents,d.utilPercent),f.utilPercent=oK(n.system.cpuUtilizationPercent),oY(f.recentUtilPercents,f.utilPercent),u.softLimitBytes=n.memorySoftLimitBytes,u.hardLimitBytes=n.memoryHardLimitBytes,u.usageBytes=n.memoryUsageRssBytes,p=u.usageBytes/u.softLimitBytes*100,oY(u.recentUtilPercents,p),u.status=oN(u.recentUtilPercents),h=u.rss,m=u.cache,h.usageBytes=n.memoryUsageRssBytes,oY(h.recentUtilPercents,n.memoryUsageRssBytes/n.memorySoftLimitBytes*100),m.usageBytes=n.memoryUsageCacheBytes,oY(m.recentUtilPercents,n.memoryUsageCacheBytes/n.memorySoftLimitBytes*100),c.usedBytes=(null==(t=n.storage)?void 0:t.diskUsedBytes)||0,c.totalBytes=(null==(r=n.storage)?void 0:r.diskLimitBytes)||0x40000000,c.scratchUsedBytes=(null==(i=n.storage)?void 0:i.scratchDiskUsedBytes)||0,c.scratchTotalBytes=(null==(a=n.storage)?void 0:a.scratchDiskLimitBytes)||0x40000000,c.nixUsedBytes=(null==(o=n.storage)?void 0:o.diskUsedNixBytes)||0,c.workspaceUsedBytes=(null==(s=n.storage)?void 0:s.diskUsedWorkspaceBytes)||0})})}),oX=(0,oI.selectAtom)(oz,function(e){return"ok"!==e.cpu.status?e.cpu.status:null}),oZ=(0,oI.selectAtom)(oz,function(e){return"ok"!==e.memory.status?e.memory.status:null}),oJ=(0,en.atom)(function(e){var t=e(oZ);if(t)return{type:"ram_alert",status:t};var n=e(oX);return n?{type:"cpu_alert",status:n}:null});function o0(){return(0,oP.useObservableValue)(oJ)}(0,en.atom)(function(e){for(var t=e(oz),n=t.cpu,r=t.memory,i=0,a=["danger","warning"];i<a.length;i++){var o=a[i];if(n.status===o||r.status===o)return"danger"}return"ok"});var o1=(0,oI.selectAtom)(oz,function(e){var t=oM((0,oD.bytesToGib)(e.memory.softLimitBytes));return{numVCpu:oM(e.cpu.numVCpu),ramTotalGB:t}},oE.default);function o2(){return(0,oP.useValue)(o1)}var o3=(0,oI.selectAtom)(oz,function(e){var t=e.cpu,n=t.status,r=t.recentUtilPercents,i=t.user,a=t.system,o=oL(t.utilPercent),s=oL(i.utilPercent),l=oL(a.utilPercent);return{status:n,currentPercent:o,recentUtilPercents:r,currentUserPercent:s,recentUserUtilPercents:i.recentUtilPercents,currentSystemPercent:l,recentSystemUtilPercents:a.recentUtilPercents}},oE.default);function o5(){return(0,oP.useValue)(o3)}var o4=(0,oI.selectAtom)(oz,function(e){var t=e.memory,n=t.status,r=t.recentUtilPercents,i=t.cache,a=t.rss,o=t.softLimitBytes,s=t.usageBytes,l=oB(o);return{status:n,currentPercent:Math.round(100*Math.min(1,Math.round(oL(oB(s)))/l)),currentRssInBytes:1024*Math.round(oL(oB(a.usageBytes)))*1024,currentCacheInBytes:1024*Math.round(oL(oB(i.usageBytes)))*1024,recentUtilPercents:r,recentRssUtilPercents:a.recentUtilPercents,recentCacheUtilPercents:i.recentUtilPercents}},oE.default);function o8(){return(0,oP.useValue)(o4)}var o6=(0,oI.selectAtom)(oz,function(e){var t=e.storage;return{replUsedInMib:oB(t.usedBytes),replTotalInMib:oB(t.totalBytes),scratchUsedInMib:oB(t.scratchUsedBytes),scratchTotalInMib:oB(t.scratchTotalBytes),nixUsedInMib:oB(t.nixUsedBytes),workspaceUsedInMib:oB(t.workspaceUsedBytes)}},oE.default);function o7(){return(0,oP.useValue)(o6)}var o9=(0,oI.selectAtom)(oz,function(e){var t=e.cpu,n=e.memory;return{numVCpu:t.numVCpu,ramQuotaMiBs:oB(n.softLimitBytes),cpuRecentUtilPercents:t.recentUtilPercents,ramRecentUtilPercents:n.recentUtilPercents}},oE.default);function se(){return(0,oP.useValue)(o9)}function st(){var e=(0,oP.useSet)(oW),t=(0,oP.useSet)(oQ),n=(0,a.useRef)(!0),r=(0,a.useCallback)(function(r){t(r),n.current?n.current=!1:e(!1)},[t,e]);(0,oA.usePid2)(function(e,t){var n=t.signal;return(0,G._)(function(){var t,i,a,o,s,l,u,c;return(0,$._)(this,function(d){switch(d.label){case 0:t=e.resources.monitor.subscribe({},{signal:n}).resReadable,i=!1,a=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),s=(0,oj._)(t),d.label=2;case 2:return[4,s.next()];case 3:if(!(i=!(l=d.sent()).done))return[3,5];if(!(u=l.value).ok)return[2];r(u.payload),d.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return c=d.sent(),a=!0,o=c,[3,12];case 7:if(d.trys.push([7,,10,11]),!(i&&null!=s.return))return[3,9];return[4,s.return()];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(a)throw o;return[7];case 11:return[7];case 12:return[2]}})})()},[r])}(0,oI.selectAtom)(oz,function(e){return e.cpu.numVCpu}),(0,oI.selectAtom)(oz,function(e){return oB(e.memory.softLimitBytes)}),(0,oI.selectAtom)(oz,function(e){return oB(e.storage.totalBytes)}),(0,oI.selectAtom)(oz,function(e){return oB(e.storage.usedBytes)}),e.s(["ALERTING_WINDOW_SECONDS",()=>20,"COUNT_TO_ALERT_AT",()=>oG,"DANGER_THRESHOLD",()=>oF,"WARNING_THRESHOLD",()=>oV,"useAccountUsage",()=>o7,"useAlertObservable",()=>o0,"useCompute",()=>o2,"useComputeAlertData",()=>se,"useComputeCpu",()=>o5,"useComputeRam",()=>o8,"useInitResouceMonitoring",()=>st,"useResourcesLoading",()=>oq],154488);var sn=e.i(703774);function sr(e){return e>eQ.ONE_GIB_IN_BYTES?"".concat((0,oD.bytesToGib)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,oD.bytesToMib)(e)).toLocaleString()," MiB")}ai.register(ag,aL);var si=(0,R.cssRecord)({sectionPadding:[I.rcss.py(4),I.rcss.px(12)],rowSpacing:[I.rcss.rowWithGap(8),I.rcss.justify.spaceBetween,I.rcss.align.center]}),sa=(0,R.cssRecord)({wrapper:[I.rcss.borderRadius(4),I.rcss.border({color:L.tokens.outlineDimmer}),I.rcss.overflow("hidden")],rowSection:[si.sectionPadding,si.rowSpacing],hoverRowSection:[si.sectionPadding,si.rowSpacing,{":hover":{backgroundColor:L.tokens.backgroundHigher}}],hoverColumnSection:[si.sectionPadding,I.rcss.colWithGap(8),{":hover":{backgroundColor:L.tokens.backgroundHigher}}],sectionHeading:[I.rcss.fontWeight.bold],alignedRow:[I.rcss.rowWithGap(8),I.rcss.align.center],alignedSpaceBetweenRow:[si.rowSpacing],detailContent:[I.rcss.width(260)],detailSectionsWrapper:[I.rcss.borderRadius(4),I.rcss.border({color:L.tokens.outlineDimmer}),I.rcss.overflow("hidden")],warningText:[I.rcss.color.orangeStronger],dangerText:[I.rcss.color.redStronger],chartWrapper:[I.rcss.width(22),I.rcss.height(18),I.rcss.borderRadius(2)],indentAgain:[I.rcss.pl(24)]});function so(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.inline,n=void 0!==t&&t,r=o2();return(0,i.jsxs)(A.View,{css:sa.wrapper,children:[(0,i.jsxs)(A.View,{css:sa.rowSection,children:[(0,i.jsx)(V.Text,{css:sa.sectionHeading,children:"Compute"}),(0,i.jsx)(A.View,{css:sa.alignedRow,children:(0,i.jsxs)(V.Text,{color:"dimmer",children:[r.numVCpu," vCPU, ",r.ramTotalGB," GiB RAM"]})})]}),(0,i.jsx)(ek.DividerH,{}),(0,i.jsx)(ss,{inline:n}),(0,i.jsx)(sl,{inline:n})]})}function ss(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.inline,n=o5();return(0,i.jsx)(su,{title:"CPU",displayValue:"".concat(n.currentPercent,"%"),recentPercents:n.recentUtilPercents,status:n.status,detailText:"The amount of processing power this Repl is using.",detailRows:[{title:"User",displayValue:"".concat(n.currentUserPercent,"%"),recentPercents:n.recentUserUtilPercents},{title:"System",displayValue:"".concat(n.currentSystemPercent,"%"),recentPercents:n.recentSystemUtilPercents}],inline:void 0!==t&&t})}function sl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.inline,n=o8();return(0,i.jsx)(su,{title:"RAM",displayValue:"".concat(n.currentPercent,"%"),recentPercents:n.recentUtilPercents,status:n.status,detailText:"The memory this Repl is using.",detailRows:[{title:"Active",displayValue:sr(n.currentRssInBytes),recentPercents:n.recentRssUtilPercents},{title:"Cache",displayValue:sr(n.currentCacheInBytes),recentPercents:n.recentCacheUtilPercents}],inline:void 0!==t&&t})}function su(e){var t=e.title,n=e.displayValue,r=e.status,a=e.recentPercents,o=e.detailText,s=e.detailRows,l=e.inline,u=void 0!==l&&l;return(0,i.jsxs)(oC,{label:"Compute details",inline:u,children:[(0,i.jsxs)(A.View,{css:u?sa.rowSection:sa.hoverRowSection,children:[(0,i.jsxs)(A.View,{css:sa.alignedRow,children:[(0,i.jsx)(V.Text,{children:t}),(0,i.jsx)(sc,{status:r})]}),(0,i.jsxs)(A.View,{css:sa.alignedRow,children:[(0,i.jsx)(V.Text,{color:"dimmer",children:n}),(0,i.jsx)(A.View,{css:sa.chartWrapper,children:(0,i.jsx)(sd,{data:a,colorAreaUnderLine:!0})})]})]}),(0,i.jsxs)(A.View,{px:u?12:void 0,children:[(0,i.jsx)(V.Text,{variant:u?"small":void 0,color:u?"dimmer":void 0,children:o}),(0,i.jsx)(A.View,{children:s.map(function(e,t){return(0,i.jsxs)(A.View,{css:sa.rowSection,style:u?{paddingLeft:0,paddingRight:0}:void 0,children:[(0,i.jsx)(V.Text,{children:e.title}),(0,i.jsxs)(A.View,{css:sa.alignedRow,children:[(0,i.jsx)(V.Text,{color:"dimmer",children:e.displayValue}),(0,i.jsx)(A.View,{css:sa.chartWrapper,children:(0,i.jsx)(sd,{data:e.recentPercents,colorAreaUnderLine:!0})})]})]},t)})})]})]})}function sc(e){var t=e.status;return"warning"===t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.default,{color:L.tokens.orangeStronger}),(0,i.jsx)(V.Text,{css:sa.warningText,children:"Near limit"})]}):"danger"===t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.default,{color:L.tokens.redStronger}),(0,i.jsx)(V.Text,{css:sa.dangerText,children:"At limit"})]}):null}function sd(e){var t=e.data,n=e.colorAreaUnderLine,r=void 0!==n&&n,a=e.showHorizontalGridLines,o=(0,sn.useTheme)().values,s=t.map(function(e,t){return{x:-t,y:e}}),l=oV-.05,u=oF-.02;return(0,i.jsx)(oy,{updateMode:"none",options:{clip:4,animation:!1,maintainAspectRatio:!1,events:[],elements:{point:{radius:0},line:{tension:.3,borderWidth:1}},scales:{x:{display:!1,type:"linear",grid:{display:!1},min:0,max:-(t.length-1)},y:{display:void 0!==a&&a,min:0,max:100,ticks:{display:!1,stepSize:10},afterBuildTicks:function(e){var t=[10,50,90];e.ticks=e.ticks.filter(function(e){return t.includes(e.value)})},grid:{color:function(e){return e.tick.value>100*l?o.global.orangeDimmer:o.global.outlineDimmest},drawTicks:!1},border:{dash:[2,2],display:!1}}}},data:{datasets:[{data:s,fill:{target:"origin"},borderColor:function(e){var t=e.chart,n=t.ctx,r=t.chartArea;if(r){var i=n.createLinearGradient(0,r.bottom,0,r.top),a=o.global.blueDefault,s=o.global.orangeDefault,c=o.global.redDefault;return i.addColorStop(0,a),i.addColorStop(l-.08,a),i.addColorStop(l+.08,s),i.addColorStop(u-.08,s),i.addColorStop(u,c),i}},backgroundColor:function(e){if(!r)return"transparent";var n=e.chart,i=n.ctx,a=n.chartArea;if(a){var c=i.createLinearGradient(a.left,0,a.right,0),d=sf(o.global.blueDimmest),f=sf(o.global.orangeDimmest),p=sf(o.global.redDimmest);return s.forEach(function(e,n){if(c){var r=1-n/(t.length-1);e.y<100*l?c.addColorStop(r,d):e.y<100*u?c.addColorStop(r,f):c.addColorStop(r,p)}}),c}}}]}})}function sf(e){var t,n,r=(t=(t=e).replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,r){return t+t+n+n+r+r}),(n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null);if(!r)return e;var i=r.r,a=r.g,o=r.b;return"rgba(".concat(i,", ").concat(a,", ").concat(o,", ",.5,")")}function sp(e){var t=e.alertDialogType,n=e.onRequestUpgrade,r=se();if(!r)return null;var a="cpu_alert"===t?r.cpuRecentUtilPercents:r.ramRecentUtilPercents,o="cpu_alert"===t?"CPU":"RAM",s="You have been near the ".concat("cpu_alert"===t?"".concat(r.numVCpu," vCPU"):"".concat((0,oD.bytesToGib)(1024*r.ramQuotaMiBs*1024)," GiB RAM")," limit of the free plan ").concat(oG," or more times in the past ").concat(20," seconds. More ").concat("cpu_alert"===t?"vCPUs":"RAM"," would improve performance and limit disruptions.");return(0,i.jsxs)(A.View,{p:8,gap:8,children:[(0,i.jsx)(y.default,{color:L.tokens.orangeStrongest}),(0,i.jsxs)(V.Text,{variant:"subheadDefault",multiline:!1,children:["High ",o," usage"]}),(0,i.jsx)(V.Text,{color:"dimmer",children:s}),(0,i.jsx)(A.View,{css:sh.chartWrapper,children:(0,i.jsx)(sd,{data:a,showHorizontalGridLines:!0})}),(0,i.jsx)(e_.Button,{size:"big",colorway:"warning",text:"Increase ".concat(o," limit"),onClick:function(){(0,ey.track)(eb.events.UPGRADE_SELECTED,{source:"compute_alert_dialog"}),n()}})]})}var sh=(0,R.cssRecord)({chartWrapper:[I.rcss.height(67),I.rcss.backgroundColor.backgroundRoot,I.rcss.borderRadius(12),I.rcss.py(12),I.rcss.px(16)]});function sm(){var e=(0,H._)(["\n  query ReplResourcesCurrentUser {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n        userSubscription {\n          isTrial\n        }\n        paymentMethod {\n          __typename\n          ... on PaymentMethod {\n            id\n            last4\n          }\n        }\n      }\n    }\n  }\n"]);return sm=function(){return e},e}function sg(){var e=(0,H._)(["\n  query ReplResourcesReplInfo($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          __typename\n          id\n          type\n        }\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        authorizations {\n          editResources {\n            isAuthorized\n            code\n            message\n          }\n          editFileContents {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return sg=function(){return e},e}var sv={},sx=(0,z.gql)(sm()),sy=(0,z.gql)(sg()),sb=e.i(442966),sw=e.i(368964);function s_(){var e=(0,H._)(["\n  query UpsellExperimentProviderCurrentUser($replId: String!) {\n    currentUser {\n      id\n      isSubscribed\n    }\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            __typename\n            id\n          }\n          ... on User {\n            __typename\n            id\n          }\n        }\n        org {\n          id\n          type\n        }\n      }\n    }\n  }\n"]);return s_=function(){return e},e}var sk={},sS=(0,z.gql)(s_()),sC={showPrivateUpsell:!1,showResourcesUpsell:!1,refetch:function(){}},sj=function(){var e,t,n,r,i,a,o=(i={variables:{replId:(0,et.default)()}},a=(0,j._)({},sk,i),W.useQuery(sS,a)),s=o.data,l=o.refetch;if((null==s||null==(e=s.currentUser)?void 0:e.__typename)!=="CurrentUser"||(null==s||null==(t=s.getRepl)?void 0:t.__typename)!=="Repl")return sC;var u=s.currentUser.isSubscribed,c=null==(n=s.getRepl.org)?void 0:n.type,d=(c===sw.OrgstypeEnumType.Personal||null==c)&&(null==(r=s.getRepl.owner)?void 0:r.__typename)==="User"&&s.getRepl.owner.id===s.currentUser.id&&!u;return{showPrivateUpsell:d,showResourcesUpsell:d,refetch:l}},sT=e.i(158689),sE=function(){var e=sj(),t=e.showResourcesUpsell,n=e.refetch,r=(0,eX.useGlobalModal)().show;return t?(0,i.jsx)(em.Tooltip,{tooltip:sR,children:(0,i.jsx)(sT.Pill,{css:sI.pill,text:"CPU/RAM Limited",onClick:function(){return(0,G._)(function(){return(0,$._)(this,function(e){switch(e.label){case 0:return[4,r("MembershipPurchaseModal",{headingText:"Upgrade for a faster Workspace",subHeadingText:"Unlock 4 vCPU, 8 GiB RAM, and ".concat((0,oD.bytesToGib)(eQ.PRO_PLAN_STORAGE_QUOTA)," GiB of storage"),analyticsContext:{upgrade:{context:"repl_resources"}},onPurchaseComplete:function(){return n()}})];case 1:return e.sent(),[2]}})})()}})}):null},sR="Your development resources are limited. Upgrade for more speed, storage, better AI, and more.",sI=(0,R.cssRecord)({pill:[I.rcss.cursor.pointer]}),sA=e.i(708545),sP=e.i(739521),sD=e.i(557862);function sO(e){return e>eQ.ONE_GIB_IN_BYTES?"".concat((0,oD.bytesToGib)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,oD.bytesToMib)(e)).toLocaleString()," MiB")}function sN(e,t){return 0===t||0===e?0:Math.round(e/t*100)}function sM(e){var t=e.isFileEditor,n=e.inline;return t?(0,i.jsxs)(A.View,{css:sa.wrapper,children:[(0,i.jsx)(A.View,{css:sa.rowSection,children:(0,i.jsx)(V.Text,{css:sa.sectionHeading,children:"Storage"})}),(0,i.jsx)(ek.DividerH,{}),(0,i.jsx)(sL,{inline:void 0!==n&&n})]}):null}function sL(e){var t=e.inline,n=void 0!==t&&t,r=(0,s._)((0,a.useState)(!1),2),o=r[0],l=r[1],u=o7(),c=u.replUsedInMib,d=u.replTotalInMib,f=u.scratchUsedInMib,p=u.scratchTotalInMib,h=u.nixUsedInMib,m=u.workspaceUsedInMib,x=[{title:"This App",usageDisplayText:"".concat(sO(1024*c*1024)),percentOfUsage:sN(1024*c*1024,1024*d*1024),indent:0},{title:"Workspace",usageDisplayText:"".concat(sO(1024*m*1024)),percentOfUsage:null,indent:1},{title:"Nix packages",usageDisplayText:"".concat(sO(1024*h*1024)),percentOfUsage:null,nix:!0,indent:1},{title:"Scratch disk",usageDisplayText:"".concat(sO(1024*f*1024)),percentOfUsage:sN(1024*f*1024,1024*p*1024),indent:0}],y=(0,i.jsx)(i.Fragment,{children:x.map(function(e,t){return(0,i.jsxs)(A.View,{css:sa.rowSection,children:[(0,i.jsxs)(A.View,{css:sa.alignedRow,children:[e.indent>0?(0,i.jsx)(A.View,{css:e.indent>1&&sa.indentAgain,children:(0,i.jsx)(sA.default,{color:L.tokens.outlineDefault,size:16})}):null,(0,i.jsx)(V.Text,{children:e.title})]}),e.nix?(0,i.jsx)(A.View,{css:sa.alignedRow,style:n?{marginRight:"auto"}:void 0,children:(0,i.jsx)(eS.IconButton,{onClick:function(){return l(!0)},alt:"Delete Nix packages",disabled:h<1,children:(0,i.jsx)(g.default,{})})}):null,(0,i.jsxs)(A.View,{css:sa.alignedRow,children:[(0,i.jsx)(V.Text,{color:"dimmer",children:e.usageDisplayText}),null===e.percentOfUsage?null:(0,i.jsxs)(V.Text,{color:"dimmer",children:["(",e.percentOfUsage,"%)"]})]})]},t)})});return(0,i.jsxs)(i.Fragment,{children:[n?y:(0,i.jsxs)(oC,{label:"Storage details",children:[(0,i.jsx)(A.View,{css:sa.hoverColumnSection,children:(0,i.jsxs)(A.View,{css:sa.alignedSpaceBetweenRow,children:[(0,i.jsx)(A.View,{css:sa.alignedRow,children:(0,i.jsx)(V.Text,{children:"This App"})}),(0,i.jsxs)(V.Text,{color:"dimmer",children:[sO(1024*c*1024)," "]})]})}),(0,i.jsxs)(A.View,{p:8,gap:8,css:sa.detailContent,children:[(0,i.jsx)(V.Text,{children:"This App's storage usage"}),(0,i.jsx)(A.View,{css:sa.detailSectionsWrapper,children:y})]})]}),(0,i.jsx)(sB,{isOpen:o,onClose:function(){return l(!1)}})]})}var sB=function(e){var t=e.onClose,n=e.isOpen,r=(0,C.default)().container;return(0,i.jsx)(sP.Modal,{isOpen:n,onRequestClose:t,children:(0,i.jsx)(sD.default,{name:"Nix Packages",description:"this App's Nix packages",confirmDescription:"Nix packages",hideModal:t,delete:function(){t();var e=r.openChannel({service:"file",skip:function(e){return!e.repl.authorizations.editFileContents.isAuthorized}},function(t){return t.channel.request({resetNixFilesystem:{}}).then(function(t){t.ok&&e()}),function(){}})}})})},sV=e.i(624782),sF=(0,R.cssRecord)({trialButton:[I.rcss.borderRadius(4)],loadingStateWrapper:[I.rcss.center,I.rcss.p(16)]});function sU(e){var t,n,r,a,o,s,l,u,c,d,f,p,h,m,g,x,y,b,w=e.onRequestUpgrade,_=e.inline,k=void 0!==_&&_,S=(o=(0,j._)({},sv,void 0),W.useQuery(sx,o)),C=S.data,T=S.loading,E=(s={variables:{replId:(0,et.default)()}},l=(0,j._)({},sv,s),W.useQuery(sy,l)),R=E.data,P=E.loading,D=(null==R?void 0:R.getRepl.__typename)==="Repl"?R.getRepl:null,O=(null==D||null==(u=D.org)?void 0:u.id)!==void 0&&(null==D||null==(c=D.org)?void 0:c.type)==="team",N=(null==D||null==(d=D.owner)?void 0:d.__typename)==="Team"||O,M=(null==D||null==(f=D.owner)?void 0:f.id)===(null==C||null==(p=C.currentUser)?void 0:p.id),L=null==C||null==(h=C.currentUser)?void 0:h.userSubscriptionType,B=(null==C||null==(g=C.currentUser)||null==(m=g.paymentMethod)?void 0:m.__typename)==="PaymentMethod"&&null!==C.currentUser.paymentMethod.id,F=null==C||null==(y=C.currentUser)||null==(x=y.userSubscription)?void 0:x.isTrial,U=M&&("HACKER_PRO"!==L||F&&!B)&&!O,G=sj().showResourcesUpsell,$=null==D?void 0:D.authorizations.editResources,H=null!=(b=null==D?void 0:D.authorizations.editFileContents.isAuthorized)&&b,z=oq();return T||P||z||!$?(0,i.jsx)(A.View,{css:sF.loadingStateWrapper,children:(0,i.jsx)(eY.default,{})}):(0,i.jsxs)(A.View,{p:8,gap:8,children:[(0,i.jsxs)(A.View,{gap:4,children:[(0,i.jsxs)(A.View,{row:!0,gap:8,children:[(0,i.jsx)(V.Text,{variant:"subheadDefault",children:"Resources"}),(0,i.jsx)(sG,{resourceTier:(n=(t={isTeamRepl:N,isReplOwner:M,plan:L}).isTeamRepl,r=t.isReplOwner,a=t.plan,n?"team":r&&"HACKER_PRO"===a?"member":r&&null===a?"free":"hidden"),isOnTrial:F,showResourcesUpsell:G})]}),(0,i.jsx)(V.Text,{color:"dimmest",children:"Resources for cloud development environment"})]}),(0,i.jsx)(so,{inline:k}),!O||H?(0,i.jsx)(sM,{isFileEditor:H,inline:k}):null,U?(0,i.jsxs)(A.View,{gap:8,children:[(0,i.jsx)(e_.Button,{colorway:"blurple",iconLeft:(0,i.jsx)(sb.default,{}),text:"Join Replit ".concat(J.corePlanName),onClick:function(){return w()},css:sF.trialButton}),(0,i.jsxs)(V.Text,{css:I.rcss.textAlign.center,color:"dimmer",variant:"small",children:["Get 4 vCPU, 8 GiB RAM, and ",(0,oD.bytesToGib)(eQ.PRO_PLAN_STORAGE_QUOTA)," GiB Storage"]})]}):null]})}function sG(e){var t=e.resourceTier,n=e.isOnTrial,r=e.showResourcesUpsell;switch(t){case"free":return r?(0,i.jsx)(sE,{}):(0,i.jsx)(sV.Pill,{text:"Free",colorway:"grey"});case"member":if(n)return(0,i.jsx)(sV.Pill,{text:"".concat(J.corePlanName," Trial"),colorway:"blue"});return(0,i.jsx)(sV.Pill,{text:"".concat(J.corePlanName),colorway:"purple"});case"team":return(0,i.jsx)(sV.Pill,{text:"Team",colorway:"green"});default:return null}}var s$=e.i(485273),sH=e.i(441329),sz=e.i(806804),sW=e.i(729122),sq=e.i(443394);function sK(e){var t,n,r,o,l,u,d,f,p,h,m,g,x,y,b,w,_,k,S,C,j=e.repl,T=e.currentUser,E=e.inline,R=(0,s._)((0,a.useState)("resources"),2),I=R[0],P=R[1],D=(0,eX.useGlobalModal)().show,O=(0,sq.getCurrentUrl)(),N=(r=(t={repl:j,currentUser:T,onAlert:function(e){P(e)}}).repl,o=t.currentUser,l=t.onAlert,u=o0(),d=(0,s$.useRouter)(),p=(f=(0,s._)((0,a.useState)(!1),2))[0],h=f[1],m=(null==(n=r.owner)?void 0:n.__typename)==="User"&&r.owner.id===(null==o?void 0:o.id),g=null==o?void 0:o.userSubscriptionType,y=(x=(0,sz.default)("announcement","resources-upgrade-modal")).shouldDisplay,b=x.register,w=x.dismiss,(0,a.useEffect)(function(){!(0,sH.isInBonsaiWebview)(d)&&m&&null===g&&b()},[m,b,d,g]),k=(_=(0,s._)((0,a.useState)(!0),2))[0],S=_[1],(0,a.useEffect)(function(){var e=setTimeout(function(){S(!1)},6e4);return function(){return clearTimeout(e)}},[]),C=(0,sW.useRunInfo)().isRunning,(0,a.useEffect)(function(){!p&&C&&(p||h(!0))},[C,p]),(0,a.useEffect)(function(){if(!(k||(0,sH.isInBonsaiWebview)(d))&&y&&p)return u.subscribe(function(e){e&&l(e.type)})},[u,b,k,m,l,d,y,g,p]),{dismissAlert:w}).dismissAlert,M=function(){return(0,G._)(function(){return(0,$._)(this,function(e){switch(e.label){case 0:return[4,D("MembershipPurchaseModal",{headingText:"Upgrade for a faster Workspace",subHeadingText:"Unlock 4 vCPU, 8 GiB RAM, and ".concat((0,oD.bytesToGib)(eQ.PRO_PLAN_STORAGE_QUOTA)," GiB of storage"),analyticsContext:{upgrade:{context:"repl_resources"}},redirectPath:O})];case 1:return e.sent(),[2]}})})()};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(A.View,{css:{overflow:"auto",maxHeight:"80vh"},children:["resources"===I?(0,i.jsx)(sU,{onRequestUpgrade:M,inline:void 0!==E&&E}):null,"cpu_alert"===I||"ram_alert"===I?(0,i.jsxs)(A.View,{css:sY.alertDialogWrapper,children:[(0,i.jsx)(eS.IconButton,{onClick:function(){N(),P("resources")},alt:"Close",css:sY.alertDialogCloseButton,children:(0,i.jsx)(c.default,{})}),(0,i.jsx)(sp,{alertDialogType:I,onRequestUpgrade:M})]}):null]})})}var sY=(0,R.cssRecord)({alertDialogWrapper:[I.rcss.position.relative],alertDialogCloseButton:[I.rcss.position.absolute,I.rcss.top(8),I.rcss.right(8),I.rcss.zIndex(1)]}),sQ={label:"Resources",description:"Monitor CPU, memory usage and upgrade resources",icon:(0,i.jsx)(p.default,{}),component:function(){var e,t,n=(e={variables:{replId:(0,et.default)()}},t=(0,j._)({},ez,e),W.useQuery(eK,t)).data,r=(null==n?void 0:n.getRepl.__typename)==="Repl"?n.getRepl:null,a=null==n?void 0:n.currentUser;return r&&a?(0,i.jsx)(sK,{repl:r,currentUser:a,inline:!0}):(0,i.jsx)(A.View,{p:32,children:(0,i.jsx)(eY.default,{})})}};function sX(){var e=(0,H._)(["\n  query SshPane($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          connectUsingSsh {\n            isAuthorized\n            message\n            code\n          }\n        }\n        org {\n          id\n          type\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n    }\n  }\n"]);return sX=function(){return e},e}function sZ(){var e=(0,H._)(["\n  query SshPaneCurrentUser {\n    currentUser {\n      id\n      __typename\n      publicSshKeys {\n        ... on PublicSshKeysOutput {\n          keys {\n            id\n            key\n            label\n            timeCreated\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n  }\n"]);return sZ=function(){return e},e}e.s(["resourcesTab",()=>sQ],840752);var sJ={},s0=(0,z.gql)(sX());function s1(e){var t=(0,j._)({},sJ,e);return W.useQuery(s0,t)}var s2=(0,z.gql)(sZ());function s3(e){var t=(0,j._)({},sJ,e);return W.useQuery(s2,t)}e.s(["useSshPaneCurrentUserQuery",()=>s3,"useSshPaneQuery",()=>s1],93728);var s5=e.i(913965);function s4(e){return(0,i.jsxs)(s5.default,(0,T._)((0,j._)({},e),{children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_6530_283)",children:[(0,i.jsx)("mask",{id:"mask0_6530_283",width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:(0,i.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M17.019 23.836c.378.147.809.138 1.19-.046l4.942-2.377A1.5 1.5 0 0 0 24 20.06V3.939a1.5 1.5 0 0 0-.85-1.352L18.21.21a1.494 1.494 0 0 0-1.705.29l-9.46 8.63-4.12-3.128a.999.999 0 0 0-1.276.057L.327 7.261a1 1 0 0 0-.001 1.48L3.899 12 .326 15.26a1 1 0 0 0 .001 1.479L1.65 17.94a.999.999 0 0 0 1.276.057l4.12-3.128 9.46 8.63c.15.15.325.262.514.336Zm.985-17.284L10.826 12l7.178 5.448V6.552Z",clipRule:"evenodd"})}),(0,i.jsxs)("g",{mask:"url(#mask0_6530_283)",children:[(0,i.jsx)("path",{fill:"#0065A9",d:"M23.15 2.591 18.207.211A1.495 1.495 0 0 0 16.5.5L.312 15.26a1 1 0 0 0 0 1.479l1.323 1.202a1 1 0 0 0 1.277.057l19.495-14.79A.993.993 0 0 1 24 4v-.057a1.5 1.5 0 0 0-.85-1.352Z"}),(0,i.jsx)("g",{filter:"url(#filter0_d_6530_283)",children:(0,i.jsx)("path",{fill:"#007ACC",d:"m23.15 21.409-4.944 2.38A1.495 1.495 0 0 1 16.5 23.5L.312 8.74a1 1 0 0 1 0-1.479L1.636 6.06a1 1 0 0 1 1.277-.057l19.495 14.79A.993.993 0 0 0 24 20v.057a1.5 1.5 0 0 1-.85 1.352Z"})}),(0,i.jsx)("g",{filter:"url(#filter1_d_6530_283)",children:(0,i.jsx)("path",{fill:"#1F9CF0",d:"M18.206 23.79a1.495 1.495 0 0 1-1.706-.29c.553.553 1.5.162 1.5-.621V1.12C18 .34 17.053-.054 16.5.5a1.496 1.496 0 0 1 1.706-.29l4.944 2.377c.52.25.85.776.85 1.352v16.122a1.5 1.5 0 0 1-.85 1.352l-4.944 2.377Z"})}),(0,i.jsx)("path",{fill:"url(#paint0_linear_6530_283)",fillRule:"evenodd",d:"M17.004 23.836c.378.148.81.138 1.19-.045l4.942-2.378a1.5 1.5 0 0 0 .85-1.352V3.939a1.5 1.5 0 0 0-.85-1.352L18.195.21A1.494 1.494 0 0 0 16.49.5L7.03 9.13 2.91 6.002a.999.999 0 0 0-1.276.057L.313 7.261a1 1 0 0 0-.002 1.48L3.885 12 .31 15.26a1 1 0 0 0 .002 1.478l1.321 1.202a1 1 0 0 0 1.276.057l4.12-3.128 9.46 8.63c.15.15.325.263.514.336Zm.985-17.284L10.812 12l7.177 5.448V6.552Z",clipRule:"evenodd",opacity:".25"})]})]}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("filter",{id:"filter0_d_6530_283",width:"28.015",height:"22.139",x:"-2.015",y:"3.799",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,i.jsx)("feOffset",{}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,i.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_6530_283"}),(0,i.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6530_283",result:"shape"})]}),(0,i.jsxs)("filter",{id:"filter1_d_6530_283",width:"11.5",height:"27.876",x:"14.5",y:"-1.938",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,i.jsx)("feOffset",{}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,i.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,i.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_6530_283"}),(0,i.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6530_283",result:"shape"})]}),(0,i.jsxs)("linearGradient",{id:"paint0_linear_6530_283",x1:"11.985",x2:"11.985",y1:".062",y2:"23.938",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#fff"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,i.jsx)("clipPath",{id:"clip0_6530_283",children:(0,i.jsx)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})]})]}))}e.s(["default",()=>s4],305464)},77164,e=>{"use strict";var t=e.i(276385),n=e.i(516245),r=e.i(799634),i=e.i(9303),a=e.i(162225),o=e.i(371222),s=e.i(840752),l=e.i(442966),u=e.i(297083),c=e.i(167626);e.i(878420);var d=e.i(530658),f=e.i(817556),p=e.i(389959);e.i(368964);var h=e.i(93728),m=e.i(844941),g=e.i(305464),x=e.i(40916),y=e.i(416298);e.i(596139);var b=e.i(903381),w=e.i(811081),_=e.i(255614),k=e.i(993796),S=e.i(222342),C=e.i(207237),j=e.i(282453),T=e.i(858248),E=e.i(709485);e.i(973519);var R=e.i(902379),I=e.i(299798),A=e.i(813675),P=e.i(529810),D=e.i(200004),O=e.i(948981),N=e.i(824108),M=e.i(211733),L=e.i(22866),B=e.i(133783),V=e.i(959407),F=e.i(961228),U=e.i(778203),G=e.i(712516);e.i(443394);var $=e.i(480028),H=e.i(703774),z=e.i(446530),W=e.i(173703),q=e.i(613355),K=e.i(140487),Y=e.i(739521),Q=e.i(624782);e.i(396776);var X=e.i(552144);e.i(628796);var Z=e.i(960178),J=e.i(751273),ee=e.i(625484),et=e.i(211397);function en(){return(0,t.jsx)(et.default,{src:"/public/images/cursor-ide-logo.png",width:24,height:24,alt:"Cursor Logo"})}function er(e){var n=e.disabled,r=(0,d._)((0,p.useState)(!1),2),i=r[0],a=r[1],o=(0,S.default)(),s=o.showError,l=o.showConfirm,h=(0,k.useFlag)({controlName:"flag-codename"}),m=(0,R.useDevUrl)().url,x=(0,H.useTheme)().isDarkColorScheme;return((0,I.usePid2)(function(e,n){var r=n.signal;return(0,u._)(function(){var n,o,u,d,p,h;return(0,f._)(this,function(f){switch(f.label){case 0:if(!i)return[2];f.label=1;case 1:return f.trys.push([1,3,4,5]),[4,e.vscode.start.rpc({darkMode:x},{signal:r})];case 2:return(n=f.sent()).ok?m?((o=(0,A.addPortToUrl)(m,5905)).searchParams.set("folder","/home/runner/workspace"),o.searchParams.set("tkn",n.payload.token),window.open(o.toString(),"_blank")?l("VS Code launched successfully",3e3):s((0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:"VS Code is ready but popup was blocked"}),(0,t.jsx)("div",{children:"Please allow popups for this site and try again."})]}))):s("VS Code server started but URL generation failed. Please try again."):n.payload&&(u=n.payload.code,d=n.payload.message,"START_FAILED"===u?s((0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:"Failed to start VS Code server:"}),(0,t.jsx)("div",{children:d||"Please try again or contact support."})]})):"NOT_RUNNING"===u?s("VS Code service is not available. Please try again later."):s("Unknown VS Code error: ".concat(d))),[3,5];case 3:return p=f.sent(),h=(0,c._)(p,Error)?p.message:"Unknown error",s((0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:"Failed to connect to VS Code service:"}),(0,t.jsx)("div",{children:h})]})),[3,5];case 4:return a(!1),[7];case 5:return[2]}})})()},[i,m,x,s,l]),h)?(0,t.jsxs)(W.ShadesSurface,{css:eo.connectInstructions,children:[(0,t.jsxs)(ee.View,{css:eo.connectHeader,children:[(0,t.jsxs)(ee.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(Z.Header,{level:3,children:"VS Code in Browser"}),(0,t.jsx)(Q.Pill,{text:"Alpha",colorway:"warning",variant:"muted"})]}),(0,t.jsx)(Z.Text,{color:"dimmer",children:"Launch VS Code directly in your browser without setting up SSH."})]}),(0,t.jsx)(K.Button,{text:n?"VS Code Unavailable":"Launch VS Code in Browser",iconLeft:(0,t.jsx)(g.default,{}),css:eo.launchEditorButton,disabled:n||i,loading:i,onClick:function(){a(!0)}})]}):null}function ei(e){var n=e.editor,r=e.disabled,i=(0,V.default)(n),a=i.openEditor,o=i.onConfirmConfig,s=i.isConfigModalOpen,l=i.closeConfigModal;return(0,t.jsxs)(W.ShadesSurface,{css:eo.connectInstructions,children:[(0,t.jsxs)(ee.View,{css:eo.connectHeader,children:[(0,t.jsxs)(Z.Header,{level:3,children:["Connect to ","vscode"===n?"VS Code":"Cursor"]}),(0,t.jsxs)(Z.Text,{color:"dimmer",children:["One-click SSH setup will launch"," ","vscode"===n?"VS Code":"Cursor"," and configure keys for you."]})]}),(0,t.jsx)(K.Button,{text:r?"SSH Key Setup Required":"Launch ".concat("vscode"===n?"VS Code":"Cursor"),iconLeft:"vscode"===n?(0,t.jsx)(g.default,{}):(0,t.jsx)(en,{}),css:eo.launchEditorButton,disabled:r,onClick:function(){(0,T.track)(E.events.WORKSPACE,{action:"open_in_vscode_clicked",source:"ssh_pane",editor:n}),a()}}),(0,t.jsx)(Y.Modal,{isOpen:s,onRequestClose:l,centered:!0,children:(0,t.jsx)(M.default,{onConfirm:o})})]})}function ea(e){var n=e.sshHostname,r=e.sshUser,i=e.sshPort,a=(0,B.default)(),o="ssh -i ".concat(a,"/.ssh/replit -p ").concat(i," ").concat(r,"@").concat(n);return(0,t.jsxs)(W.ShadesSurface,{css:eo.connectInstructions,children:[(0,t.jsxs)(ee.View,{css:eo.connectHeader,children:[(0,t.jsx)(Z.Header,{level:3,children:"Connect manually"}),(0,t.jsx)(Z.Text,{color:"dimmer",children:"Use the command below to connect via CLI or another IDE."})]}),(0,t.jsx)(N.default,{code:o,header:"Shell command",multiline:!1,onCopy:function(){(0,T.track)(E.events.WORKSPACE,{action:"ssh_key_copied",source:"ssh_pane"})}})]})}var eo=(0,z.cssRecord)({tabContainer:[q.rcss.colWithGap(8),q.rcss.p(8)],connectEmptyState:[q.rcss.center,q.rcss.border({color:$.tokens.outlineDefault,width:1,style:"dashed"}),q.rcss.borderRadius(4),q.rcss.py(24),q.rcss.px(12)],connectHeader:[q.rcss.colWithGap(4)],connectInstructions:[q.rcss.colWithGap(12),q.rcss.p(8),q.rcss.borderRadius(4)],launchEditorButton:[q.rcss.borderRadius(8)]});function es(e){var n=e.legacyKeys,r=e.openFile,i=(0,C.default)(),a="legacy-ssh-keys-warning-".concat(i),o=(0,d._)((0,p.useState)(function(){return!j.default.get(a,"boolean")}),2),s=o[0],l=o[1],u=(0,p.useRef)(!1);return((0,p.useEffect)(function(){return j.default.get(a,"boolean")||l(!0),function(){u.current&&j.default.set(a,!0)}},[a]),n&&0!==n.length&&s)?(0,t.jsx)(ee.View,{children:(0,t.jsx)(X.StatusBannerButton,{colorway:"warning",iconLeft:(0,t.jsx)(y.default,{}),text:"Don't see your SSH keys here? We're moving from App-level keys to user-level keys. Click here to view your existing keys and re-add them using the 'New SSH Key' button above.",onClick:function(){r(O.SSH_AUTHORIZED_KEYS_FILE_PATH),u.current=!0}})}):null}function el(){var e,n=(0,h.useSshPaneCurrentUserQuery)(),r=n.data,i=n.loading,a=(0,U.default)();if(i||!a)return(0,t.jsx)(G.default,{pane:{type:"developer",data:{tab:["ssh","connect"]}},loading:!0,maxWidth:450});var o=a.sshHostname,s=a.sshUser,l=a.sshPort,u=0===(r&&(null==(e=r.currentUser)?void 0:e.__typename)==="CurrentUser"&&"PublicSshKeysOutput"===r.currentUser.publicSshKeys.__typename?r.currentUser.publicSshKeys.keys:[]).length;return(0,t.jsxs)(ee.View,{css:eo.tabContainer,children:[(0,t.jsx)(Z.Header,{variant:"subheadDefault",level:2,children:"Use Replit with another editor"}),(0,t.jsx)(Z.Text,{color:"dimmer",children:"SSH allows you to connect to an App from another machine or IDE."}),(0,t.jsxs)(ee.View,{py:8,gap:16,children:[(0,t.jsx)(er,{}),(0,t.jsx)(ei,{editor:"vscode",disabled:u}),(0,t.jsx)(ei,{editor:"cursor",disabled:u}),u?(0,t.jsxs)(ee.View,{css:eo.connectEmptyState,gap:8,children:[(0,t.jsx)(m.default,{size:24,color:$.tokens.foregroundDimmest}),(0,t.jsx)(Z.Text,{color:"dimmer",children:"You need to add an SSH key to your account before connecting"}),(0,t.jsx)(Z.Text,{color:"dimmer",variant:"small",children:"Switch to the Keys tab to manage SSH keys"})]}):(0,t.jsx)(ea,{sshHostname:o,sshPort:l,sshUser:s})]}),(0,t.jsx)(L.SshKeyTip,{})]})}function eu(e){var n,r,i,a,o,s=e.openFile,l=(0,h.useSshPaneCurrentUserQuery)(),c=l.data,m=l.loading,g=(0,d._)((0,p.useState)(!1),2),y=g[0],k=g[1],S=(r=(n=(0,d._)((0,p.useState)(null),2))[0],i=n[1],a=(0,P.default)().fs,(0,p.useEffect)(function(){(0,u._)(function(){var e;return(0,f._)(this,function(t){switch(t.label){case 0:return[4,a.readFile(O.SSH_AUTHORIZED_KEYS_FILE_PATH)];case 1:if((e=t.sent()).error===b.FsErrors.NotFound||e.error===b.FsErrors.IsDirectory)return[2];if(e.error)throw Error("Unexpected error reading authorized keys");return i(e.content.toString().split("\n").map(function(e){return e.startsWith("#")||(0,_.default)(e)?null:e}).filter(Boolean)),[2]}})})()},[a]),r);if(m)return(0,t.jsx)(ee.View,{p:16,children:"Loading..."});var C=c&&(null==(o=c.currentUser)?void 0:o.__typename)==="CurrentUser"&&"PublicSshKeysOutput"===c.currentUser.publicSshKeys.__typename?c.currentUser.publicSshKeys.keys:[],j=C.length>=w.SSH_KEY_LIMIT;return(0,t.jsxs)(ee.View,{css:eo.tabContainer,children:[(0,t.jsxs)(ee.View,{row:!0,justify:"space-between",children:[(0,t.jsx)(Z.Header,{variant:"subheadDefault",level:2,children:"Manage SSH Keys"}),(0,t.jsx)(J.Tooltip,{tooltip:"You are over the SSH key limit. Please remove some of your keys to add more.",isDisabled:!j,children:(0,t.jsx)(K.Button,{text:"Add SSH key",colorway:"primary",size:"small",disabled:j,iconLeft:(0,t.jsx)(x.default,{}),onClick:function(){return k(!0)}})})]}),(0,t.jsx)(Z.Text,{color:"dimmer",children:"Add authorized keys to configure SSH access to this App."}),(0,t.jsx)(es,{legacyKeys:S,openFile:s}),(0,t.jsx)(F.UserSshKeyList,{keys:C}),(0,t.jsx)(Y.Modal,{isOpen:y,onRequestClose:function(){return k(!1)},centered:!0,children:(0,t.jsx)(D.AddSshKeyDialog,{onConfirm:function(){return k(!1)}})})]})}var ec={label:"Connect",description:"Establish SSH connections to remote servers and manage active sessions",icon:(0,t.jsx)(l.default,{}),component:function(){return(0,t.jsx)(el,{})}},ed={label:"Keys",description:"Manage SSH public and private keys for secure authentication",icon:(0,t.jsx)(m.default,{}),component:function(e){var n=e.openPane,r=(0,p.useCallback)(function(e){return n({type:"codeEditor",data:{path:e}})},[n]);return(0,t.jsx)(eu,{openFile:r})}},ef={networking:o.networkingTab,resources:s.resourcesTab,dependencies:{label:"Dependencies",description:"Install, upgrade, and manage dependencies for your environment, build system, and application runtime",icon:(0,t.jsx)(n.default,{}),children:{import:i.dependenciesImportTab,nix:a.dependenciesNixTab}},ssh:{label:"SSH",description:"Configure remote access to connect to this Repl from another machine or IDE",icon:(0,t.jsx)(r.default,{}),children:{connect:ec,keys:ed}}};e.s(["developerTabs",()=>ef],77164)},702868,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245),i=e.i(304277);e.i(566901);var a=e.i(332055);function o(){var e=(0,n._)(["\n  query AgentInboxCurrentUser($replId: String!) {\n    currentUser {\n      id\n      isSubscribed\n    }\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          ...OrgFlagsOrg\n        }\n      }\n    }\n  }\n  ","\n"]);return o=function(){return e},e}var s={},l=(0,r.gql)(o(),a.OrgFlagsOrgFragmentDoc),u=e.i(270082),c=e.i(943565);function d(e){var n,r,a,o,d,f,p,h=(n={variables:{replId:e}},r=(0,t._)({},s,n),i.useQuery(l,r)).data,m=null!=(d=null==h||null==(a=h.currentUser)?void 0:a.isSubscribed)&&d,g=(null==h||null==(o=h.getRepl)?void 0:o.__typename)==="Repl"?h.getRepl:null,x=null!=(f=null==g?void 0:g.org)?f:null,y=!!x&&(null==(p=(0,u.orgFlags)(x)["flag-agent-inbox"])||p),b=(0,c.useExperimentParam)("agent_inbox_experiment","agent_inbox_enabled",!1);return x?y?{showToggle:!0,isEnabled:!0,showUpsell:!1}:{showToggle:!1,isEnabled:!1,showUpsell:!1}:m?b?{showToggle:!0,isEnabled:!0,showUpsell:!1}:{showToggle:!1,isEnabled:!1,showUpsell:!1}:{showToggle:!0,isEnabled:!1,showUpsell:!0}}e.s(["useShowAgentInbox",()=>d],702868)},225500,e=>{"use strict";var t=e.i(368964),n=e.i(878420),r=e.i(569384),i=e.i(973245),a=e.i(304277);function o(){var e=(0,r._)(["\n  fragment AgentAuthorizations on OrgAuthorizations {\n    paidAgent: useAiAgent(tier: paid) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n    freeAgent: useAiAgent(tier: free) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n  }\n"]);return o=function(){return e},e}function s(){var e=(0,r._)(["\n  query GetAgentRepl($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n        }\n        user {\n          id\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return s=function(){return e},e}function l(){var e=(0,r._)(["\n  query GetAgentReplAuthorizations(\n    $orgId: String\n    $ownerUserId: Int!\n    $replId: String!\n  ) {\n    currentUser {\n      id\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...AgentAuthorizations\n        }\n        ... on Error {\n          message\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          authorizations {\n            ... on OrgAuthorizations {\n              ...AgentAuthorizations\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n    replOwner: user(id: $ownerUserId) {\n      id\n      paidAgentAuthorization(replId: $replId) {\n        ... on OrgAuthorization {\n          isAuthorized\n          message\n          code\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return l=function(){return e},e}e.i(566901);var u={},c=(0,i.gql)(o()),d=(0,i.gql)(s()),f=(0,i.gql)(l(),c),p=e.i(207237),h={__typename:"OrgAuthorization",isAuthorized:!1,message:"Free agent is not available in personal repls for guests",code:t.OrgAuthorizationCode.InsufficientPermissions};function m(){var e=(0,p.default)(),t=(j=(k={variables:{replId:(0,p.default)()}},S=(0,n._)({},u,k),C=a.useQuery(d,S)).data,T=C.loading,E=C.error,{orgId:(null==j?void 0:j.getRepl.__typename)==="Repl"?null==(w=j.getRepl.org)?void 0:w.id:void 0,ownerUserId:(null==j?void 0:j.getRepl.__typename)==="Repl"?null==(_=j.getRepl.user)?void 0:_.id:void 0,loading:T,error:E}),r=t.orgId,i=t.ownerUserId,o=t.loading,s=t.error,l=(R={variables:{orgId:r,ownerUserId:null!=i?i:0,replId:e},skip:!i},I=(0,n._)({},u,R),a.useQuery(f,I)),c=l.data,m=l.loading,g=l.error,x=l.refetch,y=null==c||null==(A=c.currentUser)?void 0:A.id,b=!!y&&!!i&&y===i;if(o||m)return{loading:!0,refetch:x};if(s||g)return{loading:!1,refetch:x};if(r)return{authorizations:(null==c||null==(D=c.currentUser)?void 0:D.org.__typename)==="Org"?c.currentUser.org.authorizations:void 0,loading:!1,refetch:x,isOwner:b,isOrgRepl:!0};if(!i)return{authorizations:void 0,loading:!1,refetch:x,isOwner:b,isOrgRepl:!1};if(b){var w,_,k,S,C,j,T,E,R,I,A,P,D,O,N=null==c||null==(O=c.currentUser)?void 0:O.personalOrgAuthorizations;return{authorizations:(null==N?void 0:N.__typename)==="OrgAuthorizations"?N:void 0,loading:!1,refetch:x,isOwner:b,isOrgRepl:!1}}var M=null==c||null==(P=c.replOwner)?void 0:P.paidAgentAuthorization;return(null==M?void 0:M.__typename)==="OrgAuthorization"?{authorizations:{__typename:"OrgAuthorizations",paidAgent:M,freeAgent:h},loading:!1,refetch:x,isOwner:b,isOrgRepl:!1}:{authorizations:void 0,loading:!1,refetch:x,isOwner:b,isOrgRepl:!1}}e.s(["useAgentAuthorization",()=>m],225500)},558666,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M14.25 3a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0V4.81l-5.72 5.72a.75.75 0 1 1-1.06-1.06l5.72-5.72H15a.75.75 0 0 1-.75-.75Zm-3.72 10.47a.75.75 0 0 1 0 1.06l-5.72 5.72H9a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75v-6a.75.75 0 0 1 1.5 0v4.19l5.72-5.72a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},800908,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M21.53 2.47a.75.75 0 0 1 0 1.06l-5.72 5.72H20a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1-.75-.75V4a.75.75 0 0 1 1.5 0v4.19l5.72-5.72a.75.75 0 0 1 1.06 0ZM4 14.75a.75.75 0 0 1 0-1.5h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-4.19l-5.72 5.72a.75.75 0 0 1-1.06-1.06l5.72-5.72H4Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},936381,e=>{"use strict";var t=e.i(753950),n=t.StateEffect.define(),r=t.StateEffect.define();e.s(["inlinePocketEffect",()=>n,"setInlinePocketCodeBlock",()=>r])},92798,e=>{e.v({iconButton:"index-module__en9y3q__iconButton",moreButton:"index-module__en9y3q__moreButton",root:"index-module__en9y3q__root"})},787433,468345,e=>{"use strict";var t,n=e.i(904851),r=e.i(90659),i=e.i(721281),a=e.i(276385),o=e.i(389959),s=e.i(992785),l=e.i(753950),u=e.i(179302);e.i(508987);var c=e.i(457103),d=e.i(878420),f=e.i(64386),p=e.i(936381),h=e.i(738705),m=e.i(969932),g=e.i(858248),x=e.i(709485);function y(e){var t=e.state.field(b);return!!t&&("generateCode"===t.type&&(0,g.track)(x.events.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:t.source}),e.dispatch({effects:p.inlinePocketEffect.of(null)}),!0)}var b=l.StateField.define({create:function(){return null},update:function(e,t){if((0,m.forEachEffect)(t,p.inlinePocketEffect,function(t){e=t.value?{id:t.value.id,codeReference:t.value.codeReference,type:t.value.type,source:t.value.source,loading:t.value.loading,data:t.value.data}:null}),!e||t.changes.empty)return e;var n=e.codeReference.range.indexFrom>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexFrom),r=e.codeReference.range.indexTo>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexTo);return n>=r?null:e=(0,f._)((0,d._)({},e),{codeReference:(0,f._)((0,d._)({},e.codeReference),{range:{indexFrom:n,indexTo:r,lineFrom:t.newDoc.lineAt(n).number,lineTo:t.newDoc.lineAt(r).number}})})},provide:function(e){return[l.Prec.highest(u.keymap.of([{key:"Escape",run:y}])),h.Loading.from(e,function(e){var t;return null!=(t=(null==e?void 0:e.loading)&&e.codeReference.range.indexFrom===e.codeReference.range.indexTo)?t:null})]}}),w=l.StateField.define({create:function(){return null},update:function(e,t){if(!t.state.field(b))return null;var n=!0,r=!1,i=void 0;try{for(var a,o=t.effects[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.is(p.inlinePocketEffect)&&(e=null),s.is(p.setInlinePocketCodeBlock)&&(e=s.value)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e}});e.s(["InlinePocketCodeBlock",()=>w,"InlinePocketState",()=>b],468345);var _=e.i(928353),k=e.i(700170),S=e.i(828322),C=e.i(337761),j=e.i(332441);e.i(32109);var T=e.i(926118),E=e.i(480028),R=e.i(173703),I=e.i(136540),A=e.i(960178),P=e.i(625484),D=e.i(92798),O=(0,E.cvarsFrom)("index.module.css",["--opacity","--transform"]),N=new _.CodeMirrorComponent(function(e){var t,n=e.controls,r=e.verticalPlacement,s=e.onMoreClick,l=(0,o.useRef)(null),u=(0,j.useIsMac)();return(0,o.useEffect)(function(){var e;(0,C.styleSet)(l,(e={},(0,i._)(e,O.opacity,"1"),(0,i._)(e,O.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(E.tokens.space4,"))")),e))},[r]),(0,a.jsxs)(R.ShadesSurface,{innerRef:l,clsx:D.default.root,align:"stretch",row:!0,style:(t={},(0,i._)(t,O.opacity,"0"),(0,i._)(t,O.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(E.tokens.space16,"))")),t),children:[n.map(function(e){var t=(0,a.jsxs)(P.View,{row:!0,gap:2,align:"center",children:[(0,a.jsx)(A.Text,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,a.jsx)(A.Text,{variant:"small",color:"dimmest",children:(0,T.keyComboText)(e.shortcut,u)}):null]});return(0,a.jsx)(I.IconButton,{alt:e.text,onClick:e.onClick,size:28,tooltipContents:t,className:D.default.iconButton,children:e.icon},e.text)}),s?(0,a.jsx)(I.IconButton,{alt:"More",onClick:function(e){var t=(l.current||e.target).getBoundingClientRect();s({top:t.top,right:t.right})},size:28,className:D.default.moreButton,children:(0,a.jsx)(S.default,{size:16})}):null]})}),M="cm-selection-controls-layer",L="cm-selection-controls-dom",B=u.EditorView.theme((t={},(0,i._)(t,".".concat(M),{width:"100%"}),(0,i._)(t,".".concat(L),{position:"absolute"}),t)),V=function(){function e(t){(0,n._)(this,e),(0,i._)(this,"options",void 0),this.options=t}return(0,r._)(e,[{key:"draw",value:function(){var e=this.options,t=e.controls,n=e.onMoreClick,r=e.top,i=e.align,a=e.verticalPlacement,o=N.create({controls:t,onMoreClick:n,verticalPlacement:a});return o.className=L,o.style.top=r+"px","left"===i.side?(o.style.left=i.value+"px",o.style.right=""):(o.style.right=i.value+"px",o.style.left=""),o.style.pointerEvents="none",setTimeout(function(){o.style.pointerEvents="auto"},200),o}},{key:"eq",value:function(e){return(0,s.default)(e.options,this.options)}}]),e}(),F=l.StateEffect.define(),U=l.StateField.define({create:function(){return null},update:function(e,t){var n;return!t.state.selection||(null==(n=t.state.selection)?void 0:n.main.empty)?null:((0,m.forEachEffect)(t,F,function(t){e=t.value}),e)}}),G=l.StateField.define({create:function(e){return!e.selection.main.empty},update:function(e,t){return!t.state.selection.main.empty}}),$=u.ViewPlugin.define(function(e){var t=function(){var t=e.state.selection.main;e.dispatch({effects:F.of(t.empty?null:Date.now())})},n=function(e){"Shift"===e.key&&t()},r=function(){document.addEventListener("mouseup",t),document.addEventListener("keyup",n)},i=function(){document.removeEventListener("mouseup",t),document.removeEventListener("keyup",n)};return{update:function(e){(0,c.hasChanged)(e,G)&&(e.state.field(G)?r():i())},destroy:i}}),H=new k.ReactCompartment(function(e){return[B,(0,u.layer)({above:!0,class:M,update:function(e){return(0,c.hasChanged)(e,b,U)},markers:function(t){if(!t.hasFocus)return[];var n=t.state.field(U)?t.state.selection.main:null;if(!n||t.state.field(b,!1))return[];var r=function(e,t){for(var n=Math.min(t.from,t.to),r=Math.max(t.from,t.to),i=null;n<=r;){var a=e.lineAt(n);n=a.to+1,null!==i&&a.length<i.length||(i=a)}return i}(t.state.doc,n);if(!r)return[];var i=t.coordsAtPos(r.to);if(!i)return[];var a=t.lineBlockAt(Math.min(n.anchor,n.head)),o=t.dom.getBoundingClientRect(),s=t.contentDOM.getBoundingClientRect(),l=a.top+t.documentPadding.top-30,u=s.right-i.left<200?{side:"right",value:o.right-s.right+16}:{side:"left",value:i.left-o.left},c="top";if(l<t.scrollDOM.scrollTop){var d=t.lineBlockAt(n.to);l=d.top+d.height,c="bottom"}return[new V({top:l,align:u,controls:e.controls(t),onMoreClick:e.onMoreClick,verticalPlacement:c})]}}),G,U,$]});e.s(["SelectionControls",()=>H],787433)},593767,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsxs)(i.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{d:"M13 2.25a.75.75 0 0 1 0 1.5H4A1.25 1.25 0 0 0 2.75 5v16.19l2.134-2.134a2.75 2.75 0 0 1 1.944-.806H20A1.25 1.25 0 0 0 21.25 17v-6a.75.75 0 0 1 1.5 0v6A2.75 2.75 0 0 1 20 19.75H6.828c-.29 0-.57.101-.792.283l-.092.083-2.202 2.202a1.46 1.46 0 0 1-2.488-.924l-.004-.108V5A2.75 2.75 0 0 1 4 2.25h9Z"}),(0,r.jsx)("path",{d:"M19 1.25a.75.75 0 0 1 .75.75v2.25H22a.75.75 0 0 1 0 1.5h-2.25V8a.75.75 0 0 1-1.5 0V5.75H16a.75.75 0 0 1 0-1.5h2.25V2a.75.75 0 0 1 .75-.75Z"})]}))}e.s(["default",()=>a])},933101,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(787433),i=e.i(593767),a=e.i(262206),o=e.i(480028),s={id:"editor.generateOrModifyWithAI",name:"AI",description:"Generate or modify selection with AI",default:(0,a.defaultKeyCombo)({cmdOrCtrl:!0,key:"i"}),scope:"editor"};function l(e){var a=e.addToChat,s=e.onMoreClick,l=(0,n.useMemo)(function(){return{controls:function(e){return[{text:"Add to chat",icon:(0,t.jsx)(i.default,{size:16,color:o.tokens.accentPrimaryDefault}),onClick:function(){return a(e,"highlight")}}]},onMoreClick:s}},[a,s]);return r.SelectionControls.use(l)}e.s(["generateOrModifyWithAICommand",()=>s,"useSelectionControls",()=>l])},159667,e=>{"use strict";var t={gitCommit:{id:"git.commit",name:"Git: Commit",scope:"git",default:(0,e.i(262206).defaultKeyCombo)({cmdOrCtrl:!0,key:"Enter"})}},n=Object.values(t);e.s(["GitCommandScope",()=>"git","commands",()=>t,"gitCommands",()=>n])},256059,e=>{"use strict";var t=e.i(721281),n=e.i(276385),r=e.i(926118),i=e.i(480028),a=e.i(446530),o=e.i(123850),s=e.i(613355),l=e.i(625484),u=(0,o.createCssVarTokens)(["fontSize"]),c=u.cssVars,d=u.styleTokens,f=(0,a.cssRecord)({button:[s.rcss.reset.button,s.rcss.flex.row,s.rcss.align.center,s.rcss.cursor.pointer,s.rcss.hover({opacity:1}),{opacity:.6,fontFamily:i.tokens.fontFamilyDefault,"*":{fontSize:d.fontSize,borderColor:i.tokens.foregroundDimmest,color:i.tokens.foregroundDimmest},":hover *":{borderColor:i.tokens.foregroundDefault,color:i.tokens.foregroundDefault}}],keyCombo:[{marginLeft:"calc(".concat(d.fontSize," * 0.3)")}]});function p(e){return(0,n.jsxs)(l.View,{className:e.className,tag:"button",css:f.button,style:(0,t._)({},c.fontSize,e.fontSize+"px"),onClick:e.onClick,children:[(0,n.jsx)(l.View,{children:e.text}),e.keyCombo?(0,n.jsx)(l.View,{css:f.keyCombo,justify:"center",children:(0,n.jsx)(r.KeyComboBlocks,{fontSize:.8*e.fontSize,keyCombo:e.keyCombo})}):null]})}e.s(["HintButton",()=>p])},759025,e=>{"use strict";var t,n=e.i(276385),r=e.i(389959),i=e.i(358752),a=e.i(61524),o=e.i(993796),s=e.i(441329),l=e.i(256059);e.i(32109);var u=e.i(384401),c=e.i(262206),d=e.i(446530),f=((t={}).Prompt="Prompt",t.CommandStart="CommandStart",t.CommandExecuted="CommandExecuted",t.CommandFinished="CommandFinished",t),p={A:"Prompt",B:"CommandStart",C:"CommandExecuted",D:"CommandFinished"},h={id:"shell.generateWithAI",name:"Generate with AI in the shell",default:(0,c.defaultKeyCombo)({cmdOrCtrl:!0,key:"i"}),scope:"editor"},m=(0,d.cssRecord)({root:{marginLeft:"auto"}});function g(e){var t=e.onFTCSState,c=e.onOpenGeneratePrompt,d=e.onUpdateCurrentPromptLineNumber,f=(0,a.usePreferences)("fontSize").preferences.fontSize,g=(0,r.useRef)(null),x=(0,r.useRef)(null),y=(0,s.useIsInMobileWorkspace)(),b=(0,u.useKeyCombo)(h.id),w=(0,r.useRef)(null),_=(0,o.useFlag)({controlName:"flag-leftover-assistant"});return(0,r.useCallback)(function(e,r){var a=p[r.split(";")[0]];if(a&&t&&t({state:a,data:r.split(";")[1]}),"B"===r){var o,s,u=e.buffer.active,h=u.cursorX,k=u.cursorY;d(k),g.current&&g.current.dispose(),x.current&&x.current.dispose(),w.current&&(w.current.unmount(),w.current=null);var S=Math.round(12.6);g.current=e.registerMarker(0),x.current=null!=(s=e.registerDecoration({marker:g.current,x:Math.max(0,e.cols-S),width:S,layer:"top"}))?s:null,null==(o=x.current)||o.onRender(function(t){for(var r=!1,a=e.buffer.active._buffer.lines._array[k],o=h;o<e.cols;o++)if((null==a?void 0:a.hasContent(o))!==0){r=!0;break}var s=!r&&_;w.current||(w.current=(0,i.createRoot)(t)),w.current.render(s?(0,n.jsx)(l.HintButton,{css:m.root,onClick:function(e){e.stopPropagation(),c()},keyCombo:y?void 0:b,text:"Generate",fontSize:Math.round(.9*f)}):null)})}},[c,d,y,b,f,t,_])}e.s(["FTCSState",()=>f,"FTCS_OSC_ID",()=>133,"generateWithAIInShellCommand",()=>h,"useInBandFinalTermMessages",()=>g])},917375,109858,86159,e=>{"use strict";var t,n=e.i(276385),r=e.i(480028),i=e.i(446530),a=e.i(613355),o=e.i(625484),s=(0,i.cssRecord)({root:[a.rcss.borderRadius(8),a.rcss.backgroundColor.backgroundRoot,a.rcss.border({color:r.tokens.outlineDimmest})],video:[a.rcss.borderRadius(8),a.rcss.width("100%")]});function l(e){var t=e.src,r=e.autoPlay,i=e.loop,a=e.width;return(0,n.jsx)(o.View,{css:s.root,p:4,style:{width:void 0===a?280:a},children:(0,n.jsx)("video",{css:s.video,src:t,autoPlay:void 0===r||r,loop:void 0===i||i,playsInline:!0,muted:!0})})}var u=e.i(960178),c=((t={}).Welcome="Welcome",t.Editor="Editor",t.Examples="Examples",t.Run="Run",t.Output="Output",t.Sidepane="Sidepane",t.Share="Share",t),d=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},f=(0,i.cssRecord)({welcome:[a.rcss.maxWidth(400)],tooltipContainer:[a.rcss.width("100%"),a.rcss.center,a.rcss.position.relative],textContainer:[a.rcss.colWithGap(8),a.rcss.width("100%"),a.rcss.py(8)]}),p={id:"workspace-desktop-new-user-tour",steps:[{id:"Welcome",isModal:!0,title:"Welcome to the Workspace",content:function(){return(0,n.jsx)(o.View,{"data-cy":"workspace-tour-welcome",css:f.welcome,children:(0,n.jsxs)(u.Text,{children:["The Workspace is where you create projects on Replit. These are called"," ",(0,n.jsx)("strong",{children:"Apps."}),(0,n.jsx)("br",{}),"Let's explore around!"]})})}},{id:"Editor",title:"Code Editor",content:function(){return(0,n.jsxs)(o.View,{css:f.tooltipContainer,children:[(0,n.jsx)(l,{src:d("editor"),autoPlay:!0,loop:!0}),(0,n.jsx)(o.View,{css:f.textContainer,children:(0,n.jsx)(u.Text,{children:"This is where you write code. The editor helps you by giving you suggestions and coloring your code."})})]})}},{id:"Examples",title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:"Run",title:"Run Button",content:function(){return(0,n.jsxs)(o.View,{css:f.tooltipContainer,children:[(0,n.jsx)(l,{src:d("run-button"),autoPlay:!0,loop:!0}),(0,n.jsx)(o.View,{css:f.textContainer,children:(0,n.jsx)(u.Text,{children:"Tap the Run button to run your code and see its output."})})]})},advanceOnTargetClick:!0},{id:"Output",title:"Output",content:function(){return(0,n.jsxs)(o.View,{css:f.tooltipContainer,children:[(0,n.jsx)(l,{src:d("output"),autoPlay:!0,loop:!0}),(0,n.jsx)(o.View,{css:f.textContainer,children:(0,n.jsx)(u.Text,{children:"This is where your run output appears. This can be text, websites, games, and more depending on the template youre using."})})]})}},{id:"Sidepane",title:"Sidebar",content:function(){return(0,n.jsxs)(o.View,{css:f.tooltipContainer,children:[(0,n.jsx)(l,{src:d("sidebar"),autoPlay:!0,loop:!0}),(0,n.jsxs)(o.View,{css:f.textContainer,children:[(0,n.jsxs)(u.Text,{children:[(0,n.jsx)("strong",{children:"Files"})," is where all of your Apps code is."]}),(0,n.jsxs)(u.Text,{children:[(0,n.jsx)("strong",{children:"Tools"})," is where Packages, Debugger, Chat, Git, and more can be found."]}),(0,n.jsx)(u.Text,{children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]})}},{id:"Share",title:"Invite & Collaborate",content:function(){return(0,n.jsxs)(o.View,{css:f.tooltipContainer,children:[(0,n.jsx)(l,{src:d("invite-multiplayer"),autoPlay:!0,loop:!0}),(0,n.jsx)(o.View,{css:f.textContainer,children:(0,n.jsx)(u.Text,{children:"Invite others to your App to collaborate and work together at the same time."})})]})}}]};e.s(["TourStepIds",()=>c,"newUserTour",()=>p],917375);var h=e.i(389959),m=e.i(541793),g=e.i(161322),x=e.i(98816),y=(0,h.createContext)(void 0),b=(0,m.atom)(null),w=function(e){var t=e.activeTourId,n=e.activeStepId;return"".concat(t,":").concat(n)},_=(0,m.atom)(new Map),k=(0,m.atom)(function(e){return!e(O)&&!e(P)}),S=(0,m.atom)(function(e){var t,n,r=e(D);return r&&null!=(n=null==(t=e(b))?void 0:t.steps.find(function(e){return e.id===r}))?n:null}),C=(0,m.atom)(function(e){var t=e(S);return(null==t?void 0:t.isModal)?t:null}),j=(0,m.atom)(function(e){var t,n=e(D);if(!n)return -1;var r=e(b);return null!=(t=null==r?void 0:r.steps.findIndex(function(e){return n===e.id}))?t:-1}),T=(0,m.atom)(function(e){var t,n=null==(t=e(b))?void 0:t.id,r=e(D);return r&&n?e(_).get(w({activeTourId:n,activeStepId:r})):null}),E=(0,m.atom)(function(e){var t=e(b),n=e(_);return null==t?void 0:t.steps.filter(function(e){return!e.autoSkipIfNoTarget||!!n.get(w({activeTourId:t.id,activeStepId:e.id}))})}),R=(0,m.atom)(function(e){var t,n=e(D);if(!n)return -1;var r=e(E);return null!=(t=null==r?void 0:r.findIndex(function(e){return n===e.id}))?t:-1}),I=(0,m.atom)(function(e){var t,n;return null!=(n=null==(t=e(E))?void 0:t.length)?n:0}),A=(0,m.atom)(null,function(e,t,n,r,i){t(_,function(e){var t=new Map(e);return i?t.set(w({activeTourId:n,activeStepId:r}),i):t.delete(w({activeTourId:n,activeStepId:r})),t})}),P=(0,m.atom)(!1),D=(0,m.atom)(null),O=(0,m.atom)(!1),N=(0,m.atom)(function(e){return e(b)&&!e(P)&&!e(O)}),M=(0,m.atom)(null),L=(0,m.atom)(null,function(e,t,n){var r,i=e(b);if(i&&!((r="number"==typeof n?n:i.steps.findIndex(function(e){return n===e.id}))<0)&&!(r>=i.steps.length)){for(var a=e(j),o=e(_),s=i.steps[r],l=r<a;!o.get(w({activeTourId:i.id,activeStepId:s.id}))&&s.autoSkipIfNoTarget;){if((r=l?r-1:r+1)<0||r>=i.steps.length)return;s=i.steps[r]}t(D,s.id)}}),B=(0,m.atom)(null,function(e,t){var n=e(b);if(n){var r=e(j),i=e(_);t(M,null);var a=n.steps[r+1];if(a&&a.autoSkipIfNoTarget)for(var o=r+1;a&&a.autoSkipIfNoTarget&&!i.get(w({activeTourId:n.id,activeStepId:a.id}));)o++,a=n.steps[o];if(!a)return void t(O,!0);t(D,a.id)}}),V=(0,m.atom)(null,function(e,t){t(L,0),t(O,!1)});function F(e){var t=e.tour,n=(0,m.createStore)();return n.set(b,t),n.set(D,t.steps[0].id),n}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,h.useContext)(y),i=(0,h.useMemo)(function(){return(0,m.atom)(function(e){return!(e(P)||e(O))&&t===e(D)})},[t]),a=(0,g.useSetAtom)(B,{store:r}),o=(0,g.useSetAtom)(L,{store:r}),s=$(e,t),l=(0,g.useAtomValue)(i,{store:r}),u=(0,h.useRef)(l),c=(0,x.default)(n.onEnter),d=(0,x.default)(n.onExit);return(0,h.useEffect)(function(){if(l){var e;null==(e=c.current)||e.call(c)}},[l,c]),(0,h.useEffect)(function(){if(u.current&&!l){var e;null==(e=d.current)||e.call(d)}u.current=l},[l,d]),{isActive:l,tourRef:s,next:a,goto:o}}e.s(["activeStepAtom",()=>S,"activeStepIdAtom",()=>D,"createTourStore",()=>F,"currentStepElementAtom",()=>T,"currentStepIndexAtom",()=>j,"filteredCurrentStepIndexAtom",()=>R,"gotoAtom",()=>L,"isDoneAtom",()=>O,"isLoadingAtom",()=>P,"isTouringAtom",()=>N,"modalStepAtom",()=>C,"nextAtom",()=>B,"restartAtom",()=>V,"setStepElementsAtom",()=>A,"showStepAtom",()=>k,"totalStepsAtom",()=>I,"tourContext",()=>y,"tourPausedReasonAtom",()=>M],109858);var G=function(){};function $(e,t){var n=(0,h.useContext)(y),r=(0,g.useSetAtom)(A,{store:n}),i=(0,h.useCallback)(function(n){r(e,t,n)},[e,r,t]);return n?i:G}function H(){var e=(0,h.useContext)(y);if(!e)throw Error("useTourModal must be used within a TourRoot");var t=(0,g.useAtomValue)(C,{store:e}),n=(0,g.useSetAtom)(L,{store:e}),r=(0,g.useAtomValue)(j,{store:e}),i=(0,g.useAtomValue)(I,{store:e}),a=(0,g.useSetAtom)(O,{store:e});return{activeStep:t,totalSteps:i,goto:n,currentStepIndex:r,done:(0,h.useCallback)(function(){return a(!0)},[a])}}function z(){var e=(0,h.useContext)(y),t=(0,g.useAtomValue)(N,{store:e});return e&&t}function W(){var e=(0,h.useContext)(y),t=(0,g.useAtomValue)(S,{store:e});return e?t:null}e.s(["useActiveTourStep",()=>W,"useIsTouring",()=>z,"useSetTourStepTarget",()=>$,"useTourModal",()=>H,"useTourStep",()=>U],86159)},406206,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(886513),i=e.i(346715),a=e.i(276385),o=e.i(116235),s=e.i(480028),l=e.i(446530),u=e.i(754873),c=e.i(613355),d=e.i(112767),f=e.i(751273),p=e.i(625484),h=[c.rcss.reset.button,c.rcss.p(2),c.rcss.height(22),c.rcss.rowWithGap(4),c.rcss.align.center,u.interactive.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}],m=(0,l.cssRecord)({button:h,disabledButton:(0,i._)(h).concat([{color:s.tokens.foregroundDimmest,cursor:"default"}]),text:[{fontSize:s.tokens.fontSizeSmall}],switchWrapper:[c.rcss.height(22),c.rcss.pr(4),u.interactive.nofill,{opacity:.8,userSelect:"none","& > label":{gap:0,cursor:"pointer"},"& > label > svg":{scale:"0.6"}}]});function g(e){var i,s=e.altText,l=e.buttonText,u=e.icon,c=(0,r._)(e,["altText","buttonText","icon"]),d=null!=(i=c.disabledTooltip)?i:"This action is disabled";return(0,a.jsx)(f.Tooltip,{tooltip:d,isDisabled:!c.disabled,children:(0,a.jsxs)(p.View,(0,n._)((0,t._)({},c),{alt:s,tag:"button",css:c.disabled?m.disabledButton:m.button,children:[(0,a.jsx)(o.IconContext.Provider,{value:{size:12},children:u}),(0,a.jsx)(p.View,{css:m.text,children:l})]}))})}function x(e){var t=e.text,n=e.isSelected,r=e.onChange;return(0,a.jsx)(p.View,{css:m.switchWrapper,row:!0,align:"center",children:(0,a.jsx)(d.Switch,{colorway:"primary","aria-label":t,isSelected:n,onChange:r,children:(0,a.jsx)(p.View,{css:m.text,children:t})})})}e.s(["PaneHeaderActionButton",()=>g,"PaneHeaderSwitch",()=>x])},782672,e=>{"use strict";var t=e.i(394212),n=e.i(297083),r=e.i(817556),i=e.i(389959);e.i(242933);var a=e.i(279606);e.i(925218);var o=e.i(112077),s=e.i(267103),l=e.i(641555),u=e.i(299798);function c(){var e=(0,o.useCreateObservable)(null);return(0,u.usePid2)(function(i){return(0,n._)(function(){var n,a,o,s,l,u,c,d;return(0,r._)(this,function(r){switch(r.label){case 0:n=i.environment.nixState.subscribe({}).resReadable,a=!1,o=!1,r.label=1;case 1:r.trys.push([1,6,7,12]),l=(0,t._)(n),r.label=2;case 2:return[4,l.next()];case 3:if(!(a=!(u=r.sent()).done))return[3,5];(c=u.value).ok&&e.set(c.payload),r.label=4;case 4:return a=!1,[3,2];case 5:return[3,12];case 6:return d=r.sent(),o=!0,s=d,[3,12];case 7:if(r.trys.push([7,,10,11]),!(a&&null!=l.return))return[3,9];return[4,l.return()];case 8:r.sent(),r.label=9;case 9:return[3,11];case 10:if(o)throw s;return[7];case 11:return[7];case 12:return[2]}})})()},[e]),(0,i.useMemo)(function(){return a.Observable.from(e)},[e])}function d(){var e=c();return(0,l.useObservableMemo)(function(){return e.select(function(e){switch(null==e?void 0:e.status){case"error":case"rebuilding-after-error":return e;default:return null}})},[e],{default:null})}function f(){return(0,s.useObservable)(c())}e.s(["default",()=>f,"useNixError",()=>d])},561873,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{d:"M19 2.25A2.75 2.75 0 0 1 21.75 5v14A2.75 2.75 0 0 1 19 21.75H5A2.75 2.75 0 0 1 2.25 19V5A2.75 2.75 0 0 1 5 2.25h14Z"})}))}e.s(["default",()=>a])},94764,453726,840111,262962,999292,367024,301141,e=>{"use strict";var t=e.i(276385),n=e.i(803640),r=e.i(255701),i=e.i(858248),a=e.i(709485),o=e.i(982829),s=e.i(530658),l=e.i(87995),u=e.i(389959),c=e.i(82259),d=e.i(269848),f=e.i(40916),p=e.i(561873),h=e.i(491194),m=e.i(416298),g=e.i(761201),x=e.i(761732),y=e.i(927158),b=e.i(346715),w=e.i(131141),_=e.i(179104),k=e.i(516169),S=e.i(968323),C=e.i(721281);e.s(["METADATA_HEIGHT_PX",()=>28,"TASK_CONNECTOR_X_OFFSET",()=>18,"TASK_TYPE_INDICATOR_X_OFFSET",()=>30],453726);var j=e.i(480028),T=e.i(446530),E=e.i(123850),R=e.i(613355),I=(0,E.createCssVarTokens)(["connectorHeight","connectorLeft","markerTop","markerBottom","markerLeft"]),A=I.cssVars,P=I.styleTokens,D=(0,T.cssRecord)({connectorSegmentBorder:[R.rcss.position.absolute,R.rcss.left(P.connectorLeft),R.rcss.width(18),R.rcss.height(P.connectorHeight),R.rcss.top("100%"),{borderRight:"2px solid ".concat(j.tokens.outlineDimmer)}],parallelSegmentBorder:[R.rcss.position.absolute,R.rcss.top(0),R.rcss.left(P.connectorLeft),R.rcss.bottom(0),R.rcss.height(P.connectorHeight),R.rcss.width(18),{borderLeft:"2px solid ".concat(j.tokens.outlineDimmer),borderBottom:"2px solid ".concat(j.tokens.outlineDimmer),borderRadius:"0 0 0 50px"}],parallelSegmentConnectorBorder:[R.rcss.position.absolute,R.rcss.top(0),R.rcss.bottom(0),R.rcss.left(P.connectorLeft),R.rcss.height("115%"),{borderLeft:"2px solid ".concat(j.tokens.outlineDimmer)}],marker:[R.rcss.position.absolute,R.rcss.top(-2),R.rcss.left(-3),R.rcss.height(4),R.rcss.width(4),R.rcss.backgroundColor.foregroundDimmest,R.rcss.borderRadius("full")],sequentialMarkerBorder:[R.rcss.position.relative,R.rcss.top(4),R.rcss.left(P.markerLeft),R.rcss.height(12),R.rcss.width(30),{borderTop:"2px solid ".concat(j.tokens.outlineDimmer),borderRight:"2px solid ".concat(j.tokens.outlineDimmer),borderRadius:"0 10px 0 0"}],parallelMarkerBorder:[R.rcss.position.relative,R.rcss.top(4),R.rcss.left(P.markerLeft),R.rcss.height(12),R.rcss.width(30),{borderLeft:"2px solid ".concat(j.tokens.outlineDimmer)}]});function O(e){var n,r,i=e.mode,a=e.dragAble,o=e.hideBottom,s=void 0!==o&&o,l=e.connectorHeight,u=e.connectorLeft;return"sequential"===(void 0===i?"sequential":i)?(0,t.jsx)(t.Fragment,{children:s?null:(0,t.jsx)("div",{css:D.connectorSegmentBorder,style:(n={},(0,C._)(n,A.connectorHeight,"".concat(null!=l?l:8,"px")),(0,C._)(n,A.connectorLeft,"".concat(null!=u?u:0,"px")),n)})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{css:D.parallelSegmentBorder,style:(r={width:void 0===a||a?12:18},(0,C._)(r,A.connectorHeight,"".concat(null!=l?l:25,"px")),(0,C._)(r,A.connectorLeft,"".concat(null!=u?u:-12,"px")),r)}),s?null:(0,t.jsx)("div",{css:D.parallelSegmentConnectorBorder,style:(0,C._)({},A.connectorLeft,"".concat(null!=u?u:-12,"px"))})]})}function N(e){var n,r,i=e.top,a=void 0===i?-2:i,o=e.bottom,s=void 0===o?0:o,l=e.left;return"sequential"===e.mode?(0,t.jsx)("div",{css:D.sequentialMarkerBorder,style:(n={},(0,C._)(n,A.markerTop,"".concat(a,"px")),(0,C._)(n,A.markerBottom,"".concat(s,"px")),(0,C._)(n,A.markerLeft,"".concat(l,"px")),n),children:(0,t.jsx)("div",{css:D.marker})}):(0,t.jsx)("div",{css:D.parallelMarkerBorder,style:(r={},(0,C._)(r,A.markerTop,"".concat(a,"px")),(0,C._)(r,A.markerBottom,"".concat(s,"px")),(0,C._)(r,A.markerLeft,"".concat(l,"px")),r),children:(0,t.jsx)("div",{css:D.marker})})}var M=e.i(878420),L=e.i(822243),B=e.i(848415),V=e.i(960933),F=e.i(862927),U=e.i(642049),G=e.i(59300),$=e.i(409570),H=e.i(819906),z=e.i(64386),W=e.i(116235);function q(e){return(0,t.jsx)(W.default,(0,z._)((0,M._)({},e),{children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M9.341 6.066 12 18.43l2.655-12.364a3.57 3.57 0 0 0 .029-1.183.748.748 0 0 1-.042-.21 2.262 2.262 0 0 0-.721-1.188 3.12 3.12 0 0 0-1.923-.735 3.12 3.12 0 0 0-1.923.735 2.263 2.263 0 0 0-.721 1.189.747.747 0 0 1-.042.209 3.57 3.57 0 0 0 .029 1.183Zm-1.565-.642a5.61 5.61 0 0 0 .096.944l2.46 11.441-5.034-8.286a3.551 3.551 0 0 1-.281-.7.755.755 0 0 0-.038-.148c-.152-.652-.1-1.313.187-1.846.336-.626 1.087-1.242 2.61-1.405Zm.248-1.525c-2.108.127-3.501.957-4.18 2.22-.398.74-.51 1.562-.42 2.353-1.179.603-1.866 1.732-2.09 2.892-.257 1.334.07 2.85 1.11 3.817a.758.758 0 0 0 .037.032l9.045 7.368a.75.75 0 0 0 .948 0l9.045-7.368a.723.723 0 0 0 .038-.032c1.039-.968 1.366-2.483 1.109-3.817-.224-1.161-.913-2.292-2.094-2.894.09-.79-.023-1.61-.42-2.351-.68-1.263-2.073-2.093-4.18-2.22a3.76 3.76 0 0 0-1.062-1.542c-.906-.795-2.08-1.107-2.912-1.107-.832 0-2.006.312-2.912 1.107A3.76 3.76 0 0 0 8.024 3.9Zm8.196 1.525a5.607 5.607 0 0 1-.096.944l-2.457 11.44 5.03-8.285a3.543 3.543 0 0 0 .309-.801c.166-.667.117-1.347-.176-1.893-.336-.626-1.087-1.242-2.61-1.405Zm3.932 4.54a5.077 5.077 0 0 1-.162.32l-5.092 8.388 5.653-4.605c.568-.542.823-1.481.642-2.419-.133-.688-.486-1.298-1.041-1.684ZM9.1 18.67l-5.094-8.386a5.033 5.033 0 0 1-.16-.317c-.554.385-.906.994-1.039 1.681-.18.938.074 1.877.642 2.419l5.65 4.603Z",clipRule:"evenodd"})}))}e.s(["default",()=>q],840111);var K=e.i(545453),Y=e.i(729122),Q=e.i(607278),X=e.i(85742),Z=e.i(12034),J=e.i(960178),ee=e.i(625484),et=(0,T.cssRecord)({root:[R.rcss.rowWithGap(4),R.rcss.align.center],input:[R.rcss.flex.growAndShrink(1),R.rcss.color.foregroundDefault],disabledInput:[R.rcss.flex.growAndShrink(1),R.rcss.borderRadius(4),R.rcss.px(8),R.rcss.py(4),R.rcss.color.foregroundDefault,R.rcss.backgroundColor.backgroundDefault,{opacity:.7}]});function en(e){switch(e.description){case"shell.exec":return(0,t.jsx)(ei,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value,icon:e.icon,showIcon:e.showIcon});case"workflow.run":return(0,t.jsx)(er,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value,icon:e.icon,showIcon:e.showIcon});case"packager.installForLanguage":return(0,t.jsx)(ea,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value,icon:e.icon,showIcon:e.showIcon});case"packager.installForAll":return(0,t.jsx)(ea,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:"all",icon:e.icon,showIcon:e.showIcon});default:return(0,t.jsx)(t.Fragment,{})}}function er(e){var n=(0,Y.useWorkflows)().filter(function(e){var t;return!(null==(t=e.metadata)?void 0:t.generated)}).map(function(e){return{name:e.name,id:e.name}});return(0,t.jsxs)(ee.View,{css:et.root,children:[e.showIcon?e.icon:null,(0,t.jsx)(Z.Select,{css:et.input,isDisabled:e.disabled,onBlur:e.onArgsBlur,"aria-label":"Select a Workflow",selectedKey:e.value,onSelectionChange:function(t){"number"!=typeof t&&e.handleChange({type:"args",args:t})},items:n,children:function(e){return(0,t.jsx)(X.ListBoxItem,{label:e.name},e.id)}})]})}function ei(e){return(0,t.jsxs)(ee.View,{css:et.root,children:[e.showIcon?e.icon:null,e.disabled?(0,t.jsx)(J.Text,{css:et.disabledInput,children:e.value}):(0,t.jsx)(Q.Input,{css:et.input,disabled:e.disabled,onBlur:e.onArgsBlur,placeholder:"shell command to execute",onChange:function(t){var n=t.currentTarget.value;e.handleChange({type:"args",args:n})},required:e.required,value:e.value,type:e.type})]})}function ea(e){var n=(0,K.usePackagerConfigs)().configs.map(function(e){return{id:e.language}});return n.push({id:"all"}),(0,t.jsxs)(ee.View,{css:et.root,children:[e.showIcon?e.icon:null,(0,t.jsx)(Z.Select,{css:et.input,isDisabled:e.disabled,onBlur:e.onArgsBlur,"aria-label":"Select a Language to install",selectedKey:e.value,onSelectionChange:function(t){"number"!=typeof t&&("all"===t?e.handleChange({type:"task",task:"packager.installForAll"}):e.handleChange({type:"task",task:"packager.installForLanguage",args:t}))},items:n,children:function(e){return(0,t.jsx)(X.ListBoxItem,{label:e.id},e.id)}})]})}var eo=(0,T.cssRecord)({taskSelect:[R.rcss.flex.growAndShrink(1)]});function es(e){var n;return(0,t.jsx)(Z.Select,{isDisabled:e.disabled,"aria-label":"Select a task",selectedKey:"packager.installForAll"===(n=e.selectedKey)?"packager.installForLanguage":n,onSelectionChange:function(t){var n=e.supportedTasks;if(!n.includes(t))throw Error("Invalid task name: ".concat(t," (expected one of ").concat(n,")"));e.handleChange({type:"task",task:t})},items:e.items,css:eo.taskSelect,children:function(e){return(0,t.jsx)(X.ListBoxItem,{label:e.description,icon:e.icon},e.id)}})}var el=e.i(173703),eu=e.i(988676),ec=e.i(136540),ed=new Map(U.TaskConfigSchema.anyOf.map(function(e){return[e.properties.task.const,e]})),ef=["packager.installForAll","packager.installForLanguage","shell.exec","workflow.run"],ep={"shell.exec":{description:"Execute Shell Command",icon:(0,t.jsx)(q,{})},"packager.installForLanguage":{description:"Install Packages",icon:(0,t.jsx)($.default,{})},"workflow.run":{description:"Run Workflow",icon:(0,t.jsx)(H.default,{})}};function eh(e){var n=(0,Y.useTask)(e),r=(0,Y.useDeleteTask)(),i=(0,Y.useUpdateWorkflowTask)(),a=(0,Y.usePersistConfig)();return n?(0,t.jsx)(eg,{disabled:e.disabled,format:e.format,lastTask:e.lastTask,taskIndex:e.taskIndex,initialConfig:n,onArgsBlur:a,onChange:function(t,n){null!==t&&i(e,t,{persist:"task"===n})},onReorder:e.onReorder,onRemove:function(){return r(e)},simplified:e.simplified}):(0,t.jsx)(J.Text,{children:"Task not found"})}V.Type.Object({type:V.Type.Literal("task"),taskIndex:V.Type.Number()});var em=(0,T.cssRecord)({root:[R.rcss.borderRadius(4),R.rcss.p(6),R.rcss.rowWithGap(6)],dragIcon:[{cursor:"grab"}],dropIndicator:[R.rcss.height(4),R.rcss.backgroundColor.blueDefault,R.rcss.m(8),R.rcss.borderRadius()]});function eg(e){var n,r,i,a,l,c,d,f=(0,u.useRef)(null),p=(0,s._)((0,u.useState)((null==(n=e.initialConfig)?void 0:n.task)||null),2),m=p[0],g=p[1],x=(0,s._)((0,u.useState)(e.initialConfig&&"args"in e.initialConfig?e.initialConfig.args:null),2),y=x[0],b=x[1];(0,u.useEffect)(function(){e.initialConfig&&(g(e.initialConfig.task),"args"in e.initialConfig&&b(e.initialConfig.args))},[e.initialConfig]);var w=e.disabled?Object.entries(ep).map(function(e){var t=(0,s._)(e,2),n=t[0],r=t[1];return(0,M._)({id:n},r)}):Object.entries(ep).filter(function(e){var t=(0,s._)(e,2),n=t[0];return t[1],ef.includes(n)}).map(function(e){var t=(0,s._)(e,2),n=t[0],r=t[1];return(0,M._)({id:n},r)}),_=m?function(e){var t,n=ed.get(e);if(!n||!("args"in n.properties))return null;var r=null==(t=n.required)?void 0:t.includes("args");return{type:n.properties.args.type,required:r}}(m):null,k=(0,s._)((0,L.useDrag)(function(){return{type:"task",item:function(){return{type:"task",taskIndex:e.taskIndex}},collect:function(e){return{isDragging:!!e.isDragging()}},canDrag:function(){var e=document.activeElement;return!(e&&("INPUT"===e.tagName||"SELECT"===e.tagName))}}},[e]),2),S=k[0].isDragging,C=k[1],j=(0,s._)((0,B.useDrop)(function(){return{accept:"task",drop:function(t){var n,r=t.taskIndex;null==(n=e.onReorder)||n.call(e,r,e.taskIndex)},collect:function(t){var n=t.getItem(),r=null==n?void 0:n.taskIndex,i=!!t.isOver()&&r!==e.taskIndex;return{isAbove:i&&r>e.taskIndex,isBelow:i&&r<e.taskIndex}}}},[e]),2),T=j[0],E=T.isAbove,R=T.isBelow,I=j[1];function A(t){var n,r,i,a,o="task"===t.type?{task:"task"===t.type?t.task:m,args:null!=(n=t.args)?n:void 0}:{task:m,args:t.args};g(o.task),b(null!=(r=o.args)?r:null);var s=o.task?ed.get(o.task):null;if(!s)return null;try{null==(i=e.onChange)||i.call(e,F.Value.Decode(s,o),t.type)}catch(n){null==(a=e.onChange)||a.call(e,null,t.type)}}return e.disabled||C(I(f)),(0,t.jsxs)(t.Fragment,{children:[E?(0,t.jsx)(eu.DividerH,{css:em.dropIndicator}):null,(0,t.jsx)(el.ShadesSurface,{disabled:e.disabled,innerRef:f,style:{opacity:S?.5:1},css:em.root,children:(0,t.jsx)(ee.View,{grow:!0,shrink:!0,gap:4,children:(0,t.jsxs)(ee.View,{row:!0,gap:4,align:"start",justify:"space-between",children:[e.disabled?null:(0,t.jsx)(ee.View,{css:em.dragIcon,pt:6,children:(0,t.jsx)(G.default,{})}),(0,t.jsxs)(ee.View,{grow:!0,shrink:!0,gap:4,children:[e.simplified?null:(0,t.jsx)(es,{disabled:e.disabled,handleChange:A,selectedKey:m,items:w,supportedTasks:ef}),(0,t.jsx)(en,{description:m,disabled:e.disabled,type:null==_?void 0:_.type,value:e.format?(0,o.formatNixStorePath)(null!=(i=null==y?void 0:y.toString())?i:""):null!=(a=null==y?void 0:y.toString())?a:"",required:null!=(l=null==_?void 0:_.required)&&l,handleChange:A,onArgsBlur:e.onArgsBlur,showIcon:e.simplified,icon:m?null==(r=ep[m])?void 0:r.icon:void 0})]}),e.disabled?null:(0,t.jsx)(ee.View,{row:!0,gap:8,children:(0,t.jsx)(ec.IconButton,{disabled:null!=(c=e.lastTask)&&c,alt:null!=(d=e.lastTask)&&d?"Workflow must have at least one task":"Remove task",onClick:e.onRemove,children:(0,t.jsx)(h.default,{})})})]})})}),R?(0,t.jsx)(eu.DividerH,{css:em.dropIndicator}):null]})}var ev=e.i(140487),ex=e.i(721321);function ey(e){var n=e.mode,r=void 0===n?"sequential":n,i=e.onChange,a=e.disabled;return(0,t.jsxs)(ex.ButtonGroup,{disabled:void 0!==a&&a,name:"mode",onChange:i,row:!0,value:null!=r?r:"sequential",children:[(0,t.jsx)(ex.ButtonGroupItem,{id:"sequential",text:"Sequential",value:"sequential"}),(0,t.jsx)(ex.ButtonGroupItem,{id:"parallel",text:"Parallel",value:"parallel"})]})}var eb=(0,T.cssRecord)({root:[R.rcss.maxHeight(520),R.rcss.overflow("auto"),R.rcss.backgroundColor.backgroundDefault,R.rcss.borderRadius(0,0,4,4),R.rcss.border({color:j.tokens.backgroundHigher})],connectors:[R.rcss.position.relative,R.rcss.zIndex(0)],inputRow:[R.rcss.position.relative],switchInputs:[R.rcss.position.relative,R.rcss.align.center,R.rcss.justify.spaceBetween],nameWarning:[{color:j.tokens.redDefault}],task:[R.rcss.position.relative,R.rcss.zIndex(1)],tasks:[R.rcss.position.relative],taskItem:[R.rcss.position.relative]});function ew(e){var n,r=e.workflow,i=e.readOnlyMode,a=e.addTask,o=e.reorderTask,s=e.taskIds,l=e.workflowIndex,u=e.simplified;return(0,t.jsxs)(ee.View,{children:[r.tasks.length>0?(0,t.jsx)(N,{mode:null!=(n=r.mode)?n:"sequential"}):null,(0,t.jsx)(ee.View,{css:eb.tasks,pl:12,pb:8,gap:8,children:r.tasks.map(function(e,n,a){var c,d,f,p;return(0,t.jsxs)(ee.View,{css:eb.taskItem,children:[(0,t.jsx)(O,{dragAble:!i,css:eb.connectors,mode:r.mode,hideBottom:n>=a.length-1}),void 0!==l?(0,t.jsx)(eh,{css:eb.task,disabled:i,format:null!=(f=null==(c=r.metadata)?void 0:c.generated)&&f,lastTask:1===a.length,onReorder:o,workflowIndex:l,taskIndex:n,simplified:u}):(0,t.jsx)(eg,{css:eb.task,disabled:i,format:null!=(p=null==(d=r.metadata)?void 0:d.generated)&&p,lastTask:1===a.length,onReorder:o,taskIndex:n,initialConfig:r.tasks[n],onChange:function(){},onRemove:function(){},simplified:u})]},s?s[n]:n)})}),i?null:(0,t.jsx)(ev.Button,{iconLeft:(0,t.jsx)(f.default,{}),text:"Add task",onClick:a})]})}function e_(e){var n,r=e.index,i=e.readOnly,a=(0,Y.usePersistConfig)(),o=(0,Y.useWorkflow)(r),l=(0,Y.useWorkflowNames)(),c=(0,Y.useUpdateWorkflow)(),d=(0,Y.useUpdateWorkflowTasks)(),f=(0,Y.useAddTask)(),p=void 0!==i&&i||(null==o||null==(n=o.metadata)?void 0:n.generated)||(null==o?void 0:o.name)==="Project"&&"agent"===o.author,h=(0,u.useMemo)(function(){return l.filter(function(e){return e===(null==o?void 0:o.name)}).length>1},[o,l]),m=(0,u.useMemo)(function(){var e;return Array.from({length:null!=(e=null==o?void 0:o.tasks.length)?e:0},function(e){return(0,_.nanoid)()})},[null==o?void 0:o.tasks.length]);return o?(0,t.jsxs)(ee.View,{css:eb.root,p:8,gap:8,children:[(0,t.jsx)(J.Text,{variant:"small",color:"dimmest",children:"Workflow"}),h?(0,t.jsxs)(J.Text,{variant:"small",css:eb.nameWarning,children:[o.name," already exists"]}):null,(0,t.jsx)(ee.View,{pb:4,row:!0,gap:8,align:"center",children:(0,t.jsx)(Q.Input,{onBlur:a,value:o.name,placeholder:"Name of your workflow",onChange:function(e){c(r,function(t){t.name=e.currentTarget.value})},disabled:p})}),(0,t.jsx)(ee.View,{css:eb.switchInputs,row:!0,gap:4,children:(0,t.jsxs)(ee.View,{children:[(0,t.jsx)(J.Text,{variant:"small",color:"dimmest",children:"Mode"}),(0,t.jsx)(ey,{mode:o.mode,onChange:function(e){c(r,function(t){t.mode=e}),a()},disabled:p})]})}),(0,t.jsxs)(ee.View,{css:eb.inputRow,gap:4,children:[(0,t.jsx)(J.Text,{variant:"small",color:"dimmest",children:"Tasks"}),(0,t.jsx)(ew,{workflow:o,readOnlyMode:p,addTask:function(){return f(r)},reorderTask:function(e,t){var n=null==o?void 0:o.tasks;if(n&&e!==t){var i=(0,b._)(n),l=(0,s._)(i.splice(e,1),1)[0];i.splice(t,0,l);var u=(0,s._)(m.splice(e,1),1)[0];m.splice(t,0,u),d({workflowIndex:r},i,{persist:!0}),a()}},taskIds:m,workflowIndex:r})]})]}):(0,t.jsx)(J.Text,{children:"Workflow not found"})}var ek=e.i(887877),eS=e.i(751273),eC=e.i(788124),ej=(0,T.cssRecord)({wrapper:[R.rcss.borderRadius(4),R.rcss.border({color:j.tokens.backgroundHigher})],root:[R.rcss.colWithGap(8),R.rcss.maxHeight(520),R.rcss.overflow("hidden")],inputs:[R.rcss.mb(4),R.rcss.p(8)],nameWarning:[{color:j.tokens.redDefault}],taskItem:[R.rcss.position.relative],buttons:[R.rcss.border({direction:"top",color:j.tokens.backgroundHigher})],nameInput:[R.rcss.my(4)]});function eT(e){var n=(0,s._)((0,u.useState)(""),2),r=n[0],o=n[1],l=(0,s._)((0,u.useState)([{id:(0,_.nanoid)(),config:null}]),2),c=l[0],d=l[1],p=(0,s._)((0,u.useState)("sequential"),2),h=p[0],m=p[1],g=(0,Y.useWorkflowNames)(),x=(0,u.useMemo)(function(){return!g.includes(r)},[r,g]),y=(0,u.useMemo)(function(){if(!r)return(0,S.Err)("Missing name");if(!x)return(0,S.Err)("".concat(r," already exists"));if(0===c.length)return(0,S.Err)("Missing tasks");var t=[],n=!0,i=!1,a=void 0;try{for(var o,s=c[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;if(null===l.config)return(0,S.Err)("Invalid task");t.push(l.config)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return(0,S.Ok)({name:r,mode:h,author:e.userId,tasks:t})},[r,h,c,x,e.userId]);function C(e,t){if(c&&e!==t){var n=(0,b._)(c),r=(0,s._)(n.splice(e,1),1)[0];n.splice(t,0,r),d(n)}}return(0,t.jsx)(el.ShadesSurface,{css:ej.wrapper,elevate:!1,children:(0,t.jsxs)(ek.Form,{css:ej.root,onSubmit:function(t){(0,i.track)(a.events.WORKFLOW_CREATED,{pane:"workflows",shellExecCount:c.reduce(function(e,t){var n;return(null==(n=t.config)?void 0:n.task)==="shell.exec"?e+1:e},0),packagerCount:c.reduce(function(e,t){var n,r;return(null==(n=t.config)?void 0:n.task)==="packager.installForAll"||(null==(r=t.config)?void 0:r.task)==="packager.installForLanguage"?e+1:e},0),mode:h,userId:e.userId}),t.preventDefault(),y.ok&&e.onCreate(y.value)},children:[(0,t.jsxs)(ee.View,{css:ej.inputs,gap:8,children:[(0,t.jsxs)(ee.View,{gap:2,children:[(0,t.jsx)(J.Text,{variant:"small",color:"dimmest",children:"Workflow"}),x?null:(0,t.jsx)(J.Text,{variant:"small",css:ej.nameWarning,children:"Duplicate workflow name"}),(0,t.jsx)(Q.Input,{css:ej.nameInput,required:!0,placeholder:"Name",value:r,onChange:function(e){return o(e.currentTarget.value)}})]}),(0,t.jsxs)(ee.View,{gap:2,children:[(0,t.jsx)(J.Text,{variant:"small",color:"dimmest",children:"Mode"}),(0,t.jsx)(ey,{mode:h,disabled:!1,onChange:m})]}),(0,t.jsxs)(ee.View,{gap:2,children:[(0,t.jsx)(J.Text,{variant:"small",color:"dimmest",children:"Tasks"}),c.length?(0,t.jsx)(N,{mode:h}):null,(0,t.jsxs)(ee.View,{pl:12,gap:8,children:[(0,t.jsx)(eC.default,{children:c.map(function(e,n){var r;return(0,t.jsxs)(ee.View,{css:ej.taskItem,children:[(0,t.jsx)(eg,{taskIndex:n,disabled:!1,format:!1,onReorder:C,onChange:function(e){d(function(t){return(0,w.produce)(t,function(t){t[n].config=e})})},onRemove:function(){d(function(e){return(0,w.produce)(e,function(e){e.splice(n,1)})})},initialConfig:null!=(r=c[n].config)?r:void 0}),(0,t.jsx)(O,{mode:h,hideBottom:n>=c.length-1})]},e.id)})}),(0,t.jsx)(ev.Button,{text:"Add task",type:"button",onClick:function(){d(function(e){return(0,w.produce)(e,function(e){e.push({id:(0,_.nanoid)(),config:null})})})},iconLeft:(0,t.jsx)(f.default,{})})]})]})]}),(0,t.jsxs)(ee.View,{css:ej.buttons,grow:!0,shrink:!0,justify:"end",p:8,row:!0,gap:12,children:[(0,t.jsx)(ev.Button,{text:"Cancel",onClick:e.onCancel}),(0,t.jsx)(eS.Tooltip,{tooltip:y.ok?"Save Workflow":y.error,children:(0,t.jsx)(ev.Button,{iconLeft:(0,t.jsx)(k.default,{}),colorway:"primary",disabled:!y.ok,text:"Save",type:"submit"})})]})]})})}var eE=e.i(569384),eR=e.i(973245),eI=e.i(304277);function eA(){var e=(0,eE._)(["\n  query CurrentUserEnv {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return eA=function(){return e},e}e.i(566901);var eP={},eD=(0,eR.gql)(eA());function eO(){var e,t=(e=(0,M._)({},eP,void 0),eI.useQuery(eD,e)).data;return(null==t?void 0:t.currentUser)||void 0}e.s(["useCurrentUser",()=>eO],262962);var eN=e.i(417120),eM=e.i(965153),eL=e.i(739521),eB=e.i(719976),eV=e.i(51054),eF=e.i(396776),eU=e.i(557862);function eG(e){var t=(0,Y.useGetWorkflows)(),n=(0,y.usePid2Callback)(function(n){return function(){(0,i.track)(a.events.WORKFLOW_RAN,{source:"workflowsPane"});var r,o=null==(r=t())?void 0:r[e];return!!o&&n.workflows.runWorkflow.rpc({workflowId:o.name})}},[t,e]),r=(0,Y.useGetLatestWorkflowState)(e),o=(0,y.usePid2Callback)(function(e){return function(){(0,i.track)(a.events.WORKFLOW_STOPPED,{source:"workflowsPane"});var t,n=null==(t=r())?void 0:t.runId;return!!n&&e.workflows.stopRun.rpc({runId:n})}},[r]),s=(0,Y.useObservableIsRunning)(e);return(0,u.useMemo)(function(){return n&&o?{run:n,stop:o,isRunningObservable:s}:null},[n,o,s])}function e$(e){var r=e.index,i=(0,Y.useWorkflow)(r),a=eG(r),o=(0,x.default)(null==a?void 0:a.isRunningObservable);return i&&a?(0,t.jsx)(ee.View,{row:!0,gap:8,children:(0,t.jsx)(ev.Button,{size:"small",iconLeft:o?(0,t.jsx)(p.default,{}):(0,t.jsx)(n.default,{}),text:i.name,onClick:function(){o?a.stop():a.run()}})}):null}function eH(){var e=(0,Y.useWorkflowIndices)(),n=(0,Y.useWorkflows)();return(0,t.jsx)(ee.View,{gap:8,children:e.filter(function(e){var t;return!(null==(t=n[e].metadata)?void 0:t.generated)}).map(function(e){return(0,t.jsx)(e$,{index:e},e)})})}var ez=(0,T.cssRecord)({wrapper:[R.rcss.borderRadius(4),R.rcss.backgroundColor.backgroundHigher],expandedContent:[R.rcss.border({direction:"top"})]});function eW(e){var r,i=e.index,a=e.readOnly,o=(0,Y.useWorkflow)(i),l=(0,Y.useWorkflowError)(i),c=eG(i),d=(0,x.default)(null==c?void 0:c.isRunningObservable),f=(0,s._)((0,u.useState)(!1),2),g=f[0],y=f[1],b=(0,Y.useDeleteWorkflow)(),w=(0,Y.useRunButton)(),_=(0,u.useMemo)(function(){return(null==o?void 0:o.name)===w},[o,w]);return o?(0,t.jsxs)(el.ShadesSurface,{elevate:!1,children:[(0,t.jsx)(eM.AccordionItem,{css:ez.wrapper,headerContent:(0,t.jsxs)(ee.View,{grow:!0,shrink:!0,row:!0,gap:4,children:[c?(0,t.jsx)(ec.IconButton,{alt:d?"Stop workflow":"Run workflow",onClick:function(){d?c.stop():c.run()},children:d?(0,t.jsx)(p.default,{}):(0,t.jsx)(n.default,{})}):null,(0,t.jsx)(ee.View,{grow:!0,shrink:!0,row:!0,gap:8,align:"center",justify:"start",children:(0,t.jsx)(J.Text,{multiline:!1,children:o.name})}),(0,t.jsxs)(ee.View,{row:!0,gap:4,align:"center",children:[l?(0,t.jsx)(eS.Tooltip,{tooltip:l,children:(0,t.jsx)(m.default,{color:j.tokens.accentNegativeDefault})}):null,_?(0,t.jsx)(eS.Tooltip,{tooltip:"Assigned to run button",maxWidth:150,children:(0,t.jsx)(eB.PillButton,{text:"Run Button",colorway:"positive"})}):null,"agent"===o.author||(null==(r=o.metadata)?void 0:r.generated)?(0,t.jsx)(eS.Tooltip,{tooltip:"Generated by ".concat(o.author),maxWidth:150,children:(0,t.jsx)(eB.PillButton,{text:"Generated",colorway:"purple"})}):(0,t.jsx)(ec.IconButton,{alt:"Delete",onClick:function(){y(!0)},children:(0,t.jsx)(h.default,{})})]})]}),children:(0,t.jsx)(ee.View,{css:ez.expandedContent,children:(0,t.jsx)(e_,{index:i,readOnly:a})})}),(0,t.jsx)(eL.Modal,{isOpen:g,onRequestClose:function(){return y(!1)},children:(0,t.jsx)(eU.default,{name:"Workflow",description:o.name,confirmDescription:"workflow",hideModal:function(){return y(!1)},delete:function(){return b(i)}})})]}):null}var eq=(0,T.cssRecord)({generatedList:[{opacity:.7}],loading:[R.rcss.center,R.rcss.p(16)],error:[R.rcss.center,R.rcss.p(16)],divider:[R.rcss.height(2),R.rcss.backgroundColor.accentPrimaryDimmest]});function eK(){var e=(0,s._)((0,u.useState)(""),2),n=e[0],r=e[1],o=(0,s._)((0,u.useState)(!1),2),p=o[0],h=o[1],x=(0,eN.useAgentRunState)(),y=(0,s._)((0,u.useState)(!1),2),b=y[0],w=y[1],_=(0,Y.useWorkflowIndices)(),k=(0,Y.useWorkflows)(),S=(0,Y.useWorkflowNames)(),C=(0,Y.useAddWorkflow)(),j=(0,Y.useIsLoading)(),T=(0,Y.useConfigError)(),E=eO(),R=!!T||x===c.AgentRunState.AGENT_STATE_RUNNING||x===c.AgentRunState.AGENT_STATE_PAUSING,I=(0,u.useMemo)(function(){return _.reduce(function(e,t){return S[t].toLowerCase().includes(n.toLowerCase())&&e.push(t),e},[]).sort(function(e,t){var n,r,i,a,o=null!=(i=(null==(n=k[e].metadata)?void 0:n.generated)||"agent"===k[e].author)&&i,s=null!=(a=(null==(r=k[t].metadata)?void 0:r.generated)||"agent"===k[t].author)&&a;return o&&!s?1:!o&&s?-1:0})},[n,_,S,k]),A=(0,u.useMemo)(function(){return I.filter(function(e){var t=k[e];return!(t.metadata&&t.metadata.generated)&&"agent"!==t.author})},[I,k]),P=(0,u.useMemo)(function(){return I.filter(function(e){return"agent"===k[e].author})},[I,k]),D=(0,u.useRef)(),O=function(){clearTimeout(D.current),D.current=setTimeout(function(){(0,i.track)(a.events.WORKFLOWS_SEARCHED)},1e3)};return j?(0,t.jsx)(ee.View,{css:eq.loading,children:(0,t.jsx)(d.default,{})}):(0,t.jsxs)(ee.View,{p:8,gap:8,children:[(0,t.jsxs)(ee.View,{row:!0,gap:8,children:[(0,t.jsx)(ee.View,{grow:!0,shrink:!0,children:(0,t.jsx)(eV.SearchBar,{placeholder:"Search for a workflow...",value:n,onChange:function(e){O(),r(e.target.value)},onClear:function(){return r("")}})}),(0,t.jsx)(eS.Tooltip,{tooltip:"Workflow editing is disabled while the Agent is running",isDisabled:!R,children:(0,t.jsx)(ev.Button,{isDisabled:R,colorway:"primary",iconLeft:(0,t.jsx)(f.default,{}),text:"New Workflow",disabled:p,onClick:function(){h(!0)}})})]}),(0,t.jsx)(eu.DividerH,{}),p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eT,{onCreate:function(e){C(e),h(!1)},onCancel:function(){h(!1)},userId:null==E?void 0:E.id}),(0,t.jsx)(eu.DividerH,{css:eq.divider})]}):null,T?(0,t.jsx)(ee.View,{css:eq.error,children:(0,t.jsx)(eS.Tooltip,{tooltip:T.extras,children:(0,t.jsx)(eF.StatusBanner,{icon:(0,t.jsx)(m.default,{}),colorway:"red",text:T.message})})}):null,(0,t.jsxs)(ee.View,{gap:8,children:[A.length||T?null:(0,t.jsx)(ee.View,{align:"center",children:(0,t.jsx)(J.Text,{children:(0,t.jsx)(l.default,{target:"_blank",href:g.LINKS_DOCS.WORKFLOWS,children:"Learn more about configuring Workflows"})})}),A.length?A.map(function(e){return(0,t.jsx)(eW,{readOnly:R,index:e},e)}):null,P.length?(0,t.jsx)(ee.View,{children:(0,t.jsx)(eM.AccordionItem,{headerContent:"Agent Workflows",expanded:b,onClick:function(){return w(!b)},children:(0,t.jsx)(ee.View,{css:eq.generatedList,py:8,gap:8,children:P.map(function(e){return(0,t.jsx)(eW,{index:e,readOnly:R},e)})})})}):null]})]})}e.s(["WorkflowsConsoleList",()=>eH,"default",()=>eK],999292);var eY=(0,T.cssRecord)({emptyStateWrapper:[{lineHeight:"32px"}]});function eQ(e){var s,l=e.openPane,u=(0,Y.useWorkflowsRunner)(),c=(0,Y.useIsLoading)(),d=!!(null==u?void 0:u.workflowId),f=function(){if(null==u?void 0:u.run){u.run(o.RunReason.RUN_BUTTON_CLICKED),(0,i.track)(a.events.WORKFLOW_RAN,{source:"console"});return}};return c?(0,t.jsx)(ee.View,{css:eY.emptyStateWrapper,p:8,children:"The system is starting up"}):(0,t.jsxs)(ee.View,{p:8,gap:8,children:[(0,t.jsx)(J.Text,{children:"Results of your code will appear here when you run"}),(0,t.jsx)(eu.DividerH,{}),(0,t.jsxs)(ee.View,{pt:4,pb:8,gap:6,align:"start",children:[(0,t.jsx)(J.Text,{variant:"small",color:"dimmer",children:"Default"}),(0,t.jsx)(ev.Button,{size:"small",text:null!=(s=null==u?void 0:u.workflowId)?s:o.PID1_RUNNER_NAME,iconLeft:(0,t.jsx)(n.default,{}),colorway:"positive",onClick:function(){(0,i.track)(a.events.WORKSPACE,{action:"run_button_used",usage:"clicked",source:"emptyConsole",runner:d?"workflows":"pid1"}),f()}})]}),(0,t.jsx)(eu.DividerH,{}),(0,t.jsxs)(ee.View,{gap:6,children:[(0,t.jsxs)(ee.View,{row:!0,gap:4,align:"center",children:[(0,t.jsx)(J.Text,{variant:"small",color:"dimmer",children:"Workflows"}),(0,t.jsx)(ec.IconButton,{alt:"Configure",onClick:function(){l({type:"workflows"})},children:(0,t.jsx)(r.default,{size:12})})]}),(0,t.jsx)(eH,{})]})]})}e.s(["default",()=>eQ],94764);var eX=e.i(119468);function eZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onlyFirst;return RegExp("[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)|(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))",void 0!==t&&t?void 0:"g")}e.s(["default",()=>eZ],367024);var eJ=eZ();function e0(e){if("string"!=typeof e)throw TypeError("Expected a `string`, got `".concat(void 0===e?"undefined":(0,eX._)(e),"`"));return e.replace(eJ,"")}e.s(["default",()=>e0],301141)},909478,e=>{"use strict";var t=e.i(389959),n=e.i(761732),r=e.i(801127),i=e.i(529810);function a(e){var i=(0,n.default)(e.portsState);return(0,t.useMemo)(function(){return i?i.filter(function(e){return e.isOpen&&e.configuration.type===r.PortConfigurationType.FORWARDED}):[]},[i])}function o(e){return s((0,i.default)().ports,e)}function s(e,r){var i=(0,n.default)(e.portsState);return(0,t.useMemo)(function(){return r&&i?i.filter(function(e){var t;return null!=(t=e.isOpen&&(null==r?void 0:r.endsWith(e.processInfo.cgroup)))&&t}):[]},[i,r])}function l(){var e=(0,i.default)().ports,t=(0,n.default)(e.portsState);return null==t?void 0:t.some(function(e){return e.configuration.isVnc&&e.isOpen})}e.s(["useIsVNCPortOpened",()=>l,"useOpenedAndForwardedPorts",()=>a,"useOpenedPortsMatchingCgroup",()=>o,"useOpenedPortsMatchingCgroupWithExplicitService",()=>s])},230776,e=>{"use strict";var t=e.i(297083),n=e.i(878420),r=e.i(64386),i=e.i(817556),a=e.i(862927),o=e.i(329252);e.i(660670);var s=e.i(230153),l=e.i(112942),u=e.i(45442);function c(e){var t=e.text,n=e.attachedFiles,r=e.agentConfig,i=e.targetedElement,o=n.map(function(e){return{path:e.path,mimeType:e.mimeType}}),u=a.Value.Create(s.MessageEventContentsSchema);return u.content=t,u.uploadedFiles=o,r&&(u.agentConfig=a.Value.Create(s.AgentConfigSchema),Object.assign(u.agentConfig,(0,l.convertAgentConfigFromGQLToChort)(r))),i&&(u.targetedElement=i),u}function d(e){return(0,t._)(function(e){var a,s,c,d,f,p;return(0,i._)(this,function(h){switch(h.label){case 0:return a=e.contents,s=e.readFile,c=a.content,[4,Promise.all(a.uploadedFiles.map(function(e){return(0,t._)(function(){var t,a,o;return(0,i._)(this,function(i){switch(i.label){case 0:return t=e.path.split("/").pop()||"attachment",[4,s(e.path)];case 1:return o=new File(null===(a=i.sent()).error&&null!==a.content.asBuffer?[a.content.asBuffer]:[],t,{type:e.mimeType}),[2,(0,r._)((0,n._)({},e),{file:o,isLoading:!1})]}})})()}))];case 1:return d=h.sent(),f=a.agentConfig?(0,o.default)((0,l.convertAgentConfigFromChortToGQL)(a.agentConfig),u.DEFAULT_AGENT_SETTINGS):void 0,p=a.targetedElement,[2,{message:c,attachments:d,agentConfig:f,webviewTargetedElement:p}]}})}).apply(this,arguments)}e.s(["packContentsForQueuedMessage",()=>c,"unpackContentsFromQueuedMessage",()=>d])},429225,169566,59380,e=>{"use strict";var t=e.i(721281),n=e.i(167626),r=e.i(878420),i=e.i(276385),a=e.i(389959),o=e.i(921211),s=e.i(123111),l=e.i(869226),u=e.i(131141),c=e.i(541793),d=e.i(814563),f=e.i(530658),p=e.i(161322),h=e.i(824359),m=(0,a.createContext)(null);function g(){var e=(0,a.useContext)(m);if(!e)throw Error("Expected store in context");return e}function x(e){return(0,p.useAtomValue)(e,{store:g()})}function y(e){return(0,h.useObservableAtom)(e,g())}var b=function(e){return(0,p.useSetAtom)(e,{store:g()})};function w(e){var t=(0,f._)((0,a.useState)(function(){return(0,c.createStore)()}),1)[0];return(0,i.jsx)(m.Provider,{value:t,children:e.children})}e.s(["ContextMenuProvider",()=>w,"useObservableValue",()=>y,"useSet",()=>b,"useValue",()=>x],169566);var _=(0,e.i(123850).createCssVarTokens)(["display","visibility","transform","maxHeight","width"]),k=_.cssVars,S=_.styleTokens,C=e.i(480028),j=(0,c.atom)(null),T=(0,c.atom)({command:null,offset:{x:0,y:0},visible:!1}),E=(0,d.selectAtom)(T,function(e){return e.offset}),R=(0,d.selectAtom)(T,function(e){return e.command}),I=(0,d.selectAtom)(T,function(e){return e.visible}),A=(0,d.selectAtom)(T,function(e){return e.onKeyDownHandler}),P=(0,d.selectAtom)(j,function(e){var t;return null!=(t=null==e?void 0:e.initial)?t:null}),D=(0,c.atom)(function(e){var t=e(E);if(!t)return null;var n=t.y,r=window.innerHeight-n,i=e(P),a=null!==i?i-r:0;return a>0&&(n=Math.max(16,n-Math.min(200,a))),n}),O=(0,c.atom)(function(e){var t=e(E);if(!t)return null;var n=t.x,r=window.innerWidth,i=e(M),a=n+(null!=i?i:L)-r+16;return a>0&&(n=Math.max(16,n-a)),n}),N=(0,c.atom)(function(e){var n=e(O),r=e(D);return null==n||null===r?null:(0,t._)({},k.transform,"translate(".concat(n,"px, ").concat(r,"px)"))}),M=(0,c.atom)(null),L=180,B=(0,c.atom)(function(e){var n=e(M);return(0,t._)({},k.width,(null===n?L:n)+"px")}),V=(0,c.atom)(function(e){var n=e(D);return null===n?null:(0,t._)({},k.maxHeight,"calc(100vh - ".concat(C.tokens.space16," - ").concat(n,"px)"))}),F=(0,c.atom)(null,function(e,t){t(j,null),t(M,null),t(U,null),t(T,function(e){return(0,u.produce)(e,function(e){e.visible=!1,e.command=null})})}),U=(0,c.atom)(null),G=(0,c.atom)(null,function(e,t,n){if(n.width&&t(M,n.width),n.target){var r=n.target.getBoundingClientRect(),i={x:r.x,y:r.y+r.height+8};t(U,r),t(T,function(e){return(0,u.produce)(e,function(e){e.command=n.command,e.offset=i,e.visible=!0,e.onKeyDownHandler=n.onKeyDownHandler})});return}t(T,function(e){return(0,u.produce)(e,function(e){e.command=n.command,e.offset=n.offset,e.visible=!0,e.onKeyDownHandler=n.onKeyDownHandler})})});function $(){var e=b(G),t=b(F),r=y(I);return{openContextMenu:(0,a.useCallback)(function(t){e((0,n._)(t.target,HTMLElement)?{command:t.command,target:t.target,width:t.width,onKeyDownHandler:t.onKeyDownHandler}:{command:t.command,offset:t.target,target:null,width:t.width,onKeyDownHandler:t.onKeyDownHandler})},[e]),closeContextMenu:t,isVisible:r,onContextMenu:(0,a.useCallback)(function(t,n){var r=n.command,i=n.width,a=n.onKeyDownHandler;t.preventDefault(),e({command:r,offset:{x:t.clientX,y:Math.min(window.innerHeight-64,t.clientY)},target:null,width:i,onKeyDownHandler:a})},[e])}}e.s(["commandAtom",()=>R,"hideAtom",()=>F,"maxHeightAtom",()=>V,"onKeyDownHandlerAtom",()=>A,"targetRectAtom",()=>U,"totalHeightAtom",()=>j,"transformAtom",()=>N,"useContextMenu",()=>$,"visibleAtom",()=>I,"widthAtom",()=>B],59380);var H=e.i(446530),z=e.i(173703),W=e.i(613355),q=e.i(399144),K=e.i(980338),Y=(0,H.cssRecord)({surface:[W.rcss.shadow(3),W.rcss.borderRadius(8),W.rcss.position.absolute,{top:0,left:0,border:"1px solid",borderColor:C.tokens.outlineDefault,maxWidth:"min(500px, calc(100vw - ".concat(C.tokens.space16,"))"),minWidth:"min(100px, calc(100vw - ".concat(C.tokens.space16,"))"),maxHeight:S.maxHeight,width:S.width,transform:S.transform,visibility:S.visibility,display:S.display}]});function Q(){var e=x(U);return e?(0,i.jsx)("div",{style:{position:"fixed",width:e.width,height:e.height,top:e.y,left:e.x}}):null}var X=(0,a.memo)(function(){var e=b(F),u=x(R),c=x(A),d=y(I),f=(0,a.useRef)(function(){});(0,a.useEffect)(function(){var e=function(e){if(e){var t;null==(t=f.current)||t.call(f);return}};return e(d.current),d.subscribe(e)},[d]);var p=b(j),h=(0,a.useRef)(null);(0,a.useEffect)(function(){var t=function(t){var r;(0,n._)(t.target,HTMLElement)&&(null==(r=h.current)?void 0:r.contains(t.target))||e()},r=function(){e()},i=function(e){e?(window.addEventListener("blur",r),document.addEventListener("pointerdown",t)):(window.removeEventListener("blur",r),document.removeEventListener("pointerdown",t))},a=d.subscribe(i);return function(){a(),i(!1)}},[d,e]);var m=y(N);(0,l.useStyleSet)(h,m),(0,l.useStyleSet)(h,y(V)),(0,l.useStyleSet)(h,d,function(e){var n;return n={},(0,t._)(n,k.visibility,e?"visible":"hidden"),(0,t._)(n,k.display,e?"flex":"none"),n});var g=y(B);(0,l.useStyleSet)(h,g);var w=(0,s.default)(),_=x(I)&&!w,S=(0,r._)({},m.current,g.current);return u?(0,i.jsxs)(q.Portal,{children:[(0,i.jsx)(Q,{}),(0,i.jsx)(o.FocusScope,{autoFocus:_,restoreFocus:!0,contain:!0,children:(0,i.jsx)(z.ShadesSurface,{colorShade:"popup",onKeyDown:function(t){"Escape"===t.key&&e()},innerRef:h,css:Y.surface,style:S,children:(0,i.jsx)(K.CommandBar,{iconBreadcrumbs:!0,command:u,onAction:e,onSelect:e,onTotalHeightChange:p,onKeyDown:c,focusRef:f,compact:!0})})})]}):null});e.s(["ContextMenu",()=>X],429225)},820357,e=>{e.v({outputBlockMetadataWrapper:"WorkflowsBlocks-module__jZR2qq__outputBlockMetadataWrapper"})},319401,509128,978799,646067,926587,337805,73213,389320,831733,e=>{"use strict";var t,n=e.i(331762),r=e.i(394212),i=e.i(297083),a=e.i(721281),o=e.i(878420),s=e.i(64386),l=e.i(530658),u=e.i(817556),c=e.i(276385),d=e.i(389959),f=e.i(301141);e.i(877212);var p=e.i(924908),h=e.i(346574),m=e.i(183035),g=e.i(167392),x=e.i(927600),y=e.i(806685),b=e.i(486898),w=e.i(409570),_=e.i(561873),k=e.i(416298),S=e.i(257982),C=e.i(162914),j=e.i(649960),T=e.i(664152),E=e.i(315801),R=e.i(670413),I=e.i(546284),A=e.i(299798),P=e.i(927158),D=e.i(801127),O=e.i(909478),N=e.i(982829),M=e.i(230776),L=e.i(417120),B=e.i(762211);e.i(429225);var V=e.i(59380),F=e.i(602686),U=e.i(399245),G=e.i(116235);function $(e){return(0,c.jsxs)(G.default,(0,s._)((0,o._)({},e),{children:[(0,c.jsx)("path",{fillRule:"evenodd",d:"M4.063 7.246A9.194 9.194 0 0 0 2.78 11.25h4.502c.016-.241.038-.482.065-.722l2.221 2.222h-.782A14.551 14.551 0 0 0 12 20.852a14.55 14.55 0 0 0 2.123-3.547l1.137 1.137a16.052 16.052 0 0 1-1.556 2.652 9.19 9.19 0 0 0 3.05-1.158l1.089 1.09A10.7 10.7 0 0 1 12 22.75C6.063 22.75 1.25 17.937 1.25 12a10.7 10.7 0 0 1 1.725-5.843l1.088 1.09ZM2.78 12.75a9.255 9.255 0 0 0 7.516 8.344 16.052 16.052 0 0 1-3.014-8.344H2.78Z",clipRule:"evenodd"}),(0,c.jsx)("path",{d:"M1.47 1.47a.75.75 0 0 1 1.06 0l20 20a.75.75 0 1 1-1.06 1.06l-20-20a.75.75 0 0 1 0-1.06Z"}),(0,c.jsx)("path",{fillRule:"evenodd",d:"M12 1.25c5.937 0 10.75 4.813 10.75 10.75a10.7 10.7 0 0 1-1.725 5.843l-1.088-1.09a9.193 9.193 0 0 0 1.283-4.003h-4.502c-.016.241-.038.482-.065.722l-2.221-2.222h.782A14.552 14.552 0 0 0 12 3.148a14.55 14.55 0 0 0-2.123 3.547L8.74 5.558a16.05 16.05 0 0 1 1.556-2.652 9.191 9.191 0 0 0-3.05 1.157L6.157 2.975A10.7 10.7 0 0 1 12 1.25Zm1.704 1.656a16.052 16.052 0 0 1 3.014 8.344h4.502a9.255 9.255 0 0 0-7.516-8.344Z",clipRule:"evenodd"})]}))}e.s(["default",()=>$],509128);var H=e.i(255701),z=e.i(813675),W=e.i(952521),q=e.i(446530),K=e.i(613355),Y=e.i(140487),Q=e.i(136540),X=e.i(960178),Z=e.i(625484),J=(0,q.cssRecord)({wrapper:[K.rcss.py(6),K.rcss.flex.row,K.rcss.align.center,K.rcss.backgroundColor.backgroundHigher],wrapperWarning:[K.rcss.py(6),K.rcss.flex.row,K.rcss.align.center,K.rcss.backgroundColor.orangeDimmest],firstLine:[K.rcss.flex.wrap,K.rcss.maxWidth("100%"),K.rcss.overflow("hidden")],secondLine:[K.rcss.px(6),K.rcss.rowWithGap(2),K.rcss.align.center,K.rcss.flex.wrap,K.rcss.maxWidth("100%"),K.rcss.overflow("hidden"),K.rcss.color.foregroundDimmest],secondLineWarning:[K.rcss.px(6),K.rcss.rowWithGap(2),K.rcss.align.center,K.rcss.flex.wrap,K.rcss.maxWidth("100%"),K.rcss.overflow("hidden"),K.rcss.color.orangeStrongest],verticalDivider:[K.rcss.ml(6),K.rcss.mr(6),K.rcss.height("1em"),K.rcss.width(1),K.rcss.backgroundColor.foregroundDefault]});function ee(e){var t=e.openNetworkingTool,n=e.onClose,r=e.onDontExposePort,i=e.onDoExposePort,a=e.firstLine,o=e.secondLine,s=e.renderSecondLine,l=e.renderDontExposeButton,u=e.renderDoExposeButton,d=e.isWarning,f=void 0!==d&&d;return(0,c.jsxs)(Z.View,{css:f?J.wrapperWarning:J.wrapper,children:[(0,c.jsxs)(Z.View,{grow:!0,shrink:!0,children:[(0,c.jsx)(Z.View,{css:J.firstLine,px:6,row:!0,gap:2,align:"center",children:a}),s?(0,c.jsx)(Z.View,{css:f?J.secondLineWarning:J.secondLine,children:o}):null]}),(0,c.jsxs)(Z.View,{pr:6,row:!0,children:[(0,c.jsx)(Q.IconButton,{alt:"Networking tool",onClick:t,children:(0,c.jsx)(H.default,{})}),void 0!==l&&l?(0,c.jsx)(Q.IconButton,{alt:"Don't expose this port to the web",onClick:r,children:(0,c.jsx)($,{})}):null,void 0!==u&&u?(0,c.jsx)(Q.IconButton,{alt:"Expose this port to the web",onClick:i,children:(0,c.jsx)(U.default,{})}):null,(0,c.jsx)(Q.IconButton,{alt:"Close",onClick:n,children:(0,c.jsx)(F.default,{})})]})]})}function et(e){var t=e.configuration,n=e.openWebview,r=e.openNetworkingTool,i=e.onClose,a=e.onDontExposePort,o=e.renderSecondLine,s=(0,z.isDefaultPort)(t.externalPort)?"{...}.replit.dev":"{...}.replit.dev:".concat(t.externalPort);return(0,c.jsx)(ee,{openNetworkingTool:r,onClose:i,firstLine:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(X.Text,{children:["Port :",t.localPort," opened on"]}),(0,c.jsx)(Y.Button,{variant:"underlined",text:s,onClick:n})]}),secondLine:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(X.Text,{children:"You can manage this config in the"}),(0,c.jsx)(Y.Button,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:o,renderDontExposeButton:!0,onDontExposePort:a})}function en(e){var t=e.configuration,n=e.openNetworkingTool,r=e.onClose,i=e.renderSecondLine,a=e.onDoExposePort;return(0,c.jsx)(ee,{openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but not exposed to the web."),secondLine:(0,c.jsx)(Y.Button,{variant:"underlined",text:"Expose this port?",onClick:n}),renderSecondLine:i,renderDoExposeButton:!0,onDoExposePort:a})}function er(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,i=e.renderSecondLine;return(0,c.jsx)(ee,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but all available external ports are reserved."),secondLine:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(X.Text,{children:"Remove an external port in"}),(0,c.jsx)(Y.Button,{variant:"underlined",text:"port configuration",onClick:t}),(0,c.jsx)(X.Text,{children:"to open a new port."})]}),renderSecondLine:i})}function ei(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,i=e.renderSecondLine;return(0,c.jsx)(ee,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but is not configured properly."),secondLine:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(X.Text,{children:"You can fix this in the"}),(0,c.jsx)(Y.Button,{variant:"underlined",text:"Networking tool",onClick:t})]}),renderSecondLine:i})}function ea(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,i=e.renderSecondLine;return(0,c.jsx)(ee,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but has missing configuration."),secondLine:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(X.Text,{children:"You can fix this in the"}),(0,c.jsx)(Y.Button,{variant:"underlined",text:"Networking tool",onClick:t})]}),renderSecondLine:i})}function eo(e){var t=e.configuration,n=e.openWebview,r=e.openNetworkingTool,i=e.onClose,a=e.onDontExposePort,o=e.onDoExposePort,s=e.renderSecondLine,l=t.type;switch(l){case D.PortConfigurationType.FORWARDED:return(0,c.jsx)(et,{configuration:t,openWebview:n,openNetworkingTool:r,onClose:i,renderSecondLine:s,onDontExposePort:a});case D.PortConfigurationType.INTERNAL_ONLY:return(0,c.jsx)(en,{configuration:t,openNetworkingTool:r,onClose:i,renderSecondLine:s,onDoExposePort:o});case D.PortConfigurationType.NO_MORE_EXTERNAL_PORTS_AVAILABLE:return(0,c.jsx)(er,{configuration:t,openNetworkingTool:r,onClose:i,renderSecondLine:s});case D.PortConfigurationType.MISCONFIGURED:return(0,c.jsx)(ei,{configuration:t,openNetworkingTool:r,onClose:i,renderSecondLine:s});case D.PortConfigurationType.CONFIG_MISSING:return(0,c.jsx)(ea,{configuration:t,openNetworkingTool:r,onClose:i,renderSecondLine:s});default:(0,S.default)(l)}}function es(e){var t=e.configurations,n=e.openWebview,r=e.openNetworkingTool,i=e.onClose,a=e.renderSecondLine,o=t.filter(function(e){return e.type===D.PortConfigurationType.FORWARDED}),s=t.filter(function(e){return e.type!==D.PortConfigurationType.FORWARDED});return(0,c.jsx)(ee,{isWarning:!1,openNetworkingTool:r,onClose:i,firstLine:(0,c.jsxs)(c.Fragment,{children:[o.length>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(X.Text,{children:[o.length," ",(0,I.default)("port",o.length)," ","opened on"]}),(0,c.jsx)(Y.Button,{variant:"underlined",text:"{...}.replit.dev",onClick:n})]}):null,o.length>0&&s.length>0?(0,c.jsx)(Z.View,{css:J.verticalDivider}):null,s.length>0?(0,c.jsxs)(X.Text,{children:[s.length," ",(0,I.default)("port",s.length)," ","did not open"]}):null]}),secondLine:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(X.Text,{children:"You can manage this config in the"}),(0,c.jsx)(Y.Button,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:a})}function el(e){var t=e.configurations,n=e.openWebview,r=e.openNetworkingTool,i=e.onClose,a=e.onDontExposePort,o=e.onDoExposePort,s=(0,W.useMemoedDismissibleElement)("port-nudges"),u=(0,l._)((0,d.useState)(!1),2),f=u[0],p=u[1],h=!s.isDone,m=(0,l._)((0,d.useState)(!0),2),g=m[0],x=m[1];function y(){x(!1),null==i||i()}return((0,d.useEffect)(function(){0===t.length&&x(!0)},[t]),(0,d.useEffect)(function(){if(!s.isDone){if(t.length>0&&!f)return void p(!0);0===t.length&&f&&s.setAsDone()}},[t,s,f]),g&&0!==t.length)?1===t.length?(0,c.jsx)(eo,{configuration:t[0],openNetworkingTool:r,openWebview:n,renderSecondLine:h,onClose:y,onDontExposePort:a,onDoExposePort:o}):(0,c.jsx)(es,{configurations:t,openNetworkingTool:r,openWebview:n,renderSecondLine:h,onClose:y}):null}e.s(["PortInfo",()=>el],978799);var eu=e.i(790155),ec=e.i(11986),ed=e.i(402099),ef=e.i(346781),ep=e.i(840111),eh=e.i(195206),em=e.i(610357),eg=e.i(106020),ev=e.i(262206);function ex(e){var t,n,r,a,o,s,l=e.xterm,f=e.openShellSearch,p=e.openSearchAndReplace,h=e.isWorkflowsTerminal,m=(n=(t={xterm:l,openShellSearch:f,openSearchAndReplace:p,isWorkflowsTerminal:void 0!==h&&h}).xterm,r=t.openShellSearch,a=t.openSearchAndReplace,o=t.isWorkflowsTerminal,(0,d.useMemo)(function(){var e=[];if(r){var t=o?(0,c.jsx)(eh.default,{}):(0,c.jsx)(ep.default,{});e.push({match:eg.matchLabel,data:{type:"action",label:o?"Find in Console":"Find in Shell",icon:t,run:function(){var e;r(null!=(e=null==n?void 0:n._term.getSelection())?e:"")}}})}if(a&&e.push({match:eg.matchLabel,data:{type:"action",label:"Find in Repl",icon:(0,c.jsx)(ef.default,{}),run:function(){var e;a(null!=(e=null==n?void 0:n._term.getSelection())?e:"")}}}),0!==e.length)return{data:{type:"context",label:"Search",icon:(0,c.jsx)(ef.default,{})},commands:function(){return e}}},[n,r,a,o])),g=(s=function(){return window.navigator.userAgent.includes("Linux")},(0,d.useMemo)(function(){return{data:{type:"context",label:"Clipboard",icon:(0,c.jsx)(ec.default,{})},commands:function(){return[{match:eg.matchLabel,data:{type:"action",label:"Copy",icon:(0,c.jsx)(ed.default,{}),keyboardShortcut:(0,ev.defaultKeyCombo)({cmdOrCtrl:!0,shift:s(),key:"c"}),run:function(){var e,t=null!=(e=null==l?void 0:l._term.getSelection())?e:"";(0,em.default)(t)}}},{match:eg.matchLabel,data:{type:"action",label:"Paste",icon:(0,c.jsx)(ec.default,{}),keyboardShortcut:(0,ev.defaultKeyCombo)({cmdOrCtrl:!0,shift:s(),key:"v"}),run:function(){return(0,i._)(function(){var e,t;return(0,u._)(this,function(n){switch(n.label){case 0:e="",n.label=1;case 1:return n.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return e=n.sent(),[3,4];case 3:return t=n.sent(),eu.logger.error("Shell context menu paste failed",{message:t.message}),[2];case 4:return null==l||l._term.paste(e),[2]}})})()}}}]}}},[l]));return(0,d.useMemo)(function(){var e=[];return m&&e.push(m),g&&e.push(g),{data:{type:"context",label:"Search actions",icon:(0,c.jsx)(ef.default,{})},commands:function(){return e}}},[m,g])}e.s(["useGetShellContextMenuCommand",()=>ex],646067);var ey=e.i(967629),eb=e.i(480028),ew=(0,ey.css)(K.rcss.display.flex,K.rcss.align.center,K.rcss.height(30),{"input, button":[K.rcss.my(0),K.rcss.mx(4)],input:[K.rcss.py(4),K.rcss.px(8),K.rcss.backgroundColor.backgroundDefault,K.rcss.color.foregroundDefault,K.rcss.height(24),K.rcss.width(85),K.rcss.borderRadius(4),K.rcss.focusRing,{border:"none",boxShadow:"none","&::placeholder":[K.rcss.color.foregroundDefault],"&:focus":[{outline:"none",borderColor:eb.tokens.accentPrimaryDefault}]}]});function e_(e){var t=e.searchValue,n=e.setSearchValue,r=e.findNext,i=e.findPrevious,a=e.exit,o=(0,d.useRef)(null);(0,d.useEffect)(function(){o.current&&o.current.focus()},[]);var s=function(e){"Escape"===e.key?a():"Enter"===e.key&&(e.shiftKey?i(t):r(t))};return(0,c.jsxs)("div",{css:ew,children:[(0,c.jsx)("input",{ref:o,placeholder:"Find",value:t,onChange:function(e){return n(e.target.value)},onKeyDown:function(e){return s(e)}}),(0,c.jsx)(Y.Button,{size:"small",onClick:function(){return r(t)},text:"Next"}),(0,c.jsx)(Y.Button,{size:"small",onClick:function(){return i(t)},text:"Previous"}),(0,c.jsx)(Y.Button,{size:"small",onClick:a,text:"Exit"})]})}e.s(["SearchWidget",()=>e_],926587);var ek=e.i(262962);e.i(545082);var eS=e.i(663762),eC=e.i(818976),ej=e.i(358752),eT=e.i(784147),eE=e.i(173703),eR=(0,q.cssRecord)({root:[K.rcss.display.inlineBlock,K.rcss.borderRadius(4),K.rcss.border({color:eb.tokens.outlineDefault})],askButton:[K.rcss.border({direction:"right",color:eb.tokens.outlineDefault})],askButtonInner:[K.rcss.height(26),K.rcss.borderRadius(4,0,0,4)],copyButton:[{"> button":[K.rcss.width(26),K.rcss.height(26),K.rcss.borderRadius(0,4,4,0)]}]});function eI(e){var t=e.adjustXPosition,n=e.adjustYPosition,r=e.onClickAskAgent,i=e.onClickCopy,a=e.isAgentBusy;return(0,c.jsx)(eE.ShadesSurface,{css:eR.root,style:{marginLeft:void 0===t?0:t,marginTop:void 0===n?4:n},children:(0,c.jsxs)(Z.View,{row:!0,align:"center",children:[(0,c.jsx)(Z.View,{css:eR.askButton,children:(0,c.jsx)(Y.Button,{text:void 0!==a&&a?"Add to Queue":"Ask Agent",variant:"nofill",onClick:r,size:"small",iconLeft:(0,c.jsx)(eT.default,{}),css:eR.askButtonInner})}),(0,c.jsx)(Z.View,{css:eR.copyButton,children:(0,c.jsx)(Q.IconButton,{alt:"Copy",size:12,onClick:i,children:(0,c.jsx)(ed.default,{})})})]})})}function eA(e){var t=e.xterm,n=e.onAskAgent,r=e.isAgentBusy,i=void 0!==r&&r,a=(0,d.useMemo)(function(){return null==t?void 0:t._term},[t]),o=(0,d.useRef)(null),s=(0,d.useRef)(null),l=(0,d.useRef)(null);(0,d.useEffect)(function(){if(a)return a.onSelectionChange(function(){o.current&&o.current.dispose(),s.current&&s.current.dispose(),l.current&&(l.current.unmount(),l.current=null);var e=a.getSelectionPosition(),t=a.getSelection().trim();if(a.hasSelection()&&e&&t.length>0){var r,u,d,f=a.buffer.active.cursorY,p=e.end.y-f+1,h=null!=(u=null==a?void 0:a._core._renderService.dimensions.css.cell.width)?u:8,m=Math.round(((null==e?void 0:e.end.x)-(null==e?void 0:e.start.x))/2),g=-70,x=4,y=m*h,b=Math.ceil(140/h);y<70?(m=e.start.x,g=0):m>a.cols-b/2&&(m=e.end.x,g=-140),e.end.y>=a.rows-2&&(x=-8,p-=1),o.current=a.registerMarker(p),s.current=null!=(d=a.registerDecoration({marker:o.current,x:m,width:b,layer:"top"}))?d:null,null==(r=s.current)||r.onRender(function(e){l.current||(l.current=(0,ej.createRoot)(e)),l.current.render((0,c.jsx)(eI,{isAgentBusy:i,adjustXPosition:g,adjustYPosition:x,onClickAskAgent:function(){a.clearSelection(),n(t)},onClickCopy:function(){a.clearSelection(),(0,em.default)(t)}}))})}}).dispose},[n,a,i])}e.s(["useTerminalSelectionPopover",()=>eA],337805);var eP=e.i(453726),eD=e.i(6338),eO=(0,q.cssRecord)({terminalLoadingLine:[K.rcss.borderRadius(2),eD.loadingStyle.foregroundPulse(),K.rcss.height(16),K.rcss.mb(4)]});function eN(e){var t=e.targetHeight,n=Math.min(Math.floor((t-8)/20),4),r=(0,d.useMemo)(function(){return Array.from({length:n}).map(function(e,t){return(0,c.jsx)(Z.View,{css:eO.terminalLoadingLine,style:{width:100*Math.random()+"%"}},t)})},[n]);return(0,c.jsx)(Z.View,{p:8,style:{height:t+"px"},children:(0,c.jsx)(Z.View,{style:{position:"sticky",top:eP.METADATA_HEIGHT_PX+8},children:r})})}var eM=e.i(343252),eL=((t={}).EXPANDED="EXPANDED",t.COLLAPSED="COLLAPSED",t),eB=e.i(751273),eV=(0,q.cssRecord)({outputMetadataTooltip:[K.rcss.pl(4),K.rcss.pr(4)]});function eF(e){var t=e.isDone,n=e.hasError,r=e.errorMessage,i=e.finishedMessage,a=e.stopTask;return t?(0,c.jsx)(eB.Tooltip,{css:eV.outputMetadataTooltip,tooltip:n?"Error".concat(r?": ".concat(r):""):"Finished".concat(i?": ".concat(i):""),children:n?(0,c.jsx)(k.default,{}):(0,c.jsx)(m.default,{})}):void 0!==a?(0,c.jsx)(Q.IconButton,{alt:"Stop",onClick:a,children:(0,c.jsx)(_.default,{color:eb.tokens.accentNegativeDefault})}):(0,c.jsx)(eB.Tooltip,{tooltip:"Running...",children:(0,c.jsx)(b.default,{color:eb.tokens.accentPositiveDefault})})}var eU=e.i(629536),eG=e.i(103490),e$=e.i(795903),eH=e.i(604963),ez=(0,q.cssRecord)({askAIButton:[K.rcss.display.flex,K.rcss.flex.row,K.rcss.align.center,K.rcss.m(0),{"@container (max-width: 120px)":[K.rcss.display.none]}],aiButtonWithoutPorts:[{"@container (max-width: 320px)":{padding:"0 4px","& > span":[K.rcss.display.none]}}],aiButtonWithPorts:[{"@container (max-width: 420px)":{padding:"0 4px","& > span":[K.rcss.display.none]}}],verticalDivider:[K.rcss.mx(6),{width:1,height:eP.METADATA_HEIGHT_PX,background:eb.tokens.backgroundHigher}]}),eW=[ez.askAIButton,ez.aiButtonWithoutPorts],eq=[ez.askAIButton,ez.aiButtonWithPorts];function eK(e){var t=e.onClick,n=e.showingPorts,r=(0,l._)((0,d.useState)(!1),2),i=r[0],a=r[1],o="Ask ".concat(eU.AGENT_NAME,"");return(0,c.jsxs)(Z.View,{css:n?eq:eW,children:[(0,c.jsxs)(eH.PopoverTrigger,{isOpen:i,onOpenChange:a,label:o,placement:"bottom end",children:[(0,c.jsx)(X.Text,{color:"dimmer",children:(0,c.jsx)(Y.Button,{size:"small",variant:"underlinedOnHover",iconLeft:(0,c.jsx)(eG.default,{}),text:o,onClick:function(){return a(!0)}})}),(0,c.jsx)(e$.SendAgentMessageMenu,{onClick:t,prefix:"Ask"})]}),(0,c.jsx)(Z.View,{css:ez.verticalDivider})]})}var eY=e.i(257811);function eQ(e){var t,n,r,i,a,o,s=e.startTime,u=e.endTime,f=(n=!u,i=(r=(0,l._)((0,d.useState)(function(){return Date.now()}),2))[0],a=r[1],(0,d.useEffect)(function(){if(n){var e=setInterval(function(){a(Date.now())},100);return function(){clearInterval(e)}}},[n]),i);s&&u?o=u-s:u||(o=f-s);var p=o?(0,c.jsx)(eB.Tooltip,{tooltip:"".concat(Math.round(o).toLocaleString(),"ms"),children:(t=o)<1e3?"".concat(Math.floor(t),"ms"):t<6e4?"".concat(Math.floor(t/1e3),"s"):"".concat(Math.floor(t/6e4),"m")}):null,h=(0,c.jsx)(eY.Timestamp,{live:!0,date:s,textVariant:"small",textColor:"dimmer",textTransform:"first-letter-capitalized"});return(0,c.jsx)(c.Fragment,{children:p?(0,c.jsxs)(c.Fragment,{children:[p,eX,h]}):h})}var eX="",eZ=e.i(123850),eJ=e.i(624782),e0=e.i(714165),e1=(0,q.cssRecord)({default:[],withOnClick:[K.rcss.cursor.pointer,{transition:"all 0.2s ease","&:hover":{filter:"brightness(95%)",boxShadow:eb.tokens.shadow1}}]});function e2(e){var t=e.user,n=e.onClick,r=e.size,i=void 0===r?24:r;return(0,c.jsx)(eB.Tooltip,{placement:"bottom",tooltip:n?"Observe ".concat(t.username):t.username,children:function(e,r){return(0,c.jsx)(Z.View,(0,s._)((0,o._)({},e),{innerRef:r,onClick:n,children:(0,c.jsx)(e0.Avatar,{size:i,src:t.image||null,username:t.username,ringColor:t.color,css:n?e1.withOnClick:e1.default})}))}})}e.s(["default",()=>e2],73213);var e3=e.i(346715),e5=e.i(529810);function e4(){var e=(0,e5.default)().secrets,t=(0,l._)((0,d.useState)(null),2),n=t[0],r=t[1],i=(0,d.useMemo)(function(){return!!n&&(0,e3._)(n.values()).some(function(e){return!e})},[n]);return(0,d.useEffect)(function(){return e.watch(r)},[n,e]),i}e.s(["default",()=>e4],389320);var e8=e.i(552144),e6=(0,q.cssRecord)({button:[K.rcss.textAlign.left]});let e7=function(e){var t=e.onClick;return e4()?(0,c.jsx)(e8.StatusBannerButton,{text:"Missing required secrets. Click here to add them.",onClick:t,iconRight:(0,c.jsx)(H.default,{}),colorway:"warning",css:e6.button}):null};var e9=e.i(820357),te=(0,eZ.createCssVarTokens)(["blockMinHeight","terminalBackgroundColor","previewHeight"]),tt=te.cssVars,tn=te.styleTokens,tr=(0,q.cssRecord)({outputBlockMetadataWrapper:[{containerType:"size"},K.rcss.pl(4),K.rcss.pr(8),K.rcss.rowWithGap(4),K.rcss.align.center,K.rcss.justify.spaceBetween,K.rcss.height(eP.METADATA_HEIGHT_PX),K.rcss.position.sticky,K.rcss.top(0),K.rcss.zIndex(1)],outputBlockMetadataWrapperLeft:[K.rcss.rowWithGap(4),K.rcss.align.center],outputBlockMetadataWrapperRight:[K.rcss.rowWithGap(4),K.rcss.align.center],taskNamePill:[K.rcss.maxWidth(100),K.rcss.flex.shrink(0),K.rcss.display.flex,{"> span":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@container (max-width: 120px)":[K.rcss.display.none],"&:hover":{maxWidth:"none","> span":{overflow:"visible",textOverflow:"clip"}}}],dateText:[K.rcss.flex.row,K.rcss.align.center,K.rcss.textAlign.right,K.rcss.flex.shrink(1),{marginLeft:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],dateContainer:[K.rcss.overflow("hidden"),K.rcss.width(120),K.rcss.flex.shrink(0),{"@container (max-width: 510px)":[K.rcss.display.none]}],outputBlockClosingBorder:[K.rcss.height(1),K.rcss.zIndex(1),K.rcss.border({direction:"bottom",width:1,style:"solid",color:eb.tokens.backgroundHigher}),{marginTop:-1}],outputBlockTerminalWrapper:[K.rcss.minHeight(tn.blockMinHeight)],terminal:{gridRow:1,gridColumn:1,position:"sticky",top:B.styleTokens.topOffset,"& .xterm":[K.rcss.my(B.TERMINAL_PADDING_PX),K.rcss.ml(B.TERMINAL_PADDING_PX),K.rcss.height("100%"),K.rcss.overflow("hidden")],"& .xterm-viewport":[K.rcss.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},errorMessage:[{gridRow:1,gridColumn:1,position:"sticky",top:B.styleTokens.topOffset},K.rcss.py(B.TERMINAL_PADDING_PX),K.rcss.pl(B.TERMINAL_PADDING_PX),K.rcss.height("100%"),K.rcss.overflow("hidden")],searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:B.styleTokens.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4},avatarWrapper:[],outputMetadataTooltip:[K.rcss.pl(4),K.rcss.pr(4)],verticalDivider:[K.rcss.mx(6),{width:1,height:eP.METADATA_HEIGHT_PX,background:eb.tokens.backgroundHigher}],portInfoDomain:[K.rcss.display.flex,K.rcss.flex.row,K.rcss.align.center,K.rcss.m(0),{"@container (max-width: 400px)":K.rcss.display.none}],portInfoText:[K.rcss.mr(0)],portInfoPorts:[K.rcss.display.flex,K.rcss.flex.row,K.rcss.align.center,K.rcss.m(0),{"@container (max-width: 320px)":K.rcss.display.none}],portTooltipHeader:[K.rcss.color.foregroundDimmer,K.rcss.fontWeight.normal,K.rcss.px(2),K.rcss.pb(2)],portTooltipColumnLeft:[K.rcss.textAlign.right],portTooltipColumnMiddle:[K.rcss.textAlign.center,K.rcss.px(4)]});function ti(e){var t=e.isDone,n=e.hasError,r=e.errorMessage,i=e.finishedMessage,a=e.stopTask;return t?(0,c.jsx)(eB.Tooltip,{css:tr.outputMetadataTooltip,tooltip:n?"Error".concat(r?": ".concat(r):""):"Finished".concat(i?": ".concat(i):""),children:n?(0,c.jsx)(k.default,{}):(0,c.jsx)(m.default,{})}):void 0!==a?(0,c.jsx)(Q.IconButton,{alt:"Stop",onClick:a,children:(0,c.jsx)(_.default,{color:eb.tokens.accentNegativeDefault})}):(0,c.jsx)(eB.Tooltip,{tooltip:"Running...",children:(0,c.jsx)(b.default,{color:eb.tokens.accentPositiveDefault})})}function ta(e){var t=e.isCollapsed,n=e.setIsCollapsed,r=e.taskName,i=e.isDone,a=e.hasError,o=e.errorMessage,s=e.startTime,l=e.endTime,u=e.activeUsers,f=e.openPane,p=e.openedPorts,h=e.onAskAgentClick,m=e.stopTask,y="packager.installForAll"===r||"packager.installForLanguage"===r,b=p.length>0,_=(0,d.useCallback)(function(){f({type:"developer",data:{tab:["dependencies","import"]}})},[f]);return(0,c.jsxs)(Z.View,{css:tr.outputBlockMetadataWrapper,clsx:e9.default.outputBlockMetadataWrapper,onDoubleClick:function(){return n(!t)},children:[y?(0,c.jsxs)(Z.View,{css:tr.outputBlockMetadataWrapperLeft,children:[(0,c.jsx)(Q.IconButton,{alt:"Open Packager",onClick:_,children:(0,c.jsx)(w.default,{})}),(0,c.jsx)(eJ.Pill,{color:"grey",text:"Packager",css:tr.taskNamePill})]}):(0,c.jsxs)(Z.View,{css:tr.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,c.jsx)(Q.IconButton,{alt:t?"Expand":"Collapse",onClick:function(){return n(!t)},children:t?(0,c.jsx)(x.default,{}):(0,c.jsx)(g.default,{})}),(0,c.jsx)(eJ.Pill,{color:"grey",text:r,css:tr.taskNamePill})]}),(0,c.jsxs)(Z.View,{css:tr.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,c.jsx)(eK,{showingPorts:b,onClick:h}),(0,c.jsx)(tp,{openPane:f,openedPorts:p}),(0,c.jsxs)(Z.View,{css:tr.dateContainer,row:!0,justify:"space-between",children:[(0,c.jsx)(X.Text,{color:"dimmer",variant:"small",css:tr.dateText,children:(0,c.jsx)(eQ,{startTime:s,endTime:l})}),(0,c.jsx)(Z.View,{css:tr.verticalDivider})]}),u.length>0?(0,c.jsx)(Z.View,{grow:0,shrink:0,row:!0,gap:4,align:"center",children:u.map(function(e){return(0,c.jsx)(e2,{user:e,size:16},e.id)})}):null,(0,c.jsx)(ti,{isDone:i,stopTask:m,hasError:a,errorMessage:o})]})]})}function to(){}var ts={noScroll:!0};function tl(e){var t,a,o,s,f=e.taskIdx,m=e.runId,g=e.currentUserId,x=e.maxHeight,y=e.scrollParent,b=e.scrollPosition,w=e.openPane,_=e.openAgentWithMessage,k=(0,B.useAutoGrowingXTerm)({maxHeight:x,openPane:w}),S=k.visibleHeight,C=k.visibleLines,j=k.bufferHeight,E=k.bufferLines,I=k.wrapperResizeRef,P=k.hasScrollback,D=k.xterm,O=k.xtermRef,N=(0,d.useMemo)(function(){return null==D?void 0:D._term},[D]),F=(0,d.useMemo)(function(){var e,t=null==N?void 0:N._core;return null!=(e=null==t?void 0:t._renderService.dimensions.css.cell)?e:{width:0,height:0}},[N]),U=(0,l._)((0,d.useState)(null),2),G=U[0],$=U[1],H=(0,l._)((0,d.useState)(!1),2),z=H[0],W=H[1],q=(0,d.useRef)(null);(0,d.useEffect)(function(){return function(){null!==q.current&&clearTimeout(q.current)}},[q]),(0,d.useEffect)(function(){if(N){if(b<1||!P)return void N.scrollToLine(0);var e=j-S,t=E-C;if(e<1)return void N.scrollToLine(0);var n=Math.round(b/e*t);N.scrollToLine(n)}},[j,E,P,b,N,S,C]);var K=(0,l._)((0,d.useState)(null),2),Y=K[0],Q=K[1];(0,A.usePid2)(function(e,t){var a=t.signal;return(0,i._)(function(){var t,i,o,s,l,c,d,p,h,x;return(0,u._)(this,function(u){switch(u.label){case 0:if(!D||!G)return[2];i=(t=e.workflows.connectToTask.stream({runId:m,taskIdx:f,userId:g,processViewId:"outputs"},{signal:a})).reqWritable,o=t.resReadable,Q({onInput:function(e){if(i.isWritable()){var t=new Uint8Array(n.Buffer.from(e));i.write({$kind:"stdin",stdin:t})}},onResizeTerminal:function(e){i.isWritable()&&i.write({$kind:"resize",size:e})},onFocus:function(){i.isWritable()&&i.write({$kind:"focused"})},onBlur:function(){i.isWritable()&&i.write({$kind:"blurred"})}}),i.write({$kind:"resize",size:D.getSize()}),s=!1,l=!1,u.label=1;case 1:u.trys.push([1,6,7,12]),d=(0,r._)(o),u.label=2;case 2:return[4,d.next()];case 3:if(!(s=!(p=u.sent()).done))return[3,5];if(!(h=p.value).ok){if("UNEXPECTED_DISCONNECT"===h.payload.code||"CANCEL"===h.payload.code||"NO_MATCHING_TASK_STATE"===h.payload.code)return[3,5];if("TASK_ERROR"===h.payload.code)return T.logger.info("[".concat(h.payload.code,"] ").concat(h.payload.message," in workflow outputs")),[3,4];throw Error("[".concat(h.payload.code,"] ").concat(h.payload.message))}"output"===h.payload.$kind&&G(h.payload.chunk),u.label=4;case 4:return s=!1,[3,2];case 5:return[3,12];case 6:return x=u.sent(),l=!0,c=x,[3,12];case 7:if(u.trys.push([7,,10,11]),!(s&&null!=d.return))return[3,9];return[4,d.return()];case 8:u.sent(),u.label=9;case 9:return[3,11];case 10:if(l)throw c;return[7];case 11:return[7];case 12:return Q(null),i.close(),[2]}})})()},[m,f,G,D,g]);var X=(0,d.useCallback)(function(e){return $(function(){return e}),function(){}},[]),J=(0,l._)((0,d.useState)(!1),2),ee=J[0],et=J[1],en=(0,l._)((0,d.useState)(""),2),er=en[0],ei=en[1],ea=(0,p.useChatter)(),eo=(0,L.useIsAgentOptimisticallyWorking)(),es=(0,d.useCallback)(function(e){w({type:"searchReplace",data:{initialQuery:e}},!0)},[w]),el=(0,V.useContextMenu)().onContextMenu,eu=ex({xterm:D,isWorkflowsTerminal:!0,openShellSearch:function(e){et(!0),ei(e)},openSearchAndReplace:es});eA({xterm:D,onAskAgent:(0,d.useCallback)(function(e){return(0,i._)(function(){var t,n;return(0,u._)(this,function(r){switch(r.label){case 0:if(t=(0,h.terminalMessagePrompt)(e),!eo)return[3,2];return n=(0,M.packContentsForQueuedMessage)({text:t,attachedFiles:[]}),[4,ea.queue.enqueue({contents:n})];case 1:return r.sent(),[3,3];case 2:_(t,{createNewSession:!1}),r.label=3;case 3:return[2]}})})()},[eo,_,ea.queue]),isAgentBusy:eo});var ec=(0,d.useCallback)(function(){if(N){var e=N.getSelectionPosition();e&&y(e.start.y*F.height-x/2)}},[N,x,y,F.height]);return(0,c.jsxs)(B.AutoGrowingTerminalWrapper,{xterm:D,wrapperResizeRef:I,bufferHeight:j,setOnMessage:X,onInput:null!=(t=null==Y?void 0:Y.onInput)?t:to,onResizeTerminal:null!=(a=null==Y?void 0:Y.onResizeTerminal)?a:to,onFocus:null!=(o=null==Y?void 0:Y.onFocus)?o:to,onBlur:null!=(s=null==Y?void 0:Y.onBlur)?s:to,style:{pointerEvents:z?"none":"all"},onWheel:function(){W(!0),q.current&&clearTimeout(q.current),q.current=setTimeout(function(){W(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,R.getCmdOrCtrl)(e)&&(et(!0),e.preventDefault())},children:[ee?(0,c.jsx)(Z.View,{css:tr.searchWidget,children:(0,c.jsx)(e_,{searchValue:er,setSearchValue:ei,findPrevious:function(e){(null==D?void 0:D.findPrevious(e,ts))&&ec()},findNext:function(e){(null==D?void 0:D.findNext(e,ts))&&ec()},exit:function(){return et(!1)}})}):null,(0,c.jsx)(B.AutoGrowingTerminalInner,{xtermRef:O,visibleHeight:S,maxHeight:x,css:tr.terminal,onContextMenu:function(e){return el(e,{command:eu})}})]})}function tu(e){var t,n=e.runId,r=e.taskIdx,i=e.task,a=e.config,o=e.isCollapsed,s=e.setIsCollapsed,l=e.openPane,u=e.openedPorts,f=e.onAskAgentClick,p="ERROR"===i.state||"FAILED"===i.state,h="ERROR"===i.state||"FAILED"===i.state?null==(t=i.result)?void 0:t.message:void 0,m="RUNNING"!==i.state,g=(0,eS.useActiveUsers)(),x=(0,d.useMemo)(function(){return i.userIds.map(function(e){return g.find(function(t){return t.id===e})}).filter(Boolean)},[i,g]),y="shell.exec"===a.task&&"args"in a?(0,N.formatNixStorePath)(a.args):a.task,b=(0,P.usePid2Callback)(function(e){return function(){e.workflows.stopTask.rpc({runId:n,taskIdx:r,graceful:!0})}},[n,r]);return(0,c.jsx)(ta,{isCollapsed:o,setIsCollapsed:s,taskName:y,isDone:m,hasError:p,errorMessage:h,startTime:i.startTime,endTime:m?i.endTime:void 0,activeUsers:x,openPane:l,openedPorts:u,stopTask:null!=b?b:void 0,onAskAgentClick:f})}function tc(e){var t,p,m,g,x,y,b,w,_,k,S,T,R,I,A,D,N,M,L,V,F,U,G,$,H,z,W=e.task,q=e.taskIdx,K=e.runId,Y=e.config,Q=e.maxHeight,X=e.rootRef,J=e.currentUser,ee=e.ports,et=e.openAgentWithMessage,en=e.openPane,er=e.onDoExposePort,ei=e.onDontExposePort,ea=(0,d.useRef)(null),eo=(0,l._)((0,d.useState)(!0),2),es=eo[0],eu=eo[1],ec=(0,l._)((0,d.useState)(!1),2),ed=ec[0],ef=ec[1],ep=(0,l._)((0,d.useState)(0),2),eh=ep[0],em=ep[1],eg=(0,eC.useTerminalTheme)(),ev=(0,C.default)(es,ed?6e4:500),ex=null!=(H=(null==(U=W.metadata)?void 0:U.task)==="shell.exec"&&W.metadata.isInRecoveryMode)&&H,ey=(0,O.useOpenedPortsMatchingCgroupWithExplicitService)(ee,(null==(G=W.metadata)?void 0:G.task)==="shell.exec"?null==($=W.metadata)?void 0:$.cgroupPath:void 0),eb=(0,l._)((0,d.useState)(eL.EXPANDED),2),ew=(p=(t={maxHeight:Q,visualState:eb[0],onSetVisualState:eb[1]}).visualState,m=t.onSetVisualState,g=t.maxHeight,y=(x=(0,l._)((0,d.useState)("EXPANDED"===p?0:void 0),2))[0],b=x[1],w=(0,d.useRef)(null),k=(_=(0,l._)((0,d.useState)("EXPANDED"===p?"expanded":"collapsed"),2))[0],S=_[1],R=(T=(0,l._)((0,d.useState)("COLLAPSED"===p?0:void 0),2))[0],I=T[1],A=(0,d.useCallback)(function(e){e&&b(e.getBoundingClientRect().height)},[]),D=(0,j.default)(function(e){var t=e.height;"expanded"===k&&b(t)},{type:"debounce",wait:200}),(0,d.useEffect)(function(){if(w.current)switch(k){case"start-collapsing":S("is-collapsing");break;case"is-collapsing":I(0);break;case"start-expanding":S("is-expanding");break;case"is-expanding":I(y);break;case"expanded":I(void 0)}},[k,y]),N="expanded"!==k&&"is-expanding"!==k,M=(0,d.useCallback)(function(e){m(e?"COLLAPSED":"EXPANDED")},[m]),L=(0,d.useRef)(p),(0,d.useEffect)(function(){"EXPANDED"===L.current&&"COLLAPSED"===p&&w.current&&(S("start-collapsing"),I(Math.min(w.current.getBoundingClientRect().height,g)),S("start-collapsing")),"COLLAPSED"===L.current&&"EXPANDED"===p&&S("start-expanding"),L.current=p},[g,p]),V=(0,d.useCallback)(function(){"is-collapsing"===k&&S("collapsed"),"is-expanding"===k&&S("expanded")},[k]),F=(0,d.useMemo)(function(){return{style:{height:R,transition:"height 120ms ease-out",overflow:"expanded"===k||"start-collapsing"===k?"visible":"hidden"},onTransitionEnd:V}},[R,k,V]),{collapsedStep:k,isCollapsed:N,setIsCollapsed:M,blockWrapperRef:w,blockWrapperProps:F,blockResizeRef:(0,eM.useMergeRefs)([D,A],{breadcrumb:"client/workspace/components/Outputs/useAnimatedBlockCollapsing.tsx:173"}),measuredBlockHeight:y}),e_=ew.collapsedStep,ek=ew.isCollapsed,eS=ew.setIsCollapsed,ej=ew.blockWrapperRef,eT=ew.blockWrapperProps,eE=ew.blockResizeRef,eR=ew.measuredBlockHeight;(0,d.useEffect)(function(){if(X.current){var e,t=X.current,n=function(){var n,r;em(Math.max(0,t.scrollTop-(null!=(r=null==(n=ea.current)?void 0:n.offsetTop)?r:0))),ef(!0),e&&clearTimeout(e),e=setTimeout(function(){ef(!1)},500)};return t.addEventListener("scroll",n),function(){clearInterval(e),t.removeEventListener("scroll",n)}}},[X,ea]),(0,d.useEffect)(function(){if(ea.current&&X.current)return(0,E.inView)(ea.current,function(){return eu(!0),function(){eu(!1)}},{root:X.current,threshold:0})},[X,ea]);var eI=(0,P.usePid2Callback)(function(e){return function(){return(0,i._)(function(){var t,i,a,o,s,l,c,d,p,m;return(0,u._)(this,function(u){switch(u.label){case 0:t=e.workflows.readTaskBuffer.subscribe({runId:K,taskIdx:q}).resReadable,i=new Uint8Array([]),a=!1,o=!1,u.label=1;case 1:u.trys.push([1,6,7,12]),l=(0,r._)(t),u.label=2;case 2:return[4,l.next()];case 3:if(!(a=!(c=u.sent()).done))return[3,5];if(!(d=c.value).ok)throw Error(d.payload.code+": "+d.payload.message);if("output"===d.payload.$kind&&(i=n.Buffer.concat([i,d.payload.chunk])),"finished"===d.payload.$kind)return p=(0,f.default)(i.toString()),[2,(0,h.terminalMessagePrompt)(p)];u.label=4;case 4:return a=!1,[3,2];case 5:return[3,12];case 6:return m=u.sent(),o=!0,s=m,[3,12];case 7:if(u.trys.push([7,,10,11]),!(a&&null!=l.return))return[3,9];return[4,l.return()];case 8:u.sent(),u.label=9;case 9:return[3,11];case 10:if(o)throw s;return[7];case 11:return[7];case 12:return[2]}})})()}}),eA=(0,d.useCallback)(function(e){return(0,i._)(function(){var t;return(0,u._)(this,function(n){switch(n.label){case 0:if(null==eI)return[2];return[4,eI()];case 1:return(t=n.sent())&&et(t,e),[2]}})})()},[eI,et]),eD=(0,l._)((0,d.useState)(0),2),eO=eD[0],eB=eD[1],eV=(0,j.default)(function(e){var t=e.height;"expanded"===e_&&eB(t)},{type:"debounce",wait:200}),eF=(0,d.useCallback)(function(){en({type:"developer",data:{tab:["networking"]}})},[en]),eU=(0,d.useCallback)(function(e,t){en({type:"webview",data:{ports:{type:"local",path:e,port:t}}})},[en]),eG=(0,d.useCallback)(function(){en({type:"envEditor"})},[en]),e$="FINISHED"===W.state||"FAILED"===W.state,eH=Q-eP.METADATA_HEIGHT_PX-eO,ez=!1;return"collapsed"===e_?ez=!1:(!e$||ev)&&(ez=!0),(0,c.jsxs)(Z.View,{innerRef:ea,children:[(0,c.jsx)(tu,{runId:K,taskIdx:q,task:W,config:Y,isInRecoveryMode:ex,isCollapsed:ek,setIsCollapsed:eS,openPane:en,openedPorts:ey,onAskAgentClick:eA}),(0,c.jsxs)(Z.View,{innerRef:eV,style:{position:"sticky",top:eP.METADATA_HEIGHT_PX},children:[(0,c.jsx)(e7,{onClick:eG}),(0,c.jsx)(el,{configurations:ey.map(function(e){return e.configuration}),openWebview:function(){eU("/",ey[0].configuration.localPort)},openNetworkingTool:eF,onDontExposePort:function(){1===ey.length&&ei(ey[0].configuration.localPort)},onDoExposePort:function(){1===ey.length&&er(ey[0].configuration.localPort)}})]}),(0,c.jsx)("div",(0,s._)((0,o._)({ref:ej},eT),{children:(0,c.jsx)(Z.View,{css:tr.outputBlockTerminalWrapper,style:(z={},(0,a._)(z,tt.blockMinHeight,eR+"px"),(0,a._)(z,tt.terminalBackgroundColor,null==eg?void 0:eg.background),(0,a._)(z,B.cssVars.topOffset,eP.METADATA_HEIGHT_PX+eO+"px"),z),children:ez?(0,c.jsx)(Z.View,{innerRef:eE,children:(0,c.jsx)(tl,{taskIdx:q,runId:K,maxHeight:eH,currentUserId:J.id,scrollParent:function(e){var t,n,r,i=e+(null!=(r=null==(t=ea.current)?void 0:t.offsetTop)?r:0);null==(n=X.current)||n.scrollTo({top:i})},scrollPosition:eh,openPane:en,openAgentWithMessage:et})}):(0,c.jsx)(eN,{targetHeight:null!=eR?eR:0})})})),(0,c.jsx)(Z.View,{css:tr.outputBlockClosingBorder})]})}function td(e){var t,n,r=(0,d.useCallback)(function(){e.openPane({type:"developer",data:{tab:["dependencies","import"]}})},[e]),i=e.task.metadata;if(((null==i?void 0:i.task)==="packager.installForAll"||(null==i?void 0:i.task)==="packager.installForLanguage")&&(null==i?void 0:i.hasUserFacingOutput)===!0)return(0,c.jsx)(tc,(0,o._)({},e));var a="ERROR"===e.task.state||"FAILED"===e.task.state,s="ERROR"===e.task.state||"FAILED"===e.task.state?null==(t=e.task.result)?void 0:t.message:void 0,l="FINISHED"===e.task.state?null==(n=e.task.result)?void 0:n.message:void 0,u="RUNNING"!==e.task.state;return(0,c.jsxs)(Z.View,{children:[(0,c.jsxs)(Z.View,{css:tr.outputBlockMetadataWrapper,clsx:e9.default.outputBlockMetadataWrapper,children:[(0,c.jsxs)(Z.View,{css:tr.outputBlockMetadataWrapperLeft,children:[(0,c.jsx)(Q.IconButton,{alt:"Open Packager",onClick:r,children:(0,c.jsx)(w.default,{})}),(0,c.jsx)(eJ.Pill,{color:"grey",text:"Packager",css:tr.taskNamePill})]}),(0,c.jsxs)(Z.View,{css:tr.outputBlockMetadataWrapperRight,children:[(0,c.jsx)(X.Text,{color:"dimmer",variant:"small",css:tr.dateText,children:(0,c.jsx)(eQ,{startTime:e.task.startTime,endTime:"RUNNING"!==e.task.state?e.task.endTime:void 0})}),(0,c.jsx)(Z.View,{css:tr.verticalDivider}),(0,c.jsx)(eF,{isDone:u,hasError:a,errorMessage:s,finishedMessage:l})]})]}),(0,c.jsx)(Z.View,{css:tr.outputBlockTerminalWrapper,children:(0,c.jsx)(Z.View,{css:tr.errorMessage,style:{color:eb.tokens.accentNegativeStronger},children:s})})]})}function tf(e){var t=(0,ek.useCurrentUser)();if(!t)return null;var n=e.config.task;switch(n){case"shell.exec":return(0,c.jsx)(tc,(0,s._)((0,o._)({},e),{currentUser:t}));case"packager.installForLanguage":case"packager.installForAll":return(0,c.jsx)(td,(0,s._)((0,o._)({},e),{currentUser:t}));case"workflow.run":return null;default:(0,S.default)(n)}}function tp(e){var t=e.openPane,n=e.openedPorts,r=void 0!==n&&n.length>0,i=r?"{...}.replit.dev":"",a=(0,d.useMemo)(function(){return r?1===n.length?":".concat(n[0].configuration.localPort):"".concat(n.length," ").concat((0,I.default)("port",n.length)):""},[r,n]),o=(0,d.useCallback)(function(){t({type:"webview",data:{ports:r?{type:"local",port:n[0].configuration.localPort}:void 0}},!0)},[r,t,n]),s=(0,d.useCallback)(function(){t({type:"developer",data:{tab:["networking"]}},!0)},[t]);return r?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(Z.View,{css:tr.portInfoDomain,children:[(0,c.jsx)(X.Text,{color:"dimmer",css:tr.portInfoText,children:(0,c.jsx)(eB.Tooltip,{tooltip:"Open Preview",children:(0,c.jsx)(Y.Button,{size:"small",variant:"underlinedOnHover",text:i,onClick:o})})}),(0,c.jsx)(Z.View,{css:tr.verticalDivider})]}),(0,c.jsxs)(Z.View,{css:tr.portInfoPorts,children:[(0,c.jsx)(X.Text,{color:"dimmer",css:tr.portInfoText,children:(0,c.jsx)(eB.Tooltip,{tooltip:(0,c.jsx)(th,{openedPorts:n}),children:(0,c.jsx)(Y.Button,{size:"small",variant:"underlinedOnHover",iconLeft:(0,c.jsx)(y.default,{color:eb.tokens.accentPositiveStronger}),text:a,onClick:s})})}),(0,c.jsx)(Z.View,{css:tr.verticalDivider})]})]}):null}function th(e){var t=e.openedPorts;return(0,c.jsx)(Z.View,{children:(0,c.jsxs)("table",{children:[(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{css:tr.portTooltipHeader,children:"Internal"}),(0,c.jsx)("th",{}),(0,c.jsx)("th",{css:tr.portTooltipHeader,children:"External"})]}),(0,c.jsx)("tbody",{children:t.map(function(e){var t=e.configuration,n=!0,r=null;switch(t.type){case D.PortConfigurationType.FORWARDED:n=!0,r=":".concat(t.externalPort);break;case D.PortConfigurationType.INTERNAL_ONLY:n=!1,r=null;break;case D.PortConfigurationType.NO_MORE_EXTERNAL_PORTS_AVAILABLE:case D.PortConfigurationType.MISCONFIGURED:case D.PortConfigurationType.CONFIG_MISSING:n=!0,r=(0,c.jsx)(k.default,{})}return(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{css:tr.portTooltipColumnLeft,children:[":",t.localPort]}),(0,c.jsx)("td",{css:tr.portTooltipColumnMiddle,children:n?"":null}),(0,c.jsx)("td",{children:r})]},t.localPort)})})]})})}e.s(["WorkflowsTaskBlock",()=>tf],319401);var tm=e.i(858248),tg=e.i(709485),tv=e.i(803640),tx=e.i(729122);function ty(e){return e[e.length-1]}var tb=(0,q.cssRecord)({menuItemSelector:[K.rcss.height(28),K.rcss.pl(4),{flex:1,transition:"none",span:{flex:1,textAlign:"left"}}],iconInvisible:{"& > svg":[K.rcss.visibility.hidden],"&:hover > svg":[K.rcss.visibility.visible]}});function tw(e){var t=e.setDefault,n=e.onAction,r=e.name,i=e.isRunning,a=e.isRunButton?null:tb.iconInvisible;return(0,c.jsxs)(Z.View,{row:!0,"aria-label":r,align:"center",children:[(0,c.jsx)(Q.IconButton,{onClick:function(){return t(r)},alt:"Make default",css:a,children:(0,c.jsx)(m.default,{})}),(0,c.jsx)(Y.Button,{css:tb.menuItemSelector,onClick:n,text:r,variant:"nofill",iconRight:i?(0,c.jsx)(_.default,{}):(0,c.jsx)(tv.default,{})})]})}function t_(){var e,t,n,r,i,a=(0,tx.useWorkflowsRunner)(),o=(0,tx.usePersistConfig)(),s=(0,tx.useSetRunButton)(),l=(0,tx.useWorkflowsConfig)(),u=(0,tx.useWorkflowsRunState)(),f=(0,tx.useTriggerLocalRun)(),p=null==a?void 0:a.workflowId,h=!!(null==l||null==(n=l.workflow)||null==(t=n.find(function(e){return e.name===p}))||null==(e=t.metadata)?void 0:e.generated),m=null==l||null==(i=l.workflow)||null==(r=i.find(function(e){var t;return null==(t=e.metadata)?void 0:t.dotReplitRun}))?void 0:r.name,g=(0,P.usePid2Callback)(function(e){return function(t){return f(N.RunReason.RUN_BUTTON_CLICKED),(0,tm.track)(tg.events.WORKFLOW_RAN,{source:"dropdownMenu"}),e.workflows.runWorkflow.rpc({workflowId:t})}},[f]),x=(0,P.usePid2Callback)(function(e){return function(t){return(0,tm.track)(tg.events.WORKFLOW_STOPPED,{source:"dropdownMenu"}),e.workflows.stopRun.rpc({runId:t})}},[]),y=function(e){(0,tm.track)(tg.events.WORKSPACE,{action:"run_button_used",usage:"default_changed",runner:e?"workflows":"pid1"}),s(e),o()},b=(0,d.useMemo)(function(){var e;return(null==l?void 0:l.workflow)&&null!=(e=null==l?void 0:l.workflow.filter(function(e){var t,n;return!(null!=(n=null==(t=e.metadata)?void 0:t.generated)&&n)}).map(function(e){var t=Object.values(null!=u?u:{}).filter(function(t){return t.workflow.name===e.name}).sort(function(e,t){return e.startTime-t.startTime});return{workflowConfig:e,workflowRunState:ty(t)}}))?e:[]},[l,u]),w=(0,d.useMemo)(function(){if(m)return ty(Object.values(null!=u?u:{}).filter(function(e){return m===e.workflow.name}).sort(function(e,t){return e.startTime-t.startTime}))},[u,m]);return(0,c.jsx)(Z.View,{"aria-label":"Workflows",gap:4,children:(0,c.jsxs)(Z.View,{children:[m?(0,c.jsx)(tw,{isRunButton:h,isRunning:(null==w?void 0:w.step)==="RUNNING",onAction:function(){(null==w?void 0:w.step)!=="RUNNING"?null==g||g(m):w&&(null==x||x(w.runId))},setDefault:function(e){y()},name:m}):null,b.map(function(e,t){var n,r=e.workflowConfig,i=e.workflowRunState,a=(null==i?void 0:i.step)==="RUNNING";return(0,c.jsx)(tw,{onAction:function(){a?i&&(null==x||x(i.runId)):null==g||g(r.name)},setDefault:y,name:r.name,isRunning:a,isRunButton:r.name===p},r.name+"-"+t+"-"+(null!=(n=null==i?void 0:i.step)?n:"not-started"))})]})})}var tk=e.i(754873),tS=(0,q.cssRecord)({dropDown:[{'&[data-visible="true"]':{visibility:"visible",maxWidth:"100px",transform:"translateX(-4px)",opacity:1},'&[data-visible="false"]':{visibility:"hidden",maxWidth:0,transform:"translateX(-20px)",opacity:0},zIndex:0,transition:"\ntransform 0.2s linear,\nopacity 0.2s linear\n"}],dropDownButton:[K.rcss.reset.button,tk.interactive.filled,K.rcss.color.foregroundDimmer,K.rcss.height(32),K.rcss.minWidth(20),K.rcss.flex.column,K.rcss.justify.center,K.rcss.pr(2),K.rcss.pl(4),K.rcss.borderRadius(0,"default","default",0),{backgroundColor:"transparent"}],popoverWrapper:[K.rcss.minWidth(240)],popoverSection:[K.rcss.p(8),{":not(:last-of-type)":{borderBottom:"1px solid "+eb.tokens.outlineDimmest}}]});function tC(e){var t=e.openPane,n=e.isVisible,r=e.triggerElement,i=(0,l._)((0,d.useState)(!1),2),a=i[0],o=i[1],s=(0,d.useCallback)(function(){(0,tm.track)(tg.events.WORKFLOWS_SETTINGS_OPENED,{source:"runButton"}),t({type:"workflows"}),o(!1)},[t]);return(0,c.jsx)(Z.View,{css:tS.dropDown,"data-visible":void 0===n||n?"true":"false",children:(0,c.jsxs)(eH.PopoverTrigger,{isOpen:a,onOpenChange:function(e){(0,tm.track)(tg.events.WORKSPACE,{action:"run_button_used",usage:"dropdown_opened"}),o(e)},label:"Workflows",placement:"bottom start",children:[r||(0,c.jsx)(Z.SpecializedView.button,{css:tS.dropDownButton,children:(0,c.jsx)(eB.Tooltip,{tooltip:"Configure Run Button",children:(0,c.jsx)(g.default,{})})}),(0,c.jsxs)(Z.View,{css:tS.popoverWrapper,children:[(0,c.jsx)(Z.View,{css:tS.popoverSection,children:(0,c.jsx)(t_,{})}),(0,c.jsx)(Z.View,{css:tS.popoverSection,children:(0,c.jsx)(Y.Button,{text:"Manage Workflows",onClick:s,iconLeft:(0,c.jsx)(H.default,{})})})]})]})})}e.s(["default",()=>tC],831733)},550801,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(276385),a=e.i(389959),o=e.i(269848),s=e.i(416298),l=e.i(664152),u=e.i(858248),c=e.i(709485),d=e.i(529810),f=e.i(446530),p=e.i(173703),h=e.i(613355),m=e.i(965153),g=e.i(140487),x=e.i(739521),y=e.i(396776),b=e.i(960178),w=e.i(625484),_=(0,f.cssRecord)({brokenNixErrorWrapper:[h.rcss.maxHeight("300px"),{overflow:"scroll"},h.rcss.p(8)],accordionWrapper:[h.rcss.borderRadius(4)],inlineButton:[{display:"inline-flex"}]});function k(e){var f=e.openFile,h=e.nixError,x=e.handleClose,k=(0,d.default)(),S=k.git,C=k.fs,j=(0,n._)((0,a.useState)(null),2),T=j[0],E=j[1],R=(0,n._)((0,a.useState)(!1),2),I=R[0],A=R[1],P=(0,a.useCallback)(function(){return(0,t._)(function(){var e,t,n,i,a,o,s;return(0,r._)(this,function(r){switch(r.label){case 0:return(0,u.track)(c.events.NIX_MODULE,{action:"recovery",state:"Started"}),l.logger.info("Started Nix Broken State Recovery"),A(!0),S.forceRefresh(),[4,S.status()];case 1:if((e=r.sent()).error)return A(!1),E("git is not accessible"),(0,u.track)(c.events.NIX_MODULE,{action:"recovery",state:"Failed",reason:"Git State Error"}),l.logger.error("Nix Broken State Recovery Failed due to Git",{gitStatusError:e.error}),[2];if(t=e.changes.find(function(e){return".replit"===e.path}),n=e.changes.find(function(e){return"replit.nix"===e.path}),!t)return[3,3];return[4,S.stageFiles({add:[".replit"]})];case 2:r.sent(),r.label=3;case 3:if(!n)return[3,5];return[4,S.stageFiles({add:["replit.nix"]})];case 4:r.sent(),r.label=5;case 5:if(!(t||n))return[3,7];return[4,S.commit({message:"Pre-Recovery checkpoint"})];case 6:r.sent(),r.label=7;case 7:return[4,S.log({path:".replit"})];case 8:var d;if((i=r.sent()).error)return A(!1),E("git log is not accessible"),(0,u.track)(c.events.NIX_MODULE,{action:"recovery",state:"Failed",reason:"Git Log Error"}),l.logger.error("Nix Broken State Recovery Failed due to Git",{gitLogError:i.error}),[2];return a=(d=i.commits)[d.length-1],[4,S.getFileContents({path:".replit",revision:a.hash,convertToBase64:!1})];case 9:if((o=r.sent()).error)return A(!1),E("failed recovering file contents"),(0,u.track)(c.events.NIX_MODULE,{action:"recovery",state:"Failed",reason:"Git File Contents Error"}),l.logger.error("Nix Broken State Recovery Failed due to Git",{gitFileContentError:o.error}),[2];return[4,C.writeFile(".replit",null!=(s=o.content)?s:"")];case 10:return r.sent(),[4,C.deleteFile("replit.nix")];case 11:return r.sent(),[4,S.stageFiles({add:[".replit"]})];case 12:return r.sent(),[4,S.stageFiles({add:["replit.nix"]})];case 13:return r.sent(),[4,S.commit({message:"Post-Recovery checkpoint"})];case 14:return r.sent(),S.forceRefresh(),A(!1),null==x||x(),(0,u.track)(c.events.NIX_MODULE,{action:"recovery",state:"Succeeded"}),l.logger.info("Finished Nix Broken State Recovery"),[2]}})})()},[S,C,x]);return(0,i.jsxs)(w.View,{gap:8,children:[(0,i.jsxs)(w.View,{gap:8,children:[(0,i.jsx)(b.Text,{variant:"subheadDefault",children:"The nix environment failed to build"}),(0,i.jsxs)(b.Text,{children:["Check if your"," ",(0,i.jsx)(g.Button,{css:_.inlineButton,variant:"underlined",onClick:function(){f(".replit"),null==x||x()},text:".replit"})," ","and"," ",(0,i.jsx)(g.Button,{css:_.inlineButton,variant:"underlined",onClick:function(){f("replit.nix"),null==x||x()},text:"replit.nix"})," ","files are configured properly:"]})]}),(0,i.jsx)(p.ShadesSurface,{css:_.accordionWrapper,children:(0,i.jsx)(m.AccordionItem,{headerContent:(0,i.jsx)(w.View,{p:4,children:"Error Message"}),children:"error"===h.status?(0,i.jsx)(w.View,{css:_.brokenNixErrorWrapper,children:(0,i.jsx)(b.Text,{variant:"code",children:h.error})}):null})}),(0,i.jsx)(b.Text,{children:"Optionally, we can back up the broken configuration files and recover the original ones:"}),(0,i.jsx)(g.Button,{text:"Recover original configuration files",colorway:null!==T?"grey":"warning",onClick:P,isDisabled:I||null!==T,iconLeft:I?(0,i.jsx)(o.default,{}):(0,i.jsx)(s.default,{})}),T?(0,i.jsx)(y.StatusBanner,{colorway:"warning",text:(0,i.jsxs)(b.Text,{children:["Recovery failed: ",T]})}):null]})}function S(e){var t=e.isOpen,n=e.setIsOpen,r=e.nixError,a=e.openFile;return(0,i.jsx)(x.Modal,{isOpen:t,onRequestClose:function(){return n(!1)},children:(0,i.jsx)(k,{openFile:a,nixError:r,handleClose:function(){return n(!1)}})})}e.s(["NixIsBrokenModal",()=>S,"NixIsBrokenModalContent",()=>k])},601282,e=>{e.v({header:"WorkflowsConsole-module__bIdrjW__header",headerRecoveryMode:"WorkflowsConsole-module__bIdrjW__headerRecoveryMode",outputsList:"WorkflowsConsole-module__bIdrjW__outputsList",outputsListParent:"WorkflowsConsole-module__bIdrjW__outputsListParent",outputsListSnapToBottom:"WorkflowsConsole-module__bIdrjW__outputsListSnapToBottom",outputsListWrapper:"WorkflowsConsole-module__bIdrjW__outputsListWrapper",scrollSnap:"WorkflowsConsole-module__bIdrjW__scrollSnap"})},782370,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(276385),i=e.i(389959),a=e.i(960933),o=e.i(862927),s=e.i(116235),l=e.i(195206),u=e.i(491194),c=e.i(858248),d=e.i(709485),f=e.i(927158),p=e.i(529810),h=e.i(106020),m=e.i(468095);e.i(32109);var g=e.i(384401);e.i(282890);var x=e.i(716636),y=e.i(259493),b=e.i(530658),w=e.i(642049),_=e.i(167392),k=e.i(416298),S=e.i(180703),C=e.i(649960),j=e.i(917375),T=e.i(86159),E=e.i(406206),R=e.i(782672),I=e.i(729122),A=e.i(94764),P=e.i(319401),D=e.i(831733),O=e.i(140487),N=e.i(625484),M=e.i(550801),L=e.i(601282);function B(e){var t=e.openPane,n=e.ports,a=e.openAgentWithMessage,o=e.onClear,s=e.onDontExposePort,l=e.onDoExposePort,u=(0,b._)((0,i.useState)(0),2),c=u[0],d=u[1],f=(0,b._)((0,i.useState)(!0),2),p=f[0],h=f[1],m=(0,i.useRef)(null),g=(0,T.useSetTourStepTarget)(j.newUserTour.id,j.TourStepIds.Output),x=(0,i.useRef)(0),y=(0,b._)((0,S.default)("show-only-latest-console-runs",!0),2),_=y[0],k=y[1],E=(0,I.useWorkflowsTaskFlatMap)(),R=(0,C.default)(function(e){d(e.height)},{type:"throttle",wait:200}),D=(0,i.useMemo)(function(){var e=E.sort(function(e,t){return e.task.startTime-t.task.startTime}),t=e.filter(function(e){var t=e.task;return!_||t.state===w.TaskState.RUNNING});return 0===t.length&&e.length>0?[e[e.length-1]]:t},[_,E]),O=(0,i.useMemo)(function(){return D.some(function(e){return e.task.state!==w.TaskState.RUNNING})},[D]),M=0===D.length;return(0,r.jsx)(N.View,{clsx:L.default.outputsListParent,grow:!0,shrink:!0,innerRef:g,"data-cy":"console",children:(0,r.jsxs)(N.View,{clsx:L.default.outputsListWrapper,innerRef:R,children:[(0,r.jsx)(V,{onClear:o,showOnlyLatest:_,setShowOnlyLatest:k,hasFinishedRuns:O,openPane:t}),M?(0,r.jsx)(A.default,{openPane:t}):(0,r.jsxs)(N.View,{clsx:[L.default.outputsList,p&&L.default.outputsListSnapToBottom],innerRef:m,onScroll:function(){m.current&&(m.current.scrollTop<x.current?h(!1):h(m.current.scrollHeight-m.current.scrollTop-20<c),x.current=m.current.scrollTop)},children:[D.map(function(e){var i=e.task,o=e.taskIdx,u=e.runId,d=e.config;return(0,r.jsx)(P.WorkflowsTaskBlock,{task:i,taskIdx:o,runId:u,config:d,maxHeight:c,rootRef:m,ports:n,openPane:t,openAgentWithMessage:a,onDoExposePort:l,onDontExposePort:s},u+"-"+o)}),p?(0,r.jsx)(N.View,{clsx:L.default.scrollSnap}):null]})]})})}function V(e){var t=(0,R.useNixError)(),n=(0,b._)((0,i.useState)(!1),2),a=n[0],o=n[1],s=(0,i.useCallback)(function(t){e.openPane({type:"codeEditor",data:{path:t}})},[e]);return t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(N.View,{clsx:L.default.headerRecoveryMode,row:!0,gap:8,align:"center",justify:"center",height:28,onClick:function(){return o(!0)},children:[(0,r.jsx)(k.default,{}),"App is in recovery mode"]}),(0,r.jsx)(M.NixIsBrokenModal,{isOpen:a,setIsOpen:o,nixError:t,openFile:s})]}):(0,r.jsxs)(N.View,{clsx:L.default.header,row:!0,align:"center",justify:"space-between",height:28,pl:8,pr:2,children:[(0,r.jsx)(N.View,{children:(0,r.jsx)(D.default,{openPane:e.openPane,triggerElement:(0,r.jsx)(O.Button,{text:"Workflows",variant:"nofill",size:"xsmall",iconRight:(0,r.jsx)(_.default,{})})})}),(0,r.jsxs)(N.View,{row:!0,gap:4,align:"center",px:2,height:"100%",children:[(0,r.jsx)(E.PaneHeaderSwitch,{text:"Show Only Latest",isSelected:e.showOnlyLatest,onChange:e.setShowOnlyLatest}),(0,r.jsx)(E.PaneHeaderActionButton,{altText:"Clear Past Runs",buttonText:"Clear Past Runs",icon:(0,r.jsx)(u.default,{}),onClick:e.onClear,disabled:!e.hasFinishedRuns})]})]})}var F=e.i(480028),U=a.Type.Object({type:a.Type.Literal("runnerOutput")}),G={id:"outputs.clear",name:"Clear console history",default:void 0};function $(e){var a,o,s,l,x,b,w=e.options,_=(o=(a=(0,p.default)()).fs,s=a.ports,l=(0,f.usePid2Callback)(function(e){return function(){return e.workflows.clearHistory.rpc({})}},[]),x=(0,i.useCallback)(function(){null==l||l()},[l]),(0,y.useSetPaneBindings)(function(){return{commands:[{commands:[{match:h.matchLabel,data:{type:"action",label:"Clear History",icon:(0,r.jsx)(u.default,{}),run:function(){return x()}}}]}]}},[x]),(0,g.useCommandBinding)(function(){return[G.id,x]},[x]),b=(0,i.useCallback)(function(e){s.updateDotReplitPortsMapping(e,void 0)},[s]),{onClear:x,onDoExposePort:(0,i.useCallback)(function(e){s.tryExposingPortAutomatically(e)},[s]),onDontExposePort:b,ports:s,fs:o}),k=_.ports,S=_.onDontExposePort,C=_.onDoExposePort,j=_.onClear,T=w.performPaneOperation,E=(0,i.useCallback)(function(e){T({operation:"open",secondary:!1,pane:e})},[T]),R=(0,m.useSendAgentMessage)({openPane:E}),I=(0,i.useCallback)(function(e,r){return(0,t._)(function(){return(0,n._)(this,function(t){switch(t.label){case 0:return(0,c.track)(d.events.AGENT_USED,{action:"message_sent",message_content:e,message_source:"console"}),[4,R(e,r)];case 1:return t.sent(),[2]}})})()},[R]);return(0,r.jsx)(B,{ports:k,openPane:E,openAgentWithMessage:I,onClear:j,onDontExposePort:S,onDoExposePort:C})}var H={Content:function(e){var t=e.options;return(0,r.jsx)($,{options:t})},Icon:function(e){var t=e.size;return(0,r.jsx)(s.IconContext.Provider,{value:{color:F.tokens.yellowStrongest,size:t},children:(0,r.jsx)(l.default,{})})},getTitle:function(){return"Console"},description:"View the terminal output after running your code",category:x.PaneCategory.WorkspaceFeatures,decode:function(e){return o.Value.Decode(U,e)}};e.s(["clearOutputsHistoryCommand",()=>G,"runnerOutputUI",()=>H],782370)},200119,e=>{"use strict";var t=e.i(389959),n=e.i(82259),r=e.i(417120);function i(){var e=(0,r.useAgentState)().agentState;return(0,t.useMemo)(function(){return e?e.select(function(e){switch(null==e?void 0:e.state){case n.AgentRunState.AGENT_STATE_RUNNING:case n.AgentRunState.AGENT_STATE_PAUSING:return!0;default:return!1}}):null},[e])}e.s(["useAgentIsWorking",()=>i])},202266,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(119468),i=e.i(817556),a=e.i(878420),o=e.i(569384),s=e.i(973245),l=e.i(951262);function u(){var e=(0,o._)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return u=function(){return e},e}var c={},d=(0,s.gql)(u()),f=e.i(125674),p=e.i(507187),h=e.i(262206),m=e.i(932495);function g(){var e,r=(0,p.useEnvironment)(),o=(0,n._)((e=(0,a._)({},c,void 0),l.useMutation(d,e)),1)[0],s=(0,m.usePlatform)();return(0,f.default)(function(){return function(e){return(0,t._)(function(){var t,a,l,u,c,d,f,p,h;return(0,i._)(this,function(i){switch(i.label){case 0:t=[],a=!0,l=!1,u=void 0;try{for(c=e[Symbol.iterator]();!(a=(d=c.next()).done);a=!0)p=(f=(0,n._)(d.value,2))[0],h=f[1],t.push({commandId:p,keyCombo:h})}catch(e){l=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw u}}return[4,o({variables:{input:{environment:r,platform:s,keybindings:t}}})];case 1:return i.sent(),[2]}})})()}},[r,o,s])}function x(e){var t=new Map;if(!Array.isArray(e))return t;var n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value,u=function(e){if(e&&(void 0===e?"undefined":(0,r._)(e))==="object"&&"commandId"in e&&"string"==typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var t=(0,h.parseKeyChord)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}if("string"==typeof e.keyCombo){var n=(0,h.parseKeyCombination)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}return{commandId:e.commandId,keyCombo:null}}}(l);u&&t.set(u.commandId,u.keyCombo)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return t}e.s(["initKeybindings",()=>x,"useSaveKeybindings",()=>g],202266)},135211,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(276385),i=e.i(389959),a=e.i(223808),o=e.i(222342),s=e.i(858248),l=e.i(709485),u=e.i(529810),c=e.i(545453),d=e.i(102905),f=e.i(595974);function p(){var e=(0,u.default)(),r=(0,f.useValue)(f.actionQueueAtom),p=(0,f.useValue)(f.currentActionAtom),h=(0,f.useGet)(f.currentActionAtom),m=(0,f.useSet)(f.currentActionAtom),g=(0,f.useValue)(f.statusAtom),x=(0,f.useSetStatus)(),y=(0,f.useGetStatus)(),b=(0,f.useSetInstalledPackages)(),w=(0,f.useShiftActionQueue)(),_=(0,o.default)(),k=(0,c.usePackagerConfigs)().configs,S=(0,f.useAddErrors)();return(0,i.useEffect)(function(){if(0!==k.length){var t=[],n=!1,r=!0,i=!1,o=void 0;try{for(var s,l=k[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)!function(){var r=s.value,i=Promise.resolve(),o=y(r.id),l=(0,a.default)(function(){var t=y(r.id),a=h();if(t===f.PackagerStatus.Idle||(null==a?void 0:a.id)!==r.id){var o=(0,d.getPackager)(r.id);i=i.then(function(){if(!n)return o.getInstalledPackages({id:r.id,services:e}).then(function(e){n||(b(r.id,e),x(r.id,f.PackagerStatus.Idle))})})}},500);if(r.packagerFiles.length>0){var u=!0,c=!1,p=void 0;try{for(var m,g=r.packagerFiles[Symbol.iterator]();!(u=(m=g.next()).done);u=!0)!function(){var n=m.value;if(!n.endsWith("/")){var r=null!==o&&o!==f.PackagerStatus.Initializing&&o!==f.PackagerStatus.Uninitialized,i=e.fs.watchFilePath(n,{onChange:function(){if(!r){r=!0;return}l()}});t.push(i)}}()}catch(e){c=!0,p=e}finally{try{u||null==g.return||g.return()}finally{if(c)throw p}}}}()}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return function(){n=!0;var e=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(e=(a=o.next()).done);e=!0)(0,a.value)()}catch(e){r=!0,i=e}finally{try{e||null==o.return||o.return()}finally{if(r)throw i}}}}},[k,e.fs]),(0,i.useEffect)(function(){var r=!1;return(0,t._)(function(){var t,i,a,o,s,l;return(0,n._)(this,function(n){t=!0,i=!1,a=void 0;try{for(o=function(){var t=l.value,n=y(t.id);if(n&&n!==f.PackagerStatus.Uninitialized&&n!==f.PackagerStatus.Initializing)return"continue";x(t.id,f.PackagerStatus.Initializing),(0,d.getPackager)(t.id).getInstalledPackages({id:t.id,services:e}).then(function(e){r||(b(t.id,e),x(t.id,f.PackagerStatus.Idle))})},s=k[Symbol.iterator]();!(t=(l=s.next()).done);t=!0)o()}catch(e){i=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}return[2]})})(),function(){r=!0}},[k]),(0,i.useEffect)(function(){if(null===p&&0!==r.length){var e=r[0];y(e.id)===f.PackagerStatus.Idle&&w(e)}},[g,p,r]),(0,i.useEffect)(function(){if(null!==p){var r=!1;return(0,t._)(function(){var t,i,a,o,u,c,h,g,y,w,k,C,j,T,E,R,I,A;return(0,n._)(this,function(n){switch(n.label){case 0:switch(t=(0,d.getPackager)(p.id),p.kind){case f.PackagerActionKind.Install:return[3,1];case f.PackagerActionKind.Uninstall:return[3,6]}return[3,11];case 1:x(p.id,f.PackagerStatus.Installing),i=!0,a=!1,o=void 0;try{for(u=p.pkgs[Symbol.iterator]();!(i=(c=u.next()).done);i=!0)h=c.value,(0,s.track)(l.events.PACKAGE_MANAGER_USED,{action:"installed",packageId:h.name})}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}n.label=2;case 2:return n.trys.push([2,4,,5]),[4,t.install({id:p.id,pkgs:p.pkgs,services:e})];case 3:return n.sent(),1===p.pkgs.length?_.showNotice("Installed ".concat(null!=(g=p.pkgs[0].name)?g:"package")):_.showNotice("Installed ".concat(p.pkgs.length," packages")),[3,5];case 4:return n.sent(),1===p.pkgs.length?_.showError("Failed to install ".concat(null!=(y=p.pkgs[0].name)?y:"package")):_.showError("Failed to install ".concat(p.pkgs.length," packages")),S(p.id,p.pkgs),[3,5];case 5:return[3,11];case 6:x(p.id,f.PackagerStatus.Uninstalling),w=!0,k=!1,C=void 0;try{for(j=p.pkgs[Symbol.iterator]();!(w=(T=j.next()).done);w=!0)E=T.value,(0,s.track)(l.events.PACKAGE_MANAGER_USED,{action:"removed",packageId:E.name})}catch(e){k=!0,C=e}finally{try{w||null==j.return||j.return()}finally{if(k)throw C}}n.label=7;case 7:return n.trys.push([7,9,,10]),[4,t.uninstall({id:p.id,pkgs:p.pkgs,services:e})];case 8:return n.sent(),1===p.pkgs.length?_.showNotice("Removed ".concat(null!=(R=p.pkgs[0].name)?R:"package")):_.showNotice("Removed ".concat(p.pkgs.length," packages")),[3,10];case 9:return n.sent(),1===p.pkgs.length?_.showError("Failed to remove ".concat(null!=(I=p.pkgs[0].name)?I:"package")):_.showError("Failed to remove ".concat(p.pkgs.length," packages")),S(p.id,p.pkgs),[3,10];case 10:return[3,11];case 11:if(r)return[2];return[4,t.getInstalledPackages({id:p.id,services:e})];case 12:if(A=n.sent(),r)return[2];return b(p.id,A),x(p.id,f.PackagerStatus.Idle),m(null),[2]}})})(),function(){r=!0}}},[p]),null}function h(e){var t=e.children,n=(0,f.useInitStore)();return(0,r.jsxs)(f.GlobalPackagerContext.Provider,{value:n,children:[(0,r.jsx)(p,{}),t]})}e.s(["default",()=>h])},203594,e=>{"use strict";var t=e.i(530658),n=e.i(389959),r=e.i(903381),i=e.i(529810),a=e.i(341727);function o(){var e=(0,i.default)().fs,o=(0,t._)((0,n.useState)(!1),2),s=o[0],l=o[1],u=(0,a.default)(),c=u.didConnectOnce,d=u.didDisconnect;return((0,n.useEffect)(function(){return l(e.getStatus()===r.FsStatus.Syncing),e.onStatusChange(function(e){l(e===r.FsStatus.Syncing)})},[e]),c)?{isSaving:s,isOffline:d}:{isSaving:!1,isOffline:!1}}e.s(["default",()=>o])},545150,e=>{"use strict";e.i(148382);var t,n,r,i,a=e.i(715463),o=e.i(221453),s=e.i(389959),l=e.i(119468),u="data-focus-lock",c="data-focus-lock-disabled",d="data-no-focus-lock",f="data-autofocus-inside",p="data-no-autofocus";e.s(["FOCUS_ALLOW",()=>d,"FOCUS_AUTO",()=>f,"FOCUS_DISABLED",()=>c,"FOCUS_GROUP",()=>u,"FOCUS_NO_AUTOFOCUS",()=>p],300410);var h={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},m=function(e){var t=e.children;return s.createElement(s.Fragment,null,s.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:h}),t,t&&s.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:h}))};m.propTypes={},m.defaultProps={children:null};var g=e.i(364567);function x(e){return e}function y(e,t){void 0===t&&(t=x);var n=[],r=!1;return{read:function(){if(r)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var a=function(){var n=t;t=[],n.forEach(e)},o=function(){return Promise.resolve().then(a)};o(),n={push:function(e){t.push(e),o()},filter:function(e){return t=t.filter(e),n}}}}}function b(e,t){return void 0===t&&(t=x),y(e,t)}var w=b({},function(e){return{target:e.target,currentTarget:e.currentTarget}}),_=b(),k=b(),S=(t={async:!0},(n=y(null)).options=(0,g.__assign)({async:!0,ssr:!1},t),n),C=[],j=s.forwardRef(function(e,t){var n,r,i,a,d=s.useState(),f=d[0],p=d[1],m=s.useRef(),g=s.useRef(!1),x=s.useRef(null),y=e.children,b=e.disabled,k=e.noFocusGuards,j=e.persistentFocus,T=e.crossFrame,E=e.autoFocus,R=(e.allowTextSelection,e.group),I=e.className,A=e.whiteList,P=e.hasPositiveIndices,D=e.shards,O=e.as,N=e.lockProps,M=e.sideCar,L=e.returnFocus,B=e.focusOptions,V=e.onActivation,F=e.onDeactivation,U=s.useState({})[0],G=s.useCallback(function(){x.current=x.current||document&&document.activeElement,m.current&&V&&V(m.current),g.current=!0},[V]),$=s.useCallback(function(){g.current=!1,F&&F(m.current)},[F]);(0,s.useEffect)(function(){b||(x.current=null)},[]);var H=s.useCallback(function(e){var t=x.current;if(t&&t.focus){var n="function"==typeof L?L(t):L;if(n){var r=(void 0===n?"undefined":(0,l._)(n))==="object"?n:void 0;x.current=null,e?Promise.resolve().then(function(){return t.focus(r)}):t.focus(r)}}},[L]),z=s.useCallback(function(e){g.current&&w.useMedium(e)},[]),W=_.useMedium,q=s.useCallback(function(e){m.current!==e&&(m.current=e,p(e))},[]),K=(0,o.default)(((a={})[c]=b&&"disabled",a[u]=R,a),void 0===N?{}:N),Y=!0!==k,Q=Y&&"tail"!==k,X=(n=[t,q],r=function(e){return n.forEach(function(t){return"function"==typeof t?t(e):t&&(t.current=e),t})},(i=(0,s.useState)(function(){return{value:null,callback:r,facade:{get current(){return i.value},set current(value){var e=i.value;e!==value&&(i.value=value,i.callback(value,e))}}}})[0]).callback=r,i.facade);return s.createElement(s.Fragment,null,Y&&[s.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:b?-1:0,style:h}),P?s.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:b?-1:1,style:h}):null],!b&&s.createElement(M,{id:U,sideCar:S,observed:f,disabled:b,persistentFocus:j,crossFrame:T,autoFocus:E,whiteList:A,shards:void 0===D?C:D,onActivation:G,onDeactivation:$,returnFocus:H,focusOptions:B}),s.createElement(void 0===O?"div":O,(0,o.default)({ref:X},K,{className:I,onBlur:W,onFocus:z}),y),Q&&s.createElement("div",{"data-focus-guard":!0,tabIndex:b?-1:0,style:h}))});j.propTypes={},j.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var T=e.i(940879),E=e.i(675387);e.i(300410);var R=e.i(167626),I=function(e){for(var t=Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t},A=function(e){return Array.isArray(e)?e:[e]},P=function(e){return Array.isArray(e)?e[0]:e},D=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!!t&&!!t.getPropertyValue&&("none"===t.getPropertyValue("display")||"hidden"===t.getPropertyValue("visibility"))},O=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},N=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},M=function(e,t){var n,r=e.get(t);if(void 0!==r)return r;var i=(n=M.bind(void 0,e),!t||N(t)||!D(t)&&n(O(t)));return e.set(t,i),i},L=function(e,t){var n,r=e.get(t);if(void 0!==r)return r;var i=(n=L.bind(void 0,e),!t||!!N(t)||!!U(t)&&n(O(t)));return e.set(t,i),i},B=function(e){return e.dataset},V=function(e){return"INPUT"===e.tagName},F=function(e){return V(e)&&"radio"===e.type},U=function(e){return![!0,"true",""].includes(e.getAttribute(p))},G=function(e){var t;return!!(e&&(null==(t=B(e))?void 0:t.focusGuard))},$=function(e){return!G(e)},H=function(e){return!!e},z=function(e,t){var n=e.tabIndex-t.tabIndex,r=e.index-t.index;if(n){if(!e.tabIndex)return 1;if(!t.tabIndex)return -1}return n||r},W=function(e,t,n){return I(e).map(function(e,t){return{node:e,index:t,tabIndex:n&&-1===e.tabIndex?(e.dataset||{}).focusGuard?0:-1:e.tabIndex}}).filter(function(e){return!t||e.tabIndex>=0}).sort(z)},q="button:enabled,select:enabled,textarea:enabled,input:enabled,a[href],area[href],summary,iframe,object,embed,audio[controls],video[controls],[tabindex],[contenteditable],[autofocus]",K="".concat(q,", [data-focus-guard]"),Y=function(e,t){return I((e.shadowRoot||e).children).reduce(function(e,n){return e.concat(n.matches(t?K:q)?[n]:[],Y(n))},[])},Q=function(e,t){var n;return(0,R._)(e,HTMLIFrameElement)&&(null==(n=e.contentDocument)?void 0:n.body)?X([e.contentDocument.body],t):[e]},X=function(e,t){return e.reduce(function(e,n){var r,i=Y(n,t),a=(r=[]).concat.apply(r,i.map(function(e){return Q(e,t)}));return e.concat(a,n.parentNode?I(n.parentNode.querySelectorAll(q)).filter(function(e){return e===n}):[])},[])},Z=function(e,t){return I(e).filter(function(e){return M(t,e)}).filter(function(e){var t;return!((V(t=e)||"BUTTON"===t.tagName)&&("hidden"===t.type||t.disabled))})},J=function(e,t){return void 0===t&&(t=new Map),I(e).filter(function(e){return L(t,e)})},ee=function(e,t,n){return W(Z(X(e,n),t),!0,n)},et=function(e,t){return W(Z(X(e),t),!1)},en=function(e,t){return e.shadowRoot?en(e.shadowRoot,t):!!(void 0!==Object.getPrototypeOf(e).contains&&Object.getPrototypeOf(e).contains.call(e,t))||I(e.children).some(function(e){var n;if((0,R._)(e,HTMLIFrameElement)){var r=null==(n=e.contentDocument)?void 0:n.body;return!!r&&en(r,t)}return en(e,t)})},er=function(e){for(var t=new Set,n=e.length,r=0;r<n;r+=1)for(var i=r+1;i<n;i+=1){var a=e[r].compareDocumentPosition(e[i]);(a&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(i),(a&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(r)}return e.filter(function(e,n){return!t.has(n)})},ei=function(e){return e.parentNode?ei(e.parentNode):e},ea=function(e){return A(e).filter(Boolean).reduce(function(e,t){var n=t.getAttribute(u);return e.push.apply(e,n?er(I(ei(t).querySelectorAll("[".concat(u,'="').concat(n,'"]:not([').concat(c,'="disabled"])')))):[t]),e},[])},eo=function(e){try{return e()}catch(e){return}},es=function(e){if(void 0===e&&(e=document),e&&e.activeElement){var t=e.activeElement;return t.shadowRoot?es(t.shadowRoot):(0,R._)(t,HTMLIFrameElement)&&eo(function(){return t.contentWindow.document})?es(t.contentWindow.document):t}},el=function(e,t){return void 0===t&&(t=es(P(e).ownerDocument)),!!t&&(!t.dataset||!t.dataset.focusGuard)&&ea(e).some(function(e){var n;return en(e,t)||(n=t,!!I(e.querySelectorAll("iframe")).some(function(e){return e===n}))})},eu=function(e){void 0===e&&(e=document);var t=es(e);return!!t&&I(e.querySelectorAll("[".concat(d,"]"))).some(function(e){return en(e,t)})},ec=function(e,t){if(F(e)&&e.name)return t.filter(F).filter(function(t){return t.name===e.name}).filter(function(e){return e.checked})[0]||e;return e},ed=function(e){var t=new Set;return e.forEach(function(n){return t.add(ec(n,e))}),e.filter(function(e){return t.has(e)})},ef=function(e){return e[0]&&e.length>1?ec(e[0],e):e[0]},ep=function(e,t){return e.length>1?e.indexOf(ec(e[t],e)):t},eh="NEW_FOCUS",em=function(e,t,n,r){var i=e.length,a=e[0],o=e[i-1],s=G(n);if(!(n&&e.indexOf(n)>=0)){var l=void 0!==n?t.indexOf(n):-1,u=r?t.indexOf(r):l,c=r?e.indexOf(r):-1,d=l-u,f=t.indexOf(a),p=t.indexOf(o),h=ed(t),m=(void 0!==n?h.indexOf(n):-1)-(r?h.indexOf(r):l),g=ep(e,0),x=ep(e,i-1);if(-1===l||-1===c)return eh;if(!d&&c>=0)return c;if(l<=f&&s&&Math.abs(d)>1)return x;if(l>=p&&s&&Math.abs(d)>1)return g;if(d&&Math.abs(m)>1)return c;if(l<=f)return x;if(l>p)return g;if(d)return Math.abs(d)>1?c:(i+c+d)%i}},eg=function(e,t,n){var r=J(e.map(function(e){return e.node}).filter(function(e){var t,r=null==(t=B(e))?void 0:t.autofocus;return e.autofocus||void 0!==r&&"false"!==r||n.indexOf(e)>=0}));return r&&r.length?ef(r):ef(J(t))},ev=function(e,t){return void 0===t&&(t=[]),t.push(e),e.parentNode&&ev(e.parentNode.host||e.parentNode,t),t},ex=function(e,t){for(var n=ev(e),r=ev(t),i=0;i<n.length;i+=1){var a=n[i];if(r.indexOf(a)>=0)return a}return!1},ey=function(e,t,n){var r=A(e),i=A(t),a=r[0],o=!1;return i.filter(Boolean).forEach(function(e){o=ex(o||e,e)||o,n.filter(Boolean).forEach(function(e){var t=ex(a,e);t&&(o=!o||en(t,o)?t:ex(t,o))})}),o},eb=function(e,t){var n=new Map;return t.forEach(function(e){return n.set(e.node,e)}),e.map(function(e){return n.get(e)}).filter(H)},ew=function(e,t){var n=es(A(e).length>0?document:P(e).ownerDocument),r=ea(e).filter($),i=ey(n||e,e,r),a=new Map,o=et(r,a),s=ee(r,a).filter(function(e){return $(e.node)});if(s[0]||(s=o)[0]){var l=et([i],a).map(function(e){return e.node}),u=eb(l,s),c=u.map(function(e){return e.node}),d=em(c,l,n,t);if(d===eh){var p=eg(o,c,r.reduce(function(e,t){var n,r;return e.concat((n=t,r=a,Z(I(n.querySelectorAll("[".concat(f,"]"))).map(function(e){return X([e])}).reduce(function(e,t){return e.concat(t)},[]),r)))},[]));return p?{node:p}:void console.warn("focus-lock: cannot find any node to move focus into")}return void 0===d?d:u[d]}},e_=function(e){var t=ea(e).filter($),n=ey(e,e,t),r=new Map,i=ee([n],r,!0),a=ee(t,r).filter(function(e){return $(e.node)}).map(function(e){return e.node});return i.map(function(e){var t=e.node;return{node:t,index:e.index,lockItem:a.indexOf(t)>=0,guard:G(t)}})},ek=function(e,t){"focus"in e&&e.focus(t),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus()},eS=0,eC=!1;let ej=function(e,t,n){void 0===n&&(n={});var r=ew(e,t);if(!eC&&r){if(eS>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),eC=!0,setTimeout(function(){eC=!1},1);return}eS++,ek(r.node,n.focusOptions),eS--}};function eT(e){var t=window.setImmediate;void 0!==t?t(e):setTimeout(e,1)}var eE=null,eR=null,eI=null,eA=!1,eP=function(e,t){eI={observerNode:e,portaledElement:t}};function eD(e,t,n,r){var i=null,a=e;do{var o=r[a];if(o.guard)o.node.dataset.focusAutoGuard&&(i=o);else if(o.lockItem){if(a!==e)return;i=null}else break}while((a+=n)!==t)i&&(i.node.tabIndex=0)}var eO=function(e){return e&&"current"in e?e.current:e},eN=function(){var e=!1;if(eE){var t=eE,n=t.observed,r=t.persistentFocus,i=t.autoFocus,a=t.shards,o=t.crossFrame,s=t.focusOptions,l=n||eI&&eI.portaledElement,u=document&&document.activeElement;if(l){var c=[l].concat(a.map(eO).filter(Boolean));if((!u||(eE.whiteList||function(){return!0})(u))&&(r||(o?!!eA:"meanwhile"===eA)||!(document&&document.activeElement===document.body||eu())||!eR&&i)&&(l&&!(el(c)||u&&c.some(function(e){return function e(t,n,r){return n&&(n.host===t&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&e(t,n.parentNode,r))}(u,e,e)})||eI&&eI.portaledElement===u)&&(document&&!eR&&u&&!i?(u.blur&&u.blur(),document.body.focus()):(e=ej(c,eR,{focusOptions:s}),eI={})),eA=!1,eR=document&&document.activeElement),document){var d=document&&document.activeElement,f=e_(c),p=f.map(function(e){return e.node}).indexOf(d);p>-1&&(f.filter(function(e){var t=e.guard,n=e.node;return t&&n.dataset.focusAutoGuard}).forEach(function(e){return e.node.removeAttribute("tabIndex")}),eD(p,f.length,1,f),eD(p,-1,-1,f))}}}return e},eM=function(e){eN()&&e&&(e.stopPropagation(),e.preventDefault())},eL=function(){return eT(eN)},eB=function(){eA="just",setTimeout(function(){eA="meanwhile"},0)},eV=function(){document.addEventListener("focusin",eM),document.addEventListener("focusout",eL),window.addEventListener("blur",eB)},eF=function(){document.removeEventListener("focusin",eM),document.removeEventListener("focusout",eL),window.removeEventListener("blur",eB)};w.assignSyncMedium(function(e){var t=e.target,n=e.currentTarget;n.contains(t)||eP(n,t)}),_.assignMedium(eL),k.assignMedium(function(e){return e({moveFocusInside:ej,focusInside:el})});let eU=(r=function(e){return e.filter(function(e){return!e.disabled})},i=function(e){var t=e.slice(-1)[0];t&&!eE&&eV();var n=eE,r=n&&t&&t.id===n.id;eE=t,n&&!r&&(n.onDeactivation(),e.filter(function(e){return e.id===n.id}).length||n.returnFocus(!t)),t?(eR=null,r&&n.observed===t.observed||t.onActivation(),eN(!0),eT(eN)):(eF(),eR=null)},function(e){var t,n=[];function a(){i(t=r(n.map(function(e){return e.props})))}var o=function(r){function i(){return r.apply(this,arguments)||this}(0,T.default)(i,r),i.peek=function(){return t};var o=i.prototype;return o.componentDidMount=function(){n.push(this),a()},o.componentDidUpdate=function(){a()},o.componentWillUnmount=function(){var e=n.indexOf(this);n.splice(e,1),a()},o.render=function(){return s.default.createElement(e,this.props)},i}(s.PureComponent);return(0,E.default)(o,"displayName","SideEffect("+(e.displayName||e.name||"Component")+")"),o})(function(){return null});var eG=s.forwardRef(function(e,t){return s.createElement(j,(0,o.default)({sideCar:eU,ref:t},e))}),e$=j.propTypes||{};e$.sideCar,(0,a.default)(e$,["sideCar"]),eG.propTypes={},e.s(["default",0,eG],545150)},689100,(e,t,n)=>{var r=e.r(954546),i=e.r(769627),a=e.r(790951),o=e.r(308145),s=o.safeRe,l=o.t;t.exports=function(e,t){if(r._(e,i))return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;var n,o=null;if((t=t||{}).rtl){for(;(n=s[l.COERCERTL].exec(e))&&(!o||o.index+o[0].length!==e.length);)o&&n.index+n[0].length===o.index+o[0].length||(o=n),s[l.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;s[l.COERCERTL].lastIndex=-1}else o=e.match(s[l.COERCE]);return null===o?null:a("".concat(o[2],".").concat(o[3]||"0",".").concat(o[4]||"0"),t)}},368242,195680,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(485273),a=e.i(389959),o=e.i(830675),s=e.i(368964),l=e.i(834966),u=e.i(82259),c=e.i(19004),d=e.i(391444),f=e.i(968783),p=e.i(222342),h=e.i(207237),m=e.i(664152),g=e.i(956111),x=e.i(858248),y=e.i(709485),b=e.i(608738),w=e.i(529810),_=e.i(112942),k=e.i(45442),S=e.i(541793),C=e.i(161322),j=(0,S.atom)(null);function T(){return(0,C.useSetAtom)(j)}function E(){return(0,C.useAtomValue)(j)}function R(e){var t=e.toLowerCase();return t.includes("github.com")?"github":t.includes("bitbucket.org")?"bitbucket":t.includes("gitlab.com")?"gitlab":null}e.s(["getGitProviderFromUrl",()=>R,"useGitProviderImportMode",()=>E,"useSetGitProviderImportMode",()=>T],195680);var I=e.i(993796),A=e.i(689100);e.i(759130);var P=e.i(214007),D=e.i(483776),O={14:"nodejs-14",16:"nodejs-16",18:"nodejs-18",19:"nodejs-19",20:"nodejs-20"},N={bash:"bash",basic:"qbasic",nix:"nix",clojure:"clojure-1.11","c++":"cpp-clang14",c:"c-clang14","c#":"dotnet-7.0",dart:"dart-3.3",deno:"deno-1",elixir:"elixir-1_15","f#":"dotnet-7.0",go:"go-1.21",haskell:"haskell-ghc9.4",html:"web",css:"web",shell:"bash",java:"java-graalvm22.3",lua:"lua-5.2",nodejs:"nodejs-20",php:"php-8.2",python:{"3.8":"python-3.8","3.10":"python-3.10","3.11":"python-3.11","3.12":"python-3.12"},r:"r-4.3",rust:"rust-stable",ruby:"ruby-3.2",swift:"swift-5.8",typescript:O,javascript:O,vue:{18:"vue-node-18",20:"vue-node-20"}};function M(e,t){if(void 0===e)return!1;if(void 0===t)return!0;var n=(0,A.default)(e);if(null===n)return!1;var r=(0,A.default)(t);return null===r||(0,D.default)(n,r)}var L=e.i(394212),B=e.i(119468),V=e.i(825118),F=e.i(257982),U=e.i(240913),G=e.i(927158),$={preparingRepl:"Preparing workspace",gitInit:"Initializing git repository",gitRemoteAdd:"Connecting to remote",checkoutBranch:"Checking out branch",tidyingFiles:"Tidying up files",done:"Import complete"};function H(e){return!!e&&(void 0===e?"undefined":(0,B._)(e))==="object"&&"string"==typeof e.code&&"string"==typeof e.message}function z(e){switch(e.code){case V.GitErrors.UNEXPECTED_DISCONNECT:case V.GitErrors.CHANNEL_CLOSED:case V.GitErrors.TIMEOUT:return"Connection lost. Please try again.";case V.GitErrors.UNAUTHENTICATED:case V.GitErrors.UNKNOWN_REMOTE:return"Could not access repository. Please check your repository and try again.";case V.GitErrors.UNKNOWN_REF:case V.GitErrors.INVALID_REFERENCE:return"Branch not found. Please check your repository and try again.";case V.GitErrors.NO_COMMITS:return"Repository is empty. Please check your repository and try again.";case V.GitErrors.PROTECTED_BRANCH:return"Branch is protected. Please check your repository and try again.";case V.GitErrors.INDEX_LOCKED:case V.GitErrors.CONFIG_LOCKED:case V.GitErrors.INDEX_FILE_CORRUPT:case V.GitErrors.DIRTY_WORKTREE:case V.GitErrors.INVALID_STATE:throw Error("Repository is in an invalid state: ".concat(e.code," - ").concat(e.message));case V.GitErrors.NOT_INITIALIZED:case V.GitErrors.PATH_MATCHED_NO_FILES:case V.GitErrors.USER_NOT_CONFIGURED:case V.GitErrors.BRANCH_ALREADY_EXISTS:case V.GitErrors.MERGE_CONFLICT:case V.GitErrors.UPSTREAM_NOT_SET:case V.GitErrors.HEAD_DETACHED:case V.GitErrors.PUSH_REJECTED:case V.GitErrors.REMOTE_ALREADY_EXISTS:case V.GitErrors.ALREADY_INITIALIZED:case V.GitErrors.NOTE_SUCCESSFULLY_REMOVED:case V.GitErrors.OBJECT_HAS_NO_NOTE:case V.GitErrors.OBJECT_ALREADY_HAS_NOTE:case V.GitErrors.NOTE_SUCCESSFULLY_OVERWRITTEN:case V.GitErrors.PRE_COMMIT_HOOK_FAILED:throw Error("Unexpected git error during import: ".concat(e.code," - ").concat(e.message));case V.GitErrors.UNKNOWN:case V.GitErrors.UNKNOWN_NOT_GIT:throw Error(e.message||"Unknown error occurred: ".concat(e.code));default:(0,F.default)(e.code)}}var W=e.i(468095),q=e.i(878420),K=e.i(569384),Y=e.i(973245);e.i(304277);var Q=e.i(566901);function X(){var e=(0,K._)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return X=function(){return e},e}var Z={},J=(0,Y.gql)(X()),ee=function(e,t){return{op:"add",path:e,value:JSON.stringify(t)}},et=new Map([["hintsList","hints"]]);function en(e){var S,C,j,T,E,D,O,V,F,K,Y,X,en,er,ei,ea,eo,es,el,eu,ec,ed,ef,ep,eh,em,eg,ev,ex,ey=e.setConfigScreenLockIsOpen,eb=e.openPane,ew=e.onStatusChange,e_=(0,i.useRouter)(),ek=(0,h.default)(),eS=(0,n._)((0,l.useWorkspaceDoGitProviderImportFlowFinishCloneMutation)(),2),eC=eS[0],ej=eS[1],eT=(0,n._)((0,a.useState)(null),2),eE=eT[0],eR=eT[1],eI=(0,w.default)(),eA=eI.fs,eP=eI.dotReplit,eD=(0,p.default)().showError,eO=(ec=(eu=(0,w.default)()).dotReplit,ed=eu.nixService,ef=(0,h.default)(),eh=(0,n._)((ep=(0,q._)({},Z,void 0),Q.useLazyQuery(J,ep)),1)[0],eg=(em=(0,p.default)()).showWarning,ev=em.showError,(0,a.useCallback)(function(e){return(0,t._)(function(){var i,a,o,s,l,u,c,d,f,p,h,g;return(0,r._)(this,function(x){switch(x.label){case 0:return[4,ec.getConfig()];case 1:if(!(a=x.sent().config)||(null==(i=a.modules)?void 0:i.length))return[2];return[4,eh({variables:{replId:ef}})];case 2:if(!(null==(s=(null==(o=x.sent().data)?void 0:o.getRepl.__typename)==="Repl"?o.getRepl:null)?void 0:s.rootOriginReplUrl))return[2];try{l=(0,P.parse)(e.toString())}catch(e){return ev("Failed to parse template .replit file"),m.logger.error("GitHub Import: Failed to parse template .replit file"),[2]}if(!l)return[2];return[4,function(e){return(0,t._)(function(e){var i,a,o,s,l,u,c,d,f,p,h,m,g,x,y;function b(){return(0,t._)(function(){var e,t,n;return(0,r._)(this,function(r){switch(r.label){case 0:if(!(e="object"===(0,B._)(o.env)?o.env:null)||0===Object.keys(e).length)return[2];return n=(t="object"===(0,B._)(s.env)?s.env:null)?(0,q._)({},e,t):e,[4,i.updateDotReplit([ee("env",n)])];case 1:return r.sent(),[2]}})})()}function w(){return(0,t._)(function(){var e,t,n,l;return(0,r._)(this,function(r){switch(r.label){case 0:if(null==(e=s.nix)?void 0:e.channel)return[2];if(null==o||null==(t=o.nix)?void 0:t.channel)return[3,2];return[4,a.getLatestStableChannel()];case 1:if(!(l=r.sent()).channel)return[2];return n=l.channel,[3,3];case 2:n=o.nix.channel,r.label=3;case 3:return[4,i.updateDotReplit([ee("nix/channel",n)])];case 4:return r.sent(),[2]}})})()}return(0,r._)(this,function(_){switch(_.label){case 0:i=e.dotReplit,a=e.nixService,o=e.templateConfig,s=e.config,l=[],u={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:w,env:b,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config",rules:"rules config",suggestions:"suggestions config",objectStorage:"object storage config",autoSave:"autosave config"},c=[],d=!0,f=!1,p=void 0;try{for(h=Object.entries(u)[Symbol.iterator]();!(d=(m=h.next()).done);d=!0)x=(g=(0,n._)(m.value,2))[0],y=g[1],null!==y&&("function"==typeof y?c.push(y()):c.push(function(e){return(0,t._)(function(){var t,n,a,l,u;return(0,r._)(this,function(r){switch(r.label){case 0:if(n=!!(t=s[e]),Array.isArray(t)?n=t.length>0:t&&(void 0===t?"undefined":(0,B._)(t))==="object"&&(n=Object.keys(t).length>0),l=null!=(a=et.get(e))?a:e,n||!o[l])return[2];return u=ee(l,o[l]),[4,i.updateDotReplit([u])];case 1:return r.sent(),[2]}})})()}(x)))}catch(e){f=!0,p=e}finally{try{d||null==h.return||h.return()}finally{if(f)throw p}}return[4,Promise.all(c)];case 1:return _.sent(),[2,l]}})}).apply(this,arguments)}({nixService:ed,dotReplit:ec,config:a,templateConfig:l})];case 3:u=x.sent(),c=!0,d=!1,f=void 0;try{for(p=u[Symbol.iterator]();!(c=(h=p.next()).done);c=!0)g=h.value,eg(g,1e3)}catch(e){d=!0,f=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw f}}return[2]}})})()},[ef,eg,ev,ec,ed,eh])),eN=(ex=(0,g.useQueryParam)("importBranch","string"))?decodeURIComponent(ex):null,eM=(0,b.default)(),eL=(0,f.useCurrentUserStoredOrgContext)().orgId,eB=(0,k.useAgentSettings)().settings,eV=(0,l.useWorkspaceDoGitProviderImportFlowQuery)({variables:{replId:ek}}).data,eF=(S=eV,F=(0,b.default)(),Y=(K=(0,w.default)()).fs,X=K.dotReplit,en=(0,I.useFlag)({controlName:"flag-agent-everywhere"}),ei=(er=(null==S?void 0:S.getRepl.__typename)==="Repl"?S.getRepl.config.gitRemoteUrl:void 0)?(C=er.toLowerCase()).includes("github.com")?"github":C.includes("bitbucket.org")?"bitbucket":"unknown":"unknown",ea=(0,l.useGitHubImportGetTopLanguagesQuery)({skip:"github"!==ei||!F,variables:"github"===ei&&er?{input:{githubRepoUrl:er}}:void 0}).data,eo=(0,l.useBitbucketImportGetTopLanguagesQuery)({skip:"bitbucket"!==ei||!F,variables:"bitbucket"===ei&&er?{input:{bitbucketRepoUrl:er}}:void 0}).data,es=(null==ea?void 0:ea.githubRepoInfo.__typename)==="GitHubRepoInfoOutput"?ea.githubRepoInfo:null,el=(null==eo?void 0:eo.bitbucketRepoInfo.__typename)==="BitbucketRepoInfoOutput"?eo.bitbucketRepoInfo:null,"github"===ei&&es?(j=null!=(E=es.topLanguages)?E:void 0,T=null!=(D=es.repositorySource)?D:void 0):"bitbucket"===ei&&el&&(j=null!=(O=el.topLanguages)?O:void 0,T=null!=(V=el.repositorySource)?V:void 0),{addRecommendedModules:(0,a.useCallback)(function(){return(0,t._)(function(){var e,t,i,a,o,l;return(0,r._)(this,function(r){switch(r.label){case 0:if(!(j&&F))return[3,4];return e=j.map(function(e){return{language:e}}),[4,Y.readFile("package.json")];case 1:return"content"in(t=r.sent())&&(i=function(e){var t,n,r=null;try{n=JSON.parse(e)}catch(e){return null}if(null==(t=n.engines)?void 0:t.node){var i=(0,A.default)(n.engines.node);i&&(r="".concat(i.major))}return r}(t.content.toString()))&&(e.push({language:"javascript",version:i}),j.includes("Vue")&&e.push({language:"vue",version:i})),[4,Y.readFile("pyproject.toml")];case 2:return"content"in(t=r.sent())&&(a=function(e){var t,n,r,i,a,o=null;try{a=(0,P.parse)(e)}catch(e){return null}var s=(null==(r=a.tool)||null==(n=r.poetry)||null==(t=n.dependencies)?void 0:t.python)||(null==(i=a.project)?void 0:i["requires-python"]);if(s){var l=(0,A.default)(s);l&&(o="".concat(l.major,".").concat(l.minor))}return o}(t.content.toString()))&&e.push({language:"python",version:a}),o=function(e,t){var r=new Map,i=!0,a=!1,o=void 0;try{for(var s,l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,d=N[c.language.toLowerCase()];if(d){var f=r.get(d);(!f||M(c.version,f.version))&&r.set(d,c)}}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var p=new Map;null==(s=t.fullModules)||s.forEach(function(e){(null==e?void 0:e.id)&&p.set(e.id,e)});var h=new Set,m=!0,g=!1,x=void 0;try{for(var y,b=r.entries()[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var w=(0,n._)(y.value,2),_=w[0],k=w[1];if("string"==typeof _){var S=p.get(_);S&&h.add(S)}else{var C=k.version;if(!C||!_[C]){var j=Object.keys(_);j.sort(function(e,t){return M(e,t)?-1:1}),C=j[0]}var T=_[C],E=p.get(T);E&&h.add(E)}}}catch(e){g=!0,x=e}finally{try{m||null==b.return||b.return()}finally{if(g)throw x}}return Array.from(h)}(e,F),l=[{op:"add",path:"nix/channel",value:'"stable-25_05"'}],o.length>0?(m.logger.info("Git Provider Import: recommended modules:",Object.fromEntries(o.map(function(e){return[e.id,e.name]}))),l.push({op:"add",path:"modules",value:JSON.stringify(o.map(function(e){return e.id}))})):m.logger.warn("Git Provider Import: no recommended modules found"),(T===s.RepositorySource.Github||T===s.RepositorySource.Bitbucket)&&en&&l.push({op:"add",path:"agent/expertMode",value:"true"}),[4,X.updateDotReplit(l)];case 3:r.sent(),r.label=4;case 4:return[2]}})})()},[X,Y,F,j,T,en]),topLanguages:j,repositorySource:T}),eU=eF.addRecommendedModules,eG=eF.topLanguages,e$=eF.repositorySource;(0,a.useEffect)(function(){eE&&eD("Failed to finish importing from "+(e$===s.RepositorySource.Bitbucket?"Bitbucket":"GitHub")+" - "+eE)},[eE,eD,e$]),(0,a.useEffect)(function(){ej.error&&eD("Failed to finish importing from "+(e$===s.RepositorySource.Bitbucket?"Bitbucket":"GitHub")+" - "+ej.error)},[ej.error,eD,e$]);var eH=(0,W.useSendAgentMessage)({openPane:eb}),ez=(null==eV?void 0:eV.getRepl.__typename)==="Repl"?eV.getRepl.config.gitRemoteUrl:null,eW=ez?R(ez):null,eq=function(e){eR(e),null==ew||ew({status:"error",errorMessage:e}),ey(!1)},eK=(0,n._)((0,a.useState)(!1),2),eY=eK[0],eQ=eK[1];function eX(){return eA.readFile(c.dotReplitPath)}(0,a.useEffect)(function(){eM&&eV&&"Repl"===eV.getRepl.__typename&&eG&&eQ(!0)},[eV,eM,eY,eG]),(0,a.useEffect)(function(){eY&&(0,t._)(function(){var e,t,n,i,a,l;return(0,r._)(this,function(r){switch(r.label){case 0:if(!eV||"Repl"!==eV.getRepl.__typename||(e=eV.getRepl,t=eV.currentUser,"Repl"!==e.__typename||!t||"CurrentUser"!==t.__typename)||(n=e.config.isAgentRepl||e$!==s.RepositorySource.Vercel?e$:s.RepositorySource.Github,!(i=e.config.gitRemoteUrl)||!e.config.doClone||!eG))return[2];r.label=1;case 1:return r.trys.push([1,3,4,5]),ey(!0),null==ew||ew({status:"in_progress",text:"Importing"}),[4,eJ({remote:i,finalRepositorySource:n})];case 2:if(!(a=r.sent())||!a.success)return eq((null==a?void 0:a.errorMessage)||"Unknown error occurred. Please check your repository and try again."),[2];return(0,x.track)(y.events.NIX_GH_IMPORT_USED,{action:d.NixGHImportUsedEvents.ImportEnded,replId:e.id,orgContext:(0,f.getOrgTrackingContext)(eL?{id:eL}:void 0),repositorySource:n}),null==ew||ew({status:"success"}),[3,5];case 3:return l=r.sent(),m.logger.error("GitHub Import: Failed to do GitHub import flow",{originalError:String(l),query:JSON.stringify(e_.query),githubRepo:i}),o.captureException(l,{extra:{query:JSON.stringify(e_.query),githubRepo:i}}),eq(String(l)),[3,5];case 4:return ey(!1),[7];case 5:return[2]}})})()},[eY]);var eZ=(0,G.usePid2Callback)(function(e){return function(n){var i=n.remote,a=n.checkoutBranch,o=n.onProgress;return(0,t._)(function(){var t,n,s,l,u,c,d,f,p,h,g,x,y,b;return(0,r._)(this,function(r){switch(r.label){case 0:return m.logger.info("Starting PID2 GitHub import flow"),[4,e.git.importFromGitRemote.rpc({cwd:U.ROOT_PATH,remoteUrl:i,checkoutBranch:null!=a?a:void 0})];case 1:if(!(t=r.sent()).ok){if(!H(n=t.payload))throw Error("Unexpected error initializing import: ".concat(n.code," - ").concat(n.message));return[2,{success:!1,errorMessage:z(n)}]}s=e.git.importFromGitRemoteStatus.subscribe({}).resReadable,l=!1,u=!1,c=!1,r.label=2;case 2:r.trys.push([2,7,8,13]),f=(0,L._)(s),r.label=3;case 3:return[4,f.next()];case 4:if(!(u=!(p=r.sent()).done))return[3,6];if(!(h=p.value).ok){if(m.logger.error("PID2 import error",{pid2ImportError:h.payload}),!H(g=h.payload))throw Error(g.message);return[2,{success:!1,errorMessage:z(g)}]}if(y=function(e){var t=$[e];if(void 0===t)throw Error("Unknown import state: ".concat(e));return t}(x=h.payload.state),null==o||o(y),"done"===x)return m.logger.info("Received done state, completing"),l=!0,[3,6];r.label=5;case 5:return u=!1,[3,3];case 6:return[3,13];case 7:return b=r.sent(),c=!0,d=b,[3,13];case 8:if(r.trys.push([8,,11,12]),!(u&&null!=f.return))return[3,10];return[4,f.return()];case 9:r.sent(),r.label=10;case 10:return[3,12];case 11:if(c)throw d;return[7];case 12:return[7];case 13:if(!l)return[2,{success:!1,errorMessage:"Connection lost. Please try again."}];return m.logger.info("PID2 import completed successfully"),[2,{success:!0}]}})})()}}),eJ=function(e){var n=e.remote,i=e.finalRepositorySource;return(0,t._)(function(){var e,t,a,o;return(0,r._)(this,function(r){switch(r.label){case 0:if(!eM||!(eV&&"Repl"===eV.getRepl.__typename))return[2];return m.logger.info("GitHub Import: Starting client-side GitHub import flow"),[4,eX()];case 1:if(e=r.sent(),!eZ)return[2,{success:!1,errorMessage:"GitHub import flow not available"}];return[4,eZ({remote:n,checkoutBranch:eN,onProgress:function(e){null==ew||ew({status:"in_progress",text:e})}})];case 2:if(!(t=r.sent()).success)return[2,t];if(m.logger.info("GitHub Import: Cloned repo into Repl"),"NOT_FOUND"!==e.error)return[3,5];return[4,eP.updateDotReplit([])];case 3:return r.sent(),[4,eX()];case 4:e=r.sent(),r.label=5;case 5:if("content"in e)return[3,6];return m.logger.error("GitHub Import: Skipping patching dotReplit because templateDotReplit was an error",{readError:String(e.error)}),[3,11];case 6:return[4,eX()];case 7:return a=r.sent(),o=""!==e.content.toString()&&"content"in a&&a.content.toString()!==e.content.toString(),[4,eO(e.content)];case 8:if(r.sent(),m.logger.info("GitHub Import: Patched dotreplit"),!o)return[3,9];return m.logger.info("GitHub Import: Repo has .replit",{githubURL:n}),[3,11];case 9:return[4,eU()];case 10:r.sent(),m.logger.info("GitHub Import: Added recommended modules"),r.label=11;case 11:return[4,eC({variables:{input:{id:ek,doClone:!1}}})];case 12:if(r.sent(),m.logger.info("GitHub Import: Disabled doClone on Repl."),!eN)return[3,14];return[4,eA.persist()];case 13:r.sent(),(0,g.updatePathWithQueryParams)({router:e_,params:[{mode:"delete",key:"importBranch"}]}),r.label=14;case 14:return m.logger.info("GitHub Import: Repository source is agent supported source",{repositorySource:i}),[4,eH({kind:"setupImportedProject",importSource:function(e){if(!e)return u.ProjectImportSource.PROJECT_IMPORT_SOURCE_UNKNOWN;switch(e){case s.RepositorySource.Github:return u.ProjectImportSource.PROJECT_IMPORT_SOURCE_OTHER_GITHUB;case s.RepositorySource.Lovable:return u.ProjectImportSource.PROJECT_IMPORT_SOURCE_LOVABLE;case s.RepositorySource.Bolt:return u.ProjectImportSource.PROJECT_IMPORT_SOURCE_BOLT;case s.RepositorySource.Vercel:return u.ProjectImportSource.PROJECT_IMPORT_SOURCE_VERCEL;case s.RepositorySource.ReplitAgent:return u.ProjectImportSource.PROJECT_IMPORT_SOURCE_REPLIT;case s.RepositorySource.Bitbucket:return u.ProjectImportSource.PROJECT_IMPORT_SOURCE_BITBUCKET;default:return u.ProjectImportSource.PROJECT_IMPORT_SOURCE_UNKNOWN}}(i),agentConfig:(0,_.convertAgentSettingsFromGQLToAiChat)(eB)},{createNewSession:!0})];case 15:return r.sent(),[2,{success:!0}]}})})()};return{detectedGitProvider:eW}}e.s(["useDoGitProviderImportFlow",()=>en],368242)},119322,e=>{"use strict";var t=e.i(276385),n=e.i(545150),r=e.i(446530),i=e.i(613355),a=e.i(660614),o=e.i(399144),s=e.i(960178),l=e.i(625484),u=(0,r.cssRecord)({overlay:[i.rcss.position.fixed,i.rcss.flex.row,i.rcss.align.center,i.rcss.justify.center,i.rcss.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:i.DefaultModalZIndex+1,cursor:"not-allowed"}],animationWrapper:[i.rcss.center,i.rcss.minWidth(225),i.rcss.height(225),i.rcss.p(16),i.rcss.color.foregroundDefault,i.rcss.borderRadius(8),i.rcss.backgroundColor.backgroundOverlay,i.rcss.zIndex(i.DefaultModalZIndex+1),{cursor:"not-allowed"}],lockText:i.rcss.mt(32)});function c(e){var r=e.reason;return(0,t.jsx)(o.Portal,{children:(0,t.jsx)(l.View,{css:u.overlay,children:(0,t.jsx)(n.default,{children:(0,t.jsxs)(l.View,{css:u.animationWrapper,tabIndex:-1,children:[(0,t.jsx)(a.default,{height:80}),(0,t.jsx)(s.Text,{multiline:!1,variant:"subheadBig",css:u.lockText,dataCy:"lock-screen",children:r})]})})})})}e.s(["default",()=>c])},188019,e=>{"use strict";var t=e.i(276385),n=e.i(269848),r=e.i(993796);e.i(653863);var i=e.i(973519),a=e.i(97207),o=e.i(330069),s=e.i(423111),l=e.i(173703),u=e.i(624782),c=e.i(719976);function d(e){var n=e.session,u=(0,i.useGlobalModal)().show,d=(0,a.useSendConvertMockupToAppResponse)(null!=n?n:null),p=(0,s.useInProgressMockupToAppGraduation)(),h=(0,r.useFlag)({controlName:"flag-free-plan",default:!1}),m=(0,o.useShouldSeeFreemiumExperience)().shouldSeeFreemiumExperience,g=h&&m;return p?(0,t.jsx)(f,{}):(0,t.jsx)(l.ShadesSurface,{colorShade:"notice",br:"default",children:(0,t.jsx)(c.PillButton,{colorway:"blue",variant:"muted",text:"Design",compact:!0,onClick:function(e){e.stopPropagation(),u("MockupToAppModal",{onSendConvertMockupToAppResponse:d,origin:"header",shouldShowUpsell:g})}})})}function f(){return(0,t.jsx)(u.Pill,{iconRight:(0,t.jsx)(n.default,{}),colorway:"primary",variant:"outline",text:"Converting to App"})}e.s(["DesignMockupPill",()=>d])},659790,394492,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(276385),a=e.i(389959),o=e.i(625251),s=e.i(878420),l=e.i(569384),u=e.i(973245);e.i(304277);var c=e.i(566901);function d(){var e=(0,l._)(["\n  query AiSessionDebugInfoCurrentUser($replId: String!) {\n    currentUser {\n      id\n      username\n    }\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        url\n        inviteUrl\n      }\n    }\n  }\n"]);return d=function(){return e},e}var f={},p=(0,u.gql)(d());e.i(877212);var h=e.i(805763),m=e.i(612054),g=e.i(58261),x=e.i(222342),y=e.i(207237);function b(e,n){return(0,t._)(function(){var t;return(0,r._)(this,function(r){switch(r.label){case 0:if(!window.navigator.clipboard)return w(n||e),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),t=new ClipboardItem({"text/html":new Blob([e],{type:"text/html"}),"text/plain":new Blob([n||e],{type:"text/plain"})}),[4,window.navigator.clipboard.write([t])];case 2:return r.sent(),[3,4];case 3:return r.sent(),w(n||e),[3,4];case 4:return[2]}})})()}function w(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t);try{t.focus(),t.select(),document.execCommand("copy")}finally{document.body.removeChild(t)}}function _(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}e.s(["default",()=>b],394492);var k=e.i(480028),S=e.i(136540),C=e.i(119274);function j(e){var n=e.sessionId,a=e.sessionType,s=e.size,l=(0,y.default)(),u=(0,x.default)().showConfirm,c=T();return(0,i.jsx)(C.PopupMenu,{trigger:(0,i.jsx)(S.IconButton,{size:s,alt:"[Staff] Debug tools",children:(0,i.jsx)(m.default,{color:k.tokens.foregroundDimmer})}),children:(0,i.jsxs)(o.MenuSection,{children:[(0,i.jsx)(C.MenuHeader,{text:"[Staff] Debug tools"}),(0,i.jsx)(C.MenuItem,{label:"Copy debug info",onAction:function(){return(0,t._)(function(){var e;return(0,r._)(this,function(t){switch(t.label){case 0:return[4,c(n,a)];case 1:return b((e=t.sent()).html,e.plainText),u("Copied debug info to clipboard"),[2]}})})()}}),(0,i.jsx)(C.MenuItem,{href:(0,h.generateAiSessionTraceforgeUrl)(n),label:"Go to TraceForge",target:"_blank",rel:"noreferrer noopener"}),(0,i.jsx)(C.MenuItem,{href:(0,h.generateAiSessionBraintrustUrl)(n),label:"Go to Braintrust",target:"_blank",rel:"noreferrer noopener"}),(0,i.jsx)(C.MenuItem,{href:(0,h.generateAiSessionTemporalUrl)(n),label:"Go to Temporal",target:"_blank",rel:"noreferrer noopener"}),(0,i.jsx)(C.MenuItem,{href:"https://us5.datadoghq.com/logs?query=%40replid%3A".concat(l),label:"Go to Datadog logs",target:"_blank"}),(0,i.jsx)(C.MenuItem,{href:(0,h.generateAiSessionDatadogTracesUrl)(l),label:"Go to Datadog traces",target:"_blank",rel:"noreferrer noopener"})]})})}function T(){var e,i,o=(0,y.default)(),l=(0,n._)((e={variables:{replId:o}},i=(0,s._)({},f,e),c.useLazyQuery(p,i)),1)[0],u=(0,g.useConnectorContext)().connections.map(function(e){return e.connectionId}).join(", ");return(0,a.useCallback)(function(e,n){return(0,t._)(function(){var t,n,i,a,s,c,d,f,p,m,g,x,y,b,w,k,S,C,j;return(0,r._)(this,function(r){switch(r.label){case 0:return[4,l()];case 1:if(f=null==(d=null==(c=r.sent())||null==(t=c.data)?void 0:t.currentUser)?void 0:d.id.toString(),p=null==d?void 0:d.username,!e||!d)return[2,{html:"",plainText:""}];return m=(0,h.generateAiSessionBraintrustUrl)(e),g=(0,h.generateAiSessionTraceforgeUrl)(e),x=(0,h.generateAiSessionTemporalUrl)(e),y=(0,h.generateAiSessionDatadogUrl)(o),b=window.location.href,k=(w=(null==c||null==(i=c.data)||null==(n=i.getRepl)?void 0:n.__typename)==="Repl"&&(null==c||null==(s=c.data)||null==(a=s.getRepl)?void 0:a.inviteUrl))?new URL(w,window.location.origin).href:null,j="\n User ID: ".concat(null!=(S=null==d?void 0:d.id)?S:"N/A","\n Username: ").concat(null!=(C=null==d?void 0:d.username)?C:"N/A","\n Repl URL: ").concat(null!=b?b:"N/A","\n Join URL: ").concat(null!=k?k:"N/A","\n Repl ID: ").concat(null!=o?o:"N/A","\n Session ID: ").concat(null!=e?e:"N/A","\n Connection IDs: ").concat(u||"N/A","\n TraceForge URL: ").concat(g,"\n Braintrust URL: ").concat(null!=m?m:"N/A","\n Temporal URL: ").concat(null!=x?x:"N/A","\n Datadog URL: ").concat(null!=y?y:"N/A","\n    ").trim(),[2,{html:"\n<ul>\n  <li>User ID: ".concat(f?_(f):"N/A","</li>\n  <li>Username: ").concat(p?_(p):"N/A","</li>\n  <li>Repl URL: ").concat(b?_(b):"N/A","</li>\n  <li>Join URL: ").concat(k?_(k):"N/A","</li>\n  <li>Repl ID: ").concat(o?_(o):"N/A","</li>\n  <li>Session ID: ").concat(e?_(e):"N/A","</li>\n  <li>Connection IDs: ").concat(u?_(u):"N/A",'</li>\n  <li><a href="').concat(g,'" target="_blank">TraceForge</a></li>\n  <li>').concat(m?'<a href="'.concat(m,'" target="_blank">Braintrust</a>'):"Braintrust: N/A","</li>\n  <li>").concat(x?'<a href="'.concat(x,'" target="_blank">Temporal</a>'):"Temporal: N/A",'</li>\n  <li><a href="').concat(y,'" target="_blank">Datadog</a></li>\n</ul>\n    ').trim(),plainText:j}]}})})()},[u,l,o])}e.s(["AiSessionDebugInfoButton",()=>j,"useGenerateDebugInfo",()=>T],659790)},737362,151902,549194,397747,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245),i=e.i(304277);e.i(566901);var a=e.i(951262);function o(){var e=(0,n._)(["\n  fragment ForkContextRepl on Repl {\n    id\n    title\n    description\n    org {\n      id\n    }\n  }\n"]);return o=function(){return e},e}var s=(0,r.gql)(o()),l=e.i(23293);function u(){var e=(0,n._)(["\n  fragment TransferReplReplInfo on Repl {\n    id\n    slug\n    title\n    owner {\n      ... on Team {\n        id\n        username\n      }\n      ... on User {\n        id\n        username\n        isSubscribed\n      }\n    }\n    org {\n      id\n      slug\n    }\n  }\n"]);return u=function(){return e},e}function c(){var e=(0,n._)(["\n  query TransferReplDialog {\n    currentUser {\n      id\n      ...ReplOwnerCurrentUser\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var d={},f=(0,r.gql)(u()),p=(0,r.gql)(c(),l.ReplOwnerCurrentUserFragmentDoc);function h(e){var n=(0,t._)({},d,e);return i.useQuery(p,n)}e.s(["TransferReplReplInfoFragmentDoc",()=>f,"useTransferReplDialogQuery",()=>h],151902);var m=e.i(429190),g=e.i(490048),x=e.i(987860);function y(){var e=(0,n._)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n        initialLayoutState\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,n._)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return b=function(){return e},e}var w={},_=(0,r.gql)(y(),x.PublishedReplShareInfoReplDataFragmentDoc),k=(0,r.gql)(b());function S(e){var n=(0,t._)({},w,e);return i.useQuery(k,n)}e.s(["PublishReleaseFormReplFragmentDoc",()=>_,"usePublishReleaseFormCurrentUserQuery",()=>S],549194);var C=e.i(781621),j=e.i(279042);function T(){var e=(0,n._)(["\n  fragment ReplInfoDropdownItemsRepl on Repl {\n    id\n    isFeaturedRepl\n    isRenamed\n    isPrivate\n    publishedAs\n    org {\n      id\n      type\n    }\n    authorizations {\n      publish {\n        isAuthorized\n        message\n      }\n      fork {\n        isAuthorized\n        message\n      }\n      deleteRepl {\n        isAuthorized\n        message\n      }\n    }\n  }\n"]);return T=function(){return e},e}var E=(0,r.gql)(T()),R=e.i(239612);function I(){var e=(0,n._)(["\n  fragment HandleRemixRepl on Repl {\n    id\n    org {\n      id\n    }\n    ...CreateProjectForkRepl\n  }\n  ","\n"]);return I=function(){return e},e}var A=(0,r.gql)(I(),R.CreateProjectForkReplFragmentDoc);e.s(["HandleRemixReplFragmentDoc",()=>A],397747);var P=e.i(987143);function D(){var e=(0,n._)(["\n  fragment UserButtonRepl on Repl {\n    id\n    org {\n      id\n      name\n      slug\n      image\n    }\n    user {\n      username\n      image\n      ...UserLinkUser\n    }\n  }\n  ","\n"]);return D=function(){return e},e}var O=(0,r.gql)(D(),P.UserLinkUserFragmentDoc);function N(){var e=(0,n._)(["\n  fragment ReplInfoHeaderRepl on Repl {\n    id\n    isPrivate\n    org {\n      id\n      type\n    }\n    config {\n      grabbyExtensionVersion\n    }\n    ...HandleRemixRepl\n    ...UserButtonRepl\n    ...ReplLinkRepl\n    ...ReplInfoDropdownItemsRepl\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return N=function(){return e},e}var M=(0,r.gql)(N(),A,O,j.ReplLinkReplFragmentDoc,E);function L(){var e=(0,n._)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    imageUrl\n    workspaceCta\n    publishedAs\n    timeUpdated\n    isFeaturedRepl\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    templateInfo {\n      iconUrl\n      imageUrl\n    }\n    config {\n      isAgentRepl\n      grabbyExtensionVersion\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n        message\n      }\n      editTemplateMetadata {\n        isAuthorized\n      }\n      editVisibility {\n        isAuthorized\n        code\n        message\n      }\n    }\n    ...ForkContextRepl\n    ...PublishReleaseFormRepl\n    ...BulkDeleteConfirmationModalRepl\n    ...TransferReplReplInfo\n    ...ReplInfoHeaderRepl\n    ...FeaturedReplPreviewRepl\n    org {\n      id\n      slug\n      name\n      type\n      image\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return L=function(){return e},e}function B(){var e=(0,n._)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return B=function(){return e},e}function V(){var e=(0,n._)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return V=function(){return e},e}function F(){var e=(0,n._)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return F=function(){return e},e}function U(){var e=(0,n._)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return U=function(){return e},e}var G={},$=(0,r.gql)(L(),s,_,C.BulkDeleteConfirmationModalReplFragmentDoc,f,M,m.FeaturedReplPreviewReplFragmentDoc),H=(0,r.gql)(B(),$);function z(e){var n=(0,t._)({},G,e);return i.useQuery(H,n)}var W=(0,r.gql)(V(),g.PublishReplDataFragmentDoc);function q(e){var n=(0,t._)({},G,e);return a.useMutation(W,n)}var K=(0,r.gql)(F(),$);function Y(e){var n=(0,t._)({},G,e);return a.useMutation(K,n)}var Q=(0,r.gql)(U());function X(e){var n=(0,t._)({},G,e);return a.useMutation(Q,n)}e.s(["useWorkspaceHeaderReplInfoDeleteReplMutation",()=>X,"useWorkspaceHeaderReplInfoQuery",()=>z,"useWorkspaceHeaderReplInfoUnpublishTemplateMutation",()=>q,"useWorkspaceHeaderReplInfoUpdateReplMutation",()=>Y],737362)},382614,992193,590985,269818,701366,236465,886533,295276,2835,814991,522155,e=>{"use strict";var t,n,r=e.i(276385),i=e.i(183035),a=e.i(480028),o=e.i(754873),s=e.i(613355),l=e.i(960178),u=e.i(625484),c=u.SpecializedView.button,d=function(){return(0,r.jsx)(u.View,{css:[{borderTop:"1px solid ".concat(a.tokens.outlineDimmest)}],grow:!0,row:!0})},f=function(e){var t=e.isActive,n=e.isComplete,u=e.children,d=e.onClick,f=e.disabled;return(0,r.jsxs)(c,{type:"button",css:[s.rcss.reset.button,s.rcss.position.relative,o.interactive.nofill,t&&s.rcss.backgroundColor.backgroundHigher,s.rcss.p(4),s.rcss.borderRadius(4)],onClick:d,disabled:f,children:[(0,r.jsx)(l.Text,{variant:"small",multiline:!1,children:u}),n?(0,r.jsx)(i.default,{size:6,strokeWidth:6,color:a.tokens.foregroundDimmer,css:[s.rcss.position.absolute,{top:2,right:-2}]}):null]})};e.s(["FormHeadingButton",()=>f,"FormHeadingSpacer",()=>d],382614);var p=e.i(297083),h=e.i(399119),m=e.i(904851),g=e.i(445789),x=e.i(463348),y=e.i(817556),b=e.i(389959),w=e.i(368964),_=e.i(878420),k=e.i(569384),S=e.i(973245),C=e.i(304277);e.i(566901);var j=e.i(490048);function T(){var e=(0,k._)(["\n  query ReplPublishInputRepl($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return T=function(){return e},e}var E={},R=(0,S.gql)(T(),j.PublishReplDataFragmentDoc),I=e.i(322823),A=e.i(98816),P=e.i(858248),D=e.i(709485),O=e.i(530658),N=e.i(951262),M=e.i(549194);function L(){var e=(0,k._)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return L=function(){return e},e}function B(){var e=(0,k._)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return B=function(){return e},e}var V={},F=(0,S.gql)(L(),j.PublishReplDataFragmentDoc,M.PublishReleaseFormReplFragmentDoc),U=(0,S.gql)(B(),j.PublishReplDataFragmentDoc,M.PublishReleaseFormReplFragmentDoc),G="Something went wrong publishing your Template";function $(e){if(e.error)return e.error.message||G;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;else if("Repl"!==e.data.createReplDeployment.__typename)return G}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;else if("Repl"!==e.data.createReplRelease.__typename)return G}}}function H(){var e,t,n=(0,O._)((e=(0,_._)({},V,void 0),N.useMutation(F,e)),2),r=n[0],i=n[1],a=(0,O._)((t=(0,_._)({},V,void 0),N.useMutation(U,t)),2),o=a[0],s=a[1];return{createRelease:function(e){var t=e.input;return(0,p._)(function(){var e;return(0,y._)(this,function(n){switch(n.label){case 0:if(i.loading||s.loading)return[2,{data:null,error:null}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,o({refetchQueries:["ReplEnvironmentHeader"],variables:{input:t}})];case 2:return[2,{data:(e=n.sent()).data,error:$(e)}];case 3:return n.sent(),[2,{data:null,error:G}];case 4:return[2]}})})()},createDeployment:function(e){var t=e.input;return(0,p._)(function(){var e;return(0,y._)(this,function(n){switch(n.label){case 0:if(i.loading||s.loading)return[2,{data:null,error:null}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,r({variables:{input:t}})];case 2:return[2,{data:(e=n.sent()).data,error:$(e)}];case 3:return n.sent(),[2,{data:null,error:G}];case 4:return[2]}})})()},data:i.data||s.data,loading:i.loading||s.loading,error:$(i||s)}}function z(){var e=(0,k._)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return z=function(){return e},e}e.s(["useCreateTemplateRelease",()=>H],992193);var W={},q=(0,S.gql)(z(),j.PublishReplDataFragmentDoc);function K(e){var t,n,r,i,a,o,s;return e.error?e.error.message||"Something went wrong saving your Cover page":(null==(n=e.data)||null==(t=n.setReplViewSettings)?void 0:t.__typename)==="NotFoundError"||(null==(i=e.data)||null==(r=i.setReplViewSettings)?void 0:r.__typename)==="UnauthorizedError"||(null==(o=e.data)||null==(a=o.setReplViewSettings)?void 0:a.__typename)==="UserError"?e.data.setReplViewSettings.message:(null==(s=e.data)?void 0:s.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function Y(){var e=(0,k._)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return Y=function(){return e},e}var Q={},X=(0,S.gql)(Y(),j.PublishReplDataFragmentDoc);function Z(e){return e.message||"Something went wrong saving updates to your App"}var J=((t={})[t.Default=0]="Default",t[t.Saved=1]="Saved",t[t.Current=2]="Current",t);e.s(["TemplateLayoutKind",()=>J],590985);var ee=e.i(64386),et=e.i(422025);function en(e){var t=(0,O._)((0,b.useState)(null),2),n=t[0],r=t[1],i=(0,O._)((0,b.useState)(null),2),a=i[0],o=i[1],s=(0,et.default)({onUpload:function(t){var n=t.url;r(null),e(n)},onUploadPreview:function(e){var t=e.dataUrl;o(null),r(t)},onError:function(e){r(null),o(e.message)}}),l=(0,b.useCallback)(function(){return o(null)},[]);return(0,ee._)((0,_._)({},s),{error:a,clearError:l,previewUrl:n})}var er=((n={}).ReplFile="repl_file",n.ReplImage="repl_image",n);function ei(e){return"repl_file"===e||"repl_image"===e}var ea=function(e){function t(){return(0,m._)(this,t),(0,h._)(this,t,arguments)}return(0,g._)(t,e),t}((0,x._)(Error)),eo=function(e){function t(){return(0,m._)(this,t),(0,h._)(this,t,arguments)}return(0,g._)(t,e),t}((0,x._)(Error)),es=function(e){function t(){return(0,m._)(this,t),(0,h._)(this,t,arguments)}return(0,g._)(t,e),t}((0,x._)(Error));function el(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your App a title"}}function eu(e){return e?e.length>1e3?{message:"Description should not be more than ".concat(1e3," characters")}:void 0:{message:"What does this App do?"}}function ec(e){var t,n,r,i,a,o,s,l,u,c,d,f,h,m,g,x,k=(u={variables:{id:e.replId}},c=(0,_._)({},E,u),C.useQuery(R,c)),S=(null==(d=k.data)?void 0:d.getRepl.__typename)==="Repl"?k.data.getRepl:null,j=!!(null==S?void 0:S.publishedAs),T=(0,I.useFormField)("",el),M=(0,I.useFormField)("",eu),L=(0,I.useFormField)(null,function(){return null}),B=(0,I.useFormField)("repl_image",function(){return null}),V=(0,I.useFormField)(null,function(){return null}),F=(0,I.useFormField)("",e.fileValidator),U=(0,I.useFormField)(J.Default,function(){}),G=[T,M,L,B,V,F,U],$=(r=(n=(0,O._)((t=(0,_._)({},W,void 0),N.useMutation(q,t)),2))[0],{data:(i=n[1]).data,loading:i.loading,error:K(i),setReplViewSettings:function(e){return(0,p._)(function(){var t;return(0,y._)(this,function(n){switch(n.label){case 0:if(i.loading)return[2,{data:null,error:null}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,r({variables:{input:e}})];case 2:return[2,{data:(t=n.sent()).data,error:K(t)}];case 3:return n.sent(),[2,{data:null,error:"Something went wrong saving your Cover page"}];case 4:return[2]}})})()}}),z=(s=(o=(0,O._)((a=(0,_._)({},Q,void 0),N.useMutation(X,a)),2))[0],{data:(l=o[1]).data,loading:l.loading,error:l.error&&Z(l.error),updateRepl:function(e){return(0,p._)(function(){return(0,y._)(this,function(t){switch(t.label){case 0:if(l.loading)return[2,{data:null,error:null}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,s({variables:{input:e}})];case 2:return[2,{data:t.sent().data,error:null}];case 3:return[2,{data:null,error:Z(t.sent())}];case 4:return[2]}})})()}}),Y=H(),ee=(null==S||null==(f=S.replViewSettings)?void 0:f.defaultView)&&ei(S.replViewSettings.defaultView)?S.replViewSettings.defaultView:"repl_image",et=(0,A.default)(T.setValue),er=(0,A.default)(M.setValue),ec=(0,A.default)(L.setValue),ed=(0,A.default)(V.setValue),ef=(0,A.default)(B.setValue),ep=(0,A.default)(F.setValue);(0,b.useEffect)(function(){var e,t,n,r;S&&(ef.current(ee),ep.current(null!=(t=null==(e=S.replViewSettings)?void 0:e.replFile)?t:""),et.current(S.isRenamed?S.title:"",{preventTouch:!0}),er.current(null!=(n=S.description)?n:"",{preventTouch:!0}),ec.current(S.iconUrl.endsWith(".svg")?null:S.iconUrl),ed.current(null!=(r=S.imageUrl)?r:null))},[S,ed,ec,et,er,ee,ef,ep]);var eh=en(L.setValue),em=eh.previewUrl||L.value||(null==S?void 0:S.iconUrl)||(null==S?void 0:S.templateInfo.iconUrl),eg=null!=(x=null==(g=G.filter(function(e){return(e!==F||"repl_file"===B.value)&&e.error}))||null==(m=g[0])||null==(h=m.error)?void 0:h.message)?x:null,ev=z.loading||$.loading,ex=z.error||$.error,ey=Y.loading,eb=Y.error;return{selectedRepl:S,isReplLoading:k.loading,replLoadingError:k.error,replTitleField:T,replDescriptionField:M,iconUrlField:L,coverDefaultViewField:B,coverUrlField:V,coverFileField:F,layoutField:U,replIconInput:eh,replIconUrl:em,inputError:eg,save:function(){return(0,p._)(function(){var e,t,n,r,i,a,o,s,l;return(0,y._)(this,function(u){switch(u.label){case 0:if(!S)throw new ea("Missing repl");if(t=S.title!==T.value,n=S.description!==M.value,r=S.iconUrl!==L.value,i="repl_image"===B.value&&S.imageUrl!==V.value,a=F.value&&"repl_file"===B.value&&(null==(e=S.replViewSettings)?void 0:e.replFile)!==F.value,o=B.value&&ee!==B.value,!(t||n||r))return[3,2];if(T.error||M.error||L.error)throw new ea;return[4,z.updateRepl({id:S.id,title:t?T.value:void 0,description:n?M.value:void 0,iconUrl:r?L.value:void 0})];case 1:if((s=u.sent()).error)throw new eo(s.error);u.label=2;case 2:if(!(o||i||a))return[3,4];if("repl_image"===B.value&&V.error||"repl_file"===B.value&&F.error)throw new ea;return[4,$.setReplViewSettings({replId:S.id,defaultView:"repl_image"===B.value?w.ReplViewSettingsDefaultView.ReplImage:w.ReplViewSettingsDefaultView.ReplFile,replImage:i?V.value:void 0,replFile:a?F.value:void 0})];case 3:if((l=u.sent()).error)throw new eo(l.error);u.label=4;case 4:return[2]}})})()},isSaving:ev,savingError:ex,publishInitialRelease:function(){return(0,p._)(function(){var t,n,r;return(0,y._)(this,function(i){switch(i.label){case 0:if(!S)throw new ea("Missing repl");if(eg)throw new ea(null!=eg?eg:"Something went wrong");return t=null,e.canAuthorTemplateLayout&&U.value===J.Current&&(t=null==(n=e.getDesktopLayoutState)?void 0:n.call(e)),[4,Y.createDeployment({input:{replId:S.id,description:M.value,iconUrl:em||S.iconUrl,initialLayoutState:t}})];case 1:if((r=i.sent()).error)throw new es(r.error);return(0,P.track)(D.events.POST_MADE,{source:e.source,replType:"template_repl",title:T.value,description:M.value,defaultView:B.value}),[2]}})})()},isPublishing:ey,publishingError:eb,isPublished:j}}var ed=(0,b.createContext)(null),ef=function(e){var t=(0,b.useContext)(ed);if(!t)throw Error("usePublishField must be used within a PublishInputContext");return t["".concat(e,"Field")]},ep=function(){var e=(0,b.useContext)(ed);if(!e)throw Error("usePublishForm must be used within a PublishInputContext");return e};e.s(["CoverPageDefaultView",()=>er,"PublishInputContext",()=>ed,"REPL_DESCRIPTION_MAX_LENGTH",()=>1e3,"isCoverPageDefaultView",()=>ei,"usePublishField",()=>ef,"usePublishForm",()=>ep,"useReplPublish",()=>ec],269818);var eh=e.i(721281),em=e.i(87995),eg=e.i(936706),ev=e.i(482206),ex=e.i(877249),ey=e.i(446530),eb=e.i(91720),ew=e.i(88619),e_=e.i(929872),ek=e.i(185591),eS=(0,ey.cssRecord)({truncateText:[s.rcss.flex.growAndShrink(1),{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}]}),eC=function(e){var t=e.repl,n=(0,ek.replViewLinkProps)(t),i=t.url?(0,ek.replViewFullUrl)(t):"",a=(0,ev.default)({text:"Check out what I just made on Replit: ".concat(t.title),url:i});return(0,r.jsxs)(e_.Surface,{background:"default",css:[s.rcss.borderRadius(8),s.rcss.overflow("hidden"),s.rcss.colWithGap(16),s.rcss.width(510),s.rcss.p(16),s.rcss.flex.growAndShrink(1),(0,eh._)({},"@media (max-width: ".concat(ex.BREAKPOINTS.tabletMin,"px)"),[{width:"100%"}])],dataCy:"published-repl-share-info-container",children:[(0,r.jsxs)(u.View,{gap:16,children:[(0,r.jsx)(l.Text,{variant:"subheadBig",multiline:!1,children:"Share your App"})," ",(0,r.jsxs)(u.View,{gap:4,children:[(0,r.jsx)(l.Text,{variant:"small",multiline:!1,color:"dimmer",children:"Cover page link"}),(0,r.jsxs)(u.View,{row:!0,gap:4,align:"center",children:[(0,r.jsx)(em.default,(0,ee._)((0,_._)({},n),{css:eS.truncateText,children:i})),(0,r.jsx)(ew.CopyIconButton,{tooltipText:"Copy link",textToCopy:i})]})]})]}),(0,r.jsx)(u.View,{css:[(0,eh._)({alignItems:"flex-end"},s.media.max("mobileMax"),[s.rcss.colWithGap(8),{width:"100%",">*":{width:"100%"}}])],row:!0,gap:12,justify:"end",children:(0,r.jsx)(eb.ButtonLink,{prefetch:!1,href:a,iconLeft:(0,r.jsx)(eg.default,{}),text:"Share to X",target:"_blank",css:[(0,eh._)({},s.media.max("mobileMax"),[s.rcss.mr(0)])]})})]})};e.s(["PublishedReplShareInfo",()=>eC],701366);var ej=e.i(416298);function eT(e){var t=e.error,n=e.dataCy;return t?(0,r.jsxs)(u.View,{row:!0,gap:4,align:"center",children:[(0,r.jsx)(ej.default,{css:[s.rcss.color.accentNegativeDefault]}),(0,r.jsx)(l.Text,{css:[s.rcss.flex.growAndShrink(1),s.rcss.color.accentNegativeDefault],dataCy:n,children:t.message})]}):null}var eE=e.i(428596),eR=e.i(607278),eI=u.SpecializedView.label,eA=(0,b.forwardRef)(function(e,t){return(0,r.jsx)(eI,(0,ee._)((0,_._)({},e),{ref:t,css:s.rcss.color.foregroundDimmer}))}),eP=function(){var e=(0,eE.useIdSeed)(),t=e("replName"),n=e("replDescription"),i=ep(),o=i.replTitleField,c=i.replDescriptionField,d=i.isSaving;return(0,r.jsxs)(u.View,{gap:16,grow:!0,shrink:!0,children:[(0,r.jsxs)(u.View,{gap:4,children:[(0,r.jsx)(u.View,{css:[s.rcss.align.baseline,s.rcss.justify.spaceBetween],row:!0,children:(0,r.jsx)(eA,{css:[s.rcss.color.foregroundDimmer,{lineHeight:a.tokens.lineHeightSmall}],htmlFor:t,children:"Repl name"})}),o.value]}),(0,r.jsxs)(u.View,{gap:4,children:[(0,r.jsxs)(u.View,{css:[s.rcss.align.baseline,s.rcss.justify.spaceBetween],row:!0,children:[(0,r.jsx)(eA,{css:[s.rcss.color.foregroundDimmer,{lineHeight:a.tokens.lineHeightSmall}],htmlFor:n,children:"Repl description"}),(0,r.jsxs)(l.Text,{multiline:!1,css:{color:c.value.length>1e3?a.tokens.accentNegativeStronger:a.tokens.foregroundDimmest},children:[c.value.length,"/",1e3]})]}),(0,r.jsx)(eR.MultiLineInput,{id:n,value:c.value,disabled:d,onChange:function(e){c.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[s.rcss.minHeight(128),s.rcss.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),c.touched?(0,r.jsx)(eT,{error:c.error,dataCy:"publish-form-repl-description-error"}):null]})]})};e.s(["BasicsSection",()=>eP],236465);var eD=e.i(493166),eO=e.i(269848),eN=e.i(349597),eM=function(e){var t=e.showPlayButton,n=e.children,i=e.active;return(0,r.jsxs)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,r.jsx)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden",backgroundColor:i?a.tokens.accentPrimaryDimmest:void 0},children:n}),(0,r.jsxs)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,r.jsx)("rect",{width:"268",height:"17",fill:a.tokens.backgroundDefault}),(0,r.jsx)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:a.tokens.accentPositiveDimmer}),(0,r.jsx)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:a.tokens.backgroundHighest}),(0,r.jsx)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:a.tokens.backgroundHighest}),(0,r.jsx)("rect",{x:"1",y:"18",width:"266",height:"1",fill:i?a.tokens.accentPrimaryDefault:a.tokens.outlineDimmer}),t?(0,r.jsx)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:a.tokens.white}):null,(0,r.jsx)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:i?a.tokens.accentPrimaryDefault:a.tokens.outlineDimmer,strokeWidth:"1"})]})]})},eL=e.i(888136),eB=e.i(205104),eV=e.i(967629),eF=e.i(51054),eU=u.SpecializedView.ol,eG=u.SpecializedView.li,e$=(0,eV.css)([s.rcss.py(4),s.rcss.borderRadius(8),{border:"1px solid ".concat(a.tokens.outlineDimmest),borderRadius:a.tokens.borderRadius8,backgroundColor:a.tokens.interactiveBackground,zIndex:s.DefaultModalZIndex,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:a.tokens.space8,listStyle:"none"}]),eH={backgroundColor:a.tokens.interactiveBackgroundActive},ez={backgroundColor:a.tokens.accentPrimaryDimmer},eW=(0,eV.css)([s.rcss.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,_._)({},eH),":active":(0,_._)({},ez)}}]);function eq(e){var t,n,i,a,o,c,d,f,h,m,g,x,w,k,S,C,j=e.fs,T=e.initiallySelectedFile,E=e.onFileSelect,R=e.onClear,I=(0,b.useRef)(null),P=(n=(t=(0,O._)((0,b.useState)({isLoading:!0,error:null,files:[]}),2))[0],i=t[1],(0,b.useEffect)(function(){(0,p._)(function(){var e,t;return(0,y._)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,j.listFiles()];case 1:if((e=n.sent()).error)throw Error(e.error);return i({isLoading:!1,error:null,files:(null!=(t=e.files)?t:[]).slice().sort(function(e,t){return e.localeCompare(t)}).map(function(e){return{file:e,pathDepth:(0,eB.getPathDepth)(e)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file})}),[3,3];case 2:return n.sent(),i({isLoading:!1,error:"Could not load files",files:[]}),[3,3];case 3:return[2]}})})()},[j]),(0,_._)({},n)),D=P.isLoading,N=P.files,M=P.error,L=(o=(a={files:N,inputRef:I,initiallySelectedFile:T}).files,c=a.inputRef,d=a.initiallySelectedFile,h=(f=(0,O._)((0,b.useState)(!1),2))[0],m=f[1],x=(g=(0,O._)((0,b.useState)(o),2))[0],w=g[1],k=(0,b.useCallback)(function(e){return o.filter(function(t){return t.toLowerCase().includes(e.toLowerCase())})},[o]),S=(0,eL.useCombobox)({items:x,isOpen:h,initialInputValue:d,initialSelectedItem:x.find(function(e){return e===d}),onIsOpenChange:function(e){m(!!e.isOpen)},onInputValueChange:function(e){var t;w(k(null!=(t=e.inputValue)?t:""))}}),C=(0,b.useCallback)(function(){var e;m(!1),null==(e=c.current)||e.blur()},[c]),(0,b.useEffect)(function(){var e;w(k(null!=(e=S.inputValue)?e:""))},[o,k,S.inputValue]),(0,b.useEffect)(function(){S.selectedItem&&C()},[S.selectedItem,C]),(0,ee._)((0,_._)({},S),{closeMenu:C,items:x})),B=(0,A.default)(E);return(0,b.useEffect)(function(){L.selectedItem&&B.current(L.selectedItem)},[L.selectedItem,B]),(0,r.jsxs)(u.View,{children:[(0,r.jsx)(u.View,(0,ee._)((0,_._)({},L.getComboboxProps({refKey:"innerRef"})),{css:[s.rcss.position.relative],children:(0,r.jsx)(eF.SearchBar,(0,ee._)((0,_._)({},L.getInputProps({onFocus:L.openMenu,ref:I,refKey:"inputRef",disabled:D,placeholder:"Search your files"})),{onClear:function(){var e;L.reset(),null==(e=I.current)||e.focus(),R()},loading:D}))})),(0,r.jsxs)(u.View,(0,ee._)((0,_._)({},L.getMenuProps({refKey:"innerRef"})),{css:[s.rcss.position.relative],children:[M?(0,r.jsx)(u.View,{p:8,children:(0,r.jsx)(l.Text,{multiline:!1,children:"Something went wrong loading your files. Please try again."})}):null,!M&&L.isOpen?(0,r.jsx)(eU,{css:[e$],children:L.items.length>0?L.items.map(function(e,t){return(0,r.jsx)(eG,(0,ee._)((0,_._)({css:[eW,L.highlightedIndex===t&&eH,e===L.selectedItem&&ez]},L.getItemProps({item:e,index:t,onClick:function(){L.closeMenu()}})),{children:(0,r.jsx)(l.Text,{multiline:!1,children:e})}),e)}):(0,r.jsx)(eG,{css:[s.rcss.p(8)],children:(0,r.jsxs)(l.Text,{multiline:!1,children:['No files found for "',L.inputValue,'"']})})}):null]}))]})}var eK=e.i(971072),eY=function(e){var t=(0,b.useRef)(null);return{inputProps:{onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var a=i?i[0]:null;a&&e(a)}},"aria-hidden":"true",ref:t,accept:eK.ACCEPTABLE_IMAGE_UPLOAD_TYPES.join(","),type:"file"},buttonProps:{onClick:function(){var e;return null==(e=t.current)?void 0:e.click()}},inputRef:t}},eQ=function(e){var t=eY(e.onFile),n=t.inputProps,i=t.buttonProps;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",(0,ee._)((0,_._)({},n),{css:{display:"none"}})),e.children(i)]})},eX=e.i(211397),eZ=(0,eV.css)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function eJ(e){var t=e.src,n=e.alt;return(0,r.jsxs)(u.View,{css:[eZ,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,r.jsx)(eX.default,{objectFit:"cover",layout:"fill",src:t,alt:n}),(0,r.jsx)(u.View,{css:[eZ,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}var e0=e.i(140487),e1=e.i(734882),e2=e.i(396776),e3=[{value:er.ReplImage,text:"Photo"},{value:er.ReplFile,text:"File"}],e5=function(e){var t,n,i,o,c,d=e.fs,f=(0,eE.useIdSeed)(),h=f("coverPage"),m=ep(),g=m.selectedRepl,x=m.coverFileField,w=m.coverUrlField,k=m.coverDefaultViewField,S=(0,O._)((t=function(e){return(0,p._)(function(){var t;return(0,y._)(this,function(n){switch(n.label){case 0:if(!(null==e?void 0:e.length)||!(t=e[0]).type.startsWith("image/"))return[2];return[4,T.uploadImage(t,eN.ImageUploadContexts.ReplCoverImage)];case 1:return n.sent(),[2]}})})()},i=(n=(0,O._)((0,b.useState)(!1),2))[0],o=n[1],c=(0,b.useRef)(0),[i,(0,b.useMemo)(function(){return{onDragEnter:function(e){e.preventDefault(),c.current++,o(!0)},onDragLeave:function(e){e.preventDefault(),c.current--,0===c.current&&o(!1)},onDrop:function(e){e.preventDefault(),c.current=0,o(!1),e.persist();var n,r,i=Array.from(null!=(r=null==e||null==(n=e.dataTransfer)?void 0:n.files)?r:[]);0===i.length?t(null):t(i)},onDragOver:function(e){e.preventDefault()}}},[t])]),2),C=S[0],j=S[1],T=en(w.setValue);return(0,r.jsxs)(u.View,(0,ee._)((0,_._)({gap:16},j),{children:[(0,r.jsxs)(u.View,{gap:12,children:[(0,r.jsx)(u.View,{row:!0,gap:8,children:(0,r.jsx)(e1.RadioGroup,{tag:"fieldset",css:[s.rcss.rowWithGap(24)],name:h,value:k.value,onChange:function(e){ei(e.target.value)&&k.setValue(e.target.value)},children:e3.map(function(e){return(0,r.jsxs)(u.View,{row:!0,gap:8,children:[(0,r.jsx)(e1.Radio,{id:f(e.value),value:e.value}),(0,r.jsx)("label",{htmlFor:f(e.value),children:e.text})]},e.value)})})}),k.value===er.ReplImage&&(0,r.jsxs)(u.View,{gap:4,align:"center",children:[(0,r.jsx)(eQ,{onFile:function(e){return T.uploadImage(e,eN.ImageUploadContexts.ReplCoverImage)},children:function(e){var t=e.onClick;return(0,r.jsx)(e0.Button,{onClick:t,colorway:C?"primary":void 0,text:"Upload a cover photo",iconLeft:T.isLoading?(0,r.jsx)(eO.default,{}):(0,r.jsx)(eD.default,{}),stretch:!0})}}),T.error?(0,r.jsx)(e2.StatusBanner,{colorway:"negative",icon:(0,r.jsx)(ej.default,{}),text:T.error}):null,(0,r.jsx)(l.Text,{variant:"small",color:"dimmer",children:"or drag and drop a photo here"})]}),k.value===er.ReplFile&&(0,r.jsxs)(u.View,{gap:8,children:[(0,r.jsx)(eq,{fs:d,initiallySelectedFile:x.value,onFileSelect:x.setValue,onClear:function(){return x.setValue("")}},null==g?void 0:g.id),(0,r.jsx)(eT,{error:x.error})]})]}),k.value===er.ReplImage&&(0,r.jsxs)(eM,{active:C,showPlayButton:k.value===er.ReplImage&&!!w.value&&!T.isLoading,children:[k.value===er.ReplImage&&w.value?(0,r.jsx)(eJ,{src:w.value,alt:"cover"}):null,T.isLoading?(0,r.jsx)(u.View,{css:[{position:"absolute",inset:0},s.rcss.align.center,s.rcss.justify.center],children:(0,r.jsx)(eO.default,{color:a.tokens.white,size:24})}):null]})]}))};e.s(["CoverPageSection",()=>e5],886533);var e4=e.i(228108),e8=function(){ef("iconUrl");var e=ep(),t=e.replIconInput,n=e.replIconUrl;return(0,r.jsxs)(u.View,{gap:16,align:"center",children:[(0,r.jsxs)(u.View,{gap:8,children:[(0,r.jsxs)(u.View,{row:!0,gap:8,children:[(0,r.jsx)(eQ,{onFile:function(e){return t.uploadImage(e,eN.ImageUploadContexts.ReplIcon)},css:s.rcss.backgroundColor.accentNegativeDefault,children:function(e){var t=e.onClick;return(0,r.jsx)(e0.Button,{onClick:t,text:"Upload image",iconLeft:(0,r.jsx)(eD.default,{}),css:[s.rcss.backgroundColor.backgroundHigher],type:"button",stretch:!0})}}),null]}),t.error?(0,r.jsx)(u.View,{children:(0,r.jsx)(e2.StatusBanner,{icon:(0,r.jsx)(ej.default,{}),colorway:"negative",text:t.error,closable:!0,closeAction:t.clearError})}):null]}),(0,r.jsx)(e4.ReplIconWithLoadingState,{alt:"icon",size:84,iconUrl:n,isLoading:!!t.previewUrl,css:[s.rcss.backgroundColor.backgroundHigher]})]})};e.s(["IconUrlSection",()=>e8],295276);var e6=function(){return(0,r.jsx)(u.View,{gap:8,children:(0,r.jsx)(u.View,{children:(0,r.jsxs)(l.Text,{children:["See the"," ",(0,r.jsx)("a",{href:"https://docs.replit.com/replit-workspace/templates",target:"_blank",children:"template docs"})," ","for a guide on what makes a good template. Please make sure your Repl abides by the"," ",(0,r.jsx)("a",{href:"https://blog.replit.com/community-standards",target:"_blank",children:"Replit community rules and guidelines"})," ","before publishing."]})})})};e.s(["PublishingSection",()=>e6],2835);var e7=e.i(992785),e9=e.i(612651),te=e.i(886513),tt=e.i(927225);e.i(282890);var tn=e.i(827456),tr=(0,ey.cssRecord)({container:[s.rcss.maxWidth(100),s.rcss.backgroundColor.backgroundDefault,s.rcss.borderRadius(4),{aspectRatio:"1 / 1"}],stacked:[s.rcss.flex.grow(1),s.rcss.colWithGap(2),s.rcss.justify.spaceEvenly],sideBySide:[s.rcss.flex.grow(1),s.rcss.rowWithGap(2)],paneGroup:[s.rcss.p(2),s.rcss.flex.grow(1),s.rcss.backgroundColor.backgroundHigher,s.rcss.center]});function ti(e){var t=e.layoutState,n=(0,te._)(e,["layoutState"]);return(0,r.jsx)(u.View,(0,ee._)((0,_._)({css:tr.container,p:4,row:!0},n),{children:(0,r.jsx)(ta,{root:t.layout,paneData:t.data})}))}function ta(e){var t,n=e.root,i=e.paneData;return null==n.tiling?null:(0,r.jsx)(u.View,{grow:!0,row:!0,children:(null==(t=n.tiling)?void 0:t.type)==="split"?(0,r.jsx)(to,{split:n.tiling,paneData:i,depth:1}):(0,r.jsx)(ts,{group:n.tiling,paneData:i,depth:1})})}function to(e){var t=e.split,n=e.paneData,i=e.depth;return i>2?(0,r.jsx)(tl,{}):(0,r.jsx)(u.View,{css:t.stacked?tr.stacked:tr.sideBySide,children:t.children.map(function(e){return"split"===e.type?(0,r.jsx)(to,{split:e,paneData:n,depth:i+1},e.type+i):(0,r.jsx)(ts,{group:e,paneData:n,depth:i+1},e.type+i)})})}function ts(e){var t=e.group,n=e.paneData,i=e.depth,a=n[t.panes[t.activeIndex]],o=(0,tn.usePaneUIContext)(),s=o.Icon({pane:a,size:i>1?12:16}),l=o.getTitle(a);return(0,r.jsx)(u.View,{css:tr.paneGroup,title:l,children:s})}function tl(){return(0,r.jsx)(u.View,{css:tr.paneGroup,children:(0,r.jsx)(tt.default,{})})}var tu=e.i(346715),tc=e.i(173703),td=(0,ey.cssRecord)({layoutButton:[s.rcss.borderRadius(4),s.rcss.p(8),s.rcss.border({width:1,color:a.tokens.greyDimmer}),s.rcss.backgroundColor.backgroundHigher,s.rcss.cursor.pointer,{"&:hover":[s.rcss.backgroundColor.backgroundHighest],'&[data-selected="true"]':[s.rcss.backgroundColor.accentPrimaryDimmest,s.rcss.border({color:a.tokens.blueDimmer})],'&[data-selected="true"]:hover':[s.rcss.backgroundColor.accentPrimaryDimmer],'&[data-disabled="true"]':[s.rcss.backgroundColor.backgroundDefault,s.rcss.border({color:a.tokens.greyDimmest}),s.rcss.color.foregroundDimmer,{"&:hover":{cursor:"not-allowed"}}]}],layoutButtonRow:[s.rcss.rowWithGap(8),s.rcss.justify.spaceBetween,s.rcss.width("100%")],layoutButtonText:[s.rcss.flex.growAndShrink(1),s.rcss.flex.column,s.rcss.justify.center],layoutButtonHeader:[s.rcss.mb(4)],layoutPreview:[s.rcss.width(80),s.rcss.height(80),{alignSelf:"center"}]});function tf(e){var t,n=e.getCurrentLayoutState(),i=(0,e7.default)((0,e9.default)(n,"sidebarPercent"),(0,e9.default)(e.savedLayoutState,"sidebarPercent")),a=(t=(0,tn.usePaneUIContext)(),(0,b.useCallback)(function(e){if((null==e?void 0:e.layout.tiling)==null)return"No tiled panes in layout";for(var n=[],r=[e.layout.tiling];r.length>0;){var i=r.pop();(null==i?void 0:i.type)==="paneGroup"?n.push.apply(n,(0,tu._)(i.panes)):(null==i?void 0:i.children)&&r.push.apply(r,(0,tu._)(i.children))}return n.reverse().map(function(n){return t.getTitle(e.data[n])}).join(", ")},[t])),o=(0,b.useMemo)(function(){return a(e.savedLayoutState)},[a,e.savedLayoutState]),s=(0,b.useMemo)(function(){return a(n)},[n,a]);return(0,r.jsxs)(u.View,{gap:8,children:[(0,r.jsx)(l.Text,{variant:"small",children:"Choose an initial workspace layout for new Apps using this template."}),(0,r.jsx)(tc.ShadesSurface,{css:td.layoutButton,"data-selected":e.templateLayout.value===J.Default,onClick:function(){return e.templateLayout.setValue(J.Default)},elevate:!1,children:(0,r.jsx)(u.View,{css:td.layoutButtonRow,children:(0,r.jsxs)(u.View,{css:td.layoutButtonText,children:[(0,r.jsx)(l.Header,{level:3,variant:"text",css:td.layoutButtonHeader,children:"Default layout"}),(0,r.jsx)(l.Text,{multiline:!0,variant:"small",children:"User's default layout (either side-by-side or stacked)."})]})})}),e.savedLayoutState?(0,r.jsx)(tc.ShadesSurface,{css:td.layoutButton,"data-selected":e.templateLayout.value===J.Saved,onClick:function(){return e.templateLayout.setValue(J.Saved)},elevate:!1,children:(0,r.jsxs)(u.View,{css:td.layoutButtonRow,children:[(0,r.jsxs)(u.View,{css:td.layoutButtonText,children:[(0,r.jsx)(l.Header,{level:3,variant:"text",css:td.layoutButtonHeader,children:"Saved layout"}),(0,r.jsx)(l.Text,{variant:"small",children:o})]}),(0,r.jsx)(ti,{css:td.layoutPreview,layoutState:e.savedLayoutState})]})}):null,(0,r.jsx)(tc.ShadesSurface,{css:td.layoutButton,"data-selected":e.templateLayout.value===J.Current,"data-disabled":i,onClick:i?void 0:function(){return e.templateLayout.setValue(J.Current)},elevate:!1,children:(0,r.jsxs)(u.View,{css:td.layoutButtonRow,children:[(0,r.jsxs)(u.View,{css:td.layoutButtonText,children:[(0,r.jsx)(l.Header,{level:3,variant:"text",css:td.layoutButtonHeader,children:"Current layout"}),(0,r.jsx)(l.Text,{variant:"small",children:i?"Same as saved layout":s})]}),(0,r.jsx)(ti,{css:td.layoutPreview,layoutState:n})]})})]})}function tp(e){var t=e.getCurrentLayoutState,n=ef("layout");return(0,r.jsx)(u.View,{gap:8,children:null==t?(0,r.jsx)(l.Text,{children:"Initial layouts may only be customized in the desktop environment."}):(0,r.jsx)(tf,{templateLayout:n,getCurrentLayoutState:t})})}function th(e){var t=e.dotReplit,n=(0,O._)((0,b.useState)({isLoading:!0,error:null,entryPoint:null}),2),r=n[0],i=n[1];return(0,b.useEffect)(function(){(0,p._)(function(){var e,n,r;return(0,y._)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,t.getConfig()];case 1:if((n=a.sent()).error)throw Error(n.errorMessage);return i({isLoading:!1,error:null,entryPoint:null!=(r=null==n||null==(e=n.config)?void 0:e.entrypoint)?r:null}),[3,3];case 2:return a.sent(),i({isLoading:!1,error:"Could not load .replit config",entryPoint:null}),[3,3];case 3:return[2]}})})()},[t]),(0,_._)({},r)}e.s(["TemplateLayoutSection",()=>tp,"TemplateLayoutSelector",()=>tf],814991),e.s(["default",()=>th],522155)},263649,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(485273),i=e.i(787182);function a(e){var a=e.throwBsod,o=e.tags,s=e.extras,l=e.origin,u=e.onNonBsodUnrecoverableError;return function(e){var c=(0,i.default)(e);if(c===i.NonBsodErrorType.NotFound)return void r.default.push("/home","~/");if(c===i.NonBsodErrorType.LanguageTokenDenied)return void window.location.reload();if(c===i.NonBsodErrorType.CrosisChannel)o=(0,n._)((0,t._)({},o),{crosis:!0});else if(c){null==u||u(c);return}console.error(e),a({error:e,tags:o,extras:s,origin:l})}}e.s(["default",()=>a])},598801,911489,157584,209221,e=>{"use strict";var t,n=e.i(721281),r=e.i(276385),i=e.i(490048),a=e.i(269848),o=e.i(297083),s=e.i(878420),l=e.i(64386),u=e.i(530658),c=e.i(817556),d=e.i(389959),f=e.i(138716),p=e.i(752539),h=e.i(140154),m=e.i(416298),g=e.i(903381),x=e.i(993796),y=e.i(650587),b=e.i(98816),w=e.i(858248),_=e.i(709485),k=e.i(382614),S=e.i(269818),C=e.i(701366),j=e.i(465214),T=e.i(236465),E=e.i(886533),R=e.i(295276),I=e.i(2835),A=e.i(814991),P=e.i(522155),D=e.i(19004),O=e.i(792e3),N=e.i(8808),M=e.i(170784),L=e.i(122965),B=e.i(534518),V=e.i(263649),F=e.i(37292);e.i(148382);var U=e.i(633600),G=e.i(346715),$=e.i(569384),H=e.i(973245),z=e.i(304277);function W(){var e=(0,$._)(["\n  query BSODComponent {\n    currentUser {\n      id\n      username\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return W=function(){return e},e}e.i(566901);var q={},K=(0,H.gql)(W()),Y=e.i(967629),Q=e.i(446530),X=e.i(613355),Z=e.i(714165),J=e.i(140487),ee=e.i(739521),et=e.i(960178),en=e.i(625484),er=(0,Y.css)({".sentry-error-embed-wrapper":{zIndex:"".concat(X.DefaultModalZIndex," !important")}}),ei=(0,Q.cssRecord)({errorStack:[X.rcss.p(16),X.rcss.width("100%"),X.rcss.backgroundColor.backgroundHigher,X.rcss.borderRadius(8),X.rcss.overflowY("hidden"),X.rcss.font.code,X.rcss.fontSize(12),{whiteSpace:"pre"}],userAndErrorIdContainer:[X.rcss.width("100%"),X.rcss.backgroundColor.backgroundHigher,X.rcss.borderRadius(8)],error:[X.rcss.font.code]}),ea=/at (.+) \((https:\/\/.+\.js):(\d+):(\d+)\)/,eo=/at (https:\/\/.+\.js):(\d+):(\d+)/,es=function(t){var n=t.bsod,i=(0,u._)((0,d.useState)(null),2),a=i[0],s=i[1];(0,d.useEffect)(function(){(0,o._)(function(){return(0,c._)(this,function(t){switch(t.label){case 0:var r;return t.trys.push([0,2,,3]),[4,(r=n.error,(0,o._)(function(){var t,n,i,a,s,l,d,f;return(0,c._)(this,function(p){switch(p.label){case 0:t=new Map,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,e.A(67826)];case 2:return n=p.sent(),[3,4];case 3:throw p.sent(),Error("source-map not available");case 4:if(!(i=r.stack))throw Error("expected error.stack to be defined");return a=i.split("\n").map(function(e){return e.trim()}).filter(function(e){return!!e}),l=(s=(0,U._)(a))[0],[4,Promise.all(s.slice(1).map(function(e){return(0,o._)(function(){var r,i,a,s,l,d,f,p,h,m;return(0,c._)(this,function(g){switch(g.label){case 0:var x;if(ea.test(e)){if(!(l=ea.exec(e)))throw Error("expected result");i=(d=(0,u._)(l.slice(2),3))[0],a=d[1],s=d[2]}else{if(!eo.test(e))return[2,e];if(!(f=eo.exec(e)))throw Error("expected result");i=(p=(0,u._)(f.slice(1),3))[0],a=p[1],s=p[2]}return[4,(x="".concat(i,".map"),(0,o._)(function(){var e,r,i;return(0,c._)(this,function(a){switch(a.label){case 0:if(e=t.get(x))return[2,e];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,fetch(x).then(function(e){return e.json()})];case 2:return r=a.sent(),i=new n.SourceMapConsumer(r),t.set(x,i),[2,i];case 3:return a.sent(),[2,null];case 4:return[2]}})})())];case 1:if(!(h=g.sent()))return[2,"    ".concat(e)];if(m=h.originalPositionFor({line:Number(a),column:Number(s)}),r)return[2,"    at ".concat(m.name," (").concat(m.source,":").concat(m.line,":").concat(m.column,")")];return[2,"    at ".concat(m.source,":").concat(m.line,":").concat(m.column)]}})})()}))];case 5:return d=p.sent(),Object.assign(f=Error(),{name:r.name,stack:[l].concat((0,G._)(d)).join("\n"),message:r.message},r),[2,f]}})})())];case 1:return s(t.sent()),[3,3];case 2:return t.sent(),[2];case 3:return[2]}})})()},[n.error]);var l=(0,d.useMemo)(function(){var e,t,r,i;return a?null!=(r=null==(t=a.stack)?void 0:t.split("\n"))?r:[]:null!=(i=null==(e=n.error.stack)?void 0:e.split("\n"))?i:[]},[a,n.error.stack]);return(0,r.jsxs)("div",{css:ei.errorStack,children:[(0,r.jsxs)("div",{children:["Origin: ",n.origin]}),null==l?void 0:l.map(function(e,t){var n=e.replace("webpack-internal:///./",""),i=n.includes("node_modules");return(0,r.jsx)("div",{css:i&&X.rcss.color.foregroundDimmest,children:n},t)})]})};let el=function(){var e,t,n,i,a=(0,u._)((0,F.useBsod)(),1)[0],o=(e={skip:!a},t=(0,s._)({},q,e),z.useQuery(K,t)),l=o.data,c=o.loading;if((0,F.useClearBsod)(),!a)return null;var d=(null==l||null==(n=l.currentUser)?void 0:n.isStaff)||(null==l||null==(i=l.currentUser)?void 0:i.isAdmin);return(0,r.jsxs)(ee.Modal,{isOpen:!0,preventClose:!0,onRequestClose:function(){},maxWidth:872,children:[(0,r.jsxs)(en.View,{gap:16,align:"center",children:[(0,r.jsx)(et.Text,{variant:"headerDefault",children:"Your app is having a bit of trouble"}),(0,r.jsx)(et.Text,{variant:"text",multiline:!0,children:"The issue has been logged and the Replit team will look into it. Try reloading the page to get back to building."}),(0,r.jsxs)(en.View,{gap:16,css:ei.userAndErrorIdContainer,p:16,children:[!c&&(null==l?void 0:l.currentUser)?(0,r.jsxs)(en.View,{row:!0,gap:16,align:"center",children:[(0,r.jsx)(Z.Avatar,{src:l.currentUser.image,username:l.currentUser.username,size:48}),(0,r.jsx)(et.Text,{variant:"text",multiline:!1,children:l.currentUser.username})]}):null,(0,r.jsxs)("div",{css:ei.error,children:["Error: ",a.eventId]})]}),d?(0,r.jsx)(es,{bsod:a}):null,(0,r.jsx)(J.Button,{onClick:function(){return window.location.reload()},colorway:"primary",stretch:!0,text:"Reload"}),!1]}),(0,r.jsx)(Y.Global,{styles:[er]})]})};e.s(["default",0,el],911489);var eu=e.i(480028),ec=e.i(396776),ed=e.i(929872),ef=e.i(751273),ep=e.i(702762),eh=(0,Q.cssRecord)({rootContainer:[(0,n._)({},(0,ep.screenMediaForMinWidth)("tabletMin"),{display:"flex"}),X.rcss.flex.growAndShrink(1),X.rcss.p(16),X.rcss.colWithGap(12),X.rcss.align.center,X.rcss.display.none],heading:[X.rcss.width("100%"),{fontWeight:eu.tokens.fontWeightMedium}],contentContainer:[X.rcss.width("100%"),X.rcss.maxWidth(432),X.rcss.position.relative],topShadow:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+eu.tokens.backgroundRoot+", inset 0 -48px 24px -24px "+eu.tokens.backgroundRoot},feed:[X.rcss.height(416),X.rcss.colWithGap(24),X.rcss.justify.center,X.rcss.overflow("hidden"),X.rcss.backgroundColor.backgroundRoot]}),em=en.SpecializedView.form,eg=function(e){var t=e.user,n=(0,S.usePublishForm)(),i=n.selectedRepl,o=n.replTitleField,u=n.replDescriptionField,c=n.replIconUrl;return(0,r.jsxs)(ed.Surface,{background:"root",css:eh.rootContainer,children:[(0,r.jsx)(et.Text,{multiline:!1,variant:"small",color:"dimmer",css:eh.heading,children:"Preview"}),(0,r.jsxs)(en.View,{css:eh.contentContainer,children:[(0,r.jsx)(en.View,{css:eh.topShadow}),(0,r.jsxs)(en.View,{css:eh.feed,children:[(0,r.jsx)(j.ReplSkeleton,{}),i&&c?(0,r.jsx)(j.default,{post:{user:t,repl:(0,l._)((0,s._)({},i),{title:o.value,iconUrl:c,description:u.value,isTemplate:!0})}}):(0,r.jsx)(en.View,{grow:!0,align:"center",justify:"center",children:(0,r.jsx)(a.default,{})}),(0,r.jsx)(j.ReplSkeleton,{})]})]})]})},ev=["Basics","Icon","Cover page","Layout","Publishing"],ex=(0,Q.cssRecord)({rootContainer:[X.rcss.borderRadius(8),X.rcss.flex.row,X.rcss.overflow("hidden"),(0,n._)({},(0,ep.screenMediaForMinWidth)("tabletMax"),{minWidth:850})],formContainer:[X.rcss.minWidth(320),X.rcss.flex.growAndShrink(1),(0,n._)({},(0,ep.screenMediaForMinWidth)("tabletMin"),{maxWidth:370})],form:[X.rcss.colWithGap(16),X.rcss.flex.growAndShrink(1)],loadingContainer:[X.rcss.color.foregroundDimmer],submitButton:[{boxShadow:"0px 0px 16px 0px ".concat(eu.tokens.accentPrimaryDimmer," !important")}]});function ey(e){var t,n,i,s,l,j,U,G,$,H,z,W,q,K,Y,Q,Z,ee=e.replId,er=e.currentUser,ei=e.source,ea=e.getDesktopLayoutState,eo=(0,y.useIsMobile)({tablet:!0}),es=(0,x.useFlag)({type:"boolean",controlName:"flag-template-layout-author"}),eu=!eo&&es&&null!=ea,ep=(0,S.useReplPublish)({replId:ee,fileValidator:function(e){return(0,o._)(function(){var t;return(0,c._)(this,function(n){switch(n.label){case 0:if(!eM)return[2,{message:"Could not get file"}];if(!e)return[2,{message:"File path cannot be blank"}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,eM.stat(e)];case 2:if(!(t=n.sent()).exists||t.type!==g.FileType.File)return[2,{message:"File does not exist"}];return[3,4];case 3:return n.sent(),[2,{message:"Could not get file"}];case 4:return[2]}})})()},source:ei,canAuthorTemplateLayout:eu,getDesktopLayoutState:ea}),eh=ep.selectedRepl,ey=ep.isReplLoading,eb=ep.replLoadingError,ew=ep.replTitleField,e_=ep.replDescriptionField,ek=ep.iconUrlField,eS=ep.coverDefaultViewField,eC=ep.coverUrlField,ej=ep.coverFileField,eT=ep.layoutField,eE=ep.save,eR=ep.isSaving,eI=ep.savingError,eA=ep.publishInitialRelease,eP=ep.isPublishing,eD=ep.publishingError,eO=ep.isPublished,eN=(n=(t={repl:eh,currentUser:er}).repl,i=t.currentUser,l=(s=(0,u._)((0,F.useBsod)(),2))[0],j=s[1],U=(0,F.useClearBsod)(),$=(G=(0,u._)((0,d.useState)(function(){var e,t,n;return e=(0,O.default)({onUnrecoverableError:(0,V.default)({throwBsod:j,origin:"Publish: services/onUnrecoverableError"})}),t=(0,B.default)({container:e}),n=(0,D.default)({container:e,fs:t}),{container:e,fs:t,dotReplit:n}}),1)[0]).container,H=G.fs,z=G.dotReplit,q=(W=(0,u._)((0,d.useState)(function(){return $.getConnectionState()===N.ConnectionState.CONNECTED}),2))[0],K=W[1],Y=(0,M.useMemoizedConnectContext)(n?{repl:n,currentUser:i}:null),Q=(0,L.useFlaggedRetrier)(),(0,d.useEffect)(function(){if(n&&Y&&$.getConnectionState()===N.ConnectionState.DISCONNECTED)return $.connect({context:Y,getMinimumRetryDelayMs:Q}),function(){return $.close()}},[n,$,Y]),(0,d.useEffect)(function(){return $.onConnectionStateChanged(function(e){K(e===N.ConnectionState.CONNECTED)})},[$]),{isConnected:q,container:$,fs:H,dotReplit:z,bsodId:null==l?void 0:l.eventId,devClearBsod:function(){return U()}}),eM=eN.fs,eL=eN.dotReplit,eB=eN.bsodId,eV=eu&&!eO?[]:["Layout"],eF=(0,u._)((0,d.useState)(0),2),eU=eF[0],eG=eF[1],e$=ev[eU],eH=eU===ev.length-1,ez=(0,u._)((0,d.useState)({show:!1,isUpdate:!1}),2),eW=ez[0],eq=ez[1],eK=(0,u._)((0,d.useState)(function(){return Array(ev.length).fill(!1)}),2),eY=eK[0],eQ=eK[1],eX=(0,d.useCallback)(function(e,t){eY[e]=t,eQ(eY)},[eY]);(0,d.useEffect)(function(){ep.replTitleField.value&&ep.replDescriptionField.value?eX(0,!0):eX(0,!1),ep.iconUrlField.value?eX(2,!0):eX(2,!1),ep.coverDefaultViewField.value===S.CoverPageDefaultView.ReplImage&&ep.coverUrlField.value||ep.coverDefaultViewField.value===S.CoverPageDefaultView.ReplFile&&ep.coverFileField.value?eX(3,!0):eX(3,!1)},[eY,ep,eX]);var eZ=(0,P.default)({dotReplit:eL});(0,d.useEffect)(function(){eZ.isLoading||!eZ.entryPoint||ej.value||ej.setValue(eZ.entryPoint)},[eZ.isLoading,eZ.entryPoint,ej]);var eJ=(0,u._)((0,d.useState)(!1),2),e0=eJ[0],e1=eJ[1];(0,d.useEffect)(function(){e0||ee&&(ey||eO)||(e1(!0),(0,w.track)(_.events.PUBLISH_SELECTED,{source:ei}))},[e0,ei,ee,ey,eO]);var e2=(0,b.default)(!!(null==eh?void 0:eh.publishedAs)),e3=(0,b.default)(e$);if((0,d.useEffect)(function(){return function(){e2.current||(0,w.track)(_.events.PUBLISH_FLOW_EXITED,{source:ei,lastSectionVisited:e3.current})}},[ei,e2,e3]),eB)return(0,r.jsx)(el,{});if(eW.show&&eh)return(0,r.jsx)(C.PublishedReplShareInfo,{repl:eh});var e5={Basics:{hasError:!!(ew.error||e_.error),isValid:function(){return(0,o._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:return[4,Promise.all([ew.validate(),e_.validate()])];case 1:return[2,e.sent().every(function(e){return!e})]}})})()}},Icon:{hasError:!!ek.error,isValid:function(){return(0,o._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:return[4,ek.validate()];case 1:return[2,!e.sent()]}})})()}},"Cover page":{hasError:!!(eS.value===S.CoverPageDefaultView.ReplImage?eC.error:ej.error),isValid:function(){return(0,o._)(function(){var e;return(0,c._)(this,function(t){switch(t.label){case 0:if(eS.value!==S.CoverPageDefaultView.ReplImage)return[3,2];return[4,eC.validate()];case 1:return e=!t.sent(),[3,4];case 2:return[4,ej.validate()];case 3:e=!t.sent(),t.label=4;case 4:return[2,e]}})})()}},Layout:{hasError:!!eT.error,isValid:function(){return(0,o._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:return[4,eT.validate()];case 1:return[2,!e.sent()]}})})()}},Publishing:{hasError:!1,isValid:function(){return(0,o._)(function(){return(0,c._)(this,function(e){return[2,!0]})})()}}},e4=e5[e$].hasError,e8=e5[e$].isValid,e6=null!=(Z=ev.find(function(e){return e5[e].hasError}))?Z:null,e7=null;eh?eb||eI||eD?e7="Something went wrong - please try again":e4&&(e7="Please fill out the the form"):e7="Please select a Repl";var e9=!!(!eh||e4||eb||ey||eR||eP),te=function(e){return(0,o._)(function(){var t;return(0,c._)(this,function(n){switch(n.label){case 0:if(t=e9)return[3,2];return[4,e8()];case 1:t=!n.sent(),n.label=2;case 2:if(t)return[2];if(!eV.includes(ev[e]))return[3,4];return[4,te(e+1)];case 3:case 6:return n.sent(),[2];case 4:return n.trys.push([4,6,,7]),eG(e),[4,eE()];case 5:return n.sent(),[3,7];case 7:return[2]}})})()},tt=eU>0;return(0,r.jsx)(S.PublishInputContext.Provider,{value:ep,children:(0,r.jsxs)(ed.Surface,{css:ex.rootContainer,background:"default",dataCy:"publish-form-container",children:[(0,r.jsxs)(en.View,{css:ex.formContainer,p:16,gap:12,children:[(0,r.jsx)(et.Text,{variant:"subheadBig",multiline:!1,children:eO?"Edit publish settings":"Publish template"}),(0,r.jsxs)(em,{onSubmit:function(e){return(0,o._)(function(){var t,n,r,i,a,o;return(0,c._)(this,function(s){switch(s.label){case 0:if(e.preventDefault(),!eH)return[3,13];t=!0,n=!1,r=void 0,s.label=1;case 1:s.trys.push([1,6,7,8]),i=ev[Symbol.iterator](),s.label=2;case 2:if(t=(a=i.next()).done)return[3,5];return[4,e5[a.value].isValid()];case 3:if(!s.sent())return[2];s.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return o=s.sent(),n=!0,r=o,[3,8];case 7:try{t||null==i.return||i.return()}finally{if(n)throw r}return[7];case 8:if(eO)return[3,10];return[4,eA()];case 9:return s.sent(),eq({show:!0,isUpdate:!1}),[3,12];case 10:return[4,eE()];case 11:s.sent(),eq({show:!0,isUpdate:!0}),s.label=12;case 12:return[3,14];case 13:te(eU+1),s.label=14;case 14:return[2]}})})()},css:ex.form,children:[(0,r.jsx)(en.View,{row:!0,gap:4,align:"center",children:ev.map(function(e,t){return eV.includes(e)?null:(0,r.jsxs)(d.Fragment,{children:[0!==t&&(0,r.jsx)(k.FormHeadingSpacer,{}),(0,r.jsx)(k.FormHeadingButton,{isActive:eU===t,isComplete:eY[t],onClick:function(){return te(t)},disabled:e9,children:e})]},e)})}),(0,r.jsxs)(en.View,{grow:!0,shrink:!0,children:["Basics"===e$&&(0,r.jsx)(T.BasicsSection,{}),"Icon"===e$&&(0,r.jsx)(R.IconUrlSection,{}),"Cover page"===e$&&(0,r.jsx)(E.CoverPageSection,{fs:eM}),"Layout"===e$&&(0,r.jsx)(A.TemplateLayoutSection,{getCurrentLayoutState:ea}),"Publishing"===e$&&(0,r.jsx)(I.PublishingSection,{})]}),(0,r.jsxs)(en.View,{children:[eH&&e6&&e6!==e$?(0,r.jsx)(ec.StatusBanner,{colorway:"negative",icon:(0,r.jsx)(m.default,{}),text:"Please fix error in ".concat(e6," section")}):null,eI?(0,r.jsx)(ec.StatusBanner,{colorway:"negative",icon:(0,r.jsx)(m.default,{}),text:eI}):null,eD?(0,r.jsx)(ec.StatusBanner,{colorway:"negative",icon:(0,r.jsx)(m.default,{}),text:eD}):null]}),(0,r.jsxs)(en.View,{css:[tt?X.rcss.justify.spaceBetween:X.rcss.justify.end],row:!0,gap:8,align:"center",children:[tt?(0,r.jsx)(J.Button,{type:"button",iconLeft:(0,r.jsx)(f.default,{}),disabled:e9,onClick:function(){return te(eU-1)},text:"Back"}):null,eR?(0,r.jsx)(en.View,{css:ex.loadingContainer,row:!0,gap:4,children:(0,r.jsx)(a.default,{})}):null,(0,r.jsxs)(ef.Tooltip,{tooltip:e7,placement:"bottom",isDisabled:!e7,children:[!eH&&(0,r.jsx)(J.Button,{type:"submit",colorway:"primary",iconLeft:(0,r.jsx)(p.default,{}),disabled:e9,text:"Next",dataCy:"publish-form-next-button"}),eH&&!eO?(0,r.jsx)(J.Button,{type:"submit",colorway:"primary",css:ex.submitButton,iconLeft:eP?(0,r.jsx)(a.default,{}):(0,r.jsx)(h.default,{}),disabled:!!(e9||e6),text:"Submit",dataCy:"publish-form-publish-button"}):null,eH&&eO?(0,r.jsx)(J.Button,{type:"submit",colorway:"primary",iconLeft:eP?(0,r.jsx)(a.default,{}):(0,r.jsx)(h.default,{}),disabled:!!(e9||e6),text:"Save"}):null]})]})]})]}),(0,r.jsx)(eg,{user:er})]})})}var eb=e.i(877249),ew=(0,Q.cssRecord)({loadingContainer:[X.rcss.center,X.rcss.p(32),X.rcss.width(512),(0,n._)({},"@media (max-width: ".concat(eb.BREAKPOINTS.tabletMin,"px)"),[{width:"100%"}])],errorContainer:[X.rcss.center,X.rcss.p(32)]});function e_(e){var t,n,o=e.replId,s=e.source,l=e.getDesktopLayoutState,u=(0,i.usePublishCurrentUserQuery)(),c=(null==(n=u.data)||null==(t=n.currentUser)?void 0:t.__typename)==="CurrentUser"?u.data.currentUser:null;return u.loading?(0,r.jsx)(en.View,{css:ew.loadingContainer,children:(0,r.jsx)(a.default,{})}):u.error||!c?(0,r.jsx)(en.View,{css:ew.errorContainer,children:(0,r.jsx)(et.Text,{multiline:!1,children:"Something went wrong, please try again."})}):(0,r.jsx)(ey,{source:s,replId:o,currentUser:c,getDesktopLayoutState:l})}e.s(["default",()=>e_],598801);var ek=e.i(409823),eS=e.i(368964),eC=e.i(549194),ej=e.i(761201),eT=e.i(205104),eE=e.i(322823),eR=e.i(992193),eI=e.i(951262);function eA(){var e=(0,$._)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return eA=function(){return e},e}var eP={},eD=(0,H.gql)(eA()),eO=e.i(590985);function eN(){var e=(0,$._)(["\n  query PendingChanges($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return eN=function(){return e},e}var eM={},eL=(0,H.gql)(eN()),eB=e.i(428596),eV=e.i(127227),eF=e.i(607278),eU=e.i(630818),eG=en.SpecializedView.form;function e$(e){if(0===e.length)return{message:"You cannot leave this empty."}}function eH(e){var t,n,i=e.changeType;return i===eS.ReplFileChangeType.NewFile?(t=eu.tokens.accentPositiveStronger,n="Added"):i===eS.ReplFileChangeType.DeletedFile?(t=eu.tokens.accentNegativeStronger,n="Deleted"):(t=eu.tokens.foregroundDefault,n="Changed"),(0,r.jsx)(et.Text,{variant:"small",css:[{color:t}],multiline:!1,children:n})}var ez=(0,Q.cssRecord)({loadingContainer:[X.rcss.center],container:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:eu.tokens.space8}]});function eW(e){var t=e.pendingChangesState,n=e.isReplitTemplate;if(t.loading)return(0,r.jsx)(en.View,{css:ez.loadingContainer,children:(0,r.jsx)(a.default,{})});if(t.error)return(0,r.jsx)(ec.StatusBanner,{icon:(0,r.jsx)(m.default,{}),text:t.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!t.pendingChanges||0===t.pendingChanges.length)return n?null:(0,r.jsx)(et.Text,{children:"No file changes to publish."});var i=t.pendingChanges,o=i.slice(0,15);return(0,r.jsxs)(en.View,{css:ez.container,children:[o.map(function(e){return(0,r.jsxs)(d.Fragment,{children:[(0,r.jsxs)(en.View,{row:!0,gap:4,align:"center",children:[(0,r.jsx)(eU.default,{size:12,path:e.fileName}),(0,r.jsx)(et.Text,{multiline:!1,children:e.fileName})]},e.fileName),(0,r.jsx)(eH,{changeType:e.changeType})]},e.fileName)}),i.length>o.length&&(0,r.jsxs)(et.Text,{multiline:!1,children:["And ",i.length-o.length," other files..."]})]})}var eq=(0,Q.cssRecord)({header:[X.rcss.mb(16)],grid:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:eu.tokens.space8}],activeLabel:[X.rcss.p(4),{display:"flex"}]});function eK(e){var t,n,i,a,l=e.repl,f=(a=(i=(0,u._)((t={refetchQueries:["ReplEnvironmentHeader"]},n=(0,s._)({},eP,t),eI.useMutation(eD,n)),2))[0],{revertTemplateRelease:function(e){return(0,o._)(function(e){var t;return(0,c._)(this,function(n){switch(n.label){case 0:return[4,a({variables:{input:e.input}})];case 1:return[2,{data:(t=n.sent()).data,error:function(e){if(!e.data)return null;var t=e.data;if("revertReplRelease"in t){if("NotFoundError"===t.revertReplRelease.__typename||"UnauthorizedError"===t.revertReplRelease.__typename||"UserError"===t.revertReplRelease.__typename)return t.revertReplRelease.message;else if("Repl"!==t.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}(t)}]}})}).apply(this,arguments)},state:i[1]});return(0,r.jsxs)(en.View,{children:[(0,r.jsx)(et.Header,{level:1,variant:"subheadBig",css:eq.header,children:"Existing Releases"}),(0,r.jsx)(en.View,{css:eq.grid,children:l.releases.items.map(function(e){var t,n;return(0,r.jsxs)(d.Fragment,{children:[(0,r.jsx)("span",{children:(0,ek.default)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,r.jsx)("span",{children:e.description}),(0,r.jsx)("span",{style:{justifySelf:"end"},children:e.id===(null==(n=l.deployment)||null==(t=n.activeRelease)?void 0:t.id)?(0,r.jsx)("span",{css:eq.activeLabel,children:"(active)"}):(0,r.jsx)(J.Button,{text:"revert",colorway:"primary",size:"small",onClick:function(){var t;t=e.id,(0,o._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:return[4,f.revertTemplateRelease({input:{replId:l.id,releaseId:t}})];case 1:return e.sent(),[2]}})})()}})})]},e.id)})})]})}var eY=(0,Q.cssRecord)({container:[X.rcss.colWithGap(24),X.rcss.p(16)],descriptionLabel:[X.rcss.color.foregroundDimmer,{fontSize:eu.tokens.fontSizeSmall,lineHeight:eu.tokens.lineHeightSmall}],descriptionInput:[X.rcss.width("100%"),X.rcss.minHeight(64),X.rcss.maxHeight(128),{resize:"vertical"}]});function eQ(e){var t,i,a,f,p,g,b,w,_,k,S,j,T=e.repl,E=e.getDesktopLayoutState,R=(0,eB.useIdSeed)(),I=(0,u._)((0,d.useState)(!1),2),P=I[0],D=I[1],O=(0,u._)((0,d.useState)(!1),2),N=O[0],M=O[1],L=(p=function(e){var t,n,r,i,a=(r={variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1},i=(0,s._)({},eM,r),z.useQuery(eL,i)),o=a.data,l=a.loading,u=a.error;if(l)return{loading:l,pendingChanges:null,error:null};if(u)return{loading:!1,pendingChanges:null,error:u};var c=(null==o?void 0:o.getRepl.__typename)==="Repl"?o.getRepl:null;return c?{loading:!1,pendingChanges:(null==(n=c.deployment)||null==(t=n.activeRelease)?void 0:t.pendingChanges)||[],error:u}:{loading:!1,pendingChanges:null,error:Error("Repl not found")}}({replId:{replId:T.id}.replId}),g=(0,d.useMemo)(function(){return p.pendingChanges?p.pendingChanges.slice().sort(function(e,t){return e.fileName.localeCompare(t.fileName)}).map(function(e){return{file:e,pathDepth:(0,eT.getPathDepth)(e.fileName)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file}):[]},[p.pendingChanges]),(0,l._)((0,s._)({},p),{pendingChanges:g})),B=(0,eR.useCreateTemplateRelease)(),V=(0,eE.useFormField)("",e$),F=(null==(b=L.pendingChanges)?void 0:b.length)!==0,U=(null==(w=T.user)?void 0:w.username)===ej.OFFICIAL_TEMPLATE_USERNAME||(null==(_=T.user)?void 0:_.username)==="templates",G=(0,u._)((0,d.useState)({ran:!1,tested:!1}),2),$=G[0],H=G[1],W=(0,y.useIsMobile)({tablet:!0}),q=(0,x.useFlag)({type:"boolean",controlName:"flag-template-layout-author"}),K=!W&&q&&null!=E,Y=(0,u._)((t=T,a=(i=(0,u._)((0,d.useState)(t.releases.items[0]),2))[0],f=i[1],(0,d.useEffect)(function(){t.releases.items.length>0&&f(t.releases.items.slice().sort()[0])},[t.releases.items]),[a,f]),2),Q=Y[0],X=Y[1],Z=(null==Q?void 0:Q.initialLayoutState)!=null,ee=(0,eE.useFormField)(Z?eO.TemplateLayoutKind.Saved:eO.TemplateLayoutKind.Default,function(){}),er=Z?ee.value!==eO.TemplateLayoutKind.Saved:ee.value!==eO.TemplateLayoutKind.Default,ei=F||er;(0,d.useEffect)(function(){H({ran:!1,tested:!1})},[H]);var ea=!!(V.error||B.loading||!U&&!ei||U&&(!$.ran||!$.tested)),eo=U&&(null==(S=T.releases)||null==(k=S.items)?void 0:k.length)>1,es="";return(V.error?es="Please fill out the form":U||ei||(es="No file or layout changes to publish in this release"),P)?(0,r.jsx)(C.PublishedReplShareInfo,{repl:T}):N?(0,r.jsx)(en.View,{p:16,gap:16,children:(0,r.jsx)(eK,{repl:T})}):(0,r.jsxs)(eG,{onSubmit:function(e){return(0,o._)(function(){var t,n,r,i;return(0,c._)(this,function(a){switch(a.label){case 0:if(e.preventDefault(),ea||V.validate())return[2];return n=null,K&&(ee.value===eO.TemplateLayoutKind.Current?n=E():ee.value===eO.TemplateLayoutKind.Saved&&Z&&(n=null==Q?void 0:Q.initialLayoutState)),[4,B.createRelease({input:{replId:T.id,description:V.value,initialLayoutState:n}})];case 1:if((r=a.sent()).error)return[2];return D(!0),(null==(t=r.data)?void 0:t.createReplRelease.__typename)==="Repl"&&(X(i=r.data.createReplRelease.releases.items.slice().sort()[0]),ee.setValue((null==i?void 0:i.initialLayoutState)!=null?eO.TemplateLayoutKind.Saved:eO.TemplateLayoutKind.Default)),[2]}})})()},css:eY.container,children:[(0,r.jsx)(et.Header,{level:1,variant:"headerDefault",children:"Publish template changes"}),(0,r.jsxs)(en.View,{gap:8,children:[(0,r.jsx)(et.Header,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,r.jsx)(eW,{pendingChangesState:L,isReplitTemplate:U})]}),K?(0,r.jsxs)(en.View,{gap:8,children:[(0,r.jsx)(et.Header,{level:2,variant:"subheadDefault",children:"Workspace layout"}),(0,r.jsx)(A.TemplateLayoutSelector,{getCurrentLayoutState:E,savedLayoutState:null==Q?void 0:Q.initialLayoutState,templateLayout:ee})]}):null,U||ei?(0,r.jsxs)(en.View,{gap:4,children:[(0,r.jsx)("label",{htmlFor:R("description"),css:eY.descriptionLabel,children:"Description"}),(0,r.jsx)(eF.MultiLineInput,{id:R("description"),"aria-label":"Description",onChange:function(e){return V.setValue(e.target.value)},css:eY.descriptionInput,placeholder:"Explain what has changed about your template"}),V.error?(0,r.jsx)(ec.StatusBanner,{icon:(0,r.jsx)(m.default,{}),text:null==(j=V.error)?void 0:j.message,colorway:"negative"}):null]}):null,U?(0,r.jsx)(eX,{repl:T,state:$,onChange:function(e,t){return H(function(r){return(0,l._)((0,s._)({},r),(0,n._)({},e,t))})}}):null,(0,r.jsx)(en.View,{children:B.error?(0,r.jsx)(ec.StatusBanner,{icon:(0,r.jsx)(m.default,{}),text:B.error,colorway:"negative"}):null}),(0,r.jsxs)(en.View,{row:!0,gap:12,justify:"end",children:[eo?(0,r.jsx)(J.Button,{text:"Revert to older",colorway:"negative",onClick:function(){return M(!0)}}):null,(0,r.jsx)(ef.Tooltip,{tooltip:es,placement:"bottom",isDisabled:!es,children:(0,r.jsx)(J.Button,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,r.jsx)(h.default,{}),disabled:ea})})]})]})}function eX(e){var t,n,i,a=e.repl,o=e.state,s=e.onChange,l=(0,eB.useIdSeed)(),u=(0,eC.usePublishReleaseFormCurrentUserQuery)(),c=u.data,d=u.loading,f=null==c||null==(t=c.currentUser)?void 0:t.username;return(0,r.jsxs)(en.View,{gap:12,children:[(0,r.jsx)(et.Header,{level:2,children:"Official Replit Template publishing checklist"}),(0,r.jsxs)(en.View,{children:[(0,r.jsxs)(eZ,{children:[(0,r.jsx)(eV.Checkbox,{id:l("ran"),checked:o.ran,onChange:function(e){return s("ran",e)}}),(0,r.jsx)("label",{htmlFor:l("ran"),children:"Ran Repl:"}),(0,r.jsxs)("span",{children:["I ran the Repl to generate and cache package guesser result into"," ",(0,r.jsx)("code",{children:".upm"}),"."]})]}),(0,r.jsxs)(eZ,{children:[(0,r.jsx)(eV.Checkbox,{id:l("tested"),checked:o.tested,onChange:function(e){return s("tested",e)}}),(0,r.jsx)("label",{htmlFor:l("tested"),children:"Ran tests:"}),(0,r.jsxs)("span",{children:['I ran "Test working copy" for @',null==(n=a.user)?void 0:n.username,"/",a.slug," in"," ",(0,r.jsx)("a",{href:"https://template-tester.replit.app/",target:"_blank",children:"template tester"}),". ",(0,r.jsx)("br",{}),"If there are no tests, consider adding one."]})]})]}),d||(null==(i=a.user)?void 0:i.username)!==f?null:(0,r.jsx)(ec.StatusBanner,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}function eZ(e){var t=e.children;return(0,r.jsx)(en.View,{py:2,row:!0,gap:8,children:t})}e.s(["default",()=>eQ],157584);var eJ=((t={}).DeleteRepl="DeleteRepl",t.TransferRepl="TransferRepl",t.PowerUp="PowerUp",t.UnpublishTemplate="UnpublishTemplate",t.EditPublishedTemplateSettings="EditPublishedTemplateSettings",t.PublishTemplate="PublishTemplate",t.UpdatePublishedTemplate="UpdatePublishedTemplate",t.Share="Share",t.FeatureRepl="FeatureRepl",t);e.s(["Dialogs",()=>eJ],209221)},541792,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{d:"M15.47 12.47a.75.75 0 0 1 1.06 0l4 4a.747.747 0 0 1 .118.16c.016.027.032.054.044.083a.746.746 0 0 1-.078.715.751.751 0 0 1-.084.102l-4 4a.75.75 0 1 1-1.06-1.06l2.72-2.72H4a.75.75 0 0 1 0-1.5h14.19l-2.72-2.72a.75.75 0 0 1 0-1.06ZM7.47 2.47a.75.75 0 1 1 1.06 1.06L5.81 6.25H20l.077.004A.75.75 0 0 1 20 7.75H5.81l2.72 2.72a.75.75 0 1 1-1.06 1.06l-4-4a.754.754 0 0 1-.165-.812l.004-.01c.011-.027.027-.052.042-.078a.746.746 0 0 1 .119-.16l4-4Z"})}))}e.s(["default",()=>a])},2342,220578,761655,e=>{"use strict";var t=e.i(721281),n=e.i(878420),r=e.i(64386),i=e.i(276385),a=e.i(368964),o=e.i(602686),s=e.i(252204),l=e.i(882848),u=e.i(828322),c=e.i(591936),d=e.i(921521),f=e.i(209221),p=e.i(204977),h=e.i(979530),m=e.i(113388),g=e.i(269848),x=e.i(908628),y=e.i(541792),b=e.i(173993),w=e.i(491194),_="flag-olympic-torch";e.s(["flagTransferRepl",()=>_],220578);var k=e.i(993796),S=e.i(530658),C=e.i(389959),j=e.i(222342),T=e.i(700582),E=e.i(273042),R=e.i(464092);function I(e){var t=e.repl,n=(0,R.useForkContext)().fork,r=(0,E.useCheckForProject)(),i=(0,j.default)(),a=i.showConfirm,o=i.showError,s=(0,S._)((0,T.useCreateProjectFork)({onFork:function(){a("Repl forked, redirecting...")},onError:function(){o("Error creating fork - please try again")}}),2),l=s[0],u=s[1].loading;return{handleRemix:(0,C.useCallback)(function(){var e;(null==(e=t.org)?void 0:e.id)&&!r.loading&&r.hasProject?l({orgId:t.org.id,repl:t,forkSource:"replInfoHeader"}):n()},[t,n,r,l]),isCreatingProjectFork:u,fork:n}}e.s(["useHandleRemix",()=>I],761655);var A=e.i(142685),P=e.i(341126),D=e.i(674918),O=e.i(613355),N=e.i(714165),M=e.i(140487),L=e.i(91720);function B(e){var t=e.repl,a=(0,d.default)(),o=(0,C.useMemo)(function(){if(t.org){var e;return{translate:"no",text:t.org.name,css:[{"&, & span":O.rcss.flex.shrink(1)}],iconLeft:(0,i.jsx)(N.Avatar,{src:null!=(e=t.org.image)?e:null,username:t.org.name,fullName:t.org.name,size:24})}}return t.user?{translate:"no",text:t.user.username,css:[{"&, & span":O.rcss.flex.shrink(1)}],iconLeft:(0,i.jsx)(N.Avatar,{src:t.user.image,username:t.user.username,size:24})}:{text:""}},[t]);if(!t.user||!t.org&&!t.user)return null;var s=t.org?(0,P.orgLinks)(t.org).repls:(0,D.userLinkProps)(t.user),l=t.org?(0,P.orgLinks)(t.org).repls.href.toString():(0,D.userLinkProps)(t.user).as;return a?(0,i.jsx)(M.Button,(0,r._)((0,n._)({},o),{size:"small",onClick:function(){A.desktopAppApi.openExternalUrl(l)}})):(0,i.jsx)(L.ButtonLink,(0,r._)((0,n._)({},o),{as:s.as,href:s.href,prefetch:!1,size:"small"}))}var V=e.i(480028),F=e.i(88619),U=e.i(136540),G=e.i(119274),$=e.i(960178),H=e.i(751273),z=e.i(625484),W=e.i(185591);function q(e){var S,C,j=e.setActiveDialog,T=e.repl,E=e.showCloseButton,R=e.setIsEditing,A=e.updateReplInfo,P=(0,d.default)(),D=!!T.org&&T.org.type===a.OrgstypeEnumType.Team,N=I({repl:T}),q=N.handleRemix,K=function(e){var t=e.repl,n=e.isCreatingProjectFork,r=!!t.publishedAs,o=t.publishedAs===a.PublishedReplKind.Template,s=(0,d.default)(),l=!!t.org&&t.org.type===a.OrgstypeEnumType.Team,u=(0,k.useFlag)({controlName:_,logFlagToAnalytics:!1}),S=[];t.authorizations.fork.isAuthorized&&S.push({value:"Remix",label:"Remix",icon:n?(0,i.jsx)(g.default,{}):(0,i.jsx)(m.default,{}),isDisabled:n});var C=t.authorizations.publish.isAuthorized;if(!s&&!l){var j=t.isPrivate||!t.isRenamed||!C,T="";t.isPrivate?T="Make App public to publish":t.isRenamed||(T="Rename App to publish"),null==t.publishedAs&&S.push({value:f.Dialogs.PublishTemplate,label:"Publish as Template",icon:(0,i.jsx)(b.default,{}),isDisabled:j,description:T,dataCy:"repl-info-header-settings-publish"}),o&&!j&&(S.push({value:f.Dialogs.UpdatePublishedTemplate,label:"Publish template changes",icon:(0,i.jsx)(c.default,{})}),S.push({value:f.Dialogs.UnpublishTemplate,label:"Unpublish Template",icon:(0,i.jsx)(h.default,{})})),r&&!j&&S.push({value:f.Dialogs.EditPublishedTemplateSettings,label:"Edit Template publish settings",icon:(0,i.jsx)(p.default,{})})}if(l){var E=t.isPrivate;S.push({value:f.Dialogs.FeatureRepl,label:t.isFeaturedRepl?"Remove from Featured Apps":"Feature on Profile",icon:(0,i.jsx)(x.default,{}),description:E?"Make App public to feature":"",isDisabled:E})}return t.authorizations.deleteRepl.isAuthorized&&(u&&S.push({isDestructive:!1,value:f.Dialogs.TransferRepl,label:"Transfer",icon:(0,i.jsx)(y.default,{})}),S.push({isDestructive:!0,value:f.Dialogs.DeleteRepl,label:"Delete",icon:(0,i.jsx)(w.default,{})})),S}({repl:T,isCreatingProjectFork:N.isCreatingProjectFork}),Y=T.publishedAs===a.PublishedReplKind.Template;return(0,i.jsxs)(z.View,{gap:8,p:8,children:[(0,i.jsxs)(z.View,{css:[(0,t._)({},O.media.max("mobileMax"),[O.rcss.flex.columnReverse,O.rcss.align.start,{gap:V.tokens.space8}])],row:!0,gap:8,align:"center",justify:"space-between",children:[(0,i.jsx)(z.View,{row:!0,gap:8,css:[O.rcss.center,O.rcss.flex.shrink(1)],children:(0,i.jsx)(B,{repl:T})}),(0,i.jsxs)(z.View,{css:[(0,t._)({},O.media.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],align:"center",row:!0,gap:8,children:[P?null:(0,i.jsx)(L.ButtonLink,(0,r._)((0,n._)({size:"small",prefetch:!1},(0,W.replViewLinkProps)(T)),{iconRight:(0,i.jsx)(s.default,{}),colorway:"primary",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}})),Y||P||D?null:(0,i.jsx)(H.Tooltip,{tooltip:"Make Repl public to share",isDisabled:!T.isPrivate,children:(0,i.jsx)(M.Button,{size:"small",type:"button",iconLeft:(0,i.jsx)(c.default,{}),onClick:function(){j(f.Dialogs.Share)},text:"Share",disabled:T.isPrivate})}),P?(0,i.jsx)(F.CopyButton,{textToCopy:window.location.href,tooltipText:"Copy App URL",tooltipSuccessText:"Copied!",iconLeft:(0,i.jsx)(l.default,{}),text:""}):null,K.length>0&&(0,i.jsx)(G.PopupMenu,{dataCy:"repl-info-header-settings",trigger:(0,i.jsx)(U.IconButton,{alt:"More options",size:32,children:(0,i.jsx)(u.default,{size:16})}),"aria-label":"More options",onAction:function(e){switch(e){case"Remix":return void q();case f.Dialogs.UpdatePublishedTemplate:j(f.Dialogs.UpdatePublishedTemplate);return;case f.Dialogs.UnpublishTemplate:j(f.Dialogs.UnpublishTemplate);return;case f.Dialogs.DeleteRepl:j(f.Dialogs.DeleteRepl);return;case f.Dialogs.TransferRepl:j(f.Dialogs.TransferRepl);return;case f.Dialogs.EditPublishedTemplateSettings:j(f.Dialogs.EditPublishedTemplateSettings);return;case f.Dialogs.PublishTemplate:j(f.Dialogs.PublishTemplate);return;case f.Dialogs.FeatureRepl:j(f.Dialogs.FeatureRepl);return}},children:K.map(function(e){return(0,i.jsx)(G.MenuItem,{id:e.value,label:e.label,icon:e.icon,isDestructive:e.isDestructive,isDisabled:e.isDisabled,description:e.description,dataCy:e.dataCy},e.value)})}),E?(0,i.jsx)(U.IconButton,{alt:"Close",tooltipBehavior:"hidden",onClick:function(){A(),R(!1)},children:(0,i.jsx)(o.default,{})}):null]})]}),(null==(S=T.org)?void 0:S.type)===a.OrgstypeEnumType.Team&&(null==(C=T.user)?void 0:C.__typename)==="User"?(0,i.jsxs)($.Text,{variant:"small",color:"dimmest",translate:"no",children:["Created by @",T.user.username]}):null]})}e.s(["ReplInfoHeader",()=>q],2342)},759967,e=>{"use strict";var t=e.i(541793),n=e.i(852819),r=(0,t.atom)(void 0);function i(){return(0,n.useValue)(r)}function a(){return(0,n.useSet)(r)}e.s(["useIsExpertMode",()=>i,"useSetIsExpertMode",()=>a])},740616,355778,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(530658),i=e.i(276385),a=e.i(485273),o=e.i(389959),s=e.i(830675),l=e.i(368964),u=e.i(737362),c=e.i(269848),d=e.i(452412),f=e.i(921521),p=e.i(993796),h=e.i(98816),m=e.i(222342),g=e.i(207237),x=e.i(213733),y=e.i(858248),b=e.i(709485),w=e.i(973519),_=e.i(341126),k=e.i(49578),S=e.i(445016),C=e.i(773240),j=e.i(598801),T=e.i(701366),E=e.i(157584),R=e.i(905282),I=e.i(236379),A=e.i(420802),P=e.i(2342),D=e.i(209221),O=e.i(759967),N=e.i(446530),M=e.i(613355),L=e.i(428596),B=e.i(965153),V=e.i(140487),F=e.i(607278),U=e.i(739521),G=e.i(624782),$=e.i(625041),H=e.i(929872),z=e.i(960178),W=e.i(625484),q=e.i(464092),K=e.i(836224),Y=e.i(151902),Q=e.i(541792),X=e.i(416298),Z=e.i(341190),J=e.i(654647),ee=e.i(257982),et=e.i(714165),en=e.i(85742),er=e.i(12034),ei=(0,N.cssRecord)({header:[M.rcss.fontWeight.medium,M.rcss.p(4),M.rcss.color.foregroundDimmer]}),ea=function(e){var t,n,r,a=e.item;switch(a.__typename){case"CurrentUser":case"Team":t=a.username,n=a.image;break;case"Org":t=a.name,n=null!=(r=a.image)?r:null;break;default:(0,ee.default)(a)}return(0,i.jsx)(en.ListBoxItem,{id:a.id,label:t,icon:(0,i.jsx)(et.Avatar,{src:n,size:16,username:t,isOrg:"Org"===a.__typename})},a.id)};let eo=function(e){var t=e.id,n=e.owners,r=e.selectedOwner,a=e.disabled,o=e.setSelectedOwner,s=e.dataCy,l=n.filter(function(e){return"CurrentUser"===e.__typename}),u=n.filter(function(e){return"Org"===e.__typename}),c=n.filter(function(e){return"Team"===e.__typename}),d=(0,p.useFlag)({controlName:"flag-pringle-krew",default:!1});return(0,i.jsxs)(er.Select,{id:t,dataCy:s,"aria-labelledby":t,defaultSelectedKey:r.id,onSelectionChange:function(e){var t=n.find(function(t){return t.id===e});t&&o(t)},isDisabled:a,children:[l.length>0?(0,i.jsxs)(J.ListBoxSection,{children:[(0,i.jsx)(Z.Header,{css:ei.header,children:"Personal"}),l.map(function(e){return(0,i.jsx)(ea,{item:e},e.id)})]}):null,u.length>0?(0,i.jsxs)(J.ListBoxSection,{children:[(0,i.jsx)(Z.Header,{css:ei.header,children:"Organizations"}),u.map(function(e){return(0,i.jsx)(ea,{item:e},e.id)})]}):null,d&&c.length>0?(0,i.jsxs)(J.ListBoxSection,{children:[(0,i.jsx)(Z.Header,{css:ei.header,children:"Teams"}),c.map(function(e){return(0,i.jsx)(ea,{item:e},e.id)})]}):null]})};var es=e.i(262522),el=e.i(396776),eu=e.i(552144),ec=W.SpecializedView.form,ed=(0,N.cssRecord)({form:[M.rcss.colWithGap(24)]}),ef=function(e){var t,n,a,s=e.currentUser,l=e.repl,u=e.onDone,c=e.onCancel,d=l.owner?l.owner:l.org,f=null!=(a=null==(t=l.owner)?void 0:t.username)?a:null==(n=l.org)?void 0:n.slug,p=f?"".concat(f,"/").concat(l.slug):l.slug,h=(0,r._)((0,es.useOwner)(s,null==d?void 0:d.id),3),m=h[0],g=h[1],x=h[2],y=(0,r._)((0,o.useState)(""),2),b=y[0],w=y[1],_=b===p,k=(0,L.useIdSeed)();return(0,i.jsx)(ec,{css:ed.form,onSubmit:function(e){e.preventDefault(),_&&(alert("Beep boop would transfer Repl, redirecting"),u())},children:(0,i.jsxs)(W.View,{gap:16,children:[(0,i.jsx)(z.Text,{children:"Transfer this Repl to another account or organization."}),(0,i.jsx)(eu.StatusBannerButton,{colorway:"grey",text:"Transferring ownership might result in losing some features, depending on the subscription status of the selected organization. Click here for more details.",iconLeft:(0,i.jsx)(X.default,{}),href:"https://docs.replit.com/teams/collaboration-on-replit#transferring-repls-to-organizations",target:"_blank"}),(0,i.jsxs)(W.View,{gap:4,children:[(0,i.jsx)("label",{htmlFor:k("owner"),children:(0,i.jsx)(z.Text,{color:"dimmer",variant:"small",children:"New Owner"})}),(0,i.jsx)(eo,{id:k("owner"),owners:x,selectedOwner:m,setSelectedOwner:g})]}),(0,i.jsx)(el.StatusBanner,{colorway:"negative",text:"You do not have permission to transfer this Repl."}),(0,i.jsxs)(W.View,{gap:4,children:[(0,i.jsx)("label",{htmlFor:k("confirmName"),children:(0,i.jsxs)(z.Text,{color:"dimmer",variant:"small",children:["Type the name ",p," to delete"]})}),(0,i.jsx)(F.Input,{id:k("confirmName"),disabled:!1,autoFocus:!0,value:b,onChange:function(e){return w(e.currentTarget.value)}})]}),(0,i.jsxs)(W.View,{row:!0,gap:12,justify:"end",children:[(0,i.jsx)(V.Button,{type:"button",onClick:c,text:"Cancel"}),(0,i.jsx)(V.Button,{type:"submit",disabled:!_,iconLeft:(0,i.jsx)(Q.default,{}),colorway:"negative",text:"Yes, transfer this Repl"})]})]})})},ep=function(e){var t=e.repl,n=e.onDone,r=e.onCancel,a=(0,Y.useTransferReplDialogQuery)().data,o=null==a?void 0:a.currentUser;return(0,i.jsxs)(W.View,{gap:24,children:[(0,i.jsxs)(z.Header,{variant:"subheadBig",level:2,children:["Transfer ",t.title]}),o?(0,i.jsx)(ef,{currentUser:o,repl:t,onDone:n,onCancel:r}):(0,i.jsx)(W.View,{align:"center",children:(0,i.jsx)(c.default,{})})]})};e.s(["TransferReplDialog",()=>ep],355778);var eh=(0,N.cssRecord)({loadingRoot:[M.rcss.center,M.rcss.p(16)],root:{overflow:"auto",maxHeight:"80vh"},form:[M.rcss.p(8)]}),em=function(e){var t=e.isExpertModeAllowed,n=(0,O.useIsExpertMode)(),r=(0,O.useSetIsExpertMode)(),a=(0,w.useGlobalModal)().show,o=(0,m.default)().showConfirm,s=(0,p.useFlag)({controlName:"flag-agent-everywhere"}),l=(0,p.useFlag)({controlName:"flag-toggle-expert"});if(!t||!s||!l)return null;var u=function(e){e?(o("Custom Stack disabled"),r(!n)):a("ExpertModeModal",{onConfirm:function(){o("Custom Stack enabled"),r(!n)}})};return(0,i.jsx)(B.AccordionItem,{headerContent:(0,i.jsxs)(W.View,{p:4,row:!0,justify:"space-between",align:"center",gap:8,children:[(0,i.jsx)(z.Text,{children:"Custom Stack"}),(0,i.jsx)(G.Pill,{text:"Advanced"})]}),children:(0,i.jsxs)(W.View,{px:8,pb:8,pt:4,gap:8,children:[(0,i.jsx)(z.Text,{variant:"small",children:"With Custom Stack enabled, Agent has fewer restrictions, allowing you to work with any language or framework."}),(0,i.jsx)(V.Button,{text:n?"Disable Custom Stack":"Enable Custom Stack",onClick:function(){return u(null!=n&&n)},stretch:!0,type:"button"})]})})};function eg(e){var t=e.getDesktopLayoutState,n=e.setIsEditing,r=e.showCloseButton,a=(0,g.default)(),o=(0,u.useWorkspaceHeaderReplInfoQuery)({variables:{replId:a}}).data,s=(null==o?void 0:o.getRepl.__typename)==="Repl"?o.getRepl:null;return s?(0,i.jsx)(ex,{getDesktopLayoutState:t,setIsEditing:n,showCloseButton:r,repl:s}):(0,i.jsx)(W.View,{css:eh.loadingRoot,children:(0,i.jsx)(c.default,{})})}var ev=[l.ReplWorkspaceCta.Submit,l.ReplWorkspaceCta.PublishTemplate,l.ReplWorkspaceCta.EditTemplate];function ex(e){var c,p,g,w,O,N,B,V=e.repl,G=e.getDesktopLayoutState,Y=e.showCloseButton,Q=e.setIsEditing,X=(0,a.useRouter)(),Z=(0,f.default)(),J=(0,r._)((0,o.useState)(null),2),ee=J[0],et=J[1],en=(0,r._)((0,o.useState)(V.isRenamed?V.title:""),2),er=en[0],ei=en[1],ea=(0,r._)((0,o.useState)(V.description||""),2),eo=ea[0],es=ea[1],el=(0,r._)((0,o.useState)(V.rawTemplateLabel),2),eu=el[0],ec=el[1],ed=(0,m.default)().showError,ef=V.publishedAs===l.PublishedReplKind.Template,eg=(null==(c=V.org)?void 0:c.type)!=="team"&&V.authorizations.editVisibility.isAuthorized;(0,o.useEffect)(function(){es(V.description||"")},[V.description]);var ex=(0,o.useRef)(V),ey=(0,r._)((0,u.useWorkspaceHeaderReplInfoDeleteReplMutation)({variables:{id:V.id},onCompleted:function(){var e;if(Z)return void X.push("/desktopApp/home");if((null==(e=V.org)?void 0:e.type)==="team"){var t=(0,_.orgLinks)(V.org);X.push(t.home.href);return}X.push("/home","/~")},update:function(e,t){var n;(null==(n=t.data)?void 0:n.deleteRepl)&&(e.evict({id:e.identify(t.data.deleteRepl)}),e.gc())},onError:function(e){return ed((0,x.default)(e.message))}}),2),eb=ey[0],ew=ey[1].loading,e_=(0,r._)((0,u.useWorkspaceHeaderReplInfoUpdateReplMutation)({onError:function(e){return ed((0,x.default)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,n=ex.current,r={};n.description!==t.description&&(r.description=t.description),n.title!==t.title&&(r.title=t.title),n.url!==t.url&&(r.url=t.url,window.history.replaceState(null,"",t.url+window.location.search+window.location.hash)),n.isRenamed!==t.isRenamed&&(r.isRenamed=!!t.isRenamed),ex.current=V,Object.keys(r).length>0&&Q(!1)}}),2),ek=e_[0],eS=e_[1].loading,eC=(0,r._)((0,u.useWorkspaceHeaderReplInfoUnpublishTemplateMutation)({variables:{input:{replId:V.id}},onError:function(e){s.captureException(e),ed((0,x.default)(e.message))}}),2),ej=eC[0],eT=eC[1],eE=(0,o.useMemo)(function(){return!!er&&er!==V.title||eu!==V.rawTemplateLabel||(""!==eo||!!V.description)&&eo!==V.description},[V,er,eo,eu]),eR=(0,h.default)(eE),eI=(0,o.useCallback)(function(){eE&&ek({variables:{input:{id:V.id,title:er.trim()||V.title,description:eo,templateLabel:V.authorizations.editTemplateMetadata.isAuthorized?eu:void 0}}})},[eE,ek,V,er,eo,eu]),eA=(0,h.default)(eI);(0,o.useLayoutEffect)(function(){return function(){eR.current&&eA.current()}},[eA,eR]);var eP=function(){ek({variables:{input:{id:V.id,isPrivate:!V.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,n._)((0,t._)({},V),{isPrivate:!V.isPrivate})}}}),(0,y.track)(b.events.PRIVATE_TOGGLED,{enabled:!V.isPrivate,source:"workspace_info_modal"})},eD=V.isRenamed?"Name your App":"Default name: ".concat(V.title),eO=ev.includes(V.workspaceCta),eN=(0,L.useIdSeed)(),eM=(null==(p=V.owner)?void 0:p.__typename)==="Team";return(0,i.jsxs)("div",{css:eh.root,"data-can-change-description":V.authorizations.editMetadata.isAuthorized,children:[(0,i.jsx)(q.ForkContextProvider,{forkParams:{trackingData:{forkSource:"editReplPopoverMenuItem"}},repl:V,children:(0,i.jsx)(P.ReplInfoHeader,{repl:V,showCloseButton:Y,setActiveDialog:et,setIsEditing:Q,updateReplInfo:eI})}),(0,i.jsx)("form",{css:eh.form,onSubmit:function(e){e.preventDefault(),eI()},children:(0,i.jsxs)(W.View,{align:"stretch",gap:16,children:[(0,i.jsxs)(H.Surface,{background:"default",gap:16,children:[(0,i.jsx)(W.View,{children:(0,i.jsxs)(W.View,{gap:4,children:[(0,i.jsxs)(W.View,{row:!0,justify:"space-between",align:"end",children:[(0,i.jsx)("label",{htmlFor:eN("name"),children:(0,i.jsx)(z.Text,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,i.jsx)(K.default,{maxLength:60,value:er,hideLabel:!0})]}),(0,i.jsx)(F.Input,{style:{cursor:V.authorizations.editMetadata.isAuthorized?"auto":"not-allowed"},disabled:!V.authorizations.editMetadata.isAuthorized,maxLength:60,placeholder:eD,value:er,onChange:function(e){return ei(e.target.value)},spellCheck:!1,id:eN("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,i.jsx)(W.View,{children:(0,i.jsxs)(W.View,{gap:4,children:[(0,i.jsxs)(W.View,{row:!0,justify:"space-between",align:"end",children:[(0,i.jsx)("label",{htmlFor:eN("description"),children:(0,i.jsx)(z.Text,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,i.jsx)(K.default,{maxLength:A.REPL_DESCRIPTION_MAX_LENGTH,value:eo,hideLabel:!0})]}),(0,i.jsx)(F.MultiLineInput,{disabled:!V.authorizations.editMetadata.isAuthorized,maxLength:A.REPL_DESCRIPTION_MAX_LENGTH,value:eo,onChange:function(e){return es(e.target.value)},placeholder:"What does this App do?",css:[M.rcss.minHeight(96),M.rcss.maxHeight(256),{resize:"vertical"}],id:eN("description")})]})})]}),ef&&V.authorizations.editTemplateMetadata.isAuthorized?(0,i.jsx)(H.Surface,{background:"default",gap:4,children:(0,i.jsxs)(W.View,{gap:4,children:[(0,i.jsx)("label",{htmlFor:eN("template"),children:(0,i.jsx)(z.Text,{color:"dimmer",variant:"small",multiline:!1,children:"Template label"})}),(0,i.jsx)(F.Input,{value:eu,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return ec(e.target.value)},id:eN("template")})]})}):null]})}),eO?null:(0,i.jsxs)(W.View,{gap:24,p:8,children:[(0,i.jsxs)(W.View,{gap:24,children:[(0,i.jsx)(S.default,{replId:V.id,authz:V.authorizations.editMetadata,initialIconUrl:V.iconUrl,originIconUrl:null==(g=V.templateInfo)?void 0:g.iconUrl}),(0,i.jsx)(k.default,{replId:V.id,authz:V.authorizations.editMetadata,initialImageUrl:null!=(B=V.imageUrl)?B:null==(w=V.templateInfo)?void 0:w.imageUrl,originImageUrl:null==(O=V.templateInfo)?void 0:O.imageUrl})]}),V.config.grabbyExtensionVersion?(0,i.jsxs)(W.View,{gap:4,align:"start",children:[(0,i.jsx)(z.Text,{variant:"small",color:"dimmer",children:"Original source"}),(0,i.jsx)($.PillLink,{text:"Replit Browser Extension",href:"/grab",target:"_blank"})]}):null,eg?(0,i.jsx)(I.PrivacyToggle,{isPrivate:V.isPrivate,onChange:function(){if(!eS){(0,y.track)(b.events.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!V.isPrivate,source:"workspace_info_modal"});var e=!V.isPrivate;if(V.authorizations.editVisibility.isAuthorized||!1===e)return void eP();ed(V.authorizations.editVisibility.message)}},isTeam:eM}):null]}),(0,i.jsx)(em,{isExpertModeAllowed:!0===V.config.isAgentRepl}),(0,i.jsx)(R.default,{isOpen:ee===D.Dialogs.DeleteRepl,onClose:function(){return et(null)},selectedRepls:[V],onDelete:function(){eb()},deleting:ew}),(0,i.jsx)(U.Modal,{isOpen:ee===D.Dialogs.UnpublishTemplate,onRequestClose:function(){return et(null)},children:(0,i.jsx)(d.default,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return et(null)},onConfirm:function(){eT.loading||(ej(),et(null))},children:"Your App will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,i.jsx)(U.Modal,{isOpen:ee===D.Dialogs.EditPublishedTemplateSettings,onRequestClose:function(){return et(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,i.jsx)(j.default,{source:"replEnvironment",replId:V.id,getDesktopLayoutState:G})}),(0,i.jsx)(U.Modal,{isOpen:ee===D.Dialogs.PublishTemplate,onRequestClose:function(){return et(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,i.jsx)(j.default,{source:"replEnvironment",replId:V.id,getDesktopLayoutState:G})}),(0,i.jsx)(U.Modal,{isOpen:ee===D.Dialogs.UpdatePublishedTemplate,onRequestClose:function(){return et(null)},noPadding:!0,children:(0,i.jsx)(E.default,{repl:V,getDesktopLayoutState:G})}),(0,i.jsx)(U.Modal,{isOpen:ee===D.Dialogs.Share,onRequestClose:function(){return et(null)},noPadding:!0,children:(0,i.jsx)(T.PublishedReplShareInfo,{repl:V})}),(0,i.jsx)(U.Modal,{isOpen:ee===D.Dialogs.TransferRepl,onRequestClose:function(){return et(null)},children:(0,i.jsx)(ep,{repl:V,onDone:function(){return et(null)},onCancel:function(){return et(null)}})}),(0,i.jsx)(U.Modal,{isOpen:ee===D.Dialogs.FeatureRepl,onRequestClose:function(){return et(null)},centered:!0,maxWidth:650,children:(0,i.jsx)(C.default,{isFeatured:V.isFeaturedRepl,repl:V,orgId:null==(N=V.org)?void 0:N.id,onCompleted:function(){return et(null)}})})]})}e.s(["default",()=>eg],740616)},381010,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{d:"M1.47 1.47a.75.75 0 0 1 1.06 0l8.168 8.168.01.01L22.53 21.47a.75.75 0 1 1-1.06 1.06l-5.511-5.51a.749.749 0 0 1-.984-.055 4.25 4.25 0 0 0-5.95 0 .75.75 0 0 1-1.05-1.071A5.75 5.75 0 0 1 12 14.25l.281.007c.363.018.72.07 1.07.154l-3.425-3.425a9.251 9.251 0 0 0-4.4 2.409.75.75 0 0 1-1.051-1.072 10.75 10.75 0 0 1 4.232-2.555L6.011 7.07A14.25 14.25 0 0 0 2.5 9.38a.75.75 0 0 1-1-1.118 15.752 15.752 0 0 1 3.389-2.312L1.469 2.53a.75.75 0 0 1 0-1.06ZM12.01 19.25a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1 0-1.5h.01ZM16.344 10.962a.75.75 0 0 1 1.023-.275 10.755 10.755 0 0 1 2.158 1.636.75.75 0 0 1-1.05 1.072 9.256 9.256 0 0 0-1.856-1.41.75.75 0 0 1-.275-1.023ZM10.647 4.31A15.75 15.75 0 0 1 22.5 8.262a.75.75 0 0 1-1 1.118 14.253 14.253 0 0 0-10.724-3.576.75.75 0 0 1-.129-1.494Z"})}))}e.s(["default",()=>a])},472883,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245),i=e.i(304277);function a(){var e=(0,n._)(["\n  query GetReplIcon($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        iconUrl\n      }\n    }\n  }\n"]);return a=function(){return e},e}e.i(566901);var o={},s=(0,r.gql)(a());function l(e){var n=(0,t._)({},o,e);return i.useQuery(s,n)}e.s(["useGetReplIconQuery",()=>l])},406802,e=>{"use strict";var t=e.i(389959),n=e.i(98816);function r(e,r){var i=(0,n.default)(e);(0,t.useEffect)(function(){if(null!==r){var e=setTimeout(function(){null!==i.current&&i.current()},r);return function(){return clearTimeout(e)}}},[r,i])}e.s(["useTimeout",()=>r])},629756,e=>{"use strict";var t=e.i(530658),n=e.i(389959),r=e.i(472883),i=e.i(349597),a=e.i(406802),o=e.i(529810);function s(e){var s=e.replId,l=e.replIconUrl,u=(0,t._)((0,n.useState)(null),2),c=u[0],d=u[1],f=(0,t._)((0,n.useState)(!1),2),p=f[0],h=f[1],m=(0,o.default)().container,g=l===i.DEFAULT_REPL_ICON&&null===c&&!p;(0,a.useTimeout)(function(){g&&h(!0)},g?3e4:null);var x=(0,r.useGetReplIconQuery)({variables:{replId:s},pollInterval:2e3*!!g,onCompleted:function(e){var t,n=(null==e||null==(t=e.getRepl)?void 0:t.__typename)==="Repl"?e.getRepl.iconUrl:null;l===i.DEFAULT_REPL_ICON&&n&&n!==i.DEFAULT_REPL_ICON&&(m.exec("sh","-c","curl -o generated-icon.png ".concat(n)),d(n))}}).error;return{loading:g,error:x,generatedIconUrl:c}}e.s(["usePollForGeneratedReplIcon",()=>s])},57527,e=>{"use strict";var t=e.i(389959),n=e.i(82259);e.i(877212);var r=e.i(924908);e.i(925218);var i=e.i(267103),a=e.i(802088);function o(){var e=(0,r.useChatter)(),n=(0,i.useObservable)(e.sessions.agent.current);return(0,t.useMemo)(function(){return null==n?void 0:n.reduce(l,1).result},[n])}function s(e){var t=o();(0,a.useObserver)(t,{next:function(t){t.toPresent&&e(t.toPresent.toolData,t.toPresent.eventId)}})}var l={direction:"reverse",state:{toPresent:void 0},reducer:function(e,t){if(e.sender.type!==n.UserType.AI)return!1;var r,i=e.contents.contents;if((null==i?void 0:i.$kind)==="cloudBudgetExceededEventContents")return t.toPresent={toolData:{$kind:"cloudBudgetExceeded",data:{serviceName:null!=(r=i.cloudBudgetExceededEventContents.serviceName)?r:""}},eventId:e.id},!1;if((null==i?void 0:i.$kind)==="agentTimelineEventContents"){var a=i.agentTimelineEventContents.toolData;switch(null==a?void 0:a.$kind){case"presentResultsToolData":return t.toPresent={toolData:{$kind:"presentResultsToolData",data:a.presentResultsToolData},eventId:e.id},!1;case"deployData":return t.toPresent={toolData:{$kind:"deployData",data:a.deployData},eventId:e.id},!1}}}};e.s(["useOnPresentToUser",()=>s,"usePresentToUserEvents",()=>o])},899869,e=>{"use strict";var t=e.i(265957);function n(){var e=(0,t.usePrepareDatabaseState)().state,n=(0,t.getStageByType)(e.stages,t.PrepareDatabaseStageType.ValidatingDiffStatements),r=(0,t.getStageByType)(e.stages,t.PrepareDatabaseStageType.GeneratingDiffStatements),i=r&&r.status===t.PrepareDatabaseBaseStageStateStatus.Paused,a=n&&(n.status===t.PrepareDatabaseBaseStageStateStatus.Completed&&!n.approved||n.status===t.PrepareDatabaseBaseStageStateStatus.Paused&&!n.approved);return i||a}e.s(["usePauseProvisionStage",()=>n])},522821,e=>{"use strict";e.i(877212);var t=e.i(924908);e.i(925218);var n=e.i(641555);function r(){var e=(0,t.useChatter)();return(0,n.useObservableMemo)(function(){return e.sessions.agent.current.select(function(e){return null==e?void 0:e.id})},[e])}e.s(["useActiveAgentSessionId",()=>r])},469429,e=>{"use strict";var t=e.i(374106);e.i(877212);var n=e.i(924908);e.i(925218);var r=e.i(267103),i=e.i(641555);function a(){var e=(0,n.useChatter)(),t=(0,r.useObservable)(e.sessions.agent.current);return!!(0,i.useObservableMemo)(function(){return null==t?void 0:t.reduce(o,"global")},[t])}var o={direction:"reverse",state:{hasCheckpoint:!1},debug:{name:"CheckpointReducer"},map:function(e){return e.hasCheckpoint},reducer:function(e,n){if((0,t.isEventAgentToolDataKind)(e,"commitData"))return n.hasCheckpoint=!0,!1}};e.s(["useHasAgentCheckpoint",()=>a])},537548,e=>{"use strict";var t,n=((t={}).Welcome="Welcome",t.Forks="Forks",t.ProjectPane="ProjectPane",t),r={id:"workspace-repo-projects-tour",steps:[{title:"Welcome to your Project",id:"Welcome",content:"Click here to see all forks inside this Project and navigate between them.",hideOverlay:!0},{title:"Project Forks",id:"Forks",content:"Move to a different Repl within this Project, or create a new one",hideTooltip:!0,hideOverlay:!0},{title:"Project Pane",id:"ProjectPane",content:"View your changes, and merge them back into the main Repl when you're ready.",hideOverlay:!0}]};e.s(["StepIds",()=>n,"projectsTour",()=>r])},353583,e=>{"use strict";var t=e.i(389959),n=e.i(759967),r=e.i(729122);function i(){var e=(0,r.useHasAgentConfiguredWorkflows)(),i=(0,r.useHasNonGeneratedWorkflowSet)(),a=(0,n.useIsExpertMode)();return(0,t.useMemo)(function(){return!a&&!e&&!i},[a,e,i])}e.s(["useIsAgentRunButtonNotConfigured",()=>i])},923893,635925,849004,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(878420),i=e.i(569384),a=e.i(973245),o=e.i(304277);e.i(566901);var s=e.i(951262);function l(){var e=(0,i._)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return u=function(){return e},e}function c(){var e=(0,i._)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return c=function(){return e},e}var d={},f=(0,a.gql)(l()),p=(0,a.gql)(u()),h=(0,a.gql)(c()),m=e.i(399245),g=e.i(882848),x=e.i(269848),y=e.i(416298),b=e.i(222342),w=e.i(610357),_=e.i(858248),k=e.i(709485),S=e.i(480028),C=e.i(446530),j=e.i(173703),T=e.i(613355),E=e.i(88619),R=e.i(607278),I=e.i(552144),A=e.i(112767),P=e.i(960178),D=e.i(625484),O=(0,C.cssRecord)({container:[T.rcss.colWithGap(12),T.rcss.px(12)],header:[T.rcss.flex.row,T.rcss.justify.spaceBetween],globeIconContainer:[T.rcss.width(40),T.rcss.height(40),T.rcss.backgroundColor.accentPrimaryDimmer,T.rcss.borderRadius("full"),T.rcss.align.center,T.rcss.justify.center],title:[T.rcss.fontWeight.medium],inviteUrlContainer:[T.rcss.borderRadius(8),T.rcss.flex.row],input:[T.rcss.borderRadius(8,0,0,8),T.rcss.color.foregroundDimmer],copyToClipboard:[T.rcss.borderRadius(0,8,8,0)]}),N=function(){return(0,n.jsxs)(D.View,{row:!0,gap:12,children:[(0,n.jsx)(D.View,{css:O.globeIconContainer,children:(0,n.jsx)(m.default,{color:S.tokens.accentPrimaryStrongest,size:20})}),(0,n.jsxs)(D.View,{children:[(0,n.jsx)(P.Text,{css:O.title,id:"link-switch-label",multiline:!1,children:"Private join link"}),(0,n.jsx)(P.Text,{variant:"small",color:"dimmest",multiline:!1,children:"Anyone with this link can edit files"})]})]})};function M(e){var i,a,l,u,c,m,C,M,L,B,V,F,U,G,$=e.replId,H=(0,b.default)(),z=H.showConfirm,W=H.showError,q=(i={variables:{replId:$}},a=(0,r._)({},d,i),o.useQuery(f,a)),K=q.data,Y=q.loading,Q=q.error,X=q.refetch,Z=(0,t._)((l={variables:{replId:$},onError:function(e){return W(e.message)},onCompleted:function(){return z("Join link created")}},u=(0,r._)({},d,l),s.useMutation(p,u)),2),J=Z[0],ee=Z[1],et=(0,t._)((c={variables:{replId:$},onError:function(e){return W(e.message)},onCompleted:function(e){"UserError"===e.deleteMultiplayerInviteLink.__typename?W(e.deleteMultiplayerInviteLink.message):"Repl"===e.deleteMultiplayerInviteLink.__typename&&z("Join link deleted")}},m=(0,r._)({},d,c),s.useMutation(h,m)),2),en=et[0],er=et[1],ei=(null==K||null==(C=K.getRepl)?void 0:C.__typename)==="Repl"?K.getRepl:null,ea=ee.loading||er.loading,eo=(null==K||null==(M=K.getRepl)?void 0:M.__typename)==="Repl"&&(null==ei||null==(L=ei.owner)?void 0:L.__typename)==="Team",es=(null==K||null==(B=K.getRepl)?void 0:B.__typename)==="Repl"&&(null==ei||null==(V=ei.owner)?void 0:V.__typename)==="Team"&&(null==ei||null==(F=ei.owner.capabilities)?void 0:F.isBusinessPlan)&&(null==ei||null==(U=ei.owner.capabilities)?void 0:U.hasValidSubscription),el=(null==K||null==(G=K.getRepl)?void 0:G.__typename)==="Repl"&&(null==ei?void 0:ei.inviteUrl)&&1?window.location.origin+(null==ei?void 0:ei.inviteUrl):null;return Y||eo&&!es?null:Q?(0,n.jsxs)(D.View,{css:O.container,children:[(0,n.jsxs)(D.View,{css:O.header,children:[(0,n.jsx)(N,{}),(0,n.jsx)(A.Switch,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,n.jsx)(I.StatusBannerButton,{css:[T.rcss.textAlign.left],iconLeft:(0,n.jsx)(y.default,{color:S.tokens.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return X({replId:$})}})]}):(0,n.jsxs)(D.View,{css:O.container,children:[(0,n.jsxs)(D.View,{css:O.header,children:[(0,n.jsx)(N,{}),Y?(0,n.jsxs)(D.View,{row:!0,gap:4,align:"center",children:[(0,n.jsx)(x.default,{color:S.tokens.foregroundDimmer}),(0,n.jsx)(P.Text,{color:"dimmer",multiline:!1,children:"Loading..."})]}):(0,n.jsx)(A.Switch,{isSelected:!!el,isDisabled:ea,onChange:function(e){ea||(e?J():en())},"aria-labelledby":"link-switch-label"})]}),!Y&&el?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(j.ShadesSurface,{css:O.inviteUrlContainer,elevate:!1,children:[(0,n.jsx)(R.Input,{type:"url",readOnly:!0,disabled:!0,value:ea?"Loading...":el,css:O.input}),(0,n.jsx)(E.CopyButton,{textToCopy:el,onClick:function(){el?((0,w.default)(el),(0,_.track)(k.events.JOIN_LINK_COPIED,{replId:null==ei?void 0:ei.id,isTeamRepl:eo,source:"replEnvironment"}),z("Link copied")):W("Could not copy link")},tooltipSuccessText:"Copied to clipboard",text:"Copy join link",iconLeft:(0,n.jsx)(g.default,{}),css:O.copyToClipboard,colorway:"primary",disabled:ea})]}),(0,n.jsx)(D.View,{children:(0,n.jsxs)(P.Text,{color:"dimmer",variant:"small",multiline:!1,children:["Want to revoke access to this link?"," ",(0,n.jsx)("a",{css:T.rcss.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),ea||J())},onClick:function(e){e.preventDefault(),ea||J()},children:"Generate a new link"})]})})]}):null]})}function L(){var e=(0,i._)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return L=function(){return e},e}function B(){var e=(0,i._)(["\n  fragment MultiplayerRepl on Repl {\n    id\n    collaborators {\n      user {\n        ...MultiplayerUser\n      }\n    }\n    multiplayerInvites {\n      email\n      type\n    }\n  }\n  ","\n"]);return B=function(){return e},e}function V(){var e=(0,i._)(["\n  fragment MultiplayerReplInvite on MultiplayerInvite {\n    email\n    repl {\n      ...MultiplayerRepl\n    }\n    invitePermissionType: type\n  }\n  ","\n"]);return V=function(){return e},e}function F(){var e=(0,i._)(["\n  mutation AddOrInviteReplMultiplayer(\n    $input: AddOrInviteReplMultiplayerInput!\n  ) {\n    addOrInviteReplMultiplayer(input: $input) {\n      __typename\n      ... on AddOrInviteReplMultiplayerOuput {\n        result {\n          ... on MultiplayerInvite {\n            ...MultiplayerReplInvite\n          }\n          ... on ReplPermission {\n            id\n            repl {\n              ...MultiplayerRepl\n            }\n            user {\n              ...MultiplayerUser\n            }\n            replPermissionType: type\n          }\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return F=function(){return e},e}e.s(["default",()=>M],923893);var U={},G=(0,a.gql)(L()),$=(0,a.gql)(B(),G),H=(0,a.gql)(V(),$),z=(0,a.gql)(F(),H,$,G);function W(e){var t=(0,r._)({},U,e);return s.useMutation(z,t)}function q(){var e=(0,i._)(["\n  query MultiplayerManager($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return q=function(){return e},e}e.s(["MultiplayerUserFragmentDoc",()=>G,"useAddOrInviteReplMultiplayerMutation",()=>W],635925);var K={},Y=(0,a.gql)(q(),G);function Q(e){var t=(0,r._)({},K,e);return o.useQuery(Y,t)}e.s(["useMultiplayerManagerQuery",()=>Q],849004)},810394,e=>{"use strict";e.s(["CORE_MULTIPLAYER_LIMIT",()=>3,"LEGACY_STARTER_MULTIPLAYER_LIMIT",()=>100,"USER_LOOKUP_LIMIT",()=>250])},433788,204070,802482,613349,e=>{"use strict";var t=e.i(530658),n=e.i(346715),r=e.i(276385),i=e.i(485273),a=e.i(389959),o=e.i(84466),s=e.i(368964),l=e.i(849004),u=e.i(486898),c=e.i(336187),d=e.i(416746),f=e.i(269848),p=e.i(810394),h=e.i(548733),m=e.i(297083),g=e.i(817556),x=e.i(596139),y=e.i(973519),b=e.i(490314);e.i(653863);var w=e.i(480028),_=e.i(446530),k=e.i(613355),S=e.i(27820),C=e.i(624782),j=e.i(960178),T=e.i(751273),E=e.i(625484),R=function(e){var t=e.modalState,n=(0,b.useCollaboratorLimit)(),i=(0,y.useGlobalModal)().show,o=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).onPurchaseComplete,t=(0,y.useGlobalModal)().show;return{showUpgradeModal:function(){return(0,m._)(function(){return(0,g._)(this,function(n){switch(n.label){case 0:return[4,t("MembershipPurchaseModal",{headingText:"Upgrade for more collaborators",subHeadingText:"Share your Apps with up to ".concat(p.CORE_MULTIPLAYER_LIMIT," collaborators with Replit ").concat(x.corePlanName),onPurchaseComplete:e,analyticsContext:{upgrade:{context:"workspace_multiplayer_header"}}})];case 1:return n.sent(),[2]}})})()}}}({onPurchaseComplete:(0,a.useCallback)(function(){"data"===n.type&&n.refetch(),"open"===t.type&&t.onUpgradeSuccess()},[n,t])}).showUpgradeModal,s=(0,a.useCallback)(function(){return(0,m._)(function(){return(0,g._)(this,function(e){switch(e.label){case 0:if("data"!==n.type)return[2];if(!n.isStarterUser)return[3,2];return[4,o()];case 1:return e.sent(),[3,4];case 2:return[4,i("TeamUpgradeModal")];case 3:e.sent(),e.label=4;case 4:return[2]}})})()},[n,o,i]);if((0,a.useEffect)(function(){(null==t?void 0:t.type)==="open"&&"data"===n.type&&s()},[null==t?void 0:t.type,n.type,s]),"loading"===n.type)return(0,r.jsxs)(E.View,{grow:!0,justify:"center",row:!0,gap:4,align:"center",children:[(0,r.jsx)(f.default,{color:w.tokens.foregroundDimmer}),(0,r.jsx)(j.Text,{color:"dimmer",multiline:!1,children:"Loading..."})]});if("data"!==n.type)return null;var l=n.collaboratorCount,u=n.collaboratorLimit,c=Math.max(0,u-l);return(0,r.jsx)(E.View,{row:!0,gap:8,children:(0,r.jsxs)(E.View,{css:I.limitsContainer,align:"center",row:!0,gap:8,children:[(0,r.jsx)(T.Tooltip,{tooltip:"Your account is limited to ".concat(u," collaborators. Manage your collaborators on the Usage page."),children:(0,r.jsx)(C.Pill,{colorway:"yellow",css:I.pill,text:"".concat(l," / ").concat(u),onClick:s})}),(0,r.jsx)(E.View,{css:I.measureBarWrapper,onClick:s,children:(0,r.jsx)(S.MeasureBar,{css:I.measureBar,total:u,current:l,tooltip:"".concat(c," account collaborators remaining"),backgroundColor:w.tokens.yellowDimmer,color:w.tokens.yellowDefault})})]})})},I=(0,_.cssRecord)({pill:[k.rcss.cursor.pointer,k.rcss.borderRadius(4),k.rcss.pr(0)],measureBar:[k.rcss.height(8),k.rcss.width(60)],measureBarWrapper:[k.rcss.cursor.default],limitsContainer:[k.rcss.borderRadius(4),k.rcss.backgroundColor.yellowDimmest,k.rcss.pr(8)]}),A=e.i(830675),P=e.i(635925),D=e.i(709485),O=e.i(222342),N=e.i(858248);let M=function(e){var n=e.isMobileApp,r=e.isTeam,i=e.handleUpgradeTriggered,a=e.replId,o=(0,O.default)(),l=o.showConfirm,u=o.showError,c=(0,b.useCollaboratorLimit)(),d=function(e,t){A.addBreadcrumb({message:t}),A.captureException(Error(e.message)),u("Something unexpected happened, please try again.")},f=(0,t._)((0,P.useAddOrInviteReplMultiplayerMutation)({onError:function(e){return d(e,"useAddOrInviteReplMultiplayerMutation")},onCompleted:function(e){var t,o,d,f=e.addOrInviteReplMultiplayer;switch(f.__typename){case"NotFoundError":case"UnauthorizedError":u(f.message);return;case"UserError":if(f.message.includes("reached the limit")){if(n&&!r)return void u("You have reached the invite limit for a free account. Please upgrade to add more collaborators.");else if(!n&&i)return void i(!0)}u(f.message);return;case"AddOrInviteReplMultiplayerOuput":"MultiplayerInvite"===f.result.__typename?(t=s.MultiplayerInviteMethod.Email,o=f.result.email):(t=s.MultiplayerInviteMethod.Username,o=(null==(d=f.result.user)?void 0:d.username)?"@".concat(f.result.user.username):"user")}"data"===c.type&&c.refetch(),(0,N.track)(D.events.MULTIPLAYER_INVITED,{replId:a,inviteMethod:t}),l("Added ".concat(o))}}),2);return{addOrInviteReplMultiplayer:f[0],loadingAddMutation:f[1].loading}};e.s(["default",0,M],204070);var L=e.i(441329),B=e.i(87995),V=e.i(806685),F=e.i(602686),U=e.i(878420),G=e.i(569384),$=e.i(973245),H=e.i(951262);function z(){var e=(0,G._)(["\n  mutation RemoveMultiplayerUser($replId: String!, $username: String!) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return z=function(){return e},e}function W(){var e=(0,G._)(["\n  mutation DeleteMultiplayerInvite($replId: String!, $email: String!) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          collaborators {\n            user {\n              ...MultiplayerUser\n            }\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return W=function(){return e},e}var q={},K=(0,$.gql)(z(),P.MultiplayerUserFragmentDoc),Y=(0,$.gql)(W(),P.MultiplayerUserFragmentDoc);let Q=function(){var e,n,r,i,a=(0,O.default)(),o=a.showConfirm,s=a.showError,l=(0,b.useCollaboratorLimit)(),u=function(e,t){A.addBreadcrumb({message:t}),A.captureException(Error(e.message)),s("Something unexpected happened, please try again.")},c=(0,t._)((e={onError:function(e){return u(e,"useRemoveMultiplayerUser")},onCompleted:function(e){var t,n=null==(t=e.removeMultiplayerUser.user)?void 0:t.username;n?o("@".concat(n," removed")):o("User removed"),"data"===l.type&&l.refetch()}},n=(0,U._)({},q,e),H.useMutation(K,n)),2),d=c[0],f=c[1].loading,p=(0,t._)((r={onError:function(e){return u(e,"useDeleteMultiplayerInviteMutation")},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInvite.__typename)return void s(e.deleteMultiplayerInvite.message);if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;o("Invite canceled for ".concat(t))}}},i=(0,U._)({},q,r),H.useMutation(Y,i)),2);return{removeMultiplayerUser:d,loadingRemoveUser:f,deleteMultiplayerInvite:p[0],loadingDeleteInvite:p[1].loading}};var X=e.i(136540),Z=e.i(367861),J=e.i(345904),ee=(0,_.cssRecord)({root:[k.rcss.cursor.default,k.rcss.justify.spaceBetween],userContainer:[k.rcss.viewStyle,k.rcss.color.foregroundDefault],userContainer_pending:[k.rcss.flex.grow(1),k.rcss.flex.row,k.rcss.rowWithGap(8),k.rcss.align.center,{fontStyle:"italic"}]});let et=function(e){var t,n=e.isPendingInvitation,i=e.canEditMultiplayers,a=e.replId,o=Q(),s=o.removeMultiplayerUser,l=o.loadingRemoveUser,u=o.deleteMultiplayerInvite,c=o.loadingDeleteInvite,d=!n,f=d?(0,r.jsx)(J.default,{size:"m",url:e.user.image,username:e.user.username,fullName:e.user.fullName}):(0,r.jsx)(V.default,{color:w.tokens.outlineDefault,size:32}),p=d?e.user.username:e.email;return(0,r.jsxs)(E.View,{css:ee.root,px:16,py:4,row:!0,gap:8,align:"center",children:[d?(0,r.jsx)(B.default,{href:"/@".concat(e.user.username),css:ee.userContainer,children:(0,r.jsx)(Z.User,{username:e.user.username,src:null!=(t=e.user.image)?t:null})}):(0,r.jsxs)(E.View,{css:[ee.userContainer_pending],children:[f,(0,r.jsx)(j.Text,{color:d?"default":"dimmest",multiline:!1,children:p})]}),(0,r.jsxs)(E.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(j.Text,{color:"dimmest",variant:"small",multiline:!1,children:e.isPendingInvitation?"Invited":"Can edit"}),i?(0,r.jsx)(X.IconButton,{alt:d?"Remove member":"Cancel invitation",onClick:function(){!i||l||c||(d?s({variables:{replId:a,username:e.user.username}}):u({variables:{replId:a,email:e.email}}))},children:(0,r.jsx)(F.default,{size:12})}):null]})]})};e.s(["default",0,et],802482);var en=e.i(64386),er=e.i(888136),ei=e.i(538157),ea=e.i(183035),eo=e.i(162914),es=e.i(173703),el=e.i(428596),eu=e.i(140487),ec=e.i(607278),ed=(0,_.cssRecord)({form:[k.rcss.align.start,k.rcss.display.flex,k.rcss.rowWithGap(8),k.rcss.width("100%")],searchContainer:[k.rcss.position.relative,k.rcss.flex.growAndShrink(1)],dropdownMenu:[k.rcss.borderRadius(8),k.rcss.overflow("hidden"),k.rcss.mt(2),k.rcss.zIndex(2),k.rcss.border({color:w.tokens.outlineDimmer,width:1,style:"solid"}),k.rcss.maxHeight(280),k.rcss.overflowY("auto"),k.rcss.scrollbar.thin,{scrollbarColor:w.tokens.backgroundHigher+" "+w.tokens.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:w.tokens.backgroundHighest}}],result:[k.rcss.p(8),k.rcss.rowWithGap(8),k.rcss.justify.spaceBetween,k.rcss.align.center,k.rcss.cursor.pointer],result_active:[k.rcss.backgroundColor.accentPrimaryDimmer],loadingContainer:[k.rcss.m(8),k.rcss.rowWithGap(8),k.rcss.align.center],emptyText:[k.rcss.m(8)]});function ef(e){var n=e.onSubmit,i=e.existingUsernames,s=e.isDisabled,l=e.onChange,u=e.placeholder,c=(0,t._)((0,a.useState)(""),2),d=c[0],p=c[1],h=(0,el.useIdSeed)(),m=(0,eo.default)(d.trim().replace(/^@/,""),250),g=(0,ei.useMultiplayerUsernameSearchQuery)({skip:!m||(0,o.default)(d),variables:{query:m,limit:6}}),x=g.data,y=g.loading,b=g.error,_=(0,O.default)().showError;(0,a.useEffect)(function(){b&&_(b.message)},[b,_]);var k=null==x?void 0:x.usernameSearch,S=function(e){p(e.currentTarget.value),null==l||l(e.currentTarget.value)},C=function(e){"Enter"===e.key&&d.match(/.+@.+/)&&(n(d),p(""),e.currentTarget.blur())};return(0,r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(d),p("")},css:ed.form,children:[(0,r.jsx)(er.default,{onChange:function(e){e&&p(e.username)},itemToString:function(e){return(null==e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var t=e.getInputProps,n=e.getItemProps,a=e.getMenuProps,o=e.isOpen,s=e.highlightedIndex,l=e.getRootProps;return(0,r.jsxs)(E.View,(0,en._)((0,U._)({css:ed.searchContainer},l({refKey:"innerRef"})),{children:[(0,r.jsx)(ec.Input,(0,U._)({id:h("username-search")},t({ref:null,value:d,onChange:S,placeholder:null!=u?u:"Add people by username or email",autoComplete:"off",onKeyDown:C}))),o?(0,r.jsxs)(E.View,{children:[k&&k.length?(0,r.jsx)(es.ShadesSurface,(0,en._)((0,U._)({css:ed.dropdownMenu,tag:"ul"},a({refKey:"innerRef"})),{children:k.map(function(e,t){return(0,r.jsxs)(E.View,(0,en._)((0,U._)({tag:"li"},n({item:e,index:t})),{css:[ed.result,t===s&&ed.result_active],children:[(0,r.jsxs)(E.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(J.default,{size:"m",url:e.image,username:e.username,fullName:e.fullName}),(0,r.jsx)(j.Text,{multiline:!1,translate:"no",children:e.username})]}),i.includes(e.username)?(0,r.jsx)(E.View,{children:(0,r.jsx)(ea.default,{color:w.tokens.accentPositiveStronger})}):null]}),t)})})):null,y?(0,r.jsx)(es.ShadesSurface,{css:ed.dropdownMenu,children:(0,r.jsxs)(E.View,{css:ed.loadingContainer,align:"center",children:[(0,r.jsx)(f.default,{}),(0,r.jsx)(j.Text,{color:"dimmer",multiline:!1,children:"Loading"})]})}):null,k&&0===k.length?(0,r.jsx)(es.ShadesSurface,{css:ed.dropdownMenu,children:(0,r.jsxs)(j.Text,{css:ed.emptyText,color:"dimmer",multiline:!1,children:['No results found for "',d,'"']})}):null]}):null]}))}}),(0,r.jsx)(E.View,{children:(0,r.jsx)(eu.Button,{colorway:"primary",type:"submit",disabled:s||!d,text:"Invite"})})]})}e.s(["default",()=>ef],613349);var ep=e.i(418725);e.i(545082);var eh=e.i(663762),em=e.i(929872);function eg(e,t){return t.some(function(t){return t.id===e})}var ev={root:[k.rcss.color.foregroundDefault,k.rcss.colWithGap(12),k.rcss.align.stretch,k.rcss.flex.growAndShrink(1),k.rcss.px(12)],header:[k.rcss.flex.row,k.rcss.justify.spaceBetween,k.rcss.align.center],header_mobile:[k.rcss.px(0)],titleContainer:[k.rcss.flex.row,k.rcss.rowWithGap(4),k.rcss.align.center],limitsContainer:[k.rcss.align.center,k.rcss.rowWithGap(8)],loading:[k.rcss.rowWithGap(4),k.rcss.align.center,k.rcss.flex.grow(1),k.rcss.justify.center],measureBar:[k.rcss.height(8),k.rcss.width(60)],searchContainer:[k.rcss.position.relative,k.rcss.maxHeight(32)],userList:[k.rcss.flex.column,k.rcss.colWithGap(16),k.rcss.scrollbar.thin,k.rcss.position.relative,k.rcss.overflowY("auto"),k.rcss.flex.growAndShrink(1),{maxHeight:300,"::-webkit-scrollbar-thumb":[k.rcss.backgroundColor.backgroundHighest,k.rcss.borderRadius(4)],scrollbarColor:"".concat(w.tokens.backgroundDefault," ").concat(w.tokens.backgroundHighest)}],userGroup:{root:[k.rcss.colWithGap(8)],titleContainer:[k.rcss.rowWithGap(4),k.rcss.align.center],title:[k.rcss.fontWeight.medium]},emptyContainer:[k.rcss.position.relative,k.rcss.colWithGap(16),k.rcss.py(16),k.rcss.justify.start,{maxHeight:220}]},ex=function(e){var t=e.title,n=e.count,i=e.color,a=e.tooltip;return(0,r.jsxs)(E.View,{css:ev.userGroup.titleContainer,children:[(0,r.jsx)(u.default,{color:i,size:6}),(0,r.jsx)(j.Text,{variant:"small",css:ev.userGroup.title,multiline:!1,children:t}),(0,r.jsx)(j.Text,{multiline:!1,variant:"small",color:"dimmest",css:ev.userGroup.title,children:n}),a?(0,r.jsx)(T.Tooltip,{tooltip:a,children:(0,r.jsx)(d.default,{})}):null]})};e.s(["MultiplayerControlCSS",()=>ev,"UserGroupTitle",()=>ex,"default",0,function(e){var u,d=e.replId,m=e.handleUpgradeTriggered,g=(0,i.useRouter)(),x=(0,L.isInBonsaiWebview)(g),y=(0,b.useCollaboratorLimit)(),_=M({isMobileApp:x,isTeam:!1,handleUpgradeTriggered:m,replId:d}),k=_.addOrInviteReplMultiplayer,C=_.loadingAddMutation,T=(0,eh.useActiveUsers)(),I=(0,t._)((0,a.useState)({type:"closed"}),2),A=I[0],P=I[1],D=(0,t._)((0,a.useState)(!1),2),O=D[0],N=D[1],B=(0,l.useMultiplayerManagerQuery)({variables:{replId:d},pollInterval:8e3}),V=B.data,F=B.loading,U=(null==V?void 0:V.getRepl.__typename)==="Repl"?V.getRepl:null,G=null==V?void 0:V.currentUser,$=(null!=(u=null==U?void 0:U.collaborators)?u:[]).reduce(function(e,t){var r=t.user;return(0,n._)(e).concat([r.username])},[]),H=(null==U?void 0:U.authorizations.editPermissions.isAuthorized)||!1,z=!!(U&&!$.length&&!U.multiplayerInvites.length),W=null==U?void 0:U.collaborators.map(function(e){return e.user}).filter(function(e){return e.id!==(null==G?void 0:G.id)}),q=null==W?void 0:W.filter(function(e){return e&&eg(e.id,T)}),K=null==W?void 0:W.filter(function(e){return e&&!eg(e.id,T)}),Y=W?W.length:null,Q=(0,r.jsxs)(r.Fragment,{children:[null===Y||(null==G?void 0:G.isSubscribed)?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(j.Text,{variant:"small",color:"dimmest","aria-hidden":!0,multiline:!1,children:[Y," / ",p.LEGACY_STARTER_MULTIPLAYER_LIMIT]}),(0,r.jsx)(S.MeasureBar,{css:ev.measureBar,total:p.LEGACY_STARTER_MULTIPLAYER_LIMIT,current:Y,tooltip:"".concat(p.LEGACY_STARTER_MULTIPLAYER_LIMIT-Y," free editors remaining")})]}),F||(null==G?void 0:G.isSubscribed)||x?null:(0,r.jsx)(ep.default,{size:"small",context:"workspace_multiplayer_header",onClickCallback:function(){m&&m(!0)},onCancel:function(){m&&m(!1)}})]});return(0,r.jsxs)(em.Surface,{background:"default",css:ev.root,children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(E.View,{css:[ev.header,x&&ev.header_mobile],children:[(0,r.jsx)(E.View,{css:ev.titleContainer,children:(0,r.jsx)(j.Text,{variant:"subheadDefault",multiline:!1,children:"Multiplayers"})}),(0,r.jsxs)(E.View,{css:ev.limitsContainer,children:[F?(0,r.jsxs)(E.View,{css:ev.loading,children:[(0,r.jsx)(f.default,{color:w.tokens.foregroundDimmer}),(0,r.jsx)(j.Text,{color:"dimmer",multiline:!1,children:"Loading..."})]}):null,"data"===y.type&&y.shouldEnforceMultiplayerLimit?(0,r.jsx)(R,{modalState:A}):Q]})]}),H&&$&&U?(0,r.jsx)(E.View,{css:ev.searchContainer,children:(0,r.jsx)(ef,{existingUsernames:$,onSubmit:function(e){if(!F||(null==G?void 0:G.isSubscribed)){if(!C){var t=new Set(("data"===y.type?(0,n._)(y.collaboratorsByRepl.values()).map(function(e){return e.users}).flat():[]).map(function(e){return e.username})),r="data"===y.type&&y.shouldEnforceMultiplayerLimit&&y.collaboratorCount>=y.collaboratorLimit&&!t.has(e),i={method:(0,o.default)(e)?s.MultiplayerInviteMethod.Email:s.MultiplayerInviteMethod.Username,value:e},a=function(){return k({variables:{input:{replId:d,target:i,level:s.ReplPermissionLevel.Rw}}})};r?P({type:"open",onUpgradeSuccess:a}):a()}}}})}):null,z?(0,r.jsx)(E.View,{css:ev.emptyContainer,children:(0,r.jsx)(E.View,{children:(0,r.jsx)(j.Text,{color:"dimmest",multiline:!1,children:"No one else is here"})})}):(0,r.jsxs)(es.ShadesSurface,{css:ev.userList,elevate:!1,children:[(null==q?void 0:q.length)?(0,r.jsxs)(E.View,{css:ev.userGroup.root,children:[(0,r.jsx)(ex,{title:"Online",count:q.length||0,color:w.tokens.greenStrongest}),q.map(function(e){return e?(0,r.jsx)(et,{isPendingInvitation:!1,replId:d,canEditMultiplayers:H,user:e},e.id):null})]}):null,(null==K?void 0:K.length)?(0,r.jsxs)(E.View,{css:ev.userGroup.root,children:[(0,r.jsx)(ex,{title:"Offline",count:K.length||0,color:w.tokens.outlineStrongest}),null==K?void 0:K.map(function(e){return e?(0,r.jsx)(et,{canEditMultiplayers:H,isPendingInvitation:!1,user:e,replId:d},e.id):null})]}):null,(null==U?void 0:U.multiplayerInvites.length)?(0,r.jsxs)(E.View,{css:ev.userGroup.root,children:[(0,r.jsx)(ex,{title:"Pending Invitations",count:(null==U?void 0:U.multiplayerInvites.length)||0,color:w.tokens.outlineStrongest}),U.multiplayerInvites.map(function(e){return(0,r.jsx)(et,{canEditMultiplayers:H,replId:d,isPendingInvitation:!0,email:e.email},e.email)})]}):null]})]}),(null==G?void 0:G.isSubscribed)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.View,{children:(0,r.jsx)(eu.Button,{text:"Refer a friend and earn more credits",iconLeft:(0,r.jsx)(c.default,{}),onClick:function(){return N(!0)}})}),(0,r.jsx)(h.ReferralLinkModal,{isOpen:O,onClose:function(){return N(!1)},trackingContext:"workspace-invite-dialog"})]}):null]})}],433788)},429878,33681,955665,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(276385),i=e.i(82259),a=e.i(993796),o=e.i(222342),s=e.i(530658),l=e.i(389959),u=e.i(140487),c=e.i(887877),d=e.i(607278),f=e.i(960178),p=e.i(625484);function h(e){var t=e.showHeading,n=e.onSubmit,i=(0,s._)((0,l.useState)(""),2),a=i[0],o=i[1];return(0,r.jsx)(c.Form,{onSubmit:function(e){e.preventDefault(),n(a)},children:(0,r.jsxs)(p.View,{gap:8,children:[void 0===t||t?(0,r.jsxs)(p.View,{gap:2,children:[(0,r.jsx)(f.Header,{variant:"subheadDefault",level:1,children:"Feedback"}),(0,r.jsx)(f.Text,{color:"dimmer",children:"All feedback is reviewed by the Replit team."})]}):null,(0,r.jsxs)(p.View,{gap:8,style:{minHeight:120},children:[(0,r.jsx)(d.MultiLineInput,{placeholder:"Please share bugs, feature requests, and anything else related to your experience...",autoSize:!0,value:a,onChange:function(e){return o(e.currentTarget.value)},autoFocus:!0}),(0,r.jsx)(u.Button,{colorway:"primary",text:"Send feedback",type:"submit"})]})]})})}e.s(["AIFeedbackForm",()=>h],33681);var m=e.i(346715),g=e.i(275122),x=e.i(769822),y=e.i(878420),b=e.i(64386),w=e.i(116235);function _(e){return(0,r.jsx)(w.default,(0,b._)((0,y._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M7 1.25A2.75 2.75 0 0 1 9.75 4v3a2.75 2.75 0 0 1-1.1 2.2l-.463.346a.252.252 0 0 0-.074.307l.252.486a13.25 13.25 0 0 0 5.784 5.549.25.25 0 0 0 .3-.078l.355-.465A2.753 2.753 0 0 1 17 14.25h3A2.75 2.75 0 0 1 22.75 17v3A2.75 2.75 0 0 1 20 22.75 18.75 18.75 0 0 1 1.25 4 2.75 2.75 0 0 1 4 1.25h3Zm-3 1.5A1.25 1.25 0 0 0 2.75 4 17.25 17.25 0 0 0 20 21.25 1.25 1.25 0 0 0 21.25 20v-3A1.25 1.25 0 0 0 20 15.75h-3a1.25 1.25 0 0 0-1 .5l-.004.005-.354.465a1.75 1.75 0 0 1-2.123.53l-.017-.009a14.75 14.75 0 0 1-6.734-6.725l-.002-.003a1.75 1.75 0 0 1 .51-2.159l.006-.003L7.75 8a1.252 1.252 0 0 0 .5-1V4a1.25 1.25 0 0 0-1.126-1.244L7 2.75H4Z",clipRule:"evenodd"})}))}var k=e.i(480028),S=e.i(446530),C=e.i(754873),j=e.i(613355),T=e.i(91720),E=e.i(624782),R=[j.rcss.borderRadius(),j.rcss.px(12),j.rcss.py(16),C.interactive.filled,j.rcss.hover({backgroundColor:k.tokens.accentPrimaryDimmer}),j.rcss.width("50%"),j.rcss.justify.center,j.rcss.flex.column],I=(0,S.cssRecord)({container:R,containerActive:(0,m._)(R).concat([j.rcss.backgroundColor.accentPrimaryDimmest,j.rcss.border({color:k.tokens.accentPrimaryDimmer})]),headline:[j.rcss.fontWeight.medium],premiumPill:[j.rcss.display.inlineBlock,j.rcss.height("20px"),{verticalAlign:"middle"}],text:[j.rcss.width("100%")]});function A(e){var t=e.optionKey,n=e.icon,i=e.headline,a=e.description,o=e.isPremium,s=e.isActive,l=e.setSelectedOption;return(0,r.jsxs)(p.View,{css:s?I.containerActive:I.container,gap:6,onClick:function(){l(t)},children:[(0,r.jsxs)(p.View,{row:!0,gap:4,align:"center",children:[n,(0,r.jsx)(f.Text,{variant:"subheadDefault",css:I.headline,children:i}),o?(0,r.jsx)(E.Pill,{colorway:"green",text:"Premium",css:I.premiumPill}):null]}),(0,r.jsx)(p.View,{row:!0,gap:4,align:"center",children:(0,r.jsx)(f.Text,{variant:"small",color:"dimmer",css:I.text,children:a})})]})}var P=(0,S.cssRecord)({callOptionContainer:[j.rcss.width("100%"),j.rcss.flex.column,j.rcss.align.center,j.rcss.justify.center,j.rcss.height("100px"),j.rcss.border({color:k.tokens.outlineDimmer}),j.rcss.borderRadius()],helpButtonContainer:[{"@media (max-width: 600px)":{flexDirection:"column"}}]});function D(e){var t=e.onSubmit,n=(0,s._)((0,l.useState)(null),2),i=n[0],a=n[1],o=[{optionKey:"call",icon:(0,r.jsx)(_,{size:20}),headline:"Schedule a call",description:"Have a discussion with a Replit employee over a video call.",isPremium:!0},{optionKey:"feedback",icon:(0,r.jsx)(x.default,{size:20}),headline:"Share feedback & bugs",description:"Tell us about your experience. Feedback is reviewed by the Replit team."}];return(0,r.jsxs)(p.View,{gap:8,children:[(0,r.jsx)(f.Text,{variant:"headerDefault",children:"Talk to us"}),(0,r.jsx)(p.View,{row:!0,gap:8,css:P.helpButtonContainer,pr:6,children:o.map(function(e){return(0,r.jsx)(A,{icon:e.icon,headline:e.headline,description:e.description,isPremium:e.isPremium,optionKey:e.optionKey,isActive:i===e.optionKey,setSelectedOption:a},e.optionKey)})}),"call"===i?(0,r.jsx)(p.View,{css:P.callOptionContainer,children:(0,r.jsx)(T.ButtonLink,{iconLeft:(0,r.jsx)(g.default,{}),text:"Select a time to chat",colorway:"blue",target:"_blank",href:"https://calendly.com/kody-low-repl/replit-support"})}):null,"feedback"===i?(0,r.jsx)(h,{showHeading:!1,onSubmit:function(e){t(e),a(null)}}):null]})}function O(e){var s=e.session,l=e.onClose,u=(0,o.default)(),c=u.showConfirm,d=u.showError,f=function(e){return(0,t._)(function(){return(0,n._)(this,function(t){switch(t.label){case 0:return[4,s.submitUserFeedback({type:i.AgentUserFeedbackType.AGENT_FEEDBACK_UNKNOWN,comment:e})];case 1:if(!t.sent().ok)return d("Failed to send feedback. Please try again."),[2];return c("Feedback received."),l(),[2]}})})()};return(0,a.useFlag)({controlName:"flag-top-ai-spenders",type:"boolean"})?(0,r.jsx)(D,{onSubmit:f}):(0,r.jsx)(h,{onSubmit:f})}e.s(["AISupportFeedbackForm",()=>D],955665),e.s(["AIFeedback",()=>O],429878)},516351,e=>{"use strict";var t=e.i(530658),n=e.i(389959),r=e.i(529810);function i(){var e=(0,r.default)().presence,i=(0,t._)((0,n.useState)(e.getFollowedUser()),2),a=i[0],o=i[1];return(0,n.useEffect)(function(){return o(e.getFollowedUser()),e.onFollowedUserChanged(o)},[e]),a}e.s(["default",()=>i])},259475,e=>{"use strict";var t,n=((t={}).FileNode="FILE_NODE",t.FileHeaderTab="FILE_HEADER_TAB",t.Code="CODE",t.Pane="PANE",t.NewPane="NEW_PANE",t);e.s(["DragItems",()=>n])},794149,e=>{e.v({errorMessage:"ErrorBoundary-module__cE2Qsa__errorMessage"})},57613,e=>{"use strict";var t=e.i(399119),n=e.i(904851),r=e.i(90659),i=e.i(721281),a=e.i(445789),o=e.i(878420),s=e.i(64386),l=e.i(276385),u=e.i(389959),c=e.i(830675),d=e.i(37292),f=e.i(625484),p=e.i(794149),h=function(e){function o(){var e;return(0,n._)(this,o),e=(0,t._)(this,o,arguments),(0,i._)(e,"state",{hasErrored:!1,error:null,errorInfo:null}),e}return(0,a._)(o,e),(0,r._)(o,[{key:"componentDidCatch",value:function(e,t){this.setState({hasErrored:!0,error:e,errorInfo:t}),this.props.handleError(e,t),console.error(e)}},{key:"render",value:function(){if(this.state.hasErrored){var e,t;return this.props.fallback&&this.state.error&&this.state.errorInfo?this.props.fallback(this.state.error):(0,l.jsx)(f.View,{clsx:p.default.errorMessage,children:null!=(t=null==(e=this.state.error)?void 0:e.stack)?t:"An unknown error occurred."})}return this.props.children}}]),o}(u.Component);function m(e){var t=e.bsod,n=void 0!==t&&t,r=e.reportToSentry,i=void 0===r||r,a=e.handleError,u=e.children,f=e.origin,p=void 0===f?"ErrorBoundary: (no origin provided)":f,m=e.tags,g=void 0===m?{}:m,x=e.extras,y=void 0===x?{}:x,b=e.fallback,w=(0,d.useThrowBsod)();return(0,l.jsx)(h,{fallback:b,handleError:function(e,t){n?w({error:e,extras:(0,s._)((0,o._)({},y),{errorInfo:t}),componentStack:t.componentStack||void 0,tags:(0,s._)((0,o._)({},g),{errorBoundary:!0}),origin:p}):i&&c.withScope(function(n){n.setTag("errorBoundary",!0),n.setTags(g),n.setExtra("errorInfo",t),n.setExtras(y),n.setContext("react",{componentStack:t.componentStack}),c.captureException(e)}),a&&a(e,t)},children:u})}e.s(["default",()=>m])},391119,241939,243202,608572,133930,681128,443350,e=>{"use strict";var t=e.i(530658),n=e.i(389959);e.i(877212);var r=e.i(924908);e.i(925218);var i=e.i(802088);function a(e){var a=(0,t._)((0,n.useState)(null!=e?e:null),2),o=a[0],s=a[1],l=(0,t._)((0,n.useState)(),2),u=l[0],c=l[1],d=(0,r.useChatter)(),f=o?d.sessions.get(o):d.sessions.agent.current;return(0,i.useObserver)(f,{next:function(e){c(e)}}),{session:u,setSession:c,setSessionId:s}}e.s(["useCurrentSession",()=>a],391119);var o=e.i(878420),s=e.i(569384),l=e.i(973245),u=e.i(304277);e.i(566901);var c=e.i(951262);function d(){var e=(0,s._)(["\n  query AgentMainReplConfig($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        timeCreated\n        config {\n          isInPlanningPhase\n        }\n      }\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,s._)(["\n  mutation UpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isInPlanningPhase\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}var p={},h=(0,l.gql)(d());function m(e){var t=(0,o._)({},p,e);return u.useQuery(h,t)}var g=(0,l.gql)(f());function x(e){var t=(0,o._)({},p,e);return c.useMutation(g,t)}function y(){var e=(0,s._)(["\n  fragment CurrentUserTipState on UserTipState {\n    id\n    title\n    description\n    content\n    tags\n    priority\n    timeRecommended\n    timeCompleted\n    timeDismissed\n    timeInteracted\n    externalUrl\n    ctaLabel\n    ctaTrigger\n  }\n"]);return y=function(){return e},e}e.s(["useAgentMainReplConfigQuery",()=>m,"useUpdateReplConfigMutation",()=>x],241939);var b=(0,l.gql)(y());function w(){var e=(0,s._)(["\n  query CurrentUserTips {\n    currentUser {\n      id\n      tips {\n        ... on UserTipsList {\n          tips {\n            ...CurrentUserTipState\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}var _={},k=(0,l.gql)(w(),b);function S(e){var t=(0,o._)({},_,e);return u.useQuery(k,t)}e.s(["useCurrentUserTipsQuery",()=>S],243202);var C=e.i(131141),j=e.i(541793),T=(0,j.atom)(new Map),E=(0,j.atom)(null,function(e,t,n,r){return t(T,function(e){return(0,C.produce)(e,function(e){null===r?e.delete(n):e.set(n,r)})})});function R(){return(0,r.useSet)(E)}function I(){return(0,r.useValue)(T)}function A(){return(0,r.useGet)(T)}(0,j.atom)(null,function(e,t,n){return t(T,function(e){return(0,C.produce)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var a,o=n[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;e.set(s,"exclude")}}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}})})}),e.s(["useFileContextPreferences",()=>I,"useGetFileContextPreferences",()=>A,"useUpdateFileContextPreferences",()=>R],608572);var P={direction:"forward",state:{sessionCreatedAt:null,numPlansProposed:0},reducer:function(e,t){var n=e.contents.contents;switch(null==n?void 0:n.$kind){case"sessionCreationEventContents":t.sessionCreatedAt=new Date(e.created);return;case"agentPlanEventContents":if(!n.agentPlanEventContents.requiresApproval)return;t.numPlansProposed++}}},D={direction:"forward",state:{sessionCreatedAt:null,numPlansProposed:0},reducer:function(){return!1}};e.s(["NoOpPlanProposalReducer",()=>D,"PlanProposalReducer",()=>P],133930);var O=e.i(82259),N=e.i(374106),M=e.i(986194),L=e.i(641555),B=e.i(166876),V=e.i(231346),F={direction:"reverse",state:{taskListEventId:null,taskListData:null,approvedTaskListEventIds:new Set,hasUserMessageAfterProposal:!1},map:function(e){return e.taskListData&&e.taskListEventId?{data:e.taskListData,eventId:e.taskListEventId,hasUserMessageAfterProposal:e.hasUserMessageAfterProposal}:void 0},reducer:function(e,t){if(e.sender.type===O.UserType.USER&&(t.hasUserMessageAfterProposal=!0),(0,N.isEventContentsKind)(e,"agentAskUserForActionResponse")){var n=(0,M.unkind)(e.contents.contents).response;if(n&&(0,M.isKind)(n,"approveTaskListResponse")&&t.approvedTaskListEventIds.add((0,M.unkind)(n).taskListEventId),n&&(0,M.isKind)(n,"approveInitialBuildMvpResponse"))return!1}var r=(0,N.getEventAgentToolDataFor)(e,"taskListData");if(null!=r)return!t.approvedTaskListEventIds.has(e.id)&&((0,B.isPlanModeProposedTaskList)(r)&&(t.taskListData=r,t.taskListEventId=e.id),!1)}};function U(e){return(0,L.useObservableMemo)(function(){return null==e?void 0:e.reduce(F,100)},[e],{default:void 0})}var G={direction:"reverse",state:{taskListEventId:null,taskListData:null,approvedTaskListEventIds:new Set},map:function(e){var t;return null!=(t=e.taskListData)?t:void 0},reducer:function(e,t){if((0,N.isEventContentsKind)(e,"agentAskUserForActionResponse")){var n=(0,M.unkind)(e.contents.contents).response;if(n&&((0,M.isKind)(n,"approveInitialBuildVisualPhaseResponse")||(0,M.isKind)(n,"approveInitialBuildMvpResponse")))return!1}var r=(0,N.getEventAgentToolDataFor)(e,"taskListData");if(null!=r)return r.agentMode===O.AgentMode.AGENT_MODE_GENERAL&&(t.taskListData=r),!1}};function $(e){var t,n=(0,V.useIsInitialAgentSession)(null!=(t=null==e?void 0:e.id)?t:null);return(0,L.useObservableMemo)(function(){return n?null==e?void 0:e.reduce(G,100):void 0},[e,n],{default:void 0})}e.s(["useInitialBuildProposedTaskList",()=>$,"usePlanModeProposedTaskList",()=>U],681128);var H=e.i(297083),z=e.i(346715),W=e.i(817556),q=e.i(644920),K=e.i(98816);function Y(e){var r=e.recentFilesObservable,i=e.getFileContext,a=e.assistantMode,o=void 0===a?"advanced":a,s=(0,K.default)(i),l=A(),u=I(),c=(0,t._)((0,n.useState)([]),2),d=c[0],f=c[1];return(0,n.useEffect)(function(){var e=function(e){return(0,H._)(function(){var n,r;return(0,W._)(this,function(i){switch(i.label){case 0:return[4,null==(n=s.current)?void 0:n.call(s,{modelType:"advanced"===o?O.ModelType.ADVANCED:O.ModelType.BASIC,filePreferences:u,recentFiles:e})];case 1:if(!(r=i.sent()))return[2];return f(function(e){var n=e.filePreferences,r=e.fileContextState,i=new Map(r.fileContext.map(function(e){return[e.filePath,"included"]})),a=!0,o=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=(0,t._)(l.value,2),d=c[0],f=c[1];if("exclude"===f){i.delete(d);continue}if(r.unsupportedPreferredFiles.has(d)){i.set(d,"unsupported");continue}i.set(d,"included"===i.get(d)?"included":"overflowing")}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return(0,z._)(i.entries()).map(function(e){var n=(0,t._)(e,2);return{path:n[0],inclusionStatus:n[1]}})}({fileContextState:r,filePreferences:u})),[2]}})})()};return e(r.current),r.subscribe((0,q.default)(e,{wait:2e3}))},[r,u,o,s]),{fileContextInclusions:d,getFileContext:(0,n.useMemo)(function(){return function(){return i({modelType:"advanced"===o?O.ModelType.ADVANCED:O.ModelType.BASIC,filePreferences:l(),recentFiles:r.current})}},[i,l,o,r])}}e.s(["useFileContext",()=>Y],443350)},811358,e=>{e.v({bordered:"TargetedElementEditor-module__DPqI0q__bordered",editor:"TargetedElementEditor-module__DPqI0q__editor",editorContainer:"TargetedElementEditor-module__DPqI0q__editorContainer",formField:"TargetedElementEditor-module__DPqI0q__formField",formRow:"TargetedElementEditor-module__DPqI0q__formRow",sectionTitle:"TargetedElementEditor-module__DPqI0q__sectionTitle"})},881026,779056,331148,490338,5561,414699,691626,619231,939652,445735,921760,274808,603969,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(389959),i=e.i(568817),a=e.i(292849),o=e.i(1736),s=e.i(965863);function l(e){var l=(0,s.useGetRecentFiles)(),u=(0,o.useShouldHideFileInWorkspace)();return(0,r.useCallback)(function(r){return(0,t._)(function(){var t,o,s,c,d;return(0,n._)(this,function(n){switch(n.label){case 0:return[4,e.listFiles()];case 1:if((t=n.sent()).error||!t.files)return[2,{error:null!=(o=t.error)?o:"Something went wrong",files:null}];if(s=t.files.filter(function(e){return!u(e)}),!r)return[3,3];return[4,(0,a.filterFiles)(r,s)];case 2:return d=n.sent(),[3,4];case 3:d=(0,i.default)(s,{existing:l(),getKey:function(e){return e}}).map(function(e){return{path:e}}),n.label=4;case 4:return c=d,[2,{total:s.length,files:c,error:null}]}})})()},[e,u,l])}e.s(["useFindFiles",()=>l],881026);var u=e.i(167626);e.i(242933);var c=e.i(790164),d=new c.ObservableState(new Map);function f(e){var t=e.type,n=e.position,i=void 0===n?"bottom":n,a=(0,r.useRef)(null);return(0,r.useEffect)(function(){var e=a.current;if((0,u._)(e,HTMLElement))return d.update(function(n){var r=new Map(n);return r.set(t,{element:e,position:i}),r}),function(){d.update(function(n){var r,i=new Map(n);return(null==(r=i.get(t))?void 0:r.element)===e&&i.delete(t),i})}},[t,i]),a}function p(e){var t=d.current.get(e);return null!=t?t:null}e.s(["getAnchorInfo",()=>p,"useRegisterPipAnchor",()=>f],779056);var h=e.i(82259);e.i(877212);var m=e.i(765695),g=e.i(51553),x=e.i(886513),y=e.i(530658),b=e.i(346715),w=e.i(862927),_=["package-lock.json","yarn.lock","poetry.lock","replit.nix",".breakpoints"],k=[".out",".pkl",".bin",".csv",".log",".zip",".tar",".gz"],S=["node_modules",".config","venv",".next",".git"];e.i(694906);var C=e.i(446692),j=e.i(205104),T=e.i(240913),E=e.i(664152);function R(e){var t=e.length;if(0===t)return!1;var n=0,r=Math.min(t,512);if(t>=3&&239===e[0]&&187===e[1]&&191===e[2]||t>=4&&0===e[0]&&0===e[1]&&254===e[2]&&255===e[3]||t>=4&&255===e[0]&&254===e[1]&&0===e[2]&&0===e[3]||t>=4&&132===e[0]&&49===e[1]&&149===e[2]&&51===e[3])return!1;if(r>=5&&"%PDF-"===e.slice(0,5).toString())return!0;if(t>=2&&254===e[0]&&255===e[1]||t>=2&&255===e[0]&&254===e[1])return!1;for(var i=0;i<r;i++)if(0===e[i])return!0;else if((e[i]<7||e[i]>14)&&(e[i]<32||e[i]>127)){if(e[i]>193&&e[i]<224&&i+1<r){if(e[++i]>127&&e[i]<192)continue}else if(e[i]>223&&e[i]<240&&i+2<r&&e[++i]>127&&e[i]<192&&e[i+1]>127&&e[i+1]<192){i++;continue}if(n++,i>=32&&100*n/r>10)return!0}return 100*n/r>10}e.s(["default",()=>R],331148);var I=w.Value.Create(h.RangeSchema);function A(e){return!(!(0,j.isOTFile)(e)||function(e){if("Dockerfile"===e.split("/").pop())return!1;var t=(0,j.getExt)(e),n=_.some(function(t){return e.endsWith(t)}),r=k.some(function(t){return e.endsWith(t)}),i=S.some(function(t){return e.split("/").some(function(e){return e===t})});return!t||n||r||i}(e))}var P=e.i(608572);e.i(312917);var D=e.i(619319),O=e.i(487824),N=e.i(529810),M=e.i(69470),L=e.i(830675),B=e.i(161322),V=e.i(709485),F=e.i(993796),U=e.i(222342),G=e.i(858248),$=e.i(559491);function H(e){var t=e.context,n=(0,U.default)().showError,i=(0,B.useAtomValue)(M.visualSelectorIsActiveAtom),a=(0,B.useAtomValue)(M.selectorScriptLoadedAtom),o=(0,B.useAtomValue)(M.versionAtom),s=(0,B.useSetAtom)(M.setVisualSelectorElement),l=(0,B.useAtomValue)(M.visualSelectorElementAtom),u=(0,B.useAtomValue)(M.screenshotBlobAtom),c=(0,B.useSetAtom)(M.clearVisualSelectorElementAtom),d=(0,F.useFlag)({type:"string",controlName:"flag-cartographer-edits-version",default:"0.2.0"}),f=!!(null==o?void 0:o.includes("standalone")),p=!!(o&&o.localeCompare(d,void 0,{numeric:!0})>-1),h=!f&&p&&"agent"===t,m=(0,r.useCallback)(function(){try{c(),(0,$.sendClearSelectionMessage)()}catch(e){n("Failed to clear visual selection"),L.captureException(e)}},[n,c]),g=(0,r.useCallback)(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.isEditingEnabled,s=r.shouldClearSelection;try{if(!a){e&&n("Error loading visual selector");return}(void 0===s||s)&&m(),(0,$.sendToggleVisualEditorMessage)(e,h&&(void 0===i||i)),e&&(0,G.track)(V.events.VISUAL_SELECTOR,{action:"enabled",context:t,beaconVersion:o})}catch(e){L.captureException(e)}},[h,a,n,m,t,o]);return{isActive:i,isSelectorScriptLoaded:a,isEditingSupported:h,element:l,setElement:s,screenshotBlob:u,setVisualSelectorEnabled:g,clearSelection:m}}e.s(["useVisualSelector",()=>H],490338);var z=e.i(276385),W=e.i(602686),q=e.i(491194),K=e.i(277276),Y=e.i(878420),Q=e.i(64386),X=e.i(788106),Z=e.i(541793),J=e.i(814563),ee=e.i(408880),et=e.i(445059),en=e.i(31586),er=function(e){if(!e)return 0;var t=parseFloat(e.replace("px",""));return isNaN(t)?0:t},ei=function(e){if(!e)return{x:0,y:0};var t=e.split(" ");switch(t.length){case 1:return{x:er(t[0]),y:er(t[0])};case 2:return{x:er(t[1]),y:er(t[0])};case 3:return{x:er(t[1]),y:(er(t[0])+er(t[2]))/2};case 4:return{x:(er(t[1])+er(t[3]))/2,y:(er(t[0])+er(t[2]))/2};default:return{x:0,y:0}}},ea=function(e){switch(e){case"left":case"start":default:return"left";case"right":case"end":return"right";case"center":return"center";case"justify":return"justify"}},eo=function(e){var t,n,r,i,a,o,s,l=ei(null==e||null==(t=e.computedStyles)?void 0:t.margin),u=ei(null==e||null==(n=e.computedStyles)?void 0:n.padding);return{textContent:null==e?void 0:e.textContent,fontSize:er(null==e||null==(r=e.computedStyles)?void 0:r.fontSize),fontWeight:null==e||null==(i=e.computedStyles)?void 0:i.fontWeight,textAlign:ea(null==e||null==(a=e.computedStyles)?void 0:a.textAlign),color:(0,en.toHex)(null==e||null==(o=e.computedStyles)?void 0:o.color),backgroundColor:(0,en.toHex)(null==e||null==(s=e.computedStyles)?void 0:s.backgroundColor),marginX:l.x,marginY:l.y,paddingX:u.x,paddingY:u.y,imageSrc:(null==e?void 0:e.srcAttribute)||""}},es=(0,Z.atom)({}),el=(0,Z.atom)(null,function(e,t,n){t(es,eo(n)),t(ec,J.RESET)}),eu=(0,Z.atom)(function(e){var t=e(es),n=e(M.selectedElementMetadataAtom);return!!n&&!(0,ee.default)(t,eo(n))}),ec=(0,J.atomWithReset)({}),ed=(0,Z.atom)(null,function(e,t,n){t(ec,(0,Y._)({},e(ec),n));var r=e(ef);(0,$.updateSelectedElementInWebview)({style:r})}),ef=(0,Z.atom)(function(e){return Object.entries(e(ec)).map(function(e){var t=(0,y._)(e,2),n=t[0],r=t[1];return"".concat(n,": ").concat(r)}).join("; ")}),ep=(0,Z.atom)(function(e){return e(es).fontSize},function(e,t,n){t(ed,{"font-size":"".concat(n,"px")}),t(es,(0,Q._)((0,Y._)({},e(es)),{fontSize:n}))}),eh=(0,Z.atom)(function(e){return e(es).fontWeight},function(e,t,n){t(ed,{"font-weight":n}),t(es,(0,Q._)((0,Y._)({},e(es)),{fontWeight:n}))}),em=(0,Z.atom)(function(e){return e(es).textAlign},function(e,t,n){t(ed,{"text-align":n}),t(es,(0,Q._)((0,Y._)({},e(es)),{textAlign:n}))}),eg=(0,Z.atom)(function(e){return e(es).color},function(e,t,n){(X.default.valid(n)||(0,en.isColorTransparentOrAliased)(n))&&t(ed,{color:n}),t(es,(0,Q._)((0,Y._)({},e(es)),{color:n}))}),ev=(0,Z.atom)(function(e){return e(es).backgroundColor},function(e,t,n){(X.default.valid(n)||(0,en.isColorTransparentOrAliased)(n))&&t(ed,{"background-color":n}),t(es,(0,Q._)((0,Y._)({},e(es)),{backgroundColor:n}))}),ex=(0,Z.atom)(function(e){return e(es).marginX},function(e,t,n){t(ed,{"margin-left":"".concat(n,"px"),"margin-right":"".concat(n,"px")}),t(es,(0,Q._)((0,Y._)({},e(es)),{marginX:n}))}),ey=(0,Z.atom)(function(e){return e(es).marginY},function(e,t,n){t(ed,{"margin-top":"".concat(n,"px"),"margin-bottom":"".concat(n,"px")}),t(es,(0,Q._)((0,Y._)({},e(es)),{marginY:n}))}),eb=(0,Z.atom)(function(e){return e(es).paddingX},function(e,t,n){t(ed,{"padding-left":"".concat(n,"px"),"padding-right":"".concat(n,"px")}),t(es,(0,Q._)((0,Y._)({},e(es)),{paddingX:n}))}),ew=(0,Z.atom)(function(e){return e(es).paddingY},function(e,t,n){t(ed,{"padding-top":"".concat(n,"px"),"padding-bottom":"".concat(n,"px")}),t(es,(0,Q._)((0,Y._)({},e(es)),{paddingY:n}))}),e_=(0,Z.atom)(!1),ek=(0,Z.atom)(function(e){return e(es).textContent},function(e,t,n){t(ed,{content:n}),t(es,(0,Q._)((0,Y._)({},e(es)),{textContent:n})),e(e_)||(0,$.updateSelectedElementInWebview)({textContent:n})}),eS=(0,Z.atom)(null,function(e,t,n){n!==e(es).textContent&&(t(e_,!0),t(ek,n),t(e_,!1))}),eC="/@fs/home/runner/workspace/",ej=(0,Z.atom)(function(e){var t=e(es).imageSrc;return(null==t?void 0:t.startsWith(eC))?t.replace(eC,""):t},function(e,t,n){t(es,(0,Q._)((0,Y._)({},e(es)),{imageSrc:n}));var r=n;n.startsWith(et.ATTACHED_ASSETS_PATH)&&(r="".concat(eC).concat(n)),(0,$.updateSelectedElementInWebview)({src:r})});e.s(["backgroundColorInputAtom",()=>ev,"colorInputAtom",()=>eg,"editorStateAtom",()=>es,"fontSizeInpAtom",()=>ep,"fontWeightInputAtom",()=>eh,"hydrateEditorStateAtom",()=>el,"hydrateTextContentAtom",()=>eS,"imageSourceInputAtom",()=>ej,"isEditorStateDirtyAtom",()=>eu,"marginXInputAtom",()=>ex,"marginYInputAtom",()=>ey,"paddingXInputAtom",()=>eb,"paddingYInputAtom",()=>ew,"styleAttributesAtom",()=>ec,"textAlignInputAtom",()=>em,"textContentInputAtom",()=>ek],5561);var eT=e.i(116235);function eE(e){return(0,z.jsx)(eT.default,(0,Q._)((0,Y._)({},e),{children:(0,z.jsx)("path",{d:"M19 18.25a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1 0-1.5h14ZM17 11.25a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1 0-1.5h10ZM21 4.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h18Z"})}))}function eR(e){return(0,z.jsx)(eT.default,(0,Q._)((0,Y._)({},e),{children:(0,z.jsx)("path",{d:"M21 18.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h18ZM21 11.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h18ZM21 4.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h18Z"})}))}function eI(e){return(0,z.jsx)(eT.default,(0,Q._)((0,Y._)({},e),{children:(0,z.jsx)("path",{d:"M17 18.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h14ZM15 11.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h12ZM21 4.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h18Z"})}))}function eA(e){return(0,z.jsx)(eT.default,(0,Q._)((0,Y._)({},e),{children:(0,z.jsx)("path",{d:"M21 18.25a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1 0-1.5h14ZM21 11.25a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h12ZM21 4.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h18Z"})}))}var eP=e.i(140487),eD=e.i(818503),eO=e.i(625484);function eN(){var e=(0,y._)((0,B.useAtom)(em),2),t=e[0],n=e[1];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eD.Label,{color:"dimmer",children:"Alignment"}),(0,z.jsxs)(eO.View,{gap:8,row:!0,children:[(0,z.jsx)(eP.Button,{iconLeft:(0,z.jsx)(eI,{}),text:"",variant:"left"===t?"default":"nofill",onClick:function(){return n("left")}}),(0,z.jsx)(eP.Button,{iconLeft:(0,z.jsx)(eE,{}),text:"",variant:"center"===t?"default":"nofill",onClick:function(){return n("center")}}),(0,z.jsx)(eP.Button,{iconLeft:(0,z.jsx)(eA,{}),text:"",variant:"right"===t?"default":"nofill",onClick:function(){return n("right")}}),(0,z.jsx)(eP.Button,{iconLeft:(0,z.jsx)(eR,{}),text:"",variant:"justify"===t?"default":"nofill",onClick:function(){return n("justify")}})]})]})}var eM=e.i(648788);function eL(){var e=(0,y._)((0,B.useAtom)(ev),2),t=e[0],n=e[1];return(0,z.jsx)(eM.BaseColorInput,{label:"Background Color",color:t,setColor:n})}function eB(){var e=(0,y._)((0,B.useAtom)(eg),2),t=e[0],n=e[1];return(0,z.jsx)(eM.BaseColorInput,{label:"Text Color",color:t,setColor:n})}var eV=e.i(607278);function eF(){var e=(0,y._)((0,B.useAtom)(ek),2),t=e[0],n=e[1];return(0,z.jsxs)(eO.View,{gap:4,children:[(0,z.jsx)(eD.Label,{color:"dimmer",children:"Content"}),(0,z.jsx)(eV.Input,{id:"content",value:null!=t?t:"",onChange:function(e){return n(e.target.value)}})]})}var eU=e.i(85742),eG=e.i(12034),e$=Array.from({length:85},function(e,t){return{id:t+12,name:"".concat(t+12,"px")}});function eH(){var e=(0,y._)((0,B.useAtom)(ep),2),t=e[0],n=e[1];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eD.Label,{color:"dimmer",children:"Font size"}),(0,z.jsx)(eG.Select,{selectedKey:t,onSelectionChange:function(e){return n(Number(e))},"aria-label":"Font size",children:e$.map(function(e){return(0,z.jsx)(eU.ListBoxItem,{id:e.id,label:e.name},e.id)})})]})}var ez={100:"thin",200:"extralight",300:"light",400:"normal",500:"medium",600:"semibold",700:"bold",800:"extrabold",900:"black",normal:"normal",bold:"bold"},eW=[{id:"normal",name:"Normal"},{id:"bold",name:"Bold"},{id:"100",name:"Thin"},{id:"200",name:"Extra Light"},{id:"300",name:"Light"},{id:"400",name:"Regular"},{id:"500",name:"Medium"},{id:"600",name:"Semi Bold"},{id:"700",name:"Bold"},{id:"800",name:"Extra Bold"},{id:"900",name:"Black"}];function eq(){var e=(0,y._)((0,B.useAtom)(eh),2),t=e[0],n=e[1];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eD.Label,{color:"dimmer",children:"Font weight"}),(0,z.jsx)(eG.Select,{selectedKey:t,onSelectionChange:function(e){return n(e)},"aria-label":"Font weight",children:eW.map(function(e){return(0,z.jsx)(eU.ListBoxItem,{id:e.id,label:e.name},e.id)})})]})}var eK=e.i(422183),eY=e.i(591936),eQ=e.i(971072),eX=e.i(399978),eZ=e.i(811358);function eJ(){var e=(0,y._)((0,B.useAtom)(ej),2),i=e[0],a=e[1],o=(0,U.default)().showError,s=(0,y._)((0,r.useState)(!1),2),l=s[0],u=s[1],c=(0,r.useRef)(null),d=(0,N.default)().fs;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eD.Label,{color:"dimmer",children:"Source"}),(0,z.jsxs)(eO.View,{className:eZ.default.formRow,children:[(0,z.jsx)(eV.Input,{type:"url",value:i||"",onChange:function(e){a(e.target.value)},placeholder:"Enter image URL or upload..."}),(0,z.jsx)(eP.Button,{variant:"outlined",stretch:!0,onClick:function(){var e;null==(e=c.current)||e.click()},disabled:l,iconLeft:(0,z.jsx)(eY.default,{}),text:l?"Uploading...":"Upload Image"})]}),(0,z.jsx)("input",{style:{display:"none"},ref:c,accept:eQ.ACCEPTABLE_IMAGE_UPLOAD_TYPES.join(","),type:"file",onChange:function(e){var r=e.target,i=r.validity,s=r.files;return(0,t._)(function(){var e,t;return(0,n._)(this,function(n){switch(n.label){case 0:if(!i.valid||!s||0===(e=Array.from(s)).length||0===(t=e.filter(function(e){return eQ.ACCEPTABLE_IMAGE_UPLOAD_TYPES.includes(e.type)})).length)return[2];u(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,new Promise(function(e,n){(0,eX.uploadFiles)({files:t,fs:d,overwrite:!0,parentPath:et.ATTACHED_ASSETS_PATH,onError:function(e){return n(Error(e.error))},onDone:function(t){var r=t.uploads,i=t.errors;if(i.length>0)return void n(Error("Upload failed: ".concat(i[0].error)));if(r.length>0){var o=r[0].path;a(eK.default.join(et.ATTACHED_ASSETS_PATH,eK.default.basename(o)))}e(void 0)}})})];case 2:return n.sent(),[3,5];case 3:return n.sent(),o("Failed to upload image"),[3,5];case 4:return u(!1),[7];case 5:return[2]}})})()}})]})}function e0(e){return(0,z.jsxs)(eT.default,(0,Q._)((0,Y._)({},e),{children:[(0,z.jsx)("path",{d:"M12 1.25a.75.75 0 0 1 .75.75v20a.75.75 0 0 1-1.5 0V2a.75.75 0 0 1 .75-.75Z"}),(0,z.jsx)("path",{fillRule:"evenodd",d:"M6 4.25A2.75 2.75 0 0 1 8.75 7v10A2.75 2.75 0 0 1 6 19.75H4A2.75 2.75 0 0 1 1.25 17V7A2.75 2.75 0 0 1 4 4.25h2Zm-2 1.5c-.69 0-1.25.56-1.25 1.25v10c0 .69.56 1.25 1.25 1.25h2c.69 0 1.25-.56 1.25-1.25V7c0-.69-.56-1.25-1.25-1.25H4ZM20 6.25A2.75 2.75 0 0 1 22.75 9v6A2.75 2.75 0 0 1 20 17.75h-2A2.75 2.75 0 0 1 15.25 15V9A2.75 2.75 0 0 1 18 6.25h2Zm-2 1.5c-.69 0-1.25.56-1.25 1.25v6c0 .69.56 1.25 1.25 1.25h2c.69 0 1.25-.56 1.25-1.25V9c0-.69-.56-1.25-1.25-1.25h-2Z",clipRule:"evenodd"})]}))}function e1(e){return(0,z.jsxs)(eT.default,(0,Q._)((0,Y._)({},e),{children:[(0,z.jsx)("path",{fillRule:"evenodd",d:"M17 15.25A2.75 2.75 0 0 1 19.75 18v2A2.75 2.75 0 0 1 17 22.75H7A2.75 2.75 0 0 1 4.25 20v-2A2.75 2.75 0 0 1 7 15.25h10Zm-10 1.5c-.69 0-1.25.56-1.25 1.25v2c0 .69.56 1.25 1.25 1.25h10c.69 0 1.25-.56 1.25-1.25v-2c0-.69-.56-1.25-1.25-1.25H7Z",clipRule:"evenodd"}),(0,z.jsx)("path",{d:"M22 11.25a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1 0-1.5h20Z"}),(0,z.jsx)("path",{fillRule:"evenodd",d:"M15 1.25A2.75 2.75 0 0 1 17.75 4v2A2.75 2.75 0 0 1 15 8.75H9A2.75 2.75 0 0 1 6.25 6V4A2.75 2.75 0 0 1 9 1.25h6Zm-6 1.5c-.69 0-1.25.56-1.25 1.25v2c0 .69.56 1.25 1.25 1.25h6c.69 0 1.25-.56 1.25-1.25V4c0-.69-.56-1.25-1.25-1.25H9Z",clipRule:"evenodd"})]}))}function e2(){var e=(0,y._)((0,B.useAtom)(ex),2),t=e[0],n=e[1],r=(0,y._)((0,B.useAtom)(ey),2),i=r[0],a=r[1];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eD.Label,{color:"dimmer",children:"Margin"}),(0,z.jsxs)(eO.View,{className:eZ.default.formRow,children:[(0,z.jsx)(eV.DecoratedInput,{iconLeft:(0,z.jsx)(e0,{}),type:"number",value:null==t?void 0:t.toString(),onChange:function(e){return n(Number(e.target.value))}}),(0,z.jsx)(eV.DecoratedInput,{iconLeft:(0,z.jsx)(e1,{}),type:"number",value:null==i?void 0:i.toString(),onChange:function(e){return a(Number(e.target.value))}})]})]})}function e3(e){return(0,z.jsxs)(eT.default,(0,Q._)((0,Y._)({},e),{children:[(0,z.jsx)("path",{d:"M4 1.25a.75.75 0 0 1 .75.75v20a.75.75 0 0 1-1.5 0V2A.75.75 0 0 1 4 1.25ZM20 1.25a.75.75 0 0 1 .75.75v20a.75.75 0 0 1-1.5 0V2a.75.75 0 0 1 .75-.75Z"}),(0,z.jsx)("path",{fillRule:"evenodd",d:"M13 6.25A2.75 2.75 0 0 1 15.75 9v6A2.75 2.75 0 0 1 13 17.75h-2A2.75 2.75 0 0 1 8.25 15V9A2.75 2.75 0 0 1 11 6.25h2Zm-2 1.5c-.69 0-1.25.56-1.25 1.25v6c0 .69.56 1.25 1.25 1.25h2c.69 0 1.25-.56 1.25-1.25V9c0-.69-.56-1.25-1.25-1.25h-2Z",clipRule:"evenodd"})]}))}function e5(e){return(0,z.jsxs)(eT.default,(0,Q._)((0,Y._)({},e),{children:[(0,z.jsx)("path",{d:"M22 19.25a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1 0-1.5h20Z"}),(0,z.jsx)("path",{fillRule:"evenodd",d:"M15 8.25A2.75 2.75 0 0 1 17.75 11v2A2.75 2.75 0 0 1 15 15.75H9A2.75 2.75 0 0 1 6.25 13v-2A2.75 2.75 0 0 1 9 8.25h6Zm-6 1.5c-.69 0-1.25.56-1.25 1.25v2c0 .69.56 1.25 1.25 1.25h6c.69 0 1.25-.56 1.25-1.25v-2c0-.69-.56-1.25-1.25-1.25H9Z",clipRule:"evenodd"}),(0,z.jsx)("path",{d:"M22 3.25a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1 0-1.5h20Z"})]}))}function e4(){var e=(0,y._)((0,B.useAtom)(eb),2),t=e[0],n=e[1],r=(0,y._)((0,B.useAtom)(ew),2),i=r[0],a=r[1];return(0,z.jsxs)(eO.View,{className:eZ.default.formField,children:[(0,z.jsx)(eD.Label,{color:"dimmer",children:"Padding"}),(0,z.jsxs)(eO.View,{className:eZ.default.formRow,children:[(0,z.jsx)(eV.DecoratedInput,{iconLeft:(0,z.jsx)(e3,{}),type:"number",value:null==t?void 0:t.toString(),onChange:function(e){return n(Number(e.target.value))}}),(0,z.jsx)(eV.DecoratedInput,{iconLeft:(0,z.jsx)(e5,{}),type:"number",value:null==i?void 0:i.toString(),onChange:function(e){return a(Number(e.target.value))}})]})]})}var e8=e.i(459781),e6={content:!0,fontSize:!0,fontStyle:!0,alignment:!0,textColor:!0,backgroundColor:!0,margin:!0,padding:!0,imageSource:!1};function e7(e){var t=(0,B.useAtomValue)(M.versionAtom);return(0,r.useMemo)(function(){var n=function(e,t){var n,r,i,a=(null!=(r=null==e||null==(n=e.textContent)?void 0:n.length)?r:0)>0,o=(null!=(i=null==e?void 0:e.siblingCount)?i:0)>1,s=t&&!t.includes("standalone")&&(0,e8.compareSemVer)(t,"0.2.7")>=0;switch(null==e?void 0:e.elementName.toLowerCase()){case"img":return(0,Q._)((0,Y._)({},e6),{content:!1,fontSize:!1,fontStyle:!1,alignment:!1,textColor:!1,backgroundColor:!1,imageSource:!o&&!!s});case"input":case"textarea":case"select":return(0,Q._)((0,Y._)({},e6),{content:!1,fontSize:!1,fontStyle:!1,alignment:!1,textColor:!1});default:return(0,Q._)((0,Y._)({},e6),{content:a&&!o&&!(null==e?void 0:e.hasChildElements),fontSize:a,alignment:a,fontStyle:a})}}(null!=e?e:void 0,t);return(0,Q._)((0,Y._)({},n),{textSectionHeader:n.content||n.fontSize||n.fontStyle||n.alignment,imageSectionHeader:n.imageSource,appearanceSectionHeader:n.textColor||n.backgroundColor,layoutSectionHeader:n.margin||n.padding})},[e,t])}e.s(["useComponentVisibility",()=>e7],414699);var e9=function(e){var t=tr(e),n=e.conflictingClassGroups,r=e.conflictingClassGroupModifiers;return{getClassGroupId:function(e){var n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),te(n,t)||tn(e)},getConflictingClassGroupIds:function(e,t){var i=n[e]||[];return t&&r[e]?(0,b._)(i).concat((0,b._)(r[e])):i}}},te=function(e,t){if(0===e.length)return t.classGroupId;var n,r=e[0],i=t.nextPart.get(r),a=i?te(e.slice(1),i):void 0;if(a)return a;if(0!==t.validators.length){var o=e.join("-");return null==(n=t.validators.find(function(e){return(0,e.validator)(o)}))?void 0:n.classGroupId}},tt=/^\[(.+)\]$/,tn=function(e){if(tt.test(e)){var t=tt.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},tr=function(e){var t=e.theme,n=e.classGroups,r={nextPart:new Map,validators:[]};for(var i in n)ti(n[i],r,i,t);return r},ti=function(e,t,n,r){e.forEach(function(e){if("string"==typeof e){(""===e?t:ta(t,e)).classGroupId=n;return}"function"==typeof e?to(e)?ti(e(r),t,n,r):t.validators.push({validator:e,classGroupId:n}):Object.entries(e).forEach(function(e){var i=(0,y._)(e,2),a=i[0];ti(i[1],ta(t,a),n,r)})})},ta=function(e,t){var n=e;return t.split("-").forEach(function(e){n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},to=function(e){return e.isThemeGetter},ts=function(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,r=new Map,i=function(i,a){n.set(i,a),++t>e&&(t=0,r=n,n=new Map)};return{get:function(e){var t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(i(e,t),t):void 0},set:function(e,t){n.has(e)?n.set(e,t):i(e,t)}}},tl=function(e){var t=e.prefix,n=e.experimentalParseClassName,r=function(e){for(var t,n=[],r=0,i=0,a=0,o=0;o<e.length;o++){var s=e[o];if(0===r&&0===i){if(":"===s){n.push(e.slice(a,o)),a=o+1;continue}if("/"===s){t=o;continue}}"["===s?r++:"]"===s?r--:"("===s?i++:")"===s&&i--}var l=0===n.length?e:e.substring(a),u=tu(l);return{modifiers:n,hasImportantModifier:u!==l,baseClassName:u,maybePostfixModifierPosition:t&&t>a?t-a:void 0}};if(t){var i=t+":",a=r;r=function(e){return e.startsWith(i)?a(e.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:e,maybePostfixModifierPosition:void 0}}}if(n){var o=r;r=function(e){return n({className:e,parseClassName:o})}}return r},tu=function(e){return e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e},tc=function(e){var t=Object.fromEntries(e.orderSensitiveModifiers.map(function(e){return[e,!0]}));return function(e){if(e.length<=1)return e;var n=[],r=[];return e.forEach(function(e){"["===e[0]||t[e]?(n.push.apply(n,(0,b._)(r.sort()).concat([e])),r=[]):r.push(e)}),n.push.apply(n,(0,b._)(r.sort())),n}},td=/\s+/,tf=function(e,t){for(var n=t.parseClassName,r=t.getClassGroupId,i=t.getConflictingClassGroupIds,a=t.sortModifiers,o=[],s=e.trim().split(td),l="",u=s.length-1;u>=0;u-=1){var c=s[u],d=n(c),f=d.isExternal,p=d.modifiers,h=d.hasImportantModifier,m=d.baseClassName,g=d.maybePostfixModifierPosition;if(f){l=c+(l.length>0?" "+l:l);continue}var x=!!g,y=r(x?m.substring(0,g):m);if(!y){if(!x||!(y=r(m))){l=c+(l.length>0?" "+l:l);continue}x=!1}var b=a(p).join(":"),w=h?b+"!":b,_=w+y;if(!o.includes(_)){o.push(_);for(var k=i(y,x),S=0;S<k.length;++S){var C=k[S];o.push(w+C)}l=c+(l.length>0?" "+l:l)}}return l};function tp(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=th(e))&&(r&&(r+=" "),r+=t);return r}var th=function(e){if("string"==typeof e)return e;for(var t,n="",r=0;r<e.length;r++)e[r]&&(t=th(e[r]))&&(n&&(n+=" "),n+=t);return n},tm=function(e){var t=function(t){return t[e]||[]};return t.isThemeGetter=!0,t},tg=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,tv=/^\((?:(\w[\w-]*):)?(.+)\)$/i,tx=/^\d+\/\d+$/,ty=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,tb=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tw=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,t_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tk=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,tS=function(e){return tx.test(e)},tC=function(e){return!!e&&!Number.isNaN(Number(e))},tj=function(e){return!!e&&Number.isInteger(Number(e))},tT=function(e){return e.endsWith("%")&&tC(e.slice(0,-1))},tE=function(e){return ty.test(e)},tR=function(){return!0},tI=function(e){return tb.test(e)&&!tw.test(e)},tA=function(){return!1},tP=function(e){return t_.test(e)},tD=function(e){return tk.test(e)},tO=function(e){return!tM(e)&&!tG(e)},tN=function(e){return tY(e,tJ,tA)},tM=function(e){return tg.test(e)},tL=function(e){return tY(e,t0,tI)},tB=function(e){return tY(e,t1,tC)},tV=function(e){return tY(e,tX,tA)},tF=function(e){return tY(e,tZ,tD)},tU=function(e){return tY(e,t3,tP)},tG=function(e){return tv.test(e)},t$=function(e){return tQ(e,t0)},tH=function(e){return tQ(e,t2)},tz=function(e){return tQ(e,tX)},tW=function(e){return tQ(e,tJ)},tq=function(e){return tQ(e,tZ)},tK=function(e){return tQ(e,t3,!0)},tY=function(e,t,n){var r=tg.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},tQ=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=tv.exec(e);return!!r&&(r[1]?t(r[1]):n)},tX=function(e){return"position"===e||"percentage"===e},tZ=function(e){return"image"===e||"url"===e},tJ=function(e){return"length"===e||"size"===e||"bg-size"===e},t0=function(e){return"length"===e},t1=function(e){return"number"===e},t2=function(e){return"family-name"===e},t3=function(e){return"shadow"===e},t5=function(e){for(var t,n,r,i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];var s=function(i){var o;return o=a.reduce(function(e,t){return t(e)},e()),n=(t=(0,Y._)({cache:ts(o.cacheSize),parseClassName:tl(o),sortModifiers:tc(o)},e9(o))).cache.get,r=t.cache.set,s=l,l(i)};function l(e){var i=n(e);if(i)return i;var a=tf(e,t);return r(e,a),a}return function(){return s(tp.apply(null,arguments))}}(function(){var e=tm("color"),t=tm("font"),n=tm("text"),r=tm("font-weight"),i=tm("tracking"),a=tm("leading"),o=tm("breakpoint"),s=tm("container"),l=tm("spacing"),u=tm("radius"),c=tm("shadow"),d=tm("inset-shadow"),f=tm("text-shadow"),p=tm("drop-shadow"),h=tm("blur"),m=tm("perspective"),g=tm("aspect"),x=tm("ease"),y=tm("animate"),w=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},_=function(){return["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]},k=function(){return(0,b._)(_()).concat([tG,tM])},S=function(){return["auto","hidden","clip","visible","scroll"]},C=function(){return["auto","contain","none"]},j=function(){return[tG,tM,l]},T=function(){return[tS,"full","auto"].concat((0,b._)(j()))},E=function(){return[tj,"none","subgrid",tG,tM]},R=function(){return["auto",{span:["full",tj,tG,tM]},tj,tG,tM]},I=function(){return[tj,"auto",tG,tM]},A=function(){return["auto","min","max","fr",tG,tM]},P=function(){return["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]},D=function(){return["start","end","center","stretch","center-safe","end-safe"]},O=function(){return["auto"].concat((0,b._)(j()))},N=function(){return[tS,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit"].concat((0,b._)(j()))},M=function(){return[e,tG,tM]},L=function(){return(0,b._)(_()).concat([tz,tV,{position:[tG,tM]}])},B=function(){return["no-repeat",{repeat:["","x","y","space","round"]}]},V=function(){return["auto","cover","contain",tW,tN,{size:[tG,tM]}]},F=function(){return[tT,t$,tL]},U=function(){return["","none","full",u,tG,tM]},G=function(){return["",tC,t$,tL]},$=function(){return["solid","dashed","dotted","double"]},H=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},z=function(){return[tC,tT,tz,tV]},W=function(){return["","none",h,tG,tM]},q=function(){return["none",tC,tG,tM]},K=function(){return["none",tC,tG,tM]},Y=function(){return[tC,tG,tM]},Q=function(){return[tS,"full"].concat((0,b._)(j()))};return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[tE],breakpoint:[tE],color:[tR],container:[tE],"drop-shadow":[tE],ease:["in","out","in-out"],font:[tO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[tE],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[tE],shadow:[tE],spacing:["px",tC],text:[tE],"text-shadow":[tE],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",tS,tM,tG,g]}],container:["container"],columns:[{columns:[tC,tM,tG,s]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:T()}],"inset-x":[{"inset-x":T()}],"inset-y":[{"inset-y":T()}],start:[{start:T()}],end:[{end:T()}],top:[{top:T()}],right:[{right:T()}],bottom:[{bottom:T()}],left:[{left:T()}],visibility:["visible","invisible","collapse"],z:[{z:[tj,"auto",tG,tM]}],basis:[{basis:[tS,"full","auto",s].concat((0,b._)(j()))}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[tC,tS,"auto","initial","none",tM]}],grow:[{grow:["",tC,tG,tM]}],shrink:[{shrink:["",tC,tG,tM]}],order:[{order:[tj,"first","last","none",tG,tM]}],"grid-cols":[{"grid-cols":E()}],"col-start-end":[{col:R()}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":E()}],"row-start-end":[{row:R()}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":A()}],"auto-rows":[{"auto-rows":A()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:(0,b._)(P()).concat(["normal"])}],"justify-items":[{"justify-items":(0,b._)(D()).concat(["normal"])}],"justify-self":[{"justify-self":["auto"].concat((0,b._)(D()))}],"align-content":[{content:["normal"].concat((0,b._)(P()))}],"align-items":[{items:(0,b._)(D()).concat([{baseline:["","last"]}])}],"align-self":[{self:["auto"].concat((0,b._)(D()),[{baseline:["","last"]}])}],"place-content":[{"place-content":P()}],"place-items":[{"place-items":(0,b._)(D()).concat(["baseline"])}],"place-self":[{"place-self":["auto"].concat((0,b._)(D()))}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:N()}],w:[{w:[s,"screen"].concat((0,b._)(N()))}],"min-w":[{"min-w":[s,"screen","none"].concat((0,b._)(N()))}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[o]}].concat((0,b._)(N()))}],h:[{h:["screen"].concat((0,b._)(N()))}],"min-h":[{"min-h":["screen","none"].concat((0,b._)(N()))}],"max-h":[{"max-h":["screen"].concat((0,b._)(N()))}],"font-size":[{text:["base",n,t$,tL]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,tG,tB]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",tT,tM]}],"font-family":[{font:[tH,tM,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,tG,tM]}],"line-clamp":[{"line-clamp":[tC,"none",tG,tB]}],leading:[{leading:[a].concat((0,b._)(j()))}],"list-image":[{"list-image":["none",tG,tM]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tG,tM]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:(0,b._)($()).concat(["wavy"])}],"text-decoration-thickness":[{decoration:[tC,"from-font","auto",tG,tL]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[tC,"auto",tG,tM]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tG,tM]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tG,tM]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:L()}],"bg-repeat":[{bg:B()}],"bg-size":[{bg:V()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},tj,tG,tM],radial:["",tG,tM],conic:[tj,tG,tM]},tq,tF]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:F()}],"gradient-via-pos":[{via:F()}],"gradient-to-pos":[{to:F()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:U()}],"rounded-s":[{"rounded-s":U()}],"rounded-e":[{"rounded-e":U()}],"rounded-t":[{"rounded-t":U()}],"rounded-r":[{"rounded-r":U()}],"rounded-b":[{"rounded-b":U()}],"rounded-l":[{"rounded-l":U()}],"rounded-ss":[{"rounded-ss":U()}],"rounded-se":[{"rounded-se":U()}],"rounded-ee":[{"rounded-ee":U()}],"rounded-es":[{"rounded-es":U()}],"rounded-tl":[{"rounded-tl":U()}],"rounded-tr":[{"rounded-tr":U()}],"rounded-br":[{"rounded-br":U()}],"rounded-bl":[{"rounded-bl":U()}],"border-w":[{border:G()}],"border-w-x":[{"border-x":G()}],"border-w-y":[{"border-y":G()}],"border-w-s":[{"border-s":G()}],"border-w-e":[{"border-e":G()}],"border-w-t":[{"border-t":G()}],"border-w-r":[{"border-r":G()}],"border-w-b":[{"border-b":G()}],"border-w-l":[{"border-l":G()}],"divide-x":[{"divide-x":G()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":G()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:(0,b._)($()).concat(["hidden","none"])}],"divide-style":[{divide:(0,b._)($()).concat(["hidden","none"])}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:(0,b._)($()).concat(["none","hidden"])}],"outline-offset":[{"outline-offset":[tC,tG,tM]}],"outline-w":[{outline:["",tC,t$,tL]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",c,tK,tU]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",d,tK,tU]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[tC,tL]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":G()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",f,tK,tU]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[tC,tG,tM]}],"mix-blend":[{"mix-blend":(0,b._)(H()).concat(["plus-darker","plus-lighter"])}],"bg-blend":[{"bg-blend":H()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[tC]}],"mask-image-linear-from-pos":[{"mask-linear-from":z()}],"mask-image-linear-to-pos":[{"mask-linear-to":z()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":z()}],"mask-image-t-to-pos":[{"mask-t-to":z()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":z()}],"mask-image-r-to-pos":[{"mask-r-to":z()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":z()}],"mask-image-b-to-pos":[{"mask-b-to":z()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":z()}],"mask-image-l-to-pos":[{"mask-l-to":z()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":z()}],"mask-image-x-to-pos":[{"mask-x-to":z()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":z()}],"mask-image-y-to-pos":[{"mask-y-to":z()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[tG,tM]}],"mask-image-radial-from-pos":[{"mask-radial-from":z()}],"mask-image-radial-to-pos":[{"mask-radial-to":z()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[tC]}],"mask-image-conic-from-pos":[{"mask-conic-from":z()}],"mask-image-conic-to-pos":[{"mask-conic-to":z()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:L()}],"mask-repeat":[{mask:B()}],"mask-size":[{mask:V()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tG,tM]}],filter:[{filter:["","none",tG,tM]}],blur:[{blur:W()}],brightness:[{brightness:[tC,tG,tM]}],contrast:[{contrast:[tC,tG,tM]}],"drop-shadow":[{"drop-shadow":["","none",p,tK,tU]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",tC,tG,tM]}],"hue-rotate":[{"hue-rotate":[tC,tG,tM]}],invert:[{invert:["",tC,tG,tM]}],saturate:[{saturate:[tC,tG,tM]}],sepia:[{sepia:["",tC,tG,tM]}],"backdrop-filter":[{"backdrop-filter":["","none",tG,tM]}],"backdrop-blur":[{"backdrop-blur":W()}],"backdrop-brightness":[{"backdrop-brightness":[tC,tG,tM]}],"backdrop-contrast":[{"backdrop-contrast":[tC,tG,tM]}],"backdrop-grayscale":[{"backdrop-grayscale":["",tC,tG,tM]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[tC,tG,tM]}],"backdrop-invert":[{"backdrop-invert":["",tC,tG,tM]}],"backdrop-opacity":[{"backdrop-opacity":[tC,tG,tM]}],"backdrop-saturate":[{"backdrop-saturate":[tC,tG,tM]}],"backdrop-sepia":[{"backdrop-sepia":["",tC,tG,tM]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tG,tM]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[tC,"initial",tG,tM]}],ease:[{ease:["linear","initial",x,tG,tM]}],delay:[{delay:[tC,tG,tM]}],animate:[{animate:["none",y,tG,tM]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,tG,tM]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:q()}],"rotate-x":[{"rotate-x":q()}],"rotate-y":[{"rotate-y":q()}],"rotate-z":[{"rotate-z":q()}],scale:[{scale:K()}],"scale-x":[{"scale-x":K()}],"scale-y":[{"scale-y":K()}],"scale-z":[{"scale-z":K()}],"scale-3d":["scale-3d"],skew:[{skew:Y()}],"skew-x":[{"skew-x":Y()}],"skew-y":[{"skew-y":Y()}],transform:[{transform:[tG,tM,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Q()}],"translate-x":[{"translate-x":Q()}],"translate-y":[{"translate-y":Q()}],"translate-z":[{"translate-z":Q()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tG,tM]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tG,tM]}],fill:[{fill:["none"].concat((0,b._)(M()))}],"stroke-w":[{stroke:[tC,t$,tL,tB]}],stroke:[{stroke:["none"].concat((0,b._)(M()))}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),t4=e.i(924908);e.i(925218);var t8=e.i(267103);function t6(){var e=(0,t4.useChatter)(),i=(0,U.default)().showError,a=(0,t8.useObservable)(e.sessions.agent.current),o=(0,F.useFlag)({controlName:"flag-visual-editor-quick-edits",default:!1});return{handlePrompt:(0,r.useCallback)(function(e,r){return(0,t._)(function(){return(0,n._)(this,function(t){switch(t.label){case 0:if(t.trys.push([0,2,,3]),!a)throw Error("No agent session found");return[4,a.appendEvent({kind:"message",intent:h.MessageAction.AGENT,message:e,webviewTargetedElement:r,quickEdit:o})];case 1:return t.sent(),[3,3];case 2:return t.sent(),i("Failed to send editor message"),[3,3];case 3:return[2]}})})()},[a,i,o])}}var t7=e.i(927158),t9=e.i(173703),ne=e.i(258941),nt=e.i(739521),nn=e.i(960178),nr=e.i(751273);function ni(e){var i,a,o,s,l,u,c,d,f,p,m,g,x,b,w,_,k=e.openPane,S=H({context:"agent"}),C=S.isEditingSupported,j=S.element,T=(0,B.useAtomValue)(M.selectedElementMetadataAtom),R=(0,y._)((0,r.useState)(!1),2),I=R[0],A=R[1],P=t6().handlePrompt,D=(i=(0,B.useAtomValue)(M.visualSelectorStateAtom),a=(0,B.useSetAtom)(M.setVisualSelectorElement),o=(0,B.useAtomValue)(es),s=(0,B.useAtomValue)(ec),p=(l=(0,U.default)().showWarning,u=(0,t7.usePid2Callback)(function(e,r){return function(r,i,a){return(0,t._)(function(){var t;return(0,n._)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.visualEditor.updateClassName.rpc({elementMetadata:r,newClassName:i,originalClassName:a})];case 1:if(!n.sent().ok)return l("Failed to update class name, Agent is attempting to update the class"),[2,!1];return[2,!0];case 2:return t=n.sent(),E.logger.error("[Visual Editor] Failed to update class name",t),l("Failed to update class name, Agent is attempting to update the class"),[2,!1];case 3:return[2]}})})()}},[l]),c=(0,t7.usePid2Callback)(function(e,r){return function(r,i,a){return(0,t._)(function(){var t;return(0,n._)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.visualEditor.updateTextContent.rpc({elementMetadata:r,newText:i,originalText:a})];case 1:if(!n.sent().ok)return l("Dynamic text cannot be updated directly, Agent is attempting to update the text"),[2,!1];return[2,!0];case 2:return t=n.sent(),E.logger.error("[Visual Editor] Failed to update text content",t),l("Dynamic text cannot be updated directly, Agent is attempting to update the text"),[2,!1];case 3:return[2]}})})()}},[l]),d=(0,t7.usePid2Callback)(function(e,r){return function(r,i,a,o){return(0,t._)(function(){var t;return(0,n._)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.visualEditor.updateImageSrc.rpc({elementMetadata:r,newImagePath:i,originalSrc:a,isUrl:o})];case 1:if(!n.sent().ok)return l("Failed to update image source, Agent is attempting to update the image"),[2,!1];return[2,!0];case 2:return t=n.sent(),E.logger.error("[Visual Editor] Failed to update image source",t),l("Failed to update image source, Agent is attempting to update the image"),[2,!1];case 3:return[2]}})})()}},[l]),f={updateClassName:function(e,r,i){return(0,t._)(function(){return(0,n._)(this,function(t){return u?[2,u(e,r,i)]:[2,!1]})})()},updateTextContent:function(e,r,i){return(0,t._)(function(){return(0,n._)(this,function(t){return c?[2,c(e,r,i)]:[2,!1]})})()},updateImageSrc:function(e,r,i,a){return(0,t._)(function(){return(0,n._)(this,function(t){return d?[2,d(e,r,i,a)]:[2,!1]})})()}}).updateClassName,m=f.updateTextContent,g=f.updateImageSrc,x=t6().handlePrompt,_=(b=(0,t4.useChatter)(),w=(0,t8.useObservable)(b.sessions.agent.current),{sendCheckpointEvent:(0,r.useCallback)(function(){return(0,t._)(function(){var e;return(0,n._)(this,function(t){switch(t.label){case 0:if(!w)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,w.appendEvent({kind:"triggerCheckpoint",description:"Visual edit",onlyIfDiff:!0,author:h.CommitAuthor.COMMIT_AUTHOR_AGENT})];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),E.logger.warn("Failed to send checkpoint event:",e),[3,4];case 4:return[2]}})})()},[w])}).sendCheckpointEvent,{saveChanges:function(){return(0,t._)(function(){var e,t,r,l,u,c,d,f,h,b,w,k,S,C,j,T,R,I,A,P;return(0,n._)(this,function(n){switch(n.label){case 0:e=[],n.label=1;case 1:if(n.trys.push([1,15,16,17]),(null==i||null==(t=i.metadata)?void 0:t.textContent)===o.textContent)return[3,4];if(!((null==i||null==(d=i.metadata)?void 0:d.elementPath)&&o.textContent))return[3,3];return[4,m(i.metadata.elementPath,o.textContent,i.metadata.textContent)];case 2:return n.sent()?(0,G.track)(V.events.VISUAL_SELECTOR,{action:"edit",editType:"text",method:"deterministic"}):((0,G.track)(V.events.VISUAL_SELECTOR,{action:"edit",editType:"text",method:"fallback"}),e.push({type:"text",oldText:i.metadata.textContent,newText:o.textContent})),[3,4];case 3:o.textContent&&((0,G.track)(V.events.VISUAL_SELECTOR,{action:"edit",editType:"text",method:"fallback",reason:"missing_path"}),e.push({type:"text",oldText:null==i||null==(f=i.metadata)?void 0:f.textContent,newText:o.textContent})),n.label=4;case 4:if((b=Object.entries(s).reduce(function(e,t){var n=(0,y._)(t,2),r=n[0],i=n[1];switch(r){case"font-size":case"color":return t5(e,"text-[".concat(i,"]"));case"font-weight":return t5(e,"font-".concat(ez[i]||"normal"));case"text-align":return t5(e,"text-".concat(i));case"background-color":return t5(e,"bg-[".concat(i,"]"));case"margin-left":return t5(e,"ml-[".concat(i,"]"));case"margin-right":return t5(e,"mr-[".concat(i,"]"));case"margin-top":return t5(e,"mt-[".concat(i,"]"));case"margin-bottom":return t5(e,"mb-[".concat(i,"]"));case"padding-left":return t5(e,"pl-[".concat(i,"]"));case"padding-right":return t5(e,"pr-[".concat(i,"]"));case"padding-top":return t5(e,"pt-[".concat(i,"]"));case"padding-bottom":return t5(e,"pb-[".concat(i,"]"));default:return e}},null!=(h=null==i||null==(r=i.metadata)?void 0:r.className)?h:""))===(null==i||null==(l=i.metadata)?void 0:l.className))return[3,7];if(!(null==i||null==(w=i.metadata)?void 0:w.elementPath))return[3,6];return[4,p(i.metadata.elementPath,b,i.metadata.className)];case 5:return n.sent()?(0,G.track)(V.events.VISUAL_SELECTOR,{action:"edit",editType:"style",method:"deterministic"}):((0,G.track)(V.events.VISUAL_SELECTOR,{action:"edit",editType:"style",method:"fallback"}),e.push({type:"style",oldClassName:i.metadata.className,newClassName:b})),[3,7];case 6:(0,G.track)(V.events.VISUAL_SELECTOR,{action:"edit",editType:"style",method:"fallback",reason:"missing_path"}),e.push({type:"style",oldClassName:null!=(S=null==i||null==(k=i.metadata)?void 0:k.className)?S:"Unknown",newClassName:b}),n.label=7;case 7:if(!((null==i||null==(u=i.metadata)?void 0:u.srcAttribute)!==o.imageSrc&&o.imageSrc&&(null==i||null==(c=i.metadata)?void 0:c.elementPath)))return[3,9];return j=!(null==(C=o.imageSrc)?void 0:C.startsWith(et.ATTACHED_ASSETS_PATH)),[4,g(i.metadata.elementPath,o.imageSrc,i.metadata.srcAttribute,j)];case 8:n.sent()?(0,G.track)(V.events.VISUAL_SELECTOR,{action:"edit",editType:"image",method:"deterministic"}):((0,G.track)(V.events.VISUAL_SELECTOR,{action:"edit",editType:"image",method:"fallback"}),e.push({type:"image",newSrc:o.imageSrc})),n.label=9;case 9:if(!(e.length>0&&i))return[3,13];if(T="Please update this element with the following changes:\n\n",(R=e.filter(function(e){return"text"===e.type})).length>0&&(T+="Text Content Changes:\n",R.forEach(function(e){T+='- Change text from "'.concat(e.oldText,'" to "').concat(e.newText,'"\n')}),T+="\n"),(I=e.filter(function(e){return"style"===e.type})).length>0&&(T+="Style Changes:\n",I.forEach(function(e){T+='- Update classes from "'.concat(e.oldClassName,'" to "').concat(e.newClassName,'"\n')}),T+="\n"),(A=e.filter(function(e){return"image"===e.type})).length>0&&(T+="Image Source Changes:\n",A.forEach(function(e){T+='- Update image source to "'.concat(e.newSrc,'"\n')}),T+="\n"),!i.element)return[3,11];return[4,x(T,i.element)];case 10:return n.sent(),[3,12];case 11:throw Error("Selected element is missing");case 12:return[3,14];case 13:_().catch(function(e){E.logger.warn("Failed to create checkpoint:",e)}),n.label=14;case 14:return[3,17];case 15:return P=n.sent(),E.logger.error("[Visual Editor] Failed to apply changes:",P),[3,17];case 16:return(0,$.clearElementDirtyState)(),setTimeout(function(){(0,$.sendClearSelectionMessage)()},50),a(null),[7];case 17:return[2]}})})()}}).saveChanges,O=(0,B.useAtomValue)(eu),N=e7(T),L=(0,r.useMemo)(function(){return Object.values(N).every(function(e){return!1===e})},[N]),F=function(){A(!1)};return j&&C&&j.filePath?(0,z.jsx)(t9.ShadesSurface,{clsx:[eZ.default.editorContainer,eZ.default.bordered],align:"center",children:(0,z.jsxs)(eO.View,{clsx:eZ.default.editor,p:12,children:[(0,z.jsxs)(eO.View,{row:!0,justify:"space-between",children:[(0,z.jsx)(eO.View,{children:(0,z.jsx)(K.TargetedElement,{targetedElement:j,openPane:k})}),(0,z.jsx)(eP.Button,{text:"",iconLeft:(0,z.jsx)(W.default,{}),variant:"nofill",onClick:function(){(0,$.sendClearSelectionMessage)(),(0,$.sendToggleVisualEditorMessage)(!1,!1)}})]}),L?(0,z.jsx)(eO.View,{p:8,children:(0,z.jsx)(nn.Text,{color:"dimmer",children:"You can modify this element by describing the change in the chat. No deterministic edits are supported for this element."})}):null,N.textSectionHeader?(0,z.jsx)(nn.Text,{className:eZ.default.sectionTitle,children:"Text"}):null,N.content?(0,z.jsx)(eO.View,{className:eZ.default.formRow,children:(0,z.jsx)(eF,{})}):null,N.imageSectionHeader?(0,z.jsx)(nn.Text,{className:eZ.default.sectionTitle,children:"Image"}):null,N.imageSource?(0,z.jsx)(eO.View,{className:eZ.default.formRow,children:(0,z.jsx)(eO.View,{className:eZ.default.formField,children:(0,z.jsx)(eJ,{})})}):null,N.fontSize||N.fontStyle?(0,z.jsxs)(eO.View,{className:eZ.default.formRow,children:[N.fontSize?(0,z.jsx)(eO.View,{className:eZ.default.formField,children:(0,z.jsx)(eH,{})}):null,N.fontStyle?(0,z.jsx)(eO.View,{className:eZ.default.formField,children:(0,z.jsx)(eq,{})}):null]}):null,N.alignment?(0,z.jsx)(eO.View,{className:eZ.default.formRow,children:(0,z.jsx)(eO.View,{className:eZ.default.formField,children:(0,z.jsx)(eN,{})})}):null,N.appearanceSectionHeader?(0,z.jsx)(nn.Text,{className:eZ.default.sectionTitle,children:"Appearance"}):null,N.textColor||N.backgroundColor?(0,z.jsxs)(eO.View,{className:eZ.default.formRow,children:[N.textColor?(0,z.jsx)(eO.View,{className:eZ.default.formField,children:(0,z.jsx)(eB,{})}):null,N.backgroundColor?(0,z.jsx)(eO.View,{className:eZ.default.formField,children:(0,z.jsx)(eL,{})}):null]}):null,N.layoutSectionHeader?(0,z.jsx)(nn.Text,{className:eZ.default.sectionTitle,children:"Layout"}):null,N.margin?(0,z.jsx)(eO.View,{className:eZ.default.formRow,children:(0,z.jsx)(eO.View,{className:eZ.default.formField,children:(0,z.jsx)(e2,{})})}):null,N.padding?(0,z.jsx)(eO.View,{className:eZ.default.formRow,children:(0,z.jsx)(eO.View,{className:eZ.default.formField,children:(0,z.jsx)(e4,{})})}):null,(0,z.jsx)(eO.View,{row:!0,justify:"space-between",align:"center",gap:8,pt:8,children:L?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eP.Button,{text:"Delete",iconLeft:(0,z.jsx)(q.default,{}),variant:"outlined",colorway:"negative",onClick:function(){A(!0)}}),(0,z.jsx)(nr.Tooltip,{tooltip:"No changes to save",isDisabled:O,placement:"top",children:(0,z.jsx)(eP.Button,{text:"Save changes",onClick:function(){return(0,t._)(function(){return(0,n._)(this,function(e){switch(e.label){case 0:if(!j)return[2];return[4,D()];case 1:return e.sent(),[2]}})})()},colorway:"primary",isDisabled:!O})})]})}),(0,z.jsx)(nt.Modal,{isOpen:I,onRequestClose:F,children:(0,z.jsx)(ne.default,{prompt:"Delete Element",desc:"Are you sure you want to delete this element?",confirmText:"Yes, delete this element",danger:!0,onCancel:F,onConfirm:function(){return(0,t._)(function(){return(0,n._)(this,function(e){switch(e.label){case 0:if(!j)return[2];return(0,$.updateSelectedElementInWebview)({style:"display: none;"}),F(),[4,P("Delete Element",j)];case 1:return e.sent(),(0,$.sendToggleVisualEditorMessage)(!1,!1),[2]}})})()},icon:(0,z.jsx)(q.default,{})})})]})}):null}function na(e,i){var a,o,s,l,u=(o=(a=(0,m.useChatEngineModels)()).basicModel,s=a.advancedModel,l=a.overrideModel,(0,r.useCallback)(function(e){var t=e.modelType,n=o;return l?n=l:t===h.ModelType.ADVANCED&&(n=s),n},[s,o,l])),c=H({context:"agent"}).element,d=null==c?void 0:c.filePath;return(0,r.useCallback)(function(r){var a=r.modelType,o=r.filePreferences,s=r.recentFiles;return(0,t._)(function(){var r,l;return(0,n._)(this,function(c){switch(c.label){case 0:return[4,i.getConfig()];case 1:var f;return l=((null==(r=c.sent().config)?void 0:r.hidden)||[]).map(function(e){return(0,D.globToRegExp)(e)}).filter(Boolean),[2,(f={model:u({modelType:a}),filePreferences:o,filter:function(e){return!(0,O.isPathHiddenByDotReplit)(e,l)},recentFiles:s,targetedElementFile:d,entrypoint:(null==r?void 0:r.entrypoint)||void 0,fs:e},(0,t._)(function(){var e,r,i,a,o,s,l,u,c,d,p,m,g,w,_,k,S,P,D,O,N,M,L,B,V,F,U,G,$,H,z,W,q,K,Y,Q,X,Z,J,ee,et,en,er,ei,ea,eo,es,el,eu,ec,ed,ef,ep,eh,em,eg;return(0,n._)(this,function(ev){switch(ev.label){case 0:e=f.filter,r=f.filePreferences,i=f.entrypoint,a=f.model,o=f.fs,s=f.targetedElementFile,l=(0,x._)(f,["filter","filePreferences","entrypoint","model","fs","targetedElementFile"]),u=a.limits.fileContextCharacters,c=[],d=[],p=new Set,m=!0,g=!1,w=void 0;try{for(_=r[Symbol.iterator]();!(m=(k=_.next()).done);m=!0){if(P=(S=(0,y._)(k.value,2))[0],D=S[1],"exclude"===D){c.push(P);continue}if(!A(P)){p.add(P);continue}d.push(P)}}catch(e){g=!0,w=e}finally{try{m||null==_.return||_.return()}finally{if(g)throw w}}O=[],N=!0,M=!1,L=void 0;try{for(B=l.recentFiles[Symbol.iterator]();!(N=(V=B.next()).done)&&((F=V.value,!(!c.includes(F)&&A(F)&&e(F)))||d.includes(F)||(O.push(F),3!==O.length));N=!0);}catch(e){M=!0,L=e}finally{try{N||null==B.return||B.return()}finally{if(M)throw L}}if(U=(0,b._)(d).concat((0,b._)(O)),s&&A(s)&&U.unshift(s),!(i&&U.length<10))return[3,2];return $=""===(G=(0,j.getParentPath)(i))?T.ROOT_PATH:G,[4,o.readDir($)];case 1:if(!(H=ev.sent()).error){z=0,W=!0,q=!1,K=void 0;try{for(Y=H.children[Symbol.iterator]();!(W=(Q=Y.next()).done)&&((X=Q.value,Z=$===T.ROOT_PATH?X.filename:$+X.filename,!(!c.includes(Z)&&A(Z)&&e(Z)))||U.includes(Z)||(U.push(Z),1!=++z));W=!0);}catch(e){q=!0,K=e}finally{try{W||null==Y.return||Y.return()}finally{if(q)throw K}}}ev.label=2;case 2:return E.logger.info("AI got file context",{numRecentFiles:O.length,numPreferredFiles:d.length,maxFiles:10}),J=U.slice(0,10),ee=U.slice(10),[4,Promise.all(J.map(function(e){return(0,t._)(function(){var t;return(0,n._)(this,function(n){return t=new Promise(function(e){return setTimeout(e,5e3)}),[2,Promise.race([Promise.all([o.readFile(e),function(){try{return o.getOTVersion(e)}catch(e){}return 0}()]),t])]})})()}))];case 3:for(ea=0,et=ev.sent(),en=u,er=[],ei=[];ea<J.length;ea++){if(eo=J[ea],!(es=et[ea])){E.logger.info("AI file read timeout",{filePath:eo});continue}if(eu=(el=(0,y._)(es,2))[0],ec=el[1],eu.error){E.logger.info("AI failed to read file",{filePath:eo});continue}if(R(eu.content.toBuffer())){E.logger.info("GhostwriterChat filtered out binary file",{filePath:eo});continue}if(en<=0){ee.push(eo);continue}if(ef=(ed=eu.content.toString()).slice(0,en),ep=ed.length>ef.length,eg=null!=(em=null==(eh=C.FileTypeRepository.from(eo))?void 0:eh.id)?em:(0,j.getExt)(eo),ep){er.push(eo);continue}en-=ef.length,ei.push({filePath:eo,fileContent:ef,fileVersion:ec,language:eg,referenceType:h.CodeReferenceType.FILE,code:"",range:I})}return[2,{fileContext:ei,preferredFiles:d,mostRecentFile:O.length?O[0]:void 0,truncatedFiles:er,overflowingFiles:ee,unsupportedPreferredFiles:p}]}})})())]}})})()},[e,i,u,d])}function no(){var e=(0,N.default)(),t=e.fs,n=e.dotReplit,i=(0,g.useConfig)().hasAccessToAdvancedModel?h.ModelType.ADVANCED:h.ModelType.BASIC,a=(0,P.useGetFileContextPreferences)(),o=na(t,n),l=(0,s.useGetRecentFiles)();return(0,r.useCallback)(function(){return o({modelType:i,filePreferences:a(),recentFiles:l()})},[a,l,o,i])}e.s(["TargetedElementEditor",()=>ni],691626),e.i(755323),e.s([],619231),e.s(["useGetFileContext",()=>na,"useGetSessionFileContext",()=>no],939652),e.i(508987);var ns=e.i(457103),nl=e.i(399119),nu=e.i(904851),nc=e.i(90659),nd=e.i(721281),nf=e.i(445789),np=e.i(992785),nh=e.i(753950),nm=e.i(179302),ng=[{"Anthropic API Key":/(sk-ant-api03-[\w-]{93}AA)/g,"AWS API Key":/AKIA[0-9A-Z]{16}/g,"AWS AppSync GraphQL Key":/da2-[a-z0-9]{26}/g,"AWS MWS ID":/mzn\.mws\.[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,"AWS client ID":/(A3T[A-Z0-9]|AKIA|AGPA|AIDA|AROA|AIPA|ANPA|ANVA|ASIA)[A-Z0-9]{16}/g,"Discord Bot Token":/(?:N|M|O)[a-zA-Z0-9]{23}\\.[a-zA-Z0-9-_]{6}\\.[a-zA-Z0-9-_]{27}/g,"Discord Webhook Url":/https?:\/\/(?:ptb\.|canary\.)?discord\.com\/api(?:\/v\d{1,2})?\/webhooks\/(\d{17,19})\/([\w-]{68})/gi,"Dynatrace Token":/dt0[a-zA-Z]{1}[0-9]{2}\\.[A-Z0-9]{24}\\.[A-Z0-9]{64}/gi,"Facebook Access Token":/EAACEdEose0cBA[0-9A-Za-z]+/g,"Facebook OAuth":/[fF][aA][cC][eE][bB][oO][oO][kK].*['|"][0-9a-f]{32}['|"]/g,"Github Personal Access Token":/ghp_[0-9a-zA-Z]{36}/g,"Github OAuth Access Token":/gho_[0-9a-zA-Z]{36}/g,"Github App Installation Access Token":/(ghu|ghs)_[0-9a-zA-Z]{36}/g,"Github App Refresh Token":/ghr_[0-9a-zA-Z]{76}/g,"Generic API Key":/[aA][pP][iI]_?[kK][eE][yY].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Generic Secret":/[sS][eE][cC][rR][eE][tT].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Google API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google Gmail API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google OAuth Access Token":/ya29\\.[0-9A-Za-z\\-_]+/g,"Google YouTube API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Heroku API Key":/[hH][eE][rR][oO][kK][uU].*[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/g,"MailChimp API Key":/[0-9a-f]{32}-us[0-9]{1,2}/g,"Mailgun API Key":/key-[0-9a-zA-Z]{32}/g,"Mapbox, Public Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"Mapbox, Secret Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"npm Access Token":/npm_[0-9a-zA-Z]{36}/g,"NuGet API Key":/oy2[a-z0-9]{43}/g,"OpenAI API Key":/sk-[a-zA-Z0-9_-]+/g,"PGP private key block":/-----BEGIN PGP PRIVATE KEY BLOCK-----/g,"Picatic API Key":/sk_live_[0-9a-z]{32}/g,"PyPI API Token":/pypi-AgEIcHlwaS5vcmc[A-Za-z0-9-_]{50,1000}/g,"SSH (DSA) private key":/-----BEGIN DSA PRIVATE KEY-----/g,"SSH (EC) private key":/-----BEGIN EC PRIVATE KEY-----/g,"SSH (RSA) private key":/-----BEGIN RSA PRIVATE KEY-----/g,"SendGrid API Key":/SG\.[0-9A-Za-z\-_]{22}\.[0-9A-Za-z\-_]{43}/g,"Shopify Access Token":/shpat_[a-fA-F0-9]{32}/g,"Shopify App Shared Secret":/shpss_[a-fA-F0-9]{32}/g,"Shopify Custom App Access Token":/shpca_[a-fA-F0-9]{32}/g,"Shopify Private App Password":/shppa_[a-fA-F0-9]{32}/g,"Slack Token":/(xox[pborsa]-[0-9]{12}-[0-9]{12}-[0-9]{12}-[a-z0-9]{32})/g,"Slack API Token":/xox[baprs]-([0-9a-zA-Z]{10,48})?/g,"Slack Live API Key":/(?:r|s)k_live_[0-9a-zA-Z]{24}/g,"Slack Test API Key":/(?:r|s)k_test_[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Bot Access Token":/xoxb-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Configuration Token":/xoxe.xoxp-1-[0-9a-zA-Z]{166}/g,"Slack, OAuth v2 Refresh Token":/xoxe-1-[0-9a-zA-Z]{147}/g,"Slack, OAuth v2 User Access Token":/xoxp-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack Webhook":/https:\/\/hooks.slack.com\/services\/T[a-zA-Z0-9_]{10}\/B[a-zA-Z0-9_]{10}\/[a-zA-Z0-9_]{24}/g,"Square Access Token":/sq0atp-[0-9A-Za-z\\-_]{22}/g,"Square OAuth Secret":/sq0csp-[0-9A-Za-z\\-_]{43}/g,"Stripe API Key":/sk_live_[0-9a-zA-Z]{24}/g,"Stripe Restricted API Key":/rk_live_[0-9a-zA-Z]{24}/g,"Twilio API Key":/SK[0-9a-fA-F]{32}/g,"Twitter Access Token":/[tT][wW][iI][tT][tT][eE][rR].*[1-9][0-9]+-[0-9a-zA-Z]{40}/g,"Twitter OAuth":/[tT][wW][iI][tT][tT][eE][rR].*['|"][0-9a-zA-Z]{35,44}['|"]/g},{"Instagram oauth":/[0-9a-fA-F]{7}\.[0-9a-fA-F]{32}/g}];function nv(e){if(e.length>2e3)return!1;var t=!0,n=!1,r=void 0;try{for(var i,a=ng[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=!0,l=!1,u=void 0;try{for(var c,d=Object.entries(o)[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=(0,y._)(c.value,2),p=f[0],h=f[1],m=e.search(h);if(!(m<0)){var g=e.match(h);if(g){var x=m+g[0].length;return{start:m,end:x,secret:e.slice(m,x),provider:p}}}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}function nx(e){for(var t=null,n="",r=0,i=0;i<e.length;i++){var a=e[i],o=" "===a||"\n"===a||"	"===a||"\r"===a;if(o||(r=n?r:i,n+=a),n&&(o||i===e.length-1)){if(n.length<16){n="",r=0;continue}e:for(;n;){var s=!0,l=!1,u=void 0;try{for(var c,d=ng[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value,p=!0,h=!1,m=void 0;try{for(var g,x=Object.entries(f)[Symbol.iterator]();!(p=(g=x.next()).done);p=!0){var b=(0,y._)(g.value,2),w=b[0],_=b[1];_.lastIndex=0;var k=_.exec(n);if(k){var S=k[0].length,C=k.index,j=C+S;null!=t||(t=[]),t.push({start:r+C,end:r+j,secret:k[0],provider:w}),n=n.slice(S),r+=S;continue e}}}catch(e){h=!0,m=e}finally{try{p||null==x.return||x.return()}finally{if(h)throw m}}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}n="",r=0}}}return t}e.s(["scan",()=>nv,"scanMany",()=>nx],445735);var ny=e.i(480028),nb="cm-active-in-message-secret";function nw(e,t){for(var n=[],r=e.state.field(nj).iter(),i=new Set;r.value;){if(!r.value.dismissed&&t[r.value.id]){var a="`".concat(t[r.value.id],"`");n.push({from:r.from,to:r.to,insert:a}),i.add(r.value.provider)}r.next()}n.length&&e.dispatch({changes:n,annotations:nC.of({providers:Array.from(i)})})}var n_=nm.EditorView.theme((0,nd._)({},".".concat(nb),{display:"inline-block",color:ny.tokens.foregroundDimmer,backgroundColor:ny.tokens.orangeDimmer,"&::selection":{color:ny.tokens.foregroundDefault}})),nk=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;return(0,nu._)(this,t),n=(0,nl._)(this,t),(0,nd._)(n,"provider",void 0),(0,nd._)(n,"dismissed",void 0),(0,nd._)(n,"id",void 0),n.provider=e,n.dismissed=r,n.id=null!=i?i:"secret-".concat(t.counter++),n}return(0,nf._)(t,e),(0,nc._)(t,[{key:"eq",value:function(e){return(0,u._)(e,t)&&this.id===e.id}},{key:"dismiss",value:function(){return new t(this.provider,!0,this.id)}}],[{key:"range",value:function(e,t,n){return new this(e).range(t,n)}}]),t}(nh.RangeValue);(0,nd._)(nk,"counter",0),nk.prototype.startSide=1,nk.prototype.endSide=-1;var nS=nh.StateEffect.define(),nC=nh.Annotation.define(),nj=nh.StateField.define({create:function(){return nh.RangeSet.empty},update:function(e,t){var n=null;t.changes.empty||(e.size&&(e=(e=e.map(t.changes)).update({filter:function(e,t){return e!==t}})),t.changes.iterChangedRanges(function(e,r,i,a){var o=t.startState.doc.lineAt(e).from,s=t.startState.doc.lineAt(r).to,l=t.state.doc.lineAt(i).from,u=t.state.doc.lineAt(a).to,c=function(e,t,n,r,i,a){function o(e){return" "===e||"	"===e||"\n"===e||"\r"===e}function s(e){return 0===e.length||0===e.trim().length}var l=e.slice(n,r),u=t.slice(i,a);if(s(l)&&s(u))return null;for(var c=i;c>0&&!o(t[c-1]);)c--;for(var d=a;d<t.length&&!o(t[d]);)d++;if(i===a&&n<r){if(n>0&&!o(e[n-1])){var f=!s(l),p=r<e.length&&!o(e[r]);if(f||!p)return{fromB:c,toB:d}}if(r<e.length&&!o(e[r])){var h=!s(l),m=n>0&&!o(e[n-1]);if(h||!m)return{fromB:c,toB:d}}if(s(l))return null}for(;c<d&&o(t[c]);)c++;for(;d>c&&o(t[d-1]);)d--;return c>=d?null:{fromB:c,toB:d}}(t.startState.sliceDoc(o,s),t.state.sliceDoc(l,u),e-o,r-o,i-l,a-l);c&&(null!=n||(n=[]),n.push({from:c.fromB+l,to:c.toB+l}))}));var r=!0,i=!1,a=void 0;try{for(var o,s=t.effects[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)if(o.value.is(nS)){for(var l=new nh.RangeSetBuilder,u=e.iter();u.value;)l.add(u.from,u.to,u.value.dismiss()),u.next();e=l.finish();continue}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}if(n){var c=!0,d=!1,f=void 0;try{for(var p,h=n[Symbol.iterator]();!(c=(p=h.next()).done);c=!0)!function(){var n=p.value;e=e.update({filter:function(e,t){return e<n.from||t>n.to}});var r=nx(t.state.sliceDoc(n.from,n.to));if(r){var i=r.map(function(e){return nk.range(e.provider,n.from+e.start,n.from+e.end)});e=e.update({add:i,sort:!0})}}()}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}}return e}}),nT=nh.StateField.define({create:function(){return[]},compare:function(e,t){return(0,np.default)(e,t)},update:function(e,t){if(!(0,ns.hasChanged)(t,nj))return e;for(var n=[],r=t.state.field(nj).iter();r.value;)r.value.dismissed||n.push({id:r.value.id,provider:r.value.provider,key:t.state.sliceDoc(r.from,r.to)}),r.next();return n}}),nE=nh.StateField.define({create:function(){return!1},update:function(e,t){return(0,ns.hasChanged)(t,nT)?t.state.field(nT).length>0:e}}),nR=nm.Decoration.mark({class:nb,inclusiveStart:!0,inclusiveEnd:!0}),nI=nh.StateField.define({create:function(){return nm.Decoration.none},update:function(e,t){if(!(0,ns.hasChanged)(t,nj))return e;for(var n=new nh.RangeSetBuilder,r=t.state.field(nj).iter();r.value;)r.value.dismissed||n.add(r.from,r.to,nR),r.next();return n.finish()},provide:function(e){return nm.EditorView.decorations.from(e)}}),nA=nm.EditorView.updateListener.of(function(e){if((0,ns.hasChanged)(e,nj)){var t=null!=(o=e.startState.field(nT,!1))?o:[],n=e.state.field(nT).filter(function(e){return!t.some(function(t){return t.id===e.id})});n.length&&(0,G.track)(V.events.IN_MESSAGE_SCANNER_USED,{action:"secrets_detected",providers:n.map(function(e){return e.provider})});var r=!0,i=!1,a=void 0;try{for(var o,s,l=e.transactions[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=!0,d=!1,f=void 0;try{for(var p,h=u.effects[Symbol.iterator]();!(c=(p=h.next()).done);c=!0)if(p.value.is(nS)){var m=u.startState.field(nj,!1);if(m){for(var g=new Set,x=m.iter();x.value;)x.value.dismissed||g.add(x.value.provider),x.next();g.size&&(0,G.track)(V.events.IN_MESSAGE_SCANNER_USED,{action:"secrets_dismissed",providers:Array.from(g)})}}}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}var y=u.annotation(nC);y&&(0,G.track)(V.events.IN_MESSAGE_SCANNER_USED,{action:"secrets_replaced",providers:y.providers})}}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}}}),nP=[nj,n_,nh.Prec.highest(nI),nT,nE,nA];e.s(["ActiveInMessageSecrets",()=>nT,"DismissActiveInMessageSecrets",()=>nS,"HasActiveInMessageSecrets",()=>nE,"InMessageSecretScanner",()=>nP,"replaceActiveSecrets",()=>nw],921760);var nD=e.i(703613),nO=e.i(99145),nN=(0,r.createContext)(null);function nM(e){var t=e.children,n=(0,F.useFlag)({type:"boolean",controlName:"flag-scan-in-message-secrets"}),i=(0,r.useMemo)(function(){return{secrets:new c.ObservableState([]),replaceListeners:new nO.ListenerList,dismissListeners:new nO.ListenerList}},[]);return n?(0,z.jsx)(nN.Provider,{value:i,children:t}):(0,z.jsx)(z.Fragment,{children:t})}function nL(){return!!(0,r.useContext)(nN)}function nB(){var e=(0,r.useContext)(nN);return{inMessageSecrets:(0,t8.useObservable)(null==e?void 0:e.secrets,[]),replaceInMessageSecrets:(0,r.useCallback)(function(t){null==e||e.replaceListeners.notify(t)},[e]),dismissInMessageSecrets:(0,r.useCallback)(function(){null==e||e.dismissListeners.notify()},[e])}}function nV(e){var t=(0,r.useContext)(nN);(0,r.useEffect)(function(){var n=null==e?void 0:e.plugin(nD.StateListenerPlugin);if(t&&e&&n&&!n.destroyed){var r=n.bind({changed:function(e){return(0,ns.hasChanged)(e,nT)},callback:function(e){t.secrets.set(e.state.field(nT))},destroy:function(){t.secrets.set([])}}),i=t.replaceListeners.add(function(t){nw(e,t)}),a=t.dismissListeners.add(function(){e.dispatch({effects:nS.of(!0)})});return function(){r(),i(),a()}}},[e,t])}e.s(["InMessageSecretsProvider",()=>nM,"useBindViewToInMessageSecrets",()=>nV,"useHasInMessageSecretsContext",()=>nL,"useInMessageSecrets",()=>nB],274808);var nF=e.i(641555);function nU(e){var t=(0,t4.useChatter)();return(0,nF.useObservableMemo)(function(){return e?t.sessions.agent.all.latest.select(function(t){return(null==t?void 0:t.id)!==e}):null},[t,e],{default:!1})}e.s(["useIsAgentSessionReadOnly",()=>nU],603969)},269940,808547,e=>{"use strict";var t,n=e.i(878420),r=e.i(64386),i=e.i(276385),a=e.i(82259);e.i(877212);var o=e.i(924908),s=e.i(629536);e.i(925218);var l=e.i(641555),u=e.i(593767),c=e.i(416298),d=e.i(858248),f=e.i(709485);e.i(148382);var p=e.i(721281),h=e.i(711223),m=e.i(389959),g=e.i(63846);e.i(416143);var x=e.i(480028),y=e.i(446530),b=e.i(613355),w=e.i(140487),_=e.i(625484),k=b.container.min(400),S=(0,y.cssRecord)({root:[b.rcss.width("100%")],narrowContainer:[b.rcss.flex.column,b.rcss.gap(8),b.rcss.width("100%"),b.rcss.overflowX("auto"),b.rcss.scrollbar.hidden,(0,p._)({margin:"0 auto"},k,{display:"none"})],narrowRow:[b.rcss.flex.row,b.rcss.gap(8),b.rcss.width("100%"),{display:"flex",flexWrap:"nowrap",paddingLeft:16,"&::after":{content:'""',width:8,flexShrink:0}}],wideContainer:[b.rcss.gap(8),b.rcss.width("100%"),(0,p._)({display:"none"},k,{display:"flex",maxWidth:500,flexWrap:"wrap",alignSelf:"center",justifyContent:"center",width:"fit-content"})],button:[b.rcss.maxWidth(350),(0,p._)({justifyContent:"flex-start",fontSize:x.tokens.fontSizeDefault,color:x.tokens.foregroundDimmer,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},k,{width:"auto",justifyContent:"center"})]});function C(e){var t=e.prompts,a=e.onClick,o=(0,m.useMemo)(function(){var e=Math.ceil(t.length/2);return{halfLength:e,firstRow:t.slice(0,e),secondRow:t.slice(e)}},[t]),s=o.halfLength,l=o.firstRow,u=o.secondRow,c=(0,m.useMemo)(function(){return t.slice(0,6)},[t]);return(0,i.jsxs)(_.View,{css:S.root,children:[(0,i.jsxs)(_.View,{css:S.narrowContainer,children:[(0,i.jsx)(_.View,{css:S.narrowRow,children:l.map(function(e,t){return(0,h.createElement)(j,(0,r._)((0,n._)({},e),{index:t,key:e.description,onClick:function(){return a(e)}}))})}),(0,i.jsx)(_.View,{css:S.narrowRow,children:u.map(function(e,t){return(0,h.createElement)(j,(0,r._)((0,n._)({},e),{index:t+s,key:e.description,onClick:function(){return a(e)}}))})})]}),(0,i.jsx)(_.View,{css:S.wideContainer,row:!0,children:c.map(function(e,t){return(0,h.createElement)(j,(0,r._)((0,n._)({},e),{index:t,key:e.description,onClick:function(){return a(e)}}))})})]})}function j(e){(0,g.getAiEndpoint)();var t=void 0,n=null!=t?t:e.description;return(0,i.jsx)(w.Button,{css:S.button,text:n,onClick:function(t){e.onClick()},"aria-label":n})}var T=e.i(965097),E=e.i(682986),R=e.i(960178),I=(0,y.cssRecord)({root:[b.rcss.overflowY("auto"),b.rcss.flex.growAndShrink(1),b.rcss.flex.column,b.rcss.align.center,b.rcss.width("100%"),{margin:"0 auto",containerType:"inline-size"}],content:[b.rcss.flex.column,b.rcss.gap(24),b.rcss.py(32),b.rcss.align.center,b.rcss.justify.center,b.rcss.width("100%"),b.rcss.minHeight("100%"),b.rcss.overflowX("auto")],headerSection:[b.rcss.maxWidth(320),b.rcss.px(8),{textAlign:"center"}],promptSuggestionsContainer:[b.rcss.width("100%"),b.rcss.overflowX("auto"),b.rcss.scrollbar.hidden,b.rcss.pb(8)],promptSuggestionsContent:[b.rcss.flex.column,b.rcss.align.center,b.rcss.width("100%"),{maxWidth:"100%"}],headerIcon:[{color:x.tokens.outlineStronger}],footerContainer:[b.rcss.maxWidth("100%"),b.rcss.px(8),{textAlign:"center"}],warning:[b.rcss.m(8),b.rcss.maxWidth(400),{textAlign:"center"}],warningBox:[b.rcss.border({color:x.tokens.orangeDimmer}),b.rcss.borderRadius(),{backgroundColor:x.tokens.orangeDimmest}],warningIconText:[{color:x.tokens.orangeStrongest}]});function A(e){var t,s,u,c,d=(c=({sessionType:e.sessionType}).sessionType,(0,m.useMemo)(function(){return c===a.SessionType.CHAT?[{icon:(0,i.jsx)(T.default,{}),description:"Inspect for errors"},{icon:(0,i.jsx)(T.default,{}),description:"Improve the visual design"},{icon:(0,i.jsx)(T.default,{}),description:"Brainstorm new features"},{icon:(0,i.jsx)(T.default,{}),description:"Add dark mode toggle"},{icon:(0,i.jsx)(T.default,{}),description:"Optimize for mobile"},{icon:(0,i.jsx)(T.default,{}),description:"Explain this code"}]:[{icon:(0,i.jsx)(T.default,{}),description:"Check my app for bugs"},{icon:(0,i.jsx)(T.default,{}),description:"Add payment processing"},{icon:(0,i.jsx)(T.default,{}),description:"Connect with an AI Assistant"},{icon:(0,i.jsx)(T.default,{}),description:"Add SMS message sending"},{icon:(0,i.jsx)(T.default,{}),description:"Add a database"},{icon:(0,i.jsx)(T.default,{}),description:"Add authenticated user login"}]},[c])),f=(t=e.sessionType,s=(0,o.useChatter)(),u=(0,l.useObservableMemo)(function(){return s.sessions.query({types:[a.SessionType.CHAT]}).map.select(function(e){return e.size>0})},[s],{default:!0}),t===a.SessionType.CHAT&&!u);return(0,i.jsx)(D,(0,r._)((0,n._)({},e),{showAssistantWarning:f,promptSuggestions:d}))}function P(e){return(0,i.jsxs)(_.View,{align:"center",gap:8,css:I.warning,children:[(0,i.jsxs)(_.View,{css:I.warningBox,p:8,children:[(0,i.jsxs)(_.View,{css:I.warningIconText,row:!0,gap:6,justify:"center",align:"center",children:[(0,i.jsx)(c.default,{}),(0,i.jsx)(R.Text,{children:"Warning"})]}),(0,i.jsx)(R.Text,{children:"Assistant works best for users comfortable with file management and basic troubleshooting."})]}),(0,i.jsx)(R.Text,{color:"dimmer",children:"Use Agent for the safest app building experience."}),(0,i.jsx)(w.Button,{onClick:e.onSwitchToAgent,iconLeft:(0,i.jsx)(E.AgentAvatar,{size:16}),text:"Switch to Agent"})]})}function D(e){var t=e.titleContent,n=e.showPromptSuggestions,r=e.sessionType,o=e.onPromptSuggestionClick,l=e.promptSuggestions,c=e.footerContent,p=e.onSwitchToAgent,h=e.showAssistantWarning,m=r===a.SessionType.CHAT,g=m?s.ASSISTANT_NAME:s.AGENT_NAME;return(0,i.jsx)(_.View,{css:I.root,children:(0,i.jsxs)(_.View,{css:I.content,children:[(0,i.jsxs)(_.View,{css:I.headerSection,gap:16,children:[(0,i.jsx)(_.View,{gap:8,align:"center",children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.default,{size:48,css:I.headerIcon,style:{transform:"scale(1.33)"}}),null!=t?t:(0,i.jsx)(_.View,{row:!0,gap:4,align:"center",children:(0,i.jsx)(R.Header,{level:1,variant:"subheadBig",children:"New chat with ".concat(g)})})]})}),h?null:(0,i.jsx)(R.Text,{color:"dimmest",children:m?s.ASSISTANT_DESCRIPTION:s.AGENT_DESCRIPTION})]}),h&&p?(0,i.jsx)(P,{onSwitchToAgent:p}):null,(void 0===n||n)&&!h?(0,i.jsx)(_.View,{css:I.promptSuggestionsContainer,pb:8,children:(0,i.jsx)(_.View,{css:I.promptSuggestionsContent,children:(0,i.jsx)(C,{onClick:function(e){var t,n=null!=(t=e.promptToFill)?t:e.description;(0,d.track)(f.events.ASSISTANT_USED,{action:"prompt_suggestion_clicked",title:e.title}),null==o||o({intent:e.intent,text:n})},prompts:l})})}):null,c?(0,i.jsx)(_.View,{css:I.footerContainer,children:c}):null]})})}e.s(["SessionEmptyState",()=>A],269940);var O=e.i(541793),N=((t={}).Minimized="minimized",t.Tasks="tasks",t.Log="log",t),M=(0,O.atom)(new Map);function L(){var e=(0,o.useSet)(M);return(0,m.useCallback)(function(t,n){e(function(e){var r=new Map(e);return r.set(t,n),r})},[e])}function B(){var e=(0,o.useValue)(M);return(0,m.useCallback)(function(t){return e.has(t)?e.get(t):"tasks"},[e])}e.s(["RunGranularity",()=>N,"useGetRunGroupGranularity",()=>B,"useSetRunGroupGranularity",()=>L],808547)},695926,646136,e=>{"use strict";var t=e.i(530658),n=e.i(389959),r=e.i(82259),i=e.i(374106);e.i(925218);var a=e.i(267103),o=e.i(200119),s=e.i(149448);function l(e){var l,u,c,d,f,p,h,m=(0,o.useAgentIsWorking)(),g=(0,a.useObservable)(m),x=(0,s.useLastEvent)(e),y=(null==x?void 0:x.state)===r.EventState.IN_PROGRESS&&(null==x?void 0:x.event)&&((0,i.isEventAgentToolNamed)(x.event,"user_response")||(null==(u=x.event.contents)||null==(l=u.contents)?void 0:l.$kind)==="messageEventContents"),b=(null==x?void 0:x.event)&&(0,i.isEventAgentToolNamed)(x.event,"acknowledgeUserMessage"),w=(null==x||null==(f=x.event)||null==(d=f.contents)||null==(c=d.contents)?void 0:c.$kind)==="agentTimelineEventContents"&&(null==(h=x.event.contents.contents.agentTimelineEventContents)||null==(p=h.toolData)?void 0:p.$kind)==="endOfRunSummaryData",_=!y&&!w&&(!!g||!!b),k=(0,t._)((0,n.useState)(_),2),S=k[0],C=k[1];return(0,n.useEffect)(function(){if(_){var e=setTimeout(function(){C(!0)},400);return function(){return clearTimeout(e)}}C(!1)},[_]),S}e.s(["useShouldShowFloatingStatusRow",()=>l],695926);var u=e.i(276385),c=e.i(167392),d=e.i(546284),f=e.i(754873),p=e.i(960178),h=e.i(625484);function m(e){var t=e.count,n=e.collapsed,r=e.onToggle,i=e.className;return(0,u.jsxs)(h.View,{grow:!0,shrink:!0,row:!0,align:"center",clsx:i,gap:6,justify:"space-between",tag:"button",css:f.interactive.nofill,onClick:r,children:[(0,u.jsxs)(p.Text,{color:"dimmest",children:[t," ",(0,d.default)("checkpoints",t)," that"," ",1===t?"was":"were"," rolled back"]}),(0,u.jsx)(c.default,{rotate:180*!n})]})}e.s(["CollapsedCheckpointsToggle",()=>m],646136)},553538,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsxs)(i.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M5.035 3.25c.487.006.963.141 1.38.391l10 6a2.752 2.752 0 0 1-.004 4.72l-9.996 5.997A2.751 2.751 0 0 1 2.25 18V6a2.751 2.751 0 0 1 2.785-2.75Zm-.02 1.5A1.252 1.252 0 0 0 3.75 6v12a1.251 1.251 0 0 0 1.894 1.072l9.996-5.998.002-.001a1.25 1.25 0 0 0 .002-2.145l-10-6a1.252 1.252 0 0 0-.628-.178Z",clipRule:"evenodd"}),(0,r.jsx)("path",{d:"M21 3.25a.75.75 0 0 1 .75.75v16a.75.75 0 0 1-1.5 0V4a.75.75 0 0 1 .75-.75Z"})]}))}e.s(["default",()=>a])},194004,e=>{e.v({emptyStateOverlay:"ContentEmptyState-module__Rm4_Wq__emptyStateOverlay",emptyStateOverlayAnimating:"ContentEmptyState-module__Rm4_Wq__emptyStateOverlayAnimating","pulse-gray":"ContentEmptyState-module__Rm4_Wq__pulse-gray"})},848327,67272,e=>{"use strict";var t,n=e.i(297083),r=e.i(530658),i=e.i(817556),a=e.i(389959),o=e.i(830675);e.i(312917);var s=e.i(265872),l=e.i(98816),u=e.i(207237),c=e.i(858248),d=e.i(709485),f=e.i(635984),p=e.i(668106),h=e.i(116680),m=e.i(529810),g=e.i(282332),x=e.i(902379),y=e.i(813675),b=((t={}).Connecting="Connecting",t.Connected="Connected",t.Disconnected="Disconnected",t.Errored="Errored",t);function w(t){var b,w,_,k,S=t.vncOptions,C=t.password,j=t.setPassword,T=t.handlePromptForPassword,E=(0,a.useRef)(null),R=(0,r._)((0,a.useState)("Disconnected"),2),I=R[0],A=R[1],P=(0,r._)((0,a.useState)(null),2),D=P[0],O=P[1],N=(0,a.useRef)(null),M=(0,a.useRef)(null),L=(0,a.useRef)(0),B=(0,l.default)(S),V=(0,m.default)().secrets,F=(0,u.default)(),U=(w=(b=(0,r._)((0,a.useState)(null),2))[0],_=b[1],k=(0,x.useDevUrl)().url,(0,a.useEffect)(function(){k&&_((0,y.addPortToUrl)(k.replace("http","ws"),g.VNC_PORT).toString())},[k]),w),G=(0,l.default)(T),$=(0,l.default)(j);(0,a.useEffect)(function(){(0,s.lazyLoad)(function(){return e.A(964854).then(function(e){return e.default})}).then(function(e){O(function(){return e})})},[]);var H=(0,a.useCallback)(function(){if(L.current=0,A("Connected"),D&&N.current){var e,t=N.current;D.messages.pointerEvent(t._sock,t._display.absX(0),t._display.absY(0),0),(null==(e=B.current)?void 0:e.desktopSize)&&D.messages.setDesktopSize(t._sock,B.current.desktopSize.width,B.current.desktopSize.height,t._screenID,t._screenFlags)}},[D,B]),z=(0,a.useCallback)(function(e){if(N.current=null,!e.detail.clean){var t;o.withScope(function(t){t.setTag("vnc",!0),t.setExtras({vncUrl:U,replId:F,clean:e.detail.clean}),o.captureException(Error("VNC connection failed"))}),(null==(t=B.current)?void 0:t.reconnectOnError)&&(L.current=1),A("Errored");return}A("Disconnected")},[U,F,B]),W=(0,a.useCallback)(function(){(0,n._)(function(){var e;return(0,i._)(this,function(t){switch(t.label){case 0:return[4,V.read()];case 1:if(!(e=t.sent().get("VNC_PASSWORD")))return G.current(),[2];return $.current(e),[2]}})})().catch(function(e){return o.captureException(e)})},[V,$,G]),q=(0,a.useCallback)(function(){var e;null==(e=M.current)||e.abort(),M.current=null,N.current&&(N.current.removeEventListener("connect",H),N.current.removeEventListener("disconnect",z),N.current.removeEventListener("securityfailure",W),N.current.disconnect(),N.current=null)},[H,z,W]),K=(0,a.useCallback)(function(){return(0,n._)(function(){var e,t,n,r,a,o,s,l,u;return(0,i._)(this,function(i){switch(i.label){case 0:if(!D||!E.current||!U)return[2];return q(),A("Connecting"),L.current++,M.current=new AbortController,r=M.current.signal,o={replId:F,isLoggedIn:!0},[4,(0,f.getPid2Version)()];case 1:return o.requestedPid2Version=i.sent(),[4,(0,h.default)()];case 2:return[4,p.default.apply(void 0,[(o.overrideClusterMetadata=i.sent(),o)])];case 3:if(a=i.sent(),r.aborted)return[2];return l={credentials:{username:null!=(s=null==a?void 0:a.token)?s:"",password:null!=C?C:"",target:""}},(0,c.track)(d.events.VNC_CONNECTED),N.current=u=new D(E.current,U,l),u.background="black",(null==(e=B.current)?void 0:e.scaleViewport)!==void 0&&(u.scaleViewport=B.current.scaleViewport),(null==(t=B.current)?void 0:t.resizeSession)!==void 0&&(u.resizeSession=B.current.resizeSession),(null==(n=B.current)?void 0:n.viewOnly)!==void 0&&(u.viewOnly=B.current.viewOnly),u.addEventListener("connect",H),u.addEventListener("disconnect",z),u.addEventListener("securityfailure",W),[2]}})})()},[F,D,q,B,C,U,H,z,W]);return(0,a.useEffect)(function(){N.current&&((null==S?void 0:S.scaleViewport)!==void 0&&(N.current.scaleViewport=S.scaleViewport),(null==S?void 0:S.resizeSession)!==void 0&&(N.current.resizeSession=S.resizeSession),(null==S?void 0:S.viewOnly)!==void 0&&(N.current.viewOnly=S.viewOnly))},[S]),(0,a.useEffect)(function(){D&&K()},[D,K]),(0,a.useEffect)(function(){D&&void 0!==C&&K()},[D,C,K]),(0,a.useEffect)(function(){if("Disconnected"===I||"Errored"===I&&(null==S?void 0:S.reconnectOnError)){var e=setTimeout(K,100*Math.pow(2,L.current));return function(){clearTimeout(e)}}},[I,K,null==S?void 0:S.reconnectOnError]),(0,a.useEffect)(function(){return function(){q()}},[q]),{status:I,vncUrl:U,vncEl:E,connect:K,disconnect:q}}e.s(["Status",()=>b,"useNoVNC",()=>w],848327);var _=e.i(276385),k=e.i(625484),S=e.i(194004);function C(e){var t=e.animating,n=e.children;return(0,_.jsx)(k.View,{clsx:t?S.default.emptyStateOverlayAnimating:S.default.emptyStateOverlay,align:"center",justify:"center",gap:4,children:n})}e.s(["ContentEmptyState",()=>C],67272)},300378,e=>{e.v({"fade-in":"Narration-module__MhV6MG__fade-in",fadeIn:"Narration-module__MhV6MG__fadeIn",large:"Narration-module__MhV6MG__large",preserveNewlines:"Narration-module__MhV6MG__preserveNewlines",small:"Narration-module__MhV6MG__small"})},942163,e=>{e.v({liveIndicator:"LiveContent-module__XBs0iG__liveIndicator",liveIndicatorDot:"LiveContent-module__XBs0iG__liveIndicatorDot","pulse-blurple-border":"LiveContent-module__XBs0iG__pulse-blurple-border",pulseBorderAnimation:"LiveContent-module__XBs0iG__pulseBorderAnimation",rotation:"LiveContent-module__XBs0iG__rotation",rotationAnimation:"LiveContent-module__XBs0iG__rotationAnimation",vncInner:"LiveContent-module__XBs0iG__vncInner",vncInnerReadOnly:"LiveContent-module__XBs0iG__vncInnerReadOnly",vncNovnc:"LiveContent-module__XBs0iG__vncNovnc",vncNovncHidden:"LiveContent-module__XBs0iG__vncNovncHidden",vncWrapper:"LiveContent-module__XBs0iG__vncWrapper"})},838379,e=>{e.v({history:"ReplayContent-module__tEod5G__history",historyElement:"ReplayContent-module__tEod5G__historyElement",historyElementButton:"ReplayContent-module__tEod5G__historyElementButton",isActive:"ReplayContent-module__tEod5G__isActive",isBlurred:"ReplayContent-module__tEod5G__isBlurred",playIcon:"ReplayContent-module__tEod5G__playIcon",playbackElement:"ReplayContent-module__tEod5G__playbackElement",playbackElementInner:"ReplayContent-module__tEod5G__playbackElementInner",previewWrapper:"ReplayContent-module__tEod5G__previewWrapper"})},725352,e=>{e.v({expandable:"GeneralSubagentEvents-module__igR2_a__expandable",expandableHeader:"GeneralSubagentEvents-module__igR2_a__expandableHeader",inner:"GeneralSubagentEvents-module__igR2_a__inner",isExpanded:"GeneralSubagentEvents-module__igR2_a__isExpanded",subSurface:"GeneralSubagentEvents-module__igR2_a__subSurface"})},401732,e=>{e.v({root:"AutoscrollMaxHeightContainer-module__ZgdpGW__root",scroll:"AutoscrollMaxHeightContainer-module__ZgdpGW__scroll",topGradient:"AutoscrollMaxHeightContainer-module__ZgdpGW__topGradient"})},279714,e=>{e.v({inner:"GeneralSubagentThinking-module__xglSIq__inner",isExpanded:"GeneralSubagentThinking-module__xglSIq__isExpanded",subSurface:"GeneralSubagentThinking-module__xglSIq__subSurface"})},915711,e=>{e.v({strikethrough:"WorkMetricsSummary-module__gRDgYa__strikethrough"})},590829,e=>{e.v({item:"RunGroupGranularityControl-module__cbE2rq__item",listbox:"RunGroupGranularityControl-module__cbE2rq__listbox"})},854976,e=>{e.v({activeRun:"RunGroupCard-module__e7hFIG__activeRun",activitySurface:"RunGroupCard-module__e7hFIG__activitySurface",card:"RunGroupCard-module__e7hFIG__card",footer:"RunGroupCard-module__e7hFIG__footer",headerTitle:"RunGroupCard-module__e7hFIG__headerTitle"})},831498,e=>{e.v({card:"MinimizedRunGroupCard-module__WjSQxq__card"})},232397,e=>{e.v({eventIconContainer:"ToolUseGroup-module__Q99KfW__eventIconContainer",iconSlideEnter:"ToolUseGroup-module__Q99KfW__iconSlideEnter",iconSlideEnterActive:"ToolUseGroup-module__Q99KfW__iconSlideEnterActive",inlineStatusRow:"ToolUseGroup-module__Q99KfW__inlineStatusRow",stacked:"ToolUseGroup-module__Q99KfW__stacked",toolUseGroupButton:"ToolUseGroup-module__Q99KfW__toolUseGroupButton"})},382222,e=>{e.v({feed:"Feed-module__lsKhoG__feed","highlight-bg":"Feed-module__lsKhoG__highlight-bg",sessionSeparator:"Feed-module__lsKhoG__sessionSeparator",sessionStitchingToggle:"Feed-module__lsKhoG__sessionStitchingToggle"})},624768,e=>{e.v({button:"AgentQueryResponseDialog-module__kRDpsq__button",multilineInput:"AgentQueryResponseDialog-module__kRDpsq__multilineInput",radioOption:"AgentQueryResponseDialog-module__kRDpsq__radioOption",reasonField:"AgentQueryResponseDialog-module__kRDpsq__reasonField",responseSubmissionRow:"AgentQueryResponseDialog-module__kRDpsq__responseSubmissionRow"})},755867,836140,123805,331151,e=>{"use strict";var t=e.i(297083),n=e.i(878420),r=e.i(886513),i=e.i(530658),a=e.i(346715),o=e.i(817556),s=e.i(276385),l=e.i(389959),u=e.i(243202);e.i(877212);var c=e.i(924908),d=e.i(808547);e.i(925218);var f=e.i(267103),p=e.i(641555),h=e.i(597853),m=e.i(526017),g=e.i(178496),x=e.i(993796),y=e.i(98816),b=e.i(441329),w=e.i(546284),_=e.i(134663),k=e.i(695926),S=e.i(231346),C=e.i(436725),j=e.i(190120),T=e.i(287999),E=e.i(646136),R=e.i(849954),I=e.i(170710),A=e.i(526962),P=e.i(417120),D=e.i(535076),O=e.i(117328),N=e.i(82259),M=e.i(408143),L=e.i(806685),B=e.i(269848),V=e.i(558666),F=e.i(553538),U=e.i(334028),G=e.i(257982),$=e.i(909478),H=e.i(848327),z=e.i(67272),W=e.i(435281),q=e.i(800908),K=e.i(653412),Y=e.i(136540),Q=e.i(739521),X=e.i(625484);function Z(e){var t=e.children,n=e.left,r=e.title,i=e.isOpen,a=e.disableClose,o=e.onRequestClose,u=e.onSkipTest,c=e.skipping,d=(0,W.useViewportSize)(),f=(0,l.useMemo)(function(){if(!d.height||!d.width)return{modalMaxWidth:"min(1320px, 80vw)",paddingTop:64};var e=Math.min((d.width-32)/1288,(d.height-160)/804,1),t=Math.floor(1288*e),n=Math.floor(804*e),r=Math.max(16,Math.floor((d.height-(n+160))/2));return{modalMaxWidth:"min(".concat(t,"px, 90vw)"),paddingTop:r}},[d.height,d.width]),p=f.modalMaxWidth,h=f.paddingTop;return(0,s.jsx)(Q.Modal,{isOpen:i,maxWidth:p,topPadding:h,hideCloseButton:!0,onRequestClose:function(){a||o()},noPadding:!0,children:(0,s.jsx)(K.EventPane,{left:n,title:r,right:(0,s.jsxs)(X.View,{row:!0,gap:4,children:[void 0!==u?(0,s.jsx)(Y.IconButton,{alt:"Skip test",onClick:u,children:c?(0,s.jsx)(B.default,{size:12}):(0,s.jsx)(F.default,{size:12})}):null,a?null:(0,s.jsx)(Y.IconButton,{alt:"Minimize",onClick:o,children:(0,s.jsx)(q.default,{size:12})})]}),bordered:!1,children:t})})}var J=e.i(960178),ee=e.i(300378);function et(e){var t=e.text,n=e.large,r=e.live;return(0,s.jsx)(X.View,{clsx:[n?ee.default.large:ee.default.small,r&&ee.default.fadeIn],children:(0,s.jsx)(J.Text,{clsx:[ee.default.preserveNewlines],color:r?"dimmest":"default",children:t})},t)}function en(e){var t=e.instructions,n=e.overview;return t?(0,s.jsxs)(X.View,{gap:4,children:[(0,s.jsx)(J.Text,{color:"dimmer",children:void 0!==n&&n?"Agent needs your help doing the following tasks:":"I need your help with the following tasks:"}),(0,s.jsx)(J.Text,{clsx:ee.default.preserveNewlines,children:t})]}):null}function er(e){var t=e.notes,n=e.live;return t?(0,s.jsxs)(X.View,{clsx:n&&ee.default.fadeIn,gap:4,children:[(0,s.jsx)(J.Text,{color:"dimmer",children:"The following notes were left:"}),(0,s.jsx)(J.Text,{clsx:ee.default.preserveNewlines,color:n?"dimmest":"default",children:t})]},t):null}var ei=e.i(183035),ea=e.i(252204),eo=e.i(979530),es=e.i(416298),el=e.i(480028),eu=e.i(140487),ec=e.i(91720),ed=e.i(607278),ef=e.i(396776);function ep(e){var n=e.instructions,r=e.deadline,a=e.disabled,u=e.onReject,c=e.onAccept,d=(0,i._)((0,l.useState)(!1),2),f=d[0],p=d[1],h=(0,i._)((0,l.useState)(!1),2),m=h[0],g=h[1],x=(0,i._)((0,l.useState)(!1),2),y=x[0],b=x[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ev,{isOpen:f,instructions:n,loading:y,disabled:a,onClose:function(){return p(!1)},onAccept:function(){return(0,t._)(function(){return(0,o._)(this,function(e){switch(e.label){case 0:return b(!0),[4,c()];case 1:return e.sent(),b(!1),[2]}})})()}}),(0,s.jsxs)(X.View,{gap:4,row:!0,children:[(0,s.jsx)(ey,{deadline:r,loading:m,disabled:a||y,onReject:function(){return(0,t._)(function(){return(0,o._)(this,function(e){switch(e.label){case 0:return g(!0),[4,u()];case 1:return e.sent(),g(!1),[2]}})})()}}),(0,s.jsx)(X.View,{grow:!0,children:(0,s.jsx)(eu.Button,{colorway:"blurple",text:"Begin take over",iconLeft:(0,s.jsx)(U.default,{}),loading:f,disabled:a||m,onClick:function(){return p(!0)}})})]})]})}function eh(e){var n=e.instructions,r=e.disabled,a=e.onComplete,u=(0,i._)((0,l.useState)(!1),2),c=u[0],d=u[1],f=(0,i._)((0,l.useState)(!1),2),p=f[0],h=f[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eg,{isOpen:c,instructions:n,loading:p,onClose:function(){return d(!1)},onComplete:function(e){return(0,t._)(function(){return(0,o._)(this,function(t){switch(t.label){case 0:return h(!0),[4,a(e)];case 1:return t.sent(),h(!1),[2]}})})()}}),(0,s.jsxs)(X.View,{align:"center",gap:4,children:[(0,s.jsx)(eu.Button,{stretch:!0,colorway:"green",text:"Mark take over complete",iconRight:(0,s.jsx)(ei.default,{}),disabled:r,onClick:function(){return d(!0)}}),(0,s.jsx)(J.Text,{color:"dimmest",children:"Make sure youve completed the above tasks before marking complete"})]})]})}function em(e){var n=e.instructions,r=e.deadline,a=e.accepted,u=e.disabled,c=e.onReject,d=e.onAccept,f=(0,i._)((0,l.useState)(!1),2),p=f[0],h=f[1],m=(0,i._)((0,l.useState)(!1),2),g=m[0],x=m[1],y=(0,i._)((0,l.useState)(!1),2),w=y[0],_=y[1],k=(0,b.useIsInMobileWorkspace)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ev,{isOpen:p,instructions:n,loading:w,disabled:u||a||k,onClose:function(){return h(!1)},onAccept:function(){return(0,t._)(function(){return(0,o._)(this,function(e){switch(e.label){case 0:return _(!0),[4,d()];case 1:return e.sent(),_(!1),[2]}})})()}}),(0,s.jsxs)(X.View,{gap:8,children:[(0,s.jsxs)(X.View,{gap:4,row:!0,children:[a?null:(0,s.jsx)(ey,{deadline:r,loading:g,disabled:u||w,onReject:function(){return(0,t._)(function(){return(0,o._)(this,function(e){switch(e.label){case 0:return x(!0),[4,c()];case 1:return e.sent(),x(!1),[2]}})})()}}),(0,s.jsx)(X.View,{grow:!0,children:(0,s.jsx)(eu.Button,{colorway:"blurple",text:a?"Take over in progress...":"Begin take over",iconLeft:a?(0,s.jsx)(B.default,{}):(0,s.jsx)(U.default,{}),loading:w||a,disabled:u||k||g,onClick:function(){return h(!0)}})})]}),k?(0,s.jsx)(ef.StatusBanner,{colorway:"warning",text:"App testing take over is not currently supported on mobile. You can continue on desktop."}):null]})]})}function eg(e){var t=e.isOpen,n=e.instructions,r=e.loading,a=e.onClose,o=e.onComplete,u=(0,i._)((0,l.useState)(""),2),c=u[0],d=u[1];return(0,s.jsx)(Q.Modal,{isOpen:t,onRequestClose:a,hideCloseButton:!0,centered:!0,children:(0,s.jsxs)(X.View,{gap:8,children:[(0,s.jsx)(J.Text,{variant:"subheadDefault",children:"Did you complete all the tasks at hand?"}),(0,s.jsx)(en,{instructions:n,overview:!0}),(0,s.jsxs)(X.View,{justify:"space-between",row:!0,children:[(0,s.jsx)(J.Text,{color:"dimmer",children:"Add additional context"}),(0,s.jsx)(J.Text,{color:"dimmest",children:"Optional"})]}),(0,s.jsx)(ed.MultiLineInput,{placeholder:"Type here",rows:4,value:c,onChange:function(e){return d(e.target.value)}}),(0,s.jsxs)(X.View,{row:!0,gap:4,children:[(0,s.jsx)(eu.Button,{text:"Go back",onClick:a}),(0,s.jsx)(X.View,{grow:!0,children:(0,s.jsx)(eu.Button,{text:"Mark take over complete",iconRight:(0,s.jsx)(ei.default,{}),colorway:"green",loading:r,onClick:function(){return o(c)}})})]})]})})}function ev(e){var t=e.isOpen,n=e.instructions,r=e.loading,i=e.disabled,a=e.onClose,o=e.onAccept;return(0,s.jsx)(Q.Modal,{isOpen:t,onRequestClose:a,hideCloseButton:!0,centered:!0,children:(0,s.jsxs)(X.View,{gap:20,children:[(0,s.jsx)(J.Text,{variant:"subheadDefault",children:"Youre about to take over Agents browser"}),(0,s.jsx)(en,{instructions:n,overview:!0}),(0,s.jsxs)(X.View,{gap:12,children:[(0,s.jsx)(J.Text,{color:"dimmest",children:"Things to acknowledge:"}),(0,s.jsxs)(X.View,{gap:8,children:[(0,s.jsxs)(X.View,{align:"center",gap:8,row:!0,children:[(0,s.jsx)(eo.default,{size:16,color:el.tokens.foregroundDimmest}),"Only you can see the info you enter (like passwords) during takeover"]}),(0,s.jsxs)(X.View,{align:"center",gap:8,row:!0,children:[(0,s.jsx)(es.default,{size:16,color:el.tokens.foregroundDimmest}),"Signing Agent into a website could put your data at risk"]})]})]}),(0,s.jsxs)(X.View,{gap:4,justify:"space-between",row:!0,children:[(0,s.jsx)(ec.ButtonLink,{href:"/",variant:"nofill",text:(0,s.jsx)(J.Text,{color:"dimmest",children:"Learn more about Agent Testing"}),iconRight:(0,s.jsx)(ea.default,{color:el.tokens.foregroundDimmest})}),(0,s.jsx)(eu.Button,{colorway:"blurple",text:"Acknowledge & begin",iconRight:(0,s.jsx)(ei.default,{}),loading:r,disabled:i,onClick:function(){return o()}})]})]})})}function ex(e){return Math.ceil(Math.max(0,e.getTime()-Date.now())/1e3)}function ey(e){var t,n,r=e.deadline,a=e.loading,o=e.disabled,u=e.onReject,c=(0,i._)((0,l.useState)(function(){return ex(r)}),2),d=c[0],f=c[1];return(0,l.useEffect)(function(){f(ex(r));var e=setInterval(function(){f(ex(r))},1e3);return function(){return clearInterval(e)}},[r]),(0,s.jsx)(eu.Button,{text:(0,s.jsxs)(X.View,{gap:4,align:"center",row:!0,children:[(0,s.jsx)(J.Text,{children:"Skip"}),0===d||a?(0,s.jsx)(B.default,{}):(0,s.jsx)(J.Text,{color:"dimmest",children:" ".concat((t="".concat(Math.floor(d/60),"m"),n="".concat(d%60,"s"),d>=60&&"0s"===n?t:d<60?n:"".concat(t," ").concat(n)))})]}),loading:a,disabled:o||0===d,onClick:function(){return null==u?void 0:u()}})}function eb(e){var t=e.status,n=e.instructions,r=e.deadline,i=e.inline,a=e.disabled,o=e.onAccept,l=e.onComplete,u=e.onReject;return i?(0,s.jsx)(em,{instructions:n,deadline:r,accepted:"accepted"===t,disabled:a,onReject:u,onAccept:o}):"accepted"===t?(0,s.jsx)(eh,{instructions:n,disabled:a,onComplete:l}):(0,s.jsx)(ep,{instructions:n,deadline:r,disabled:a,onReject:u,onAccept:o})}var ew=e.i(942163);function e_(){return(0,s.jsx)(X.View,{clsx:ew.default.liveIndicator,children:(0,s.jsx)(X.View,{clsx:ew.default.liveIndicatorDot})})}function ek(e){var t=e.status;switch(t){case H.Status.Connected:return null;case H.Status.Connecting:case H.Status.Disconnected:return(0,s.jsx)(z.ContentEmptyState,{});case H.Status.Errored:return(0,s.jsx)(z.ContentEmptyState,{children:(0,s.jsx)(J.Text,{children:"There was an error connecting to the browser"})});default:(0,G.default)(t)}}function eS(e){var t=e.isReadWrite,n=void 0!==t&&t,r=(0,i._)((0,l.useState)(void 0),2),a=r[0],o=r[1],u=(0,H.useNoVNC)({password:a,setPassword:o,handlePromptForPassword:function(){},vncOptions:{scaleViewport:!0,resizeSession:!1,viewOnly:!n,reconnectOnError:!0,desktopSize:{width:1288,height:804}}}),c=u.vncEl,d=u.status;return(0,s.jsxs)(X.View,{clsx:[ew.default.vncInner,!n&&ew.default.vncInnerReadOnly],children:[(0,s.jsx)(X.SpecializedView.div,{ref:c,clsx:[ew.default.vncNovnc,d!==H.Status.Connected&&ew.default.vncNovncHidden]}),(0,s.jsx)(ek,{status:d}),n?null:(0,s.jsx)(e_,{})]})}function eC(e){var t=e.takeover,n=e.narration,r=e.inline,i=void 0!==r&&r,a=e.disabled,o=(0,$.useIsVNCPortOpened)(),l=(0,b.useIsInMobileWorkspace)(),u=(0,f.useObservable)(n),c=(null==u?void 0:u.full)||"I'm starting up a browser to begin testing. My thoughts will show up here.";return(0,s.jsxs)(X.View,{p:8,gap:8,children:[(0,s.jsx)(X.View,{clsx:[ew.default.vncWrapper,o&&ew.default.pulseBorderAnimation],children:o?(0,s.jsx)(eS,{isReadWrite:!i&&!l&&(null==t?void 0:t.request.status)==="accepted"}):(0,s.jsx)(z.ContentEmptyState,{animating:!0})}),t?null:(0,s.jsx)(et,{text:c,large:!i,live:!0}),t?(0,s.jsx)(en,{instructions:t.request.instructions}):null,t&&(i||!l)?(0,s.jsx)(eb,{status:t.request.status,instructions:t.request.instructions,deadline:t.request.deadline,inline:i,disabled:a,onAccept:function(){return t.accept()},onComplete:function(e){return t.complete(e)},onReject:function(){return t.reject()}},t.request.sessionId):null]})}function ej(e){var t=e.title,n=e.takeover,r=e.narration,a=e.onSkipTest,o=e.skipping,u=(0,i._)((0,l.useState)(!1),2),c=u[0],d=u[1],f=(0,b.useIsInMobileWorkspace)();(0,l.useEffect)(function(){(null==n?void 0:n.request.status)==="accepted"&&d(!0)},[null==n?void 0:n.request.status]);var p=(0,l.useCallback)(function(){d(!0)},[]),h=(0,l.useCallback)(function(){d(!1)},[]);return(0,s.jsxs)(K.EventPane,{left:(null==n?void 0:n.request.status)==="accepted"?(0,s.jsx)(U.default,{size:16}):(0,s.jsx)(L.default,{clsx:ew.default.rotationAnimation,size:16}),title:(null==n?void 0:n.request.status)==="accepted"?"Take over in progress...":t,right:(0,s.jsxs)(X.View,{row:!0,gap:4,children:[(0,s.jsx)(Y.IconButton,{alt:"Skip test",disabled:o,onClick:a,children:o?(0,s.jsx)(B.default,{size:12}):(0,s.jsx)(F.default,{size:12})}),f?null:(0,s.jsx)(Y.IconButton,{alt:"Maximize",onClick:p,children:(0,s.jsx)(V.default,{size:12})})]}),children:[(0,s.jsx)(eC,{narration:r,takeover:n,disabled:o,inline:!0}),(0,s.jsx)(Z,{isOpen:!f&&c,onRequestClose:h,disableClose:(null==n?void 0:n.request.status)==="accepted",left:(0,s.jsx)(L.default,{clsx:ew.default.rotationAnimation,size:16}),title:t,onSkipTest:a,skipping:o,children:(0,s.jsx)(eC,{narration:r,takeover:n,disabled:o})})]})}var eT=e.i(904851),eE=e.i(90659),eR=e.i(721281),eI=e.i(992785);e.i(242933);var eA=e.i(424360),eP=e.i(851722),eD=e.i(838379),eO=function(){function e(){var t=this;(0,eT._)(this,e),(0,eR._)(this,"timeline",void 0),(0,eR._)(this,"status",void 0),(0,eR._)(this,"index",void 0),(0,eR._)(this,"length",void 0),(0,eR._)(this,"video",void 0),(0,eR._)(this,"listener",void 0),(0,eR._)(this,"timer",void 0),(0,eR._)(this,"startTime",void 0),(0,eR._)(this,"cleanups",void 0),(0,eR._)(this,"state",new eA.Multicast(function(e){var n=null;return t.listener=function(){var r,i,a={status:t.status,current:null!=(r=t.timeline[t.index])?r:null,final:null!=(i=t.timeline[t.timeline.length-1])?i:null,length:t.length,index:t.index};(0,eI.default)(n,a)||(n=a,e.next(a))},t.listener(),function(){t.listener=null}})),this.timeline=[],this.status="stopped",this.index=0,this.length=0,this.video=null,this.listener=null,this.timer=null,this.startTime=null,this.cleanups=[]}return(0,eE._)(e,[{key:"getCurrentMinimumEventTime",value:function(){var e,t=this.timeline[this.index];return t&&(null==(e=t.narration)?void 0:e.full)?Math.max(2e3,(t.narration.full||"").trim().split(/\s+/).filter(function(e){return e.length>0}).length/7*1e3):2e3}},{key:"update",value:function(e){var t,n,r,i=this.video;this.timeline=null!=(n=e.timeline)?n:this.timeline,this.video=null!=(r=e.video)?r:this.video,e.timeline&&(this.length=e.timeline.length,this.index>=this.length&&(this.index=Math.max(0,this.length-1))),void 0!==e.video&&i!==e.video&&this.cleanupTimers(),"playing"===this.status&&this.startTimers(),null==(t=this.listener)||t.call(this)}},{key:"play",value:function(){if(0!==this.length){this.status="playing";var e,t=this.timeline[this.index];this.video&&this.video.paused&&(null==t?void 0:t.kind)==="live"&&this.video.src===t.video&&(this.video.currentTime=0,this.video.play().catch(function(){})),this.startTimers(),null==(e=this.listener)||e.call(this)}}},{key:"stop",value:function(){var e;this.status="stopped",this.index=0,this.cleanupTimers(),this.video&&!this.video.paused&&this.video.pause(),null==(e=this.listener)||e.call(this)}},{key:"toggle",value:function(){"playing"===this.status?this.stop():this.play()}},{key:"goto",value:function(e){e<0||e>=this.length?this.stop():(this.index=e,this.play())}},{key:"next",value:function(){this.index>=this.length-1?this.stop():this.goto(this.index+1)}},{key:"previous",value:function(){this.index>0&&this.goto(this.index-1)}},{key:"startTimers",value:function(){this.cleanupTimers();var e=this.timeline[this.index];(this.startTime=Date.now(),this.video)?"live"===e.kind?this.setupVideoHandlers():(this.startMinimumTimer(),this.video.src===e.video&&(this.video.currentTime=9999)):this.startMinimumTimer()}},{key:"startMinimumTimer",value:function(){var e,t=this,n=Date.now(),r=null!=(e=this.startTime)?e:n,i=this.getCurrentMinimumEventTime()-(n-r);i<=0?this.next():this.timer=setTimeout(function(){return t.next()},i)}},{key:"setupVideoHandlers",value:function(){var e=this;if(this.video){var t=this.video,n=null,r=function(){e.startTime=Date.now(),e.startMinimumTimer()},i=function(){n&&(clearTimeout(n),n=null),e.startTime=Date.now(),t.addEventListener("ended",r),t.addEventListener("error",r),e.cleanups.push(function(){t.removeEventListener("ended",r),t.removeEventListener("error",r)})};if(!t.paused&&t.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA)i();else{t.paused&&t.src===(null==(a=this.timeline[this.index])?void 0:a.video)&&(t.currentTime=0,t.play().catch(function(){}));var a,o=function(){t.removeEventListener("playing",o),t.removeEventListener("error",o),i()};t.addEventListener("playing",o),t.addEventListener("error",o),this.cleanups.push(function(){t.removeEventListener("playing",o),t.removeEventListener("error",o),n&&clearTimeout(n)}),n=setTimeout(function(){t.removeEventListener("playing",o),t.removeEventListener("error",o),e.next()},this.getCurrentMinimumEventTime())}}}},{key:"cleanupTimers",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null);var e=[];if(this.cleanups.forEach(function(t){try{t()}catch(t){e.push(t)}}),this.cleanups=[],this.startTime=null,e.length)throw AggregateError(e)}},{key:"destroy",value:function(){this.cleanupTimers(),this.listener=null}}]),e}();function eN(e){var t=e.innerRef,n=e.url,r=e.paused,i=e.blurred;return(0,s.jsx)(X.View,{clsx:eD.default.playbackElement,children:(0,s.jsx)("video",{ref:t,clsx:[eD.default.playbackElementInner,i&&eD.default.isBlurred],src:n,autoPlay:!r,disablePictureInPicture:!0,playsInline:!0,muted:!0})})}function eM(e){var t=e.videoRef,n=e.url,r=(0,l.useRef)({current:n,previous:null,seq:0});r.current.current!==n&&(r.current.previous=r.current.current,r.current.current=n,r.current.seq++);var i=r.current,a=i.current,o=i.previous,u=i.seq;return(0,s.jsxs)(s.Fragment,{children:[o?(0,s.jsx)(eN,{url:o},"".concat(o,"-").concat(u-1)):null,a?(0,s.jsx)(eN,{innerRef:t,url:a},"".concat(a,"-").concat(u)):null]})}function eL(e){var t=e.video,n=(0,l.useCallback)(function(e){e&&(e.currentTime=9999)},[]);return(0,s.jsxs)(s.Fragment,{children:[t?(0,s.jsx)(eN,{innerRef:n,url:t,paused:!0,blurred:!0}):null,(0,s.jsxs)(z.ContentEmptyState,{children:[(0,s.jsx)(M.default,{size:24}),(0,s.jsx)(J.Text,{children:"Watch replay"})]})]})}function eB(){return(0,s.jsx)(z.ContentEmptyState,{children:(0,s.jsx)(J.Text,{children:"The user took over the browser"})})}function eV(e){var t,n,r,i,a,o,l,u,c=e.videoRef,d=e.manager,f=e.state,p=e.finalSummary,h=e.isEnlarged,m="playing"===f.status;return(0,s.jsxs)(X.View,{p:8,gap:8,children:[(0,s.jsx)(X.View,{clsx:eD.default.previewWrapper,onClick:function(){return d.toggle()},children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eM,{videoRef:c,url:null!=(l=null==(t=f.current)?void 0:t.video)?l:null}),(null==(n=f.current)?void 0:n.takeover)?(0,s.jsx)(eB,{}):null]}):(0,s.jsx)(eL,{video:null!=(u=null==(r=f.final)?void 0:r.video)?u:null})}),(0,s.jsx)(eF,{manager:d,state:f}),(0,s.jsx)(et,{text:m?null==(i=f.current)?void 0:i.narration.full:p,large:void 0!==h&&h||(null==(a=f.current)?void 0:a.takeover)!==void 0,live:m}),m&&(null==(o=f.current)?void 0:o.takeover)?(0,s.jsx)(er,{notes:f.current.takeover.notes,live:!0}):null]})}function eF(e){var t=e.manager,n=e.state,r="playing"===n.status?n.index:n.length;return(0,s.jsx)(X.View,{clsx:eD.default.history,children:Array.from({length:n.length+1}).map(function(e,n){return(0,s.jsx)(X.SpecializedView.button,{clsx:eD.default.historyElementButton,onClick:function(){return t.goto(n)},children:(0,s.jsx)(X.View,{clsx:[eD.default.historyElement,r===n?eD.default.isActive:null]})},n)})})}function eU(e){var t,n,r,a,o=e.timeline,u=e.title,c=e.finalSummary,d=e.resultType,p=(0,i._)((0,l.useState)(!1),2),h=p[0],m=p[1],g=(0,b.useIsInMobileWorkspace)(),x=(n=(t=(0,i._)((0,l.useState)(null),2))[0],r=t[1],a=(0,f.useObservable)(null==n?void 0:n.state,{status:"stopped",current:null,final:null,length:0,index:0}),(0,l.useEffect)(function(){var e=new eO;r(e);var t=null==o?void 0:o.subscribe(function(t){e.update({timeline:t})});return function(){null==t||t.unsubscribe(),r(function(e){return null==e||e.destroy(),null})}},[o]),{videoRef:(0,l.useCallback)(function(e){null==n||n.update({video:e})},[n]),manager:n,state:a}),y=x.videoRef,w=x.manager,_=x.state,k=(0,l.useCallback)(function(){m(!0)},[]),S=(0,l.useCallback)(function(){m(!1)},[]);if(!w)return null;var C=(0,s.jsx)(X.View,{clsx:eD.default.playIcon,children:(0,s.jsx)(Y.IconButton,{alt:"playing"===_.status?"Stop":"Play",onClick:function(){return w.toggle()},children:d!==N.UITestingSubagentResultType.SUCCESS?(0,s.jsx)(eP.default,{size:12}):(0,s.jsx)(ei.default,{size:12})})});return(0,s.jsxs)(K.EventPane,{left:C,title:u,right:g?null:(0,s.jsx)(Y.IconButton,{alt:"Maximize",onClick:k,children:(0,s.jsx)(V.default,{size:12})}),children:[(0,s.jsx)(eV,{videoRef:h?void 0:y,manager:w,state:_,finalSummary:c}),(0,s.jsx)(Z,{isOpen:h,onRequestClose:S,left:C,title:u,children:(0,s.jsx)(eV,{videoRef:y,manager:w,state:_,finalSummary:c,isEnlarged:!0})})]})}var eG=e.i(374106),e$={direction:"forward",state:{video:null,narration:{full:"",mini:""}},transformer:function(e,t){var n=(0,eG.getEventAgentToolDataFor)(e,"uiTestingSubagentTakeOverData");if(n){var r,i=n.userInstructions,a="rejected",o=null;return(null==(r=n.result)?void 0:r.$kind)==="success"&&(a="accepted",o=n.result.success.userNotes),{kind:"static",video:t.video,narration:t.narration,takeover:{status:a,instructions:i,notes:o}}}var s=(0,eG.getEventContentsFor)(e,"uiTestingSubagentExecutionEventContents");if(s){var l="static";return s.mimeType.startsWith("video/")&&(l="live",t.video=s.gcsDownloadUrl),s.narration&&(t.narration.full=s.narration),s.miniNarration&&(t.narration.mini=s.miniNarration),{kind:l,video:t.video,narration:t.narration}}}},eH={direction:"reverse",state:{full:"",mini:""},debug:{name:"AgentTestingNarrationReducer"},reducer:function(e,t){var n=(0,eG.getEventContentsFor)(e,"uiTestingSubagentExecutionEventContents");if(n&&n.narration)return t.full=n.narration,t.mini=n.miniNarration,!1}},ez=e.i(250479),eW=e.i(203576),eq=e.i(389503);e.i(545082);var eK=e.i(584647);function eY(e){var n=e.timeline,r=e.narration,a=e.takeover,u=e.expandByDefault,c=e.isInProgress,d=e.title,f=e.finalSummary,h=e.resultType,m=e.onSkipTest,g=(0,i._)((0,l.useState)(void 0!==u&&u),2),x=g[0],y=g[1],b=(0,i._)((0,l.useState)(!1),2),w=b[0],_=b[1],k=(0,i._)((0,l.useState)(!1),2),S=k[0],C=k[1],j=(0,p.useObservableMemo)(function(){return n.select(function(e){return 0===e.length})},[n],{default:!1}),T=!S&&c,E=T||!j,R=(0,l.useCallback)(function(){E&&y(function(e){return!e})},[E]),I=(0,l.useCallback)(function(){return(0,t._)(function(){return(0,o._)(this,function(e){switch(e.label){case 0:_(!0),y(!1),C(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,m()];case 2:return e.sent(),[3,4];case 3:return e.sent(),_(!1),C(!1),[3,4];case 4:return[2]}})})()},[m]),A="Testing your app";T||(A=h===N.UITestingSubagentResultType.SUCCESS?"Tested your app successfully":"Tested your app and sent results to Agent");var P=(0,s.jsx)(ez.ToolUseIconSurface,{children:(0,s.jsx)(M.default,{color:el.tokens.foregroundDimmest,size:ez.TOOL_USE_ICON_SIZE})});return E?(0,s.jsx)(eW.ExpandableFeedContent,{expanded:x,onToggle:R,triggerContent:(0,s.jsxs)(X.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[P,(0,s.jsx)(eq.Summary,{summary:A,color:"dimmest"})]}),children:T?(0,s.jsx)(ej,{title:d,takeover:a,narration:r,onSkipTest:I,skipping:w}):(0,s.jsx)(eU,{timeline:n,title:d,finalSummary:f,resultType:h})}):(0,s.jsx)(ez.StaticToolUseWithIcon,{summary:A,icon:P})}function eQ(e){var n=e.subagent,r=(0,f.useObservable)(n.running,!1),i=(0,p.useObservableMemo)(function(){return n.contents("uiTestingSubagentEventContents")},[n]),a=(0,l.useMemo)(function(){return n.session.transform(e$,500).flat},[n]),u=(0,l.useMemo)(function(){return n.session.reduce(eH,"global")},[n]),c=(0,eK.useCurrentAgentTestingTakeover)({sessionId:n.session.id}),d=(0,l.useCallback)(function(){return(0,t._)(function(){return(0,o._)(this,function(e){switch(e.label){case 0:return[4,null==c?void 0:c.reject()];case 1:return e.sent(),[4,n.abort()];case 2:return e.sent(),[2]}})})()},[n,c]);if(!i||!a||!u)return null;var h=i.title,m=i.finalSummary,g=i.resultType;return(0,s.jsx)(eY,{timeline:a,narration:u,takeover:c,title:h,isInProgress:r,finalSummary:m,resultType:g,expandByDefault:!0,onSkipTest:d})}var eX=e.i(279606),eZ=e.i(659131),eJ=e.i(64386),e0=e.i(633600),e1=e.i(986194),e2=e.i(166876),e3=e.i(876216),e5=new Set(["agentPlanStepBegin","alertData","blueprintsSetup","createAutomationPreviewData","createFileData","createPostgresqlDatabaseData","deployConfigData","designGuidelinesData","executedSandboxedCodeData","fileEditData","generateMediaData","imageGenerationData","mcpToolData","memoryCompressionData","messagedBackgroundAgent","packagerInstallData","packagerUninstallData","readDirData","readFileData","reportAgentIssueData","samplingEvent","screenshotData","searchFileData","searchFilesystemData","searchIntegrationsData","setupModelfarmData","skillLoadedData","setupObjectStorageData","shellExecutionData","sqlExecutionData","stockImageData","subagentReportResultData","systemDependencyInstallData","systemDependencyUninstallData","taskListData","thoughts","toolchainInstallData","videoGenerationData","viewIntegrationData","viewLogsData","viewSpecialFiles","webPageVisitData","webSearchData","workflowsRemoveRunConfigToolData","workflowsRestartToolData","workflowsSetRunConfigToolData","workflowsStartToolData","workflowsStopToolData","waitingForBackgroundJobsData"]),e4=new Set(["programming_language_install_tool","wait_for_background_jobs"]);function e8(e){var t,n=(null==(t=e.optionType)?void 0:t.$kind)==="secretRequestAction"?e.optionType.secretRequestAction.secrets:void 0;return(null==n?void 0:n.length)?n:void 0}function e6(e){if(e.state===N.EventState.IN_PROGRESS)return!1;var t=e.contents.contents;if(!(0,e1.isKind)(t,"agentTimelineEventContents"))return!1;var n=t.agentTimelineEventContents,r=n.toolData;return"user_response"===n.toolName&&(null==r?void 0:r.$kind)==="messageData"}var e7=function(e){var t=e.shouldRenderToolCallsWithoutData,r=void 0!==t&&t,i=e.shouldPassThroughTaskListUpdates,a=void 0!==i&&i;return{direction:"reverse",state:{revert:null,acknowledged:new Set,approvedPlanId:null,approvedPlanEventId:null,didSeeRenderedEvent:!1,selectedFeatureIds:new Set,latestPlanId:null,secretResponses:new Set,environmentConfigResponses:new Set,approvedTaskListEventIds:new Set,taskListApprovalRequestEvents:new Map,latestInitialBuildApprovalRequestEventId:null,respondedQueryRequestEventIds:new Set,queryResponses:new Map,hasConvertMockupToAppResponse:!1,hasFurtherNonSummaryEvents:!1},transformer:function(e,t){var i=t.revert;(null==(w=t.revert)?void 0:w.eventIdBeforeRevert)===e.id&&(t.revert=null);var o=e.contents.contents,s=null;switch(null==o?void 0:o.$kind){case"sessionCreationEventContents":case"contextComplexityEventContents":return;case"requestFeatureAddData":o.requestFeatureAddData.type===N.RequestFeatureAddType.REQUEST_FEATURE_ADD_TYPE_NEON_DATABASE&&(s={type:"userMessage",id:e.id,message:"Please help me add a database to my app.",acknowledged:!0,created:e.created,attachedUrls:[],uploadedFiles:[],userId:Number(e.sender.id)});break;case"agentPlanEventContents":if(e.error.message){s={type:"error",id:e.id,message:e.error.message,shortMessage:e.error.shortMessage};break}var l=o.agentPlanEventContents,u=!1;null==t.latestPlanId&&(u=!0,t.latestPlanId=l.planId);var c=[],d="",f=[];if(l.step.subSteps.length>0){var p=(0,e0._)(l.step.subSteps),h=p[0],m=p.slice(1);d=h.name,f=h.blueprintData,c=m,h.subSteps.length>1&&(c=h.subSteps.map(function(e){return{id:e.id,name:e.name}}))}if(l.requiresApproval&&t.approvedPlanId===l.planId)return;l.requiresApproval||(t.approvedPlanId=l.planId),s={type:"planProposal",id:e.id,features:c,objective:d,stackBlueprint:l.stackBlueprint,blueprints:f,planId:l.planId,sessionId:e.sessionId,eventState:e.state,eventCreated:e.created,eventUpdated:e.updated,isLatestPlan:u,approved:t.approvedPlanEventId===e.id||!l.requiresApproval};break;case"approvePlanEventContents":var g=o.approvePlanEventContents,x=g.agentConfig,y=g.planEventId,b=g.initialBuildMode;t.approvedPlanEventId=y,s={type:"planApproval",id:e.id,userId:Number(e.sender.id),created:e.created,planId:y,initialBuildMode:b,agentConfig:x};break;case"revertEventContents":var w,_,k=o.revertEventContents.eventIdBeforeRevert;if((null==(_=t.revert)?void 0:_.eventIdBeforeRevert)===k){t.revert.reverterId=e.sender.id,t.revert.commitId=o.revertEventContents.commitId;return}t.revert={eventIdBeforeRevert:k,hiddenEvents:0,status:"inflight",reverterId:e.sender.id};return;case"messageEventContents":if(e.sender.type===N.UserType.USER)s={type:"userMessage",id:e.id,userId:Number(e.sender.id),message:o.messageEventContents.content,uploadedFiles:o.messageEventContents.uploadedFiles,attachedUrls:o.messageEventContents.attachedUrls,created:null!=(S=e.created)?S:null,acknowledged:t.acknowledged.has(e.id),targetedElement:o.messageEventContents.targetedElement,agentConfig:o.messageEventContents.agentConfig,requestedStackBlueprint:o.messageEventContents.requestedStackBlueprint};else{var S,C,j,T=e8(o.messageEventContents.agentAction),E=!t.didSeeRenderedEvent&&(e6(e)||!!T);s={type:"agentMessage",id:e.id,message:null!=(j=null==o||null==(C=o.messageEventContents)?void 0:C.content)?j:"",requestedSecrets:T,sessionId:e.sessionId,state:e.state,waitingOnUser:E}}break;case"agentAskUserForActionRequest":var R=o.agentAskUserForActionRequest.request;if((0,e1.isKind)(R,"userSecretsRequest")){var I=(0,e1.unkind)(R),A=I.secrets,P=I.message,D=!0;t.secretResponses.has(e.id)&&(D=!1,t.secretResponses.delete(e.id)),s={type:"agentMessage",id:e.id,message:P,requestedSecrets:(null==A?void 0:A.length)?A:void 0,sessionId:e.sessionId,state:e.state,waitingOnUser:D};break}if((0,e1.isKind)(R,"environmentConfigRequest")){var O=(0,e1.unkind)(R),M=O.envVars,L=O.message,B=!0;t.environmentConfigResponses.has(e.id)&&(B=!1,t.environmentConfigResponses.delete(e.id)),s={type:"agentMessage",id:e.id,message:L,requestedEnvVars:(null==M?void 0:M.length)?M:void 0,sessionId:e.sessionId,state:e.state,waitingOnUser:B};break}if((0,e1.isKind)(R,"approveTaskListRequest")){var V=(0,e1.unkind)(R).taskListEventId;t.taskListApprovalRequestEvents.set(V,e.id);break}if((0,e1.isKind)(R,"approveInitialBuildMvpRequest")||(0,e1.isKind)(R,"approveInitialBuildVisualPhaseRequest")){var F=!1;null==t.latestInitialBuildApprovalRequestEventId&&(t.latestInitialBuildApprovalRequestEventId=e.id,F=!0);var U=(0,e1.unkind)(R),G=U.userSecretsRequest,$=U.addingIntegrationRequest;G&&G.secrets.length>0&&F&&(s={type:"askUserForAction",id:e.id,sessionId:e.sessionId,message:null==G?void 0:G.message,state:e.state,secretsRequest:G,isSecretsRequestFulfilled:t.secretResponses.has(e.id)}),(null==$?void 0:$.connectionIds.length)>0&&F&&(s={type:"askUserForAction",id:e.id,sessionId:e.sessionId,message:"",state:e.state,addingIntegrationRequest:$});break}if((0,e1.isKind)(R,"queryRequest")){if(!t.respondedQueryRequestEventIds.has(e.id))break;var H=R.queryRequest.queries;if(0===H.length||H.every(function(e){return null==e.queryType}))break;var z=t.queryResponses.get(e.id);z&&t.queryResponses.delete(e.id),s={type:"queryRequest",id:e.id,created:e.created,queries:R.queryRequest.queries,responses:z};break}if((0,e1.isKind)(R,"convertMockupToAppRequest")){if(t.hasConvertMockupToAppResponse)break;var W=(0,e1.unkind)(o).message;s={type:"convertMockupToAppRequest",id:e.id,created:e.created,message:W};break}var q=(0,e1.isKind)(R,"nextStepRequest")?R.nextStepRequest.newFeatureRequests:void 0;q&&(q=q.map(function(e){return(0,eJ._)((0,n._)({},e),{isSelected:t.selectedFeatureIds.has(e.id)})})),s={type:"askUserForAction",id:e.id,sessionId:e.sessionId,message:o.agentAskUserForActionRequest.message,state:e.state,newFeatureRequests:q};break;case"agentAskUserForActionResponse":var K,Y=o.agentAskUserForActionResponse,Q=Y.response,X=Y.requestEventId,Z=Number(e.sender.id),J=(null==Q?void 0:Q.$kind)==="nextStepResponse"&&(null==(K=Q.nextStepResponse.response)?void 0:K.$kind)==="newFeatureResponse"?Q.nextStepResponse.response.newFeatureResponse:null;if(J)return t.selectedFeatureIds.add(J.selectedFeatureId),{type:"userMessage",id:e.id,userId:Z,message:J.featureName,uploadedFiles:[],attachedUrls:[],created:e.created,acknowledged:!0};if((null==Q?void 0:Q.$kind)==="userSecretsResponse")t.secretResponses.add(X);else if((null==Q?void 0:Q.$kind)==="envVarsResponse")t.environmentConfigResponses.add(X);else if((null==Q?void 0:Q.$kind)==="approveTaskListResponse"){if(Q.approveTaskListResponse.approved){var ee=Q.approveTaskListResponse,et=ee.taskListEventId,en=ee.agentConfig;return t.approvedTaskListEventIds.add(et),{type:"taskListApproval",id:e.id,state:e.state,userId:Z,created:e.created,taskListEventId:et,agentConfig:(0,eJ._)((0,n._)({},en),{agentMode:N.AgentMode.AGENT_MODE_GENERAL})}}}else if((null==Q?void 0:Q.$kind)==="approveInitialBuildMvpResponse"&&Q.approveInitialBuildMvpResponse.approved){var er=Q.approveInitialBuildMvpResponse.agentConfig;s={type:"initialBuildPhaseApproval",id:e.id,userId:Z,created:e.created,initialBuildPhase:N.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_COMPLETE_PENDING_REVIEW,agentConfig:er}}else if((null==Q?void 0:Q.$kind)==="approveInitialBuildVisualPhaseResponse"&&Q.approveInitialBuildVisualPhaseResponse.approved){var ei=Q.approveInitialBuildVisualPhaseResponse.agentConfig;Q.approveInitialBuildVisualPhaseResponse.userSecretsResponse.providedSecrets.length>0&&t.secretResponses.add(X),s={type:"initialBuildPhaseApproval",id:e.id,userId:Z,created:e.created,initialBuildPhase:N.InitialBuildPhase.INITIAL_BUILD_PHASE_VISUAL_COMPLETE_PENDING_REVIEW,agentConfig:ei}}else(null==Q?void 0:Q.$kind)==="convertMockupToAppResponse"?(t.hasConvertMockupToAppResponse=!0,Q.convertMockupToAppResponse.approved&&(s={type:"convertMockupToAppResponse",id:e.id,created:e.created,additionalComments:Q.convertMockupToAppResponse.additionalComments})):(null==Q?void 0:Q.$kind)==="queryResponse"&&(t.respondedQueryRequestEventIds.add(X),t.queryResponses.set(X,Q.queryResponse.responses));break;case"setupImportedProjectEventContents":var ea=t.didSeeRenderedEvent;s={type:"setupImport",id:e.id,sessionId:e.sessionId,importSource:o.setupImportedProjectEventContents.importSource,state:ea?N.EventState.COMPLETE:N.EventState.IN_PROGRESS};break;case"tipRecommendation":var eo=o.tipRecommendation;s={type:"tipRecommendation",id:e.id,sessionId:e.sessionId,created:e.created,tip:{id:eo.tipId,title:eo.title,recommendedReason:eo.recommendedReason}};break;case"subagentRunning":if((0,e1.isKind)(e.contents.contents,"subagentRunning")){var es=(0,e1.unkind)(e.contents.contents);s={type:"subagent",id:es.subagentId,eventId:e.id,parentId:e.sessionId,sessionId:es.childSessionId,created:e.created,subagentType:function(e){var t;switch(null==(t=e.contents)?void 0:t.$kind){case"uiTestingSubagentEventContents":return"uiTesting";case"generalSubagentEventContents":return"general";default:return}}(es),eventState:e.state}}break;case"agentTimelineEventContents":if(e.error.message){s={type:"error",id:e.id,message:e.error.message,shortMessage:e.error.shortMessage};break}var el=o.agentTimelineEventContents,eu=el.toolName,ec=el.toolData;switch(null==ec?void 0:ec.$kind){case"messageData":var ed=e8(ec.messageData.agentAction),ef=!t.didSeeRenderedEvent&&(e6(e)||!!ed);s={type:"agentMessage",id:e.id,message:ec.messageData.content,requestedSecrets:ed,sessionId:e.sessionId,state:e.state,waitingOnUser:ef};break;case"acknowledgeUserMessage":var ep=ec.acknowledgeUserMessage.eventIds,eh=!0,em=!1,eg=void 0;try{for(var ev,ex=ep[Symbol.iterator]();!(eh=(ev=ex.next()).done);eh=!0){var ey=ev.value;t.acknowledged.add(ey)}}catch(e){em=!0,eg=e}finally{try{eh||null==ex.return||ex.return()}finally{if(em)throw eg}}break;case"commitData":s=(0,eJ._)((0,n._)({type:"checkpoint"},ec.commitData),{id:e.id,parentEventId:e.parentEventId,title:ec.commitData.description.split("\n")[0],isPaid:ec.commitData.billingRate===N.CommitBillingRate.NORMAL,created:e.created,sessionId:e.sessionId,state:e.state,revert:null!=i?i:void 0,hasFurtherNonSummaryEvents:t.hasFurtherNonSummaryEvents});break;case"endOfRunSummaryData":var eb=ec.endOfRunSummaryData,ew=eb.relatedEffortBreakdowns,e_=ew&&ew.length>0&&ew.every(function(e){return(0,e1.isKind)(e.effortType,"freeQuickEdit")});if(0===eb.usageCents&&!e_)break;return(0,eJ._)((0,n._)({type:"endOfRunSummary"},ec.endOfRunSummaryData),{id:e.id,created:e.created,isFreeQuickEditRun:e_});case"revertData":return t.revert={eventIdBeforeRevert:ec.revertData.eventIdBeforeRevert,hiddenEvents:0,revertedAt:e.created,status:ec.revertData.status===N.RevertStatus.REVERT_DATA_STAGE_COMPLETE?"completed":"inflight"},s={type:"revert",id:e.id,status:ec.revertData.status,revertedAt:e.created,originalSessionId:ec.revertData.originalSessionId,checkpointTitle:ec.revertData.checkpointTitle};case"deployData":s={type:"suggestDeploy",id:e.id};break;case"suggestRollbackData":s={type:"suggestRollback",id:e.id,suggestRollbackReason:ec.suggestRollbackData.suggestRollbackReason};break;case"suggestGeneralBuildModeData":s={type:"suggestGeneralBuildMode",id:e.id,message:ec.suggestGeneralBuildModeData.message,suggestedAutonomyLevel:ec.suggestGeneralBuildModeData.suggestedAutonomyLevel};break;case"taskListData":var ek,eS=t.approvedTaskListEventIds.has(e.id),eC=ec.taskListData.agentMode===N.AgentMode.AGENT_MODE_DISCUSSION;if((0,e2.isFirstInstanceOfTaskList)(ec.taskListData)&&(eS||eC)){s={type:"taskList",subType:"creation",id:e.id,sessionId:e.sessionId,eventState:e.state,eventCreated:e.created,tasks:ec.taskListData.tasks,agentMode:ec.taskListData.agentMode,approved:eS,approvalRequestEventId:null!=(ek=t.taskListApprovalRequestEvents.get(e.id))?ek:null};break}var ej=(0,e2.getCompletedTasks)(ec.taskListData);if(ej.length>0){s={type:"taskList",subType:"itemsCompleted",id:e.id,sessionId:e.sessionId,eventState:e.state,eventCreated:e.created,completedTasks:ej,tasks:ec.taskListData.tasks,commitData:ec.taskListData.commitData,estimatedUsageCents:ec.taskListData.estimatedUsageCents};break}a&&(s={type:"taskList",subType:"update",id:e.id,sessionId:e.sessionId,eventState:e.state,eventCreated:e.created,tasks:ec.taskListData.tasks});break;default:var eT=r&&e4.has(eu),eE=!!(null==ec?void 0:ec.$kind)&&e5.has(ec.$kind);if(!eT&&!eE||e.state===N.EventState.IN_PROGRESS&&(null==ec?void 0:ec.$kind)!=="generateMediaData"&&(null==ec?void 0:ec.$kind)!=="subagentReportResultData"&&(null==ec?void 0:ec.$kind)!=="reportAgentIssueData")break;var eR=(0,e3.getToolUseSummary)(e);if(!eR)break;var eI=function(e){if(!e)return null;if(e.error.type!==N.EventErrorType.EVENT_ERROR_TYPE_UNKNOWN)return{$kind:"error",error:e.error};var t=e.contents.contents;if((null==t?void 0:t.$kind)!=="agentTimelineEventContents")return null;var n=t.agentTimelineEventContents.toolData,r=(0,e3.getToolUseSummary)(e),i={$kind:null,summary:r,state:e.state};switch(null==n?void 0:n.$kind){case"fileEditData":var a=null==n?void 0:n.fileEditData,o=null==a?void 0:a.filePath,s=null==a?void 0:a.diff;if(void 0===o||void 0===s)return i;return{$kind:"fileEditData",state:e.state,path:o,diff:s,summary:r};case"createFileData":var l=null==n?void 0:n.createFileData,u=null==l?void 0:l.filePath,c=null==l?void 0:l.content;if(void 0===u||void 0===c)return i;return{$kind:"createFileData",content:c,path:u,summary:r};case"shellExecutionData":return{$kind:"shellExecutionData",data:n.shellExecutionData,summary:r};case"readFileData":return{$kind:"readFileData",data:n.readFileData,summary:r};case"readDirData":return{$kind:"readDirData",data:n.readDirData,summary:r};case"packagerInstallData":var d=n.packagerInstallData,f=d.inputLanguage,p=d.inputPackages,h=d.output,m=d.isExecuting,g=d.processId;if(void 0===f||void 0===p)return i;return{$kind:"packagerInstallData",state:e.state,language:f,installed:p,output:void 0===h?void 0:h,isExecuting:void 0!==m&&m,processId:void 0===g?void 0:g,summary:r};case"packagerUninstallData":var x=n.packagerUninstallData;return{$kind:"packagerUninstallData",language:x.inputLanguage,uninstalled:x.inputPackages,summary:r};case"systemDependencyInstallData":var y=n.systemDependencyInstallData.deps;if(void 0===y)return i;return{$kind:"systemDependencyInstallData",deps:y,summary:r};case"systemDependencyUninstallData":var b=n.systemDependencyUninstallData.deps;if(void 0===b)return i;return{$kind:"systemDependencyUninstallData",deps:b,summary:r};case"toolchainInstallData":return{$kind:"toolchainInstallData",modules:n.toolchainInstallData.modules,summary:r};case"screenshotData":return{$kind:"screenshotData",imageUrl:n.screenshotData.imageUrl,summary:r};case"planProgressData":case"agentPlanStepBegin":case"workflowsStopToolData":case"workflowsGetOutputToolData":case"workflowsRemoveRunConfigToolData":return null;case"workflowsStartToolData":return{$kind:n.$kind,workflowName:n.workflowsStartToolData.name,state:e.state,summary:r};case"workflowsRestartToolData":return{$kind:n.$kind,workflowName:n.workflowsRestartToolData.name,state:e.state,restart:!0,summary:r};case"workflowsSetRunConfigToolData":return{$kind:n.$kind,workflowName:n.workflowsSetRunConfigToolData.name,state:e.state,summary:r};case"deployData":return{$kind:n.$kind,summary:r,result:n.deployData};case"presentResultsToolData":return{$kind:n.$kind,summary:r,result:n.presentResultsToolData};case"createPostgresqlDatabaseData":case"memoryCompressionData":return{$kind:n.$kind,summary:r};case"sqlExecutionData":return{$kind:n.$kind,data:n.sqlExecutionData,summary:r};case"executedSandboxedCodeData":return{$kind:n.$kind,data:n.executedSandboxedCodeData,state:e.state,summary:r};case"webSearchData":return{$kind:n.$kind,data:n.webSearchData,summary:r};case"webPageVisitData":return{$kind:n.$kind,data:n.webPageVisitData,summary:r};case"imageGenerationData":return{$kind:n.$kind,data:n.imageGenerationData,summary:r};case"videoGenerationData":return{$kind:n.$kind,data:n.videoGenerationData,summary:r};case"generateMediaData":return{$kind:n.$kind,data:n.generateMediaData,state:e.state,summary:r};case"waitingForBackgroundJobsData":return{$kind:n.$kind,data:n.waitingForBackgroundJobsData,state:e.state,summary:r};case"stockImageData":return{$kind:n.$kind,data:n.stockImageData,summary:r};case"searchFilesystemData":var w=n.searchFilesystemData.resultFileNames;return w.length?{$kind:n.$kind,resultFileNames:w,summary:r}:null;case"taskListData":return{$kind:n.$kind,data:n.taskListData,summary:r};case"samplingEvent":return{$kind:n.$kind,data:n.samplingEvent,summary:r};case"thoughts":return{$kind:n.$kind,thoughts:n.thoughts.thoughts};case"setupObjectStorageData":return{$kind:n.$kind,summary:r,bucketId:n.setupObjectStorageData.bucketId,bucketName:n.setupObjectStorageData.bucketName};case"blueprintsSetup":return{$kind:n.$kind,summary:r,blueprintData:n.blueprintsSetup.blueprintData};case"setupModelfarmData":return{$kind:n.$kind};case"viewLogsData":return{$kind:n.$kind,data:n.viewLogsData,summary:r};case"viewSpecialFiles":return{$kind:n.$kind,data:n.viewSpecialFiles,summary:r};case"designGuidelinesData":return{$kind:n.$kind,data:n.designGuidelinesData,summary:r};case"searchIntegrationsData":return{$kind:n.$kind,data:n.searchIntegrationsData};case"viewIntegrationData":return{$kind:n.$kind,data:n.viewIntegrationData};case"mcpToolData":return{$kind:n.$kind,data:n.mcpToolData};case"messagedBackgroundAgent":return{$kind:n.$kind,data:n.messagedBackgroundAgent,state:e.state};case"subagentReportResultData":return{$kind:n.$kind,data:n.subagentReportResultData,state:e.state};case"reportAgentIssueData":return{$kind:n.$kind,data:n.reportAgentIssueData,state:e.state,summary:r};default:return i}}(e);s={type:"agentToolUse",id:e.id,sessionId:e.sessionId,toolDataKind:null==ec?void 0:ec.$kind,toolName:eu,summary:eR,data:eI}}}if(s)return t.didSeeRenderedEvent=!0,t.hasFurtherNonSummaryEvents=!0,s}}};e.s(["getAgentEventsTransformer",()=>e7],836140);var e9=e.i(163525),te=e.i(568345);function tt(e){var t=e.expanded,n=e.onClick,r=e.title,i=e.children,a=e.iconComponent,o=null!=a?a:te.default;return(0,s.jsx)(eW.ExpandableFeedContent,{expanded:t,onToggle:n,triggerContent:(0,s.jsxs)(X.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[(0,s.jsx)(ez.ToolUseIconSurface,{children:(0,s.jsx)(o,{color:el.tokens.foregroundDimmest,size:ez.TOOL_USE_ICON_SIZE})}),(0,s.jsx)(eq.Summary,{summary:r,color:"dimmest"})]}),children:i})}var tn=(0,l.memo)(function(e){var t=e.data,i=(0,r._)(e,["data"]);return(0,s.jsx)(O.EventRenderer,(0,n._)({data:t},i))}),tr=e.i(173703),ti=e.i(725352);function ta(e){var t=e.event,i=(0,r._)(e,["event"]),a=eX.Observable.of(t);return(0,s.jsx)(tn,(0,n._)({data:a},i))}function to(e){var t=e.events,r=e.eventProps,a=e.isInProgress,o=e.thoughtSeconds,u=(0,i._)((0,l.useState)(!1),2),c=u[0],d=u[1],f="Show more";f=a?c?"Show less":"Show more":c?"Hide work done":"Show work done";var p=(0,l.useCallback)(function(){d(function(e){return!e})},[]),h=o?(0,eZ.humanizeDuration)(o):void 0,x=a?t.length>=3:t.length>0,y=(0,l.useMemo)(function(){var e=t.filter(function(e){return null!=e});return a?e.length<3||c?e:e.slice(-2):c?e:[]},[t,a,c]),b=y.length>0;return(0,s.jsxs)(tr.ShadesSurface,{gap:4,br:6,clsx:[ti.default.subSurface,(0,eR._)({},ti.default.expandable,x)],children:[x?(0,s.jsxs)(tr.ShadesSurface,{clsx:[ti.default.expandableHeader,(0,eR._)({},ti.default.expanded,c)],tag:"button",row:!0,gap:6,px:8,py:6,align:"center",justify:"space-between",onClick:p,children:[(0,s.jsxs)(X.View,{align:"center",row:!0,gap:4,children:[c?(0,s.jsx)(m.default,{color:el.tokens.foregroundDimmer}):(0,s.jsx)(g.default,{color:el.tokens.foregroundDimmer}),(0,s.jsx)(J.Text,{color:"dimmer",children:f})]}),h?(0,s.jsx)(J.Text,{color:"dimmer",children:h}):null]}):null,b?(0,s.jsx)(X.View,{children:y.map(function(e){return(0,s.jsx)(ta,(0,n._)({event:e},r),e.id)})}):null]})}function ts(e){var t=e.taskText,n=e.events,r=e.eventProps,i=e.isExpanded,a=e.onClickExpandCollapse;return(0,s.jsxs)(tr.ShadesSurface,{elevate:"2x",br:"container",clsx:[ti.default.inner,(0,eR._)({},ti.default.isExpanded,i)],children:[(0,s.jsxs)(X.View,{row:!0,justify:"space-between",align:"baseline",children:[(0,s.jsx)(J.Text,{variant:"small",color:"dimmer",children:"Task"}),(0,s.jsx)(Y.IconButton,{alt:"Maximize",onClick:a,children:i?(0,s.jsx)(q.default,{size:12}):(0,s.jsx)(V.default,{size:12})})]}),(0,s.jsx)(J.Text,{children:t}),n.length>0?(0,s.jsx)(to,{events:n,eventProps:r,isInProgress:!0}):null]})}function tl(e){var t=e.task,n=e.taskSummary,r=e.events,a=e.eventProps,o=(0,i._)((0,l.useState)(!1),2),u=o[0],c=o[1],d=(0,l.useCallback)(function(){c(function(e){return!e})},[]),f=(0,l.useCallback)(function(){c(!1)},[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ts,{taskText:n,events:r,eventProps:a,isExpanded:!1,onClickExpandCollapse:d}),(0,s.jsx)(Q.Modal,{maxWidth:872,isOpen:u,hideCloseButton:!0,onRequestClose:f,noPadding:!0,children:(0,s.jsx)(ts,{taskText:t,events:r,eventProps:a,isExpanded:!1,onClickExpandCollapse:d})})]})}function tu(e){var t=e.taskText,n=e.resultText,r=e.thoughtSeconds,i=e.events,a=e.eventProps,o=e.isExpanded,l=e.onClickExpandCollapse;return(0,s.jsxs)(tr.ShadesSurface,{elevate:"2x",br:"container",clsx:[ti.default.inner,(0,eR._)({},ti.default.isExpanded,o)],children:[(0,s.jsxs)(X.View,{row:!0,justify:"space-between",align:"baseline",children:[(0,s.jsx)(J.Text,{variant:"small",color:"dimmer",children:"Task"}),(0,s.jsx)(Y.IconButton,{alt:"Maximize",onClick:l,children:o?(0,s.jsx)(q.default,{size:12}):(0,s.jsx)(V.default,{size:12})})]}),(0,s.jsx)(e9.MessageMarkdown,{text:t}),i.length>0?(0,s.jsx)(to,{events:i,eventProps:a,isInProgress:!1,thoughtSeconds:r}):null,n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(J.Text,{variant:"small",color:"dimmer",children:"Result"}),(0,s.jsx)(e9.MessageMarkdown,{text:n})]}):null]})}function tc(e){var t=e.task,n=e.taskSummary,r=e.result,a=e.resultSummary,o=e.thoughtSeconds,u=e.events,c=e.eventProps,d=(0,i._)((0,l.useState)(!1),2),f=d[0],p=d[1],h=(0,l.useCallback)(function(){p(function(e){return!e})},[]),m=(0,l.useCallback)(function(){p(!1)},[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tu,{taskText:n,resultText:a,thoughtSeconds:o,events:u,eventProps:c,isExpanded:!1,onClickExpandCollapse:h}),(0,s.jsx)(Q.Modal,{maxWidth:872,isOpen:f,hideCloseButton:!0,onRequestClose:m,noPadding:!0,children:(0,s.jsx)(tu,{taskText:t,resultText:r,thoughtSeconds:o,events:u,eventProps:c,isExpanded:!0,onClickExpandCollapse:h})})]})}function td(e){var t=e.expandByDefault,n=e.isInProgress,a=e.title,o=e.task,u=e.taskSummary,c=e.result,d=e.resultSummary,p=e.thoughtSeconds,h=e.subagent,m=(0,r._)(e,["expandByDefault","isInProgress","title","task","taskSummary","result","resultSummary","thoughtSeconds","subagent"]),g=(0,i._)((0,l.useState)(null!=t?t:!!n),2),x=g[0],y=g[1],b=(0,l.useCallback)(function(){y(function(e){return!e})},[]);(0,l.useEffect)(function(){n||t||y(!1)},[t,n]);var w=(0,l.useMemo)(function(){var e=e7({});return h.session.transform(e,500)},[h]),_=(0,f.useObservable)(w.flat);return(0,s.jsx)(tt,{expanded:x,onClick:b,title:a,children:n?(0,s.jsx)(tl,{task:o,taskSummary:u,events:null!=_?_:[],eventProps:m}):(0,s.jsx)(tc,{task:o,taskSummary:u,result:c,resultSummary:d,thoughtSeconds:p,events:null!=_?_:[],eventProps:m})})}function tf(e){var t=e.subagent,i=(0,r._)(e,["subagent"]),a=(0,p.useObservableMemo)(function(){return t.contents("generalSubagentEventContents")},[t]),o=(0,f.useObservable)(t.running,!1),l=(0,f.useObservable)(t.totalExecutionTimeSeconds,0);if(!a)return null;var u=a.task,c=a.taskSummary,d=a.result,h=a.resultSummary,m=a.taskTitle;return(0,s.jsx)(td,(0,n._)({isInProgress:o,title:m,task:u,taskSummary:c,result:d,resultSummary:h,thoughtSeconds:o?void 0:l,subagent:t},i))}var tp=e.i(39043),th=e.i(121025),tm={direction:"reverse",state:{latestThoughtSummary:void 0,allThoughts:void 0},debug:{name:"LatestThoughtSummaryReducer"},reducer:function(e,t){var n,r,i;if((null==(r=e.contents)||null==(n=r.contents)?void 0:n.$kind)==="agentTimelineEventContents"&&(null==(i=e.contents.contents.agentTimelineEventContents.toolData)?void 0:i.$kind)==="thoughts"){var o,s=e.contents.contents.agentTimelineEventContents.toolData.thoughts;s.thoughts&&(t.allThoughts=[s.thoughts].concat((0,a._)(null!=(o=t.allThoughts)?o:[]))),s.summary&&!t.latestThoughtSummary&&(t.latestThoughtSummary=s.summary)}}};e.i(312917);var tg=e.i(675186),tv=e.i(112077),tx=e.i(387491),ty=e.i(869226),tb=e.i(401732),tw=(0,el.cvarsFrom)("AutoscrollMaxHeightContainer.module.css",["--max-height","--top-gradient-visibility"]);function t_(e){var t=e.children,i=e.maxHeight,a=e.elevated,o=e.onClick,u=(0,r._)(e,["children","maxHeight","elevated","onClick"]),c=(0,l.useRef)(null),d=(0,l.useRef)(null),f=(0,l.useRef)(null),p=(0,tv.useCreateObservable)(!0);return(0,l.useEffect)(function(){var e=d.current,t=f.current;if(e&&t){var n=0,r=new tg.AnimationLoop(function(t,r){n+=t;var i=e.scrollTop,a=e.scrollHeight-e.clientHeight,o=(0,tx.damp)({current:i,target:a,elapsed:n,delta:t});o===a?(n=0,r()):(e.scrollTop=o,p.set(i<5))}),i=new ResizeObserver(function(){return r.start()});return i.observe(t),function(){r.stop(),i.disconnect()}}},[p]),(0,ty.useStyleSet)(c,p,function(e){return(0,eR._)({},tw.topGradientVisibility,e?"hidden":"visible")}),(0,s.jsxs)(X.View,{clsx:tb.default.root,innerRef:c,children:[(0,s.jsx)(tr.ShadesSurface,(0,eJ._)((0,n._)({innerRef:d,style:(0,eR._)({},tw.maxHeight,(void 0===i?129.92:i)+"px"),onClick:o,clsx:tb.default.scroll,role:"button"},u),{elevate:!!(void 0!==a&&a)&&"1x",children:(0,s.jsx)(X.View,{innerRef:f,children:t})})),(0,s.jsx)(X.View,{clsx:tb.default.topGradient})]})}var tk=e.i(279714);function tS(e){var t=e.taskText,n=e.thoughtSummary,r=e.allThoughts,i=e.isExpanded,a=e.onClickExpandCollapse;return(0,s.jsxs)(tr.ShadesSurface,{elevate:"2x",br:"container",clsx:[tk.default.inner,(0,eR._)({},tk.default.isExpanded,i)],children:[(0,s.jsxs)(X.View,{row:!0,justify:"space-between",align:"baseline",children:[(0,s.jsx)(J.Text,{variant:"small",color:"dimmer",children:"Task"}),(0,s.jsx)(Y.IconButton,{alt:"Maximize",onClick:a,children:i?(0,s.jsx)(q.default,{size:12}):(0,s.jsx)(V.default,{size:12})})]}),(0,s.jsx)(J.Text,{children:t}),(0,s.jsxs)(tr.ShadesSurface,{clsx:tk.default.subSurface,gap:8,br:6,children:[(0,s.jsxs)(X.View,{align:"center",row:!0,gap:4,children:[(0,s.jsx)(th.default,{color:el.tokens.foregroundDimmer}),(0,s.jsxs)(J.Text,{color:"dimmest",children:[n||"Thinking",""]})]}),i?(0,s.jsx)(tr.ShadesSurface,{px:8,gap:16,py:6,children:null==r?void 0:r.map(function(e,t){return(0,s.jsx)(e9.MessageMarkdown,{textColor:"dimmest",text:e},t)})}):(0,s.jsx)(t_,{maxHeight:129.92,elevated:!0,px:8,onClick:a,children:(0,s.jsx)(X.View,{gap:16,py:6,children:null==r?void 0:r.map(function(e,t){return(0,s.jsx)(e9.MessageMarkdown,{textColor:"dimmest",text:e},t)})})})]})]})}function tC(e){var t=e.taskText,n=e.resultText,r=e.thoughtSeconds,i=e.thoughtSummary,a=e.isExpanded,o=e.onClickExpandCollapse,l=null;return void 0!==r?l=(0,s.jsxs)(X.View,{align:"center",row:!0,gap:4,children:[(0,s.jsx)(th.default,{color:el.tokens.foregroundDimmer}),(0,s.jsxs)(J.Text,{color:"dimmer",children:["Thought for ",(0,eZ.humanizeDuration)(r)]})]}):i&&(l=(0,s.jsxs)(X.View,{align:"center",row:!0,gap:4,children:[(0,s.jsx)(th.default,{color:el.tokens.foregroundDimmer}),(0,s.jsx)(eq.Summary,{summary:i,color:"dimmer"})]})),(0,s.jsxs)(tr.ShadesSurface,{elevate:"2x",br:"container",clsx:[tk.default.inner,(0,eR._)({},tk.default.isExpanded,a)],children:[(0,s.jsxs)(X.View,{row:!0,justify:"space-between",align:"baseline",children:[(0,s.jsx)(J.Text,{variant:"small",color:"dimmer",children:"Task"}),(0,s.jsx)(Y.IconButton,{alt:"Maximize",onClick:o,children:a?(0,s.jsx)(q.default,{size:12}):(0,s.jsx)(V.default,{size:12})})]}),(0,s.jsx)(e9.MessageMarkdown,{text:t}),l?(0,s.jsx)(tr.ShadesSurface,{elevate:"2x",clsx:tk.default.subSurface,px:8,br:6,children:l}):null,n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(J.Text,{variant:"small",color:"dimmer",children:"Result"}),(0,s.jsx)(e9.MessageMarkdown,{text:n})]}):null]})}function tj(e){var t=e.task,n=e.taskSummary,r=e.thoughtSummary,a=e.allThoughts,o=(0,i._)((0,l.useState)(!1),2),u=o[0],c=o[1],d=(0,l.useCallback)(function(){c(function(e){return!e})},[]),f=(0,l.useCallback)(function(){c(!1)},[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tS,{taskText:n,thoughtSummary:r,allThoughts:a,isExpanded:!1,onClickExpandCollapse:d}),(0,s.jsx)(Q.Modal,{maxWidth:872,isOpen:u,hideCloseButton:!0,onRequestClose:f,noPadding:!0,children:(0,s.jsx)(tS,{taskText:t,thoughtSummary:r,allThoughts:a,isExpanded:!0,onClickExpandCollapse:d})})]})}function tT(e){var t=e.task,n=e.taskSummary,r=e.result,a=e.resultSummary,o=e.thoughtSeconds,u=e.thoughtSummary,c=(0,i._)((0,l.useState)(!1),2),d=c[0],f=c[1],p=(0,l.useCallback)(function(){f(function(e){return!e})},[]),h=(0,l.useCallback)(function(){f(!1)},[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tC,{taskText:n,resultText:a,thoughtSeconds:o,thoughtSummary:u,isExpanded:!1,onClickExpandCollapse:p}),(0,s.jsx)(Q.Modal,{maxWidth:872,isOpen:d,hideCloseButton:!0,onRequestClose:h,noPadding:!0,children:(0,s.jsx)(tC,{taskText:t,resultText:r,thoughtSeconds:o,thoughtSummary:u,isExpanded:!0,onClickExpandCollapse:p})})]})}function tE(e){var t=e.isInProgress,n=e.title,r=e.task,a=e.taskSummary,o=e.result,u=e.resultSummary,c=e.thoughtSeconds,d=e.thoughtSummary,f=e.allThoughts,p=e.expandByDefault,h=(0,i._)((0,l.useState)(null!=p?p:!!t),2),m=h[0],g=h[1],x=(0,l.useCallback)(function(){g(function(e){return!e})},[]);return(0,l.useEffect)(function(){t||p||g(!1)},[p,t]),(0,s.jsx)(tt,{expanded:m,onClick:x,title:n,iconComponent:tp.default,children:t?(0,s.jsx)(tj,{task:r,taskSummary:a,thoughtSummary:d,allThoughts:f}):(0,s.jsx)(tT,{task:r,taskSummary:a,result:o,resultSummary:u,thoughtSeconds:c,thoughtSummary:d})})}function tR(e){var t=e.subagent,n=(0,p.useObservableMemo)(function(){return t.contents("generalSubagentEventContents")},[t]),r=(0,f.useObservable)(t.running,!1),i=(0,f.useObservable)(t.totalExecutionTimeSeconds,0),a=(0,p.useObservableMemo)(function(){return t.session.reduce(tm,"global")},[t],{default:{latestThoughtSummary:void 0,allThoughts:void 0}}),o=a.latestThoughtSummary,l=a.allThoughts;if(!n)return null;var u=n.task,c=n.taskSummary,d=n.result,h=n.resultSummary,m=n.taskTitle;return(0,s.jsx)(tE,{isInProgress:r,title:m,task:u,taskSummary:c,result:d,resultSummary:h,thoughtSeconds:r?void 0:i,thoughtSummary:o,allThoughts:l})}function tI(){return(0,s.jsx)(ez.LoadingToolUse,{summary:"Starting subagent"})}var tA=(0,l.memo)(function(e){var t=e.data,i=(0,r._)(e,["data"]),a=(0,c.useChatter)(),o=!!t.sessionId,l=(0,p.useObservableMemo)(function(){return o?a.sessions.get(t.parentId).select(function(e){return null==e?void 0:e.subagent(t.id,t.eventId,t.sessionId,t.created)}):null},[a,t,o]),u=(0,f.useObservable)(null==l?void 0:l.data),d=(0,f.useObservable)(null==l?void 0:l.kind),h=(0,p.useObservableMemo)(function(){return null==l?void 0:l.contents("generalSubagentEventContents")},[l]);if(!o||!l||!d||!(null==u?void 0:u.subagentId)&&!(null==u?void 0:u.subagentName))return(0,s.jsx)(tI,{});switch(d){case"uiTestingSubagentEventContents":return(0,s.jsx)(eQ,{subagent:l});case"generalSubagentEventContents":if((null==h?void 0:h.eventFilter)===N.GeneralSubagentEventFilter.GENERAL_SUBAGENT_EVENT_FILTER_ALL_EVENTS)return(0,s.jsx)(tf,(0,n._)({subagent:l},i));return(0,s.jsx)(tR,{subagent:l})}}),tP=(0,l.memo)(function(e){var t=e.data,i=(0,r._)(e,["data"]);return(0,s.jsx)(O.EventRenderer,(0,n._)({data:t,subagentRenderer:tA},i))});function tD(e){return"agentToolUse"===e.type||"taskList"===e.type||"subagent"===e.type&&("uiTesting"!==e.subagentType||e.eventState!==N.EventState.IN_PROGRESS)}var tO=function(e){var t=[],r=!e.some(function(e){return"planProposal"===e.value.type}),i=null,o=null,s=null,l=-1,u=!0,c=!1,d=void 0;try{for(var f,p=e[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;if("planProposal"!==h.value.type||r||(r=h.value.approved),tD(h.value)&&(null!=s||(s=[]),s.push(h)),"userMessage"===h.value.type&&i&&(o&&(tB(i,o,s),s=null,o=null),t.push.apply(t,(0,a._)(i)),i=null),!i){if(i=[],!r||tN(h.value)){"userMessage"===h.value.type&&(l=t.length),i.push({type:"event",id:h.id,observable:h.observable});continue}o=tM(h.id);var m={id:h.id,observable:h.observable};o.items.push(tD(h.value)?{type:"toolUseGroup",events:[m]}:(0,n._)({type:"event"},m)),tL(o,h.value);continue}if(!r||tN(h.value)){o&&(tB(i,o,s),s=null,o=null),i.push({type:"event",id:h.id,observable:h.observable});continue}o||(o=tM(h.id));var g={id:h.id,observable:h.observable};if(tD(h.value)){var x=o.items[o.items.length-1];(null==x?void 0:x.type)==="toolUseGroup"?x.events.push(g):o.items.push({type:"toolUseGroup",events:[g]}),tL(o,h.value);continue}tL(o,h.value),o.items.push((0,n._)({type:"event"},g))}}catch(e){c=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}return i&&(o&&(tB(i,o,s),s=null,o=null),t.push.apply(t,(0,a._)(i))),{result:t,lastUserMessageIndex:l}};function tN(e){switch(e.type){case"userMessage":case"checkpoint":case"planProposal":case"suggestDeploy":case"tipRecommendation":case"taskListApproval":case"initialBuildPhaseApproval":case"queryRequest":case"endOfRunSummary":return!0;default:return!1}}function tM(e){return{type:"activityGroup",id:e,items:[],count:{message:0,toolUse:0}}}function tL(e,t){var n=e.count;switch(t.type){case"agentMessage":n.message++,e.summary||(e.summary=t.message);break;case"agentToolUse":case"subagent":case"taskList":n.toolUse++}}function tB(e,t,r){var o=(c=t.items).some(function(e){return"toolUseGroup"===e.type})?null:c;if(o)return void e.push.apply(e,(0,a._)(o));if(1===t.count.toolUse&&0===t.count.message){var s=!0,l=!1,u=void 0;try{for(var c,d,f=t.items[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var p=d.value;if("event"===p.type)e.push(p);else{var h=!0,m=!1,g=void 0;try{for(var x,y=p.events[Symbol.iterator]();!(h=(x=y.next()).done);h=!0){var b=x.value;e.push((0,n._)({type:"event"},b))}}catch(e){m=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw g}}}}}catch(e){l=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(l)throw u}}return}!t.summary&&r&&(t.summary=function(e){var t=[],n=new Map,r=new Map,a=!0,o=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;if("agentToolUse"===c.type)if(c.toolDataKind){var d=n.get(c.toolDataKind);d?d.push(c):n.set(c.toolDataKind,[c])}else{var f=r.get(c.toolName);f?f.push(c):r.set(c.toolName,[c])}}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}var p=!0,h=!1,m=void 0;try{for(var g,x=n.entries()[Symbol.iterator]();!(p=(g=x.next()).done);p=!0){var y=(0,i._)(g.value,2),b=y[0],_=y[1];switch(b){case"createFileData":t.push("created ".concat((0,w.default)("file",_.length,!0)));break;case"fileEditData":t.push("edited ".concat((0,w.default)("file",_.length,!0)));break;case"packagerInstallData":var k=0,S=!0,C=!1,j=void 0;try{for(var T,E=_[Symbol.iterator]();!(S=(T=E.next()).done);S=!0){var R=T.value.data;(null==R?void 0:R.$kind)==="packagerInstallData"&&(k+=R.installed.length)}}catch(e){C=!0,j=e}finally{try{S||null==E.return||E.return()}finally{if(C)throw j}}t.push("installed ".concat((0,w.default)("package",k,!0)));break;case"createPostgresqlDatabaseData":t.push("created a database");break;case"setupObjectStorageData":t.push("set up Object Storage");break;case"setupModelfarmData":t.push("set up Replit AI Integrations");break;case"screenshotData":t.push("took ".concat((0,w.default)("screenshot",_.length,!0)))}}}catch(e){h=!0,m=e}finally{try{p||null==x.return||x.return()}finally{if(h)throw m}}var I=!0,A=!1,P=void 0;try{for(var D,O=r.entries()[Symbol.iterator]();!(I=(D=O.next()).done);I=!0){var N=(0,i._)(D.value,2),M=N[0],L=N[1];"programming_language_install_tool"===M&&t.push("configured ".concat((0,w.default)("programming environment",L.length,!0)))}}catch(e){A=!0,P=e}finally{try{I||null==O.return||O.return()}finally{if(A)throw P}}return t.length?t.join(", "):void 0}(r.map(function(e){return e.value}))),e.push(t)}var tV=e.i(873667),tF=e.i(806930),tU=e.i(155119),tG=e.i(828322),t$=e.i(250030),tH=e.i(536262),tz=e.i(596139),tW=e.i(973519),tq=e.i(115820),tK=e.i(713295),tY=e.i(76112),tQ=e.i(751273),tX=e.i(915711);function tZ(e){var t=e.durationPrefix,n=e.usageCents,r=e.workDurationSeconds,i=e.isRefunded,a=e.isInProgress,o=e.tooltipPlacement,l=e.preDiscountsUsageCents;if(void 0===r)return null;var u="".concat(void 0===t?"Worked for":t," ").concat((0,eZ.humanizeDuration)(Math.max(r,1))),c="";return void 0!==i&&i?c="You have been refunded for this checkpoint":!(void 0!==a&&a)&&void 0!==n&&n>0&&(c=void 0!==l&&l>0?(0,s.jsxs)(s.Fragment,{children:["This work cost"," ",(0,s.jsxs)(J.Text,{className:tX.default.strikethrough,variant:"small",color:"dimmer",children:["$",(l/100).toFixed(2)]}),(0,s.jsxs)(J.Text,{variant:"small",color:"dimmer",children:["$",(n/100).toFixed(2)]})]}):"This work cost $".concat((n/100).toFixed(2))),(0,s.jsx)(tQ.Tooltip,{tooltip:c,placement:void 0===o?"bottom-start":o,isDisabled:!c,children:(0,s.jsxs)(X.View,{row:!0,gap:8,align:"center",children:[(0,s.jsx)(tY.default,{size:16}),(0,s.jsx)(J.Text,{color:"dimmer",variant:"small",children:u})]})})}var tJ=e.i(1074),t0=e.i(443394),t1=e.i(690767),t2=e.i(889176),t3=e.i(116235);function t5(e){return(0,s.jsx)(t3.default,(0,eJ._)((0,n._)({},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4.85 6a.75.75 0 0 1 .75-.75H17a3.75 3.75 0 1 1 0 7.5H7.25a2.5 2.5 0 0 0 0 5h9.25a.75.75 0 0 1 0 1.5H7.25a4 4 0 0 1 0-8H17a2.25 2.25 0 0 0 0-4.5H5.6A.75.75 0 0 1 4.85 6Z",clipRule:"evenodd"})}))}e.s(["default",()=>t5],123805);var t4=e.i(85742),t8=e.i(590829);function t6(e){var t=e.granularity,n=e.onSetGranularity;return(0,s.jsxs)(t4.ListBox,{"aria-label":"Feed view granularity",selectionMode:"single",selectedKeys:new Set([t]),onSelectionChange:function(e){var t=(0,i._)(Array.from(e),1)[0];t&&n(t)},clsx:t8.default.listbox,children:[(0,s.jsx)(t4.ListBoxItem,{id:d.RunGranularity.Tasks,label:"Tasks",showLabelAsTooltip:!0,icon:(0,s.jsx)(t2.default,{}),clsx:t8.default.item}),(0,s.jsx)(t4.ListBoxItem,{id:d.RunGranularity.Log,label:"Work log",icon:(0,s.jsx)(t5,{}),showLabelAsTooltip:!0,clsx:t8.default.item})]})}var t7=e.i(119274),t9=e.i(854976),ne=(0,l.memo)(function(e){var t,i,a,o,l=e.group,u=e.onSessionChange,c=e.openPane,p=e.granularity,h=e.onSetGranularity,m=e.session,g=(0,r._)(e,["group","onSessionChange","openPane","granularity","onSetGranularity","session"]),x=(0,f.useObservable)(null!=(t=l.checkpoint)?t:null),y=(0,f.useObservable)(null!=(i=l.latestTaskList)?i:null),b=(0,f.useObservable)(null!=(a=l.endOfRunSummary)?a:null),w=null!=(o=null==y?void 0:y.tasks)?o:[],_=w.length>0,k=(0,tK.useInProgressEventData)(m).summary,S=null==b&&null==x,C=l.agentMode===N.AgentMode.AGENT_MODE_DISCUSSION;return(0,s.jsx)(tr.ShadesSurface,{clsx:[t9.default.card,(0,eR._)({},t9.default.activeRun,S)],children:(0,s.jsxs)(X.View,{gap:4,p:4,children:[(0,s.jsx)(nt,{checkpoint:x,granularity:_?p:void 0,onSetGranularity:h,isPlanMode:C}),p===d.RunGranularity.Log?l.items.length>0?(0,s.jsx)(tr.ShadesSurface,{clsx:t9.default.activitySurface,elevate:!1,children:(0,s.jsx)(ni,(0,n._)({items:l.items,onSessionChange:u,openPane:c},g))}):null:w.length>0?(0,s.jsx)(tr.ShadesSurface,{clsx:t9.default.activitySurface,py:4,elevate:!1,children:(0,s.jsx)(t1.TaskListItems,{tasks:w,approvalStatus:"approved",areTaskDetailsExpandable:!1})}):null,(0,s.jsx)(nn,{checkpoint:x,endOfRunSummary:b,isActiveRun:S,isPlanMode:C,inProgressEventSummary:k,onOpenCommit:function(e){return c({type:"git",data:{mode:{type:A.GitPaneModeType.COMMIT,hash:e}}})},onSessionChange:u,openPane:c})]})})});function nt(e){var t=e.checkpoint,n=e.granularity,r=e.onSetGranularity,i=e.isPlanMode,a=t&&""===t.commitId&&t.state!==N.EventState.IN_PROGRESS,o=(0,s.jsxs)(X.View,{row:!0,align:"center",gap:8,pl:4,shrink:!0,children:[(0,s.jsx)(X.View,{justify:"center",align:"center",gap:4,children:t?a?(0,s.jsx)(L.default,{color:el.tokens.accentNegativeStronger}):(0,s.jsx)(tV.default,{color:el.tokens.foregroundDimmest}):(0,s.jsx)(L.default,{color:el.tokens.foregroundDimmest})}),(0,s.jsx)(J.Text,{color:"dimmer",shrink:!0,multiline:!1,showTooltipOnTruncate:!0,clsx:t9.default.headerTitle,children:t?t.title:n===d.RunGranularity.Log?"Work log":"Tasks"})]});return(0,s.jsxs)(X.View,{row:!0,align:"center",justify:"space-between",gap:4,children:[i?(0,s.jsx)(X.View,{}):o,n&&r?(0,s.jsx)(t6,{granularity:n,onSetGranularity:r}):null]})}function nn(e){var t,n,r=e.checkpoint,i=e.endOfRunSummary,a=e.isActiveRun,o=e.isPlanMode,l=e.inProgressEventSummary,u=e.onOpenCommit,c=e.onSessionChange,d=e.openPane,f=null!=(t=null==i?void 0:i.workDurationSeconds)?t:null==r?void 0:r.workDurationSeconds;return(0,s.jsxs)(X.View,{row:!0,justify:"space-between",align:"center",clsx:t9.default.footer,children:[a?(0,s.jsx)(_.FeedStatusRowUI,{inProgressEventSummary:null!=l?l:e3.DEFAULT_IN_PROGRESS_EVENT_SUMMARY}):(0,s.jsx)(X.View,{row:!0,align:"center",gap:8,pl:4,children:i||f?(0,s.jsx)(tZ,{durationPrefix:o?"Planned for":"Worked for",workDurationSeconds:null!=(n=null==i?void 0:i.workDurationSeconds)?n:f,usageCents:null==i?void 0:i.usageCents}):null}),r?(0,s.jsx)(nr,{checkpoint:r,onOpenCommit:u,onSessionChange:c,openPane:d}):null]})}function nr(e){var t,n,r=e.checkpoint,a=e.onOpenCommit,o=e.onSessionChange,u=e.openPane,c=(0,tW.useGlobalModal)().show,d=(0,t0.getCurrentUrl)(),f=(0,i._)((0,l.useState)(!1),2),p=f[0],h=f[1],m=(0,R.default)({checkpoint:r,onSessionChange:o}).onRevert,g=(0,tq.useAgentCheckpointPreview)({commitId:r.commitId,enableHelium:null!=(t=r.heliumCheckpointCreated)&&t,date:r.created}),x=g.loadPreview,y=g.loading,b=g.error,w=g.previewUrl,_=g.validPreview,k=g.showUpgradeModal,S=g.setShowUpgradeModal;(0,l.useEffect)(function(){k&&c("MembershipPurchaseModal",{headingText:"Upgrade to preview past checkpoints",subHeadingText:"Upgrade to Replit ".concat(tz.corePlanName," to preview past checkpoints"),analyticsContext:{upgrade:{context:"checkpoint_preview"}},onPurchaseComplete:function(){x()},redirectPath:d}).then(function(){S(!1)})},[k,c,x,S,d]);var C=(0,l.useCallback)(function(){h(!0)},[]),j=(0,l.useCallback)(function(){a(r.commitId)},[r.commitId,a]),E=null!==w,I=""===r.commitId&&r.state!==N.EventState.IN_PROGRESS,A=r.isLatest&&!r.isDirty&&!r.hasFurtherNonSummaryEvents,P="Preview",D=(0,s.jsx)(t$.default,{});y?(P="Loading",D=(0,s.jsx)(B.default,{})):A?(P="View preview",D=(0,s.jsx)(tU.default,{})):E?(P="View preview",D=(0,s.jsx)(ea.default,{})):_?b&&(P="Failed to load",D=(0,s.jsx)(es.default,{})):(P="Preview expired",D=(0,s.jsx)(L.default,{}));var O=(0,l.useCallback)(function(){A?u({type:"webview"}):_&&(E?window.open(w,"_blank","noopener"):x())},[A,u,E,w,_,x]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t7.PopupMenu,{label:"Checkpoint actions",trigger:(0,s.jsx)(Y.IconButton,{alt:"Checkpoint actions",children:(0,s.jsx)(tG.default,{})}),children:[(0,s.jsx)(t7.MenuItem,{onAction:C,label:"Rollback",icon:(0,s.jsx)(tH.default,{})}),(0,s.jsx)(t7.MenuItem,{onAction:j,label:"Changes",icon:(0,s.jsx)(tF.default,{})}),(0,s.jsx)(t7.MenuItem,{onAction:O,isDisabled:I||!A&&!_,label:P,icon:D})]}),p?(0,s.jsx)(Q.Modal,{isOpen:p,onRequestClose:function(){return h(!1)},centered:!0,children:(0,s.jsx)(tJ.ConfirmRollbackModal,{author:(0,T.commitAuthorToCheckpointAuthor)(r.author),setShowConfirmModal:h,deploymentBuildId:void 0,onRevert:m,commitId:r.commitId,enableHelium:null!=(n=r.heliumCheckpointCreated)&&n,screenshot:r.screenshotUrl,date:r.created})}):null]})}function ni(e){var t=e.items,i=e.onSessionChange,a=e.openPane,o=(0,r._)(e,["items","onSessionChange","openPane"]);return(0,s.jsx)(X.View,{p:2,children:t.map(function(e){return(0,s.jsx)(tP,(0,n._)({data:e.observable,onSessionChange:i,openPane:a},o),e.id)})})}var na=e.i(907371),no=e.i(831498);function ns(e){var t,n,r=e.group,i=e.openPane,a=e.onSessionChange,o=e.onSetGranularity,l=e.isInteractive,u=void 0!==l&&l,c=(0,f.useObservable)(null!=(t=r.checkpoint)?t:null),p=(0,f.useObservable)(null!=(n=r.endOfRunSummary)?n:null),h=(0,na.useCreateInteractive)({variant:"filled"});return(0,s.jsx)(tr.ShadesSurface,{clsx:[u?h.clsx:void 0,no.default.card],style:u?h.style:void 0,onClick:u?function(){null==o||o(d.RunGranularity.Tasks)}:void 0,children:(0,s.jsxs)(X.View,{gap:4,p:4,children:[(0,s.jsx)(nt,{checkpoint:c}),(0,s.jsx)(nn,{checkpoint:c,endOfRunSummary:p,isActiveRun:!1,onOpenCommit:function(e){return i({type:"git",data:{mode:{type:A.GitPaneModeType.COMMIT,hash:e}}})},onSessionChange:a,openPane:i})]})})}var nl=e.i(401262);e.i(148382);var nu=e.i(715463),nc=e.i(221453),nd=e.i(680738),nf=e.i(940879),np=e.i(745383);function nh(e,t){var n=Object.create(null);return e&&l.Children.map(e,function(e){return e}).forEach(function(e){n[e.key]=t&&(0,l.isValidElement)(e)?t(e):e}),n}function nm(e,t,n){return null!=n[t]?n[t]:e.props[t]}var ng=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},nv=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=r.handleExited.bind((0,nd.default)(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}(0,nf.default)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,a=t.handleExited;return{children:t.firstRender?nh(e.children,function(t){return(0,l.cloneElement)(t,{onExited:a.bind(null,t),in:!0,appear:nm(t,"appear",e),enter:nm(t,"enter",e),exit:nm(t,"exit",e)})}):(Object.keys(r=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];s[i[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(i,n=nh(e.children))).forEach(function(t){var o=r[t];if((0,l.isValidElement)(o)){var s=t in i,u=t in n,c=i[t],d=(0,l.isValidElement)(c)&&!c.props.in;u&&(!s||d)?r[t]=(0,l.cloneElement)(o,{onExited:a.bind(null,o),in:!0,exit:nm(o,"exit",e),enter:nm(o,"enter",e)}):u||!s||d?u&&s&&(0,l.isValidElement)(c)&&(r[t]=(0,l.cloneElement)(o,{onExited:a.bind(null,o),in:c.props.in,exit:nm(o,"exit",e),enter:nm(o,"enter",e)})):r[t]=(0,l.cloneElement)(o,{in:!1})}}),r),firstRender:!1}},n.handleExited=function(e,t){var n=nh(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(t){var n=(0,nc.default)({},t.children);return delete n[e.key],{children:n}}))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,nu.default)(e,["component","childFactory"]),i=this.state.contextValue,a=ng(this.state.children).map(n);return(delete r.appear,delete r.enter,delete r.exit,null===t)?l.default.createElement(np.default.Provider,{value:i},a):l.default.createElement(np.default.Provider,{value:i},l.default.createElement(t,r,a))},t}(l.default.Component);nv.propTypes={},nv.defaultProps={component:"div",childFactory:function(e){return e}};var nx=e.i(568430),ny=e.i(887964),nb=e.i(927225),nw=e.i(178815),n_=e.i(971372),nk=e.i(232397);function nS(e){var t=e.observable,n=e.stacked,r=(0,f.useObservable)(t),i=null;return((null==r?void 0:r.type)==="agentToolUse"&&(i=r.toolDataKind?(0,s.jsx)(nw.ToolDataIcon,{kind:r.toolDataKind,color:el.tokens.foregroundDimmest,size:ez.TOOL_USE_ICON_SIZE}):(0,s.jsx)(n_.ToolNameIcon,{toolName:r.toolName,color:el.tokens.foregroundDimmest,size:ez.TOOL_USE_ICON_SIZE})),(null==r?void 0:r.type)==="taskList"&&(i=(0,s.jsx)(ny.default,{color:el.tokens.foregroundDimmest,size:ez.TOOL_USE_ICON_SIZE})),(null==r?void 0:r.type)==="subagent"&&(i=(0,s.jsx)(tp.default,{color:el.tokens.foregroundDimmest,size:ez.TOOL_USE_ICON_SIZE})),r&&i)?(0,s.jsx)(ez.ToolUseIconSurface,{clsx:[nk.default.eventIconContainer,(0,eR._)({},nk.default.stacked,n)],children:i}):null}function nC(e){var t,n=e.events,r=e.maxIcons,i=n.length>r,a=r>=3&&i,o=(t=(0,l.useRef)(new Map),(0,l.useCallback)(function(e){var n=t.current.get(e);return n||(n={current:null},t.current.set(e,n)),n},[]));if(!a){var u=n.slice(0,r);return(0,s.jsx)(nv,{component:null,children:u.map(function(e,t){var n=e.id,r=e.observable,i=o(n);return(0,s.jsx)(nl.CSSTransition,{timeout:150,appear:!0,classNames:{appear:nk.default.iconSlideEnter,appearActive:nk.default.iconSlideEnterActive,enter:nk.default.iconSlideEnter,enterActive:nk.default.iconSlideEnterActive},nodeRef:i,children:(0,s.jsx)("div",{ref:i,style:{display:"inline-block"},children:(0,s.jsx)(nS,{observable:r,stacked:t>0})})},n)})})}var c=n.slice(0,r-2),d=n[n.length-1];return(0,s.jsxs)(s.Fragment,{children:[c.map(function(e,t){var n=e.id,r=e.observable;return(0,s.jsx)(nS,{observable:r,stacked:t>0},n)}),(0,s.jsx)(ez.ToolUseIconSurface,{clsx:[nk.default.eventIconContainer,nk.default.stacked],children:(0,s.jsx)(nb.default,{color:el.tokens.foregroundDimmest,size:ez.TOOL_USE_ICON_SIZE})}),(0,s.jsx)(nS,{observable:d.observable,stacked:!0})]})}var nj=(0,l.memo)(function(e){var t,a,o,u=e.events,c=e.isLastToolUseGroup,d=e.session,f=e.shouldShowFloatingStatusRow,p=(0,r._)(e,["events","isLastToolUseGroup","session","shouldShowFloatingStatusRow"]),h=(0,i._)((0,l.useState)(!1),2),m=h[0],g=h[1],x=(0,l.useRef)(null),y=(a=(t=(0,i._)((0,l.useState)(10),2))[0],o=t[1],(0,l.useEffect)(function(){var e=x.current;if(e){var t=function(){o(Math.max(1,Math.floor(.6*e.offsetWidth/22)))};t();var n=new ResizeObserver(t);return n.observe(e),function(){return n.disconnect()}}},[x]),a);if(1===u.length&&(!c||!f))return(0,s.jsx)(tP,(0,n._)({data:u[0].observable},p),u[0].id);var b=c&&f&&!m,w="".concat(u.length," action").concat(1===u.length?"":"s");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O.EventContainer,{py:2,children:(0,s.jsxs)(na.Interactive,{variant:"nofill",innerRef:x,tag:"button",row:!0,align:"center",p:4,gap:8,borderRadius:12,clsx:nk.default.toolUseGroupButton,onClick:function(){return g(!m)},children:[m?(0,s.jsx)(ez.ToolUseIconSurface,{clsx:nk.default.eventIconContainer,children:(0,s.jsx)(nx.default,{color:el.tokens.foregroundDimmest,size:ez.TOOL_USE_ICON_SIZE})}):(0,s.jsxs)(X.View,{row:!0,align:"center",shrink:!0,children:[(0,s.jsx)(nC,{events:u,maxIcons:y}),b?(0,s.jsx)(X.View,{clsx:nk.default.inlineStatusRow,grow:!0,shrink:!0,children:(0,s.jsx)(_.FeedStatusRow,{session:d,inline:!0,slideIn:!0})}):null]}),m?(0,s.jsx)(J.Text,{color:"dimmest",children:"Show less"}):null,m||b?null:(0,s.jsx)(J.Text,{color:"dimmest",children:w})]})}),(0,s.jsx)(eW.ExpandableFeedContent,{expanded:m,children:u.map(function(e){var t=e.id,r=e.observable;return(0,s.jsx)(tP,(0,n._)({data:r},p),t)})}),c&&m&&f?(0,s.jsx)(O.EventContainer,{py:2,children:(0,s.jsx)(_.FeedStatusRow,{session:d})}):null]})}),nT=e.i(26857),nE=e.i(901708),nR=e.i(382222),nI=e.i(887198),nA=(0,l.memo)(function(e){var t=e.sessionEntry,i=e.onFeedStateChange,a=e.transformer,o=e.feedMapperFn,u=e.shouldAutoScrollRef,d=e.shouldShowFloatingStatusRow,f=(0,r._)(e,["sessionEntry","onFeedStateChange","transformer","feedMapperFn","shouldAutoScrollRef","shouldShowFloatingStatusRow"]),h=(0,c.useChatter)(),m=(0,p.useObservableMemo)(function(){return h.sessions.get(t.sessionId)},[h,t.sessionId]),g=(0,l.useMemo)(function(){if(m)return t.tipEventId?m.from(t.tipEventId):m},[m,t.tipEventId]);return g?(0,s.jsx)(nO,(0,n._)({scopedSession:g,sessionEntry:t,onFeedStateChange:i,transformer:a,feedMapperFn:o,shouldAutoScrollRef:u,shouldShowFloatingStatusRow:d},f)):(0,s.jsx)(C.LoadingState,{})}),nP=(0,l.memo)(function(e){var t=e.item,i=e.session,a=e.getGranularity,o=e.setGranularity,l=e.isLatestRunGroup,u=e.isInLastGroup,c=e.shouldAutoScrollRef,f=e.lastToolUseGroupInfo,p=e.shouldShowFloatingStatusRow,h=(0,r._)(e,["item","session","getGranularity","setGranularity","isLatestRunGroup","isInLastGroup","shouldAutoScrollRef","lastToolUseGroupInfo","shouldShowFloatingStatusRow"]);if("preRunGroup"===t.type)return(0,s.jsx)(ns,{group:t,openPane:h.openPane,onSessionChange:h.onSessionChange});if("runGroup"===t.type){var m=t.supportsViewGranularity?a(t.id):d.RunGranularity.Log;return(0,s.jsx)(nD,{runGroup:t,session:i,granularity:m,setGranularity:o,isLatestRunGroup:void 0!==l&&l,shouldAutoScrollRef:c,eventProps:h})}return"activityGroup"===t.type?(0,s.jsx)(nB,(0,n._)({activityGroup:t,isInLastGroup:void 0!==u&&u,lastToolUseGroupInfo:f,session:i,shouldShowFloatingStatusRow:p},h)):(0,s.jsx)(tP,(0,n._)({data:t.observable},h))}),nD=(0,l.memo)(function(e){var t,r=e.runGroup,i=e.session,a=e.granularity,o=e.setGranularity,u=e.isLatestRunGroup,c=e.shouldAutoScrollRef,p=e.eventProps,h=(0,l.useDeferredValue)(a),m=(0,f.useObservable)(null!=(t=r.latestTaskList)?t:null),g=(null==m?void 0:m.tasks)&&m.tasks.length>0,x=(0,l.useCallback)(function(e){c&&(c.current=!1),o(r.id,e)},[r.id,o,c]);if(h===d.RunGranularity.Minimized&&!u)return(0,s.jsx)(ns,{group:r,openPane:p.openPane,onSessionChange:p.onSessionChange,isInteractive:!0,onSetGranularity:x});var y=g?{granularity:h,onSetGranularity:x}:{granularity:d.RunGranularity.Log};return(0,s.jsx)(ne,(0,n._)({group:r,session:i},y,p))}),nO=(0,l.memo)(function(e){var t,i,a,o,u,c,h,m=e.scopedSession,g=e.sessionEntry,y=e.onFeedStateChange,b=e.transformer,w=e.feedMapperFn,_=e.shouldAutoScrollRef,k=e.shouldShowFloatingStatusRow,S=(0,r._)(e,["scopedSession","sessionEntry","onFeedStateChange","transformer","feedMapperFn","shouldAutoScrollRef","shouldShowFloatingStatusRow"]),j=(t=m,i=b,a=w,o=(0,x.useFlag)({controlName:"flag-agent-feed-per-page",type:"number",default:200}),u=(0,x.useFlag)({controlName:"flag-render-tool-calls-without-data"}),c=(0,l.useMemo)(function(){var e=e7({shouldRenderToolCallsWithoutData:u}),n=null!=i?i:e;return t.transform(n,Math.min(o,1e3))},[t,o,i,u]),h=null!=a?a:tO,{feed:(0,p.useObservableMemo)(function(){return c.map(h)},[c,h]),isFullyLoaded:(0,f.useObservable)(c.exhaustive),loadMore:(0,l.useCallback)(function(){return c.size.set(c.size.current+100)},[c])}),T=j.feed,E=j.isFullyLoaded,R=j.loadMore,I=(0,d.useSetRunGroupGranularity)(),A=(0,d.useGetRunGroupGranularity)(),P=(0,l.useMemo)(function(){if(T&&T.result){var e=T.result.filter(function(e){return"runGroup"===e.type});if(0!==e.length)return e[e.length-1].id}},[T]),D=(0,l.useMemo)(function(){if(!(null==T||null==(e=T.result)?void 0:e.length))return null;var e,t,n=T.result[T.result.length-1];if("activityGroup"!==n.type)return null;var r=n.items[n.items.length-1];return(null==r?void 0:r.type)==="toolUseGroup"&&r.events.length>=1?{activityGroupId:n.id,toolUseGroupKey:null==(t=r.events[0])?void 0:t.id}:null},[T]);return((0,l.useEffect)(function(){y(g.sessionId,{isFullyLoaded:E,loadMore:R,hasAnyItemsToRender:(null==T?void 0:T.result)!=null&&T.result.length>0,hasLastToolUseGroupCandidate:null!==D})},[g.sessionId,E,R,y,T,D]),T)?(0,s.jsx)(s.Fragment,{children:T.result.map(function(e,t){var r="runGroup"===e.type&&e.id===P;return(0,s.jsx)(nP,(0,n._)({item:e,session:m,getGranularity:A,setGranularity:I,isLatestRunGroup:r,isInLastGroup:t>=T.lastUserMessageIndex,shouldAutoScrollRef:_,lastToolUseGroupInfo:D,shouldShowFloatingStatusRow:k},S),"".concat(e.type,"-").concat(e.id))})}):(0,s.jsx)(C.LoadingState,{})}),nN=(0,l.memo)(function(e){var t=e.entry,i=e.index,a=e.visibleSessions,o=e.checkpointsValue,u=e.expandedSeparators,c=e.onToggleSeparator,d=e.revertToCommit,f=e.renameCommit,p=e.openCommit,h=e.onFeedStateChange,m=e.shouldAutoScrollRef,g=e.transformer,x=e.feedMapperFn,y=e.shouldShowFloatingStatusRow,b=(0,r._)(e,["entry","index","visibleSessions","checkpointsValue","expandedSeparators","onToggleSeparator","revertToCommit","renameCommit","openCommit","onFeedStateChange","shouldAutoScrollRef","transformer","feedMapperFn","shouldShowFloatingStatusRow"]),w=i>0?a[i-1]:null,_=(0,l.useMemo)(function(){return w&&(null==o?void 0:o.ok)?function(e,t,n){if(!t||!n)return[];var r=n.find(function(t){var n;return(null==(n=t.session)?void 0:n.id)===e});if(!r)return[];var i=r.commitRanges.flatMap(function(e){return e.commitRange}),a=i.findIndex(function(e){return e.eventId===t});return -1===a?[]:i.slice(a+1)}(w.sessionId,w.tipEventId,o.value):[]},[w,o]),k="".concat(null==w?void 0:w.sessionId,"-").concat(t.sessionId),S=u.has(k),C=i>0&&_.length>0;return(0,s.jsxs)(s.Fragment,{children:[i>0?(0,s.jsx)(X.View,{clsx:nR.default.sessionSeparator}):null,C?(0,s.jsxs)(X.View,{children:[(0,s.jsx)(E.CollapsedCheckpointsToggle,{count:_.length,collapsed:!S,onToggle:function(){c(k)},className:nR.default.sessionStitchingToggle}),S?(0,s.jsx)(X.View,{pl:8,py:8,gap:12,children:_.map(function(e){var t;return(0,s.jsx)(j.CheckpointHistoryItem,{author:e.authoredBy,title:null!=(t=e.customSubject)?t:e.subject,date:new Date(e.committer.date),commitId:e.hash,onRevert:function(t){var n;return d({commitId:e.hash,title:null!=(n=e.customSubject)?n:e.subject,eventId:e.eventId,sessionId:e.sessionId,args:t})},onRenameTitle:f?function(t){return f(e.hash,t||e.subject)}:void 0,screenshot:e.screenshotUrl,onOpenCommit:function(){return p(e.hash)},isReverted:!0,openPane:b.openPane},e.hash)})}):null]}):null,(0,s.jsx)(nA,(0,n._)({sessionEntry:t,onFeedStateChange:h,shouldAutoScrollRef:m,transformer:g,feedMapperFn:x,shouldShowFloatingStatusRow:y},b))]})}),nM=(0,l.memo)(function(e){var d,p,m,g,w,C,j,E,N,M,L,B=e.session,V=e.shouldAutoScrollRef,F=e.scrollerTopPadding,U=e.scrollerBottomPadding,G=e.transformer,$=e.feedMapperFn,H=(0,r._)(e,["session","shouldAutoScrollRef","scrollerTopPadding","scrollerBottomPadding","transformer","feedMapperFn"]),z=(0,P.useAgentState)().agentState,W=(0,b.useIsInMobileWorkspace)(),q=null!=$?$:tO,K=(0,c.useChatter)(),Y=(0,f.useObservable)(K.sessions.agent.current),Q=(0,T.useCheckpoints)(),Z=Q.checkpoints,J=Q.renameCommit,ee=(0,f.useObservable)(Z),et=(0,i._)((0,l.useState)(new Set),2),en=et[0],er=et[1],ei=(0,l.useCallback)(function(e){er(function(t){var n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]),ea=(0,nT.useSendAskUserForActionResponse)(B),eo=(0,S.useIsInitialAgentSession)(B.id),es=(0,I.useWorkspaceLoadingState)(),el=(p=(d=(0,i._)((0,l.useState)([]),2))[0],m=d[1],w=(g=(0,i._)((0,l.useState)(!1),2))[0],C=g[1],j=(0,y.default)(p),E=(0,x.useFlag)({controlName:"flag-session-pedigree"}),N=(0,l.useRef)(!1),M=(0,l.useCallback)(function(){return(0,t._)(function(){var e,t,n,r,i,s;return(0,o._)(this,function(o){switch(o.label){case 0:if(!E||!(e=j.current[0])||N.current)return[2];N.current=!0,t=B.api.getSessionObservableById(e.sessionId),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,t.once()];case 2:return[4,o.sent().data.once()];case 3:return n=o.sent(),[3,5];case 4:return o.sent(),N.current=!1,[2];case 5:if(!n.revertedToSessionId)return C(!1),N.current=!1,[2];r={sessionId:n.revertedToSessionId,tipEventId:n.revertedToEventId},m(function(e){return[r].concat((0,a._)(e))}),i=B.api.getSessionObservableById(n.revertedToSessionId),o.label=6;case 6:return o.trys.push([6,9,,10]),[4,i.once()];case 7:return[4,o.sent().data.once()];case 8:return s=o.sent(),[3,10];case 9:return o.sent(),N.current=!1,[2];case 10:return C(!!s.revertedToSessionId),N.current=!1,[2]}})})()},[j,B.api,E]),(0,l.useEffect)(function(){var e=!1;return(m([]),C(!1),E)?((0,t._)(function(){var t,n,r,i,a;return(0,o._)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,B.data.once()];case 1:return t=o.sent(),[3,3];case 2:return o.sent(),[2];case 3:if(e)return[2];if(!t.revertedToSessionId)return m([{sessionId:B.id}]),[2];n={sessionId:t.revertedToSessionId,tipEventId:t.revertedToEventId},r=B.api.getSessionObservableById(t.revertedToSessionId),o.label=4;case 4:return o.trys.push([4,6,,7]),[4,r.once()];case 5:return i=o.sent(),[3,7];case 6:case 9:return o.sent(),[2];case 7:return o.trys.push([7,9,,10]),[4,i.data.once()];case 8:return a=o.sent(),[3,10];case 10:if(e)return[2];return m([n,{sessionId:B.id}]),C(!!a.revertedToSessionId),[2]}})})(),function(){e=!0}):void m([{sessionId:B.id}])},[B,E]),{ancestry:p,hasMore:w,loadMore:M}),ec=el.ancestry,ed=el.hasMore,ef=el.loadMore,ep=(0,l.useRef)(new Map),eh=(0,i._)((0,l.useState)(!1),2),em=eh[0],eg=eh[1],ev=(0,l.useCallback)(function(e,t){ep.current.set(e,t),e===B.id&&eg(t.hasLastToolUseGroupCandidate),eo&&t.hasAnyItemsToRender&&(null==es||es.remove())},[eo,es,B.id]),ex=(0,l.useRef)(null),ey=(0,l.useRef)(F);(0,l.useLayoutEffect)(function(){var e=F-ey.current;if(0!==e&&ex.current){var t=ex.current,n=t.scrollTop,r=t.scrollHeight-n-t.clientHeight,i=e>0?r-e<=nE.NEAR_END_THRESHOLD:r<=nE.NEAR_END_THRESHOLD;if(e<0&&i){ey.current=F;return}i||(V.current=!1),ex.current.scrollTop+=e}ey.current=F},[F,V]);var eb=(0,u.useCurrentUserTipsQuery)({fetchPolicy:"cache-first",ssr:!1}).data,ew=(0,l.useMemo)(function(){var e,t,n,r=(null==eb||null==(t=eb.currentUser)||null==(e=t.tips)?void 0:e.tips)||[],i=new Map(r.map(function(e){return[e.id,e]})),o=r.filter(function(e){return e.timeRecommended}),s=(0,a._)(o).sort(function(e,t){var n=e.timeRecommended?new Date(e.timeRecommended).getTime():0;return(t.timeRecommended?new Date(t.timeRecommended).getTime():0)-n}),l=(null==(n=s[0])?void 0:n.id)||null;return{recommendedTips:new Set(s.map(function(e){return e.id})),latestTipId:l,allTipsById:i,anyLatestFiveInteracted:s.slice(0,5).some(function(e){return e.timeCompleted||e.timeInteracted||e.timeDismissed}),hasInteractedBefore:s.some(function(e){return e.timeInteracted})}},[eb]),e_=(0,b.useIsInBonsaiWebview)(),ek=(0,l.useMemo)(function(){if(!e_)return null;var e,t,n=((null==eb||null==(t=eb.currentUser)||null==(e=t.tips)?void 0:e.tips)||[]).find(function(e){return"bonsai_tour"===e.ctaTrigger});return n?{tip:n,isInBonsaiWebview:e_}:null},[e_,eb]),eS=(0,l.useRef)(new Map),eC=(0,n._)({sendAskUserForActionResponse:ea,isInitialSession:eo,agentState:z,tipData:ew,bonsaiTourTipInfo:ek},H),ej=null==(L=ec[0])?void 0:L.sessionId,eT=ej?ep.current.get(ej):void 0,eE=(null==eT?void 0:eT.isFullyLoaded)===!1||ed,eR=(0,l.useCallback)(function(){(null==eT?void 0:eT.isFullyLoaded)===!1?eT.loadMore():ed&&ef()},[eT,ed,ef]),eI=(0,l.useCallback)(function(e){return H.openPane({type:"git",data:{mode:{type:A.GitPaneModeType.COMMIT,hash:e}}})},[H]),eA=(0,l.useCallback)(function(e){var r=e.commitId,i=e.title,a=e.eventId,s=e.sessionId,l=e.args;return(0,t._)(function(){return(0,o._)(this,function(e){switch(e.label){case 0:if(!Y)return[2];return[4,(0,R.revert)((0,n._)({chatter:K,commitId:r,title:i,onSessionChange:H.onSessionChange,currentSession:Y,revertedToEventId:a,revertedToSessionId:s},l))];case 1:return e.sent(),[2]}})})()},[K,H.onSessionChange,Y]),eP=(0,k.useShouldShowFloatingStatusRow)(B),eD=!H.isReadOnly&&eP;return(0,s.jsx)(X.View,{clsx:nR.default.feed,grow:1,shrink:1,align:"center",children:(0,s.jsxs)(nE.AutoScroller,{pt:D.FEED_PADDING_TOP+F,pb:U+D.FEED_PADDING_BOTTOM+8,px:W?D.FEED_PADDING_INLINE_MOBILE:D.FEED_PADDING_INLINE_DESKTOP,scrollCacheKey:B.id,scrollCache:eS.current,shouldAutoScrollRef:V,autoScrollBehavior:"smooth",buttonOffset:U+8,scrollerRef:ex,children:[eE?(0,s.jsx)(eu.Button,{variant:"outlined",iconLeft:(0,s.jsx)(h.default,{}),text:"Show previous messages",onClick:eR}):null,ec.map(function(e,t){return(0,s.jsx)(nN,(0,n._)({entry:e,index:t,visibleSessions:ec,checkpointsValue:ee,expandedSeparators:en,onToggleSeparator:ei,revertToCommit:eA,renameCommit:J,openCommit:eI,onFeedStateChange:ev,shouldAutoScrollRef:V,transformer:G,feedMapperFn:q,shouldShowFloatingStatusRow:e.sessionId===B.id&&eP},eC),e.sessionId)}),eD&&!em?(0,s.jsx)(O.EventContainer,{py:2,children:(0,s.jsx)(_.FeedStatusRow,{session:B})}):null]})})});function nL(e){var t,n=e.expanded,r=e.onClick,i=e.activityGroup,a=e.innerRef,o=e.children,l=e.onTransitionEnd;return(0,s.jsxs)(X.View,{innerRef:a,children:[(0,s.jsx)(na.Interactive,{variant:"nofill",tag:"button",row:!0,align:"center",px:4,gap:6,borderRadius:12,clsx:nI.default.expandableButton,onClick:r,children:(0,s.jsxs)(X.View,{row:!0,align:"center",gap:8,grow:!0,shrink:!0,children:[(0,s.jsx)(ez.ToolUseIconSurface,{children:n?(0,s.jsx)(m.default,{color:el.tokens.foregroundDimmest,size:ez.TOOL_USE_ICON_SIZE}):(0,s.jsx)(g.default,{color:el.tokens.foregroundDimmest,size:ez.TOOL_USE_ICON_SIZE})}),(0,s.jsx)(J.Text,{color:"dimmest",children:n?"Show less":(t=i.count).message>0&&t.toolUse>0?(0,w.default)("message",t.message,!0)+" & "+(0,w.default)("action",t.toolUse,!0):t.message>0?(0,w.default)("message",t.message,!0):t.toolUse>0?(0,w.default)("action",t.toolUse,!0):"Show activity"})]})}),(0,s.jsx)(eW.ExpandableFeedContent,{expanded:n,onTransitionEnd:l,children:o})]})}var nB=(0,l.memo)(function(e){var t=e.activityGroup,a=e.isInLastGroup,o=void 0!==a&&a,u=e.lastToolUseGroupInfo,c=e.session,d=e.shouldShowFloatingStatusRow,f=(0,r._)(e,["activityGroup","isInLastGroup","lastToolUseGroupInfo","session","shouldShowFloatingStatusRow"]),p=(0,i._)((0,l.useState)(!1),2),h=p[0],m=p[1],g=(0,i._)((0,l.useState)(!1),2),x=g[0],y=g[1],b=(0,l.useRef)(null);(0,l.useEffect)(function(){h&&y(!0)},[h]);var w=(0,l.useCallback)(function(){h||y(!1)},[h]);if(0===t.items.length)return null;var _=o&&!f.isReadOnly?t.items.map(function(e){if("event"===e.type)return(0,s.jsx)(tP,(0,n._)({data:e.observable},f),e.id);var r,i,a=(null==u?void 0:u.activityGroupId)===t.id&&(null==u?void 0:u.toolUseGroupKey)===(null==(r=e.events[0])?void 0:r.id);return(0,s.jsx)(nj,(0,n._)({events:e.events,isLastToolUseGroup:a,session:c,shouldShowFloatingStatusRow:d},f),null==(i=e.events[0])?void 0:i.id)}):null,k=x?t.items.flatMap(function(e){return"event"===e.type?(0,s.jsx)(tP,(0,n._)({data:e.observable},f),e.id):e.events.map(function(e){var t=e.id,r=e.observable;return(0,s.jsx)(tP,(0,n._)({data:r},f),t)})}):null;return(0,s.jsx)(s.Fragment,{children:o&&!f.isReadOnly?_:(0,s.jsx)(nL,{innerRef:b,activityGroup:t,expanded:h,onClick:function(){m(!h)},onTransitionEnd:w,children:k})})});e.s(["Feed",()=>nM],755867);var nV=(0,e.i(541793).atom)(new Map),nF=e.i(138716),nU=e.i(752539),nG=e.i(709485),n$=e.i(142365),nH=e.i(454551),nz=e.i(887877),nW=e.i(734882),nq=e.i(916271),nK=e.i(624768);function nY(e){return"Enter"===e.key&&(e.metaKey||e.ctrlKey)}function nQ(e){var t,n,r,o=e.queries,u=e.sessionId,d=e.requestEventId,f=e.onSendResponse,p=e.onCancel,h=e.isResponseInProgress,m=e.isInMobileWorkspace,g=(0,c.useValue)(nV).get(d),x=(t=(0,c.useSet)(nV),(0,l.useCallback)(function(e,n){t(function(t){if(t.has(e))return t;var r=new Map(t),i=Array.from({length:n},function(){return{responseType:{$kind:"noResponse",noResponse:{}}}});return r.set(e,i),r})},[t])),y=(n=(0,c.useSet)(nV),(0,l.useCallback)(function(e,t,r){n(function(n){var i=new Map(n),o=i.get(e)||[],s=(0,a._)(o);return s[t]=r,i.set(e,s),i})},[n])),b=(r=(0,c.useSet)(nV),(0,l.useCallback)(function(e){r(function(t){if(!t.has(e))return t;var n=new Map(t);return n.delete(e),n})},[r])),w=o.length;(0,n$.useTrackEffect)(nG.events.AGENT_USED,{action:"query_request_viewed",query_request_id:d,num_total_queries:w,session_id:u}),(0,l.useEffect)(function(){w>1&&x(d,w)},[w,d,x]);var _=(0,i._)((0,l.useState)(0),2),k=_[0],S=_[1],C=Math.min(k,w-1),j=o[C],T=C===w-1,E=0===C,R=(0,l.useCallback)(function(e){if(1===w)return void f({responses:[e]});if(y(d,C,e),C<w-1)S(C+1);else{var t=g||[],n=(0,a._)(t);n[C]=e,f({responses:n}),b(d)}},[w,C,g,f,y,b,d]),I=(0,l.useCallback)(function(){b(d),S(0),p()},[b,d,p]),A=(0,l.useCallback)(function(){S(function(e){return Math.max(0,e-1)})},[]);if(!j)return null;var P=null==g?void 0:g[C],D=null;(0,e1.isKind)(j.queryType,"booleanQuery")&&(D=(0,s.jsx)(nX,{query:j.queryType.booleanQuery,onSubmit:R,onCancel:I,onNavigateBack:A,isResponseInProgress:h,isLastQuestion:T,isFirstQuestion:E,savedResponse:P,onUpdateResponse:function(e){return y(d,C,e)},isInMobileWorkspace:m},C)),(0,e1.isKind)(j.queryType,"choiceQuery")&&(D=(0,s.jsx)(nZ,{query:j.queryType.choiceQuery,onSubmit:R,onCancel:I,onNavigateBack:A,isResponseInProgress:h,isLastQuestion:T,isFirstQuestion:E,savedResponse:P,onUpdateResponse:function(e){return y(d,C,e)},isInMobileWorkspace:m},C)),(0,e1.isKind)(j.queryType,"textQuery")&&(D=(0,s.jsx)(nJ,{query:j.queryType.textQuery,onSubmit:R,onCancel:I,onNavigateBack:A,isResponseInProgress:h,isLastQuestion:T,isFirstQuestion:E,savedResponse:P,onUpdateResponse:function(e){return y(d,C,e)},isInMobileWorkspace:m},C));var O=1===w?"Agent has a question for you":"Agent has questions for you";return h&&w>1?(0,s.jsxs)(tr.ShadesSurface,{elevate:"2x",br:"container",border:"regular",p:8,gap:6,children:[(0,s.jsxs)(X.View,{row:!0,justify:"space-between",align:"center",children:[(0,s.jsx)(J.Text,{children:(0,s.jsx)("strong",{children:O})}),w>1&&(0,s.jsx)(X.View,{row:!0,gap:4,align:"center",shrink:0,children:(0,s.jsxs)(J.Text,{color:"dimmer",children:[C+1,"/",w]})})]}),(0,s.jsx)(J.Text,{color:"dimmer",children:"Collecting your responses"}),(0,s.jsx)(n1,{onCancel:I,onNavigateBack:A,isLoading:!0,isLastQuestion:!0,isFirstQuestion:E,hasResponse:!0,isInMobileWorkspace:m})]}):D?(0,s.jsxs)(tr.ShadesSurface,{elevate:"2x",br:"container",border:"regular",p:8,gap:6,children:[(0,s.jsxs)(X.View,{row:!0,justify:"space-between",align:"center",children:[(0,s.jsx)(J.Text,{children:(0,s.jsx)("strong",{children:O})}),w>1&&(0,s.jsx)(X.View,{row:!0,gap:4,align:"center",shrink:0,children:(0,s.jsxs)(J.Text,{color:"dimmer",children:[C+1,"/",w]})})]}),D]}):null}function nX(e){var t=e.query,n=e.onSubmit,r=e.onCancel,a=e.onNavigateBack,o=e.isResponseInProgress,u=e.isLastQuestion,c=e.isFirstQuestion,d=e.savedResponse,f=e.onUpdateResponse,p=e.isInMobileWorkspace,h=t.question,m=t.confirmText,g=t.rejectText,x=(0,l.useRef)(null),y=(0,l.useId)(),b="boolean-response-".concat(y),w="boolean-reason-".concat(y),_="",k="";d&&(0,e1.isKind)(d.responseType,"booleanResponse")&&(_=d.responseType.booleanResponse.response?"true":"false",k=d.responseType.booleanResponse.reason);var S=(0,i._)((0,l.useState)(""!==_),2),C=S[0],j=S[1],T=(0,i._)((0,l.useState)(_),2),E=T[0],R=T[1],I=(0,l.useCallback)(function(){if(!x.current)return{responseType:{$kind:"noResponse",noResponse:{}}};var e,t,n=new FormData(x.current),r=n.get(b);return"true"!==r&&"false"!==r?{responseType:{$kind:"noResponse",noResponse:{}}}:{responseType:{$kind:"booleanResponse",booleanResponse:{response:"true"===r,reason:null!=(t=null==(e=n.get(w))?void 0:e.toString())?t:""}}}},[b,w]),A=function(e){R(e);var t="true"===e||"false"===e;j(t),t?f({responseType:{$kind:"booleanResponse",booleanResponse:{response:"true"===e,reason:d&&(0,e1.isKind)(d.responseType,"booleanResponse")?d.responseType.booleanResponse.reason:""}}}):f({responseType:{$kind:"noResponse",noResponse:{}}})};return(0,s.jsx)(nz.Form,{ref:x,onSubmit:function(e){e.preventDefault(),n(I())},tabIndex:0,onKeyDown:function(e){if(nY(e)&&!o){var t;e.preventDefault(),e.stopPropagation(),null==(t=x.current)||t.requestSubmit()}},children:(0,s.jsxs)(X.View,{gap:6,children:[(0,s.jsx)(nq.default,{children:h}),(0,s.jsx)(nW.RadioGroup,{name:b,value:E,onChange:function(e){return A(e.target.value)},disabled:o,children:(0,s.jsxs)(X.View,{gap:6,children:[(0,s.jsxs)("label",{className:nK.default.radioOption,children:[(0,s.jsx)(X.View,{pt:2,children:(0,s.jsx)(nW.Radio,{id:"".concat(b,"-true"),name:b,value:"true"})}),(0,s.jsx)(J.Text,{children:m||"Yes"})]}),(0,s.jsxs)("label",{className:nK.default.radioOption,children:[(0,s.jsx)(X.View,{pt:2,children:(0,s.jsx)(nW.Radio,{id:"".concat(b,"-false"),name:b,value:"false"})}),(0,s.jsx)(J.Text,{children:g||"No"})]})]})}),(0,s.jsx)(n0,{id:w,disabled:o,defaultValue:k,onChange:function(e){("true"===E||"false"===E)&&f({responseType:{$kind:"booleanResponse",booleanResponse:{response:"true"===E,reason:e}}})}}),(0,s.jsx)(n1,{onCancel:function(){var e;r(),null==(e=x.current)||e.reset(),j(!1),R("")},onNavigateBack:a,isLoading:o,isLastQuestion:u,isFirstQuestion:c,hasResponse:C,isInMobileWorkspace:p})]})})}function nZ(e){var t=e.query,n=e.onSubmit,r=e.onCancel,a=e.onNavigateBack,o=e.isResponseInProgress,u=e.isLastQuestion,c=e.isFirstQuestion,d=e.savedResponse,f=e.onUpdateResponse,p=e.isInMobileWorkspace,h=(0,l.useRef)(null),m=(0,l.useId)(),g="multiple-choice-response-".concat(m),x="multiple-choice-reason-".concat(m),y=d&&(0,e1.isKind)(d.responseType,"choiceResponse")?d.responseType.choiceResponse.response:"",b=d&&(0,e1.isKind)(d.responseType,"choiceResponse")?d.responseType.choiceResponse.reason:"",w=(0,i._)((0,l.useState)(""!==y),2),_=w[0],k=w[1],S=(0,i._)((0,l.useState)(y),2),C=S[0],j=S[1],T=(0,i._)((0,l.useState)(b),2),E=T[0],R=T[1],I=(0,l.useCallback)(function(){if(!h.current)return{responseType:{$kind:"noResponse",noResponse:{}}};var e,t,n=new FormData(h.current),r=n.get(g);return r&&"string"==typeof r&&""!==r.trim()?{responseType:{$kind:"choiceResponse",choiceResponse:{response:r,reason:null!=(t=null==(e=n.get(x))?void 0:e.toString())?t:""}}}:{responseType:{$kind:"noResponse",noResponse:{}}}},[g,x]),A=function(e){j(e);var t=!!e;k(t),t?f({responseType:{$kind:"choiceResponse",choiceResponse:{response:e,reason:E}}}):f({responseType:{$kind:"noResponse",noResponse:{}}})};return(0,s.jsx)(nz.Form,{ref:h,onSubmit:function(e){e.preventDefault(),n(I())},tabIndex:0,onKeyDown:function(e){if(nY(e)&&!o){var t;e.preventDefault(),e.stopPropagation(),null==(t=h.current)||t.requestSubmit()}},children:(0,s.jsxs)(X.View,{gap:6,children:[(0,s.jsx)(nq.default,{children:t.question}),(0,s.jsx)(nW.RadioGroup,{name:g,value:C,onChange:function(e){return A(e.target.value)},disabled:o,children:(0,s.jsx)(X.View,{gap:6,children:t.options.map(function(e,t){return(0,s.jsxs)("label",{className:nK.default.radioOption,children:[(0,s.jsx)(X.View,{pt:2,children:(0,s.jsx)(nW.Radio,{id:"".concat(g,"-").concat(t),name:g,value:e})}),(0,s.jsx)(J.Text,{shrink:!0,children:e})]},e)})})}),(0,s.jsx)(n0,{id:x,disabled:o,defaultValue:b,onChange:function(e){R(e),C&&f({responseType:{$kind:"choiceResponse",choiceResponse:{response:C,reason:e}}})}}),(0,s.jsx)(n1,{onCancel:function(){var e;r(),null==(e=h.current)||e.reset(),k(!1),j(""),R("")},onNavigateBack:a,isLoading:o,isLastQuestion:u,isFirstQuestion:c,hasResponse:_,isInMobileWorkspace:p})]})})}function nJ(e){var t=e.query,n=e.onSubmit,r=e.onCancel,a=e.onNavigateBack,o=e.isResponseInProgress,u=e.isLastQuestion,c=e.isFirstQuestion,d=e.savedResponse,f=e.onUpdateResponse,p=e.isInMobileWorkspace,h=(0,l.useRef)(null),m=(0,l.useId)(),g="text-response-".concat(m),x=d&&(0,e1.isKind)(d.responseType,"textResponse")?d.responseType.textResponse.response:"",y=(0,i._)((0,l.useState)(""!==x.trim()),2),b=y[0],w=y[1],_=(0,l.useCallback)(function(){if(!h.current)return{responseType:{$kind:"noResponse",noResponse:{}}};var e=new FormData(h.current).get(g);return e&&"string"==typeof e&&""!==e.trim()?{responseType:{$kind:"textResponse",textResponse:{response:e}}}:{responseType:{$kind:"noResponse",noResponse:{}}}},[g]);return(0,s.jsx)(nz.Form,{ref:h,onSubmit:function(e){e.preventDefault(),n(_())},tabIndex:0,onKeyDown:function(e){if(nY(e)&&!o){var t;e.preventDefault(),e.stopPropagation(),null==(t=h.current)||t.requestSubmit()}},children:(0,s.jsxs)(X.View,{gap:8,children:[(0,s.jsx)(nq.default,{children:t.question}),(0,s.jsx)(ed.MultiLineInput,{clsx:nK.default.multilineInput,autoSize:!0,name:g,placeholder:t.responsePlaceholderText||"Type here",disabled:o,defaultValue:x,onChange:function(e){var t=e.target.value,n=!!(t&&t.trim().length>0);w(n),n?f({responseType:{$kind:"textResponse",textResponse:{response:t}}}):f({responseType:{$kind:"noResponse",noResponse:{}}})}}),(0,s.jsx)(n1,{onCancel:function(){var e;r(),null==(e=h.current)||e.reset(),w(!1)},onNavigateBack:a,isLoading:o,isLastQuestion:u,isFirstQuestion:c,hasResponse:b,isInMobileWorkspace:p})]})})}function n0(e){var t=e.id,n=e.disabled,r=e.defaultValue,i=e.onChange;return(0,s.jsxs)("label",{clsx:nK.default.reasonField,htmlFor:t,children:[(0,s.jsxs)(X.View,{gap:4,row:!0,align:"center",justify:"space-between",children:[(0,s.jsx)(J.Text,{color:"dimmer",children:"Additional comments"}),(0,s.jsx)(J.Text,{color:"dimmest",children:"Optional"})]}),(0,s.jsx)(ed.MultiLineInput,{clsx:nK.default.multilineInput,autoSize:!0,name:t,placeholder:"Type here",rows:1,disabled:n,defaultValue:r,onChange:i?function(e){return i(e.target.value)}:void 0})]})}function n1(e){var t,n=e.onCancel,r=e.onNavigateBack,i=e.isLoading,a=e.isLastQuestion,o=e.isFirstQuestion,l=e.hasResponse,u=e.isInMobileWorkspace,c=o?void 0:(0,s.jsx)(nF.default,{}),d="Skip";return i?d=u?"Sending to Agent":"Sending":a?d=u?"Send to Agent":"Send":l&&(d="Next"),t=i?void 0:a?u?(0,s.jsx)(h.default,{}):(0,s.jsx)(nH.CmdOrCtrlEnterComboIcon,{}):(0,s.jsx)(nU.default,{}),(0,s.jsxs)(X.View,{clsx:nK.default.responseSubmissionRow,row:!0,gap:8,justify:"end",children:[(0,s.jsx)(eu.Button,{clsx:nK.default.button,text:o?"Dismiss":"Back",onClick:o?n:r,disabled:i,iconLeft:c}),(0,s.jsx)(eu.Button,{clsx:nK.default.button,text:d,type:"submit",disabled:i,colorway:a||l?"primary":void 0,iconRight:t,loading:i})]})}e.s(["AgentQueryResponseDialog",()=>nQ],331151)},826630,e=>{e.v({button:"AgentRequestBanner-module__0KFzQG__button"})},298122,e=>{e.v({budgetButton:"BudgetExceededMessage-module__hpXgQq__budgetButton",buttonContainer:"BudgetExceededMessage-module__hpXgQq__buttonContainer",root:"BudgetExceededMessage-module__hpXgQq__root",text:"BudgetExceededMessage-module__hpXgQq__text"})},811029,e=>{e.v({button:"BuildScoreSurveyDialog-module__5JMOga__button",closeIcon:"BuildScoreSurveyDialog-module__5JMOga__closeIcon",headerRow:"BuildScoreSurveyDialog-module__5JMOga__headerRow",responseSubmissionRow:"BuildScoreSurveyDialog-module__5JMOga__responseSubmissionRow",root:"BuildScoreSurveyDialog-module__5JMOga__root",satisfactionLevelText:"BuildScoreSurveyDialog-module__5JMOga__satisfactionLevelText",starButton:"BuildScoreSurveyDialog-module__5JMOga__starButton",starIcon:"BuildScoreSurveyDialog-module__5JMOga__starIcon"})},404710,e=>{e.v({upgradeButton:"FastModeStarterBanner-module__DT_KaW__upgradeButton"})},483730,e=>{e.v({countryNoteRow:"AddingIntegrationDialog-module__pgpjZW__countryNoteRow",countryNoteText:"AddingIntegrationDialog-module__pgpjZW__countryNoteText",grow1:"AddingIntegrationDialog-module__pgpjZW__grow1",grow3:"AddingIntegrationDialog-module__pgpjZW__grow3",messageContainer:"AddingIntegrationDialog-module__pgpjZW__messageContainer"})},590986,e=>{e.v({container:"AccordionGroup-module__VPmG_G__container",item:"AccordionGroup-module__VPmG_G__item"})},260328,e=>{e.v({accordionContainer:"MultiIntegrationDialog-module__U7u0oG__accordionContainer",accordionHeader:"MultiIntegrationDialog-module__U7u0oG__accordionHeader",connectedBadge:"MultiIntegrationDialog-module__U7u0oG__connectedBadge",dialog:"MultiIntegrationDialog-module__U7u0oG__dialog",grow1:"MultiIntegrationDialog-module__U7u0oG__grow1",grow3:"MultiIntegrationDialog-module__U7u0oG__grow3"})},9238,e=>{e.v({tryFastButton:"FooterQuickEditPromoBanner-module__qUq3ia__tryFastButton"})},347748,e=>{e.v({benefitIcon:"FreemiumQuotaExceeded-module__yYQXSW__benefitIcon",benefitItem:"FreemiumQuotaExceeded-module__yYQXSW__benefitItem",body:"FreemiumQuotaExceeded-module__yYQXSW__body",header:"FreemiumQuotaExceeded-module__yYQXSW__header",longMessage:"FreemiumQuotaExceeded-module__yYQXSW__longMessage",root:"FreemiumQuotaExceeded-module__yYQXSW__root",shortMessage:"FreemiumQuotaExceeded-module__yYQXSW__shortMessage"})},926961,e=>{e.v({checkIcon:"FreemiumQuotaExceededModal-module__b9gffa__checkIcon"})},851480,702069,946223,225637,59730,926617,579048,18056,66081,492008,472625,754071,e=>{"use strict";var t,n=e.i(530658),r=e.i(276385),i=e.i(389959),a=e.i(986194),o=e.i(96250),s=e.i(416746),l=e.i(993796),u=e.i(387457),c=e.i(140487),d=e.i(136540),f=e.i(604963),p=e.i(960178),h=e.i(625484),m=e.i(826630);function g(e){var t=e.requestType,g=e.context,x=e.eventId,y=e.onAnswerNow,b=e.onDismiss,w=function(e,t){switch(e){case"queryRequest":var n=null!=(r=null==t?void 0:t.numQueries)?r:1;if(1===n){var r,i,o=null==t||null==(i=t.queries)?void 0:i[0];if(o){if((0,a.isKind)(o.queryType,"booleanQuery")){var s=o.queryType.booleanQuery.question,l=s.length>60?s.substring(0,60)+"":s;return"Agent asks: ".concat(l)}if((0,a.isKind)(o.queryType,"choiceQuery")){var u=o.queryType.choiceQuery.question,c=u.length>60?u.substring(0,60)+"":u;return"Agent asks: ".concat(c)}if((0,a.isKind)(o.queryType,"textQuery")){var d=o.queryType.textQuery.question,f=d.length>60?d.substring(0,60)+"":d;return"Agent asks: ".concat(f)}}return"Agent has a question for you"}return"Agent has ".concat(n," questions for you");case"approveTaskListRequest":return"Agent has a task list ready for approval";case"approveBlueprintRequest":return"Agent has a blueprint ready for approval";default:return"Agent has a request for you"}}(t,g),_=function(e){switch(e){case"queryRequest":default:return"Answer now";case"approveTaskListRequest":case"approveBlueprintRequest":return"Review now"}}(t),k=(0,l.useFlag)({controlName:"flag-agent-debug-info-button"}),S=(0,n._)((0,i.useState)(!1),2),C=S[0],j=S[1];return(0,r.jsx)(u.FooterBanner,{leftElement:(0,r.jsx)(o.default,{size:20}),text:w,actions:(0,r.jsxs)(h.View,{row:!0,gap:4,shrink:0,align:"center",children:[k?(0,r.jsxs)(f.PopoverTrigger,{isOpen:C,onOpenChange:j,placement:"top",label:"Deferred Action Request Debug Info",children:[(0,r.jsx)(d.IconButton,{alt:"Show debug info",tooltipBehavior:"hidden",children:(0,r.jsx)(s.default,{})}),(0,r.jsxs)(h.View,{gap:8,p:12,style:{maxWidth:400},children:[(0,r.jsx)(p.Text,{variant:"subheadDefault",children:"[STAFF] Deferred Action Request Info"}),(0,r.jsxs)(h.View,{gap:4,children:[(0,r.jsx)(p.Text,{variant:"small",color:"dimmer",children:"Type:"}),(0,r.jsx)(p.Text,{variant:"small",style:{fontFamily:"monospace"},children:t})]}),(0,r.jsxs)(h.View,{gap:4,children:[(0,r.jsx)(p.Text,{variant:"small",color:"dimmer",children:"Event ID:"}),(0,r.jsx)(p.Text,{variant:"small",style:{fontFamily:"monospace",wordBreak:"break-all"},children:x||"N/A"})]}),g?(0,r.jsxs)(h.View,{gap:4,children:[(0,r.jsx)(p.Text,{variant:"small",color:"dimmer",children:"Context:"}),(0,r.jsx)(p.Text,{variant:"small",style:{fontFamily:"monospace",wordBreak:"break-all"},children:JSON.stringify(g,null,2)})]}):null]})]}):null,(0,r.jsx)(c.Button,{clsx:m.default.button,text:"Dismiss",size:"small",onClick:b}),(0,r.jsx)(c.Button,{clsx:m.default.button,text:_,size:"small",colorway:"primary",onClick:y})]})})}e.s(["AgentRequestBanner",()=>g],851480);var x=e.i(40916),y=e.i(207237),b=e.i(878420),w=e.i(569384),_=e.i(973245),k=e.i(304277);e.i(566901);var S=e.i(696683);function C(){var e=(0,w._)(["\n  query WorkspaceUsageBudget($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          ... on Org {\n            id\n            authorizations {\n              editUsageLimit {\n                isAuthorized\n                message\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return C=function(){return e},e}function j(){var e=(0,w._)(["\n  query WorkspaceUsageBasedBillingAlerts($orgId: String) {\n    currentUser {\n      id\n      usageBasedBillingAlerts {\n        ...EditUsageBasedBillingAlertsFormInitialConfig\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          name\n          usageBasedBillingAlerts {\n            ...EditUsageBasedBillingAlertsFormInitialConfig\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return j=function(){return e},e}var T={},E=(0,_.gql)(C()),R=(0,_.gql)(j(),S.EditUsageBasedBillingAlertsFormInitialConfigFragmentDoc),I=e.i(342008),A=e.i(605526),P=e.i(201411),D=e.i(446530),O=e.i(613355),N=e.i(396776),M=(0,D.cssRecord)({budgetContainer:[O.rcss.colWithGap(8),O.rcss.border(),O.rcss.borderRadius(8),O.rcss.p(8)],budgetContainerBorderless:[O.rcss.colWithGap(8),O.rcss.p(8)],bannerText:[O.rcss.textAlign.left]});function L(e){var t,n,i,a,o,s,l,u,c,d,f=e.replId,p=e.onUpdateSuccess,m=e.style,g=(t={variables:{replId:f}},n=(0,b._)({},T,t),k.useQuery(E,n)),x=g.data,y=g.loading,w=g.error,_=(0,A.useOrgId)(f).orgId,S=(i={variables:{orgId:_}},a=(0,b._)({},T,i),k.useQuery(R,a)),C=S.data,j=S.loading,D=S.error;if(!x||!C||y||j)return null;if(_?(s=(null==(l=C.currentUser)?void 0:l.org.__typename)==="Org"?null==(u=C.currentUser)?void 0:u.org:void 0,o=(null==(c=C.currentUser)?void 0:c.org.__typename)==="Org"&&"UsageBasedBillingAlertsConfig"===C.currentUser.org.usageBasedBillingAlerts.__typename?C.currentUser.org.usageBasedBillingAlerts:void 0):o=(null==(d=C.currentUser)?void 0:d.usageBasedBillingAlerts.__typename)==="UsageBasedBillingAlertsConfig"?C.currentUser.usageBasedBillingAlerts:void 0,w)return(0,r.jsx)(N.StatusBanner,{css:M.bannerText,colorway:"red",text:w.message,icon:(0,r.jsx)(I.default,{})});if(D)return(0,r.jsx)(N.StatusBanner,{css:M.bannerText,colorway:"red",text:D.message,icon:(0,r.jsx)(I.default,{})});var O="Repl"===x.getRepl.__typename&&x.getRepl.org?x.getRepl.org:void 0,L=(null==O?void 0:O.authorizations.editUsageLimit.isAuthorized)===!1?O.authorizations.editUsageLimit.message:void 0;return L?(0,r.jsx)(N.StatusBanner,{css:M.bannerText,colorway:"red",text:"".concat(L," Reach out to an org admin to update your usage budget."),icon:(0,r.jsx)(I.default,{})}):(0,r.jsx)(h.View,{css:"outlined"===(void 0===m?"outlined":m)?M.budgetContainer:M.budgetContainerBorderless,children:(0,r.jsx)(P.EditUsageBasedBillingAlertsForm,{org:s,initialSettings:o,onDone:function(){return p}})})}e.s(["UsageBudget",()=>L],702069);var B=e.i(173703),V=e.i(739521),F=e.i(298122);function U(e){var t=e.runAgent,a=(0,y.default)(),o=(0,n._)((0,i.useState)(!1),2),s=o[0],l=o[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(B.ShadesSurface,{clsx:F.default.root,gap:4,p:8,children:[(0,r.jsxs)(p.Text,{clsx:F.default.text,children:["You've hit the monthly budget. Increase your usage budget to continue using the Agent."," "]}),(0,r.jsx)(h.View,{clsx:F.default.buttonContainer,row:!0,children:(0,r.jsx)(c.Button,{clsx:F.default.budgetButton,iconLeft:(0,r.jsx)(x.default,{}),text:"Increase budget",onClick:function(){return l(!0)},variant:void 0})})]}),(0,r.jsx)(V.Modal,{isOpen:s,onRequestClose:function(){return l(!1)},children:(0,r.jsx)(L,{style:"borderless",replId:a,onUpdateSuccess:function(){l(!1),t()}})})]})}e.s(["BudgetExceededMessage",()=>U],946223);var G=e.i(297083),$=e.i(817556),H=e.i(368964);e.i(877212);var z=e.i(924908),W=e.i(602686),q=e.i(232949),K=e.i(15720),Y=e.i(960933),Q="...[TRUNCATED]";function X(e){return!e||e.length<=500?e:e.substring(0,500-Q.length)+Q}Y.Type.Union([Y.Type.Object({blueprintsUsed:Y.Type.Optional(Y.Type.Array(Y.Type.String())),connectorsUsed:Y.Type.Optional(Y.Type.Array(Y.Type.String())),initialPromptText:Y.Type.Optional(Y.Type.String()),stackBlueprintUsed:Y.Type.Optional(Y.Type.Number()),latestUserMessageText:Y.Type.Optional(Y.Type.String()),numAgentGitCommits:Y.Type.Optional(Y.Type.Number()),replTotalAgentUsageCents:Y.Type.Optional(Y.Type.Number()),isWebDesignMockup:Y.Type.Optional(Y.Type.Boolean()),followUpHeader:Y.Type.Optional(Y.Type.String()),followUpQuestion:Y.Type.Optional(Y.Type.String()),followUpAnswer:Y.Type.Optional(Y.Type.String())}),Y.Type.Null(),Y.Type.Undefined()]);var Z=e.i(142365),J=e.i(664152),ee=e.i(858248),et=e.i(709485),en=e.i(64386),er=e.i(951262);function ei(){var e=(0,w._)(["\n  mutation BuildScoreSurvey($input: BuildScoreSurveyResponseInput!) {\n    buildScoreSurvey(input: $input) {\n      __typename\n      ... on CurrentUser {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return ei=function(){return e},e}function ea(){var e=(0,w._)(["\n  query hasCompletedBuildScoreSurveyForTrigger(\n    $trigger: BuildScoreSurveyTriggerPoint!\n  ) {\n    currentUser {\n      id\n      hasCompletedBuildScoreSurveyForTrigger(trigger: $trigger)\n    }\n  }\n"]);return ea=function(){return e},e}var eo={},es=(0,_.gql)(ei()),el=(0,_.gql)(ea()),eu=e.i(58261),ec=e.i(222342),ed=e.i(374106),ef=e.i(82259);e.i(925218);var ep=e.i(641555),eh={direction:"reverse",state:{latestUserMessageText:void 0,currentSessionId:void 0},map:function(e){return{latestUserMessageText:X(e.latestUserMessageText),currentSessionId:e.currentSessionId}},reducer:function(e,t){if(t.currentSessionId||(t.currentSessionId=e.sessionId),(0,ed.isEventContentsKind)(e,"messageEventContents")&&e.sender.type===ef.UserType.USER){var n=e.contents.contents;return t.latestUserMessageText=(0,a.unkind)(n).content,!1}}},em={direction:"forward",state:{initialPromptText:void 0,latestPlanContents:void 0,approvedPlanContents:void 0,initialSessionId:void 0},map:function(e){var t,n;return{initialPromptText:X(e.initialPromptText),stackBlueprintUsed:null==(t=e.latestPlanContents)?void 0:t.stackBlueprint,blueprintsUsed:null==(n=e.latestPlanContents)?void 0:n.step.blueprintData,initialSessionId:e.initialSessionId}},reducer:function(e,t){if(t.initialSessionId||(t.initialSessionId=e.sessionId),(0,ed.isEventContentsKind)(e,"messageEventContents")&&e.sender.type===ef.UserType.USER){var n=e.contents.contents,r=(0,a.unkind)(n);t.initialPromptText||(t.initialPromptText=r.content)}if((0,ed.isEventContentsKind)(e,"agentPlanEventContents")&&(t.latestPlanContents=e.contents.contents.agentPlanEventContents),(0,ed.isEventContentsKind)(e,"approvePlanEventContents")&&(t.approvedPlanContents=t.latestPlanContents),(0,ed.isEventAgentToolDataKind)(e,"commitData"))return!1}},eg=e.i(231346),ev=e.i(423111);function ex(e){var t,r,a,o,s,l,u,c,d,f=(0,ec.default)(),p=f.showError,h=f.showConfirm,m=(t=(0,z.useChatter)(),r=(0,ep.useObservableMemo)(function(){return t.sessions.agent.all.list.select(function(e){return e[e.length-1]})},[t.sessions],{default:void 0}),(0,ep.useObservableMemo)(function(){return null==r?void 0:r.reduce(em,100)},[r],{default:void 0})),g=(a=(0,z.useChatter)(),o=(0,ep.useObservableMemo)(function(){return a.sessions.agent.current},[a]),(0,ep.useObservableMemo)(function(){return null==o?void 0:o.reduce(eh,100)},[o])),x=(0,y.default)(),w=(0,eu.useConnectorContext)().connections.filter(function(e){var t;return null==(t=e.repls)?void 0:t.some(function(e){return e.id===x})}).map(function(e){return e.connectorName}),_=(s={skip:void 0===e,variables:{trigger:e}},l=(0,b._)({},eo,s),k.useQuery(el,l)),S=_.data,C=_.loading,j=(0,n._)((u={refetchQueries:[{query:el,variables:{trigger:e}}]},c=(0,b._)({},eo,u),er.useMutation(es,c)),2),T=j[0],E=j[1].loading,R=!!(null==S||null==(d=S.currentUser)?void 0:d.hasCompletedBuildScoreSurveyForTrigger),I=(0,i.useCallback)(function(t){return(0,G._)(function(){var n;return(0,$._)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,T({variables:{input:{replId:t.replId||null,responseScore:t.score,trigger:e,headerText:t.headerText,questionText:t.questionText,context:(0,en._)((0,b._)({},null!=m?m:{},null!=g?g:{}),{connectorsUsed:w,numAgentGitCommits:t.numAgentGitCommits,replTotalAgentUsageCents:t.replTotalAgentUsageCents,isWebDesignMockup:t.isWebDesignMockup,followUpHeader:t.followUpHeader,followUpQuestion:t.followUpQuestion,followUpAnswer:t.followUpAnswer}),agentSettings:t.agentSettings}}})];case 1:return r.sent(),null!==t.score&&h("Survey submitted successfully"),[3,3];case 2:throw n=r.sent(),J.logger.error("Failed to submit build score survey",{error:n}),p("Failed to submit survey."),n;case 3:return[2]}})})()},[T,e,h,p,m,g,w]);return(0,i.useMemo)(function(){return{isLoading:C,isCompleted:R,submitSurvey:I,isSubmitting:E}},[C,R,I,E])}function ey(){var e=(0,ev.useIsPublishClickedCompleted)(),t=(0,ev.useShouldShowRandomCheckpointSurvey)(),n=(0,ev.useIsFirstCheckpointCompleted)(),r=(0,eg.useIsCurrentSessionInitialAgentSession)();return e?H.BuildScoreSurveyTriggerPoint.PublishClicked:t?H.BuildScoreSurveyTriggerPoint.RandomCheckpoint:n&&r?H.BuildScoreSurveyTriggerPoint.FirstCheckpoint:void 0}e.s(["useBuildScoreSurvey",()=>ex,"useCurrentSurveyTrigger",()=>ey],225637);var eb=e.i(45442),ew=e.i(509908),e_=e.i(287999),ek=e.i(76961),eS=e.i(607278),eC=e.i(811029),ej=function(e){return"followUp"===e?"Help us make Replit better for you":"How did Agent do?"},eT=function(e,t){return"followUp"===t?"Could you share your thoughts on what could have been better?":e===H.BuildScoreSurveyTriggerPoint.PublishClicked?"How would you rate your experience with Agent?":e===H.BuildScoreSurveyTriggerPoint.FirstCheckpoint||e===H.BuildScoreSurveyTriggerPoint.RandomCheckpoint?"How would you rate the agent's performance on the last task?":""},eE=((t=eE||{}).VeryDissatisfied="Very Dissatisfied",t.Dissatisfied="Dissatisfied",t.SomewhatSatisfied="Somewhat Satisfied",t.Satisfied="Satisfied",t.VerySatisfied="Very Satisfied",t),eR={1:"Very Dissatisfied",2:"Dissatisfied",3:"Somewhat Satisfied",4:"Satisfied",5:"Very Satisfied"};function eI(e){var t=e.score,n=e.isFilled,i=e.onClick,a=e.onMouseEnter,o=e.onMouseLeave,s=e.disabled;return(0,r.jsx)("button",{type:"button",className:eC.default.starButton,onClick:function(){return i(t)},onMouseEnter:function(){return a(t)},onMouseLeave:o,disabled:void 0!==s&&s,"aria-label":"Rate ".concat(t," out of 5"),children:n?(0,r.jsx)(K.default,{className:eC.default.starIcon,size:24}):(0,r.jsx)(q.default,{className:eC.default.starIcon,size:24})})}function eA(e){var t=e.activeScore,n=e.onClick,i=e.onMouseEnter,a=e.onMouseLeave,o=e.disabled,s=void 0!==o&&o;return(0,r.jsx)(h.View,{row:!0,gap:20,align:"center",justify:"center",children:[1,2,3,4,5].map(function(e){var o=null!==t&&e<=t;return(0,r.jsx)(eI,{score:e,isFilled:o,onClick:n,onMouseEnter:i,onMouseLeave:a,disabled:s},e)})})}function eP(e){var t=e.activeScore;return(0,r.jsx)(h.View,{row:!0,justify:"center",clsx:eC.default.satisfactionLevelText,children:t?(0,r.jsx)(p.Text,{children:eR[t]}):null})}function eD(){var e=(0,n._)((0,i.useState)(null),2),t=e[0],a=e[1],o=(0,n._)((0,i.useState)(null),2),s=o[0],l=o[1],u=(0,n._)((0,i.useState)(!1),2),d=u[0],f=u[1],m=(0,n._)((0,i.useState)("rating"),2),g=m[0],x=m[1],y=(0,n._)((0,i.useState)(""),2),b=y[0],w=y[1],_=(0,ew.getAnalyticsMetadata)(),k=_.isMobile,S=_.isBonsai,C=_.replId,j=(0,eb.useAgentSettings)(),T=j.loading,E=(0,e_.useNumCheckpointsCompleted)(),R=(0,z.useChatter)(),I=(0,ek.useIsAgentWebDesignMockup)().isWebDesignMockup,A=function(){return(0,G._)(function(){var e;return(0,$._)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,R.usage().once()];case 1:return[2,t.sent().cents];case 2:return e=t.sent(),J.logger.warn("Failed to fetch agent usage for build score survey",e),[2,void 0];case 3:return[2]}})})()},P=ey(),D=ex(P),O=D.isLoading,N=D.isCompleted,M=D.submitSurvey,L=D.isSubmitting,V=!!P&&!N&&!O;if((0,Z.useTrackEffectWithPredicate)(et.events.BUILD_SCORE_SURVEY,{action:"viewed",repl_id:C,trigger:P,is_mobile:k,is_bonsai:S},function(){return V},[C,k,S,P,V]),(0,i.useEffect)(function(){V||(a(null),l(null),f(!1),x("rating"),w(""))},[V]),!V)return null;var F=function(){return(0,G._)(function(){var e;return(0,$._)(this,function(n){switch(n.label){case 0:if(T)return[2];return[4,A()];case 1:if(e=n.sent(),"followUp"===g)return M({replId:C,score:t,headerText:ej("rating"),questionText:eT(P,"rating"),followUpHeader:ej("followUp"),followUpQuestion:eT(P,"followUp"),followUpAnswer:"",numAgentGitCommits:E,replTotalAgentUsageCents:e,isWebDesignMockup:I,agentSettings:j.settings}),[2];return M({replId:C,score:null,headerText:ej("rating"),questionText:eT(P,"rating"),numAgentGitCommits:E,replTotalAgentUsageCents:e,isWebDesignMockup:I,agentSettings:j.settings}),[2]}})})()},U=null!=s?s:t;return(0,r.jsxs)(B.ShadesSurface,{clsx:eC.default.root,gap:18,children:[(0,r.jsx)(h.View,{row:!0,justify:"space-between",align:"start",children:(0,r.jsxs)(h.View,{gap:6,clsx:eC.default.headerRow,children:[(0,r.jsxs)(h.View,{row:!0,justify:"space-between",align:"center",children:[(0,r.jsx)(p.Text,{children:(0,r.jsx)("strong",{children:ej(g)})}),(0,r.jsx)(W.default,{onClick:F,"aria-label":"Close",clsx:eC.default.closeIcon})]}),(0,r.jsx)(p.Text,{children:eT(P,g)})]})}),"rating"===g?(0,r.jsxs)(h.View,{gap:6,children:[(0,r.jsx)(eA,{activeScore:U,onClick:function(e){a(e)},onMouseEnter:function(e){l(e)},onMouseLeave:function(){l(null)},disabled:L||d}),(0,r.jsx)(eP,{activeScore:U})]}):(0,r.jsxs)(h.View,{gap:6,children:[(0,r.jsx)(eS.MultiLineInput,{value:b,onChange:function(e){return w(e.target.value)},placeholder:"Share your thoughts...",disabled:L||d,autoSize:!0,maxLength:500}),(0,r.jsx)(h.View,{row:!0,justify:"end",children:(0,r.jsxs)(p.Text,{variant:"small",color:"dimmer",multiline:!1,children:[b.length," / ",500]})})]}),(0,r.jsx)(h.View,{clsx:eC.default.responseSubmissionRow,row:!0,gap:8,justify:"center",children:d?(0,r.jsx)(h.View,{row:!0,justify:"center",clsx:eC.default.thankYouMessage,children:(0,r.jsx)(p.Text,{color:"dimmest",children:"Thank you for your feedback!"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Button,{clsx:eC.default.button,text:"Cancel",onClick:F,disabled:L}),(0,r.jsx)(c.Button,{clsx:eC.default.button,text:"Confirm",type:"submit",onClick:function(){return(0,G._)(function(){var e;return(0,$._)(this,function(n){switch(n.label){case 0:if(T)return[2];return[4,A()];case 1:if(e=n.sent(),"rating"===g&&t){if(t<=3)return x("followUp"),[2];f(!0),M({replId:C,score:t,headerText:ej("rating"),questionText:eT(P,"rating"),numAgentGitCommits:E,replTotalAgentUsageCents:e,isWebDesignMockup:I,agentSettings:j.settings})}else"followUp"===g&&(f(!0),M({replId:C,score:t,headerText:ej("rating"),questionText:eT(P,"rating"),followUpHeader:ej("followUp"),followUpQuestion:eT(P,"followUp"),followUpAnswer:b,numAgentGitCommits:E,replTotalAgentUsageCents:e,isWebDesignMockup:I,agentSettings:j.settings}));return[2]}})})()},colorway:"primary",disabled:"rating"===g?!t||L:!b.trim()||L})]})})]})}e.s(["BuildScoreSurveyDialog",()=>eD],59730);var eO=e.i(629536),eN=e.i(731145),eM=e.i(596139);e.i(653863);var eL=e.i(973519),eB=e.i(443394),eV=e.i(480028),eF=e.i(404710);function eU(e){var t=e.onDismiss,n=(0,eL.useGlobalModal)().show,i=(0,eB.getCurrentUrl)();return(0,r.jsxs)(B.ShadesSurface,{width:"100%",py:4,px:4,row:!0,justify:"space-between",align:"center",children:[(0,r.jsxs)(h.View,{row:!0,align:"center",gap:8,grow:!0,shrink:!0,children:[(0,r.jsx)(B.ShadesSurface,{colorShade:"warning",p:4,br:4,children:(0,r.jsx)(eN.default,{color:eV.tokens.yellowStronger})}),(0,r.jsx)(h.View,{grow:!0,shrink:!0,children:(0,r.jsxs)(p.Text,{variant:"small",children:["Fast mode enabled."," ",(0,r.jsx)(c.Button,{clsx:eF.default.upgradeButton,text:"Upgrade to ".concat(eM.corePlanName," for a smarter ").concat(eO.AGENT_NAME),variant:"underlinedOnHover",size:"xsmall",onClick:function(){n("MembershipPurchaseModal",{analyticsContext:{upgrade:{context:"agent_fast_mode_in_use_upsell"}},redirectPath:i,headingText:"Upgrade to ".concat(eM.corePlanName)})}})]})})]}),(0,r.jsx)(d.IconButton,{alt:"Close",tooltipBehavior:"hidden",size:24,onClick:t,children:(0,r.jsx)(W.default,{size:16})})]})}e.s(["FastModeStarterBanner",()=>eU],926617);var eG=e.i(968783),e$=e.i(492267),eH=e.i(26857),ez=e.i(721281),eW=e.i(183035),eq=e.i(712903),eK=e.i(255701),eY=e.i(90319),eQ=e.i(416298),eX=e.i(839575),eZ=e.i(624782),eJ=e.i(211397),e0=e.i(483730),e1=(0,ez._)({},H.ConnectorName.Stripe,"A connection already exists for this app. Manage it to check health, update settings, or remove it to create a new one."),e2=(0,ez._)({},H.ConnectorName.Stripe,(0,r.jsxs)(h.View,{gap:8,children:[(0,r.jsx)(p.Text,{children:"Get started with a Stripe sandbox to test your payments functionality. Create products and test transactions directly from Replit."}),(0,r.jsx)(function(){return(0,r.jsxs)(h.View,{row:!0,gap:4,align:"start",clsx:e0.default.countryNoteRow,children:[(0,r.jsx)(eQ.default,{size:16}),(0,r.jsxs)(p.Text,{clsx:e0.default.countryNoteText,variant:"small",color:"dimmer",children:["Stripe is not available in all countries. Check"," ",(0,r.jsx)("a",{href:"https://stripe.com/global",target:"_blank",rel:"noopener noreferrer",children:"supported regions"})," ","before publishing the app."]})]})},{})]}));let e3=function(e){var t,n,a,o,s,u=e.onDismiss,d=e.onConnect,f=e.requestedConnectorIds,m=e.existingConnectorConfigs,g=e.requestedConnections,x=e.existingConnections,y=e.replId,b=e.showBetaBadge,w=e.isLoading,_=void 0!==w&&w,k=(0,e$.useIsAgentStackRepl)(),S=g.length>0,C=m.find(function(e){return e.id===f[0]}),j=x.find(function(e){return e.connectionId===g[0]}),T=S?null==j?void 0:j.displayName:null==C?void 0:C.displayName,E=S?null==j?void 0:j.iconPath:null==C?void 0:C.iconPath,R=S?null==j?void 0:j.connectorName:null==C?void 0:C.connectorName,I=!!R&&R===H.ConnectorName.Stripe&&!!y&&x.some(function(e){var t;return e.connectorName===H.ConnectorName.Stripe&&(null==(t=e.repls)?void 0:t.some(function(e){return e.id===y}))}),A=(t=R,n=T,a=S,I?t&&t in e1?null!=(o=e1[t])?o:"":"A".concat(n?" ".concat(n):""," connection already exists for this app. Manage it to check health, update settings, or remove it to create a new one."):a?"I see you have the".concat(n?" ".concat(n):""," connection active on your account. Would you like to use this connection?"):t&&t in e2?null!=(s=e2[t])?s:null:"".concat(n?"Let's connect to ".concat(n,". "):"","Set up the connection now? You can also configure this later by asking Replit Agent or using the integrations pane."));(0,i.useEffect)(function(){R&&S?(0,ee.track)(et.events.CONNECTION_CREATION_SUGGESTED,{connectorName:R}):R&&!S&&(0,ee.track)(et.events.CONNECTION_SUGGESTED,{connectorName:R})},[R,S]);var P=function(){if(!y||!R)return null;var e=R.toLowerCase();return"/integrations/".concat(e,"/apps/").concat(y)},D=(0,eG.useCurrentUserStoredOrgContext)(),O=D.orgId,N=D.loading,M=(0,eu.useConnectorContext)(),L=M.isSubscribed,B=M.loading,V=(0,eL.useGlobalModal)().show,F=(0,eB.getCurrentUrl)(),U=(0,l.useFlag)({controlName:"flag-free-plan",default:!1}),z=!N&&!B&&!L&&void 0===O;return(0,r.jsxs)(eX.ChatTakeoverDialog,{children:[(0,r.jsxs)(h.View,{row:!0,justify:"space-between",align:"center",children:[(0,r.jsxs)(h.View,{row:!0,gap:8,align:"center",children:[E?(0,r.jsx)(eJ.default,{src:null!=E?E:"",alt:null!=T?T:"",width:24,height:24}):null,(0,r.jsxs)(p.Text,{children:["Connect"," ",T?"to ".concat(T):"with integration"]})]}),void 0!==b&&b?(0,r.jsx)(eZ.Pill,{text:"Beta",colorway:"primary",compact:!0}):null]}),(0,r.jsx)(h.View,{pb:4,pl:2,clsx:e0.default.messageContainer,children:"string"==typeof A?(0,r.jsx)(p.Text,{children:A}):A}),(0,r.jsxs)(h.View,{row:!0,gap:8,children:[(0,r.jsx)(c.Button,{className:e0.default.grow1,text:"Dismiss",disabled:_,onClick:function(){R&&(S?(0,ee.track)(et.events.CONNECTION_SUGGESTION_RESPONDED,{connectorName:R,didAccept:!1,isAgentStackRepl:k}):(0,ee.track)(et.events.CONNECTION_CREATION_SUGGESTION_RESPONDED,{connectorName:R,didAccept:!1,isAgentStackRepl:k})),u(f)}}),I?(0,r.jsx)(c.Button,{className:e0.default.grow3,colorway:"primary",text:"Manage connection",iconLeft:(0,r.jsx)(eK.default,{}),disabled:_||!y,onClick:function(){var e=P();e&&(R&&(0,ee.track)(et.events.CONNECTION_SUGGESTION_RESPONDED,{connectorName:R,didAccept:!0,isAgentStackRepl:k}),window.open(e,"_blank"))}}):(0,r.jsx)(c.Button,{className:e0.default.grow3,colorway:"primary",text:z?"Upgrade to connect":S?"Continue with connection":R===H.ConnectorName.Stripe?"Yes, proceed":"Connect".concat(T?" ".concat(T):""),iconLeft:z?(0,r.jsx)(eq.default,{}):S?(0,r.jsx)(eW.default,{}):(0,r.jsx)(eY.default,{}),loading:_,disabled:_,onClick:function(){return(0,G._)(function(){return(0,$._)(this,function(e){switch(e.label){case 0:if(!z)return[3,2];return[4,(0,G._)(function(){return(0,$._)(this,function(e){switch(e.label){case 0:if(!U)return[3,2];return[4,V("UpgradeEducationModal",{context:"ai_chat_upsell",surface:"agent_chat",highlightedFeature:"connectors"})];case 1:return e.sent(),[3,4];case 2:return[4,V("MembershipPurchaseModal",{headingText:"Connect to ".concat(null!=T?T:"integration"),analyticsContext:{upgrade:{context:"ai_chat_upsell"}},redirectPath:F})];case 3:e.sent(),e.label=4;case 4:return[2]}})})()];case 1:return e.sent(),[3,4];case 2:return[4,d()];case 3:e.sent(),e.label=4;case 4:return[2]}})})()}})]})]})};function e5(e){var t=e.session,a=e.addingIntegrationsRequest,o=(0,eG.useCurrentUserStoredOrgContext)().orgId,s=(0,eH.useSendAskUserForActionResponse)(t),l=(0,eL.useGlobalModal)().show,u=(0,eu.useConnectorContext)(),c=u.token,d=u.connectorConfigs,f=u.connections,p=u.createConnection,h=u.createConnectionLoading,m=u.refetch,g=(0,y.default)(),x=(0,e$.useIsAgentStackRepl)(),b=(0,n._)((0,i.useState)(!1),2),w=b[0],_=b[1],k=(0,i.useCallback)(function(e,t){(null==a?void 0:a.eventId)&&(s({type:"addingIntegrationsResponse",requestEventId:a.eventId,rejectedConnectorIds:e,connectionIds:[]}),(0,ee.track)(et.events.CONNECTION_CREATION_SUGGESTION_RESPONDED,{connectorName:null!=t?t:void 0,didAccept:!1,isAgentStackRepl:x}),_(!1))},[s,a,x]),S=(null==a?void 0:a.content)||{},C=S.connectorIds,j=void 0===C?[]:C,T=S.connectionIds,E=void 0===T?[]:T,R=(0,i.useCallback)(function(e){(null==a?void 0:a.eventId)&&(s({type:"addingIntegrationsResponse",requestEventId:a.eventId,connectionIds:[e.connectionId],rejectedConnectorIds:[]}),(0,ee.track)(et.events.CONNECTION_SUGGESTION_RESPONDED,{connectorName:e.connectorName,didAccept:!0,isAgentStackRepl:x}),_(!1))},[a,s,x]),I=(0,i.useCallback)(function(e,t,n,r){return(0,G._)(function(){var i,u,d,f;return(0,$._)(this,function(h){switch(h.label){case 0:if(!(null==a?void 0:a.eventId))return[2];if((0,ee.track)(et.events.CONNECTION_SETUP_STARTED,{surface:"chat",connectorName:t}),"STRIPE"!==t)return[3,3];return[4,p({variables:{input:{connectorConfigId:e,settings:{},replId:g,orgId:o,environment:"development"}}})];case 1:return u=h.sent(),[4,m()];case 2:return h.sent(),(f=(null==(d=null==(i=u.data)?void 0:i.createConnection)?void 0:d.__typename)==="CreateConnection"?d.connectionId:null)&&(s({type:"addingIntegrationsResponse",requestEventId:a.eventId,connectionIds:[f],rejectedConnectorIds:[]}),(0,ee.track)(et.events.CONNECTION_CREATION_SUGGESTION_RESPONDED,{connectorName:t,didAccept:!0,isAgentStackRepl:x})),_(!1),[2];case 3:if(!("api_key"===n&&r))return[3,5];return[4,l("ConnectorApiKeySetupModal",{connector:r,onComplete:function(){return(0,G._)(function(){var e,n,i,l,u;return(0,$._)(this,function(c){switch(c.label){case 0:return[4,m()];case 1:if(!(n=c.sent()).data||!(null==a?void 0:a.eventId))return[2];if(i=[],(null==(e=n.data.currentUser)?void 0:e.__typename)==="CurrentUser"){if("connectorContext"in n.data.currentUser&&"CurrentUserConnectorContext"===n.data.currentUser.connectorContext.__typename)i=null!=(l=n.data.currentUser.connectorContext.connections)?l:[];else if("org"in n.data.currentUser&&"Org"===n.data.currentUser.org.__typename)return J.logger.error("Org connection config suggested in workspace",{connectorConfig:r,orgId:o,connectorName:t}),k([r.id],r.connectorName),[2]}return(u=i.find(function(e){return e.connectorName===r.connectorName}))&&(s({type:"addingIntegrationsResponse",requestEventId:a.eventId,connectionIds:[u.connectionId],rejectedConnectorIds:[]}),r.connectorName&&(0,ee.track)(et.events.CONNECTION_CREATION_SUGGESTION_RESPONDED,{connectorName:r.connectorName,didAccept:!0,isAgentStackRepl:x}),_(!1)),[2]}})})()},onCancel:function(){r.connectorName&&k([r.id],r.connectorName)}})];case 4:case 6:return h.sent(),[2];case 5:return[4,l("ConnectionEmbedModal",{token:null!=c?c:void 0,connectorId:e,connectorName:null!=t?t:void 0,onEvent:function(e){return(0,G._)(function(){return(0,$._)(this,function(n){switch(n.label){case 0:if("connect.connection-connected"!==e.name)return[3,3];return[4,p({variables:{input:{connectionId:e.data.connection_id,orgId:null!=o?o:null}}})];case 1:return n.sent(),[4,m()];case 2:n.sent(),e.data.connection_id&&a.eventId&&(s({type:"addingIntegrationsResponse",requestEventId:a.eventId,connectionIds:[e.data.connection_id],rejectedConnectorIds:[]}),t&&(0,ee.track)(et.events.CONNECTION_CREATION_SUGGESTION_RESPONDED,{connectorName:t,didAccept:!0,isAgentStackRepl:x}),_(!1)),n.label=3;case 3:return[2]}})})()}})]}})})()},[a,p,o,l,c,m,s,x,g,k]),A=(0,i.useCallback)(function(){return(0,G._)(function(){var e,t,n,r,i,o,s,l,u,c,d,f,p,h,g;return(0,$._)(this,function(x){switch(x.label){case 0:if(!(null==a?void 0:a.eventId))return[2];return _(!0),[4,m()];case 1:if(!(t=x.sent()).data)return _(!1),[2];if(n=[],r=[],(null==(e=t.data.currentUser)?void 0:e.__typename)==="CurrentUser"&&("connectorContext"in t.data.currentUser&&"CurrentUserConnectorContext"===t.data.currentUser.connectorContext.__typename?(n=null!=(i=t.data.currentUser.connectorContext.connectorConfigs)?i:[],r=null!=(o=t.data.currentUser.connectorContext.connections)?o:[]):"org"in t.data.currentUser&&"Org"===t.data.currentUser.org.__typename&&"OrgConnectorContext"===t.data.currentUser.org.connectorContext.__typename&&(n=null!=(s=t.data.currentUser.org.connectorContext.connectorConfigs)?s:[],r=null!=(l=t.data.currentUser.org.connectorContext.connections)?l:[])),E.length>0){if(d=E[0],f=r.find(function(e){return e.connectionId===d}))return R(f),[2];if(p=null==(c=d.split("_")[1])?void 0:c.toUpperCase(),!(u=n.find(function(e){return e.connectorName===p})))return k([d],p),[2]}else if(!(j.length>0))return k([]),[2];else if(h=j[0],!(u=n.find(function(e){return e.id===h})))return k([h]),[2];if((null==(g=r.find(function(e){return e.connectorName===u.connectorName}))?void 0:g.connectorName)!=="STRIPE"&&g)return R(g),[2];return[4,I(u.id,u.connectorName,u.type,u)];case 2:return x.sent(),[2]}})})()},[a,m,j,E,k,R,I]);return(0,r.jsx)(e3,{onDismiss:k,onConnect:A,existingConnections:f,requestedConnectorIds:j,requestedConnections:E,existingConnectorConfigs:d,replId:g,isLoading:h||w})}e.s(["FooterAddIntegration",()=>e5],579048);var e4=e.i(830675),e8=e.i(652172),e6=e.i(526017),e7=e.i(178496),e9=e.i(581554),te=e.i(269848),tt=e.i(882793),tn=e.i(346715),tr=e.i(907371),ti=e.i(590986),ta=(0,i.createContext)(null);function to(e){var t=e.allowMultipleExpanded,a=void 0!==t&&t,o=e.children,s=e.className,l=e.defaultExpandedKeys,u=void 0===l?[]:l,c=e.expandedKeys,d=e.onExpandedChange,f=void 0!==c,p=(0,n._)((0,i.useState)(function(){return a||u.length<=1?u:[u[0]]}),2),h=p[0],m=p[1],g=f?c:h,x=(0,i.useMemo)(function(){return a||g.length<=1?g:[g[0]]},[g,a]),y=(0,i.useCallback)(function(e){var t;t=x.includes(e)?x.filter(function(t){return t!==e}):a?(0,tn._)(x).concat([e]):[e],f||m(t),null==d||d(t)},[x,a,f,d]),b=(0,i.useMemo)(function(){return{allowMultipleExpanded:a,expandedKeys:x,toggleKey:y}},[a,x,y]);return(0,r.jsx)(ta.Provider,{value:b,children:(0,r.jsx)(B.ShadesSurface,{className:s,clsx:ti.default.container,children:o})})}to.Item=function(e){var t=e.id,n=e.header,a=e.children,o=e.className,s=function(){var e=(0,i.useContext)(ta);if(!e)throw Error("AccordionGroup compound components must be used within AccordionGroup");return e}(),l=s.expandedKeys,u=s.toggleKey,c=l.includes(t),d=(0,tr.useCreateInteractive)({variant:"nofill"});return(0,r.jsxs)(h.View,{className:o,clsx:ti.default.item,children:[(0,r.jsx)(h.View,(0,en._)((0,b._)({role:"button",tabIndex:0},d),{onClick:function(){return u(t)},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(e.preventDefault(),u(t))},"aria-expanded":c,"aria-controls":"accordion-panel-".concat(t),id:"accordion-header-".concat(t),children:"function"==typeof n?n({isExpanded:c}):n})),c?(0,r.jsx)(h.View,{id:"accordion-panel-".concat(t),role:"region","aria-labelledby":"accordion-header-".concat(t),children:a}):null]})};var ts=e.i(260328);let tl=function(e){var t=e.items,a=e.onApproveAll,o=e.onDismissAll,s=e.onApproveSingle,l=e.onDismissSingle,u=e.onComplete,d=e.showApproveAll,f=(0,ec.default)().showError,m=(0,n._)((0,i.useState)(function(){var e=new Map;return t.forEach(function(t){e.set(t.id,{status:"pending",isLoading:!1})}),e}),2),g=m[0],x=m[1],y=t.filter(function(e){var t;return(null==(t=g.get(e.id))?void 0:t.status)!=="dismissed"}),b=(0,i.useCallback)(function(e,t){return(0,G._)(function(){var n;return(0,$._)(this,function(r){switch(r.label){case 0:x(function(t){var n=new Map(t);return n.set(e,{status:"pending",isLoading:!0}),n}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,s(t)];case 2:return"success"===(n=r.sent()).status?x(function(t){var n=new Map(t);return n.set(e,{status:"approved",isLoading:!1}),n}):"cancelled"===n.status?x(function(t){var n=new Map(t);return n.set(e,{status:"pending",isLoading:!1}),n}):(f("Failed to connect to integration."),x(function(t){var n=new Map(t);return n.set(e,{status:"dismissed",isLoading:!1}),n})),[3,4];case 3:return r.sent(),f("Failed to connect to integration."),x(function(t){var n=new Map(t);return n.set(e,{status:"dismissed",isLoading:!1}),n}),[3,4];case 4:return[2]}})})()},[s,f]),w=(0,i.useCallback)(function(e){x(function(t){var n=new Map(t);return n.set(e,{status:"dismissed",isLoading:!1}),n}),l()},[l]);(0,i.useEffect)(function(){0!==t.length&&t.every(function(e){var t=g.get(e.id);return t&&("approved"===t.status||"dismissed"===t.status)})&&u(t.filter(function(e){var t;return(null==(t=g.get(e.id))?void 0:t.status)==="approved"}).map(function(e){return e.id}),t.filter(function(e){var t;return(null==(t=g.get(e.id))?void 0:t.status)==="dismissed"}).map(function(e){return e.id}))},[g,t,u]);var _=(0,i.useMemo)(function(){if(1===y.length)return[y[0].id];var e=y.find(function(e){return"connectorConfig"===e.itemType});return e?[e.id]:[]},[y]);return(0,r.jsx)(h.View,{gap:12,children:(0,r.jsxs)(B.ShadesSurface,{clsx:ts.default.dialog,gap:12,elevate:!1,children:[(0,r.jsxs)(h.View,{gap:8,children:[(0,r.jsxs)(h.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(e9.default,{size:16}),(0,r.jsx)(p.Text,{children:"Integrations"})]}),(0,r.jsx)(p.Text,{textWrap:"pretty",variant:"small",color:"dimmer",children:"To connect your App to these external services, you need to set up or approve the following integrations."})]}),(0,r.jsx)(h.View,{clsx:ts.default.accordionContainer,children:(0,r.jsx)(to,{allowMultipleExpanded:!1,defaultExpandedKeys:_,children:y.map(function(e){var t,n=g.get(e.id),i=(null==n?void 0:n.status)==="approved",a=null!=(t=null==n?void 0:n.isLoading)&&t,o=null;return i?o="Approved":"connection"===e.itemType&&(o="Connected"),(0,r.jsx)(to.Item,{id:e.id,header:function(t){var n=t.isExpanded;return(0,r.jsxs)(h.View,{clsx:ts.default.accordionHeader,gap:12,p:8,children:[(0,r.jsxs)(h.View,{row:!0,gap:8,align:"center",children:[e.iconPath?(0,r.jsx)(e8.default,{src:e.iconPath,alt:e.displayName,width:20,height:20}):null,(0,r.jsx)(p.Text,{multiline:!1,children:e.displayName})]}),(0,r.jsxs)(h.View,{row:!0,gap:8,align:"center",children:[o?(0,r.jsxs)(h.View,{row:!0,gap:6,align:"center",clsx:ts.default.connectedBadge,children:[i?(0,r.jsx)(eW.default,{size:16,color:"green"}):null,(0,r.jsx)(p.Text,{variant:"small",color:"dimmer",children:o})]}):null,n?(0,r.jsx)(e6.default,{size:16}):(0,r.jsx)(e7.default,{size:16})]})]})},children:(0,r.jsxs)(h.View,{gap:4,px:8,pb:8,children:[(0,r.jsx)(p.Text,{color:"dimmer",textWrap:"pretty",children:tt.CONNECTOR_DESCRIPTIONS[e.connectorName]||"Approve to integrate ".concat(e.displayName," into your App.")}),i?null:(0,r.jsxs)(h.View,{row:!0,gap:8,justify:"end",children:[(0,r.jsx)(h.View,{clsx:ts.default.grow1,children:(0,r.jsx)(c.Button,{text:"Dismiss",variant:"nofill",onClick:function(){return w(e.id)},disabled:a,stretch:!0})}),(0,r.jsx)(h.View,{clsx:ts.default.grow3,children:(0,r.jsx)(c.Button,{text:"Approve",colorway:"primary",onClick:function(){return b(e.id,e)},iconLeft:a?(0,r.jsx)(te.default,{}):(0,r.jsx)(eW.default,{}),disabled:a,stretch:!0})})]})]})},e.id)})})}),y.length>1?(0,r.jsxs)(h.View,{row:!0,gap:8,justify:"end",align:"center",children:[(0,r.jsx)(c.Button,{text:"Dismiss all",size:"small",variant:"nofill",onClick:o}),d?(0,r.jsx)(c.Button,{text:"Approve all",colorway:"primary",iconLeft:(0,r.jsx)(eW.default,{}),onClick:a}):null]}):null]})})};function tu(e){var t=e.session,n=e.addingIntegrationsRequest,a=(0,eG.useCurrentUserStoredOrgContext)().orgId,o=(0,eH.useSendAskUserForActionResponse)(t),s=(0,eL.useGlobalModal)().show,l=(0,eu.useConnectorContext)(),u=l.token,c=l.connectorConfigs,d=l.connections,f=l.createConnection,p=l.refetch,h=(0,y.default)(),m=(0,e$.useIsAgentStackRepl)(),g=(null==n?void 0:n.content)||{},x=g.connectorIds,b=void 0===x?[]:x,w=g.connectionIds,_=void 0===w?[]:w,k=(0,i.useMemo)(function(){var e=[];return b.forEach(function(t){var n,r,i,a,o=c.find(function(e){return e.id===t});o&&e.push({id:o.id,displayName:null!=(r=null!=(n=o.displayName)?n:o.connectorName)?r:"",iconPath:null!=(i=o.iconPath)?i:null,connectorName:null!=(a=o.connectorName)?a:"",itemType:"connectorConfig",type:o.type,connectorConfig:o})}),_.forEach(function(t){var n,r,i=d.find(function(e){return e.connectionId===t});i&&e.push({id:i.connectionId,displayName:i.displayName,iconPath:null!=(n=i.iconPath)?n:null,connectorName:i.connectorName,itemType:"connection",type:null!=(r=i.type)?r:null})}),e},[b,_,c,d]),S=(0,i.useMemo)(function(){return k.every(function(e){return"connection"===e.itemType})},[k]),C=(0,i.useCallback)(function(e,t,r,i){return(0,G._)(function(){var o,l,c,d;return(0,$._)(this,function(g){switch(g.label){case 0:if(!(null==n?void 0:n.eventId))return[2,{status:"failed"}];if((0,ee.track)(et.events.CONNECTION_SETUP_STARTED,{surface:"chat",connectorName:t}),"STRIPE"!==t)return[3,3];if(!h)throw Error("replId is required for Stripe Sandbox connection");return[4,f({variables:{input:{connectorConfigId:e,settings:{},replId:h,orgId:a,environment:"development"}}})];case 1:return l=g.sent(),[4,p()];case 2:if(g.sent(),d=(null==(c=null==(o=l.data)?void 0:o.createConnection)?void 0:c.__typename)==="CreateConnection"?c.connectionId:null)return(0,ee.track)(et.events.CONNECTION_CREATION_SUGGESTION_RESPONDED,{connectorName:t,didAccept:!0,isAgentStackRepl:m}),[2,{status:"success",connectionId:d}];return[2,{status:"failed"}];case 3:if("api_key"===r&&i)return[2,new Promise(function(e){s("ConnectorApiKeySetupModal",{connector:i,onComplete:function(){return(0,G._)(function(){var r,o,s,l,u;return(0,$._)(this,function(c){switch(c.label){case 0:return[4,p()];case 1:if(!(o=c.sent()).data||!(null==n?void 0:n.eventId))return e({status:"failed"}),[2];if(s=[],(null==(r=o.data.currentUser)?void 0:r.__typename)==="CurrentUser"){if("connectorContext"in o.data.currentUser&&"CurrentUserConnectorContext"===o.data.currentUser.connectorContext.__typename)s=null!=(l=o.data.currentUser.connectorContext.connections)?l:[];else if("org"in o.data.currentUser&&"Org"===o.data.currentUser.org.__typename)return J.logger.error("Org connection config suggested in workspace",{connectorConfig:i,orgId:a,connectorName:t}),e({status:"failed"}),[2]}return(u=s.find(function(e){return e.connectorName===i.connectorName}))?((0,ee.track)(et.events.CONNECTION_CREATION_SUGGESTION_RESPONDED,{connectorName:i.connectorName,didAccept:!0,isAgentStackRepl:m}),e({status:"success",connectionId:u.connectionId})):e({status:"failed"}),[2]}})})()},onCancel:function(){e({status:"cancelled"})}})})];return[2,new Promise(function(n){s("ConnectionEmbedModal",{token:null!=u?u:void 0,connectorId:e,connectorName:null!=t?t:void 0,onEvent:function(e){return(0,G._)(function(){return(0,$._)(this,function(r){switch(r.label){case 0:if("connect.connection-connected"!==e.name)return[3,3];return[4,f({variables:{input:{connectionId:e.data.connection_id,orgId:null!=a?a:null}}})];case 1:return r.sent(),[4,p()];case 2:r.sent(),e.data.connection_id?((0,ee.track)(et.events.CONNECTION_CREATION_SUGGESTION_RESPONDED,{connectorName:null!=t?t:void 0,didAccept:!0,isAgentStackRepl:m}),n({status:"success",connectionId:e.data.connection_id})):n({status:"cancelled"}),r.label=3;case 3:return[2]}})})()},onCancel:function(){n({status:"cancelled"})}})})]}})})()},[n,f,a,s,u,p,m,h]),j=(0,i.useCallback)(function(){if(null==n?void 0:n.eventId){var e=k.map(function(e){return e.id});o({type:"addingIntegrationsResponse",requestEventId:n.eventId,rejectedConnectorIds:e,connectionIds:[]}),(0,ee.track)(et.events.CONNECTION_CREATION_SUGGESTION_RESPONDED,{didAccept:!1,isAgentStackRepl:m})}},[n,k,o,m]),T=(0,i.useCallback)(function(){if(null==n?void 0:n.eventId){var e=k.map(function(e){return e.id});o({type:"addingIntegrationsResponse",requestEventId:n.eventId,rejectedConnectorIds:[],connectionIds:e}),(0,ee.track)(et.events.CONNECTION_CREATION_SUGGESTION_RESPONDED,{didAccept:!0,isAgentStackRepl:m})}},[n,k,o,m]),E=(0,i.useCallback)(function(e){return(0,G._)(function(){var t;return(0,$._)(this,function(n){switch(n.label){case 0:if(n.trys.push([0,3,,4]),"connection"===e.itemType)return[2,{status:"success"}];if(!("connectorConfig"===e.itemType&&e.connectorConfig))return[3,2];return[4,C(e.connectorConfig.id,e.connectorConfig.connectorName,e.connectorConfig.type,e.connectorConfig)];case 1:return[2,{status:n.sent().status}];case 2:return[2,{status:"failed"}];case 3:return t=n.sent(),e4.captureException(t,{tags:{component:"FooterAddMultiIntegrations",action:"onApproveSingle"},extra:{itemId:e.id,itemType:e.itemType,connectorName:e.connectorName}}),[2,{status:"failed"}];case 4:return[2]}})})()},[C]),R=(0,i.useCallback)(function(){(0,ee.track)(et.events.CONNECTION_CREATION_SUGGESTION_RESPONDED,{didAccept:!1,isAgentStackRepl:m})},[m]),I=(0,i.useCallback)(function(e,t){(null==n?void 0:n.eventId)&&(o({type:"addingIntegrationsResponse",requestEventId:n.eventId,rejectedConnectorIds:t,connectionIds:e}),(0,ee.track)(et.events.CONNECTION_CREATION_SUGGESTION_RESPONDED,{didAccept:e.length>0,isAgentStackRepl:m}))},[n,o,m]);return(0,r.jsx)(tl,{items:k,onApproveAll:T,onDismissAll:j,onApproveSingle:E,onDismissSingle:R,onComplete:I,showApproveAll:S})}e.s(["FooterAddMultiIntegrations",()=>tu],18056);var tc=e.i(418725),td=e.i(9238);function tf(e){var t=e.onDismiss,n=e.onTryFast;return(0,r.jsx)(u.FooterBanner,{leftElement:(0,r.jsx)(d.IconButton,{alt:"Close",tooltipBehavior:"hidden",size:24,onClick:t,children:(0,r.jsx)(W.default,{size:16})}),text:"Quick, lightweight changes free for a limited time!",actions:(0,r.jsx)(h.View,{row:!0,gap:4,shrink:0,children:(0,r.jsx)(c.Button,{text:"Try Fast",size:"small",colorway:"yellow",iconLeft:(0,r.jsx)(eN.default,{size:16}),clsx:td.default.tryFastButton,onClick:n})})})}function tp(){return(0,r.jsx)(u.FooterBanner,{text:"You're in fast mode, upgrade for a smarter Agent",actions:(0,r.jsx)(tc.default,{text:"Upgrade to ".concat(eM.corePlanName),context:"agent_fast_mode_in_use_upsell",colorway:"primary",variant:"default",size:"small"})})}function th(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u.FooterBanner,{text:"You're in fast mode, upgrade for a smarter Agent",actions:(0,r.jsx)(tc.default,{text:"Upgrade to ".concat(eM.corePlanName),context:"agent_fast_mode_free_promo_upsell",colorway:"primary",variant:"default"})})})}e.s(["FooterQuickEditInFastModeUpsellBanner",()=>tp,"FooterQuickEditPromoBanner",()=>tf,"FooterQuickEditUpsellBanner",()=>th],66081);var tm=e.i(706323),tg=e.i(210796),tv=e.i(319855),tx=e.i(441329),ty=e.i(51389),tb=e.i(257811),tw=e.i(425283),t_=e.i(347748);function tk(e){var t=e.extraAction,n=e.nextCreditsAt,i=(0,tx.useIsInBonsaiWebview)(),a=(0,tw.useCouponOfferDetails)(),o=(0,eB.getCurrentUrl)(),s=null!=n&&"countdown"===(0,tb.toCountdownDate)({date:n}).type,l=(0,ty.useSubscriptionPlanInfo)({planPrefix:"hacker_pro",planPeriod:"monthly"}).costInUsdCents,u=(0,ty.useSubscriptionPlanInfo)({planPrefix:"hacker_pro",planPeriod:"yearly"}).costInUsdCents,d=(null==a?void 0:a.monthlyPrice)!=null&&null!=l?Math.max(0,l-a.monthlyPrice):null,f=(null==a?void 0:a.yearlyPrice)!=null&&null!=u?Math.max(0,u-a.yearlyPrice):null,m=null!=d?d:f,g=(0,eL.useGlobalModal)().show,x=m&&!i?"Upgrade now (".concat((0,tv.displayCentsAsDollars)(m)," off)"):"Upgrade now";return(0,r.jsxs)(B.ShadesSurface,{clsx:t_.default.root,children:[(0,r.jsxs)(h.View,{clsx:t_.default.header,row:!0,align:"center",gap:8,pt:8,pb:8,pl:8,children:[(0,r.jsx)(eq.default,{size:16}),(0,r.jsxs)(p.Text,{children:["Upgrade to ",eM.corePlanName]})]}),(0,r.jsxs)(h.View,{clsx:t_.default.body,gap:8,px:24,pt:16,pb:24,children:[(0,r.jsx)(h.View,{clsx:t_.default.longMessage,children:(0,r.jsxs)(p.Text,{color:"dimmer",children:["You've reached your ",eM.freePlanName," usage limit. Upgrade to"," ",eM.corePlanName," to make, launch, and scale your apps."]})}),(0,r.jsx)(h.View,{clsx:t_.default.shortMessage,children:(0,r.jsx)(p.Text,{color:"dimmer",children:"You've reached your usage limit"})}),(0,r.jsxs)(h.View,{clsx:t_.default.benefitItem,row:!0,align:"center",gap:8,children:[(0,r.jsx)(tm.default,{clsx:t_.default.benefitIcon}),(0,r.jsx)(p.Text,{children:"Monthly credits for Replit Agent"})]}),(0,r.jsxs)(h.View,{clsx:t_.default.benefitItem,row:!0,align:"center",gap:8,children:[(0,r.jsx)(tg.default,{clsx:t_.default.benefitIcon}),(0,r.jsx)(p.Text,{children:"Publish and host unlimited live Apps"})]}),(0,r.jsxs)(h.View,{clsx:t_.default.benefitItem,row:!0,align:"center",gap:8,children:[(0,r.jsx)(e9.default,{clsx:t_.default.benefitIcon}),(0,r.jsx)(p.Text,{children:"Build more, such as Mobile Apps and Automations"})]}),(0,r.jsxs)(h.View,{width:"100%",gap:8*!!t,pt:8,children:[t,(0,r.jsx)(c.Button,{text:x,iconLeft:(0,r.jsx)(eq.default,{}),onClick:function(){return(0,G._)(function(){return(0,$._)(this,function(e){switch(e.label){case 0:return[4,g("MembershipPurchaseModal",{analyticsContext:{upgrade:{context:"agent_freemium_quota_v2"}},redirectPath:o,headingText:"Upgrade to continue building",subHeadingText:"Get more credits and unlock the full power of Replit with ".concat(eM.corePlanName)})];case 1:return e.sent(),[2]}})})()},colorway:"primary",variant:"default"})]}),s?(0,r.jsxs)(h.View,{align:"center",pt:8,gap:3,justify:"center",row:!0,children:[(0,r.jsxs)(p.Text,{variant:"text",multiline:!0,textAlign:"center",children:["Free credits will resume in"," "]}),(0,r.jsx)(tb.Timestamp,{date:n,dateFormat:"countdown",live:!0})]}):null]})]})}e.s(["FreemiumQuotaExceeded",()=>tk],492008);var tS=e.i(761273),tC=e.i(91720),tj=e.i(197283),tT=e.i(926961),tE=["Monthly credits for Replit Agent","Smarter and more autonomous Agent","Publish and host your apps"];function tR(e){var t=e.isOpen,n=e.onDismiss,i=(0,tS.useBreakpoint)("mobileMax"),a=(0,eB.getCurrentUrl)(),o=(0,ty.useSubscriptionPlanInfo)({planPrefix:"hacker_pro",planPeriod:"monthly"}).costInUsdCents,s=(0,tj.getCheckoutUrl)({planPeriod:"monthly",source:"freemium_exhausted_modal",successRedirectPath:a,cancelRedirectPath:a});return(0,r.jsx)(V.Modal,{isOpen:t,onRequestClose:function(){n()},maxWidth:480,centered:!0,children:(0,r.jsxs)(h.View,{gap:i?16:24,p:i?16:24,children:[(0,r.jsxs)(h.View,{gap:8,children:[(0,r.jsx)(p.Header,{level:2,variant:"headerDefault",children:"Daily limit reached"}),(0,r.jsxs)(p.Text,{color:"dimmer",multiline:!0,children:["You've used today's free credits. Upgrade to ",eM.corePlanName," to keep building!"]})]}),(0,r.jsxs)(B.ShadesSurface,{colorShade:"default",p:i?12:16,br:8,gap:i?12:16,children:[(0,r.jsxs)(h.View,{row:!0,gap:8,align:"baseline",children:[(0,r.jsx)(p.Header,{level:3,variant:i?"headerDefault":"headerBig",children:null!=o?(0,tv.displayCentsAsDollars)(o):"$25"}),(0,r.jsx)(p.Text,{color:"dimmer",children:"per month"})]}),(0,r.jsx)(h.View,{gap:i?8:12,children:tE.map(function(e){return(0,r.jsxs)(h.View,{row:!0,gap:8,align:"start",children:[(0,r.jsx)(h.View,{shrink:!1,children:(0,r.jsx)(eW.default,{clsx:tT.default.checkIcon,size:16})}),(0,r.jsx)(p.Text,{multiline:!0,children:e})]},e)})})]}),(0,r.jsx)(tC.ButtonLink,{text:"Upgrade",colorway:"primary",iconLeft:(0,r.jsx)(eq.default,{}),href:s,onClick:function(){(0,ee.track)(et.events.AGENT_USED,{action:"freemium_exhausted_modal_upgrade_clicked"}),(0,ee.track)(et.events.STRIPE_CHECKOUT_PAGE_VIEWED,{planPeriod:"monthly",planName:eM.corePlanName,surface:"freemium_exhausted_modal",context:"freemium_exhausted_modal"})}})]})})}function tI(){var e=(0,eB.getCurrentUrl)(),t=(0,tj.getCheckoutUrl)({planPeriod:"monthly",source:"freemium_exhausted_banner",successRedirectPath:e,cancelRedirectPath:e});return(0,Z.useTrackEffect)(et.events.AGENT_USED,{action:"freemium_exhausted_banner_shown"}),(0,r.jsx)(B.ShadesSurface,{width:"100%",py:4,px:4,row:!0,justify:"space-between",align:"center",children:(0,r.jsxs)(h.View,{row:!0,align:"center",gap:8,grow:!0,shrink:!0,children:[(0,r.jsx)(B.ShadesSurface,{colorShade:"warning",p:4,br:4,children:(0,r.jsx)(eq.default,{color:eV.tokens.yellowStronger})}),(0,r.jsx)(h.View,{grow:!0,shrink:!0,children:(0,r.jsxs)(p.Text,{variant:"small",children:["You're out of credits."," ",(0,r.jsx)(c.Button,{clsx:eF.default.upgradeButton,text:"Upgrade to ".concat(eM.corePlanName),variant:"underlinedOnHover",size:"xsmall",onClick:function(){(0,ee.track)(et.events.AGENT_USED,{action:"freemium_exhausted_banner_upgrade_clicked"}),(0,ee.track)(et.events.STRIPE_CHECKOUT_PAGE_VIEWED,{planPeriod:"monthly",planName:eM.corePlanName,surface:"freemium_exhausted_banner",context:"freemium_exhausted_banner"}),window.location.href=t}})]})})]})})}e.s(["FreemiumQuotaExceededModal",()=>tR],472625),e.s(["QuotaExceededBanner",()=>tI],754071)},132694,e=>{e.v({root:"RecoveryModeFooterDialog-module__grO4Qa__root"})},20399,130764,285591,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(173703),i=e.i(960178),a=e.i(550801),o=e.i(132694);function s(e){var s=e.nixError,l=e.openPane,u=(0,n.useCallback)(function(e){l({type:"codeEditor",data:{path:e}})},[l]);return"rebuilding-after-error"===s.status?(0,t.jsx)(r.ShadesSurface,{clsx:o.default.root,p:8,gap:6,children:(0,t.jsx)(i.Header,{variant:"subheadDefault",level:3,children:"The nix environment is rebuilding"})}):(0,t.jsx)(r.ShadesSurface,{clsx:o.default.root,p:8,gap:6,children:(0,t.jsx)(a.NixIsBrokenModalContent,{openFile:u,nixError:s})})}e.s(["RecoveryModeFooterDialog",()=>s],20399);var l=e.i(374106),u=e.i(986194);e.i(925218);var c=e.i(641555),d={direction:"reverse",state:{eventId:null,content:null},map:function(e){return e.content?{eventId:e.eventId,content:e.content}:null},reducer:function(e,t){if((0,l.isEventContentsKind)(e,"agentAskUserForActionResponse")){var n=(0,u.unkind)(e.contents.contents).response;if(n&&(0,u.isKind)(n,"addingIntegrationsResponse"))return!1}if((0,l.isEventContentsKind)(e,"agentAskUserForActionRequest")){var r=(0,u.unkind)(e.contents.contents).request;if(r&&(0,u.isKind)(r,"addingIntegrationRequest")){var i=r.addingIntegrationRequest;return t.eventId=e.id,t.content={connectorIds:i.connectorIds||[],connectionIds:i.connectionIds||[]},!1}}}};function f(e){return(0,c.useObservableMemo)(function(){return null==e?void 0:e.reduce(d,50)},[e],{default:null})}e.s(["useAddingIntegrationsRequest",()=>f],130764);var p=e.i(530658),h=e.i(368964),m=e.i(82259),g=e.i(207237),x=e.i(142365),y=e.i(858248),b=e.i(709485),w=e.i(943565);function _(e){var t=e.sessionError,r=e.transitionReason,i=e.agentAuthz,a=e.freeAgentUsageLoading,o=e.isUnderQuota,s=e.shouldSeeFreemiumExperience,l=(0,w.useExperimentParam)("freemium_exhausted_modal_instead_of_chat_takeover","group","chatTakeover"),u=(0,p._)((0,n.useState)(!1),2),c=u[0],d=u[1],f=(0,p._)((0,n.useState)(!1),2),_=f[0],k=f[1],S=(0,g.default)();(0,n.useEffect)(function(){d(!1),k(!1)},[S]);var C=(null==t?void 0:t.type)===m.EventErrorType.AI_QUOTA_ERROR_UNKNOWN||(null==t?void 0:t.type)===m.EventErrorType.AI_QUOTA_INSUFFICIENT_BUDGET||(null==t?void 0:t.type)===m.EventErrorType.AI_QUOTA_NO_PAYMENT_METHOD||(null==t?void 0:t.type)===m.EventErrorType.AI_QUOTA_NO_SUBSCRIPTION,j=!(null==i?void 0:i.paidAgent.isAuthorized)&&(null==i?void 0:i.paidAgent.code)===h.OrgAuthorizationCode.InsufficientBudget,T=(null==r?void 0:r.$kind)==="authorizationFailed"&&r.code===m.AgentAuthorizationFailedCode.INSUFFICIENT_BUDGET,E=!(null==i?void 0:i.freeAgent.isAuthorized)&&(null==i?void 0:i.freeAgent.code)===h.OrgAuthorizationCode.InsufficientQuota,R=(null==r?void 0:r.$kind)==="authorizationFailed"&&r.code===m.AgentAuthorizationFailedCode.INSUFFICIENT_QUOTA,I=E||R,A=I||!!(!a&&s&&!o),P=(null==r?void 0:r.$kind)==="authorizationFailed"||(null==t?void 0:t.type)===m.EventErrorType.AI_QUOTA_ERROR_UNKNOWN||(null==t?void 0:t.type)===m.EventErrorType.AI_QUOTA_INSUFFICIENT_BUDGET||(null==t?void 0:t.type)===m.EventErrorType.AI_QUOTA_NO_PAYMENT_METHOD||(null==t?void 0:t.type)===m.EventErrorType.AI_QUOTA_NO_SUBSCRIPTION,D=A||"Modal"===l&&s&&P||"Modal"===l&&!!(!a&&!1===o),O=D&&"Modal"===l,N=O&&(!c||_);return(0,x.useTrackEffectWithPredicate)(b.events.AGENT_USED,{action:"freemium_exhausted_modal_shown"},function(){return N},[N]),{isModalExperimentEnabled:O,shouldShowQuotaModal:N,isQuotaModalDismissed:c,handleQuotaModalDismiss:(0,n.useCallback)(function(){(0,y.track)(b.events.AGENT_USED,{action:"freemium_exhausted_modal_dismissed"}),d(!0),k(!1)},[]),handleQuotaExceededRetrySubmit:(0,n.useCallback)(function(){k(!0)},[]),isQuotaError:C,experimentGroup:l,isQuotaExceededOriginal:A,isQuotaExceeded:D,shouldShowBudgetExceededMessage:j||T,shouldShowQuotaExceededMessage:I}}e.s(["useFreemiumQuotaExceededModal",()=>_],285591)},960791,e=>{e.v({root:"GuestUnauthorizedDialogs-module__cfXoWq__root"})},913811,267473,53617,398462,644881,547450,e=>{"use strict";var t=e.i(389959),n=e.i(541793),r=e.i(924908),i=(0,n.atom)(!1),a=function(){return(0,r.useValue)(i)},o=function(){return(0,r.useSet)(i)},s=(0,n.atom)(null),l=function(){return(0,r.useValue)(s)},u=function(){return(0,r.useSet)(s)},c=function(){return null!==(0,r.useValue)(s)};(0,n.atom)(new Set),e.s(["useEditingQueueItemId",()=>l,"useIsEditingQueueItem",()=>c,"useQueueIsOpen",()=>a,"useSetEditingQueueItemId",()=>u,"useSetQueueIsOpen",()=>o],913811);var d=e.i(297083),f=e.i(817556),p=e.i(276385),h=e.i(712903),m=e.i(596139),g=e.i(973519),x=e.i(530658),y=e.i(830675),b=e.i(878420),w=e.i(569384),_=e.i(973245),k=e.i(951262);function S(){var e=(0,w._)(["\n  mutation StartViktorForRepl($input: StartViktorForReplInput!) {\n    startViktor(input: $input) {\n      ... on StartViktorForReplResult {\n        success\n      }\n    }\n  }\n"]);return S=function(){return e},e}var C={},j=(0,_.gql)(S()),T=e.i(222342),E=e.i(207237),R=e.i(443394),I=e.i(446530),A=e.i(173703),P=e.i(613355),D=e.i(140487),O=e.i(960178),N=e.i(625484),M=(0,I.cssRecord)({root:[P.rcss.borderRadius()],buttonContainer:[P.rcss.width("100%"),P.rcss.justify.center],upgradeButton:[P.rcss.width("60%")]});function L(e){var n,r,i,a,o,s,l,u=e.aiName,c=(0,g.useGlobalModal)().show,w=(n=(0,E.default)(),i=(r=(0,T.default)()).showConfirm,a=r.showError,s=(0,x._)((o=(0,b._)({},C,void 0),k.useMutation(j,o)),1)[0],l=(0,t.useCallback)(function(e){if((null==e?void 0:e.startViktor)!=null)switch(e.startViktor.__typename){case"StartViktorForReplResult":if(e.startViktor.success)return void i("Started indexing your App");break;case"NotFoundError":y.captureException(Error("Start Viktor for Repl failed: NotFoundError"),{extra:{replId:n}});break;case"UnauthorizedError":y.captureException(Error("Start Viktor for Repl failed: UnauthorizedError"),{extra:{replId:n}});break;default:a("Failed to start indexing your App")}},[i,a,n]),(0,t.useCallback)(function(){return(0,d._)(function(){return(0,f._)(this,function(e){switch(e.label){case 0:return[4,s({variables:{input:{replId:n}}})];case 1:return l(e.sent().data),[2]}})})()},[s,l,n])),_=(0,R.getCurrentUrl)();return(0,p.jsxs)(A.ShadesSurface,{css:M.root,py:8,px:12,gap:8,align:"center",children:[(0,p.jsxs)(O.Text,{children:[u," is currently experiencing high demand and is temporarily unavailable for ",m.freePlanName," plan users."]}),(0,p.jsxs)(O.Text,{children:["Please try again later, or upgrade to ",m.corePlanName," for immediate access."]}),(0,p.jsx)(N.View,{css:M.buttonContainer,row:!0,gap:6,children:(0,p.jsx)(D.Button,{text:"Upgrade to ".concat(m.corePlanName),iconLeft:(0,p.jsx)(h.default,{}),onClick:function(){return(0,d._)(function(){return(0,f._)(this,function(e){switch(e.label){case 0:return[4,c("MembershipPurchaseModal",{analyticsContext:{upgrade:{context:"agent_freemium_quota"}},onPurchaseComplete:function(){return w()},redirectPath:_,headingText:"Get immediate access to ".concat(u),subHeadingText:"Upgrade to Replit ".concat(m.corePlanName," for priority access during high demand")})];case 1:return e.sent(),[2]}})})()},colorway:"brand",css:M.upgradeButton})})]})}e.s(["FreemiumTemporarilyUnavailable",()=>L],267473);var B=e.i(629536),V=e.i(960791);function F(e){var t=e.aiName;return(0,p.jsx)(A.ShadesSurface,{css:V.default.root,py:8,px:12,gap:8,align:"center",children:(0,p.jsxs)(O.Text,{children:["Guests are not allowed to use ",t," in ",m.freePlanName," Plan user's repls."]})})}function U(){return(0,p.jsx)(A.ShadesSurface,{css:V.default.root,py:8,px:12,gap:8,align:"center",children:(0,p.jsx)(O.Text,{children:"The owner of this app has exceeded their usage limit."})})}function G(){return(0,p.jsx)(A.ShadesSurface,{css:V.default.root,py:8,px:12,gap:8,align:"center",children:(0,p.jsxs)(O.Text,{children:["Your access to ",B.AGENT_NAME," is restricted in this organization."]})})}e.s(["GuestsNotAllowedToUseAgentWhenOrgAuthzFailed",()=>G,"GuestsNotAllowedToUseAgentWhenOwnerAuthzFailed",()=>U,"GuestsNotAllowedToUseAiInStarterPlanRepls",()=>F],53617),e.i(148382);var $=e.i(82259);function H(){var e=(0,x._)((0,t.useState)(null),2),n=e[0],i=e[1];return(0,r.useChatHook)("received-completed-event",function(e){var t=e.event;switch(t.error.type){case $.EventErrorType.AI_QUOTA_INSUFFICIENT_BUDGET:case $.EventErrorType.AI_QUOTA_NO_PAYMENT_METHOD:case $.EventErrorType.AI_QUOTA_NO_SUBSCRIPTION:i(t.error);break;default:t.error.type===$.EventErrorType.EVENT_ERROR_TYPE_UNKNOWN&&t.error.message}}),n}e.i(877212),e.s(["useSessionError",()=>H],398462);var z=e.i(304277);e.i(566901);var W=e.i(696683);function q(){var e=(0,w._)(["\n  fragment AgentSessionErrorUsageInterval on UsageInterval {\n    endDate\n  }\n"]);return q=function(){return e},e}function K(){var e=(0,w._)(["\n  query AgentSessionError($orgId: String) {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          ...AgentSessionErrorUsageInterval\n        }\n        ... on Error {\n          message\n        }\n      }\n      usageBasedBillingAlerts {\n        ...EditUsageBasedBillingAlertsFormInitialConfig\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          name\n          usageInterval {\n            ... on UsageInterval {\n              ...AgentSessionErrorUsageInterval\n            }\n            ... on Error {\n              message\n            }\n          }\n          usageBasedBillingAlerts {\n            ...EditUsageBasedBillingAlertsFormInitialConfig\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return K=function(){return e},e}var Y={},Q=(0,_.gql)(q()),X=(0,_.gql)(K(),Q,W.EditUsageBasedBillingAlertsFormInitialConfigFragmentDoc),Z=e.i(605526),J=e.i(681953),ee=e.i(201411),et=e.i(409823),en=e.i(752539),er=e.i(549645),ei=e.i(76112),ea=e.i(682986),eo=e.i(480028),es=e.i(91720),el=(0,I.cssRecord)({root:[P.rcss.position.relative,P.rcss.p(8),P.rcss.borderRadius(),P.rcss.border({color:eo.tokens.outlineDimmest}),P.rcss.colWithGap(4),{containerType:"inline-size"}]});function eu(e){return(0,p.jsxs)(N.View,{row:!0,gap:6,align:"center",children:[(0,p.jsx)(ea.AgentAvatar,{size:16}),(0,p.jsx)(O.Text,{variant:"subheadDefault",children:e.children})]})}function ec(e){return(0,p.jsxs)(A.ShadesSurface,{css:el.root,children:[(0,p.jsx)(eu,{children:"Youve hit your usage budget"}),(0,p.jsxs)(O.Text,{"data-chromatic":"ignore",children:["Increase your usage budget to continue using Agent now. Otherwise, your usage will reset"," ",e.creditsResetDate?(0,p.jsxs)(p.Fragment,{children:["on ",(0,et.default)(e.creditsResetDate,"MMM do, HH:mm aaa")," "]}):null,"when the next billing period begins."]}),(0,p.jsx)(D.Button,{iconLeft:(0,p.jsx)(ei.default,{}),text:"Increase usage budget",colorway:"primary",onClick:e.onIncreaseBudget})]})}function ed(e){return(0,p.jsxs)(A.ShadesSurface,{css:el.root,children:[(0,p.jsx)(eu,{children:"Add a billing method to continue using Agent"}),(0,p.jsx)(O.Text,{children:"Youve used all your monthly creditsyoull need to to add a billing method to pay for additional Agent usage."}),(0,p.jsx)(D.Button,{iconLeft:(0,p.jsx)(er.default,{}),text:"Add billing method",colorway:"primary",onClick:e.onAddBillingMethod})]})}function ef(){return(0,p.jsxs)(A.ShadesSurface,{css:el.root,children:[(0,p.jsx)(eu,{children:"Your subscription is not active anymore"}),(0,p.jsx)(O.Text,{children:"Your subscription has expired or been canceled. To continue using Agent, make sure your subscription is active."}),(0,p.jsx)(es.ButtonLink,{href:"/pricing",iconRight:(0,p.jsx)(en.default,{}),text:"See pricing",colorway:"primary"})]})}function ep(e){var t=e.error;return(0,p.jsxs)(A.ShadesSurface,{css:el.root,children:[(0,p.jsx)(eu,{children:"Dev only error"}),(0,p.jsxs)(O.Text,{children:[t.type," - ",t.message]})]})}var eh=e.i(739521);function em(e){var n=(0,E.default)(),r=(0,Z.useOrgId)(n),i=r.hasError,a=r.orgId,o=(c={variables:{orgId:a},skip:void 0===a||i},d=(0,b._)({},Y,c),z.useQuery(X,d)).data;f=a?(null==o||null==(h=o.currentUser)?void 0:h.org.__typename)==="Org"&&"UsageBasedBillingAlertsConfig"===o.currentUser.org.usageBasedBillingAlerts.__typename?o.currentUser.org.usageBasedBillingAlerts:void 0:(null==o||null==(m=o.currentUser)?void 0:m.usageBasedBillingAlerts.__typename)==="UsageBasedBillingAlertsConfig"?o.currentUser.usageBasedBillingAlerts:void 0;var s=(0,x._)((0,t.useState)(null),2),l=s[0],u=s[1];switch(e.error.type){case $.EventErrorType.AI_QUOTA_INSUFFICIENT_BUDGET:var c,d,f,h,m,g,y,w=null==o?void 0:o.currentUser,_=(null==w?void 0:w.org.__typename)==="Org"?w.org:void 0;return(null==_?void 0:_.usageInterval.__typename)==="UsageInterval"?y=new Date(_.usageInterval.endDate):(null==w||null==(g=w.usageInterval)?void 0:g.__typename)==="UsageInterval"&&(y=new Date(w.usageInterval.endDate)),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ec,{creditsResetDate:y,onIncreaseBudget:function(){return u($.EventErrorType.AI_QUOTA_INSUFFICIENT_BUDGET)}}),(0,p.jsx)(eh.Modal,{isOpen:l===$.EventErrorType.AI_QUOTA_INSUFFICIENT_BUDGET,onRequestClose:function(){return u(null)},children:(0,p.jsx)(ee.EditUsageBasedBillingAlertsForm,{org:_,initialSettings:f,onDone:function(){return window.location.reload()}})})]});case $.EventErrorType.AI_QUOTA_NO_PAYMENT_METHOD:return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ed,{onAddBillingMethod:function(){u($.EventErrorType.AI_QUOTA_NO_PAYMENT_METHOD)}}),(0,p.jsx)(eh.Modal,{isOpen:l===$.EventErrorType.AI_QUOTA_NO_PAYMENT_METHOD,onRequestClose:function(){return u(null)},children:(0,p.jsxs)(N.View,{gap:16,children:[(0,p.jsx)(O.Header,{variant:"headerDefault",level:1,children:"Manage Payment"}),(0,p.jsx)(J.AccountPaymentMethodFlow,{})]})})]});case $.EventErrorType.AI_QUOTA_NO_SUBSCRIPTION:return(0,p.jsx)(ef,{});default:return(0,p.jsx)(ep,{error:e.error})}}function eg(){var e=(0,w._)(["\n  query GetIsGuestInStarterPlanUserRepl($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          __typename\n          id\n        }\n        owner {\n          __typename\n          ... on User {\n            id\n            isSubscribed\n          }\n        }\n        isOwner\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return eg=function(){return e},e}e.s(["SessionError",()=>em],644881);var ev={},ex=(0,_.gql)(eg());function ey(){var e,t,n,r,i=(n={variables:{replId:(0,E.default)()}},r=(0,b._)({},ev,n),z.useQuery(ex,r)).data,a=(null==i?void 0:i.getRepl.__typename)==="Repl"&&null!=(e=i.getRepl.org)&&!!e.id;return(null==i?void 0:i.getRepl.__typename)==="Repl"&&(null==(t=i.getRepl.owner)?void 0:t.__typename)==="User"&&!i.getRepl.owner.isSubscribed&&!i.getRepl.isOwner&&!a}e.s(["useIsGuestInStarterPlanUserRepl",()=>ey],547450)},754042,e=>{e.v({dragPreview:"QueueItemDragPreview-module__W-UyjW__dragPreview",dragPreviewContent:"QueueItemDragPreview-module__W-UyjW__dragPreviewContent",dragPreviewText:"QueueItemDragPreview-module__W-UyjW__dragPreviewText"})},712709,e=>{e.v({bannerContainer:"QueueDrawer-module__u3MuBG__bannerContainer",compactButton:"QueueDrawer-module__u3MuBG__compactButton",disabled:"QueueDrawer-module__u3MuBG__disabled",dragHandle:"QueueDrawer-module__u3MuBG__dragHandle",dragging:"QueueDrawer-module__u3MuBG__dragging",drawerItems:"QueueDrawer-module__u3MuBG__drawerItems",drawerSurface:"QueueDrawer-module__u3MuBG__drawerSurface",dropIndicatorAbove:"QueueDrawer-module__u3MuBG__dropIndicatorAbove",dropIndicatorBelow:"QueueDrawer-module__u3MuBG__dropIndicatorBelow",expanded:"QueueDrawer-module__u3MuBG__expanded",isDragInteractionDisabled:"QueueDrawer-module__u3MuBG__isDragInteractionDisabled",itemActions:"QueueDrawer-module__u3MuBG__itemActions",itemActionsOverlay:"QueueDrawer-module__u3MuBG__itemActionsOverlay",nonEditedItemInEditMode:"QueueDrawer-module__u3MuBG__nonEditedItemInEditMode",queueItem:"QueueDrawer-module__u3MuBG__queueItem",queueItemMetadata:"QueueDrawer-module__u3MuBG__queueItemMetadata",queueItemSurface:"QueueDrawer-module__u3MuBG__queueItemSurface",queueItemText:"QueueDrawer-module__u3MuBG__queueItemText",rightText:"QueueDrawer-module__u3MuBG__rightText",titleContainer:"QueueDrawer-module__u3MuBG__titleContainer"})},791378,555829,784701,425200,468142,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(629536),i=e.i(183035),a=e.i(173703),o=e.i(140487),s=e.i(960178),l=e.i(625484),u=e.i(483730);function c(e){var c=e.request,d=(e.eventId,e.isResponseInProgress),f=e.onApprove,p=e.onReject,h=(0,n.useCallback)(function(){d||f()},[f,d]),m=(0,n.useCallback)(function(){d||p()},[p,d]),g=r.BLUEPRINT_CONFIGS[c.blueprintName],x=(null==g?void 0:g.displayName)||c.blueprintDisplayName,y=(null==g?void 0:g.description)||"This integration requires confirmation before setup.";return(0,t.jsxs)(a.ShadesSurface,{clsx:u.default.dialog,gap:8,br:8,p:8,children:[(0,t.jsx)(l.View,{row:!0,justify:"space-between",align:"center",children:(0,t.jsxs)(l.View,{row:!0,gap:8,align:"center",children:[(null==g?void 0:g.icon)?g.icon:null,(0,t.jsxs)(s.Text,{children:["Confirm ",x," Integration"]})]})}),(0,t.jsx)(l.View,{pb:4,pl:2,children:(0,t.jsx)(s.Text,{children:y})}),(0,t.jsxs)(l.View,{row:!0,gap:8,children:[(0,t.jsx)(o.Button,{className:u.default.grow1,text:"Dismiss",disabled:d,onClick:m}),(0,t.jsx)(o.Button,{className:u.default.grow3,colorway:"primary",text:"Approve",iconLeft:(0,t.jsx)(i.default,{}),loading:d,disabled:d,onClick:h})]})]})}e.s(["AgentBlueprintApprovalDialog",()=>c],791378);var d=e.i(297083),f=e.i(721281),p=e.i(878420),h=e.i(64386),m=e.i(530658),g=e.i(817556),x=e.i(602686),y=e.i(712771),b=e.i(979530),w=e.i(995691),_=e.i(416298),k=e.i(546284),S=e.i(529810),C=e.i(274808),j=e.i(480028),T=e.i(446530),E=e.i(613355),R=e.i(136540),I=e.i(607278),A=e.i(739521),P=e.i(929872),D=(0,T.cssRecord)({container:[{animation:"slideUp 0.2s ease-out"},{"@keyframes slideUp":{from:{opacity:0,transform:"scale(0.95)"},to:{opacity:1,transform:"scale(1)"}}},E.rcss.p(8),E.rcss.borderRadius(),E.rcss.backgroundColor.orangeDimmest,E.rcss.border({color:j.tokens.orangeDimmer})],buttons:[E.rcss.flex.wrap],header:[E.rcss.color.orangeStrongest],column:[E.rcss.width("50%")],warning:[E.rcss.color.redStronger],secretsButton:[E.rcss.display.inlineFlex]});function O(e){var r=e.openSecrets,i=(0,m._)((0,n.useState)(!1),2),a=i[0],u=i[1],c=(0,C.useInMessageSecrets)(),d=c.inMessageSecrets,f=c.replaceInMessageSecrets,p=c.dismissInMessageSecrets;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.Surface,{css:D.container,background:"higher",children:(0,t.jsxs)(l.View,{gap:8,children:[(0,t.jsxs)(l.View,{row:!0,gap:4,align:"center",children:[(0,t.jsx)(_.default,{css:D.header,size:16}),(0,t.jsx)(s.Text,{css:D.header,variant:"small",color:"dimmer",children:"Security Warning"})]}),(0,t.jsxs)(s.Text,{variant:"small",children:["The ",(0,k.default)("values",d.length)," you added look like ",d.length>1?"secrets":"a secret",". Store"," ",d.length>1?"them":"it"," securely using our"," ",(0,t.jsx)(o.Button,{css:D.secretsButton,text:"Secrets",colorway:"primary",variant:"underlinedOnHover",size:"small",onClick:r})," ","feature."]}),(0,t.jsxs)(l.View,{css:D.buttons,row:!0,gap:8,align:"center",children:[(0,t.jsx)(o.Button,{text:"Add ".concat((0,k.default)("secret",d.length)),iconLeft:(0,t.jsx)(w.default,{}),loading:a,colorway:"warning",size:"small",onClick:function(){return u(!0)}}),(0,t.jsx)(o.Button,{text:"Dismiss",iconLeft:(0,t.jsx)(x.default,{}),variant:"outlined",colorway:"warning",size:"small",onClick:p})]})]})}),a?(0,t.jsx)(N,{inMessageSecrets:d,onReplace:f,onClose:function(){return u(!1)}}):null]})}function N(e){var r=e.inMessageSecrets,i=e.onReplace,a=e.onClose,u=(0,S.default)().secrets,c=(0,m._)((0,n.useState)(null),2),x=c[0],k=c[1],C=(0,m._)((0,n.useState)(!1),2),j=C[0],T=C[1],E=(0,m._)((0,n.useState)(!1),2),I=E[0],P=E[1],O=(0,m._)((0,n.useState)({}),2),N=O[0],B=O[1];if((0,n.useEffect)(function(){var e=!1;return u.read().then(function(t){e||k(t)}),function(){e=!0}},[u]),r.some(function(e){return!(e.id in N)})){var V={},F=!0,U=!1,G=void 0;try{for(var $,H=r[Symbol.iterator]();!(F=($=H.next()).done);F=!0){var z,W=$.value;V[W.id]={key:(z=W.provider,("Generic API Key"===z||"Generic Secret"===z?null:L(z))||""),value:W.key}}}catch(e){U=!0,G=e}finally{try{F||null==H.return||H.return()}finally{if(U)throw G}}Object.assign(N,(0,p._)({},V,N))}var q=new Set(Object.values(N).map(function(e){return e.key})),K=[];if(Object.values(N).some(function(e){return 0===e.key.length})&&K.push("Key name cannot be empty."),Object.values(N).some(function(e){return 0===e.value.length})&&K.push("Secret value cannot be empty."),q.size!==Object.values(N).length&&K.push("Some key names are duplicates."),x){var Y=!0,Q=!1,X=void 0;try{for(var Z,J=x.keys()[Symbol.iterator]();!(Y=(Z=J.next()).done);Y=!0){var ee=Z.value;q.has(ee)&&K.push('Key name "'.concat(ee,'" already exists. Please choose a different name.'))}}catch(e){Q=!0,X=e}finally{try{Y||null==J.return||J.return()}finally{if(Q)throw X}}}var et=null===x||K.length>0,en=null===x||I;return(0,t.jsx)(A.Modal,{isOpen:!0,preventClose:!0,onRequestClose:a,children:(0,t.jsxs)(l.View,{gap:12,children:[(0,t.jsxs)(l.View,{gap:8,children:[(0,t.jsxs)(l.View,{row:!0,align:"center",gap:8,children:[(0,t.jsx)(w.default,{}),(0,t.jsx)(s.Text,{children:"Store secret securely"})]}),(0,t.jsx)(s.Text,{color:"dimmer",children:r.length>1?"Add key names for your values.":"Add a key name for your value."})]}),(0,t.jsxs)(l.View,{gap:4,children:[(0,t.jsxs)(l.View,{row:!0,align:"center",children:[(0,t.jsx)(s.Text,{css:D.column,variant:"small",color:"dimmer",children:"Key"}),(0,t.jsxs)(l.View,{css:D.column,row:!0,align:"center",gap:4,pl:4,children:[(0,t.jsx)(s.Text,{variant:"small",color:"dimmer",children:"Value"}),(0,t.jsx)(R.IconButton,{size:18,alt:"Toggle Secret",onClick:function(){return T(function(e){return!e})},tooltipPlacement:"top",children:j?(0,t.jsx)(b.default,{}):(0,t.jsx)(y.default,{})})]})]}),(0,t.jsx)(l.View,{gap:12,children:r.map(function(e){return(0,t.jsx)(M,{name:N[e.id].key,value:N[e.id].value,showContents:j,onChange:function(t,n){B(function(r){return(0,h._)((0,p._)({},r),(0,f._)({},e.id,{key:t,value:n}))})}},e.id)})})]}),K.length?(0,t.jsx)(l.View,{gap:8,children:K.map(function(e,n){return(0,t.jsxs)(l.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(_.default,{css:D.warning,size:16}),(0,t.jsx)(s.Text,{css:D.warning,variant:"small",children:e})]},n)})}):null,(0,t.jsxs)(l.View,{row:!0,gap:8,align:"center",justify:"end",children:[(0,t.jsx)(o.Button,{text:"Cancel",onClick:a}),(0,t.jsx)(o.Button,{text:r.length>1?"Add secrets":"Add secret",disabled:et,loading:en,colorway:"primary",onClick:function(){return(0,d._)(function(){var e;return(0,g._)(this,function(t){switch(t.label){case 0:return P(!0),[4,u.addEntries(Array.from(Object.values(N)))];case 1:for(var n in t.sent(),e={},N)e[n]=N[n].key;return P(!1),i(e),a(),[2]}})})()}})]})]})})}function M(e){var n=e.name,r=e.value,i=e.showContents,a=e.onChange;return(0,t.jsxs)(l.View,{row:!0,align:"center",gap:8,children:[(0,t.jsx)(I.Input,{css:D.column,value:n,placeholder:"Enter a key name","aria-label":"Secret key name",onChange:function(e){a(L(e.target.value),r)}}),(0,t.jsx)(I.Input,{css:D.column,style:!r||i?{}:{fontFamily:"text-security-disc"},value:r,placeholder:"Enter a secret value","aria-label":"Secret value",onChange:function(e){a(n,e.target.value)}})]})}function L(e){return e.toUpperCase().replaceAll(/[[,()]/g,"").replaceAll(/\s+/g,"_").replaceAll(/[^A-Z0-9_]/g,"")}e.s(["InMessageSecretsWarning",()=>O],555829);var B=e.i(399119),V=e.i(904851),F=e.i(90659),U=e.i(445789),G=e.i(167626),$=e.i(179302),H=e.i(6013),z=e.i(928353),W=e.i(815900),q={bug_report:"red",feature_request:"purple",design:"blue",content:"lime",other:"grey"},K=Object.fromEntries(Object.entries(W.INBOX_TOPIC_LABELS).map(function(e){var t,n=(0,m._)(e,2),r=n[0];return[r,{label:n[1],colorway:null!=(t=q[r])?t:"grey"}]}));e.s(["INBOX_TOPIC_CONFIG",()=>K],784701);var Y=e.i(624782),Q=/\{\{[\s\S]*?"replit-type"\s*:\s*"inbox_topic"[\s\S]*?\}\}/g,X=/"topic"\s*:\s*"([^"]*)"/,Z=function(e){function n(e){var t;return(0,V._)(this,n),t=(0,B._)(this,n),(0,f._)(t,"topic",void 0),t.topic=e,t}return(0,U._)(n,e),(0,F._)(n,[{key:"eq",value:function(e){return(0,G._)(e,n)&&e.topic===this.topic}},{key:"toDOM",value:function(){var e,n=null!=(e=K[this.topic])?e:K.other,r=document.createElement("span");r.setAttribute("aria-hidden","true"),r.style.display="inline-flex",r.style.alignItems="center",r.style.verticalAlign="baseline",r.style.position="relative",r.style.userSelect="none";var i=(0,z.createCodeMirrorElement)((0,t.jsx)(Y.Pill,{text:n.label,colorway:n.colorway,variant:"muted",compact:!0}));return r.appendChild(i),r}},{key:"ignoreEvent",value:function(){return!0}}]),n}($.WidgetType),J=new $.MatchDecorator({regexp:Q,decorate:function(e,t,n,r){try{var i=r[0].match(X);if(!i)return;var a=i[1];e(t,n,$.Decoration.replace({widget:new Z(a)}))}catch(e){}}}),ee=[$.ViewPlugin.fromClass(function(){function e(t){(0,V._)(this,e),(0,f._)(this,"decorations",void 0),this.decorations=J.createDeco(t)}return(0,F._)(e,[{key:"update",value:function(e){this.decorations=J.updateDeco(e,this.decorations)}}]),e}(),{decorations:function(e){return e.decorations},provide:function(e){return $.EditorView.atomicRanges.of(function(t){var n;return(null==(n=t.plugin(e))?void 0:n.decorations)||$.Decoration.none})}}),(0,H.createAtomicRangeKeymap)(function(e){var t=[],n=e.toString().matchAll(Q),r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;void 0!==l.index&&t.push({from:l.index,to:l.index+l[0].length})}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t})];e.s(["inboxTopicExtension",()=>ee],425200);var et=e.i(822243),en=e.i(848415),er=e.i(82259);e.i(877212);var ei=e.i(924908);e.i(660670);var ea=e.i(806240);e.i(925218);var eo=e.i(267103),es=e.i(597853),el=e.i(731145),eu=e.i(121025),ec=e.i(167392),ed=e.i(568430),ef=e.i(659042),ep=e.i(408143),eh=e.i(59300),em=e.i(204977),eg=e.i(674347),ev=e.i(416746),ex=e.i(518056),ey=e.i(110432),eb=e.i(958115),ew=e.i(491194),e_=e.i(641365),ek=e.i(993796),eS=e.i(222342),eC=e.i(441329),ej=e.i(417120),eT=e.i(163525),eE=e.i(509908),eR=e.i(498596),eI=e.i(971131),eA=e.i(754042),eP=(0,n.memo)(function(){var e=(0,eR.useDragLayer)(function(e){return{item:e.getItem(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}}),n=e.isDragging,r=e.item,i=e.currentOffset;if(!n||!r||!i)return null;var a={"--drag-preview-x":i.x+"px","--drag-preview-y":i.y+"px"};return(0,eI.createPortal)((0,t.jsx)(l.View,{clsx:eA.default.dragPreview,style:a,children:(0,t.jsx)(l.View,{align:"center",clsx:eA.default.dragPreviewContent,px:8,py:4,children:(0,t.jsx)(s.Text,{clsx:eA.default.dragPreviewText,color:"default",children:r.content})})}),document.body)}),eD=e.i(913811),eO=e.i(165680),eN=e.i(802088),eM=e.i(751273),eL=e.i(788124),eB=e.i(712709),eV="QueueItem";function eF(e){var r,i,a,o,u=e.isNextInQueue,c=e.item,d=e.index,p=e.onEdit,h=e.onDelete,g=e.onReorder,y=e.onSend,b=e.editingQueueItemId,w=e.isQueueDisabled,_=e.queueHasMultipleItems,S=e.sendIconVariant,C=(0,ek.useFlag)({controlName:"flag-high-power-model-rollout",default:!1}),T=(0,n.useRef)(null),E=(0,n.useRef)(null),I=(0,n.useRef)(null),A=(0,m._)((0,et.useDrag)({type:eV,item:{type:eV,id:c.id,index:d,content:null==(r=c.contents)?void 0:r.content},collect:function(e){return{isDragging:e.isDragging()}}}),3),D=A[0].isDragging,O=A[1],N=A[2],M=(0,m._)((0,en.useDrop)({accept:eV,drop:function(e){e.index!==d&&g(e.index,d)},collect:function(e){var t=e.getItem(),n=e.isOver();return{isAbove:n&&t&&t.index>d,isBelow:n&&t&&t.index<d}},canDrop:function(){return!0}}),2),L=M[0],B=L.isAbove,V=L.isBelow,F=M[1];if((0,e_.useDisableNativeDragPreview)(N),O(E),F(I),!c.contents)return null;var U=null!=(a=null==(i=c.contents.uploadedFiles)?void 0:i.length)?a:0,G=c.contents.targetedElement,$=c.contents.agentConfig,H=!w&&null===b,z=b===c.id,q=U>0||G||(null==$?void 0:$.thinkingEnabled)===!0||(null==$?void 0:$.modelProfile)===ea.ModelProfile.ADVANCED||(null==$?void 0:$.enableAutomatedTesting)===!0||(null==$?void 0:$.autonomyLevel)===ea.AutonomyLevel.MAX||(null==$?void 0:$.agentMode)===ea.AgentMode.QUICK_EDIT;return(0,t.jsxs)(l.View,{py:2,pl:8,pr:8,innerRef:T,align:"center",row:!0,gap:8,clsx:[eB.default.queueItem,(0,f._)({},eB.default.isDragInteractionDisabled,w||!!b||!_)],children:[(0,t.jsx)(l.View,{innerRef:E,clsx:eB.default.dragHandle,children:(0,t.jsx)(eh.default,{})}),(0,t.jsxs)(P.Surface,{elevated:!0,px:8,py:6,clsx:[eB.default.queueItemSurface,(o={},(0,f._)(o,eB.default.dragging,D),(0,f._)(o,eB.default.dropIndicatorAbove,B),(0,f._)(o,eB.default.dropIndicatorBelow,V),(0,f._)(o,eB.default.nonEditedItemInEditMode,b!==c.id&&null!=b),o)],grow:1,shrink:1,row:!0,justify:"space-between",gap:4,innerRef:I,children:[(0,t.jsxs)(l.View,{row:!0,justify:"space-between",align:"start",gap:4,shrink:!0,grow:!0,children:[(0,t.jsxs)(l.View,{clsx:eB.default.queueItemText,gap:4,shrink:!0,children:[(0,t.jsx)(eT.MessageMarkdown,{text:(0,W.replaceJsonMarkers)(c.contents.content),messageState:er.EventState.COMPLETE}),q?(0,t.jsxs)(l.View,{clsx:eB.default.queueItemMetadata,row:!0,gap:8,align:"center",children:[U>0?(0,t.jsx)(eM.Tooltip,{tooltip:"".concat(U," file ").concat((0,k.default)("attachment",U)),placement:"bottom-start",children:(0,t.jsxs)(l.View,{row:!0,gap:4,align:"center",children:[(0,t.jsx)(ex.default,{color:j.tokens.foregroundDimmest}),(0,t.jsx)(s.Text,{color:"dimmest",children:U})]})}):null,G?(0,t.jsx)(eM.Tooltip,{tooltip:"Selected element",placement:"bottom-start",children:(0,t.jsx)(eb.default,{color:j.tokens.foregroundDimmest,size:16})}):null,(null==$?void 0:$.thinkingEnabled)?(0,t.jsx)(eM.Tooltip,{tooltip:"Extended thinking",placement:"bottom-start",children:(0,t.jsx)(eu.default,{color:j.tokens.foregroundDimmest,size:16})}):null,C||(null==$?void 0:$.modelProfile)!==ea.ModelProfile.ADVANCED?null:(0,t.jsx)(eM.Tooltip,{tooltip:"High power model",placement:"bottom-start",children:(0,t.jsx)(ef.default,{color:j.tokens.foregroundDimmest,size:16})}),(null==$?void 0:$.enableAutomatedTesting)&&(null==$?void 0:$.agentMode)!==ea.AgentMode.QUICK_EDIT?(0,t.jsx)(eM.Tooltip,{tooltip:"App testing enabled",placement:"bottom-start",children:(0,t.jsx)(ep.default,{color:j.tokens.foregroundDimmest,size:16})}):null,(null==$?void 0:$.autonomyLevel)===ea.AutonomyLevel.MAX&&(null==$?void 0:$.agentMode)!==ea.AgentMode.QUICK_EDIT?(0,t.jsx)(eM.Tooltip,{tooltip:"Max autonomy enabled",placement:"bottom-start",children:(0,t.jsx)(eg.default,{color:j.tokens.foregroundDimmest,size:16})}):null,(null==$?void 0:$.agentMode)===ea.AgentMode.QUICK_EDIT?(0,t.jsx)(eM.Tooltip,{tooltip:"Fast enabled",placement:"bottom-start",children:(0,t.jsx)(el.default,{color:j.tokens.foregroundDimmest,size:12})}):null]}):null]}),(0,t.jsxs)(l.View,{clsx:eB.default.rightText,justify:"center",children:[u&&!z?(0,t.jsx)(s.Text,{variant:"small",color:"dimmest",children:"Next"}):null,z?(0,t.jsx)(s.Text,{variant:"small",color:"dimmest",children:"Editing"}):null]})]}),H?(0,t.jsx)(l.View,{clsx:eB.default.itemActionsOverlay}):null,H?(0,t.jsxs)(l.View,{clsx:eB.default.itemActions,row:!0,gap:4,children:[(0,t.jsx)(R.IconButton,{alt:"Send message",size:24,onClick:function(){return y(c)},children:"send"===(void 0===S?"send":S)?(0,t.jsx)(ey.default,{color:j.tokens.foregroundDimmer}):(0,t.jsx)(es.default,{color:j.tokens.foregroundDimmer})}),(0,t.jsx)(R.IconButton,{alt:"Edit message",size:24,onClick:function(){return p(c)},children:(0,t.jsx)(em.default,{color:j.tokens.foregroundDimmer})}),(0,t.jsx)(R.IconButton,{alt:"Delete message",size:24,onClick:function(){return h(c)},children:(0,t.jsx)(x.default,{color:j.tokens.foregroundDimmer})})]}):null]})]})}function eU(e){var i,u=e.items,c=e.editingQueueItemId,d=e.isDisabled,p=e.isOpen,h=e.isAgentWorking,g=e.isInMobileWorkspace,x=e.onEditItem,y=e.onDeleteItem,b=e.onReorderItems,w=e.onSendItem,_=e.onClearQueue,k=e.onClose,S=e.banner,C=(0,m._)((0,n.useState)(!1),2),T=C[0],E=C[1],I=(0,m._)((0,n.useState)(!1),2),A=I[0],P=I[1],D=(0,n.useCallback)(function(){_(),E(!1)},[_]),O=(0,n.useCallback)(function(){P(!A)},[A]);return((0,n.useEffect)(function(){if(p){var e=function(e){"Escape"===e.key&&k()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}},[p,k]),p)?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(a.ShadesSurface,{clsx:[eB.default.drawerSurface,(i={},(0,f._)(i,eB.default.expanded,!A),(0,f._)(i,eB.default.disabled,d),i)],gap:4,pt:8,pb:8*!S,grow:1,shrink:1,children:[(0,t.jsxs)(l.View,{clsx:eB.default.titleContainer,row:!0,gap:4,align:"center",justify:"space-between",pl:4,pr:8,children:[(0,t.jsxs)(l.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(eM.Tooltip,{tooltip:A?"Expand":"Collapse",children:(0,t.jsx)(R.IconButton,{alt:A?"Expand":"Collapse",size:24,onClick:O,children:A?(0,t.jsx)(ed.default,{}):(0,t.jsx)(ec.default,{})})}),(0,t.jsx)(s.Text,{color:"dimmer",children:r.QUEUE_NAME}),A?(0,t.jsxs)(s.Text,{color:"dimmest",children:["(",u.length," messages)"]}):null,g?null:(0,t.jsx)(eM.Tooltip,{tooltip:(0,t.jsxs)("span",{children:["Queued messages will be sent ",(0,t.jsx)("br",{}),"when ",(0,r.getAgentName)()," ",h?"is done working":"resumes work"]}),maxWidth:300,placement:"right",children:(0,t.jsx)(ev.default,{size:16,color:j.tokens.foregroundDimmest})})]}),(0,t.jsxs)(l.View,{row:!0,gap:4,pr:4,children:[!A&&T?(0,t.jsxs)(l.View,{row:!0,gap:4,children:[(0,t.jsx)(o.Button,{size:"small",clsx:eB.default.compactButton,text:"Cancel",onClick:function(){return E(!1)}}),(0,t.jsx)(o.Button,{size:"small",clsx:eB.default.compactButton,text:"Clear queue",colorway:"negative",onClick:D})]}):null,!(u.length>0)||A||T?null:(0,t.jsx)(R.IconButton,{alt:"Clear all",size:24,onClick:function(){return E(!0)},tooltipContents:"Clear all",colorway:T?"negative":void 0,children:(0,t.jsx)(ew.default,{color:j.tokens.foregroundDimmer})})]})]}),A?null:(0,t.jsxs)(eL.default,{children:[(0,t.jsx)(eP,{}),(0,t.jsx)(l.View,{clsx:eB.default.drawerItems,shrink:!0,gap:4,children:u.map(function(e,n){return(0,t.jsx)(eF,{editingQueueItemId:c,isNextInQueue:0===n,item:e,index:n,onEdit:x,onDelete:y,onReorder:b,onSend:w,isQueueDisabled:d,queueHasMultipleItems:u.length>1,sendIconVariant:"arrow-up"},e.id)})})]}),!A&&S?(0,t.jsx)(l.View,{clsx:eB.default.bannerContainer,children:S}):null]})}):null}function eG(e){var r,i,a,o,s=e.isDisabled,l=e.onEnterEditMode,u=e.sendQueuedMessage,c=e.banner,f=(0,ei.useChatter)(),p=(0,eo.useObservable)(f.sessions.agent.current),h=null==p?void 0:p.id,m=(0,eo.useObservable)(f.queue.state,[]),x=(0,eD.useQueueIsOpen)(),y=(0,eD.useSetQueueIsOpen)(),b=(0,eC.useIsInMobileWorkspace)(),w=(0,ej.useIsAgentOptimisticallyWorking)(),_=(0,eS.default)().showError,k=(0,eD.useEditingQueueItemId)();r=(0,ej.useAgentState)().agentState,i=(0,eD.useIsEditingQueueItem)(),a=(0,eO.useSetAgentPausedByUser)(),o=(0,n.useRef)(null),(0,eN.useObserver)(r,{next:function(e){if(e){var t=e.state;o.current===er.AgentRunState.AGENT_STATE_RUNNING&&(t===er.AgentRunState.AGENT_STATE_PAUSED||t===er.AgentRunState.AGENT_STATE_NOT_STARTED)&&i&&a(!0),o.current=t}}});var S=(0,n.useCallback)(function(){return(0,d._)(function(){return(0,g._)(this,function(e){switch(e.label){case 0:return[4,f.queue.delete({ids:m.map(function(e){return e.id})})];case 1:return e.sent(),[2]}})})()},[m,f.queue]),C=(0,n.useCallback)(function(e){return(0,d._)(function(){return(0,g._)(this,function(t){switch(t.label){case 0:if(!e.contents)return[2];return[4,f.queue.delete({ids:[e.id]})];case 1:return t.sent().ok?(0,eE.trackAgentQueueAnalyticsEvent)({action:"queue_message_deleted",sessionId:h}):_("Failed to delete queued message"),[2]}})})()},[f.queue,_,h]),j=(0,n.useCallback)(function(e,t){return(0,d._)(function(){var n,r,i,a,o;return(0,g._)(this,function(s){switch(s.label){case 0:if(e===t||!(i=m[e]))return[2];return a=t<e,[4,f.queue.reorder({id:i.id,after:null!=(o=a?null==(n=m[t-1])?void 0:n.id:null==(r=m[t])?void 0:r.id)?o:null})];case 1:return s.sent().ok||_("Failed to reorder queued messages"),[2]}})})()},[m,f.queue,_]);return(0,n.useEffect)(function(){m.length>0?y(!0):x&&y(!1)},[m.length,y,x]),(0,n.useEffect)(function(){return function(){y(!1)}},[y]),(0,t.jsx)(eU,{items:m,isDisabled:s,isOpen:x,isAgentWorking:w,isInMobileWorkspace:b,editingQueueItemId:k,onEditItem:l,onDeleteItem:C,onReorderItems:j,onSendItem:u,onClearQueue:S,onClose:function(){return y(!1)},banner:c})}e.s(["QueueDrawer",()=>eG],468142)},754686,(e,t,n)=>{var r=e.r(365738),i=1/0,a=/[\\^$.*+?()[\]{}|]/g,o=RegExp(a.source),s="object"==r._(e.g)&&e.g&&e.g.Object===Object&&e.g,l=("undefined"==typeof self?"undefined":r._(self))=="object"&&self&&self.Object===Object&&self,u=s||l||Function("return this")(),c=Object.prototype.toString,d=u.Symbol,f=d?d.prototype:void 0,p=f?f.toString:void 0;t.exports=function(e){var t;return(e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(function(e){return(void 0===e?"undefined":r._(e))=="symbol"||!!e&&(void 0===e?"undefined":r._(e))=="object"&&"[object Symbol]"==c.call(e)}(e))return p?p.call(e):"";var t=e+"";return"0"==t&&1/e==-i?"-0":t}(t))&&o.test(e)?e.replace(a,"\\$&"):e}},239678,e=>{e.v({button:"FileReferenceChip-module__-fahHG__button",codePreview:"FileReferenceChip-module__-fahHG__codePreview",lineRange:"FileReferenceChip-module__-fahHG__lineRange",root:"FileReferenceChip-module__-fahHG__root",warning:"FileReferenceChip-module__-fahHG__warning"})},34198,686957,817341,177553,556353,448534,261585,341470,98791,410926,127154,e=>{"use strict";var t,n,r=e.i(297083),i=e.i(904851),a=e.i(90659),o=e.i(817556),s=e.i(276385),l=e.i(72158),u=e.i(179302),c=e.i(928353),d=e.i(700170),f=e.i(183035),p=e.i(992785),h=e.i(753950),m=h.Facet.define({combine:function(e){var t;return null!=(t=e[0])?t:[]},compare:p.default}),g=new d.ReactCompartment(function(e){return m.of(e)});e.s(["FileContext",()=>g,"fileContext",()=>m],686957);var x=h.Facet.define({combine:function(e){var t;return null!=(t=e[0])?t:[]},compare:p.default}),y=new d.ReactCompartment(function(e){return x.of(e)});function b(e,t,n){return t===n?"@".concat(e,":L").concat(t):"@".concat(e,":L").concat(t,"-").concat(n)}e.s(["SnippetContext",()=>y,"generateSnippetMarker",()=>b,"snippetContext",()=>x],817341);var w=e.i(721281),_=e.i(389959);e.i(629536),e.i(644920);var k=e.i(205104);e.i(98816),e.i(568817),e.i(973519);var S=e.i(480028),C=e.i(446530),j=e.i(613355);(0,C.cssRecord)({popover:[j.rcss.borderRadius(4),j.rcss.border({color:S.tokens.outlineDefault}),j.rcss.overflow("hidden"),j.rcss.maxWidth(290)]});var T=e.i(292849),E=e.i(754873),R=e.i(123850);e.i(173703),e.i(140487),e.i(607278);var I=e.i(630818);e.i(396776),e.i(552144);var A=e.i(960178),P=e.i(751273),D=e.i(625484),O=e.i(290446),N=(0,C.cssRecord)({root:[E.interactive.listItem,j.rcss.p(4),j.rcss.colWithGap(2)],left:[{fontSize:S.tokens.fontSizeSmall}],warning:[{color:S.tokens.accentNegativeDefault}],dir:[{opacity:.6},j.rcss.flex.shrink(100)]}),M=(0,R.createCssVarTokens)(["iconColor","placeholderColor","itemTransform","inputBorderRadius","inputBorder"]),L=M.cssVars,B=M.styleTokens;(0,C.cssRecord)({root:[j.rcss.width(290),j.rcss.maxHeight(300),j.rcss.display.flex],inputRow:[j.rcss.position.relative,(n={},(0,w._)(n,L.iconColor,S.tokens.foregroundDimmest),(0,w._)(n,L.placeholderColor,S.tokens.foregroundDimmer),(0,w._)(n,":focus-within, :hover",(t={},(0,w._)(t,L.iconColor,S.tokens.foregroundDimmer),(0,w._)(t,L.placeholderColor,S.tokens.foregroundDimmest),t)),n)],searchIcon:[j.rcss.coverContainer,j.rcss.align.start,j.rcss.justify.center,{color:B.iconColor,pointerEvents:"none"}],input:[j.rcss.p(4),j.rcss.pl(24)],header:[j.rcss.height(24),j.rcss.align.center,j.rcss.display.flex,j.rcss.justify.spaceBetween],selectionButton:[j.rcss.reset.button,E.interactive.nofill,j.rcss.p(2),{fontSize:S.tokens.fontSizeSmall}],menu:[j.rcss.flex.growAndShrink(1),{overflow:"auto",borderBottom:"1px solid "+S.tokens.outlineDimmer}],item:[{transform:B.itemTransform,position:"absolute",top:0,left:0,width:"100%"}]}),(0,C.cssRecord)({button:[j.rcss.height(24),j.rcss.reset.button,j.rcss.align.center,j.rcss.cursor.pointer,j.rcss.px(4),j.rcss.py(2),j.rcss.rowWithGap(4),E.interactive.nofill,j.rcss.color.foregroundDimmer,{"&:hover":j.rcss.color.foregroundDefault,"@container (max-width: 400px)":{"> div > span":j.rcss.display.none}}]});var V={render:function(e){var t=e.file,n=t.path,r=t.match,i=(0,c.createCodeMirrorElement)((0,s.jsx)(D.View,{css:N.root,style:{width:"100%"},className:"option",children:(0,s.jsxs)(D.View,{row:!0,justify:"space-between",align:"center",children:[(0,s.jsxs)(D.View,{css:N.left,row:!0,gap:4,align:"center",children:[(0,s.jsx)(I.default,{path:n,size:16}),(0,s.jsx)(O.HighlightMatches,{text:r.filename.text,highlight:r.filename.ranges,dimmed:!0}),r.directory?(0,s.jsx)(D.View,{color:"dimmest",css:N.dir,children:(0,s.jsx)(O.HighlightMatches,{text:r.directory.text+"/",highlight:r.directory.ranges,dimmed:!0})}):null]}),"included"===t.inclusionStatus?(0,s.jsx)(f.default,{}):null]})}));return i.style.display="flex",i.style.width="100%",i},position:81},F=u.EditorView.theme({"@keyframes slide-fade-in":{"0%":{opacity:"0",transform:"translateY(-8px) scale(0.96)"},"100%":{opacity:"1",transform:"translateY(0) scale(1)"}},".cm-tooltip.cm-tooltip-autocomplete":{opacity:"0",transformOrigin:"top center",animation:"slide-fade-in 100ms ease-out 16ms forwards","& > ul":{fontFamily:S.tokens.fontFamilyDefault,fontSize:S.tokens.fontSizeSmall,transition:"scrollbar-color 0.3s ease",scrollbarColor:"".concat(S.tokens.interactiveBorder," transparent"),scrollbarWidth:"thin","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{transition:"background-color 0.3s ease",borderRadius:"3px",backgroundColor:"transparent"},"&:hover::-webkit-scrollbar-thumb":{backgroundColor:S.tokens.outlineDimmest},"&::-webkit-scrollbar-thumb:hover":{backgroundColor:S.tokens.outlineDefault}},"& > ul > li":{padding:"0px",display:"flex",alignItems:"center"},"& > ul > li[aria-selected] .option":{backgroundColor:S.tokens.interactiveBackground}},".cm-completionLabel":{width:0}}),U=new d.ReactCompartment(function(e){return e?[F,(0,l.autocompletion)({defaultKeymap:!0,icons:!1,aboveCursor:!0,addToOptions:[V],override:[function(t){return(0,r._)(function(){var n,r,i,a,s,l,u,c;return(0,o._)(this,function(o){switch(o.label){case 0:if(!e||!(n=t.matchBefore(/@(\S*)/g))||(r=n.from)>0&&" "!==(i=t.state.doc.sliceString(r-1,r))&&"\n"!==i&&"	"!==i||null===(a=t.matchBefore(/\w*/)))return[2,null];return[4,e(a.text)];case 1:return l=null!=(s=o.sent().files)?s:[],u=new Map(t.state.facet(m).map(function(e){return[e.path,e.inclusionStatus]})),c=l.map(function(e){var t=e.path,n=e.ranges;return{label:t,displayLabel:" ",apply:t+" ",file:{path:t,inclusionStatus:u.get(t),match:(0,T.matchFilepath)({path:t,ranges:null!=n?n:[]})}}}),[2,{from:n.from+1,filter:!1,options:c}]}})})()}],maxRenderedOptions:100})]:[]}),G=new d.ReactCompartment(function(e){return u.EditorView.updateListener.of(function(t){var n=!0,r=!1,i=void 0;try{for(var a,o=t.transactions[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value.annotation(l.pickedCompletion);s&&e(s.label)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}})}),$=new d.ReactCompartment(function(e){return e?u.ViewPlugin.fromClass(function(){function t(){(0,i._)(this,t)}return(0,a._)(t,[{key:"update",value:function(t){if(t.docChanged){var n=t.state.facet(m),r=t.state.doc.toString(),i=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;r.includes("@".concat(u.path))||e.onFileRemove(u.path)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}var c=t.state.facet(x),d=!0,f=!1,p=void 0;try{for(var h,g=c[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var y=h.value;r.includes(y.marker)||e.onSnippetRemove(y.marker)}}catch(e){f=!0,p=e}finally{try{d||null==g.return||g.return()}finally{if(f)throw p}}}}}]),t}()):[]});e.s(["FileCompletion",()=>U,"FileCompletionAccepted",()=>G,"FileCompletionRemoval",()=>$],34198);var H=e.i(399119),z=e.i(445789),W=e.i(346715),q=e.i(754686);e.i(508987);var K=e.i(457103),Y=e.i(878420),Q=e.i(64386),X=e.i(806930),Z=e.i(416298),J=e.i(239678),ee=new c.CodeMirrorComponent(function(e){var t,n=(0,k.getFileName)(e.path),r=(0,k.getParentPath)(e.path),i=e.lineRange?(t=e.lineRange).from===t.to?"L".concat(t.from):"L".concat(t.from,"-").concat(t.to):null,a=r||e.warning||e.codePreview;return(0,s.jsx)(P.Tooltip,{isDisabled:!a,tooltip:(0,s.jsxs)(D.View,{gap:4,children:[e.warning?(0,s.jsx)(A.Text,{variant:"small",clsx:J.default.warning,children:e.warning}):null,r?(0,s.jsxs)(A.Text,{variant:"small",color:"dimmest",children:[r,"/"]}):null,e.codePreview?(0,s.jsx)(D.View,{clsx:J.default.codePreview,children:e.codePreview}):null]}),children:function(t,r){return(0,s.jsx)(D.View,(0,Q._)((0,Y._)({clsx:J.default.root,innerRef:r},t),{children:(0,s.jsxs)(D.View,{tag:"button",clsx:J.default.button,onClick:function(){return e.onClick()},children:[(0,s.jsx)(I.default,{size:12,path:e.path}),(0,s.jsx)(A.Text,{variant:"small",children:n}),i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(A.Text,{variant:"small",clsx:J.default.lineRange,children:[":",i]}),(0,s.jsx)(X.default,{size:12})]}):null,e.warning?(0,s.jsx)(Z.default,{size:12}):null]})}))}})}),et=function(e){function t(e,n){var r;return(0,i._)(this,t),r=(0,H._)(this,t),(0,w._)(r,"file",void 0),(0,w._)(r,"onClick",void 0),r.file=e,r.onClick=n,r}return(0,z._)(t,e),(0,a._)(t,[{key:"eq",value:function(e){return this.file.path===e.file.path&&this.file.inclusionStatus===e.file.inclusionStatus}},{key:"toDOM",value:function(){var e=this.file,t=e.path,n=e.inclusionStatus,r=ee.create({path:t,onClick:this.onClick,warning:function(e){switch(e){case"included":default:return null;case"unsupported":return"File not supported";case"truncated":case"overflowing":return"Exceeds memory limit"}}(n)});return r.style.display="inline-flex",r.style.verticalAlign="middle",r.style.lineHeight="1",r.style.userSelect="none",r.style.pointerEvents="auto",r}}]),t}(u.WidgetType),en=function(e){function t(e,n){var r;return(0,i._)(this,t),r=(0,H._)(this,t),(0,w._)(r,"snippet",void 0),(0,w._)(r,"onClick",void 0),r.snippet=e,r.onClick=n,r}return(0,z._)(t,e),(0,a._)(t,[{key:"eq",value:function(e){return this.snippet.marker===e.snippet.marker}},{key:"toDOM",value:function(){var e,t=this.snippet.codeReference,n=null==(e=t.code)?void 0:e.split("\n").slice(0,5).join("\n"),r=ee.create({path:t.filePath,onClick:this.onClick,lineRange:t.range?{from:t.range.lineFrom,to:t.range.lineTo}:void 0,codePreview:n});return r.style.display="inline-flex",r.style.verticalAlign="middle",r.style.lineHeight="1",r.style.userSelect="none",r.style.pointerEvents="auto",r}}]),t}(u.WidgetType),er=function(e,t,n){var r=e.map(function(e){var t=e.path;return"@".concat((0,q.default)(t))}),i=t.filter(function(e){return e.marker&&e.codeReference}).map(function(e){var t=e.marker;return(0,q.default)(t)}),a=(0,W._)(i).concat((0,W._)(r));return 0===a.length?null:new u.MatchDecorator({regexp:RegExp(a.join("|"),"g"),decoration:function(r,i){var a=r[0];if(!a.startsWith("@"))return null;var o=t.find(function(e){return e.marker===a});if(o)return u.Decoration.replace({widget:new en(o,function(){return n.onSnippetClick(o)}),inclusive:!0});var s=a.substring(1),l=e.find(function(e){return e.path===s});return l?u.Decoration.replace({widget:new et(l,function(){return n.onFileClick(s)}),inclusive:!0}):null}})},ei=new d.ReactCompartment(function(e){return e?u.ViewPlugin.fromClass(function(){function t(n){(0,i._)(this,t),(0,w._)(this,"placeholders",void 0),(0,w._)(this,"match",void 0);var r=n.state.facet(m),a=n.state.facet(x);this.match=er(r,a,e),this.placeholders=this.match?this.match.createDeco(n):u.Decoration.none}return(0,a._)(t,[{key:"update",value:function(t){var n=t.state.facet(m),r=t.state.facet(x);if(0===n.length&&0===r.length){this.match=null,this.placeholders=u.Decoration.none;return}if((0,K.hasChanged)(t,m)||(0,K.hasChanged)(t,x)){this.match=er(n,r,e),this.placeholders=this.match?this.match.createDeco(t.view):u.Decoration.none;return}if((0,K.hasChanged)(t,"doc")){if(!this.match){this.match=er(n,r,e),this.placeholders=this.match?this.match.createDeco(t.view):u.Decoration.none;return}this.placeholders=this.match.updateDeco(t,this.placeholders)}}}]),t}(),{decorations:function(e){return e.placeholders},provide:function(e){return u.EditorView.atomicRanges.of(function(t){var n;return(null==(n=t.plugin(e))?void 0:n.placeholders)||u.Decoration.none})}}):[]});e.s(["FileDecorations",()=>ei],177553);var ea=e.i(131141),eo=e.i(541793),es=e.i(924908),el=(0,eo.atom)([]),eu=(0,eo.atom)(null,function(e,t,n){var r,i,a,o,s=null!=(a=null==(r=n.range)?void 0:r.lineFrom)?a:0,l=null!=(o=null==(i=n.range)?void 0:i.lineTo)?o:s,u=b(n.filePath,s,l);return t(el,function(e){return(0,ea.produce)(e,function(e){var t=e.findIndex(function(e){return e.marker===u});t>=0?e[t]={marker:u,codeReference:n}:e.push({marker:u,codeReference:n})})}),u}),ec=(0,eo.atom)(null,function(e,t,n){t(el,function(e){return(0,ea.produce)(e,function(e){var t=e.findIndex(function(e){return e.marker===n});t>=0&&e.splice(t,1)})})}),ed=(0,eo.atom)(null,function(e,t){t(el,[])});function ef(){return(0,es.useValue)(el)}function ep(){return(0,es.useSet)(eu)}function eh(){return(0,es.useSet)(ec)}function em(){return(0,es.useSet)(ed)}e.s(["useAddSnippet",()=>ep,"useClearSnippets",()=>em,"useRemoveSnippet",()=>eh,"useSnippets",()=>ef],556353);var eg=e.i(452412),ev=e.i(858248),ex=e.i(709485),ey=e.i(739521);function eb(e){var t=e.shouldShowUpgradeModal,n=e.isUpgrading,r=e.onUpgradeConfirm,i=e.onUpgradeCancel,a=e.onClose;return(0,s.jsx)(ey.Modal,{isOpen:t,onRequestClose:function(){(0,ev.track)(ex.events.VISUAL_EDITOR_UPGRADE_ACTION,{action:"closed"}),a()},centered:!0,maxWidth:450,children:(0,s.jsx)(eg.default,{title:"Update visual editing tools",confirmLabel:"Update",cancelLabel:"Continue without updating",loading:n,onConfirm:function(){(0,ev.track)(ex.events.VISUAL_EDITOR_UPGRADE_ACTION,{action:"confirmed"}),r()},onCancel:function(){(0,ev.track)(ex.events.VISUAL_EDITOR_UPGRADE_ACTION,{action:"cancelled"}),i()},children:"Installing the update will restart your local app. It'll only take a moment. Proceed with the update?"})})}e.s(["UpgradeModal",()=>eb],448534);var ew=e.i(161322),e_=e.i(69470);function ek(e){var t=(0,ew.useAtomValue)(e_.shouldFocusAgentInputAtom);(0,_.useEffect)(function(){t&&e&&e.focus()},[t,e])}e.s(["useAgentInputFocus",()=>ek],261585);var eS=e.i(830675),eC=e.i(993796),ej=e.i(251204),eT=e.i(414699),eE=e.i(5561),eR=e.i(559491);function eI(e){var t=(0,ew.useSetAtom)(e_.setVisualSelectorElementAtom),n=(0,ew.useSetAtom)(e_.setVisualSelectorActiveAtom),r=(0,ew.useSetAtom)(e_.setSelectorScriptLoadedAtom),i=(0,ew.useSetAtom)(e_.setScreenshotBlobAtom),a=(0,ew.useSetAtom)(e_.clearVisualSelectorElementAtom),o=(0,ew.useSetAtom)(eE.hydrateTextContentAtom),s=(0,ew.useSetAtom)(eE.hydrateEditorStateAtom),l=(0,ew.useSetAtom)(e_.setVersionAtom),u=(0,ew.useSetAtom)(e_.focusAgentInputAtom),c=(0,ew.useAtomValue)(e_.selectedElementMetadataAtom),d=(0,eT.useComponentVisibility)(c),f=(0,eC.useFlag)({type:"string",controlName:"flag-cartographer-version",default:"0.0.10"}),p=(0,eC.useFlag)({type:"boolean",controlName:"flag-killswitch-standalone-beacon"}),h=(0,_.useCallback)(function(){try{a(),(0,eR.sendClearSelectionMessage)()}catch(e){eS.captureException(e)}},[a]);return(0,_.useEffect)(function(){var e=function(e){var a;if((null==(a=e.data)?void 0:a.type)&&(0,ej.isFromWebviewIframe)(e))switch(e.data.type){case"ELEMENT_SELECTED":if(e.data.payload){t(e.data.payload),s(e.data.payload),e.data.payload.screenshotBlob&&i(e.data.payload.screenshotBlob);var u=(0,eR.getSourceIframe)(e);u&&(0,eR.sendClearSelectionMessage)({excludeIframe:u}),(0,ev.track)(ex.events.VISUAL_SELECTOR,{action:"element_selected",element:(0,eR.parseElementFromCartographerMessage)(e.data.payload)})}break;case"ELEMENT_TEXT_CHANGED":e.data.payload&&o(e.data.payload.textContent);break;case"REPLIT_VISUAL_EDITOR_ENABLED":n(!0);break;case"ELEMENT_UNSELECTED":case"REPLIT_VISUAL_EDITOR_DISABLED":h();break;case"SELECTOR_SCRIPT_LOADED":var c=e.data.version;if(l(c),p&&c.includes("standalone"))return;c&&c.localeCompare(f,void 0,{numeric:!0})>-1&&(r(!0),h())}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}},[t,n,r,a,f,i,p,o,s,l,h,e]),(0,_.useEffect)(function(){c&&!d.content&&u()},[c,d.content,u]),{handleClearSelection:h}}e.s(["useBeaconHandler",()=>eI],341470);var eA=e.i(530658),eP=e.i(569384),eD=e.i(973245),eO=e.i(304277);e.i(566901);var eN=e.i(951262);function eM(){var e=(0,eP._)(["\n  query VisualSelectorConfig($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          visualSelectorUpgradeRefused\n        }\n      }\n    }\n  }\n"]);return eM=function(){return e},e}function eL(){var e=(0,eP._)(["\n  mutation UpdateVisualSelectorUpgradeRefused(\n    $replId: String!\n    $visualSelectorUpgradeRefused: String!\n  ) {\n    updateRepl(\n      input: {\n        id: $replId\n        visualSelectorUpgradeRefused: $visualSelectorUpgradeRefused\n      }\n    ) {\n      repl {\n        id\n        config {\n          visualSelectorUpgradeRefused\n        }\n      }\n    }\n  }\n"]);return eL=function(){return e},e}var eB={},eV=(0,eD.gql)(eM()),eF=(0,eD.gql)(eL()),eU=e.i(459781),eG=e.i(222342),e$=e.i(207237),eH=e.i(664152),ez=e.i(927158),eW=e.i(729122),eq=(0,eo.atom)("unchecked");function eK(){var e,t,n,i,a,s,l,u=(0,eA._)((0,_.useState)(!1),2),c=u[0],d=u[1],f=(0,eA._)((0,_.useState)(!1),2),p=f[0],h=f[1],m=(0,ew.useAtomValue)(eq),g=(0,ew.useSetAtom)(eq),x=(0,ew.useAtomValue)(e_.visualSelectorStateAtom).version,y=(0,eW.useOnReRun)(),b=(0,e$.default)(),w=(e={variables:{replId:b}},t=(0,Y._)({},eB,e),eO.useQuery(eV,t)).data,k=(0,eA._)((n={onError:function(){C("Error storing upgrade refusal")}},i=(0,Y._)({},eB,n),eN.useMutation(eF,i)),1)[0],S=(0,eC.useFlag)({controlName:"flag-visual-editor-upgrade-threshold",type:"string",default:"0.4.0"}),C=(0,eG.default)().showError,j=(null==w||null==(a=w.getRepl)?void 0:a.__typename)==="Repl"&&null!=(l=null==(s=w.getRepl.config)?void 0:s.visualSelectorUpgradeRefused)?l:null,T=(0,ez.usePid2Callback)(function(e){return function(){return(0,r._)(function(){var t;return(0,o._)(this,function(n){switch(n.label){case 0:h(!0),n.label=1;case 1:return n.trys.push([1,3,5,6]),[4,e.agentToolPackager.installPackages.rpc({pkgs:["@replit/vite-plugin-cartographer@latest"],language:"nodejs-npm"})];case 2:if(n.sent().ok)d(!1),g("ok"),y();else throw Error("Failed to upgrade cartographer package");return[3,6];case 3:return t=n.sent(),eH.logger.error("Error Upgrading Cartographer Package",{errorMessage:t.message}),C("Error Upgrading Package"),d(!1),g("refused-upgrade"),[4,k({variables:{replId:b,visualSelectorUpgradeRefused:S}})];case 4:return n.sent(),[3,6];case 5:return h(!1),[7];case 6:return[2]}})})()}},[y,g,C,k,b,S]);return{shouldShowUpgradeModal:c,isUpgrading:p,checkVersionAndProceed:(0,_.useCallback)(function(){return"ok"===m||"refused-upgrade"===m||("needs-upgrade"===m?(d(!0),!1):x&&!x.includes("standalone")&&0>(0,eU.compareSemVer)(x.replace(/[^0-9.]/g,""),S)?!!(j&&(0,eU.compareSemVer)(j,S)>=0)||(g("needs-upgrade"),d(!0),!1):(g("ok"),!0))},[g,x,m,S,j]),handleUpgradeConfirm:(0,_.useCallback)(function(){T&&T()},[T]),handleUpgradeCancel:(0,_.useCallback)(function(){d(!1),g("refused-upgrade"),k({variables:{replId:b,visualSelectorUpgradeRefused:S}})},[g,k,b,S]),handleModalClose:(0,_.useCallback)(function(){d(!1)},[]),versionCheckResult:m}}e.s(["usePackageVersionCheck",()=>eK],98791);var eY=e.i(761732),eQ=e.i(801127),eX=e.i(909478),eZ=e.i(529810);function eJ(){var e=(0,eZ.default)().ports,t=(0,eX.useOpenedAndForwardedPorts)(e);return(0,_.useMemo)(function(){return t.some(function(e){return(0,eQ.isGalleryPreviewPort)(e.configuration.localPort)})},[t])}e.s(["useIsGalleryPreviewPortForwarded",()=>eJ],410926);var e0=e.i(423111);function e1(){var e,t=(0,e0.useWebviewPortOpenedObservable)(),n=null!=(e=(0,eY.default)(t))&&e,r=eJ();return n&&!r}e.s(["useIsVisualSelectorCompatibleWebviewAvailable",()=>e1],127154)},319207,446152,e=>{"use strict";var t=e.i(541793),n=e.i(924908),r=(0,t.atom)(null);function i(){return(0,n.useValue)(r)}function a(){return(0,n.useSet)(r)}e.s(["useAgentInputView",()=>i,"useSetAgentInputView",()=>a],319207);var o=e.i(179302),s=new(e.i(700170)).ReactCompartment(function(e){if(e)return o.EditorView.updateListener.of(function(t){if(t.docChanged&&t.transactions.some(function(e){return e.isUserEvent("input")})){var n=0===t.startState.doc.length,r=0===t.view.state.doc.length;n&&!r&&e.agent.warmup()}})});e.s(["AgentWarmupCompartment",()=>s],446152)},854551,e=>{e.v({disabledWithReason:"SendButton-module__4GVtAq__disabledWithReason",root:"SendButton-module__4GVtAq__root"})},732362,e=>{e.v({compactButton:"DynamicPrimaryButton-module__OohzbG__compactButton",iconButton:"DynamicPrimaryButton-module__OohzbG__iconButton",root:"DynamicPrimaryButton-module__OohzbG__root"})},773403,e=>{e.v({button:"ToggleButton-module__BC3XSG__button",selected:"ToggleButton-module__BC3XSG__selected"})},137930,e=>{e.v({fullWidth:"ReadOnlySession-module__fR598W__fullWidth",root:"ReadOnlySession-module__fR598W__root"})},822106,e=>{e.v({isRevising:"FooterRevisionMessages-module__I6It8W__isRevising",revisionFeedbackMessage:"FooterRevisionMessages-module__I6It8W__revisionFeedbackMessage",root:"FooterRevisionMessages-module__I6It8W__root"})},972963,e=>{e.v({drawerContainer:"InitialBuildFooter-module__Mc2-mq__drawerContainer"})},59,e=>{e.v({drawerSurface:"index-module__i6dsBG__drawerSurface",guestUnauthorizedContainer:"index-module__i6dsBG__guestUnauthorizedContainer",hiddenInputBoxContainer:"index-module__i6dsBG__hiddenInputBoxContainer",requiresPaymentContainer:"index-module__i6dsBG__requiresPaymentContainer"})},646983,e=>{e.v({centeredVisualPlanner:"index-module__OxCPea__centeredVisualPlanner",emptyState:"index-module__OxCPea__emptyState",footerContainer:"index-module__OxCPea__footerContainer",footerRow:"index-module__OxCPea__footerRow",isDesktop:"index-module__OxCPea__isDesktop",isMobile:"index-module__OxCPea__isMobile",root:"index-module__OxCPea__root"})},509661,e=>{e.v({divider:"index-module__H41IaW__divider",overlayContainer:"index-module__H41IaW__overlayContainer",scrollArea:"index-module__H41IaW__scrollArea"})},126445,298900,382671,59540,93094,193292,542635,652825,483620,286645,833887,334878,897676,e=>{"use strict";var t,n,r,i=e.i(721281),a=e.i(878420),o=e.i(64386),s=e.i(530658),l=e.i(276385),u=e.i(389959),c=e.i(368964),d=e.i(243202),f=e.i(82259),p=e.i(608572);e.i(925218);var h=e.i(641555),m=e.i(802088),g=e.i(222342),x=e.i(649960),y=e.i(343252),b=e.i(441329),w=e.i(529810),_=e.i(112942),k=e.i(133930),S=e.i(45442),C=e.i(681128),j=e.i(443350),T=e.i(881026),E=e.i(779056),R=e.i(231346),I=e.i(939652),A=e.i(965863),P=e.i(274808),D=e.i(436725),O=e.i(603969),N=e.i(269940),M=e.i(755867),L=e.i(297083),B=e.i(886513),V=e.i(817556),F=e.i(986194),U=e.i(629536),G=e.i(613909),$=e.i(762699),H=e.i(968783),z=e.i(993796),W=e.i(761273),q=e.i(187505),K=e.i(858248),Y=e.i(709485),Q=e.i(952521),X=e.i(884151),Z=e.i(331151),J=e.i(851480),ee=e.i(946223),et=e.i(59730),en=e.i(926617),er=e.i(579048),ei=e.i(18056),ea=e.i(66081),eo=e.i(492008),es=e.i(472625),el=e.i(754071),eu=e.i(20399),ec=e.i(130764),ed=e.i(285591),ef=e.i(39411),ep=e.i(225500),eh=e.i(727894),em=e.i(913811),eg=e.i(690767),ev=e.i(26857),ex=e.i(267473),ey=e.i(53617),eb=e.i(417120),ew=e.i(398462),e_=e.i(644881),ek=e.i(509908),eS=e.i(573605),eC=e.i(76961),ej=e.i(547450),eT=e.i(782672),eE=e.i(330069),eR=e.i(791378),eI=e.i(129928);e.i(877212);var eA=e.i(924908),eP=e.i(267103),eD=e.i(98816),eO=e.i(555829),eN=e.i(346715),eM=e.i(604671),eL=e.i(830675),eB=e.i(634759),eV=e.i(72158),eF=e.i(179302),eU=e.i(425200),eG=e.i(656381),e$=e.i(921760),eH=e.i(825423),ez=e.i(257378),eW=e.i(703613),eq=e.i(564416),eK=e.i(542101),eY=e.i(808032),eQ=e.i(700170),eX=e.i(442966),eZ=e.i(731145),eJ=e.i(631936),e0=e.i(600572),e1=e.i(363605),e2=e.i(58261),e3=e.i(164410);e.i(653863);var e5=e.i(973519),e4=e.i(468142),e8=e.i(230776),e6=e.i(215969),e7=e.i(66830),e9=e.i(157918),te=e.i(34198),tt=e.i(686957),tn=e.i(177553),tr=e.i(683389),ti=e.i(817341),ta=e.i(556353),to=e.i(900433);e.i(619231);var ts=e.i(559491),tl=e.i(691626),tu=e.i(490338),tc=e.i(448534),td=e.i(261585),tf=e.i(341470),tp=e.i(98791),th=e.i(127154),tm=e.i(117807),tg=e.i(469429),tv=e.i(971465),tx=e.i(709867),ty=e.i(319207),tb=e.i(131614),tw=e.i(446152),t_=e.i(956515),tk=e.i(266645),tS=e.i(628576),tC=e.i(200260),tj=e.i(255615),tT=e.i(597853),tE=e.i(183035),tR=e.i(269848),tI=e.i(561873),tA=e.i(110432),tP=e.i(480028),tD=e.i(751273),tO=e.i(625484),tN=e.i(854551),tM=(0,tP.cvarsFrom)("SendButton.module.css",["--background-color","--background-color-hover","--size"]);function tL(e){var t,n,r=e.loading,c=e.variant,d=e.iconOverride,f=e.size,p=e.colorway,h=e.disabled,m=e.disabledReason,g=e.planModeStyle,x=(0,B._)(e,["loading","variant","iconOverride","size","colorway","disabled","disabledReason","planModeStyle"]),y=null!=p?p:"agent"===c?"blue":"teal",b=null!=h?h:r,w=!!(h&&m),_=(0,s._)((0,u.useState)(!1),2),k=_[0],S=_[1],C=function(){S(!0),setTimeout(function(){S(!1)},3e3)};return(0,l.jsx)(tD.Tooltip,{tooltip:m,isDisabled:!w,isOpen:w?k:void 0,placement:"top-start",hideWhenOutOfBounds:!1,children:(0,l.jsx)(tO.View,(0,o._)((0,a._)({align:"center",justify:"center",clsx:[tN.default.root,w&&tN.default.disabledWithReason],style:(n={},(0,i._)(n,tM.backgroundColor,g?tP.tokens.backgroundHighest:tP.colormap[y].dimmer),(0,i._)(n,tM.backgroundColorHover,g?tP.tokens.outlineDimmer:tP.colormap[y].default),(0,i._)(n,tM.size,"".concat(null!=f?f:24,"px")),n),tag:"button",alt:null!=(t=x.alt)?t:"Send",disabled:!w&&b,onMouseDown:function(e){w&&(e.preventDefault(),C())}},x),{children:d||(0,l.jsx)(l.Fragment,{children:r?(0,l.jsx)(tR.default,{}):(0,l.jsx)(tA.default,{})})}))})}var tB=e.i(907371),tV=e.i(140487),tF=e.i(732362);function tU(e){var t=e.primaryAction,n=e.status,r=e.disabled,i=e.disabledReason,s=e.isInMobileWorkspace,u=e.onClick,c=e.isPlanModeEnabled,d="loading"===n,f={submit:{icon:d?(0,l.jsx)(tR.default,{}):(0,l.jsx)(tT.default,{}),alt:d?"Loading":"Send",tooltip:i,dataCy:"ai-prompt-submit",colorway:c?void 0:"primary"},queue:{icon:d?(0,l.jsx)(tR.default,{}):(0,l.jsx)(tT.default,{}),alt:d?"Loading":"Add to ".concat(U.QUEUE_NAME),tooltip:i||"Add to ".concat(U.QUEUE_NAME),dataCy:"ai-prompt-add-to-queue",colorway:"blurple"},save:{icon:d?(0,l.jsx)(tR.default,{}):(0,l.jsx)(tE.default,{}),alt:d?"Loading":"Save",tooltip:i,dataCy:"ai-prompt-save",colorway:"primary"},stop:{icon:(0,l.jsx)(tI.default,{}),alt:"Stop",tooltip:"Stop",dataCy:"ai-prompt-stop",colorway:void 0}},p=(0,o._)((0,a._)({},f[t]),{disabled:r,loading:d}),h=c&&"submit"===t,m=(0,tB.useCreateInteractive)({colorway:p.colorway,disabled:p.disabled});if(s)return(0,l.jsx)(tL,{loading:p.loading,variant:"agent",alt:p.alt,disabled:p.disabled,disabledReason:i,onClick:u,dataCy:p.dataCy,iconOverride:p.icon,colorway:p.colorway,planModeStyle:h});var g=(0,l.jsx)(tj.Button,{isDisabled:p.disabled,onPress:u,"data-cy":p.dataCy,"data-disabled":p.disabled,"data-action":t,clsx:[m.clsx,tF.default.iconButton,tF.default.root],style:m.style,children:p.icon}),x="save"===t;return x&&(g=(0,l.jsx)(tV.Button,{clsx:[tF.default.compactButton,tF.default.root],size:"small","data-disabled":p.disabled,disabled:p.disabled,onClick:u,dataCy:p.dataCy,text:p.alt,iconRight:p.icon,colorway:p.colorway})),(0,l.jsx)(tD.Tooltip,{isDisabled:!p.tooltip||x,tooltip:p.tooltip,placement:"top-end",children:g})}var tG=e.i(624714),t$=e.i(958115),tH=e.i(670413),tz=e.i(136540);function tW(e){var t,n=e.onClick,r=e.disabled;return t=n,(0,u.useEffect)(function(){var e=function(e){"u"===e.key&&(0,tH.getCmdOrCtrl)(e)&&(e.preventDefault(),t())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[t]),(0,l.jsx)(tz.IconButton,{alt:"Select element",size:24,onClick:n,disabled:r,children:(0,l.jsx)(t$.default,{})})}var tq=e.i(773403);function tK(e){var t=e.icon,n=e.tooltip,r=e.onClick,a=e.colorway,o=e.selected,s=void 0!==o&&o,u=e.disabled;return(0,l.jsx)(tD.Tooltip,{tooltip:n,children:(0,l.jsx)(tz.IconButton,{alt:n,tooltipBehavior:"hidden",size:24,disabled:void 0!==u&&u,onClick:r,filled:s,colorway:s?a:void 0,clsx:[tq.default.button,(0,i._)({},tq.default.selected,s)],children:t})})}var tY=e.i(709696),tQ=[],tX=e.i(777110),tZ=e.i(61511),tJ=e.i(245218),t0=e.i(64256),t1=e.i(399119),t2=e.i(904851),t3=e.i(90659),t5=e.i(445789),t4=e.i(753950);e.i(508987);var t8=e.i(457103),t6=e.i(969932),t7="cm-pill-prefix",t9="cm-placeholder-layer",ne="cm-placeholder-dom",nt=eF.EditorView.theme((t={},(0,i._)(t,".".concat(t7),{display:"inline-flex",alignItems:"center",padding:"".concat(tP.tokens.space4),paddingLeft:tP.tokens.space8,marginLeft:"calc(".concat(tP.tokens.space4," * -1)"),borderRadius:tP.tokens.borderRadiusDefault,backgroundColor:tP.tokens.accentPrimaryDimmest,color:tP.tokens.accentPrimaryStronger,fontSize:tP.tokens.fontSizeSmall,height:"20px",minWidth:"max-content",verticalAlign:"middle"}),(0,i._)(t,".".concat(t9),{width:"100%",height:"100%",pointerEvents:"none"}),(0,i._)(t,".".concat(ne),{position:"absolute",width:"100%",pointerEvents:"none",fontFamily:tP.tokens.fontFamilyDefault,color:tP.tokens.foregroundDimmest}),t)),nn=function(e){return 0===e.doc.toString().trim().length},nr=t4.StateField.define({create:nn,update:function(e,t){return nn(t.state)}}),ni=t4.StateEffect.define(),na=function(e){function t(e,n,r,a){var o;return(0,t2._)(this,t),o=(0,t1._)(this,t),(0,i._)(o,"text",void 0),(0,i._)(o,"pillTextColor",void 0),(0,i._)(o,"hasVisualSelectorElement",void 0),(0,i._)(o,"onRemove",void 0),o.text=e,o.pillTextColor=n,o.hasVisualSelectorElement=r,o.onRemove=a,o}return(0,t5._)(t,e),(0,t3._)(t,[{key:"toDOM",value:function(){var e=this,t=document.createElement("span");t.style.display="inline-flex",t.style.alignItems="center";var n=document.createElement("span");n.className=t7,n.style.display="inline-flex",n.style.alignItems="center",n.style.gap=tP.tokens.space4,n.style.color=this.pillTextColor;var r=document.createElement("span");if(r.textContent=this.text,n.appendChild(r),this.onRemove){var i=document.createElement("button");i.style.display="inline-flex",i.style.alignItems="center",i.style.justifyContent="center",i.style.background="none",i.style.border="none",i.style.cursor="pointer",i.style.padding="0",i.style.width="16px",i.style.height="16px",i.style.borderRadius="2px",i.style.color=this.pillTextColor,i.addEventListener("mouseenter",function(){i.style.backgroundColor=tP.tokens.accentPrimaryDimmer}),i.addEventListener("mouseleave",function(){i.style.backgroundColor="transparent"});var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("width","12"),a.setAttribute("height","12"),a.setAttribute("viewBox","0 0 24 24"),a.setAttribute("fill","currentColor");var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("fill-rule","evenodd"),o.setAttribute("d","M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z"),o.setAttribute("clip-rule","evenodd"),a.appendChild(o),i.appendChild(a),i.addEventListener("click",function(t){var n;t.preventDefault(),t.stopPropagation(),null==(n=e.onRemove)||n.call(e)}),n.appendChild(i)}var s=document.createElement("span");return s.style.width=tP.tokens.space8,s.style.display="inline-block",t.appendChild(n),t.appendChild(s),t}},{key:"eq",value:function(e){return e.text===this.text&&e.hasVisualSelectorElement===this.hasVisualSelectorElement&&e.onRemove===this.onRemove}}]),t}(eF.WidgetType),no=e.i(173703),ns=e.i(986212),nl=eF.EditorView.theme((n={"&":{flexGrow:1},"& .cm-content":{fontFamily:tP.tokens.fontFamilyDefault}},(0,i._)(n,"& .".concat(eY.ACTIVE_LINE_LAYER_CLASS),{display:"none"}),(0,i._)(n,"& .cm-cursor",{borderLeftColor:tP.tokens.foregroundDefault,borderLeftWidth:"1px"}),n));function nu(e){var t,n,r,a,o,d,p,m,x,_,k,S,C,j,T,E,I,A=(0,eA.useChatter)(),D=(0,eb.useIsAgentWorking)(),O=(0,eb.usePauseAgent)(),N=(0,tg.useHasAgentCheckpoint)(),M=(0,tm.useAgentStackBlueprint)().initialBuildTier,B=(0,R.useIsInitialAgentSession)(null!=(_=e.sessionId)?_:null),F=(0,eK.default)(),G=F.ref,$=F.view,H=(0,b.useIsInMobileWorkspace)();(0,td.useAgentInputFocus)($);var z=(0,ty.useSetAgentInputView)();(0,u.useEffect)(function(){return z($),function(){$&&z(null)}},[$,z]);var W=(0,ta.useSnippets)(),q=(0,ta.useClearSnippets)(),K=(0,s._)((0,u.useState)(!1),2),Y=K[0],Q=K[1],X=e.agentSettings,Z=e.proposedTaskList,J=e.shouldShowChatModeControl,ee=e.hasInitialPlanningLayout,et=X.settings.chatMode===c.AgentChatMode.Discussion,en=X.settings.chatMode===c.AgentChatMode.QuickEdit,er=et&&D,ei=(0,u.useMemo)(function(){return et?"plan":"build"},[et]),ea=(0,em.useQueueIsOpen)(),eo=(0,em.useEditingQueueItemId)(),es=(0,em.useSetEditingQueueItemId)();(0,e2.useConnectorContext)(),(0,e3.useIsModelfarmEnabled)();var el=null!=(k=e.status)?k:"composing",eu=(0,g.default)().showError,ec=(0,e5.useGlobalModal)().show,ed=e9.MaxLength.use(2e3),ef=(0,tX.usePersistPromptDraft)(e.persistenceKey,$),ep=ef.persistPromptDraftCompartment,eh=ef.clearPersistedPromptDraft,eg=(0,tJ.useUrlContextFeatureKillswitch)(),ev=(0,e7.useAiChatAttachments)(),ex=ev.attachments,ey=ev.urlAttachments,ew=ev.removeAttachment,e_=ev.addAttachments,eS=ev.addUrlAttachment,eC=ev.removeUrlAttachment,ej=ev.clearAttachments,eT=ev.isLoading,eE=null!=(n=(0,eW.useCodeMirrorValue)($,tY.detectedUrlsState))?n:tQ,eR=(0,eJ.useAgentInputFigmaContextProviderState)({source:"workspace",detectedLinks:eE}),eI=(0,eD.default)(eR),eO=(0,u.useCallback)(function(){return eI.current.getFigmaTelemetryData()},[eI]),eB=(0,P.useHasInMessageSecretsContext)(),eV=null!=(S=(0,eW.useCodeMirrorValue)($,e$.HasActiveInMessageSecrets))&&S;(0,P.useBindViewToInMessageSecrets)($);var eY=(0,to.useDropTarget)({addAttachments:e_}),eQ=eY.isDraggedOver,eX=eY.drop,eZ=(0,eP.useObservable)(eT,!1),tb=(0,h.useObservableMemo)(function(){return ex.map(function(e){return e.length>0})},[ex]),tj=(0,u.useCallback)(function(){Q(!0)},[]),tT=(0,u.useCallback)(function(){Q(!1)},[]),tE=(0,u.useCallback)(function(e){if($){var t=$.state.doc.toString(),n=t?"".concat(t,"\n\n").concat(e):e;$.dispatch($.state.update({changes:{from:0,to:$.state.doc.length,insert:n}})),Q(!1),$.focus()}},[$]),tR=(0,eP.useObservable)(ex),tI=(0,tu.useVisualSelector)({context:"agent"}),tA=tI.element,tD=tI.setElement,tN=tI.clearSelection,tM=tI.isActive,tL=tI.isSelectorScriptLoaded,tB=tI.setVisualSelectorEnabled;(0,tf.useBeaconHandler)(ei);var tV=(0,tp.usePackageVersionCheck)(),tF=tV.shouldShowUpgradeModal,t$=tV.isUpgrading,tH=tV.checkVersionAndProceed,tz=tV.handleUpgradeConfirm,tq=tV.handleUpgradeCancel,tK=tV.handleModalClose,t1=(0,eW.useCodeMirrorValue)($,tM?nr:tr.isEmpty),t5=(0,eD.default)(e.onInputEmptyChange);(0,u.useEffect)(function(){if(null!=t1){var e;null==(e=t5.current)||e.call(t5,t1)}},[t1,t5]);var t4=!!tA,t7=!!(null==tA?void 0:tA.filePath),nn=null!=(C=e.placeholderText)?C:(t={agentMode:ei,isQuickEditModeEnabled:en,isVisualSelectorActive:tM,hasVisualSelectorElement:t4,hasInitialPlanningLayout:e.hasInitialPlanningLayout,isAwaitingTaskListApproval:e.isAwaitingTaskListApproval}).hasInitialPlanningLayout||t.isAwaitingTaskListApproval?nf:t.isVisualSelectorActive?"":"plan"===t.agentMode?"".concat(tx.PLAN_MODE_DESCRIPTION_IN_WS,""):t.isQuickEditModeEnabled?"".concat(tx.QUICK_EDIT_MODE_DESCRIPTION,""):"".concat(tx.BUILD_MODE_DESCRIPTION_IN_WS,""),nu=(0,tr.usePlaceholder)({text:nn,disableAnimation:e.disablePlaceholderTextAnimation}),np=(0,u.useCallback)(function(){tB(!1,{shouldClearSelection:!0})},[tB]),nh=(0,u.useRef)(null),nm=(a=(r={pillText:tA?tA.componentName:tx.VISUAL_SELECTOR_PILL_PLACEHOLDER,hasVisualSelectorElement:t4,placeholderText:nn,disableAnimation:e.disablePlaceholderTextAnimation,onPillRemove:np}).pillText,o=r.hasVisualSelectorElement,d=r.placeholderText,m=void 0!==(p=r.disableAnimation)&&p,x=r.onPillRemove,(0,u.useMemo)(function(){var e;return[nr,nt,eF.ViewPlugin.fromClass(function(){function e(t){(0,t2._)(this,e),(0,i._)(this,"decorations",void 0),this.decorations=this.buildDecorations(t)}return(0,t3._)(e,[{key:"update",value:function(e){(e.docChanged||e.viewportChanged)&&(this.decorations=this.buildDecorations(e.view))}},{key:"buildDecorations",value:function(e){var t=[],n=o?tP.tokens.foregroundDefault:tP.tokens.accentPrimaryStronger,r=eF.Decoration.widget({widget:new na(a,n,o,x),side:-1});return t.push(r.range(0)),eF.Decoration.set(t)}}]),e}(),{decorations:function(e){return e.decorations}}),(0,eF.layer)((e=Date.now(),{above:!1,class:t9,update:function(t){var n=!1;return(0,t6.forEachEffect)(t,ni,function(){n=!0,e=Date.now()}),n||(0,t8.hasChanged)(t,nr)},markers:function(t){if(!t.state.field(nr,!1))return[];var n,r,i,a,o,s,l,u=t.coordsAtPos(0);if(!u)return[];var c=t.dom.getBoundingClientRect(),f=u.left-c.left;return[(r=(n={top:u.top-c.top,left:f,height:u.bottom-u.top,placeholderText:d,animateTimestamp:e,disableAnimation:m}).top,i=n.left,a=n.height,o=n.placeholderText,s=n.animateTimestamp,l=n.disableAnimation,{draw:function(){var e=document.createElement("div");if(e.className=ne,e.style.paddingTop=r+"px",e.style.paddingLeft=i+"px",e.style.height=a+"px",l)e.textContent=o;else{var t=o.length,n=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;requestAnimationFrame(function(){e.textContent=o.slice(0,r),r<t&&n(r+1)})};n()}return e},placeholderText:o,animateTimestamp:s,eq:function(e){return this.placeholderText===e.placeholderText&&this.animateTimestamp===e.animateTimestamp}})]}}))]},[a,o,d,m,x])),ng=(0,th.useIsVisualSelectorCompatibleWebviewAvailable)(),nv=(0,b.useIsInMobileWorkspace)(),nx=M===f.AgentInitialBuildTier.AGENT_INITIAL_BUILD_TIER_LITE,ny=B&&(nx||B&&void 0===M)&&!N,nb=t1&&D&&!ny,nw=t1&&!tb&&"composing"===el||"loading"===el||e.isSubmitDisabled||!!e.disabled||eZ||eV||er,n_=e.submitDisabledReason;eV?n_="Please add secret or dismiss the warning":eZ?n_="Please wait for files to finish uploading":er&&(n_="Please wait for the agent to finish working or turn off ".concat(tx.PLAN_MODE_LABEL," mode"));var nk=nb?!D:nw,nS=nb?null:n_,nC=e.onSubmit,nj=e.ensureSession,nT=e.sessionId,nE=(0,w.default)().fs,nR=(0,u.useCallback)(function(e){return(0,L._)(function(){var t,n;return(0,V._)(this,function(r){switch(r.label){case 0:if(!$)return[2];return[4,(0,e8.unpackContentsFromQueuedMessage)({contents:e.contents,readFile:nE.readFile})];case 1:return t=r.sent(),$.dispatch({changes:{from:0,to:$.state.doc.length,insert:t.message},selection:{anchor:t.message.length,head:t.message.length}}),ex.set(t.attachments),t.webviewTargetedElement&&tD(null!=(n=(0,ts.normalizeTargetedElement)(t.webviewTargetedElement))?n:null),t.agentConfig&&X.updateSettings(t.agentConfig),es(e.id),$.focus(),[2]}})})()},[$,ex,tD,es,nE.readFile,X]),nI=(0,u.useCallback)(function(e){return(0,L._)(function(){var t;return(0,V._)(this,function(n){switch(n.label){case 0:return[4,nj()];case 1:if(!(t=n.sent()))return[2];return(0,ek.trackAgentQueueAnalyticsEvent)({action:"queue_message_sent_manually",messageText:e.contents.content,sessionId:t.id}),[4,A.queue.flush({ids:[e.id],session:t.id})];case 2:return n.sent(),[2]}})})()},[A,nj]),nA=(0,u.useCallback)(function(){return(0,L._)(function(){return(0,V._)(this,function(t){return nw||!$||(nC({message:$.state.doc.toString(),attachments:(0,eN._)(ex.current).concat((0,eN._)(ey.current.map(function(e){return e.file}))),agentSettings:X.settings,figma:eO(),snippets:W}),e.shouldBlockMessageSend||(eh(),ej(),q(),$.dispatch({effects:tY.clearDetectedUrlsEffect.of(null)}),$.dispatch({changes:{from:0,to:$.state.doc.length}}))),[2]})})()},[nw,$,eh,nC,ex,ey,X.settings,eO,ej,q,W,e.shouldBlockMessageSend]),nP=(0,tZ.useSetPromptEditor)({view:$,setPromptEditor:e.inputRef}),nD=tG.HandlePasteCompartment.use({addAttachments:e_,onAutoAttachedLargePaste:function(e){(0,ek.trackAgentAnalyticsEvent)({action:"auto_attached_large_paste",fileSize:e,sessionId:nT})}}),nO=te.FileCompletion.use(e.findFiles),nN=e.openPane,nM=(0,u.useCallback)(function(e){null==nN||nN({type:"file",data:{path:e}})},[nN]),nL=tn.FileDecorations.use({onFileClick:nM,onSnippetClick:function(e){return nM(e.codeReference.filePath)}}),nB=tt.FileContext.use(e.fileContextInclusions),nV=ti.SnippetContext.use(W),nF=e.updateFileContext,nU=(0,ta.useRemoveSnippet)(),nG=te.FileCompletionAccepted.use((0,u.useCallback)(function(e){return null==nF?void 0:nF({path:e,preference:"include"})},[nF])),n$=te.FileCompletionRemoval.use({onFileRemove:(0,u.useCallback)(function(e){return null==nF?void 0:nF({path:e,preference:"exclude"})},[nF]),onSnippetRemove:(0,u.useCallback)(function(e){return nU(e)},[nU])}),nH=(0,y.useMergeRefs)([eX,nP],{breadcrumb:"client/workspace/components/Agent/Chat/InputBox/index.tsx"}),nz=(0,e6.useIsUserMessageMostRecentEvent)({sessionId:nT}),nW=D||nz,nq=(0,em.useSetQueueIsOpen)(),nK=(0,u.useCallback)(function(){return(0,L._)(function(){var e,t,n,r;return(0,V._)(this,function(i){switch(i.label){case 0:if(t=(null!=(e=null==$?void 0:$.state.doc.toString())?e:"").trim(),n=(0,e8.packContentsForQueuedMessage)({text:t,attachedFiles:(0,eN._)(ex.current).concat((0,eN._)(ey.current.map(function(e){return e.file}))),agentConfig:X.settings,targetedElement:tA}),!t)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,A.queue.enqueue({contents:n})];case 2:return i.sent(),(0,ek.trackAgentQueueAnalyticsEvent)({action:"queue_message_added",messageText:t,sessionId:nT}),[3,4];case 3:return r=i.sent(),eu("Failed to add message to queue"),eL.captureException(r),[2];case 4:return $&&$.dispatch({changes:{from:0,to:$.state.doc.length},effects:tY.clearDetectedUrlsEffect.of(null)}),ej(),tB(!1,{shouldClearSelection:!0}),nq(!0),[2]}})})()},[$,ex,ey,X.settings,tA,ej,tB,nq,A,eu,nT]),nY=(0,u.useCallback)(function(){return(0,L._)(function(){var e,t,n;return(0,V._)(this,function(r){switch(r.label){case 0:if(!eo)return[2];return t=(null!=(e=null==$?void 0:$.state.doc.toString())?e:"").trim(),n=(0,e8.packContentsForQueuedMessage)({text:t,attachedFiles:(0,eN._)(ex.current).concat((0,eN._)(ey.current.map(function(e){return e.file}))),agentConfig:X.settings,targetedElement:tA}),[4,A.queue.update({id:eo,contents:n})];case 1:return r.sent().ok?((0,ek.trackAgentQueueAnalyticsEvent)({action:"queue_message_edited",messageText:t,sessionId:nT}),null==$||$.dispatch({changes:{from:0,to:$.state.doc.length,insert:""},effects:tY.clearDetectedUrlsEffect.of(null)}),ej(),tN(),es(null),tY.clearDetectedUrlsEffect.of(null)):eu("Failed to save queued message"),[2]}})})()},[eo,$,ex,ey,X,tA,A,ej,tN,es,eu,nT]),nQ=(0,u.useMemo)(function(){return null!=ee&&ee?"submit":eo?"save":nb?"stop":nW&&!et?"queue":"submit"},[ee,eo,nW,et,nb]),nX=(0,u.useCallback)(function(){switch(nQ){case"submit":nA();break;case"queue":nK();break;case"save":nY();break;case"stop":O()}},[nQ,nA,nK,nY,O]),nZ=(0,eD.default)(nX),nJ=(0,u.useCallback)(function(){eo&&$&&($.dispatch({changes:{from:0,to:$.state.doc.length},effects:tY.clearDetectedUrlsEffect.of(null)}),ej(),tN(),es(null))},[eo,$,ej,tN,es]),n0=nd.use({onPrimaryAction:(0,u.useCallback)(function(){nZ.current()},[nZ]),onCancelEdit:nJ,isEditingQueueItem:!!eo,isVisualSelectorActive:tM,onCancelVisualSelector:(0,u.useCallback)(function(){tM&&tB(!1,{shouldClearSelection:!0})},[tM,tB])}),n1=(0,u.useCallback)(function(){!$||(tM?tB(!1,{isEditingEnabled:!1}):tH()&&tB(!0,{isEditingEnabled:!0}))},[$,tB,tM,tH]),n2=(0,h.useObservableMemo)(function(){return nT?A.sessions.get(nT):null},[A,nT],{default:null}),n3=tw.AgentWarmupCompartment.use(n2),n5=(0,l.jsx)(tk.default,{clsx:ns.default.attachments,detectedUrls:eE.map(function(e){return(0,l.jsx)(tS.default,{source:"workspace",url:e,addUrlAttachment:eS,removeUrlAttachment:eC,onError:eu},e)}),fileAttachments:tR.map(function(e){return(0,l.jsx)(tC.FileAttachment,{attachment:e,removeAttachment:ew,getAttachmentTypeDisclaimer:(0,t0.getAttachmentTypeDisclaimer)({aiName:(0,U.getAgentName)({capitalizeFirstChar:!0})})},e.path)})});return(0,l.jsx)(eJ.AgentInputFigmaContext.Provider,{value:eR,children:(0,l.jsxs)(tO.View,{clsx:[ns.default.outer,(0,i._)({},ns.default.autoHeight,e.hasInitialPlanningLayout||e.isAwaitingTaskListApproval)],innerRef:nh,children:[(0,l.jsx)(tl.TargetedElementEditor,{openPane:e.openPane}),Z?null:(0,l.jsx)(e4.QueueDrawer,{isDisabled:null!=(j=e.disabled||et)&&j,onEnterEditMode:nR,sendQueuedMessage:nI,banner:e.queueBanner}),(0,l.jsx)(tO.View,{clsx:ns.default.wrapper,children:(0,l.jsx)(tO.View,{gap:4,children:(0,l.jsxs)(no.ShadesSurface,{p:4,gap:4,grow:!0,shrink:!0,clsx:[ns.default.surface,(0,i._)({},ns.default.withDrawer,!!e.isAwaitingTaskListApproval||!!e.isFastModeStarterDrawerVisible||t7)],innerRef:nH,style:{borderColor:eQ?tP.tokens.accentPrimaryDefault:void 0},"aria-disabled":!!e.disabled||void 0,"data-queue-connected":ea,onClick:function(e){e.target===e.currentTarget&&(null==$||$.focus())},children:[null!=(T=e.header)?T:null,Y?(0,l.jsx)(e0.FigmaUrlInput,{source:"workspace",onCancel:tT,onSubmit:tE}):null,(0,l.jsxs)(tO.View,{grow:!0,shrink:!0,gap:4,style:{display:Y?"none":"flex"},children:[(0,l.jsx)(eq.default,{"data-chromatic":"ignore",ref:G,clsx:ns.default.codemirror,style:{cursor:e.disabled?"default":void 0},fontSize:14,readOnly:e.disabled,extensions:[nl,n0,nD,tM?nm:nu,e9.characterLimit,ed,ep,ez.autocorrectExtension,eH.autocapitalizeExtension,eB?e$.InMessageSecretScanner:[],eg?[]:tY.UrlAttachmentExtensions,eG.slashCommandExtension,eU.inboxTopicExtension,n3,e.hasInitialPlanningLayout?[]:[nB,nV,nL,nO,nG,n$]],id:"ai-prompt-input","data-cy":"ai-prompt-input"}),n5]}),(0,l.jsx)(eM.UNSTABLE_PortalProvider,{getContainer:function(){return nv?nh.current:document.body},children:Y?null:(0,l.jsxs)(tO.View,{row:!0,gap:4,clsx:ns.default.primaryButtonGroup,pb:2,justify:"space-between",align:"end",onClick:function(e){e.target===e.currentTarget&&(null==$||$.focus())},children:[(0,l.jsxs)(tO.View,{row:!0,gap:H?12:4,align:"center",children:[(void 0===J||J)&&!eo&&X?(0,l.jsx)(tO.View,{pl:2,children:(0,l.jsx)(tv.AgentChatModeDropdown,{disabled:null!=(E=e.disabled)&&E,onChatModeChange:function(e){return X.updateSettings({chatMode:"plan"===e?c.AgentChatMode.Discussion:c.AgentChatMode.General})},chatMode:ei,keyboardShortcutEnabled:!nv,onModeSwitchFocusInput:function(){!H&&$&&queueMicrotask(function(){$.focus()})},isFreeUser:e.isFreemiumV2User,onPlanModeUpsell:function(){ec("UpgradeEducationModal",{context:"agent_home_plan_mode_upsell",surface:"agent_chat",highlightedFeature:"planMode"})}})}):null,ng&&tL&&!nv?(0,l.jsx)(tW,{onClick:n1,disabled:e.isVisualSelectorDisabled}):null,(0,l.jsx)(t_.AttachmentButton,{source:"workspace",disabled:e.disabled,status:el,addAttachments:e_,onFigmaImportClick:tj})]}),(0,l.jsxs)(tO.View,{pr:2,align:"center",row:!0,gap:8,children:[et?null:(0,l.jsx)(nc,{agentSettings:X,disabled:null!=(I=e.disabled)&&I,isFreemiumV2User:e.isFreemiumV2User,isFreemiumUserV1RestrictedToFastMode:e.isFreemiumUserV1RestrictedToFastMode,isFastModeUnavailable:e.hasInitialPlanningLayout,onToggleQuickEditMode:e.onToggleQuickEditMode}),(0,l.jsx)(tU,{primaryAction:nQ,status:el,disabledReason:nS,disabled:nk,isInMobileWorkspace:H,onClick:nX,isPlanModeEnabled:et})]})]})})]})})}),(0,l.jsx)(e1.FigmaAuthModal,{}),(0,l.jsx)(tc.UpgradeModal,{shouldShowUpgradeModal:tF,isUpgrading:t$,onUpgradeConfirm:tz,onUpgradeCancel:tq,onClose:tK})]})})}function nc(e){var t=e.agentSettings,n=e.disabled,r=e.isFreemiumV2User,i=e.isFreemiumUserV1RestrictedToFastMode,a=e.isFastModeUnavailable,o=e.onToggleQuickEditMode,d=(0,q.useTrackClick)().trackClick,f=(0,e5.useGlobalModal)().show,p=(0,Q.useMemoedDismissibleElement)("agent-quick-edit-chat-footer-banner").setAsDone,h=(0,s._)((0,u.useState)(!1),2),m=h[0],g=h[1],x=t.settings.chatMode===c.AgentChatMode.QuickEdit,y=(0,tm.useAgentStackBlueprint)().stackBlueprint,b=(0,eE.useShouldSeeFreemiumExperience)().shouldSeeFreemiumExperience,w=(0,$.usePromptLimitOpusExperiment)(),_=y===eB.StackBlueprint.STACK_BLUEPRINT_EXPO&&b,k=w&&b;return t.loading?null:(0,l.jsxs)(tO.View,{row:!0,gap:4,align:"center",children:[a?null:(0,l.jsx)(tK,{icon:x?(0,l.jsx)(eZ.default,{size:16}):(0,l.jsx)(eX.default,{size:16}),tooltip:_?"Fast mode is unavailable for mobile apps":"Fast",disabled:_,selected:x,colorway:"yellow",onClick:function(){return(0,L._)(function(){return(0,V._)(this,function(e){switch(e.label){case 0:if(_)return[2];if(d({target:"fast_mode_toggle_button",productArea:"agent"}),null==o||o(),!r)return[3,2];return[4,f("UpgradeEducationModal",{context:"agent_workspace_autonomous_mode_upsell",surface:"agent_chat",highlightedFeature:"autonomousBuildMode"})];case 1:return e.sent(),[2];case 2:return x?t.updateSettings({chatMode:c.AgentChatMode.General}):t.updateSettings({chatMode:c.AgentChatMode.QuickEdit}),p(),[2]}})})()}}),(0,l.jsx)(tb.AgentSettingsDropdown,{disabled:n||t.loading,agentSettings:t,isOpen:m,onOpenChange:g,isFreemiumUserV1RestrictedToFastMode:i,fastModeDisabledReason:_?"Fast mode is unavailable for mobile apps":a?"Fast mode is not available while planning":void 0,isFreeUserRestrictedToLowAutonomy:_||k})]})}var nd=new eQ.ReactCompartment(function(e){var t=e.onPrimaryAction,n=e.preventSubmitOnEnter,r=e.onCancelEdit,i=e.isEditingQueueItem,a=e.isVisualSelectorActive,o=e.onCancelVisualSelector;return eF.EditorView.domEventHandlers({keydown:function(e,s){if("Escape"===e.key){if(i&&r){e.preventDefault(),r();return}if(a&&o){e.preventDefault(),o();return}}if("Backspace"===e.key&&a&&o){var l=s.state.doc,u=s.state.selection.main;if(0===l.length&&0===u.head){e.preventDefault(),o();return}}(0,eV.currentCompletions)(s.state).length>0||!n&&("Enter"===e.key&&e.metaKey&&e.stopPropagation(),"Enter"!==e.key||e.shiftKey||(e.preventDefault(),t()))}})}),nf="Message ".concat(U.AGENT_NAME,""),np=e.i(96250),nh=e.i(593767),nm=e.i(960178),ng=e.i(137930);function nv(e){var t=e.onNewSession,n=e.onResumeCurrentChat,r=e.shouldUseFullWidth;return(0,l.jsxs)(tO.View,{clsx:[ng.default.root,(0,i._)({},ng.default.fullWidth,r)],gap:8,p:8,justify:"center",align:"center",children:[(0,l.jsx)(nm.Text,{variant:"small",color:"dimmer",children:"This chat has ended"}),(0,l.jsxs)(tO.View,{row:!0,gap:8,wrap:"wrap",justify:"center",grow:!0,shrink:!0,children:[(0,l.jsx)(tV.Button,{iconLeft:(0,l.jsx)(nh.default,{size:16}),onClick:t,text:"Start a new chat"}),(0,l.jsx)(tV.Button,{iconLeft:(0,l.jsx)(np.default,{size:16}),onClick:n,text:"Resume current chat"})]})]})}function nx(e){var t,n,r=e.isLoadingUsageOrAuthorization,i=e.sendMessage,s=e.ensureSession,c=e.session,d=e.inputRef,p=e.onNewSession,m=e.onOpenSession,g=e.openPane,x=e.shouldInterruptAgentOnSubmit,y=void 0!==x&&x,b=e.onSubmit,w=e.hasInitialPlanningLayout,k=e.shouldBlockMessageSend,S=void 0!==k&&k,C=(0,B._)(e,["isLoadingUsageOrAuthorization","sendMessage","ensureSession","session","inputRef","onNewSession","onOpenSession","openPane","shouldInterruptAgentOnSubmit","onSubmit","hasInitialPlanningLayout","shouldBlockMessageSend"]),j=(0,eb.useAgentState)(),T=j.agentState,E=j.updateAgentState,R=(0,h.useObservableMemo)(function(){return null==T?void 0:T.map(function(e){return(null==e?void 0:e.state)===f.AgentRunState.AGENT_STATE_RUNNING})},[T]),I=(0,P.useInMessageSecrets)().inMessageSecrets.length>0,A=(0,eT.useNixError)(),D=(0,eA.useChatter)(),N=(0,eP.useObservable)(D.sessions.agent.current),M=(0,eD.default)(b),L=(0,u.useCallback)(function(e){if(y&&R&&E(f.AgentRunState.AGENT_STATE_PAUSED),null==(t=M.current)||t.call(M,e.message),!S){var t,n=e.agentSettings?(0,_.convertAgentSettingsFromGQLToAiChat)(e.agentSettings,{agentMode:w?f.AgentMode.AGENT_MODE_INITIAL_PLANNING:void 0}):void 0;i((0,o._)((0,a._)({},e),{agentConfig:n}))}},[i,y,E,R,M,S,w]),V=(0,O.useIsAgentSessionReadOnly)(null!=(t=null==c?void 0:c.id)?t:null),F=(0,u.useCallback)(function(){N&&m(N)},[N,m]);if(V)return(0,l.jsx)(nv,{onNewSession:p,onResumeCurrentChat:F,shouldUseFullWidth:!0});var U=null;r?U="Loading":A&&(n=!0,U="App is in recovery mode");var G=void 0;return I&&(G=(0,l.jsx)(eO.InMessageSecretsWarning,{openSecrets:function(){return g({type:"envEditor"})}})),(0,l.jsx)(nu,(0,o._)((0,a._)({},C),{header:G,inputRef:d,sessionId:(null==c?void 0:c.id)||void 0,hasInitialPlanningLayout:w,disabled:null!=n?n:C.disabled,isSubmitDisabled:null!==U,submitDisabledReason:U,openPane:g,onSubmit:L,ensureSession:s,onInputEmptyChange:C.onInputEmptyChange,queueBanner:C.queueBanner,shouldBlockMessageSend:S}))}var ny=e.i(138716),nb=e.i(624782),nw=e.i(822106);function n_(e){var t=e.isRevising,n=e.isAgentRunning,r=e.isNarrowViewport,a=e.handleBackButtonClick,o=e.children;return(0,l.jsxs)(tO.View,{clsx:[nw.default.root,(0,i._)({},nw.default.isRevising,t)],children:[t?(0,l.jsxs)(tO.View,{row:!0,align:"center",py:8,gap:8,children:[(0,l.jsx)(tV.Button,{onClick:a,text:n?"Resume":"Back",colorway:"primary",iconLeft:(0,l.jsx)(ny.default,{}),size:"small"}),(0,l.jsx)(nb.Pill,{clsx:nw.default.revisionFeedbackMessage,text:n?r?"Requesting edits will cancel in-progress work.":"".concat(U.AGENT_NAME," is working. Requesting edits will cancel in-progress work."):"What would you like to change about the plan?"})]}):null,o]})}function nk(e){var t=e.isRevising,n=e.isNarrowViewport,r=e.handleBackButtonClick,i=e.children;return(0,l.jsxs)(tO.View,{children:[t?(0,l.jsxs)(tO.View,{row:!0,align:"center",py:8,gap:8,children:[(0,l.jsx)(tV.Button,{onClick:r,text:"Back",colorway:"primary",iconLeft:(0,l.jsx)(ny.default,{}),size:"small"}),(0,l.jsx)(nb.Pill,{clsx:nw.default.revisionFeedbackMessage,colorway:"blurple",text:n?"What would you like to change?":"What would you like to change about the plan?"})]}):null,i]})}var nS=e.i(167626),nC=e.i(145864),nj=e.i(593366),nT=e.i(569384),nE=e.i(973245),nR=e.i(951262);function nI(){var e=(0,nT._)(["\n  mutation InitializeAgentStackReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isAgentStack\n          agentStackPlatformType\n        }\n      }\n    }\n  }\n"]);return nI=function(){return e},e}var nA={},nP=(0,nE.gql)(nI()),nD=e.i(207237),nO=e.i(492267),nN=e.i(293265),nM=(r={},(0,i._)(r,f.AgentStackTriggerType.SLACK_MESSAGE,c.AgentStackPlatformType.Slack),(0,i._)(r,f.AgentStackTriggerType.TELEGRAM_MESSAGE,c.AgentStackPlatformType.Telegram),(0,i._)(r,f.AgentStackTriggerType.TIME_BASED,c.AgentStackPlatformType.TimeBased),(0,i._)(r,f.AgentStackTriggerType.CONNECTOR_TRIGGER,c.AgentStackPlatformType.ConnectorTrigger),r),nL=e.i(374106),nB=e.i(149448),nV={direction:"forward",state:{visualPhaseRequestCount:0},map:function(e){return e.visualPhaseRequestCount},reducer:function(e,t){if((0,nL.isEventContentsKind)(e,"agentAskUserForActionRequest")){var n=e.contents.contents,r=(0,F.unkind)(n).request;r&&(0,F.isKind)(r,"approveInitialBuildVisualPhaseRequest")&&t.visualPhaseRequestCount++}}},nF=e.i(972963);function nU(e){var t,n,r,i,c,d,p,m,x,y,w,k,C,j,T,E,R,I,A,P,D,O=e.session,N=e.onQuotaExceededRetrySubmit,M=e.shouldBlockMessageSend,F=(0,B._)(e,["session","onQuotaExceededRetrySubmit","shouldBlockMessageSend"]),U=(0,b.useIsInMobileWorkspace)(),G=(A=(0,nB.useLastEvent)(null!=O?O:null),P=(0,eb.useIsAgentWorking)(),(0,u.useMemo)(function(){if(!(null==A?void 0:A.event))return{isAgentAwaitingUserResponse:!1,needsAgentAckForUserMessage:!1,isGeneratingInitialPlanSteps:!1};var e=(0,nL.isEventContentsKind)(A.event,"agentPlanEventContents")&&A.event.contents.contents.agentPlanEventContents.requiresApproval;return{isAgentAwaitingUserResponse:!P&&(null==A?void 0:A.senderType)===f.UserType.AI&&!e,needsAgentAckForUserMessage:(null==A?void 0:A.senderType)===f.UserType.USER&&A.event.state===f.EventState.COMPLETE,isGeneratingInitialPlanSteps:(0,nL.isEventContentsKind)(A.event,"agentPlanEventContents")&&A.event.state===f.EventState.IN_PROGRESS&&0===A.event.contents.contents.agentPlanEventContents.step.subSteps.length}},[A,P])),$=G.isAgentAwaitingUserResponse,H=G.needsAgentAckForUserMessage,z=(0,W.useBreakpoint)("mobileMax"),q=(0,nC.useAgentPlanApprovalState)(),K=(t=O,n=F.numPlansProposed,y=(0,eA.useYapper)(),w=(0,eP.useObservable)(y.user),k=(0,nC.useGetAgentPlanApprovalState)(),C=(0,nC.useSetAgentPlanApprovalState)(),j=(0,nC.useProposedPlan)(),T=(r=null!=t?t:void 0,i=(0,S.useAgentSettings)(),(0,u.useCallback)(function(e){var t,n=(0,_.convertAgentSettingsFromGQLToAiChat)(i.settings);return null==r?void 0:r.appendEvent({kind:"approvePlan",planEventId:e.planEventId,approver:e.approver,initialBuildMode:e.initialBuildMode,userSecretsResponse:null!=(t=e.userSecretsResponse)?t:{providedSecrets:[]},agentConfig:n})},[r,i.settings])),E=(0,g.default)().showError,R=null==t?void 0:t.id,I=(d=(0,s._)((c=(0,a._)({},nA,void 0),nR.useMutation(nP,c)),1)[0],p=(0,nD.default)(),m=(0,nO.useIsAgentStackRepl)().refetch,x=(0,nN.useAgentStackPlatformType)().refetch,(0,u.useCallback)(function(e){return(0,L._)(function(){return(0,V._)(this,function(t){switch(t.label){case 0:return[4,d({variables:{input:{id:p,isAgentStack:!0,agentStackPlatformType:nM[e||f.AgentStackTriggerType.TIME_BASED]}}})];case 1:return t.sent(),[4,m()];case 2:return t.sent(),[4,x()];case 3:return t.sent(),[2]}})})()},[d,p,m,x])),(0,u.useCallback)(function(e){return(0,L._)(function(){var t,r;return(0,V._)(this,function(i){switch(i.label){case 0:t=k(),i.label=1;case 1:if(i.trys.push([1,5,,6]),!j)throw Error("No plan to approve");if("approved"===t)throw Error("Plan already approved");if(j.stackBlueprint!==eB.StackBlueprint.STACK_BLUEPRINT_AGENT)return[3,3];return[4,I(j.agentStackTriggerType)];case 2:i.sent(),i.label=3;case 3:return C("approved"),(0,ek.trackAgentPlanningAnalyticsEvent)({action:"plan_approved",sessionId:R,planBlueprints:j.step.blueprints,agentStackTriggerType:j.agentStackTriggerType,numPlansProposed:n,skipRapidBuild:!0,initialBuildMode:e.initialBuildMode,stackBlueprint:j.stackBlueprint}),[4,T({planEventId:j.eventId,approver:w,initialBuildMode:e.initialBuildMode})];case 4:return i.sent(),[3,6];case 5:return r=i.sent(),E((0,nS._)(r,Error)?r.message:"Failed to approve plan"),C(t),[3,6];case 6:return[2]}})})()},[T,j,E,R,n,k,C,I,w])),Y=F.numPlansProposed>0,Q=(0,nC.useSetAgentPlanApprovalState)(),X=(0,eb.useAgentState)().agentState,Z=(0,h.useObservableMemo)(function(){return null==X?void 0:X.map(function(e){return(null==e?void 0:e.state)===f.AgentRunState.AGENT_STATE_RUNNING})},[X]),J=(0,nC.useProposedPlan)();switch(q){case null:if($)break;return null;case"generating":case"approved":return null;case"iterating":if($&&!Y)break;if(H||Z)return null;D=(0,l.jsx)(eI.AgentPlanApprovalDialog,{isInMobileWorkspace:U,onStartBuilding:K,stackBlueprint:null==J?void 0:J.stackBlueprint,sessionId:null==O?void 0:O.id});break;case"awaiting-approval":D=(0,l.jsx)(eI.AgentPlanApprovalDialog,{isInMobileWorkspace:U,onStartBuilding:K,stackBlueprint:null==J?void 0:J.stackBlueprint,sessionId:null==O?void 0:O.id})}return D?(0,l.jsx)(tO.View,{children:D}):(0,l.jsxs)(n_,{isRevising:"revising"===q,isAgentRunning:Z,isNarrowViewport:z,handleBackButtonClick:function(){Q("awaiting-approval")},children:[M?(0,l.jsx)(tO.View,{clsx:nF.default.drawerContainer,children:(0,l.jsx)(el.QuotaExceededBanner,{})}):null,(0,l.jsx)(nx,(0,o._)((0,a._)({},F),{session:O,isVisualSelectorDisabled:"revising"===q,placeholderText:"revising"===q?nf:void 0,shouldInterruptAgentOnSubmit:!1,shouldShowChatModeControl:!1,shouldBlockMessageSend:M,onSubmit:function(e){null==N||N(),"revising"===q&&(0,ek.trackAgentPlanningAnalyticsEvent)({action:"plan_revision_message_sent",sessionId:null==O?void 0:O.id,messageText:e,skipRapidBuild:!0,stackBlueprint:null==J?void 0:J.stackBlueprint}),M||Q("iterating")}}))]})}function nG(e){var t,n,r,i,s=e.session,c=e.initialBuildPhase,d=e.onQuotaExceededRetrySubmit,p=e.shouldBlockMessageSend,m=(0,B._)(e,["session","initialBuildPhase","onQuotaExceededRetrySubmit","shouldBlockMessageSend"]),g=(0,b.useIsInMobileWorkspace)(),x=(0,z.useFlag)({controlName:"flag-build-score-survey",default:!1}),y=(0,C.useInitialBuildProposedTaskList)(s),w=(0,ef.useAgentAskUserForActionRequest)(s),k=(0,h.useObservableMemo)(function(){return null==s?void 0:s.reduce(nV,100)},[s],{default:0}),j=(0,G.useDismissActionRequest)(),T=(0,G.useIsActionRequestDismissed)(),E=(0,nj.useGetInitialBuildApprovalUserSecretsResponse)(),R=(0,nj.useClearInitialBuildApprovalUserSecretsResponse)(),I=(t=(0,ev.useSendAskUserForActionResponse)(s),n=(0,S.useAgentSettings)(),(0,u.useCallback)(function(e){var r=e.phase,i=e.approved,a=e.userSecretsResponse,o=e.addingIntegrationsResponse,s=e.requestEventId,l=(0,_.convertAgentSettingsFromGQLToAiChat)(n.settings);return"visual"===r?t({type:"approveInitialBuildVisualPhaseResponse",data:{approved:i,userSecretsResponse:a,addingIntegrationsResponse:o,agentConfig:l},requestEventId:s}):t({type:"approveInitialBuildMvpResponse",data:{approved:i,userSecretsResponse:a,addingIntegrationsResponse:o,agentConfig:l},requestEventId:s})},[t,n.settings])),A=(0,u.useCallback)(function(e,t){if(null==w?void 0:w.eventId){var n,r=null!=(n=E())?n:{providedSecrets:[]};I({phase:e,approved:t.approved,userSecretsResponse:r,addingIntegrationsResponse:{connectionIds:[],rejectedConnectionIds:[],rejectedConnectorIds:[]},requestEventId:w.eventId}),j(w.eventId),R(),t.approved&&(0,ek.trackAgentAnalyticsEvent)({action:"initial_build_approved",sessionId:null==s?void 0:s.id,initialBuildMode:"visual"===e?"design":"full_build"})}},[I,w,E,j,R,null==s?void 0:s.id]),P=(0,u.useCallback)(function(e){(null==w?void 0:w.eventId)&&(e?A("visual",{approved:!1}):j(w.eventId))},[A,j,null==w?void 0:w.eventId]),D=(0,u.useCallback)(function(){(null==w?void 0:w.eventId)&&j(w.eventId)},[j,null==w?void 0:w.eventId]),O=T(null==w?void 0:w.eventId);return(c===f.InitialBuildPhase.INITIAL_BUILD_PHASE_VISUAL_COMPLETE_PENDING_REVIEW&&w&&(0,F.isKind)(w.content,"approveInitialBuildVisualPhaseRequest")&&!O&&(r=(0,l.jsx)(eI.AgentInitialBuildVisualReviewDialog,{onStart:function(){return A("visual",{approved:!0})},onDismiss:P,isInMobileWorkspace:g,visualPhaseRequestCount:k,isApprovalResponseInProgress:w.isResponseInProgress})),c===f.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_COMPLETE_PENDING_REVIEW&&w&&(0,F.isKind)(w.content,"approveInitialBuildMvpRequest")&&!O&&(y&&(i=(0,l.jsx)(eg.TaskListDrawer,(0,o._)((0,a._)({},y),{approvalStatus:"proposed",placement:"bottom"}))),r=(0,l.jsx)(eI.AgentInitialBuildMVPReviewDialog,{onStart:function(){return A("mvp",{approved:!0})},onDismiss:D,isInMobileWorkspace:g,hasDrawerAbove:!!i})),r)?(0,l.jsxs)(tO.View,{children:[i?(0,l.jsx)(tO.View,{clsx:nF.default.drawerContainer,children:i}):null,r]}):(0,l.jsxs)(tO.View,{gap:8,children:[x?(0,l.jsx)(et.BuildScoreSurveyDialog,{}):null,(0,l.jsxs)(tO.View,{gap:0,children:[p?(0,l.jsx)(tO.View,{clsx:nF.default.drawerContainer,children:(0,l.jsx)(el.QuotaExceededBanner,{})}):null,(0,l.jsx)(nx,(0,o._)((0,a._)({},m),{session:s,shouldBlockMessageSend:p,onSubmit:function(e){null==d||d()}}))]})]})}var n$=e.i(871318),nH=e.i(59);function nz(e){var t=(0,H.useCurrentUserStoredOrgContext)(),n=t.orgId,r=t.orgSlug,i=(0,ew.useSessionError)(),s=(0,eT.useNixError)(),u=(0,eb.useAgentState)(),c=u.agentState,d=u.updateAgentState,p=(0,h.useObservableMemo)(function(){return null==c?void 0:c.map(function(e){return null==e?void 0:e.reason})},[c],{default:null}),m=(0,ep.useAgentAuthorization)(),g=m.authorizations,x=m.loading,y=m.refetch,b=m.isOwner,w=m.isOrgRepl,_=(0,eS.useGetAgentFreeUsage)(),k=_.agentUsage,S=_.agentUsageV2,C=_.loading,j=_.refetch,T=(0,ej.useIsGuestInStarterPlanUserRepl)(),E=(0,eE.useShouldSeeFreemiumExperience)(),R=E.shouldSeeFreemiumExperience,I=E.refetch,A=(0,z.useFlag)({controlName:"flag-freemium-ai-load-shedder"}),P=(0,z.useFlag)({controlName:"flag-free-plan",default:!1}),D=(0,$.usePromptLimitOpusExperiment)();(0,X.default)({onChange:function(){return(0,L._)(function(){return(0,V._)(this,function(e){switch(e.label){case 0:return[4,Promise.all([j(),y(),I()])];case 1:return e.sent(),[2]}})})()}});var O=S?S.isUnderQuota:null==k?void 0:k.isUnderQuota,N=(0,ed.useFreemiumQuotaExceededModal)({sessionError:i,transitionReason:p,agentAuthz:g,freeAgentUsageLoading:C,isUnderQuota:O,shouldSeeFreemiumExperience:R}),M=N.isModalExperimentEnabled,B=N.shouldShowQuotaModal,F=N.isQuotaModalDismissed,G=N.handleQuotaModalDismiss,W=N.handleQuotaExceededRetrySubmit,q=N.isQuotaError,K=N.experimentGroup,Y=N.isQuotaExceeded,Q=N.shouldShowBudgetExceededMessage;if(s)return(0,l.jsx)(eu.RecoveryModeFooterDialog,{nixError:s,openPane:e.openPane});if(i&&!(q&&"Modal"===K&&R))return(0,l.jsx)(e_.SessionError,{error:i});if(Q)return(0,l.jsx)(ee.BudgetExceededMessage,{runAgent:function(){return d(f.AgentRunState.AGENT_STATE_RUNNING)}});if(Y&&!M)return(0,l.jsx)(eo.FreemiumQuotaExceeded,{nextCreditsAt:null==S?void 0:S.nextCreditsAt});if(M)return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(es.FreemiumQuotaExceededModal,{isOpen:B,onDismiss:G}),(0,l.jsx)(nW,(0,o._)((0,a._)({},e),{isLoadingUsageOrAuthorization:x||C,shouldSeeFreemiumExperience:R,isFreemiumV2User:P&&R&&!n,isFreemiumUserV1RestrictedToFastMode:R&&!n,onQuotaExceededRetrySubmit:F?W:void 0,showQuotaExceededDrawer:F}))]});if(R&&A)return(0,l.jsx)(ex.FreemiumTemporarilyUnavailable,{aiName:U.AGENT_NAME});if(T)return(0,l.jsx)(no.ShadesSurface,{children:(0,l.jsx)(ey.GuestsNotAllowedToUseAiInStarterPlanRepls,{aiName:U.AGENT_NAME})});if(!x&&!(null==g?void 0:g.paidAgent.isAuthorized)&&!(null==g?void 0:g.freeAgent.isAuthorized))if(b)return(0,l.jsx)(no.ShadesSurface,{clsx:nH.default.requiresPaymentContainer,p:8,children:(0,l.jsx)(n$.default,{owner:n&&r?{type:"org",slug:r}:void 0})});else if(w)return(0,l.jsx)(no.ShadesSurface,{css:nH.default.guestUnauthorizedContainer,children:(0,l.jsx)(ey.GuestsNotAllowedToUseAgentWhenOrgAuthzFailed,{})});else return(0,l.jsx)(no.ShadesSurface,{css:nH.default.guestUnauthorizedContainer,children:(0,l.jsx)(ey.GuestsNotAllowedToUseAgentWhenOwnerAuthzFailed,{})});return(0,l.jsx)(nW,(0,o._)((0,a._)({},e),{isLoadingUsageOrAuthorization:x||C,shouldSeeFreemiumExperience:R,isFreemiumV2User:P&&R&&!n,isFreemiumUserV1RestrictedToFastMode:R&&!n&&!D}))}function nW(e){var t=e.numPlansProposed,n=e.onQuotaExceededRetrySubmit,r=e.showQuotaExceededDrawer,i=(0,B._)(e,["numPlansProposed","onQuotaExceededRetrySubmit","showQuotaExceededDrawer"]),s=(0,ec.useAddingIntegrationsRequest)(i.session),u=(0,ef.useAgentAskUserForActionRequest)(i.session),c=(0,eh.useInitialBuildState)(i.session),d=(0,z.useFlag)({controlName:"flag-multiple-universe",default:!1});return s&&s.eventId?d?(0,l.jsx)(ei.FooterAddMultiIntegrations,{session:i.session,addingIntegrationsRequest:s}):(0,l.jsx)(er.FooterAddIntegration,{session:i.session,addingIntegrationsRequest:s}):u&&(0,F.isKind)(u.content,"approveBlueprintRequest")?(0,l.jsx)(nq,(0,o._)((0,a._)({},i),{onQuotaExceededRetrySubmit:n,showQuotaExceededDrawer:r})):i.hasInitialPlanningLayout?(0,l.jsx)(nU,(0,o._)((0,a._)({},i),{numPlansProposed:t,onQuotaExceededRetrySubmit:n,shouldBlockMessageSend:!!n})):(0,eh.isInitialBuildStarted)(null==c?void 0:c.phase)?(0,l.jsx)(nG,(0,o._)((0,a._)({},i),{initialBuildPhase:null==c?void 0:c.phase,onQuotaExceededRetrySubmit:n,shouldBlockMessageSend:!!n})):(0,l.jsx)(nq,(0,o._)((0,a._)({},i),{onQuotaExceededRetrySubmit:n,showQuotaExceededDrawer:r}))}function nq(e){var t,n,r,d,f=e.session,p=e.proposedTaskList,h=e.agentSettings,m=e.inputRef,g=e.shouldSeeFreemiumExperience,x=e.onQuotaExceededRetrySubmit,y=e.showQuotaExceededDrawer,w=(0,B._)(e,["session","proposedTaskList","agentSettings","inputRef","shouldSeeFreemiumExperience","onQuotaExceededRetrySubmit","showQuotaExceededDrawer"]),_=(0,z.useFlag)({controlName:"flag-task-list-details",default:!1}),k=(0,z.useFlag)({controlName:"flag-build-score-survey"}),S=(0,z.useFlag)({controlName:"flag-quick-edit-use-experimental-anthropic-client",default:!1}),C=(0,q.useTrackClick)().trackClick,j=(0,eC.useIsAgentWebDesignMockup)().isWebDesignMockup,T=(0,b.useIsInMobileWorkspace)(),E=(0,W.useBreakpoint)("mobileMax"),R=(0,s._)((0,u.useState)(!1),2),I=R[0],A=R[1],P=(0,em.useQueueIsOpen)(),D=(0,s._)((0,u.useState)(!0),2),O=D[0],N=D[1],M=(0,Q.useMemoedDismissibleElement)("agent-quick-edit-chat-footer-banner"),L=M.isLoading,V=M.isDone,U=M.setAsDone,$=(0,Q.useMemoedDismissibleElement)("agent-starter-fast-mode-enabled-banner"),H=$.isLoading,X=$.isDone,ee=$.setAsDone,er=(0,s._)((0,u.useState)(0),2),ei=er[0],eo=er[1],es=(0,u.useRef)(null),eu=(0,u.useCallback)(function(e){es.current=e,m&&m(e)},[m]),ec=(0,ef.useAgentAskUserForActionRequest)(f),ed=(0,ev.useSendAskUserForActionResponse)(f),ep=(0,G.useDismissActionRequest)(),eh=(0,G.useIsActionRequestDismissed)()(null==ec?void 0:ec.eventId),ex=null==p?void 0:p.hasUserMessageAfterProposal,ey=(0,u.useMemo)(function(){if(O)return null;if(p&&!eh&&!ex&&!I)return{type:"approveTaskListRequest",eventId:p.eventId};if((null==ec?void 0:ec.content)&&!eh){var e=ec.content.$kind;return"approveTaskListRequest"===e?null:{type:e,eventId:ec.eventId||""}}return null},[O,p,ec,eh,ex,I]),eb=(0,u.useCallback)(function(){(null==ec?void 0:ec.eventId)&&(ep(ec.eventId),(0,K.track)(Y.events.AGENT_USED,{action:"task_list_dismissed",session_id:null==f?void 0:f.id}))},[ep,null==ec?void 0:ec.eventId,null==f?void 0:f.id]),ew=(0,u.useCallback)(function(){(null==ec?void 0:ec.eventId)&&(ep(ec.eventId),(0,K.track)(Y.events.AGENT_USED,{action:"query_request_dismissed",query_request_id:ec.eventId,session_id:null==f?void 0:f.id}))},[ep,null==ec?void 0:ec.eventId,null==f?void 0:f.id]),e_=(0,u.useCallback)(function(){es.current&&es.current.setValue("")},[]),eS=(0,u.useCallback)(function(){(null==ey?void 0:ey.eventId)&&(ep(ey.eventId),"queryRequest"===ey.type?(0,K.track)(Y.events.AGENT_USED,{action:"query_request_dismissed",query_request_id:ey.eventId,session_id:null==f?void 0:f.id}):"approveTaskListRequest"===ey.type&&(0,K.track)(Y.events.AGENT_USED,{action:"task_list_dismissed",session_id:null==f?void 0:f.id}))},[ey,ep,null==f?void 0:f.id]),ej=(0,u.useCallback)(function(e){(null==ec?void 0:ec.eventId)&&(h.updateSettings({chatMode:c.AgentChatMode.General}),ed({type:"approveTaskListResponse",taskListEventId:e,requestEventId:ec.eventId}),(0,K.track)(Y.events.AGENT_USED,{action:"task_list_approved"}))},[ed,ec,h]),eT=(0,u.useCallback)(function(e){if(null==ec?void 0:ec.eventId){var t=(0,F.isKind)(ec.content,"approveBlueprintRequest")?ec.content.approveBlueprintRequest.blueprintName:"";ed({type:"approveBlueprintResponse",blueprintEventId:ec.eventId,approved:e,blueprintName:t,requestEventId:ec.eventId}),ep(ec.eventId),(0,ek.trackAgentAnalyticsEvent)({action:"user_message_sent",sessionId:null==f?void 0:f.id,messageText:e?"Blueprint approved":"Blueprint rejected"})}},[ed,ec,null==f?void 0:f.id,ep]),eE=(0,u.useCallback)(function(e){if(null==ec?void 0:ec.eventId){ed({type:"queryResponse",data:e,requestEventId:null==ec?void 0:ec.eventId});var t=e.responses,n=t.length,r=t.filter(function(e){return!(0,F.isKind)(e.responseType,"noResponse")}).length;(0,K.track)(Y.events.AGENT_USED,{action:"query_response_sent",session_id:null==f?void 0:f.id,query_request_id:ec.eventId,num_total_queries:n,num_queries_responded_to:r,did_respond_to_all_queries:r===n})}},[ed,null==ec?void 0:ec.eventId,null==f?void 0:f.id]),eA=(0,u.useCallback)(function(e){A(!1),w.isFreemiumUserV1RestrictedToFastMode&&eo(ei+1),null==x||x()},[w.isFreemiumUserV1RestrictedToFastMode,ei,x]);if(ey){if(r=(0,l.jsx)(J.AgentRequestBanner,{requestType:ey.type,eventId:ey.eventId,onAnswerNow:e_,onDismiss:eS}),"queryRequest"===ey.type&&(0,F.isKind)(null==ec?void 0:ec.content,"queryRequest")){var eP=ec.content.queryRequest.queries;r=(0,l.jsx)(J.AgentRequestBanner,{requestType:"queryRequest",eventId:ey.eventId,context:{numQueries:eP.length,queries:eP},onAnswerNow:e_,onDismiss:eS})}}else if(I&&p)n=(0,l.jsx)(eg.TaskListDrawer,(0,o._)((0,a._)({},p.data),{approvalStatus:"proposed",areTaskDetailsExpandable:_}));else if(p&&!eh&&O&&!ex)n=(0,l.jsx)(eg.TaskListDrawer,(0,o._)((0,a._)({},p.data),{approvalStatus:"proposed",areTaskDetailsExpandable:_})),t=(0,l.jsx)(eI.AgentTaskListApprovalDialog,{onStart:function(){return ej(p.eventId)},onRevise:function(){return A(!0)},onCancel:eb,isInMobileWorkspace:T,hasDrawerAbove:!!n});else if((0,F.isKind)(null==ec?void 0:ec.content,"approveBlueprintRequest")&&!eh&&O)t=(0,l.jsx)(eR.AgentBlueprintApprovalDialog,{request:ec.content.approveBlueprintRequest,eventId:ec.eventId||"",isResponseInProgress:ec.isResponseInProgress,onApprove:function(){return eT(!0)},onReject:function(){return eT(!1)}});else if((0,F.isKind)(null==ec?void 0:ec.content,"queryRequest")&&!eh&&O){var eD=ec.content.queryRequest.queries;t=(0,l.jsx)(Z.AgentQueryResponseDialog,{sessionId:null==f?void 0:f.id,queries:eD,requestEventId:ec.eventId||"",onSendResponse:eE,onCancel:ew,isResponseInProgress:ec.isResponseInProgress,isInMobileWorkspace:T})}if(S){var eO=!g&&!L&&!V&&h.settings.chatMode!==c.AgentChatMode.QuickEdit&&!j,eN=g&&h.settings.chatMode===c.AgentChatMode.QuickEdit&&!w.isFreemiumUserV1RestrictedToFastMode;!eO||r||t||n||(r=(0,l.jsx)(ea.FooterQuickEditPromoBanner,{onDismiss:U,onTryFast:function(){h.updateSettings({chatMode:c.AgentChatMode.QuickEdit}),C({target:"fast_mode_promo_banner_try_fast",productArea:"agent"})}})),!eN||t||n?!r&&w.isFreemiumUserV1RestrictedToFastMode&&(r=(0,l.jsx)(ea.FooterQuickEditUpsellBanner,{})):r=(0,l.jsx)(ea.FooterQuickEditInFastModeUpsellBanner,{})}var eM=!1;!y||t||n||(n=(0,l.jsx)(el.QuotaExceededBanner,{})),y||!w.isFreemiumV2User||h.settings.chatMode!==c.AgentChatMode.QuickEdit||t||r||n||P||X||H||(n=(0,l.jsx)(en.FastModeStarterBanner,{onDismiss:ee}),eM=!0);var eL=t&&!I;return!I&&k&&(d=(0,l.jsx)(et.BuildScoreSurveyDialog,{})),(0,l.jsxs)(nk,{isRevising:I,isNarrowViewport:E,handleBackButtonClick:function(){return A(!1)},children:[n?(0,l.jsx)(no.ShadesSurface,{border:{strength:"regular",side:["top","right","left"]},elevate:"1x",colorShade:"default",br:[6,6,0,0],clsx:nH.default.drawerSurface,children:n}):null,eL?t:null,(0,l.jsxs)(tO.View,{clsx:(0,i._)({},nH.default.hiddenInputBoxContainer,eL),gap:8,children:[d,!r||P||n?null:(0,l.jsx)(tO.View,{children:r},"banner-container"),(0,l.jsx)(nx,(0,o._)((0,a._)({},w),{session:f,proposedTaskList:p,isAwaitingTaskListApproval:I,isFastModeStarterDrawerVisible:eM,shouldShowChatModeControl:!I&&!j,agentSettings:h,inputRef:eu,onSubmit:eA,onInputEmptyChange:function(e){return N(e)},queueBanner:r&&P?r:void 0,shouldBlockMessageSend:!!x}),"footer-input-box")]})]})}var nK=e.i(165680),nY=e.i(112077),nQ=e.i(399978),nX=e.i(445059),nZ=e.i(755323);function nJ(e,t){var n=(0,eD.default)(t),r=(0,eA.useChatter)(),i=(0,w.default)().fs,o=(0,tu.useVisualSelector)({context:"agent"}),s=o.setVisualSelectorEnabled,l=o.element,c=o.screenshotBlob,d=(0,nY.useCreateObservable)(null),p=(0,nY.useCreateObservable)(!1),h=(0,nK.useSetAgentPausedByUser)(),m=(0,u.useCallback)(function(){return(0,L._)(function(){var t,i;return(0,V._)(this,function(a){switch(a.label){case 0:if(p.current)return[2,null];if(e)return[2,e];return p.set(!0),[4,r.sessions.create({sessionType:f.SessionType.AGENT_SESSION})];case 1:if(!(i=a.sent()).ok)return d.set(i),p.set(!1),[2,null];return p.set(!1),null==(t=n.current)||t.call(n,i.payload),[2,i.payload]}})})()},[r,d,p,n,e]);return{sendMessage:(0,u.useCallback)(function(t){return(0,L._)(function(){var o,u,m,g,x,y,b,w,k,S,C,j,T,E,R;return(0,V._)(this,function(I){switch(I.label){case 0:if(p.current)return[2];if(p.set(!0),m=e)return[3,2];return[4,r.sessions.create({sessionType:f.SessionType.AGENT_SESSION})];case 1:if(!(x=I.sent()).ok)return d.set(x),p.set(!1),[2];m=x.payload,null==(g=n.current)||g.call(n,m),I.label=2;case 2:if(y=t.message,b=(0,eN._)(t.attachments),!(c&&!(null==l?void 0:l.filePath)))return[3,7];I.label=3;case 3:if(I.trys.push([3,6,,7]),w=Date.now(),k="".concat(nZ.TARGETED_ELEMENT_SCREENSHOT_PREFIX).concat(w,".png"),!(S=(0,ts.blobToFile)(c,k)))return[3,5];return[4,(0,nQ.uploadFiles)({parentPath:nX.ATTACHED_ASSETS_PATH,files:S?[S]:[],fs:i,onError:function(e){throw e}})];case 4:I.sent(),b.push({path:"".concat(nX.ATTACHED_ASSETS_PATH,"/").concat(k),mimeType:S.type,file:S,isLoading:!1}),I.label=5;case 5:return[3,7];case 6:return C=I.sent(),eL.captureException(C,{extra:{message:"[VisualSelector] Error processing screenshot",sessionId:m.id}}),[3,7];case 7:return j=b.map(function(e){return{path:e.path,mimeType:e.file.type}}),T=t.snippets&&t.snippets.length>0?t.snippets.map(function(e){return e.codeReference}):void 0,[4,m.appendEvent({intent:f.MessageAction.AGENT,message:y,uploadedFiles:j,fileContext:T,kind:"message",webviewTargetedElement:null!=(R=null!=(E=t.webviewTargetedElement)?E:l)?R:void 0,agentConfig:t.agentConfig})];case 8:return I.sent(),p.set(!1),h(!1),(0,ek.trackAgentAnalyticsEvent)((0,a._)({action:"user_message_sent",messageText:t.message,sessionId:m.id,agentMode:(0,tx.getAgentModeForAnalytics)(null==(o=t.agentConfig)?void 0:o.agentMode),autonomyLevel:(null==(u=t.agentConfig)?void 0:u.autonomyLevel)?_.autonomyLevelMapFromAiChatEnum[t.agentConfig.autonomyLevel]:void 0},t.figma)),l&&s(!1,{shouldClearSelection:!1}),[2]}})})()},[p,e,c,l,r.sessions,n,d,i,s,h]),ensureSession:m,error:d,loading:p}}var n0=e.i(703774),n1=e.i(929872),n2=e.i(901708),n3=e.i(646983),n5=(0,u.memo)(function(e){var t,n,r,L=e.session,B=e.readFile,V=e.openPane,F=e.openPip,U=e.inputRef,G=e.secrets,$=e.onPromptSuggestionClick,H=e.onNewSession,z=e.openSession,W=e.showCheckpoints,q=e.hasInitialPlanningLayout,K=e.workspaceTourStepRef,Y=e.scrollerTopPadding,Q=nJ(null!=L?L:null,z),X=Q.sendMessage,Z=Q.ensureSession,J=Q.error,ee=(0,g.default)().showError;(0,d.useCurrentUserTipsQuery)(),(0,m.useObserver)(J,{next:function(e){e&&ee("Something went wrong. Please try again.")}});var et=(0,u.useRef)(!0),en=(0,u.useRef)(new Map),er=(0,s._)((0,u.useState)(0),2),ei=er[0],ea=er[1],eo=(0,O.useIsAgentSessionReadOnly)(null!=(t=null==L?void 0:L.id)?t:null),es=(0,R.useIsInitialAgentSession)(null!=(n=null==L?void 0:L.id)?n:null),el=(0,b.useIsInMobileWorkspace)(),eu=(0,u.useRef)("instant");(0,u.useEffect)(function(){eu.current="smooth"},[]);var ec=q?ei:0,ed=(0,x.default)(function(e){ea(e.height)}),ef=(0,E.useRegisterPipAnchor)({type:"agent"}),ep=(0,y.useMergeRefs)([ed,ef]),eh=(0,h.useObservableMemo)(function(){return null==L?void 0:L.reduce(es?k.PlanProposalReducer:k.NoOpPlanProposalReducer,"global")},[L,es],{default:{numPlansProposed:0}}).numPlansProposed,em=L?{type:"session",session:L}:{type:void 0===L?"loading":"newSession"},eg=(0,S.useAgentSettings)(),ev=(0,C.usePlanModeProposedTaskList)(L),ex=(0,w.default)(),ey=ex.fs,eb=ex.dotReplit,ew=(0,T.useFindFiles)(ey),e_=(0,j.useFileContext)({recentFilesObservable:(0,A.useRecentFilesObservable)(),getFileContext:(0,I.useGetFileContext)(ey,eb)}).fileContextInclusions,ek=(0,p.useUpdateFileContextPreferences)(),eS=(0,u.useCallback)(function(e){var t,n=null!=(t=_.autonomyLevelMapFromAiChatEnum[e])?t:c.AutonomyLevel.High;eg.updateSettings({chatMode:c.AgentChatMode.General,autonomyLevel:n}),X({message:"Continue building",attachments:[],agentConfig:(0,_.convertAgentSettingsFromGQLToAiChat)((0,o._)((0,a._)({},eg.settings),{chatMode:c.AgentChatMode.General,autonomyLevel:n}))})},[eg,X]),eC=(0,n0.useTheme)().isDarkColorScheme;return(0,l.jsxs)(tO.View,{clsx:n3.default.root,children:[em.session?(0,l.jsx)(M.Feed,{session:em.session,isReadOnly:eo,readFile:B,sendMessage:X,openPane:V,openPip:F,secrets:G,onNewSession:H,shouldAutoScrollRef:et,scrollerTopPadding:void 0===Y?0:Y,scrollerBottomPadding:ec,onSessionChange:z,onShowCheckpoints:W,isAwaitingTaskListApproval:null!=ev,onSwitchToAutonomousBuildMode:eS}):null,"loading"===em.type?(0,l.jsx)(D.LoadingState,{}):null,"newSession"===em.type?(0,l.jsx)(n2.AutoScroller,{clsx:n3.default.emptyState,py:tP.tokens.space6,px:tP.tokens.space4,scrollCacheKey:"new-session",scrollCache:en.current,shouldAutoScrollRef:et,autoScrollBehavior:eu.current,buttonOffset:ec,children:(0,l.jsx)(N.SessionEmptyState,{sessionType:f.SessionType.AGENT_SESSION,onPromptSuggestionClick:$})}):null,(0,l.jsx)(tO.View,{innerRef:K,row:!0,justify:"center",clsx:[n3.default.footerRow,(0,i._)({},n3.default.centeredVisualPlanner,q)],pb:6,children:(0,l.jsx)(n1.Surface,{background:eC?void 0:"root",clsx:[n3.default.footerContainer,(r={},(0,i._)(r,n3.default.isMobile,el),(0,i._)(r,n3.default.isDesktop,!el),r)],innerRef:ep,children:"loading"===em.type?null:(0,l.jsx)(P.InMessageSecretsProvider,{children:(0,l.jsx)(nz,{onNewSession:H,onOpenSession:z,inputRef:U,session:null!=L?L:null,sendMessage:X,ensureSession:Z,openPane:V,hasInitialPlanningLayout:q,proposedTaskList:ev,agentSettings:eg,numPlansProposed:eh,findFiles:ew,fileContextInclusions:e_,updateFileContext:function(e){return ek(e.path,e.preference)}})})})})]})});e.s(["AgentChatSession",()=>n5],126445);var n4=["initialBuildPhaseApproval","planApproval","planProposal","queryRequest","suggestDeploy","taskListApproval","tipRecommendation","userMessage"],n8=["initialBuildPhaseApproval","planApproval","taskListApproval","userMessage"];function n6(e){return n4.includes(e.type)}var n7=function(e){var t=[],n=null,r=-1,i=null,a=function(){if(n){var e=!!n.checkpoint||!!n.latestTaskList,r=("checkpoint"===n.firstEventType||"endOfRunSummary"===n.firstEventType)&&(n.firstCheckpoint||n.firstEndOfRunSummary),i=new Set;n.checkpointEventId&&i.add(n.checkpointEventId),n.endOfRunSummaryEventId&&i.add(n.endOfRunSummaryEventId),r&&(n.firstCheckpointEventId&&i.add(n.firstCheckpointEventId),n.firstEndOfRunSummaryEventId&&i.add(n.firstEndOfRunSummaryEventId));var a=n.allEvents.filter(function(e){return!i.has(e.id)}),o=n.id;if(n.allEvents.length>0){var s,l,u=new Set;r&&(n.firstCheckpointEventId&&u.add(n.firstCheckpointEventId),n.firstEndOfRunSummaryEventId&&u.add(n.firstEndOfRunSummaryEventId));var c=n.allEvents.find(function(e){return!u.has(e.id)});o=null!=(l=null!=(s=null==c?void 0:c.id)?s:n.triggerEventId)?l:n.id}var d=a.length>0||!!n.checkpoint||!!n.latestTaskList||!!n.endOfRunSummary;if(n.triggerEventId&&d){if(n.triggerEventId&&r){var f=n.firstCheckpointEventId||n.firstEndOfRunSummaryEventId||n.id;t.push({type:"preRunGroup",id:f,triggerEventId:n.triggerEventId,checkpoint:n.firstCheckpoint,endOfRunSummary:n.firstEndOfRunSummary})}var p=r&&n.checkpointEventId===n.firstCheckpointEventId?void 0:n.checkpoint,h=r&&n.endOfRunSummaryEventId===n.firstEndOfRunSummaryEventId?void 0:n.endOfRunSummary;t.push({type:"runGroup",id:o,triggerEventId:n.triggerEventId,agentMode:n.agentMode,latestTaskList:n.latestTaskList,checkpoint:p,endOfRunSummary:h,items:a,supportsViewGranularity:e})}n=null}},o=!0,s=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value,f=d.value,p=d.id,h=d.observable;if(n6(f)){if(a(),"userMessage"===f.type&&(r=t.length),t.push({type:"event",id:p,observable:h}),n6(f)&&n8.includes(f.type)){i=p;var m,g=void 0;("userMessage"===f.type||"planApproval"===f.type||"taskListApproval"===f.type||"initialBuildPhaseApproval"===f.type)&&(g=null==(m=f.agentConfig)?void 0:m.agentMode),n={id:p,triggerEventId:p,agentMode:g,userMessage:"userMessage"===f.type?h:void 0,allEvents:[]}}continue}switch(!n&&(n={id:p,triggerEventId:null!=i?i:void 0,allEvents:[]}),n.allEvents.push({type:"event",id:p,observable:h}),!n.firstEventType&&(n.firstEventType=f.type),f.type){case"agentToolUse":break;case"taskList":n.latestTaskList=h;break;case"checkpoint":n.firstCheckpoint||(n.firstCheckpoint=h,n.firstCheckpointEventId=p),n.checkpoint=h,n.checkpointEventId=p;break;case"endOfRunSummary":n.firstEndOfRunSummary||(n.firstEndOfRunSummary=h,n.firstEndOfRunSummaryEventId=p),n.endOfRunSummary=h,n.endOfRunSummaryEventId=p}}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}return a(),{result:t,lastUserMessageIndex:r}};e.s(["mapToFeed2",()=>n7],298900);var n9=e.i(836140),re=["agentMessage","agentToolUse","checkpoint","endOfRunSummary","error","planApproval","planProposal","queryRequest","revert","subagent","taskListApproval","taskList","tipRecommendation","userMessage"],rt=function(){var e=(0,n9.getAgentEventsTransformer)({});return{direction:"reverse",state:e.state,transformer:function(t,n){var r=e.transformer(t,n);if(r&&re.includes(r.type))return r}}},rn=function(){return(0,n9.getAgentEventsTransformer)({})};e.s(["getLogsViewTransformer",()=>rn,"getTasksViewTransformer",()=>rt],382671);var rr=(0,u.memo)(function(e){var t,n,r,a=e.session,o=e.readFile,c=e.openPane,p=e.openPip,w=e.inputRef,_=e.secrets,j=e.onPromptSuggestionClick,T=e.onNewSession,I=e.openSession,A=e.showCheckpoints,L=e.hasInitialPlanningLayout,B=e.workspaceTourStepRef,V=e.scrollerTopPadding,F=e.selectedView,U=nJ(null!=a?a:null,I),G=U.sendMessage,$=U.ensureSession,H=U.error,z=(0,g.default)().showError;(0,d.useCurrentUserTipsQuery)(),(0,m.useObserver)(H,{next:function(e){e&&z("Something went wrong. Please try again.")}});var W=(0,u.useRef)(!0),q=(0,u.useRef)(new Map),K=(0,s._)((0,u.useState)(0),2),Y=K[0],Q=K[1],X=(0,O.useIsAgentSessionReadOnly)(null!=(t=null==a?void 0:a.id)?t:null),Z=(0,R.useIsInitialAgentSession)(null!=(n=null==a?void 0:a.id)?n:null),J=(0,b.useIsInMobileWorkspace)(),ee=(0,u.useRef)("instant");(0,u.useEffect)(function(){ee.current="smooth"},[]);var et=L?Y:0,en=(0,x.default)(function(e){Q(e.height)}),er=(0,E.useRegisterPipAnchor)({type:"agent"}),ei=(0,y.useMergeRefs)([en,er]),ea=(0,h.useObservableMemo)(function(){return null==a?void 0:a.reduce(Z?k.PlanProposalReducer:k.NoOpPlanProposalReducer,"global")},[a,Z],{default:{numPlansProposed:0}}).numPlansProposed,eo=a?{type:"session",session:a}:{type:void 0===a?"loading":"newSession"},es=(0,S.useAgentSettings)(),el=(0,C.usePlanModeProposedTaskList)(a),eu=(0,n0.useTheme)().isDarkColorScheme,ec=(0,u.useMemo)(function(){return"run-groups"===F?rt():rn()},[F]),ed="run-groups"===F?n7:void 0;return(0,l.jsxs)(tO.View,{clsx:n3.default.root,children:[eo.session?(0,l.jsx)(M.Feed,{session:eo.session,isReadOnly:X,readFile:o,sendMessage:G,openPane:c,openPip:p,secrets:_,onNewSession:T,shouldAutoScrollRef:W,scrollerTopPadding:void 0===V?0:V,scrollerBottomPadding:et,onSessionChange:I,onShowCheckpoints:A,isAwaitingTaskListApproval:null!=el,transformer:ec,feedMapperFn:ed}):null,"loading"===eo.type?(0,l.jsx)(D.LoadingState,{}):null,"newSession"===eo.type?(0,l.jsx)(n2.AutoScroller,{clsx:n3.default.emptyState,py:tP.tokens.space6,px:tP.tokens.space4,scrollCacheKey:"new-session",scrollCache:q.current,shouldAutoScrollRef:W,autoScrollBehavior:ee.current,buttonOffset:et,children:(0,l.jsx)(N.SessionEmptyState,{sessionType:f.SessionType.AGENT_SESSION,onPromptSuggestionClick:j})}):null,(0,l.jsx)(tO.View,{innerRef:B,row:!0,justify:"center",clsx:[n3.default.footerRow,(0,i._)({},n3.default.centeredVisualPlanner,L)],pb:6,children:(0,l.jsx)(n1.Surface,{background:eu?void 0:"root",clsx:[n3.default.footerContainer,(r={},(0,i._)(r,n3.default.isMobile,J),(0,i._)(r,n3.default.isDesktop,!J),r)],innerRef:ei,children:"loading"===eo.type?null:(0,l.jsx)(P.InMessageSecretsProvider,{children:(0,l.jsx)(nz,{onNewSession:T,onOpenSession:I,inputRef:w,session:null!=a?a:null,sendMessage:G,ensureSession:$,openPane:c,hasInitialPlanningLayout:L,proposedTaskList:el,agentSettings:es,numPlansProposed:ea})})})})]})});e.s(["AgentChatSession2",()=>rr],59540);var ri=e.i(166876),ra={direction:"reverse",state:{data:null,hasUserMessage:!1},map:function(e){return e.data},reducer:function(e,t){if((0,nL.isEventContentsKind)(e,"messageEventContents")&&e.sender.type===f.UserType.USER){t.hasUserMessage=!0;return}var n=(0,nL.getEventAgentToolDataFor)(e,"taskListData");if(null!=n)return!((0,ri.isPlanModeProposedTaskList)(n)||(0,ri.isFullyCompletedTaskList)(n.tasks)&&t.hasUserMessage)&&(t.data=n,!1)}};function ro(e){var t=(0,eh.useInitialBuildState)(e),n=(0,h.useObservableMemo)(function(){return null==e?void 0:e.reduce(ra,100)},[e],{default:void 0});if((null==t?void 0:t.phase)!==f.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_COMPLETE_PENDING_REVIEW)return n}e.s(["useActiveTaskList",()=>ro],93094);var rs=e.i(656077),rl=e.i(759317),ru=e.i(308521),rc=e.i(990313),rd=e.i(279659),rf=e.i(802297),rp=e.i(235381),rh=e.i(541793),rm=e.i(304277);function rg(){var e=(0,nT._)(["\n  query ThemeOverlayAvailability($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        timeCreated\n      }\n    }\n  }\n"]);return rg=function(){return e},e}e.i(566901);var rv={},rx=(0,nE.gql)(rg()),ry=e.i(33864),rb=new Set(["background","foreground","card","card-foreground","popover","popover-foreground","primary","primary-foreground","secondary","secondary-foreground","muted","muted-foreground","accent","accent-foreground","destructive","destructive-foreground","border","input","ring","font-sans","font-serif","font-mono","radius"]),rw=new Date("2024-08-15T00:00:00.000Z"),r_=(0,rh.atom)(!1);(0,rh.atom)(null,function(e,t){t(r_,!0)});var rk=(0,rh.atom)(null,function(e,t){t(r_,!1)}),rS=(0,rh.atom)(null,function(e,t){t(r_,function(e){return!e})});function rC(){return(0,eA.useSet)(rk)}function rj(){var e,t,n=(0,nD.default)(),r=(0,ry.useCartographerSupportsThemes)(),i=(e={variables:{replId:n}},t=(0,a._)({},rv,e),rm.useQuery(rx,t)).data,o=(0,rd.useThemeFile)(),s=o.theme,l=o.error,c=(0,u.useMemo)(function(){if(!(null==i?void 0:i.getRepl))return!1;var e=i.getRepl;return"Repl"===e.__typename&&new Date(e.timeCreated)>=rw},[i]),d=(0,u.useMemo)(function(){if(l||!s)return!1;var e=s[":root"];if(!e)return!1;var t=new Set(Object.keys(e));if(t.size<rb.size)return!1;var n=!0,r=!1,i=void 0;try{for(var a,o=rb[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;if(!t.has(u))return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0},[s,l]);return(0,u.useMemo)(function(){return!!r&&!!c&&!!d},[c,d,r])}function rT(){return{isThemeOverlayVisible:(0,eA.useValue)(r_),toggleThemeOverlay:(0,eA.useSet)(rS)}}e.s(["useHideThemeOverlay",()=>rC,"useThemeOverlay",()=>rT,"useThemeOverlayAvailability",()=>rj],193292);var rE=e.i(765665),rR=e.i(721321),rI=e.i(929417),rA=e.i(842530),rP=e.i(509661);function rD(){var e,t=(0,rc.useAppThemeTracking)().trackAppTheme,n=rC(),r=(0,rp.useThemeData)(),i=r.theme,a=r.loading,o=r.error,s=r.currentMode,c=r.setCurrentMode,d=r.save,f=r.discard,p=r.applyTheme,h=r.hasUnsavedChanges,m=r.hasUnpublishedChanges,g=r.selectedDatabaseTheme,x=r.setSelectedDatabaseTheme,y=r.publish,b=(0,rf.useWorkspaceThemePreview)().applyThemePreview,w=(0,z.useFlag)({controlName:"flag-app-themes-dark-mode"});return e=function(e){c(e),i&&b(i,e),t(Y.events.APP_THEME,{action:"dark_mode_toggled",mode:e})},(0,u.useEffect)(function(){var t=function(t){var n;if(null==(n=t.data)?void 0:n.type)switch(t.data.type){case"DARK_MODE_USED":e("dark");break;case"LIGHT_MODE_USED":e("light")}};return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}},[e]),(0,l.jsxs)(tO.View,{p:8,className:rP.default.overlayContainer,children:[(0,l.jsxs)(no.ShadesSurface,{row:!0,align:"center",justify:"center",p:8,elevate:!1,children:[(0,l.jsx)(tz.IconButton,{alt:"Back",onClick:n,style:{position:"absolute",left:8},children:(0,l.jsx)(rs.default,{})}),(0,l.jsxs)(tO.View,{row:!0,align:"center",justify:"space-between",gap:4,children:[(0,l.jsx)(nm.Text,{children:"App Theme"}),(0,l.jsx)(nb.Pill,{colorway:"primary",text:"Beta"})]})]}),(0,l.jsxs)(tO.View,{className:rP.default.scrollArea,children:[o?(0,l.jsx)(rI.TopBanner,{text:"Error loading theme",colorway:"negative"}):null,a&&!i?(0,l.jsx)(no.ShadesSurface,{p:16,style:{borderRadius:"8px"},elevate:!1,children:(0,l.jsx)(nm.Text,{variant:"text",children:"Loading theme..."})}):null,i?(0,l.jsxs)(tO.View,{gap:16,px:8,children:[(0,l.jsx)(rA.ThemeSelect,{state:{theme:i,loading:a,hasUnsavedChanges:h,hasUnpublishedChanges:m,selectedDatabaseTheme:g,setSelectedDatabaseTheme:x},operations:{applyTheme:p,save:d,discard:f,publish:y,onComplete:function(){}}}),w?(0,l.jsxs)(tO.View,{gap:8,children:[(0,l.jsx)(nm.Text,{variant:"small",color:"dimmest",children:"Your app supports both light and dark mode. Use this toggle to edit the style variables used in each mode."}),(0,l.jsxs)(rR.ButtonGroup,{name:"theme-mode",value:s,onChange:function(e){c(e),b(i,e),t(Y.events.APP_THEME,{action:"dark_mode_toggled",mode:e})},row:!0,stretch:!0,primary:!0,children:[(0,l.jsx)(rR.ButtonGroupItem,{id:"light-mode",value:"light",text:"Light mode",icon:(0,l.jsx)(ru.default,{})}),(0,l.jsx)(rR.ButtonGroupItem,{id:"dark-mode",value:"dark",text:"Dark mode",icon:(0,l.jsx)(rl.default,{})})]})]}):null,(0,l.jsx)(no.ShadesSurface,{className:rP.default.divider,elevate:!1}),(0,l.jsx)(rE.ThemeControls,{})]}):null]})]})}function rO(){(0,n0.useTheme)();var e=(0,rd.useThemeFile)(),t=e.theme,n=e.loading,r=e.error,i=e.saveSchema,a=e.setTheme;return(0,l.jsx)(rp.ThemeDataProvider,{theme:t,setTheme:a,loading:n,error:r,saveSchema:i,children:(0,l.jsx)(rD,{})})}function rN(e){return(0,h.useObservableMemo)(function(){return null==e?void 0:e.reduce(rM,250)},[e])}e.s(["ThemeOverlay",()=>rO],542635);var rM={direction:"reverse",state:{checkpoint:null},map:function(e){return e.checkpoint},reducer:function(e,t){if((0,nL.isEventAgentToolDataKind)(e,"commitData")){var n=(0,F.unkind)(e.contents.contents).toolData;return t.checkpoint={id:e.id,title:n.commitData.description.split("\n")[0],created:e.created},!1}}};e.s(["useLatestCheckpointInFeed",()=>rN],652825);var rL=e.i(873169),rB=e.i(493166),rV=e.i(116235);function rF(e){return(0,l.jsx)(rV.default,(0,o._)((0,a._)({},e),{children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M21.75 6A3.75 3.75 0 0 0 18 2.25H6A3.75 3.75 0 0 0 2.25 6v12A3.75 3.75 0 0 0 6 21.75h12A3.75 3.75 0 0 0 21.75 18V6ZM18 3.75A2.25 2.25 0 0 1 20.25 6v2.25H9.75v-4.5H18Zm-9.75 0v4.5h-4.5V6A2.25 2.25 0 0 1 6 3.75h2.25Zm-4.5 6h4.5v4.5h-4.5v-4.5Zm0 6h4.5v4.5H6A2.25 2.25 0 0 1 3.75 18v-2.25Zm6 4.5v-4.5h10.5V18A2.25 2.25 0 0 1 18 20.25H9.75Zm10.5-6H9.75v-4.5h10.5v4.5Z",clipRule:"evenodd"})}))}e.s(["default",()=>rF],483620);var rU=e.i(446530),rG=e.i(613355),r$=(0,rU.cssRecord)({wrapper:[rG.rcss.position.absolute,{top:0,right:0,bottom:0,left:0,zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],overlay:[rG.rcss.position.absolute,{top:0,right:0,bottom:0,left:0,backgroundColor:tP.tokens.blueDimmer,opacity:.8}],content:[rG.rcss.center,{position:"relative",zIndex:1}]});function rH(){return(0,l.jsxs)(tO.View,{css:r$.wrapper,children:[(0,l.jsx)(tO.View,{css:r$.overlay}),(0,l.jsxs)(tO.View,{css:r$.content,gap:12,children:[(0,l.jsxs)(tO.View,{row:!0,gap:8,align:"center",children:[(0,l.jsx)(rB.default,{size:32}),(0,l.jsx)(rL.default,{size:32}),(0,l.jsx)(rF,{size:32})]}),(0,l.jsx)(nm.Text,{variant:"subheadDefault",children:"Drop files here to add to conversation"})]})]})}function rz(){var e=(0,w.default)().fs;return(0,u.useCallback)(function(t){var n=t.files,r=t.onError;return(0,L._)(function(){return(0,V._)(this,function(t){switch(t.label){case 0:return[4,(0,nQ.uploadFiles)({parentPath:nX.ATTACHED_ASSETS_PATH,files:n,fs:e,overwrite:!0,onError:function(e){return r(e.error)}})];case 1:return t.sent(),[2]}})})()},[e])}e.s(["default",()=>rH],286645),e.s(["useUploadFilesHandler",()=>rz],833887);var rW=e.i(664152);function rq(e,t){var n=(0,u.useRef)(!1),r=(0,nC.useProposedPlan)(),i=(0,nD.default)();(0,eA.useChatHook)("received-completed-event",function(a){if(!n.current){var o=a.event.contents.contents;if((0,F.isKind)(o,"agentPlanEventContents")){if(!(null==(s=o.agentPlanEventContents.Approver)?void 0:s.approver.id))return;var s,l=o.agentPlanEventContents.stackBlueprint;n.current=!0,e(l)}(0,F.isKind)(o,"approvePlanEventContents")&&(n.current=!0,e(null==r?void 0:r.stackBlueprint)),(0,F.isKind)(o,"agentTimelineEventContents")&&((0,F.isKind)(o.agentTimelineEventContents.toolData,"fileEditData")||(0,F.isKind)(o.agentTimelineEventContents.toolData,"createFileData")||(0,F.isKind)(o.agentTimelineEventContents.toolData,"readFileData"))&&t&&(rW.logger.error("useOnInitialPlanApproval: Event not possible in initial planning, promoting repl by approving latest plan.",{replid:i,stackBlueprint:null==r?void 0:r.stackBlueprint}),n.current=!0,e(null==r?void 0:r.stackBlueprint))}})}e.s(["useOnInitialPlanApproval",()=>rq],334878);var rK=e.i(814563),rY=e.i(282453),rQ=e.i(852819),rX=(0,rK.createJSONStorage)(function(){return{getItem:function(e){return rY.default.get(e,"string")},setItem:function(e,t){return rY.default.set(e,t)},removeItem:function(e){return rY.default.remove(e)}}}),rZ=(0,rK.atomWithStorage)("selectedAgentFeedView","logs",rX);function rJ(){return[(0,rQ.useValue)(rZ),(0,rQ.useSet)(rZ)]}e.s(["useSelectedFeedViewState",()=>rJ],897676)},461062,e=>{e.v({futureCheckpoint:"Session-module__tv_2Ea__futureCheckpoint",isDesktop:"Session-module__tv_2Ea__isDesktop"})},925410,e=>{e.v({checkpoint:"Checkpoints-module__PUDBBa__checkpoint",checkpointLine:"Checkpoints-module__PUDBBa__checkpointLine",dashed:"Checkpoints-module__PUDBBa__dashed",highlight:"Checkpoints-module__PUDBBa__highlight","highlight-bg":"Checkpoints-module__PUDBBa__highlight-bg",scroll:"Checkpoints-module__PUDBBa__scroll",session:"Checkpoints-module__PUDBBa__session",sessionCheckpoint:"Checkpoints-module__PUDBBa__sessionCheckpoint",toggleCollapsedButton:"Checkpoints-module__PUDBBa__toggleCollapsedButton"})},623129,e=>{"use strict";var t=e.i(297083),n=e.i(721281),r=e.i(878420),i=e.i(64386),a=e.i(530658),o=e.i(346715),s=e.i(817556),l=e.i(276385),u=e.i(389959),c=e.i(338188);e.i(877212);var d=e.i(924908);e.i(925218);var f=e.i(112077),p=e.i(267103),h=e.i(849954),m=e.i(436725),g=e.i(190120),x=e.i(287999),y=e.i(646136),b=e.i(82259),w=e.i(641555),_=e.i(583158),k=e.i(927600),S=e.i(441329),C=e.i(480028),j=e.i(140487),T=e.i(960178),E=e.i(257811),R=e.i(625484),I=e.i(461062);function A(e){var t=e.session,n=e.openSession,r=e.isActiveSession,i=e.hideTitle,a=(0,w.useObservableMemo)(function(){return null==t?void 0:t.data.select(function(e){return{title:e.title,created:e.created,taskId:e.taskId}})},[t]);return t?(0,l.jsxs)(R.View,{row:!0,justify:"space-between",px:8,gap:12,children:[(0,l.jsxs)(R.View,{grow:!0,shrink:!0,children:[i?null:(0,l.jsx)(T.Text,{color:(null==a?void 0:a.title)?void 0:"dimmest",children:(null==a?void 0:a.title)||"Thinking"}),(0,l.jsx)(R.View,{children:(0,l.jsxs)(R.View,{row:!0,py:4,gap:4,align:"center",children:[(0,l.jsx)(T.Text,{color:"dimmest",variant:"small",children:"Chat started"}),a?(0,l.jsx)(E.Timestamp,{date:a.created,textColor:"dimmest",textVariant:"small",live:!0}):null]})})]}),t?(0,l.jsx)(j.Button,{text:r?"Continue chat":"View chat",size:"small",variant:"default",iconRight:(0,l.jsx)(k.default,{}),colorway:r?"blurple":void 0,onClick:function(){return n(t)}}):null]}):(0,l.jsx)(R.View,{row:!0,justify:"space-between",px:8,gap:12,children:(0,l.jsxs)(R.View,{grow:!0,shrink:!0,children:[(0,l.jsx)(T.Text,{children:"History from source app"}),(0,l.jsx)(R.View,{row:!0,py:4,gap:4,align:"center",children:(0,l.jsx)(T.Text,{color:"dimmest",variant:"small",children:"Checkpoints inherited from the app you remixed"})})]})})}function P(e){var t=(0,p.useObservable)(e.agentState),r="",i=C.tokens.foregroundDimmer;switch(null==t?void 0:t.state){case b.AgentRunState.AGENT_STATE_RUNNING:i=C.tokens.blurpleStronger,r="Agent is running";break;case b.AgentRunState.AGENT_STATE_PAUSING:r="Agent is pausing";break;default:r="Agent is waiting for your response"}var a=(0,S.useIsInMobileWorkspace)();return r?(0,l.jsx)(R.View,{py:6,px:8,row:!0,align:"center",gap:8,justify:"space-between",clsx:[I.default.futureCheckpoint,(0,n._)({},I.default.isDesktop,!a)],children:(0,l.jsxs)(R.View,{row:!0,align:"center",gap:8,children:[(0,l.jsx)(_.default,{color:i}),(0,l.jsx)(R.View,{children:(0,l.jsx)(T.Text,{color:"dimmer",children:r})})]})}):null}var D=e.i(526962),O=e.i(417120),N=e.i(281128),M=e.i(173703),L=e.i(608434),B=e.i(925410),V=new Set,F=(0,u.createContext)(null),U=(0,u.forwardRef)(function(e,t){var n=e.children,r=e.style;return(0,l.jsx)(R.View,{innerRef:t,style:r,children:n})});U.displayName="NonStickyItem";var G=(0,u.forwardRef)(function(e,t){var n=e.children,a=e.style,o=e.index,s=(0,u.useContext)(F);if(!s)throw Error("StickyItem must be used within StickyIndexContext");var c=(0,p.useObservable)(s.activeIndex),d=(0,p.useObservable)(s.scrollProgress),f=c===o;return(0,l.jsx)(R.View,{innerRef:t,style:(0,r._)((0,i._)((0,r._)({},a),{zIndex:1}),f&&{position:"sticky",top:0,transform:f?"translateY(".concat(-(100*d),"%)"):void 0}),children:n})});G.displayName="StickyItemInner";var $=(0,u.forwardRef)(function(e,t){var n=e.children,r=e.style,i=e.index;return V.has(i)?(0,l.jsx)(G,{style:r,index:i,ref:t,children:n}):(0,l.jsx)(U,{style:r,index:i,ref:t,children:n})});$.displayName="StickyItem";var H=(0,u.memo)(function(e){var t=e.index,i=e.row,a=e.openSession,o=e.stickyHeaderRef,s=(0,u.useContext)(F);if(!s)throw Error("SessionItem must be used within StickyIndexContext");var c=t===(0,p.useObservable)(s.activeIndex);return(0,l.jsx)(M.ShadesSurface,{py:12,clsx:[B.default.session,(0,n._)({},B.default.sessionCheckpoint,i.hasCheckpoint)],style:(0,r._)({},!c&&{backgroundColor:C.tokens.backgroundDefault}),innerRef:c?o:void 0,elevate:!1,children:(0,l.jsx)(A,{session:i.session,openSession:a,isActiveSession:i.isActive,hideTitle:i.hasCheckpoint})})}),z=(0,u.memo)(function(e){var n,i,b,w,_,k,S,C,j,T,E,I,A,M,U,G,z,K,Y,Q,X,Z=(0,O.useAgentState)().agentState,J=e.openPane,ee=e.openSession,et=e.navigatingFromSessionId,en=e.scrollPosition,er=e.onScrollPositionChange,ei=e.saveScrollPositionRef,ea=(0,x.useCheckpoints)(),eo=ea.checkpoints,es=ea.loading,el=ea.renameCommit,eu=(0,p.useObservable)(eo),ec=(M=(null==eu?void 0:eu.ok)?eu.value:null,U=(0,d.useChatter)(),z=null==(G=(0,p.useObservable)(U.sessions.agent.current))?void 0:G.id,Y=(K=(0,a._)((0,u.useState)(new Set),2))[0],Q=K[1],{list:(0,u.useMemo)(function(){if(!M)return null;var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=M[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o.session&&e.push({type:"session",session:o.session,hasCheckpoint:o.commitRanges.length>0,isActive:o.session.id===z});var s=!0,l=!1,u=void 0;try{for(var c,d,f=o.commitRanges[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var p=d.value,h=null==(b=p.commitRange[0])?void 0:b.hash;if(p.collapsed){var m=!Y.has(h);if(e.push({type:"collapsed",count:p.commitRange.length,id:h,collapsed:m}),m)continue}var g=!0,x=!1,y=void 0;try{for(var b,w,_=p.commitRange[Symbol.iterator]();!(g=(w=_.next()).done);g=!0){var k,S=w.value;e.push({type:"commit",commit:S,sessionId:null==(k=o.session)?void 0:k.id,isReverted:p.collapsed})}}catch(e){x=!0,y=e}finally{try{g||null==_.return||_.return()}finally{if(x)throw y}}}}catch(e){l=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(l)throw u}}o.session&&(null==(c=o.session)?void 0:c.id)===z&&e.push({type:"future",session:o.session})}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e},[M,Y,z]),toggleCommitRange:(0,u.useCallback)(function(e){Q(function(t){return(0,N.create)(t,function(t){t.has(e)?t.delete(e):t.add(e)})})},[])}),ed=(0,u.useCallback)(function(e){return J({type:"git",data:{mode:{type:D.GitPaneModeType.COMMIT,hash:e}}})},[J]),ef=(0,d.useChatter)(),ep=(0,p.useObservable)(ef.sessions.agent.current),eh=(0,u.useCallback)(function(e){var n=e.commitId,i=e.title,a=e.eventId,o=e.sessionId,l=e.args;return(0,t._)(function(){return(0,s._)(this,function(e){switch(e.label){case 0:if(!ep)return[2];return[4,(0,h.revert)((0,r._)({chatter:ef,commitId:n,title:i,onSessionChange:ee,currentSession:ep,revertedToEventId:a,revertedToSessionId:o},l))];case 1:return e.sent(),[2]}})})()},[ef,ee,ep]),em=!eu,eg=(null==eu?void 0:eu.ok)&&0===eu.value.length,ev=(0,u.useRef)(null),ex=(0,f.useCreateObservable)(0),ey=(0,f.useCreateObservable)(0),eb=(0,u.useRef)(null),ew=(0,a._)((0,u.useState)(0),2),e_=ew[0],ek=ew[1],eS=ec.list,eC=(0,u.useMemo)(function(){if(!eS)return new Set;var e=new Set;return eS.forEach(function(t,n){"session"===t.type&&e.add(n)}),e},[eS]);(0,u.useEffect)(function(){V.clear(),eC.forEach(function(e){return V.add(e)})},[eC]),(0,u.useEffect)(function(){eb.current&&ek(eb.current.getBoundingClientRect().height)},[eS]),(0,u.useEffect)(function(){ev.current&&void 0!==en?ev.current.scrollTo(en):ev.current&&eS&&eS.length>0&&ev.current.scrollToIndex(eS.length-1,{align:"end"})},[eS,en,er]);var ej=(i=(n={list:eS,navigatingFromSessionId:et,vListRef:ev}).list,b=n.navigatingFromSessionId,w=n.vListRef,_=(0,u.useRef)(new Map),k=(0,u.useRef)(!1),S=(0,u.useRef)(!1),C=(0,u.useMemo)(function(){return(null==i?void 0:i.length)&&b?function(e,t){for(var n=t.findIndex(function(t){return"session"===t.type&&t.session.id===e}),r=-1===n?t.length-1:n,i=t.length-1,a=r+1;a<t.length;a++)if("session"===t[a].type){i=a-1;break}return{start:r,end:i}}(b,i):null},[i,b]),(0,u.useEffect)(function(){var e=w.current;C&&e&&!k.current&&(k.current=!0,w.current.scrollToIndex(C.start,{align:"center",smooth:!1}))},[w,C]),{onScrollEnd:(0,u.useCallback)(function(){if(!S.current&&C){S.current=!0;for(var e,t=C.start;t<=C.end;t++)null==(e=_.current.get(t))||e()}},[C]),setRowRef:(0,u.useCallback)(function(e){null===e.highlight?_.current.delete(e.index):_.current.set(e.index,e.highlight)},[])}),eT=ej.onScrollEnd,eE=ej.setRowRef,eR=(j=ev,T=null!=(X=null==eS?void 0:eS.length)?X:0,E=(0,f.useCreateObservable)(!1),I=(0,u.useCallback)(function(){var e;null==(e=j.current)||e.scrollToIndex(T,{smooth:!0,align:"end"})},[j,T]),A=(0,u.useCallback)(function(){var e=j.current;if(e){var t=Math.round(e.scrollSize-e.viewportSize-e.scrollOffset);E.set(t>36)}},[E,j]),{show:E,onScroll:A,onClick:I});(0,u.useEffect)(function(){eS&&ev.current&&setTimeout(function(){eR.onScroll()},0)},[eS,en,eR]);var eI=(0,u.useCallback)(function(){if(ev.current){var e,t,n=ev.current.findStartIndex(),r=null!=(t=(0,o._)(V).reverse().find(function(e){return n>=e}))?t:(e=Math).min.apply(e,(0,o._)(V));if(void 0!==r){ex.set(r);var i=(0,o._)(V).sort(function(e,t){return e-t}),a=i.indexOf(r),s=i[a+1];if(void 0!==s){var l=ev.current.getItemOffset(s)-ev.current.scrollOffset;if(l<=e_&&l>=0){var u=(e_-l)/e_;ey.set(u)}else ey.set(0)}else ey.set(0)}eR.onScroll()}},[eR,e_,ex,ey]);if((0,u.useEffect)(function(){ei&&(ei.current=function(){ev.current&&er&&er(ev.current.scrollOffset)})},[ei,er]),es&&(em||eg))return(0,l.jsx)(m.LoadingState,{});var eA=eC.size>0?(0,o._)(eC):void 0;return(0,l.jsxs)(R.View,{grow:!0,shrink:!0,children:[(0,l.jsx)(F.Provider,{value:{activeIndex:ex,scrollProgress:ey},children:(0,l.jsx)(c.VList,{clsx:B.default.scroll,ref:ev,item:$,keepMounted:eA,onScrollEnd:eT,onScroll:eI,children:null==eS?void 0:eS.map(function(t,n){switch(t.type){case"session":return(0,l.jsx)(W,{index:n,highlightRef:eE,children:(0,l.jsx)(H,{index:n,row:t,openSession:e.openSession,stickyHeaderRef:eb})},t.session.id);case"commit":var r,i,a,o=t.commit,s=t.isReverted;switch(null==(r=eS[n+1])?void 0:r.type){case"commit":i="solid";break;case"future":i="dashed"}return(0,l.jsx)(W,{index:n,highlightRef:eE,children:(0,l.jsx)(q,{line:i,children:(0,l.jsx)(g.CheckpointHistoryItem,{isTimelineListItem:!0,author:o.authoredBy,title:null!=(a=o.customSubject)?a:o.subject,date:new Date(o.committer.date),commitId:o.hash,onRevert:function(e){var t;return null==eh?void 0:eh({commitId:o.hash,title:null!=(t=o.customSubject)?t:o.subject,eventId:o.eventId,sessionId:o.sessionId,args:e})},onRenameTitle:function(e){return null==el?void 0:el(o.hash,e||o.subject)},screenshot:o.screenshotUrl,onOpenCommit:function(){return ed(o.hash)},isReverted:s,enableHelium:o.heliumCheckpointCreated,openPane:J,missingAgentState:o.missingAgentState,beforeReplCreation:o.beforeReplCreation},o.hash)},t.commit.hash)},t.commit.hash);case"collapsed":return(0,l.jsx)(W,{index:n,highlightRef:eE,children:(0,l.jsx)(y.CollapsedCheckpointsToggle,{onToggle:function(){return ec.toggleCommitRange(t.id)},count:t.count,collapsed:t.collapsed,className:B.default.toggleCollapsedButton})},"toggle"+t.id);case"future":return Z?(0,l.jsx)(P,{agentState:Z},t.session.id+"future"):null}})})}),(0,l.jsx)(L.ScrollToLatestButton,{show:eR.show,onClick:eR.onClick})]})});function W(e){var t=e.children,n=e.index,r=e.highlightRef,i=(0,u.useRef)(null);return(0,u.useEffect)(function(){return r({index:n,highlight:function(){var e;null==(e=i.current)||e.classList.add(B.default.highlight)}}),function(){r({index:n,highlight:null})}},[r,n]),(0,l.jsx)(R.View,{innerRef:i,children:t})}function q(e){return(0,l.jsxs)(R.View,{px:8,py:12,clsx:B.default.checkpoint,children:[e.line?(0,l.jsx)("div",{clsx:[B.default.checkpointLine,"dashed"===e.line&&B.default.dashed]}):null,e.children]})}e.s(["CheckpointsScreen",()=>z],623129)},832074,e=>{e.v({checkpointMade:"Header-module__IC53hG__checkpointMade",checkpointMadeIcon:"Header-module__IC53hG__checkpointMadeIcon",checkpointMadeText:"Header-module__IC53hG__checkpointMadeText","icon-animate":"Header-module__IC53hG__icon-animate",root:"Header-module__IC53hG__root",surface:"Header-module__IC53hG__surface","text-animate":"Header-module__IC53hG__text-animate"})},205413,e=>{e.v({content:"index-module__-XHOOa__content",enter:"index-module__-XHOOa__enter",enterActive:"index-module__-XHOOa__enterActive",exit:"index-module__-XHOOa__exit",exitActive:"index-module__-XHOOa__exitActive",isInMobileWorkspace:"index-module__-XHOOa__isInMobileWorkspace",root:"index-module__-XHOOa__root",taskListDrawerContainer:"index-module__-XHOOa__taskListDrawerContainer"})},700966,84104,698053,398014,e=>{"use strict";var t=e.i(297083),n=e.i(721281),r=e.i(878420),i=e.i(64386),a=e.i(530658),o=e.i(817556),s=e.i(276385),l=e.i(389959),u=e.i(401262),c=e.i(977268),d=e.i(241939);e.i(877212);var f=e.i(145864),p=e.i(204203);e.i(925218);var h=e.i(267103),m=e.i(641555),g=e.i(993796),x=e.i(98816),y=e.i(222342),b=e.i(207237),w=e.i(649960),_=e.i(441329),k=e.i(126445),S=e.i(59540),C=e.i(690767),j=e.i(93094),T=e.i(542635),E=e.i(193292),R=e.i(652825),I=e.i(66830),A=e.i(286645),P=e.i(900433),D=e.i(833887),O=e.i(287999),N=e.i(376847),M=e.i(231346),L=e.i(200119),B=e.i(334878),V=e.i(897676),F=e.i(623129),U=e.i(886513),G=e.i(82259),$=e.i(924908),H=e.i(802088),z=e.i(138716),W=e.i(593767),q=e.i(873667),K=e.i(271280),Y=e.i(769822),Q=e.i(659790),X=e.i(429878),Z=e.i(889176),J=e.i(123805),ee=e.i(721321),et=e.i(751273);function en(e){var t=e.selectedView,n=e.onViewChange;return(0,s.jsxs)(ee.ButtonGroup,{name:"agent-view-selector",value:t,onChange:n,row:!0,children:[(0,s.jsx)(et.Tooltip,{tooltip:"Show feed as run groups (new)",children:(0,s.jsx)(ee.ButtonGroupItem,{id:"run-groups",value:"run-groups",icon:(0,s.jsx)(Z.default,{})})}),(0,s.jsx)(et.Tooltip,{tooltip:"Show feed as full work log",children:(0,s.jsx)(ee.ButtonGroupItem,{id:"logs",value:"logs",icon:(0,s.jsx)(J.default,{})})})]})}var er=e.i(480028),ei=e.i(173703),ea=e.i(136540),eo=e.i(739521),es=e.i(960178),el=e.i(625484),eu=e.i(832074);function ec(e){var t=e.sessionTitle,n=(0,U._)(e,["sessionTitle"]),r=(0,g.useFlag)({controlName:"flag-agent-debug-info-button"}),i=(0,g.useFlag)({controlName:"flag-agent-pane-rework",default:!1})&&"session"===n.screen;return(0,s.jsx)(ei.ShadesSurface,{row:!0,align:"end",clsx:[eu.default.root],elevate:!1,children:(0,s.jsxs)(ei.ShadesSurface,{row:!0,gap:12,clsx:eu.default.surface,align:"center",justify:"space-between",elevate:!1,children:["checkpoints"===n.screen?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ea.IconButton,{size:32,alt:"Back",onClick:function(){return n.onAction("goBack")},children:(0,s.jsx)(z.default,{})}),(0,s.jsx)(el.View,{grow:!0,shrink:!0,align:"center",justify:"center",children:(0,s.jsx)(ep,{})}),(0,s.jsx)(ea.IconButton,{size:32,disabled:n.disableNewSessionButton,alt:"New chat",onClick:function(){return n.onAction("newChat")},children:(0,s.jsx)(W.default,{})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ea.IconButton,{size:32,alt:"History",onClick:function(){return n.onAction("showCheckpoints")},children:(0,s.jsx)(K.default,{})}),(0,s.jsx)(el.View,{row:!0,gap:4,grow:!0,shrink:!0,align:"center",children:(0,s.jsx)(ef,{sessionTitle:void 0===t?"New chat":t,viewSelector:i&&n.selectedFeedView&&n.onFeedViewChange?(0,s.jsx)(en,{selectedView:n.selectedFeedView,onViewChange:n.onFeedViewChange}):null})}),(0,s.jsxs)(el.View,{row:!0,align:"center",children:[r&&n.sessionId?(0,s.jsx)(Q.AiSessionDebugInfoButton,{sessionId:n.sessionId,sessionType:G.SessionType.AGENT_SESSION,size:32}):null,!r&&n.sessionId?(0,s.jsx)(eh,{sessionId:n.sessionId}):null,(0,s.jsx)(et.Tooltip,{isDisabled:!n.disableNewSessionButton,tooltip:"Cannot create a new chat while one is in progress",children:(0,s.jsx)(ea.IconButton,{size:32,disabled:n.disableNewSessionButton,alt:n.disableNewSessionButton?"Cannot create a new chat while one is in progress":"New chat",onClick:function(){return n.onAction("newChat")},children:(0,s.jsx)(W.default,{})})})]})]}),(0,s.jsx)(ed,{checkpointMade:n.checkpointMade})]})})}function ed(e){var t=e.checkpointMade,n=(0,a._)((0,l.useState)(!1),2),r=n[0],i=n[1],o=(0,l.useRef)(null),u=(0,l.useCallback)(function(){o.current&&clearTimeout(o.current),i(!0),o.current=setTimeout(function(){i(!1)},4e3)},[]);return(0,H.useObserver)(t,{next:u}),r?(0,s.jsxs)(el.View,{row:!0,align:"center",clsx:eu.default.checkpointMade,gap:4,children:[(0,s.jsx)(ei.ShadesSurface,{clsx:eu.default.checkpointMadeIcon,elevate:!1,children:(0,s.jsx)(q.default,{size:12})}),(0,s.jsx)(ei.ShadesSurface,{clsx:eu.default.checkpointMadeText,grow:!0,shrink:!0,elevate:!1,children:(0,s.jsx)(es.Text,{variant:"small",children:"Checkpoint made"})})]}):null}function ef(e){var t=e.sessionTitle,n=e.viewSelector;return(0,s.jsxs)(el.View,{row:!0,pl:18,pr:4,gap:4,align:"center",justify:"center",grow:!0,shrink:!0,children:[(0,s.jsx)(es.Text,{multiline:!1,shrink:!0,color:t?"default":"dimmest",children:null!=t?t:"New chat"}),n]})}function ep(){return(0,s.jsxs)(el.View,{row:!0,gap:6,align:"center",children:[(0,s.jsx)(K.default,{}),(0,s.jsx)(es.Text,{multiline:!1,children:"History"})]})}function eh(e){var t=e.sessionId,n=(0,a._)((0,l.useState)(!1),2),r=n[0],i=n[1],o=(0,$.useChatter)(),u=(0,m.useObservableMemo)(function(){return t?o.sessions.get(t):null},[o,t]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(el.View,{shrink:0,children:(0,s.jsx)(et.Tooltip,{isDisabled:!u,tooltip:"Send feedback",children:(0,s.jsx)(ea.IconButton,{disabled:!u,alt:"Send feedback",onClick:function(){return i(!0)},size:32,children:(0,s.jsx)(Y.default,{color:er.tokens.foregroundDimmest})})})}),u?(0,s.jsx)(eo.Modal,{isOpen:r,onRequestClose:function(){return i(!1)},children:(0,s.jsx)(X.AIFeedback,{session:u,onClose:function(){return i(!1)}})}):null]})}var em=e.i(971131),eg=(0,l.createContext)({left:null,right:null,setLeft:function(){},setRight:function(){},setHasBackButtonOverride:function(){},hasBackButtonOverride:!1});function ev(e){var t=e.children,n=e.side,r=(0,l.useContext)(eg);if(!r)return null;var i=r[n];return i?em.default.createPortal(t,i):null}function ex(){var e=(0,l.useContext)(eg);return(0,l.useCallback)(function(t){e.backButtonOverrideRef&&(e.backButtonOverrideRef.current=t,e.setHasBackButtonOverride(!!t))},[e])}function ey(e){var t,n,r,i,o,u,c,d,f,p,h=e.children,m=(n=(t=(0,a._)((0,l.useState)(null),2))[0],r=t[1],o=(i=(0,a._)((0,l.useState)(null),2))[0],u=i[1],c=(0,l.useRef)(null),f=(d=(0,a._)((0,l.useState)(!1),2))[0],p=d[1],(0,l.useMemo)(function(){return{left:n,right:o,setLeft:r,setRight:u,backButtonOverrideRef:c,setHasBackButtonOverride:p,hasBackButtonOverride:f}},[n,o,f]));return(0,s.jsx)(eg.Provider,{value:m,children:h})}function eb(){return(0,l.useContext)(eg)}function ew(e){var t=e.screen,n=e.onAction,r=e.hasInitialPlanningLayout,i=ex();(0,l.useEffect)(function(){if("checkpoints"===t)return i(function(){return n("goBack")}),function(){i(null)}},[i,t,n]);var a="checkpoints"!==t&&!r;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ev,{side:"left",children:a?(0,s.jsx)(ea.IconButton,{size:36,alt:"Chats",onClick:function(){n("showCheckpoints")},children:(0,s.jsx)(K.default,{})}):null}),(0,s.jsx)(ev,{side:"right",children:r?null:(0,s.jsx)(ea.IconButton,{size:36,alt:"New chat",onClick:function(){n("newChat")},children:(0,s.jsx)(W.default,{})})})]})}e.s(["MobilePaneHeader",()=>ev,"MobilePaneHeaderProvider",()=>ey,"useMobilePaneHeaderContext",()=>eb,"useSetMobilePaneHeaderBackButtonOverride",()=>ex],84104);var e_=e.i(346715),ek=e.i(612054),eS=e.i(394492),eC=e.i(509908),ej=e.i(33681),eT=e.i(955665),eE=e.i(446530),eR=e.i(613355),eI=e.i(16499);function eA(){var e=(0,l.useRef)(0),t=(0,a._)((0,l.useState)(!1),2),n=t[0],r=t[1],i=(0,_.useIsInMobileWorkspace)(),o=(0,_.useIsInBonsaiWebview)(),s=(0,eI.useAppKeyboardState)();return(0,l.useEffect)(function(){var t,n=window.visualViewport;if(n){if(o)return void r(null!=(t=null==s?void 0:s.isShown)&&t);if(i){var a=function(){r(eP({current:n.height,initial:e.current}))};return e.current=n.height,n.addEventListener("resize",a),function(){n.removeEventListener("resize",a)}}}},[i,o,null==s?void 0:s.isShown]),n}function eP(e){return e.current<.8*e.initial}function eD(e){var t=(0,x.default)(e),n=(0,l.useRef)(0),r=(0,_.useIsInBonsaiWebview)();(0,l.useEffect)(function(){if(!r){var e=window.visualViewport;if(e){var i=function(){t.current(eP({current:e.height,initial:n.current}))};return n.current=e.height,e.addEventListener("resize",i),function(){e.removeEventListener("resize",i)}}}},[t,r])}e.s(["default",()=>eA,"useOnWebVirtualKeyboard",()=>eD],698053);var eO=e.i(332441);function eN(e){var t=eA(),n=(0,eO.useIsIOS)(),o=(0,a._)((0,l.useState)(0),2),u=o[0],c=o[1],d=(0,l.useRef)(null),f="visualViewport"in window;(0,l.useEffect)(function(){if(!t)return void c(0);if(n&&f){var e=window.visualViewport;if(!e)return;var r=function(){c(window.innerHeight-e.height-e.offsetTop)};return r(),e.addEventListener("resize",r),e.addEventListener("scroll",r),function(){e.removeEventListener("resize",r),e.removeEventListener("scroll",r)}}t&&c(20)},[t,n,f]);var p=(0,l.useMemo)(function(){var n;return(0,i._)((0,r._)({},e.underlayProps||{}),{style:(0,i._)((0,r._)({},(null==(n=e.underlayProps)?void 0:n.style)||{}),{paddingBottom:t?u:void 0})})},[e.underlayProps,t,u]);return(0,s.jsx)(eo.Modal,(0,i._)((0,r._)({},e),{underlayProps:p,className:e.className,children:(0,s.jsx)("div",{ref:d,children:e.children})}))}var eM=(0,eE.cssRecord)({container:[eR.rcss.minWidth("300px"),{maxWidth:"90vw","@media (max-width: 600px)":{minWidth:"90vw"}}]});function eL(e){var n=e.isOpen,r=e.onClose,i=e.onSubmit,a=e.session,u=e.source,c=void 0===u?"header":u,d=(0,y.default)(),f=d.showConfirm,p=d.showError,h=function(e){return(0,t._)(function(){var t;return(0,o._)(this,function(n){switch(n.label){case 0:if(!a)return[2];return[4,a.submitUserFeedback({type:G.AgentUserFeedbackType.AGENT_FEEDBACK_UNKNOWN,comment:e})];case 1:return(null==(t=n.sent())?void 0:t.ok)?f("Feedback received."):p("Failed to send feedback. Please try again."),null==i||i(e),r(),[2]}})})()},m=(0,g.useFlag)({controlName:"flag-top-ai-spenders",type:"boolean"});return(0,l.useEffect)(function(){n&&a&&(0,eC.trackAgentAnalyticsEvent)({action:"open_feedback_modal_from_".concat(c),sessionId:a.id})},[n,a,c]),(0,s.jsx)(eN,{isOpen:n,onRequestClose:r,centered:!0,css:eM.container,children:m?(0,s.jsx)(eT.AISupportFeedbackForm,{onSubmit:h}):(0,s.jsx)(ej.AIFeedbackForm,{onSubmit:h})})}var eB=e.i(259493);function eV(e){var n,r,i,u,c,d=e.session,f=e.onNewSession,p=e.onHistory,h=e.hasInitialPlanningLayout,m=(0,g.useFlag)({controlName:"flag-agent-debug-info-button"}),x=(0,y.default)().showConfirm,b=(0,Q.useGenerateDebugInfo)(),w=(r=(n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"command",n=arguments.length>2?arguments[2]:void 0,r=(0,a._)((0,l.useState)(!1),2),i=r[0],o=r[1],u=(0,l.useCallback)(function(){o(!0)},[]),c=(0,l.useCallback)(function(){o(!1)},[]),d=(0,l.useCallback)(function(){return e?(0,s.jsx)(eL,{isOpen:i,onClose:c,session:e,source:t,onSubmit:n}):null},[i,e,c,t,n]);return{openFeedbackModal:u,closeFeedbackModal:c,FeedbackModal:d}}(d,"agent_chat",function(e){(0,eC.trackAgentAnalyticsEvent)({action:"submitted_feedback",sessionId:d.id,feedbackText:e})})).openFeedbackModal,i=n.FeedbackModal,u=(0,l.useMemo)(function(){return d?{data:{type:"action",icon:(0,s.jsx)(Y.default,{}),label:"Share feedback",run:r}}:null},[r,d]),c=(0,l.useMemo)(function(){return{name:"Feedback",commands:u?[u]:[]}},[u]),{FeedbackModal:i,feedbackCommand:u,feedbackCommandGroup:c}),_=w.FeedbackModal,k=w.feedbackCommandGroup,S=(0,l.useMemo)(function(){return{name:"Chat",commands:[{data:{type:"action",icon:(0,s.jsx)(W.default,{}),label:"New chat",run:function(){f()}}},{data:{type:"action",icon:(0,s.jsx)(K.default,{}),label:"History",run:function(){p()}}}]}},[f,p]);return(0,eB.useSetPaneBindings)(function(){return{type:"agentChat",focusInput:function(){},commands:(0,e_._)(h?[]:[S]).concat([{commands:m?[{data:{type:"action",icon:(0,s.jsx)(ek.default,{}),label:"Copy debug info",run:function(){return(0,t._)(function(){var e,t,n;return(0,o._)(this,function(r){switch(r.label){case 0:return[4,b(d.id,G.SessionType.CHAT)];case 1:return t=(e=r.sent()).html,n=e.plainText,[4,(0,eS.default)(t,n)];case 2:return r.sent(),x("Copied debug info to clipboard"),[2]}})})()}}}]:[]},k])}},[k,m,d.id,b,x,S,h]),(0,s.jsx)(_,{})}var eF=e.i(782514),eU=e.i(205413),eG=(0,er.cvarsFrom)("index.module.css",["--transition-duration"]),e$=(0,l.memo)(function(e){var t,n,i=(0,y.default)().showError,a=(0,D.useUploadFilesHandler)(),o=(0,b.default)(),l=(0,d.useAgentMainReplConfigQuery)({variables:{replId:o},skip:!o}).data,u=(null==l||null==(t=l.getRepl)?void 0:t.__typename)==="Repl"?l.getRepl.timeCreated:null;return(0,s.jsx)(eF.TrackingHierarchyProvider,{hierarchy:{surface:"agent"},children:(0,s.jsx)(I.AiChatAttachmentsProvider,{sessionId:null==(n=e.session)?void 0:n.id,uploadFiles:a,onError:i,children:(0,s.jsx)(O.CheckpointProvider,{replTimeCreated:u,children:(0,s.jsx)(eH,(0,r._)({data:l},e))})})})});function eH(e){var y,D,U,G,$=e.session,H=e.setSession,z=e.onPlanApproval,W=e.inputRef,q=e.openPane,K=e.openPip,Y=e.secrets,Q=e.readFile,X=e.isDesktopOrTabletAgentPresentationCentered,Z=e.isDesktopLayoutAgentPresentationTransitionInProgress,J=e.workspaceTourStepRef,ee=e.data,et=(0,a._)((0,l.useState)("session"),2),en=et[0],er=et[1],ei=(0,a._)((0,V.useSelectedFeedViewState)(),2),ea=ei[0],eo=ei[1],es=(0,a._)((0,l.useState)(!1),2),eu=es[0],ed=es[1],ef=(0,a._)((0,l.useState)(void 0),2),ep=ef[0],eh=ef[1],em=(0,a._)((0,l.useState)(!1),2),eg=em[0],ev=em[1],ex=(0,_.useIsInMobileWorkspace)(),ey=(0,l.useRef)(null),eb=(0,g.useFlag)({controlName:"flag-agent-pane-rework",default:!1}),e_=(0,b.default)(),ek=(null==ee||null==(y=ee.getRepl)?void 0:y.__typename)==="Repl"?null==(D=ee.getRepl.config)?void 0:D.isInPlanningPhase:void 0,eS=(0,a._)((0,d.useUpdateReplConfigMutation)(),1)[0];(0,B.useOnInitialPlanApproval)(function(e){return(0,t._)(function(){return(0,o._)(this,function(t){switch(t.label){case 0:return null==z||z(e),[4,eS({variables:{input:{id:e_,isInPlanningPhase:!1}}})];case 1:return t.sent(),[2]}})})()},!!ek);var eC=(0,I.useAiChatAttachments)(),ej=eC.addAttachments,eT=eC.clearAttachments,eE=(0,P.useDropTarget)({addAttachments:ej}),eR=eE.isDraggedOver,eI=eE.drop,eA=(0,a._)((0,l.useState)(null),2),eP=eA[0],eD=eA[1];(0,l.useEffect)(function(){if(!eP){null==W||W(null);return}null==W||W((0,i._)((0,r._)({},eP),{attachments:function(e){return(0,t._)(function(){return(0,o._)(this,function(t){return eT(),[2,ej(e)]})})()}}))},[eP,W,ej,eT]),(0,l.useEffect)(function(){ex||null==eP||eP.focus()},[eP,ex]);var eO=(0,x.default)(eP),eN=(0,l.useCallback)(function(){setTimeout(function(){var e;null==(e=eO.current)||e.animatePlaceholder()})},[eO]),eM=(0,l.useCallback)(function(){er("session"),ed(!0),eN()},[eN]),eL=(0,l.useRef)(null),eB=(0,l.useCallback)(function(){"checkpoints"===en&&eL.current&&eL.current()},[en]),eF=(0,l.useCallback)(function(e){"checkpoints"===en&&eB(),H(e),er("session"),ed(!1),eN()},[H,eN,en,eB]),e$=(0,l.useCallback)(function(e){var t;null==eP||null==(t=eP.setValue)||t.call(eP,e.text),null==eP||eP.focus()},[eP]),eH=!!(0,h.useObservable)((0,L.useAgentIsWorking)()),ez=(0,O.useCheckpoints)().checkpointMade,eW=(0,m.useObservableMemo)(function(){return null==$?void 0:$.data.select(function(e){return e.title})},[$]),eq=(0,R.useLatestCheckpointInFeed)($),eK=function(e){switch("checkpoints"===en&&eB(),e){case"goBack":er("session"),ed(!1),eN();break;case"showCheckpoints":er("checkpoints");break;case"newChat":er("session"),ed(!0),eN()}},eY=(0,p.useIsRiverRetryBudgetExceeded)(),eQ=(0,l.useRef)();(0,l.useEffect)(function(){eQ.current=eu||null==$?void 0:$.id},[eu,$]);var eX=(0,M.useIsInitialAgentSession)(null!=(G=null==$?void 0:$.id)?G:null),eZ=(0,f.useAgentPlanApprovalState)(),eJ=!0===ek&&eX&&(ex?"approved"!==eZ:X||Z),e0=(0,E.useThemeOverlay)().isThemeOverlayVisible;(0,l.useEffect)(function(){e0&&"theme"!==en?er("theme"):e0||"theme"!==en||er("session")},[e0,en]);var e1=(0,j.useActiveTaskList)($),e2=(0,g.useFlag)({controlName:"flag-task-list-details",default:!1}),e3=null!=e1&&"session"===en&&!eu&&!eb,e5=eJ||ex||"theme"===en,e4=(0,l.useRef)(null),e8=(0,a._)((0,l.useState)(0),2),e6=e8[0],e7=e8[1],e9=(0,w.default)((0,l.useCallback)(function(e){return e7(e.height)},[]));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(el.View,{innerRef:"session"===en?eI:void 0,clsx:eU.default.root,grow:!0,shrink:!0,style:(0,n._)({},eG.transitionDuration,"".concat(180,"ms")),children:[(0,s.jsxs)(el.View,{innerRef:e4,children:[!$||e5?null:(0,s.jsx)(ec,{sessionId:$.id,sessionTitle:(null==eq?void 0:eq.title)||eW,screen:en,disableNewSessionButton:eH,onAction:eK,checkpointMade:ez,selectedFeedView:eb?ea:void 0,onFeedViewChange:eb?eo:void 0}),(0,s.jsx)(ew,{screen:en,onAction:eK,hasInitialPlanningLayout:eJ})]}),e3?(0,s.jsx)(el.View,{clsx:[eU.default.taskListDrawerContainer,(0,n._)({},eU.default.isInMobileWorkspace,ex)],style:{top:null==(U=e4.current)?void 0:U.offsetHeight},children:(0,s.jsx)(C.TaskListDrawer,(0,i._)((0,r._)({},e1),{approvalStatus:"approved",placement:"top",areTaskDetailsExpandable:e2,innerRef:e9}))}):null,(0,s.jsx)(c.SwitchTransition,{children:(0,s.jsx)(u.CSSTransition,{timeout:180,nodeRef:ey,classNames:{enter:eU.default.enter,enterActive:eU.default.enterActive,exit:eU.default.exit,exitActive:eU.default.exitActive},children:(0,s.jsxs)(el.View,{innerRef:ey,clsx:eU.default.content,grow:!0,shrink:!0,children:["theme"===en?(0,s.jsx)(T.ThemeOverlay,{}):null,"checkpoints"===en?(0,s.jsx)(F.CheckpointsScreen,{openSession:eF,openPane:q,navigatingFromSessionId:eQ.current,scrollPosition:ep,onScrollPositionChange:eh,saveScrollPositionRef:eL}):null,"session"===en?(0,s.jsx)(s.Fragment,{children:eb?(0,s.jsx)(S.AgentChatSession2,{onNewSession:eM,inputRef:eD,openPane:q,openPip:K,session:eu?null:$,openSession:eF,showCheckpoints:function(){return eK("showCheckpoints")},secrets:Y,readFile:Q,onPromptSuggestionClick:e$,hasInitialPlanningLayout:eJ,workspaceTourStepRef:J,scrollerTopPadding:e3?e6:0,selectedView:ea}):(0,s.jsx)(k.AgentChatSession,{onNewSession:eM,inputRef:eD,openPane:q,openPip:K,session:eu?null:$,openSession:eF,showCheckpoints:function(){return eK("showCheckpoints")},secrets:Y,readFile:Q,onPromptSuggestionClick:e$,hasInitialPlanningLayout:eJ,workspaceTourStepRef:J,scrollerTopPadding:e3?e6:0})}):null]})},en)}),eR?(0,s.jsx)(A.default,{}):null]}),(0,s.jsx)(N.default,{isOpen:eY&&!eg,text:"We've encountered an issue and can't reconnect to the AI service. Please refresh the page to continue.",onDismiss:function(){return ev(!0)}}),ex&&$?(0,s.jsx)(eV,{onNewSession:eM,onHistory:function(){return er("checkpoints")},session:$,hasInitialPlanningLayout:eJ}):null]})}e.s(["AgentMain",()=>e$],700966);var ez=e.i(960933),eW=ez.Type.Object({type:ez.Type.Literal("agentChat"),data:ez.Type.Optional(ez.Type.Object({sessionId:ez.Type.Optional(ez.Type.String())}))});e.s(["AgentChatPaneSchema",()=>eW],398014)},795564,827836,e=>{"use strict";var t=e.i(960933),n=e.i(862927),r=t.Type.Object({type:t.Type.Literal("commands"),data:t.Type.Object({autoFocus:t.Type.Boolean()})}),i=function(e){return n.Value.Decode(r,e)};e.s(["decode",()=>i],795564);var a=e.i(530658),o=e.i(389959);function s(e,t){var n=(0,a._)((0,o.useState)(null),2),r=n[0],i=n[1];return(0,o.useEffect)(function(){var n=!1;return e.readFile(t).then(function(e){n||i(e)}),function(){n=!0}},[e,t]),r}e.s(["default",()=>s],827836)},655774,594949,e=>{"use strict";var t,n=e.i(297083),r=e.i(530658),i=e.i(817556),a=e.i(276385),o=e.i(389959),s=e.i(678317),l=e.i(391444),u=e.i(207237),c=e.i(664152),d=e.i(956111),f=e.i(858248),p=e.i(709485),h=e.i(529810),m=e.i(255444);function g(e,t){var n=[];return n.push((0,m.removeFieldOp)("interpreter")),n.push((0,m.removeFieldOp)("entrypoint")),e&&(n.push((0,m.createRunCommandOp)(e)),n.push((0,m.createDeploymentsRunCommandOp)(e))),t?(n.push((0,m.createCompileCommandOp)(t)),n.push((0,m.createDeploymentsBuildCommandOp)(t))):(n.push((0,m.removeFieldOp)("compile")),n.push((0,m.removeFieldOp)("deployment/build"))),n}var x=e.i(205104),y=((t={}).Unknown="UNKNOWN",t.Npm="NPM",t.Django="DJANGO",t.Flask="FLASK",t.FastAPI="FASTAPI",t.Pyramid="PYRAMID",t.Starlette="STARLETTE",t.Streamlit="STREAMLIT",t.Rails="RAILS",t.DotNet="DOTNET",t.Cargo="CARGO",t.Make="MAKE",t.RegularRun="REGULAR_RUN",t),b="package.json",w="requirements.txt",_=RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),k=RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function S(e,t,r,a){return(0,n._)(function(){var o,s,l;return(0,i._)(this,function(u){switch(u.label){case 0:if(0===r.length)return[2,{projType:"UNKNOWN",runCommand:null,compileCommand:null}];return[4,function(e,t){return(0,n._)(function(e,t){var n,r,a,o,s,l;return(0,i._)(this,function(i){switch(i.label){case 0:if(n=e.initRunCommand,r=e.isCompiled,!((o=new Set(a=e.allFiles)).has("Makefile")||o.has("makefile")))return[3,1];return[2,"MAKE"];case 1:if(!o.has(b))return[3,2];return[2,"NPM"];case 2:if(!o.has("Cargo.toml"))return[3,3];return[2,"CARGO"];case 3:if(!r)return[3,4];return[2,"UNKNOWN"];case 4:if(!o.has("config/application.rb"))return[3,5];return[2,"RAILS"];case 5:if(!a.some(function(e){return"csproj"===(0,x.getExt)(e)}))return[3,6];return[2,"DOTNET"];case 6:if(!o.has(w))return[3,8];return[4,t.readFile(w)];case 7:if(!(s=i.sent()).error){if((l=s.content.toString()).includes("django"))return[2,"DJANGO"];if(l.includes("flask"))return[2,"FLASK"];if(l.includes("fastapi"))return[2,"FASTAPI"];else if(l.includes("pyramid"))return[2,"PYRAMID"];else if(l.includes("starlette"))return[2,"STARLETTE"];else if(l.includes("streamlit"))return[2,"STREAMLIT"]}return[3,9];case 8:if(_.test(n))return[2,"REGULAR_RUN"];i.label=9;case 9:return[2,"UNKNOWN"]}})}).apply(this,arguments)}(o={initRunCommand:e,isCompiled:t,allFiles:r},a)];case 1:return l={projType:s=u.sent()},[4,function(e,t,r){return(0,n._)(function(e,t,r){var a,o,s,l;return(0,i._)(this,function(u){var c;switch(a=t.initRunCommand,s=(o=t.allFiles).find(function(e){return["main.py","app.py"].includes(e)}),e){case"NPM":return[2,(0,n._)(function(){var e,t,n,a;return(0,i._)(this,function(i){switch(i.label){case 0:return[4,r.readFile(b)];case 1:e=i.sent();try{if(!e.error&&(n=null==(t=JSON.parse(e.content.toString()))?void 0:t.scripts,a=["dev","serve","watch","start:dev","start"].find(function(e){return null==n?void 0:n[e]})))return[2,"npm run ".concat(a)]}catch(e){}return[2,"node index.js"]}})})()];case"REGULAR_RUN":if(null==(l=null!=(c=o.filter(function(e){return!k.test(e)}).find(function(e){return _.test(e)}))?c:null))return[2,null];return[2,a.replace(_,l)];case"DJANGO":return[2,"python3 manage.py runserver 0.0.0.0:3000"];case"FLASK":return[2,"python ".concat(s)];case"FASTAPI":case"STARLETTE":return[2,"uvicorn ".concat(null==s?void 0:s.replace(".py",""),":app --host 0.0.0.0 --port 3000")];case"PYRAMID":return[2,"pserve development.ini"];case"STREAMLIT":return[2,"streamlit run ".concat(s)];case"RAILS":return[2,"bundle exec rails server --binding=0.0.0.0"];case"DOTNET":return[2,"dotnet run"];case"CARGO":return[2,"cargo run"];default:return[2,null]}})}).apply(this,arguments)}(s,o,a)];case 2:return[2,(l.runCommand=u.sent(),l.compileCommand=function(e){switch(e){case"MAKE":return"make";case"CARGO":case"DOTNET":case"NPM":return"";default:return null}}(s),l)]}})})()}e.s(["ProjectType",()=>y,"default",()=>S],594949);var C=e.i(480028),j=e.i(613355),T=e.i(929872),E=e.i(625484),R=e.i(87328),I=e.i(634191),A=e.i(878420),P=e.i(64386),D=e.i(967629),O=e.i(446530),N=(0,D.keyframes)({"0%":{opacity:.1},"50%":{opacity:1},"100%":{opacity:.1}}),M=(0,O.cssRecord)({one:{opacity:.1,animation:"".concat(N," 1.5s ease-in-out infinite"),animationDelay:"0s"},two:{opacity:.1,animation:"".concat(N," 1.5s ease-in-out infinite"),animationDelay:"0.1s"},three:{opacity:"0.1",animation:"".concat(N," 1.5s ease-in-out infinite"),animationDelay:"0.2s"}});let L=function(e){var t=(0,R._)({},(0,I._)(e));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",(0,P._)((0,A._)({},t),{css:M.one,children:"."})),(0,a.jsx)("span",(0,P._)((0,A._)({},t),{css:M.two,children:"."})),(0,a.jsx)("span",(0,P._)((0,A._)({},t),{css:M.three,children:"."}))]})};function B(e){var t=e.children;return(0,a.jsx)(T.Surface,{background:"default",css:[j.rcss.borderRadius(8),{width:"100%",height:"calc(100% - ".concat(C.tokens.space2,")"),backgroundColor:C.tokens.backgroundDefault,overflowY:"auto",marginTop:"0px"}],children:(0,a.jsx)(E.View,{css:[{flex:"1 1 auto"}],p:16,justify:"center",align:"center",children:t})})}function V(){return(0,a.jsx)(B,{children:(0,a.jsxs)(E.View,{children:[(0,a.jsx)(E.View,{children:"We couldn't read your .replit file"}),(0,a.jsx)("a",{css:[j.rcss.pt(8),{fontSize:C.tokens.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"View docs"})]})})}function F(){return(0,a.jsx)(B,{children:(0,a.jsx)(E.View,{children:(0,a.jsxs)("p",{children:["Importing from GitHub",(0,a.jsx)(L,{style:{color:C.tokens.foregroundDefault}})]})})})}function U(e){var t=e.closeConfigPane,a=e.openSidebar,m=e.onNewPaneSelected,x=e.openConsole,b=(0,d.useQueryParam)("gitImport","boolean"),w=(0,u.default)(),_=(0,h.default)(),k=_.fs,C=_.dotReplit,j=(0,r._)((0,o.useState)(null),2),T=j[0],E=j[1],R=(0,r._)((0,o.useState)(null),2),I=R[0],A=R[1],P=(0,o.useCallback)(function(){m({type:"codeEditor",data:{path:".replit"}})},[m]);(0,o.useEffect)(function(){if(!T)return C.watch(function(e){E(e.config),"NOT_FOUND"!==e.error&&A(e.error)})},[C,T]);var D=(0,r._)((0,o.useState)(!1),2),O=D[0],N=D[1],M=(0,r._)((0,o.useState)(""),2),L=M[0],B=M[1],V=(0,r._)((0,o.useState)(""),2),F=V[0],U=V[1],G=(0,r._)((0,o.useState)(!1),2),$=G[0],H=G[1],z=(0,r._)((0,o.useState)(y.Unknown),2),W=z[0],q=z[1],K=(0,r._)((0,o.useState)(!1),2),Y=K[0],Q=K[1];(0,o.useEffect)(function(){if(!Y)return k.watchDir(".git",{onChange:function(e){Q(e.length>0)},onMoveOrDelete:function(){Q(!0)},onError:function(){Q(!1)}})}),(0,o.useEffect)(function(){(Y||!b)&&(0,n._)(function(){var e,t,n,r,a,o,l,u,d,f,p,h,m,x,w,_,j;return(0,i._)(this,function(i){switch(i.label){case 0:if(!T)return[2];return t=(0,s.execToString)(null!=(e=T.run)?e:void 0),r=(0,s.execToString)(null!=(n=T.compile)?n:void 0),a=!!T.compile,[4,k.listFiles()];case 1:return o=i.sent(),[4,k.readDir(".git")];case 2:if(l=i.sent(),o.error||null==o.files||b&&l.error)return[2];return u=o.files,[4,S(t,a,u,k)];case 3:if(f=(d=i.sent()).projType,p=d.runCommand,h=d.compileCommand,m=u.includes("Procfile"),x=function(e,t){return e||t},w=m?x(t,p):x(p,t),_=h||r,B(w||""),U(_),H(f!==y.Unknown&&f!==y.RegularRun),q(f),!b)return[3,6];return w||c.logger.warn("Failed to autosuggest run command"),f===y.Unknown&&c.logger.warn("Failed to detect project type"),j=g(w||"",_),[4,C.updateDotReplit(j)];case 4:return i.sent(),[4,k.flush()];case 5:i.sent(),k.persist({skipDebounce:!0}),i.label=6;case 6:return[2]}})})()},[C,T,k,Y,b]);var X=(0,o.useCallback)(function(e){var t=e.run,r=e.compile,a=e.runChanged,o=e.compileChanged,s=e.projType;return(0,n._)(function(){var e;return(0,i._)(this,function(n){switch(n.label){case 0:return(0,f.track)(p.events.NIX_GH_IMPORT_USED,{action:l.NixGHImportUsedEvents.ConfigDone,isCompiled:""!==r,runChanged:a,compileChanged:o,projType:s,replId:w}),e=g(t,r),[4,C.updateDotReplit(e)];case 1:return n.sent(),k.flush().then(function(){k.persist({skipDebounce:!0})}),[2]}})})()},[C,k,w]);return{fs:k,applyConfig:X,closeConfigPane:t,dotReplitConfig:T,dotReplitError:I,isApplyingConfig:O,setIsApplyingConfig:N,initialBuild:F,initialRun:L,isFrameworkRecommended:$,projType:W,openDotReplit:P,openSidebar:a,openConsole:x}}e.s(["ErrorMessage",()=>V,"ImportingMessage",()=>F,"useConfigFormState",()=>U],655774)},818283,999519,e=>{"use strict";var t=e.i(297083),n=e.i(886513),r=e.i(530658),i=e.i(817556),a=e.i(276385),o=e.i(389959),s=e.i(269848),l=e.i(416298),u=e.i(322823),c=e.i(241828),d=e.i(608738),f=e.i(655774),p=e.i(594949),h=e.i(363966),m=e.i(271112),g=e.i(480028),x=e.i(446530),y=e.i(613355),b=e.i(140487),w=e.i(607278),_=e.i(11235),k=e.i(960178),S=e.i(625484),C=S.SpecializedView.a,j=(0,x.cssRecord)({root:[y.rcss.maxWidth(420),y.rcss.display.flex,y.rcss.gap(12),y.rcss.py(4),{margin:"0 auto"}],section:[y.rcss.display.flex,y.rcss.p(12),y.rcss.gap(12)],loading:[y.rcss.center,y.rcss.flex.growAndShrink(1)],multiParagraph:[y.rcss.flex.column,y.rcss.gap(8),{a:[y.rcss.display.inline]}]});e.s(["default",0,function(e){var x=e.flow,T=(0,n._)(e,["flow"]),E=(0,f.useConfigFormState)(T),R=(0,c.useNixModules)(),I=R.modules,A=R.configs,P=(0,d.default)(),D=(0,r._)((0,o.useState)("Overview"),2),O=D[0],N=D[1],M=(0,o.useMemo)(function(){return null==I?void 0:I.filter(function(e){return"replit"!==e.id})},[I]),L=E.dotReplitConfig,B=E.dotReplitError,V=E.initialRun,F=E.initialBuild,U=void 0===F?"":F,G=E.openConsole,$=E.openDotReplit,H=E.applyConfig,z=E.isApplyingConfig,W=E.setIsApplyingConfig,q=E.closeConfigPane,K=E.openSidebar,Y=E.projType,Q=!!Y&&Y===p.ProjectType.Rails,X=(0,u.useFormField)(V,function(e){if(!e)return{message:"Add a run command"}}),Z=(0,r._)((0,o.useState)(U),2),J=Z[0],ee=Z[1];if((0,o.useEffect)(function(){X.setValue(V)},[V]),(0,o.useEffect)(function(){ee(null!=U?U:"")},[U]),B)return(0,a.jsx)(f.ErrorMessage,{});if(!L&&"githubImport"===x)return(0,a.jsx)(f.ImportingMessage,{});if(!I||!M||!A||!P)return(0,a.jsx)(S.View,{css:j.loading,children:(0,a.jsx)(s.default,{})});switch(O){case"ModuleSearch":return(0,a.jsx)(m.NixSearch,{onBack:function(){return N("Overview")},disableCategorySelection:!0,initialCategory:"Modules",openConsole:G});case"Overview":return(0,a.jsxs)(S.View,{css:j.root,children:[(0,a.jsxs)(S.View,{css:j.section,children:[(0,a.jsx)(k.Header,{variant:"headerDefault",level:1,children:"Configure your App"}),(0,a.jsx)(_.Prose,{color:"dimmer",css:j.multiParagraph,children:"githubImport"===x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["Your code was successfully imported from GitHub. We've created a"," ",(0,a.jsx)("a",{href:"",onClick:function(e){e.preventDefault(),$()},children:".replit file"}),", which configures your App's behavior."," ",(0,a.jsx)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl#replit-configuration-file",target:"_blank",rel:"noopener noreferrer",children:"Learn more about .replit files."})]}),(0,a.jsxs)("p",{children:["To get started, verify our recommended platform dependencies and commands. If you're still deciding, try"," ",(0,a.jsx)(C,{onClick:function(){return null==T?void 0:T.onNewPaneSelected({type:"agentChat"})},children:"asking AI"}),"."]})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("p",{children:["Before configuring your Run command, make sure you've installed any"," ",(0,a.jsx)(C,{onClick:function(){return null==T?void 0:T.onNewPaneSelected({type:"developer",data:{tab:["dependencies","import"]}})},children:"languages and packages"})," ","necessary for your project. If you're still deciding, try"," ",(0,a.jsx)(C,{onClick:function(){return null==T?void 0:T.onNewPaneSelected({type:"agentChat"})},children:"asking AI"}),"."]})})})]}),"githubImport"===x?(0,a.jsxs)(S.View,{css:j.section,children:[(0,a.jsx)(k.Header,{variant:"subheadDefault",level:2,children:"Modules"}),(0,a.jsx)(k.Text,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers."}),(0,a.jsx)(h.default,{modules:M}),(0,a.jsx)(b.Button,{stretch:!0,colorway:"primary",variant:"outlined",type:"submit",text:"Add more modules",onClick:function(){N("ModuleSearch")}})]}):null,(0,a.jsxs)(S.View,{css:j.section,children:[(0,a.jsx)(S.View,{row:!0,justify:"space-between",children:(0,a.jsx)(k.Header,{variant:"subheadDefault",level:2,children:"Commands"})}),(0,a.jsx)("form",{onSubmit:function(e){return(0,t._)(function(){return(0,i._)(this,function(t){switch(t.label){case 0:if(e.preventDefault(),W(!0),!X.value)return X.validate(),[2];return[4,H({run:X.value,compile:null!=J?J:"",runChanged:X.value!==V,compileChanged:J!==U,projType:Y})];case 1:return t.sent(),"githubImport"===x&&(q(),null==K||K()),W(!1),[2]}})})()},css:[{width:"100%"}],children:(0,a.jsx)(S.View,{gap:8,children:(0,a.jsxs)(S.View,{gap:8,children:[(0,a.jsxs)(S.View,{gap:8,children:[U?(0,a.jsxs)(S.View,{gap:4,children:[(0,a.jsx)("label",{htmlFor:"compile-sel",children:"Compile command"}),(0,a.jsx)(k.Text,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,a.jsx)(w.Input,{disabled:z,id:"compile-sel",type:"text",value:J,placeholder:"Enter a command to compile the program",onChange:function(e){ee(e.currentTarget.value)},css:{"&:disabled":{color:g.tokens.foregroundDimmer}}})]}):null,(0,a.jsx)("label",{htmlFor:"run-sel",css:[y.rcss.mt(4)],"data-cy":"import-config-run-command",children:"Run command"}),(0,a.jsx)(w.Input,{disabled:z,id:"run-sel",dataCy:"import-config-run-command-input",type:"text",value:X.value,placeholder:"Enter a command to run the program",onChange:function(e){X.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:g.tokens.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),X.error||!X.value?(0,a.jsxs)(S.View,{css:[y.rcss.color.accentNegativeDefault,y.rcss.rowWithGap(4),y.rcss.align.center],children:[(0,a.jsx)(l.default,{size:12}),(0,a.jsx)(S.View,{children:X.error?X.error.message:"Add a run command"})]}):null]}),(0,a.jsxs)(k.Text,{color:"dimmer",variant:"small",children:["Use either a dev server or start command.",(0,a.jsx)(C,{css:y.rcss.color.accentPrimaryStronger,target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl#run-command",rel:"noopener noreferrer",children:"Not sure what to use or running multiple apps?"})]}),Q?(0,a.jsx)(S.View,{children:(0,a.jsxs)(k.Text,{variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,a.jsxs)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/additional-resources/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replits features."]})}):null,(0,a.jsx)(S.View,{css:[y.rcss.flex.column,y.rcss.pt(16)],children:(0,a.jsx)(b.Button,{stretch:!0,colorway:"primary",type:"submit",text:z?"Saving...":"githubImport"===x?"Confirm and close":"Save",loading:z,disabled:z||!!X.error||!X.value,dataCy:"import-config-done"})})]})})})]})]})}}],818283);var T=e.i(960933),E=e.i(862927),R=T.Type.Object({type:T.Type.Literal("config"),flow:T.Type.Union([T.Type.Literal("githubImport"),T.Type.Literal("incompleteConfig")])}),I=function(e){return E.Value.Decode(R,e)};e.s(["decode",()=>I],999519)},109853,e=>{"use strict";var t=e.i(967629),n=e.i(480028),r=(0,t.css)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),i=(0,t.css)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:n.tokens.backgroundDefault}),a=(0,t.css)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}});e.s(["CodeMirrorEditorStyleEditor",()=>i,"CodeMirrorEditorStyleEditorContainer",()=>a,"CodeMirrorEditorStyleRoot",()=>r])},324975,86306,357114,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M22.077 8.254A.75.75 0 0 1 22.75 9v7a.75.75 0 0 1-1.5 0v-.261A4.25 4.25 0 1 1 18.5 8.25l.219.004c.963.05 1.842.42 2.531 1.005V9a.75.75 0 0 1 .75-.75l.077.004ZM18.5 9.75a2.75 2.75 0 1 0 0 5.5 2.75 2.75 0 0 0 0-5.5ZM6.501 5.252l.183.014a1.25 1.25 0 0 1 .887.59l.083.165 4.038 9.69a.75.75 0 0 1-1.384.577L9.25 13.75h-5.5l-1.058 2.538a.75.75 0 0 1-1.384-.577l4.039-9.69c.095-.228.256-.422.46-.559l.16-.09c.167-.079.35-.12.534-.12ZM4.375 12.25h4.25L6.5 7.152 4.375 12.25Z",clipRule:"evenodd"})}))}function o(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{d:"M6.273 3.818a.75.75 0 0 1 1.455.364l-4 16a.75.75 0 0 1-1.456-.364l4-16ZM20.273 3.818a.75.75 0 0 1 1.455.364l-4 16a.75.75 0 0 1-1.456-.364l4-16ZM13.5 3.25a.75.75 0 0 1 .75.75v1l.8-.6a.75.75 0 0 1 .9 1.2l-1.2.899 1.2.901a.75.75 0 0 1-.9 1.2l-.8-.601v1a.75.75 0 1 1-1.5 0V8l-.8.6a.75.75 0 0 1-.9-1.199l1.2-.901-1.2-.9a.75.75 0 0 1 .9-1.199l.8.6V4a.75.75 0 0 1 .75-.75Z"})}))}function s(e){return(0,r.jsxs)(i.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{d:"M22 16.25a.75.75 0 0 1 .75.75v1c0 .494-.24.925-.532 1.218-.293.293-.724.532-1.218.532H3c-.494 0-.925-.24-1.218-.532-.293-.293-.532-.724-.532-1.218v-1a.75.75 0 0 1 1.5 0v1c0 .006.01.075.093.157.082.082.15.093.157.093h18c.006 0 .075-.01.157-.093.082-.082.093-.15.093-.157v-1a.75.75 0 0 1 .75-.75Z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 8.25a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0 3.75 3.75 0 1 1 0-6.001.75.75 0 0 1 .75-.749Zm-3 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM14 6.25a.75.75 0 0 1 .75.75v1.999a3.75 3.75 0 1 1 0 6.001.75.75 0 0 1-1.5 0V7a.75.75 0 0 1 .75-.75Zm3 3.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"})]}))}e.s(["default",()=>a],324975),e.s(["default",()=>o],86306),e.s(["default",()=>s],357114)},624253,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{d:"M3 11.25a.75.75 0 0 1 .75.75 8.25 8.25 0 0 0 8.248 8.249 9 9 0 0 0 6.22-2.528l.971-.971H16a.75.75 0 0 1 0-1.5h5c.045 0 .089.004.132.012l.016.003c.014.002.026.008.04.011.033.009.066.017.098.03.03.013.056.03.083.045.057.032.113.07.161.119a.745.745 0 0 1 .118.16c.016.027.032.054.044.083a.746.746 0 0 1 .058.287v5a.75.75 0 0 1-1.5 0v-3.19l-.988.989a10.501 10.501 0 0 1-7.26 2.951H12A9.75 9.75 0 0 1 2.25 12a.75.75 0 0 1 .75-.75ZM12 2.25A9.75 9.75 0 0 1 21.75 12a.75.75 0 0 1-1.5 0 8.25 8.25 0 0 0-8.249-8.25 9 9 0 0 0-6.22 2.53l-.97.97H8a.75.75 0 0 1 0 1.5H3a.752.752 0 0 1-.133-.013l-.016-.003c-.014-.002-.026-.008-.04-.011-.033-.009-.066-.017-.098-.03-.03-.013-.056-.029-.083-.045a.746.746 0 0 1-.16-.118.746.746 0 0 1-.12-.16c-.015-.028-.031-.055-.043-.084A.748.748 0 0 1 2.25 8V3a.75.75 0 0 1 1.5 0v3.19l.988-.989a10.502 10.502 0 0 1 7.26-2.951H12Z"})}))}e.s(["default",()=>a])},551959,294751,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(389959),a=e.i(125674),o=e.i(670413),s=e.i(131141),l=e.i(541793),u=e.i(530658),c=e.i(161322);function d(){return(0,u._)((0,i.useState)(function(){return(0,l.createStore)()}),1)[0]}var f=(0,i.createContext)(null),p=function(e){return(0,c.useSetAtom)(e,{store:function(){var e=(0,i.useContext)(f);if(!e)throw Error("Expected store in context");return e}()})},h=(0,l.atom)(-1),m=(0,l.atom)([]),g=(0,l.atom)(void 0),x=(0,l.atom)(null,function(e,t,n){var r=e(g);switch(r&&(clearTimeout(r.id),r.cb()),n){case"forward":t(h,function(t){return Math.min(e(m).length,t+1)});break;case"backward":t(h,function(e){return Math.max(0,e-1)})}var i=e(m),a=e(h);return a>=i.length?"":i[a]}),y=(0,l.atom)(null,function(e,t,n){clearTimeout(null==(r=e(g))?void 0:r.id);var r,i=function(){if(n.length>0){var r=!1;t(m,function(t){return(0,s.produce)(t,function(t){if(n!==t[e(h)])for(r=!0,t.push(n);t.length>20;)t.shift()})}),r&&t(h,e(m).length-1)}t(g,void 0)};t(g,{id:setTimeout(i,2e3),cb:i})}),b=e.i(607278);function w(e){var r,s=p(y),l=(r=p(x),{forward:(0,a.default)(function(){return function(){return r("forward")}},[r]),backward:(0,a.default)(function(){return function(){return r("backward")}},[r])}),u=l.forward,c=l.backward,d=(0,i.useRef)(e.value);return(0,i.useEffect)(function(){e.value!==(null==d?void 0:d.current)&&(e.value&&s(e.value),d.current=e.value)},[s,e.value]),(0,n._)((0,t._)({},e),{onKeyDown:(0,a.default)(function(){return function(t){if(t.shiftKey||(0,o.getCmdOrCtrl)(t)){null==(r=e.onKeyDown)||r.call(e,t);return}var n,r,i=t.currentTarget,a=!!i.value.match(/\n/);if("ArrowUp"===t.key){if(a&&i.selectionStart&&i.selectionStart>0)return;e.onChange(c()),t.preventDefault(),t.stopPropagation();return}if("ArrowDown"===t.key){if(a&&i.selectionEnd&&i.selectionEnd<i.value.length)return;e.onChange(u()),t.preventDefault(),t.stopPropagation();return}null==(n=e.onKeyDown)||n.call(e,t)}},[c,u,e]),onChange:(0,a.default)(function(){return function(t){e.onChange(t.target.value)}},[e])})}var _=(0,i.forwardRef)(function(e,n){var i=w(e);return(0,r.jsx)(b.MultiLineInput,(0,t._)({ref:n},i))}),k=(0,i.forwardRef)(function(e,n){var i=d();return(0,r.jsx)(f.Provider,{value:i,children:(0,r.jsx)(_,(0,t._)({ref:n},e))})}),S=(0,i.forwardRef)(function(e,n){var i=w(e);return(0,r.jsx)(b.Input,(0,t._)({ref:n},e,i))}),C=(0,i.forwardRef)(function(e,n){var i=d();return(0,r.jsx)(f.Provider,{value:i,children:(0,r.jsx)(S,(0,t._)({ref:n},e))})});e.s(["InputWithHistory",()=>C,"MultiLineInputWithHistory",()=>k],551959);var j=e.i(886513),T=e.i(446530),E=e.i(613355),R=e.i(136540),I=(0,T.cssRecord)({checked:[E.rcss.backgroundColor.backgroundHigher],unchecked:[E.rcss.color.foregroundDimmest]});function A(e){var i=e.alt,a=e.icon,o=e.checked,s=e.onClick,l=(0,j._)(e,["alt","icon","checked","onClick"]);return(0,r.jsx)(R.IconButton,(0,n._)((0,t._)({},l),{css:o?I.checked:I.unchecked,alt:"".concat(o?"Disable":"Enable"," ").concat(i),onClick:s,children:a}))}e.s(["default",()=>A],294751)},524283,e=>{"use strict";var t=e.i(76430),n=e.i(336563);function r(e){var r=e.data,i=e.tasks,a=e.isExpoStack,o=!0===a?(0,t.getExpoTasks)(i):i,s=(0,n.getForwardedPortsFromTasks)(o),l=function(e,t){if((null==e||null==(n=e.ports)?void 0:n.type)==="external")return null==e||null==(i=e.ports)?void 0:i.port;if((null==e||null==(r=e.ports)?void 0:r.type)==="local"){var n,r,i,a=t.find(function(t){var n;return t.port===(null==(n=e.ports)?void 0:n.port)});return null==a?void 0:a.externalPort}}(r,s);return l?l:s.length>0?s.find(function(e){return 80===e.externalPort})?80:s[0].externalPort:!0!==a?80:void 0}e.s(["getInitialPort",()=>r])},477891,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsxs)(i.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M1.47 1.47a.75.75 0 0 1 1.06 0l20 20a.75.75 0 0 1-1.06 1.06l-4.78-4.78h-3.94v2.5H16a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1 0-1.5h3.25v-2.5H4A2.75 2.75 0 0 1 1.25 15V5c0-.93.313-1.592.661-2.028L1.47 2.53a.75.75 0 0 1 0-1.06Zm1.517 2.578c-.122.201-.237.505-.237.952v10A1.25 1.25 0 0 0 4 16.25h11.19L2.987 4.048Z",clipRule:"evenodd"}),(0,r.jsx)("path",{d:"M20 2.25A2.75 2.75 0 0 1 22.75 5v10a.75.75 0 0 1-1.5 0V5A1.25 1.25 0 0 0 20 3.75H9a.75.75 0 1 1 0-1.5h11Z"})]}))}e.s(["default",()=>a])},779154,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(803640),i=e.i(709485),a=e.i(858248),o=e.i(729122),s=e.i(140487);function l(e){var l=e.trackSource,u=void 0===l?"unknown":l,c=(0,o.useRunInfo)(),d=c.isOffline,f=c.isWorkflowsLoading,p=c.isDisabled,h=(0,o.useOnStartRun)(),m=(0,n.useMemo)(function(){return d||f},[d,f]);return(0,t.jsx)(s.Button,{text:"Run",iconLeft:(0,t.jsx)(r.default,{}),size:"small",colorway:m?void 0:"positive",disabled:m||p,onClick:function(){(0,a.track)(i.events.WORKFLOW_RAN,{source:u,runner:"workflows"}),h()}})}e.s(["InlineRunButton",()=>l])},84134,e=>{e.v({capabilityContainer:"DynamicReplitCapabilities-module__YMIwsq__capabilityContainer"})},471934,e=>{e.v({borderWrapper:"AgentAwareWebviewEmptyStates-module__IjFd0a__borderWrapper",closeButton:"AgentAwareWebviewEmptyStates-module__IjFd0a__closeButton",crashedBodyWrapper:"AgentAwareWebviewEmptyStates-module__IjFd0a__crashedBodyWrapper"})},561132,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(276385),i=e.i(389959),a=e.i(629536),o=e.i(360800),s=e.i(784147),l=e.i(602686),u=e.i(712903),c=e.i(269848),d=e.i(477891),f=e.i(416298),p=e.i(381010),h=e.i(596139),m=e.i(47503),g=e.i(973519),x=e.i(712516),y=e.i(468095),b=e.i(443394),w=e.i(729122),_=e.i(252788),k=e.i(779154),S=e.i(765890),C=e.i(530658),j=e.i(346715),T=e.i(612054),E=e.i(96250),R=e.i(593767),I=e.i(490262),A=e.i(659042),P=e.i(408143),D=e.i(917736),O=e.i(182409),N=e.i(204977),M=e.i(399245),L=e.i(271280),B=e.i(882848),V=e.i(140154),F=e.i(123515),U=e.i(256758),G=e.i(735362),$=e.i(749556),H=e.i(612343),z=e.i(480028),W=e.i(960178),q=e.i(625484),K=e.i(84134),Y=[{text:"Built-in database (just ask Agent!)",icon:"Database"},{text:"Develop on the go with the mobile app",icon:"Smartphone"},{text:'Press "Publish" to put your app online',icon:"Deploy"},{text:"Use Plan Mode to chat without code changes",icon:"Chat"},{text:"Use Edit Mode to change individual elements",icon:"Edit"},{text:"Use App Storage for images/videos",icon:"Cloud"},{text:"Invite collaborators in real-time",icon:"UserAdd"},{text:"Use Rollbacks to undo changes",icon:"History"},{text:"Turn on Dynamic Intelligence for more power",icon:"Cpu"},{text:"Send message while Agent is working to add to queue",icon:"ChatAdd"},{text:"Seamless integrations with 3rd party tools",icon:"Puzzle"}],Q=[{text:"Generate images with AI, automatically",icon:"Sparkle"},{text:"Agent checks its work with App Testing",icon:"Cursor"},{text:"Custom domains for professional apps",icon:"Globe"}],X=[{text:"Connect your agent or automation to external services",icon:"Link"}];function Z(e){var t,n,a=e.isAgentStackRepl,o=(0,C._)((0,i.useState)(0),2),s=o[0],l=o[1],u=(0,C._)((0,i.useState)(!0),2),c=u[0],d=u[1],f=(0,i.useRef)(null),p=a?(0,j._)(Y).concat((0,j._)(X)):(0,j._)(Y).concat((0,j._)(Q));(0,i.useEffect)(function(){var e=setInterval(function(){d(!1),f.current=window.setTimeout(function(){l(function(e){return(e+1)%p.length}),d(!0)},300)},3500);return function(){clearInterval(e),f.current&&clearTimeout(f.current)}},[p.length]);var h=p[s];return(0,r.jsxs)(q.View,{row:!0,align:"center",gap:12,py:4,className:K.default.capabilityContainer,style:{opacity:+!!c,transform:c?"translateY(0)":"translateY(4px)"},children:[(0,r.jsx)(q.View,{children:(t=h.icon,(n=({Deploy:O.default,Sparkle:G.default,Database:D.default,Cloud:I.default,Smartphone:U.default,UserAdd:$.default,Cursor:P.default,History:L.default,Chat:E.default,Edit:N.default,Cpu:A.default,ChatAdd:R.default,Puzzle:F.default,Globe:M.default,Link:B.default,Publish:V.default,UserMultiplayer:H.default,Bug:T.default})[t])?(0,r.jsx)(n,{size:20,color:z.tokens.foregroundDimmer}):null)}),(0,r.jsx)(W.Text,{color:"dimmer",children:h.text})]})}var J=e.i(140487),ee=e.i(136540),et=e.i(550801),en=e.i(471934);function er(e){var t=e.canDismiss,n=e.onDismiss;return e.isFreemiumUserOutOfAgentCredits?(0,r.jsx)(eh,{}):(0,r.jsx)(x.default,{pane:{type:"webview"},headerText:"Preview will be available soon",icon:(0,r.jsx)(o.default,{size:48,variant:"minimal"}),body:(0,r.jsxs)(r.Fragment,{children:[void 0!==t&&t&&n?(0,r.jsx)(q.View,{clsx:en.default.closeButton,children:(0,r.jsx)(ee.IconButton,{alt:"Dismiss",onClick:n,children:(0,r.jsx)(l.default,{})})}):null,(0,r.jsx)(q.View,{align:"center",children:(0,r.jsx)(Z,{})})]})})}function ei(e){return e.isFreemiumUserOutOfAgentCredits?(0,r.jsx)(eh,{}):(0,r.jsx)(x.default,{pane:{type:"webview"},headerText:"Agent is waiting for input",icon:(0,r.jsx)(s.default,{size:48})})}function ea(e){var t=e.openPane,n=e.canDismiss,i=e.onDismiss;return e.isFreemiumUserOutOfAgentCredits?(0,r.jsx)(eh,{}):(0,r.jsx)(x.default,{pane:{type:"webview"},icon:(0,r.jsx)(d.default,{size:48}),headerText:"Your app encountered an error",body:(0,r.jsxs)(q.View,{clsx:en.default.crashedBodyWrapper,gap:16,children:[void 0!==n&&n&&i?(0,r.jsx)(q.View,{clsx:en.default.closeButton,children:(0,r.jsx)(ee.IconButton,{alt:"Dismiss",onClick:i,children:(0,r.jsx)(l.default,{})})}):null,(0,r.jsx)(q.View,{align:"center",children:(0,r.jsx)(ef,{openPane:t,message:"The app crashed with a runtime error, please debug and fix it."})})]})})}function eo(){return(0,r.jsx)(x.default,{pane:{type:"webview"},icon:(0,r.jsx)(d.default,{size:48}),headerText:"Your app is not running",body:(0,r.jsxs)(q.View,{align:"center",row:!0,gap:4,children:[(0,r.jsx)(k.InlineRunButton,{})," to preview your app."]})})}function es(){return(0,r.jsx)(x.default,{pane:{type:"webview"},icon:(0,r.jsx)(c.default,{size:48}),headerText:"Your app is starting",bodyText:null})}function el(){return(0,r.jsx)(x.default,{pane:{type:"webview"},headerText:"The workspace is loading",bodyText:null})}function eu(){return(0,r.jsx)(x.default,{pane:{type:"webview"},icon:(0,r.jsx)(p.default,{size:48}),headerText:"The workspace is reconnecting",bodyText:null})}function ec(){return(0,r.jsx)(x.default,{pane:{type:"webview"},icon:(0,r.jsx)(c.default,{size:48}),headerText:"Your app is not ready yet",body:(0,r.jsx)(q.View,{align:"center",children:(0,r.jsxs)(W.Text,{children:[(0,a.getAgentName)({capitalizeFirstChar:!0})," is working on it"]})})})}function ed(e){var t=e.openPane,n=e.crashedRunId,i=(0,w.useWorkflowsRunState)(),a=null==i?void 0:i[n],o=(0,m.useCurrentUserId)();return(0,r.jsx)(x.default,{pane:{type:"webview"},icon:(0,r.jsx)(d.default,{size:48}),headerText:"Your app crashed",body:(0,r.jsxs)(q.View,{clsx:en.default.crashedBodyWrapper,gap:16,children:[o&&a?(0,r.jsx)(q.View,{clsx:en.default.borderWrapper,children:(0,r.jsx)(_.default,{workflowRunState:a,currentUserId:o,openPane:t})}):null,(0,r.jsx)(q.View,{align:"center",children:(0,r.jsx)(ef,{openPane:t,message:"The app failed to run, please debug and fix it."})})]})})}function ef(e){var t=e.openPane,n=e.message,o=(0,y.useSendAgentMessage)({openPane:t}),s=(0,i.useCallback)(function(e){o(n,e)},[o,n]);return(0,r.jsx)(S.SendAgentMessageButtonGroup,{onSendAgentMessage:s,buttonText:"Debug with ".concat(a.AGENT_NAME),menuPrefix:"Debug",colorway:"blurple"})}function ep(e){var t=e.openPane,n=e.nixError,a=(0,i.useCallback)(function(e){t({type:"codeEditor",data:{path:e}})},[t]);return(0,r.jsx)(x.default,{pane:{type:"webview"},icon:(0,r.jsx)(f.default,{size:48}),headerText:"App is in recovery mode",body:(0,r.jsx)(q.View,{clsx:en.default.borderWrapper,children:(0,r.jsx)(q.View,{p:16,children:(0,r.jsx)(et.NixIsBrokenModalContent,{openFile:a,nixError:n})})})})}function eh(){var e=(0,g.useGlobalModal)().show,a=(0,b.getCurrentUrl)(),o=(0,i.useCallback)(function(){return(0,t._)(function(){return(0,n._)(this,function(t){switch(t.label){case 0:return[4,e("MembershipPurchaseModal",{analyticsContext:{upgrade:{context:"agent_freemium_preview_error"}},redirectPath:a})];case 1:return t.sent(),[2]}})})()},[e,a]);return(0,r.jsx)(x.default,{pane:{type:"webview"},icon:(0,r.jsx)(d.default,{size:48}),headerText:"Preview unavailable",body:(0,r.jsxs)(q.View,{align:"center",gap:16,children:[(0,r.jsxs)(W.Text,{color:"dimmer",textAlign:"center",multiline:!0,children:["Finish building your app and unlock full preview access with"," ",h.corePlanName,"."]}),(0,r.jsx)(J.Button,{text:"Upgrade now",iconLeft:(0,r.jsx)(u.default,{}),onClick:o,colorway:"primary",variant:"default"})]})})}e.s(["AgentAwareWebviewAppCrashedAgentNotWorkingEmptyState",()=>ed,"AgentAwareWebviewAppCrashedAgentWorkingEmptyState",()=>ec,"AgentAwareWebviewAppNotRunningEmptyState",()=>eo,"AgentAwareWebviewAppStartingEmptyState",()=>es,"AgentAwareWebviewConnectingEmptyState",()=>el,"AgentAwareWebviewNixIsBrokenEmptyState",()=>ep,"AgentAwareWebviewPreviewSoonEmptyStateV2",()=>er,"AgentAwareWebviewPreviewWaitingForInputEmptyState",()=>ei,"AgentAwareWebviewReconnectingEmptyState",()=>eu,"AgentAwareWebviewRuntimeErrorCrashedEmptyState",()=>ea,"FreemiumUserOutOfAgentCreditsPreviewErrorEmptyState",()=>eh],561132)},251612,e=>{"use strict";function t(){return!0}e.s(["useShouldShowDesignModeUITreatment",()=>t])},154703,879243,e=>{"use strict";var t=e.i(297083),n=e.i(904851),r=e.i(711300),i=e.i(634203),a=e.i(35877);function o(e,t,n){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return n}var s=e.i(209268),l=e.i(90659),u=e.i(878420),c=e.i(64386),d=e.i(530658),f=e.i(817556),p=e.i(389959),h=e.i(179104);e.i(242933);var m=e.i(424360),g=e.i(134628),x=e.i(441329),y=e.i(479407),b=new WeakMap,w=new WeakMap,_=new WeakMap,k=new WeakSet,S=function(){function e(o){var l=this,u=o.navigateIframeRef,c=o.onReceiveWebviewLog,d=o.onReceiveWebviewScreenshot;(0,n._)(this,e),(0,s._)(this,k),k.add(this),(0,i._)(this,b,{writable:!0,value:void 0}),(0,i._)(this,w,{writable:!0,value:[]}),(0,i._)(this,_,{writable:!0,value:void 0}),(0,a._)(this,b,new m.Multicast(function(e){var t=function(t){return(0,y.paneResponseBridgeMessageHandler)(t,function(t){return e.next(t.paneResponse)})};return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}})),(0,r._)(this,w).push((0,r._)(this,b).subscribe(function(e){return(0,t._)(function(){var t,n,i;return(0,f._)(this,function(o){switch(o.label){case 0:if("webview"!==e.paneType||"navigation"!==e.response.type)return[3,4];if("base"in e.response&&"path"in e.response&&"port"in e.response||(null==(t=(0,r._)(this,_))?void 0:t.path)===e.response.path)return[3,2];return(0,a._)(this,_,{base:"",path:e.response.path,port:80}),[4,null==(n=u.current)?void 0:n.call(u,(0,r._)(this,_).path,(0,r._)(this,_).port)];case 1:return o.sent(),[2];case 2:var s,l;if(s=(0,r._)(this,_),l=e.response,s&&l&&s.base===l.base&&s.path===l.path&&s.port===l.port)return[3,4];return(0,a._)(this,_,e.response),[4,null==(i=u.current)?void 0:i.call(u,(0,r._)(this,_).path,(0,r._)(this,_).port)];case 3:o.sent(),o.label=4;case 4:return[2]}})}).call(l)})),(0,r._)(this,w).push((0,r._)(this,b).subscribe(function(e){"webview"===e.paneType&&"logs"===e.response.type&&c(e.response.method,e.response.message.map(function(e){try{return JSON.stringify(e,null,0)}catch(e){return"Devtools error: console message could not be stringified"}}).join(" "))})),(0,r._)(this,w).push((0,r._)(this,b).subscribe(function(e){"webview"===e.paneType&&"screenshot"===e.response.type&&d(e.response.dataUri)}))}return(0,l._)(e,[{key:"dispose",value:function(){(0,r._)(this,w).forEach(function(e){return e()})}},{key:"path",get:function(){return(0,r._)(this,b).filter(function(e){return"webview"===e.paneType&&"navigation"===e.response.type}).select(function(e){return e.response.path})}},{key:"refresh",value:function(){o(this,k,C).call(this,{type:"refresh"})}},{key:"setInsets",value:function(e){o(this,k,C).call(this,{type:"setInsets",insets:e})}},{key:"handleNavigateTo",value:function(e){var t,n,i,a,s,l,d,f,p;e.base===(null==(t=(0,r._)(this,_))?void 0:t.base)&&e.port===(null==(n=(0,r._)(this,_))?void 0:n.port)&&e.path===(null==(i=(0,r._)(this,_))?void 0:i.path)?this.refresh():o(this,k,C).call(this,(0,c._)((0,u._)({type:"navigate"},e),{url:(l=e.base,d=null!=(a=e.path)?a:"/",f=null!=(s=e.port)?s:80,p=new URL(d.startsWith("/")?d:"/".concat(d),l),80!==f&&(p.port=f.toString()),p.toString())}))}}]),e}();function C(e){var t={messageType:g.BridgeMessageType.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:e}};(0,y.sendMessage)(t,(0,h.nanoid)())}function j(){var e=(0,x.useDoesBonsaiWebviewSupportFeature)("webviewBridge"),t=(0,x.useDoesBonsaiWebviewSupportFeature)("workspace2");return(0,p.useMemo)(function(){return e&&t},[e,t])}function T(e){var t=e.initialPort,n=e.initialPath,r=e.baseUrl,i=e.isSupported,a=e.navigateIframeRef,o=e.onReceiveWebviewLog,s=e.onReceiveWebviewScreenshot,l=(0,d._)((0,p.useState)(null),2),u=l[0],c=l[1];(0,p.useEffect)(function(){if(i){var e=new S({navigateIframeRef:a,onReceiveWebviewLog:o,onReceiveWebviewScreenshot:s});return c(e),function(){e.dispose()}}},[i,a,o,s]);var f=(0,p.useRef)(void 0);return(0,p.useEffect)(function(){i&&u&&r&&f.current!==t&&(f.current=t,u.handleNavigateTo({base:r,port:t,path:n}))},[r,u,n,t,i]),u}function E(e){var t=e.isVisible,n=j();(0,p.useEffect)(function(){n&&((0,y.sendMessage)({messageType:g.BridgeMessageType.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:{type:"setVisibility",isVisible:t}}},(0,h.nanoid)()),t||(0,y.sendMessage)({messageType:g.BridgeMessageType.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:{type:"navigate",base:"",url:"INVALID_URL_TO_HIDE_NATIVE_WEBVIEW"}}},(0,h.nanoid)()))},[n,t])}e.s(["useIsBonsaiWebviewBridgeSupported",()=>j,"useNativeWebviewVisibilityState",()=>E,"useWebviewPaneBridge",()=>T],154703);var R=e.i(276385),I=e.i(416746),A=e.i(257982),P=e.i(417120),D=e.i(446530),O=e.i(613355),N=e.i(396776),M=(0,D.cssRecord)({root:[O.rcss.zIndex(1),O.rcss.flex.grow(0)]});function L(e){var t=e.readonlyBannerVariant,n=(0,P.useIsAgentWorking)(),r="";switch(t){case"html-stream":r="This is a visual preview of your app.";break;case"gallery":r="This is a visual preview of your application's building blocks.";break;case"none":return null;default:(0,A.default)(t)}return n?r+=" The agent is currently creating a fully interactive version.":r+=" The agent is currently paused.",(0,R.jsx)(N.StatusBanner,{css:M.root,text:r,icon:(0,R.jsx)(I.default,{}),colorway:"blue",variant:"flush"})}e.s(["ReadonlyPreviewBanner",()=>L],879243)},979897,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{d:"M21 2.25a.75.75 0 0 1 .75.75v5a.754.754 0 0 1-.058.286c-.012.03-.028.056-.044.083a.742.742 0 0 1-.118.161.755.755 0 0 1-.244.162c-.032.014-.065.022-.099.03-.013.004-.025.01-.039.012l-.016.003A.751.751 0 0 1 21 8.75h-5a.75.75 0 0 1 0-1.5h3.19l-.98-.98a9.01 9.01 0 0 0-5.778-2.51L12 3.75A8.25 8.25 0 1 0 20.25 12a.75.75 0 0 1 .75-.75l.076.004a.75.75 0 0 1 .674.746A9.75 9.75 0 1 1 12 2.25l.508.013a10.509 10.509 0 0 1 6.752 2.936l.99.99V3a.75.75 0 0 1 .75-.75Z"})}))}e.s(["default",()=>a])},138791,e=>{e.v({ctaContainer:"ExpoPreviewGuide-module__6iVYIq__ctaContainer",rootPopover:"ExpoPreviewGuide-module__6iVYIq__rootPopover",rootSidebar:"ExpoPreviewGuide-module__6iVYIq__rootSidebar",stepNumber:"ExpoPreviewGuide-module__6iVYIq__stepNumber",stepTitle:"ExpoPreviewGuide-module__6iVYIq__stepTitle"})},981177,e=>{e.v({expoButtonHighlight:"ExpoPreviewButton-module__5TxRJq__expoButtonHighlight",inlineButton:"ExpoPreviewButton-module__5TxRJq__inlineButton","pulse-ring":"ExpoPreviewButton-module__5TxRJq__pulse-ring"})},693686,e=>{e.v({root:"BonsaiUrlBar-module__qiCEFW__root"})},625376,e=>{e.v({root:"UrlBar-module__JSMfsq__root"})},639610,e=>{e.v({errorLog:"WebviewLogs-module__E_NGZq__errorLog",header:"WebviewLogs-module__E_NGZq__header",logRow:"WebviewLogs-module__E_NGZq__logRow",logsContainer:"WebviewLogs-module__E_NGZq__logsContainer",nowrap:"WebviewLogs-module__E_NGZq__nowrap",resizeGrip:"WebviewLogs-module__E_NGZq__resizeGrip",resizeHandle:"WebviewLogs-module__E_NGZq__resizeHandle",resizeHandleRight:"WebviewLogs-module__E_NGZq__resizeHandleRight",resizing:"WebviewLogs-module__E_NGZq__resizing",scrollSnap:"WebviewLogs-module__E_NGZq__scrollSnap",snapToBottom:"WebviewLogs-module__E_NGZq__snapToBottom",tabsWrapper:"WebviewLogs-module__E_NGZq__tabsWrapper",warningLog:"WebviewLogs-module__E_NGZq__warningLog",wrapper:"WebviewLogs-module__E_NGZq__wrapper",wrapperRight:"WebviewLogs-module__E_NGZq__wrapperRight",xtermInner:"WebviewLogs-module__E_NGZq__xtermInner",xtermWrapper:"WebviewLogs-module__E_NGZq__xtermWrapper"})},474880,e=>{e.v({desktopAppWebview:"index-module__FnOQ5W__desktopAppWebview",iframe:"index-module__FnOQ5W__iframe",iframeInner:"index-module__FnOQ5W__iframeInner",iframeMiddle:"index-module__FnOQ5W__iframeMiddle",iframeWrapper:"index-module__FnOQ5W__iframeWrapper",root:"index-module__FnOQ5W__root",screenshotWrapper:"index-module__FnOQ5W__screenshotWrapper",webContentAndLogsWrapper:"index-module__FnOQ5W__webContentAndLogsWrapper",webContentWrapper:"index-module__FnOQ5W__webContentWrapper"})},378042,767500,477074,157648,813453,293242,e=>{"use strict";var t,n=e.i(297083),r=e.i(721281),i=e.i(167626),a=e.i(878420),o=e.i(64386),s=e.i(530658),l=e.i(346715),u=e.i(119468),c=e.i(817556),d=e.i(276385),f=e.i(389959);e.i(877212);var p=e.i(145864),h=e.i(644920),m=e.i(251612),g=e.i(399344),x=e.i(921521),y=e.i(98816),b=e.i(207237),w=e.i(649960),_=e.i(409792),k=e.i(441329),S=e.i(927158),C=e.i(813675),j=e.i(801127),T=e.i(154703),E=e.i(492267),R=e.i(879243),I=e.i(138716),A=e.i(752539),P=e.i(252204),D=e.i(269848),O=e.i(979897),N=e.i(332441),M=e.i(161322),L=e.i(778063),B=e.i(467951),V=e.i(952521),F=(0,e.i(541793).atom)(!1);e.s(["expoGoNudgeShownAtom",()=>F],767500);var U=e.i(886513),G=e.i(858248),$=e.i(709485);function H(e){var t=e.actionType,n=(0,U._)(e,["actionType"]);(0,G.track)($.events.WORKSPACE,(0,a._)({action:"webview_used",type:t},n))}function z(){H({actionType:"open_new_window"})}function W(){H({actionType:"dev_url_copied"})}function q(e){H({actionType:"download_expo_go",platform:e})}var K=e.i(444903),Y=e.i(602686),Q=e.i(182409),X=e.i(965097),Z=e.i(803640);function J(e){try{var t,n,r,i,a=JSON.parse(e);return{name:null!=(r=null==(t=a.expo)?void 0:t.name)?r:null,icon:null!=(i=null==(n=a.expo)?void 0:n.icon)?i:null}}catch(e){return{name:null,icon:null}}}function ee(){var e=(0,g.useFsService)(),t=(0,s._)((0,f.useState)(null),2),r=t[0],i=t[1],a=(0,s._)((0,f.useState)(null),2),o=a[0],l=a[1],d=(0,s._)((0,f.useState)(!0),2),p=d[0],h=d[1];return(0,f.useEffect)(function(){(0,n._)(function(){var t,n;return(0,c._)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),[4,e.readFile("app.json")];case 1:return(t=r.sent()).error||(i((n=J(t.content.toString())).name),l(n.icon)),[3,4];case 2:return r.sent(),[3,4];case 3:return h(!1),[7];case 4:return[2]}})})();var t=e.watchFile("app.json",{onChange:function(e){var t=J(e.toString("utf8"));i(t.name),l(t.icon)},onError:function(){},onMoveOrDelete:function(){i(null),l(null)}});return function(){t()}},[e]),{appName:r,iconPath:o,loading:p,saveAppName:function(t){return(0,n._)(function(){var n,r,i,a;return(0,c._)(this,function(o){switch(o.label){case 0:return[4,e.readFile("app.json")];case 1:if((n=o.sent()).error)throw Error("Failed to read app.json");if(r=JSON.parse(n.content.toString()),!(i=t.toLowerCase().replace(/[^a-z0-9]+/g,"").replace(/^[0-9]+/,"")))throw Error("App name must contain at least one letter.");return r.expo||(r.expo={}),r.expo.name=t,r.expo.slug=i,r.expo.scheme=i,r.expo.ios||(r.expo.ios={}),r.expo.ios.bundleIdentifier="com.".concat(i,".app"),r.expo.android||(r.expo.android={}),r.expo.android.package="com.".concat(i,".app"),a=JSON.stringify(r,null,2),[4,e.writeFile("app.json",a)];case 2:return o.sent(),[2]}})})()},saveAppIcon:function(t){return(0,n._)(function(){var n,r,i,a,o;return(0,c._)(this,function(s){switch(s.label){case 0:return[4,e.readFile("app.json")];case 1:if((n=s.sent()).error)throw Error("Failed to read app.json");return(r=JSON.parse(n.content.toString())).expo||(r.expo={}),r.expo.icon=t.icon,r.expo.web||(r.expo.web={}),r.expo.web.favicon=t.favicon,r.plugins&&-1!==(i=r.plugins.findIndex(function(e){return Array.isArray(e)&&"expo-splash-screen"===e[0]}))&&Array.isArray(a=r.plugins[i])&&"object"===(0,u._)(a[1])&&(a[1].image=t.splash),o=JSON.stringify(r,null,2),[4,e.writeFile("app.json",o)];case 2:return s.sent(),[2]}})})()}}}e.s(["useAppJson",()=>ee],477074);var et=e.i(54073),en=e.i(529810),er=e.i(173703),ei=e.i(140487),ea=e.i(91720),eo=e.i(136540),es=e.i(929872),el=e.i(960178),eu=e.i(751273),ec=e.i(625484),ed=e.i(703774);function ef(t){var n,r=t.value,i=t.image,a=t.width,o=void 0===a?300:a,s=t.height,l=void 0===s?300:s,u=(0,ed.useTheme)().isDarkColorScheme,c=(0,f.useRef)(null),p=u?"#ffffff":"#000000";return i&&"universal"in i?n=i.universal:i&&u?n=i.darkMode:i&&"lightMode"in i&&(n=i.lightMode),(0,f.useEffect)(function(){var t=!1,i=c.current;return e.A(21803).then(function(e){var i=new e.default({width:o,height:l,type:"svg",data:r,image:n,dotsOptions:{color:p,roundSize:!1},margin:0,backgroundOptions:{color:"transparent"},imageOptions:{crossOrigin:"anonymous",margin:4},qrOptions:{errorCorrectionLevel:"H"}});!t&&c.current&&(c.current.innerHTML="",i.append(c.current))}),function(){i&&(i.innerHTML=""),t=!0}},[r,n,o,l,p]),(0,d.jsx)("div",{style:{width:o,height:l},ref:c})}var ep=e.i(138791),eh="https://apps.apple.com/app/expo-go/id982107779",em="https://play.google.com/store/apps/details?id=host.exp.exponent";function eg(e){var t=e.expoUrl;return(0,d.jsxs)(ec.View,{clsx:ep.default.rootPopover,p:16,gap:16,children:[(0,d.jsx)(el.Text,{children:"To experience touch gestures and native features, preview your mobile app using Expo Go."}),(0,d.jsxs)(ec.View,{gap:8,children:[(0,d.jsxs)(ec.View,{row:!0,gap:8,align:"center",children:[(0,d.jsx)(er.ShadesSurface,{align:"center",justify:"center",clsx:ep.default.stepNumber,children:"1"}),(0,d.jsx)(el.Text,{clsx:ep.default.stepTitle,children:"Download Expo Go"})]}),(0,d.jsx)(ec.View,{pl:32,children:(0,d.jsxs)(ec.View,{row:!0,gap:8,children:[(0,d.jsx)(ew,{}),(0,d.jsx)(e_,{})]})})]}),(0,d.jsxs)(ec.View,{gap:8,children:[(0,d.jsxs)(ec.View,{row:!0,gap:8,align:"center",children:[(0,d.jsx)(er.ShadesSurface,{align:"center",justify:"center",clsx:ep.default.stepNumber,children:"2"}),(0,d.jsx)(el.Text,{clsx:ep.default.stepTitle,children:"Open in Expo Go"})]}),(0,d.jsx)(ec.View,{pl:32,children:(0,d.jsxs)(el.Text,{children:[(0,d.jsx)(el.Text,{children:"Tap "}),(0,d.jsx)(eC,{expoUrl:t,loading:!1,inline:!0}),(0,d.jsx)(el.Text,{children:" to preview your app."})]})})]}),(0,d.jsx)(ec.View,{pt:16,children:(0,d.jsx)(ey,{})})]})}function ev(e){var t=e.expoUrl,n=e.hasDeployment,r=e.onClose,i=e.onOpenDeploymentsPane,a=e.hidden;return(0,d.jsxs)(er.ShadesSurface,{clsx:[ep.default.rootSidebar],style:a?{display:"none"}:void 0,elevate:!1,children:[(0,d.jsx)(ec.View,{row:!0,justify:"end",py:4,pr:4,children:(0,d.jsx)(eo.IconButton,{alt:"Close",onClick:r,children:(0,d.jsx)(Y.default,{})})}),(0,d.jsxs)(ec.View,{px:16,gap:12,children:[(0,d.jsxs)(ec.View,{row:!0,gap:12,align:"center",children:[(0,d.jsx)(es.Surface,{background:"higher",p:8,style:{borderRadius:4},children:(0,d.jsx)(L.default,{size:16})}),(0,d.jsx)(ec.View,{children:(0,d.jsx)(el.Text,{variant:"subheadDefault",children:"Preview on your phone"})})]}),(0,d.jsx)(el.Text,{children:"Test on a mobile device to experience touch gestures and native features."})]}),(0,d.jsxs)(ec.View,{pt:24,px:16,gap:8,children:[(0,d.jsxs)(ec.View,{row:!0,gap:8,align:"center",children:[(0,d.jsx)(er.ShadesSurface,{align:"center",justify:"center",clsx:ep.default.stepNumber,children:"1"}),(0,d.jsx)(el.Text,{clsx:ep.default.stepTitle,children:"Download Expo Go"})]}),(0,d.jsxs)(ec.View,{pl:32,gap:8,children:[(0,d.jsx)(el.Text,{color:"dimmer",children:"A free app that lets you run your project instantly."}),(0,d.jsxs)(ec.View,{row:!0,gap:8,children:[(0,d.jsx)(ew,{}),(0,d.jsx)(e_,{})]})]})]}),(0,d.jsxs)(ec.View,{pt:24,px:16,gap:8,children:[(0,d.jsxs)(ec.View,{row:!0,gap:8,align:"center",children:[(0,d.jsx)(er.ShadesSurface,{align:"center",justify:"center",clsx:ep.default.stepNumber,children:"2"}),(0,d.jsx)(el.Text,{clsx:ep.default.stepTitle,children:"Scan the QR code"})]}),(0,d.jsxs)(ec.View,{pl:32,gap:8,children:[(0,d.jsx)(el.Text,{color:"dimmer",children:"Use your camera to scan the code and launch Expo Go."}),(0,d.jsx)(ex,{expoUrl:t})]})]}),(0,d.jsx)(ec.View,{pt:24,px:16,gap:8,children:(0,d.jsx)(ey,{})}),(0,d.jsx)(ec.View,{grow:!0}),n?null:(0,d.jsx)(ec.View,{pt:32,px:16,pb:16,children:(0,d.jsx)(eb,{onOpenDeploymentsPane:i})})]})}var ex=function(e){var t=e.expoUrl,n=(0,en.default)().fs,r=ee().iconPath,i=(0,et.useFileAsDataUrl)(n,r).dataSrc,a=t.replace("exp://","exps://");return(0,d.jsx)(ef,{value:a,image:i?{universal:i}:void 0,width:180,height:180})};function ey(){return(0,d.jsx)(er.ShadesSurface,{border:"regular",elevate:!1,br:"container",p:16,children:(0,d.jsxs)(ec.View,{row:!0,gap:12,align:"start",children:[(0,d.jsx)(ec.View,{width:24,pt:2,align:"center",shrink:!1,children:(0,d.jsx)(X.default,{size:16})}),(0,d.jsx)(ec.View,{grow:!0,shrink:!0,children:(0,d.jsx)(el.Text,{color:"dimmer",children:"Shake your device to open Expo Go's menu, then tap Reload to see your changes."})})]})})}function eb(e){var t=e.onOpenDeploymentsPane;return(0,d.jsx)(er.ShadesSurface,{elevate:"1x",px:16,pt:8,pb:12,colorShade:"notice",clsx:ep.default.ctaContainer,children:(0,d.jsxs)(ec.View,{gap:8,children:[(0,d.jsx)(el.Text,{children:"Ready to publish to App Store?"}),(0,d.jsx)(el.Text,{variant:"small",children:"Go live with your app and landing page, then submit to App Store."}),(0,d.jsx)(ei.Button,{size:"small",iconLeft:(0,d.jsx)(Q.default,{}),onClick:function(){H({actionType:"expo_publish_cta_clicked"}),t()},text:"Publish"})]})})}function ew(){return(0,d.jsx)(eu.Tooltip,{placement:"top",delay:"none",maxWidth:160,tooltip:(0,d.jsxs)(ec.View,{gap:8,align:"center",p:4,children:[(0,d.jsx)(el.Text,{variant:"small",color:"dimmer",children:"Scan to download"}),(0,d.jsx)(ef,{value:eh,image:{lightMode:"/public/images/expo/expo-go-light.svg",darkMode:"/public/images/expo/expo-go-dark.svg"},width:140,height:140})]}),children:(0,d.jsx)(ea.ButtonLink,{variant:"outlined",iconLeft:(0,d.jsx)(K.default,{}),text:"iOS",href:eh,target:"_blank",noNextLink:!0,onClick:function(){return q("ios")}})})}function e_(){return(0,d.jsx)(eu.Tooltip,{placement:"top",delay:"none",maxWidth:160,tooltip:(0,d.jsxs)(ec.View,{gap:8,align:"center",p:4,children:[(0,d.jsx)(el.Text,{variant:"small",color:"dimmer",children:"Scan to download"}),(0,d.jsx)(ef,{value:em,image:{lightMode:"/public/images/expo/expo-go-light.svg",darkMode:"/public/images/expo/expo-go-dark.svg"},width:140,height:140})]}),children:(0,d.jsx)(ea.ButtonLink,{variant:"outlined",iconLeft:(0,d.jsx)(Z.default,{}),text:"Android",href:em,target:"_blank",noNextLink:!0,onClick:function(){return q("android")}})})}var ek=e.i(739521),eS=e.i(981177),eC=(0,f.forwardRef)(function(e,t){var n=e.expoUrl,r=e.loading,i=e.inline,a=e.onClick,o=e.suppressLink;return(0,d.jsx)(ea.ButtonLink,{ref:t,size:"xsmall",variant:"default",colorway:r?void 0:"primary",disabled:r,href:n,target:"_blank",iconLeft:(0,d.jsx)(P.default,{}),text:"Open in Expo Go",onClick:function(e){!r&&(o?e.preventDefault():H({actionType:"open_expo_go"}),a&&requestAnimationFrame(function(){a()}))},noNextLink:!0,clsx:[i?eS.default.inlineButton:void 0]})});function ej(e){var t=e.expoUrl,n=e.onClick,r=e.highlight,i=e.loading,a=e.isMobile,o=(0,f.useRef)(null),s=(0,B.useInView)(o),l=(0,V.useMemoedDismissibleElement)("expo-go-mobile-preview-nudge"),u=l.isLoading,c=l.isDone,p=l.setAsDone,h=a&&!i&&s&&!u&&!c,m=(0,M.useSetAtom)(F),g=(0,M.useAtomValue)(F);return((0,f.useEffect)(function(){return function(){m(!1)}},[m]),(0,f.useEffect)(function(){h?u||c||m(!0):m(!1)},[c,u,h,m]),a)?(0,d.jsxs)(ec.View,{innerRef:o,children:[(0,d.jsx)(eC,{expoUrl:t,loading:i,onClick:n}),(0,d.jsx)(ek.Modal,{isOpen:g,centered:!0,fitContent:!0,maxWidth:420,hideCloseButton:!0,onRequestClose:function(){p(),m(!1)},children:(0,d.jsxs)(ec.View,{children:[(0,d.jsx)(eg,{expoUrl:t}),(0,d.jsx)(ec.View,{p:8,children:(0,d.jsx)(ei.Button,{text:"Got it",onClick:function(){p(),m(!1)}})})]})})]}):(0,d.jsx)(eo.IconButton,{alt:"Preview on mobile device",onClick:n,disabled:i,clsx:r?eS.default.expoButtonHighlight:void 0,children:(0,d.jsx)(L.default,{})})}e.i(32109);var eT=e.i(926118),eE=e.i(384401),eR=e.i(76430),eI=e.i(967629),eA=e.i(480028),eP=e.i(446530),eD=e.i(613355),eO=e.i(607278),eN=e.i(693686),eM=(0,eI.css)([eD.rcss.borderRadius(6),eD.rcss.color.foregroundDimmer,eD.rcss.height(24),{borderColor:eA.tokens.outlineDimmer}]),eL=(0,eP.cssRecord)({root:[eD.rcss.container("root"),eD.rcss.zIndex(1),eD.rcss.height(40)],devControls:[eD.rcss.gap(4)],navControls:[eD.rcss.flex.growAndShrink(1)],navButton:[eD.rcss.p(6),eD.rcss.borderRadius(4),eD.rcss.flex.shrink(0),{border:"none"}],urlWrapper:[eD.rcss.position.relative,eD.rcss.flex.row,eD.rcss.flex.growAndShrink(1)],urlPath2:[eD.rcss.py(0),eD.rcss.fontSize(12),eD.rcss.flex.grow(1),eD.rcss.borderRadius(8)],goButton:[eD.rcss.position.absolute,eD.rcss.right(4),eD.rcss.top("50%"),{transform:"translateY(-50%)"}],buttons:[(0,r._)({},eD.container.max(300,"root"),{"svg + span":{display:"none"},svg:{marginRight:0}})],fakeUrl:[eD.rcss.fontSize(12),eD.rcss.border(),{boxSizing:"content-box"},eD.rcss.borderRadius(6),eD.rcss.px(8),eD.rcss.py(2),eD.rcss.flex.grow(1),eD.rcss.rowWithGap(4),eD.rcss.align.center]});function eB(e){var t=e.webviewPageState,n=e.navigationState,r=e.expoUrl,i=e.openPane,a="active"!==t.state;return(0,d.jsxs)(ec.View,{css:eL.root,clsx:eN.default.root,row:!0,align:"center",justify:"space-between",p:4,gap:4,children:[a?(0,d.jsx)(eF,{}):(0,d.jsx)(eV,{navigationState:n}),(0,d.jsx)(ec.View,{row:!0,children:(0,d.jsx)(ec.View,{css:eL.buttons,row:!0,align:"center",children:(0,d.jsx)(ec.View,{css:eL.devControls,row:!0,children:r?(0,d.jsx)(ej,{expoUrl:r,loading:a,isMobile:!0,onClick:function(){i({type:"agentChat"})}}):(0,d.jsx)(ea.ButtonLink,{size:"small",variant:"outlined",css:eM,href:n.getExternalUrl(),target:"_blank",iconLeft:(0,d.jsx)(P.default,{}),text:"Open in browser",onClick:function(){z()},noNextLink:!0})})})})]})}function eV(e){var t=e.navigationState,n=t.canNavigateBack,r=t.navigateBack,i=t.canNavigateForward,a=t.navigateForward,o=t.canNavigateToInputRelativeUrl,s=t.navigateToInputRelativeUrl,l=t.inputRelativeUrl,u=t.setInputRelativeUrl,c=t.refresh,f=(0,N.useIsMac)(),p=(0,eE.useKeyCombo)("webviewpane.reload");return(0,d.jsxs)(ec.View,{css:eL.navControls,row:!0,gap:4,children:[(0,d.jsx)(eo.IconButton,{alt:"Back",onClick:r,disabled:!n,css:eL.navButton,children:(0,d.jsx)(I.default,{})}),(0,d.jsx)(eo.IconButton,{alt:"Forward",onClick:a,disabled:!i,css:eL.navButton,children:(0,d.jsx)(A.default,{})}),(0,d.jsx)(eo.IconButton,{alt:"Refresh".concat(p?" (".concat((0,eT.keyComboText)(p,f),")"):""),onClick:c,css:eL.navButton,children:t.isRefreshing?(0,d.jsx)(D.default,{}):(0,d.jsx)(O.default,{})}),(0,d.jsxs)(ec.View,{css:eL.urlWrapper,row:!0,children:[(0,d.jsx)(eO.Input,{css:eL.urlPath2,value:l,onKeyDown:function(e){"Enter"===e.key&&o&&s()},onChange:function(e){""===e.currentTarget.value?u("/"):u(e.target.value)}}),(0,d.jsx)(er.ShadesSurface,{elevate:"2x",css:eL.goButton,children:(0,d.jsx)(eo.IconButton,{alt:"Go to URL",disabled:!o,onClick:s,size:18,tooltipContents:(0,d.jsx)(eT.KeyComboBlocks,{keyCombo:"Enter"}),children:(0,d.jsx)(A.default,{})})})]})]})}function eF(){var e=(0,eR.useIsExpoStack)();return(0,d.jsx)(ec.View,{css:eL.navControls,align:"center",row:!0,gap:4,children:(0,d.jsxs)(er.ShadesSurface,{elevate:"2x",css:eL.fakeUrl,children:[(0,d.jsx)(eu.Tooltip,{tooltip:(e?"App":"Page")+" is loading, please wait.",delay:"none",placement:"auto",children:(0,d.jsx)(D.default,{})}),(0,d.jsx)(el.Text,{variant:"small",color:"dimmer",children:e?"Loading your app":"Loading your page"})]})})}var eU=e.i(416298),eG=(0,eP.cssRecord)({modalContent:[eD.rcss.flex.column,eD.rcss.gap(16)],modalTitle:[eD.rcss.fontWeight.bold],modalSection:[eD.rcss.flex.column,eD.rcss.gap(8)],modalSectionTitle:[eD.rcss.fontWeight.medium,{fontSize:eA.tokens.fontSizeSubheadDefault}],modalText:[{fontSize:eA.tokens.fontSizeDefault,lineHeight:1.5}],bulletList:[eD.rcss.flex.column,eD.rcss.gap(8),{paddingLeft:eA.tokens.space16}],bulletItem:[{position:"relative",paddingLeft:eA.tokens.space8,"&::before":{content:'""',position:"absolute",left:"-12px",color:eA.tokens.yellowStrongest}}]});function e$(e){var t=e.isOpen,n=e.onRequestClose;return(0,d.jsx)(ek.Modal,{isOpen:t,onRequestClose:n,centered:!0,maxWidth:500,children:(0,d.jsxs)(ec.View,{css:eG.modalContent,p:16,children:[(0,d.jsx)(el.Text,{variant:"headerDefault",css:eG.modalTitle,children:"Cookie Restrictions in Preview"}),(0,d.jsxs)(ec.View,{css:eG.modalSection,children:[(0,d.jsx)(el.Text,{css:eG.modalSectionTitle,children:"Why are cookies restricted?"}),(0,d.jsx)(el.Text,{css:eG.modalText,multiline:!0,children:"Browser security policies limit cookie access in iframes like Preview to protect user privacy and prevent cross-site tracking."})]}),(0,d.jsxs)(ec.View,{css:eG.modalSection,children:[(0,d.jsx)(el.Text,{css:eG.modalSectionTitle,children:"How does this affect my app?"}),(0,d.jsx)(el.Text,{css:eG.modalText,multiline:!0,children:"In Preview, your app may not be able to set or read cookies, affecting authentication, sessions, and user preferences. Your app works normally in a regular browser tab."})]}),(0,d.jsxs)(ec.View,{css:eG.modalSection,children:[(0,d.jsx)(el.Text,{css:eG.modalSectionTitle,children:"What can I do?"}),(0,d.jsxs)(ec.View,{css:eG.bulletList,children:[(0,d.jsx)(ec.View,{css:eG.bulletItem,children:(0,d.jsx)(el.Text,{css:eG.modalText,children:'Use "New tab" to test cookie functionality in a regular browser environment.'})}),(0,d.jsx)(ec.View,{css:eG.bulletItem,children:(0,d.jsx)(el.Text,{css:eG.modalText,children:"Try Chrome browser."})}),(0,d.jsx)(ec.View,{css:eG.bulletItem,children:(0,d.jsxs)(el.Text,{css:eG.modalText,children:["Try"," ",(0,d.jsx)("a",{href:"https://replit.com/desktop",target:"_blank",rel:"noopener noreferrer",style:{color:eA.tokens.accentPrimaryStronger,textDecoration:"none"},children:"Replit Desktop App"}),"."]})}),(0,d.jsx)(ec.View,{css:eG.bulletItem,children:(0,d.jsx)(el.Text,{css:eG.modalText,children:"Adjust your browser settings to allow cross-site tracking cookies (could be risky)."})})]})]})]})})}var eH=(0,eP.cssRecord)({root:[eD.rcss.border({width:0}),{color:eA.tokens.orangeStrongest,backgroundColor:eA.tokens.orangeDimmest,containerType:"inline-size"}],content:[eD.rcss.width("100%")],closeButton:[{color:eA.tokens.orangeStrongest},eD.rcss.hover({backgroundColor:eA.tokens.orangeDimmer})],tooltipText:[eD.rcss.flex.shrink(1)],newTabButton:[{color:eA.tokens.orangeStrongest,backgroundColor:eA.tokens.orangeDimmest,borderColor:eA.tokens.orangeStrongest,borderWidth:1,marginLeft:"8px"},eD.rcss.borderRadius(6),eD.rcss.height(24),eD.rcss.hover({backgroundColor:eA.tokens.orangeDimmer})],learnMoreButton:[{color:eA.tokens.orangeStrongest,backgroundColor:"transparent",marginLeft:"8px",padding:0,border:"none",textDecoration:"underline"},eD.rcss.hover({fontWeight:"bolder",backgroundColor:"transparent"})]});function ez(e){var t=e.navigationState,n=e.onDismiss,r=(0,s._)((0,f.useState)(!1),2),i=r[0],a=r[1],o=function(){a(!0)};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ec.View,{css:eH.root,grow:0,shrink:0,p:4,pl:8,gap:4,align:"start",children:(0,d.jsxs)(ec.View,{css:eH.content,row:!0,gap:6,align:"center",justify:"space-between",children:[(0,d.jsx)(eU.default,{}),(0,d.jsxs)(ec.View,{row:!0,gap:4,align:"center",grow:!0,shrink:!0,children:[(0,d.jsx)(el.Text,{css:eH.tooltipText,variant:"small",children:"Open a new tab to test authentication and file uploads."}),(0,d.jsx)(ea.ButtonLink,{size:"small",variant:"outlined",css:eH.newTabButton,href:t.getExternalUrl(),target:"_blank",iconLeft:(0,d.jsx)(P.default,{}),text:"New tab",onClick:function(){z()},noNextLink:!0}),(0,d.jsx)(ea.ButtonLink,{size:"small",variant:"outlined",css:eH.learnMoreButton,href:"#",onClick:function(e){e.preventDefault(),o()},text:"Learn more"})]}),(0,d.jsx)(eo.IconButton,{onClick:n,alt:"Dismiss",css:eH.closeButton,children:(0,d.jsx)(Y.default,{})})]})}),(0,d.jsx)(e$,{isOpen:i,onRequestClose:function(){return a(!1)}})]})}var eW=e.i(924908);e.i(925218);var eq=e.i(267103),eK=e.i(993796),eY=e.i(142365);e.i(653863);var eQ=e.i(973519),eX=e.i(97207),eZ=e.i(330069),eJ=e.i(396776);function e0(e){var t=e.onDismiss,n=(0,eQ.useGlobalModal)().show,r=(0,eW.useChatter)(),i=(0,eq.useObservable)(r.sessions.agent.current),a=(0,eX.useSendConvertMockupToAppResponse)(null!=i?i:null),o=(0,eZ.useShouldSeeFreemiumExperience)().shouldSeeFreemiumExperience,s=(0,eK.useFlag)({controlName:"flag-free-plan",default:!1})&&o;return(0,eY.useTrackEffect)($.events.DESIGN_MODE_CONVERSION_BANNER_SHOWN),(0,d.jsx)(eJ.StatusBanner,{variant:"flush",closable:!0,closeAction:function(){(0,G.track)($.events.DESIGN_MODE_CONVERSION_BANNER_CLICKED,{action:"dismiss"}),t()},text:(0,d.jsxs)(d.Fragment,{children:["This app is in Design Mode which is best for rapid designs & websites."," ",(0,d.jsx)(ei.Button,{variant:"underlined",size:"small",onClick:function(){(0,G.track)($.events.DESIGN_MODE_CONVERSION_BANNER_CLICKED,{action:"convert"}),n("MockupToAppModal",{onSendConvertMockupToAppResponse:a,origin:"header",shouldShowUpsell:s})},text:"Click to convert to a fully functional application.",style:{display:"inline-flex",height:"auto",verticalAlign:"baseline"}})]})})}var e1=e.i(761201),e2=e.i(11235),e3=(0,eP.cssRecord)({modalText:[eD.rcss.pl(8),eD.rcss.display.block],subHeadingText:[eD.rcss.display.block,eD.rcss.mb(8)],bulletList:[eD.rcss.flex.column,eD.rcss.gap(8),eD.rcss.pl(24)],statusItem:[eD.rcss.flex.row,eD.rcss.gap(8),eD.rcss.p(8),eD.rcss.borderRadius(8),eD.rcss.align.center,eD.rcss.backgroundColor.backgroundRoot],statusCircle:[{width:"10px",height:"10px",borderRadius:"50%",flexShrink:0,'&[data-reachable="true"]':{backgroundColor:eA.tokens.accentPrimaryDefault},'&[data-reachable="false"]':{backgroundColor:eA.tokens.accentNegativeDefault}}]});function e5(e){var t=e.isOpen,n=e.onRequestClose,r=e.reachability;return(0,d.jsx)(ek.Modal,{isOpen:t,onRequestClose:n,centered:!0,maxWidth:500,children:(0,d.jsxs)(ec.View,{gap:16,children:[(0,d.jsx)(el.Text,{variant:"headerDefault",children:"App Reachability Status"}),(0,d.jsxs)("ul",{css:e3.bulletList,children:[(0,d.jsxs)("li",{css:e3.statusItem,children:[(0,d.jsx)(ec.View,{css:e3.statusCircle,"data-reachable":r.dotdev}),(0,d.jsxs)(el.Text,{css:e3.modalText,children:["replit.dev domain:"," ",r.dotdev?"Reachable":"Unreachable"]})]}),(0,d.jsxs)("li",{css:e3.statusItem,children:[(0,d.jsx)(ec.View,{css:e3.statusCircle,"data-reachable":r.replCo}),(0,d.jsxs)(el.Text,{css:e3.modalText,children:["repl.co domain:"," ",r.replCo?"Reachable":"Unreachable"]})]})]}),(0,d.jsxs)(e2.Prose,{children:[(0,d.jsx)(el.Text,{css:e3.subHeadingText,variant:"subheadDefault",children:"Why might my app be unreachable?"}),(0,d.jsx)(el.Text,{css:e3.modalText,multiline:!0,children:"Your browser may be unable to access your app's development domains (replit.dev and repl.co). This can happen due to:"}),(0,d.jsxs)("ul",{css:e3.bulletList,children:[(0,d.jsx)("li",{children:(0,d.jsx)(el.Text,{css:e3.modalText,children:"Internet service provider blocking requests"})}),(0,d.jsx)("li",{children:(0,d.jsx)(el.Text,{css:e3.modalText,children:"Router firewall rules"})}),(0,d.jsx)("li",{children:(0,d.jsx)(el.Text,{css:e3.modalText,children:"Browser or extension blocking requests"})})]})]}),(0,d.jsxs)(e2.Prose,{children:[(0,d.jsx)(el.Text,{css:e3.subHeadingText,variant:"subheadDefault",children:"What can I do?"}),(0,d.jsxs)("ul",{css:e3.bulletList,children:[(0,d.jsx)("li",{children:(0,d.jsx)(el.Text,{css:e3.modalText,children:"Connect to a different network if possible (e.g. mobile data)"})}),(0,d.jsx)("li",{children:(0,d.jsx)(el.Text,{css:e3.modalText,children:"Check with your network administrator if you're on a restricted network (e.g. corporate or school WIFI)"})}),(0,d.jsx)("li",{children:(0,d.jsxs)(el.Text,{css:e3.modalText,children:["See our"," ",(0,d.jsx)("a",{href:e1.LINKS_DOCS.TROUBLESHOOTING_REACHABILITY,target:"_blank",rel:"noopener noreferrer",style:{color:eA.tokens.accentPrimaryStronger,textDecoration:"none"},children:"FAQ"})," ","for more troubleshooting steps"]})})]})]})]})})}var e4=(0,eP.cssRecord)({root:[eD.rcss.border({width:0}),{color:eA.tokens.orangeStrongest,backgroundColor:eA.tokens.orangeDimmest,containerType:"inline-size"}],content:[eD.rcss.width("100%")],closeButton:[{color:eA.tokens.orangeStrongest},eD.rcss.hover({backgroundColor:eA.tokens.orangeDimmer})],tooltipText:[eD.rcss.flex.shrink(1)],learnMoreButton:[{color:eA.tokens.orangeStrongest,backgroundColor:"transparent",marginLeft:"8px",padding:0,border:"none",textDecoration:"underline"},eD.rcss.hover({fontWeight:"bolder",backgroundColor:"transparent"})]});function e8(e){var t=e.onDismiss,n=e.reachability,r=(0,s._)((0,f.useState)(!1),2),i=r[0],a=r[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ec.View,{css:e4.root,grow:0,shrink:0,p:4,pl:8,align:"start",children:(0,d.jsxs)(ec.View,{css:e4.content,row:!0,gap:6,align:"center",justify:"space-between",children:[(0,d.jsx)(eU.default,{}),(0,d.jsxs)(ec.View,{row:!0,gap:4,align:"center",grow:!0,shrink:!0,children:[(0,d.jsx)(el.Text,{css:e4.tooltipText,variant:"small",children:n.dotdev&&n.replCo?"There may be connectivity issues with your app.":"Your app might not be reachable from this network."}),(0,d.jsx)(ei.Button,{size:"small",variant:"outlined",css:e4.learnMoreButton,onClick:function(){return a(!0)},text:"Learn more"})]}),(0,d.jsx)(eo.IconButton,{onClick:t,alt:"Dismiss",css:e4.closeButton,children:(0,d.jsx)(Y.default,{})})]})}),(0,d.jsx)(e5,{isOpen:i,onRequestClose:function(){return a(!1)},reachability:n})]})}var e6=e.i(187505);function e7(e){var t=e.navigationState,n=e.onDismiss,r=(0,e6.useTrackClick)().trackClick;return(0,d.jsx)(eJ.StatusBanner,{text:"Stripe Checkout needs to open in a new tab to complete payment.",variant:"flush",colorway:"warning",icon:(0,d.jsx)(eU.default,{color:eA.tokens.yellowStronger}),action:(0,d.jsx)(ea.ButtonLink,{size:"xsmall",variant:"nofill",href:t.getExternalUrl(),target:"_blank",iconLeft:(0,d.jsx)(P.default,{}),text:"Open in new tab",onClick:function(){z(),r({productArea:"integrations",target:"stripe_checkout_open_new_tab"})},noNextLink:!0}),closeAction:n,closable:!0})}var e9=e.i(183035),te=e.i(882848),tt=e.i(393428),tn=e.i(255701),tr=e.i(357253),ti=e.i(813707),ta=e.i(116235);function to(e){return(0,d.jsxs)(ta.default,(0,o._)((0,a._)({},e),{children:[(0,d.jsx)("path",{fillRule:"evenodd",d:"M20 11.25A2.75 2.75 0 0 1 22.75 14v6A2.75 2.75 0 0 1 20 22.75h-2A2.75 2.75 0 0 1 15.25 20v-6A2.75 2.75 0 0 1 18 11.25h2Zm-2 1.5c-.69 0-1.25.56-1.25 1.25v6c0 .69.56 1.25 1.25 1.25h2c.69 0 1.25-.56 1.25-1.25v-6c0-.69-.56-1.25-1.25-1.25h-2Z",clipRule:"evenodd"}),(0,d.jsx)("path",{d:"M16 3.25A2.75 2.75 0 0 1 18.75 6v2a.75.75 0 0 1-1.5 0V6a1.25 1.25 0 0 0-1.126-1.244L16 4.75H4A1.25 1.25 0 0 0 2.75 6v7A1.25 1.25 0 0 0 4 14.25h8a.75.75 0 0 1 0 1.5h-1.25v2.5H12a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1 0-1.5h2.25v-2.5H4A2.75 2.75 0 0 1 1.25 13V6A2.75 2.75 0 0 1 4 3.25h12Z"})]}))}var ts=e.i(990313),tl=e.i(650587),tu=e.i(546284),tc=e.i(193292),td=e.i(886977),tf=e.i(531875),tp=e.i(960933),th=tp.Type.Object({title:tp.Type.String(),screen:tp.Type.Object({height:tp.Type.Number(),width:tp.Type.Number()})}),tm="iPhone 17",tg=[{title:"iPhone SE",screen:{height:667,width:375}},{title:"iPhone Air",screen:{height:912,width:420}},{title:tm,screen:{height:874,width:402}},{title:"iPhone 17 Pro",screen:{height:874,width:402}},{title:"iPhone 17 Pro Max",screen:{height:956,width:440}},{title:"Pixel 10",screen:{height:924,width:412}},{title:"Pixel 10 Pro",screen:{height:924,width:412}},{title:"Pixel 10 Pro XL",screen:{height:996,width:448}},{title:"Samsung Galaxy S25",screen:{height:882,width:406}},{title:"Samsung Galaxy S25+",screen:{height:954,width:439}},{title:"Samsung Galaxy S25 Ultra",screen:{height:980,width:451}}],tv=tg.find(function(e){return e.title===tm});e.s(["DEFAULT_MOBILE_SCREEN_SIZE",()=>tv,"SCREEN_SIZES",()=>tg,"ScreenSizeSchema",()=>th],157648);var tx=e.i(754873),ty=e.i(428596),tb=e.i(848969),tw=e.i(119274),t_=e.i(604963),tk=e.i(734882),tS=e.i(625376),tC=[eD.rcss.reset.button,tx.interactive.nofill,eD.rcss.color.foregroundDimmest,eD.rcss.fontSize("small"),{border:"0 none !important","&:hover":[eD.rcss.color.foregroundDefault,{backgroundColor:"transparent !important"}],"&:active":[eD.rcss.color.foregroundDimmer,{backgroundColor:"transparent !important"}]},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},eD.rcss.align.center,eD.rcss.pr(0),eD.rcss.pl(4)],tj=(0,eP.cssRecord)({themeButton:[eD.rcss.height(24),eD.rcss.p(4)],root:[eD.rcss.container("root"),eD.rcss.zIndex(1),{height:36}],devControls:[{"@media (hover: hover)":{"button:not(:hover)":{color:eA.tokens.foregroundDimmest},"a:not(:hover)":{color:eA.tokens.foregroundDimmest}}}],urlWrapper:[eD.rcss.position.relative,eD.rcss.height(24)],urlOptionsRoot:[eD.rcss.overflow("hidden"),eD.rcss.borderRadius(4),{":hover":{boxShadow:"0 0 0 1px "+eA.tokens.outlineDimmer},":focus-within":{outline:"2px solid ".concat(eA.tokens.accentPrimaryDefault)}}],urlOptions:[eD.rcss.borderRadius(4)],urlOptionsSection:[eD.rcss.border({direction:"bottom"}),{":last-child":{paddingBottom:0,borderBottom:0}}],portRadioGroup:[eD.rcss.colWithGap(8)],portOption:[eD.rcss.rowWithGap(8),eD.rcss.color.foregroundDimmer],portOptionSelected:[eD.rcss.rowWithGap(8),eD.rcss.color.foregroundDefault],portOptionLabel:[{"&:hover":[eD.rcss.cursor.pointer,eD.rcss.color.foregroundDefault]}],url:tC,urlPath2:[eD.rcss.p(0),eD.rcss.fontSize(12),eD.rcss.flex.grow(1),{backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0,border:"0 none !important",outline:"none !important"}],fakeUrl:[eD.rcss.borderRadius(4),eD.rcss.height(24)],screenSizeMenuWrapper:[eD.rcss.p(4)]}),tT="Dev URLs are only active when someone is in the workspace. The dev URL is also subject to change. For production hosting, use Deployments.";function tE(e){var t=e.isInDesktopApp;return(0,d.jsxs)(ec.View,{grow:!0,shrink:!0,children:[(0,d.jsx)(el.Text,{children:t?"Open in web browser":"Open in a new tab"}),(0,d.jsx)(el.Text,{variant:"small",color:"dimmer",children:tT})]})}function tR(e){var t=e.navigationState,n=e.loading,r=e.isInDesktopApp;return(0,d.jsx)(tb.IconButtonLink,{disabled:n,tooltipContents:(0,d.jsx)(tE,{isInDesktopApp:r}),href:t.getExternalUrl(),target:"_blank",alt:r?"Open in web browser":"New tab",onClick:function(){z()},children:(0,d.jsx)(P.default,{})})}function tI(e){var t=e.url,n=e.webviewPageState,r=e.navigationState,i=e.forwardedPorts,a=e.onToggleWebviewLogs,o=e.onOpenPortSettings,l=e.screenSize,u=e.setScreenSize,c=e.replShield,p=e.openPane,h=e.expoUrl,m=e.onToggleExpoSidebar,g=e.showExpoSidebarHighlight,y=(0,x.default)(),b=(0,s._)((0,f.useState)(!1),2),w=b[0],_=b[1],k=(0,tc.useThemeOverlay)(),S=k.toggleThemeOverlay,C=k.isThemeOverlayVisible,j="active"!==n.state&&"external-page"!==n.state,T=(0,tl.useIsMobile)(),E=(0,tc.useThemeOverlayAvailability)(),R=(0,ts.useAppThemeTracking)().trackAppTheme;return(0,d.jsxs)(ec.View,{px:4,py:6,gap:4,css:tj.root,clsx:tS.default.root,row:!0,align:"center",justify:"space-between",children:["external-page"===n.state?(0,d.jsx)(tO,{backToLocal:function(){return r.refresh()}}):(0,d.jsx)(tD,{loading:j,url:t,navigationState:r,forwardedPorts:i,onOpenPortSettings:o,replShield:c,expoUrl:h}),(0,d.jsxs)(ec.View,{row:!0,align:"center",gap:2,css:tj.devControls,children:["external-page"!==n.state?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eo.IconButton,{onClick:a,alt:"Webview logs",disabled:j,children:(0,d.jsx)(ti.default,{})}),T?null:(0,d.jsxs)(t_.PopoverTrigger,{isOpen:w,onOpenChange:function(e){_(e)},label:"Screen size",background:"higher",children:[(0,d.jsx)(eo.IconButton,{alt:"Screen size",disabled:j,children:(0,d.jsx)(to,{})}),(0,d.jsx)(tM,{screenSize:l,setScreenSize:u})]}),E?(0,d.jsx)(eu.Tooltip,{tooltip:"Themes are currently unavailable",isDisabled:!j,placement:"auto",children:(0,d.jsx)(ei.Button,{disabled:j,onClick:function(){R($.events.APP_THEME,{action:"overlay_toggled"}),C||p({type:"agentChat"}),S()},text:"Theme",iconLeft:(0,d.jsx)(tt.default,{size:16}),variant:"nofill",css:tj.themeButton})}):null]}):null,h?(0,d.jsx)(ej,{expoUrl:h,onClick:function(){T?p({type:"agentChat"}):null==m||m()},highlight:g,loading:j,isMobile:T}):(0,d.jsx)(tR,{navigationState:r,loading:j,isInDesktopApp:y})]})]})}var tA=ec.SpecializedView.button;function tP(e){var t=e.url,n=e.navigationState,r=e.forwardedPorts,i=e.onOpenPortSettings,a=e.replShield,o=e.expoUrl,l=n.canNavigateToInputRelativeUrl,u=n.navigateToInputRelativeUrl,c=n.inputRelativeUrl,p=n.setInputRelativeUrl,h=n.selectedPort,m=n.setPort,g=(0,s._)((0,f.useState)(!1),2),x=g[0],y=g[1],b=(0,ty.useIdSeed)(),w=b("radioGroup");return(0,d.jsxs)(er.ShadesSurface,{elevate:"2x",css:tj.urlOptionsRoot,grow:!0,shrink:!0,row:!0,children:[(0,d.jsxs)(t_.PopoverTrigger,{isOpen:x,onOpenChange:function(e){y(e),e&&H({actionType:"url_options_opened"})},label:"Show URL Options",background:"higher",children:[(0,d.jsxs)(tA,{row:!0,gap:2,css:tj.url,children:[(0,d.jsx)(eu.Tooltip,{tooltip:tT,children:a?(0,d.jsx)(tr.default,{size:12}):(0,d.jsx)(te.default,{size:12})}),".".concat(t.includes("replit.dev")?"replit.dev":"repl.co").concat((0,C.isDefaultPort)(h)?"":":"+h)]}),(0,d.jsxs)(er.ShadesSurface,{css:tj.urlOptions,p:8,gap:6,children:[(0,d.jsx)(ec.View,{css:tj.urlOptionsSection,pb:8,gap:4,children:(0,d.jsx)(td.default,{})}),(0,d.jsxs)(ec.View,{css:tj.urlOptionsSection,pb:8,gap:4,children:[(0,d.jsxs)(ec.View,{grow:!0,row:!0,gap:0,justify:"space-between",children:[(0,d.jsxs)(el.Text,{children:["Listening on ",(0,tu.default)("port",r.length),":"]}),i?(0,d.jsx)(eo.IconButton,{alt:"Networking tool",onClick:i,children:(0,d.jsx)(tn.default,{})}):null]}),(0,d.jsx)(tk.RadioGroup,{tag:"fieldset",css:tj.portRadioGroup,name:w,value:h.toString(),onChange:function(e){m(parseInt(e.target.value,10)),y(!1)},children:r.map(function(e,t){return(0,d.jsxs)(ec.View,{css:h===e.externalPort?tj.portOptionSelected:tj.portOption,children:[(0,d.jsx)(tk.Radio,{id:b(e.externalPort),value:e.externalPort.toString()}),(0,d.jsx)("label",{htmlFor:b(e.externalPort),css:tj.portOptionLabel,children:":".concat(e.port,"  :").concat(e.externalPort)})]},"".concat(t,"-").concat(e.externalPort,":").concat(e.port))})})]}),(0,d.jsx)(tf.default,{url:t,expoUrl:o,onCopy:W})]})]}),(0,d.jsx)(eO.Input,{css:tj.urlPath2,value:c,onKeyDown:function(e){"Enter"===e.key&&l&&u()},onChange:function(e){""===e.currentTarget.value?p("/"):p(e.target.value)}})]})}function tD(e){var t=e.url,n=e.navigationState,r=e.forwardedPorts,i=e.onOpenPortSettings,a=e.replShield,o=e.loading,s=e.expoUrl,l=n.canNavigateBack,u=n.navigateBack,c=n.canNavigateForward,f=n.navigateForward,p=n.refresh,h=(0,N.useIsMac)(),m=(0,eE.useKeyCombo)("webviewpane.reload");return(0,d.jsxs)(ec.View,{row:!0,gap:4,align:"center",grow:!0,shrink:!0,children:[(0,d.jsx)(eo.IconButton,{alt:"Back",onClick:u,disabled:!l,children:(0,d.jsx)(I.default,{})}),(0,d.jsx)(eo.IconButton,{alt:"Forward",onClick:f,disabled:!c,children:(0,d.jsx)(A.default,{})}),(0,d.jsx)(eo.IconButton,{alt:"Refresh".concat(m?" (".concat((0,eT.keyComboText)(m,h),")"):""),onClick:p,disabled:o,children:n.isRefreshing?(0,d.jsx)(D.default,{}):(0,d.jsx)(O.default,{})}),(0,d.jsx)(ec.View,{css:tj.urlWrapper,grow:!0,shrink:!0,children:o?(0,d.jsx)(tN,{}):(0,d.jsx)(tP,{url:t,navigationState:n,forwardedPorts:r,onOpenPortSettings:i,replShield:a,expoUrl:s})})]})}function tO(e){var t=e.backToLocal,n=(0,s._)((0,f.useState)(!1),2),r=n[0],i=n[1];return(0,d.jsxs)(ec.View,{row:!0,gap:4,align:"center",grow:!0,shrink:!0,children:[(0,d.jsx)(ei.Button,{size:"small",variant:"nofill",onClick:function(){t(),i(!0)},loading:r,text:"Back to my page",iconLeft:r?(0,d.jsx)(D.default,{}):(0,d.jsx)(I.default,{})}),(0,d.jsxs)(er.ShadesSurface,{row:!0,grow:!0,shrink:!0,elevate:"2x",gap:4,align:"center",css:tj.fakeUrl,children:[(0,d.jsx)(eu.Tooltip,{tooltip:"The URL bar is not supported when navigating to external pages. You can open in a new tab to use your browser instead.",delay:"none",placement:"auto",children:(0,d.jsx)(eU.default,{size:12})}),(0,d.jsx)(el.Text,{variant:"small",color:"dimmer",children:"External page"})]})]})}function tN(){var e=(0,eR.useIsExpoStack)();return(0,d.jsxs)(er.ShadesSurface,{row:!0,grow:!0,shrink:!0,gap:4,align:"center",elevate:"2x",css:tj.fakeUrl,px:4,children:[(0,d.jsx)(eu.Tooltip,{tooltip:(e?"App":"Page")+" is loading, please wait.",delay:"none",placement:"auto",children:(0,d.jsx)(D.default,{size:12})}),(0,d.jsx)(el.Text,{variant:"small",color:"dimmer",children:e?"Loading your app":"Loading your page"})]})}function tM(e){var t=e.screenSize,n=e.setScreenSize;return(0,d.jsxs)(tw.Menu,{"aria-label":"Screen size menu",onAction:function(e){if("Full size"===e)null==n||n(void 0);else{var t=tg.find(function(t){return t.title===e});if(!t)return;null==n||n(t)}},css:tj.screenSizeMenuWrapper,children:[(0,d.jsx)(tL,{isSelected:void 0===t,title:"Full size"}),(0,d.jsx)(tw.Separator,{}),tg.map(function(e){return(0,d.jsx)(tL,{isSelected:(null==t?void 0:t.title)===e.title,title:e.title},e.title)})]})}function tL(e){var t=e.isSelected,n=e.title;return(0,d.jsxs)(tw.BaseMenuItem,{id:n,textValue:n,children:[(0,d.jsx)(el.Text,{children:n}),t?(0,d.jsx)(e9.default,{}):null]})}var tB=e.i(460513),tV=e.i(830675),tF=e.i(904851),tU=e.i(125674),tG=function e(t){var n=this,i=t.initialRelativeUrl,a=t.initialPort,o=t.onChange,s=t.navigateTo;(0,tF._)(this,e),(0,r._)(this,"history",[]),(0,r._)(this,"historyIndex",-1),(0,r._)(this,"onChange",void 0),(0,r._)(this,"navigateTo",void 0),(0,r._)(this,"isRefreshing",void 0),(0,r._)(this,"init",function(e,t){n.history.push({relativeUrl:e,port:t}),n.historyIndex=n.history.length-1,n.notifyChanges()}),(0,r._)(this,"notifyChanges",function(){n.onChange(n.canGoBack(),n.canGoForward(),n.getCurrentRelativeUrl(),n.getCurrentPort(),n.isRefreshing)}),(0,r._)(this,"canGoBack",function(){return n.historyIndex>0}),(0,r._)(this,"canGoForward",function(){return n.historyIndex<n.history.length-1}),(0,r._)(this,"getCurrentRelativeUrl",function(){return n.history[n.historyIndex].relativeUrl}),(0,r._)(this,"getCurrentPort",function(){return n.history[n.historyIndex].port}),(0,r._)(this,"push",function(e,t){(e!==n.getCurrentRelativeUrl()||t!==n.getCurrentPort())&&(n.history=n.history.slice(0,n.historyIndex+1),n.history.push({relativeUrl:e,port:t}),n.historyIndex=n.history.length-1),n.notifyChanges()}),(0,r._)(this,"relativeUrlUpdate",function(e){n.push(e,n.getCurrentPort())}),(0,r._)(this,"back",function(){H({actionType:"history_back"}),n.canGoBack()&&(n.historyIndex-=1,n.navigate(n.getCurrentRelativeUrl(),n.getCurrentPort()))}),(0,r._)(this,"forward",function(){H({actionType:"history_forward"}),n.canGoForward()&&(n.historyIndex+=1,n.navigate(n.getCurrentRelativeUrl(),n.getCurrentPort()))}),(0,r._)(this,"navigate",function(e,t){var r=null!=t?t:n.getCurrentPort();n.navigateTo.current(e,r),n.push(e,r)}),(0,r._)(this,"refresh",function(){var e,t;H({actionType:"refresh"}),n.isRefreshing=!0,n.notifyChanges(),n.navigateTo.current(null!=(e=n.getCurrentRelativeUrl())?e:"/",null!=(t=n.getCurrentPort())?t:80).finally(function(){n.isRefreshing=!1,n.notifyChanges()})}),(0,r._)(this,"setPort",function(e){var t=n.getCurrentRelativeUrl();n.navigate(t,e)}),this.onChange=o,this.isRefreshing=!1,this.navigateTo=s,this.init(i,a)};function t$(e){var t,n=e.iframeSrc,r=e.port,i=e.path,a=e.navigateThroughWorkspaceDevtools,o=e.mintReplShieldToken,s=(0,U._)(e,["iframeSrc","port","path","navigateThroughWorkspaceDevtools","mintReplShieldToken"]);if(a&&"id"in s){var l=(0,C.addPortToUrl)(n,r);l.searchParams.set("initialPath",i),l.searchParams.set("id",s.id),o&&l.searchParams.set("replShieldMintedToken",o),t=l.href}else{var u=new URL(i,n);r&&(u=(0,C.addPortToUrl)(u.toString(),r)),o&&u.searchParams.set("replShieldMintedToken",o),t=u.toString()}return t}var tH=e.i(477891);function tz(e){var t=e.openPane;return(0,d.jsxs)(ec.View,{align:"center",justify:"center",p:48,gap:24,grow:!0,children:[(0,d.jsxs)(ec.View,{align:"center",gap:12,children:[(0,d.jsx)(tH.default,{size:48}),(0,d.jsx)(el.Text,{variant:"headerDefault",children:"Preview"})]}),(0,d.jsx)(ec.View,{align:"center",gap:16,children:(0,d.jsxs)(ec.View,{align:"center",gap:8,children:[(0,d.jsx)(el.Text,{textAlign:"center",color:"dimmer",children:"Preview is not available in this type of app."}),(0,d.jsxs)(ec.View,{row:!0,gap:4,align:"center",justify:"center",style:{flexWrap:"wrap"},children:[(0,d.jsx)(el.Text,{textAlign:"center",color:"dimmer",children:"Use the"}),(0,d.jsx)(ei.Button,{variant:"underlined",text:"Playground",onClick:function(){return t({type:"automations"})}}),(0,d.jsx)(el.Text,{textAlign:"center",color:"dimmer",children:"to test your agents and automations."})]})]})})]})}e.s(["WebviewDisabledForAgentStack",()=>tz],813453);var tW=e.i(76961),tq=e.i(423111),tK=e.i(336563),tY=e.i(729122),tQ=e.i(596139),tX=e.i(443394),tZ=e.i(251204);function tJ(e){var t={type:e?"SHOW_MADE_WITH_REPLIT_BADGE":"HIDE_MADE_WITH_REPLIT_BADGE"},n=(0,tZ.getWebviewIframes)(),r=!0,i=!1,a=void 0;try{for(var o,s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)null==(o=s.value.contentWindow)||o.postMessage(t,"*")}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}}e.s(["updateReplitBadgeInAllWebviewIframes",()=>tJ],293242);var t0=e.i(394212),t1=Object.create,t2=Object.defineProperty,t3=Object.getOwnPropertyDescriptor,t5=Object.getOwnPropertyNames,t4=Object.getPrototypeOf,t8=Object.prototype.hasOwnProperty,t6=function(e,t){return function(){return t||(0,e[t5(e)[0]])((t={exports:{}}).exports,t),t.exports}},t7=t6({"node_modules/is-object/index.js":function(e,t){t.exports=function(e){return(void 0===e?"undefined":(0,u._)(e))==="object"&&null!==e}}}),t9=t6({"node_modules/is-window/index.js":function(e,t){t.exports=function(e){if(null==e)return!1;var t=Object(e);return t===t.window}}}),ne=t6({"node_modules/is-dom/index.js":function(e,t){var n=t7(),r=t9();t.exports=function(e){return!!n(e)&&!!r(window)&&"function"==typeof window.Node&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}}}),nt={},nn={chromeDark:function(){return ni},chromeLight:function(){return na}};for(var nr in nn)t2(nt,nr,{get:nn[nr],enumerable:!0});var ni={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"rgb(36, 36, 36)",BASE_COLOR:"rgb(213, 213, 213)",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(227, 110, 236)",OBJECT_VALUE_NULL_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_REGEXP_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_STRING_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_NUMBER_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_BOOLEAN_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(85, 106, 242)",HTML_TAG_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(155, 187, 220)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(242, 151, 102)",HTML_COMMENT_COLOR:"rgb(137, 137, 137)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"rgb(145, 145, 145)",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"rgb(85, 85, 85)",TABLE_TH_BACKGROUND_COLOR:"rgb(44, 44, 44)",TABLE_TH_HOVER_COLOR:"rgb(48, 48, 48)",TABLE_SORT_ICON_COLOR:"black",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0) 50%, rgba(51, 139, 255, 0.0980392) 50%, rgba(51, 139, 255, 0.0980392))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},na={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"white",BASE_COLOR:"black",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(136, 19, 145)",OBJECT_VALUE_NULL_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_REGEXP_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_STRING_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_NUMBER_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_BOOLEAN_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(13, 34, 170)",HTML_TAG_COLOR:"rgb(168, 148, 166)",HTML_TAGNAME_COLOR:"rgb(136, 18, 128)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(153, 69, 0)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(26, 26, 166)",HTML_COMMENT_COLOR:"rgb(35, 110, 37)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"#6e6e6e",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"#aaa",TABLE_TH_BACKGROUND_COLOR:"#eee",TABLE_TH_HOVER_COLOR:"hsla(0, 0%, 90%, 1)",TABLE_SORT_ICON_COLOR:"#6e6e6e",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(to bottom, white, white 50%, rgb(234, 243, 255) 50%, rgb(234, 243, 255))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},no=(0,f.createContext)([{},function(){}]),ns={WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",OUserSelect:"none",userSelect:"none"},nl=function(e){return{DOMNodePreview:{htmlOpenTag:{base:{color:e.HTML_TAG_COLOR},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM},htmlAttributeName:{color:e.HTML_ATTRIBUTE_NAME_COLOR},htmlAttributeValue:{color:e.HTML_ATTRIBUTE_VALUE_COLOR}},htmlCloseTag:{base:{color:e.HTML_TAG_COLOR},offsetLeft:{marginLeft:-e.TREENODE_PADDING_LEFT},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM}},htmlComment:{color:e.HTML_COMMENT_COLOR},htmlDoctype:{color:e.HTML_DOCTYPE_COLOR}},ObjectPreview:{objectDescription:{fontStyle:"italic"},preview:{fontStyle:"italic"},arrayMaxProperties:e.OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES,objectMaxProperties:e.OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES},ObjectName:{base:{color:e.OBJECT_NAME_COLOR},dimmed:{opacity:.6}},ObjectValue:{objectValueNull:{color:e.OBJECT_VALUE_NULL_COLOR},objectValueUndefined:{color:e.OBJECT_VALUE_UNDEFINED_COLOR},objectValueRegExp:{color:e.OBJECT_VALUE_REGEXP_COLOR},objectValueString:{color:e.OBJECT_VALUE_STRING_COLOR},objectValueSymbol:{color:e.OBJECT_VALUE_SYMBOL_COLOR},objectValueNumber:{color:e.OBJECT_VALUE_NUMBER_COLOR},objectValueBoolean:{color:e.OBJECT_VALUE_BOOLEAN_COLOR},objectValueFunctionPrefix:{color:e.OBJECT_VALUE_FUNCTION_PREFIX_COLOR,fontStyle:"italic"},objectValueFunctionName:{fontStyle:"italic"}},TreeView:{treeViewOutline:{padding:0,margin:0,listStyleType:"none"}},TreeNode:{treeNodeBase:{color:e.BASE_COLOR,backgroundColor:e.BASE_BACKGROUND_COLOR,lineHeight:e.TREENODE_LINE_HEIGHT,cursor:"default",boxSizing:"border-box",listStyle:"none",fontFamily:e.TREENODE_FONT_FAMILY,fontSize:e.TREENODE_FONT_SIZE},treeNodePreviewContainer:{},treeNodePlaceholder:(0,a._)({whiteSpace:"pre",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT},ns),treeNodeArrow:{base:(0,a._)({color:e.ARROW_COLOR,display:"inline-block",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT},parseFloat(e.ARROW_ANIMATION_DURATION)>0?{transition:"transform ".concat(e.ARROW_ANIMATION_DURATION," ease 0s")}:{},ns),expanded:{WebkitTransform:"rotateZ(90deg)",MozTransform:"rotateZ(90deg)",transform:"rotateZ(90deg)"},collapsed:{WebkitTransform:"rotateZ(0deg)",MozTransform:"rotateZ(0deg)",transform:"rotateZ(0deg)"}},treeNodeChildNodesContainer:{margin:0,paddingLeft:e.TREENODE_PADDING_LEFT}},TableInspector:{base:{color:e.BASE_COLOR,position:"relative",border:"1px solid ".concat(e.TABLE_BORDER_COLOR),fontFamily:e.BASE_FONT_FAMILY,fontSize:e.BASE_FONT_SIZE,lineHeight:"120%",boxSizing:"border-box",cursor:"default"}},TableInspectorHeaderContainer:{base:{top:0,height:"17px",left:0,right:0,overflowX:"hidden"},table:{tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",height:"100%",width:"100%",margin:0}},TableInspectorDataContainer:{tr:{display:"table-row"},td:{boxSizing:"border-box",border:"none",height:"16px",verticalAlign:"top",padding:"1px 4px",WebkitUserSelect:"text",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px"},div:{position:"static",top:"17px",bottom:0,overflowY:"overlay",transform:"translateZ(0)",left:0,right:0,overflowX:"hidden"},table:{positon:"static",left:0,top:0,right:0,bottom:0,borderTop:"0 none transparent",margin:0,backgroundImage:e.TABLE_DATA_BACKGROUND_IMAGE,backgroundSize:e.TABLE_DATA_BACKGROUND_SIZE,tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",width:"100%",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorTH:{base:{position:"relative",height:"auto",textAlign:"left",backgroundColor:e.TABLE_TH_BACKGROUND_COLOR,borderBottom:"1px solid ".concat(e.TABLE_BORDER_COLOR),fontWeight:"normal",verticalAlign:"middle",padding:"0 4px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px",":hover":{backgroundColor:e.TABLE_TH_HOVER_COLOR}},div:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorLeftBorder:{none:{borderLeft:"none"},solid:{borderLeft:"1px solid ".concat(e.TABLE_BORDER_COLOR)}},TableInspectorSortIcon:(0,a._)({display:"block",marginRight:3,width:8,height:7,marginTop:-7,color:e.TABLE_SORT_ICON_COLOR,fontSize:12},ns)}},nu="chromeLight",nc=(0,f.createContext)(nl(nt[nu])),nd=function(e){return(0,f.useContext)(nc)[e]},nf=function(e){return function(t){var n=t.theme,r=void 0===n?nu:n,i=(0,U._)(t,["theme"]),o=(0,f.useMemo)(function(){switch(Object.prototype.toString.call(r)){case"[object String]":return nl(nt[r]);case"[object Object]":return nl(r);default:return nl(nt[nu])}},[r]);return f.default.createElement(nc.Provider,{value:o},f.default.createElement(e,(0,a._)({},i)))}},np=function(e){var t=e.expanded,n=e.styles;return f.default.createElement("span",{style:(0,a._)({},n.base,t?n.expanded:n.collapsed)},"")},nh=(0,f.memo)(function(e){var t=(e=(0,a._)({expanded:!0,nodeRenderer:function(e){var t=e.name;return f.default.createElement("span",null,t)},onClick:function(){},shouldShowArrow:!1,shouldShowPlaceholder:!0},e)).expanded,n=e.onClick,r=e.children,i=e.nodeRenderer,o=e.title,s=e.shouldShowArrow,l=e.shouldShowPlaceholder,u=nd("TreeNode");return f.default.createElement("li",{"aria-expanded":t,role:"treeitem",style:u.treeNodeBase,title:o},f.default.createElement("div",{style:u.treeNodePreviewContainer,onClick:n},s||f.Children.count(r)>0?f.default.createElement(np,{expanded:t,styles:u.treeNodeArrow}):l&&f.default.createElement("span",{style:u.treeNodePlaceholder},""),f.default.createElement(i,(0,a._)({},e))),f.default.createElement("ol",{role:"group",style:u.treeNodeChildNodesContainer},t?r:void 0))});function nm(e,t){return!t(e).next().done}var ng=function(e,t,n,r,i){var o=[].concat(Array.from({length:r},function(e,t){return["$"].concat(Array.from({length:t},function(){return"*"})).join(".")})).concat(n).filter(function(e){return"string"==typeof e}),s=[];return o.forEach(function(n){var r=n.split("."),i=function(e,n,a){if(a===r.length)return void s.push(n);var o=r[a];if(0===a)nm(e,t)&&("$"===o||"*"===o)&&i(e,"$",a+1);else if("*"===o){var l=!0,u=!1,c=void 0;try{for(var d,f=t(e)[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value,h=p.name,m=p.data;nm(m,t)&&i(m,"".concat(n,".").concat(h),a+1)}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}}else{var g=e[o];nm(g,t)&&i(g,"".concat(n,".").concat(o),a+1)}};i(e,"",0)}),s.reduce(function(e,t){return e[t]=!0,e},(0,a._)({},i))},nv=(0,f.memo)(function(e){var t=e.data,n=e.dataIterator,i=e.path,u=e.depth,c=e.nodeRenderer,d=(0,s._)((0,f.useContext)(no),2),p=d[0],h=d[1],m=nm(t,n),g=!!p[i],x=(0,f.useCallback)(function(){return m&&h(function(e){return(0,o._)((0,a._)({},e),(0,r._)({},i,!g))})},[m,h,i,g]);return f.default.createElement(nh,(0,a._)({expanded:g,onClick:x,shouldShowArrow:m,shouldShowPlaceholder:u>0,nodeRenderer:c},e),g?(0,l._)(n(t)).map(function(e){var t=e.name,r=e.data,o=(0,U._)(e,["name","data"]);return f.default.createElement(nv,(0,a._)({name:t,data:r,depth:u+1,path:"".concat(i,".").concat(t),key:t,dataIterator:n,nodeRenderer:c},o))}):null)}),nx=(0,f.memo)(function(e){var t=e.name,n=e.data,r=e.dataIterator,i=e.nodeRenderer,a=e.expandPaths,o=e.expandLevel,l=nd("TreeView"),u=(0,f.useState)({}),c=(0,s._)(u,2)[1];return(0,f.useLayoutEffect)(function(){return c(function(e){return ng(n,r,a,o,e)})},[n,r,a,o]),f.default.createElement(no.Provider,{value:u},f.default.createElement("ol",{role:"tree",style:l.treeViewOutline},f.default.createElement(nv,{name:t,data:n,dataIterator:r,depth:0,path:"$",nodeRenderer:i})))}),ny=function(e){var t=e.name,n=e.dimmed,r=e.styles,i=nd("ObjectName"),o=(0,a._)({},i.base,void 0!==n&&n?i.dimmed:{},void 0===r?{}:r);return f.default.createElement("span",{style:o},t)},nb=function(e){var t=e.object,n=e.styles,r=nd("ObjectValue"),o=function(e){return(0,a._)({},r[e],n)};switch(void 0===t?"undefined":(0,u._)(t)){case"bigint":return f.default.createElement("span",{style:o("objectValueNumber")},String(t),"n");case"number":return f.default.createElement("span",{style:o("objectValueNumber")},String(t));case"string":return f.default.createElement("span",{style:o("objectValueString")},'"',t,'"');case"boolean":return f.default.createElement("span",{style:o("objectValueBoolean")},String(t));case"undefined":return f.default.createElement("span",{style:o("objectValueUndefined")},"undefined");case"object":if(null===t)return f.default.createElement("span",{style:o("objectValueNull")},"null");if((0,i._)(t,Date))return f.default.createElement("span",null,t.toString());if((0,i._)(t,RegExp))return f.default.createElement("span",{style:o("objectValueRegExp")},t.toString());if(Array.isArray(t))return f.default.createElement("span",null,"Array(".concat(t.length,")"));if(!t.constructor)return f.default.createElement("span",null,"Object");if("function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))return f.default.createElement("span",null,"Buffer[".concat(t.length,"]"));return f.default.createElement("span",null,t.constructor.name);case"function":return f.default.createElement("span",null,f.default.createElement("span",{style:o("objectValueFunctionPrefix")},""),f.default.createElement("span",{style:o("objectValueFunctionName")},t.name,"()"));case"symbol":return f.default.createElement("span",{style:o("objectValueSymbol")},t.toString());default:return f.default.createElement("span",null)}},nw=Object.prototype.hasOwnProperty,n_=Object.prototype.propertyIsEnumerable;function nk(e,t){var n=Object.getOwnPropertyDescriptor(e,t);if(n.get)try{return n.get()}catch(e){return n.get}return e[t]}function nS(e,t){return 0===e.length?[]:e.slice(1).reduce(function(e,n){return e.concat([t,n])},[e[0]])}var nC=function(e){var t=e.data,n=nd("ObjectPreview");if((void 0===t?"undefined":(0,u._)(t))!=="object"||null===t||(0,i._)(t,Date)||(0,i._)(t,RegExp))return f.default.createElement(nb,{object:t});if(Array.isArray(t)){var r=n.arrayMaxProperties,a=t.slice(0,r).map(function(e,t){return f.default.createElement(nb,{key:t,object:e})});t.length>r&&a.push(f.default.createElement("span",{key:"ellipsis"},""));var o=t.length;return f.default.createElement(f.default.Fragment,null,f.default.createElement("span",{style:n.objectDescription},0===o?"":"(".concat(o,")")),f.default.createElement("span",{style:n.preview},"[",nS(a,", "),"]"))}var s=n.objectMaxProperties,l=[];for(var c in t)if(nw.call(t,c)){var d=void 0;l.length===s-1&&Object.keys(t).length>s&&(d=f.default.createElement("span",{key:"ellipsis"},""));var p=nk(t,c);if(l.push(f.default.createElement("span",{key:c},f.default.createElement(ny,{name:c||'""'}),":",f.default.createElement(nb,{object:p}),d)),d)break}var h=t.constructor?t.constructor.name:"Object";return f.default.createElement(f.default.Fragment,null,f.default.createElement("span",{style:n.objectDescription},"Object"===h?"":"".concat(h," ")),f.default.createElement("span",{style:n.preview},"{",nS(l,", "),"}"))},nj=function(e){var t=e.name,n=e.data;return"string"==typeof t?f.default.createElement("span",null,f.default.createElement(ny,{name:t}),f.default.createElement("span",null,": "),f.default.createElement(nC,{data:n})):f.default.createElement(nC,{data:n})},nT=function(e){var t=e.name,n=e.data,r=e.isNonenumerable;return f.default.createElement("span",null,"string"==typeof t?f.default.createElement(ny,{name:t,dimmed:void 0!==r&&r}):f.default.createElement(nC,{data:t}),f.default.createElement("span",null,": "),f.default.createElement(nb,{object:n}))},nE=function(e){var t=e.depth,n=e.name,r=e.data,i=e.isNonenumerable;return 0===t?f.default.createElement(nj,{name:n,data:r}):f.default.createElement(nT,{name:n,data:r,isNonenumerable:i})},nR=nf(function(e){var t,n=e.showNonenumerable,r=e.sortObjectKeys,i=e.nodeRenderer,o=(0,U._)(e,["showNonenumerable","sortObjectKeys","nodeRenderer"]),l=(t=void 0!==n&&n,function(e){var n,i,a,o,l,d,f,p,h,m,g,x,y,b,w,_,k,S,C;return(0,c._)(this,function(c){switch(c.label){case 0:if(((void 0===e?"undefined":(0,u._)(e))!=="object"||null===e)&&"function"!=typeof e)return[2];if(!(!(n=Array.isArray(e))&&e[Symbol.iterator]))return[3,12];i=0,a=!0,o=!1,l=void 0,c.label=1;case 1:c.trys.push([1,9,10,11]),d=e[Symbol.iterator](),c.label=2;case 2:if(a=(f=d.next()).done)return[3,8];if(!(Array.isArray(p=f.value)&&2===p.length))return[3,4];return[4,{name:(h=(0,s._)(p,2))[0],data:h[1]}];case 3:return c.sent(),[3,6];case 4:return[4,{name:i.toString(),data:p}];case 5:c.sent(),c.label=6;case 6:i++,c.label=7;case 7:return a=!0,[3,2];case 8:return[3,11];case 9:return m=c.sent(),o=!0,l=m,[3,11];case 10:try{a||null==d.return||d.return()}finally{if(o)throw l}return[7];case 11:return[3,24];case 12:g=Object.getOwnPropertyNames(e),!0!==r||n?"function"==typeof r&&g.sort(r):g.sort(),x=!0,y=!1,b=void 0,c.label=13;case 13:c.trys.push([13,20,21,22]),w=g[Symbol.iterator](),c.label=14;case 14:if(x=(_=w.next()).done)return[3,19];if(k=_.value,!n_.call(e,k))return[3,16];return S=nk(e,k),[4,{name:k||'""',data:S}];case 15:return c.sent(),[3,18];case 16:if(!t)return[3,18];C=void 0;try{C=nk(e,k)}catch(e){}if(void 0===C)return[3,18];return[4,{name:k,data:C,isNonenumerable:!0}];case 17:c.sent(),c.label=18;case 18:return x=!0,[3,14];case 19:return[3,22];case 20:return m=c.sent(),y=!0,b=m,[3,22];case 21:try{x||null==w.return||w.return()}finally{if(y)throw b}return[7];case 22:if(!(t&&e!==Object.prototype))return[3,24];return[4,{name:"__proto__",data:Object.getPrototypeOf(e),isNonenumerable:!0}];case 23:c.sent(),c.label=24;case 24:return[2]}})});return f.default.createElement(nx,(0,a._)({nodeRenderer:i||nE,dataIterator:l},o))}),nI=function(e){var t=e.rows,n=e.columns,r=e.rowsData,i=nd("TableInspectorDataContainer"),o=nd("TableInspectorLeftBorder");return f.default.createElement("div",{style:i.div},f.default.createElement("table",{style:i.table},f.default.createElement("colgroup",null),f.default.createElement("tbody",null,t.map(function(e,t){return f.default.createElement("tr",{key:e,style:i.tr},f.default.createElement("td",{style:(0,a._)({},i.td,o.none)},e),n.map(function(e){var n=r[t];return(void 0===n?"undefined":(0,u._)(n))==="object"&&null!==n&&nw.call(n,e)?f.default.createElement("td",{key:e,style:(0,a._)({},i.td,o.solid)},f.default.createElement(nb,{object:n[e]})):f.default.createElement("td",{key:e,style:(0,a._)({},i.td,o.solid)})}))}))))},nA=function(e){return f.default.createElement("div",{style:{position:"absolute",top:1,right:0,bottom:1,display:"flex",alignItems:"center"}},e.children)},nP=function(e){var t=e.sortAscending,n=nd("TableInspectorSortIcon");return f.default.createElement("div",{style:n},t?"":"")},nD=function(e){var t=e.sortAscending,n=e.sorted,r=e.onClick,i=e.borderStyle,l=e.children,u=(0,U._)(e,["sortAscending","sorted","onClick","borderStyle","children"]),c=nd("TableInspectorTH"),d=(0,s._)((0,f.useState)(!1),2),p=d[0],h=d[1],m=(0,f.useCallback)(function(){return h(!0)},[]),g=(0,f.useCallback)(function(){return h(!1)},[]);return f.default.createElement("th",(0,o._)((0,a._)({},u),{style:(0,a._)({},c.base,void 0===i?{}:i,p?c.base[":hover"]:{}),onMouseEnter:m,onMouseLeave:g,onClick:void 0===r?void 0:r}),f.default.createElement("div",{style:c.div},l),void 0!==n&&n&&f.default.createElement(nA,null,f.default.createElement(nP,{sortAscending:void 0!==t&&t})))},nO=function(e){var t=e.indexColumnText,n=e.columns,r=e.sorted,i=e.sortIndexColumn,a=e.sortColumn,o=e.sortAscending,s=e.onTHClick,l=e.onIndexTHClick,u=nd("TableInspectorHeaderContainer"),c=nd("TableInspectorLeftBorder");return f.default.createElement("div",{style:u.base},f.default.createElement("table",{style:u.table},f.default.createElement("tbody",null,f.default.createElement("tr",null,f.default.createElement(nD,{borderStyle:c.none,sorted:r&&i,sortAscending:o,onClick:l},void 0===t?"(index)":t),(void 0===n?[]:n).map(function(e){return f.default.createElement(nD,{borderStyle:c.solid,key:e,sorted:r&&a===e,sortAscending:o,onClick:s.bind(null,e)},e)})))))},nN=nf(function(e){var t,n=e.data,r=e.columns,i=nd("TableInspector"),a=(0,s._)((0,f.useState)({sorted:!1,sortIndexColumn:!1,sortColumn:void 0,sortAscending:!1}),2),o=a[0],c=o.sorted,d=o.sortIndexColumn,p=o.sortColumn,h=o.sortAscending,m=a[1],g=(0,f.useCallback)(function(){m(function(e){var t=e.sortIndexColumn,n=e.sortAscending;return{sorted:!0,sortIndexColumn:!0,sortColumn:void 0,sortAscending:!t||!n}})},[]),x=(0,f.useCallback)(function(e){m(function(t){var n=t.sortColumn,r=t.sortAscending;return{sorted:!0,sortIndexColumn:!1,sortColumn:e,sortAscending:e!==n||!r}})},[]);if((void 0===n?"undefined":(0,u._)(n))!=="object"||null===n)return f.default.createElement("div",null);var y=function(e){if((void 0===e?"undefined":(0,u._)(e))==="object"){var t=[];if(Array.isArray(e)){var n=e.length;t=(0,l._)(Array(n).keys())}else null!==e&&(t=Object.keys(e));var r=t.reduce(function(t,n){var r=e[n];return(void 0===r?"undefined":(0,u._)(r))==="object"&&null!==r&&Object.keys(r).reduce(function(e,t){return e.includes(t)||e.push(t),e},t),t},[]);return{rowHeaders:t,colHeaders:r}}}(n),b=y.rowHeaders,w=y.colHeaders;void 0!==r&&(w=r);var _=b.map(function(e){return n[e]});if(void 0!==p?t=_.map(function(e,t){return(void 0===e?"undefined":(0,u._)(e))==="object"&&null!==e?[e[p],t]:[void 0,t]}):d&&(t=b.map(function(e,t){return[b[t],t]})),void 0!==t){var k,S=t.sort((k=function(e){return e[0]},function(e,t){var n,r=k(e),i=k(t),a=void 0===r?"undefined":(0,u._)(r),o=void 0===i?"undefined":(0,u._)(i),s=function(e,t){return e<t?-1:+(e>t)};if(a===o)n=s(r,i);else{var l={string:0,number:1,object:2,symbol:3,boolean:4,undefined:5,function:6};n=s(l[a],l[o])}return h||(n=-n),n})).map(function(e){return e[1]});b=S.map(function(e){return b[e]}),_=S.map(function(e){return _[e]})}return f.default.createElement("div",{style:i.base},f.default.createElement(nO,{columns:w,sorted:c,sortIndexColumn:d,sortColumn:p,sortAscending:h,onTHClick:x,onIndexTHClick:g}),f.default.createElement(nI,{rows:b,columns:w,rowsData:_}))}),nM=function(e){return 0===e.childNodes.length||1===e.childNodes.length&&e.childNodes[0].nodeType===Node.TEXT_NODE&&e.textContent.length<80},nL=function(e){var t=e.tagName,n=e.attributes,r=e.styles;return f.default.createElement("span",{style:r.base},"<",f.default.createElement("span",{style:r.tagName},t),function(){if(n){for(var e=[],t=0;t<n.length;t++){var i=n[t];e.push(f.default.createElement("span",{key:t}," ",f.default.createElement("span",{style:r.htmlAttributeName},i.name),'="',f.default.createElement("span",{style:r.htmlAttributeValue},i.value),'"'))}return e}}(),">")},nB=function(e){var t=e.tagName,n=e.isChildNode,r=e.styles;return f.default.createElement("span",{style:Object.assign({},r.base,void 0!==n&&n&&r.offsetLeft)},"</",f.default.createElement("span",{style:r.tagName},t),">")},nV={1:"ELEMENT_NODE",3:"TEXT_NODE",7:"PROCESSING_INSTRUCTION_NODE",8:"COMMENT_NODE",9:"DOCUMENT_NODE",10:"DOCUMENT_TYPE_NODE",11:"DOCUMENT_FRAGMENT_NODE"},nF=function(e){var t=e.isCloseTag,n=e.data,r=e.expanded,i=nd("DOMNodePreview");if(t)return f.default.createElement(nB,{styles:i.htmlCloseTag,isChildNode:!0,tagName:n.tagName});switch(n.nodeType){case Node.ELEMENT_NODE:return f.default.createElement("span",null,f.default.createElement(nL,{tagName:n.tagName,attributes:n.attributes,styles:i.htmlOpenTag}),nM(n)?n.textContent:!r&&"",!r&&f.default.createElement(nB,{tagName:n.tagName,styles:i.htmlCloseTag}));case Node.TEXT_NODE:return f.default.createElement("span",null,n.textContent);case Node.CDATA_SECTION_NODE:return f.default.createElement("span",null,"<![CDATA["+n.textContent+"]]>");case Node.COMMENT_NODE:return f.default.createElement("span",{style:i.htmlComment},"<!--",n.textContent,"-->");case Node.PROCESSING_INSTRUCTION_NODE:return f.default.createElement("span",null,n.nodeName);case Node.DOCUMENT_TYPE_NODE:return f.default.createElement("span",{style:i.htmlDoctype},"<!DOCTYPE ",n.name,n.publicId?' PUBLIC "'.concat(n.publicId,'"'):"",!n.publicId&&n.systemId?" SYSTEM":"",n.systemId?' "'.concat(n.systemId,'"'):"",">");case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:return f.default.createElement("span",null,n.nodeName);default:return f.default.createElement("span",null,nV[n.nodeType])}},nU=function(e){var t,n;return(0,c._)(this,function(r){switch(r.label){case 0:if(!(e&&e.childNodes))return[3,6];if(nM(e))return[2];t=0,r.label=1;case 1:if(!(t<e.childNodes.length))return[3,4];if((n=e.childNodes[t]).nodeType===Node.TEXT_NODE&&0===n.textContent.trim().length)return[3,3];return[4,{name:"".concat(n.tagName,"[").concat(t,"]"),data:n}];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:if(!e.tagName)return[3,6];return[4,{name:"CLOSE_TAG",data:{tagName:e.tagName},isCloseTag:!0}];case 5:r.sent(),r.label=6;case 6:return[2]}})},nG=nf(function(e){return f.default.createElement(nx,(0,a._)({nodeRenderer:nF,dataIterator:nU},e))}),n$=function(e,t,n,r){if(t&&(void 0===t?"undefined":(0,u._)(t))==="object"||"function"==typeof t){var i=!0,a=!1,o=void 0;try{for(var s,l=t5(t)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)!function(){var n=s.value;t8.call(e,n)||void 0===n||t2(e,n,{get:function(){return t[n]},enumerable:!(r=t3(t,n))||r.enumerable})}()}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}return e}(t2(null!=(t=ne())?t1(t4(t)):{},"default",{value:t,enumerable:!0}),t),nH=function(e){var t=e.table,n=e.data,r=(0,U._)(e,["table","data"]);return void 0!==t&&t?f.default.createElement(nN,(0,a._)({data:n},r)):(0,n$.default)(n)?f.default.createElement(nG,(0,a._)({data:n},r)):f.default.createElement(nR,(0,a._)({data:n},r))},nz=e.i(417751),nW=e.i(642049),nq=e.i(112077),nK=e.i(399245),nY=e.i(819906),nQ=e.i(122129),nX=e.i(834903),nZ=e.i(47503),nJ=e.i(869226),n0=e.i(299798);e.i(282890);var n1=e.i(66718),n2=e.i(210481),n3=e.i(628796),n5=e.i(639610),n4=(0,eA.cvarsFrom)("WebviewLogs.module.css",["--drawer-height","--drawer-width"]),n8=(0,eP.cssRecord)({tab:[eD.rcss.borderRadius(0)],tabList:[eD.rcss.overflow("auto"),eD.rcss.mr(4)],tabsContainer:[eD.rcss.height("100%"),{display:"grid",gridTemplateRows:"32px 1fr"}],tabPanel:[eD.rcss.height("100%"),eD.rcss.overflow("hidden")]});function n6(e){return e[e.length-1]}var n7=(0,o._)((0,a._)({},na),{BASE_FONT_FAMILY:eA.tokens.fontFamilyCode,BASE_FONT_SIZE:eA.tokens.fontSizeSmall,BASE_LINE_HEIGHT:eA.tokens.lineHeightSmall,BASE_BACKGROUND_COLOR:"transparent",BASE_COLOR:eA.tokens.foregroundDefault,OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:eA.tokens.purpleStronger,OBJECT_VALUE_NULL_COLOR:eA.tokens.greyStronger,OBJECT_VALUE_UNDEFINED_COLOR:eA.tokens.greyStronger,OBJECT_VALUE_REGEXP_COLOR:eA.tokens.redStronger,OBJECT_VALUE_STRING_COLOR:eA.tokens.redStronger,OBJECT_VALUE_SYMBOL_COLOR:eA.tokens.redStronger,OBJECT_VALUE_NUMBER_COLOR:eA.tokens.blueStronger,OBJECT_VALUE_BOOLEAN_COLOR:eA.tokens.blueStronger,OBJECT_VALUE_FUNCTION_PREFIX_COLOR:eA.tokens.blueStronger,ARROW_COLOR:eA.tokens.foregroundDimmest,ARROW_MARGIN_RIGHT:6,ARROW_FONT_SIZE:eA.tokens.fontSizeSmall,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:eA.tokens.fontFamilyCode,TREENODE_FONT_SIZE:eA.tokens.fontSizeSmall,TREENODE_LINE_HEIGHT:eA.tokens.lineHeightSmall,TREENODE_PADDING_LEFT:12});function n9(e){var t=e.logs,n=(0,s._)((0,f.useState)(!0),2),r=n[0],i=n[1],a=(0,f.useRef)(null),o=(0,f.useRef)(0),l=(0,f.useCallback)(function(){if(a.current){var e=a.current,t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;t<o.current?i(!1):n-t-r<=20&&i(!0),o.current=t}},[]);return(0,f.useEffect)(function(){if(r&&a.current&&t.length>0){var e=a.current;e.scrollTop=e.scrollHeight}},[t,r]),(0,d.jsxs)(ec.View,{clsx:[n5.default.logsContainer,r&&n5.default.snapToBottom],innerRef:a,onScroll:l,children:[0===t.length?(0,d.jsx)(ec.View,{p:8,children:(0,d.jsx)(el.Text,{color:"dimmest",children:"No logs received yet"})}):null,t.map(function(e,t){return(0,d.jsx)(re,{log:e},"".concat(e.timestamp,"-").concat(t))}),r?(0,d.jsx)(ec.View,{clsx:n5.default.scrollSnap}):null]})}function re(e){var t=e.log,n=t.method.toLowerCase().includes("error"),r=t.method.toLowerCase().includes("warn"),i=(0,nz.format)(t.timestamp,"yyyy-MM-dd HH:mm:ss.SS");return(0,d.jsxs)(ec.View,{p:4,clsx:[n5.default.logRow,n&&n5.default.errorLog,r&&n5.default.warningLog],row:!0,gap:8,align:"start",children:[(0,d.jsx)(el.Text,{color:"dimmest",variant:"codeSmall",children:i}),(0,d.jsx)(ec.View,{row:!0,align:"start",gap:8,shrink:1,children:t.parsed.map(function(e,t){return"string"==typeof e?(0,d.jsx)(ec.View,{shrink:1,children:(0,d.jsx)(el.Text,{variant:"codeSmall",children:e})},t):(0,d.jsx)(nH,{theme:n7,data:e},t)})})]})}function rt(e){var t=e.paneId,i=e.openPane,p=e.onClose,h=e.wrapperRef,m=e.dockPosition,g=e.onToggleDock,x=(0,s._)((0,f.useState)([]),2),y=x[0],b=x[1],w=(0,s._)((0,f.useState)(!1),2),_=w[0],k=w[1],S=(0,nq.useCreateObservable)({width:300,height:200});(0,n0.usePid2)(function(e,r){var i=r.signal;return(0,n._)(function(){var n,r,s,d,f,p,h,m,g;return(0,c._)(this,function(c){switch(c.label){case 0:n=e.agentToolWebviewLogs.stream.subscribe({paneId:t},{signal:i}).resReadable,r=!1,s=!1,c.label=1;case 1:c.trys.push([1,6,7,12]),f=function(){var e=h.value;if(!e.ok)return{v:void 0};var t=e.payload.map(function(e){var t;try{t=JSON.parse(e.message)}catch(e){return null}return Array.isArray(t)||(t=[t]),(0,o._)((0,a._)({},e),{parsed:t})}).filter(function(e){return null!==e});b(function(e){var n=(0,l._)(e).concat((0,l._)(t));return n.length>100?n.slice(-100):n})},p=(0,t0._)(n),c.label=2;case 2:return[4,p.next()];case 3:if(!(r=!(h=c.sent()).done))return[3,5];if(m=f(),"object"===(0,u._)(m))return[2,m.v];c.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return g=c.sent(),s=!0,d=g,[3,12];case 7:if(c.trys.push([7,,10,11]),!(r&&null!=p.return))return[3,9];return[4,p.return()];case 8:c.sent(),c.label=9;case 9:return[3,11];case 10:if(s)throw d;return[7];case 11:return[7];case 12:return[2]}})})()},[t]);var C=(0,tY.useWorkflowsTaskFlatMap)(),j=(0,f.useMemo)(function(){var e=new Map,t=!0,n=!1,r=void 0;try{for(var i,a=C[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if("shell.exec"===o.config.task){var l=e.get(o.workflowId)||new Map,u=l.get(o.taskIdx)||[];u.push(o),l.set(o.taskIdx,u),e.set(o.workflowId,l)}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return Array.from(e.values()).flatMap(function(e){return function(e){var t=[],n=[],r=[],i=!0,a=!1,o=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,d=(0,s._)(c,2),f=(d[0],d[1]),p=f.some(function(e){return(0,eR.isExpoTask)(e)}),h=f.some(function(e){return"waitForPort"in e.config&&null!=e.config.waitForPort});p?t.push(c):h?n.push(c):r.push(c)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var m=[],g=!0,x=!1,y=void 0;try{for(var b,w=e[Symbol.iterator]();!(g=(b=w.next()).done);g=!0)!function(){var e=b.value,i=(0,s._)(e,2),a=i[0],o=i[1],l=o.some(function(e){return(0,eR.isExpoTask)(e)}),u=o.some(function(e){return"waitForPort"in e.config&&null!=e.config.waitForPort}),c=void 0;if(l){var d=t.findIndex(function(e){return(0,s._)(e,1)[0]===a});c=t.length>1?"Expo ".concat(d+1):"Expo"}else if(u){var f=n.findIndex(function(e){return(0,s._)(e,1)[0]===a});c=n.length>1?"Server Logs ".concat(f+1):"Server Logs"}else{var p=r.findIndex(function(e){return(0,s._)(e,1)[0]===a}),h=o[0].workflowId;c=r.length>1?"".concat(h," Logs ").concat(p+1):"".concat(h," Logs")}m.push({name:c,tasks:o})}()}catch(e){x=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(x)throw y}}return m}(Array.from(e.entries()))})},[C]),T=(0,f.useCallback)(function(e){if(e.preventDefault(),k(!0),"bottom"===m){var t=e.clientY,n=S.current.height,r=function(e){var r,i=Math.min(Math.max(n+(t-e.clientY),200),((null==(r=h.current)?void 0:r.clientHeight)||0)-200);S.set((0,o._)((0,a._)({},S.current),{height:i}))},i=function(){k(!1),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",i)};window.addEventListener("mousemove",r),window.addEventListener("mouseup",i)}else{var s=e.clientX,l=S.current.width,u=function(e){var t,n=Math.min(Math.max(l+(s-e.clientX),200),((null==(t=h.current)?void 0:t.clientWidth)||0)-200);S.set((0,o._)((0,a._)({},S.current),{width:n}))},c=function(){k(!1),window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",c)};window.addEventListener("mousemove",u),window.addEventListener("mouseup",c)}},[m,S,h]),E=(0,f.useRef)(null),R=(0,f.useMemo)(function(){return S.map(function(e){var t;return t={},(0,r._)(t,n4.drawerHeight,"".concat(e.height,"px")),(0,r._)(t,n4.drawerWidth,"".concat(e.width,"px")),t})},[S]);return(0,nJ.useStyleSet)(E,R),(0,d.jsxs)(ec.View,{clsx:[n5.default.wrapper,"right"===m&&n5.default.wrapperRight],innerRef:E,children:[(0,d.jsx)(ec.View,{clsx:[n5.default.resizeHandle,"right"===m&&n5.default.resizeHandleRight,_&&n5.default.resizing],onMouseDown:T,children:(0,d.jsx)(ec.View,{clsx:n5.default.resizeGrip})}),(0,d.jsx)(ec.View,{clsx:n5.default.tabsWrapper,children:(0,d.jsxs)(n3.Tabs,{css:n8.tabsContainer,children:[(0,d.jsxs)(ec.View,{row:!0,align:"center",justify:"space-between",pl:2,pr:4,clsx:n5.default.header,children:[(0,d.jsxs)(n3.TabList,{withUnderline:!1,css:n8.tabList,children:[(0,d.jsx)(n3.Tab,{id:"webview",css:n8.tab,children:(0,d.jsxs)(ec.View,{row:!0,gap:4,align:"center",children:[(0,d.jsx)(ec.View,{clsx:n5.default.nowrap,children:"Webview Logs"}),(0,d.jsx)(nK.default,{})]})}),j.map(function(e,t){var n=e.name,r=n6(e.tasks),i=null;switch(r.task.state){case nW.TaskState.RUNNING:i=(0,d.jsx)(nY.default,{});break;case nW.TaskState.FINISHED:i=(0,d.jsx)(e9.default,{});break;case nW.TaskState.FAILED:case nW.TaskState.ERROR:i=(0,d.jsx)(eU.default,{})}return(0,d.jsx)(n3.Tab,{id:n,css:n8.tab,children:(0,d.jsxs)(ec.View,{row:!0,gap:4,align:"center",children:[(0,d.jsx)(ec.View,{clsx:n5.default.nowrap,children:n}),i]})},"".concat(n,"-").concat(t))})]}),(0,d.jsxs)(ec.View,{row:!0,gap:2,children:[(0,d.jsx)(eo.IconButton,{alt:"bottom"===m?"Dock to right":"Dock to bottom",onClick:g,children:"bottom"===m?(0,d.jsx)(nX.default,{size:12}):(0,d.jsx)(nQ.default,{size:12})}),(0,d.jsx)(eo.IconButton,{alt:"Close",onClick:p,children:(0,d.jsx)(Y.default,{size:12})})]})]}),(0,d.jsxs)(n3.TabPanels,{children:[(0,d.jsx)(n3.TabPanel,{id:"webview",css:n8.tabPanel,children:(0,d.jsx)(n9,{logs:y})}),j.map(function(e){var n=e.name,r=n6(e.tasks);return(0,d.jsx)(n3.TabPanel,{id:n,css:n8.tabPanel,children:(0,d.jsx)(rn,{runId:r.runId,taskIdx:r.taskIdx,paneId:t,openPane:i})},n)})]})]})})]})}function rn(e){var t=e.runId,r=e.taskIdx,i=e.paneId,a=e.openPane,o=(0,en.default)().fs,l=(0,nZ.useCurrentUserId)(),u=(0,f.useCallback)(function(e){a({type:(0,n1.getPaneTypeForFile)(e),data:e})},[a]),p=(0,f.useCallback)(function(e,t){a({type:"webview",data:{ports:{type:"local",port:t,path:e}}})},[a]),h=(0,s._)((0,n2.default)({listFiles:o.listFiles,openFile:u,openWebview:p,openPane:a}),2),m=h[0],g=h[1],x=(0,f.useRef)(!1);return(0,n0.usePid2)(function(e,a){var o=a.signal;return(0,n._)(function(){var n,a,s,u,d,f,p,h,g,y;return(0,c._)(this,function(c){switch(c.label){case 0:if(x.current||!m||!l)return[2];a=(n=e.workflows.connectToTask.stream({runId:t,taskIdx:r,userId:l,processViewId:i},{signal:o})).resReadable,s=n.reqWritable,x.current=!0,s.write({$kind:"resize",size:m.getSize()}),u=!1,d=!1,c.label=1;case 1:c.trys.push([1,6,7,12]),p=(0,t0._)(a),c.label=2;case 2:return[4,p.next()];case 3:if(!(u=!(h=c.sent()).done))return[3,5];if(!(g=h.value).ok){if("UNEXPECTED_DISCONNECT"===g.payload.code||"CANCEL"===g.payload.code||"NO_MATCHING_TASK_STATE"===g.payload.code)return[3,5];throw Error("[".concat(g.payload.code,"] ").concat(g.payload.message))}"output"===g.payload.$kind&&m.write(g.payload.chunk),c.label=4;case 4:return u=!1,[3,2];case 5:return[3,12];case 6:return y=c.sent(),d=!0,f=y,[3,12];case 7:if(c.trys.push([7,,10,11]),!(u&&null!=p.return))return[3,9];return[4,p.return()];case 8:c.sent(),c.label=9;case 9:return[3,11];case 10:if(d)throw f;return[7];case 11:return[7];case 12:return s.close(),[2]}})})()},[t,r,m,l,i]),(0,d.jsx)(ec.View,{clsx:n5.default.xtermWrapper,children:(0,d.jsx)(ec.View,{clsx:n5.default.xtermInner,innerRef:g})})}var rr=e.i(474880),ri=(0,eA.cvarsFrom)("index.module.css",["--width","--height","--transform","--border-radius","--border","--color-scheme","--logs-grid-rows","--logs-grid-columns"]),ra=(0,f.forwardRef)(function(e,t){var h,I,A,P,D,O,N,M,L,B,V,F,U,z,W,q,K,Y,Q,X,Z,J,ee,et,en,er,ei,ea,eo,es,el,eu,ef,ep,eh,em,eg,ex,ey,eb,ew,e_,ek,eS,eC,ej,eT,eE,eI,eP,eD,eO,eN,eM,eL,eV,eF,eU,eG,e$,eH,eW,eq=e.initialPort,eK=e.initialPath,eY=void 0===eK?"/":eK,eX=e.openPane,eZ=e.previewScreenSize,eJ=e.setPreviewScreenSize,e1=e.expoPreviewGuideShown,e2=e.setExpoPreviewGuideShown,e3=e.isMobilePIP,e5=e.readonlyBannerVariant,e4=e.paneId,e6=e.onUnhandledExceptionChange,e9=(0,s._)((0,f.useState)(!0),2),te=e9[0],tt=e9[1],tn=(0,s._)((0,f.useState)(!1),2),tr=tn[0],ti=tn[1],ta=(0,s._)((0,f.useState)(!1),2),to=ta[0],ts=ta[1],tl=(0,s._)((0,f.useState)(!1),2),tu=tl[0],tc=tl[1],td=(0,s._)((0,f.useState)(!1),2),tf=td[0],tp=td[1],th=(0,tq.useCookieWarningBannerDismissed)(),tm=(0,tq.useSetCookieWarningBannerDismissed)(),tg=(0,f.useId)(),tx=(0,b.default)(),ty=(0,E.useIsAgentStackRepl)().isAgentStackRepl,tb=(0,tW.useIsAgentWebDesignMockup)(),tw=tb.isWebDesignMockup,t_=tb.loading,tk=(0,m.useShouldShowDesignModeUITreatment)(),tS=(0,tq.useInProgressMockupToAppGraduation)(),tC=(0,eR.useGetExpoGoURL)();(0,f.useEffect)(function(){t_||tw||tp(!0)},[tw,t_]),(0,f.useEffect)(function(){tS&&tp(!0)},[tS]);var tj=(0,x.default)(),tT=(0,T.useIsBonsaiWebviewBridgeSupported)();B=(0,eQ.useGlobalModal)().show,V=(0,tX.getCurrentUrl)(),(0,f.useEffect)(function(){var e=function(e){var t;(0,tZ.isFromWebviewIframe)(e)&&(void 0===(t=e.data)?"undefined":(0,u._)(t))==="object"&&null!==t&&"type"in t&&"CLICKED_MADE_WITH_REPLIT_BADGE"===t.type&&((0,G.track)($.events.UPGRADE_SELECTED,{source:"replit_badge_pill_click"}),B("MembershipPurchaseModal",{headingText:"Upgrade to ".concat(tQ.corePlanName),subHeadingText:'Remove the "Made with Replit" badge and unlock all '.concat(tQ.corePlanName," features"),analyticsContext:{upgrade:{context:"replit_badge_pill_click"}},redirectPath:V,onPurchaseComplete:function(){tJ(!1)}}))};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}},[B,V]);var tE=(0,j.isGalleryPreviewPort)(eq),tR=(0,f.useRef)(null),tA=(0,f.useRef)(null),tP=(0,f.useRef)(!1),tD=(0,s._)((0,f.useState)(!1),2),tO=tD[0],tN=tD[1],tM=null!=e1&&e1,tL=(0,s._)((0,f.useState)(!1),2),tF=tL[0],tH=tL[1],t0=(0,f.useRef)(!1),t1=(h=({desiredScreenSize:eZ}).desiredScreenSize,A=(I=(0,s._)((0,f.useState)(void 0),2))[0],P=I[1],{resizeRef:(0,w.default)(function(e){P(e)}),screenSize:(0,f.useMemo)(function(){if(h&&A){var e=A.width-80,t=A.height-80,n=h.screen,r=n.width,i=n.height,a=r/i,o=t*a,s=e,l=e/a;o<=e&&(s=o,l=t);var u=Math.min(1,s/r,l/i);return s=1===u?r:s,l=1===u?i:l,{width:r,height:i,scaledWidth:s,scaledHeight:l,scale:u}}},[h,A])}),t2=t1.resizeRef,t3=t1.screenSize,t5=(0,tB.useReplShieldToken)().token,t4=(0,f.useMemo)(function(){return!tj&&!tT&&!tE&&!e3},[tj,tT,tE,e3]),t8=(0,C.useUrls)({addDevToolsSuffix:t4}),t6=(0,f.useMemo)(function(){return!(null==t8?void 0:t8.reachability.dotdev)&&!(null==t8?void 0:t8.reachability.replCo)&&!tr},[t8,tr]),t7=null!=t8,t9=(0,tY.useWorkflowsTaskFlatMap)(),ne=(0,f.useMemo)(function(){return(0,tK.getForwardedPortsFromTasks)(t9)},[t9]),nt=(0,f.useCallback)(function(){ts(!0)},[]),nn=(D=e4,O=(0,f.useRef)([]),N=ro((0,S.usePid2Callback)(function(e){return function(){return(0,n._)(function(){var t;return(0,c._)(this,function(n){return(t=(0,l._)(O.current),O.current=[],t&&t.length)?[2,e.agentToolWebviewLogs.store.rpc({logs:t,paneId:D})]:[2]})})()}},[D]),O,100),(0,f.useCallback)(function(e,t){O.current.push({method:e,message:t}),N()},[N])),nr=(M=({onUnhandledExceptionChange:e6}).onUnhandledExceptionChange,L=(0,y.default)(M),(0,f.useCallback)(function(e,t){var n,r;"unhandlederror"===e.toLowerCase()&&(null==(n=L.current)||n.call(L,!0)),"debug"===e&&(t.toLowerCase().includes("updated")||t.toLowerCase().includes("connected"))&&(null==(r=L.current)||r.call(L,!1))},[L])),ni=(0,f.useCallback)(function(e,t){nn(e,t),nr(e,t)},[nn,nr]),na=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).onStripeCheckoutDetected,t=(0,f.useRef)([]),r=ro((0,S.usePid2Callback)(function(e){return function(){return(0,n._)(function(){var n;return(0,c._)(this,function(r){return(n=(0,l._)(t.current),t.current=[],n.length)?[2,e.agentToolWebviewNetworkRequests.store.rpc(n)]:[2]})})()}},[]),t,500);return(0,f.useCallback)(function(n){if(e&&n.responseBody)try{((0,i._)(n.responseBody,Uint8Array)?new TextDecoder().decode(n.responseBody):"object"===(0,u._)(n.responseBody)?JSON.stringify(n.responseBody):String(n.responseBody)).includes("checkout.stripe.com")&&e()}catch(e){}var s=(0,o._)((0,a._)({},n),{requestBody:"string"==typeof n.requestBody?new TextEncoder().encode(n.requestBody):n.requestBody,responseBody:null==n.responseBody||(0,i._)(n.responseBody,Uint8Array)?n.responseBody:new TextEncoder().encode("string"==typeof n.responseBody?n.responseBody:JSON.stringify(n.responseBody))});t.current.push(s),r()},[r,e])}({onStripeCheckoutDetected:nt});(0,f.useEffect)(function(){!tj||t7&&tA.current.addEventListener("dom-ready",function(){tP.current=!0})},[tj,t7]);var no=(0,f.useCallback)(function(e,t){return(0,n._)(function(){var n,r;return(0,c._)(this,function(i){return tA.current&&(null==(n=tA.current)?void 0:n.contentWindow)&&(null==t8?void 0:t8.iframeSrc)?(r=t$({id:tg,iframeSrc:t8.iframeSrc,port:t,path:e,mintReplShieldToken:t5||void 0,navigateThroughWorkspaceDevtools:t4}),tA.current.src=r,[2,new Promise(function(e){var t,n,r=function(){var e,t;clearTimeout(o),null==(e=tA.current)||e.removeEventListener("load",i),null==(t=tA.current)||t.removeEventListener("error",a)},i=function(){r(),e()},a=function(){r(),e()},o=setTimeout(function(){r(),e()},1e4);null==(t=tA.current)||t.addEventListener("load",i),null==(n=tA.current)||n.addEventListener("error",a)})]):[2]})})()},[tg,t4,t8,t5]),ns=(0,y.default)(no),nl=(0,s._)((0,f.useState)(null),2),nu=nl[0],nc=nl[1],nd=(0,f.useCallback)(function(e){return nc(e)},[nc]),nf=(0,k.useIsInMobileWorkspace)(),np=(0,T.useWebviewPaneBridge)({isSupported:!e3&&tT,navigateIframeRef:ns,onReceiveWebviewLog:ni,onReceiveWebviewScreenshot:nd,initialPort:eq,initialPath:eY,baseUrl:null==t8?void 0:t8.baseUrl}),nh=(U=(F={replId:tx,webviewId:tg,iframeOrWebviewRef:tA,iframeSrc:null==t8?void 0:t8.iframeSrc,onReceiveWebviewLog:ni,onReceiveNetworkRequest:na,bonsaiWebviewBridge:np,onThirdPartyCookieCheck:function(e){e||tt(!1)}}).replId,z=F.webviewId,W=F.iframeOrWebviewRef,q=F.iframeSrc,K=F.onReceiveWebviewLog,Y=F.onReceiveNetworkRequest,Q=F.bonsaiWebviewBridge,X=F.onThirdPartyCookieCheck,J=(Z=(0,s._)((0,f.useState)({state:"loading",relativeUrl:null}),2))[0],ee=Z[1],et=(0,x.default)(),(0,f.useEffect)(function(){if(et&&q){if(!W.current)throw Error("Expected iframe to be defined when iframerc exists");var e=W.current,t=new URL(q);return e.addEventListener("did-navigate",n),e.addEventListener("did-navigate-in-page",n),function(){e.removeEventListener("did-navigate",n),e.removeEventListener("did-navigate-in-page",n)}}function n(e){var n=new URL(e.url),r=n.pathname+n.search+n.hash;n.hostname!==t.hostname?ee(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}}):ee(function(e){return"active"===e.state&&e.relativeUrl===r?e:{state:"active",relativeUrl:r}})}},[et,q,W]),(0,f.useEffect)(function(){if(Q)return Q.path.subscribe(function(e){ee(function(t){return"active"===t.state&&"path"===t.relativeUrl?t:{state:"active",relativeUrl:e}})})},[Q]),(0,f.useEffect)(function(){if(!et&&!Q&&q){var e=new URL(q);return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}}function t(t){if(t.origin&&"null"!==t.origin){if(new URL(t.origin).hostname===e.hostname&&"object"===(0,u._)(t.data)&&(null==(n=t.data)?void 0:n.type)){var n,r=t.data;if(null==r||!r.id||r.id===z)switch(r.type){case"event":var i=t.data,s=i.event,l=i.payload;"error"===s?tV.captureException(l):(0,G.track)(s,(0,o._)((0,a._)({},l),{replId:U}));break;case"forward-log":K(r.method,r.message);break;case"forward-network-request":Y(r.message);break;case"third-party-cookie-check":X(r.payload.enabled);break;case"page-navigation":if(r.payload.isExternal)return void ee(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});var c=r.payload.relativeUrl;ee(function(e){return"active"===e.state&&e.relativeUrl===c?e:{state:"active",relativeUrl:c}})}}}}},[U,z,et,q,W,K,Y,Q,X]),{webviewPageState:J}).webviewPageState,nm=(0,f.useCallback)(function(e,t){return(0,n._)(function(){var n;return(0,c._)(this,function(r){return t8?tj?tP.current?(n=t$({id:tg,iframeSrc:t8.iframeSrc,port:t,path:e,mintReplShieldToken:t5||void 0,navigateThroughWorkspaceDevtools:t4}),[2,tA.current.loadURL(n)]):[2]:(np&&np.handleNavigateTo({port:null!=t?t:80,path:e,base:t8.baseUrl}),[2,no(e,t)]):[2]})})()},[t8,tj,np,no,tg,t4,t5]),ng=(er=(en={initialPort:eq,initialPath:eY,presentationalUrl:null==t8?void 0:t8.presentationUrl,webviewPageState:nh,navigateTo:function(e,t){return nm(e,t)}}).initialPort,ei=en.initialPath,ea=en.presentationalUrl,eo=en.webviewPageState,es=en.navigateTo,eu=(el=(0,s._)((0,f.useState)(!1),2))[0],ef=el[1],eh=(ep=(0,s._)((0,f.useState)(!1),2))[0],em=ep[1],ex=(eg=(0,s._)((0,f.useState)("Loading..."),2))[0],ey=eg[1],ew=(eb=(0,s._)((0,f.useState)(80),2))[0],e_=eb[1],eS=(ek=(0,s._)((0,f.useState)(!1),2))[0],eC=ek[1],ej=(0,f.useCallback)(function(e,t,n,r,i){ef(e),em(t),ey(n),e_(r),eC(i)},[]),eT=(0,y.default)(es),eE=(0,y.default)(er),eI=(0,y.default)(ei),eP=(0,tU.default)(function(){return new tG({initialRelativeUrl:eI.current,initialPort:eE.current,onChange:ej,navigateTo:eT})},[eI,eE,ej,eT]),(0,f.useEffect)(function(){"loading"!==eo.state||eE.current!==ew&&eP.setPort(eE.current)},[er,eE,eP,ew,eo]),(0,f.useEffect)(function(){"active"===eo.state&&eP.relativeUrlUpdate(eo.relativeUrl)},[eo.state,eo.relativeUrl,eP]),(0,f.useEffect)(function(){eP.navigate(eI.current,er)},[er,eI,eP]),eD=(0,f.useCallback)(function(){H({actionType:"navigated_to",path:ex}),eP.navigate(ex)},[ex,eP]),eO=(0,f.useCallback)(function(){var e=(0,C.addPortToUrl)(ea||"",ew);return ex&&(e.pathname=ex),e.toString()},[ex,ea,ew]),eN=(0,f.useCallback)(function(){return eP.back()},[eP]),eM=(0,f.useCallback)(function(){return eP.forward()},[eP]),eL=(0,f.useCallback)(function(){return eP.refresh()},[eP]),eV=(0,f.useCallback)(function(e){return eP.setPort(e)},[eP]),{canNavigateBack:eu,canNavigateForward:eh,navigateBack:eN,navigateForward:eM,canNavigateToInputRelativeUrl:(0,f.useMemo)(function(){return ex!==eo.relativeUrl},[ex,eo.relativeUrl]),navigateToInputRelativeUrl:eD,inputRelativeUrl:ex,setInputRelativeUrl:ey,refresh:eL,setPort:eV,selectedPort:ew,getExternalUrl:eO,isRefreshing:eS}),nv=(0,y.default)(ng);(0,tY.useOnLocalRun)(function(){nv.current.refresh()},[nv]),(0,f.useEffect)(function(){ts(!1),tc(!1)},[ng.selectedPort]),(0,f.useEffect)(function(){"active"===nh.state&&(ts(!1),tc(!1))},[nh.state]);var nx=(0,p.useProposedPlan)();(0,f.useEffect)(function(){tE&&nf&&(null==nx?void 0:nx.planId)&&nv.current.refresh()},[nf,tE,nv,nx]),(0,f.useImperativeHandle)(t,function(){return{refresh:function(){return nv.current.refresh()},navigateTo:nm,getCurrentPath:function(){return nh.relativeUrl}}},[nm,nv,nh.relativeUrl]);var ny=(0,ed.useTheme)().isDarkColorScheme,nb=!e3;(0,f.useEffect)(function(){np&&np.setInsets({top:tE?48:40})},[np,tE]);var nw=(0,f.useCallback)(function(){return eX({type:"developer",data:{tab:["networking"]}})},[eX]),n_=(0,g.useDeploymentId)(),nk=(0,f.useCallback)(function(){return eX({type:"deployments"})},[eX]),nS=(0,f.useMemo)(function(){var e=ng.selectedPort;return!!e&&t9.some(function(t){return(0,eR.isExpoTask)(t,e)})},[t9,ng.selectedPort]),nC=(0,s._)((0,f.useState)(function(){return"bottom"}),2),nj=nC[0],nT=nC[1],nE=(0,f.useMemo)(function(){if(nS)try{return tC(ng.getExternalUrl())}catch(e){return}},[tC,nS,ng]);if((0,f.useEffect)(function(){void 0!==eZ&&(t0.current=!0)},[eZ]),(0,f.useEffect)(function(){!nS||!eJ||nf||eZ||t0.current||(eJ(tv),t0.current=!0)},[nS,eZ,eJ,nf]),ty)return(0,d.jsx)(tz,{openPane:eX});if(!t8)return null;var nR="0 0 ".concat(eA.tokens.space4," ").concat(eA.tokens.space4);if(t3?nR=eA.tokens.space4:nf?nR="0":tO&&(nR="0"),eF=e3||tE||!nu?(0,d.jsx)(ec.View,{clsx:rr.default.iframeWrapper,grow:!0,shrink:!0,"data-is-readonly-preview":tE,innerRef:t2,align:"center",justify:"center",gap:4,children:(0,d.jsx)(ec.View,{style:(eG={overflow:"hidden"},(0,r._)(eG,ri.width,t3?"".concat(t3.scaledWidth,"px"):"100%"),(0,r._)(eG,ri.height,t3?"".concat(t3.scaledHeight,"px"):"100%"),(0,r._)(eG,ri.borderRadius,nR),(0,r._)(eG,ri.border,t3?"1px solid ".concat(eA.tokens.outlineDefault):"none"),eG),clsx:rr.default.iframeMiddle,children:(0,d.jsx)(ec.View,{style:(e$={},(0,r._)(e$,ri.width,t3?"".concat(t3.width,"px"):"100%"),(0,r._)(e$,ri.height,t3?"".concat(t3.height,"px"):"100%"),(0,r._)(e$,ri.transform,"scale(".concat(null!=(eU=null==t3?void 0:t3.scale)?eU:1,")")),e$),clsx:rr.default.iframeInner,children:tj?(0,d.jsx)("webview",(0,a._)({"data-cy":"ws-webview",ref:tA,src:t$({iframeSrc:t8.iframeSrc,port:eq,path:eY,id:tg,mintReplShieldToken:t5||void 0,navigateThroughWorkspaceDevtools:t4}),style:(0,r._)({},ri.colorScheme,ny?"dark":"light"),className:rr.default.desktopAppWebview},_.default)):(0,d.jsx)("iframe",(0,a._)({title:"webview","data-cy":"ws-webview",ref:tA,src:t$({iframeSrc:t8.iframeSrc,port:eq,path:eY,id:tg,mintReplShieldToken:t5||void 0,navigateThroughWorkspaceDevtools:t4}),style:(0,r._)({},ri.colorScheme,ny?"dark":"light"),className:rr.default.iframe},_.default))})})}):(0,d.jsx)(ec.View,{clsx:rr.default.screenshotWrapper,style:{backgroundImage:"url(".concat(nu,")")}}),tE)return(0,d.jsxs)(ec.View,{clsx:rr.default.root,children:[nb?(0,d.jsx)(R.ReadonlyPreviewBanner,{readonlyBannerVariant:null!=e5?e5:"none"}):null,eF]});eH=e3?null:tT?(0,d.jsx)(eB,{webviewPageState:nh,navigationState:ng,bonsaiWebviewBridge:np,expoUrl:nE,openPane:eX}):(0,d.jsx)(tI,{replId:tx,url:t8.presentationUrl,webviewPageState:nh,navigationState:ng,forwardedPorts:ne,onToggleWebviewLogs:function(){tN(function(e){return!e})},onOpenPortSettings:nw,screenSize:eZ,setScreenSize:eJ,replShield:!!t5,openPane:eX,expoUrl:nE,onToggleExpoSidebar:function(){e2&&e2(!tM)},showExpoSidebarHighlight:tF});var nI=nE&&!nf,nA=nI&&tM,nP="1fr";return nA&&tO&&"right"===nj?nP="1fr auto auto":nA?nP="1fr auto":tO&&"right"===nj&&(nP="1fr auto"),(0,d.jsxs)(ec.View,{clsx:rr.default.root,innerRef:tR,children:[eH,t6?(0,d.jsx)(e8,{reachability:t8.reachability,navigationState:ng,onDismiss:function(){return ti(!0)}}):null,t6||te||th||t_||tw?null:(0,d.jsx)(ez,{navigationState:ng,onDismiss:function(){return tm(!0)}}),to&&!tu&&nb?(0,d.jsx)(e7,{navigationState:ng,onDismiss:function(){return tc(!0)}}):null,tw&&!tS&&tk&&!tf&&nb?(0,d.jsx)(e0,{onDismiss:function(){return tp(!0)}}):null,(0,d.jsxs)(ec.View,{grow:!0,shrink:!0,clsx:rr.default.webContentAndLogsWrapper,style:(eW={},(0,r._)(eW,ri.logsGridRows,tO&&"bottom"===nj?"1fr auto":"1fr"),(0,r._)(eW,ri.logsGridColumns,nP),eW),children:[(0,d.jsx)(ec.View,{clsx:rr.default.webContentWrapper,children:eF}),nI?(0,d.jsx)(ev,{expoUrl:nE,hasDeployment:void 0!==n_,onOpenDeploymentsPane:nk,hidden:!nA,onClose:function(){e2&&(e2(!1),tH(!0),setTimeout(function(){return tH(!1)},800))}}):null,tO&&e4?(0,d.jsx)(rt,{paneId:e4,openPane:eX,wrapperRef:tR,onClose:function(){return tN(!1)},dockPosition:nj,onToggleDock:function(){return nT(function(e){return"bottom"===e?"right":"bottom"})}}):null]})]})});function ro(e,t,r){var i=(0,f.useMemo)(function(){return(0,h.default)(function(){return(0,n._)(function(){return(0,c._)(this,function(t){return[2,null==e?void 0:e()]})})()},{wait:r})},[e,r]);return(0,f.useEffect)(function(){e&&t.current.length>0&&i()},[e,i,t]),i}e.s(["WebviewBrowser",()=>ra],378042)},908197,e=>{"use strict";var t=e.i(276385),n=e.i(282332),r=e.i(378042),i=e.i(446530),a=e.i(613355),o=(0,i.cssRecord)({webview:[a.rcss.height("auto"),a.rcss.flex.grow(1),a.rcss.position.relative]});function s(e){var i=e.openPane;return(0,t.jsx)(r.WebviewBrowser,{css:o.webview,initialPort:n.GALLERY_PREVIEW_PORT,readonlyBannerVariant:"gallery",openPane:i})}e.s(["AgentGalleryPreview",()=>s])},134405,e=>{"use strict";var t,n=e.i(642049);e.i(877212);var r=e.i(924908);e.i(925218);var i=e.i(267103),a=e.i(641555),o=e.i(761732),s=e.i(529810),l=e.i(410926),u=e.i(727894),c=e.i(63762),d=e.i(341727),f=e.i(782672),p=e.i(76430),h=e.i(729122),m=e.i(57527),g=e.i(417120);function x(e){return e[e.length-1]}var y=((t={}).WORKSPACE_CONNECTING="WORKSPACE_CONNECTING",t.WORKSPACE_RECONNECTING="WORKSPACE_RECONNECTING",t.NIX_IS_BROKEN="NIX_IS_BROKEN",t.SERVICES_LOADING="SERVICES_LOADING",t.GALLERY_PREVIEW="GALLERY_PREVIEW",t.APP_CRASHED_AGENT_WORKING="APP_CRASHED_AGENT_WORKING",t.APP_CRASHED_AGENT_IDLE="APP_CRASHED_AGENT_IDLE",t.APP_NOT_RUNNING_AGENT_WORKING="APP_NOT_RUNNING_AGENT_WORKING",t.APP_NOT_RUNNING_WAITING_FOR_INPUT="APP_NOT_RUNNING_WAITING_FOR_INPUT",t.APP_NOT_RUNNING_AGENT_IDLE="APP_NOT_RUNNING_AGENT_IDLE",t.APP_STARTING_AGENT_WORKING="APP_STARTING_AGENT_WORKING",t.APP_STARTING_AGENT_IDLE="APP_STARTING_AGENT_IDLE",t.READY="READY",t.LAST_RESORT_RUNNING_NO_PORT="LAST_RESORT_RUNNING_NO_PORT",t.LAST_RESORT_READY="LAST_RESORT_READY",t);function b(){return{hasGalleryPreviewPortAvailable:(0,l.useIsGalleryPreviewPortForwarded)()}}function w(){return b().hasGalleryPreviewPortAvailable?{type:"GALLERY_PREVIEW"}:{type:"NONE"}}function _(){var e=(0,d.default)(),t=e.didConnectOnce,l=e.didDisconnect,y=(0,f.useNixError)(),b=(0,h.useRunInfo)(),w=(0,h.useWorkflowsRunState)(),_=(0,s.default)().ports,k=(0,o.default)(_.portsState),S=(0,g.useIsAgentWorking)(),C=(0,p.useIsExpoStack)(),j=(0,r.useChatter)(),T=(0,a.useObservableMemo)(function(){return j.sessions.agent.current},[j.sessions],{default:void 0}),E=(0,u.useInitialBuildState)(T),R=(0,u.isInitialBuildStarted)(null==E?void 0:E.phase),I=(0,i.useObservable)((0,c.useAgentIsWaitingOnUserInput)()),A=null!==k&&!1===b.isWorkflowsLoading,P=Object.values(null!=w?w:{}).filter(function(e){return"agent"===e.workflow.author&&e.tasks.some(function(e){return"shell.exec"===e.config.task})}).sort(function(e,t){return e.startTime-t.startTime}),D=P.filter(function(e){return e.step===n.WorkflowStateStep.RUNNING}),O=D.length>0?D:P,N=O.flatMap(function(e){return e.tasks.map(function(t){return{task:t,runId:e.runId}})}).filter(function(e){return"shell.exec"===e.task.config.task}).filter(function(e){var t,r,i=e.task;if(i.state!==n.TaskState.RUNNING||!0!==i.isReady)return!1;var a=null!=(r=null==(t=i.metadata)?void 0:t.openPorts)?r:[];return(!0===C?(0,p.filterPortsForExpo)(a):a).some(function(e){return e.forwarded})}),M=N.length>0,L=M?null==w?void 0:w[N[0].runId]:x(O),B=x(Object.values(null!=w?w:{}).filter(function(e){return"agent"!==e.workflow.author&&e.step===n.WorkflowStateStep.RUNNING&&e.tasks.some(function(e){var t;return(null==(t=e.metadata)?void 0:t.task)==="shell.exec"})}).sort(function(e,t){return e.startTime-t.startTime})),V=(0,m.usePresentToUserEvents)();return{areNecessaryServicesReady:A,didConnectOnce:t,didDisconnect:l,hasAgentWorkflowOpenedAPort:M,isAgentWorking:S,isExpoStack:C,isWaitingOnUserInput:I,isInInitialBuild:R,lastResortWorkflowThatRuns:B,latestWorkflowRunStateForAgentTask:L,nixError:y,presentWebsiteResultEvent:(0,a.useObservableMemo)(function(){return null==V?void 0:V.scan(function(e,t){var n,r;return(null==(n=t.toPresent)?void 0:n.toolData.$kind)==="presentResultsToolData"&&"website"===t.toPresent.toolData.data.resultType?null==(r=t.toPresent)?void 0:r.toolData.data:e},void 0)},[V])}}function k(){var e=w(),t=_(),r=t.areNecessaryServicesReady,i=t.didConnectOnce,a=t.didDisconnect,o=t.hasAgentWorkflowOpenedAPort,s=t.isAgentWorking,l=t.isExpoStack,u=t.isWaitingOnUserInput,c=t.isInInitialBuild,d=t.lastResortWorkflowThatRuns,f=t.latestWorkflowRunStateForAgentTask,p=t.nixError,h=t.presentWebsiteResultEvent;if(!i)return{state:"WORKSPACE_CONNECTING"};if(a)return{state:"WORKSPACE_RECONNECTING"};if((null==p?void 0:p.status)==="error"||(null==p?void 0:p.status)==="rebuilding-after-error")return{state:"NIX_IS_BROKEN",nixError:p};if(!r||void 0===l)return{state:"SERVICES_LOADING"};if("GALLERY_PREVIEW"===e.type)return{state:"GALLERY_PREVIEW"};if(void 0!==d&&void 0===f){var m,g,x,y=null==(m=d.tasks)?void 0:m.find(function(e){var t,r,i;return!!(e.state===n.TaskState.RUNNING&&!0===e.isReady&&(null==(t=e.metadata)?void 0:t.task)==="shell.exec"&&(null==(i=e.metadata)||null==(r=i.openPorts)?void 0:r.some(function(e){return e.forwarded})))}),b=null==y||null==(x=y.metadata.openPorts)||null==(g=x.find(function(e){return e.forwarded}))?void 0:g.externalPort;return b?{state:"LAST_RESORT_READY",externalPort:b}:{state:"LAST_RESORT_RUNNING_NO_PORT"}}if((null==f?void 0:f.step)===n.WorkflowStateStep.FAILED){var k=f.runId;return s?{state:"APP_CRASHED_AGENT_WORKING",crashedRunId:k}:{state:"APP_CRASHED_AGENT_IDLE",crashedRunId:k}}if((null==f?void 0:f.step)!==n.WorkflowStateStep.RUNNING)if(u&&c)return{state:"APP_NOT_RUNNING_WAITING_FOR_INPUT"};else if(s||c)return{state:"APP_NOT_RUNNING_AGENT_WORKING"};else return{state:"APP_NOT_RUNNING_AGENT_IDLE"};if(f.step===n.WorkflowStateStep.RUNNING&&!o)if(s)return{state:"APP_STARTING_AGENT_WORKING"};else return{state:"APP_STARTING_AGENT_IDLE"};return{state:"READY",presentPort:null==h?void 0:h.websitePort,presentRoute:null==h?void 0:h.websiteRoute}}e.s(["WebviewState",()=>y,"useAgentAwareWebviewState",()=>k,"useAgentAwareWebviewStateInputs",()=>_,"useVisualPreviewState",()=>w,"useVisualPreviewStateInputs",()=>b])},137218,e=>{"use strict";var t=e.i(276385),n=e.i(477891),r=e.i(257982),i=e.i(712516),a=e.i(908197),o=e.i(561132),s=e.i(134405);function l(){return(0,t.jsx)(i.default,{pane:{type:"webview"},icon:(0,t.jsx)(n.default,{size:48}),headerText:"The app is running, but the preview isn't ready",bodyText:null})}function u(e){var n=e.webviewState,i=e.openPane,u=e.isFreemiumUserOutOfAgentCredits;switch(n.state){case s.WebviewState.WORKSPACE_CONNECTING:case s.WebviewState.SERVICES_LOADING:return(0,t.jsx)(o.AgentAwareWebviewConnectingEmptyState,{});case s.WebviewState.WORKSPACE_RECONNECTING:return(0,t.jsx)(o.AgentAwareWebviewReconnectingEmptyState,{});case s.WebviewState.GALLERY_PREVIEW:return(0,t.jsx)(a.AgentGalleryPreview,{openPane:i});case s.WebviewState.APP_CRASHED_AGENT_WORKING:if(u)return(0,t.jsx)(o.FreemiumUserOutOfAgentCreditsPreviewErrorEmptyState,{});return(0,t.jsx)(o.AgentAwareWebviewAppCrashedAgentWorkingEmptyState,{});case s.WebviewState.APP_CRASHED_AGENT_IDLE:if(u)return(0,t.jsx)(o.FreemiumUserOutOfAgentCreditsPreviewErrorEmptyState,{});return(0,t.jsx)(o.AgentAwareWebviewAppCrashedAgentNotWorkingEmptyState,{openPane:i,crashedRunId:n.crashedRunId});case s.WebviewState.APP_NOT_RUNNING_AGENT_WORKING:case s.WebviewState.APP_STARTING_AGENT_WORKING:return(0,t.jsx)(o.AgentAwareWebviewPreviewSoonEmptyStateV2,{});case s.WebviewState.APP_NOT_RUNNING_WAITING_FOR_INPUT:if(u)return(0,t.jsx)(o.FreemiumUserOutOfAgentCreditsPreviewErrorEmptyState,{});return(0,t.jsx)(o.AgentAwareWebviewPreviewWaitingForInputEmptyState,{});case s.WebviewState.APP_NOT_RUNNING_AGENT_IDLE:return(0,t.jsx)(o.AgentAwareWebviewAppNotRunningEmptyState,{});case s.WebviewState.APP_STARTING_AGENT_IDLE:return(0,t.jsx)(o.AgentAwareWebviewAppStartingEmptyState,{});case s.WebviewState.LAST_RESORT_RUNNING_NO_PORT:if(u)return(0,t.jsx)(o.FreemiumUserOutOfAgentCreditsPreviewErrorEmptyState,{});return(0,t.jsx)(l,{});case s.WebviewState.NIX_IS_BROKEN:if(u)return(0,t.jsx)(o.FreemiumUserOutOfAgentCreditsPreviewErrorEmptyState,{});return(0,t.jsx)(o.AgentAwareWebviewNixIsBrokenEmptyState,{openPane:i,nixError:n.nixError});default:(0,r.default)(n)}}e.s(["AgentAwareWebviewNonReadyStates",()=>u])},401135,e=>{"use strict";var t=e.i(389959),n=e.i(909478),r=e.i(529810);function i(e){var i=(0,r.default)().ports,a=(0,n.useOpenedAndForwardedPorts)(i);return(0,t.useMemo)(function(){return 0===a.length||void 0===e},[a.length,e])}e.s(["useShowEmptyState",()=>i])},942314,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(269848),i=e.i(155119),a=e.i(224386),o=e.i(381010),s=e.i(761732),l=e.i(529810),u=e.i(712516),c=e.i(729122),d=e.i(779154),f=e.i(140487),p=e.i(960178),h=e.i(625484);function m(e){var n=e.children,r=e.action;return(0,t.jsxs)(h.View,{align:"center",children:[(0,t.jsx)(p.Text,{children:n}),r?(0,t.jsx)(h.View,{row:!0,align:"center",gap:4,children:r}):null]})}function g(e){var r=e.openNetworkingTool,i=(0,c.useRunInfo)().isRunning,o=(0,l.default)().ports,u=(0,s.default)(o.portsState),p=(0,n.useMemo)(function(){return null==u?void 0:u.some(function(e){return e.isOpen})},[u]);return i?p?(0,t.jsx)(m,{action:(0,t.jsxs)(t.Fragment,{children:["Use"," ",(0,t.jsx)(f.Button,{onClick:r,size:"small",text:"Networking",iconLeft:(0,t.jsx)(a.default,{size:12})})," ","tool to configure them."]}),children:"The app is running, but has no external ports configured."}):(0,t.jsx)(m,{children:"The app is running, but there's no webpage to preview right now."}):(0,t.jsx)(m,{action:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.InlineRunButton,{})," to see the results of your app."]}),children:"The app is currently not running."})}function x(e){var n=e.openNetworkingTool,a=e.didConnectOnce,s=e.didDisconnect;return!a||s?(0,t.jsx)(u.default,{pane:{type:"webview"},icon:a?(0,t.jsx)(o.default,{size:48}):(0,t.jsx)(r.default,{size:48}),headerText:a?"The workspace is reconnecting":"The workspace is loading",bodyText:null}):(0,t.jsx)(u.default,{pane:{type:"webview"},icon:(0,t.jsx)(i.default,{size:48}),headerText:"Preview your app here",bodyText:(0,t.jsx)(g,{openNetworkingTool:n})})}e.s(["default",()=>x])},236906,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(389959),a=e.i(960933),o=e.i(862927),s=e.i(161322),l=e.i(116235),u=e.i(155119),c=e.i(612633),d=e.i(993796),f=e.i(524283),p=e.i(84104),h=e.i(378042),m=e.i(767500),g=e.i(157648),x=e.i(401135),y=e.i(813453),b=e.i(942314),w=e.i(341727),_=e.i(573605),k=e.i(330069);e.i(282890);var S=e.i(716636),C=e.i(548364),j=e.i(336563),T=e.i(729122),E=e.i(154703),R=e.i(137218),I=e.i(134405),A=e.i(492267),P=e.i(76430),D=e.i(759967),O=e.i(259493),N=e.i(480028),M=e.i(136540),L=a.Type.Union([a.Type.Object({type:a.Type.Literal("local"),port:a.Type.Number(),path:a.Type.Optional(a.Type.String())}),a.Type.Object({type:a.Type.Literal("external"),port:a.Type.Number(),path:a.Type.Optional(a.Type.String())})]),B=a.Type.Object({shown:a.Type.Boolean()}),V=a.Type.Object({type:a.Type.Literal("webview"),data:a.Type.Optional(a.Type.Object({previewScreenSize:a.Type.Optional(g.ScreenSizeSchema),ports:a.Type.Optional(L),sessionId:a.Type.Optional(a.Type.String()),expoPreviewGuide:a.Type.Optional(B)}))}),F=function(e){return o.Value.Decode(V,e)},U={Content:function(e){var a,o=e.pane.data,s=e.options,l=s.performPaneOperation,u=s.isActive,c=s.paneId,d=(0,i.useRef)(null),p=(0,D.useIsExpertMode)(),h=(0,A.useIsAgentStackRepl)().isAgentStackRepl,m=(0,T.useWorkflowsTaskFlatMap)(),g=(0,P.useIsExpoStack)(),x=(0,i.useMemo)(function(){return(0,f.getInitialPort)({data:o,tasks:m,isExpoStack:g})},[o,m,g]),b=null==o||null==(a=o.ports)?void 0:a.path,w=(0,i.useCallback)(function(e){l({operation:"open",pane:e})},[l]),_=(0,i.useCallback)(function(){return w({type:"deployments"})},[w]),k=null==o?void 0:o.previewScreenSize,S=(0,i.useCallback)(function(e){l({operation:"replace",pane:{type:"webview",data:(0,n._)((0,t._)({},null!=o?o:{}),{previewScreenSize:e})}})},[o,l]),j=null==o||!o.expoPreviewGuide||o.expoPreviewGuide.shown,E=(0,i.useCallback)(function(e){l({operation:"replace",pane:{type:"webview",data:(0,n._)((0,t._)({},null!=o?o:{}),{expoPreviewGuide:{shown:e}})}})},[o,l]),R=(0,i.useCallback)(function(){var e,t;l({operation:"openPip",data:{type:"webview",port:x,path:null!=(t=null==(e=d.current)?void 0:e.getCurrentPath())?t:"/"}})},[x,l]),I=(0,C.useDeploymentCommands)({openDeploymentsPane:_,includeSharing:!0}).getCommandGroups;return((0,O.useSetPaneBindings)(function(){var e={type:"webview",refresh:function(){var e;null==(e=d.current)||e.refresh()},navigate:function(e,t){var n;null==(n=d.current)||n.navigateTo(e,t)}},r=I();return r.length>0?(0,n._)((0,t._)({},e),{commands:r}):e},[I]),h)?(0,r.jsx)(y.WebviewDisabledForAgentStack,{openPane:w}):p||h?(0,r.jsx)(G,{ref:d,isActive:u,initialPort:x,initialPath:b,openPane:w,handlePipClick:R,previewScreenSize:k,setPreviewScreenSize:S,expoPreviewGuideShown:j,setExpoPreviewGuideShown:E,paneId:c}):(0,r.jsx)($,{ref:d,isActive:u,initialPort:x,initialPath:b,openPane:w,handlePipClick:R,previewScreenSize:k,setPreviewScreenSize:S,expoPreviewGuideShown:j,setExpoPreviewGuideShown:E,openDeploymentsPane:_,paneId:c})},Icon:function(e){var t=e.size;return(0,r.jsx)(l.IconContext.Provider,{value:{color:N.tokens.foregroundDimmer,size:t},children:(0,r.jsx)(u.default,{})})},getTitle:function(){return"Preview"},description:"Preview your App",category:S.PaneCategory.WorkspaceFeatures,decode:F},G=(0,i.forwardRef)(function(e,t){var n=e.isActive,a=e.initialPort,o=e.initialPath,l=e.openPane,u=e.handlePipClick,c=e.previewScreenSize,d=e.setPreviewScreenSize,f=e.expoPreviewGuideShown,p=e.setExpoPreviewGuideShown,g=e.paneId,y=(0,x.useShowEmptyState)(a),_=(0,w.default)(),k=_.didConnectOnce,S=_.didDisconnect,C=(0,i.useCallback)(function(){return l({type:"developer",data:{tab:["networking"]}})},[l]),j=(0,i.useCallback)(function(){return l({type:"deployments"})},[l]),T=(0,s.useAtomValue)(m.expoGoNudgeShownAtom);return((0,E.useNativeWebviewVisibilityState)({isVisible:n&&!y&&!T}),y||void 0===a)?(0,r.jsx)(b.default,{openNetworkingTool:C,didConnectOnce:k,didDisconnect:S}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H,{openDeploymentsPane:j,handlePipClick:u}),(0,r.jsx)(h.WebviewBrowser,{ref:t,initialPort:a,initialPath:o,openPane:l,previewScreenSize:c,setPreviewScreenSize:d,expoPreviewGuideShown:f,setExpoPreviewGuideShown:p,paneId:g})]})}),$=(0,i.forwardRef)(function(e,t){var n,i=e.isActive,a=e.initialPort,o=e.initialPath,l=e.openPane,u=e.handlePipClick,c=e.previewScreenSize,f=e.setPreviewScreenSize,p=e.expoPreviewGuideShown,g=e.setExpoPreviewGuideShown,x=e.openDeploymentsPane,y=e.paneId,b=(0,I.useAgentAwareWebviewState)(),w=(0,T.useWorkflowsTaskFlatMap)(),S=(0,j.getForwardedPortsFromTasks)(w),C=(0,P.useIsExpoStack)(),A=(0,d.useFlag)({controlName:"flag-free-plan",default:!1}),D=(0,k.useShouldSeeFreemiumExperience)().shouldSeeFreemiumExperience,O=(0,_.useGetAgentFreeUsage)(),N=O.agentUsage,M=O.agentUsageV2,L=O.loading,B=O.error,V=M?M.isUnderQuota:null==N?void 0:N.isUnderQuota,F=A&&!L&&!B&&D&&!1===V,U=b.state===I.WebviewState.READY||b.state===I.WebviewState.LAST_RESORT_READY,G=(0,s.useAtomValue)(m.expoGoNudgeShownAtom);if((0,E.useNativeWebviewVisibilityState)({isVisible:i&&U&&!G}),!U)return(0,r.jsx)(R.AgentAwareWebviewNonReadyStates,{webviewState:b,openPane:l,isFreemiumUserOutOfAgentCredits:F});b.state===I.WebviewState.READY?n=b.presentPort:b.state===I.WebviewState.LAST_RESORT_READY&&(n=b.externalPort);var $=!0===C?(0,P.filterPortsForExpo)(S):S,z=void 0!==n&&$.some(function(e){return e.externalPort===n})&&n?n:a,W=b.state===I.WebviewState.READY?b.presentRoute:o;return void 0===z?(0,r.jsx)(R.AgentAwareWebviewNonReadyStates,{webviewState:{state:I.WebviewState.APP_STARTING_AGENT_IDLE},openPane:l,isFreemiumUserOutOfAgentCredits:F}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H,{openDeploymentsPane:x,handlePipClick:u}),(0,r.jsx)(h.WebviewBrowser,{ref:t,initialPort:z,initialPath:null!=W?W:o,openPane:l,previewScreenSize:c,setPreviewScreenSize:f,expoPreviewGuideShown:p,setExpoPreviewGuideShown:g,paneId:y})]})});function H(e){var t=e.openDeploymentsPane,n=e.handlePipClick;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.MobilePaneHeader,{side:"left",children:(0,r.jsx)(C.DeployButton,{openDeploymentsPane:t})}),(0,r.jsx)(p.MobilePaneHeader,{side:"right",children:(0,r.jsx)(M.IconButton,{size:36,alt:"Picture in Picture",onClick:n,children:(0,r.jsx)(c.default,{})})})]})}e.s(["decode",()=>F,"webviewUI",()=>U])},435762,e=>{e.v({fatal:"connections-module__EKNuIa__fatal",infoBox:"connections-module__EKNuIa__infoBox",ok:"connections-module__EKNuIa__ok",serviceRow:"connections-module__EKNuIa__serviceRow",statusIndicator:"connections-module__EKNuIa__statusIndicator"})},670161,724001,851218,e=>{"use strict";var t,n=e.i(297083),r=e.i(721281),i=e.i(530658),a=e.i(817556),o=e.i(276385),s=e.i(389959);e.i(877212);var l=e.i(970187),u=e.i(608572),c=e.i(243073),d=e.i(529810),f=e.i(939652),p=e.i(965863),h=e.i(409146);e.i(925218);var m=e.i(267103),g=e.i(417120),x=e.i(82259),y=e.i(924908),b=e.i(808547),w=e.i(641555),_=e.i(11986),k=e.i(610357),S=e.i(298900),C=e.i(382671),j=e.i(965153),T=e.i(140487),E=e.i(88619),R=e.i(607278),I=e.i(85742),A=e.i(624782),P=e.i(12034),D=e.i(960178),O=e.i(625484),N=new Map([[x.SessionType.SESSION_TYPE_UNKNOWN,"unknown"],[x.SessionType.CHAT,"chat"],[x.SessionType.INLINE_CHAT,"inline chat"],[x.SessionType.SINGLE_USE_SESSION,"single use session"],[x.SessionType.REPL_CREATION,"repl creation"],[x.SessionType.AGENT_SESSION,"agent"],[x.SessionType.HOSTING_DEBUG_SUMMARY,"hosting debug"],[x.SessionType.REPL_CREATION_V2,"repl creation v2"],[x.SessionType.REPL_CREATION_V3,"repl creation v3"],[x.SessionType.AGENT_REPLAY_SESSION,"agent replay"],[x.SessionType.SAMPLING_SESSION,"sampling"],[x.SessionType.SUB_AGENT,"subagent"]]);function M(e){var t=e.session,n=(0,m.useObservable)(t.data),r="";return(null==n?void 0:n.sessionType)!=null&&(r+="[".concat(N.get(n.sessionType),"] ")),r+=(null==n?void 0:n.title)||t.id,(0,o.jsx)(I.ListBoxItem,{id:t.id,label:r})}function L(e){var t,n,r=e.group,i=e.index,a=(0,m.useObservable)(null!=(t=r.checkpoint)?t:null),s=(0,m.useObservable)(null!=(n=r.endOfRunSummary)?n:null);return(0,o.jsx)(O.View,{children:(0,o.jsx)(j.AccordionItem,{headerContent:(0,o.jsxs)(O.View,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,children:[(0,o.jsx)(A.Pill,{variant:"outline",colorway:"green",text:"PRE-RUN"}),(0,o.jsxs)(D.Text,{variant:"small",color:"dimmer",children:["[",i,"]"]}),(0,o.jsx)(A.Pill,{variant:"filled",text:"minimized"}),(0,o.jsx)(O.View,{grow:!0,shrink:!0,children:(0,o.jsxs)(D.Text,{variant:"small",multiline:!1,children:["ID: ",r.id]})}),(0,o.jsx)(E.CopyIconButton,{size:24,textToCopy:r.id,tooltipSuccessText:"Copied to clipboard"})]}),children:(0,o.jsxs)(O.View,{gap:8,p:8,children:[a?(0,o.jsx)(j.AccordionItem,{headerContent:(0,o.jsxs)(O.View,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,children:[(0,o.jsx)(D.Text,{variant:"small",color:"dimmest",children:"checkpoint"}),(0,o.jsx)(O.View,{grow:!0,shrink:!0,children:(0,o.jsx)(D.Text,{variant:"small",multiline:!1,children:a.title})}),(0,o.jsx)(E.CopyIconButton,{textToCopy:a.id,tooltipSuccessText:"Copied"})]}),children:(0,o.jsx)(O.View,{p:8,children:(0,o.jsx)(h.default,{code:JSON.stringify(a,null,2),language:"json"})})}):null,s?(0,o.jsx)(j.AccordionItem,{headerContent:(0,o.jsxs)(O.View,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,children:[(0,o.jsx)(D.Text,{variant:"small",color:"dimmest",children:"endOfRunSummary"}),(0,o.jsx)(O.View,{grow:!0,shrink:!0}),(0,o.jsx)(E.CopyIconButton,{textToCopy:s.id,tooltipSuccessText:"Copied"})]}),children:(0,o.jsx)(O.View,{p:8,children:(0,o.jsx)(h.default,{code:JSON.stringify(s,null,2),language:"json"})})}):null]})})})}function B(e){var t,n,r,i=e.runGroup,a=e.granularity,s=e.index,l=(0,m.useObservable)(null!=(t=i.checkpoint)?t:null),u=(0,m.useObservable)(null!=(n=i.endOfRunSummary)?n:null),c=(0,m.useObservable)(null!=(r=i.latestTaskList)?r:null);return(0,o.jsx)(O.View,{children:(0,o.jsx)(j.AccordionItem,{headerContent:(0,o.jsxs)(O.View,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,children:[(0,o.jsx)(A.Pill,{variant:"outline",colorway:"blurple",text:"RUN"}),(0,o.jsxs)(D.Text,{variant:"small",color:"dimmer",children:["[",s,"]"]}),(0,o.jsx)(A.Pill,{variant:"filled",text:a}),(0,o.jsx)(O.View,{grow:!0,shrink:!0,children:(0,o.jsxs)(D.Text,{variant:"small",multiline:!1,children:["ID: ",i.id]})}),(0,o.jsx)(E.CopyIconButton,{size:24,textToCopy:i.id,tooltipSuccessText:"Copied to clipboard"})]}),children:(0,o.jsxs)(O.View,{gap:8,p:8,children:[l?(0,o.jsx)(j.AccordionItem,{headerContent:(0,o.jsxs)(O.View,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,children:[(0,o.jsx)(D.Text,{variant:"small",color:"dimmest",children:"checkpoint"}),(0,o.jsx)(O.View,{grow:!0,shrink:!0,children:(0,o.jsx)(D.Text,{variant:"small",multiline:!1,children:l.title})}),(0,o.jsx)(E.CopyIconButton,{textToCopy:l.id,tooltipSuccessText:"Copied"})]}),children:(0,o.jsx)(O.View,{p:8,children:(0,o.jsx)(h.default,{code:JSON.stringify(l,null,2),language:"json"})})}):null,u?(0,o.jsx)(j.AccordionItem,{headerContent:(0,o.jsxs)(O.View,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,children:[(0,o.jsx)(D.Text,{variant:"small",color:"dimmest",children:"endOfRunSummary"}),(0,o.jsx)(O.View,{grow:!0,shrink:!0}),(0,o.jsx)(E.CopyIconButton,{textToCopy:u.id,tooltipSuccessText:"Copied"})]}),children:(0,o.jsx)(O.View,{p:8,children:(0,o.jsx)(h.default,{code:JSON.stringify(u,null,2),language:"json"})})}):null,c?(0,o.jsx)(j.AccordionItem,{headerContent:(0,o.jsxs)(O.View,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,children:[(0,o.jsx)(D.Text,{variant:"small",color:"dimmest",children:"taskListUpdate"}),(0,o.jsx)(O.View,{grow:!0,shrink:!0,children:(0,o.jsxs)(D.Text,{variant:"small",multiline:!1,children:[c.tasks.length," tasks"]})}),(0,o.jsx)(E.CopyIconButton,{textToCopy:c.id,tooltipSuccessText:"Copied"})]}),children:(0,o.jsx)(O.View,{p:8,children:(0,o.jsx)(h.default,{code:JSON.stringify(c,null,2),language:"json"})})}):null,(0,o.jsxs)(O.View,{gap:4,children:[(0,o.jsxs)(D.Text,{variant:"small",color:"dimmer",children:["Items (",i.items.length,"):"]}),(0,o.jsx)(O.View,{gap:4,children:i.items.map(function(e,t){return(0,o.jsx)(F,{item:e,index:t},e.id)})})]})]})})})}function V(e){var t=e.eventItem,n=e.index,r=(0,m.useObservable)(t.observable),i=(0,s.useMemo)(function(){return r?"userMessage"===r.type?"User: ".concat(r.message):"".concat(r.type,"  ").concat(t.id):"loading..."},[r,t.id]);return(0,o.jsx)(O.View,{children:(0,o.jsx)(j.AccordionItem,{headerContent:(0,o.jsxs)(O.View,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,children:[(0,o.jsx)(A.Pill,{variant:"outline",colorway:"orange",text:"EVENT"}),(0,o.jsxs)(D.Text,{variant:"small",color:"dimmer",children:["[",n,"]"]}),(0,o.jsx)(O.View,{grow:!0,shrink:!0,children:(0,o.jsx)(D.Text,{variant:"small",multiline:!1,children:i})}),(0,o.jsx)(E.CopyIconButton,{textToCopy:t.id,tooltipSuccessText:"Copied to clipboard"})]}),children:(0,o.jsx)(O.View,{p:8,children:r?(0,o.jsx)(h.default,{code:JSON.stringify(r,null,2),language:"json"}):(0,o.jsx)(D.Text,{color:"dimmer",children:"Loading..."})})})})}function F(e){var t,n=e.item,r=e.index,i=(0,m.useObservable)(n.observable);return(0,o.jsx)(j.AccordionItem,{headerContent:(0,o.jsxs)(O.View,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,children:[(0,o.jsxs)(D.Text,{variant:"small",color:"dimmest",children:["[",r,"]"]}),(0,o.jsx)(O.View,{grow:!0,shrink:!0,children:(0,o.jsxs)(D.Text,{variant:"small",multiline:!1,children:[null!=(t=null==i?void 0:i.type)?t:"loading...","  ",n.id]})}),(0,o.jsx)(E.CopyIconButton,{textToCopy:n.id,tooltipSuccessText:"Copied"})]}),children:(0,o.jsx)(O.View,{p:8,children:i?(0,o.jsx)(h.default,{code:JSON.stringify(i,null,2),language:"json"}):(0,o.jsx)(D.Text,{color:"dimmer",children:"Loading..."})})})}var U=e.i(394212),G=e.i(374106),$=e.i(986194),H=e.i(805763),z=e.i(882848),W=e.i(735362),q=e.i(334028),K=e.i(207237),Y=e.i(178815),Q=e.i(634759),X=e.i(751273),Z={direction:"forward",state:{sessionCreatedAt:null,sessionCreationData:null,firstUserMessage:null,agentConfig:null,stackBlueprintData:null},debug:{name:"SessionDataReducer"},reducer:function(e,t){var n=e.contents.contents;if((null==n?void 0:n.$kind)==="sessionCreationEventContents"){t.sessionCreatedAt=new Date(e.created),t.sessionCreationData=e;return}if(!t.firstUserMessage&&e.sender.type===x.UserType.USER){if(t.firstUserMessage=e,(null==n?void 0:n.$kind)==="messageEventContents"){var r=n.messageEventContents;t.agentConfig=r.agentConfig||null,t.stackBlueprintData={requestedStackBlueprint:r.requestedStackBlueprint,customStackReplId:r.customStackReplId||void 0,themeConfig:r.themeConfig||void 0,agentStackTriggerType:r.agentStackTriggerType}}return!1}}};function J(e){var t=e.text,n=e.tooltipPrefix,r=e.value;return(0,o.jsx)(X.Tooltip,{tooltip:"".concat(void 0===n?"Value":n,": ").concat(r),children:(0,o.jsx)(A.Pill,{compact:!0,text:t})})}function ee(e){var t,n,r,i,a=e.session,s=(0,w.useObservableMemo)(function(){return a.reduce(Z,"global")},[a],{default:null}),l=s||{},u=l.agentConfig,c=l.stackBlueprintData;return(0,o.jsx)(o.Fragment,{children:s&&(0,o.jsxs)(O.View,{row:!0,gap:4,align:"center",wrap:!0,children:[c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(J,{text:(t=c.requestedStackBlueprint,Q.StackBlueprint[t]||"Unknown (".concat(t,")")),tooltipPrefix:"Enum value",value:c.requestedStackBlueprint}),c.customStackReplId&&(0,o.jsx)(J,{text:"customStackReplId",value:c.customStackReplId}),c.themeConfig&&(0,o.jsx)(J,{text:"themeConfig",value:c.themeConfig}),void 0!==c.agentStackTriggerType&&c.agentStackTriggerType!==x.AgentStackTriggerType.UNKNOWN_TRIGGER_TYPE&&(0,o.jsx)(J,{text:(n=c.agentStackTriggerType,x.AgentStackTriggerType[n]||"Unknown (".concat(n,")")),tooltipPrefix:"Enum value",value:c.agentStackTriggerType})]}):null,u?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(J,{text:(r=u.agentMode,x.AgentMode[r]||"Unknown (".concat(r,")")),tooltipPrefix:"Enum value",value:u.agentMode}),(0,o.jsx)(J,{text:(i=u.agentInitialBuildTier,x.AgentInitialBuildTier[i]||"Unknown (".concat(i,")")),tooltipPrefix:"Enum value",value:u.agentInitialBuildTier}),u.enableHumanInLoop&&(0,o.jsx)(J,{text:"enableHumanInLoop",value:u.enableHumanInLoop}),u.enableAutomatedTesting&&(0,o.jsx)(J,{text:"enableAutomatedTesting",value:u.enableAutomatedTesting}),u.webSearchEnabled&&(0,o.jsx)(J,{text:"webSearchEnabled",value:u.webSearchEnabled}),u.imageGenerationEnabled&&(0,o.jsx)(J,{text:"imageGenerationEnabled",value:u.imageGenerationEnabled})]}):null]})})}var et=e.i(480028);function en(e){var t=e.sessionType,r=(0,y.useChatter)(),l=(0,K.default)(),u=(0,m.useObservable)(r.sessions.agent.current),c=(0,w.useObservableMemo)(function(){return r.sessions.query({types:t?[t]:[]}).list},[r,t],{default:[]}),d=(0,i._)((0,s.useState)(function(){var e,t,n;return null!=(n=null!=(t=null==u?void 0:u.id)?t:null==(e=c[0])?void 0:e.id)?n:null}),2),f=d[0],p=d[1],h=(0,w.useObservableMemo)(function(){return f?r.sessions.get(f):null},[f,r]),g=(0,w.useObservableMemo)(function(){return null==h?void 0:h.transform({direction:"reverse",state:{},transformer:function(e){return e}},1e3)},[h]),x=(0,i._)((0,s.useState)(void 0),2),b=x[0],S=x[1],C=(0,s.useCallback)(function(){return(0,n._)(function(){var e,t,n,r,i,o,s,l,u;return(0,a._)(this,function(a){switch(a.label){case 0:if(!g||!h)return[2];return e=[],[4,h.data.once()];case 1:t=a.sent(),n=!1,r=!1,a.label=2;case 2:a.trys.push([2,8,9,14]),o=(0,U._)(g),a.label=3;case 3:return[4,o.next()];case 4:if(!(n=!(s=a.sent()).done))return[3,7];return[4,s.value[1].once()];case 5:l=a.sent(),e.push(l),a.label=6;case 6:return n=!1,[3,3];case 7:return[3,14];case 8:return u=a.sent(),r=!0,i=u,[3,14];case 9:if(a.trys.push([9,,12,13]),!(n&&null!=o.return))return[3,11];return[4,o.return()];case 10:a.sent(),a.label=11;case 11:return[3,13];case 12:if(r)throw i;return[7];case 13:return[7];case 14:return(0,k.default)(JSON.stringify({session:t,events:e},null,2)),[2]}})})()},[g,h]),j=(0,s.useCallback)(function(){if(f&&l){var e=(0,H.generateAiSessionTraceforgeUrl)(f);(0,k.default)(e)}},[f,l]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(O.View,{gap:8,py:8,children:[(0,o.jsx)(P.Select,{"aria-label":"Select a session",placeholder:"Select a session",selectedKey:f,onSelectionChange:function(e){"string"==typeof e&&p(e)},children:c.map(function(e){return(0,o.jsx)(ea,{session:e},e.id)})}),h?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ee,{session:h}),(0,o.jsx)(er,{session:h}),(0,o.jsx)(O.View,{children:(0,o.jsx)(R.Input,{placeholder:"Filter events by kind, tool, etc.",value:b,onChange:function(e){return S(e.target.value)}})}),(0,o.jsxs)(O.View,{row:!0,gap:8,children:[(0,o.jsx)(T.Button,{text:"Copy as JSON",onClick:C,iconLeft:(0,o.jsx)(_.default,{})}),(0,o.jsx)(T.Button,{text:"Copy traceforge link",onClick:j,iconLeft:(0,o.jsx)(z.default,{})})]})]}):null,(0,o.jsx)(O.View,{children:null==g?void 0:g.map(function(e){var t=(0,i._)(e,2),n=t[0],r=t[1];return(0,o.jsx)(eo,{event:r,eventKindFilter:b},n)})})]})})}function er(e){var t=(0,m.useObservable)(e.session.data);return(0,o.jsx)(j.AccordionItem,{headerContent:(0,o.jsx)(D.Text,{children:"Session data"}),children:(0,o.jsx)(h.default,{code:JSON.stringify(t,null,2),language:"json"})})}var ei=new Map([[x.SessionType.SESSION_TYPE_UNKNOWN,"unknown"],[x.SessionType.CHAT,"chat"],[x.SessionType.INLINE_CHAT,"inline chat"],[x.SessionType.SINGLE_USE_SESSION,"single use session"],[x.SessionType.REPL_CREATION,"repl creation"],[x.SessionType.AGENT_SESSION,"agent"],[x.SessionType.HOSTING_DEBUG_SUMMARY,"hosting debug"],[x.SessionType.REPL_CREATION_V2,"repl creation v2"],[x.SessionType.REPL_CREATION_V3,"repl creation v3"],[x.SessionType.AGENT_REPLAY_SESSION,"agent replay"],[x.SessionType.SAMPLING_SESSION,"sampling"],[x.SessionType.SUB_AGENT,"subagent"]]);function ea(e){var t=(0,m.useObservable)(e.session.data),n="";return(null==t?void 0:t.sessionType)&&(n+="[".concat(ei.get(t.sessionType),"] ")),n+=(null==t?void 0:t.title)||e.session.id,(0,o.jsx)(I.ListBoxItem,{id:e.session.id,label:n})}function eo(e){var t=(0,m.useObservable)(e.event);return t?!function(e,t){if(!t)return!0;var n=t.toLowerCase(),r=!1,i=null==e||null==(o=e.contents)||null==(a=o.contents)?void 0:a.$kind.toLowerCase();if(i&&(r=r||i.includes(n)),(0,G.isEventContentsKind)(e,"agentTimelineEventContents")){var a,o,s,l,u,c=(0,$.unkind)(e.contents.contents),d=null==(s=c.toolName)?void 0:s.toLowerCase(),f=null==(u=c.toolData)||null==(l=u.$kind)?void 0:l.toLowerCase();d&&(r=r||d.includes(n)),f&&(r=r||f.includes(n))}return r}(t,e.eventKindFilter)?null:(0,o.jsx)(O.View,{children:(0,o.jsx)(j.AccordionItem,{headerContent:(0,o.jsxs)(O.View,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,children:[(0,o.jsx)(el,{sender:t.sender.type}),(0,o.jsx)(es,{event:t}),(0,o.jsxs)(O.View,{row:!0,gap:8,align:"center",justify:"space-between",grow:!0,shrink:!0,children:[(0,o.jsx)(D.Text,{children:function(e){var t=null==(r=e.contents)||null==(n=r.contents)?void 0:n.$kind;if(!t)return"Unknown event";if("agentTimelineEventContents"===t){var n,r,i,a=(0,$.unkind)(e.contents.contents),o=a.toolName;return o?o:null==(i=a.toolData)?void 0:i.$kind}return t.replace("Contents","").replace("Event","")}(t)}),(0,o.jsxs)(O.View,{row:!0,gap:4,align:"center",shrink:!0,children:[(0,o.jsx)(O.View,{shrink:!0,children:(0,o.jsx)(D.Text,{variant:"small",color:"dimmer",multiline:!1,children:t.id})}),(0,o.jsx)(E.CopyIconButton,{size:24,textToCopy:t.id,tooltipSuccessText:"Copied to clipboard"})]})]})]}),children:(0,o.jsx)(h.default,{code:JSON.stringify(t,null,2),language:"json"})})}):(0,o.jsx)(O.View,{children:"No data found for event"})}function es(e){var t=e.event;if((0,G.isEventContentsKind)(t,"agentTimelineEventContents")){var n,r=null==(n=(0,$.unkind)(t.contents.contents).toolData)?void 0:n.$kind;return(0,o.jsx)(Y.ToolDataIcon,{color:et.tokens.foregroundDimmer,kind:r})}return null}function el(e){return(0,o.jsx)(X.Tooltip,{tooltip:e.sender===x.UserType.AI?"Sent by AI":"Sent by user",children:(0,o.jsx)(A.Pill,{variant:"filled",colorway:e.sender===x.UserType.AI?"blurple":"green",text:e.sender===x.UserType.AI?(0,o.jsx)(W.default,{color:et.tokens.blurpleStrongest}):(0,o.jsx)(q.default,{color:et.tokens.greenStrongest})})})}var eu=e.i(446530),ec=e.i(613355),ed=e.i(628796),ef={"Session Events":en,"Agent State":function(){var e=(0,g.useAgentState)().agentState,t=(0,m.useObservable)(e);return(0,o.jsx)(h.default,{code:JSON.stringify(t,null,2),language:"json"})},"Assistant Events":function(){return(0,o.jsx)(en,{sessionType:x.SessionType.CHAT})},"File Context":function(){var e=(0,u.useFileContextPreferences)(),t=(0,p.useGetRecentFiles)(),r=(0,(0,l.useAssistantChatMode)().getAssistantMessageModel)({isAuthorized:!0}),h=(0,d.default)(),m=h.fs,g=h.dotReplit,x=(0,f.useGetFileContext)(m,g),y=(0,i._)((0,s.useState)(null),2),b=y[0],w=y[1];return(0,s.useEffect)(function(){var i=!1;return(0,n._)(function(){var n;return(0,a._)(this,function(a){switch(a.label){case 0:return[4,x({modelType:r,filePreferences:e,recentFiles:t()})];case 1:if(n=a.sent(),i)return[2];return w(n),[2]}})})(),function(){i=!0}},[t,e,r,x]),(0,o.jsx)(c.default,{json:b})},"Feed Groups":function(){var e=(0,y.useChatter)(),t=(0,m.useObservable)(e.sessions.agent.current),r=(0,w.useObservableMemo)(function(){return e.sessions.query({types:[x.SessionType.AGENT_SESSION]}).list},[e],{default:[]}),l=(0,i._)((0,s.useState)(function(){var e,n,i;return null!=(i=null!=(n=null==t?void 0:t.id)?n:null==(e=r[0])?void 0:e.id)?i:null}),2),u=l[0],c=l[1],d=(0,i._)((0,s.useState)(""),2),f=d[0],p=d[1],h=(0,w.useObservableMemo)(function(){return u?e.sessions.get(u):null},[u,e]),g=(0,b.useGetRunGroupGranularity)(),j=(0,s.useMemo)(function(){return(0,C.getTasksViewTransformer)()},[]),E=(0,s.useMemo)(function(){return h?h.transform(j,200):null},[h,j]),I=(0,w.useObservableMemo)(function(){return E?E.map(S.mapToFeed2):null},[E],{default:null}),N=(0,s.useCallback)(function(){return(0,n._)(function(){var e,t,r,i,o,s,l,u,c,d,f,p,m,x,y,w,_,S,C,j,T,E,R;return(0,a._)(this,function(A){switch(A.label){case 0:if(!I||!h)return[2];e={result:[],lastUserMessageIndex:I.lastUserMessageIndex},t=!0,r=!1,i=void 0,A.label=1;case 1:A.trys.push([1,19,20,21]),o=I.result[Symbol.iterator](),A.label=2;case 2:if(t=(s=o.next()).done)return[3,18];if("runGroup"!==(l=s.value).type)return[3,10];if(d=null!=(c=(u=l).triggerEventId)?c:u.id,f=u.supportsViewGranularity?g(d):b.RunGranularity.Log,p={type:"runGroup",id:u.id,granularity:f,triggerEventId:u.triggerEventId,itemsCount:u.items.length,items:[]},!u.checkpoint)return[3,4];return[4,u.checkpoint.once()];case 3:m=A.sent(),p.checkpoint={id:m.id,type:m.type,title:m.title},A.label=4;case 4:if(!u.endOfRunSummary)return[3,6];return[4,u.endOfRunSummary.once()];case 5:x=A.sent(),p.endOfRunSummary={id:x.id,type:x.type},A.label=6;case 6:if(!u.latestTaskList)return[3,8];return[4,u.latestTaskList.once()];case 7:y=A.sent(),p.latestTaskList={id:y.id,type:y.type,tasksCount:y.tasks.length},A.label=8;case 8:return[4,Promise.all(u.items.map(function(e){return(0,n._)(function(){var t;return(0,a._)(this,function(n){switch(n.label){case 0:return[4,e.observable.once()];case 1:return t=n.sent(),[2,{id:e.id,type:t.type}]}})})()}))];case 9:return p.items=A.sent(),e.result.push(p),[3,17];case 10:if("preRunGroup"!==l.type)return[3,15];if(_={type:"preRunGroup",id:(w=l).id,triggerEventId:w.triggerEventId},!w.checkpoint)return[3,12];return[4,w.checkpoint.once()];case 11:S=A.sent(),_.checkpoint={id:S.id,type:S.type,title:S.title},A.label=12;case 12:if(!w.endOfRunSummary)return[3,14];return[4,w.endOfRunSummary.once()];case 13:C=A.sent(),_.endOfRunSummary={id:C.id,type:C.type},A.label=14;case 14:return e.result.push(_),[3,17];case 15:if("event"!==l.type)return[3,17];return[4,(j=l).observable.once()];case 16:T=A.sent(),E={type:"event",id:j.id,eventType:T.type},e.result.push(E),A.label=17;case 17:return t=!0,[3,2];case 18:return[3,21];case 19:return R=A.sent(),r=!0,i=R,[3,21];case 20:try{t||null==o.return||o.return()}finally{if(r)throw i}return[7];case 21:return(0,k.default)(JSON.stringify(e,null,2)),[2]}})})()},[I,h,g]),F=(0,s.useMemo)(function(){if(!I||!f){var e;return null!=(e=null==I?void 0:I.result)?e:[]}var t=f.toLowerCase();return I.result.filter(function(e){if("runGroup"===e.type){var n,r,i=null!=(r=e.triggerEventId)?r:e.id,a=e.supportsViewGranularity?g(i):b.RunGranularity.Log;return e.id.toLowerCase().includes(t)||(null==(n=e.triggerEventId)?void 0:n.toLowerCase().includes(t))||a.includes(t)}return"preRunGroup"===e.type?e.id.toLowerCase().includes(t)||e.triggerEventId.toLowerCase().includes(t):e.id.toLowerCase().includes(t)})},[I,f,g]),U=(0,s.useMemo)(function(){if(!I)return null;var e=0,t=0,n=0,r=!0,i=!1,a=void 0;try{for(var o,s=I.result[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;"runGroup"===l.type?e++:"preRunGroup"===l.type?t++:n++}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return{total:I.result.length,runGroupCount:e,introGroupCount:t,eventCount:n,lastUserMessageIndex:I.lastUserMessageIndex}},[I]);return(0,o.jsxs)(O.View,{gap:8,py:8,children:[(0,o.jsx)(P.Select,{"aria-label":"Select a session",placeholder:"Select a session",selectedKey:u,onSelectionChange:function(e){"string"==typeof e&&c(e)},children:r.map(function(e){return(0,o.jsx)(M,{session:e},e.id)})}),h?(0,o.jsxs)(o.Fragment,{children:[U?(0,o.jsxs)(O.View,{row:!0,gap:8,align:"center",children:[(0,o.jsx)(A.Pill,{variant:"filled",text:"Total: ".concat(U.total)}),(0,o.jsx)(A.Pill,{variant:"filled",colorway:"blurple",text:"Run groups: ".concat(U.runGroupCount)}),(0,o.jsx)(A.Pill,{variant:"filled",colorway:"green",text:"Intro groups: ".concat(U.introGroupCount)}),(0,o.jsx)(A.Pill,{variant:"filled",colorway:"orange",text:"Events: ".concat(U.eventCount)}),(0,o.jsxs)(D.Text,{variant:"small",color:"dimmer",children:["Last user message index: ",U.lastUserMessageIndex]})]}):null,(0,o.jsxs)(O.View,{row:!0,gap:8,children:[(0,o.jsx)(O.View,{grow:!0,children:(0,o.jsx)(R.Input,{placeholder:"Filter by ID, event type, granularity...",value:f,onChange:function(e){return p(e.target.value)}})}),(0,o.jsx)(T.Button,{text:"Copy as JSON",onClick:N,iconLeft:(0,o.jsx)(_.default,{})})]}),(0,o.jsx)(O.View,{gap:8,children:F.map(function(e,t){if("runGroup"===e.type){var n,r=null!=(n=e.triggerEventId)?n:e.id,i=e.supportsViewGranularity?g(r):b.RunGranularity.Log;return(0,o.jsx)(B,{runGroup:e,granularity:i,index:t},e.id)}return"preRunGroup"===e.type?(0,o.jsx)(L,{group:e,index:t},e.id):"event"===e.type?(0,o.jsx)(V,{eventItem:e,index:t},e.id):null})})]}):(0,o.jsx)(D.Text,{color:"dimmer",children:"No session selected"})]})}},ep=(0,eu.cssRecord)({wrapper:[(t={},(0,r._)(t,"& > div",[ec.rcss.flex.growAndShrink(1),ec.rcss.overflowY("auto"),ec.rcss.colWithGap(4)]),(0,r._)(t,"& > div > div:first-of-type",[ec.rcss.flex.shrink(1),ec.rcss.overflowY("auto")]),(0,r._)(t,"& > div > div:last-of-type",[ec.rcss.flex.growAndShrink(1),ec.rcss.overflowY("auto")]),t)]});function eh(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isHidden;return e?null:(0,o.jsx)(O.View,{css:ep.wrapper,grow:!0,shrink:!0,children:(0,o.jsxs)(ed.Tabs,{children:[(0,o.jsx)(ed.TabList,{"aria-label":"Tabs",children:Object.keys(ef).map(function(e){return(0,o.jsx)(ed.Tab,{id:e,children:e},e)})}),(0,o.jsx)(ed.TabPanels,{children:Object.entries(ef).map(function(e){var t=(0,i._)(e,2),n=t[0],r=t[1];return(0,o.jsx)(ed.TabPanel,{id:n,children:(0,o.jsx)(r,{})},n)})})]})})}e.s(["AiChatDebug",()=>eh],670161);var em=e.i(102225),eg=e.i(112767);function ev(){var e=(0,em.useIsCommandBarMatchScoreVisible)(),t=(0,em.useToggleIsCommandBarMatchScoreVisible)();return(0,o.jsx)(O.View,{py:8,px:12,gap:12,children:(0,o.jsx)(eg.Switch,{isSelected:e,onChange:t,children:"Show match scores in Command Bar"})})}e.s(["CommandBarDebug",()=>ev],724001);var ex=e.i(161322),ey=e.i(289074),eb=e.i(435762);function ew(e){var t=(0,i._)((0,ex.useAtom)(ey.connectionStateAtom),1)[0],n=(0,i._)((0,ex.useAtom)(ey.connectionKillActionsAtom),1)[0];return(0,o.jsxs)(O.View,{gap:16,p:8,children:[(0,o.jsxs)(O.View,{gap:8,children:[(0,o.jsx)(D.Text,{variant:"subheadDefault",children:"WebSocket connection debug"}),(0,o.jsx)(D.Text,{color:"dimmer",variant:"small",children:"Open DevTools  Network tab  WS filter to inspect WebSocket lifecycle"})]}),(0,o.jsx)(O.View,{gap:12,children:["pid2","ai-chat","chort","pid1"].map(function(e){return(0,o.jsxs)(O.View,{row:!0,gap:12,align:"center",justify:"space-between",p:12,clsx:eb.default.serviceRow,children:[(0,o.jsxs)(O.View,{row:!0,gap:12,align:"center",children:[(0,o.jsx)(D.Text,{children:e}),(0,o.jsxs)(O.View,{row:!0,gap:8,align:"center",children:[(0,o.jsx)(O.View,{clsx:[eb.default.statusIndicator,"ok"===t[e]?eb.default.ok:eb.default.fatal]}),(0,o.jsx)(D.Text,{variant:"small",color:"dimmer",children:t[e]})]})]}),n[e]?(0,o.jsx)(T.Button,{text:n[e].label,colorway:"negative",onClick:n[e].action,size:"small"}):(0,o.jsx)(D.Text,{variant:"small",color:"dimmest",children:"No kill action registered"})]},e)})}),(0,o.jsxs)(O.View,{gap:8,clsx:eb.default.infoBox,children:[(0,o.jsx)(D.Text,{variant:"subheadDefault",children:"Debug instructions"}),(0,o.jsxs)(O.View,{gap:4,children:[(0,o.jsx)(D.Text,{variant:"small",color:"dimmer",children:"1. Open Chrome DevTools (F12 or Cmd+Option+I)"}),(0,o.jsx)(D.Text,{variant:"small",color:"dimmer",children:"2. Navigate to Network tab"}),(0,o.jsx)(D.Text,{variant:"small",color:"dimmer",children:'3. Click "WS" filter to show only WebSocket connections'}),(0,o.jsx)(D.Text,{variant:"small",color:"dimmer",children:"4. Use kill buttons above to test different disconnection scenarios"})]})]})]})}e.s(["ConnectionsDebug",()=>ew],851218)},186625,527811,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsxs)(i.default,(0,n._)((0,t._)({},e),{children:[(0,r.jsx)("path",{d:"M12 13.25c1.457 0 2.609.583 3.379 1.144a6.696 6.696 0 0 1 1.126 1.038l.065.08.02.025.006.008.004.004.043.064a.75.75 0 0 1-1.194.896l-.049-.058-.005-.008a3.798 3.798 0 0 0-.209-.237 5.205 5.205 0 0 0-.69-.6c-.605-.44-1.453-.856-2.496-.856s-1.892.417-2.496.856a5.21 5.21 0 0 0-.69.6 3.803 3.803 0 0 0-.209.237l-.006.008A.75.75 0 0 1 7.4 15.55l.004-.005.006-.008.02-.025.065-.08a6.69 6.69 0 0 1 1.126-1.038c.77-.56 1.922-1.144 3.379-1.144ZM9.01 8.25a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h.01ZM15.01 8.25a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1 0-1.5h.01Z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M12 1.25c5.937 0 10.75 4.813 10.75 10.75S17.937 22.75 12 22.75 1.25 17.937 1.25 12 6.063 1.25 12 1.25Zm0 1.5a9.25 9.25 0 1 0 0 18.5 9.25 9.25 0 0 0 0-18.5Z",clipRule:"evenodd"})]}))}function o(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{d:"M20 18.25a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1 0-1.5h16ZM20 11.25a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1 0-1.5h16ZM20 4.25a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1 0-1.5h16Z"})}))}e.s(["default",()=>a],186625),e.s(["default",()=>o],527811)},577811,e=>{"use strict";var t,n,r=((t={}).NOT_READY="NOT_READY",t.READY="READY",t.STALLED="STALLED",t.BROKEN="BROKEN",t),i=((n={}).OFFLINE="OFFLINE",n.INITIALIZING="INITIALIZING",n.INITIALIZED="INITIALIZED",n.EXITING="EXITING",n.EXITED="EXITED",n);e.s(["ServerHealth",()=>r,"ServerState",()=>i])},306911,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(88125),i=e.i(522682),a=e.i(664152),o=e.i(577811);function s(e){return Math.floor(performance.now()-e.startTime)}var l=new WeakSet;function u(e){var u=e.client,c=e.replId,d=e.language,f=e.debug;if(!l.has(u)){l.add(u);var p=new Map,h=function(e){var t,n=u.getServerState(),r=null!=(t=u.getServerInfo())?t:{name:"unknown",version:"none"},i=n===o.ServerState.INITIALIZED?"".concat(null==r?void 0:r.name,"@").concat(null==r?void 0:r.version):"not_ready: server is ".concat(n);return{method:e.method,replid:c,language:d,startTime:Math.floor(e.startTime),languageServerInfo:i,lspId:u.clientId}},m=(0,r.default)(function(e,t){var n=s(t);n>1e4&&a.logger.time("LSP unresponsive request",n,h(t))}),g=setInterval(function(){p.forEach(function(e){m(e.id,e)})},2e3);return(0,i.combineDisposables)([u.onRequest(function(e){var t=e.id,n=e.data;(f||.01>Math.random())&&p.set(t,{id:t,method:n.method,startTime:performance.now()})}),u.onResponse(function(e){var r=e.id,i=e.error,o=p.get(r);null!=o&&(p.delete(r),a.logger.time("LSP request",s(o),(0,n._)((0,t._)({},h(o)),{result:null==i?"ok":"error"})))}),u.onCancelRequest(function(e){var r=p.get(e);null!=r&&(p.delete(e),a.logger.time("LSP request",s(r),(0,n._)((0,t._)({},h(r)),{result:"cancelled"})))}),function(){return clearInterval(g)},function(){return l.delete(u)}])}}e.s(["trackPerformance",()=>u])},485237,e=>{"use strict";var t=e.i(530658),n=e.i(389959),r=e.i(522682),i=e.i(207237),a=e.i(306911),o=e.i(529810),s=e.i(725182);function l(e){var l=(0,i.default)(),u=(0,o.default)().lspnix,c=(0,t._)((0,n.useState)([]),2),d=c[0],f=c[1],p=(0,s.useShowAdmin)();return(0,n.useEffect)(function(){if(e){var t=u.onClient(e,f);return function(){t(),f([])}}},[u,e]),(0,n.useEffect)(function(){return(0,r.combineDisposables)(d.map(function(t){return(0,a.trackPerformance)({client:t,replId:l,language:t.getLanguageId(e),debug:p})}))},[d,l,e,p]),d}e.s(["default",()=>l])},791247,592063,904002,e=>{"use strict";var t,n=e.i(904851),r=e.i(90659),i=e.i(721281),a=e.i(878420),o=e.i(64386),s=e.i(530658),l=e.i(276385),u=e.i(389959),c=e.i(183035),d=e.i(186625),f=e.i(269848),p=e.i(826771),h=e.i(761732),m=e.i(346715),g=e.i(243073),x=e.i(612054),y=e.i(602686),b=e.i(659042),w=e.i(712771),_=e.i(495891),k=e.i(527811),S=e.i(416746),C=e.i(522682),j=e.i(485237);function T(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,s._)((0,u.useState)(e),2),n=t[0],r=t[1];return[n,(0,u.useCallback)(function(){return r(function(e){return!e})},[])]}e.s(["default",()=>T],592063);var E=e.i(491194),R=e.i(967629),I=e.i(613355),A=e.i(751273),P=(0,R.css)([I.rcss.focusRing,I.rcss.display.flex,I.rcss.center,I.rcss.borderRadius(4),I.rcss.backgroundColor.backgroundRoot,I.rcss.color.foregroundDefault,I.rcss.cursor.pointer,I.rcss.p(4),(t={transition:"background-color 0.2s",border:"none"},(0,i._)(t,I.selectors.hover,[I.rcss.backgroundColor.backgroundHigher]),(0,i._)(t,":focus",{outline:"none"}),t)]),D=function(e){var t=e.onClick;return(0,l.jsx)(A.Tooltip,{tooltip:"Clear",placement:"bottom-start",children:(0,l.jsx)("button",{"aria-label":"Clear",onClick:t,css:P,children:(0,l.jsx)(E.default,{size:16})})})};e.i(545082);var O=e.i(91442),N=e.i(480028),M=e.i(428596),L=e.i(721321),B=e.i(127227),V=e.i(136540),F=e.i(607278),U=e.i(112767),G=e.i(960178),$=e.i(625484),H=function(e){var t,n,r,c,d,f,p=e.isHidden,h=(n=(t=(0,s._)((0,u.useState)(null),2))[0],r=t[1],c=(0,O.useCursorFilepath)(),(0,u.useEffect)(function(){c===n||null!=c&&r(c)},[c,n]),n),g=(0,j.default)(h||""),x=(0,s._)((0,u.useState)(null==(d=g[0])?void 0:d.clientId),2),y=x[0],b=x[1];y&&!g.find(function(e){return y===e.clientId})&&b(null==(f=g[0])?void 0:f.clientId),!y&&g.length&&b(g[0].clientId);var k=(0,M.useIdSeed)(),S=(0,s._)(T(!0),2),E=S[0],R=S[1],A=(0,s._)((0,u.useState)(""),2),P=A[0],N=A[1],H=(0,s._)((0,u.useState)(function(){return{}}),2),W=H[0],K=H[1],Y=(0,s._)(T(!0),2),Q=Y[0],X=Y[1],Z=(0,s._)(T(!0),2),J=Z[0],ee=Z[1],et=(0,u.useCallback)(function(e,t){K(function(n){var r;return(0,o._)((0,a._)({},n),(0,i._)({},e,[t].concat((0,m._)(null!=(r=n[e])?r:[])).slice(0,100)))})},[]),en=(0,u.useCallback)(function(e,t,n){K(function(r){if(r[e]){for(var i=0;i<r[e].length;i++)if(r[e][i].id===t){r[e][i]=n(r[e][i]);break}r[e]=r[e].slice(0,100)}return(0,a._)({},r)})},[]),er=(0,u.useCallback)(function(){y&&K(function(e){return(0,o._)((0,a._)({},e),(0,i._)({},y,[]))})},[y]),ei=(0,u.useMemo)(function(){return g.find(function(e){return e.clientId===y})},[g,y]),ea=null==ei?void 0:ei.isOpen(h||""),eo=(0,u.useCallback)(function(){var e=null==ei?void 0:ei.clientId;e&&et(e,{canceled:!1,notification:{method:"probe",params:{filePath:h,state:null==ei?void 0:ei.getServerState(),capabilities:null==ei?void 0:ei.getServerCapabilities(),diagnostics:ea?null==ei?void 0:ei.getDiagnostics(h||""):[],isOpen:ea,isSupportedFile:null==ei?void 0:ei.isSupportedFile(h||"")}},requestTime:new Date,type:"probe"})},[et,h,ei,ea]),es=(0,u.useMemo)(function(){if(!y)return[];var e,t,n=P.split(",").map(function(e){return e.trim()}).filter(Boolean);if(!n.length)return null!=(e=W[y])?e:[];var r=null!=(t=W[y])?t:[];return Q||(r=r.filter(function(e){return null==e.notification})),J||(r=r.filter(function(e){return null==e.request})),P&&(r=r.filter(function(e){return n.some(function(t){var n;return null==(n=e.request||e.notification)?void 0:n.method.toLowerCase().includes(t.toLowerCase())})})),r},[P,W,y,Q,J]);return((0,u.useEffect)(function(){return(0,C.combineDisposables)(g.flatMap(function(e){return[e.onRequest(function(t){E&&et(e.clientId,{id:t.id,canceled:!1,request:t.data,requestTime:new Date})}),e.onResponse(function(t){E&&en(e.clientId,t.id,function(e){return(0,a._)((0,o._)((0,a._)({},e),{responseTime:new Date}),void 0!==t.result?{response:t.result}:{error:t.error})})}),e.onCancelRequest(function(t){E&&en(e.clientId,t,function(e){return(0,o._)((0,a._)({},e),{canceled:!0})})}),e.onDiagnostics(function(t){var n=t.path,r=t.diagnostics;E&&et(e.clientId,{canceled:!1,notification:{method:"textDocument/publishDiagnostics for "+n,params:r},requestTime:new Date,type:"diagnostics"})}),e.onServerStateChange(function(t){E&&et(e.clientId,{canceled:!1,notification:{method:"state",params:{serverState:t}},requestTime:new Date,type:"state"})}),e.onServerCapabilitiesChange(function(t){E&&et(e.clientId,{canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:t}},requestTime:new Date,type:"capabilities"})}),e.onSendNotification(function(t){E&&et(e.clientId,{canceled:!1,notification:t,requestTime:new Date})}),e.onReceiveNotification(function(t){E&&et(e.clientId,{canceled:!1,notification:t,requestTime:new Date})})]}))},[et,en,E,g]),p)?null:(0,l.jsxs)($.View,{css:[I.rcss.flex.column],children:[(0,l.jsxs)($.View,{css:[I.rcss.m(4),I.rcss.position.sticky,I.rcss.top(0),I.rcss.backgroundColor.backgroundDefault,I.rcss.zIndex(1)],row:!0,align:"center",children:[(0,l.jsx)(G.Text,{multiline:!1,children:y?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(q,{})," logs for ",(0,l.jsx)("code",{children:h})]}):"No LSP client available"}),(0,l.jsx)(V.IconButton,{alt:"Probe LSP",onClick:eo,children:(0,l.jsx)(w.default,{})}),(0,l.jsx)($.View,{grow:!0}),(0,l.jsx)(U.Switch,{"aria-label":"Enable LSP Logs",isSelected:E,onChange:R})]}),(0,l.jsx)($.View,{children:(0,l.jsx)(L.ButtonGroup,{name:"Visible LSP Client",value:y,onChange:b,row:!0,children:g.map(function(e){return(0,l.jsx)(L.ButtonGroupItem,{id:e.clientId,text:e.clientName,value:e.clientId},e.clientId)})})}),(0,l.jsxs)($.View,{row:!0,gap:8,css:[I.rcss.m(4),I.rcss.mb(8)],children:[(0,l.jsxs)($.View,{row:!0,gap:4,children:[(0,l.jsx)(_.default,{}),(0,l.jsx)(G.Text,{multiline:!1,children:"Show"})]}),(0,l.jsxs)($.View,{row:!0,gap:4,children:[(0,l.jsx)(B.Checkbox,{name:"showNotifications",id:k("showNotifications"),checked:Q,onChange:X}),(0,l.jsx)("label",{htmlFor:k("showNotifications"),children:" Notifications"})]}),(0,l.jsxs)($.View,{row:!0,gap:4,children:[(0,l.jsx)(B.Checkbox,{name:"showRequests",id:k("showRequests"),checked:J,onChange:ee}),(0,l.jsx)("label",{htmlFor:k("showRequests"),children:" Requests"})]}),(0,l.jsx)($.View,{grow:!0,shrink:!0}),(0,l.jsx)($.View,{row:!0,gap:4,children:(0,l.jsx)(D,{onClick:er})})]}),(0,l.jsx)($.View,{row:!0,gap:4,children:(0,l.jsx)(F.Input,{id:k("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return N(e.target.value)},value:P})}),(0,l.jsxs)($.View,{css:[I.rcss.flex.column,I.rcss.overflow("auto")],grow:!0,children:[es.map(function(e,t){var n;return(0,l.jsx)(z,{log:e},null!=(n=e.id)?n:e.requestTime.valueOf()+""+t)}),!es.length&&(0,l.jsx)($.View,{css:I.rcss.m(4),children:" No logs yet..."})]})]})},z=(0,u.memo)(function(e){var t,n,r,i,a,o,u=e.log,d=u.requestTime,p=u.responseTime,h=u.request,m=u.response,g=u.notification,_=u.id,C=(0,s._)(T(!0),2),j=C[0],E=C[1];return(0,l.jsxs)($.View,{css:[I.rcss.my(4),I.rcss.mx(4)],children:[(0,l.jsxs)($.View,{role:"button",onClick:E,onKeyDown:E,tabIndex:0,css:[{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],row:!0,gap:4,children:[(0,l.jsxs)($.View,{grow:!0,row:!0,gap:2,children:[(0,l.jsx)(G.Text,{className:"lspLog-emoji",multiline:!1,children:(n=(t=u).type,r=t.canceled,i=t.response,a=t.notification,"state"===n?(0,l.jsx)(b.default,{}):"diagnostics"===n?(0,l.jsx)(x.default,{}):"capabilities"===n?(0,l.jsx)(k.default,{}):"probe"===n?(0,l.jsx)(w.default,{}):r?(0,l.jsx)(y.default,{}):a?(0,l.jsx)(S.default,{}):void 0!==i?(0,l.jsx)(c.default,{}):(0,l.jsx)(f.default,{}))}),(0,l.jsxs)(G.Text,{className:"lspLog-requestMethod",multiline:!1,children:[(0,l.jsx)("code",{children:null==(o=h||g)?void 0:o.method}),null!=_&&(0,l.jsxs)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",_]})]})]}),(0,l.jsx)($.View,{css:{opacity:.5},children:null!=p&&(0,l.jsxs)(G.Text,{css:I.rcss.fontSize(13),multiline:!1,children:[p.valueOf()-d.valueOf(),"ms"]})})]}),!j&&(0,l.jsxs)(l.Fragment,{children:[void 0!==h&&(0,l.jsx)(W,{name:"request.params",src:h.params}),void 0!==g&&(0,l.jsx)(W,{name:"notification.params",src:g.params}),void 0!==m&&(0,l.jsx)(W,{name:"response",src:m})]})]})}),W=(0,u.memo)(function(e){var t=e.name,n=e.src;return(0,l.jsx)($.View,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,l.jsx)(g.default,{json:(0,i._)({},t,n)})})}),q=function(){return(0,l.jsx)(G.Text,{multiline:!1,css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(N.tokens.redDimmer," 2px 2px")},children:"LSP"})};e.s(["JsonView",()=>W,"LSPLog",()=>H],904002);var K=new(function(){function e(){var t=this;(0,n._)(this,e),(0,i._)(this,"counter",0),(0,i._)(this,"enabled",!1),(0,i._)(this,"maxEntries",10),(0,i._)(this,"logs",(0,p.observableValue)([])),(0,i._)(this,"clear",function(){t.logs.current=[]})}return(0,r._)(e,[{key:"toggle",value:function(e){this.enabled=e}},{key:"add",value:function(e){var t=this,n=this.counter++;if(!this.enabled)return{id:n};var r={id:n,request:e,requestTime:Date.now()};return this.logs.update(function(e){return[r].concat(e).slice(0,t.maxEntries)}),{id:n}}},{key:"update",value:function(e,t){this.enabled&&this.logs.update(function(n){var r=n.findIndex(function(t){return t.id===e.id});if(-1===r)return n;var i=n.slice();return i[r]=t(i[r]),i})}},{key:"complete",value:function(e,t){this.update(e,function(e){return(0,o._)((0,a._)({},e),{response:t,responseTime:Date.now()})})}},{key:"abort",value:function(e){this.logs.update(function(t){return t.filter(function(t){return t.id!==e.id||null!=t.responseTime})})}}]),e}()),Y=function(e){var t=e.isHidden,n=(0,h.default)(K.logs);return t?null:(0,l.jsxs)($.View,{css:[I.rcss.flex.column],children:[(0,l.jsxs)($.View,{css:[I.rcss.m(4),I.rcss.position.sticky,I.rcss.top(0),I.rcss.backgroundColor.backgroundDefault,I.rcss.zIndex(1)],row:!0,align:"center",children:[(0,l.jsx)(G.Text,{css:I.rcss.flex.grow(1),multiline:!1,children:"Requests"}),(0,l.jsx)(D,{onClick:K.clear})]}),(0,l.jsxs)($.View,{css:[I.rcss.flex.column,I.rcss.overflow("auto")],grow:!0,children:[n.map(function(e){var t;return(0,l.jsx)(Q,{log:e},null!=(t=e.id)?t:e.requestTime.valueOf())}),!n.length&&(0,l.jsx)($.View,{css:I.rcss.m(4),children:" No logs yet..."})]})]})},Q=(0,u.memo)(function(e){var t,n=e.log,r=n.requestTime,i=n.responseTime,a=n.request,o=n.response,u=(0,s._)(T(!0),2),p=u[0],h=u[1],m=a.prefix.length>20?"...".concat(a.prefix.slice(-20)):a.prefix;return(0,l.jsxs)($.View,{css:[I.rcss.my(4),I.rcss.mx(4)],children:[(0,l.jsxs)($.View,{role:"button",onClick:h,onKeyDown:h,tabIndex:0,css:[{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],row:!0,gap:4,children:[(0,l.jsxs)($.View,{grow:!0,row:!0,gap:2,children:[(0,l.jsx)(G.Text,{multiline:!1,children:(t=n.response)?"CompleteCodeResult"===t.__typename?(0,l.jsx)(c.default,{}):(0,l.jsx)(d.default,{}):(0,l.jsx)(f.default,{})}),(0,l.jsx)(G.Text,{multiline:!1,children:(0,l.jsx)("code",{children:m})})]}),(0,l.jsx)($.View,{css:{opacity:.5},children:null!=i&&(0,l.jsxs)(G.Text,{css:I.rcss.fontSize(13),multiline:!1,children:[i.valueOf()-r.valueOf(),"ms"]})})]}),!p&&(0,l.jsxs)(l.Fragment,{children:[void 0!==a&&(0,l.jsx)(W,{name:"request",src:a}),void 0!==o&&("CompleteCodeResult"===o.__typename?(0,l.jsxs)("details",{children:[(0,l.jsx)("summary",{children:"Response"}),(0,l.jsx)("pre",{css:[I.rcss.overflow("scroll"),I.rcss.borderRadius(4),I.rcss.p(4),{border:"1px solid ".concat(N.tokens.outlineDimmest)}],children:o.code})]}):(0,l.jsx)(W,{name:"response",src:o}))]})]})});e.s(["GhostwriterLogs",()=>Y,"ghostwriterLogs",()=>K],791247)},620228,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245),i=e.i(304277);function a(){var e=(0,n._)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfoV2 {\n        accessToken\n        accessibleAccounts {\n          id\n          type\n          avatarUrl\n          name\n        }\n        organizations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          username\n          email\n          avatarUrl\n        }\n      }\n      bitbucketInfo {\n        accessToken\n        workspacesToProjects {\n          uuid\n          name\n          slug\n          projects {\n            uuid\n            name\n          }\n        }\n      }\n      gitLabInfo {\n        accessToken\n        groups {\n          namespaceId\n          name\n          visibility\n          description\n        }\n        userInfo {\n          name\n          username\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return a=function(){return e},e}e.i(566901);var o={},s=(0,r.gql)(a());function l(e){var n=(0,t._)({},o,e);return i.useQuery(s,n)}e.s(["useAdminPanelGitViewQuery",()=>l])},322606,e=>{"use strict";var t=(0,e.i(826771).observableValue)(null);function n(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now();Array.isArray(e)||(e=[e]);var o=null!=(i=n.output)?i:"",s=n.error,l=r?a:Date.now(),u="".concat(a,"-").concat(Math.random());t.set({input:e,output:o,error:s,start:a,end:l,cached:r,key:u})}e.s(["emitGitDebugEvent",()=>n,"gitServiceDebugObservable",()=>t])},258092,e=>{"use strict";var t=e.i(297083),n=e.i(878420),r=e.i(64386),i=e.i(530658),a=e.i(346715),o=e.i(817556),s=e.i(276385),l=e.i(389959),u=e.i(620228),c=e.i(409146),d=e.i(761732),f=e.i(927158),p=e.i(322606),h=e.i(907371),m=e.i(173703),g=e.i(613355),x=e.i(140487),y=e.i(625484),b=e.i(448600);function w(){var e,n=(0,i._)((0,l.useState)([]),2),r=n[0],c=n[1],h=(0,u.useAdminPanelGitViewQuery)().data,w=(0,d.default)(p.gitServiceDebugObservable),k=(0,l.useRef)(null),S=(0,i._)((0,l.useState)(!1),2),C=S[0],j=S[1],T=(0,i._)((0,l.useState)("unknown"),2),E=T[0],R=T[1],I=(0,i._)((0,l.useState)(null),2),A=I[0],P=I[1],D=(0,f.usePid2Callback)(function(e){return function(n){return(0,t._)(function(){var t;return(0,o._)(this,function(r){switch(r.label){case 0:return R("restoring"),[4,e.git.restore.rpc({before:n})];case 1:return P((t=r.sent()).payload),t.ok?R("ok"):R("failed"),[2]}})})()}});return e="ok"===E?"green":"failed"===E?"red":"grey",(0,l.useEffect)(function(){w&&c(function(e){return e.length&&e[0].key===w.key?e:[w].concat((0,a._)(e)).slice(0,100)})},[w]),(0,s.jsxs)(y.View,{p:8,children:[(0,s.jsxs)(m.ShadesSurface,{css:[g.rcss.borderRadius(8),g.rcss.p(8),g.rcss.mb(8)],children:[(0,s.jsx)("span",{children:"Git Service Connection Info"}),(0,s.jsx)("pre",{children:(null==h?void 0:h.currentUser)?JSON.stringify(h,function(e,t){return"accessToken"===e?"censored":t},2):"No gitHubInfo"})]}),(0,s.jsx)(b.default,{ref:k,label:"last known good timestamp",onChange:function(e){return j(""!==e.currentTarget.value.trim())}}),(0,s.jsx)(x.Button,{text:"Restore git from timestamp",colorway:e,disabled:!C||!D,onClick:function(){return(0,t._)(function(){var e,t;return(0,o._)(this,function(n){return t=(null==(e=k.current)?void 0:e.value)||"",null==D||D(t),[2]})})()}}),A?(0,s.jsx)("code",{children:JSON.stringify(A,null,2)}):null,(0,s.jsx)(y.View,{gap:4,children:r.length?r.map(function(e){return(0,s.jsx)(_,{event:e},e.key)}):"No events yet..."})]})}function _(e){var t=e.event,a=t.input,o=t.output,u=t.error,d=t.start,f=t.end,p=t.cached,x=(0,i._)((0,l.useState)(!0),2),b=x[0],w=x[1],_=(0,l.useCallback)(function(){return w(function(e){return!e})},[]),k="bash"===a[0]&&"-c"===a[1]?a.slice(2).join(" "):a.join(" "),S=o.trimEnd(),C=(0,h.useCreateInteractive)({colorway:u?"negative":"positive"});return(0,s.jsxs)(y.View,{clsx:C.clsx,style:(0,n._)((0,r._)((0,n._)({},p?{opacity:.75}:{}),{borderRadius:8}),C.style),children:[(0,s.jsxs)(y.View,{onClick:_,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&_()},tabIndex:0,css:[g.rcss.font.code,g.rcss.cursor.pointer],py:4,px:8,row:!0,gap:4,justify:"space-between",children:[(0,s.jsxs)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",k]}),(0,s.jsxs)("span",{css:[g.rcss.color.foregroundDimmer,g.rcss.flex.shrink(0)],children:[u?(0,s.jsx)("span",{css:[g.rcss.mr(16)],children:u}):null,p?(0,s.jsx)("span",{children:"CACHED"}):(0,s.jsxs)("span",{children:[f-d," ms"]})]})]}),b?null:(0,s.jsx)(y.View,{css:[g.rcss.borderRadius(0,0,8,8)],px:2,pb:2,children:(0,s.jsx)(m.ShadesSurface,{css:[g.rcss.borderRadius(8)],p:8,children:(0,s.jsx)(c.default,{code:S})})})]})}e.s(["default",()=>w])},181227,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(389959),i=e.i(541793),a=e.i(161322),o=e.i(826771),s=e.i(125674),l=(0,o.observableValue)(function(){return null}),u=(0,o.observableValue)(function(){return null});function c(e){var t=u.current();(0,r.useEffect)(function(){e!==t&&u.set(function(){return e})},[e,t])}var d=(0,i.atom)(null),f=(0,i.atom)(null,function(e,r,i){var a,o,s=e(d),u=s?(0,t._)({},s,i):(0,t._)({},i),c=null==u?void 0:u.changes,f=null==u?void 0:u.filePath;if(!f||!c)throw Error('"filePath", "changes", "users" required when initializing history state');var p=(o=(a=(0,n._)((0,t._)({},u),{changes:c,filePath:f})).changes.length,(0,t._)({users:{},count:o,version:Math.max(0,o-1),playing:!1,comparing:!1},a));l.set(function(){return p});var h=p.changes.length;0===h||((null==s?void 0:s.changes)&&p.changes!==s.changes&&(p.count=h,p.version=Math.min(p.version,h-1),p.playing=!1,p.comparing=!1),p.version===h-1&&(p.playing=!1)),r(d,p)});function p(){return(0,a.useAtomValue)(d,{store:x()})}function h(){return(0,a.useSetAtom)(f,{store:x()})}function m(){return(0,a.useSetAtom)((0,s.default)(function(){return(0,i.atom)(null,function(e,t){t(d,null)})},[]),{store:x()})}var g=(0,r.createContext)(null);function x(){var e=(0,r.useContext)(g);if(!e)throw Error("Expected store in context");return e}e.s(["HistoryPaneContext",()=>g,"historyStateDebug",()=>l,"historyStateDebugView",()=>u,"useClearHistoryState",()=>m,"useHistoryState",()=>p,"useSetHistoryDebugView",()=>c,"useSetHistoryState",()=>h])},789036,696800,302861,407967,924004,198690,63379,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(798680),i=e.i(761732),a=e.i(592063),o=e.i(181227),s=e.i(613355),l=e.i(746382),u=e.i(112767),c=e.i(960178),d=e.i(257811),f=e.i(625484);function p(){var e=(0,i.default)(o.historyStateDebug)(),c=(0,i.default)(o.historyStateDebugView)(),p=(0,t._)((0,a.default)(!1),2),m=p[0],g=p[1];if(!e)return null;var x=e.filePath,y=e.changes,b=e.users,w=e.version,_=e.playing,k=e.count,S=y[w];if(!S)return(0,n.jsxs)(f.View,{children:[(0,n.jsxs)("div",{children:["Change at ",w," not found. Here's the state"]}),(0,n.jsx)("pre",{children:JSON.stringify(e,null,2)})]});var C=null==b?void 0:b[S.userId],j=S.timestamp,T=m&&c?function(e,t){try{return(0,r.changeSetToOp)(e,t).op}catch(e){return e}}(S.changes,c.state.doc.sliceString(0)):null;return(0,n.jsxs)(f.View,{gap:16,p:4,children:[(0,n.jsxs)(f.View,{gap:4,children:[(0,n.jsx)(h,{t:"File",children:(0,n.jsx)("pre",{children:x})}),(0,n.jsxs)(h,{t:"Version",children:[w," / ",k-1]}),(0,n.jsx)(h,{t:"Playing",children:(0,n.jsx)(l.InlineCode,{children:_?"true":"false"})}),(0,n.jsx)(h,{t:"Date",children:(0,n.jsx)(d.Timestamp,{date:j})})]}),C?(0,n.jsxs)(f.View,{children:[(0,n.jsx)(h,{t:"Author",children:C.username}),(0,n.jsxs)(f.View,{pl:8,gap:4,children:[(0,n.jsx)(h,{t:"ID",children:C.id}),(0,n.jsx)(h,{t:"Name",children:C.username}),(0,n.jsx)(h,{t:"Image",children:(0,n.jsx)("a",{href:C.image,children:C.image})})]})]}):null,(0,n.jsx)(u.Switch,{isSelected:m,onChange:g,children:"Changes"}),S?null:"No changes",m&&S?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(f.View,{children:[(0,n.jsx)(h,{t:"Changeset",children:(0,n.jsx)("pre",{children:JSON.stringify(S,null,2)})}),c?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(f.View,{css:[s.rcss.mt(4)],children:[(0,n.jsx)(h,{t:"OT",children:(0,n.jsx)("pre",{children:JSON.stringify(T,null,2)})}),(0,n.jsx)("p",{children:(0,n.jsxs)("small",{children:["Note that the OT value is translated ",(0,n.jsx)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})}function h(e){var t=e.t,r=e.children;return(0,n.jsxs)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,n.jsxs)(c.Text,{css:{minWidth:"8em"},multiline:!1,children:[t,":"," "]}),(0,n.jsx)("span",{children:r})]})}e.s(["default",()=>p],789036);var m=e.i(297083),g=e.i(346715),x=e.i(817556),y=e.i(389959),b=e.i(878420),w=e.i(569384),_=e.i(973245),k=e.i(304277);function S(){var e=(0,w._)(["\n  query AdminPanelInngestEvents($replId: String!) {\n    fetchDeploymentInngestEvents(input: { replId: $replId }) {\n      name\n      timestamp\n    }\n  }\n"]);return S=function(){return e},e}e.i(566901);var C={},j=(0,_.gql)(S()),T=e.i(207237),E=e.i(446530),R=e.i(140487),I=(0,E.cssRecord)({root:{height:"100%",overflow:"auto",padding:16},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},eventItem:{marginBottom:8,fontFamily:"monospace",fontSize:14},timestamp:{color:"#666",marginRight:16},eventName:{fontWeight:"bold"}}),A=function(){var e,r,i=(0,T.default)(),a=(e={variables:{replId:i}},r=(0,b._)({},C,e),k.useQuery(j,r)),o=a.data,s=a.loading,l=a.error,u=a.refetch,d=(0,y.useRef)(null),p=(0,t._)((0,y.useState)(!1),2),h=p[0],w=p[1],_=(0,y.useCallback)(function(){return(0,m._)(function(){return(0,x._)(this,function(e){switch(e.label){case 0:if(!i)return[2];w(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,u()];case 2:return e.sent(),[3,4];case 3:return w(!1),[7];case 4:return[2]}})})()},[u,i]);if((0,y.useEffect)(function(){return d.current&&clearInterval(d.current),d.current=setInterval(function(){_()},3e5),function(){d.current&&clearInterval(d.current)}},[_]),s&&!o)return(0,n.jsx)("div",{css:I.root,children:(0,n.jsxs)("div",{css:I.header,children:[(0,n.jsx)(c.Text,{children:"Loading Inngest events..."}),(0,n.jsx)(R.Button,{variant:"outlined",size:"small",disabled:!0,text:"Refresh"})]})});if(l&&!o)return(0,n.jsx)("div",{css:I.root,children:(0,n.jsxs)("div",{css:I.header,children:[(0,n.jsxs)(c.Text,{style:{color:"#e74c3c"},children:["Error loading Inngest events: ",l.message]}),(0,n.jsx)(R.Button,{variant:"outlined",size:"small",onClick:_,disabled:h,text:h?"Refreshing...":"Refresh"})]})});var S=(null==o?void 0:o.fetchDeploymentInngestEvents)||[];if(0===S.length)return(0,n.jsx)("div",{css:I.root,children:(0,n.jsxs)("div",{css:I.header,children:[(0,n.jsx)(c.Text,{children:"No Inngest events found for this repl."}),(0,n.jsx)(R.Button,{variant:"outlined",size:"small",onClick:_,disabled:h,text:h?"Refreshing...":"Refresh"})]})});var E=(0,g._)(S).sort(function(e,t){return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()});return(0,n.jsxs)("div",{css:I.root,children:[(0,n.jsxs)("div",{css:I.header,children:[(0,n.jsxs)(c.Text,{style:{fontWeight:"bold"},children:["Inngest Events Timeline (",S.length," total)"]}),(0,n.jsx)(R.Button,{variant:"outlined",size:"small",onClick:_,disabled:h,text:h?"Refreshing...":"Refresh"})]}),(0,n.jsx)(f.View,{gap:4,children:E.map(function(e,t){var r=new Date(e.timestamp).toLocaleString();return(0,n.jsxs)("div",{css:I.eventItem,children:[(0,n.jsx)("span",{css:I.timestamp,children:r}),(0,n.jsx)("span",{css:I.eventName,children:e.name})]},"".concat(e.timestamp,"-").concat(e.name,"-").concat(t))})})]})};e.s(["InngestEvents",()=>A],696800);var P=e.i(790486),D=e.i(36654),O=e.i(541793),N=e.i(161322),M=function(e,t){var n=e.dir,r=e.channel,i=e.stringifiedCmd,a=e.cmd;return(!t.direction||n===t.direction)&&(!t.channels.length||!!t.channels.includes(a.channel))&&(!!(!t.regexp||!t.regexp.test||r.name&&t.regexp.test(r.name)||r.service&&t.regexp.test(r.service))||t.regexp.test(i))},L=(0,O.atom)([]),B=(0,O.atom)([]);function V(){return(0,y.useDeferredValue)((0,N.useAtomValue)(B))}var F=(0,O.atom)(null,function(e,t,n){M(n,e(H))&&t(B,function(e){return e.concat(n)}),t(L,function(e){return e.concat(n)})});function U(){return(0,N.useSetAtom)(F)}var G=(0,O.atom)(null,function(e,t){t(L,[]),t(B,[])});function $(){return(0,N.useSetAtom)(G)}var H=(0,O.atom)({regexp:null,direction:"",highlightOnly:!1,channels:[]});function z(){return(0,N.useAtomValue)(H)}var W=(0,O.atom)(null,function(e,t,n){var r;t(H,n),t(B,(r=e(L),(n.regexp||n.direction||n.channels.length)&&!n.highlightOnly?r.filter(function(e){return M(e,n)}):r))});function q(){return(0,N.useSetAtom)(W)}var K=(0,O.atom)(!1);function Y(){return(0,N.useAtomValue)(K)}function Q(){return(0,N.useSetAtom)((0,y.useMemo)(function(){return(0,O.atom)(null,function(e,t,n){return t(K,n)})},[]))}function X(){return(0,N.useSetAtom)((0,y.useMemo)(function(){return(0,O.atom)(null,function(e,t){return t(K,function(e){return!e})})},[]))}e.s(["filterLog",()=>M,"useAddLog",()=>U,"useClearLogs",()=>$,"useFilters",()=>z,"useIsLogging",()=>Y,"useLogs",()=>V,"useSetIsLogging",()=>Q,"useToggleIsLogging",()=>X,"useUpdateFilters",()=>q],302861);var Z=e.i(904002),J=e.i(136540),ee=e.i(607278),et=e.i(734882),en=(0,E.cssRecord)({container:[s.rcss.height("100%"),s.rcss.position.relative],controls:[s.rcss.backgroundColor.backgroundDefault]});function er(e){var r=e.isHidden,i=(0,t._)((0,a.default)(!1),2),o=i[0],s=i[1],l=(0,t._)((0,y.useState)(null),2),u=l[0],c=l[1],d=V(),p=Y(),h=X(),m=z(),g=q(),x=$();return r?null:(0,n.jsxs)(f.View,{css:en.container,gap:8,children:[(0,n.jsxs)(f.View,{css:en.controls,px:4,pb:8,gap:8,children:[(0,n.jsx)(R.Button,{colorway:p?void 0:"positive",onClick:h,text:p?"Stop logging goval":"Start logging goval"}),(0,n.jsxs)(f.View,{row:!0,gap:4,justify:"space-between",children:[(0,n.jsx)(R.Button,{onClick:s,text:o?"Hide filters":"Show filters"}),u?(0,n.jsx)(R.Button,{onClick:function(){return c(null)},text:"Reset Time Ref"}):null,(0,n.jsx)(J.IconButton,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(d)),t=document.createElement("a");t.setAttribute("href",e);var n=new Date().toISOString();t.setAttribute("download","logs-".concat(n.slice(0,n.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),t.click()},size:32,children:(0,n.jsx)(D.default,{})}),(0,n.jsx)(R.Button,{colorway:"negative",onClick:function(){return x()},text:"Clear logs"})]}),o?(0,n.jsx)(ec,{filters:m,updateFilters:function(e){g((0,b._)({},m,e))}}):null]}),(0,n.jsx)(eu,{logs:d,filters:m,timeRef:u,setTimeRef:c})]})}var ei=(0,E.cssRecord)({in:[s.rcss.color.greenStrongest],out:[s.rcss.color.redStrongest],error:[s.rcss.color.magentaStrongest]}),ea=[s.rcss.flex.row,s.rcss.rowWithGap(4),{"&:hover":{cursor:"pointer",".link":{textDecoration:"underline"}}}],eo=(0,E.cssRecord)({clickable:(0,g._)(ea),clickableHighlighted:(0,g._)(ea).concat([s.rcss.backgroundColor.accentPositiveDimmer]),inner:[s.rcss.maxWidth("100%")],log:[s.rcss.flex.growAndShrink(1),{opacity:.5}],row:[s.rcss.my(4),s.rcss.mx(4)],timestamp:[s.rcss.fontSize(13),{cursor:"pointer"}]});function es(e){var r,i=e.log,o=e.filters,s=e.timeRef,l=e.setTimeRef,u=(0,y.useMemo)(function(){return o.highlightOnly&&M(i,o)},[o,i]),d=null!=(r=i.cmd.channel)?r:0,p=(0,y.useMemo)(function(){var e=(0,b._)({},i.cmd);return delete e.channel,{cleaned:e,formatted:JSON.stringify(e,null,2)}},[i]),h=s?i.timestamp-s:i.timestamp,m=(0,t._)((0,a.default)(!0),2),g=m[0],x=m[1];return(0,n.jsxs)(f.View,{css:eo.row,children:[(0,n.jsx)(f.View,{role:"button",onClick:x,onKeyDown:x,tabIndex:0,css:u?eo.clickableHighlighted:eo.clickable,children:(0,n.jsxs)(f.View,{css:eo.inner,grow:!0,row:!0,gap:4,children:[(0,n.jsx)(c.Text,{className:"icon",multiline:!1,children:"in"===i.dir?(0,n.jsx)(f.View,{css:ei.in,children:""}):"out"===i.dir?(0,n.jsx)(f.View,{css:ei.out,children:""}):(0,n.jsx)(f.View,{css:ei.error,children:""})}),(0,n.jsx)(c.Text,{className:"link",multiline:!1,children:(0,n.jsxs)("code",{children:["#",d," - ",i.channel.service,i.channel.name?"::".concat(i.channel.name):""]})}),(0,n.jsx)(c.Text,{css:eo.log,multiline:!1,children:(0,n.jsx)("code",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:p.formatted})}),null!=h&&(0,n.jsx)(f.View,{style:{opacity:.5},onClick:function(){l(i.timestamp)},children:(0,n.jsx)(c.Text,{css:eo.timestamp,multiline:!1,children:i.timestamp===s?"(reference)":(0,n.jsxs)(n.Fragment,{children:[h.toFixed(0)," ms"]})})})]})}),!g&&(0,n.jsx)(n.Fragment,{children:void 0!==p.cleaned&&(0,n.jsx)(Z.JsonView,{name:"cmd",src:p.cleaned})})]})}var el=(0,E.cssRecord)({listContainer:[s.rcss.position.relative,s.rcss.height("100%")],listScroller:[s.rcss.overflow("auto"),s.rcss.coverContainer],listBox:[s.rcss.width("100%"),s.rcss.position.relative],listItem:[s.rcss.position.absolute,s.rcss.top(0),s.rcss.left(0),s.rcss.width("100%")]}),eu=(0,y.memo)(function(e){var t=e.logs,r=e.filters,i=e.timeRef,a=e.setTimeRef,o=(0,y.useRef)(null),s=(0,P.useVirtualizer)({count:t.length,getScrollElement:function(){return o.current},getItemKey:function(e){return t[e].id},estimateSize:function(){return 30},overscan:10});return(0,n.jsx)("div",{css:el.listContainer,children:(0,n.jsxs)("div",{ref:o,css:el.listScroller,children:[(0,n.jsx)("div",{css:el.listBox,style:{height:"".concat(s.getTotalSize(),"px")},children:s.getVirtualItems().map(function(e){var o=e.index,l=e.key,u=e.start,c=t[o];return c?(0,n.jsx)("div",{"data-index":o,ref:s.measureElement,css:el.listItem,style:{transform:"translateY(".concat(u,"px)")},children:(0,n.jsx)(es,{log:c,filters:r,timeRef:i,setTimeRef:a})},l.toString()):null})}),(0,n.jsx)("div",{className:"bottom-anchor"})]})})}),ec=function(e){var r=e.filters,i=e.updateFilters;return(0,n.jsxs)(f.View,{gap:4,children:[(0,n.jsx)(c.Text,{variant:"subheadDefault",multiline:!1,children:"Regex (regex,flags):"}),(0,n.jsx)(ee.Input,{id:"regex",onChange:function(e){var n=null;if(e.currentTarget.value){var r=(0,t._)(e.currentTarget.value.split(","),2),a=r[0],o=r[1];try{n=new RegExp(a,o)}catch(e){}}i({regexp:n})},placeholder:"\\w+,gi"}),(0,n.jsx)(c.Text,{variant:"subheadDefault",multiline:!1,children:"Channel (comma separated ids, clear to reset)"}),(0,n.jsx)(ee.Input,{id:"channels",onChange:function(e){i({channels:e.currentTarget.value.split(",").map(function(e){return e.trim()}).map(Number).filter(function(e){return!isNaN(e)})})},placeholder:"1,2,3"}),(0,n.jsx)(c.Text,{variant:"subheadDefault",multiline:!1,children:"Directions:"}),(0,n.jsx)(et.RadioGroup,{css:s.rcss.rowWithGap(16),name:"direction",value:r.direction,onChange:function(e){var t=e.target.value;i({direction:"in"===t||"out"===t||""===t?t:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map(function(e){return(0,n.jsxs)(f.View,{row:!0,gap:8,children:[(0,n.jsx)(et.Radio,{id:e.val,value:e.val}),(0,n.jsx)("label",{htmlFor:e.val,children:e.text})]},e.val)})}),(0,n.jsx)(c.Text,{variant:"subheadDefault",multiline:!1,children:"Filter style:"}),(0,n.jsx)(et.RadioGroup,{css:s.rcss.rowWithGap(16),name:"filter-style",value:r.highlightOnly?"highlight":"filter",onChange:function(e){return i({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map(function(e){return(0,n.jsxs)(f.View,{row:!0,gap:8,children:[(0,n.jsx)(et.Radio,{id:e.val,value:e.val}),(0,n.jsx)("label",{htmlFor:e.val,children:e.text})]},e.val)})})]})};e.s(["default",()=>er],407967);var ed=e.i(11986),ef=e.i(610357),ep=e.i(148382),eh=e.i(331762),em=e.i(671901);function eg(e){var t=e.split(".");if(4!==t.length)throw Error("Invalid token: should have exactly 4 parts: "+e);for(var n=t[2].replace(/-/g,"+").replace(/_/g,"/");n.length%4;)n+="=";var r=window.atob(n);if(r.length<64)throw Error("Invalid token: signed part is too short: "+r.length);var i=r.substring(0,r.length-64);return em.api.token.ReplToken.decode(new eh.Buffer(i,"base64"))}ep.default.env.PROXY_SUFFIX,e.s(["parseToken",()=>eg],924004);var ev=e.i(873379),ex=e.i(529810),ey=(0,E.cssRecord)({root:{height:"100%",overflow:"auto",padding:10,pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},command:[s.rcss.flex.shrink(1)]}),eb=function(){var e=(0,ex.default)().container;(0,ev.default)(e);var t=e.getConnectionMetadata();if(!t)return(0,n.jsx)("div",{children:"no token yet, wait for connection"});var r=t.token,i=new URL(t.conmanURL).host,a='./conman-repl -t "'.concat(r,'" -u ').concat(i);return(0,n.jsxs)("div",{css:ey.root,children:[(0,n.jsxs)(f.View,{row:!0,gap:2,children:[(0,n.jsxs)(c.Text,{css:ey.command,multiline:!1,children:["conman Repl command: ",(0,n.jsx)(l.InlineCode,{children:a})]}),(0,n.jsx)(J.IconButton,{alt:"Copy to clipboard",onClick:function(){return(0,ef.default)(a)},children:(0,n.jsx)(ed.default,{})})]}),(0,n.jsxs)("div",{children:["metadata:",(0,n.jsx)("pre",{children:JSON.stringify(t,null,2)})]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{children:["parsed token:",(0,n.jsx)("pre",{children:JSON.stringify(eg(t.token),null,2)})]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]})};e.s(["Metadata",()=>eb],198690);var ew=e.i(775973),e_=e.i(282453),ek=e.i(116680),eS=e.i(480028),eC=e.i(448600),ej=function(){var e=(0,t._)((0,y.useState)(e_.default.get("gurl","string")||""),2),r=e[0],i=e[1],a=(0,ew.useLDClient)(),o=""===r?"null":JSON.stringify((0,ek.gurlToOverrideClusterMetadata)(r),null,2);return(0,n.jsxs)(f.View,{pt:16,px:12,gap:12,children:[(0,n.jsxs)(f.View,{gap:12,children:[(0,n.jsx)(eC.default,{label:"Custom gurl",placeholder:"ws://localhost:".concat(4560),value:r,onChange:function(e){return i(e.currentTarget.value)}}),(0,n.jsxs)("pre",{children:["metadata override preview:",o]}),(0,n.jsxs)(f.View,{row:!0,gap:12,children:[(0,n.jsx)(R.Button,{colorway:"positive",onClick:function(){e_.default.set("gurl",r),window.location.reload()},text:"Set gurl and reload"}),(0,n.jsx)(R.Button,{colorway:"yellow",onClick:function(){e_.default.set("gurl","wss://eval.canary.replit.com"),window.location.reload()},text:"Switch to canary & reload"}),(0,n.jsx)(R.Button,{colorway:"orange",onClick:function(){e_.default.remove("gurl"),window.location.reload()},text:"Unset gurl and reload"}),(0,n.jsx)(R.Button,{colorway:"red",onClick:function(){e_.default.set("gurl","ws://localhost:4560"),window.location.reload()},text:"Switch to localhost & reload"})]}),(0,n.jsx)("div",{children:e_.default.get("gurl","string")?"currently in localStorage: ".concat(e_.default.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,n.jsx)("p",{children:"Gurl order of precedence:"}),(0,n.jsxs)("ol",{style:{margin:12},children:[(0,n.jsx)("li",{children:"gurl in localStorage (set above)"}),(0,n.jsxs)("li",{children:["If in development webapp and a theres a response from",(0,n.jsx)("code",{children:"https://localhost:4563"})," or",(0,n.jsxs)("code",{children:["http://localhost:",4560]}),", then it will use that."]}),(0,n.jsxs)("li",{children:["default is ",(0,n.jsx)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]})]}),(0,n.jsx)("hr",{css:[s.rcss.my(16),{borderColor:eS.tokens.outlineDefault}]}),(0,n.jsx)(R.Button,{onClick:function(){window.ldClient=a,console.log("window.ldClient: ",a)},text:"Assign LD client to window for testing"})]})};e.s(["OverrideGurl",()=>ej],63379)},395535,464928,305715,479776,544067,911839,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(276385),a=e.i(389959),o=e.i(41e4),s=e.i(400081),l=e.i(927158),u=e.i(529810),c=e.i(446530),d=e.i(613355),f=e.i(140487),p=e.i(960178),h=e.i(625484),m=(0,c.cssRecord)({uploadMessage:[d.rcss.flex.growAndShrink(1),d.rcss.width("100%"),d.rcss.font.code]});function g(){var e,c,d=(0,u.default)().container,g=null==(e=d.getContext())?void 0:e.repl,x=(0,s.usePid2InternalsContextDoNotUseOrYouWillBeFired)(),y=(0,n._)((0,a.useState)("unknown"),2),b=y[0],w=y[1],_=(0,n._)((0,a.useState)(null),2),k=_[0],S=_[1],C=(0,n._)((0,a.useState)(null),2),j=C[0],T=C[1],E=(0,n._)((0,a.useState)(null),2),R=E[0],I=E[1],A=(0,o.useUploadPid2)(),P=(0,n._)((0,o.usePid2UploadState)(),2),D=P[0],O=P[1],N=(0,l.usePid2Callback)(function(e){return function(){return(0,t._)(function(){var t,n,i;return(0,r._)(this,function(r){switch(r.label){case 0:return w("loading"),t=setTimeout(function(){w("unhealthy")},5e3),[4,(0,o.getPid2Paths)(d,S)];case 1:if(!(n=r.sent()))return w("unhealthy"),[2];return[4,d.exec("stat","-c","%N",n.pid2BinDst2)];case 2:return(i=r.sent()).error?S("LocalPid2 not installed: ".concat(i.output)):S("LocalPid2 installed: ".concat(i.output)),e.healthCheck.ping.rpc({}).then(function(e){T(e.payload),clearTimeout(t),e.ok?w("ok"):w("unhealthy")}).catch(function(){clearTimeout(t),w("unhealthy")}),[2]}})})()}});return c="ok"===b?"green":"unhealthy"===b?"red":"grey",(0,i.jsxs)(h.View,{pt:16,px:12,gap:12,children:[(0,i.jsxs)(p.Header,{level:3,children:["Is pid2 enabled? ",x?"Yes":"No"]}),(0,i.jsx)(f.Button,{text:"Ping pid2 (state: ".concat(b,")"),colorway:c,disabled:!N,onClick:function(){null==N||N()}}),j?(0,i.jsx)("code",{children:JSON.stringify(j,null,2)}):null,k?(0,i.jsx)("code",{children:k}):null,(0,i.jsx)(f.Button,{colorway:"purple",text:"Upload pid2 to Repl",onClick:function(){return(0,t._)(function(){return(0,r._)(this,function(e){return g&&A(),[2]})})()}}),(0,i.jsxs)(p.Text,{css:m.uploadMessage,children:["[",D,"] ",O]}),(0,i.jsx)(f.Button,{colorway:"red",text:"Delete uploaded pid2",onClick:function(){return(0,t._)(function(){var e,t,n;return(0,r._)(this,function(r){switch(r.label){case 0:if(!g)return[2];return[4,(0,o.getPid2Paths)(d,I)];case 1:if(!(e=r.sent()))return[2];return[4,d.exec("rm","-f",e.pid2BinDst)];case 2:return t=r.sent(),[4,d.exec("rm","-f",e.pid2BinDst2)];case 3:if(n=r.sent(),t.error)return I("".concat(t.error,": ").concat(t.output)),[2];if(n.error)return I("".concat(n.error,": ").concat(n.output)),[2];return I("uploaded pid2 deleted"),[2]}})})()}}),R?(0,i.jsx)(p.Text,{css:m.uploadMessage,children:R}):null,(0,i.jsx)(f.Button,{text:"Assign pid2 client to window for testing",onClick:function(){window.pid2=x,console.log("window.pid2: ",x)}})]})}e.s(["Pid2Debug",()=>g],395535);var x=e.i(394212),y=e.i(167626),b=e.i(878420),w=e.i(64386),_=e.i(346715),k=e.i(119468),S=e.i(753950),C=e.i(179302);e.i(508987);var j=e.i(457103),T=e.i(242131),E=e.i(221250),R=e.i(928353),I=e.i(542101),A=e.i(700170);e.i(242933);var P=e.i(790164);e.i(925218);var D=e.i(267103),O=e.i(299798),N=e.i(480028);function M(){var e=(0,n._)((0,a.useState)(function(){return new P.ObservableState([])}),1)[0],t=(0,a.useCallback)(function(t){return e.update(function(e){return[t].concat((0,_._)(e))})},[e]),r=(0,n._)((0,a.useState)(null),2),o=r[0],s=r[1];(0,O.usePid2)(function(e){return s({client:e}),function(){return s(null)}},[]);var l=G.use(o,t);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E.default,{language:"json",hideGutter:!0,extensions:l}),(0,i.jsx)(L,{logs:e,onClear:function(){return e.set([])}})]})}function L(e){var t=(0,n._)((0,a.useState)(null),2),r=t[0],o=t[1],s=(0,D.useObservable)(e.logs),l=null!==r?s[s.length-r-1]:null,u=(0,I.default)(),c=u.ref,d=u.view;(0,a.useEffect)(function(){d&&d.dispatch({changes:{from:0,to:d.state.doc.length,insert:l?l.data:""}})},[l,d]);var p=(0,a.useRef)(r);return(0,a.useEffect)(function(){p.current=r},[r]),(0,a.useEffect)(function(){return e.logs.subscribe(function(e){var t=p.current;(null===t||e.length-2===t)&&o(e.length-1)})},[e.logs]),(0,i.jsxs)(h.View,{css:W.response,grow:!0,shrink:!0,row:!0,gap:0,children:[(0,i.jsxs)(h.View,{css:W.responseL,children:[(0,i.jsx)(h.View,{css:W.logHeader,align:"start",justify:"center",children:l?null==l?void 0:l.name:null}),(0,i.jsx)(h.View,{css:W.logData,children:(0,i.jsx)(E.default,{ref:c,language:"json",readOnly:!0})})]}),(0,i.jsxs)(h.View,{css:W.responseR,children:[(0,i.jsx)(h.View,{css:W.logsHeader,children:(0,i.jsx)(f.Button,{size:"small",text:"Clear",disabled:!s.length,onClick:e.onClear})}),(0,i.jsx)(h.View,{css:W.logsList,children:s.map(function(e,t){var n=s.length-t-1;return(0,i.jsx)("code",{role:"button",tabIndex:0,className:r===n?"selected":void 0,onClick:function(){o(n)},onKeyDown:function(e){"Enter"===e.key&&o(n)},children:e.name},n)})})]})]})}var B=S.StateEffect.define(),V=S.StateEffect.define(),F=S.StateEffect.define(),U=C.EditorView.theme({"&":{border:"1px solid ".concat(N.tokens.outlineDefault),height:"225px"},"& .cm-panels":{backgroundColor:"unset"},"& .cm-panels.cm-panels-bottom":{borderTop:"1px solid ".concat(N.tokens.outlineDefault)}}),G=new A.ReactCompartment(function(e,n){return[U,S.StateField.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t.effects[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.is(B)&&(e=s.value),s.is(F)&&(e=null)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e},provide:function(i){return[C.ViewPlugin.define(function(){var i,a=new AbortController;return{update:function(o){return(0,t._)(function(){var t,s,l,u,c,d,f,p,h,m,g,y,b,w,_,S,C,j,T,E,R,I,A,P,D,O,N,M,L,U,G,H,z,W;return(0,r._)(this,function(r){switch(r.label){case 0:if(!e)return[2];t=void 0,s=!0,l=!1,u=void 0;try{for(c=o.transactions[Symbol.iterator]();!(s=(d=c.next()).done);s=!0){f=d.value,p=!0,h=!1,m=void 0;try{for(g=f.effects[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var q;(b=y.value).is(B)&&b.value&&(t=b.value),b.is(V)&&(null==i||i.write((q=b.value,JSON.parse(q,function(e,t){return(void 0===t?"undefined":(0,k._)(t))==="object"&&"Uint8Array"===t.type&&void 0!==t.data?new Uint8Array(t.data):t})))),b.is(F)&&a.abort()}}catch(e){h=!0,m=e}finally{try{p||null==g.return||g.return()}finally{if(h)throw m}}}}catch(e){l=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(l)throw u}}if(!t)return[2];switch(w=t.service,_=t.procedure,S=t.type,C=e.client[w][_][S],j=void 0,T=1,t.type){case"rpc":return[3,1];case"stream":return[3,3];case"subscribe":return[3,5];case"upload":return[3,7]}return[3,9];case 1:case 5:return[4,C(t.input,{signal:a.signal})];case 2:return E=r.sent(),n({name:"".concat(w,".").concat(_,".").concat(S,".").concat(T),data:$(E)}),o.view.dispatch({effects:F.of(null)}),[3,9];case 3:return[4,C(null!=(R=t.input)?R:void 0,{signal:a.signal})];case 4:return A=(I=r.sent()).reqWritable,P=I.resReadable,i=A,j=P,[3,9];case 6:return j=r.sent().resReadable,[3,9];case 7:return[4,C(null!=(D=t.input)?D:void 0,{signal:a.signal})];case 8:return N=(O=r.sent()).reqWritable,O.finalize,i=N,[3,9];case 9:if(!j)return[3,22];M=!1,L=!1,r.label=10;case 10:r.trys.push([10,15,16,21]),G=(0,x._)(j),r.label=11;case 11:return[4,G.next()];case 12:if(!(M=!(H=r.sent()).done))return[3,14];z=H.value,n({name:"".concat(w,".").concat(_,".").concat(S,".").concat(T),data:$(z)}),T++,r.label=13;case 13:return M=!1,[3,11];case 14:return[3,21];case 15:return W=r.sent(),L=!0,U=W,[3,21];case 16:if(r.trys.push([16,,19,20]),!(M&&null!=G.return))return[3,18];return[4,G.return()];case 17:r.sent(),r.label=18;case 18:return[3,20];case 19:if(L)throw U;return[7];case 20:return[7];case 21:o.view.dispatch({effects:F.of(null)}),r.label=22;case 22:return[2]}})})()}}}),C.EditorView.editable.from(i,function(e){return(null==e?void 0:e.type)!=="rpc"&&(null==e?void 0:e.type)!=="subscribe"}),T.GhostText.compute([i,"doc"],function(e){var t,n;return e.doc.length?null:(null==(t=e.field(i))?void 0:t.type)==="stream"||(null==(n=e.field(i))?void 0:n.type)==="upload"?{from:0,insert:"{\n   # ... input data\n}"}:{from:0,insert:'{\n  "service_name": {\n    "procedure_name": {\n      "rpc" | "stream" | "subscribe" | "upload": {\n        # ... init/input data\n      }\n    }\n  }\n}'}}),C.keymap.of([{key:"Tab",run:function(e){var t;return!e.state.doc.length&&(e.dispatch({changes:null!=(t=e.state.facet(T.GhostText)[0])?t:void 0}),!0)}}]),C.showPanel.of(function(t){var n=function(){if(e){var n=z(t.state.doc.toString());if(n){var r=n.type,i=n.service,a=n.procedure,o=n.input;r&&i&&a&&t.dispatch({effects:B.of({type:r,service:i,procedure:a,input:o}),changes:"stream"===r||"upload"===r?{from:0,to:t.state.doc.length,insert:""}:void 0})}}},r=function(){t.dispatch({effects:V.of(t.state.doc.toString()),changes:{from:0,to:t.state.doc.length,insert:""}})},a=function(){var n,r=t.state.field(i),a=new Set,o=t.state.doc.toString();return e&&r&&"rpc"!==r.type&&(a.add("Close"),("stream"===r.type||"upload"===r.type)&&o.startsWith("{")&&o.endsWith("}")&&a.add("Send")),e&&!r&&o.length&&(a.add("Clear"),(null==(n=z(o))?void 0:n.type)&&a.add("Send")),a},o=K.create({enabled:a(),onSend:function(){null==t.state.field(i)?n():r(),t.focus()},onClose:function(){t.dispatch({effects:[F.of(null),B.of(null)],changes:{from:0,to:t.state.doc.length,insert:""}})},onClear:function(){t.dispatch({changes:{from:0,to:t.state.doc.length,insert:""}}),t.focus()}});return{dom:o,top:!1,update:function(e){if((0,j.hasChanged)(e,i,"doc")){var t=e.state.field(i);K.update(o,function(e){return(0,w._)((0,b._)({},e),{enabled:a(),inProgress:t?"".concat(t.type,": ").concat(t.service,".").concat(t.procedure):void 0})})}}}})]}})]});function $(e){return JSON.stringify(e,function(e,t){return(0,y._)(t,Uint8Array)?Array.from(t):t},2)}var H=["rpc","stream","subscribe","upload"];function z(e){try{t=JSON.parse(e)}catch(e){return null}var t,n=0,r=null,i=null,a=null;try{for(;n<3;){var o=Object.keys(t)[0];if(void 0===o)throw Error("expected key");if(0===n&&(r=o),1===n&&(i=o),2===n)if(H.includes(o))a=o;else throw Error("expected procedure type");t=t[o],n++}return{type:a,service:r,procedure:i,input:t}}catch(e){return{type:a,service:r,procedure:i,input:null}}}var W=(0,c.cssRecord)({response:[d.rcss.border({width:1,color:N.tokens.outlineDefault}),{marginTop:"4px"}],logHeader:[d.rcss.height("37px"),d.rcss.display.flex,d.rcss.p(4),d.rcss.border({width:1,color:N.tokens.outlineDefault,direction:"bottom"})],logData:[d.rcss.display.block,d.rcss.flex.growAndShrink(1),{overflowY:"auto"}],logsHeader:[d.rcss.display.flex,d.rcss.align.end,d.rcss.p(4),d.rcss.border({width:1,color:N.tokens.outlineDefault,direction:"bottom"})],logsList:[d.rcss.display.block,d.rcss.flex.growAndShrink(1),{overflowY:"auto"}],responseL:[d.rcss.display.flex,d.rcss.flex.growAndShrink(1),{overflowY:"auto"}],responseR:[d.rcss.display.flex,d.rcss.border({width:1,color:N.tokens.outlineDefault,direction:"left"}),d.rcss.width("40%"),d.rcss.maxWidth("250px"),{overflowY:"auto","& code":{display:"block",cursor:"pointer",padding:"4px",borderBottom:"1px solid ".concat(N.tokens.outlineDimmer),overflowX:"hidden",textOverflow:"ellipsis"},"& code.selected":{backgroundColor:N.tokens.accentPrimaryDimmer},"& code:last-of-type":{borderBottom:"unset"}}]}),q=["Send","Close","Clear"],K=new R.CodeMirrorComponent(function(e){return(0,i.jsxs)(h.View,{children:[(0,i.jsx)(h.View,{p:4,pb:0,children:(0,i.jsxs)(p.Text,{variant:"small",color:"dimmer",children:["Status:"," ",e.inProgress?(0,i.jsxs)(i.Fragment,{children:["In progress - ",e.inProgress]}):null]})}),(0,i.jsx)(h.View,{p:4,row:!0,gap:4,children:Object.values(q).map(function(t){return(0,i.jsx)(f.Button,{size:"small",disabled:!e.enabled.has(t),text:t,onClick:function(){switch(t){case"Send":e.onSend();break;case"Close":e.onClose();break;case"Clear":e.onClear()}}},t)})})]})});e.s(["default",()=>M],464928);var Y=e.i(569384),Q=e.i(973245),X=e.i(304277);function Z(){var e=(0,Y._)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n      isAgentRepl\n      visualSelectorUpgradeRefused\n      replitBadgeEnabled\n    }\n    isRenamed\n    folderId\n    isOwner\n    isReplShieldEnabled\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return Z=function(){return e},e}function J(){var e=(0,Y._)(["\n  query AdminPanelReplView($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...AdminPanelRepl\n      }\n    }\n  }\n  ","\n"]);return J=function(){return e},e}e.i(566901);var ee={},et=(0,Q.gql)(Z()),en=(0,Q.gql)(J(),et),er=e.i(243073),ei=e.i(207237),ea=e.i(967629),eo=e.i(210975),es=(0,ea.css)([d.rcss.colWithGap(16),d.rcss.p(4),{pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}}]),el=function(){var e,t,n,r,a,o,s,l,u,c,d=(0,ei.default)(),f=(e={variables:{replId:d}},t=(0,b._)({},ee,e),X.useQuery(en,t)).data,p=(null==f?void 0:f.getRepl.__typename)==="Repl"?JSON.parse(JSON.stringify(f.getRepl)):void 0;return p&&(delete p.__typename,null==(n=p.user)||delete n.__typename,null==(r=p.origin)||delete r.__typename,delete p.config.__typename,null==(a=p.source)||delete a.__typename,null==(s=p.source)||null==(o=s.release)||delete o.__typename,null==(c=p.source)||null==(u=c.release)||null==(l=u.repl)||delete l.__typename),(0,i.jsxs)(h.View,{css:es,children:[(0,i.jsx)(eo.default,{replId:d}),(0,i.jsx)("div",{children:p?(0,i.jsx)(er.default,{json:p}):null})]})};e.s(["ReplView",()=>el],305715);var eu=e.i(561979),ec=e.i(15053),ed=e.i(222342),ef=e.i(664152),ep=e.i(6338),eh=e.i(428596),em=e.i(127227),eg=e.i(607278);function ev(e){var t=e.sessionId,r=(0,n._)((0,a.useState)(!1),2),o=r[0],s=r[1],l=(0,n._)((0,a.useState)(""),2),u=l[0],c=l[1],d=(0,n._)((0,a.useState)(!1),2),m=d[0],g=d[1],x=(0,ed.default)().showConfirm,y=(0,eh.useIdSeed)();return null==t?(0,i.jsx)(h.View,{children:(0,i.jsx)(p.Text,{multiline:!1,children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,i.jsxs)(h.View,{gap:8,children:[(0,i.jsxs)(p.Text,{variant:"small",multiline:!1,children:["RUM Session ID: ",t]}),(0,i.jsx)(p.Text,{variant:"headerDefault",multiline:!1,children:"Submit an Issue"}),(0,i.jsxs)(h.View,{gap:16,children:[(0,i.jsx)(eg.MultiLineInput,{id:y("message"),placeholder:"What can we do better?",value:u,onChange:function(e){return c(e.target.value)},disabled:o}),(0,i.jsxs)(h.View,{row:!0,gap:8,children:[(0,i.jsx)(em.Checkbox,{id:y("issueInRecording"),checked:m,onChange:function(e){return g(e)}}),(0,i.jsx)("label",{htmlFor:y("issueInRecording"),children:(0,i.jsx)(p.Text,{multiline:!1,children:"Issue is demoed in recording"})})]}),(0,i.jsx)(f.Button,{onClick:function(){var e=(0,ec.v4)();s(!0),(0,ef.datadogRumCustomAction)({name:"replitOnReplit:issue",context:{message:u,issueInRecording:m,customEventId:e}}),x("Issue submitted! Have a cookie ",5e3),setTimeout(function(){s(!1),c(""),g(!1)},5e3)},text:"Submit",disabled:o||0===u.trim().length,colorway:"primary"})]})]})}var ex=function(){var e,t=null==(e=eu.datadogRum.getInternalContext())?void 0:e.session_id,r=eu.datadogRum.getInitConfiguration(),o=null!=r&&100===r.sampleRate,s=(0,n._)((0,a.useState)(null!=t),2),l=s[0],u=s[1];return(0,i.jsx)(h.View,{gap:16,p:4,children:o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.Button,{onClick:l?function(){eu.datadogRum.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,ef.datadogRumStartView)({name:"replitOnReplit"}),setTimeout(function(){u(!0)},1e3)},text:l?" Recording... Click to stop and reload page":"Start Recording",colorway:l?void 0:"primary",css:(0,b._)({},l&&ep.loadingStyle.backgroundPulse(N.tokens.redDimmest,N.tokens.redDimmer))}),l?(0,i.jsx)(ev,{sessionId:t}):null]}):(0,i.jsx)(f.Button,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})};e.s(["Rum",()=>ex],479776);var ey=e.i(951262);function eb(){var e=(0,Y._)(["\n  mutation CreateSubrepl($input: CreateSubreplInput!) {\n    createSubrepl(input: $input) {\n      ... on CreateSubreplResult {\n        subreplId\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return eb=function(){return e},e}var ew={},e_=(0,Q.gql)(eb());function ek(e){var t=(0,b._)({},ew,e);return ey.useMutation(e_,t)}e.s(["useCreateSubreplMutation",()=>ek],544067);var eS=e.i(886513),eC=e.i(668106);function ej(e){return(0,t._)(function(){var t,n,i,a;return(0,r._)(this,function(r){switch(r.label){case 0:return t=e.subreplId,n=(0,eS._)(e,["subreplId"]),[4,(0,eC.default)(n)];case 1:return i=r.sent(),a="".concat(i.token,"/").concat(t),[2,(0,w._)((0,b._)({},i),{token:a})]}})})()}function eT(e){return/^[a-z0-9]{10}$/.test(e)}e.s(["fetchSubreplConnectionMetadata",()=>ej,"isValidSubreplId",()=>eT],911839)},448191,e=>{e.v({container:"subrepl-module__T98nrG__container",monospace:"subrepl-module__T98nrG__monospace"})},779827,e=>{e.v({container:"survey-module__YMPlta__container",debugInfoSection:"survey-module__YMPlta__debugInfoSection",deletedText:"survey-module__YMPlta__deletedText",errorText:"survey-module__YMPlta__errorText"})},309968,660081,67870,102570,345863,94063,e=>{"use strict";var t,n,r,i=e.i(276385),a=e.i(960933),o=e.i(862927),s=e.i(612054),l=e.i(116235),u=e.i(721281),c=e.i(530658),d=e.i(389959),f=e.i(993796),p=e.i(670161),h=e.i(724001),m=e.i(851218),g=e.i(791247),x=e.i(258092),y=e.i(789036),b=e.i(696800),w=e.i(407967),_=e.i(904002),k=e.i(198690),S=e.i(63379),C=e.i(395535),j=e.i(464928),T=e.i(305715),E=e.i(479776),R=e.i(297083),I=e.i(167626),A=e.i(817556),P=e.i(544067),D=e.i(252204),O=e.i(416298),N=e.i(207237),M=e.i(911839),L=e.i(979931),B=e.i(173703),V=e.i(140487),F=e.i(988676),U=e.i(607278),G=e.i(396776),$=e.i(960178),H=e.i(625484),z=e.i(448191),W=e.i(87995),q=e.i(878420),K=e.i(569384),Y=e.i(973245),Q=e.i(304277);e.i(566901);var X=e.i(951262);function Z(){var e=(0,K._)(["\n  query AdminPanelBuildScoreSurveys($limit: Int) {\n    currentUser {\n      id\n    }\n    buildScoreSurveyResponses(limit: $limit) {\n      id\n      trigger\n      responseScore\n      questionText\n      headerText\n      context\n      timeCreated\n      timeUpdated\n      timeDeleted\n      replId\n    }\n  }\n"]);return Z=function(){return e},e}function J(){var e=(0,K._)(["\n  query HasCompletedCurrentTrigger($trigger: BuildScoreSurveyTriggerPoint!) {\n    currentUser {\n      id\n      hasCompletedBuildScoreSurveyForTrigger(trigger: $trigger)\n    }\n  }\n"]);return J=function(){return e},e}function ee(){var e=(0,K._)(["\n  mutation DeleteBuildScoreSurveyResponses($surveyResponseId: String!) {\n    deleteBuildScoreSurveyResponses(surveyResponseId: $surveyResponseId) {\n      __typename\n      ... on CurrentUser {\n        id\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return ee=function(){return e},e}var et={},en=(0,Y.gql)(Z()),er=(0,Y.gql)(J()),ei=(0,Y.gql)(ee()),ea=e.i(820228),eo=e.i(491194),es=e.i(225637),el=e.i(287999),eu=e.i(374106);e.i(877212);var ec=e.i(924908);e.i(925218);var ed=e.i(641555),ef={direction:"forward",state:{count:0},debug:{name:"CheckpointCountReducer"},map:function(e){return e.count},reducer:function(e,t){(0,eu.isEventAgentToolDataKind)(e,"commitData")&&(t.count+=1)}},ep=e.i(423111),eh=1/6;function em(){var e,t,n,r,i,a=(0,ep.useSetShouldShowRandomCheckpointSurvey)(),o=(0,ep.useSetIsFirstCheckpointCompleted)();return e=function(e){1===e?o(!0):e>2&&Math.random()<eh&&a(!0)},t=(0,ec.useChatter)(),n=(0,ed.useObservableMemo)(function(){return t.sessions.agent.current},[t]),r=(0,ed.useObservableMemo)(function(){return null==n?void 0:n.reduce(ef,"global")},[n]),i=(0,d.useRef)(0),(0,d.useEffect)(function(){var t=null!=r?r:0;if(t>i.current)try{e(t)}finally{i.current=t}else t<i.current&&(i.current=t)},[r,e]),null}e.s(["BuildScoreSurveyTopLevelHook",()=>em,"RANDOM_CHECKPOINT_OCCURRENCE_THRESHOLD",()=>2,"RANDOM_CHECKPOINT_SURVEY_PROBABILITY",()=>eh],660081);var eg=e.i(231346),ev=e.i(136540),ex=e.i(734582),ey=e.i(624782),eb=e.i(272119),ew=e.i(423828),e_=e.i(779827),ek=e.i(37292),eS=e.i(642049),eC=e.i(243073),ej=e.i(927158),eT=e.i(729122),eE=e.i(85742),eR=e.i(12034),eI=e.i(394212),eA=e.i(299798),eP=e.i(11986),eD=e.i(610357),eO=e.i(409823),eN=e.i(965153);function eM(e){var t=e.entry,n=e.isExpanded,r=e.onToggleExpanded,a=(0,eO.default)(new Date(t.timestamp),"yyyy-MM-dd HH:mm:ss"),o=t.state.playgroundState.state;return(0,i.jsx)(eN.AccordionItem,{expanded:n,onClick:r,headerContent:(0,i.jsxs)(H.View,{row:!0,align:"center",gap:8,children:[(0,i.jsx)($.Text,{variant:"code",color:"dimmer",children:a}),(0,i.jsx)($.Text,{variant:"code",children:o})]}),children:(0,i.jsx)(eC.default,{json:t.state})})}var eL=e.i(612651),eB=e.i(909478),eV=e.i(529810);e.s(["INNGEST_API_PORT",()=>3e3,"MASTRA_API_PORT",()=>5e3],67870);var eF=e.i(761732),eU=e.i(417120),eG=e.i(492267),e$=e.i(391038),eH=e.i(341727),ez=e.i(782672),eW=((t={}).INITIAL_BUILD_PREVIEW="INITIAL_BUILD_PREVIEW",t.WORKSPACE_CONNECTING="WORKSPACE_CONNECTING",t.WORKSPACE_RECONNECTING="WORKSPACE_RECONNECTING",t.NIX_IS_BROKEN="NIX_IS_BROKEN",t.SERVICES_LOADING="SERVICES_LOADING",t.APP_NOT_RUNNING_AGENT_WORKING="APP_NOT_RUNNING_AGENT_WORKING",t.APP_NOT_RUNNING_AGENT_IDLE="APP_NOT_RUNNING_AGENT_IDLE",t.APP_STARTING_AGENT_WORKING="APP_STARTING_AGENT_WORKING",t.APP_STARTING_AGENT_IDLE="APP_STARTING_AGENT_IDLE",t.MASTRA_API_NOT_READY="MASTRA_API_NOT_READY",t.INNGEST_API_NOT_READY="INNGEST_API_NOT_READY",t.READY="READY",t);function eq(){var e,t,n,r,i,a,o,s,l,u,f,p,h=(0,eH.default)(),m=h.didConnectOnce,g=h.didDisconnect,x=(0,ez.useNixError)(),y=(0,eT.useRunInfo)(),b=(0,eT.useWorkflowsRunState)(),w=(t=(e=(0,c._)((0,d.useState)(!1),2))[0],n=e[1],i=(r=(0,eG.useIsAgentStackRepl)()).isAgentStackRepl,a=r.loading,(0,eA.usePid2)(function(e,t){var r=t.signal;return(0,R._)(function(){var t,o,s,l,u,c,d,f;return(0,A._)(this,function(p){switch(p.label){case 0:if(a||!i)return[2];t=e.mastraApi.subscribeToReadiness.subscribe({},{signal:r}).resReadable,o=!1,s=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),u=(0,eI._)(t),p.label=2;case 2:return[4,u.next()];case 3:if(!(o=!(c=p.sent()).done))return[3,5];(d=c.value).ok?n(d.payload.ready):n(!1),p.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return f=p.sent(),s=!0,l=f,[3,12];case 7:if(p.trys.push([7,,10,11]),!(o&&null!=u.return))return[3,9];return[4,u.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(s)throw l;return[7];case 11:return[7];case 12:return[2]}})})()},[i,a]),t),_=(s=(o=(0,c._)((0,d.useState)(!1),2))[0],l=o[1],f=(u=(0,eG.useIsAgentStackRepl)()).isAgentStackRepl,p=u.loading,(0,eA.usePid2)(function(e,t){var n=t.signal;return(0,R._)(function(){var t,r,i,a,o,s,u,c;return(0,A._)(this,function(d){switch(d.label){case 0:if(p||!f)return[2];t=e.mastraApi.subscribeToInngestReadiness.subscribe({},{signal:n}).resReadable,r=!1,i=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),o=(0,eI._)(t),d.label=2;case 2:return[4,o.next()];case 3:if(!(r=!(s=d.sent()).done))return[3,5];(u=s.value).ok?l(u.payload.ready):l(!1),d.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return c=d.sent(),i=!0,a=c,[3,12];case 7:if(d.trys.push([7,,10,11]),!(r&&null!=o.return))return[3,9];return[4,o.return()];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(i)throw a;return[7];case 11:return[7];case 12:return[2]}})})()},[f,p]),s),k=(0,e$.useAutomationPreview)(),S=(0,eV.default)().ports,C=(0,eF.default)(S.portsState),j=(0,eU.useIsAgentWorking)(),T=null!==C&&!1===y.isWorkflowsLoading,E=Object.values(null!=b?b:{}).filter(function(e){return"agent"===e.workflow.author&&e.tasks.some(function(e){return"shell.exec"===e.config.task})}).sort(function(e,t){return e.startTime-t.startTime}),I=E.filter(function(e){return e.step===eS.WorkflowStateStep.RUNNING}),P=(I.length>0?I:E).flatMap(function(e){return e.tasks.map(function(t){return{task:t,runId:e.runId}})}).filter(function(e){return"shell.exec"===e.task.config.task}),D=function(e){var t=P.filter(function(t){return t.task.config.waitForPort===e}),n=t.filter(function(t){var n,r;return null==(r=t.task.metadata)||null==(n=r.openPorts)?void 0:n.some(function(t){return t.port===e&&t.forwarded})}),r=t.map(function(e){var t=e.runId;return null==b?void 0:b[t]}).filter(Boolean);return{hasWorkflowStarting:r.some(function(e){return(null==e?void 0:e.step)===eS.WorkflowStateStep.RUNNING})&&0===n.length,hasWorkflowNotRunning:0===r.length||r.every(function(e){return(null==e?void 0:e.step)!==eS.WorkflowStateStep.RUNNING})}},O=D(3e3),N=D(5e3);return{areNecessaryServicesReady:T,didConnectOnce:m,didDisconnect:g,isAgentWorking:j,nixError:x,isMastraApiReady:w,isInngestApiReady:_,isAnyWorkflowStarting:O.hasWorkflowStarting||N.hasWorkflowStarting,isAnyWorkflowNotRunning:O.hasWorkflowNotRunning||N.hasWorkflowNotRunning,isInitialBuildPreview:k.initialBuildState===e$.InitialBuildState.Building||k.initialBuildState===e$.InitialBuildState.WaitingForInput||k.initialBuildState===e$.InitialBuildState.Stopped}}function eK(){var e=eq(),t=e.areNecessaryServicesReady,n=e.didConnectOnce,r=e.didDisconnect,i=e.isAgentWorking,a=e.nixError,o=e.isMastraApiReady,s=e.isInngestApiReady,l=e.isAnyWorkflowStarting,u=e.isAnyWorkflowNotRunning;if(e.isInitialBuildPreview)return{state:"INITIAL_BUILD_PREVIEW"};if(!n)return{state:"WORKSPACE_CONNECTING"};if(r)return{state:"WORKSPACE_RECONNECTING"};if((null==a?void 0:a.status)==="error"||(null==a?void 0:a.status)==="rebuilding-after-error")return{state:"NIX_IS_BROKEN",nixError:a};if(!t)return{state:"SERVICES_LOADING"};if(u)if(i)return{state:"APP_NOT_RUNNING_AGENT_WORKING"};else return{state:"APP_NOT_RUNNING_AGENT_IDLE"};if(l)if(i)return{state:"APP_STARTING_AGENT_WORKING"};else return{state:"APP_STARTING_AGENT_IDLE"};return o?s?{state:"READY"}:{state:"INNGEST_API_NOT_READY"}:{state:"MASTRA_API_NOT_READY"}}e.s(["PlaygroundState",()=>eW,"usePlaygroundState",()=>eK,"usePlaygroundStateInputs",()=>eq],102570),e.i(148382);var eY=e.i(346715),eQ=e.i(485273),eX=e.i(541793),eZ=e.i(198822),eJ=e.i(852819),e0=(0,eX.atom)([]);function e1(){var e,t=(0,N.default)(),n=(0,eZ.useWorkspaceToolPanesQuery)({variables:{replId:t}}).data,r=(0,eQ.useRouter)();return(null==n||null==(e=n.currentUser)?void 0:e.isAdmin)||!!r.query.debug}function e2(e){var t=e.stateHistory,n=(0,c._)((0,d.useState)(new Set([0])),2),r=n[0],a=n[1],o=function(e){a(function(t){var n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return(0,i.jsx)(H.View,{children:t.map(function(e,t){return(0,i.jsx)(eM,{entry:e,isExpanded:r.has(t),onToggleExpanded:function(){return o(t)}},e.timestamp)})})}var e3=(0,eX.atom)([]);function e5(){return(0,eJ.useValue)(e3)}function e4(){var e,t=(0,N.default)(),n=(0,eZ.useWorkspaceToolPanesQuery)({variables:{replId:t}}).data,r=(0,eQ.useRouter)();return(null==n||null==(e=n.currentUser)?void 0:e.isAdmin)||!!r.query.debug}function e8(e){var t=e4(),n=(0,eJ.useSet)(e3),r=(0,d.useRef)();(0,d.useEffect)(function(){if(t){var i=JSON.stringify(e);if(r.current!==i){r.current=i;var a={timestamp:Date.now(),state:e};n(function(e){return[a].concat((0,eY._)(e)).slice(0,100)})}}},[e,t,n])}function e6(e){var t=e.entry,n=e.isExpanded,r=e.onToggleExpanded,a=(0,eO.default)(new Date(t.timestamp),"yyyy-MM-dd HH:mm:ss"),o=t.state.agentAwareWebviewState.state;return(0,i.jsx)(eN.AccordionItem,{expanded:n,onClick:r,headerContent:(0,i.jsxs)(H.View,{row:!0,align:"center",gap:8,children:[(0,i.jsx)($.Text,{variant:"code",color:"dimmer",children:a}),(0,i.jsx)($.Text,{variant:"code",children:o})]}),children:(0,i.jsx)(eC.default,{json:t.state})})}function e7(e){var t=e.stateHistory,n=(0,c._)((0,d.useState)(new Set([0])),2),r=n[0],a=n[1],o=function(e){a(function(t){var n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return(0,i.jsx)(H.View,{children:t.map(function(e,t){return(0,i.jsx)(e6,{entry:e,isExpanded:r.has(t),onToggleExpanded:function(){return o(t)}},e.timestamp)})})}e.s(["usePreviewStateHistory",()=>e5,"usePreviewStateTracker",()=>e8,"useShouldTrackPreviewStateHistory",()=>e4],345863);var e9=e.i(446530),te=e.i(613355),tt=e.i(929872),tn=((n=tn||{}).Repl="repl",n.Pid2="pid2",n.Pid2Repl="pid2Repl",n.MuxedShell="pid2MuxedShell",n.Logs="logs",n.LSP="lsp",n.Ai="ai",n.AiChat="aiChat",n.Survey="survey",n.Git="git",n.History2="history2",n.InngestEvents="inngestEvents",n.Metadata="metadata",n.Override="override",n.DDRum="rum",n.CommandBar="commandBar",n.Workflows="workflows",n.TriggerBSOD="triggerBSOD",n.PreviewState="previewState",n.PlaygroundState="playgroundState",n.Subrepl="subrepl",n.Connections="connections",n),tr=(r={},(0,u._)(r,"repl",T.ReplView),(0,u._)(r,"pid2",C.Pid2Debug),(0,u._)(r,"pid2Repl",j.default),(0,u._)(r,"pid2MuxedShell",function(){var e=(0,c._)((0,d.useState)([]),2),t=e[0],n=e[1];return(0,eA.usePid2)(function(e,t){var r=t.signal;return(0,R._)(function(){var t,i,a,o,s,l,u,c;return(0,A._)(this,function(d){switch(d.label){case 0:t=e.shellExec.monitorAll.subscribe({},{signal:r}).resReadable,i=!1,a=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),s=(0,eI._)(t),d.label=2;case 2:return[4,s.next()];case 3:if(!(i=!(l=d.sent()).done))return[3,5];if(!(u=l.value).ok)return[2];n(u.payload.processes),d.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return c=d.sent(),a=!0,o=c,[3,12];case 7:if(d.trys.push([7,,10,11]),!(i&&null!=s.return))return[3,9];return[4,s.return()];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(a)throw o;return[7];case 11:return[7];case 12:return[2]}})})()},[]),(0,i.jsx)(H.View,{children:(0,i.jsx)(eC.default,{json:t})})}),(0,u._)(r,"logs",w.default),(0,u._)(r,"lsp",_.LSPLog),(0,u._)(r,"ai",g.GhostwriterLogs),(0,u._)(r,"aiChat",p.AiChatDebug),(0,u._)(r,"survey",function(e){e.isHidden,e.performPaneOperation;var t,n,r,a,o,s,l,u,f=(0,c._)((0,d.useState)(null),2),p=f[0],h=f[1],m=(0,ep.useShouldShowRandomCheckpointSurvey)(),g=(0,ep.useIsPublishClickedCompleted)(),x=(0,el.useNumCheckpointsCompleted)(),y=(0,ep.useIsFirstCheckpointCompleted)(),b=(0,eg.useIsCurrentSessionInitialAgentSession)(),w=(t={variables:{limit:100}},n=(0,q._)({},et,t),Q.useQuery(en,n)),_=w.data,k=w.loading,S=w.error,C=w.refetch,j=(0,c._)((r=(0,q._)({},et,void 0),X.useMutation(ei,r)),1)[0],T=(0,es.useCurrentSurveyTrigger)(),E=(a={skip:!T,variables:{trigger:T}},o=(0,q._)({},et,a),Q.useQuery(er,o)).data,I=!!(null==E||null==(s=E.currentUser)?void 0:s.hasCompletedBuildScoreSurveyForTrigger),P=null==_||null==(u=_.currentUser)||null==(l=u.id)?void 0:l.toString();if(k)return(0,i.jsx)(H.View,{className:e_.default.container,children:(0,i.jsx)($.Text,{children:"Loading survey responses..."})});if(S)return(0,i.jsx)(H.View,{className:e_.default.container,children:(0,i.jsxs)($.Text,{className:e_.default.errorText,children:["Error loading survey responses: ",S.message]})});var D=(null==_?void 0:_.buildScoreSurveyResponses)||[];return(0,i.jsxs)(H.View,{clsx:e_.default.container,p:16,gap:16,children:[(0,i.jsxs)(H.View,{gap:8,p:12,clsx:e_.default.debugInfoSection,children:[(0,i.jsx)($.Text,{variant:"subheadDefault",children:(0,i.jsx)("strong",{children:"Survey Trigger Debug Info"})}),(0,i.jsxs)(H.View,{gap:4,children:[(0,i.jsxs)($.Text,{variant:"small",children:["Current trigger: ",null!=T?T:"undefined"]}),(0,i.jsxs)($.Text,{variant:"small",children:["Current trigger completed:"," ",T?String(I):"N/A"]}),(0,i.jsxs)($.Text,{variant:"small",children:["Agent git commits: ",x]}),(0,i.jsxs)($.Text,{variant:"small",children:["Is first checkpoint completed: ",String(y)]}),(0,i.jsxs)($.Text,{variant:"small",children:["Is initial session: ",String(b)]}),(0,i.jsxs)($.Text,{variant:"small",children:["Should show random checkpoint survey:"," ",String(m)]}),(0,i.jsxs)($.Text,{variant:"small",color:"dimmer",children:["Random checkpoint threshold:"," ",2]}),(0,i.jsxs)($.Text,{variant:"small",color:"dimmer",children:["Random checkpoint probability:"," ","1 in ".concat(Math.round(1/eh))]}),(0,i.jsxs)($.Text,{variant:"small",children:["Has completed publish clicked: ",String(g)]})]})]}),(0,i.jsx)(V.Button,{text:"Refresh responses",onClick:function(){return C()},size:"small",iconLeft:(0,i.jsx)(ea.default,{})}),(0,i.jsx)(ex.IndexTable,{autoLayout:!0,title:"Build Score Survey Responses",loading:k,columns:[{key:"trigger",label:"Trigger",isRowHeader:!0},{key:"score",label:"Score"},{key:"question",label:"Question"},{key:"repl",label:"Repl"},{key:"created",label:"Created"},{key:"status",label:"Status"},{key:"actions",label:"Actions",alignment:"end"}],items:D,emptyState:(0,i.jsx)(H.View,{row:!0,align:"center",gap:12,p:16,children:(0,i.jsx)($.Text,{children:"No survey responses found for this user."})}),children:function(e){return(0,i.jsxs)(ew.TableRow,{children:[(0,i.jsx)(eb.TableCell,{children:(0,i.jsx)($.Text,{clsx:e.timeDeleted&&e_.default.deletedText,children:e.trigger})}),(0,i.jsx)(eb.TableCell,{children:(0,i.jsx)($.Text,{clsx:e.timeDeleted&&e_.default.deletedText,children:null!==e.responseScore?e.responseScore:"Skipped"})}),(0,i.jsx)(eb.TableCell,{children:(0,i.jsx)($.Text,{clsx:e.timeDeleted&&e_.default.deletedText,multiline:!0,children:e.questionText})}),(0,i.jsx)(eb.TableCell,{children:e.replId?(0,i.jsx)(W.default,{href:"/@".concat(e.replId),clsx:e.timeDeleted&&e_.default.deletedText,children:e.replId}):(0,i.jsx)($.Text,{color:"dimmer",children:"-"})}),(0,i.jsx)(eb.TableCell,{children:(0,i.jsx)($.Text,{clsx:e.timeDeleted&&e_.default.deletedText,children:new Date(e.timeCreated).toLocaleString()})}),(0,i.jsx)(eb.TableCell,{children:e.timeDeleted?(0,i.jsx)(ey.Pill,{colorway:"negative",children:"Deleted"}):(0,i.jsx)(ey.Pill,{colorway:"positive",children:"Active"})}),(0,i.jsx)(eb.TableCell,{children:!e.timeDeleted&&(0,i.jsx)(ev.IconButton,{alt:"Delete survey response",onClick:function(){var t;return t=e.id,(0,R._)(function(){return(0,A._)(this,function(e){switch(e.label){case 0:if(!P)return[2];h(t),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,j({variables:{surveyResponseId:t}})];case 2:return e.sent(),[4,C()];case 3:case 4:return e.sent(),[3,6];case 5:return h(null),[7];case 6:return[2]}})})()},disabled:p===e.id,children:(0,i.jsx)(eo.default,{})})})]},e.id)}})]})}),(0,u._)(r,"git",x.default),(0,u._)(r,"history2",y.default),(0,u._)(r,"inngestEvents",b.InngestEvents),(0,u._)(r,"metadata",k.Metadata),(0,u._)(r,"override",S.OverrideGurl),(0,u._)(r,"rum",E.Rum),(0,u._)(r,"commandBar",h.CommandBarDebug),(0,u._)(r,"workflows",function(){var e=(0,c._)((0,d.useState)([]),2),t=e[0],n=e[1],r=(0,c._)((0,d.useState)(void 0),2),a=r[0],o=r[1],s=(0,eT.useWorkflowsConfig)(),l=(0,eT.useWorkflows)(),u=(0,eT.useWorkflowsRunState)();(0,d.useEffect)(function(){var e,t,r=null!=(t=null==l?void 0:l.map(function(e){return{id:e.name}}))?t:[];n(r),o(null==(e=r[0])?void 0:e.id)},[l]);var f=(0,ej.usePid2Callback)(function(e){return function(t){var n=t.workflowId;return e.workflows.runWorkflow.rpc({workflowId:n})}},[]),p=(0,ej.usePid2Callback)(function(e){return function(t){var n=t.runId;e.workflows.stopRun.rpc({runId:n})}},[]);return(0,i.jsxs)(H.View,{p:4,children:[(0,i.jsxs)(H.View,{children:[a?(0,i.jsx)(eR.Select,{"aria-label":"Workflow",onSelectionChange:function(e){o(e)},selectedKey:a,items:t,children:function(e){return(0,i.jsx)(eE.ListBoxItem,{label:e.id},e.id)}}):(0,i.jsx)(H.View,{row:!0,align:"center",justify:"center",grow:!0,shrink:!0,p:4,children:(0,i.jsx)($.Text,{children:"No workflow selected"})}),(0,i.jsx)(V.Button,{onClick:function(){return(0,R._)(function(){return(0,A._)(this,function(e){switch(e.label){case 0:if(!a||!f)return[2];return[4,f({workflowId:a})];case 1:return e.sent(),[2]}})})()},text:"Run",disabled:!a})]}),u?(0,i.jsx)(H.View,{children:Object.entries(u).map(function(e){var t=(0,c._)(e,2),n=t[0],r=t[1];return(0,i.jsxs)(H.View,{row:!0,gap:4,align:"center",children:[n," step: ",r.step,r.step===eS.WorkflowStateStep.RUNNING?(0,i.jsx)(V.Button,{text:"Stop",onClick:function(){null==p||p({runId:n})}}):null]},n)})}):null,(0,i.jsxs)(H.View,{children:[(0,i.jsx)($.Text,{children:"Run State"}),(0,i.jsx)(eC.default,{json:u})]}),(0,i.jsxs)(H.View,{children:[(0,i.jsx)($.Text,{children:"Config"}),(0,i.jsx)(eC.default,{json:s})]})]})}),(0,u._)(r,"triggerBSOD",function(){var e=(0,ek.useThrowBsod)();return(0,i.jsx)(H.View,{gap:16,children:(0,i.jsx)(V.Button,{text:"Throw BSOD",onClick:function(){return e({error:Error("[DEBUG] TriggerBSOD"),origin:"debug: Debug"})}})})}),(0,u._)(r,"previewState",function(){var e=e4(),t=e5();return e?(0,i.jsxs)(H.View,{gap:16,children:[(0,i.jsx)(V.Button,{text:"Copy as JSON",onClick:function(){(0,eD.default)(JSON.stringify(t,null,2))},iconLeft:(0,i.jsx)(eP.default,{})}),(0,i.jsx)(e7,{stateHistory:t})]}):(0,i.jsxs)(H.View,{gap:8,children:[(0,i.jsx)($.Text,{variant:"small",color:"dimmer",children:"Preview state tracking is not enabled."}),(0,i.jsx)($.Text,{variant:"small",color:"dimmer",children:"This feature is only available in agent repls for developers, admins, or when using ?debug=true."})]})}),(0,u._)(r,"playgroundState",function(){e=eq(),t=eK(),n=(0,eT.useRunInfo)(),r=(0,eV.default)().ports,a={playgroundState:t,playgroundStateInputs:e,runInfo:n,openedAndForwardedPorts:(0,eB.useOpenedAndForwardedPorts)(r).map(function(e){return(0,eL.default)(e,["processInfo"])})},o=e1(),s=(0,eJ.useSet)(e0),l=(0,d.useRef)(),(0,d.useEffect)(function(){if(o){var e=JSON.stringify(a);if(l.current!==e){l.current=e;var t={timestamp:Date.now(),state:a};s(function(e){return[t].concat((0,eY._)(e)).slice(0,100)})}}},[a,o,s]);var e,t,n,r,a,o,s,l,u=e1(),c=(0,eJ.useValue)(e0);return u?(0,i.jsxs)(H.View,{gap:16,children:[(0,i.jsx)(V.Button,{text:"Copy as JSON",onClick:function(){(0,eD.default)(JSON.stringify(c,null,2))},iconLeft:(0,i.jsx)(eP.default,{})}),(0,i.jsx)(e2,{stateHistory:c})]}):(0,i.jsxs)(H.View,{gap:8,children:[(0,i.jsx)($.Text,{variant:"small",color:"dimmer",children:"Playground state tracking is not enabled."}),(0,i.jsx)($.Text,{variant:"small",color:"dimmer",children:"This feature is only available in agent repls for developers, admins, or when using ?debug=true."})]})}),(0,u._)(r,"subrepl",function(e){var t,n=e.isHidden,r=(0,N.default)(),a=(0,c._)((0,d.useState)(""),2),o=a[0],s=a[1],l=(0,c._)((0,d.useState)(null),2),u=l[0],f=l[1],p=(0,c._)((0,d.useState)(null),2),h=p[0],m=p[1],g=(0,c._)((0,P.useCreateSubreplMutation)(),2),x=g[0],y=g[1].loading,b=(t=(0,L.useInsertFloatingPaneIfNotExists)(),(0,d.useCallback)(function(e,n){t({type:"subreplWorkspace",data:{replId:e,subreplId:n}},{commit:!0,location:"center"})},[t])),w=(0,d.useCallback)(function(){f(null);var e=o.trim();e?(0,M.isValidSubreplId)(e)?b(r,e):f("Invalid subrepl ID format. Expected 10 lowercase alphanumeric characters."):f("Please enter a subrepl ID")},[o,b,r]),_=(0,d.useCallback)(function(e){"Enter"===e.key&&w()},[w]),k=(0,d.useCallback)(function(){return(0,R._)(function(){var e,t,n;return(0,A._)(this,function(i){switch(i.label){case 0:f(null),m(null),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,x({variables:{input:{replId:r}}})];case 2:if(!(t=null==(e=i.sent().data)?void 0:e.createSubrepl))return f("Failed to create subrepl: No response"),[2];return"CreateSubreplResult"===t.__typename?(m(t.subreplId),s(t.subreplId)):f(t.message),[3,4];case 3:return n=i.sent(),f("Failed to create subrepl: ".concat((0,I._)(n,Error)?n.message:"Unknown error")),[3,4];case 4:return[2]}})})()},[x,r]),S=(0,d.useCallback)(function(){h&&b(r,h)},[h,b,r]);return n?null:(0,i.jsxs)(H.View,{clsx:z.default.container,p:16,gap:16,children:[(0,i.jsxs)(H.View,{gap:4,children:[(0,i.jsx)($.Text,{variant:"subheadDefault",children:"Subrepl debug"}),(0,i.jsx)($.Text,{variant:"small",color:"dimmer",children:"Open a subrepl workspace as a floating pane. Enter the subrepl ID (10-character alphanumeric) to establish a connection."})]}),(0,i.jsx)(H.View,{gap:8,children:(0,i.jsxs)(H.View,{row:!0,gap:8,children:[(0,i.jsx)($.Text,{variant:"small",color:"dimmer",children:"Parent repl ID:"}),(0,i.jsx)($.Text,{variant:"small",clsx:z.default.monospace,children:r})]})}),(0,i.jsxs)(H.View,{gap:12,children:[(0,i.jsxs)(H.View,{gap:8,children:[(0,i.jsx)($.Text,{variant:"small",children:"Create new subrepl"}),(0,i.jsxs)(H.View,{row:!0,gap:8,align:"center",children:[(0,i.jsx)(V.Button,{text:y?"Creating...":"Create subrepl",onClick:k,colorway:"primary",disabled:y}),h?(0,i.jsxs)(H.View,{row:!0,gap:4,align:"center",children:[(0,i.jsx)($.Text,{variant:"small",color:"dimmer",children:"Created:"}),(0,i.jsx)($.Text,{variant:"small",clsx:z.default.monospace,children:h}),(0,i.jsx)(V.Button,{text:"Open",onClick:S,colorway:"primary",size:"small",iconLeft:(0,i.jsx)(D.default,{})})]}):null]})]}),(0,i.jsx)(F.DividerH,{})]}),(0,i.jsxs)(H.View,{gap:12,children:[(0,i.jsxs)(H.View,{gap:4,children:[(0,i.jsx)($.Text,{variant:"small",children:"Open existing subrepl"}),(0,i.jsxs)(H.View,{row:!0,gap:8,children:[(0,i.jsx)(H.View,{grow:!0,children:(0,i.jsx)(U.Input,{placeholder:"e.g., abc1234def",value:o,onChange:function(e){return s(e.target.value)},onKeyDown:_})}),(0,i.jsx)(V.Button,{text:"Open",onClick:w,colorway:"primary",iconLeft:(0,i.jsx)(D.default,{})})]})]}),u?(0,i.jsx)(G.StatusBanner,{icon:(0,i.jsx)(O.default,{}),colorway:"negative",text:u}):null,(0,i.jsxs)(B.ShadesSurface,{br:"container",border:"regular",p:12,gap:4,children:[(0,i.jsx)($.Text,{variant:"small",children:"How to get a subrepl ID"}),(0,i.jsx)($.Text,{variant:"small",color:"dimmer",children:"Subrepl IDs are generated when an agent spawns a parallel task. Check the agent logs or chat messages for the subrepl ID."})]})]})]})}),(0,u._)(r,"connections",m.ConnectionsDebug),r),ti=Object.values(tn),ta=(0,e9.cssRecord)({surface:[te.rcss.height("100%")],tabs:[{flexWrap:"wrap",flexDirection:"row",gap:"4px"}],tab:[te.rcss.overflow("auto")],content:[te.rcss.height("100%")]});function to(e){var t=e.paneOptions,n=(0,c._)((0,d.useState)("repl"),2),r=n[0],a=n[1],o=(0,f.useFlag)({controlName:"flag-repl-portal",default:!1});(0,d.useEffect)(function(){o||"subrepl"!==r||a("repl")},[o,r]);var s=(0,d.useMemo)(function(){return ti.filter(function(e){return"subrepl"!==e||!!o})},[o]).map(function(e){return(0,i.jsx)(V.Button,{colorway:e===r?"primary":void 0,onClick:function(){return a(e)},text:e},e)});return(0,i.jsx)(el.CheckpointProvider,{children:(0,i.jsxs)(tt.Surface,{background:"default",css:ta.surface,p:4,gap:8,children:[(0,i.jsx)(H.View,{css:ta.tabs,children:s}),(0,i.jsx)(H.View,{css:ta.tab,grow:!0,shrink:!0,children:Object.entries(tr).map(function(e){var n=(0,c._)(e,2),a=n[0],o=n[1];return(0,i.jsx)(H.View,{css:ta.content,grow:!0,shrink:!0,style:{display:a!==r?"none":"inherit"},children:"override"===a&&"override"!==r?null:(0,i.jsx)(o,{isHidden:t.isHidden||r!==a,performPaneOperation:t.performPaneOperation})},a)})})]})})}e.i(282890);var ts=e.i(716636),tl=e.i(480028),tu=a.Type.Object({type:a.Type.Literal("adminPanel")}),tc={Content:function(e){var t=e.options;return(0,i.jsx)(to,{paneOptions:t})},Icon:function(e){var t=e.size;return(0,i.jsx)(l.IconContext.Provider,{value:{color:tl.tokens.redStronger,size:t},children:(0,i.jsx)(s.default,{})})},getTitle:function(){return"Debug"},getTitlePill:function(){return{text:"Staff-only",colorway:"warning"}},description:"Replit developer debugging tools",category:ts.PaneCategory.Other,decode:function(e){return o.Value.Decode(tu,e)}};e.s(["adminPanelUI",()=>tc],309968);var td=e.i(831787),tf=e.i(61524),tp=e.i(160290),th=e.i(1736),tm=e.i(959406),tg=(0,e9.cssRecord)({container:[te.rcss.coverContainer,te.rcss.py(4),te.rcss.px(8)]});function tv(e){var t=e.performPaneOperation,n=(0,eV.default)().fs,r="cmdOrCtrlKey"===(0,tf.usePreferences)("multiselectModifierKey").preferences.multiselectModifierKey?"cmdOrCtrlKey":"altKey",a=(0,th.useShouldHideFileInWorkspace)(!0),o=(0,d.useCallback)(function(e){return!a(e.filename)},[a]),s=(0,tp.useFiletree)({fs:n,filter:o,multiselectModifierKey:r,readOnly:!0,fontSize:13,manageWidth:!0,onFileSelect:function(e){var n=e.path;t({operation:"replace",pane:(0,tm.getPaneForFile)(n)})}});return(0,i.jsx)(H.View,{css:tg.container,children:(0,i.jsx)(tp.Filetree,{store:s.store})})}var tx=a.Type.Object({type:a.Type.Literal("agentFiles")}),ty={Content:function(e){return(0,i.jsx)(tv,{performPaneOperation:e.options.performPaneOperation})},Icon:function(e){var t=e.size;return(0,i.jsx)(l.IconContext.Provider,{value:{color:tl.tokens.blurpleStrongest,size:t},children:(0,i.jsx)(td.default,{})})},getTitle:function(){return"Files"},category:ts.PaneCategory.WorkspaceFeatures,decode:function(e){return o.Value.Decode(tx,e)}};e.s(["agentFilesUI",()=>ty],94063)},141532,e=>{e.v({abbreviatedBetaText:"BetaDisclaimer-module__DnN4UG__abbreviatedBetaText",fullBetaText:"BetaDisclaimer-module__DnN4UG__fullBetaText"})},839565,e=>{e.v({automationTitle:"Header-module__-uOpxq__automationTitle",buildingPill:"Header-module__-uOpxq__buildingPill",buildingPillShadow:"Header-module__-uOpxq__buildingPillShadow",headerCenter:"Header-module__-uOpxq__headerCenter",headerLeft:"Header-module__-uOpxq__headerLeft",headerRight:"Header-module__-uOpxq__headerRight",headerRow:"Header-module__-uOpxq__headerRow"})},762258,219223,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(389959),i=e.i(140487),a=e.i(91720),o=e.i(739521),s=e.i(396776),l=e.i(960178),u=e.i(625484),c=e.i(531603),d=e.i(141532);function f(){var e=(0,t._)((0,r.useState)(!1),2),f=e[0],p=e[1];return(0,n.jsxs)(u.View,{children:[(0,n.jsx)(s.StatusBanner,{variant:"flush",text:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Text,{clsx:d.default.fullBetaText,children:"Agents and Automations are currently in beta"}),(0,n.jsx)(l.Text,{clsx:d.default.abbreviatedBetaText,multiline:!1,children:"Beta"})]}),colorway:"negative",clsx:d.default.betaBanner,action:(0,n.jsxs)(u.View,{gap:4,row:!0,children:[(0,n.jsx)(l.Text,{children:"Having trouble?"}),(0,n.jsx)(i.Button,{text:"Get help",variant:"underlined",onClick:function(){p(!0)}}),(0,n.jsx)(l.Text,{children:"or"}),(0,n.jsx)(a.ButtonLink,{href:"https://docs.replit.com/replitai/agents-and-automations",text:"read the docs",variant:"underlined",target:"_blank"})]})}),(0,n.jsx)(o.Modal,{isOpen:f,onRequestClose:function(){return p(!1)},children:(0,n.jsx)(c.default,{onRequestClose:function(){return p(!1)}})})]})}e.s(["default",()=>f],762258);var p=e.i(368964);e.i(925218);var h=e.i(267103),m=e.i(819906),g=e.i(205158),x=e.i(134663),y=e.i(820219),b=e.i(391038),w=e.i(99264),_=e.i(624782),k=e.i(839565);function S(e){var t=e.renderDebugButton,r=(0,y.useAutomationContext)().initialBuildState,i=r&&r!==b.InitialBuildState.Completed;return(0,n.jsxs)(u.View,{shrink:!0,justify:"start",px:12,py:8,gap:8,children:[(0,n.jsxs)(u.View,{clsx:k.default.headerRow,children:[(0,n.jsx)(u.View,{clsx:k.default.headerLeft,children:(0,n.jsx)(C,{})}),(0,n.jsx)(u.View,{clsx:k.default.headerCenter,children:(0,n.jsx)(j,{})}),(0,n.jsx)(u.View,{clsx:k.default.headerRight,children:t})]}),i&&r?(0,n.jsx)(T,{initialBuildState:r}):null]})}function C(){var e,t=(0,y.useAutomationContext)(),a=t.workflowDetail,o=t.triggerType,s=t.sidebarState,u=t.executeWorkflow,c=t.initialBuildState,d=t.connectorInfo,f=t.openConnectorFlow,x=t.workflowExecutionState,_=o===p.AgentStackPlatformType.ConnectorTrigger||o===p.AgentStackPlatformType.TimeBased,k=o===p.AgentStackPlatformType.ConnectorTrigger,S=(null==d?void 0:d.isMissingConnection)||!1,C=(null==d?void 0:d.connectorDisplayName)||"Connector",j=(null==d?void 0:d.inferredConnectorName)||null,T=(0,r.useCallback)(function(){o===p.AgentStackPlatformType.ConnectorTrigger?s.set({selectedNodeId:w.TRIGGER_NODE_ID,view:"trigger-testing"}):null==u||u()},[o,s,u]),E=(0,r.useCallback)(function(){j&&f(j)},[f,j]),R=c&&c!==b.InitialBuildState.Completed,I=(0,h.useObservable)(null!=(e=null==x?void 0:x.map(function(e){return e.type}))?e:null,"idle");return S&&E?(0,n.jsx)(i.Button,{iconLeft:(0,n.jsx)(g.default,{}),text:"Reconnect ".concat(C),colorway:"primary",onClick:E}):_&&T?(0,n.jsx)(i.Button,{text:"Test automation",colorway:R?void 0:"primary",iconLeft:(0,n.jsx)(m.default,{}),onClick:T,disabled:null===a||!k&&"executing"===I||R,loading:!k&&"executing"===I}):(0,n.jsx)(l.Text,{children:"Testing environment"})}function j(){var e,t=(0,y.useAutomationContext)().workflowDetail,r=(0,w.kebabCaseToSentenceCase)(null!=(e=null==t?void 0:t.name)?e:"automation");return(0,n.jsx)(l.Text,{showTooltipOnTruncate:!0,variant:"subheadDefault",clsx:k.default.automationTitle,children:r})}function T(e){var t,r=e.initialBuildState;return(0,n.jsx)(u.View,{align:"center",children:(0,n.jsx)(_.Pill,{clsx:k.default.buildingPillShadow,text:(0,n.jsx)(u.View,{clsx:k.default.buildingPill,px:4,children:(t=r)===b.InitialBuildState.WaitingForInput?(0,n.jsx)(l.Text,{children:"Waiting for input"}):t===b.InitialBuildState.Stopped?(0,n.jsx)(l.Text,{children:"Stopped building"}):(0,n.jsx)(x.AnimatedStatusText,{text:"Building"})})})})}e.s(["Header",()=>S],219223)},973502,e=>{e.v({popoverContent:"HeaderMenu-module__6tza3a__popoverContent",popoverContentText:"HeaderMenu-module__6tza3a__popoverContentText"})},878129,e=>{e.v({canvasAreaWrapper:"index-module__gbtx1a__canvasAreaWrapper",container:"index-module__gbtx1a__container",headerWrapper:"index-module__gbtx1a__headerWrapper",overlayContainer:"index-module__gbtx1a__overlayContainer",textContainerMaxWidth:"index-module__gbtx1a__textContainerMaxWidth"})},79998,137182,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(960933),i=e.i(862927),a=e.i(629536),o=e.i(116235),s=e.i(399217),l=e.i(368964),u=e.i(634759),c=e.i(360800),d=e.i(477891),f=e.i(416298),p=e.i(917063),h=e.i(492267),m=e.i(820219),g=e.i(762258),x=e.i(219223),y=e.i(530658),b=e.i(67870),w=e.i(167392),_=e.i(252204),k=e.i(902379),S=e.i(813675),C=e.i(134405),j=e.i(173703),T=e.i(140487),E=e.i(91720),R=e.i(604963),I=e.i(960178),A=e.i(625484),P=e.i(973502),D=function(){var e=(0,y._)((0,n.useState)(!1),2),r=e[0],i=e[1],a=(0,k.useDevUrl)().url,o=(0,C.useAgentAwareWebviewState)(),s=a?(0,S.addPortToUrl)(a,b.INNGEST_API_PORT).toString():null;return(0,t.jsxs)(R.PopoverTrigger,{label:"Header Menu",isOpen:r,onOpenChange:i,children:[(0,t.jsx)(T.Button,{size:"small",variant:"default",text:"Debug",iconRight:(0,t.jsx)(w.default,{}),onClick:function(){return i(!r)}}),(0,t.jsx)(j.ShadesSurface,{p:8,gap:20,clsx:P.default.popoverContent,children:o.state===C.WebviewState.READY?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.Text,{clsx:P.default.popoverContentText,color:"dimmer",children:"Replit Agent uses the Mastra and Inngest frameworks to build your agents and automations. Visit your Mastra dashboard for more details about your app, and Inngest traces to view your test runs."}),(0,t.jsxs)(A.View,{gap:8,row:!1,children:[(0,t.jsx)(E.ButtonLink,{size:"small",variant:"outlined",text:"Mastra dashboard",iconRight:(0,t.jsx)(_.default,{}),href:null!=a?a:"",target:"_blank"}),(0,t.jsx)(E.ButtonLink,{size:"small",variant:"outlined",text:"Inngest traces",iconRight:(0,t.jsx)(_.default,{}),href:null!=s?s:"",target:"_blank"})]})]}):(0,t.jsx)(I.Text,{clsx:P.default.popoverContentText,color:"dimmer",children:"Replit Agent uses the Mastra and Inngest frameworks to build your agents and automations. You can open the Mastra playground and Inngest traces from here once your app is running."})})]})},O=e.i(297083),N=e.i(817556),M=e.i(878420),L=e.i(569384),B=e.i(973245),V=e.i(304277);e.i(566901);var F=e.i(951262);function U(){var e=(0,L._)(["\n  fragment WorkspaceReplInfo on Repl {\n    id\n    title\n    iconUrl\n    url\n    timeCreated\n    user {\n      id\n      username\n      image\n    }\n  }\n"]);return U=function(){return e},e}function G(){var e=(0,L._)(["\n  fragment WorkspaceConnectionInfo on OintConnection {\n    type\n    connectionId\n    connectorName\n    displayName\n    iconPath\n    status\n    environment\n    scopes\n    repls {\n      ...WorkspaceReplInfo\n    }\n  }\n  ","\n"]);return G=function(){return e},e}function $(){var e=(0,L._)(["\n  fragment WorkspaceConnectorContext on CurrentUserConnectorContext {\n    openIntClientToken\n    connectorWhitelist\n    connections {\n      ...WorkspaceConnectionInfo\n    }\n    connectorConfigs {\n      id\n      type\n      connectorName\n      displayName\n      iconPath\n      config\n      webhookEvents {\n        name\n        model\n        description\n      }\n    }\n  }\n  ","\n"]);return $=function(){return e},e}function H(){var e=(0,L._)(["\n  fragment WorkspaceOrgConnectorContext on OrgConnectorContext {\n    openIntClientToken\n    connectorWhitelist\n    connections {\n      ...WorkspaceConnectionInfo\n    }\n    connectorConfigs {\n      id\n      type\n      connectorName\n      displayName\n      iconPath\n      webhookEvents {\n        name\n        model\n        description\n      }\n    }\n  }\n  ","\n"]);return H=function(){return e},e}function z(){var e=(0,L._)(["\n  query WorkspaceUserConnectors {\n    currentUser {\n      ... on CurrentUser {\n        id\n        isSubscribed\n        connectorContext {\n          __typename\n          ...WorkspaceConnectorContext\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return z=function(){return e},e}function W(){var e=(0,L._)(["\n  query WorkspaceOrgConnectors($orgSlug: String!) {\n    currentUser {\n      ... on CurrentUser {\n        id\n        org(orgSlug: $orgSlug) {\n          __typename\n          ... on Org {\n            id\n            connectorContext {\n              __typename\n              ...WorkspaceOrgConnectorContext\n              ... on Error {\n                message\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return W=function(){return e},e}function q(){var e=(0,L._)(["\n  mutation CreateWorkspaceConnection($input: CreateConnectionInput!) {\n    createConnection(input: $input) {\n      ... on CreateConnection {\n        connectionId\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return q=function(){return e},e}function K(){var e=(0,L._)(["\n  mutation DeleteWorkspaceConnection($input: DeleteConnectionInput!) {\n    deleteConnection(input: $input) {\n      ... on DeleteConnection {\n        success\n      }\n    }\n  }\n"]);return K=function(){return e},e}var Y={},Q=(0,B.gql)(U()),X=(0,B.gql)(G(),Q),Z=(0,B.gql)($(),X),J=(0,B.gql)(H(),X),ee=(0,B.gql)(z(),Z);function et(e){var t=(0,M._)({},Y,e);return V.useQuery(ee,t)}var en=(0,B.gql)(W(),J);function er(e){var t=(0,M._)({},Y,e);return V.useQuery(en,t)}var ei=(0,B.gql)(q());function ea(e){var t=(0,M._)({},Y,e);return F.useMutation(ei,t)}var eo=(0,B.gql)(K());function es(e){var t=(0,M._)({},Y,e);return F.useMutation(eo,t)}e.s(["WorkspaceUserConnectorsDocument",()=>ee,"useCreateWorkspaceConnectionMutation",()=>ea,"useDeleteWorkspaceConnectionMutation",()=>es,"useWorkspaceOrgConnectorsQuery",()=>er,"useWorkspaceUserConnectorsQuery",()=>et],137182);var el=e.i(58261),eu=e.i(968783),ec=e.i(207237),ed=e.i(854760),ef=e.i(858248),ep=e.i(709485),eh=e.i(299798),em=e.i(927158),eg=e.i(394212);e.i(925218);var ev=e.i(112077),ex=e.i(222342),ey=e.i(391038),eb=e.i(102570),ew=(0,e.i(115306).default)(function(){return e.A(207544).then(function(e){return{default:e.WorkflowCanvasImpl}})},{loadableGenerated:{modules:[355221]},ssr:!1,loading:function(){return null}}),e_=e.i(712516),ek=e.i(293265),eS=e.i(721281),eC=e.i(642049),ej=e.i(803640),eT=e.i(529810),eE=e.i(982829),eR=e.i(729122),eI=e.i(480028),eA=e.i(446530),eP=e.i(123850),eD=e.i(613355),eO=(0,eP.createCssVarTokens)(["backgroundColor","color","hoverColor","hoverBackgroundColor"]),eN=eO.cssVars,eM=eO.styleTokens,eL=(0,eA.cssRecord)({wrapper:[eD.rcss.display.inlineFlex,{backgroundColor:eM.backgroundColor,color:eM.color,"&:hover":{color:eM.hoverColor,backgroundColor:eM.hoverBackgroundColor}},eD.rcss.align.center,eD.rcss.borderRadius(),eD.rcss.py(2),eD.rcss.px(6),eD.rcss.cursor.pointer]});function eB(e){var r,i=e.isDisabled,a=void 0!==i&&i,o=(0,eT.default)().fs,s=(0,eR.useTriggerLocalRun)(),l=(0,eR.useWorkflows)(),u=(0,eR.useWorkflowsRunState)(),c=(0,n.useMemo)(function(){var e=l.filter(function(e){return"agent"===e.author&&"parallel"!==e.mode});if(!u)return e;var t=new Set;return Object.values(u).forEach(function(e){e.step===eC.WorkflowStateStep.RUNNING&&t.add(e.workflow.name)}),e.filter(function(e){return!t.has(e.name)})},[l,u]),d=(0,em.usePid2Callback)(function(e){return function(){return(0,O._)(function(){return(0,N._)(this,function(t){switch(t.label){case 0:return[4,o.flush()];case 1:return t.sent(),s(eE.RunReason.RUN_BUTTON_CLICKED),[4,Promise.allSettled(c.map(function(e){return e.name}).map(function(t){return e.workflows.runWorkflow.rpc({workflowId:t})}))];case 2:return[2,t.sent().every(function(e){return"fulfilled"===e.status&&e.value.ok})]}})})()}},[o,s,c]),f=(0,n.useCallback)(function(){!a&&d&&((0,ef.track)(ep.events.WORKFLOW_RAN,{source:"playgroundPane",runner:"workflows"}),d())},[a,d]);return(0,t.jsxs)(A.View,{tag:"button",onClick:f,css:eL.wrapper,row:!0,gap:6,disabled:a||!d,style:(r={},(0,eS._)(r,eN.backgroundColor,a?eI.tokens.backgroundHighest:eI.tokens.accentPositiveDimmer),(0,eS._)(r,eN.color,a?eI.tokens.foregroundDimmer:eI.tokens.accentPositiveStrongest),(0,eS._)(r,eN.hoverColor,a?eI.tokens.foregroundDefault:eI.tokens.white),(0,eS._)(r,eN.hoverBackgroundColor,a?eI.tokens.greyDimmest:eI.tokens.accentPositiveDefault),r),children:[(0,t.jsx)(ej.default,{size:12}),(0,t.jsx)(I.Text,{children:"Run"})]})}var eV=e.i(396776),eF=e.i(878129);function eU(e){var n=e.entityName;return(0,t.jsx)(e_.default,{pane:{type:"automations"},icon:(0,t.jsx)(d.default,{size:48}),headerText:"Your app is not running",body:(0,t.jsxs)(A.View,{align:"center",row:!0,gap:4,children:[(0,t.jsx)(eB,{})," to see your ",n," in action."]})})}function eG(){var e=a.stackBlueprintDetails[u.StackBlueprint.STACK_BLUEPRINT_AGENT].displayName;return(0,t.jsxs)(A.View,{align:"center",justify:"center",p:48,gap:24,grow:!0,children:[(0,t.jsxs)(A.View,{align:"center",gap:12,children:[(0,t.jsx)(s.default,{size:48}),(0,t.jsx)(I.Text,{variant:"headerDefault",children:a.AUTOMATIONS_PANE_NAME})]}),(0,t.jsx)(A.View,{align:"center",gap:16,clsx:eF.default.textContainerMaxWidth,children:(0,t.jsxs)(I.Text,{textAlign:"center",color:"dimmer",children:['This tool is used to visualize and test your agents and automations created using the "',e,'" app type.']})})]})}function e$(e){var n=e.state,r=e.agentStackPlatformType;if("none"===n.type)return null;var i=r===l.AgentStackPlatformType.TimeBased?"automation":"agent",a=function(){switch(n.type){case"loading":return(0,t.jsxs)(A.View,{gap:16,align:"center",children:[(0,t.jsx)(c.default,{size:48,variant:"minimal"}),(0,t.jsx)(I.Text,{children:"Your ".concat(i," will be ready soon")})]});case"error":return(0,t.jsx)(eV.StatusBanner,{icon:(0,t.jsx)(f.default,{}),text:n.message,colorway:"negative",action:n.onRetry?(0,t.jsx)(T.Button,{text:"Retry",onClick:n.onRetry}):void 0});case"empty-state":return(0,t.jsxs)(A.View,{gap:16,align:"center",children:[(0,t.jsx)(c.default,{size:48,variant:"minimal"}),(0,t.jsx)(I.Text,{variant:"headerDefault",children:"Your ".concat(i," is building")}),(0,t.jsx)(I.Text,{variant:"small",color:"dimmer",children:"It will appear here once Replit Agent has completed it."})]});case"app-not-running":return(0,t.jsx)(eU,{entityName:i})}}();return(0,t.jsx)(A.View,{clsx:eF.default.overlayContainer,children:a})}function eH(e){var r,i,a,o,s,u,c,d,f,b,w,_,k,S,C,j,T,E,R,I,P,L,B,V,F,U,G,$,H,z=e.openPane,W=(0,ek.useAgentStackPlatformType)().agentStackPlatformType,q=(0,eb.usePlaygroundState)(),K=(0,h.useIsAgentStackRepl)().isAgentStackRepl,Y=(r=q.state===eb.PlaygroundState.READY,a=(i=(0,y._)((0,n.useState)({status:"loading"}),2))[0],o=i[1],s=(0,n.useRef)(null),u=(0,n.useCallback)(function(e){return(0,O._)(function(){var t,n;return(0,N._)(this,function(i){switch(i.label){case 0:if(!r)return[2];return s.current&&(clearTimeout(s.current),s.current=null),o({status:"loading"}),[4,e.mastraApi.getPrimaryWorkflowDetails.rpc({})];case 1:return(t=i.sent()).ok?o({status:"success",workflow:null!=(n=t.payload.workflow)?n:null}):"MASTRA_API_NOT_READY"===t.payload.code?s.current=setTimeout(function(){u(e)},1e3):o({status:"error",message:t.payload.message}),[2]}})})()},[r]),(0,eh.usePid2)(u,[u]),c=(0,em.usePid2Callback)(function(e){return function(){return u(e)}},[u]),(0,n.useEffect)(function(){return function(){s.current&&clearTimeout(s.current)}},[]),{primaryWorkflowDetailState:a,handleRefresh:c}),Q=Y.primaryWorkflowDetailState,X=Y.handleRefresh,Z=(0,ey.useAutomationPreview)(),J=Z.initialBuildState,ee=(0,n.useMemo)(function(){return"success"===Q.status?Q.workflow:null},[Q]),et=(d=(0,ev.useCreateObservable)({type:"idle"}),f=(0,n.useRef)(null),b=(0,ex.default)().showError,{executeWorkflow:(0,em.usePid2Callback)(function(e){return function(t,n){return(0,O._)(function(){var r,i,a,o,s,l,u,c,p;return(0,N._)(this,function(h){switch(h.label){case 0:if(!ee)return[2];f.current&&f.current.abort(),f.current=new AbortController,r=f.current.signal,d.set({type:"idle"}),i=e.mastraApi.streamWorkflowRun2.subscribe((0,M._)({workflowId:ee.id},t&&{eventPayload:t},n&&{eventHeaders:n}),{signal:r}).resReadable,a=!1,o=!1,h.label=1;case 1:h.trys.push([1,6,7,12]),l=function(){var e=c.value;if(!e.ok)return"CANCEL"===e.payload.code?d.set({type:"idle"}):(b(e.payload.message),d.update(function(t){return{type:"completed",status:"failed",errorMessage:e.payload.message,stepsRunData:"idle"!==t.type?t.stepsRunData:void 0}})),"break";var t=e.payload,n=t.status&&["success","failed","canceled"].includes(t.status);d.update(function(e){return{type:n?"completed":"executing",status:t.status||("idle"!==e.type?e.status:"running"),stepsRunData:t.stepsRunData||("idle"!==e.type?e.stepsRunData:void 0)}})},u=(0,eg._)(i),h.label=2;case 2:return[4,u.next()];case 3:if(!(a=!(c=h.sent()).done)||"break"===l())return[3,5];h.label=4;case 4:return a=!1,[3,2];case 5:return[3,12];case 6:return p=h.sent(),o=!0,s=p,[3,12];case 7:if(h.trys.push([7,,10,11]),!(a&&null!=u.return))return[3,9];return[4,u.return()];case 8:h.sent(),h.label=9;case 9:return[3,11];case 10:if(o)throw s;return[7];case 11:return[7];case 12:return[2]}})})()}},[ee,d,b]),resetWorkflow:(0,n.useCallback)(function(){var e;null==(e=f.current)||e.abort(),d.set({type:"idle"})},[d]),state:d}),en=et.executeWorkflow,er=et.state,ei=et.resetWorkflow,eo=(w="connectorTrigger"===(W||l.AgentStackPlatformType.TimeBased),_=(0,el.useConnectorContext)(),k=(0,ec.default)(),S=(0,eu.useCurrentUserStoredOrgContext)().orgId,j=(C=(0,y._)((0,n.useState)(!1),2))[0],T=C[1],R=(E=(0,y._)((0,n.useState)(""),2))[0],I=E[1],P=(0,y._)(ea(),1)[0],L=(0,n.useCallback)(function(e){(0,ef.track)(ep.events.CONNECTION_SETUP_STARTED,{surface:"automation_context",connectorName:e}),I(e),T(!0)},[]),B=(0,n.useCallback)(function(e){return(0,O._)(function(){return(0,N._)(this,function(t){switch(t.label){case 0:if("connect.connection-connected"!==e.name)return[3,3];return[4,P({variables:{input:{connectionId:e.data.connection_id,orgId:null!=S?S:null}}})];case 1:return t.sent(),[4,_.refetch()];case 2:t.sent(),t.label=3;case 3:return[2]}})})()},[P,S,_]),F=(V=(0,y._)((0,n.useState)(null),2))[0],U=V[1],$=(G=(0,y._)((0,n.useState)(null),2))[0],H=G[1],(0,eh.usePid2)(function(e,t){var n=t.addCleanup;return(0,O._)(function(){var t,r,i;return(0,N._)(this,function(a){switch(a.label){case 0:if(!w)return[2];return t=!1,[4,(r=function(){return(0,O._)(function(){var n,r,i,a;return(0,N._)(this,function(o){switch(o.label){case 0:if(t)return[2];return[4,e.agentReplConfig.getReplConfig.rpc({})];case 1:return(n=o.sent()).ok&&(i=(r=n.payload).automationTriggerConnectorName||null,a=r.automationTriggerEventNames||null,U(function(e){return e!==i?i:e}),H(function(e){return JSON.stringify(e)!==JSON.stringify(a)?a:e}),i&&a&&(t=!0)),[2]}})})()})()];case 1:return a.sent(),i=setInterval(function(){t?clearInterval(i):r()},2e3),n(function(){clearInterval(i)}),[2]}})})()},[w]),{connectorInfo:(0,n.useMemo)(function(){if(!w)return null;var e,t,n,r=F?(0,ed.normalizeConnectorName)(F):null,i=F&&(null==(e=_.connections)?void 0:e.find(function(e){return(0,ed.normalizeConnectorName)(e.connectorName)===r}))||null,a=(null==i?void 0:i.displayName)||(F?(0,ed.formatConnectorName)(F):"Connector"),o=null!=(t=null==i?void 0:i.iconPath)?t:null,s=!!(F&&!i),l=null!=(n=null==i?void 0:i.webhookProvider)?n:"openint";return{inferredConnectorName:F,inferredEventNames:$,connectorConnection:i,connectorDisplayName:a,connectorIconUrl:o,isMissingConnection:s,webhookProvider:l}},[w,F,$,_.connections]),openConnectorFlow:L,connectorModalProps:(0,n.useMemo)(function(){return w?{isOpen:j,setIsOpen:T,token:_.token||"",selectedConnector:R,onEvent:B,replId:k,autoSubscribeWebhooks:!0}:null},[w,j,_.token,R,B,k])}),es=eo.connectorInfo,e_=eo.openConnectorFlow,eS=eo.connectorModalProps,eC=null!==ee,ej=(0,n.useMemo)(function(){return J===ey.InitialBuildState.Building||J===ey.InitialBuildState.WaitingForInput||J===ey.InitialBuildState.Stopped?{type:"none"}:q.state===eb.PlaygroundState.APP_NOT_RUNNING_AGENT_IDLE?{type:"app-not-running"}:q.state!==eb.PlaygroundState.READY||"loading"===Q.status?{type:"loading"}:"error"===Q.status?{type:"error",message:"Failed to load workflows",onRetry:X}:"success"!==Q.status||eC?{type:"none"}:{type:"empty-state"}},[q.state,Q.status,eC,X,J]),eT="none"!==ej.type;return K&&W?(0,t.jsxs)(m.AutomationProvider,{workflowDetail:ee,triggerType:W,workflowExecutionState:er,executeWorkflow:en,resetWorkflow:ei,openPane:z,initialBuildState:J,automationPreview:Z,connectorInfo:es,openConnectorFlow:e_,children:[(0,t.jsx)(A.View,{grow:!0,shrink:!0,br:8,clsx:eF.default.container,children:(0,t.jsxs)(A.View,{clsx:eF.default.canvasAreaWrapper,grow:!0,children:[(0,t.jsx)(ew,{disableMovingCanvas:eT,hideNodes:eT}),eT?(0,t.jsx)(e$,{state:ej,agentStackPlatformType:W||l.AgentStackPlatformType.TimeBased}):null,(0,t.jsx)(A.View,{clsx:eF.default.headerWrapper,children:(0,t.jsx)(x.Header,{renderDebugButton:(0,t.jsx)(D,{})})}),(0,t.jsx)(g.default,{})]})}),eS?(0,t.jsx)(p.AddIntegrationModal,{isOpen:eS.isOpen,setIsOpen:eS.setIsOpen,token:eS.token,selectedConnector:eS.selectedConnector,onEvent:eS.onEvent,replId:eS.replId,autoSubscribeWebhooks:eS.autoSubscribeWebhooks}):null]}):(0,t.jsx)(eG,{})}e.i(282890);var ez=e.i(716636),eW=r.Type.Object({type:r.Type.Literal("automations")}),eq={Content:function(e){var r=e.options.performPaneOperation,i=(0,n.useCallback)(function(e){return r({operation:"open",secondary:!0,pane:e})},[r]);return(0,t.jsx)(eH,{openPane:i})},Icon:function(e){var n=e.size;return(0,t.jsx)(o.IconContext.Provider,{value:{color:eI.tokens.foregroundDefault,size:n},children:(0,t.jsx)(s.default,{})})},getTitle:function(){return a.AUTOMATIONS_PANE_NAME},description:"View and test agents and automations created by Replit Agent.",category:ez.PaneCategory.WorkspaceFeatures,decode:function(e){return i.Value.Decode(eW,e)}};e.s(["automationsUI",()=>eq],79998)},185511,133294,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(276385),i=e.i(485273),a=e.i(179104),o=e.i(11986),s=e.i(402099),l=e.i(36654),u=e.i(882848),c=e.i(491194),d=e.i(205104),f=e.i(134628),p=e.i(993796),h=e.i(125674),m=e.i(610357),g=e.i(539539),x=e.i(629712),y=e.i(501005),b=e.i(240913),w=/\(copy\)( \d+)?$/,_=/\d+$/;function k(e,r){return(0,t._)(function(){var t,i,a,o,s,l;return(0,n._)(this,function(n){switch(n.label){case 0:return t=(0,d.getParentPath)(e),[4,r.readDir(0===t.length?b.ROOT_PATH:t)];case 1:if((i=n.sent()).error)throw i.error;return a=new Set(i.children.map(function(e){return e.filename})),o=function(e,t){var n=(0,d.getExt)(e),r=(0,d.getBaseName)(e);if(!r&&e.startsWith(".")){var i=e.lastIndexOf(".");r=i>0?e.slice(0,i):e}for(var a=w.test(r)?e:"".concat(r," (copy)").concat(n.length>0?".".concat(n):""),o=1;o<=t.size&&t.has(a);o++){var s=(0,d.getBaseName)(a),l=s.split(" ");_.test(s)&&l.pop(),a="".concat(l.join(" ")," ").concat(o),n.length>0&&(a+=".".concat(n))}return a}((0,d.getFileName)(e),a),s=t?"".concat(t,"/").concat(o):o,[4,r.copyFile(e,s)];case 2:if((l=n.sent()).error)throw l.error;return[2,s]}})})()}e.s(["default",()=>k],133294);var S=e.i(441329),C=e.i(529810),j=e.i(479407),T=e.i(106020),E=e.i(736318);e.i(282890);var R=e.i(66718);e.i(545082);var I=e.i(375310),A=e.i(480028);function P(e,i,a){return{match:T.matchLabel,data:{label:"Download",icon:(0,r.jsx)(l.default,{}),type:"action",run:function(){return(0,t._)(function(){var t;return(0,n._)(this,function(n){switch(n.label){case 0:return[4,i.readFile(e)];case 1:if((t=n.sent()).error)return[2,{type:"error",message:"Error downloading file"}];return[4,(0,g.default)(e,t.content,a)];case 2:return n.sent(),[2]}})})()}}}}function D(e,i){return{match:T.matchLabel,data:{label:"Download",icon:(0,r.jsx)(l.default,{}),type:"action",run:function(){return(0,t._)(function(){var t,r,o;return(0,n._)(this,function(n){switch(n.label){case 0:return[4,i.readFile(e)];case 1:if((t=n.sent()).error||!(r=t.content.toString("base64")))return[2,{type:"error",message:"Error downloading file"}];return o=(0,d.getFileName)(e),(0,j.sendMessage)({messageType:f.BridgeMessageType.DOWNLOAD_FILE,fileName:o,fileContent:r},(0,a.nanoid)()),[2]}})})()}}}}function O(e){return{match:T.matchLabel,data:{label:"Download folder",icon:(0,r.jsx)(l.default,{}),type:"action",run:function(){return(0,t._)(function(){var r;return(0,n._)(this,function(a){switch(a.label){case 0:return[4,(r=i.default.query.replId,(0,t._)(function(){var a,o,s,l,u,c,d;return(0,n._)(this,function(f){switch(f.label){case 0:return o=(a=e.split("/")).length>1?a[a.length-1]:e,(s=document.createElement("a")).download=o+".zip",s.target="_blank",s.style.display="none",l=function(){return(0,t._)(function(){return(0,n._)(this,function(e){return[2,{isEmbed:!!(i.default.query.lite||i.default.query.embed),hCaptchaSiteKey:y.HCAPTCHA_SITE_KEY}]})})()},[4,(0,x.getZipperToken)({replId:r,getCaptcha:l})];case 1:return c=(u=f.sent()).baseUrl,d=u.token,s.href="".concat(c,"/repl/").concat(r,"?token=").concat(d,"&subdir=").concat(encodeURIComponent(e),"&dir=").concat(o),document.body.appendChild(s),s.click(),setTimeout(function(){document.body.removeChild(s)},1e4),[2]}})})())];case 1:return a.sent(),[2]}})})()}}}}function N(e){var i=e.path,a=e.performPaneOperation,l=(0,C.default)(),d=(0,I.useSetPendingDeleteFile)(),f=(0,S.useIsInBonsaiWebview)(),g=(0,p.useFlag)({controlName:"flag-direct-file-downloads"});return(0,h.default)(function(){var e,p;return i?[{match:T.matchLabel,data:{label:"Copy file path",icon:(0,r.jsx)(o.default,{}),type:"action",run:function(){(0,m.default)(i)}}},{match:T.matchLabel,data:{label:"Copy link",icon:(0,r.jsx)(u.default,{}),type:"action",run:function(){var e=(0,E.createDeeplinkURL)({path:i});(0,m.default)(e)}}},(e=l.fs,p=function(e){a({operation:"replace",pane:{type:(0,R.getPaneTypeForFile)({path:e}),data:{path:e}}})},{match:T.matchLabel,data:{label:"Duplicate file",icon:(0,r.jsx)(s.default,{}),type:"action",run:function(){return(0,t._)(function(){var t;return(0,n._)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,k(i,e)];case 1:return t=n.sent(),[3,3];case 2:return n.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return p(t),[2]}})})()}}}),f?D(i,l.fs):P(i,l.fs,g),{match:T.matchLabel,data:{label:"Delete",icon:(0,r.jsx)(c.default,{color:A.tokens.redDefault}),type:"action",run:function(){d(i)}}}]:null},[i,l.fs,f,d,a,g])}e.s(["createBonsaiDownloadCommand",()=>D,"createDownloadCommand",()=>P,"createDownloadFolderCommand",()=>O,"useFileCommands",()=>N],185511)},294468,e=>{"use strict";var t=e.i(276385),n=e.i(967629),r=e.i(613355),i=e.i(625484),a=(0,n.css)([r.rcss.flex.growAndShrink(1),r.rcss.position.relative,r.rcss.overflow("hidden"),r.rcss.borderRadius(0,0,8,8)]);function o(e){return(0,t.jsx)(i.View,{css:[a,e.children?r.rcss.center:null],children:e.children})}e.s(["Content",()=>o])},827759,e=>{"use strict";var t=e.i(276385),n=e.i(485273),r=e.i(389959),i=e.i(144619),a=e.i(959406),o=e.i(967629),s=e.i(480028),l=e.i(613355),u=e.i(625484),c=(0,o.css)([l.rcss.height(28),{borderBottom:"1px solid ".concat(s.tokens.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function d(e){return"/replEnvironmentDesktop"!==n.default.pathname?null:(0,t.jsx)(u.View,{css:c,align:"center",row:!0,children:e.children})}var f=(0,o.css)([l.rcss.flex.row,l.rcss.align.center,l.rcss.flex.growAndShrink(1),l.rcss.overflowX("auto"),l.rcss.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function p(e){return(0,t.jsx)(u.View,{pl:e.noPadding?void 0:4,css:f,children:e.children})}var h=(0,o.css)([l.rcss.flex.row,l.rcss.align.center,l.rcss.height("100%")]),m=(0,o.css)([l.rcss.flex.row,l.rcss.align.center,l.rcss.height("100%"),l.rcss.px(2)]);function g(e){return(0,t.jsx)(u.View,{css:h,children:(0,t.jsx)(u.View,{css:m,children:e.children})})}function x(e){var n=e.path,o=e.performPaneOperation,s=e.children,l=(0,r.useCallback)(function(e){o({operation:"replace",pane:(0,a.getPaneForFile)(e)})},[o]);return(0,t.jsxs)(d,{children:[(0,t.jsx)(p,{children:(0,t.jsx)(i.FileBreadcrumbs,{path:n,onFileClick:l})}),s?(0,t.jsx)(g,{children:s}):null]})}e.s(["FileHeader",()=>x,"Header",()=>d,"HeaderLeft",()=>p,"HeaderRight",()=>g])},788154,e=>{"use strict";var t=e.i(530658),n=e.i(346715),r=e.i(276385),i=e.i(389959),a=e.i(960933),o=e.i(862927),s=e.i(36654),l=e.i(269848),u=e.i(205104),c=e.i(529810),d=e.i(185511),f=e.i(294468),p=e.i(827759);e.i(282890);var h=e.i(716636),m=e.i(259493),g=e.i(446530),x=e.i(613355),y=e.i(136540),b=e.i(630818),w=e.i(960178),_=e.i(625484),k=(0,g.cssRecord)({text:{width:"100%",textAlign:"center"},loaderContainer:[x.rcss.display.flex,x.rcss.center,x.rcss.height("100%")]}),S=a.Type.Object({type:a.Type.Literal("binary"),data:a.Type.Object({path:a.Type.String()})}),C={Content:function(e){var t=e.pane,n=e.options;return(0,r.jsx)(j,{path:t.data.path,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.pane,n=e.size;return(0,r.jsx)(b.default,{path:t.data.path,size:n})},getTitle:function(e){return(0,u.getFileName)(e.data.path)},category:h.PaneCategory.WorkspaceFeatures,decode:function(e){return o.Value.Decode(S,e)}};function j(e){var a=e.path,o=e.performPaneOperation,s=(0,c.default)().fs,u=(0,d.useFileCommands)({path:a,performPaneOperation:o});(0,m.useSetPaneBindings)(function(){if(u)return{commands:[{commands:u?(0,n._)(u):[]}]}},[u]);var f=(0,t._)((0,i.useState)(null),2),h=f[0],g=f[1],x=(0,t._)((0,i.useState)(!0),2),y=x[0],b=x[1];return((0,i.useEffect)(function(){var e=s.watchFile(a,{onChange:function(e){g(e.toString("base64")),b(!1)},onError:function(){g(null),b(!1)},onMoveOrDelete:function(){g(null),b(!1)}});return function(){e(),b(!0),g(null)}},[s,a]),y)?(0,r.jsx)(_.View,{css:k.loaderContainer,children:(0,r.jsx)(l.default,{})}):null===h?(0,r.jsx)(w.Text,{multiline:!1,children:"Failed to load binary file"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.FileHeader,{path:a,performPaneOperation:o}),(0,r.jsx)(T,{path:a})]})}function T(e){var n=e.path,a=(0,c.default)().fs,o=(0,t._)((0,i.useState)(null),2),d=o[0],p=o[1],h=(0,t._)((0,i.useState)(!0),2),m=h[0],g=h[1];return((0,i.useEffect)(function(){var e=a.watchFile(n,{onChange:function(e){p(e.toString("base64")),g(!1)},onError:function(){p(null),g(!1)},onMoveOrDelete:function(){p(null),g(!1)}});return function(){e(),g(!0),p(null)}},[a,n]),m)?(0,r.jsx)(_.View,{css:k.loaderContainer,children:(0,r.jsx)(l.default,{})}):null===d?(0,r.jsx)(w.Text,{multiline:!1,children:"Failed to load binary file"}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(f.Content,{centered:!0,children:[(0,r.jsx)(w.Text,{css:k.text,children:"The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding."}),(0,r.jsx)(y.IconButton,{alt:"Download",css:[x.rcss.position.absolute,x.rcss.bottom(8),x.rcss.right(8),x.rcss.p(16)],children:(0,r.jsx)("a",{href:"data:text/plain;base64,".concat(d),download:(0,u.getFileName)(n),css:[x.rcss.color.foregroundDimmer],children:(0,r.jsx)(s.default,{})})})]})})}e.s(["BinaryPaneContent",()=>T,"binaryUI",()=>C])},652898,477126,564169,10681,197565,725263,35811,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(116235);function a(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{d:"M9 18.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h6ZM21 11.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h18ZM15 4.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h12Z"})}))}function o(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"m6.501 5.252.183.014a1.251 1.251 0 0 1 .887.59l.083.165 4.038 9.69a.75.75 0 0 1-1.384.577L9.25 13.75h-5.5l-1.058 2.538a.75.75 0 0 1-1.384-.577l4.039-9.69c.095-.228.256-.422.46-.56l.16-.09c.167-.078.35-.119.534-.12ZM4.375 12.25h4.25L6.5 7.151 4.375 12.25ZM18.5 5.25a3.25 3.25 0 0 1 2.475 5.355A3.252 3.252 0 0 1 22.75 13.5a3.25 3.25 0 0 1-3.25 3.25h-4a1.25 1.25 0 0 1-1.25-1.25v-9a1.25 1.25 0 0 1 1.25-1.25h3Zm-2.75 10h3.75a1.75 1.75 0 0 0 0-3.5h-3.75v3.5Zm0-5h2.75a1.75 1.75 0 0 0 .173-3.491L18.5 6.75h-2.75v3.5Z",clipRule:"evenodd"})}))}e.s(["default",()=>a],652898),e.s(["default",()=>o],477126);var s=e.i(530658),l=e.i(346715),u=e.i(389959),c=e.i(223808),d=e.i(488566);function f(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9.53 3.47a.75.75 0 0 0-1.06 0l-5 5a.75.75 0 0 0 0 1.06l5 5a.75.75 0 0 0 1.06-1.06L5.81 9.75H16A3.25 3.25 0 0 1 19.25 13v7a.75.75 0 0 0 1.5 0v-7A4.75 4.75 0 0 0 16 8.25H5.81l3.72-3.72a.75.75 0 0 0 0-1.06Z",clipRule:"evenodd"})}))}function p(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M14.47 3.47a.75.75 0 0 1 1.06 0l5 5a.75.75 0 0 1 0 1.06l-5 5a.75.75 0 1 1-1.06-1.06l3.72-3.72H8A3.25 3.25 0 0 0 4.75 13v7a.75.75 0 0 1-1.5 0v-7A4.75 4.75 0 0 1 8 8.25h10.19l-3.72-3.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}var h=e.i(650587),m=e.i(698053),g=e.i(332441),x=e.i(541793),y=e.i(161322),b=(0,u.createContext)(null),w=(0,x.atom)(null),_=(0,x.atom)(null,function(e,t,n){t(w,n)});function k(){var e=(0,u.useContext)(b);if(!e)throw Error("Expected store in context");return e}function S(){return(0,y.useAtomValue)(w,{store:k()})}function C(e){var t=(0,y.useAtomValue)(w,{store:k()}),n=(0,y.useSetAtom)(_,{store:k()});(0,u.useEffect)(function(){t!==e&&n(e)},[e,t,n])}e.s(["CodeEditorViewContext",()=>b,"useCodeEditorView",()=>S,"useSetCodeEditorView",()=>C],564169);var j=e.i(446530),T=e.i(613355),E=e.i(625484),R=(0,j.cssRecord)({root:[T.rcss.height(48),T.rcss.backgroundColor.backgroundRoot,T.rcss.display.flex,T.rcss.justify.spaceBetween,T.rcss.align.stretch,{fontFamily:"Monaco, Menlo, 'Ubuntu Mono', Consolas, source-code-pro, monospace",button:[T.rcss.color.foregroundDefault,T.rcss.fontSize(16),T.rcss.flex.growAndShrink(1),{padding:"10px",fontFamily:"inherit",backgroundColor:"transparent",border:"0 none",flexBasis:"auto"}]}],fixedContainer:[T.rcss.position.fixed,T.rcss.width("100%"),T.rcss.zIndex(100),T.rcss.left(0)]}),I=function(e){var t=e.buttons,n=e.onClick,i=e.onUndo,a=e.onRedo;return(0,r.jsxs)("nav",{css:R.root,children:[t.map(function(e){return(0,r.jsx)("button",{onClick:function(t){t.stopPropagation(),t.preventDefault(),n(e)},children:void 0!==e.label?e.label:e.value},e.value)}),(0,r.jsx)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},children:(0,r.jsx)(f,{})}),(0,r.jsx)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),a()},children:(0,r.jsx)(p,{})})]})},A=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],P=function(e){var t=e.path,n=(0,l._)(A).concat([{value:"= ",cursorOffset:2}]);return t.endsWith(".html")&&(n.unshift({value:"<>",cursorOffset:1}),n.unshift({label:"div",value:"<div></div>",cursorOffset:5})),n},D="visualViewport"in window;function O(e){var t=e.filePath,n=e.isLoading,i=S(),a=(0,h.useIsMobile)({tablet:!1}),o=(0,g.useIsIOS)(),l=(0,m.default)();(0,u.useEffect)(function(){l&&i&&i.requestMeasure({read:function(){return{cursor:i.coordsAtPos(i.state.selection.main.head),scroller:i.scrollDOM.getBoundingClientRect()}},write:function(e){var t=e.cursor,n=e.scroller;if(t){var r=(t.top+t.bottom)/2,a=(n.top+n.bottom)/2;Math.abs(r-a)>5&&(i.scrollDOM.scrollTop+=r-a+50*!!o)}}})},[l,i,o]);var f=(0,s._)((0,u.useState)(0),2),p=f[0],x=f[1];if((0,u.useEffect)(function(){if(o){var e=window.visualViewport;if(D&&e){var t=(0,c.default)(function(){x(window.innerHeight-e.height-e.offsetTop)},100);return e.addEventListener("scroll",t),e.addEventListener("resize",t),function(){e.removeEventListener("scroll",t),e.removeEventListener("resize",t)}}}},[o]),!l||n||!a)return null;var y=(0,r.jsx)(I,{onUndo:function(){i&&((0,d.undo)(i),i.focus())},onRedo:function(){i&&((0,d.redo)(i),i.focus())},onClick:function(e){if(i){var t,n=null!=(t=i.state.selection.ranges[0].from)?t:0;i.dispatch({changes:{from:n,insert:e.value},selection:{anchor:n+e.cursorOffset}}),i.focus()}},buttons:P({path:t})});return!o||D?(0,r.jsx)(E.View,{css:R.fixedContainer,style:{bottom:p},children:y}):y}e.s(["default",()=>O],10681);var N=e.i(297083),M=e.i(904851),L=e.i(90659),B=e.i(721281),V=e.i(817556),F=e.i(992785),U=e.i(753950),G=e.i(179302);e.i(508987);var $=e.i(457103),H=e.i(736097),z=e.i(828767),W=e.i(969932),q=e.i(502379),K=e.i(644920),Y=e.i(256969);function Q(e){var t,n;return null!=(n=null==(t=e.facet(z.LSPCapabilities))?void 0:t.isDocumentSymbolSupported)&&n}var X=U.StateEffect.define(),Z=U.StateField.define({create:function(){return null},update:function(e,t){var n=e;return(0,W.forEachEffect)(t,X,function(e){n=e.value}),n}});function J(e){if("Debounced function cancelled"!==e.message)throw e}var ee=U.StateField.define({create:function(){return[]},update:function(e,t){if(!(0,$.hasChanged)(t,Z,"selection"))return e;var n=t.state.field(Z);return n?function e(t,n,r){var i=r.find(function(e){var r=e.range;return(0,q.posToOffset)(t,r.end)>=n&&(0,q.posToOffset)(t,r.start)<=n});return null==i?[]:i.children?[i].concat(e(t,n,i.children)):[i]}(t.state.doc,t.state.selection.main.head,n):[]},compare:F.default});function et(e){return[Z,ee,G.ViewPlugin.fromClass(function(){function t(n){var r=this;(0,M._)(this,t),(0,B._)(this,"getSymbolMap",void 0),(0,B._)(this,"abortControllers",[]),this.getSymbolMap=(0,K.default)(function(){return(0,N._)(function(){var t,r,i,a;return(0,V._)(this,function(o){switch(o.label){case 0:if(t=this,!(r=n.state.facet(H.fileName)))return[2];return this.abortControllers=[],[4,Promise.all(e.map(function(e){if(!(0,Y.default)(e).isDocumentSymbolSupported)return null;var n,i=new AbortController;return t.abortControllers.push(i),n=i.signal,(0,N._)(function(){var t,i,a,o,s,l,u,c,d;return(0,V._)(this,function(f){switch(f.label){case 0:return[4,e.request.documentSymbol(r,{signal:n})];case 1:if(!(t=f.sent())||t.cancelled||!(i="result"in t&&!t.cancelled?t.result:null))return[2,null];a=[],o=!0,s=!1,l=void 0;try{for(u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)(d=c.value)&&"range"in d&&a.push(d)}catch(e){s=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}return[2,a.length?a:null]}})})()}))];case 1:return i=o.sent(),n.dispatch({effects:X.of(null!=(a=i.find(Boolean))?a:null)}),[2]}})}).call(r)},{wait:200}),Q(n.state)&&this.getSymbolMap().catch(J)}return(0,L._)(t,[{key:"update",value:function(e){!(0,$.hasChanged)(e,"doc",z.LSPCapabilities)||Q(e.state)&&(this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap().catch(J))}},{key:"destroy",value:function(){this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap.isScheduled()&&this.getSymbolMap.cancel()}}]),t}())]}function en(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M7.25 5A2.75 2.75 0 0 1 10 2.25h9A2.75 2.75 0 0 1 21.75 5v5A2.75 2.75 0 0 1 19 12.75h-.5a.75.75 0 0 1 0-1.5h.5c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25h-9c-.69 0-1.25.56-1.25 1.25v4a.75.75 0 0 1-1.5 0V5Zm3 1a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Zm0 3a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Zm-8 5A2.75 2.75 0 0 1 5 11.25h9A2.75 2.75 0 0 1 16.75 14v5A2.75 2.75 0 0 1 14 21.75H5A2.75 2.75 0 0 1 2.25 19v-5ZM5 12.75c-.69 0-1.25.56-1.25 1.25v5c0 .69.56 1.25 1.25 1.25h9c.69 0 1.25-.56 1.25-1.25v-5c0-.69-.56-1.25-1.25-1.25H5ZM5.25 15a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75Zm0 3a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}function er(e){return(0,r.jsx)(i.default,(0,n._)((0,t._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M17 7.75a4.25 4.25 0 1 0 0 8.5 4.25 4.25 0 0 0 0-8.5Zm-5.701 3.5a5.751 5.751 0 1 1 0 1.5H6.646a2.751 2.751 0 1 1 0-1.5H11.3ZM4 10.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z",clipRule:"evenodd"})}))}e.s(["createDocumentSymbolsExtenstion",()=>et,"documentSymbols",()=>Z,"symbolsPath",()=>ee],197565),e.s(["default",()=>en],725263),e.s(["default",()=>er],35811)},817221,e=>{"use strict";var t=e.i(333859);let n=[t.SymbolKind.Array,t.SymbolKind.Boolean,t.SymbolKind.Class,t.SymbolKind.Constant,t.SymbolKind.Constructor,t.SymbolKind.Enum,t.SymbolKind.EnumMember,t.SymbolKind.Event,t.SymbolKind.Field,t.SymbolKind.File,t.SymbolKind.Function,t.SymbolKind.Interface,t.SymbolKind.Key,t.SymbolKind.Method,t.SymbolKind.Module,t.SymbolKind.Namespace,t.SymbolKind.Object,t.SymbolKind.Operator,t.SymbolKind.Package,t.SymbolKind.Property,t.SymbolKind.String,t.SymbolKind.Struct,t.SymbolKind.TypeParameter,t.SymbolKind.Variable];e.s(["default",0,n])},484035,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(753950),i=e.i(197565),a=e.i(703613),o=e.i(502379),s=e.i(923563),l=e.i(2497),u=e.i(269774),c=e.i(530658),d=e.i(333859),f=e.i(648880),p=e.i(554208),h=e.i(922807),m=e.i(156669),g=e.i(725263),x=e.i(873169),y=e.i(632075),b=e.i(35811),w=e.i(844941),_=e.i(543829),k=e.i(477126),S=e.i(887964),C=e.i(409570),j=e.i(813707),T=e.i(252842),E=e.i(817221),R=e.i(480028),I=function(e){var t=new Set(E.default),n=new Map,r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=(0,c._)(o.value,3),u=l[0],d=l[1],f=l[2];if(!t.has(u))throw Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");n.set(u,[d,null!=f?f:R.tokens.foregroundDefault])}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}([[d.SymbolKind.Array,S.default],[d.SymbolKind.Boolean,_.default],[d.SymbolKind.Class,p.default,R.tokens.yellowDefault],[d.SymbolKind.Constant,h.default,R.tokens.blueStronger],[d.SymbolKind.Constructor,y.default,R.tokens.blurpleDefault],[d.SymbolKind.Enum,g.default,R.tokens.orangeDefault],[d.SymbolKind.EnumMember,T.default,R.tokens.blueStronger],[d.SymbolKind.Event,f.default],[d.SymbolKind.Field,j.default],[d.SymbolKind.File,x.default],[d.SymbolKind.Function,y.default,R.tokens.blurpleStronger],[d.SymbolKind.Interface,b.default,R.tokens.blueStronger],[d.SymbolKind.Key,w.default],[d.SymbolKind.Method,y.default,R.tokens.blurpleDefault],[d.SymbolKind.Module,C.default,R.tokens.purpleDefault],[d.SymbolKind.Namespace,m.default],[d.SymbolKind.Object,_.default,R.tokens.blueDimmer],[d.SymbolKind.Operator,_.default],[d.SymbolKind.Package,C.default,R.tokens.purpleDefault],[d.SymbolKind.Property,j.default],[d.SymbolKind.String,k.default],[d.SymbolKind.Struct,m.default],[d.SymbolKind.TypeParameter,T.default],[d.SymbolKind.Variable,T.default,R.tokens.blueStronger]]);function A(e){var n,r=e.kind,i=e.size,a=(0,c._)(null!=(n=I.get(r))?n:[_.default,R.tokens.foregroundDefault],2),o=a[0],s=a[1];return(0,t.jsx)(o,{color:s,size:void 0===i?16:i})}var P=e.i(927600),D=e.i(858248),O=e.i(709485),N=e.i(878420),M=e.i(64386),L=e.i(674310),B=e.i(167768),V=e.i(638086),F=e.i(967629),U=e.i(754873),G=e.i(613355),$=e.i(625484),H=(0,F.css)([U.interactive.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),z={button:(0,F.css)([G.rcss.reset.button,G.rcss.p(2),G.rcss.rowWithGap(4),G.rcss.align.center,H]),text:(0,F.css)({fontSize:R.tokens.fontSizeSmall})},W={opacity:1};function q(e){var r=e.icon,i=e.text,a=e.innerRef,o=e.ariaProps,s=e.active,l=(0,B.useButton)(o,a).buttonProps,u=(0,V.useHover)({}),c=u.hoverProps,d=u.isHovered;return(0,t.jsxs)($.View,(0,M._)((0,N._)({tag:"button",css:z.button,style:d||s?W:void 0,innerRef:a},(0,L.mergeProps)(l,c)),{children:[r?(0,n.cloneElement)(r,{size:12}):null,(0,t.jsx)($.View,{css:z.text,children:i})]}))}var K={root:(0,F.css)([G.rcss.p(4),G.rcss.rowWithGap(4),G.rcss.align.center]),text:(0,F.css)([G.rcss.truncate,G.rcss.flex.growAndShrink(1),{fontSize:R.tokens.fontSizeDefault}])};function Y(e){return(0,t.jsxs)($.View,{css:[K.root],children:[e.icon?(0,n.cloneElement)(e.icon,{size:16}):null,(0,t.jsx)($.View,{css:K.text,children:e.text})]})}var Q=e.i(346715),X=e.i(643694),Z=e.i(624549),J=e.i(580347),ee=(0,F.css)([G.rcss.p(4)]);function et(e){var r=e.items,i=e.children,a=e.menuProps,o=e.selectedKeys,s=e.onAction,l=(0,X.useTreeState)({items:r,children:i,selectedKeys:o,selectionMode:"single"}),u=(0,n.useRef)(null),c=(0,Z.useMenu)((0,N._)({items:r,onAction:s},a),l,u);return(0,t.jsx)($.View,(0,M._)((0,N._)({},c.menuProps),{innerRef:u,css:ee,children:(0,Q._)(l.collection).map(function(e){return(0,t.jsx)(ei,{item:e,state:l},e.key)})}))}var en={root:(0,F.css)([G.rcss.flex.row,G.rcss.align.center,G.rcss.position.relative,H]),selected:(0,F.css)([{opacity:1,backgroundColor:R.tokens.interactiveBackground}])},er={opacity:1};function ei(e){var r=e.item,i=e.state,a=(0,n.useRef)(null),o=(0,J.useMenuItem)({key:r.key},i,a),s=o.menuItemProps,l=o.isSelected,u=(0,V.useHover)({}),c=u.hoverProps,d=u.isHovered;return(0,t.jsx)($.View,(0,M._)((0,N._)({innerRef:a,css:[en.root,l&&en.selected],style:d||l?er:void 0},(0,L.mergeProps)(s,c)),{children:r.rendered}))}var ea=e.i(178085),eo=e.i(342942),es=e.i(771397),el=e.i(600962),eu=e.i(173703),ec={underlay:(0,F.css)([G.rcss.coverContainer,G.rcss.position.fixed]),surface:(0,F.css)([G.rcss.borderRadius(8),{boxShadow:R.tokens.shadow2,border:"1px solid",borderColor:R.tokens.backgroundHighest}])};function ed(e){var n=e.state,r=e.triggerRef,i=e.placement,a=e.children,o=(0,c._)((0,el.default)("Popover"),2),s=o[0],l=o[1],u=(0,es.usePopover)({placement:i,triggerRef:r,popoverRef:s,offset:8},n),d=u.popoverProps,f=u.underlayProps;return(0,t.jsxs)(eo.Overlay,{children:[(0,t.jsx)($.View,(0,M._)((0,N._)({},f),{css:ec.underlay})),(0,t.jsxs)(eu.ShadesSurface,(0,M._)((0,N._)({css:ec.surface,innerRef:l},d),{children:[(0,t.jsx)(ea.DismissButton,{onDismiss:n.close}),a,(0,t.jsx)(ea.DismissButton,{onDismiss:n.close})]}))]})}function ef(e){return CSS.escape(e.name)}function ep(e){var r=e.selectedSymbol,i=e.symbols,a=e.moveCursor,o=e.icon,c=e.text,d=(0,l.useMenuTriggerState)({onOpenChange:function(e){e&&(0,D.track)(O.events.CODE_NAVIGATION_USED,{action:"opened"})}}),f=(0,n.useRef)(null),p=(0,u.useMenuTrigger)({},d,f),h=p.menuTriggerProps,m=p.menuProps,g=r?new Set([r.name]):void 0;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(q,{text:c,icon:o,innerRef:f,ariaProps:h,active:d.isOpen}),d.isOpen?(0,t.jsx)(ed,{triggerRef:f,state:d,placement:"bottom left",children:(0,t.jsx)(et,{menuProps:m,items:i,selectedKeys:g,onAction:function(e){var t=i.find(function(t){return ef(t)===e});t&&(a(t.selectionRange.start),(0,D.track)(O.events.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,t.jsx)(s.Item,{children:(0,t.jsx)(Y,{icon:(0,t.jsx)(A,{kind:e.kind}),text:e.name})},ef(e))}})}):null]})}var eh=(0,n.memo)(function(e){var r=e.symbols,i=e.symbolsPath,a=e.moveCursor,o=i.length?i[i.length-1]:null,s=o?o.children:r;return(0,t.jsxs)(t.Fragment,{children:[i.map(function(e,o){var s=0===o?r:i[o-1].children;return s?(0,t.jsxs)(n.Fragment,{children:[(0,t.jsx)(P.default,{size:12}),(0,t.jsx)(ep,{symbols:s,icon:(0,t.jsx)(A,{size:12,kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:a})]},ef(e)):null}),(null==s?void 0:s.length)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.default,{size:12}),(0,t.jsx)(ep,{symbols:s,text:"...",moveCursor:a})]}):null]})}),em=(0,n.memo)(function(e){var s,l=e.view,u=(0,n.useCallback)(function(e){null==l||l.dispatch({scrollIntoView:!0,selection:r.EditorSelection.cursor((0,o.posToOffset)(l.state.doc,e))}),null==l||l.focus()},[l]),c=(0,n.useDeferredValue)({symbols:(0,a.useCodeMirrorValue)(l,i.documentSymbols),symbolsPath:(0,a.useCodeMirrorValue)(l,i.symbolsPath)});return(null==(s=c.symbols)?void 0:s.length)?(0,t.jsx)(eh,{symbols:c.symbols,symbolsPath:c.symbolsPath||[],moveCursor:u}):null});e.s(["CodeNav",()=>em],484035)},62424,440416,406948,394205,e=>{"use strict";var t=e.i(878420),n=e.i(886513),r=e.i(276385),i=e.i(389959);e.i(440545);var a=e.i(214705),o=e.i(915599),s=e.i(484035),l=e.i(703613),u=e.i(712771),c=e.i(919061),d=e.i(416746),f=e.i(269848),p=e.i(205104),h=e.i(144619),m=e.i(827759),g=e.i(406206),x=e.i(564169);e.i(545082);var y=e.i(91442),b=e.i(959406),w=e.i(396776),_=e.i(625484),k=(0,i.memo)(function(e){var t=e.path,n=e.performPaneOperation,a=e.isReadOnly,o=(0,x.useCodeEditorView)(),l=(0,i.useCallback)(function(e){n({operation:"open",pane:(0,b.getPaneForFile)(e)})},[n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m.Header,{children:[(0,r.jsx)(m.HeaderLeft,{children:(0,r.jsx)(h.FileBreadcrumbs,{path:t,onFileClick:l,children:(0,r.jsx)(s.CodeNav,{view:o})})}),(0,r.jsx)(m.HeaderRight,{children:(0,r.jsx)(S,{path:t,performPaneOperation:n,isReadOnly:a})})]}),R(t)?(0,r.jsx)(I,{}):null]})});function S(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C,(0,t._)({},e)),(0,r.jsx)(j,(0,t._)({},e)),(0,r.jsx)(T,(0,t._)({},e)),(0,r.jsx)(E,(0,t._)({},e))]})}function C(e){var t=e.path,i=(0,n._)(e,["path"]),s=(0,x.useCodeEditorView)(),u=(0,l.useCodeMirrorValue)(s,o.IsFormatting),d=(0,l.useCodeMirrorValue)(s,o.HasFormatter),h=u||i.isReadOnly,m=i.isReadOnly?"This action is disabled while the agent is working":void 0;return d&&s?(0,r.jsx)(g.PaneHeaderActionButton,{dataCy:"ws-format-btn",altText:"Format "+(0,p.getFileName)(t),buttonText:"Format",disabled:h,disabledTooltip:m,"aria-disabled":!!h||void 0,icon:u?(0,r.jsx)(f.default,{}):(0,r.jsx)(c.default,{}),onClick:function(){u||(0,a.FormatCommand)(s)}}):null}function j(e){var t=e.path,n=e.performPaneOperation;return(0,p.isMarkdownFile)(t)?(0,r.jsx)(g.PaneHeaderActionButton,{altText:"Preview "+(0,p.getFileName)(t),buttonText:"Preview",icon:(0,r.jsx)(u.default,{}),onClick:function(){n({operation:"replace",pane:{type:"markdown",data:{path:t}}})}}):null}function T(e){var t=e.path,n=e.performPaneOperation;return(0,p.isSVGFile)(t)?(0,r.jsx)(g.PaneHeaderActionButton,{altText:"Preview "+(0,p.getFileName)(t),buttonText:"Preview",icon:(0,r.jsx)(u.default,{}),onClick:function(){n({operation:"replace",pane:{type:"media",data:{path:t}}})}}):null}function E(e){var t=e.path,n=e.performPaneOperation,i=(0,y.useGetCursorState)();return(0,p.isCsvFile)(t)?(0,r.jsx)(g.PaneHeaderActionButton,{altText:"Toggle Preview",buttonText:"Preview",icon:(0,r.jsx)(u.default,{}),onClick:function(){var e=i();n({operation:"replace",pane:{type:"csvPreview",data:{path:t,line:null==e?void 0:e.position.line}}})}}):null}function R(e){return"custom_instruction/instructions.md"===e}function I(){return(0,r.jsx)(_.View,{grow:0,children:(0,r.jsx)(w.StatusBanner,{icon:(0,r.jsx)(d.default,{}),colorway:"blue",variant:"flush",text:"This file contains custom instructions that guide Agent's behavior. Changes here will affect how Agent responds to your requests."})})}e.s(["CodeEditorHeader",()=>k,"CustomInstructionBanner",()=>I,"FileActions",()=>S,"isCustomInstructionFile",()=>R],62424);var A=e.i(179302),P=e.i(446749),D=e.i(700170),O=new D.ReactCompartment(function(e){return e?A.EditorView.domEventObservers({keydown:function(e,t){(0,P.showMessageTooltip)(t,{message:"Editing is disabled while the agent is working",offset:t.state.selection.main.from,ignoreKeydown:!0})}}):null});e.s(["DisabledWhileAgentWorking",()=>O],440416);var N=e.i(858248),M=e.i(709485),L=e.i(541793),B=e.i(852819),V=(0,L.atom)(!1),F=new D.ReactCompartment(function(e){var t=e.analyticsSurface,n=e.shouldTrack,r=e.onPaste;return A.EditorView.domEventHandlers({paste:function(){n&&(0,N.track)(M.events.TEXT_PASTED,{surface:t}),null==r||r()}})});function U(e){var t=e.analyticsSurface,n=(0,B.useValue)(V),r=(0,B.useSet)(V);return F.use({analyticsSurface:t,shouldTrack:!n,onPaste:function(){return r(!0)}})}e.s(["useTrackFirstPasteExtension",()=>U],406948);var G=e.i(904851),$=e.i(90659),H=e.i(721281),z=e.i(346715),W=e.i(88125),q=e.i(753950);e.i(508987);var K=e.i(457103),Y=e.i(480028),Q="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><circle cx="10" cy="10" r="10" fill="black" /></svg>\')',", linear-gradient(transparent, transparent)"),X="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" d="M2.5 10H15.5M15.5 10L9.5 5M15.5 10L9.5 15M18 4V16"/></svg>\')',", linear-gradient(transparent, transparent)"),Z=A.EditorView.theme({".cm-vws-space":{backgroundColor:Y.tokens.foregroundDimmest,maskImage:Q,maskSize:"0.375ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":Q,"-webkit-mask-size":"0.375ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325},"&.cm-vws-enclosed":{opacity:.5},"&.cm-vws-trailing":{opacity:.5},"&.cm-vws-selected":{opacity:.75}},".cm-vws-tab":{backgroundColor:Y.tokens.foregroundDimmest,maskImage:X,maskSize:"1.75ch 1.75ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":X,"-webkit-mask-size":"1.75ch 1.75ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325,maskPosition:"left min(95%, 0.25ch) top 50%","-webkit-mask-position":"left min(95%, 0.25ch) top 50%"},"&.cm-vws-enclosed, &.cm-vws-trailing":{opacity:.5,maskPosition:"calc(50% - 0.25ch) 50%","-webkit-mask-position":"calc(50% - 0.25ch) 50%"},"&.cm-vws-selected":{opacity:.75}}}),J=(0,W.default)(function(e,t,n){var r="cm-vws-".concat(" "===e?"space":"tab"," cm-vws-").concat(t).concat(n?" cm-vws-selected":"");return A.Decoration.mark({class:r})},function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)});function ee(e,t,n){var r=e.facet(er);if(!r.leading&&!r.enclosed&&!r.trailing&&!r.selected)return[];for(var i=[],a=e.doc.lineAt(t),o=e.doc.lineAt(n),s=a.number;s<=o.number;s++)!function(a){var o=e.doc.line(a),s=o.text.length;if(0===s)return;var l=0===o.text.trim().length,u=!!r.selected&&e.selection.ranges.some(function(e){return!e.empty&&e.from<o.to&&e.to>=o.from});if(r.leading||r.enclosed||r.trailing||u){if(l){if(r.leading||r.trailing||u)for(var c=0;c<s;c++)!function(a){var s=o.text[a],l=o.from+a;if(!(l<t)&&!(l>=n)&&(" "===s||"	"===s)){var c=u&&e.selection.ranges.some(function(e){return e.from<=l&&e.to>l});(r.leading||r.trailing||c)&&i.push(J(s,"trailing",c).range(l,l+1))}}(c);return}for(var d=s-o.text.trimStart().length,f=o.text.trim().length,p=0;p<s;p++)!function(a){var s=o.text[a],l=o.from+a;if(!(l<t)&&!(l>=n)&&(" "===s||"	"===s)){var c=void 0;c=a>=d+f?"trailing":a>d?"enclosed":"leading";var p=u&&e.selection.ranges.some(function(e){return e.from<=l&&e.to>l});(r[c]||p)&&i.push(J(s,c,p).range(l,l+1))}}(p)}}(s);return i}var et=function(){function e(t){(0,G._)(this,e),(0,H._)(this,"decorations",void 0),this.decorations=A.Decoration.set(ee(t.state,0,t.state.doc.length))}return(0,$._)(e,[{key:"update",value:function(e){if((0,K.hasChanged)(e,er)){this.decorations=A.Decoration.set(ee(e.state,0,e.state.doc.length));return}var t=e.state.facet(er);if(e.docChanged||e.selectionSet&&t.selected){var n=this.decorations,r=null,i=null;if(e.selectionSet&&t.selected){var a=e.startState.selection.ranges.filter(function(e){return!e.empty}),o=(0,z._)(e.state.selection.ranges).concat((0,z._)(e.startState.selection.map(e.changes).ranges)).filter(function(e){return!e.empty});a.length&&(r=q.EditorSelection.create(a)),o.length&&(i=q.EditorSelection.create(o))}if(e.docChanged&&e.changes.iterChangedRanges(function(t,n,a,o){var s=q.EditorSelection.range(e.startState.doc.lineAt(t).from,e.startState.doc.lineAt(n).to);r=r?r.addRange(s):q.EditorSelection.create([s]);var l=q.EditorSelection.range(e.state.doc.lineAt(a).from,e.state.doc.lineAt(o).to);i=i?i.addRange(l):q.EditorSelection.create([l])}),r){var s=r.ranges;n=n.update({filter:function(e,t){return!s.some(function(n){return n.from<=e&&n.to>=t})},filterFrom:s[0].from,filterTo:s[s.length-1].to})}e.docChanged&&(n=n.map(e.changes)),i&&(n=n.update({add:i.ranges.map(function(t){return ee(e.state,t.from,t.to)}).flat()})),this.decorations=n}}}]),e}(),en=A.ViewPlugin.fromClass(et,{decorations:function(e){return e.decorations}}),er=q.Facet.define({combine:function(e){var t;return null!=(t=e[0])?t:{}},enables:[Z,q.Prec.highest(en)]}),ei=new D.ReactCompartment(function(e,t,n,r){return e||t||n||r?er.of({leading:e,enclosed:t,trailing:n,selected:r}):null});e.s(["VisibleWhitespaceCompartment",()=>ei],394205)},654360,179147,122947,424719,288209,385164,166978,211664,180182,260171,588561,378294,425807,977200,801573,513705,e=>{"use strict";var t,n,r=e.i(297083),i=e.i(878420),a=e.i(64386),o=e.i(346715),s=e.i(817556),l=e.i(753950),u=e.i(204179),c=e.i(502379),d=e.i(700170);e.i(694906);var f=e.i(627720),p=e.i(671901),h=e.i(843754),m=e.i(61524),g=e.i(570271),x=e.i(256969),y=e.i(141665),b=e.i(485237),w=e.i(530658),_=e.i(389959),k=e.i(522682);function S(e){var t=(0,w._)((0,_.useState)(null),2),n=t[0],r=t[1];return(0,_.useEffect)(function(){var t=function(){r((0,x.mergeLSPServerCapabilities)(e.map(function(e){return(0,x.default)(e)})))};return t(),(0,k.combineDisposables)(e.map(function(e){return e.onServerCapabilitiesChange(function(){return t()})}))},[e]),n}e.s(["default",()=>S],179147);var C=e.i(529810);function j(e){var t=(0,C.default)().container,n=(0,g.useToolchainConfigs)(),r=(0,m.usePreferences)("codeIntelligence").preferences,i=(0,b.default)(e.filePath),a=S(i);return T.use(n,t,i,a,r.codeIntelligence,e.filePath)}var T=new d.ReactCompartment(function(e,t,n,d,m,g){return e?e.formatters.map(function(e){var b;if(2===(b=e.id.split("/")).length&&b[1].includes("languageServer")){var w,_,k,S,C=n.find(function(t){return t.clientId===e.id});return C?(w=g,_=C,k=d,S=m,_&&_.isSupportedFile(w)&&k&&k.isFormatSupported&&(0,x.default)(_).isFormatSupported&&S?u.FormatProvider.of({format:function(e,t,n){return(0,r._)(function(){return(0,s._)(this,function(r){return[2,(t?_.request.formatRange(w,(0,c.selectionToRange)(e,t),n):_.request.format(w,n)).then(function(t){return"error"in t||t.cancelled?{error:!0}:t.result?{result:(0,y.default)(t.result,e.toString())}:{result:l.ChangeSet.empty(e.length)}})]})})()},supportsRangeFormatting:(0,x.default)(_).isFormatRangeSupported,identifier:_.clientId,name:_.clientName}):[]):[]}return(0,f.isFileSupported)(g,e)?u.FormatProvider.of({format:function(n,l,u){return(0,r._)(function(){var r,c,d,f,m;return(0,s._)(this,function(s){switch(s.label){case 0:if(!e.startCommand)throw Error("Expected formatter command");return r=(0,h.default)({container:t}),(c=(0,o._)(e.startCommand.args)).push("-f",g),l&&(c.push("--range-start",String(l.main.from)),c.push("--range-end",String(l.main.to))),c.push("--tab-size",String(u.tabSize)),u.insertSpaces&&c.push("--insert-spaces"),u.trimFinalNewlines&&c.push("--trim-final-newlines"),u.trimTrailingWhitespace&&c.push("--trim-trailing-whitespace"),u.insertFinalNewline&&c.push("--insert-final-newline"),e.startCommand.lifecycle===p.api.Exec.Lifecycle.STDIN&&c.push("--stdin"),d="",f="",m=[r.onOutput(function(e){return d+=e}),r.onStderr(function(e){return f+=e}),r.dispose],[4,r.request((0,a._)((0,i._)({},e.startCommand),{args:c,lifecycle:p.api.Exec.Lifecycle.STDIN,stdin:n.toString()})).then(function(e){var t=e.error;return m.forEach(function(e){return e()}),t?{error:!0,message:f}:{result:d}})];case 1:return[2,s.sent()]}})})()},supportsRangeFormatting:e.supportsRangeFormatting,identifier:e.id,name:e.name}):null}).filter(Boolean):null});e.s(["useFormattingProviders",()=>j],654360);var E=e.i(830675),R=e.i(938668),I=l.StateEffect.define(),A=l.StateEffect.define(),P=function(e){var t=e.view,n=e.insert,r=e.scrollIntoView,i=e.overwrite,a=e.insertAt;if(i)t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n},effects:I.of(null),scrollIntoView:r,annotations:R.default.of(!0)});else{var o=null!=a?a:t.state.selection.main.head,s=null!=a?a:t.state.selection.main.from;t.dispatch({changes:{from:s,insert:n},selection:{anchor:o+n.length},effects:I.of(null),scrollIntoView:r,annotations:R.default.of(!0)})}},D=l.StateField.define({create:function(){return null},update:function(e,t){e&&(e=e.map(t.changes));var n=!0,r=!1,i=void 0;try{for(var a,o=t.effects[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.is(I)&&(e=t.changes.invert(t.startState.doc)),s.is(A)&&(e=null)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e}});e.s(["RevetGhostwriterCodeInsertState",()=>D,"insertGhostwriterCode",()=>P],122947);var O=e.i(904851),N=e.i(90659),M=e.i(721281);function L(e){return JSON.stringify({text:e})+"\n"}var B=function(){function e(){(0,O._)(this,e),(0,M._)(this,"list",[])}return(0,N._)(e,[{key:"add",value:function(e,t,n){this.list.push({prefix:e,suggestion:t,tokens:n}),this.list.length>25&&this.list.pop(),this.list.sort(function(e,t){return t.suggestion.length-e.suggestion.length})}},{key:"retrieve",value:function(e,t){for(var n=0;n<this.list.length;n++){var r=this.list[n],i=r.prefix,a=r.suggestion,o=r.tokens;if(2*o<t)continue;if(e===i)return L(a);if(i.length>e.length||i.length+a.length<=e.length||2*Math.floor((i.length+a.length-e.length)/(a.length/o))<t)continue;var s=a.lastIndexOf("\n");if(-1===s||!(s<=e.length-i.length)){var l=i+a;if(l.startsWith(e)){var u=l.slice(e.length);if(u.trim().length)return L(u)}}}return null}}]),e}();e.s(["SuggestionCache",()=>B],424719);var V=e.i(179302),F=e.i(167626),U=e.i(72158),G=e.i(488566),$=l.Facet.define({combine:function(e){var t=e.filter(Boolean);return{onDismiss:function(e){return t.forEach(function(t){var n;return null==(n=t.onDismiss)?void 0:n.call(t,e)})},onRequestIgnoredBackendOnly:function(e){return t.forEach(function(t){var n;return null==(n=t.onRequestIgnoredBackendOnly)?void 0:n.call(t,e)})},onRequestFirstEmit:function(e){return t.forEach(function(t){var n;return null==(n=t.onRequestFirstEmit)?void 0:n.call(t,e)})},onRequestEndedWithNoSuggestion:function(e){return t.forEach(function(t){var n;return null==(n=t.onRequestEndedWithNoSuggestion)?void 0:n.call(t,e)})},onRequestCompletelyPresented:function(e){return t.forEach(function(t){var n;return null==(n=t.onRequestCompletelyPresented)?void 0:n.call(t,e)})},onSuggestionExplicitlyDismissed:function(e,n){return t.forEach(function(t){var r;return null==(r=t.onSuggestionExplicitlyDismissed)?void 0:r.call(t,e,n)})},onSuggestionAccepted:function(e,n){return t.forEach(function(t){var r;return null==(r=t.onSuggestionAccepted)?void 0:r.call(t,e,n)})}}}});e.s(["CompleteCodeListeners",()=>$],288209);var H=e.i(240849),z=e.i(430636),W=e.i(963323),q=function(e){var t=e.state.field(H.CompleteCodeSuggestion,!1),n=e.state.facet($);if(!(null==t?void 0:t.presented)||Date.now()-t.timestamp<150)return!1;var r=e.state.selection.main.head,i=e.state.doc.lineAt(r);if(r<=i.from+i.length-i.text.trimStart().length){var a=t.changes.closestRange(r);if((0,F._)(a.value,z.ProposedInsertion)){var o=a.value.unfulfilled.toString(),s=(0,W.numColumns)(o,e.state.tabSize);if(s>0&&s>=e.state.tabSize)return!1}}var l=t.changes.asChangeSpec(),u=e.state.changes(l),c=t.changes.extendSelection(e.state.selection);return(0,U.closeCompletion)(e),e.dispatch({changes:u,selection:c,scrollIntoView:!0,effects:H.setCompleteCodeSuggestion.of(t.dismiss(H.DismissalReason.ACCEPTED_BY_USER)),annotations:[R.default.of(!0),G.isolateHistory.of("full")]}),n.onSuggestionAccepted(e,t),!0},K=function(e){var t=e.state.field(H.CompleteCodeSuggestion,!1),n=e.state.facet($);return!!(null==t?void 0:t.presented)&&(e.dispatch({effects:H.setCompleteCodeSuggestion.of(t.dismiss(H.DismissalReason.DISMISSED_BY_USER))}),n.onSuggestionExplicitlyDismissed(e,t),!0)};e.s(["acceptCompleteCodeSuggestion",()=>q,"dismissCompleteCodeSuggestion",()=>K],385164);var Y=l.Facet.define({combine:function(e){var t;return null!=(t=e.filter(Boolean)[0])?t:null}}),Q=e.i(895477),X=e.i(305027),Z=l.StateField.define({create:function(){return null},update:function(e,t){if(t.annotation(R.default)||!t.state.field(H.CompleteCodeSuggestion).stopped)return null;if(!t.docChanged&&!t.selection)return e;var n=t.newDoc,r=t.newSelection.main.head;return t.annotation(l.Transaction.remote)?null!==e&&(0,Q.isValidRequestPosition)(n,r)&&(0,Q.isOnEmptyLine)(n,r)?e:null:t.selection&&t.isUserEvent("select")?(0,Q.isValidRequestPosition)(n,r)&&(0,Q.isOnEmptyLine)(n,r)?Date.now():null:t.docChanged&&null!==e?(0,Q.isValidRequestPosition)(n,r)&&(0,Q.isOnEmptyLine)(n,r)?e:null:e}}),J=function(){function e(t){(0,O._)(this,e),(0,M._)(this,"view",void 0),(0,M._)(this,"timeout",void 0),this.view=t,this.timeout=null}return(0,N._)(e,[{key:"update",value:function(e){var t=this,n=e.startState.field(Z),r=e.state.field(Z);n!==r&&(null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null),null!==r&&(this.timeout=setTimeout(function(){t.timeout=null,t.view.dispatch({effects:[X.setCompleteCodeTrigger.of(X.Trigger.NOW)]})},2500)))}},{key:"destroy",value:function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}}]),e}(),ee=V.ViewPlugin.fromClass(J,{provide:function(){return Z}}),et=e.i(486701);e.i(508987);var en=e.i(457103),er=e.i(42512),ei=((t={})[t.SUFFIX=2]="SUFFIX",t[t.HIGH=1]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-1]="LOW",t),ea=l.Facet.define({combine:function(e){var t=e.filter(Boolean);return function(e){return t.map(function(t){return"function"==typeof t?t(e):t}).filter(Boolean).flat()}}}),eo=function(){function e(t){if((0,O._)(this,e),(0,M._)(this,"priority",void 0),(0,M._)(this,"header",void 0),(0,M._)(this,"segments",void 0),(0,M._)(this,"accepted",void 0),(0,M._)(this,"curLength",void 0),(0,M._)(this,"maxLength",void 0),(0,M._)(this,"minLength",void 0),this.priority=null!=(n=t.priority)?n:ei.NORMAL,this.header=null!=(r=t.header)?r:"",this.segments=t.segments,this.accepted=0,this.curLength=0,this.segments.length){var n,r,i=this.header?this.header.length+1:0;this.maxLength=i+this.segments.reduce(function(e,t){return e+t.length},0),this.minLength=this.isSuffix?i+this.segments[0].length:i+this.segments[this.segments.length-1].length}else this.maxLength=0,this.minLength=0}return(0,N._)(e,[{key:"isSuffix",get:function(){return this.priority===ei.SUFFIX}},{key:"acceptSegment",value:function(e){if(this.accepted===this.segments.length)return 0;var t=this.isSuffix?this.segments[this.accepted]:this.segments[this.segments.length-this.accepted-1],n=0===this.accepted&&this.header?this.header.length+t.length+1:t.length;return n>e?0:(this.accepted++,this.curLength+=n,n)}},{key:"acceptAll",value:function(){this.accepted=this.segments.length,this.curLength=this.maxLength}},{key:"finalize",value:function(){return 0===this.accepted?null:(this.header?this.header+"\n":"")+(this.isSuffix?this.segments.slice(0,this.accepted).join("").trimEnd():this.segments.slice(this.segments.length-this.accepted).join("").trimEnd())}}],[{key:"acceptSegments",value:function(e,t){for(var n=t;t>0;){var r=!1,i=!0,a=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value.acceptSegment(t);u&&(t-=u,r=!0)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}if(!r)break}return n-t}}]),e}(),es=function(){function e(t){(0,O._)(this,e),(0,M._)(this,"priority",void 0),(0,M._)(this,"chunks",void 0),(0,M._)(this,"size",void 0),this.priority=t,this.chunks=[],this.size=0}return(0,N._)(e,[{key:"accepted",get:function(){return this.chunks.reduce(function(e,t){return e+t.curLength},0)}},{key:"empty",get:function(){return 0===this.size}},{key:"add",value:function(e){this.chunks.push(e),this.size+=e.maxLength}},{key:"resize",value:function(e){if(e<this.accepted)throw Error("Cannot resize below already accepted");this.size=e}},{key:"accept",value:function(){eo.acceptSegments(this.chunks,this.size-this.accepted)}}],[{key:"fromChunkViews",value:function(t){var n=[],r=new Map,i=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,c=r.get(u.priority);c||(c=new e(u.priority),n.push(c),r.set(u.priority,c)),c.add(u)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return n}}]),e}(),el=function(){function e(t,n){(0,O._)(this,e),(0,M._)(this,"cooldown",void 0),(0,M._)(this,"ignored",void 0),this.cooldown=t,this.ignored=n}return(0,N._)(e,[{key:"delay",value:function(t){return new e(Date.now()+t,this.ignored)}},{key:"ignore",value:function(t){return this.ignored!==t?new e(this.cooldown,t):this}},{key:"vent",value:function(){return null!==this.cooldown?new e(null,this.ignored):this}},{key:"clear",value:function(){return null!==this.cooldown||null!==this.ignored?new e(null,null):this}},{key:"cooling",get:function(){return null!==this.cooldown&&Date.now()<this.cooldown}},{key:"remaining",get:function(){return null!==this.cooldown?Math.max(0,this.cooldown-Date.now()):0}},{key:"tick",value:function(){return null!==this.cooldown&&Date.now()>this.cooldown?this.vent():this}},{key:"handle",value:function(e,t){switch(t.reason){case H.DismissalReason.FULLY_TYPED_INTO:case H.DismissalReason.ACCEPTED_BY_USER:return this.clear();case H.DismissalReason.DISMISSED_BY_USER:return this.delay(5e3).ignore(e.suggestion.content);case H.DismissalReason.INCOMPATIBLE_DOCUMENT_CHANGE:case H.DismissalReason.INCOMPATIBLE_CURSOR_CHANGE:return e.suggestion.ctx.onEmptyLine?this.delay(5e3):this.delay(1e3)}return this}},{key:"isIgnored",value:function(e){return null!==this.ignored&&function(e,t){for(var n=Math.max(e.length,t.length),r=0,i=0;i<n;i++)e[i]!==t[i]&&r++;return 1-r/n}(this.ignored,e)>=.8}}]),e}(),eu=l.Facet.define({combine:function(e){return!e.length||e[0]}}),ec=l.StateField.define({create:function(){return new el(null,null)},update:function(e,t){if(!t.state.facet(eu)||(e=e.tick()).cooling)return e;var n=t.startState.field(H.CompleteCodeSuggestion,!1),r=t.state.field(H.CompleteCodeSuggestion,!1);return n&&r&&n.presented&&r.stopped?e.handle(n,r):e}});e.s(["CompleteCodeRegulator",()=>ec,"CompleteCodeRegulatorEnabled",()=>eu],166978);var ed=e.i(394212);e.i(148382);var ef=e.i(754686),ep=["o17pu","o1gpu","ovgpu","ovgpure","ovgpuref","ovgpurf","ovgpuva","ovgpuvat","o!gpu","pnzfyhg","pnzjuber","puvap","puvax","pbba","pbbaf","phaavr","phag","phagsnpr","phagubyr","phagyvpx","phagyvpx","phagyvpxre","phagyvpxre","phagyvpxvat","phagyvpxvat","phagent","phagf","qnexvr","qngr encr","qngrencr","snt","sntont","sntt","snttvat","snttvg","snttvgg","snttbg","snttf","sntbg","sntbgf","sntf","sntgneq","sngnff","shpxgneq","shpxgneqf","tnat onat","tnatonat","tnatonatrq","tnatonatrq","tnatonatf","tnlgneq","tnljnq","tbngpk","tbngfr","tevatb","ubne","ubner","ubre","ubbxre","wnvy onvg","wnvyonvg","wnc","wvtnobb","wvttnobb","wvttreobb","xhag","y3v+pu","y3vgpu","yrzba cnegl","ybyvgn","a1ttn","a1ttre","anzoyn","arteb","avtt3e","avtt4u","avttn","avttnu","avttnf","avttnm","avttre","avttref","avtyrg","avt abt","dhrreonvg","dhrreubyr","encr","encvat","encvfg","ergneq","ehfxv","furznyr","fubgn","fxnax","fyhg","fyhgont","fyhgf","jrgonpx","juvgr cbjre","juber"],eh=ep.reduce(function(e,t){return Math.max(e,t.length)},0),em=new RegExp("(?:\\w+[^\\S\\n]*)?\\w*[^]{".concat(eh,"}$")),eg=null,ev=function(){function e(t){var n=this;(0,O._)(this,e),(0,M._)(this,"finished",void 0),(0,M._)(this,"config",void 0),(0,M._)(this,"abortController",void 0),(0,M._)(this,"suggestion",void 0),(0,M._)(this,"promise",void 0),this.config=t,this.finished=!1,this.abortController=new AbortController,this.suggestion="",this.promise=this.start(),this.abortController.signal.addEventListener("abort",function(){if(!n.finished){var e,t;n.finished=!0,null==(e=(t=n.config).onFinished)||e.call(t,null)}})}return(0,N._)(e,[{key:"start",value:function(){return(0,r._)(function(){var e,t,n,r,i,a,o,l,u,c,d,f,p,h,m,g,x,y,b;return(0,s._)(this,function(s){switch(s.label){case 0:s.trys.push([0,13,,14]),n=this.config.prefix.toString(),a=this.config.request({prefix:n,suffix:null!=(r=this.config.suffix)?r:void 0,header:null!=(i=this.config.header)?i:void 0,language:this.config.language,maxTokens:this.config.maxTokens,signal:this.abortController.signal}),o=!0,l=!1,u=!1,s.label=1;case 1:s.trys.push([1,6,7,12]),d=(0,ed._)(a),s.label=2;case 2:return[4,d.next()];case 3:if(!(l=!(f=s.sent()).done))return[3,5];if(function(e,t){if(t){var n,r;"string"!=typeof t&&(t=t.sliceString(Math.max(0,t.length-2*eh))),e=(null!=(r=null==(n=t.match(em))?void 0:n[0])?r:t)+e}if(null===eg){var i=ep.map(function(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+("n">e.toLowerCase()?13:-13))})}).map(function(e){return(0,ef.default)(e.toLowerCase().trim())}).sort(function(e,t){return t.length-e.length}).join("|"),a="\\b|\\d|_";eg=RegExp("(?:".concat(a,")(?:").concat(i,")(?:").concat(a,")"),"i")}return eg.test(e)}(p=f.value,o?n:this.suggestion))return this.abort(),null==(h=(m=this.config).onError)||h.call(m,Error("Slur detected in output")),[3,5];if(this.suggestion+=p,this.config.onTextReceived&&!1===this.config.onTextReceived(this.suggestion,o))return this.abort(),[3,5];o=!1,s.label=4;case 4:return l=!1,[3,2];case 5:return[3,12];case 6:return g=s.sent(),u=!0,c=g,[3,12];case 7:if(s.trys.push([7,,10,11]),!(l&&null!=d.return))return[3,9];return[4,d.return()];case 8:s.sent(),s.label=9;case 9:return[3,11];case 10:if(u)throw c;return[7];case 11:return[7];case 12:return[3,14];case 13:return x=s.sent(),this.aborted||this.abort(),(0,F._)(x,DOMException)&&"AbortError"===x.name||null==(y=(b=this.config).onError)||y.call(b,x),[3,14];case 14:if(this.aborted)return[2,null];return this.finished=!0,null==(e=(t=this.config).onFinished)||e.call(t,this.suggestion),[2,this.suggestion]}})}).call(this)}},{key:"aborted",get:function(){return this.abortController.signal.aborted}},{key:"abort",value:function(){this.aborted||this.abortController.abort()}},{key:"then",value:function(e,t){return this.promise.then(e,t)}}]),e}(),ex=e.i(537804),ey=e.i(680118),eb=e.i(328751),ew=function(){function e(t,n,r,i,a){(0,O._)(this,e),(0,M._)(this,"text",void 0),(0,M._)(this,"pos",void 0),(0,M._)(this,"docA",void 0),(0,M._)(this,"treeA",void 0),(0,M._)(this,"parser",void 0),(0,M._)(this,"reuseData",void 0),(0,M._)(this,"_line",void 0),(0,M._)(this,"_onEmptyLine",void 0),(0,M._)(this,"_changesAtoB",void 0),(0,M._)(this,"_docB",void 0),(0,M._)(this,"_treeB",void 0),(0,M._)(this,"_blockA",void 0),(0,M._)(this,"_blockB",void 0),(0,M._)(this,"_inEmptyBlock",void 0),this.text=t,this.pos=n,this.docA=r,this.treeA=i,this.parser=a}return(0,N._)(e,[{key:"line",get:function(){return void 0===this._line&&(this._line=this.docA.lineAt(this.pos)),this._line}},{key:"onEmptyLine",get:function(){return void 0===this._onEmptyLine&&(this._onEmptyLine=(0,Q.isEmpty)(this.line)),this._onEmptyLine}},{key:"changesAtoB",get:function(){return void 0===this._changesAtoB&&(this._changesAtoB=l.ChangeSet.of({from:this.pos,to:this.docA.length,insert:this.text},this.docA.length)),this._changesAtoB}},{key:"docB",get:function(){return void 0===this._docB&&(this._docB=this.reuseData?this.reuseData.diff.apply(this.reuseData.docB):this.changesAtoB.apply(this.docA)),this._docB}},{key:"treeB",get:function(){return void 0===this._treeB&&(this.treeA&&this.parser?this.reuseData?this._treeB=(0,ey.getIncrementallyParsedTree)({parser:this.parser,changes:this.reuseData.diff,text:this.docB,base:this.reuseData.treeB}):this._treeB=(0,ey.getIncrementallyParsedTree)({parser:this.parser,changes:this.changesAtoB,text:this.docB,base:this.treeA}):this._treeB=null),this._treeB}},{key:"inEmptyBlock",get:function(){return void 0===this._inEmptyBlock&&(this._inEmptyBlock=!!this.treeA&&(0,ex.isInEmptyBlock)(this.docA,this.treeA,this.pos)),this._inEmptyBlock}},{key:"blockA",get:function(){return void 0===this._blockA&&(this._blockA=this.treeA?(0,ex.getContainingBlock)(this.treeA,this.pos):null),this._blockA}},{key:"blockB",get:function(){return void 0===this._blockB&&(this._blockB=this.treeB?(0,ex.getContainingBlock)(this.treeB,this.pos):null),this._blockB}},{key:"hasTree",value:function(){return null!==this.parser&&null!==this.treeA}},{key:"update",value:function(t){var n=this,r=new e(t,this.pos,this.docA,this.treeA,this.parser);if(r._line=this._line,r._onEmptyLine=this._onEmptyLine,r._inEmptyBlock=this._inEmptyBlock,r._blockA=this._blockA,this.parser&&this.treeA&&(this.reuseData||this._treeB)){var i=(0,eb.changeSetFromDiff)(this.text,t),a=[];i.iterChanges(function(e,t,r,i,o){a.push({from:n.pos+e,to:n.pos+t,insert:o})});var o=l.ChangeSet.of(a,this.docB.length);this.reuseData&&!this._treeB?r.reuseData={diff:this.reuseData.diff.compose(o),docB:this.reuseData.docB,treeB:this.reuseData.treeB}:this._treeB&&(r.reuseData={diff:o,docB:this.docB,treeB:this._treeB})}return r}}]),e}(),e_=e.i(873753);function ek(e,t,n){var r,i=null!=(r=e.prop(t<0?e_.NodeProp.openedBy:e_.NodeProp.closedBy))?r:null;if(null===i||n&&!i.includes(n.name))if(!n)return null;else i=i?(0,o._)(i).concat([n.name]):[n.name];return i}function eS(e,t,n){var r=ek(e.type,t,n);if(null===r)return null;for(var i=e.cursor(),a=0;t<0?i.prevSibling():i.nextSibling();){if(0===a&&i.from!==i.to&&r.includes(i.name))return i.node;if(null!==ek(i.type,t)){a++;continue}if(null!==ek(i.type,-t)){if(0===a)return null;a--}}return null}var eC=/[([{]+(?=\s*$)/,ej=function(){function e(t,n,r,i,a){(0,O._)(this,e),(0,M._)(this,"source",void 0),(0,M._)(this,"pos",void 0),(0,M._)(this,"newlines",void 0),(0,M._)(this,"content",void 0),(0,M._)(this,"ctx",void 0),(0,M._)(this,"empty",void 0),(0,M._)(this,"text",void 0),(0,M._)(this,"lines",void 0),(0,M._)(this,"_segments",void 0),(0,M._)(this,"_insertions",void 0),this.source=t,this.pos=n,this.newlines=r,this.content=i,this.ctx=a,this.empty=(0,Q.isEmpty)(i),this.text=this.empty?"":r+i,this.lines=(0,Q.splitLines)(i)}return(0,N._)(e,[{key:"segments",get:function(){if(void 0===this._segments){if(this.ctx.hasTree()){var e=function(e){var t=function(e){var t,n,r,i,a=e.insertion,o=e.pos;if("doc"in e){var s=e.parser;t=e.doc,n=e.tree;var u=l.ChangeSet.of({from:o,to:t.length,insert:a},t.length);r=u.apply(t),i=(0,ey.getIncrementallyParsedTree)({parser:s,changes:u,text:r,base:n})}else t=e.docA,n=e.treeA,r=e.docB,i=e.treeB;return{insertion:a,pos:o,docA:t,treeA:n,docB:r,treeB:i}}(e),n=t.insertion,r=t.pos,i=t.docA,a=t.treeA,o=t.docB,s=t.treeB,u=[],c=[],d=s.cursor();do{if(null===ek(d.type,-1))continue;var f=d.node,p=eS(f,-1);if(p&&p.to<=r){var h=function(e,t){for(var n=t.resolveInner(e.from,1).node;n&&n.from===e.from;){if(n.type===e.type)return n;n=n.parent}return null}(p,a);if(h){u.push({openA:h,closeB:f});var m=eS(h,1,f.type);m&&m.from>=r&&c.push(m)}}}while(d.prev()&&d.to>r)if(0===u.length||0===c.length)return null;var g=[],x=!0,y=!1,b=void 0;try{for(var w,_=u[Symbol.iterator]();!(x=(w=_.next()).done);x=!0){var k=w.value,S=k.openA,C=k.closeB,j=o.sliceString(C.from,C.to),T=ek(S.type,1,C.type);if(null===T)throw Error("Unexpected null matching types");for(var E=0;E<c.length;E++){var R=c[E];if(T.includes(R.name)&&i.sliceString(R.from,R.to)===j){c.splice(0,E+1),g.unshift({closeA:R,closeB:C});break}}}}catch(e){y=!0,b=e}finally{try{x||null==_.return||_.return()}finally{if(y)throw b}}if(0===g.length)return null;var I=[{text:n,pos:r,index:0,offset:0}],A=0,P=!0,D=!1,O=void 0;try{for(var N,M=g[Symbol.iterator]();!(P=(N=M.next()).done);P=!0){var L=N.value,B=L.closeA,V=L.closeB,F=I.pop();if(!F)throw Error("Unexpected empty split");var U=V.from-r,G=0;if(F.pos<B.from){for(var $=1;function(e,t,n,r){var i=e.sliceString(n,n+1);return i===t.sliceString(r,r+1)&&""===i.trim()}(i,o,B.from-$,V.from-$)&&B.from-$>=F.pos&&V.from-$>=r;)$++;G=$-1}U-=G;var H={text:n.slice(A,U),pos:F.pos,index:F.index,offset:F.offset},z={text:n.slice(U),pos:B.to,index:U,offset:B.to-B.from+G};A=U,I.push(H,z)}}catch(e){D=!0,O=e}finally{try{P||null==M.return||M.return()}finally{if(D)throw O}}return""===I[I.length-1].text&&I.pop(),I}({insertion:this.text,pos:this.pos,docA:this.ctx.docA,treeA:this.ctx.treeA,docB:this.ctx.docB,treeB:this.ctx.treeB});e&&(this._segments=e)}null!=this._segments||(this._segments=[{text:this.text,index:0,pos:this.pos,offset:0}])}return this._segments}},{key:"insertions",get:function(){if(void 0===this._insertions){var e=new l.RangeSetBuilder,t=!0,n=!1,r=void 0;try{for(var i,a=this.segments[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=l.Text.of((0,Q.splitLines)(o.text)),u=new z.ProposedInsertion(s,o.offset);e.add(o.pos,o.pos,u)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this._insertions=e.finish()}return this._insertions}},{key:"with",value:function(t){var n=this.source,r=this.content,i=this.newlines;if("source"in t&&void 0!==t.source){n=t.source;var a=(0,Q.splitLeadingWhitespaceFiltered)(n);r=a.indentation+a.content,i=a.newlines}if("text"in t&&void 0!==t.text){var o=(0,Q.splitLeadingWhitespaceFiltered)(t.text);r=o.indentation+o.content,i=o.newlines}"content"in t&&void 0!==t.content&&(r=t.content),"newlines"in t&&void 0!==t.newlines&&(i=t.newlines);var s=this;if(n!==this.source||r!==this.content||i!==this.newlines){var l=this.ctx.update((0,Q.isEmpty)(r)?"":i+r);s=new e(n,this.pos,i,r,l)}return!s.empty&&t.process&&(s="boolean"==typeof t.process?s.process():s.process(t.process)),s}},{key:"slice",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?this.with({text:this.text.slice(e,t)}):this.with({content:this.content.slice(e,t)})}},{key:"splice",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r?this.text:this.content,a=i.slice(0,e),o=i.slice(e+t);return r?this.with({text:a+n+o}):this.with({content:a+n+o})}},{key:"clip",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.segments[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.pos>=e)return this.slice(0,o.index+o.offset,!0)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return this}},{key:"stopAtLine",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?this.newlines.length:0;if(e<0||e>this.lines.length+n)throw Error("Index out of range: "+e);if(t&&e<n)return this.with({text:this.newlines.slice(0,e)});for(var r=e-n;r<this.lines.length&&(0,Q.isEndBracketGroup)(this.lines[r]);)r++;var i=this.lines.slice(0,r).join("\n");return this.with({content:i})}},{key:"trimEnd",value:function(){return this.with({content:this.content.trimEnd()})}},{key:"removeNewlinesIfOnEmptyLine",value:function(){return this.newlines&&this.ctx.onEmptyLine?this.with({newlines:""}):this}},{key:"cutSuggestion",value:function(){if(this.empty)return this;if((0,Q.isEndBracketGroup)(this.lines[0])||!this.ctx.hasTree())return this.stopAtLine(1);var e=(0,ex.depthSplit)(this.ctx.treeB,this.pos);if(!e.length)return this.stopAtLine(1);var t=this.pos+this.lines[0].length,n=this.ctx.inEmptyBlock?e:e.filter(function(e){return e.from<=t}),r=n.length?n[n.length-1].to-this.pos:null;return(null!==r&&r<0&&(r=null),this.ctx.blockB&&this.ctx.blockB.node.from<this.pos&&(null===r||r>this.ctx.blockB.node.to-this.pos)&&(this.ctx.inEmptyBlock||!this.ctx.blockA||this.ctx.blockA.node.from<this.ctx.blockB.node.from)&&(r=this.ctx.blockB.node.to-this.pos),null===r)?this.ctx.inEmptyBlock?this.ctx.blockA?this.clip(this.ctx.blockA.node.to):this:this.ctx.blockA?this.stopAtLine(1).clip(this.ctx.blockA.node.to):this.stopAtLine(1):this.ctx.blockA&&(this.ctx.inEmptyBlock||!this.ctx.onEmptyLine)?this.slice(0,r,!0).clip(this.ctx.blockA.node.to):this.slice(0,r,!0)}},{key:"clearIfContentIsIsolated",value:function(){if(!this.ctx.onEmptyLine)return this;if(this.newlines)return this.with({content:""});if(1===this.segments.length&&0===this.segments[0].offset)return this;var e=this.segments.find(function(e){return!(0,Q.isEmpty)(e.text.slice(e.offset))});return e&&this.ctx.docA.lineAt(e.pos).number!==this.ctx.line.number?this.with({content:""}):this}},{key:"removeDuplicateLastLine",value:function(){if(!this.newlines&&1===this.lines.length&&!this.ctx.onEmptyLine)return this;var e=this.segments[this.segments.length-1];if(e.offset===e.text.length-1)return this;var t=this.ctx.docA.lineAt(e.pos);if(t.number===this.ctx.docA.lines)return this;var n=e.text.slice(e.offset),r=n.lastIndexOf("\n"),i=-1!==r,a=i?e.index+e.offset+r:e.index+e.offset,o=i?n.slice(r+1):n;return(0,Q.isEmpty)(o)?this:(!i&&(0,Q.isEmpty)(t)&&(o=t.text+o),o===this.ctx.docA.line(t.number+1).text)?this.slice(0,a,!0):this}},{key:"removeTrailingOpenBrackets",value:function(){var e=eC.exec(this.content);return e?this.splice(e.index,e.length):this}},{key:"process",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.skipComplexProcessing?this.trimEnd().removeNewlinesIfOnEmptyLine():this.removeNewlinesIfOnEmptyLine().cutSuggestion().trimEnd().removeDuplicateLastLine().removeTrailingOpenBrackets().trimEnd().clearIfContentIsIsolated()}}],[{key:"create",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=(0,Q.splitLeadingWhitespaceFiltered)(t),s=o.indentation+o.content,l=o.newlines,u=new ew((0,Q.isEmpty)(s)?"":l+s,n,r,i,a);return new e(t,n,l,s,u)}}]),e}(),eT=e.i(736097),eE=function(){function e(t){(0,O._)(this,e),(0,M._)(this,"view",void 0),(0,M._)(this,"destroyed",void 0),(0,M._)(this,"stream",void 0),(0,M._)(this,"debounceTimeout",void 0),(0,M._)(this,"queued",void 0),(0,M._)(this,"lastPrefixLength",void 0),this.view=t,this.destroyed=!1,this.stream=null,this.debounceTimeout=null,this.queued=!1,this.lastPrefixLength=0}return(0,N._)(e,[{key:"config",get:function(){return this.view.state.facet(Y)}},{key:"listeners",get:function(){return this.view.state.facet($)}},{key:"suggestion",get:function(){return this.view.state.field(H.CompleteCodeSuggestion)}},{key:"regulator",get:function(){return this.view.state.field(ec)}},{key:"fileTypeConfig",get:function(){var e,t=this.view.state.facet(eT.fileName),n=this.view.state.facet(eT.EditorFileType),r=null==n||null==(e=n.getFeature("ai"))?void 0:e.complete;return t&&n&&(null==r?void 0:r.enabled)?(0,a._)((0,i._)({},r),{id:n.id,path:t}):null}},{key:"streaming",get:function(){return null!==this.debounceTimeout||null!==this.stream&&!this.stream.finished}},{key:"active",get:function(){return this.streaming||!this.suggestion.stopped}},{key:"dispatchSuggestion",value:function(e){this.view.dispatch({effects:H.setCompleteCodeSuggestion.of(e)})}},{key:"dismiss",value:function(e){this.queued=!1,null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.stream||this.stream.finished||this.stream.aborted||this.stream.abort(),this.destroyed||this.suggestion.stopped||this.dispatchSuggestion(this.suggestion.dismiss(e)),this.listeners.onDismiss(this.view)}},{key:"requestSuggestion",value:function(e){var t,n,r=this;if(null!==this.config&&null!==this.fileTypeConfig){if(null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.config.debounceAlways&&!this.regulator.cooling&&e===X.Trigger.NOW)return void this.requestSuggestionImmediately();var i=this.view.state.selection.main.head,a=this.view.state.wordAt(i),o=a&&a.from!==i?null!=(n=this.config.debounceTimeInsideWord)?n:0:null!=(t=this.config.debounceTimeOutsideWord)?t:0;this.regulator.cooling&&(o=Math.max(o,this.regulator.remaining)),0===o?this.requestSuggestionImmediately():this.debounceTimeout=setTimeout(function(){r.debounceTimeout=null,r.requestSuggestionImmediately()},o)}}},{key:"requestSuggestionImmediately",value:function(){var e,t,n,r=this;if(this.dismiss(),!this.suggestion.stopped)throw Error("dismiss should have stopped the suggestion");if(null!==this.config&&null!==this.fileTypeConfig&&!this.destroyed&&this.view.hasFocus&&(0,Q.isValidRequestPosition)(this.view.state.doc,this.view.state.selection.main.head)){var i=this.config,a=this.view.state,o=a.selection.main.head,s=a.doc,l=(0,et.syntaxTree)(a),u=null!=(t=null==(e=a.facet(et.language))?void 0:e.parser)?t:null,c=this.fileTypeConfig,d={skipComplexProcessing:null!=(n=c.skipComplexProcessing)&&n},f=a.facet(ea),p=function(e){var t=e.doc,n=e.pos,r=e.path,i=e.context,a=e.limit,o=void 0===a?er.MAX_PROMPT_CHARACTERS:a,s=e.reserved,l=void 0===s?er.RESERVED_CONTEXT_CHARACTERS:s,u="-- ".concat(r,"\n");if(u.length>o)throw Error("Cannot fit required header parts in prompt");var c="";if(null==i?void 0:i.length){var d=function(e,t){if((t-=2*e.length)<=0)return null;var n=e.map(function(e){return new eo(e)}).filter(function(e){return e.maxLength>0&&e.minLength<=t}).sort(function(e,t){return e.priority===t.priority?e.minLength-t.minLength:t.priority-e.priority});if(!n.length)return null;var r=es.fromChunkViews(n),i=r.reduce(function(e,t){return e+t.size},0);if(i>t){var a=!0,o=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;c.size>t&&(i-=c.size-t,c.resize(t))}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}for(var d=r.find(function(e){return e.priority===ei.SUFFIX}),f=d?t-d.size:0;i>t;){var p=1,h=!0,m=!1,g=void 0;try{for(var x,y=r[Symbol.iterator]();!(h=(x=y.next()).done);h=!0){var b=x.value;if(f&&b.priority===ei.SUFFIX){f--;continue}if(!b.empty){var w=Math.max(0,b.size-p);i-=b.size-w,b.resize(w),p++}}}catch(e){m=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw g}}}var _=!0,k=!1,S=void 0;try{for(var C,j=r[Symbol.iterator]();!(_=(C=j.next()).done);_=!0){var T=C.value;T.empty||T.accept()}}catch(e){k=!0,S=e}finally{try{_||null==j.return||j.return()}finally{if(k)throw S}}var E=r.reduce(function(e,t){return e+t.accepted},0);E<t&&eo.acceptSegments(n,t-E)}else n.forEach(function(e){return e.acceptAll()});var R=n.filter(function(e){return e.priority===ei.SUFFIX}).map(function(e){return e.finalize()}).filter(Boolean).join("")||null,I=n.filter(function(e){return e.priority!==ei.SUFFIX}).map(function(e){return e.finalize()}).filter(Boolean).reverse().join("\n\n")||null;return I||R?{context:I,suffix:R}:null}(i,Math.max(l-u.length-2,o-n-u.length-2));(null==d?void 0:d.context)&&(u=(null==d?void 0:d.context)+"\n\n"+u),(null==d?void 0:d.suffix)&&(c=null==d?void 0:d.suffix)}var f=function(e,t,n){for(var r=e.slice(0,t);r.length>n;)r=r.lines>1?r.slice(r.line(1).to+1):r.slice(r.length-n);return r}(t,n,o-u.length-c.length);if(u.length+f.length+c.length>o)throw Error("Prompt is over the maximum length");return{prefix:f,suffix:c,header:u}}({doc:s,pos:o,path:c.path,context:f(this.view)}),h=p.prefix,m=p.suffix,g=p.header,x=(0,ex.isInEmptyBlock)(s,l,o)?er.MaxTokens.EMPTY_BLOCK:er.MaxTokens.DEFAULT;this.lastPrefixLength=h.length,i.backendOnly||this.dispatchSuggestion(this.suggestion.start()),this.stream=new ev({request:i.request,language:c.id,maxTokens:x,prefix:h,suffix:m,header:g,onTextReceived:function(e,t){if(t&&r.listeners.onRequestFirstEmit(r.view),i.backendOnly)return void r.listeners.onRequestIgnoredBackendOnly(r.view);if(r.suggestion.stopped||!t&&r.suggestion.slotted)return!1;var n=r.suggestion.slotted?r.suggestion.upgrade(ej.create(e,o,s,l,u).process(d)):r.suggestion.with({source:e,process:d});if(n.stopped||n.suggestion.empty)return!1;r.dispatchSuggestion(n)},onFinished:function(e){var t=r.queued;if(r.queued=!1,!i.backendOnly){if(e&&r.suggestion.active){var n=r.suggestion.suggestion.source!==e?r.suggestion.with({source:e,process:d}):r.suggestion;if(!n.stopped&&!n.suggestion.empty&&!r.regulator.isIgnored(n.suggestion.content)){r.dispatchSuggestion(n.presented?n:n.present()),r.listeners.onRequestCompletelyPresented(r.view);return}}r.dismiss(H.DismissalReason.INCOMPATIBLE_SUGGESTION),t&&r.requestSuggestion(X.Trigger.ENQUEUE),""===e&&r.listeners.onRequestEndedWithNoSuggestion(r.view)}},onError:function(e){E.withScope(function(t){t.setExtra("prefix",h.toString()),t.setExtra("suffix",null==m?void 0:m.toString()),t.setExtra("header",g),t.setExtra("maxTokens",x),t.setExtra("filePath",c.path),t.setExtra("language",c.id),t.setExtra("selection-head",o),t.setExtra("previous-character",s.sliceString(o-1,o)),t.setTag("ghostwriter",!0),E.captureException(e)})}})}}},{key:"postUpdate",value:function(e){var t=e.startState.field(H.CompleteCodeSuggestion,!1),n=e.state.field(H.CompleteCodeSuggestion,!1);t&&n&&t.presented&&n.stopped&&n.reason===H.DismissalReason.FULLY_TYPED_INTO&&this.listeners.onSuggestionAccepted(this.view,t),(0,en.hasChanged)(e,Y,eT.fileName,eT.EditorFileType)&&this.dismiss(),(0,en.hasChanged)(e,H.CompleteCodeSuggestion)&&this.suggestion.stopped&&this.streaming&&this.dismiss();var r=(0,X.resolveTriggerFromTransactions)(e.transactions);switch(r){case X.Trigger.STOP:this.active&&this.dismiss();break;case X.Trigger.ENQUEUE:case X.Trigger.NOW:this.active?this.queued=!0:this.requestSuggestion(r)}}},{key:"destroy",value:function(){this.destroyed=!0,this.dismiss()}}]),e}(),eR=V.ViewPlugin.fromClass(eE,{provide:function(e){return V.EditorView.updateListener.of(function(t){var n;null==(n=t.view.plugin(e))||n.postUpdate(t)})}});e.s(["CompleteCodePlugin",()=>eR],211664);var eI=function(){function e(t){(0,O._)(this,e),(0,M._)(this,"view",void 0),(0,M._)(this,"gesture",void 0),this.view=t,this.gesture=null,this.touchstart=this.touchstart.bind(this),this.touchmove=this.touchmove.bind(this),this.touchend=this.touchend.bind(this),this.touchcancel=this.touchcancel.bind(this),t.dom.addEventListener("touchstart",this.touchstart)}return(0,N._)(e,[{key:"shouldAllowSwiping",value:function(){if(!this.view.hasFocus)return!1;var e=this.view.state.selection.main.head,t=this.view.viewport;if(t.from>e||t.to<e)return!1;var n=this.view.state.field(H.CompleteCodeSuggestion,!1);return!!(null==n?void 0:n.presented)}},{key:"stop",value:function(){this.gesture&&(this.gesture=null,document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel))}},{key:"touchFor",value:function(e){if(!this.gesture)return null;var t=!0,n=!1,r=void 0;try{for(var i,a=e.changedTouches[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.identifier===this.gesture.id)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}},{key:"touchstart",value:function(e){if(this.gesture&&!this.gesture.time)return this.stop();if(!this.gesture&&this.shouldAllowSwiping()&&1===e.changedTouches.length){var t=e.changedTouches[0];this.gesture={id:t.identifier,start:{x:t.clientX,y:t.clientY},end:{x:t.clientX,y:t.clientY},time:null},document.addEventListener("touchmove",this.touchmove,{passive:!1}),document.addEventListener("touchend",this.touchend,{passive:!1}),document.addEventListener("touchcancel",this.touchcancel)}}},{key:"touchmove",value:function(e){var t=this.touchFor(e);if(this.gesture&&t){if(this.gesture.end.x=t.clientX,this.gesture.end.y=t.clientY,this.gesture.time&&Date.now()-this.gesture.time>500)return this.stop();var n=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);if(n>20)return this.stop();if(r>10){if(this.gesture.start.x>this.gesture.end.x)return this.stop();this.gesture.time||(this.gesture.time=Date.now()),e.preventDefault()}}}},{key:"touchend",value:function(e){var t=this.touchFor(e);if(this.gesture&&t){this.gesture.end.x=t.clientX,this.gesture.end.y=t.clientY;var n=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);n<=20&&r>75&&this.gesture.start.x<this.gesture.end.x&&(!this.gesture.time||Date.now()-this.gesture.time<500)&&(q(this.view),e.preventDefault()),this.stop()}}},{key:"touchcancel",value:function(e){this.touchFor(e)&&this.stop()}},{key:"update",value:function(){this.gesture&&!this.shouldAllowSwiping()&&this.stop()}},{key:"destroy",value:function(){this.view.dom.removeEventListener("touchstart",this.touchstart),document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel)}}]),e}(),eA=V.ViewPlugin.fromClass(eI),eP=e.i(262206),eD=l.Facet.define({combine:function(e){var t;return null!=(t=e.filter(Boolean)[0])?t:null},enables:function(e){return[Y.compute([e],function(t){return t.facet(e)}),H.CompleteCodeSuggestion,X.CompleteCodeTrigger,eR,eA,ee,ec,l.Prec.high(V.keymap.compute([e],function(t){var n=t.facet(e),r=[];return(null==n?void 0:n.keyAcceptSuggestion)&&r.push({key:(0,eP.normalizeKeyCombo)(n.keyAcceptSuggestion),run:q}),(null==n?void 0:n.keyDismissSuggestion)&&r.push({key:(0,eP.normalizeKeyCombo)(n.keyDismissSuggestion),run:K}),r}))]}});e.s(["CompleteCode",()=>eD],180182);var eO=e.i(633600);function eN(e){var t=[],n=[],r=!1,i=!0,a=!1,o=void 0;try{for(var s,l=e.selection.ranges[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;u.empty||(t.push(e.sliceDoc(u.from,u.to)),n.push(u))}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}if(!t.length){var c=-1,d=!0,f=!1,p=void 0;try{for(var h,m=e.selection.ranges[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value.from,x=e.doc.lineAt(g);x.number>c&&(t.push(x.text),n.push({from:x.from,to:Math.min(e.doc.length,x.to+1)})),c=x.number}}catch(e){f=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}e.s(["copiedRange",()=>eN],260171);var eM=[];function eL(e){if(!(e.length>800)){var t=eM.indexOf(e);-1!==t&&eM.splice(t,1),eM.unshift(e),eM.length>10&&eM.pop()}}var eB=!1;function eV(e,t){var n=eN(t.state),r=n.text,i=n.linewise;if(r&&r.trim())if(i){var a=r.split(t.state.lineBreak).filter(function(e){return e.trim()}),o=!0,s=!1,l=void 0;try{for(var u,c=a[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;eL(d)}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}}else eL(r)}var eF=[V.ViewPlugin.define(function(){if(!eB){eB=!0;var e=function(e){var t,n=null==(t=document.getSelection())?void 0:t.toString();n&&n.trim()&&Promise.resolve().then(function(){e.defaultPrevented||eL(n)})};document.addEventListener("copy",e),document.addEventListener("cut",e)}return{}}),l.Prec.highest(V.EditorView.domEventObservers({copy:function(e,t){return eV(e,t)},cut:function(e,t){return eV(e,t)}})),ea.of(function(e){if(!eM.length||!e.state.facet(eT.EditorFileType))return null;var t=(0,eO._)(eM),n=t[0],r=t.slice(1),i=[];if(n&&n.trim()){var a=n.trimEnd();i.push({header:"-- Current Clipboard",segments:[a],priority:ei.HIGH})}var o=r.filter(function(e){return e&&e.trim()});if(o.length){var s=o.map(function(e){return e.trimEnd().split("\n").map(function(e,t){return 0===t?"- ".concat(e):"  ".concat(e)}).join("\n")}).reverse();i.push({header:"-- Clipboard History",segments:s})}return i.length?i:null})];e.s(["CompleteCodeClipboardContextProvider",()=>eF],588561);var eU=e.i(346574),eG=e.i(446692),e$=e.i(205104),eH=/\n\n(?![^\S\n])/g,ez=new(function(){function e(){(0,O._)(this,e),(0,M._)(this,"map",new Map)}return(0,N._)(e,[{key:"removeExpired",value:function(){if(this.map.size){var e=Date.now(),t=!0,n=!1,r=void 0;try{for(var i,a=this.map.entries()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=(0,w._)(i.value,2),s=o[0],l=o[1];e-l.timestamp>6e4&&this.map.delete(s)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}},{key:"get",value:function(e){return this.removeExpired(),this.map.get(e)}},{key:"add",value:function(e,t,n){if(this.removeExpired(),!this.map.has(e)&&10===this.map.size){var r=null,i=!0,a=!1,o=void 0;try{for(var s,l=this.map.values()[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;(!r||u.timestamp<r.timestamp)&&(r=u)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}if(!r)throw Error("Expected to find entry to remove from file cache");this.map.delete(r.path)}this.map.set(e,{path:e,type:t,content:n,timestamp:Date.now()})}},{key:"clear",value:function(){this.map.clear()}}]),e}()),eW=function(){function e(t,n,r){var i=this;(0,O._)(this,e),(0,M._)(this,"view",void 0),(0,M._)(this,"readFile",void 0),(0,M._)(this,"recentFiles",void 0),(0,M._)(this,"dispose",void 0),(0,M._)(this,"destroyed",void 0),(0,M._)(this,"chunks",void 0),this.view=t,this.readFile=n,this.recentFiles=r,this.destroyed=!1,this.chunks=[],this.dispose=r.subscribe(function(){return i.updateChunks()}),r.current.length&&this.updateChunks()}return(0,N._)(e,[{key:"updateChunks",value:function(){return(0,r._)(function(){var e,t,n,r,i,a,o,l,u,c,d,f,p,h,m,g,x,y,b,w,_,k,S,C,j,T,E,R;return(0,s._)(this,function(s){switch(s.label){case 0:if(n=[],this.chunks=n,r=this.view.state.facet(eT.fileName),i=this.view.state.facet(eT.EditorFileType),!r||!i)return[2];"all"===(o=null!=(a=null==(t=i.features.ai)||null==(e=t.complete)?void 0:e.groups)?a:[])&&(o=[]),l=this.recentFiles.current.filter(function(e){return e!==r&&(0,e$.isOTFile)(e)}),u=!0,c=!1,d=void 0,s.label=1;case 1:s.trys.push([1,7,8,9]),f=l[Symbol.iterator](),s.label=2;case 2:if(u=(p=f.next()).done)return[3,6];if(h=p.value,w=null==(b=null!=(y=null==(x=ez.get(h))?void 0:x.type)?y:eG.FileTypeRepository.from(h))||null==(m=b.features.ai)?void 0:m.complete,!b||!(null==w?void 0:w.enabled)||!(b.id===i.id||"all"===w.groups||(null==(g=w.groups)?void 0:g.some(function(e){return o.includes(e)}))))return[3,5];if(void 0!==(_=null==x?void 0:x.content))return[3,4];return[4,this.readFile(h)];case 3:if(k=s.sent(),this.destroyed||this.chunks!==n)return[2];if(null===k)return[3,5];_=k,ez.add(h,b,_),s.label=4;case 4:var I;if(!(S=!(I=(I=_).trim())?[]:I.split(eH).map(function(e){return e.trim()}).filter(Boolean)).length)return[3,5];if(C="-- ".concat((0,eU.getRelativePath)(h,r)),j=S.map(function(e){return(0,Q.splitLines)(e).join("\n")+"\n\n"}),T=n.length,E=ei.NORMAL,T<2?E=ei.HIGH:T>=5&&(E=ei.LOW),n.push({header:C,segments:j,priority:E}),n.length>=10)return[3,6];s.label=5;case 5:return u=!0,[3,2];case 6:return[3,9];case 7:return R=s.sent(),c=!0,d=R,[3,9];case 8:try{u||null==f.return||f.return()}finally{if(c)throw d}return[7];case 9:return[2]}})}).call(this)}},{key:"update",value:function(e){(0,en.hasChanged)(e,eT.fileName,eT.EditorFileType)&&this.updateChunks()}},{key:"destroy",value:function(){this.destroyed=!0,this.dispose()}}]),e}(),eq=new d.ReactCompartment(function(e,t){return e&&t?V.ViewPlugin.define(function(n){return new eW(n,e,t)},{provide:function(e){return ea.of(function(t){var n,r;return null!=(r=null==(n=t.plugin(e))?void 0:n.chunks)?r:null})}}):null});e.s(["CompleteCodeFileContextProviderCompartment",()=>eq],378294);var eK=ea.of(function(e){var t=e.state.selection.main.head,n=e.state.doc.slice(t);if(0===n.length)return null;if(1===n.lines){var r=n.toString();return""===r.trim()?null:{segments:[r],priority:ei.SUFFIX}}for(var i=[],a=1;a<=n.lines;a++)i.push(n.line(a).text+"\n");for(;i.length&&""===i[i.length-1].trim();)i.pop();return 0===i.length?null:{segments:i,priority:ei.SUFFIX}});e.s(["CompleteCodeSuffixContextProvider",()=>eK],425807);var eY=e.i(693482),eQ=e.i(452723);function eX(e){var t=e.replId,n=e.provider,r=e.cache,i=e.hooks;return(0,_.useCallback)(function(e){return(0,eQ._)(function(){var a,o,l,u,c,d,f,p,h,m,g,x,y,b,w,_,k,S,C,j,T,E,R,I,A;return(0,s._)(this,function(P){switch(P.label){case 0:if(a=e.prefix,o=e.suffix,l=e.header,u=e.language,c=e.maxTokens,d=e.signal,!a)return[2];if(f={prefix:a,suffix:o,header:l,maxTokens:c,replId:t,stop:["\n\n","```"]},"markdown"===u&&(f.maxTokens=75,f.stop=[]),p=null==i?void 0:i.beforeCompletion(f),null===(m=r.retrieve(a,c)))return[3,1];return h=function(){return(0,eQ._)(function(){return(0,s._)(this,function(e){switch(e.label){case 0:return[4,m];case 1:return e.sent(),[2]}})})()},[3,4];case 1:return P.trys.push([1,3,,4]),[4,(0,eY._)(n(f,d))];case 2:return h=P.sent(),[3,4];case 3:if((null==(x=g=P.sent())?void 0:x.name)==="AbortError")return[2];return null==i||i.erroredCompletion((0,F._)(g,Error)?g:Error("Unknown error"),p),[2];case 4:y="",b="",w=!0,_=!1,d.addEventListener("abort",function(){p&&(null==i||i.afterCompletion("aborted",f,{},p)),_=!0}),k=!1,S=!1,P.label=5;case 5:P.trys.push([5,13,14,19]),j=(0,ed._)(h()),P.label=6;case 6:return[4,(0,eY._)(j.next())];case 7:if(!(k=!(T=P.sent()).done))return[3,12];E=T.value,b+=E,R=void 0,P.label=8;case 8:if(-1===(R=b.indexOf("\n")))return[3,11];if(I=JSON.parse(b.substring(0,R)).text,b=b.substring(R+1),y+=I,_)return[3,10];return[4,I];case 9:P.sent(),P.label=10;case 10:return!_&&w&&p&&(null==i||i.afterCompletion("success",f,{fromCache:!!m,partialSuggestion:I},p)),w=!1,[3,8];case 11:return k=!1,[3,6];case 12:return[3,19];case 13:return A=P.sent(),S=!0,C=A,[3,19];case 14:if(P.trys.push([14,,17,18]),!(k&&null!=j.return))return[3,16];return[4,(0,eY._)(j.return())];case 15:P.sent(),P.label=16;case 16:return[3,18];case 17:if(S)throw C;return[7];case 18:return[7];case 19:if(null===m&&y.trim().length&&r.add(a,y,c),!(!_&&b))return[3,21];return[4,b];case 20:P.sent(),P.label=21;case 21:return p&&(null==i||i.afterCompletion("finished",f,{completeSuggestion:y,fromCache:!!m},p)),[2]}})})()},[t,r,i,n])}e.s(["useCompletion",()=>eX],977200),e.i(877212);var eZ=e.i(267710),eJ=e.i(17886);function e0(e){if("codestral-2"!==e)throw Error("Model ".concat(e," is not supported"));return function(t,n){return(0,r._)(function(){var r,i,a,o,l,u,c,d,f;return(0,s._)(this,function(p){switch(p.label){case 0:return r=(0,eJ.isEnvProduction)()?"https://production-ai-modelservice.replit.com":"https://staging-ai-modelservice.replit.com",[4,(0,eZ.auth)(t.replId,"completions-1")];case 1:return i=p.sent(),a={model:e,context:t.header?t.header+t.prefix:t.prefix,suffix:t.suffix,max_tokens:t.maxTokens,stop_words:t.stop},[4,fetch("".concat(r,"/completions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},signal:n,body:JSON.stringify(a)})];case 2:if(l=(o=p.sent()).body,200===(u=o.status))return[3,4];return c=Error.bind,f=(d="Error (".concat(u,") response from /ai/complete: ")).concat,[4,o.text()];case 3:throw new(c.apply(Error,[void 0,f.apply(d,[p.sent()])]));case 4:if(!l)throw Error("No body in response");return[2,function(){var e;return e=l,(0,eQ._)(function(){var t,n,r,i,a,o,l,u,c,d,f,p,h,m;return(0,s._)(this,function(g){switch(g.label){case 0:t=new TextDecoder("utf-8"),n="",r=!1,i=!1,g.label=1;case 1:g.trys.push([1,11,12,17]),o=(0,ed._)((0,eQ._)(function(){var t,n,r,i;return(0,s._)(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:return[4,(0,eY._)(t.read())];case 2:if(r=(n=a.sent()).done,i=n.value,r)return[3,4];return[4,i];case 3:return a.sent(),[3,1];case 4:return t.releaseLock(),[2]}})})()),g.label=2;case 2:return[4,(0,eY._)(o.next())];case 3:if(!(r=!(l=g.sent()).done))return[3,10];u=l.value,c=t.decode(u,{stream:!0}),n+=c,d=void 0,g.label=4;case 4:if(-1===(d=n.indexOf("\n\n")))return[3,9];if(!n.startsWith("data: ")||!("text"in(f=JSON.parse(n.slice(6,d)))))return[3,8];p=f.text.split("\n"),h=0,g.label=5;case 5:if(!(h<p.length))return[3,8];return[4,JSON.stringify({text:p[h]+"\n"})+"\n"];case 6:g.sent(),g.label=7;case 7:return h++,[3,5];case 8:return n=n.substring(d+1),[3,4];case 9:return r=!1,[3,2];case 10:return[3,17];case 11:return m=g.sent(),i=!0,a=m,[3,17];case 12:if(g.trys.push([12,,15,16]),!(r&&null!=o.return))return[3,14];return[4,(0,eY._)(o.return())];case 13:g.sent(),g.label=14;case 14:return[3,16];case 15:if(i)throw a;return[7];case 16:return[7];case 17:return[2]}})})()}]}})})()}}e.s(["default",()=>e0],801573);var e1=e.i(569384),e2=e.i(973245),e3=e.i(304277);function e5(){var e=(0,e1._)(["\n  fragment CompleteCodeAuthorization on OrgAuthorizations {\n    useAdvancedModel: useAiModel(model: advanced) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return e5=function(){return e},e}function e4(){var e=(0,e1._)(['\n  query CompleteCode($orgId: String) {\n    currentUser {\n      id\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...CompleteCodeAuthorization\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          authorizations {\n            ...CompleteCodeAuthorization\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ',"\n"]);return e4=function(){return e},e}e.i(566901);var e8={},e6=(0,e2.gql)(e5()),e7=(0,e2.gql)(e4(),e6),e9=e.i(605526),te=e.i(207237),tt=((n={}).None="None",n.Basic="Basic",n.Pro="Pro",n.BackendOnly="BackendOnly",n);function tn(e){return"None"!==e&&"BackendOnly"!==e}function tr(){var e,t,n,r,a,o,s=(0,te.default)(),l=(0,e9.useOrgId)(s),u=l.orgId,c=l.loading,d=(e={variables:{orgId:u},skip:c},t=(0,i._)({},e8,e),e3.useQuery(e7,t)),f=d.data,p=d.loading,h=null==f?void 0:f.currentUser;return!h||h.hasKillswitch||p||c?"None":u?(null==(n=f.currentUser)?void 0:n.org.__typename)==="Org"&&(null==(r=f.currentUser)?void 0:r.org.authorizations.useAdvancedModel.isAuthorized)?"Pro":"Basic":(null==(a=f.currentUser)?void 0:a.personalOrgAuthorizations.__typename)==="OrgAuthorizations"&&(null==(o=f.currentUser)?void 0:o.personalOrgAuthorizations.useAdvancedModel.isAuthorized)?"Pro":"Basic"}e.s(["CompleteCodeAccessLevel",()=>tt,"default",()=>tr,"isCodeCompleteFrontendEnabled",()=>tn],513705)},204219,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(389959),i=e.i(830675),a=e.i(424719),o=e.i(42512),s=e.i(180182),l=e.i(288209),u=e.i(211664),c=e.i(588561),d=e.i(378294),f=e.i(425807),p=e.i(166978),h=e.i(977200),m=e.i(801573),g=e.i(513705),x=e.i(664152),y=e.i(791247),b=new Map,w={beforeCompletion:function(e){i.addBreadcrumb({category:"ghostwriter",message:"Called completeCode",level:"debug"});var t=y.ghostwriterLogs.add(e),n=x.logger.timeStart({replid:e.replId,codeLength:e.header?e.header.length+e.prefix.length:e.prefix.length});return b.set(t,n),t},afterCompletion:function(e,t,n,r){switch(e){case"aborted":y.ghostwriterLogs.abort(r),b.delete(r);break;case"success":i.addBreadcrumb({category:"ghostwriter",message:"Suggestion emitted: "+n.partialSuggestion,level:"debug"});var a,o=b.get(r);if(!o)throw Error("No latency logger found for handle: "+JSON.stringify(r));o("code suggestion",{type:"success",fromCache:n.fromCache,length:null==(a=n.partialSuggestion)?void 0:a.length}),b.delete(r);break;case"finished":y.ghostwriterLogs.complete(r,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:n.completeSuggestion});break;default:throw Error("Unknown completion kind: "+e)}},erroredCompletion:function(e,t){t&&(y.ghostwriterLogs.abort(t),b.delete(t)),x.logger.error("CompleteCode: error in completion provider",{err:String(e)})}},_=e.i(878420),k=e.i(64386),S=e.i(530658),C=e.i(541793),j=e.i(161322),T=e.i(993796),E=e.i(282453),R="ai.codecomplete.lastTooltipHintTimestamp",I=(0,C.atom)({tooltipOpen:!1,consecutiveRejections:0}),A=e.i(858248),P=e.i(709485),D=e.i(703916),O=e.i(700170),N=e.i(61524),M=e.i(207237),L=e.i(125674),B=e.i(529810),V=e.i(384401),F=e.i(965863),U=new O.ReactCompartment(function(e,t,n,r,i,a,l,u){var d,h;return e?(t===g.CompleteCodeAccessLevel.Pro?(d=o.DEBOUNCE_TRIGGER_CHARACTERS,h=o.DEBOUNCE_TRIGGER_CHARACTERS):(d=a,h=a),[s.CompleteCode.of({request:i,backendOnly:t===g.CompleteCodeAccessLevel.BackendOnly,debounceTimeOutsideWord:d,debounceTimeInsideWord:h,debounceAlways:t!==g.CompleteCodeAccessLevel.Pro,keyAcceptSuggestion:n,keyDismissSuggestion:r}),l?c.CompleteCodeClipboardContextProvider:[],u?[]:p.CompleteCodeRegulatorEnabled.of(!1),f.CompleteCodeSuffixContextProvider]):null}),G=new O.ReactCompartment(function(e,t,n){if(!e)return null;var r,a,o=(r=null,a=function(){},{queue:function(e){if(!(Math.random()>.1)){r&&clearTimeout(r);var t=function(){(0,A.track)(P.events.CODE_SUGGESTION_USED,(0,_._)({type:"suggestionPresented"},e))};r=setTimeout(t,500),a=t}},flush:function(){r&&clearTimeout(r),a()},cancel:function(){r&&clearTimeout(r)}});return l.CompleteCodeListeners.of({onDismiss:function(){o.cancel()},onRequestIgnoredBackendOnly:function(){i.addBreadcrumb({category:"ghostwriter",message:"called completeCode for free user but did not show the ghost text.",level:"info"}),(0,A.track)(P.events.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",filePath:t,reason:"ghostTextNotEnabledForFreeUser"})},onRequestFirstEmit:function(e){var n=e.plugin(u.CompleteCodePlugin);n&&(i.addBreadcrumb({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),o.queue({filePath:t,prefixLength:n.lastPrefixLength}))},onRequestEndedWithNoSuggestion:function(){i.addBreadcrumb({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),(0,A.track)(P.events.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",filePath:t,reason:"noSuggestion"})},onSuggestionAccepted:function(e,r){var a=e.plugin(u.CompleteCodePlugin);a&&(o.flush(),(0,A.track)(P.events.CODE_SUGGESTION_USED,{type:"suggestionAccepted",filePath:t,prefixLength:a.lastPrefixLength,suggestionLength:r.suggestion.content.length}),i.addBreadcrumb({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),null==n||n.recordAccept())},onSuggestionExplicitlyDismissed:function(e){var r=e.plugin(u.CompleteCodePlugin);r&&(o.flush(),(0,A.track)(P.events.CODE_SUGGESTION_USED,{type:"suggestionDismissed",filePath:t,prefixLength:r.lastPrefixLength}),i.addBreadcrumb({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),null==n||n.recordReject())}})});function $(e){var i,s,l,u,c=e.filePath,f=(0,B.default)().fs,p=(0,M.default)(),x=(0,N.usePreferences)("codeSuggestion").preferences,b=(0,g.default)(),C=x.codeSuggestion&&b!==g.CompleteCodeAccessLevel.None;(0,r.useEffect)(function(){y.ghostwriterLogs.toggle(C)},[C]);var A=(0,V.useKeyCombo)(D.commands.acceptPrimaryCompletion.id),P=(0,V.useKeyCombo)(D.commands.cancelCompletion.id),O=(0,L.default)(function(){return new a.SuggestionCache},[c,p]),$=(0,L.default)(function(){return(0,m.default)("codestral-2")},[]),H=(0,h.useCompletion)({replId:p,provider:$,cache:O,hooks:w}),z=(s=(i=(0,S._)((0,j.useAtom)(I),2))[0],l=i[1],u=(0,T.useFlag)({controlName:"flag-killswitch-pichu",logFlagToAnalytics:!1}),(0,r.useEffect)(function(){if(u&&s.tooltipOpen){var e=setTimeout(function(){return l(function(e){return(0,k._)((0,_._)({},e),{tooltipOpen:!1})})},2500);return function(){return clearTimeout(e)}}},[u,s.tooltipOpen,l]),(0,r.useMemo)(function(){return u?{recordAccept:function(){l(function(e){return(0,k._)((0,_._)({},e),{consecutiveRejections:0})})},recordReject:function(){l(function(e){var t=e.consecutiveRejections+1;if(t>=5){var n=E.default.get(R,"number");if(!n||Date.now()-n>=432e6)return E.default.set(R,Date.now()),(0,k._)((0,_._)({},e),{consecutiveRejections:t,tooltipOpen:!0})}return(0,k._)((0,_._)({},e),{consecutiveRejections:t})})}}:null},[u,l])),W=(0,r.useCallback)(function(e){return(0,t._)(function(){var t;return(0,n._)(this,function(n){switch(n.label){case 0:return[4,f.readFile(e)];case 1:if(null!==(t=n.sent()).error)return[2,null];return[2,t.content.toString()]}})})()},[f]),q=(0,F.useRecentFilesObservable)(),K=(0,T.useFlag)({controlName:"flag-gw-magikarp-bounce-time",logFlagToAnalytics:!1,default:o.DEBOUNCE_TRIGGER_CHARACTERS_LONG,type:"number"}),Y=(0,T.useFlag)({controlName:"flag-completely-different-clipboard",logFlagToAnalytics:!0}),Q=(0,T.useFlag)({controlName:"flag-completely-different-regulator"}),X=[U.use(C,b,A,P,H,K,Y,Q),G.use(C,c,z),d.CompleteCodeFileContextProviderCompartment.use(W,q)];return(0,r.useMemo)(function(){return X},X)}e.s(["default",()=>$],204219)},598986,e=>{"use strict";var t=e.i(904851),n=e.i(90659),r=e.i(119468),i=function(){function e(){(0,t._)(this,e)}return(0,n._)(e,null,[{key:"get",value:function(e,t){var n,i;try{n=sessionStorage.getItem(e)}catch(e){}if(null==n)return null;try{i=JSON.parse(n)}catch(e){}return null==i||"array"===t&&!Array.isArray(i)||t&&(void 0===i?"undefined":(0,r._)(i))!==t?null:i}},{key:"set",value:function(e,t){try{sessionStorage.setItem(e,JSON.stringify(t))}catch(e){}}},{key:"remove",value:function(e){try{sessionStorage.removeItem(e)}catch(e){}}},{key:"keys",value:function(){try{return Object.keys(sessionStorage)}catch(e){return[]}}}]),e}();e.s(["default",()=>i])},291607,160727,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(530658),i=e.i(276385),a=e.i(389959),o=e.i(629536),s=e.i(744809),l=e.i(269848),u=e.i(110432),c=e.i(561873),d=e.i(416298),f=e.i(598986),p=e.i(479491),h=e.i(649960),m=e.i(57613),g=e.i(480028),x=e.i(446530),y=e.i(754873),b=e.i(613355),w=e.i(136540),_=e.i(396776),k=e.i(960178),S=e.i(751273),C=e.i(625484);function j(e){var r={size:24,dataCy:"ghostwriter-inline-submit",alt:"Send",filled:!0};return e.disabled||e.connecting?(0,i.jsx)(w.IconButton,(0,n._)((0,t._)({disabled:!0},r),{children:e.connecting?(0,i.jsx)(l.default,{}):(0,i.jsx)(u.default,{})})):(0,i.jsx)(w.IconButton,(0,n._)((0,t._)({onClick:e.onClick,disabled:e.disabled,colorway:"teal"},r),{children:e.loading?(0,i.jsx)(c.default,{}):(0,i.jsx)(u.default,{})}))}var T=(0,x.cssRecord)({root:[b.rcss.minWidth(300),b.rcss.maxWidth(800),b.rcss.position.relative,{fontFamily:g.tokens.fontFamilyDefault}],container:[b.rcss.position.relative,b.rcss.backgroundColor.backgroundDefault],input:[y.interactive.outlined,b.rcss.borderRadius(4),{paddingBottom:36,"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:"transparent"}}}],textarea:[b.rcss.p(8),b.rcss.pb(0),{caretColor:"initial",fontFamily:g.tokens.fontFamilyDefault,border:"0 none",resize:"none",height:"1em",backgroundColor:"transparent","@media (hover: hover)":{":not([disabled]):focus":{outline:"0 none"}},"::placeholder":{color:g.tokens.foregroundDimmest}}],footer:[b.rcss.position.absolute,b.rcss.bottom(0),b.rcss.left(0),b.rcss.width("100%"),{height:36}],error:[b.rcss.color.accentNegativeStronger]}),E=function(e){var t=e.requestMeasure,n=e.type,r=e.children,a=e.isCodeMirrorPocket,o=(0,h.default)(t);return(0,i.jsx)(m.default,{bsod:!0,tags:{ai:!0},extras:{type:n},origin:"ErrorBoundary: InlineAiWidget",children:(0,i.jsx)(C.View,{css:T.root,py:8,pr:8,gap:4,innerRef:o,className:void 0===a||a?"cm-pocket-widget":void 0,children:r})})},R=function(e){var t=e.requestMeasure,n=e.type,r=e.children,a=e.isCodeMirrorPocket,o=e.error,s=e.clearError,l=e.innerRef;return(0,i.jsxs)(E,{type:n,requestMeasure:t,isCodeMirrorPocket:void 0===a||a,children:[(0,i.jsx)(C.View,{css:T.container,innerRef:l,children:r}),o?(0,i.jsx)(_.StatusBanner,{icon:(0,i.jsx)(d.default,{color:g.tokens.accentNegativeDefault}),text:o,closable:!0,closeAction:s}):null]})};function I(e){var t=(0,p.default)();return(0,i.jsx)(C.View,{css:T.input,children:(0,i.jsx)("textarea",{value:e.value,onChange:e.onChange,placeholder:e.placeholder,css:T.textarea,ref:function(n){e.inputRef.current=n,t.ref(n)},onKeyDown:e.onKeyDown,autoFocus:e.autoFocus,"data-cy":"ghostwriter-inline-input",disabled:e.disabled})})}function A(e){var t=e.readableModelName;return(0,i.jsx)(S.Tooltip,{tooltip:"Generate new code based on this file".concat(t?" using ".concat(t,"."):"."),children:(0,i.jsxs)(C.View,{row:!0,gap:4,align:"center",children:[(0,i.jsx)(s.default,{}),(0,i.jsx)(k.Text,{variant:"small",color:"dimmest",children:"Generate with ".concat(o.ASSISTANT_NAME)})]})})}function P(e){var t=e.loading,n=e.disabled,r=e.promptPresentation,a=e.onClick,o=e.connecting,s=e.escPressed;return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(C.View,{row:!0,gap:4,align:"center",children:[(0,i.jsx)(l.default,{size:12,color:g.tokens.blurpleDefault}),r?(0,i.jsx)(k.Text,{variant:"small",color:"dimmest",children:"AI is writing"}):null]}):(0,i.jsx)(i.Fragment,{children:r?(0,i.jsx)(k.Text,{variant:"small",color:"dimmest",children:s?"Press Esc again to dismiss":"Esc to close, Enter to submit"}):null}),(0,i.jsx)(j,{connecting:o,loading:t,disabled:n,onClick:a})]})}function D(e){var t=e.id,n=e.inputRef,i=e.onClose,o=e.loading,s=e.onSubmit,l=(0,r._)((0,a.useState)(""),2),u=l[0],c=l[1],d=(0,r._)((0,a.useState)(!1),2),p=d[0],h=d[1];return(0,a.useEffect)(function(){var e="inline-ai/input-state/".concat(t),r=f.default.get(e,"string");r&&c(r);var i=n.current;return function(){if(i){var t=i.value;if(0===t.length)return void f.default.remove(e);f.default.set(e,t)}}},[t,n]),{value:u,setValue:c,onKeyDown:function(e){switch(e.key){case"Escape":e.preventDefault(),u.length?p?i():h(!0):i();break;case"Enter":if(e.preventDefault(),o)break;e.shiftKey?c(function(e){return e+"\n"}):!e.metaKey&&u.length&&u.trim()&&s();break;default:h(!1)}},escPressed:p}}var O=function(e){var t=(0,r._)(e.children,2),n=t[0],a=t[1];return(0,i.jsxs)(C.View,{css:T.footer,px:8,pr:6,row:!0,gap:8,align:"center",children:[(0,i.jsx)(C.View,{grow:!0,shrink:!0,align:"center",row:!0,gap:8,children:n}),(0,i.jsx)(C.View,{row:!0,gap:4,align:"center",children:a})]})},N=(0,x.cssRecord)({default:[b.rcss.width("90%")]}),M=function(e){var t=e.inlineActionType,n=e.closeAction;return(0,i.jsx)(C.View,{css:N.default,children:(0,i.jsx)(_.StatusBanner,{icon:(0,i.jsx)(d.default,{}),colorway:"red",text:"".concat(t," with AI is currently unavailable. Try again later."),closable:!0,closeAction:n})})},L=function(e){var t=e.inlineActionType,n=e.closeAction;return(0,i.jsx)(C.View,{css:N.default,children:(0,i.jsx)(_.StatusBanner,{icon:(0,i.jsx)(d.default,{}),colorway:"blurple",text:"".concat(t," with AI is unavailable while ").concat((0,o.getAgentName)({variant:"casual"})," is running."),closable:!0,closeAction:n})})};e.s(["AgentActiveBanner",()=>L,"COMPACT_WIDTH",()=>400,"ConnectionError",()=>M,"Footer",()=>O,"Input",()=>I,"ModeLabel",()=>A,"PocketBoundary",()=>E,"PocketContainer",()=>R,"Submit",()=>P,"useInputState",()=>D],291607);var B=e.i(297083),V=e.i(817556),F=e.i(82259);e.i(877212);var U=e.i(924908);e.i(925218);var G=e.i(128068),$=e.i(802088),H={direction:"reverse",state:{code:void 0,completed:!1,error:null},reducer:function(e,t){var n;if((null==(n=e.contents.contents)?void 0:n.$kind)==="inlineActionEventContents"&&e.contents.contents.inlineActionEventContents){var r=e.contents.contents.inlineActionEventContents;if(r.content&&r.content.includes("```")){var i=r.content.match(/```(?:\w+)?\n([\s\S]+?)\n```/);i&&i[1]&&(t.code=i[1])}t.completed=e.state===F.EventState.COMPLETE&&!!t.code,e.state!==F.EventState.COMPLETE&&e.state!==F.EventState.IN_PROGRESS&&(t.error="Failed to generate code")}}};function z(e){var t,n=e.onCode,i=e.getFileContext,o=e.assistantMode,s=(0,U.useChatter)(),l=(0,r._)((0,a.useState)(null),2),u=l[0],c=l[1],d=(0,r._)((0,a.useState)(!1),2),f=d[0],p=d[1],h=(0,r._)((0,a.useState)(null),2),m=h[0],g=h[1],x=(0,a.useCallback)(function(e){return(0,B._)(function(){var t,n,r,a;return(0,V._)(this,function(l){switch(l.label){case 0:if(p(!0),g(null),t=u)return[3,2];return[4,s.sessions.create({sessionType:F.SessionType.INLINE_CHAT})];case 1:if(!(n=l.sent()).ok)return p(!1),g("Failed to create session"),[2];c(t=n.payload),l.label=2;case 2:if(!i)return[3,6];l.label=3;case 3:return l.trys.push([3,5,,6]),[4,i()];case 4:return r=l.sent(),[3,6];case 5:return l.sent(),p(!1),g("Failed to get file context"),[2];case 6:a="advanced"===o?F.ModelType.ADVANCED:F.ModelType.BASIC,l.label=7;case 7:return l.trys.push([7,9,,10]),[4,t.appendEvent({kind:"inlineAction",message:e.message,messageType:e.type,modelType:a,codeReference:e.codeReference,fileContext:null==r?void 0:r.fileContext,mostRecentFile:null==r?void 0:r.mostRecentFile,useRag:!0})];case 8:return l.sent(),[3,10];case 9:return l.sent(),p(!1),g("Failed to send message"),[3,10];case 10:return[2]}})})()},[s.sessions,u,i,o]),y=(0,a.useCallback)(function(){return(0,B._)(function(){return(0,V._)(this,function(e){switch(e.label){case 0:if(!u)return[3,2];return[4,u.abortLastEvent()];case 1:e.sent(),p(!1),e.label=2;case 2:return[2]}})})()},[u]),b=(0,a.useCallback)(function(){return g(null)},[]),w=(0,a.useMemo)(function(){return null==u?void 0:u.reduce(H,1).result},[u]),_=(0,G.useObservableRef)(w);return(0,$.useObserver)(w,{next:function(e){(null==e?void 0:e.completed)&&f&&p(!1),(null==e?void 0:e.error)&&!m&&g(e.error),(null==e?void 0:e.code)&&n(e.code)}}),{sendMessage:x,stopMessage:y,getCode:function(){return _.current},loading:f,completed:null==(t=_.current)?void 0:t.completed,error:m,clearError:b}}e.s(["useInlineMessage",()=>z],160727)},743347,e=>{"use strict";var t=e.i(122947),n=e.i(936381);function r(e,t){e.dispatch({effects:n.inlinePocketEffect.of(null),selection:{anchor:t.range.indexTo,head:t.range.indexTo}}),e.hasFocus||e.focus()}function i(e,r,i){(0,t.insertGhostwriterCode)({view:e,insert:r,scrollIntoView:!0,insertAt:i}),e.dispatch({effects:n.inlinePocketEffect.of(null)}),e.hasFocus||e.focus()}function a(e,t){e.dispatch({effects:n.setInlinePocketCodeBlock.of(t)})}function o(e,t){return e.range.indexFrom===t.range.indexFrom&&e.range.indexTo===t.range.indexTo&&e.filePath===t.filePath&&e.fileVersion===t.fileVersion&&e.referenceType===t.referenceType}e.i(938668),e.s(["closePocket",()=>r,"codeReferenceIsEqual",()=>o,"insertCode",()=>i,"updateCodeBlock",()=>a])},182116,e=>{"use strict";var t=e.i(399119),n=e.i(904851),r=e.i(90659),i=e.i(721281),a=e.i(445789),o=e.i(530658),s=e.i(276385),l=e.i(389959),u=e.i(131141),c=e.i(541793),d=e.i(161322),f=e.i(82259);e.i(877212);var p=e.i(51553),h=e.i(334712),m=e.i(179302),g=e.i(291607),x=e.i(160727),y=e.i(743347),b=e.i(928353),w=e.i(820228),_=e.i(649960),k=e.i(858248),S=e.i(709485),C=e.i(323049),j=e.i(417120),T=e.i(939652),E=e.i(140487),R=e.i(136540),I=(0,c.atom)(0),A=(0,c.atom)(function(e){return e(I)<=g.COMPACT_WIDTH?"compact":"normal"}),P=new b.CodeMirrorComponent(function(e){var t=e.id,n=e.requestMeasure,r=e.codeReference,i=e.updateCodeBlock,a=e.acceptSuggestion,u=e.onClose,m=e.autoFocus,y=e.source,b=function(){var e=B();(null==e?void 0:e.code)?(a(e.code),(0,k.track)(S.events.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",message_content:e.code,source:y})):$()},C=function(){var e,t;z.current=K,(0,k.track)(S.events.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",message_content:K,source:y}),M({message:K,type:f.InlineMessageType.GENERATE_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!=(e=r.fileContent)?e:"",fileVersion:r.fileVersion,language:null!=(t=r.language)?t:"",referenceType:f.CodeReferenceType.INLINE}})},P=(0,p.useConfig)().hasAccessToAdvancedModel,D=(0,h.useInlineActionModels)(),O=(0,T.useGetSessionFileContext)(),N=(0,x.useInlineMessage)({onCode:i,getFileContext:O,assistantMode:P?"advanced":"basic"}),M=N.sendMessage,L=N.stopMessage,B=N.getCode,V=N.loading,F=N.completed,U=N.error,G=N.clearError,$=(0,l.useCallback)(function(){L(),u()},[L,u]),H=(0,l.useCallback)(function(){(0,k.track)(S.events.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:y}),$()},[$,y]),z=(0,l.useRef)(null),W=(0,l.useRef)(null),q=(0,g.useInputState)({id:t,inputRef:W,loading:V,onSubmit:function(){et?b():C()},onClose:H}),K=q.value,Y=q.setValue,Q=q.onKeyDown,X=q.escPressed,Z=function(){(0,k.track)(S.events.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",message_content:K,source:y}),L()},J=(0,p.useIsAiClientConnected)(),ee=(0,p.useIsRiverProtocolError)(),et=J&&F&&z.current===K,en=(0,o._)((0,l.useState)(function(){return(0,c.createStore)()}),1)[0],er=(0,d.useSetAtom)(I,{store:en}),ei=(0,d.useAtomValue)(A,{store:en}),ea=(0,_.default)(function(e){return er(e.width)}),eo=(0,j.useAgentRunState)(),es=eo===f.AgentRunState.AGENT_STATE_RUNNING||eo===f.AgentRunState.AGENT_STATE_PAUSING;return ee?(0,s.jsx)(g.ConnectionError,{inlineActionType:"Generate",closeAction:$}):es?(0,s.jsx)(g.AgentActiveBanner,{inlineActionType:"Generate",closeAction:$}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(g.PocketContainer,{requestMeasure:n,type:"generateCode",error:U,clearError:G,innerRef:ea,children:[(0,s.jsx)(g.Input,{value:K,inputRef:W,onChange:function(e){return Y(e.currentTarget.value)},placeholder:"Enter a prompt to generate new code",onKeyDown:Q,autoFocus:m}),(0,s.jsxs)(g.Footer,{children:[(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.ModeLabel,{readableModelName:P?D.advancedModel.name.readable:D.basicModel.name.readable}),F?(0,s.jsx)(R.IconButton,{disabled:!J,alt:"Rerun the same prompt",onClick:function(){return C()},size:12,colorway:"grey",children:(0,s.jsx)(w.default,{})}):null]}),et?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E.Button,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=B();(0,k.track)(S.events.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",message_content:(null==e?void 0:e.code)?e.code:"",source:y}),H()}}),(0,s.jsx)(E.Button,{size:"small",text:"Accept",colorway:"blurple",onClick:b,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,s.jsx)(g.Submit,{escPressed:X,connecting:!J,loading:V,disabled:!K||!K.trim(),promptPresentation:"normal"===ei,onClick:function(){V?Z():C()}})]})]})})}),D=function(e){function o(e){var r,a=e.id,s=e.codeReference,l=e.source;return(0,n._)(this,o),r=(0,t._)(this,o),(0,i._)(r,"id",void 0),(0,i._)(r,"codeReference",void 0),(0,i._)(r,"source",void 0),r.id=a,r.codeReference=s,r.source=l,r}return(0,a._)(o,e),(0,r._)(o,[{key:"toDOM",value:function(e){var t=this.id,n=this.codeReference,r=this.source,i=P.create({id:t,requestMeasure:function(){return e.requestMeasure()},codeReference:n,onClose:function(){return(0,y.closePocket)(e,n)},acceptSuggestion:function(t){return(0,y.insertCode)(e,t,n.range.indexFrom)},updateCodeBlock:function(t){return(0,y.updateCodeBlock)(e,t)},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex=String(C.zIndexLevels.floatingHeaderActive),i}},{key:"updateDOM",value:function(e,t){var n=this.codeReference;return P.update(e,function(e){return(0,u.produce)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return(0,y.closePocket)(t,n)},e.acceptSuggestion=function(e){return(0,y.insertCode)(t,e,n.range.indexFrom)},e.updateCodeBlock=function(e){return(0,y.updateCodeBlock)(t,e)},e.autoFocus=!1})}),!0}},{key:"eq",value:function(e){return(0,y.codeReferenceIsEqual)(this.codeReference,e.codeReference)}}]),o}(m.WidgetType);e.s(["GenerateCodeWidget",()=>D])},930623,(e,t,n)=>{"use strict";var r=e.r(954546);function i(e){return"string"==typeof e||r._(e,String)}function a(e){return Array.isArray(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.stringArray=n.array=n.func=n.error=n.number=n.string=n.boolean=void 0,n.boolean=function(e){return!0===e||!1===e},n.string=i,n.number=function(e){return"number"==typeof e||r._(e,Number)},n.error=function(e){return r._(e,Error)},n.func=function(e){return"function"==typeof e},n.array=a,n.stringArray=function(e){return a(e)&&e.every(function(e){return i(e)})}},995606,(e,t,n)=>{"use strict";var r,i,a,o=e.r(772929),s=e.r(883735),l=e.r(619314),u=e.r(559542),c=e.r(873719);Object.defineProperty(n,"__esModule",{value:!0}),n.Message=n.NotificationType9=n.NotificationType8=n.NotificationType7=n.NotificationType6=n.NotificationType5=n.NotificationType4=n.NotificationType3=n.NotificationType2=n.NotificationType1=n.NotificationType0=n.NotificationType=n.RequestType9=n.RequestType8=n.RequestType7=n.RequestType6=n.RequestType5=n.RequestType4=n.RequestType3=n.RequestType2=n.RequestType1=n.RequestType=n.RequestType0=n.AbstractMessageSignature=n.ParameterStructures=n.ResponseError=n.ErrorCodes=void 0;var d=e.r(930623);(r=a=n.ErrorCodes||(n.ErrorCodes={})).ParseError=-32700,r.InvalidRequest=-32600,r.MethodNotFound=-32601,r.InvalidParams=-32602,r.InternalError=-32603,r.jsonrpcReservedErrorRangeStart=-32099,r.serverErrorStart=-32099,r.MessageWriteError=-32099,r.MessageReadError=-32098,r.PendingResponseRejected=-32097,r.ConnectionInactive=-32096,r.ServerNotInitialized=-32002,r.UnknownErrorCode=-32001,r.jsonrpcReservedErrorRangeEnd=-32e3,r.serverErrorEnd=-32e3,n.ResponseError=function(e){function t(e,n,r){var i;return s._(this,t),(i=o._(this,t,[n])).code=d.number(e)?e:a.UnknownErrorCode,i.data=r,Object.setPrototypeOf(i,t.prototype),i}return u._(t,e),l._(t,[{key:"toJson",value:function(){var e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}]),t}(c._(Error));var f=function(){function e(t){s._(this,e),this.kind=t}return l._(e,[{key:"toString",value:function(){return this.kind}}],[{key:"is",value:function(t){return t===e.auto||t===e.byName||t===e.byPosition}}]),e}();n.ParameterStructures=f,f.auto=new f("auto"),f.byPosition=new f("byPosition"),f.byName=new f("byName");var p=function(){function e(t,n){s._(this,e),this.method=t,this.numberOfParams=n}return l._(e,[{key:"parameterStructures",get:function(){return f.auto}}]),e}();n.AbstractMessageSignature=p,n.RequestType0=function(e){function t(e){return s._(this,t),o._(this,t,[e,0])}return u._(t,e),t}(p),n.RequestType=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.auto;return s._(this,t),(n=o._(this,t,[e,1]))._parameterStructures=r,n}return u._(t,e),l._(t,[{key:"parameterStructures",get:function(){return this._parameterStructures}}]),t}(p),n.RequestType1=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.auto;return s._(this,t),(n=o._(this,t,[e,1]))._parameterStructures=r,n}return u._(t,e),l._(t,[{key:"parameterStructures",get:function(){return this._parameterStructures}}]),t}(p),n.RequestType2=function(e){function t(e){return s._(this,t),o._(this,t,[e,2])}return u._(t,e),t}(p),n.RequestType3=function(e){function t(e){return s._(this,t),o._(this,t,[e,3])}return u._(t,e),t}(p),n.RequestType4=function(e){function t(e){return s._(this,t),o._(this,t,[e,4])}return u._(t,e),t}(p),n.RequestType5=function(e){function t(e){return s._(this,t),o._(this,t,[e,5])}return u._(t,e),t}(p),n.RequestType6=function(e){function t(e){return s._(this,t),o._(this,t,[e,6])}return u._(t,e),t}(p),n.RequestType7=function(e){function t(e){return s._(this,t),o._(this,t,[e,7])}return u._(t,e),t}(p),n.RequestType8=function(e){function t(e){return s._(this,t),o._(this,t,[e,8])}return u._(t,e),t}(p),n.RequestType9=function(e){function t(e){return s._(this,t),o._(this,t,[e,9])}return u._(t,e),t}(p),n.NotificationType=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.auto;return s._(this,t),(n=o._(this,t,[e,1]))._parameterStructures=r,n}return u._(t,e),l._(t,[{key:"parameterStructures",get:function(){return this._parameterStructures}}]),t}(p),n.NotificationType0=function(e){function t(e){return s._(this,t),o._(this,t,[e,0])}return u._(t,e),t}(p),n.NotificationType1=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.auto;return s._(this,t),(n=o._(this,t,[e,1]))._parameterStructures=r,n}return u._(t,e),l._(t,[{key:"parameterStructures",get:function(){return this._parameterStructures}}]),t}(p),n.NotificationType2=function(e){function t(e){return s._(this,t),o._(this,t,[e,2])}return u._(t,e),t}(p),n.NotificationType3=function(e){function t(e){return s._(this,t),o._(this,t,[e,3])}return u._(t,e),t}(p),n.NotificationType4=function(e){function t(e){return s._(this,t),o._(this,t,[e,4])}return u._(t,e),t}(p),n.NotificationType5=function(e){function t(e){return s._(this,t),o._(this,t,[e,5])}return u._(t,e),t}(p),n.NotificationType6=function(e){function t(e){return s._(this,t),o._(this,t,[e,6])}return u._(t,e),t}(p),n.NotificationType7=function(e){function t(e){return s._(this,t),o._(this,t,[e,7])}return u._(t,e),t}(p),n.NotificationType8=function(e){function t(e){return s._(this,t),o._(this,t,[e,8])}return u._(t,e),t}(p),n.NotificationType9=function(e){function t(e){return s._(this,t),o._(this,t,[e,9])}return u._(t,e),t}(p),(i=n.Message||(n.Message={})).isRequest=function(e){return e&&d.string(e.method)&&(d.string(e.id)||d.number(e.id))},i.isNotification=function(e){return e&&d.string(e.method)&&void 0===e.id},i.isResponse=function(e){return e&&(void 0!==e.result||!!e.error)&&(d.string(e.id)||d.number(e.id)||null===e.id)}},97504,(e,t,n)=>{"use strict";var r,i,a,o=e.r(772929),s=e.r(883735),l=e.r(619314),u=e.r(109133),c=e.r(940193),d=e.r(879617),f=e.r(559542),p=e.r(316330);Object.defineProperty(n,"__esModule",{value:!0}),n.LRUCache=n.LinkedMap=n.Touch=void 0,(r=a=n.Touch||(n.Touch={})).None=0,r.First=1,r.AsOld=r.First,r.Last=2,r.AsNew=r.Last;var h=function(){function e(){s._(this,e),this[i]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}return l._(e,[{key:"clear",value:function(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}},{key:"isEmpty",value:function(){return!this._head&&!this._tail}},{key:"size",get:function(){return this._size}},{key:"first",get:function(){var e;return null==(e=this._head)?void 0:e.value}},{key:"last",get:function(){var e;return null==(e=this._tail)?void 0:e.value}},{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.None,n=this._map.get(e);if(n)return t!==a.None&&this.touch(n,t),n.value}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.None,r=this._map.get(e);if(r)r.value=t,n!==a.None&&this.touch(r,n);else{switch(r={key:e,value:t,next:void 0,previous:void 0},n){case a.None:this.addItemLast(r);break;case a.First:this.addItemFirst(r);break;case a.Last:default:this.addItemLast(r)}this._map.set(e,r),this._size++}return this}},{key:"delete",value:function(e){return!!this.remove(e)}},{key:"remove",value:function(e){var t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}},{key:"shift",value:function(){if(this._head||this._tail){if(!this._head||!this._tail)throw Error("Invalid list");var e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}}},{key:"forEach",value:function(e,t){for(var n=this._state,r=this._head;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw Error("LinkedMap got modified during iteration.");r=r.next}}},{key:"keys",value:function(){var e,t=this,n=this._state,r=this._head,i=(e={},u._(e,Symbol.iterator,function(){return i}),u._(e,"next",function(){if(t._state!==n)throw Error("LinkedMap got modified during iteration.");if(!r)return{value:void 0,done:!0};var e={value:r.key,done:!1};return r=r.next,e}),e);return i}},{key:"values",value:function(){var e,t=this,n=this._state,r=this._head,i=(e={},u._(e,Symbol.iterator,function(){return i}),u._(e,"next",function(){if(t._state!==n)throw Error("LinkedMap got modified during iteration.");if(!r)return{value:void 0,done:!0};var e={value:r.value,done:!1};return r=r.next,e}),e);return i}},{key:"entries",value:function(){var e,t=this,n=this._state,r=this._head,i=(e={},u._(e,Symbol.iterator,function(){return i}),u._(e,"next",function(){if(t._state!==n)throw Error("LinkedMap got modified during iteration.");if(!r)return{value:void 0,done:!0};var e={value:[r.key,r.value],done:!1};return r=r.next,e}),e);return i}},{key:(i=Symbol.toStringTag,Symbol.iterator),value:function(){return this.entries()}},{key:"trimOld",value:function(e){if(!(e>=this.size)){if(0===e)return void this.clear();for(var t=this._head,n=this.size;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}}},{key:"addItemFirst",value:function(e){if(this._head||this._tail)if(this._head)e.next=this._head,this._head.previous=e;else throw Error("Invalid list");else this._tail=e;this._head=e,this._state++}},{key:"addItemLast",value:function(e){if(this._head||this._tail)if(this._tail)e.previous=this._tail,this._tail.next=e;else throw Error("Invalid list");else this._head=e;this._tail=e,this._state++}},{key:"removeItem",value:function(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{var t=e.next,n=e.previous;if(!t||!n)throw Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}},{key:"touch",value:function(e,t){if(!this._head||!this._tail)throw Error("Invalid list");if(t===a.First||t===a.Last){if(t===a.First){if(e===this._head)return;var n=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(n.previous=r,r.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===a.Last){if(e===this._tail)return;var i=e.next,o=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=o,o.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}},{key:"toJSON",value:function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),e}},{key:"fromJSON",value:function(e){this.clear();var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=p._(i.value,2),s=o[0],l=o[1];this.set(s,l)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}]),e}();n.LinkedMap=h,n.LRUCache=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return s._(this,t),(n=o._(this,t))._limit=e,n._ratio=Math.min(Math.max(0,r),1),n}return f._(t,e),l._(t,[{key:"limit",get:function(){return this._limit},set:function(e){this._limit=e,this.checkTrim()}},{key:"ratio",get:function(){return this._ratio},set:function(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}},{key:"get",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.AsNew;return c._(d._(t.prototype),"get",this).call(this,e,n)}},{key:"peek",value:function(e){return c._(d._(t.prototype),"get",this).call(this,e,a.None)}},{key:"set",value:function(e,n){return c._(d._(t.prototype),"set",this).call(this,e,n,a.Last),this.checkTrim(),this}},{key:"checkTrim",value:function(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}]),t}(h)},303372,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Disposable=void 0,(n.Disposable||(n.Disposable={})).create=function(e){return{dispose:e}}},537398,(e,t,n)=>{"use strict";var r;function i(){if(void 0===r)throw Error("No runtime abstraction layer installed");return r}Object.defineProperty(n,"__esModule",{value:!0}),(i||(i={})).install=function(e){if(void 0===e)throw Error("No runtime abstraction layer provided");r=e},n.default=i},561827,(e,t,n)=>{"use strict";var r,i,a=e.r(883735),o=e.r(619314);Object.defineProperty(n,"__esModule",{value:!0}),n.Emitter=n.Event=void 0;var s=e.r(537398);r=n.Event||(n.Event={}),i={dispose:function(){}},r.None=function(){return i};var l=function(){function e(){a._(this,e)}return o._(e,[{key:"add",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0;this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:function(){return t.remove(e,n)}})}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._callbacks){for(var n=!1,r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e)if(this._contexts[r]===t){this._callbacks.splice(r,1),this._contexts.splice(r,1);return}else n=!0;if(n)throw Error("When adding a listener with a context, you should remove it with the same context")}}},{key:"invoke",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!this._callbacks)return[];for(var r=[],i=this._callbacks.slice(0),a=this._contexts.slice(0),o=0,l=i.length;o<l;o++)try{r.push(i[o].apply(a[o],t))}catch(e){(0,s.default)().console.error(e)}return r}},{key:"isEmpty",value:function(){return!this._callbacks||0===this._callbacks.length}},{key:"dispose",value:function(){this._callbacks=void 0,this._contexts=void 0}}]),e}(),u=function(){function e(t){a._(this,e),this._options=t}return o._(e,[{key:"event",get:function(){var t=this;return this._event||(this._event=function(n,r,i){t._callbacks||(t._callbacks=new l),t._options&&t._options.onFirstListenerAdd&&t._callbacks.isEmpty()&&t._options.onFirstListenerAdd(t),t._callbacks.add(n,r);var a={dispose:function(){t._callbacks&&(t._callbacks.remove(n,r),a.dispose=e._noop,t._options&&t._options.onLastListenerRemove&&t._callbacks.isEmpty()&&t._options.onLastListenerRemove(t))}};return Array.isArray(i)&&i.push(a),a}),this._event}},{key:"fire",value:function(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}},{key:"dispose",value:function(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}]),e}();n.Emitter=u,u._noop=function(){}},812321,(e,t,n)=>{"use strict";var r,i,a=e.r(883735),o=e.r(619314),s=e.r(954546);Object.defineProperty(n,"__esModule",{value:!0}),n.CancellationTokenSource=n.CancellationToken=void 0;var l=e.r(537398),u=e.r(930623),c=e.r(561827);(r=i=n.CancellationToken||(n.CancellationToken={})).None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:c.Event.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:c.Event.None}),r.is=function(e){return e&&(e===r.None||e===r.Cancelled||u.boolean(e.isCancellationRequested)&&!!e.onCancellationRequested)};var d=Object.freeze(function(e,t){var n=(0,l.default)().timer.setTimeout(e.bind(t),0);return{dispose:function(){n.dispose()}}}),f=function(){function e(){a._(this,e),this._isCancelled=!1}return o._(e,[{key:"cancel",value:function(){!this._isCancelled&&(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}},{key:"isCancellationRequested",get:function(){return this._isCancelled}},{key:"onCancellationRequested",get:function(){return this._isCancelled?d:(this._emitter||(this._emitter=new c.Emitter),this._emitter.event)}},{key:"dispose",value:function(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}]),e}();n.CancellationTokenSource=function(){function e(){a._(this,e)}return o._(e,[{key:"token",get:function(){return this._token||(this._token=new f),this._token}},{key:"cancel",value:function(){this._token?this._token.cancel():this._token=i.Cancelled}},{key:"dispose",value:function(){this._token?s._(this._token,f)&&this._token.dispose():this._token=i.None}}]),e}()},34553,(e,t,n)=>{"use strict";var r,i,a=e.r(529405),o=e.r(883735),s=e.r(619314),l=e.r(745291);Object.defineProperty(n,"__esModule",{value:!0}),n.SharedArrayReceiverStrategy=n.SharedArraySenderStrategy=void 0;var u=e.r(812321);(r=i||(i={})).Continue=0,r.Cancelled=1,n.SharedArraySenderStrategy=function(){function e(){o._(this,e),this.buffers=new Map}return s._(e,[{key:"enableCancellation",value:function(e){if(null!==e.id){var t=new SharedArrayBuffer(4);new Int32Array(t,0,1)[0]=i.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}}},{key:"sendCancellation",value:function(e,t){return a._(function(){var e,n;return l._(this,function(r){return void 0===(e=this.buffers.get(t))||(n=new Int32Array(e,0,1),Atomics.store(n,0,i.Cancelled)),[2]})}).call(this)}},{key:"cleanup",value:function(e){this.buffers.delete(e)}},{key:"dispose",value:function(){this.buffers.clear()}}]),e}();var c=function(){function e(t){o._(this,e),this.data=new Int32Array(t,0,1)}return s._(e,[{key:"isCancellationRequested",get:function(){return Atomics.load(this.data,0)===i.Cancelled}},{key:"onCancellationRequested",get:function(){throw Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}]),e}(),d=function(){function e(t){o._(this,e),this.token=new c(t)}return s._(e,[{key:"cancel",value:function(){}},{key:"dispose",value:function(){}}]),e}();n.SharedArrayReceiverStrategy=function(){function e(){o._(this,e),this.kind="request"}return s._(e,[{key:"createCancellationTokenSource",value:function(e){var t=e.$cancellationData;return void 0===t?new u.CancellationTokenSource:new d(t)}}]),e}()},271590,(e,t,n)=>{"use strict";var r=e.r(883735),i=e.r(619314),a=e.r(954546);Object.defineProperty(n,"__esModule",{value:!0}),n.Semaphore=void 0;var o=e.r(537398);n.Semaphore=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(r._(this,e),t<=0)throw Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}return i._(e,[{key:"lock",value:function(e){var t=this;return new Promise(function(n,r){t._waiting.push({thunk:e,resolve:n,reject:r}),t.runNext()})}},{key:"active",get:function(){return this._active}},{key:"runNext",value:function(){var e=this;0!==this._waiting.length&&this._active!==this._capacity&&(0,o.default)().timer.setImmediate(function(){return e.doRunNext()})}},{key:"doRunNext",value:function(){var e=this;if(0!==this._waiting.length&&this._active!==this._capacity){var t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw Error("To many thunks active");try{var n=t.thunk();a._(n,Promise)?n.then(function(n){e._active--,t.resolve(n),e.runNext()},function(n){e._active--,t.reject(n),e.runNext()}):(this._active--,t.resolve(n),this.runNext())}catch(e){this._active--,t.reject(e),this.runNext()}}}}]),e}()},761904,(e,t,n)=>{"use strict";var r,i=e.r(529405),a=e.r(772929),o=e.r(883735),s=e.r(619314),l=e.r(559542),u=e.r(954546),c=e.r(365738),d=e.r(745291);Object.defineProperty(n,"__esModule",{value:!0}),n.ReadableStreamMessageReader=n.AbstractMessageReader=n.MessageReader=void 0;var f=e.r(537398),p=e.r(930623),h=e.r(561827),m=e.r(271590);(n.MessageReader||(n.MessageReader={})).is=function(e){return e&&p.func(e.listen)&&p.func(e.dispose)&&p.func(e.onError)&&p.func(e.onClose)&&p.func(e.onPartialMessage)};var g=function(){function e(){o._(this,e),this.errorEmitter=new h.Emitter,this.closeEmitter=new h.Emitter,this.partialMessageEmitter=new h.Emitter}return s._(e,[{key:"dispose",value:function(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}},{key:"onError",get:function(){return this.errorEmitter.event}},{key:"fireError",value:function(e){this.errorEmitter.fire(this.asError(e))}},{key:"onClose",get:function(){return this.closeEmitter.event}},{key:"fireClose",value:function(){this.closeEmitter.fire(void 0)}},{key:"onPartialMessage",get:function(){return this.partialMessageEmitter.event}},{key:"firePartialMessage",value:function(e){this.partialMessageEmitter.fire(e)}},{key:"asError",value:function(e){return u._(e,Error)?e:Error("Reader received error. Reason: ".concat(p.string(e.message)?e.message:"unknown"))}}]),e}();n.AbstractMessageReader=g,(r||(r={})).fromOptions=function(e){var t=new Map,n=new Map;if(void 0===e||"string"==typeof e)o=null!=e?e:"utf-8";else{if(o=null!=(u=e.charset)?u:"utf-8",void 0!==e.contentDecoder&&(s=e.contentDecoder,t.set(s.name,s)),void 0!==e.contentDecoders){var r=!0,i=!1,a=void 0;try{for(var o,s,l,u,c,d=e.contentDecoders[Symbol.iterator]();!(r=(c=d.next()).done);r=!0){var p=c.value;t.set(p.name,p)}}catch(e){i=!0,a=e}finally{try{r||null==d.return||d.return()}finally{if(i)throw a}}}if(void 0!==e.contentTypeDecoder&&(l=e.contentTypeDecoder,n.set(l.name,l)),void 0!==e.contentTypeDecoders){var h=!0,m=!1,g=void 0;try{for(var x,y=e.contentTypeDecoders[Symbol.iterator]();!(h=(x=y.next()).done);h=!0){var b=x.value;n.set(b.name,b)}}catch(e){m=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw g}}}}return void 0===l&&(l=(0,f.default)().applicationJson.decoder,n.set(l.name,l)),{charset:o,contentDecoder:s,contentDecoders:t,contentTypeDecoder:l,contentTypeDecoders:n}},n.ReadableStreamMessageReader=function(e){function t(e,n){var i;return o._(this,t),(i=a._(this,t)).readable=e,i.options=r.fromOptions(n),i.buffer=(0,f.default)().messageBuffer.create(i.options.charset),i._partialMessageTimeout=1e4,i.nextMessageLength=-1,i.messageToken=0,i.readSemaphore=new m.Semaphore(1),i}return l._(t,e),s._(t,[{key:"partialMessageTimeout",get:function(){return this._partialMessageTimeout},set:function(e){this._partialMessageTimeout=e}},{key:"listen",value:function(e){var t=this;this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;var n=this.readable.onData(function(e){t.onData(e)});return this.readable.onError(function(e){return t.fireError(e)}),this.readable.onClose(function(){return t.fireClose()}),n}},{key:"onData",value:function(e){var t,n=this;for(this.buffer.append(e);;){var r=(t=this,function(){if(-1===t.nextMessageLength){var e=t.buffer.tryReadHeaders(!0);if(!e)return{v:void 0};var r=e.get("content-length");if(!r)return t.fireError(Error("Header must provide a Content-Length property.")),{v:void 0};var a=parseInt(r);if(isNaN(a))return t.fireError(Error("Content-Length value must be a number.")),{v:void 0};t.nextMessageLength=a}var o=t.buffer.tryReadBody(t.nextMessageLength);if(void 0===o)return t.setPartialMessageTimer(),{v:void 0};t.clearPartialMessageTimer(),t.nextMessageLength=-1,t.readSemaphore.lock(function(){return i._(function(){var e,t,n;return d._(this,function(r){switch(r.label){case 0:if(void 0===this.options.contentDecoder)return[3,2];return[4,this.options.contentDecoder.decode(o)];case 1:return t=r.sent(),[3,3];case 2:t=o,r.label=3;case 3:return e=t,[4,this.options.contentTypeDecoder.decode(e,this.options)];case 4:return n=r.sent(),this.callback(n),[2]}})}).call(n)}).catch(function(e){n.fireError(e)})}());if("object"===c._(r))return r.v}}},{key:"clearPartialMessageTimer",value:function(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}},{key:"setPartialMessageTimer",value:function(){var e=this;this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,f.default)().timer.setTimeout(function(t,n){e.partialMessageTimer=void 0,t===e.messageToken&&(e.firePartialMessage({messageToken:t,waitingTime:n}),e.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}]),t}(g)},781124,(e,t,n)=>{"use strict";var r,i=e.r(529405),a=e.r(772929),o=e.r(883735),s=e.r(619314),l=e.r(559542),u=e.r(954546),c=e.r(745291);Object.defineProperty(n,"__esModule",{value:!0}),n.WriteableStreamMessageWriter=n.AbstractMessageWriter=n.MessageWriter=void 0;var d=e.r(537398),f=e.r(930623),p=e.r(271590),h=e.r(561827);(n.MessageWriter||(n.MessageWriter={})).is=function(e){return e&&f.func(e.dispose)&&f.func(e.onClose)&&f.func(e.onError)&&f.func(e.write)};var m=function(){function e(){o._(this,e),this.errorEmitter=new h.Emitter,this.closeEmitter=new h.Emitter}return s._(e,[{key:"dispose",value:function(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}},{key:"onError",get:function(){return this.errorEmitter.event}},{key:"fireError",value:function(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}},{key:"onClose",get:function(){return this.closeEmitter.event}},{key:"fireClose",value:function(){this.closeEmitter.fire(void 0)}},{key:"asError",value:function(e){return u._(e,Error)?e:Error("Writer received error. Reason: ".concat(f.string(e.message)?e.message:"unknown"))}}]),e}();n.AbstractMessageWriter=m,(r||(r={})).fromOptions=function(e){var t,n;return void 0===e||"string"==typeof e?{charset:null!=e?e:"utf-8",contentTypeEncoder:(0,d.default)().applicationJson.encoder}:{charset:null!=(t=e.charset)?t:"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:null!=(n=e.contentTypeEncoder)?n:(0,d.default)().applicationJson.encoder}},n.WriteableStreamMessageWriter=function(e){function t(e,n){var i;return o._(this,t),(i=a._(this,t)).writable=e,i.options=r.fromOptions(n),i.errorCount=0,i.writeSemaphore=new p.Semaphore(1),i.writable.onError(function(e){return i.fireError(e)}),i.writable.onClose(function(){return i.fireClose()}),i}return l._(t,e),s._(t,[{key:"write",value:function(e){return i._(function(){var t;return c._(this,function(n){return t=this,[2,this.writeSemaphore.lock(function(){return i._(function(){var t;return c._(this,function(n){return t=this,[2,this.options.contentTypeEncoder.encode(e,this.options).then(function(e){return void 0!==t.options.contentEncoder?t.options.contentEncoder.encode(e):e}).then(function(n){var r=[];return r.push("Content-Length: ",n.byteLength.toString(),"\r\n"),r.push("\r\n"),t.doWrite(e,r,n)},function(e){throw t.fireError(e),e})]})}).call(t)})]})}).call(this)}},{key:"doWrite",value:function(e,t,n){return i._(function(){var r;return c._(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.writable.write(t.join(""),"ascii")];case 1:return i.sent(),[2,this.writable.write(n)];case 2:return r=i.sent(),this.handleError(r,e),[2,Promise.reject(r)];case 3:return[2]}})}).call(this)}},{key:"handleError",value:function(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}},{key:"end",value:function(){this.writable.end()}}]),t}(m)},427882,(e,t,n)=>{"use strict";var r=e.r(883735),i=e.r(619314);Object.defineProperty(n,"__esModule",{value:!0}),n.AbstractMessageBuffer=void 0,n.AbstractMessageBuffer=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf-8";r._(this,e),this._encoding=t,this._chunks=[],this._totalLength=0}return i._(e,[{key:"encoding",get:function(){return this._encoding}},{key:"append",value:function(e){var t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}},{key:"tryReadHeaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0!==this._chunks.length){var t=0,n=0,r=0,i=0;t:for(;n<this._chunks.length;){var a=this._chunks[n];for(r=0;r<a.length;){switch(a[r]){case 13:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case 10:switch(t){case 1:t=2;break;case 3:t=4,r++;break t;default:t=0}break;default:t=0}r++}i+=a.byteLength,n++}if(4===t){var o=this._read(i+r),s=new Map,l=this.toString(o,"ascii").split("\r\n");if(l.length<2)return s;for(var u=0;u<l.length-2;u++){var c=l[u],d=c.indexOf(":");if(-1===d)throw Error("Message header must separate key and value using :");var f=c.substr(0,d),p=c.substr(d+1).trim();s.set(e?f.toLowerCase():f,p)}return s}}}},{key:"tryReadBody",value:function(e){if(!(this._totalLength<e))return this._read(e)}},{key:"numberOfBytes",get:function(){return this._totalLength}},{key:"_read",value:function(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){var t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){var n=this._chunks[0],r=this.asNative(n,e);return this._chunks[0]=n.slice(e),this._totalLength-=e,r}for(var i=this.allocNative(e),a=0;e>0;){var o=this._chunks[0];if(o.byteLength>e){var s=o.slice(0,e);i.set(s,a),a+=e,this._chunks[0]=o.slice(e),this._totalLength-=e,e-=e}else i.set(o,a),a+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return i}}]),e}()},524217,(e,t,n)=>{"use strict";var r,i,a,o,s,l,u,c,d,f,p,h,m,g,x,y,b,w,_,k,S,C,j,T,E,R,I,A=e.r(529405),P=e.r(772929),D=e.r(883735),O=e.r(559542),N=e.r(954546),M=e.r(561584),L=e.r(365738),B=e.r(873719),V=e.r(745291);Object.defineProperty(n,"__esModule",{value:!0}),n.createMessageConnection=n.ConnectionOptions=n.MessageStrategy=n.CancellationStrategy=n.CancellationSenderStrategy=n.CancellationReceiverStrategy=n.RequestCancellationReceiverStrategy=n.IdCancellationReceiverStrategy=n.ConnectionStrategy=n.ConnectionError=n.ConnectionErrors=n.LogTraceNotification=n.SetTraceNotification=n.TraceFormat=n.TraceValues=n.Trace=n.NullLogger=n.ProgressType=n.ProgressToken=void 0;var F=e.r(537398),U=e.r(930623),G=e.r(995606),$=e.r(97504),H=e.r(561827),z=e.r(812321);(p||(p={})).type=new G.NotificationType("$/cancelRequest"),(h=n.ProgressToken||(n.ProgressToken={})).is=function(e){return"string"==typeof e||"number"==typeof e},(m||(m={})).type=new G.NotificationType("$/progress"),n.ProgressType=function e(){D._(this,e)},(g||(g={})).is=function(e){return U.func(e)},n.NullLogger=Object.freeze({error:function(){},warn:function(){},info:function(){},log:function(){}}),(r=x=n.Trace||(n.Trace={}))[r.Off=0]="Off",r[r.Messages=1]="Messages",r[r.Compact=2]="Compact",r[r.Verbose=3]="Verbose",(i=n.TraceValues||(n.TraceValues={})).Off="off",i.Messages="messages",i.Compact="compact",i.Verbose="verbose",(a=x=n.Trace||(n.Trace={})).fromString=function(e){if(!U.string(e))return a.Off;switch(e=e.toLowerCase()){case"off":default:return a.Off;case"messages":return a.Messages;case"compact":return a.Compact;case"verbose":return a.Verbose}},a.toString=function(e){switch(e){case a.Off:return"off";case a.Messages:return"messages";case a.Compact:return"compact";case a.Verbose:return"verbose";default:return"off"}},(o=y=n.TraceFormat||(n.TraceFormat={})).Text="text",o.JSON="json",(s=y=n.TraceFormat||(n.TraceFormat={})).fromString=function(e){return U.string(e)&&"json"===(e=e.toLowerCase())?s.JSON:s.Text},(b=n.SetTraceNotification||(n.SetTraceNotification={})).type=new G.NotificationType("$/setTrace"),(w=n.LogTraceNotification||(n.LogTraceNotification={})).type=new G.NotificationType("$/logTrace"),(l=_=n.ConnectionErrors||(n.ConnectionErrors={}))[l.Closed=1]="Closed",l[l.Disposed=2]="Disposed",l[l.AlreadyListening=3]="AlreadyListening";var W=function(e){function t(e,n){var r;return D._(this,t),(r=P._(this,t,[n])).code=e,Object.setPrototypeOf(r,t.prototype),r}return O._(t,e),t}(B._(Error));n.ConnectionError=W,(k=n.ConnectionStrategy||(n.ConnectionStrategy={})).is=function(e){return e&&U.func(e.cancelUndispatched)},(S=n.IdCancellationReceiverStrategy||(n.IdCancellationReceiverStrategy={})).is=function(e){return e&&(void 0===e.kind||"id"===e.kind)&&U.func(e.createCancellationTokenSource)&&(void 0===e.dispose||U.func(e.dispose))},(C=n.RequestCancellationReceiverStrategy||(n.RequestCancellationReceiverStrategy={})).is=function(e){return e&&"request"===e.kind&&U.func(e.createCancellationTokenSource)&&(void 0===e.dispose||U.func(e.dispose))},(u=j=n.CancellationReceiverStrategy||(n.CancellationReceiverStrategy={})).Message=Object.freeze({createCancellationTokenSource:function(e){return new z.CancellationTokenSource}}),u.is=function(e){return S.is(e)||C.is(e)},(c=T=n.CancellationSenderStrategy||(n.CancellationSenderStrategy={})).Message=Object.freeze({sendCancellation:function(e,t){return e.sendNotification(p.type,{id:t})},cleanup:function(e){}}),c.is=function(e){return e&&U.func(e.sendCancellation)&&U.func(e.cleanup)},(d=E=n.CancellationStrategy||(n.CancellationStrategy={})).Message=Object.freeze({receiver:j.Message,sender:T.Message}),d.is=function(e){return e&&j.is(e.receiver)&&T.is(e.sender)},(R=n.MessageStrategy||(n.MessageStrategy={})).is=function(e){return e&&U.func(e.handleMessage)},(n.ConnectionOptions||(n.ConnectionOptions={})).is=function(e){return e&&(E.is(e.cancellationStrategy)||k.is(e.connectionStrategy)||R.is(e.messageStrategy))},(f=I||(I={}))[f.New=1]="New",f[f.Listening=2]="Listening",f[f.Closed=3]="Closed",f[f.Disposed=4]="Disposed",n.createMessageConnection=function(e,t,r,i){var a,o,s=void 0!==r?r:n.NullLogger,l=0,u=0,c=0,d=void 0,f=new Map,k=void 0,C=new Map,j=new Map,T=new $.LinkedMap,P=new Map,D=new Set,O=new Map,B=x.Off,q=y.Text,K=I.New,Y=new H.Emitter,Q=new H.Emitter,X=new H.Emitter,Z=new H.Emitter,J=new H.Emitter,ee=i&&i.cancellationStrategy?i.cancellationStrategy:E.Message;function et(e){if(null===e)throw Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function en(e){}function er(){return K===I.Listening}function ei(){return K===I.Closed}function ea(){return K===I.Disposed}function eo(){(K===I.New||K===I.Listening)&&(K=I.Closed,Q.fire(void 0))}function es(e){G.Message.isRequest(e)?function(e){if(!ea()){var n=e;if(B!==x.Off&&o)if(q===y.Text){var r=void 0;(B===x.Verbose||B===x.Compact)&&n.params&&(r="Params: ".concat(eu(n.params),"\n\n")),o.log("Received request '".concat(n.method," - (").concat(n.id,")'."),r)}else ef("receive-request",n);var i=f.get(e.method);i&&(g=i.type,b=i.handler);var a=Date.now();if(b||d){var l=null!=(w=e.id)?w:String(Date.now()),u=S.is(ee.receiver)?ee.receiver.createCancellationTokenSource(l):ee.receiver.createCancellationTokenSource(e);null!==e.id&&D.has(e.id)&&u.cancel(),null!==e.id&&O.set(l,u);try{if(b)if(void 0===e.params){if(void 0!==g&&0!==g.numberOfParams)return void j(new G.ResponseError(G.ErrorCodes.InvalidParams,"Request ".concat(e.method," defines ").concat(g.numberOfParams," params but received none.")),e.method,a);_=b(u.token)}else if(Array.isArray(e.params)){if(void 0!==g&&g.parameterStructures===G.ParameterStructures.byName)return void j(new G.ResponseError(G.ErrorCodes.InvalidParams,"Request ".concat(e.method," defines parameters by name but received parameters by position")),e.method,a);_=b.apply(void 0,M._(e.params).concat([u.token]))}else{if(void 0!==g&&g.parameterStructures===G.ParameterStructures.byPosition)return void j(new G.ResponseError(G.ErrorCodes.InvalidParams,"Request ".concat(e.method," defines parameters by position but received parameters by name")),e.method,a);_=b(e.params,u.token)}else d&&(_=d(e.method,e.params,u.token));var c,p,h,m,g,b,w,_,k=_;_?k.then?k.then(function(t){O.delete(l),C(t,e.method,a)},function(t){O.delete(l),N._(t,G.ResponseError)?j(t,e.method,a):t&&U.string(t.message)?j(new G.ResponseError(G.ErrorCodes.InternalError,"Request ".concat(e.method," failed with message: ").concat(t.message)),e.method,a):j(new G.ResponseError(G.ErrorCodes.InternalError,"Request ".concat(e.method," failed unexpectedly without providing any details.")),e.method,a)}):(O.delete(l),C(_,e.method,a)):(O.delete(l),c=_,p=e.method,h=a,void 0===c&&(c=null),m={jsonrpc:"2.0",id:e.id,result:c},ec(m,p,h),t.write(m).catch(function(){return s.error("Sending response failed.")}))}catch(t){O.delete(l),N._(t,G.ResponseError)?C(t,e.method,a):t&&U.string(t.message)?j(new G.ResponseError(G.ErrorCodes.InternalError,"Request ".concat(e.method," failed with message: ").concat(t.message)),e.method,a):j(new G.ResponseError(G.ErrorCodes.InternalError,"Request ".concat(e.method," failed unexpectedly without providing any details.")),e.method,a)}}else j(new G.ResponseError(G.ErrorCodes.MethodNotFound,"Unhandled method ".concat(e.method)),e.method,a)}function C(n,r,i){var a={jsonrpc:"2.0",id:e.id};N._(n,G.ResponseError)?a.error=n.toJson():a.result=void 0===n?null:n,ec(a,r,i),t.write(a).catch(function(){return s.error("Sending response failed.")})}function j(n,r,i){var a={jsonrpc:"2.0",id:e.id,error:n.toJson()};ec(a,r,i),t.write(a).catch(function(){return s.error("Sending response failed.")})}}(e):G.Message.isNotification(e)?function(e){if(!ea()){var t,n=void 0;if(e.method===p.type.method){var r=e.params.id;D.delete(r),ed(e);return}var i=C.get(e.method);if(i&&(t=i.handler,n=i.type),t||k)try{if(ed(e),t)if(void 0===e.params)void 0!==n&&0!==n.numberOfParams&&n.parameterStructures!==G.ParameterStructures.byName&&s.error("Notification ".concat(e.method," defines ").concat(n.numberOfParams," params but received none.")),t();else if(Array.isArray(e.params)){var a=e.params;e.method===m.type.method&&2===a.length&&h.is(a[0])?t({token:a[0],value:a[1]}):(void 0!==n&&(n.parameterStructures===G.ParameterStructures.byName&&s.error("Notification ".concat(e.method," defines parameters by name but received parameters by position")),n.numberOfParams!==e.params.length&&s.error("Notification ".concat(e.method," defines ").concat(n.numberOfParams," params but received ").concat(a.length," arguments"))),t.apply(void 0,M._(a)))}else void 0!==n&&n.parameterStructures===G.ParameterStructures.byPosition&&s.error("Notification ".concat(e.method," defines parameters by position but received parameters by name")),t(e.params);else k&&k(e.method,e.params)}catch(t){t.message?s.error("Notification handler '".concat(e.method,"' failed with message: ").concat(t.message)):s.error("Notification handler '".concat(e.method,"' failed unexpectedly."))}else X.fire(e)}}(e):G.Message.isResponse(e)?function(e){if(!ea())if(null===e.id)e.error?s.error("Received response message without id: Error is: \n".concat(JSON.stringify(e.error,void 0,4))):s.error("Received response message without id. No further error information provided.");else{var t=e.id,n=P.get(t);if(function(e,t){if(B!==x.Off&&o)if(q===y.Text){var n=void 0;if((B===x.Verbose||B===x.Compact)&&(e.error&&e.error.data?n="Error data: ".concat(eu(e.error.data),"\n\n"):e.result?n="Result: ".concat(eu(e.result),"\n\n"):void 0===e.error&&(n="No result returned.\n\n")),t){var r=e.error?" Request failed: ".concat(e.error.message," (").concat(e.error.code,")."):"";o.log("Received response '".concat(t.method," - (").concat(e.id,")' in ").concat(Date.now()-t.timerStart,"ms.").concat(r),n)}else o.log("Received response ".concat(e.id," without active response promise."),n)}else ef("receive-response",e)}(e,n),void 0!==n){P.delete(t);try{if(e.error){var r=e.error;n.reject(new G.ResponseError(r.code,r.message,r.data))}else if(void 0!==e.result)n.resolve(e.result);else throw Error("Should never happen.")}catch(e){e.message?s.error("Response handler '".concat(n.method,"' failed with message: ").concat(e.message)):s.error("Response handler '".concat(n.method,"' failed unexpectedly."))}}}}(e):function(e){if(!e)return s.error("Received empty message.");if(s.error("Received message which is neither a response nor a notification message:\n".concat(JSON.stringify(e,null,4))),U.string(e.id)||U.number(e.id)){var t=e.id,n=P.get(t);n&&n.reject(Error("The received response has neither a result nor an error property."))}}(e)}e.onClose(eo),e.onError(function(e){Y.fire([e,void 0,void 0])}),t.onClose(eo),t.onError(function(e){Y.fire(e)});var el=function(e){try{if(G.Message.isNotification(e)&&e.method===p.type.method){var n,r=e.params.id,o=et(r),l=T.get(o);if(G.Message.isRequest(l)){var d=null==i?void 0:i.connectionStrategy,f=d&&d.cancelUndispatched?d.cancelUndispatched(l,en):en(l);if(f&&(void 0!==f.error||void 0!==f.result)){T.delete(o),O.delete(r),f.id=l.id,ec(f,e.method,Date.now()),t.write(f).catch(function(){return s.error("Sending response for canceled message failed.")});return}}var h=O.get(r);if(void 0!==h){h.cancel(),ed(e);return}D.add(r)}var m=T;G.Message.isRequest(e)?m.set(et(e.id),e):G.Message.isResponse(e)?m.set(null===(n=e.id)?"res-unknown-"+(++c).toString():"res-"+n.toString(),e):m.set("not-"+(++u).toString(),e)}finally{!function e(){a||0===T.size||(a=(0,F.default)().timer.setImmediate(function(){a=void 0,function(){if(0!==T.size){var t=T.shift();try{var n=null==i?void 0:i.messageStrategy;R.is(n)?n.handleMessage(t,es):es(t)}finally{e()}}}()}))}()}};function eu(e){if(null!=e)switch(B){case x.Verbose:return JSON.stringify(e,null,4);case x.Compact:return JSON.stringify(e);default:return}}function ec(e,t,n){if(B!==x.Off&&o)if(q===y.Text){var r=void 0;(B===x.Verbose||B===x.Compact)&&(e.error&&e.error.data?r="Error data: ".concat(eu(e.error.data),"\n\n"):e.result?r="Result: ".concat(eu(e.result),"\n\n"):void 0===e.error&&(r="No result returned.\n\n")),o.log("Sending response '".concat(t," - (").concat(e.id,")'. Processing request took ").concat(Date.now()-n,"ms"),r)}else ef("send-response",e)}function ed(e){if(B!==x.Off&&o&&e.method!==w.type.method)if(q===y.Text){var t=void 0;(B===x.Verbose||B===x.Compact)&&(t=e.params?"Params: ".concat(eu(e.params),"\n\n"):"No parameters provided.\n\n"),o.log("Received notification '".concat(e.method,"'."),t)}else ef("receive-notification",e)}function ef(e,t){if(o&&B!==x.Off){var n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};o.log(n)}}function ep(){if(ei())throw new W(_.Closed,"Connection is closed.");if(ea())throw new W(_.Disposed,"Connection is disposed.")}function eh(e){return void 0===e?null:e}function em(e){if(null!==e)return e}function eg(e){return null!=e&&!Array.isArray(e)&&(void 0===e?"undefined":L._(e))==="object"}function ev(e,t){switch(e){case G.ParameterStructures.auto:if(eg(t))return em(t);return[eh(t)];case G.ParameterStructures.byName:if(!eg(t))throw Error("Received parameters by name but param is not an object literal.");return em(t);case G.ParameterStructures.byPosition:return[eh(t)];default:throw Error("Unknown parameter structure ".concat(e.toString()))}}function ex(e,t){var n,r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=ev(e.parameterStructures,t[0]);break;default:n=[];for(var i=0;i<t.length&&i<r;i++)n.push(eh(t[i]));if(t.length<r)for(var a=t.length;a<r;a++)n.push(null)}return n}var ey={sendNotification:function(e){for(var n,r,i=arguments.length,a=Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];if(ep(),U.string(e)){n=e;var u=a[0],c=0,d=G.ParameterStructures.auto;G.ParameterStructures.is(u)&&(c=1,d=u);var f=a.length,p=f-c;switch(p){case 0:r=void 0;break;case 1:r=ev(d,a[c]);break;default:if(d===G.ParameterStructures.byName)throw Error("Received ".concat(p," parameters for 'by Name' notification parameter structure."));r=a.slice(c,f).map(function(e){return eh(e)})}}else n=e.method,r=ex(e,a);var h={jsonrpc:"2.0",method:n,params:r};if(B!==x.Off&&o)if(q===y.Text){var m=void 0;(B===x.Verbose||B===x.Compact)&&(m=h.params?"Params: ".concat(eu(h.params),"\n\n"):"No parameters provided.\n\n"),o.log("Sending notification '".concat(h.method,"'."),m)}else ef("send-notification",h);return t.write(h).catch(function(e){throw s.error("Sending notification failed."),e})},onNotification:function(e,t){var n;return ep(),U.func(e)?k=e:t&&(U.string(e)?(n=e,C.set(e,{type:void 0,handler:t})):(n=e.method,C.set(e.method,{type:e,handler:t}))),{dispose:function(){void 0!==n?C.delete(n):k=void 0}}},onProgress:function(e,t,n){if(j.has(t))throw Error("Progress handler for token ".concat(t," already registered"));return j.set(t,n),{dispose:function(){j.delete(t)}}},sendProgress:function(e,t,n){return ey.sendNotification(m.type,{token:t,value:n})},onUnhandledProgress:Z.event,sendRequest:function(e){for(var n,r,i,a=arguments.length,u=Array(a>1?a-1:0),c=1;c<a;c++)u[c-1]=arguments[c];if(ep(),!er())throw Error("Call listen() first.");var d=void 0;if(U.string(e)){n=e;var f=u[0],p=u[u.length-1],h=0,m=G.ParameterStructures.auto;G.ParameterStructures.is(f)&&(h=1,m=f);var g=u.length;z.CancellationToken.is(p)&&(g-=1,d=p);var b=g-h;switch(b){case 0:r=void 0;break;case 1:r=ev(m,u[h]);break;default:if(m===G.ParameterStructures.byName)throw Error("Received ".concat(b," parameters for 'by Name' request parameter structure."));r=u.slice(h,g).map(function(e){return eh(e)})}}else{n=e.method,r=ex(e,u);var w=e.numberOfParams;d=z.CancellationToken.is(u[w])?u[w]:void 0}var _=l++;d&&(i=d.onCancellationRequested(function(){var e=ee.sender.sendCancellation(ey,_);return void 0===e?(s.log("Received no promise from cancellation strategy when cancelling id ".concat(_)),Promise.resolve()):e.catch(function(){s.log("Sending cancellation messages for id ".concat(_," failed"))})}));var k={jsonrpc:"2.0",id:_,method:n,params:r};if(B!==x.Off&&o)if(q===y.Text){var S=void 0;(B===x.Verbose||B===x.Compact)&&k.params&&(S="Params: ".concat(eu(k.params),"\n\n")),o.log("Sending request '".concat(k.method," - (").concat(k.id,")'."),S)}else ef("send-request",k);return"function"==typeof ee.sender.enableCancellation&&ee.sender.enableCancellation(k),new Promise(function(e,r){return A._(function(){var a,o,l,u;return V._(this,function(c){switch(c.label){case 0:a=function(t){e(t),ee.sender.cleanup(_),null==i||i.dispose()},o=function(e){r(e),ee.sender.cleanup(_),null==i||i.dispose()},l={method:n,timerStart:Date.now(),resolve:a,reject:o},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,t.write(k)];case 2:return c.sent(),P.set(_,l),[3,4];case 3:throw u=c.sent(),s.error("Sending request failed."),l.reject(new G.ResponseError(G.ErrorCodes.MessageWriteError,u.message?u.message:"Unknown reason")),u;case 4:return[2]}})})()})},onRequest:function(e,t){ep();var n=null;return g.is(e)?(n=void 0,d=e):U.string(e)?(n=null,void 0!==t&&(n=e,f.set(e,{handler:t,type:void 0}))):void 0!==t&&(n=e.method,f.set(e.method,{type:e,handler:t})),{dispose:function(){null!==n&&(void 0!==n?f.delete(n):d=void 0)}}},hasPendingResponse:function(){return P.size>0},trace:function(e,t,n){return A._(function(){var r,i;return V._(this,function(a){switch(a.label){case 0:if(r=!1,i=y.Text,void 0!==n&&(U.boolean(n)?r=n:(r=n.sendNotification||!1,i=n.traceFormat||y.Text)),B=e,q=i,o=B===x.Off?void 0:t,!(r&&!ei()&&!ea()))return[3,2];return[4,ey.sendNotification(b.type,{value:x.toString(e)})];case 1:a.sent(),a.label=2;case 2:return[2]}})})()},onError:Y.event,onClose:Q.event,onUnhandledNotification:X.event,onDispose:J.event,end:function(){t.end()},dispose:function(){if(!ea()){K=I.Disposed,J.fire(void 0);var n=new G.ResponseError(G.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed"),r=!0,i=!1,a=void 0;try{for(var o,s=P.values()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)o.value.reject(n)}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}P=new Map,O=new Map,D=new Set,T=new $.LinkedMap,U.func(t.dispose)&&t.dispose(),U.func(e.dispose)&&e.dispose()}},listen:function(){if(ep(),er())throw new W(_.AlreadyListening,"Connection is already listening");K=I.Listening,e.listen(el)},inspect:function(){(0,F.default)().console.log("inspect")}};return ey.onNotification(w.type,function(e){if(B!==x.Off&&o){var t=B===x.Verbose||B===x.Compact;o.log(e.message,t?e.verbose:void 0)}}),ey.onNotification(m.type,function(e){var t=j.get(e.token);t?t(e.value):Z.fire(e)}),ey}},127673,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ProgressType=n.ProgressToken=n.createMessageConnection=n.NullLogger=n.ConnectionOptions=n.ConnectionStrategy=n.AbstractMessageBuffer=n.WriteableStreamMessageWriter=n.AbstractMessageWriter=n.MessageWriter=n.ReadableStreamMessageReader=n.AbstractMessageReader=n.MessageReader=n.SharedArrayReceiverStrategy=n.SharedArraySenderStrategy=n.CancellationToken=n.CancellationTokenSource=n.Emitter=n.Event=n.Disposable=n.LRUCache=n.Touch=n.LinkedMap=n.ParameterStructures=n.NotificationType9=n.NotificationType8=n.NotificationType7=n.NotificationType6=n.NotificationType5=n.NotificationType4=n.NotificationType3=n.NotificationType2=n.NotificationType1=n.NotificationType0=n.NotificationType=n.ErrorCodes=n.ResponseError=n.RequestType9=n.RequestType8=n.RequestType7=n.RequestType6=n.RequestType5=n.RequestType4=n.RequestType3=n.RequestType2=n.RequestType1=n.RequestType0=n.RequestType=n.Message=n.RAL=void 0,n.MessageStrategy=n.CancellationStrategy=n.CancellationSenderStrategy=n.CancellationReceiverStrategy=n.ConnectionError=n.ConnectionErrors=n.LogTraceNotification=n.SetTraceNotification=n.TraceFormat=n.TraceValues=n.Trace=void 0;var r=e.r(995606);Object.defineProperty(n,"Message",{enumerable:!0,get:function(){return r.Message}}),Object.defineProperty(n,"RequestType",{enumerable:!0,get:function(){return r.RequestType}}),Object.defineProperty(n,"RequestType0",{enumerable:!0,get:function(){return r.RequestType0}}),Object.defineProperty(n,"RequestType1",{enumerable:!0,get:function(){return r.RequestType1}}),Object.defineProperty(n,"RequestType2",{enumerable:!0,get:function(){return r.RequestType2}}),Object.defineProperty(n,"RequestType3",{enumerable:!0,get:function(){return r.RequestType3}}),Object.defineProperty(n,"RequestType4",{enumerable:!0,get:function(){return r.RequestType4}}),Object.defineProperty(n,"RequestType5",{enumerable:!0,get:function(){return r.RequestType5}}),Object.defineProperty(n,"RequestType6",{enumerable:!0,get:function(){return r.RequestType6}}),Object.defineProperty(n,"RequestType7",{enumerable:!0,get:function(){return r.RequestType7}}),Object.defineProperty(n,"RequestType8",{enumerable:!0,get:function(){return r.RequestType8}}),Object.defineProperty(n,"RequestType9",{enumerable:!0,get:function(){return r.RequestType9}}),Object.defineProperty(n,"ResponseError",{enumerable:!0,get:function(){return r.ResponseError}}),Object.defineProperty(n,"ErrorCodes",{enumerable:!0,get:function(){return r.ErrorCodes}}),Object.defineProperty(n,"NotificationType",{enumerable:!0,get:function(){return r.NotificationType}}),Object.defineProperty(n,"NotificationType0",{enumerable:!0,get:function(){return r.NotificationType0}}),Object.defineProperty(n,"NotificationType1",{enumerable:!0,get:function(){return r.NotificationType1}}),Object.defineProperty(n,"NotificationType2",{enumerable:!0,get:function(){return r.NotificationType2}}),Object.defineProperty(n,"NotificationType3",{enumerable:!0,get:function(){return r.NotificationType3}}),Object.defineProperty(n,"NotificationType4",{enumerable:!0,get:function(){return r.NotificationType4}}),Object.defineProperty(n,"NotificationType5",{enumerable:!0,get:function(){return r.NotificationType5}}),Object.defineProperty(n,"NotificationType6",{enumerable:!0,get:function(){return r.NotificationType6}}),Object.defineProperty(n,"NotificationType7",{enumerable:!0,get:function(){return r.NotificationType7}}),Object.defineProperty(n,"NotificationType8",{enumerable:!0,get:function(){return r.NotificationType8}}),Object.defineProperty(n,"NotificationType9",{enumerable:!0,get:function(){return r.NotificationType9}}),Object.defineProperty(n,"ParameterStructures",{enumerable:!0,get:function(){return r.ParameterStructures}});var i=e.r(97504);Object.defineProperty(n,"LinkedMap",{enumerable:!0,get:function(){return i.LinkedMap}}),Object.defineProperty(n,"LRUCache",{enumerable:!0,get:function(){return i.LRUCache}}),Object.defineProperty(n,"Touch",{enumerable:!0,get:function(){return i.Touch}});var a=e.r(303372);Object.defineProperty(n,"Disposable",{enumerable:!0,get:function(){return a.Disposable}});var o=e.r(561827);Object.defineProperty(n,"Event",{enumerable:!0,get:function(){return o.Event}}),Object.defineProperty(n,"Emitter",{enumerable:!0,get:function(){return o.Emitter}});var s=e.r(812321);Object.defineProperty(n,"CancellationTokenSource",{enumerable:!0,get:function(){return s.CancellationTokenSource}}),Object.defineProperty(n,"CancellationToken",{enumerable:!0,get:function(){return s.CancellationToken}});var l=e.r(34553);Object.defineProperty(n,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return l.SharedArraySenderStrategy}}),Object.defineProperty(n,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return l.SharedArrayReceiverStrategy}});var u=e.r(761904);Object.defineProperty(n,"MessageReader",{enumerable:!0,get:function(){return u.MessageReader}}),Object.defineProperty(n,"AbstractMessageReader",{enumerable:!0,get:function(){return u.AbstractMessageReader}}),Object.defineProperty(n,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return u.ReadableStreamMessageReader}});var c=e.r(781124);Object.defineProperty(n,"MessageWriter",{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(n,"AbstractMessageWriter",{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(n,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}});var d=e.r(427882);Object.defineProperty(n,"AbstractMessageBuffer",{enumerable:!0,get:function(){return d.AbstractMessageBuffer}});var f=e.r(524217);Object.defineProperty(n,"ConnectionStrategy",{enumerable:!0,get:function(){return f.ConnectionStrategy}}),Object.defineProperty(n,"ConnectionOptions",{enumerable:!0,get:function(){return f.ConnectionOptions}}),Object.defineProperty(n,"NullLogger",{enumerable:!0,get:function(){return f.NullLogger}}),Object.defineProperty(n,"createMessageConnection",{enumerable:!0,get:function(){return f.createMessageConnection}}),Object.defineProperty(n,"ProgressToken",{enumerable:!0,get:function(){return f.ProgressToken}}),Object.defineProperty(n,"ProgressType",{enumerable:!0,get:function(){return f.ProgressType}}),Object.defineProperty(n,"Trace",{enumerable:!0,get:function(){return f.Trace}}),Object.defineProperty(n,"TraceValues",{enumerable:!0,get:function(){return f.TraceValues}}),Object.defineProperty(n,"TraceFormat",{enumerable:!0,get:function(){return f.TraceFormat}}),Object.defineProperty(n,"SetTraceNotification",{enumerable:!0,get:function(){return f.SetTraceNotification}}),Object.defineProperty(n,"LogTraceNotification",{enumerable:!0,get:function(){return f.LogTraceNotification}}),Object.defineProperty(n,"ConnectionErrors",{enumerable:!0,get:function(){return f.ConnectionErrors}}),Object.defineProperty(n,"ConnectionError",{enumerable:!0,get:function(){return f.ConnectionError}}),Object.defineProperty(n,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return f.CancellationReceiverStrategy}}),Object.defineProperty(n,"CancellationSenderStrategy",{enumerable:!0,get:function(){return f.CancellationSenderStrategy}}),Object.defineProperty(n,"CancellationStrategy",{enumerable:!0,get:function(){return f.CancellationStrategy}}),Object.defineProperty(n,"MessageStrategy",{enumerable:!0,get:function(){return f.MessageStrategy}}),n.RAL=e.r(537398).default},166064,(e,t,n)=>{"use strict";var r=e.r(772929),i=e.r(883735),a=e.r(619314),o=e.r(559542),s=e.r(954546),l=e.r(561584);Object.defineProperty(n,"__esModule",{value:!0});var u=e.r(127673),c=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf-8";return i._(this,t),(e=r._(this,t,[n])).asciiDecoder=new TextDecoder("ascii"),e}return o._(t,e),a._(t,[{key:"emptyBuffer",value:function(){return t.emptyBuffer}},{key:"fromString",value:function(e,t){return new TextEncoder().encode(e)}},{key:"toString",value:function(e,t){return"ascii"===t?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}},{key:"asNative",value:function(e,t){return void 0===t?e:e.slice(0,t)}},{key:"allocNative",value:function(e){return new Uint8Array(e)}}]),t}(u.AbstractMessageBuffer);c.emptyBuffer=new Uint8Array(0);var d=function(){function e(t){var n=this;i._(this,e),this.socket=t,this._onData=new u.Emitter,this._messageListener=function(e){e.data.arrayBuffer().then(function(e){n._onData.fire(new Uint8Array(e))},function(){(0,u.RAL)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}return a._(e,[{key:"onClose",value:function(e){var t=this;return this.socket.addEventListener("close",e),u.Disposable.create(function(){return t.socket.removeEventListener("close",e)})}},{key:"onError",value:function(e){var t=this;return this.socket.addEventListener("error",e),u.Disposable.create(function(){return t.socket.removeEventListener("error",e)})}},{key:"onEnd",value:function(e){var t=this;return this.socket.addEventListener("end",e),u.Disposable.create(function(){return t.socket.removeEventListener("end",e)})}},{key:"onData",value:function(e){return this._onData.event(e)}}]),e}(),f=function(){function e(t){i._(this,e),this.socket=t}return a._(e,[{key:"onClose",value:function(e){var t=this;return this.socket.addEventListener("close",e),u.Disposable.create(function(){return t.socket.removeEventListener("close",e)})}},{key:"onError",value:function(e){var t=this;return this.socket.addEventListener("error",e),u.Disposable.create(function(){return t.socket.removeEventListener("error",e)})}},{key:"onEnd",value:function(e){var t=this;return this.socket.addEventListener("end",e),u.Disposable.create(function(){return t.socket.removeEventListener("end",e)})}},{key:"write",value:function(e,t){if("string"==typeof e){if(void 0!==t&&"utf-8"!==t)throw Error("In a Browser environments only utf-8 text encoding is supported. But got encoding: ".concat(t));this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}},{key:"end",value:function(){this.socket.close()}}]),e}(),p=new TextEncoder,h=Object.freeze({messageBuffer:Object.freeze({create:function(e){return new c(e)}}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:function(e,t){if("utf-8"!==t.charset)throw Error("In a Browser environments only utf-8 text encoding is supported. But got encoding: ".concat(t.charset));return Promise.resolve(p.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:function(e,t){if(!s._(e,Uint8Array))throw Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:function(e){return new d(e)},asWritableStream:function(e){return new f(e)}}),console:console,timer:Object.freeze({setTimeout:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=setTimeout.apply(void 0,[e,t].concat(l._(r)));return{dispose:function(){return clearTimeout(a)}}},setImmediate:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=setTimeout.apply(void 0,[e,0].concat(l._(n)));return{dispose:function(){return clearTimeout(i)}}},setInterval:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=setInterval.apply(void 0,[e,t].concat(l._(r)));return{dispose:function(){return clearInterval(a)}}}})});function m(){return h}(m||(m={})).install=function(){u.RAL.install(h)},n.default=m},134892,(e,t,n)=>{"use strict";var r=e.r(772929),i=e.r(883735),a=e.r(619314),o=e.r(559542),s=e.e&&e.e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=e.e&&e.e.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.createMessageConnection=n.BrowserMessageWriter=n.BrowserMessageReader=void 0,e.r(166064).default.install();var u=e.r(127673);l(e.r(127673),n),n.BrowserMessageReader=function(e){function t(e){var n;return i._(this,t),(n=r._(this,t))._onData=new u.Emitter,n._messageListener=function(e){n._onData.fire(e.data)},e.addEventListener("error",function(e){return n.fireError(e)}),e.onmessage=n._messageListener,n}return o._(t,e),a._(t,[{key:"listen",value:function(e){return this._onData.event(e)}}]),t}(u.AbstractMessageReader),n.BrowserMessageWriter=function(e){function t(e){var n;return i._(this,t),(n=r._(this,t)).port=e,n.errorCount=0,e.addEventListener("error",function(e){return n.fireError(e)}),n}return o._(t,e),a._(t,[{key:"write",value:function(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}},{key:"handleError",value:function(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}},{key:"end",value:function(){}}]),t}(u.AbstractMessageWriter),n.createMessageConnection=function(e,t,n,r){return void 0===n&&(n=u.NullLogger),u.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,u.createMessageConnection)(e,t,n,r)}},829130,(e,t,n)=>{"use strict";t.exports=e.r(134892)},447677,(e,t,n)=>{"use strict";var r,i=e.r(772929),a=e.r(883735),o=e.r(559542);Object.defineProperty(n,"__esModule",{value:!0}),n.ProtocolNotificationType=n.ProtocolNotificationType0=n.ProtocolRequestType=n.ProtocolRequestType0=n.RegistrationType=n.MessageDirection=void 0;var s=e.r(134892);(r=n.MessageDirection||(n.MessageDirection={})).clientToServer="clientToServer",r.serverToClient="serverToClient",r.both="both",n.RegistrationType=function e(t){a._(this,e),this.method=t},n.ProtocolRequestType0=function(e){function t(e){return a._(this,t),i._(this,t,[e])}return o._(t,e),t}(s.RequestType0),n.ProtocolRequestType=function(e){function t(e){return a._(this,t),i._(this,t,[e,s.ParameterStructures.byName])}return o._(t,e),t}(s.RequestType),n.ProtocolNotificationType0=function(e){function t(e){return a._(this,t),i._(this,t,[e])}return o._(t,e),t}(s.NotificationType0),n.ProtocolNotificationType=function(e){function t(e){return a._(this,t),i._(this,t,[e,s.ParameterStructures.byName])}return o._(t,e),t}(s.NotificationType)},630794,(e,t,n)=>{"use strict";var r=e.r(954546),i=e.r(365738);function a(e){return"string"==typeof e||r._(e,String)}function o(e){return Array.isArray(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.objectLiteral=n.typedArray=n.stringArray=n.array=n.func=n.error=n.number=n.string=n.boolean=void 0,n.boolean=function(e){return!0===e||!1===e},n.string=a,n.number=function(e){return"number"==typeof e||r._(e,Number)},n.error=function(e){return r._(e,Error)},n.func=function(e){return"function"==typeof e},n.array=o,n.stringArray=function(e){return o(e)&&e.every(function(e){return a(e)})},n.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},n.objectLiteral=function(e){return null!==e&&(void 0===e?"undefined":i._(e))==="object"}},54411,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ImplementationRequest=void 0;var r,i=e.r(447677);(r=n.ImplementationRequest||(n.ImplementationRequest={})).method="textDocument/implementation",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},988115,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TypeDefinitionRequest=void 0;var r,i=e.r(447677);(r=n.TypeDefinitionRequest||(n.TypeDefinitionRequest={})).method="textDocument/typeDefinition",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},342835,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DidChangeWorkspaceFoldersNotification=n.WorkspaceFoldersRequest=void 0;var r,i,a=e.r(447677);(r=n.WorkspaceFoldersRequest||(n.WorkspaceFoldersRequest={})).method="workspace/workspaceFolders",r.messageDirection=a.MessageDirection.serverToClient,r.type=new a.ProtocolRequestType0(r.method),(i=n.DidChangeWorkspaceFoldersNotification||(n.DidChangeWorkspaceFoldersNotification={})).method="workspace/didChangeWorkspaceFolders",i.messageDirection=a.MessageDirection.clientToServer,i.type=new a.ProtocolNotificationType(i.method)},707767,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ConfigurationRequest=void 0;var r,i=e.r(447677);(r=n.ConfigurationRequest||(n.ConfigurationRequest={})).method="workspace/configuration",r.messageDirection=i.MessageDirection.serverToClient,r.type=new i.ProtocolRequestType(r.method)},364024,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ColorPresentationRequest=n.DocumentColorRequest=void 0;var r,i,a=e.r(447677);(r=n.DocumentColorRequest||(n.DocumentColorRequest={})).method="textDocument/documentColor",r.messageDirection=a.MessageDirection.clientToServer,r.type=new a.ProtocolRequestType(r.method),(i=n.ColorPresentationRequest||(n.ColorPresentationRequest={})).method="textDocument/colorPresentation",i.messageDirection=a.MessageDirection.clientToServer,i.type=new a.ProtocolRequestType(i.method)},710112,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FoldingRangeRequest=void 0;var r,i=e.r(447677);(r=n.FoldingRangeRequest||(n.FoldingRangeRequest={})).method="textDocument/foldingRange",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},840465,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DeclarationRequest=void 0;var r,i=e.r(447677);(r=n.DeclarationRequest||(n.DeclarationRequest={})).method="textDocument/declaration",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},492665,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionRangeRequest=void 0;var r,i=e.r(447677);(r=n.SelectionRangeRequest||(n.SelectionRangeRequest={})).method="textDocument/selectionRange",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},374513,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.WorkDoneProgressCancelNotification=n.WorkDoneProgressCreateRequest=n.WorkDoneProgress=void 0;var r,i,a,o=e.r(134892),s=e.r(447677);(r=n.WorkDoneProgress||(n.WorkDoneProgress={})).type=new o.ProgressType,r.is=function(e){return e===r.type},(i=n.WorkDoneProgressCreateRequest||(n.WorkDoneProgressCreateRequest={})).method="window/workDoneProgress/create",i.messageDirection=s.MessageDirection.serverToClient,i.type=new s.ProtocolRequestType(i.method),(a=n.WorkDoneProgressCancelNotification||(n.WorkDoneProgressCancelNotification={})).method="window/workDoneProgress/cancel",a.messageDirection=s.MessageDirection.clientToServer,a.type=new s.ProtocolNotificationType(a.method)},397675,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CallHierarchyOutgoingCallsRequest=n.CallHierarchyIncomingCallsRequest=n.CallHierarchyPrepareRequest=void 0;var r,i,a,o=e.r(447677);(r=n.CallHierarchyPrepareRequest||(n.CallHierarchyPrepareRequest={})).method="textDocument/prepareCallHierarchy",r.messageDirection=o.MessageDirection.clientToServer,r.type=new o.ProtocolRequestType(r.method),(i=n.CallHierarchyIncomingCallsRequest||(n.CallHierarchyIncomingCallsRequest={})).method="callHierarchy/incomingCalls",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method),(a=n.CallHierarchyOutgoingCallsRequest||(n.CallHierarchyOutgoingCallsRequest={})).method="callHierarchy/outgoingCalls",a.messageDirection=o.MessageDirection.clientToServer,a.type=new o.ProtocolRequestType(a.method)},707923,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SemanticTokensRefreshRequest=n.SemanticTokensRangeRequest=n.SemanticTokensDeltaRequest=n.SemanticTokensRequest=n.SemanticTokensRegistrationType=n.TokenFormat=void 0;var r,i,a,o,s,l,u=e.r(447677);(n.TokenFormat||(n.TokenFormat={})).Relative="relative",(r=l=n.SemanticTokensRegistrationType||(n.SemanticTokensRegistrationType={})).method="textDocument/semanticTokens",r.type=new u.RegistrationType(r.method),(i=n.SemanticTokensRequest||(n.SemanticTokensRequest={})).method="textDocument/semanticTokens/full",i.messageDirection=u.MessageDirection.clientToServer,i.type=new u.ProtocolRequestType(i.method),i.registrationMethod=l.method,(a=n.SemanticTokensDeltaRequest||(n.SemanticTokensDeltaRequest={})).method="textDocument/semanticTokens/full/delta",a.messageDirection=u.MessageDirection.clientToServer,a.type=new u.ProtocolRequestType(a.method),a.registrationMethod=l.method,(o=n.SemanticTokensRangeRequest||(n.SemanticTokensRangeRequest={})).method="textDocument/semanticTokens/range",o.messageDirection=u.MessageDirection.clientToServer,o.type=new u.ProtocolRequestType(o.method),o.registrationMethod=l.method,(s=n.SemanticTokensRefreshRequest||(n.SemanticTokensRefreshRequest={})).method="workspace/semanticTokens/refresh",s.messageDirection=u.MessageDirection.serverToClient,s.type=new u.ProtocolRequestType0(s.method)},224336,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ShowDocumentRequest=void 0;var r,i=e.r(447677);(r=n.ShowDocumentRequest||(n.ShowDocumentRequest={})).method="window/showDocument",r.messageDirection=i.MessageDirection.serverToClient,r.type=new i.ProtocolRequestType(r.method)},526344,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LinkedEditingRangeRequest=void 0;var r,i=e.r(447677);(r=n.LinkedEditingRangeRequest||(n.LinkedEditingRangeRequest={})).method="textDocument/linkedEditingRange",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method)},180912,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.WillDeleteFilesRequest=n.DidDeleteFilesNotification=n.DidRenameFilesNotification=n.WillRenameFilesRequest=n.DidCreateFilesNotification=n.WillCreateFilesRequest=n.FileOperationPatternKind=void 0;var r,i,a,o,s,l,u,c=e.r(447677);(r=n.FileOperationPatternKind||(n.FileOperationPatternKind={})).file="file",r.folder="folder",(i=n.WillCreateFilesRequest||(n.WillCreateFilesRequest={})).method="workspace/willCreateFiles",i.messageDirection=c.MessageDirection.clientToServer,i.type=new c.ProtocolRequestType(i.method),(a=n.DidCreateFilesNotification||(n.DidCreateFilesNotification={})).method="workspace/didCreateFiles",a.messageDirection=c.MessageDirection.clientToServer,a.type=new c.ProtocolNotificationType(a.method),(o=n.WillRenameFilesRequest||(n.WillRenameFilesRequest={})).method="workspace/willRenameFiles",o.messageDirection=c.MessageDirection.clientToServer,o.type=new c.ProtocolRequestType(o.method),(s=n.DidRenameFilesNotification||(n.DidRenameFilesNotification={})).method="workspace/didRenameFiles",s.messageDirection=c.MessageDirection.clientToServer,s.type=new c.ProtocolNotificationType(s.method),(l=n.DidDeleteFilesNotification||(n.DidDeleteFilesNotification={})).method="workspace/didDeleteFiles",l.messageDirection=c.MessageDirection.clientToServer,l.type=new c.ProtocolNotificationType(l.method),(u=n.WillDeleteFilesRequest||(n.WillDeleteFilesRequest={})).method="workspace/willDeleteFiles",u.messageDirection=c.MessageDirection.clientToServer,u.type=new c.ProtocolRequestType(u.method)},913963,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MonikerRequest=n.MonikerKind=n.UniquenessLevel=void 0;var r,i,a,o=e.r(447677);(r=n.UniquenessLevel||(n.UniquenessLevel={})).document="document",r.project="project",r.group="group",r.scheme="scheme",r.global="global",(i=n.MonikerKind||(n.MonikerKind={})).$import="import",i.$export="export",i.local="local",(a=n.MonikerRequest||(n.MonikerRequest={})).method="textDocument/moniker",a.messageDirection=o.MessageDirection.clientToServer,a.type=new o.ProtocolRequestType(a.method)},882591,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TypeHierarchySubtypesRequest=n.TypeHierarchySupertypesRequest=n.TypeHierarchyPrepareRequest=void 0;var r,i,a,o=e.r(447677);(r=n.TypeHierarchyPrepareRequest||(n.TypeHierarchyPrepareRequest={})).method="textDocument/prepareTypeHierarchy",r.messageDirection=o.MessageDirection.clientToServer,r.type=new o.ProtocolRequestType(r.method),(i=n.TypeHierarchySupertypesRequest||(n.TypeHierarchySupertypesRequest={})).method="typeHierarchy/supertypes",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method),(a=n.TypeHierarchySubtypesRequest||(n.TypeHierarchySubtypesRequest={})).method="typeHierarchy/subtypes",a.messageDirection=o.MessageDirection.clientToServer,a.type=new o.ProtocolRequestType(a.method)},562440,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.InlineValueRefreshRequest=n.InlineValueRequest=void 0;var r,i,a=e.r(447677);(r=n.InlineValueRequest||(n.InlineValueRequest={})).method="textDocument/inlineValue",r.messageDirection=a.MessageDirection.clientToServer,r.type=new a.ProtocolRequestType(r.method),(i=n.InlineValueRefreshRequest||(n.InlineValueRefreshRequest={})).method="workspace/inlineValue/refresh",i.messageDirection=a.MessageDirection.serverToClient,i.type=new a.ProtocolRequestType0(i.method)},816872,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.InlayHintRefreshRequest=n.InlayHintResolveRequest=n.InlayHintRequest=void 0;var r,i,a,o=e.r(447677);(r=n.InlayHintRequest||(n.InlayHintRequest={})).method="textDocument/inlayHint",r.messageDirection=o.MessageDirection.clientToServer,r.type=new o.ProtocolRequestType(r.method),(i=n.InlayHintResolveRequest||(n.InlayHintResolveRequest={})).method="inlayHint/resolve",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method),(a=n.InlayHintRefreshRequest||(n.InlayHintRefreshRequest={})).method="workspace/inlayHint/refresh",a.messageDirection=o.MessageDirection.serverToClient,a.type=new o.ProtocolRequestType0(a.method)},482196,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DiagnosticRefreshRequest=n.WorkspaceDiagnosticRequest=n.DocumentDiagnosticRequest=n.DocumentDiagnosticReportKind=n.DiagnosticServerCancellationData=void 0;var r,i,a,o,s=e.r(134892),l=e.r(630794),u=e.r(447677);(n.DiagnosticServerCancellationData||(n.DiagnosticServerCancellationData={})).is=function(e){return e&&l.boolean(e.retriggerRequest)},(r=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={})).Full="full",r.Unchanged="unchanged",(i=n.DocumentDiagnosticRequest||(n.DocumentDiagnosticRequest={})).method="textDocument/diagnostic",i.messageDirection=u.MessageDirection.clientToServer,i.type=new u.ProtocolRequestType(i.method),i.partialResult=new s.ProgressType,(a=n.WorkspaceDiagnosticRequest||(n.WorkspaceDiagnosticRequest={})).method="workspace/diagnostic",a.messageDirection=u.MessageDirection.clientToServer,a.type=new u.ProtocolRequestType(a.method),a.partialResult=new s.ProgressType,(o=n.DiagnosticRefreshRequest||(n.DiagnosticRefreshRequest={})).method="workspace/diagnostic/refresh",o.messageDirection=u.MessageDirection.serverToClient,o.type=new u.ProtocolRequestType0(o.method)},381611,(e,t,n)=>{"use strict";var r,i,a,o,s,l,u,c,d,f,p,h,m,g,x=e.r(365738);Object.defineProperty(n,"__esModule",{value:!0}),n.DidCloseNotebookDocumentNotification=n.DidSaveNotebookDocumentNotification=n.DidChangeNotebookDocumentNotification=n.NotebookCellArrayChange=n.DidOpenNotebookDocumentNotification=n.NotebookDocumentSyncRegistrationType=n.NotebookDocument=n.NotebookCell=n.ExecutionSummary=n.NotebookCellKind=void 0;var y=e.r(333859),b=e.r(630794),w=e.r(447677);(r=p=n.NotebookCellKind||(n.NotebookCellKind={})).Markup=1,r.Code=2,r.is=function(e){return 1===e||2===e},(i=h=n.ExecutionSummary||(n.ExecutionSummary={})).create=function(e,t){var n={executionOrder:e};return(!0===t||!1===t)&&(n.success=t),n},i.is=function(e){return b.objectLiteral(e)&&y.uinteger.is(e.executionOrder)&&(void 0===e.success||b.boolean(e.success))},i.equals=function(e,t){return e===t||null!=e&&null!=t&&e.executionOrder===t.executionOrder&&e.success===t.success},(a=m=n.NotebookCell||(n.NotebookCell={})).create=function(e,t){return{kind:e,document:t}},a.is=function(e){return b.objectLiteral(e)&&p.is(e.kind)&&y.DocumentUri.is(e.document)&&(void 0===e.metadata||b.objectLiteral(e.metadata))},a.diff=function(e,t){var n=new Set;return e.document!==t.document&&n.add("document"),e.kind!==t.kind&&n.add("kind"),e.executionSummary!==t.executionSummary&&n.add("executionSummary"),(void 0!==e.metadata||void 0!==t.metadata)&&!function e(t,n){if(t===n)return!0;if(null==t||null==n||(void 0===t?"undefined":x._(t))!==(void 0===n?"undefined":x._(n))||(void 0===t?"undefined":x._(t))!=="object")return!1;var r=Array.isArray(t),i=Array.isArray(n);if(r!==i)return!1;if(r&&i){if(t.length!==n.length)return!1;for(var a=0;a<t.length;a++)if(!e(t[a],n[a]))return!1}if(b.objectLiteral(t)&&b.objectLiteral(n)){var o=Object.keys(t),s=Object.keys(n);if(o.length!==s.length||(o.sort(),s.sort(),!e(o,s)))return!1;for(var l=0;l<o.length;l++){var u=o[l];if(!e(t[u],n[u]))return!1}}return!0}(e.metadata,t.metadata)&&n.add("metadata"),void 0===e.executionSummary&&void 0===t.executionSummary||h.equals(e.executionSummary,t.executionSummary)||n.add("executionSummary"),n},(o=n.NotebookDocument||(n.NotebookDocument={})).create=function(e,t,n,r){return{uri:e,notebookType:t,version:n,cells:r}},o.is=function(e){return b.objectLiteral(e)&&b.string(e.uri)&&y.integer.is(e.version)&&b.typedArray(e.cells,m.is)},(s=g=n.NotebookDocumentSyncRegistrationType||(n.NotebookDocumentSyncRegistrationType={})).method="notebookDocument/sync",s.messageDirection=w.MessageDirection.clientToServer,s.type=new w.RegistrationType(s.method),(l=n.DidOpenNotebookDocumentNotification||(n.DidOpenNotebookDocumentNotification={})).method="notebookDocument/didOpen",l.messageDirection=w.MessageDirection.clientToServer,l.type=new w.ProtocolNotificationType(l.method),l.registrationMethod=g.method,(u=n.NotebookCellArrayChange||(n.NotebookCellArrayChange={})).is=function(e){return b.objectLiteral(e)&&y.uinteger.is(e.start)&&y.uinteger.is(e.deleteCount)&&(void 0===e.cells||b.typedArray(e.cells,m.is))},u.create=function(e,t,n){var r={start:e,deleteCount:t};return void 0!==n&&(r.cells=n),r},(c=n.DidChangeNotebookDocumentNotification||(n.DidChangeNotebookDocumentNotification={})).method="notebookDocument/didChange",c.messageDirection=w.MessageDirection.clientToServer,c.type=new w.ProtocolNotificationType(c.method),c.registrationMethod=g.method,(d=n.DidSaveNotebookDocumentNotification||(n.DidSaveNotebookDocumentNotification={})).method="notebookDocument/didSave",d.messageDirection=w.MessageDirection.clientToServer,d.type=new w.ProtocolNotificationType(d.method),d.registrationMethod=g.method,(f=n.DidCloseNotebookDocumentNotification||(n.DidCloseNotebookDocumentNotification={})).method="notebookDocument/didClose",f.messageDirection=w.MessageDirection.clientToServer,f.type=new w.ProtocolNotificationType(f.method),f.registrationMethod=g.method},901241,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.WorkspaceSymbolRequest=n.CodeActionResolveRequest=n.CodeActionRequest=n.DocumentSymbolRequest=n.DocumentHighlightRequest=n.ReferencesRequest=n.DefinitionRequest=n.SignatureHelpRequest=n.SignatureHelpTriggerKind=n.HoverRequest=n.CompletionResolveRequest=n.CompletionRequest=n.CompletionTriggerKind=n.PublishDiagnosticsNotification=n.WatchKind=n.RelativePattern=n.FileChangeType=n.DidChangeWatchedFilesNotification=n.WillSaveTextDocumentWaitUntilRequest=n.WillSaveTextDocumentNotification=n.TextDocumentSaveReason=n.DidSaveTextDocumentNotification=n.DidCloseTextDocumentNotification=n.DidChangeTextDocumentNotification=n.TextDocumentContentChangeEvent=n.DidOpenTextDocumentNotification=n.TextDocumentSyncKind=n.TelemetryEventNotification=n.LogMessageNotification=n.ShowMessageRequest=n.ShowMessageNotification=n.MessageType=n.DidChangeConfigurationNotification=n.ExitNotification=n.ShutdownRequest=n.InitializedNotification=n.InitializeErrorCodes=n.InitializeRequest=n.WorkDoneProgressOptions=n.TextDocumentRegistrationOptions=n.StaticRegistrationOptions=n.PositionEncodingKind=n.FailureHandlingKind=n.ResourceOperationKind=n.UnregistrationRequest=n.RegistrationRequest=n.DocumentSelector=n.NotebookCellTextDocumentFilter=n.NotebookDocumentFilter=n.TextDocumentFilter=void 0,n.TypeHierarchySubtypesRequest=n.TypeHierarchyPrepareRequest=n.MonikerRequest=n.MonikerKind=n.UniquenessLevel=n.WillDeleteFilesRequest=n.DidDeleteFilesNotification=n.WillRenameFilesRequest=n.DidRenameFilesNotification=n.WillCreateFilesRequest=n.DidCreateFilesNotification=n.FileOperationPatternKind=n.LinkedEditingRangeRequest=n.ShowDocumentRequest=n.SemanticTokensRegistrationType=n.SemanticTokensRefreshRequest=n.SemanticTokensRangeRequest=n.SemanticTokensDeltaRequest=n.SemanticTokensRequest=n.TokenFormat=n.CallHierarchyPrepareRequest=n.CallHierarchyOutgoingCallsRequest=n.CallHierarchyIncomingCallsRequest=n.WorkDoneProgressCancelNotification=n.WorkDoneProgressCreateRequest=n.WorkDoneProgress=n.SelectionRangeRequest=n.DeclarationRequest=n.FoldingRangeRequest=n.ColorPresentationRequest=n.DocumentColorRequest=n.ConfigurationRequest=n.DidChangeWorkspaceFoldersNotification=n.WorkspaceFoldersRequest=n.TypeDefinitionRequest=n.ImplementationRequest=n.ApplyWorkspaceEditRequest=n.ExecuteCommandRequest=n.PrepareRenameRequest=n.RenameRequest=n.PrepareSupportDefaultBehavior=n.DocumentOnTypeFormattingRequest=n.DocumentRangeFormattingRequest=n.DocumentFormattingRequest=n.DocumentLinkResolveRequest=n.DocumentLinkRequest=n.CodeLensRefreshRequest=n.CodeLensResolveRequest=n.CodeLensRequest=n.WorkspaceSymbolResolveRequest=void 0,n.DidCloseNotebookDocumentNotification=n.DidSaveNotebookDocumentNotification=n.DidChangeNotebookDocumentNotification=n.NotebookCellArrayChange=n.DidOpenNotebookDocumentNotification=n.NotebookDocumentSyncRegistrationType=n.NotebookDocument=n.NotebookCell=n.ExecutionSummary=n.NotebookCellKind=n.DiagnosticRefreshRequest=n.WorkspaceDiagnosticRequest=n.DocumentDiagnosticRequest=n.DocumentDiagnosticReportKind=n.DiagnosticServerCancellationData=n.InlayHintRefreshRequest=n.InlayHintResolveRequest=n.InlayHintRequest=n.InlineValueRefreshRequest=n.InlineValueRequest=n.TypeHierarchySupertypesRequest=void 0;var r,i,a,o,s,l,u,c,d,f,p,h,m,g,x,y,b,w,_,k,S,C,j,T,E,R,I,A,P,D,O,N,M,L,B,V,F,U,G,$,H,z,W,q,K,Y,Q,X,Z,J,ee,et,en,er,ei,ea,eo,es,el,eu=e.r(447677),ec=e.r(333859),ed=e.r(630794),ef=e.r(54411);Object.defineProperty(n,"ImplementationRequest",{enumerable:!0,get:function(){return ef.ImplementationRequest}});var ep=e.r(988115);Object.defineProperty(n,"TypeDefinitionRequest",{enumerable:!0,get:function(){return ep.TypeDefinitionRequest}});var eh=e.r(342835);Object.defineProperty(n,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return eh.WorkspaceFoldersRequest}}),Object.defineProperty(n,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return eh.DidChangeWorkspaceFoldersNotification}});var em=e.r(707767);Object.defineProperty(n,"ConfigurationRequest",{enumerable:!0,get:function(){return em.ConfigurationRequest}});var eg=e.r(364024);Object.defineProperty(n,"DocumentColorRequest",{enumerable:!0,get:function(){return eg.DocumentColorRequest}}),Object.defineProperty(n,"ColorPresentationRequest",{enumerable:!0,get:function(){return eg.ColorPresentationRequest}});var ev=e.r(710112);Object.defineProperty(n,"FoldingRangeRequest",{enumerable:!0,get:function(){return ev.FoldingRangeRequest}});var ex=e.r(840465);Object.defineProperty(n,"DeclarationRequest",{enumerable:!0,get:function(){return ex.DeclarationRequest}});var ey=e.r(492665);Object.defineProperty(n,"SelectionRangeRequest",{enumerable:!0,get:function(){return ey.SelectionRangeRequest}});var eb=e.r(374513);Object.defineProperty(n,"WorkDoneProgress",{enumerable:!0,get:function(){return eb.WorkDoneProgress}}),Object.defineProperty(n,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return eb.WorkDoneProgressCreateRequest}}),Object.defineProperty(n,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return eb.WorkDoneProgressCancelNotification}});var ew=e.r(397675);Object.defineProperty(n,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return ew.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(n,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return ew.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(n,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return ew.CallHierarchyPrepareRequest}});var e_=e.r(707923);Object.defineProperty(n,"TokenFormat",{enumerable:!0,get:function(){return e_.TokenFormat}}),Object.defineProperty(n,"SemanticTokensRequest",{enumerable:!0,get:function(){return e_.SemanticTokensRequest}}),Object.defineProperty(n,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return e_.SemanticTokensDeltaRequest}}),Object.defineProperty(n,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return e_.SemanticTokensRangeRequest}}),Object.defineProperty(n,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return e_.SemanticTokensRefreshRequest}}),Object.defineProperty(n,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return e_.SemanticTokensRegistrationType}});var ek=e.r(224336);Object.defineProperty(n,"ShowDocumentRequest",{enumerable:!0,get:function(){return ek.ShowDocumentRequest}});var eS=e.r(526344);Object.defineProperty(n,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return eS.LinkedEditingRangeRequest}});var eC=e.r(180912);Object.defineProperty(n,"FileOperationPatternKind",{enumerable:!0,get:function(){return eC.FileOperationPatternKind}}),Object.defineProperty(n,"DidCreateFilesNotification",{enumerable:!0,get:function(){return eC.DidCreateFilesNotification}}),Object.defineProperty(n,"WillCreateFilesRequest",{enumerable:!0,get:function(){return eC.WillCreateFilesRequest}}),Object.defineProperty(n,"DidRenameFilesNotification",{enumerable:!0,get:function(){return eC.DidRenameFilesNotification}}),Object.defineProperty(n,"WillRenameFilesRequest",{enumerable:!0,get:function(){return eC.WillRenameFilesRequest}}),Object.defineProperty(n,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return eC.DidDeleteFilesNotification}}),Object.defineProperty(n,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return eC.WillDeleteFilesRequest}});var ej=e.r(913963);Object.defineProperty(n,"UniquenessLevel",{enumerable:!0,get:function(){return ej.UniquenessLevel}}),Object.defineProperty(n,"MonikerKind",{enumerable:!0,get:function(){return ej.MonikerKind}}),Object.defineProperty(n,"MonikerRequest",{enumerable:!0,get:function(){return ej.MonikerRequest}});var eT=e.r(882591);Object.defineProperty(n,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return eT.TypeHierarchyPrepareRequest}}),Object.defineProperty(n,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return eT.TypeHierarchySubtypesRequest}}),Object.defineProperty(n,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return eT.TypeHierarchySupertypesRequest}});var eE=e.r(562440);Object.defineProperty(n,"InlineValueRequest",{enumerable:!0,get:function(){return eE.InlineValueRequest}}),Object.defineProperty(n,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return eE.InlineValueRefreshRequest}});var eR=e.r(816872);Object.defineProperty(n,"InlayHintRequest",{enumerable:!0,get:function(){return eR.InlayHintRequest}}),Object.defineProperty(n,"InlayHintResolveRequest",{enumerable:!0,get:function(){return eR.InlayHintResolveRequest}}),Object.defineProperty(n,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return eR.InlayHintRefreshRequest}});var eI=e.r(482196);Object.defineProperty(n,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return eI.DiagnosticServerCancellationData}}),Object.defineProperty(n,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return eI.DocumentDiagnosticReportKind}}),Object.defineProperty(n,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return eI.DocumentDiagnosticRequest}}),Object.defineProperty(n,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return eI.WorkspaceDiagnosticRequest}}),Object.defineProperty(n,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return eI.DiagnosticRefreshRequest}});var eA=e.r(381611);Object.defineProperty(n,"NotebookCellKind",{enumerable:!0,get:function(){return eA.NotebookCellKind}}),Object.defineProperty(n,"ExecutionSummary",{enumerable:!0,get:function(){return eA.ExecutionSummary}}),Object.defineProperty(n,"NotebookCell",{enumerable:!0,get:function(){return eA.NotebookCell}}),Object.defineProperty(n,"NotebookDocument",{enumerable:!0,get:function(){return eA.NotebookDocument}}),Object.defineProperty(n,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return eA.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(n,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return eA.DidOpenNotebookDocumentNotification}}),Object.defineProperty(n,"NotebookCellArrayChange",{enumerable:!0,get:function(){return eA.NotebookCellArrayChange}}),Object.defineProperty(n,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return eA.DidChangeNotebookDocumentNotification}}),Object.defineProperty(n,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return eA.DidSaveNotebookDocumentNotification}}),Object.defineProperty(n,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return eA.DidCloseNotebookDocumentNotification}}),(ea=n.TextDocumentFilter||(n.TextDocumentFilter={})).is=function(e){return ed.string(e.language)||ed.string(e.scheme)||ed.string(e.pattern)},(eo=n.NotebookDocumentFilter||(n.NotebookDocumentFilter={})).is=function(e){return ed.objectLiteral(e)&&(ed.string(e.notebookType)||ed.string(e.scheme)||ed.string(e.pattern))},(es=n.NotebookCellTextDocumentFilter||(n.NotebookCellTextDocumentFilter={})).is=function(e){return ed.objectLiteral(e)&&(ed.string(e.notebook)||eo.is(e.notebook))&&(void 0===e.language||ed.string(e.language))},(el=n.DocumentSelector||(n.DocumentSelector={})).is=function(e){if(!Array.isArray(e))return!1;var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(!ed.string(o)&&!ea.is(o)&&!es.is(o))return!1}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!0},(r=n.RegistrationRequest||(n.RegistrationRequest={})).method="client/registerCapability",r.messageDirection=eu.MessageDirection.serverToClient,r.type=new eu.ProtocolRequestType(r.method),(i=n.UnregistrationRequest||(n.UnregistrationRequest={})).method="client/unregisterCapability",i.messageDirection=eu.MessageDirection.serverToClient,i.type=new eu.ProtocolRequestType(i.method),(a=n.ResourceOperationKind||(n.ResourceOperationKind={})).Create="create",a.Rename="rename",a.Delete="delete",(o=n.FailureHandlingKind||(n.FailureHandlingKind={})).Abort="abort",o.Transactional="transactional",o.TextOnlyTransactional="textOnlyTransactional",o.Undo="undo",(s=n.PositionEncodingKind||(n.PositionEncodingKind={})).UTF8="utf-8",s.UTF16="utf-16",s.UTF32="utf-32",(n.StaticRegistrationOptions||(n.StaticRegistrationOptions={})).hasId=function(e){return e&&ed.string(e.id)&&e.id.length>0},(n.TextDocumentRegistrationOptions||(n.TextDocumentRegistrationOptions={})).is=function(e){return e&&(null===e.documentSelector||el.is(e.documentSelector))},(l=n.WorkDoneProgressOptions||(n.WorkDoneProgressOptions={})).is=function(e){return ed.objectLiteral(e)&&(void 0===e.workDoneProgress||ed.boolean(e.workDoneProgress))},l.hasWorkDoneProgress=function(e){return e&&ed.boolean(e.workDoneProgress)},(u=n.InitializeRequest||(n.InitializeRequest={})).method="initialize",u.messageDirection=eu.MessageDirection.clientToServer,u.type=new eu.ProtocolRequestType(u.method),(n.InitializeErrorCodes||(n.InitializeErrorCodes={})).unknownProtocolVersion=1,(c=n.InitializedNotification||(n.InitializedNotification={})).method="initialized",c.messageDirection=eu.MessageDirection.clientToServer,c.type=new eu.ProtocolNotificationType(c.method),(d=n.ShutdownRequest||(n.ShutdownRequest={})).method="shutdown",d.messageDirection=eu.MessageDirection.clientToServer,d.type=new eu.ProtocolRequestType0(d.method),(f=n.ExitNotification||(n.ExitNotification={})).method="exit",f.messageDirection=eu.MessageDirection.clientToServer,f.type=new eu.ProtocolNotificationType0(f.method),(p=n.DidChangeConfigurationNotification||(n.DidChangeConfigurationNotification={})).method="workspace/didChangeConfiguration",p.messageDirection=eu.MessageDirection.clientToServer,p.type=new eu.ProtocolNotificationType(p.method),(h=n.MessageType||(n.MessageType={})).Error=1,h.Warning=2,h.Info=3,h.Log=4,(m=n.ShowMessageNotification||(n.ShowMessageNotification={})).method="window/showMessage",m.messageDirection=eu.MessageDirection.serverToClient,m.type=new eu.ProtocolNotificationType(m.method),(g=n.ShowMessageRequest||(n.ShowMessageRequest={})).method="window/showMessageRequest",g.messageDirection=eu.MessageDirection.serverToClient,g.type=new eu.ProtocolRequestType(g.method),(x=n.LogMessageNotification||(n.LogMessageNotification={})).method="window/logMessage",x.messageDirection=eu.MessageDirection.serverToClient,x.type=new eu.ProtocolNotificationType(x.method),(y=n.TelemetryEventNotification||(n.TelemetryEventNotification={})).method="telemetry/event",y.messageDirection=eu.MessageDirection.serverToClient,y.type=new eu.ProtocolNotificationType(y.method),(b=n.TextDocumentSyncKind||(n.TextDocumentSyncKind={})).None=0,b.Full=1,b.Incremental=2,(w=n.DidOpenTextDocumentNotification||(n.DidOpenTextDocumentNotification={})).method="textDocument/didOpen",w.messageDirection=eu.MessageDirection.clientToServer,w.type=new eu.ProtocolNotificationType(w.method),(_=n.TextDocumentContentChangeEvent||(n.TextDocumentContentChangeEvent={})).isIncremental=function(e){return null!=e&&"string"==typeof e.text&&void 0!==e.range&&(void 0===e.rangeLength||"number"==typeof e.rangeLength)},_.isFull=function(e){return null!=e&&"string"==typeof e.text&&void 0===e.range&&void 0===e.rangeLength},(k=n.DidChangeTextDocumentNotification||(n.DidChangeTextDocumentNotification={})).method="textDocument/didChange",k.messageDirection=eu.MessageDirection.clientToServer,k.type=new eu.ProtocolNotificationType(k.method),(S=n.DidCloseTextDocumentNotification||(n.DidCloseTextDocumentNotification={})).method="textDocument/didClose",S.messageDirection=eu.MessageDirection.clientToServer,S.type=new eu.ProtocolNotificationType(S.method),(C=n.DidSaveTextDocumentNotification||(n.DidSaveTextDocumentNotification={})).method="textDocument/didSave",C.messageDirection=eu.MessageDirection.clientToServer,C.type=new eu.ProtocolNotificationType(C.method),(j=n.TextDocumentSaveReason||(n.TextDocumentSaveReason={})).Manual=1,j.AfterDelay=2,j.FocusOut=3,(T=n.WillSaveTextDocumentNotification||(n.WillSaveTextDocumentNotification={})).method="textDocument/willSave",T.messageDirection=eu.MessageDirection.clientToServer,T.type=new eu.ProtocolNotificationType(T.method),(E=n.WillSaveTextDocumentWaitUntilRequest||(n.WillSaveTextDocumentWaitUntilRequest={})).method="textDocument/willSaveWaitUntil",E.messageDirection=eu.MessageDirection.clientToServer,E.type=new eu.ProtocolRequestType(E.method),(R=n.DidChangeWatchedFilesNotification||(n.DidChangeWatchedFilesNotification={})).method="workspace/didChangeWatchedFiles",R.messageDirection=eu.MessageDirection.clientToServer,R.type=new eu.ProtocolNotificationType(R.method),(I=n.FileChangeType||(n.FileChangeType={})).Created=1,I.Changed=2,I.Deleted=3,(n.RelativePattern||(n.RelativePattern={})).is=function(e){return ed.objectLiteral(e)&&(ec.URI.is(e.baseUri)||ec.WorkspaceFolder.is(e.baseUri))&&ed.string(e.pattern)},(A=n.WatchKind||(n.WatchKind={})).Create=1,A.Change=2,A.Delete=4,(P=n.PublishDiagnosticsNotification||(n.PublishDiagnosticsNotification={})).method="textDocument/publishDiagnostics",P.messageDirection=eu.MessageDirection.serverToClient,P.type=new eu.ProtocolNotificationType(P.method),(D=n.CompletionTriggerKind||(n.CompletionTriggerKind={})).Invoked=1,D.TriggerCharacter=2,D.TriggerForIncompleteCompletions=3,(O=n.CompletionRequest||(n.CompletionRequest={})).method="textDocument/completion",O.messageDirection=eu.MessageDirection.clientToServer,O.type=new eu.ProtocolRequestType(O.method),(N=n.CompletionResolveRequest||(n.CompletionResolveRequest={})).method="completionItem/resolve",N.messageDirection=eu.MessageDirection.clientToServer,N.type=new eu.ProtocolRequestType(N.method),(M=n.HoverRequest||(n.HoverRequest={})).method="textDocument/hover",M.messageDirection=eu.MessageDirection.clientToServer,M.type=new eu.ProtocolRequestType(M.method),(L=n.SignatureHelpTriggerKind||(n.SignatureHelpTriggerKind={})).Invoked=1,L.TriggerCharacter=2,L.ContentChange=3,(B=n.SignatureHelpRequest||(n.SignatureHelpRequest={})).method="textDocument/signatureHelp",B.messageDirection=eu.MessageDirection.clientToServer,B.type=new eu.ProtocolRequestType(B.method),(V=n.DefinitionRequest||(n.DefinitionRequest={})).method="textDocument/definition",V.messageDirection=eu.MessageDirection.clientToServer,V.type=new eu.ProtocolRequestType(V.method),(F=n.ReferencesRequest||(n.ReferencesRequest={})).method="textDocument/references",F.messageDirection=eu.MessageDirection.clientToServer,F.type=new eu.ProtocolRequestType(F.method),(U=n.DocumentHighlightRequest||(n.DocumentHighlightRequest={})).method="textDocument/documentHighlight",U.messageDirection=eu.MessageDirection.clientToServer,U.type=new eu.ProtocolRequestType(U.method),(G=n.DocumentSymbolRequest||(n.DocumentSymbolRequest={})).method="textDocument/documentSymbol",G.messageDirection=eu.MessageDirection.clientToServer,G.type=new eu.ProtocolRequestType(G.method),($=n.CodeActionRequest||(n.CodeActionRequest={})).method="textDocument/codeAction",$.messageDirection=eu.MessageDirection.clientToServer,$.type=new eu.ProtocolRequestType($.method),(H=n.CodeActionResolveRequest||(n.CodeActionResolveRequest={})).method="codeAction/resolve",H.messageDirection=eu.MessageDirection.clientToServer,H.type=new eu.ProtocolRequestType(H.method),(z=n.WorkspaceSymbolRequest||(n.WorkspaceSymbolRequest={})).method="workspace/symbol",z.messageDirection=eu.MessageDirection.clientToServer,z.type=new eu.ProtocolRequestType(z.method),(W=n.WorkspaceSymbolResolveRequest||(n.WorkspaceSymbolResolveRequest={})).method="workspaceSymbol/resolve",W.messageDirection=eu.MessageDirection.clientToServer,W.type=new eu.ProtocolRequestType(W.method),(q=n.CodeLensRequest||(n.CodeLensRequest={})).method="textDocument/codeLens",q.messageDirection=eu.MessageDirection.clientToServer,q.type=new eu.ProtocolRequestType(q.method),(K=n.CodeLensResolveRequest||(n.CodeLensResolveRequest={})).method="codeLens/resolve",K.messageDirection=eu.MessageDirection.clientToServer,K.type=new eu.ProtocolRequestType(K.method),(Y=n.CodeLensRefreshRequest||(n.CodeLensRefreshRequest={})).method="workspace/codeLens/refresh",Y.messageDirection=eu.MessageDirection.serverToClient,Y.type=new eu.ProtocolRequestType0(Y.method),(Q=n.DocumentLinkRequest||(n.DocumentLinkRequest={})).method="textDocument/documentLink",Q.messageDirection=eu.MessageDirection.clientToServer,Q.type=new eu.ProtocolRequestType(Q.method),(X=n.DocumentLinkResolveRequest||(n.DocumentLinkResolveRequest={})).method="documentLink/resolve",X.messageDirection=eu.MessageDirection.clientToServer,X.type=new eu.ProtocolRequestType(X.method),(Z=n.DocumentFormattingRequest||(n.DocumentFormattingRequest={})).method="textDocument/formatting",Z.messageDirection=eu.MessageDirection.clientToServer,Z.type=new eu.ProtocolRequestType(Z.method),(J=n.DocumentRangeFormattingRequest||(n.DocumentRangeFormattingRequest={})).method="textDocument/rangeFormatting",J.messageDirection=eu.MessageDirection.clientToServer,J.type=new eu.ProtocolRequestType(J.method),(ee=n.DocumentOnTypeFormattingRequest||(n.DocumentOnTypeFormattingRequest={})).method="textDocument/onTypeFormatting",ee.messageDirection=eu.MessageDirection.clientToServer,ee.type=new eu.ProtocolRequestType(ee.method),(n.PrepareSupportDefaultBehavior||(n.PrepareSupportDefaultBehavior={})).Identifier=1,(et=n.RenameRequest||(n.RenameRequest={})).method="textDocument/rename",et.messageDirection=eu.MessageDirection.clientToServer,et.type=new eu.ProtocolRequestType(et.method),(en=n.PrepareRenameRequest||(n.PrepareRenameRequest={})).method="textDocument/prepareRename",en.messageDirection=eu.MessageDirection.clientToServer,en.type=new eu.ProtocolRequestType(en.method),(er=n.ExecuteCommandRequest||(n.ExecuteCommandRequest={})).method="workspace/executeCommand",er.messageDirection=eu.MessageDirection.clientToServer,er.type=new eu.ProtocolRequestType(er.method),(ei=n.ApplyWorkspaceEditRequest||(n.ApplyWorkspaceEditRequest={})).method="workspace/applyEdit",ei.messageDirection=eu.MessageDirection.serverToClient,ei.type=new eu.ProtocolRequestType("workspace/applyEdit")},67354,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createProtocolConnection=void 0;var r=e.r(134892);n.createProtocolConnection=function(e,t,n,i){return r.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,r.createMessageConnection)(e,t,n,i)}},935416,(e,t,n)=>{"use strict";var r,i=e.e&&e.e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=e.e&&e.e.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.LSPErrorCodes=n.createProtocolConnection=void 0,a(e.r(134892),n),a(e.r(333859),n),a(e.r(447677),n),a(e.r(901241),n);var o=e.r(67354);Object.defineProperty(n,"createProtocolConnection",{enumerable:!0,get:function(){return o.createProtocolConnection}}),(r=n.LSPErrorCodes||(n.LSPErrorCodes={})).lspReservedErrorRangeStart=-32899,r.RequestFailed=-32803,r.ServerCancelled=-32802,r.ContentModified=-32801,r.RequestCancelled=-32800,r.lspReservedErrorRangeEnd=-32800},822658,(e,t,n)=>{"use strict";var r=e.e&&e.e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=e.e&&e.e.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.createProtocolConnection=void 0;var a=e.r(829130);i(e.r(829130),n),i(e.r(935416),n),n.createProtocolConnection=function(e,t,n,r){return(0,a.createMessageConnection)(e,t,n,r)}},848955,738324,486161,403781,44813,935997,275072,518202,e=>{"use strict";var t,n,r,i,a,o,s,l,u=e.i(389959),c=e.i(753950),d=e.i(179302);e.i(508987);var f=e.i(457103),p=e.i(242131),h=e.i(182116),m=e.i(904851),g=e.i(90659),x=e.i(721281),y=e.i(276385),b=e.i(992785),w=e.i(240849),_=e.i(310761),k=e.i(468345),S=e.i(928353),C=e.i(700170),j=e.i(709485),T=e.i(441329),E=e.i(858248),R=e.i(933101),I=e.i(256059);e.i(32109);var A=e.i(384401),P=e.i(446530),D=e.i(613355),O=e.i(625484),N=(0,P.cssRecord)({container:[{marginRight:16},D.rcss.height("100%")],hintButton:[D.rcss.height("100%")]}),M=new S.CodeMirrorComponent(function(e){var t=e.onGenerateCode,n=e.height,r=(0,T.useIsInMobileWorkspace)(),i=(0,A.useKeyCombo)(R.generateOrModifyWithAICommand.id),a=Math.round(.6*n);return(0,y.jsx)(O.View,{css:N.container,children:(0,y.jsx)(I.HintButton,{keyCombo:r?void 0:i,text:"Generate",fontSize:a,css:N.hintButton,onClick:function(){(0,E.track)(j.events.GHOSTWRITER_CHAT_INLINE_HINT_CLICKED,{action:"generate"}),t()}})})}),L=d.EditorView.theme({".cm-ghostwriter-hint-layer":{width:"100%"}}),B=function(e){var t=e.selection.main.head;return e.doc.lineAt(t)},V=new C.ReactCompartment(function(e){return c.StateField.define({create:function(e){return B(e)},compare:b.default,update:function(e,t){return B(t.state)},provide:function(t){return[L,c.Prec.high((0,d.layer)({above:!0,class:"cm-ghostwriter-hint-layer",update:function(e){return(0,f.hasChanged)(e,t,k.InlinePocketState,w.CompleteCodeSuggestion)},markers:function(n){var r=n.state.field(t,!1);if(!r||!n.state.selection.main.empty)return[];var i=n.state.field(k.InlinePocketState,!1),a=0===n.state.doc.length,o=(0,_.hasPresentedSuggestion)(n.state);if(r.length>0||i||o||a)return[];var s=n.dom.querySelector(".cm-minimap-gutter"),l=(null==s?void 0:s.clientWidth)||0,u=r.to,c=n.lineBlockAt(u),d=c.top,f=c.height;return[new F({top:d+n.documentPadding.top,height:f,right:l,pocketOpen:null!==i,activeEditor:n.hasFocus,onGenerateCode:e})]}}))]}})}),F=function(){function e(t){(0,m._)(this,e),(0,x._)(this,"options",void 0),this.options=t}return(0,g._)(e,[{key:"position",value:function(e){e.style.top=this.options.top+"px",e.style.height=this.options.height+"px",e.style.right=this.options.right+"px",e.style.paddingRight=Math.round(.2*this.options.height)+"px"}},{key:"draw",value:function(){var e=M.create({onGenerateCode:this.options.onGenerateCode,height:this.options.height});return e.className="cm-ghostwriter-hint-marker",this.options.activeEditor||(e.style.visibility="hidden"),this.position(e),e}},{key:"eq",value:function(e){return this.options.top===e.options.top&&this.options.pocketOpen===e.options.pocketOpen&&this.options.activeEditor===e.options.activeEditor}}]),e}(),U=e.i(399119),G=e.i(445789),$=e.i(291607),H=e.i(743347),z=e.i(602686),W=e.i(480028),q=e.i(960178);function K(e){var t=e.textVariant;return(0,y.jsxs)(q.Text,{variant:t,children:["AI Chat is currently unavailable. For more information, visit"," ",(0,y.jsx)("a",{href:"https://status.replit.com",target:"_blank",children:"our status page."})]})}e.i(211397);var Y=e.i(136540),Q=(0,P.cssRecord)({root:[D.rcss.border({color:W.tokens.outlineDimmest}),D.rcss.p(8),D.rcss.borderRadius(4)]}),X=new S.CodeMirrorComponent(function(e){var t=e.onClose,n=e.requestMeasure;return(0,y.jsx)($.PocketBoundary,{requestMeasure:n,type:"ghostwriterKillswitch",children:(0,y.jsxs)(O.View,{css:Q.root,row:!0,gap:8,children:[(0,y.jsx)(O.View,{grow:!0,shrink:!0,children:(0,y.jsx)(K,{textVariant:"text"})}),(0,y.jsx)(Y.IconButton,{alt:"Close",onClick:t,type:"button",children:(0,y.jsx)(z.default,{})})]})})}),Z=function(e){function t(e){var n,r=e.codeReference;return(0,m._)(this,t),n=(0,U._)(this,t),(0,x._)(n,"codeReference",void 0),n.codeReference=r,n}return(0,G._)(t,e),(0,g._)(t,[{key:"toDOM",value:function(e){var t=this;return X.create({onClose:function(){return(0,H.closePocket)(e,t.codeReference)},requestMeasure:function(){return e.requestMeasure()}})}}]),t}(d.WidgetType),J=e.i(736097),ee=W.tokens.blurpleDimmest,et=W.tokens.accentPrimaryDimmest,en=d.EditorView.theme({".cm-pocket-highlight":{backgroundColor:W.tokens.blurpleDimmest,opacity:.2},"@keyframes moveGradient":{"0%":{backgroundPositionX:"100%"},"100%":{backgroundPositionX:"0%"}},".cm-pocket-highlight-loading":{background:"linear-gradient(90deg, ".concat(W.tokens.blurpleDimmest,", ").concat(et,", ").concat(ee,", ").concat(et,")"),backgroundSize:"300% 100%",backgroundPositionX:"0%",animation:"moveGradient 2s linear infinite"}}),er=d.EditorView.decorations.compute([k.InlinePocketState,J.fileName],function(e){var t=e.field(k.InlinePocketState),n=e.facet(J.fileName);if(!t||!n||t.codeReference.filePath!==n)return d.Decoration.none;var r=e.doc.lineAt(t.codeReference.range.indexFrom).from,i={generateCode:h.GenerateCodeWidget,ghostwriterKillswitch:Z}[t.type];if(!i)return d.Decoration.none;var a=d.Decoration.widget({widget:new i({id:t.id,codeReference:t.codeReference,source:t.source}),block:!0,side:0}).range(r);return d.Decoration.set(a)}),ei=(0,d.layer)({above:!1,update:function(e){return(0,f.hasChanged)(e,k.InlinePocketState)},markers:function(e){var t=e.state.field(k.InlinePocketState),n=e.state.facet(J.fileName);if(!t||!n||t.codeReference.filePath!==n)return[];var r=t.codeReference.range.indexFrom,i=t.codeReference.range.indexTo,a=e.state.doc.lineAt(i);a.from>=r&&a.to===i&&i<e.state.doc.length&&(i+=1);var o=c.EditorSelection.range(r,i),s=t.loading&&t.codeReference.range.indexFrom<t.codeReference.range.indexTo?"cm-pocket-highlight-loading":"cm-pocket-highlight";return d.RectangleMarker.forRange(e,s,o)}}),ea=p.GhostText.compute([k.InlinePocketState,k.InlinePocketCodeBlock,J.fileName],function(e){var t=e.field(k.InlinePocketState),n=e.field(k.InlinePocketCodeBlock),r=e.facet(J.fileName);return t&&n&&r&&t.codeReference.filePath===r&&"generateCode"===t.type?c.ChangeSet.of({from:t.codeReference.range.indexTo,to:t.codeReference.range.indexTo,insert:n},e.doc.length):null});function eo(e){var t=e.onGenerateCode,n=V.use(t);return(0,u.useMemo)(function(){return[en,k.InlinePocketState,k.InlinePocketCodeBlock,er,ei,ea,n]},[n])}e.s(["useInlineGhostwriterExtension",()=>eo],848955);var es=e.i(346715),el=function(e){function t(e){var n;return(0,m._)(this,t),n=(0,U._)(this,t),(0,x._)(n,"type",void 0),n.type=e,n}return(0,G._)(t,e),(0,g._)(t,null,[{key:"from",value:function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}}},{key:"range",value:function(e,t,n){return this.from(e).range(t,n)}}]),t}(c.RangeValue);function eu(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],a=n;a<=r;){var o=e.lineAt(a),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<t)return null;var n=e.text[0],r=function(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}(n);if(!r)return null;var i=n.repeat(t);return e.text.slice(0,t)!==i||e.text.length>t&&" "!==e.text[t]?null:r}(o,t);s&&i.push(el.range(s,o.from,o.to)),a=o.to+1}return i}(0,x._)(el,"yours",new el("yours")),(0,x._)(el,"base",new el("base")),(0,x._)(el,"middle",new el("middle")),(0,x._)(el,"theirs",new el("theirs"));var ec=["yours","base","middle","theirs"];function ed(e){Array.isArray(e)&&(e=c.RangeSet.of(e));var t=[],n=[];if(0===e.size)return{hunks:t,hanging:n};for(var r=e.iter();null!==r.value;){var i,a={},o={},s=[],l=!0,u=!1,d=void 0;try{for(var f,p=ec[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var h=f.value,m=r.value,g=r.from,x=r.to;if("base"!==h||m.type===h){if(m.type===h)a[h]={from:g,to:x},s.push({from:g,to:x,type:m.type});else if("yours"!==m.type)s.push({from:g,to:x,type:m.type});else break;if(r.next(),null===r.value)break}}}catch(e){u=!0,d=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw d}}if(!a.yours||!a.middle||!a.theirs){n.push.apply(n,(0,es._)(s));continue}null!=a.base||(a.base=null),null!=o.base||(o.base=null);var y=null!=(i=a.base)?i:a.middle,b=a.yours.to+1,w=y.from-1;if(o.yours=b<w?{from:b,to:w}:null,a.base){var _=a.base.to+1,k=a.middle.from-1;o.base=_<k?{from:_,to:k}:null}var S=a.middle.to+1,C=a.theirs.from-1;o.theirs=S<C?{from:S,to:C}:null;var j={from:a.yours.from,to:a.theirs.to,markers:a,content:o};t.push(j)}return{hunks:t,hanging:n}}var ef=c.Facet.define({combine:function(e){return e.length?e[0]:7}}),ep=c.StateField.define({create:function(e){var t=e.doc,n=e.facet(ef),r=c.RangeSet.of(eu(t,n)),i=ed(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,t){var n=t.newDoc,r=t.startState.facet(ef),i=t.state.facet(ef);if(r!==i){var a=c.RangeSet.of(eu(n,i)),o=ed(a);return{markers:a,hunks:o.hunks,hanging:o.hanging}}if(!t.docChanged)return e;var s=null,l=null,u=null,d=null;t.changes.iterChangedRanges(function(e,t,n,r){s=null===s?e:Math.min(s,e),l=null===l?t:Math.max(l,t),u=null===u?n:Math.min(u,n),d=null===d?r:Math.max(d,r)});var f=e.markers;if(null!==s&&null!==l){var p=t.startState.doc.lineAt(s).from,h=t.startState.doc.lineAt(l).to;f=f.update({filter:function(){return!1},filterFrom:p,filterTo:h})}f=f.map(t.changes),null!==u&&null!==d&&(f=f.update({add:eu(n,i,u,d)}));var m=ed(f);return{markers:f,hunks:m.hunks,hanging:m.hanging}}}),eh=d.EditorView.atomicRanges.from(ep,function(e){return function(){return e.markers}}),em=c.EditorState.changeFilter.of(function(e){var t=e.startState.field(ep);if(!e.docChanged||0===t.markers.size)return!0;var n=e.startState.doc,r=[];return e.changes.iterChanges(function(e,i,a,o,s){var l=s.length,u=Math.max(n.lineAt(e).from-1,0),c=Math.min(n.lineAt(i).to+1,n.length);t.markers.between(u,c,function(t,u){if((!(e<=t)||!(i>=u))&&(0===l||(e!==u||"\n"!==s.sliceString(0,1))&&(i!==t||"\n"!==s.sliceString(l-1,l)))){if(a!==o||(i!==u+1||0!==n.lineAt(i).length)&&(e!==t-1||0!==n.lineAt(e).length))r.push(t-1,u+1)}})}),!(r.length>0)||r}),eg=c.EditorState.transactionFilter.of(function(e){var t=e.docChanged?e.state.field(ep):e.startState.field(ep);if(0===t.markers.size)return e;var n=e.newSelection,r=!1,i=!1;do{i=!1;for(var a=0;a<n.ranges.length&&"break"!==function(e){var a=n.ranges[e],o=a.from,s=a.to,l=o,u=s;if(t.markers.between(o,s,function(e,t){var n=(e+t)/2;o>e&&o<t&&(l=o<n?e:t),s>e&&s<t&&(u=s<n?e:t)}),l!==o||u!==s){var d,f=a.anchor<a.head?l:u,p=a.anchor<a.head?u:l,h=a.goalColumn,m=null!=(d=a.bidiLevel)?d:void 0,g=c.EditorSelection.range(f,p,h,m);return n=n.replaceRange(g,e),i=!0,r=!0,"break"}}(a);a++);}while(i)return r?[e,{selection:n,sequential:!0}]:e}),ev="cm-git-conflict-marker-yours",ex="cm-git-conflict-marker-base",ey="cm-git-conflict-marker-middle",eb="cm-git-conflict-marker-theirs",ew="cm-git-conflict-marker-hanging",e_="cm-git-conflict-content-yours",ek="cm-git-conflict-content-base",eS="cm-git-conflict-content-theirs";function eC(e){var t=e.background,n=e.color,r=e.noBorder,i={color:n,backgroundColor:t,backgroundClip:"padding-box",paddingTop:W.tokens.space4,paddingBottom:W.tokens.space4,fontWeight:W.tokens.fontWeightBold};return void 0!==r&&r||(i.borderLeft="4px solid rgba(0, 150, 255, 0.1)",i.paddingLeft="2px"),i}function ej(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px"}}var eT=d.EditorView.theme((i={},(0,x._)(i,".".concat(ev),eC({background:"rgba(0, 150, 255, 0.1)",color:W.tokens.blueStrongest,noBorder:!0})),(0,x._)(i,".".concat(ey),eC({background:"rgba(255, 0, 0, 0.1)",color:W.tokens.redStrongest})),(0,x._)(i,".".concat(ex),eC({background:"rgba(255, 165, 0, 0.1)",color:W.tokens.orangeStrongest})),(0,x._)(i,".".concat(eb),eC({background:"rgba(0, 150, 255, 0.1)",color:W.tokens.blueStrongest,noBorder:!0})),(0,x._)(i,".".concat(ew),eC({background:"rgba(100, 150, 255, 0.1)",color:W.tokens.blueStrongest,noBorder:!0})),(0,x._)(i,".".concat(e_),ej({background:"rgba(0, 255, 0, 0.1)"})),(0,x._)(i,".".concat(eS),ej({background:"rgba(255, 0, 0, 0.1)"})),(0,x._)(i,".".concat(ek),ej({background:"rgba(255, 165, 0, 0.1)"})),i)),eE={yours:{marker:d.Decoration.line({class:ev}),content:d.Decoration.line({class:e_})},base:{marker:d.Decoration.line({class:ex}),content:d.Decoration.line({class:ek})},middle:{marker:d.Decoration.line({class:ey})},theirs:{marker:d.Decoration.line({class:eb}),content:d.Decoration.line({class:eS})},hanging:{marker:d.Decoration.line({class:ew})}},eR=function(){function e(t){(0,m._)(this,e),(0,x._)(this,"builder",void 0),(0,x._)(this,"doc",void 0),this.builder=new c.RangeSetBuilder,this.doc=t}return(0,g._)(e,[{key:"add",value:function(e,t){var n=this.doc.lineAt(e.from);if(n.to>=e.to)return void this.builder.add(n.from,n.from,t);for(var r=n.from;r<=e.to;)this.builder.add(r,r,t),r=this.doc.lineAt(r).to+1}},{key:"finish",value:function(){return this.builder.finish()}}]),e}(),eI=d.EditorView.decorations.from(ep,function(e){return function(t){var n=new eR(t.state.doc),r=!0,i=!1,a=void 0;try{for(var o,s=e.hunks[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;t.viewport.from>l.to||t.viewport.to<l.from||(n.add(l.markers.yours,eE.yours.marker),l.content.yours&&n.add(l.content.yours,eE.yours.content),l.markers.base&&n.add(l.markers.base,eE.base.marker),l.content.base&&n.add(l.content.base,eE.base.content),n.add(l.markers.middle,eE.middle.marker),l.content.theirs&&n.add(l.content.theirs,eE.theirs.content),n.add(l.markers.theirs,eE.theirs.marker))}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n.finish()}}),eA=d.EditorView.decorations.from(ep,function(e){return function(){var t=new c.RangeSetBuilder,n=!0,r=!1,i=void 0;try{for(var a,o=e.hanging[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.add(s.from,s.from,eE.hanging.marker)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t.finish()}}),eP=[ep,[eh,em,eg],[c.Prec.lowest(eT),eI,eA]],eD=e.i(297083),eO=e.i(817556),eN=e.i(88892),eM=e.i(903673),eL=function(){function e(t,n,r,i,a,o){(0,m._)(this,e),(0,x._)(this,"original",void 0),(0,x._)(this,"current",void 0),(0,x._)(this,"chunks",void 0),(0,x._)(this,"desc",void 0),(0,x._)(this,"pending",void 0),(0,x._)(this,"ranges",void 0),this.original=t,this.current=n,this.chunks=r,this.desc=i,this.pending=a,this.ranges=o}return(0,g._)(e,[{key:"hasChanges",value:function(){return this.ranges.length>0}},{key:"update",value:function(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,o=this.original,s=this.chunks,l=this.desc,u=this.pending,d=this.ranges;if(Math.abs((this.pending?this.pending.length:this.current.length)-t.length)>=250||i){var f=(0,eN.composeDiff)(l,u,n).pending;s=(0,eN.buildChunks)(o,t,{chunks:s,changesB:f},a),l=(0,eN.chunksToChangeDesc)(s,o.length),u=null,d=(0,eN.changeDescToRanges)(l)}else u=(r=(0,eN.composeDiff)(l,u,n)).pending,l=r.desc,d=(0,eN.changeDescToRanges)(l);return u&&t.eq(o)&&(s=[],l=c.ChangeSet.empty(o.length),u=null,d=[]),new e(o,t,s,l,u,d)}},{key:"isAccurate",value:function(){return null===this.pending}},{key:"getLineChangeType",value:function(e){var t=this.current.line(e);return 0===this.original.length&&this.current.length>0?eN.LineChangeType.COVERED:(0,eN.getLineChangeType)(this.original,this.current,t,eN.Side.B,this.ranges)}},{key:"iterRanges",value:function(){return(0,eO._)(this,function(e){switch(e.label){case 0:return[5,(0,eM._)(this.ranges)];case 1:return e.sent(),[2]}})}}],[{key:"create",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eN.DEFAULT_DIFF_CONFIG,i=(0,eN.buildChunks)(t,n,void 0,r),a=(0,eN.chunksToChangeDesc)(i,t.length),o=(0,eN.changeDescToRanges)(a);return new e(t,n,i,a,null,o)}}]),e}(),eB=e.i(664152),eV=c.Facet.define({combine:function(e){var t;return null!=(t=e.filter(Boolean)[0])?t:null}}),eF=c.StateField.define({create:function(){return null},update:function(e,t){var n=t.state.facet(eV);if(!n||Math.max(n.lines,t.newDoc.lines)>5e3||Math.max(n.length,t.newDoc.length)>4e5)return null;var r=performance.now(),i=eN.DEFAULT_DIFF_CONFIG,a="unknown";e&&e.original.eq(n)?t.docChanged&&(e=e.update(t.newDoc,t.changes,!(t.isUserEvent("input.type")||t.isUserEvent("delete.forward")||t.isUserEvent("delete.backward")),i),a="update"):(e=eL.create(n,t.newDoc,i),a="create");var o=performance.now()-r;return o>1e3&&eB.logger.time("slow SloppyDiff.create recorded",o,{start:n.toString(),end:t.newDoc.toString(),scanLimit:i.scanLimit,type:a}),e}});e.s(["GutterDiffInternalFacet",()=>eV,"GutterDiffState",()=>eF],738324);var eU=W.tokens.space2,eG="cm-diff-gutter",e$="".concat(eG,"-element"),eH="".concat(e$,"-insertion"),ez="".concat(e$,"-modified"),eW="".concat(e$,"-deleted"),eq="".concat(e$,"-file-added"),eK="".concat(e$,"-empty"),eY=W.tokens.greenDefault,eQ=W.tokens.greenStronger,eX=W.tokens.blueDefault,eZ=W.tokens.blueStronger,eJ=W.tokens.redDefault,e0=W.tokens.redStronger,e1=W.tokens.greenDimmer,e2=W.tokens.greenDefault,e3=d.EditorView.theme((a={},(0,x._)(a,".".concat(eG,":first-of-type, .").concat(e$),{width:eU}),(0,x._)(a,".".concat(eH),{backgroundColor:eY,"&.cm-activeLineGutter":{backgroundColor:eQ}}),(0,x._)(a,".".concat(ez),{backgroundColor:eX,"&.cm-activeLineGutter":{backgroundColor:eZ}}),(0,x._)(a,".".concat(eW),{backgroundColor:eJ,"&.cm-activeLineGutter":{backgroundColor:e0}}),(0,x._)(a,".".concat(eq),{backgroundColor:e1,"&.cm-activeLineGutter":{backgroundColor:e2}}),(0,x._)(a,".".concat(eK),{opacity:0}),a)),e5=new(function(e){function t(){var e;return(0,m._)(this,t),e=(0,U._)(this,t,arguments),(0,x._)(e,"elementClass","".concat(e$," ").concat(eH)),e}return(0,G._)(t,e),t}(d.GutterMarker)),e4=new(function(e){function t(){var e;return(0,m._)(this,t),e=(0,U._)(this,t,arguments),(0,x._)(e,"elementClass","".concat(e$," ").concat(eW)),e}return(0,G._)(t,e),t}(d.GutterMarker)),e8=new(function(e){function t(){var e;return(0,m._)(this,t),e=(0,U._)(this,t,arguments),(0,x._)(e,"elementClass","".concat(e$," ").concat(ez)),e}return(0,G._)(t,e),t}(d.GutterMarker)),e6=new(function(e){function t(){var e;return(0,m._)(this,t),e=(0,U._)(this,t,arguments),(0,x._)(e,"elementClass","".concat(e$," ").concat(eq)),e}return(0,G._)(t,e),t}(d.GutterMarker)),e7=new(function(e){function t(){var e;return(0,m._)(this,t),e=(0,U._)(this,t,arguments),(0,x._)(e,"elementClass","".concat(e$," ").concat(eK)),e}return(0,G._)(t,e),t}(d.GutterMarker)),e9=(0,d.gutter)({class:eG,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(eF,!1);if(!n||!n.hasChanges())return e7;if(0===n.original.length)return e6;var r=e.state.doc.lineAt(t.from);switch(n.getLineChangeType(r.number)){case eN.LineChangeType.COVERED:return e5;case eN.LineChangeType.MODIFIED:return e8;default:return e7}},initialSpacer:function(e){return e.state.field(eF,!1)?e6:e7},updateSpacer:function(e,t){var n=t.state.field(eF,!1)?e6:e7;return e===n?e:n}}),te=c.Facet.define({enables:function(e){return[eV.computeN([e],function(t){return t.facet(e)}),e3,eF,c.Prec.highest(e9)]}}),tt=e.i(167626),tn=e.i(486701),tr=e.i(873753),ti=function(){function e(t,n,r,i){(0,m._)(this,e),(0,x._)(this,"a",void 0),(0,x._)(this,"b",void 0),(0,x._)(this,"chunks",void 0),(0,x._)(this,"map",void 0),this.a=t,this.b=n,this.chunks=r,this.map=i}return(0,g._)(e,[{key:"line",value:function(e,t){return t===eN.Side.A?this.a.line(e):this.b.line(e)}},{key:"bounds",value:function(e){if(0===this.chunks.length)return null;var t=(0,eN.pickSide)(this.chunks[0],e),n=(0,eN.pickSide)(this.chunks[this.chunks.length-1],e),r=e===eN.Side.A?this.a.length:this.b.length,i=Math.min(n.to,r);return{from:t.from,to:i}}},{key:"hasChanges",value:function(){return this.chunks.length>0}},{key:"updateA",value:function(t,n,r){var i=this.b,a=(0,eN.buildChunks)(t,i,{chunks:this.chunks,changesA:n},r),o=(0,eN.getDiffLineMap)(t,i,a);return new e(t,i,a,o)}},{key:"updateB",value:function(t,n,r){var i=this.a,a=(0,eN.buildChunks)(i,t,{chunks:this.chunks,changesB:n},r),o=(0,eN.getDiffLineMap)(i,t,a);return new e(i,t,a,o)}},{key:"getContainingChunk",value:function(e,t){for(var n=0,r=this.chunks.length-1;n<=r;){var i=n+r>>>1,a=this.chunks[i],o=(0,eN.pickSide)(a,t);if(e>=o.from&&e<=o.to)return a;e<o.from?r=i-1:e>o.to&&(n=i+1)}return null}},{key:"getCorrespondingLine",value:function(e,t){var n=this.map.get(t===eN.Side.A?-e:e);return n?this.line(n,(0,eN.oppositeSide)(t)):null}},{key:"getLineChangeType",value:function(e,t){if(this.map.get(t===eN.Side.A?-e:e))return eN.LineChangeType.UNCHANGED;var n=this.line(e,t),r=this.getContainingChunk(n.from,t);return r?(0,eN.getLineChangeType)(this.a,this.b,n,t,r.changes,r):eN.LineChangeType.UNCHANGED}},{key:"getLineStats",value:function(){for(var e={added:0,removed:0},t=1;t<=this.a.lines;t++)this.getLineChangeType(t,eN.Side.A)!==eN.LineChangeType.UNCHANGED&&e.removed++;for(var n=1;n<=this.b.lines;n++)this.getLineChangeType(n,eN.Side.B)!==eN.LineChangeType.UNCHANGED&&e.added++;return e}},{key:"iterLines",value:function(e){var t,n,r,i;return(0,eO._)(this,function(a){switch(a.label){case 0:t=e===eN.Side.A?this.a:this.b,n=1,a.label=1;case 1:if(!(n<=t.lines))return[3,4];return r=t.line(n),i=this.getCorrespondingLine(r.number,e),[4,{line:r,correspondingLine:i}];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}})}},{key:"iterRanges",value:function(){var e,t,n,r,i;return(0,eO._)(this,function(a){switch(a.label){case 0:e=0,a.label=1;case 1:if(!(e<this.chunks.length))return[3,6];t=this.chunks[e].fromA,n=this.chunks[e].fromB,r=0,a.label=2;case 2:if(!(r<this.chunks[e].changes.length))return[3,5];return i=this.chunks[e].changes[r],[4,{fromA:t+i.fromA,toA:t+i.toA,fromB:n+i.fromB,toB:n+i.toB}];case 3:a.sent(),a.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}})}}],[{key:"create",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eN.DEFAULT_DIFF_CONFIG,i=(0,eN.buildChunks)(t,n,void 0,r),a=(0,eN.getDiffLineMap)(t,n,i);return new e(t,n,i,a)}}]),e}(),ta=e.i(680118),to=c.Facet.define({combine:function(e){var t;return null!=(t=e.filter(Boolean)[0])?t:null}}),ts=c.StateField.define({create:function(){return{diff:null,tree:tr.Tree.empty}},update:function(e,t){var n,r,i=t.state.facet(to),a=null==(n=t.state.facet(tn.language))?void 0:n.parser;if(!i)return null===e.diff&&e.tree===tr.Tree.empty?e:{diff:null,tree:tr.Tree.empty};var o=e.diff,s=e.tree;return(o&&o.a.eq(i)?t.docChanged&&(o=o.updateB(t.newDoc,t.changes)):(o=ti.create(i,t.newDoc),s=tr.Tree.empty),(null==(r=t.startState.facet(tn.language))?void 0:r.parser)!==a&&(s=tr.Tree.empty),a&&s.length!==o.a.length)?(s=(0,ta.getIncrementallyParsedTree)({parser:a,text:o.a,maxTime:16,base:s}),{diff:o,tree:s}):e.diff===o&&e.tree===s?e:{diff:o,tree:s}}}),tl="cm-inline-diff-line-deletion-base",tu="cm-inline-diff-line-deletion",tc="cm-inline-diff-text-deletion",td="cm-inline-diff-line-insertion-base",tf="cm-inline-diff-line-insertion",tp="cm-inline-diff-text-insertion",th="rgba(180, 0, 0, 0.075)",tm="rgba(180, 0, 0, 0.125)",tg="rgba(0, 180, 0, 0.075)",tv="rgba(0, 180, 0, 0.125)",tx="cm-inline-diff-marker",ty="cm-inline-diff-marker-left",tb="cm-inline-diff-marker-right";function tw(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var t_=d.EditorView.theme((o={},(0,x._)(o,".".concat(tl,", .").concat(tu),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(W.tokens.accentPrimaryDimmest," !important")}}),(0,x._)(o,".".concat(tl),{background:tw(th)}),(0,x._)(o,".".concat(tu),{background:tw(th,tm)}),(0,x._)(o,".".concat(td),{background:tw(tg)}),(0,x._)(o,".".concat(tf),{background:tw(tg,tv)}),(0,x._)(o,".".concat(tp),{display:"inline-block",background:tv,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(tv),paddingLeft:"3px",marginLeft:"-6px"}}),(0,x._)(o,".".concat(tc),{display:"inline-block",background:tm,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(tm),paddingLeft:"3px",marginLeft:"-6px"}}),(0,x._)(o,".".concat(tx),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,x._)(o,".".concat(ty),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,x._)(o,".".concat(tb),{width:"50%",textAlign:"right"}),o)),tk=e.i(731291),tS=function(e){function t(e,n,r){var i;return(0,m._)(this,t),i=(0,U._)(this,t),(0,x._)(i,"line",void 0),(0,x._)(i,"index",void 0),(0,x._)(i,"changed",void 0),i.line=e,i.index=n,i.changed=r,i}return(0,G._)(t,e),(0,g._)(t,[{key:"estimatedHeight",get:function(){return 21}},{key:"toDOM",value:function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(tl):"cm-line ".concat(tu),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var a,o=this.line[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=s.text,u=s.tags,c=document.createElement("span");c.textContent=l||"",c.className=null!=u?u:"",t.appendChild(c)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,p=null,h=null,m=function(t,n){if(!p)throw Error("range is null");var r=e.line[f],i=r.text,a=r.tags,o=i.slice(d-p.from,n-p.from),s=document.createElement("span");s.textContent=o||"",s.className=null!=a?a:"",t.appendChild(s),d+=o.length};f<this.line.length;){if(!p){var g=this.line[f].text;p={from:d,to:d+g.length}}if(!h){var x=!0,y=!1,b=void 0;try{for(var w,_=this.changed[Symbol.iterator]();!(x=(w=_.next()).done);x=!0){var k=w.value;if(!(k.from>=p.to)&&!(k.to<=d)){var S=document.createElement("span");S.className=tc,h={from:k.from,to:k.to,dom:S},d<h.from&&m(t,h.from),t.appendChild(S);break}}}catch(e){y=!0,b=e}finally{try{x||null==_.return||_.return()}finally{if(y)throw b}}}h?(d<h.to&&m(h.dom,h.to),d>=h.to&&(h=null)):m(t,p.to),d>=p.to&&(p=null,f++)}return t}},{key:"eq",value:function(e){var n,r;return(0,tt._)(e,t)&&this.index===e.index&&this.line.length===e.line.length&&(null==(n=this.changed)?void 0:n.length)===(null==(r=e.changed)?void 0:r.length)&&(0,b.default)(this.line,e.line)&&(0,b.default)(this.changed,e.changed)}},{key:"ignoreEvent",value:function(e){return e.stopImmediatePropagation(),!0}}]),t}(d.WidgetType),tC=d.Decoration.line({class:td}),tj=d.Decoration.line({class:tf}),tT=d.Decoration.mark({class:tp}),tE=d.EditorView.decorations.compute([ts],function(e){var t=function(e,t){if(r.getLineChangeType(e.number,eN.Side.B)===eN.LineChangeType.COVERED)a.push(tj.range(e.from));else{a.push(tC.range(e.from));var n=!0,i=!1,o=void 0;try{for(var s,l=(0,eN.changedRangesForLine)(e,t,eN.Side.B,!1)[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value;a.push(tT.range(u.from,u.to))}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}}},n=e.field(ts,!1);if(!n||!n.diff)return d.Decoration.none;var r=n.diff,i=n.tree,a=[],o=!0,s=!1,l=void 0;try{for(var u,c=r.chunks[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var f=u.value;if(f.fromB!==f.endB)for(var p=r.b.lineAt(f.fromB),h=r.b.lineAt(f.endB),m=p.number;m<=h.number;m++)t(r.b.line(m),f);else f.fromA===f.endA&&t(r.b.lineAt(f.fromB),f);if(f.fromA!==f.toA)for(var g=r.a.lineAt(f.fromA),x=(0,tk.treeToHighlightedLines)(i,r.a,e,f.fromA,f.endA),y=0;y<x.length;y++){var b=x[y],w=r.a.line(g.number+y),_=r.getLineChangeType(w.number,eN.Side.A)===eN.LineChangeType.COVERED?null:(0,eN.changedRangesForLine)(w,f,eN.Side.A,!0),k=d.Decoration.widget({widget:new tS(b,w.number,_),block:!0,side:-(x.length-y)});a.push(k.range(f.fromB))}}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}return d.Decoration.set(a,!0)}),tR=(0,d.gutter)({class:eG,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(ts,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;if(0===n.diff.a.length)return e5;var r=e.state.doc.lineAt(t.from);switch(n.diff.getLineChangeType(r.number,eN.Side.B)){case eN.LineChangeType.COVERED:case eN.LineChangeType.MODIFIED:return e5;default:return null}},widgetMarker:function(e,t){if(!(0,tt._)(t,tS))return null;var n=e.state.field(ts,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;switch(n.diff.getLineChangeType(t.index,eN.Side.A)){case eN.LineChangeType.COVERED:case eN.LineChangeType.MODIFIED:return e4;default:return null}},initialSpacer:function(e){var t=e.state.field(ts,!1);return(null==t?void 0:t.diff)?e5:e7},updateSpacer:function(e,t){var n=t.state.field(ts,!1),r=(null==n?void 0:n.diff)?e5:e7;return e===r?e:r}}),tI=e.i(495970),tA=function(e){function t(e,n){var r;return(0,m._)(this,t),r=(0,U._)(this,t),(0,x._)(r,"left",void 0),(0,x._)(r,"right",void 0),r.left=e,r.right=n,r}return(0,G._)(t,e),(0,g._)(t,[{key:"toDOM",value:function(e){var t=e.state.doc.lines.toString().length,n=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return n.className=tx,r.className=ty,i.className=tb,n.style.width="".concat(2*t+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),n.appendChild(r),n.appendChild(i),n}},{key:"eq",value:function(e){return(0,tt._)(e,t)&&this.left===e.left&&this.right===e.right}}]),t}(d.GutterMarker),tP=tI.LineNumberWidgetHandlers.of(function(e,t){if((0,tt._)(t,tS))return new tA(t.index,null)}),tD=[tI.LineNumberLineHandlers.of(function(e,t){var n,r=e.state.field(ts,!1);if(r&&r.diff&&r.diff.hasChanges()){var i=e.state.doc.lineAt(t.from),a=r.diff.getCorrespondingLine(i.number,eN.Side.B);return new tA(null!=(n=null==a?void 0:a.number)?n:null,i.number)}}),tP],tO=c.Facet.define({enables:function(e){return[to.computeN([e],function(t){return t.facet(e)}),e3,ts,t_,tE,tD,tR]}});e.s(["InlineDiff",()=>tO],486161);var tN=e.i(205104),tM=((t={}).GUTTER_DIFF="GUTTER_DIFF",t.INLINE_DIFF="INLINE_DIFF",t),tL=c.StateEffect.define(),tB=c.StateEffect.define(),tV=c.StateField.define({create:function(){return{head:null,mode:"GUTTER_DIFF"}},update:function(e,t){var n=e.head,r=e.mode,i=!0,a=!1,o=void 0;try{for(var s,l=t.effects[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;u.is(tL)?n=u.value:u.is(tB)&&(r=u.value)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return n!==e.head||r!==e.mode?{head:n,mode:r}:e},provide:function(e){return[te.from(e,function(e){return"GUTTER_DIFF"===e.mode?e.head:null}),tO.from(e,function(e){return"INLINE_DIFF"===e.mode?e.head:null})]}}),tF=function(){function e(t,n,r){var i=this;(0,m._)(this,e),(0,x._)(this,"view",void 0),(0,x._)(this,"git",void 0),(0,x._)(this,"path",void 0),(0,x._)(this,"disposed",void 0),(0,x._)(this,"dispose",void 0),this.view=t,this.git=n,this.path=r,this.disposed=!1,this.dispose=n.onRefresh(function(){return i.fetchThenUpdateState()}),this.fetchThenUpdateState()}return(0,g._)(e,[{key:"fetchThenUpdateState",value:function(){return(0,eD._)(function(){var e,t,n,r,i;return(0,eO._)(this,function(a){switch(a.label){case 0:return[4,this.git.getFileContents({path:this.path,revision:"HEAD",convertToBase64:(0,tN.isMedia)(this.path)})];case 1:if(e=a.sent(),this.disposed||!(t=this.view.state.field(tV,!1)))return[2];return(!(i=null===(r=e.error?null:null!=(n=e.content)?n:"")?null:this.view.state.toText(r))!=!t.head||i&&t.head&&!i.eq(t.head))&&this.view.dispatch({effects:tL.of(i)}),[2]}})}).call(this)}},{key:"destroy",value:function(){this.dispose(),this.disposed=!0}}]),e}();function tU(e,t){return t?[tV,d.ViewPlugin.define(function(n){return new tF(n,e,t)})]:[]}e.s(["GitDiffMode",()=>tM,"GitDiffState",()=>tV,"gitDiff",()=>tU,"setGitDiffMode",()=>tB],403781);var tG=e.i(993796),t$=e.i(529810),tH=new C.ReactCompartment(function(e,t,n){var r=[tU(e,t)];return n||r.push(eP),r});function tz(e){var t=e.filePath,n=e.enableConflicts,r=(0,tG.useFlag)({controlName:"flag-editor-git-conflict-markers",logFlagToAnalytics:!1}),i=(0,t$.default)().git;return tH.use(i,void 0===t?null:t,!(void 0!==n&&n)||!r)}e.s(["default",()=>tz],44813);var tW=e.i(497644),tq=e.i(197565),tK=e.i(878420),tY=e.i(64386),tQ=e.i(530658),tX=e.i(822658),tZ=e.i(72158),tJ=e.i(887800),t0=e.i(333859),t1=c.Facet.define({combine:function(e){return e.some(Boolean)}});e.s(["AcceptSuggestionOnCommitCharacter",()=>t1],935997);var t2=e.i(886513),t3=e.i(422183),t5=e.i(663355),t4=e.i(862470);(n={})[n.Dollar=0]="Dollar",n[n.Colon=1]="Colon",n[n.Comma=2]="Comma",n[n.CurlyOpen=3]="CurlyOpen",n[n.CurlyClose=4]="CurlyClose",n[n.Backslash=5]="Backslash",n[n.Forwardslash=6]="Forwardslash",n[n.Pipe=7]="Pipe",n[n.Int=8]="Int",n[n.VariableName=9]="VariableName",n[n.Format=10]="Format",n[n.Plus=11]="Plus",n[n.Dash=12]="Dash",n[n.QuestionMark=13]="QuestionMark",n[n.EOF=14]="EOF";var t8=function(){function e(){(0,m._)(this,e),(0,x._)(this,"value",""),(0,x._)(this,"pos",0)}return(0,g._)(e,[{key:"text",value:function(e){this.value=e,this.pos=0}},{key:"tokenText",value:function(e){return this.value.substr(e.pos,e.len)}},{key:"next",value:function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,r=0,i=this.value.charCodeAt(n);if("number"==typeof(t=e._table[i]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(i)){t=8;do r+=1,i=this.value.charCodeAt(n+r);while(e.isDigitCharacter(i))return this.pos+=r,{type:t,pos:n,len:r}}if(e.isVariableCharacter(i)){t=9;do i=this.value.charCodeAt(n+ ++r);while(e.isVariableCharacter(i)||e.isDigitCharacter(i))return this.pos+=r,{type:t,pos:n,len:r}}t=10;do r+=1,i=this.value.charCodeAt(n+r);while(!isNaN(i)&&void 0===e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i))return this.pos+=r,{type:t,pos:n,len:r}}}],[{key:"isDigitCharacter",value:function(e){return e>=48&&e<=57}},{key:"isVariableCharacter",value:function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90}}]),e}();(0,x._)(t8,"_table",(s={},(0,x._)(s,36,0),(0,x._)(s,58,1),(0,x._)(s,44,2),(0,x._)(s,123,3),(0,x._)(s,125,4),(0,x._)(s,92,5),(0,x._)(s,47,6),(0,x._)(s,124,7),(0,x._)(s,43,11),(0,x._)(s,45,12),(0,x._)(s,63,13),s));var t6=function(){function e(){var t;(0,m._)(this,e),(0,x._)(this,"parent",void 0),(0,x._)(this,"_children",[]),t=this,["parent"].forEach(function(e){Object.defineProperty(t,e,{enumerable:!1,writable:!0})})}return(0,g._)(e,[{key:"appendChild",value:function(e){return(0,tt._)(e,t7)&&(0,tt._)(this._children[this._children.length-1],t7)?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}},{key:"replace",value:function(e,t){var n=e.parent,r=n.children.indexOf(e),i=n.children.slice(0);i.splice.apply(i,[r,1].concat((0,es._)(t))),n._children=i,function e(t,n){var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;l.parent=n,e(l.children,l)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}(t,n)}},{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if((0,tt._)(e,no))return e;e=e.parent}}},{key:"toString",value:function(){return this.children.reduce(function(e,t){return e+t.toString()},"")}},{key:"len",value:function(){return 0}},{key:"match",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=Object.entries(nl)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=(0,tQ._)(i.value,2),s=o[0],l=o[1];if((0,tt._)(this,l)&&s in e)return e[s](this)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}]),e}(),t7=function(e){function t(e){var n;return(0,m._)(this,t),n=(0,U._)(this,t),(0,x._)(n,"value",void 0),n.value=e,n}return(0,G._)(t,e),(0,g._)(t,[{key:"toString",value:function(){return this.value}},{key:"toTextmateString",value:function(){return t.escape(this.value)}},{key:"len",value:function(){return this.value.length}},{key:"clone",value:function(){return new t(this.value)}}],[{key:"escape",value:function(e){return e.replace(/\$|}|\\/g,"\\$&")}}]),t}(t6),t9=function(e){function t(){return(0,m._)(this,t),(0,U._)(this,t,arguments)}return(0,G._)(t,e),t}(t6),ne=function(e){function t(e){var n;return(0,m._)(this,t),n=(0,U._)(this,t),(0,x._)(n,"index",void 0),n.index=e,n}return(0,G._)(t,e),(0,g._)(t,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&(0,tt._)(this._children[0],nt)?this._children[0]:void 0}},{key:"toTextmateString",value:function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform)?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}"):"$".concat(this.index)}},{key:"clone",value:function(){var e=new t(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e}}],[{key:"compareByIndex",value:function(e,t){if(e.index===t.index)return 0;if(e.isFinalTabstop)return 1;if(t.isFinalTabstop)return -1;if(e.index<t.index)return -1;if(e.index>t.index)return 1;else return 0}}]),t}(t9),nt=function(e){function t(){var e;return(0,m._)(this,t),e=(0,U._)(this,t,arguments),(0,x._)(e,"options",[]),e}return(0,G._)(t,e),(0,g._)(t,[{key:"appendChild",value:function(e){return(0,tt._)(e,t7)&&(e.parent=this,this.options.push(e)),this}},{key:"toString",value:function(){return this.options[0].value}},{key:"toTextmateString",value:function(){return this.options.map(function(e){return e.value.replace(/\||,|\\/g,"\\$&")}).join(",")}},{key:"len",value:function(){return this.options[0].len()}},{key:"clone",value:function(){var e=new t;return this.options.forEach(e.appendChild,e),e}}]),t}(t6),nn=function(e){function t(){var e;return(0,m._)(this,t),e=(0,U._)(this,t,arguments),(0,x._)(e,"regexp",RegExp("")),e}return(0,G._)(t,e),(0,g._)(t,[{key:"resolve",value:function(e){var t=this,n=!1,r=e.replace(this.regexp,function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=!0,t._replace(r.slice(0,-2))});return!n&&this._children.some(function(e){return(0,tt._)(e,nr)&&!!e.elseValue})&&(r=this._replace([])),r}},{key:"_replace",value:function(e){var t="",n=!0,r=!1,i=void 0;try{for(var a,o=this._children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if((0,tt._)(s,nr)){var l=e[s.index]||"";l=s.resolve(l),t+=l}else t+=s.toString()}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}},{key:"toString",value:function(){return""}},{key:"toTextmateString",value:function(){return"/".concat(this.regexp.source,"/").concat(this.children.map(function(e){return e.toTextmateString()}),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))}},{key:"clone",value:function(){var e=new t;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(function(e){return e.clone()}),e}}]),t}(t6),nr=function(e){function t(e,n,r,i){var a;return(0,m._)(this,t),a=(0,U._)(this,t),(0,x._)(a,"index",void 0),(0,x._)(a,"shorthandName",void 0),(0,x._)(a,"ifValue",void 0),(0,x._)(a,"elseValue",void 0),a.index=e,a.shorthandName=n,a.ifValue=r,a.elseValue=i,a}return(0,G._)(t,e),(0,g._)(t,[{key:"resolve",value:function(e){if("upcase"===this.shorthandName)return e?e.toLocaleUpperCase():"";if("downcase"===this.shorthandName)return e?e.toLocaleLowerCase():"";if("capitalize"===this.shorthandName)return e?e[0].toLocaleUpperCase()+e.substr(1):"";if("pascalcase"===this.shorthandName)return e?this._toPascalCase(e):"";if("camelcase"===this.shorthandName)return e?this._toCamelCase(e):"";else if(e&&"string"==typeof this.ifValue)return this.ifValue;else if(!e&&"string"==typeof this.elseValue)return this.elseValue;else return e||""}},{key:"_toPascalCase",value:function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e}},{key:"_toCamelCase",value:function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map(function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e}},{key:"toTextmateString",value:function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"}},{key:"clone",value:function(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}}]),t}(t6),ni=function(e){function t(e){var n;return(0,m._)(this,t),n=(0,U._)(this,t),(0,x._)(n,"name",void 0),n.name=e,n}return(0,G._)(t,e),(0,g._)(t,[{key:"resolve",value:function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new t7(t)],!0)}},{key:"toTextmateString",value:function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0===this.children.length)?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}")}},{key:"clone",value:function(){var e=new t(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e}}]),t}(t9);function na(e,t){for(var n=(0,es._)(e);n.length>0;){var r=n.shift();if(!t(r))break;n.unshift.apply(n,(0,es._)(r.children))}}var no=function(e){function t(){return(0,m._)(this,t),(0,U._)(this,t,arguments)}return(0,G._)(t,e),(0,g._)(t,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk(function(n){return(0,tt._)(n,ne)&&(t.push(n),e=!e||e.index<n.index?n:e),!0}),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}},{key:"offset",value:function(e){var t=0,n=!1;return(this.walk(function(r){return r===e?(n=!0,!1):(t+=r.len(),!0)}),n)?t:-1}},{key:"fullLen",value:function(e){var t=0;return na([e],function(e){return t+=e.len(),!0}),t}},{key:"enclosingPlaceholders",value:function(e){for(var t=[],n=e.parent;n;)(0,tt._)(n,ne)&&t.push(n),n=n.parent;return t}},{key:"resolveVariables",value:function(e){var t=this;return this.walk(function(n){return(0,tt._)(n,ni)&&n.resolve(e)&&delete t._placeholders,!0}),this}},{key:"appendChild",value:function(e){return delete this._placeholders,(0,t5._)((0,t4._)(t.prototype),"appendChild",this).call(this,e)}},{key:"replace",value:function(e,n){return delete this._placeholders,(0,t5._)((0,t4._)(t.prototype),"replace",this).call(this,e,n)}},{key:"toTextmateString",value:function(){return this.children.reduce(function(e,t){return e+t.toTextmateString()},"")}},{key:"clone",value:function(){var e=new t;return this._children=this.children.map(function(e){return e.clone()}),e}},{key:"walk",value:function(e){na(this.children,e)}}]),t}(t6),ns=function(){function e(){(0,m._)(this,e),(0,x._)(this,"_scanner",new t8),(0,x._)(this,"_token",{type:14,pos:0,len:0})}return(0,g._)(e,[{key:"text",value:function(e){return this.parse(e).toString()}},{key:"parse",value:function(e,t,n){var r=new no;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!=n&&n,null!=t&&t),r}},{key:"parseFragment",value:function(e,t){var n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););var r=new Map,i=[];t.walk(function(e){return(0,tt._)(e,ne)&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0});var a=function(e,n){var i=r.get(e.index);if(i){var o=new ne(e.index);o.transform=e.transform;var s=!0,l=!1,u=void 0;try{for(var c,d=i[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value.clone();o.appendChild(f),(0,tt._)(f,ne)&&r.has(f.index)&&!n.has(f.index)&&(n.add(f.index),a(f,n),n.delete(f.index))}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}t.replace(e,[o])}},o=new Set,s=!0,l=!1,u=void 0;try{for(var c,d=i[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value;a(f,o)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return t.children.slice(n)}},{key:"ensureFinalTabstop",value:function(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find(function(e){return 0===e.index})||e.appendChild(new ne(0)))}},{key:"_accept",value:function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1}},{key:"_backTo",value:function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}},{key:"_until",value:function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r}},{key:"_parse",value:function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}},{key:"_parseEscaped",value:function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new t7(t)),!0)}},{key:"_parseTabstopOrVariableName",value:function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new ne(Number(t)):new ni(t)),!0):this._backTo(n)}},{key:"_parseComplexPlaceholder",value:function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var r=new ne(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new t7("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7))for(var i=new nt;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(n)}},{key:"_parseChoiceElement",value:function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(r)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new t7(n.join(""))),!0)}},{key:"_parseComplexVariable",value:function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var r=new ni(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new t7("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(n)}},{key:"_parseTransform",value:function(e){for(var t=new nn,n="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0)){n+=i=this._accept(6,!0)||i;continue}if(14!==this._token.type){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){var a=void 0;if(a=this._accept(5,!0)){a=this._accept(5,!0)||this._accept(6,!0)||a,t.appendChild(new t7(a));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(14!==this._token.type){r+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,r)}catch(e){return!1}return e.transform=t,!0}},{key:"_parseFormatString",value:function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var r=this._accept(8,!0);if(!r)return this._backTo(t),!1;if(!n)return e.appendChild(new nr(Number(r))),!0;if(this._accept(4))return e.appendChild(new nr(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new nr(Number(r),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){var a=this._until(4);if(a)return e.appendChild(new nr(Number(r),void 0,a,void 0)),!0}else if(this._accept(12)){var o=this._until(4);if(o)return e.appendChild(new nr(Number(r),void 0,void 0,o)),!0}else if(this._accept(13)){var s=this._until(1);if(s){var l=this._until(4);if(l)return e.appendChild(new nr(Number(r),void 0,s,l)),!0}}else{var u=this._until(4);if(u)return e.appendChild(new nr(Number(r),void 0,void 0,u)),!0}return this._backTo(t),!1}},{key:"_parseAnything",value:function(e){return 14!==this._token.type&&(e.appendChild(new t7(this._scanner.tokenText(this._token))),this._accept(void 0),!0)}}],[{key:"escape",value:function(e){return e.replace(/\$|}|\\/g,"\\$&")}},{key:"asInsertText",value:function(t){return new e().parse(t).toString()}},{key:"guessNeedsClipboard",value:function(e){return/\${?CLIPBOARD/.test(e)}}]),e}(),nl={Text:t7,Placeholder:ne,Variable:ni,FormatString:nr,Choice:nt},nu=function(){function e(t){(0,m._)(this,e),(0,x._)(this,"lines",void 0),this.lines=t.split(/\r\n?|\n/).map(function(e){return new ns().parse(e).children})}return(0,g._)(e,[{key:"apply",value:function(t){var n=t.view,r=t.from,i=t.to,a=e.instantiate(this.lines,t),o=a.text,s=a.ranges,l={from:r,to:i,insert:c.Text.of(o)},u={changes:l,scrollIntoView:!0,annotations:tZ.pickedCompletion.of(t.completion)};if(s.length&&(u.selection=ng(s,0)),s.length>1){var d=new nf(s,0),f=u.effects=[np.of(d)];void 0===n.state.field(nm,!1)&&f.push(c.StateEffect.appendConfig.of([nm,nx,ny]))}if(r===i&&!s.length){var p=c.ChangeSet.of(l,n.state.doc.length),h=n.state.selection.ranges.map(function(e){return e.map(p,0)});u.selection=c.EditorSelection.create(h,n.state.selection.mainIndex)}return u}}],[{key:"resolveVariable",value:function(e,t){var n=t.view,r=t.from,i=t.path;switch(e){case"TM_FILENAME":return(0,t3.basename)(i);case"TM_FILENAME_BASE":return(0,t3.basename)(i,(0,t3.extname)(i));case"TM_DIRECTORY":return(0,t3.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(n.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return n.state.doc.lineAt(r).number.toString();default:return e}}},{key:"instantiate",value:function(t,n){var r=n.view,i=n.from,a=r.state,o=[],s=[],l=a.doc.lineAt(i),u=/^\s*/.exec(l.text)[0],c=a.facet(tn.indentUnit),d=!0,f=!1,p=void 0;try{for(var h,m,g=t[Symbol.iterator]();!(d=(m=g.next()).done);d=!0)!function(){var t=m.value,r=0,a="",l=function(e){var t=0,n=r;if(0===r&&(t=/^\t*/.exec(e)[0].length)){var i=u+c.repeat(t);e=i+e.slice(t),n+=i.length}return a+=e,r+=e.length,{line:o.length,from:n,to:r}},d=function(t){var a=!0,u=!1,c=void 0;try{for(var f,p=t[Symbol.iterator]();!(a=(f=p.next()).done);a=!0)f.value.match({Text:function(e){l(e.value)},Variable:function(t){var r=t.name,i=t.transform,a=e.resolveVariable(r,n);i&&(a=a.replace(i.regexp,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.children.map(function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(t[e.index])}})}).filter(Boolean).join("")})),l(a)},Choice:function(e){l(e.options[0].value)},Placeholder:function(e){var t,n=o.length?i+o.map(function(e){return e.length}).reduce(function(e,t){return e+t}):i;if(null==(t=e.children)?void 0:t.length){var a={field:e.index,from:n+r,to:null};s.push(a),d(e.children),a.to=n+r}else{l("");var u=n+r;s.push({field:e.index,from:u,to:u})}}})}catch(e){u=!0,c=e}finally{try{a||null==p.return||p.return()}finally{if(u)throw c}}};d(t),o.push(a)}()}catch(e){f=!0,p=e}finally{try{d||null==g.return||g.return()}finally{if(f)throw p}}var x=(h=Math).max.apply(h,(0,es._)(s.map(function(e){return e.field})));return{text:o,ranges:s.map(function(e){var t=e.field,n=(0,t2._)(e,["field"]);return(0,tY._)((0,tK._)({},n),{field:0===t?x:t-1})})}}}]),e}(),nc=d.Decoration.widget({widget:new(function(e){function t(){return(0,m._)(this,t),(0,U._)(this,t,arguments)}return(0,G._)(t,e),(0,g._)(t,[{key:"toDOM",value:function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}},{key:"ignoreEvent",value:function(){return!1}}]),t}(d.WidgetType))}),nd=d.Decoration.mark({class:"cm-snippetField"}),nf=function(){function e(t,n){(0,m._)(this,e),(0,x._)(this,"ranges",void 0),(0,x._)(this,"active",void 0),(0,x._)(this,"deco",void 0),this.ranges=t,this.active=n,this.deco=d.Decoration.set(t.map(function(e){return(e.from===e.to?nc:nd).range(e.from,e.to)}))}return(0,g._)(e,[{key:"map",value:function(t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=this.ranges[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value,u=function(e,t){var n=t.mapPos(e.from,-1,c.MapMode.TrackDel),r=t.mapPos(e.to,1,c.MapMode.TrackDel);return null==n||null==r?null:{field:e.field,from:n,to:r}}(l,t);if(!u)return null;n.push(u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return new e(n,this.active)}},{key:"isSelectionInsideField",value:function(e){var t=this;return e.ranges.every(function(e){return t.ranges.some(function(n){return n.field===t.active&&n.from<=e.from&&n.to>=e.to})})}}]),e}(),np=c.StateEffect.define({map:function(e,t){return null==e?void 0:e.map(t)}}),nh=c.StateEffect.define(),nm=c.StateField.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t.effects[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.is(np))return s.value;if(s.is(nh)&&e)return new nf(e.ranges,s.value)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.isSelectionInsideField(t.selection)&&(e=null),e},provide:function(e){return d.EditorView.decorations.from(e,function(e){return e?e.deco:d.Decoration.none})}});function ng(e,t){var n=e.filter(function(e){return e.field===t}).map(function(e){return c.EditorSelection.range(e.from,e.to)});if(0!==n.length)return c.EditorSelection.create(n)}function nv(e){return function(t){var n,r=t.state,i=t.dispatch,a=r.field(nm,!1);if(!a||e<0&&0===a.active)return!1;var o=a.active+e,s=(n=Math).max.apply(n,(0,es._)(a.ranges.map(function(e){return e.field}))),l=e>0&&a.active>=s;return i(r.update({selection:ng(a.ranges,o),effects:np.of(l?null:new nf(a.ranges,o))})),!0}}var nx=c.Prec.highest(d.keymap.of([{key:"Tab",run:nv(1),shift:nv(-1)},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch;return!!t.field(nm,!1)&&(n(t.update({effects:np.of(null)})),!0)}}])),ny=d.EditorView.domEventHandlers({mousedown:function(e,t){var n,r=t.state.field(nm,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find(function(e){return e.from<=n&&e.to>=n});return!!i&&i.field!==r.active&&(t.dispatch({selection:ng(r.ranges,i.field),effects:np.of(r.ranges.some(function(e){return e.field>i.field})?new nf(r.ranges,i.field):null)}),!0)}}),nb=e.i(276822),nw=e.i(916271),n_=(0,P.cssRecord)({styles0:[{p:{whiteSpace:"pre-wrap"}}]}),nk={p:{padding:"".concat(W.tokens.space2," ").concat(W.tokens.space8),lineHeight:1.4,marginBottom:"".concat(W.tokens.space8," !important")},"p:first-of-type":{marginTop:"".concat(W.tokens.space4," !important")},"p:last-of-type":{marginBottom:"".concat(W.tokens.space4," !important")},pre:{margin:"".concat(W.tokens.space2," ").concat(W.tokens.space8)},"pre + p":{borderTop:"1px solid ".concat(W.tokens.outlineDimmest),paddingTop:W.tokens.space4},"h1, h2, h3":{margin:"".concat(W.tokens.space8," !important"),marginTop:"".concat(W.tokens.space12," !important"),padding:"0 !important",paddingBottom:"".concat(W.tokens.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(W.tokens.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(W.tokens.space4," !important")},hr:{margin:"".concat(W.tokens.space8," !important"),borderTop:"2px solid ".concat(W.tokens.backgroundHighest," !important")},li:{margin:"".concat(W.tokens.space2," ").concat(W.tokens.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(W.tokens.backgroundHighest),marginBottom:W.tokens.space4},".cm-line":{paddingLeft:W.tokens.space4,paddingRight:W.tokens.space4},".cm-content":{paddingLeft:W.tokens.space4,paddingRight:W.tokens.space4}},nS=(0,u.memo)(function(e){var t=e.content,n=e.className;return(0,y.jsx)(O.View,{css:nk,children:(0,y.jsx)(nw.default,{className:n,components:{code:function(e){return(0,y.jsx)(nb.default,(0,tK._)({minimal:!0,disableCopy:!0},e))}},children:t})})});function nC(e){var t=e.content,n=e.className;return"string"==typeof t?(0,y.jsx)(nS,{css:n_.styles0,className:n,content:t}):t.kind===t0.MarkupKind.PlainText?(0,y.jsx)(O.View,{children:(0,y.jsx)(q.Text,{className:n,children:t.value})}):(0,y.jsx)(nS,{className:n,content:t.value})}var nj=e.i(502379),nT=e.i(256969),nE=new WeakMap,nR=e.i(251119),nI=e.i(435396),nA=e.i(843553),nP="cm-ghostwriter-hint-tooltip",nD=d.EditorView.theme((0,x._)({".cm-ghostwriter-hint":{display:"none",width:"100%",backgroundColor:W.tokens.backgroundHigher,borderTop:"solid 1px ".concat(W.tokens.outlineDefault)}},".cm-tooltip-autocomplete.".concat(nP," .cm-ghostwriter-hint"),{display:"block"})),nO=(0,P.cssRecord)({hint:[D.rcss.font.default,{opacity:.6}]});function nN(){return(0,y.jsxs)(O.View,{css:nO.hint,p:4,row:!0,gap:8,align:"center",children:[(0,y.jsx)(nI.default,{width:8,height:8}),(0,y.jsxs)(O.View,{row:!0,gap:4,align:"center",children:[(0,y.jsx)(nA.default,{size:"small",dimmed:!1,shortcut:{key:"tab"}}),(0,y.jsx)(q.Text,{variant:"small",multiline:!1,children:"to use AI suggestion."})]})]})}var nM=d.ViewPlugin.define(function(e){var t=function(){var t,n,r;return(0,es._)(e.dom.children).concat((0,es._)(null!=(r=null==(n=nR.RootLevelTooltipsMap.get(e))||null==(t=n.children[0])?void 0:t.children)?r:[])).filter(function(e){return e.classList.contains("cm-tooltip-autocomplete")})},n=function(e){return Array.from(e.children).filter(function(e){return e.classList.contains("cm-ghostwriter-hint")})},r=!1;return{update:function(){null!==(0,tZ.completionStatus)(e.state)&&Promise.resolve().then(function(){if(!r){var e=!0,i=!1,a=void 0;try{for(var o,s=t()[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var l=o.value,u=n(l);if(0===u.length){var c=(0,S.createCodeMirrorElement)((0,y.jsx)(nN,{}));c.className="cm-ghostwriter-hint",l.appendChild(c)}}}catch(e){i=!0,a=e}finally{try{e||null==s.return||s.return()}finally{if(i)throw a}}}})},destroy:function(){var e=!0,i=!1,a=void 0;try{for(var o,s=t()[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var l=o.value,u=!0,c=!1,d=void 0;try{for(var f,p=n(l)[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;l.removeChild(h)}}catch(e){c=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}}}catch(e){i=!0,a=e}finally{try{e||null==s.return||s.return()}finally{if(i)throw a}}r=!0}}});function nL(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}var nB="lsp-completion-keyboard-shortcuts",nV=d.EditorView.theme((l={"& .cm-tooltip-autocomplete":{"& > *":{marginRight:4},"& > *:last-child":{marginRight:0},"& .cm-completionLabel":{flexGrow:1,flexShrink:1,overflowX:"auto",textOverflow:"ellipsis"},"& .cm-completionDetail":{color:W.tokens.foregroundDimmer,fontSize:"85%",marginLeft:"unset"}}},(0,x._)(l,"& .".concat(nB),{display:"none"}),(0,x._)(l,'& [aria-selected="true"] .'.concat(nB),{float:"right",display:"inline-block"}),l)),nF=e.i(918323),nU=e.i(496216),nG=e.i(507374),n$=e.i(738705),nH=e.i(785707),nz=e.i(546284),nW=new(function(e){function t(){var e;return(0,m._)(this,t),(e=(0,U._)(this,t)).elementClass="cm-gutterElement-hidden",e}return(0,G._)(t,e),(0,g._)(t,[{key:"toDOM",value:function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var t=document.createElement("span");return t.classList.add("cm-dot"),e.appendChild(t),e}}]),t}(d.GutterMarker)),nq=function(e){function t(e){var n;return(0,m._)(this,t),n=(0,U._)(this,t),(0,x._)(n,"numLines",void 0),n.numLines=e,n}return(0,G._)(t,e),(0,g._)(t,[{key:"eq",value:function(e){return e.numLines===this.numLines}},{key:"toDOM",value:function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,nz.default)("line",this.numLines)),e.className="cm-hidden-lines",e}}]),t}(d.WidgetType),nK=d.Decoration.mark({class:"cm-searchResultMatch"}),nY=d.EditorView.baseTheme({".cm-hidden-lines":{color:W.tokens.foregroundDimmer,backgroundColor:W.tokens.backgroundHighest,display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:W.tokens.backgroundHighest},".cm-hidden-lines-gutter":{backgroundColor:W.tokens.backgroundHighest,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:W.tokens.foregroundDimmest,borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid ".concat(W.tokens.backgroundHighest),borderRadius:W.tokens.borderRadius4},".cm-tooltip .cm-scroller:hover":{border:"2px solid ".concat(W.tokens.accentPrimaryDimmest),boxShadow:W.tokens.shadow1,cursor:"pointer"},".cm-searchResultMatch":{color:W.tokens.foregroundDefault,backgroundColor:W.tokens.accentPrimaryDimmest,outline:W.tokens.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:W.tokens.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}}),nQ=e.i(221250),nX=e.i(542101),nZ=e.i(967629),nJ=(0,nZ.css)({scrollbarWidth:"thin",outline:"none",overflow:"auto",".cm-content":{paddingBottom:0},"::-webkit-scrollbar":{width:4},".cm-gutters":{minWidth:"unset"}}),n0=(0,nZ.css)({overflow:"hidden",".cm-scroller":{overflow:"hidden"}}),n1={root:D.rcss.backgroundColor.backgroundRoot,higher:D.rcss.backgroundColor.backgroundHigher,highest:D.rcss.backgroundColor.backgroundHighest,default:D.rcss.backgroundColor.backgroundDefault},n2=new C.ReactCompartment(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,d.lineNumbers)({formatNumber:function(t,n){for(var r=String(n.doc.lines).length,i=String(t+e-1);r>i.length;)i=""+i;return i}})});function n3(e){var t=e.path,n=e.initialDoc,r=e.maxHeight,i=e.minHeight,a=e.extensions,o=e.allowScroll,s=e.fontSize,l=e.hideGutter,c=e.startLineNumber,d=e.style,f=e.elevation,p=e.onNavigateToCode,h=(0,nX.default)(),m=h.ref,g=h.view,x=(0,u.useMemo)(function(){var e;return e=n1[null!=f?f:"default"],(0,nZ.css)({".cm-editor":e,".cm-gutters":e})},[f]),b=n2.use(c);return(0,y.jsx)("div",{style:d,children:(0,y.jsx)(nQ.default,{ref:m,initialDoc:n,css:[nJ,x,void 0===o||o?null:n0],extensions:[b,void 0===a?[]:a],style:{minHeight:i,maxHeight:null!=r?r:"10em"},hideGutter:l,filePath:t,fontSize:s,readOnly:!0,onClick:function(e){if(p&&g){var t=e.clientX,n=e.clientY,r=g.posAtCoords({x:t,y:n});p(null!==r?(0,nj.offsetToPos)(g.state.doc,r):null)}}})})}var n5=e.i(167392),n4=e.i(269848),n8=e.i(672963),n6=e.i(630818),n7=(0,P.cssRecord)({snippetGroupText:[D.rcss.pl(8),D.rcss.py(8)],loadingContainer:[D.rcss.width(128),D.rcss.height(128),D.rcss.display.flex,D.rcss.align.center,D.rcss.justify.center],container:[D.rcss.minWidth("375px"),D.rcss.maxWidth("500px"),D.rcss.pt(4),D.rcss.overflowY("scroll")],firstReferenceDivider:[D.rcss.border({direction:"bottom",color:W.tokens.backgroundHighest})],header:[D.rcss.p(4),D.rcss.pl(8)],referencesHeader:[D.rcss.p(4),D.rcss.pl(8)]}),n9=((r=n9||{}).DEFINITION="DEFINITION",r.REFERENCES="REFERENCES",r);function re(e){var t=e.matchesMap,n=e.fileToContents,r=e.type,i=e.onClose,a=e.jumpToPosition,o=Object.keys(t);return 0===o.length?(0,y.jsx)(q.Text,{color:"dimmer",css:n7.snippetGroupText,multiline:!1,children:"REFERENCES"===r?"No references found":"No definitions found"}):(0,y.jsx)(O.View,{children:o.map(function(e){var r,s,l,u,f,p,h,m,g,x,b,w=t[e],_=n[e],k=(b=(x=w.sort(function(e,t){return e.from-t.from})).map(function(e){var t=e.from,n=e.to;return nK.range(t,n)}),[d.ViewPlugin.define(function(){return{}},{decorations:function(){return d.Decoration.set(b)}}),(r=x,s=_,l=[],u=1,r.forEach(function(e,t){var n=s.lineAt(e.from),i=s.lineAt(e.to);u<n.number-2&&l.push({startLine:u,endLine:n.number-2}),u=i.number+2,t===r.length-1&&u<s.lines&&l.push({startLine:u,endLine:s.lines})}),f=l.map(function(e){var t=s.line(e.startLine),n=s.line(e.endLine);return d.Decoration.replace({widget:new nq(e.endLine-e.startLine+1)}).range(t.from,n.to)}),p=l.map(function(e){var t=s.line(e.startLine);return d.Decoration.line({class:"cm-line-hidden"}).range(t.from)}),h=c.StateField.define({create:function(){return d.Decoration.set(f)},update:function(e){return e},provide:function(e){return d.EditorView.decorations.from(e)}}),m=c.StateField.define({create:function(){return d.Decoration.set(p)},update:function(e){return e},provide:function(e){return d.EditorView.decorations.from(e)}}),g=l.map(function(e){var t=s.line(e.startLine);return nW.range(t.from)}),[h,m,nY,d.lineNumberMarkers.of(c.RangeSet.of(g))])]);return(0,y.jsx)(O.View,{p:4,children:(0,y.jsx)(rr,{path:e,extensions:[k],doc:_,numMatches:w.length,initiallyExpanded:1===o.length,onNavigateToCode:function(t){if(null!==t)a({path:e,line:t.line+1,col:t.character});else{var n=(0,tQ._)(w,1)[0],r=_.lineAt(n.from),o=n.from-r.from;a({path:e,line:r.number,col:o})}i()}})},e)})})}function rt(e){var t=e.onClose,n=e.references,r=e.definitions,i=e.jumpToPosition,a=(0,t$.default)().fs,o=(0,n8.default)(t,[]),s=(0,tQ._)((0,u.useState)({}),2),l=s[0],d=s[1],f=(0,tQ._)((0,u.useState)(!0),2),p=f[0],h=f[1];if((0,u.useEffect)(function(){var e=new Set((0,es._)(n).concat((0,es._)(r)).map(function(e){return e.path}));if(!e.size)return void h(!1);var t=!1;return(0,eD._)(function(){var n;return(0,eO._)(this,function(r){switch(r.label){case 0:return h(!0),n={},[4,Promise.all(Array.from(e).map(function(e){return(0,eD._)(function(){var t;return(0,eO._)(this,function(r){switch(r.label){case 0:return[4,a.readFile(e)];case 1:if((t=r.sent()).error)throw Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(t.error));return n[e]=c.Text.of(t.content.toString().split("\n")),[2]}})})()}))];case 1:if(r.sent(),h(!1),t)return[2];return d(function(e){return(0,tK._)({},e,n)}),[2]}})})(),function(){t=!0}},[a,n,r]),p)return(0,y.jsx)(O.View,{css:n7.loadingContainer,children:(0,y.jsx)(n4.default,{size:32})});var m={},g={};function x(e,t){var n=e.range,r=n.start,i=n.end;e.path in t||(t[e.path]=[]);var a=l[e.path],o=a.line(r.line+1),s=a.line(i.line+1);t[e.path].push({from:o.from+r.character,to:s.from+i.character})}return n.forEach(function(e){x(e,m)}),r.forEach(function(e){x(e,g)}),(0,y.jsxs)(O.View,{innerRef:o,css:n7.container,children:[(0,y.jsx)(O.View,{css:n7.firstReferenceDivider,children:(0,y.jsxs)(O.View,{p:4,children:[(0,y.jsxs)(O.View,{pr:4,row:!0,justify:"space-between",align:"center",children:[(0,y.jsx)(q.Header,{level:2,variant:"subheadDefault",css:n7.header,children:"Definitions"}),(0,y.jsx)(Y.IconButton,{alt:"Close",onClick:t,children:(0,y.jsx)(z.default,{})})]}),(0,y.jsx)(re,{matchesMap:g,fileToContents:l,type:"DEFINITION",onClose:t,jumpToPosition:i})]})}),(0,y.jsx)(O.View,{children:(0,y.jsxs)(O.View,{p:4,children:[(0,y.jsx)(q.Header,{level:2,variant:"subheadDefault",css:n7.referencesHeader,children:"References"}),(0,y.jsx)(re,{matchesMap:m,fileToContents:l,type:"REFERENCES",onClose:t,jumpToPosition:i})]})})]})}var rn=(0,P.cssRecord)({container:[D.rcss.width("100%"),D.rcss.p(4),D.rcss.rowWithGap(4),D.rcss.justify.spaceBetween,D.rcss.align.center],text:[D.rcss.flex.shrink(1),{textOverflow:"ellipsis"}]});function rr(e){var t=e.path,n=e.doc,r=e.extensions,i=e.numMatches,a=e.onNavigateToCode,o=e.initiallyExpanded,s=(0,tQ._)((0,u.useState)(o),2),l=s[0],c=s[1];return(0,y.jsxs)(O.View,{children:[(0,y.jsxs)(O.View,{css:rn.container,children:[(0,y.jsxs)(O.View,{grow:!0,row:!0,gap:8,align:"center",children:[(0,y.jsx)(n6.default,{path:t}),(0,y.jsx)(q.Text,{multiline:!1,title:t,css:rn.text,children:t}),(0,y.jsx)(q.Text,{color:"dimmest",multiline:!1,children:(0,nz.default)("match",i,!0)})]}),(0,y.jsx)(Y.IconButton,{alt:l?"Collapse snippet":"Expand snippet",tooltipBehavior:"hidden",onClick:function(){return c(function(e){return!e})},children:(0,y.jsx)(n5.default,{rotate:180*!!l,style:{transition:"200ms ease"}})})]}),(0,y.jsx)(O.View,{p:4,style:{display:l?"block":"none"},children:(0,y.jsx)(n3,{path:t,initialDoc:n,extensions:void 0===r?[]:r,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:a})})]})}var ri=e.i(446749),ra=e.i(206586),ro=e.i(242719),rs=e.i(61524);function rl(e){var t=e.content,n=e.className,r=(0,rs.usePreferences)("fontSize").preferences;if("string"!=typeof t&&"kind"in t)return(0,y.jsx)(nC,{content:t});var i=(Array.isArray(t)?t:[t]).map(function(e){return"string"==typeof e?e:"```"+e.language+"\n"+e.value+"\n```"}).join("\n");return(0,y.jsx)(nw.default,{css:[{p:{fontSize:r.fontSize},hr:{display:"none"}}],className:n,components:{code:function(e){return(0,y.jsx)(nb.default,(0,tK._)({minimal:!0,disableCopy:!0},e))}},children:i})}function ru(e){var t=e.className,n=e.content;return(0,y.jsx)(O.View,{css:[nk,D.rcss.maxHeight(190),D.rcss.minHeight(30),D.rcss.overflowY("auto"),D.rcss.borderRadius(4),D.rcss.backgroundColor.backgroundHigher],children:(0,y.jsx)(rl,{content:n,className:t})})}var rc=e.i(863790),rd=e.i(78866),rf=e.i(235387),rp=e.i(223808),rh=e.i(969932);function rm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=c.StateEffect.define(),r=c.StateField.define({create:function(){return t},update:function(t,r){return(0,rh.forEachEffect)(r,n,function(n){t=e(n.value,t)}),t}});return{effect:n,state:r}}e.s(["StateEffectField",()=>rm],275072);var rg=rm(),rv=c.StateEffect.define(),rx=c.StateField.define({create:function(){return null},update:function(e,t){if(t.isUserEvent("select")||t.isUserEvent("undo")||t.isUserEvent("redo"))return null;if(!t.isUserEvent("input.type")||t.changes.empty)return e;var n="";return t.changes.iterChanges(function(e,t,r,i,a){n=a.sliceString(0,1)}),n||null}}),ry=new S.CodeMirrorComponent(function(e){var t,n,r=e.help,i=e.index,a="1px solid ".concat(W.tokens.outlineDimmer),o="min(425px, 80vw)",s=r.signatures[i],l=r.signatures.length>1;if(!s)return null;var u=s.documentation,c=null!=r.activeParameter&&(null==(n=s.parameters)||null==(t=n[r.activeParameter])?void 0:t.documentation);return(0,y.jsxs)(O.View,{css:[D.rcss.backgroundColor.backgroundHigher,{width:"max-content"}],row:!0,children:[l?(0,y.jsx)(O.View,{css:[{borderRight:a,paddingBottom:5}],pl:4,row:!0,children:(0,y.jsxs)("span",{css:[{alignSelf:"flex-end"},D.rcss.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,y.jsxs)(O.View,{children:[(0,y.jsx)(O.View,{css:[D.rcss.pl(l?4:8),D.rcss.pr(8),D.rcss.maxHeight(100),D.rcss.overflowY("scroll"),D.rcss.font.code,{lineHeight:W.tokens.lineHeightSmall,maxWidth:o}],py:4,children:(0,y.jsx)(rb,{signature:s,activeParameter:r.activeParameter})}),!!(u||c)&&(0,y.jsxs)(O.View,{css:[D.rcss.px(l?4:8),D.rcss.py(2),D.rcss.maxHeight(200),D.rcss.overflow("scroll"),{borderTop:a,maxWidth:o}],children:[c?(0,y.jsx)(nC,{content:c}):null,u?(0,y.jsx)(nC,{content:u}):null]})]})]})});function rb(e){var t,n=e.signature,r=n.label,i=n.parameters,a=e.activeParameter;if(null==a||!i)return(0,y.jsx)("span",{children:r});var o=null==(t=i[a])?void 0:t.label;if(!o)return(0,y.jsx)("span",{children:r});var s=(0,tQ._)("string"==typeof o?[r.indexOf(o),r.indexOf(o)+o.length]:o,2),l=s[0],u=s[1];return(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{children:r.slice(0,l)}),(0,y.jsx)("strong",{children:o}),(0,y.jsx)("span",{children:r.slice(u)})]})}var rw=e.i(15053),r_=e.i(577811),rk=new Map;function rS(e,t,n){if(!t.length)return[];var r,i,a,o,s,l,u=[(i=(r={lspClients:t,path:n}).lspClients,a=r.path,d.ViewPlugin.define(function(e){var t,n,r,o,s,l;return n=(t={lspClients:i,path:a,view:e}).lspClients,r=t.path,o=t.view,s=(0,rw.v4)(),l=function(e){var t,n=rk.get(e.clientId);return(null!=(t=null==n?void 0:n.get(r))?t:[])[0]===s},!function(){var e=!0,t=!1,i=void 0;try{for(var a,l=n[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var u,c=a.value,d=rk.get(c.clientId),f=null!=(u=null==d?void 0:d.get(r))?u:[];d?d.set(r,(0,es._)(f).concat([s])):rk.set(c.clientId,new Map([[r,[s]]])),c.notify.didOpen(r,o.state.doc.toString())}}catch(e){t=!0,i=e}finally{try{e||null==l.return||l.return()}finally{if(t)throw i}}}(),{id:s,destroy:function(){var e=!0,t=!1,i=void 0;try{for(var a,o=n[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l,u=a.value,c=rk.get(u.clientId),d=(null!=(l=null==c?void 0:c.get(r))?l:[]).filter(function(e){return e!==s});u.getServerState()===r_.ServerState.INITIALIZED&&u.isOpen(r)&&u.notify.didClose(r),0===d.length?null==c||c.delete(r):null==c||c.set(r,d)}}catch(e){t=!0,i=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw i}}},update:function(e){if(e.docChanged){var t=!0,i=!1,a=void 0;try{for(var o,s,u=n[Symbol.iterator]();!(t=(s=u.next()).done);t=!0){var c,d=s.value;if(l(d)){var f=null==(c=d.getServerCapabilities())?void 0:c.textDocumentSync;if(f!==tX.TextDocumentSyncKind.None&&d.isOpen(r)){if(f===tX.TextDocumentSyncKind.Full){d.notify.didChange(r,[{text:e.view.state.doc.toString()}]);continue}o||(o=function(e,t){var n=[],r=t;return e.iterChanges(function(e,t,i,a,o){var s=o.sliceString(0),l=t-e,u=l+i;n.push({range:{start:(0,nj.offsetToPos)(r,i),end:(0,nj.offsetToPos)(r,u)},rangeLength:l,text:s}),r=r.replace(i,u,o)}),n}(e.changes,e.startState.doc)),d.notify.didChange(r,o)}}}}catch(e){i=!0,a=e}finally{try{t||null==u.return||u.return()}finally{if(i)throw a}}}}}})),(0,nU.createDiagnosticsPlugin)({lspClients:t,path:n}),function(e,t){function n(e){return(0,nT.default)(e).isTextDocumentSyncSupported}return d.ViewPlugin.fromClass(function(){function r(e){(0,m._)(this,r),(0,x._)(this,"dispose",void 0),this.dispose=this.listen(e.state.facet(J.fileName))}return(0,g._)(r,[{key:"update",value:function(e){(0,f.hasChanged)(e,J.fileName)&&(this.dispose=this.listen(e.state.facet(J.fileName)))}},{key:"destroy",value:function(){this.dispose&&this.dispose()}},{key:"listen",value:function(r){if((this.dispose&&this.dispose(),r)&&t.find(function(e){return n(e)}))return e.watchTextFile(r,{onFlush:function(){var e=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var l=o.value;if(n(l))(0,nT.default)(l).isTextDocumentSyncSaveSupported&&l.isOpen(r)&&l.notify.didSave(r)}}catch(e){i=!0,a=e}finally{try{e||null==s.return||s.return()}finally{if(i)throw a}}}})}}]),r}())}(e,t),(0,tq.createDocumentSymbolsExtenstion)(t)];return(0,tW.isMobile)()?u:(u.push([nV,nD,nM,(0,tZ.autocompletion)({defaultKeymap:!1,closeOnBlur:!1,tooltipClass:function(e){return(0,_.hasPresentedSuggestion)(e)?nP:""},addToOptions:[{render:function(e,t){if(!(0,_.hasPresentedSuggestion)(t))return null;var n=(0,S.createCodeMirrorElement)((0,y.jsx)("div",{className:nB,children:(0,y.jsx)(nA.default,{size:"inherit",shortcut:{key:""}})}));return n.style.display="inline-flex",n},position:200}],override:t.map(function(e){var t,n,r;return(0,tZ.ifNotIn)(["LineComment","BlockComment"],(t=.01>Math.random(),n=0,r=function(n,r,i){if(t&&r){var a=e.getLanguageId(r);return eB.logger.info("lsp:autocomplete:".concat(n),(0,tK._)({languageId:a},i)),(0,E.track)(j.events.LSP_COMPLETION_USED,(0,tK._)({type:n,sampleRate:.01},i))}},function(t){return(0,eD._)(function(){var i,a,o,s,l,u,d,f,p,h;return(0,eO._)(this,function(m){switch(m.label){case 0:if(!(a=e.getServerCapabilities())||!(null==a?void 0:a.completionProvider)||!(o=function(e,t){var n=e.state,r=e.pos;if(e.explicit)return{triggerKind:tX.CompletionTriggerKind.Invoked};var i=n.doc.lineAt(r),a=i.text[r-i.from-1],o=i.text.substring(0,r-i.from);return(null==t?void 0:t.includes(a))?{triggerKind:tX.CompletionTriggerKind.TriggerCharacter,triggerCharacter:a}:o.match(/\w$/)?{triggerKind:tX.CompletionTriggerKind.Invoked}:null}(t,(null==a||null==(i=a.completionProvider)?void 0:i.triggerCharacters)||[])))return[2,null];if(n&&e.notify.cancelRequest(n),!(s=t.state.facet(J.fileName)))throw Error("path not found");return n=e.generateId(),l=t.state.doc,[4,e.request.completion(s,(0,nj.offsetToPos)(l,t.pos),o,{id:n})];case 1:if("error"in(u=m.sent())||(d=u.result,t.aborted||!d))return[2,null];return f=Array.isArray(d)?d:d.items,h=Array.isArray(d)?{}:null!=(p=d.itemDefaults)?p:{},[2,function(e){for(var t,n=e.context,r=e.items,i=e.itemDefaults,a=e.client,o=e.trackCompletion,s=e.startingDoc,l=null,u=function(){return l},d=(R=r.filter(function(e){return!!e.label}),I=["label","kind"],A=new Set,R.filter(function(e){var t=I.map(function(t){return e[t]}).join("");return!A.has(t)&&(A.add(t),!0)})).map(function(e){return{item:e,label:e.label,filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()}}),f=((d=d.sort(function(e,t){return e.sortText<t.sortText?-1:+(e.sortText>t.sortText)})).length%2?d.length-1:d.length)/2,p=0;p<=f;p++){if(0===p&&d[f]){d[f].boost=0;continue}var h=d[f-p];if(h){var m=d[f-p+1],g=m.sortText,x=m.boost,b=void 0===x?0:x;h.boost=h.sortText===g?b:b+1}var w=d[f+p];if(w){var _=d[f+p-1],k=_.sortText,C=_.boost,j=void 0===C?0:C;w.boost=w.sortText===k?j:j-1}}var T=null!=(O=null==(P=d[0])?void 0:P.boost)?O:0,E=null!=(N=null==(D=d[d.length-1])?void 0:D.boost)?N:0;if(T>99||E<-99)for(var R,I,A,P,D,O,N,M,L=99/Math.max(Math.abs(T),Math.abs(E)),B=0;B<d.length;B++)d[B].boost=(null!=(M=d[B].boost)?M:0)*L;var V=(0,tQ._)(function(e){var t=Object.create(null),n=Object.create(null),r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value.filterText;t[l[0]]=!0;for(var u=1;u<l.length;u++)n[l[u]]=!0}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var c=nL(t)+nL(n)+"*$";return[RegExp("^"+c),new RegExp(c)]}(d),2),F=V[0],U=V[1],G=n.matchBefore(U),$=n.pos;function H(e,t){var n,r,l,d,f,p,h,m,g,x,b,w,_,k;return g=t.state.facet(J.fileName),x=null!=(f=(0,tJ.default)(t.state))?f:"unknown",b=(0,nT.default)(a),w=e.item,_=e.boost,k={label:w.label,detail:b.isCompletionLabelDetailsSupported?null==(n=w.labelDetails)?void 0:n.description:w.detail,type:null==(r=Object.entries(t0.CompletionItemKind).find(function(e){var t=(0,tQ._)(e,2),n=(t[0],t[1]);return w.kind===n}))?void 0:r[0].toLowerCase(),commitCharacters:t.state.facet(t1)?null!=(m=null!=(h=null!=(p=w.commitCharacters)?p:i.commitCharacters)?h:null==(d=a.getServerCapabilities())||null==(l=d.completionProvider)?void 0:l.allCommitCharacters)?m:[]:void 0,boost:_},nE.set(k,e),k.apply=function(t,n,r,i){var l=function(e){var n=d?s:t.state.doc,r={from:(0,nj.posToOffset)(n,e.start),to:(0,nj.posToOffset)(n,e.end)};return d&&(r.from=d.mapPos(r.from),r.to=d.mapPos(r.to)),r};if(g){var d=u(),f=null!=(h=null==(p=e.resolved)?void 0:p.additionalTextEdits)?h:w.additionalTextEdits;if(w.insertTextFormat===t0.InsertTextFormat.Snippet){var p,h,m,y,b,_=null;f&&(_={changes:f.map(function(e){return(0,tY._)((0,tK._)({},l(e.range)),{insert:e.newText})})});var k=new nu(null!=(b=null!=(y=null==(m=w.textEdit)?void 0:m.newText)?y:w.insertText)?b:w.label);if(w.textEdit&&"range"in w.textEdit){var S=i,C=l(w.textEdit.range);r=C.from,i=Math.max(i=C.to,S)}var j=_?[_,k.apply({view:t,from:r,to:i,path:g,completion:n})]:[k.apply({view:t,from:r,to:i,path:g,completion:n})];t.dispatch.apply(t,(0,es._)(j)),o("completion-accepted",g,{language:x,completionKind:w.kind,insertTextFormat:w.insertTextFormat});return}var T=[];if(w.textEdit){if(!("range"in w.textEdit))return;var E=l(w.textEdit.range);T.push((0,tY._)((0,tK._)({},E),{to:Math.max(E.to,t.state.selection.main.to),insert:w.textEdit.newText}))}else{var R=w.insertText||w.label,I=t.state.wordAt(i);I&&I.to>i&&R.includes(t.state.doc.sliceString(i,I.to))&&(i=I.to),T.push({from:r,to:i,insert:R})}var A=(0,tQ._)(T,1)[0],P="";null==f||f.forEach(function(e){var t=l(e.range);"from"in A&&t.from===A.from&&(P=e.newText),T.push((0,tY._)((0,tK._)({},t),{insert:e.newText}))});var D=i-r;t.state.selection.ranges.forEach(function(e){if(e!==t.state.selection.main){if(!("insert"in A)||!A.insert)throw Error("Expected insert in mainChange");var n=e.from-D,r=P+A.insert;T.push({from:n,to:e.to,insert:r})}});var O=c.ChangeSet.of(T.map(function(e){return"from"in e&&void 0!==e.to?(0,tY._)((0,tK._)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e}),t.state.doc.length);o("completion-accepted",g,{language:x,completionKind:w.kind,insertTextFormat:w.insertTextFormat}),t.dispatch({annotations:tZ.pickedCompletion.of(n),changes:O,selection:c.EditorSelection.create(t.state.selection.ranges.map(function(e){return e.map(O,0)}),t.state.selection.mainIndex)}),w.command&&a.request.executeCommand(w.command.command,w.command.arguments)}},b.isCompletionItemResolveSupported&&(k.info=function(){return(0,eD._)(function(){var t,n,r,i,s,l,u;return(0,eO._)(this,function(c){switch(c.label){case 0:if(n=null!=(t=e.resolved)?t:null)return[3,2];return[4,a.request.resolveCompletionItem(w)];case 1:if(n="result"in(r=c.sent())?r.result:null,r.cancelled||null===n)return[2,null];e.resolved=n,c.label=2;case 2:if(i=Math.floor(0x7fffffff*Math.random()),s=[],g&&n.detail&&n.detail!==w.detail&&n.detail!==w.label&&(u=["```"+((l=g.lastIndexOf("."))>=0?g.slice(l+1):"md"),n.detail,"```"].join("\n"),s.push((0,y.jsx)(nC,{className:n.documentation?"lsp-completion-detail":void 0,content:{value:u,kind:"markdown"}},"".concat(i,"-detail")))),n.documentation&&s.push((0,y.jsx)(nC,{content:n.documentation},"".concat(i,"-documentation"))),0===s.length)return[2,null];return o("resolution-presented",g,{language:x,resolutionSource:"request",completionKind:w.kind}),[2,{dom:(0,S.createCodeMirrorElement)((0,y.jsx)("div",{children:s}))}]}})})()}),k}return G&&($=G.from),d.length&&o("completion-options-presented",n.state.facet(J.fileName),{language:null!=(t=(0,tJ.default)(n.state))?t:"unknown"}),{from:$,options:d.map(function(e){return H(e,n)}),validFor:F,update:function(e,t,n,r){return(0,tY._)((0,tK._)({},e),{options:e.options.map(function(e){var t,n=null!=(t=nE.get(e))?t:null;return n?H(n,r):e})})},map:function(e,t){return l=l?l.composeDesc(t):t,e}}}({context:t,startingDoc:l,items:f,itemDefaults:h,client:e,trackCompletion:r})]}})})()}))})})],function(e){var t={current:new Map},n=c.StateField.define({create:function(){return null},update:function(e,t){return t.isUserEvent("select.pointer")?null:(e&&t.newSelection.main.from!==e.pos&&(e=(0,tY._)((0,tK._)({},e),{pos:t.newSelection.main.from})),(0,rh.forEachEffect)(t,rg.effect,function(n){var r=n.value;e=r?{pos:t.newSelection.main.from,help:r,index:0}:null}),(0,rh.forEachEffect)(t,rv,function(t){var n=t.value;if(e){var r=e.help.signatures.length,i=(r+e.index+n)%r;e=i>=e.help.signatures.length||i<0?null:(0,tY._)((0,tK._)({},e),{index:i})}}),e)},provide:function(e){var t=function(t){var n=t.state.field(e);if(!n)throw Error("expected nonnull field");var r=ry.create({help:n.help,index:n.index});return{dom:r,update:function(t){ry.update(r,function(r){var i=t.state.field(e);return i&&i!==n?{help:i.help,index:i.index}:r})}}};return d.showTooltip.compute([e],function(n){var r=n.field(e);return r?{pos:r.pos,create:t,above:!0}:null})}}),r=d.ViewPlugin.define(function(){var r=(0,rp.default)(function(r){return(0,eD._)(function(){var i,a,o;return(0,eO._)(this,function(s){switch(s.label){case 0:var l,u;if(!(i=r.state.selection.main).empty)return[3,2];return a=r.state.field(rg.state,!1),[4,(l=r.state,u=i.from,(0,eD._)(function(){var r,i,a,o,s,c;return(0,eO._)(this,function(d){switch(d.label){case 0:var f,p,h,m,g;if(!(i=l.facet(J.fileName))||(a=l.field(n,!1),o=l.field(rx,!1),!(s=e.filter(function(e){var t,n,r,i=null!=(r=null==(n=e.getServerCapabilities())||null==(t=n.signatureHelpProvider)?void 0:t.triggerCharacters)?r:[];return!!i.length&&(!!a||!!o&&!!i.includes(o))&&!0})).length))return[2,null];return[4,(f=l,p=u,h=s,m=i,g=t,(0,eD._)(function(){return(0,eO._)(this,function(e){switch(e.label){case 0:return[4,Promise.all(h.map(function(e){return(0,eD._)(function(){var t,n;return(0,eO._)(this,function(r){return(t=g.current.get(e.clientId))&&e.notify.cancelRequest(t),n=e.generateId(),g.current.set(e.clientId,n),[2,e.request.signatureHelp(m,(0,nj.offsetToPos)(f.doc,p),{id:n}).then(function(t){return(g.current.get(e.clientId)===n&&g.current.set(e.clientId,null),"error"in t)?null:t.result})]})})()}))];case 1:return[2,e.sent().find(function(e){return null!==e&&e.signatures.length})]}})})())];case 1:if(!(null==(c=d.sent())||null==(r=c.signatures)?void 0:r.length))return[2,null];return[2,c]}})})())];case 1:(o=s.sent())&&!a&&(0,tZ.closeCompletion)(r),r.dispatch({effects:rg.effect.of(o)}),s.label=2;case 2:return[2]}})})()},0);return{update:function(t){e.some(function(e){return(0,nT.default)(e).isSignatureHelpSupported})&&t.selectionSet&&t.state.selection.main.empty&&r(t.view)}}});function i(e,t){var n=e.state.field(rg.state,!1);return"active"!==(0,tZ.completionStatus)(e.state)&&null!=n&&("navigate"!==t||n.signatures.length>1)}var a=function(e){return function(t){return!!i(t,"navigate")&&(t.dispatch({effects:rv.of(e)}),!0)}},o=[{key:"ArrowDown",run:a(1)},{key:"ArrowUp",run:a(-1)},{key:"Escape",run:function(e){return!!i(e,"dismiss")&&(e.dispatch({effects:rg.effect.of(null)}),!0)}}];return[n,rg.state,rx,r,c.Prec.high(d.keymap.of(o))]}(t),(o=function(e){var t=null;return(0,d.hoverTooltip)(function(n,r){return(0,eD._)(function(){var i,a,o,s,l,u;return(0,eO._)(this,function(c){switch(c.label){case 0:if(n.state.facet(rc.ContextMenuVisible)||!(0,nT.default)(e).isHoverSupported||!(i=n.state.facet(J.fileName)))return[2,null];a=(0,nj.offsetToPos)(n.state.doc,r);try{o=n.state.wordAt(r)}catch(e){return[2,null]}if(t){if(t.from===(null==o?void 0:o.from)&&t.to===(null==o?void 0:o.to))return[2,null];e.notify.cancelRequest(t.id)}return t={id:s=e.generateId(),from:null==o?void 0:o.from,to:null==o?void 0:o.to},[4,e.request.hover(i,a,{id:s})];case 1:if(l=c.sent(),t=null,"error"in l||null===(u=l.result))return[2,null];return[2,function(e){var t,n,r=e.hover,i=e.state,a=e.offset;if((Array.isArray(r.contents)||"string"==typeof r.contents)&&0===r.contents.length)return null;var o="",s=i.doc;if(r.range)t=(0,nj.posToOffset)(s,r.range.start),n=(0,nj.posToOffset)(s,r.range.end),o=s.sliceString(t,n);else if(n=void 0,(t=a)<=i.doc.length){var l=i.wordAt(t);l?(o=s.sliceString(l.from,l.to),t=Math.min(t,l.from),n=l.to):o=s.sliceString(t,t+1)}return{pos:t,end:n,create:function(e){var t=(0,S.createCodeMirrorElement)((0,y.jsx)(ru,{content:r.contents,textHovered:o}));return t.classList.add("hover-tooltip"),t.style.padding="0",{dom:t,mount:function(){var t;t=function(){(0,d.repositionTooltips)(e)},[0,50,200,1e3].forEach(function(e){return setTimeout(t,e)})}}},above:!0}}({hover:u,offset:r,state:n.state})]}})})()},{hideOn:function(e){return!e.annotation(c.Transaction.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select")||e.state.facet(rc.ContextMenuVisible))},hoverTime:0})},[c.Prec.highest(t.map(function(e){return o(e)})),d.EditorView.domEventObservers({mousedown:function(e,t){!((0,tt._)(e.target,HTMLElement)&&e.target.matches(".cm-tooltip *"))&&(0,d.hasHoverTooltips)(t.state)&&t.dispatch({effects:d.closeHoverTooltips})},keydown:function(e,t){"Escape"===e.key&&(0,d.hasHoverTooltips)(t.state)&&t.dispatch({effects:d.closeHoverTooltips})},scroll:function(e,t){(0,d.hasHoverTooltips)(t.state)&&t.dispatch({effects:d.closeHoverTooltips})}})]),(0,nF.createCodeActionsExtension)(t,e),(0,rd.createJumpToDefinitionExtension)({lspClients:t}),(s=c.StateEffect.define(),l=c.StateEffect.define(),[d.EditorView.updateListener.of(function(e){return(0,eD._)(function(){var n,r,i,a,o,u,c,d,f,p,h,m,g,x,y,b,w,_,k,S,C,j,T,E,R,I,A,P,D,O,N,M,L;return(0,eO._)(this,function(B){switch(B.label){case 0:if(!t.some(function(e){var t=(0,nT.default)(e);return t.isFindReferencesSupported||t.isFindDefinitionSupported}))return[2];n=null,r=!0,i=!1,a=void 0;try{for(o=e.transactions[Symbol.iterator]();!(r=(u=o.next()).done);r=!0){c=u.value,d=!0,f=!1,p=void 0;try{for(h=c.effects[Symbol.iterator]();!(d=(m=h.next()).done);d=!0)(g=m.value).is(nH.findDefinitionsAndReferences)&&(n=g.value)}catch(e){f=!0,p=e}finally{try{d||null==h.return||h.return()}finally{if(f)throw p}}}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}if(!n||!(x=e.view.state.facet(J.fileName)))return[2];y=e.state.doc,b=(0,nj.offsetToPos)(y,n),w=[],_=!0,k=!1,S=void 0;try{for(C=function(){var e=T.value,t=(0,nT.default)(e);t.isFindDefinitionSupported&&w.push(e.request.findDefinitions(x,b).then(function(t){return{client:e,response:t,type:"definition"}})),t.isFindReferencesSupported&&w.push(e.request.findReferences(x,b,{includeDeclaration:!1}).then(function(t){return{client:e,response:t,type:"references"}}))},j=t[Symbol.iterator]();!(_=(T=j.next()).done);_=!0)C()}catch(e){k=!0,S=e}finally{try{_||null==j.return||j.return()}finally{if(k)throw S}}return E=Promise.all(w),(0,n$.bindLoading)(e.view,E),[4,E];case 1:R=B.sent(),I=[],A=[],P=!0,D=!1,O=void 0;try{for(N=function(){var e=L.value,t=e.client,n=e.response,r=e.type;if("error"in n)throw Error("Something went wrong fetching references: ".concat(n.error.message));var i=(0,ra.normalizeDefinitionResult)(n.result);if(!i)return"continue";"definition"===r&&I.push.apply(I,(0,es._)(i.map(function(e){return(0,tY._)((0,tK._)({},e),{path:t.documentUriToPath(e.uri)})}))),"references"===r&&A.push.apply(A,(0,es._)(i.map(function(e){return(0,tY._)((0,tK._)({},e),{path:t.documentUriToPath(e.uri)})})))},M=R[Symbol.iterator]();!(P=(L=M.next()).done);P=!0)N()}catch(e){D=!0,O=e}finally{try{P||null==M.return||M.return()}finally{if(D)throw O}}if(!I.length&&!A.length)return(0,ri.showMessageTooltip)(e.view,{message:"No references found",offset:n}),e.view.dispatch({effects:l.of(null)}),[2];return e.view.dispatch({effects:s.of({references:A,definitions:I})}),[2]}})})()}),c.StateField.define({create:function(){return null},update:function(e,t){var n=e,r=!0,i=!1,a=void 0;try{for(var o,u=t.effects[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var c=o.value;c.is(s)&&(n=c.value),c.is(l)&&(n=null)}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n},provide:function(e){return[d.keymap.of([{key:"Escape",run:function(t){return!!t.state.field(e)&&(t.dispatch({effects:l.of(null)}),!0)}}]),d.showTooltip.compute([e],function(t){var n=t.field(e),r=t.facet(J.fileName);if(!n)return null;var i=t.selection.asSingle().main;return{pos:i.from,end:i.to,create:function(e){var t=(0,S.createCodeMirrorElement)((0,y.jsx)("div",{children:(0,y.jsx)(rt,(0,tY._)((0,tK._)({},n),{onClose:function(){e.dispatch({effects:l.of(null)})},jumpToPosition:function(t){if(t.path!==r)return void(0,ro.openFile)(e.state,{path:t,secondary:!1});var n=t.line,i=t.col;(0,nG.handleDeeplink)({view:e,line:n,col:i}),e.focus()}}))}));return t.classList.add("replit-tooltip"),t.style.padding="0",t.style.overflow="scroll",{dom:t}}}})]}})]),(0,rf.createRenameExtension)(e,t)),u)}e.s(["createLSPExtensions",()=>rS],518202)},546544,e=>{"use strict";var t=e.i(333859),n=[t.SemanticTokenTypes.namespace,t.SemanticTokenTypes.type,t.SemanticTokenTypes.class,t.SemanticTokenTypes.enum,t.SemanticTokenTypes.interface,t.SemanticTokenTypes.struct,t.SemanticTokenTypes.typeParameter,t.SemanticTokenTypes.parameter,t.SemanticTokenTypes.variable,t.SemanticTokenTypes.property,t.SemanticTokenTypes.enumMember,t.SemanticTokenTypes.event,t.SemanticTokenTypes.function,t.SemanticTokenTypes.method,t.SemanticTokenTypes.macro,t.SemanticTokenTypes.keyword,t.SemanticTokenTypes.modifier,t.SemanticTokenTypes.comment,t.SemanticTokenTypes.string,t.SemanticTokenTypes.number,t.SemanticTokenTypes.regexp,t.SemanticTokenTypes.operator,t.SemanticTokenTypes.decorator,"angle","arithmetic","attribute","attributeBracket","bitwise","boolean","brace","bracket","builtinAttribute","builtinType","character","colon","comma","comparison","constParameter","derive","deriveHelper","dot","escapeSequence","invalidEscapeSequence","formatSpecifier","generic","label","lifetime","logical","macroBang","parenthesis","punctuation","selfKeyword","selfTypeKeyword","semicolon","typeAlias","toolModule","union","unresolvedReference","tomlArrayKey","tomlTableKey"],r=[t.SemanticTokenModifiers.declaration,t.SemanticTokenModifiers.definition,t.SemanticTokenModifiers.readonly,t.SemanticTokenModifiers.static,t.SemanticTokenModifiers.deprecated,t.SemanticTokenModifiers.abstract,t.SemanticTokenModifiers.async,t.SemanticTokenModifiers.modification,t.SemanticTokenModifiers.documentation,t.SemanticTokenModifiers.defaultLibrary,"attribute","callable","constant","consuming","controlFlow","crateRoot","injected","intraDocLink","library","macro","mutable","public","reference","trait","unsafe"];function i(e,t){var r=e.tokenTypes[t];return r&&n.includes(r)?r:null}function a(e,t){for(var n=[],i=0;i<e.tokenModifiers.length;i++)if(t&1<<i){var a=e.tokenModifiers[i];a&&r.includes(a)&&n.push(a)}return n}e.s(["KNOWN_SEMANTIC_TOKENS",()=>n,"KNOWN_SEMANTIC_TOKEN_MODIFIERS",()=>r,"getSemanticTokenModifiers",()=>a,"getSemanticTokenType",()=>i])},300538,732676,268403,251923,492555,755224,545915,335392,140659,507966,427469,930925,194536,275465,925565,548440,e=>{"use strict";var t,n,r,i,a,o,s=e.i(389959);e.i(508987);var l=e.i(518711),u=e.i(518202),c=e.i(828767),d=e.i(460448),f=e.i(935997),p=e.i(918323),h=e.i(297083),m=e.i(904851),g=e.i(90659),x=e.i(721281),y=e.i(817556),b=e.i(903673),w=e.i(753950),_=e.i(179302),k=e.i(457103),S=e.i(736097),C=e.i(346715),j=e.i(486701),T=e.i(433772),E=e.i(546544),R={namespace:T.tags.namespace,type:T.tags.typeName,class:T.tags.className,enum:T.tags.typeName,interface:T.tags.typeName,struct:T.tags.typeName,typeParameter:T.tags.typeName,parameter:T.tags.variableName,variable:T.tags.variableName,property:T.tags.propertyName,enumMember:T.tags.propertyName,event:T.tags.typeName,function:T.tags.function(T.tags.variableName),method:T.tags.function(T.tags.propertyName),macro:T.tags.macroName,keyword:T.tags.keyword,modifier:T.tags.modifier,comment:T.tags.comment,string:T.tags.string,number:T.tags.number,regexp:T.tags.regexp,operator:T.tags.operator,decorator:T.tags.function(T.tags.annotation),angle:null,arithmetic:T.tags.arithmeticOperator,attribute:T.tags.attributeName,attributeBracket:T.tags.bracket,bitwise:T.tags.bitwiseOperator,boolean:T.tags.bool,brace:T.tags.brace,bracket:T.tags.bracket,builtinAttribute:T.tags.standard(T.tags.attributeName),builtinType:T.tags.standard(T.tags.typeName),character:T.tags.character,colon:T.tags.punctuation,comma:T.tags.separator,comparison:T.tags.compareOperator,constParameter:T.tags.constant(T.tags.variableName),derive:T.tags.function(T.tags.annotation),deriveHelper:T.tags.function(T.tags.annotation),dot:T.tags.derefOperator,escapeSequence:T.tags.escape,invalidEscapeSequence:T.tags.invalid,formatSpecifier:T.tags.processingInstruction,generic:T.tags.typeName,label:T.tags.labelName,lifetime:T.tags.special(T.tags.variableName),logical:T.tags.logicOperator,macroBang:T.tags.macroName,parenthesis:T.tags.paren,punctuation:T.tags.punctuation,selfKeyword:T.tags.self,selfTypeKeyword:T.tags.self,semicolon:T.tags.separator,typeAlias:T.tags.typeName,toolModule:T.tags.namespace,union:null,unresolvedReference:null,tomlArrayKey:T.tags.propertyName,tomlTableKey:T.tags.className},I={declaration:T.tags.definition,definition:T.tags.definition,readonly:T.tags.constant,static:T.tags.constant,deprecated:null,abstract:null,async:T.tags.special,modification:function(e){return e===T.tags.keyword?T.tags.modifier:null},documentation:function(e){return e===T.tags.comment?T.tags.docComment:e===T.tags.string?T.tags.docString:null},defaultLibrary:T.tags.standard,attribute:null,callable:T.tags.function,constant:T.tags.constant,consuming:null,controlFlow:function(e){return e===T.tags.keyword?T.tags.controlKeyword:e===T.tags.operator?T.tags.controlOperator:null},crateRoot:null,injected:null,intraDocLink:function(){return T.tags.url},library:null,macro:null,mutable:null,public:null,reference:null,trait:null,unsafe:null},A=new Set([T.tags.comment,T.tags.string,T.tags.number,T.tags.keyword,T.tags.operator]),P=new Map,D=e.i(502379),O=e.i(256969),N=function(){function e(t,n){(0,m._)(this,e),(0,x._)(this,"data",void 0),(0,x._)(this,"id",void 0),this.data=t,this.id=n}return(0,g._)(e,[{key:"reset",value:function(){this.data=[],this.id=null}},{key:"update",value:function(e){if(!e)return void this.reset();if("edits"in e&&this.id){var t,n,r=e.edits.slice().sort(function(e,t){return t.start-e.start}),i=!0,a=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u,c,d=s.value;(null==(u=d.data)?void 0:u.length)?(c=this.data).splice.apply(c,[d.start,d.deleteCount].concat((0,C._)(d.data))):this.data.splice(d.start,d.deleteCount)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}this.id=null!=(n=e.resultId)?n:null}else if("data"in e)this.data=e.data,this.id=null!=(t=e.resultId)?t:null;else throw Error("Invalid semantic tokens response")}},{key:"decorations",value:function(e,t){for(var n=t.doc,r=new w.RangeSetBuilder,i=0,a=0,o=0;o<this.data.length;o+=5){var s=this.data[o],l=this.data[o+1],u=this.data[o+2],c=this.data[o+3],d=this.data[o+4];i+=s,a=s>0?l:a+l;var f=function(e,t,n){var r=(0,E.getSemanticTokenType)(e,t);if(null===r)return null;var i=R[r];if(!i)return null;var a=(0,E.getSemanticTokenModifiers)(e,n),o="".concat(r,":").concat(a.join(",")),s=P.get(o);if(void 0!==s)return s;var l=a.map(function(e){if(void 0===I[e])return null;var t=I[e];return null===t?null:t}).filter(Boolean),u=!0,c=!1,d=void 0;try{for(var f,p=l[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=(0,f.value)(i);h&&(i=h)}}catch(e){c=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}return i&&A.has(i)&&(i=null),P.set(o,i),i}(e,c,d);if(f){var p=(0,j.highlightingFor)(t,[f]);if(p){var h=(0,D.posToOffset)(n,{line:i,character:a}),m=(0,D.posToOffset)(n,{line:i,character:a+u}),g=_.Decoration.mark({class:p});r.add(h,m,g)}}}return r.finish()}}]),e}(),M=e.i(700170),L=["typescript"],B=function(){function e(t,n){var r=this;(0,m._)(this,e),(0,x._)(this,"view",void 0),(0,x._)(this,"client",void 0),(0,x._)(this,"data",void 0),(0,x._)(this,"controller",void 0),(0,x._)(this,"disposables",void 0),(0,x._)(this,"pending",void 0),(0,x._)(this,"running",void 0),(0,x._)(this,"changes",void 0),(0,x._)(this,"proneToDesync",void 0),(0,x._)(this,"decorations",void 0),this.view=t,this.client=n,this.data=new N([],null),this.controller=null,this.disposables=[],this.pending=!1,this.running=!1,this.changes=null,this.decorations=_.Decoration.none,this.proneToDesync=L.some(function(e){return n.clientId.includes(e)}),this.disposables.push(n.onSemanticTokensRefresh(function(){return r.refresh()}),n.onServerCapabilitiesChange(function(){return r.refresh()}));var i=t.state.facet(S.fileName);if(i)if(n.isOpen(i))this.run();else{var a=setTimeout(function(){n.isOpen(i)&&r.run()},500);this.disposables.push(function(){return clearTimeout(a)})}}return(0,g._)(e,[{key:"abort",value:function(){var e;this.pending=!1,null==(e=this.controller)||e.abort()}},{key:"refresh",value:function(){this.abort(),this.data.reset(),this.run()}},{key:"run",value:function(){this.pending=!0,this.running||(this.running=!0,(0,h._)(function(){var e,t;return(0,y._)(this,function(n){switch(n.label){case 0:t=function(){var t,n,r,i,a,o,s,l,u,c,d;return(0,y._)(this,function(f){switch(f.label){case 0:t=Date.now(),f.label=1;case 1:if(f.trys.push([1,3,,4]),e.pending=!1,e.changes=null,a=(i=e.view.state).facet(S.fileName),o=null==(r=e.client.getServerCapabilities())||null==(n=r.semanticTokensProvider)?void 0:n.legend,l=(s=(0,O.default)(e.client)).isSemanticTokensFullSupported||s.isSemanticTokensRangeSupported,!a||!o||!l||!e.client.isOpen(a))return e.data.reset(),e.decorations.size>0&&(e.decorations=_.Decoration.none,e.view.dispatch()),[2,"continue"];return e.controller=new AbortController,[4,function(e){return(0,h._)(function(e){var t,n,r,i,a,o,s,l,u,c,d;return(0,y._)(this,function(f){switch(f.label){case 0:if(t=e.client,n=e.path,r=e.previous,i=e.doc,a=e.signal,o=(0,O.default)(t),r&&o.isSemanticTokensDeltaSupported)s=t.semanticTokensDelta(n,r,{signal:a});else if(o.isSemanticTokensFullSupported)s=t.semanticTokensFull(n,{signal:a});else{if(!i||!o.isSemanticTokensRangeSupported)return[2,null];l=(0,D.offsetToPos)(i,0),u=(0,D.offsetToPos)(i,i.length),s=t.semanticTokensRange(n,{start:l,end:u},{signal:a})}return[4,s];case 1:if((c=f.sent())&&"error"in c&&-32802===c.error.code)return[2,!1];if(!c||c.cancelled||!(d="result"in c&&!c.cancelled?c.result:null))return[2,null];return[2,d]}})}).apply(this,arguments)}({client:e.client,path:a,previous:e.data.id,doc:i.doc,signal:e.controller.signal})];case 2:return!1===(u=f.sent())?e.pending=!0:e.controller.signal.aborted||(e.data.update(u),e.decorations=e.changes?e.data.decorations(o,i).map(e.changes):e.data.decorations(o,i),e.view.dispatch()),[3,4];case 3:return c=f.sent(),(0,_.logException)(e.view.state,c),e.data.reset(),e.decorations=_.Decoration.none,e.changes=null,[3,4];case 4:if(e.controller=null,d=Date.now()-t,!(e.pending&&d<150))return[3,6];return[4,new Promise(function(e){return setTimeout(e,150-d)})];case 5:f.sent(),f.label=6;case 6:return[2]}})},n.label=1;case 1:if(!this.pending)return[3,3];return e=this,[5,(0,b._)(t())];case 2:return n.sent(),[3,1];case 3:return this.running=!1,this.changes=null,[2]}})}).call(this))}},{key:"update",value:function(e){e.docChanged&&this.decorations.size&&(this.decorations=this.decorations.map(e.changes))}},{key:"postUpdate",value:function(e){(0,k.hasChanged)(e,S.fileName)?this.refresh():e.docChanged&&(this.running&&(this.changes=this.changes?this.changes.composeDesc(e.changes):e.changes),this.proneToDesync&&this.abort(),this.run())}},{key:"destroy",value:function(){this.abort(),this.data.reset();var e=!0,t=!1,n=void 0;try{for(var r,i=this.disposables[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.disposables=[]}}]),e}(),V=new M.ReactCompartment(function(e){if(!e||!e.length)return null;var t=e.map(function(e){return _.ViewPlugin.define(function(t){return new B(t,e)},{decorations:function(e){return e.decorations},provide:function(e){return _.EditorView.updateListener.of(function(t){var n;return null==(n=t.view.plugin(e))?void 0:n.postUpdate(t)})}})});return w.Prec.highest(t)}),F=e.i(522682),U=e.i(61524),G=e.i(993796),$=e.i(485237),H=e.i(529810);function z(e){var t=e.filePath,n=e.isLoading,r=(0,H.default)().fs,i=(0,$.default)(t),a=(0,U.usePreferences)("acceptSuggestionOnCommitCharacter","codeIntelligence","codeActionsOnSave","semanticTokens").preferences,o=(0,G.useFlag)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),d=n||!a.codeIntelligence||!i.find(function(e){return e.isSupportedFile(t)}),f=(0,s.useMemo)(function(){return new l.DynamicExtension(d?[]:(0,u.createLSPExtensions)(r,i,t))},[i,t,r,d]),p=(0,s.useMemo)(function(){return new l.DynamicExtension(function(){return c.LSPCapabilitiesFacet.of(i.map(function(e){return(0,O.default)(e)}))})},[i]);return(0,s.useEffect)(function(){return!i.length||d?f.set(null):(0,F.combineDisposables)(i.map(function(e){return e.onServerCapabilitiesChange(function(){p.set(c.LSPCapabilitiesFacet.of(i.map(function(e){return(0,O.default)(e)})))})}))},[p,i,f,d]),[p.extension,f.extension,W.use(a.acceptSuggestionOnCommitCharacter),q.use(a.codeActionsOnSave),K.use(a.codeIntelligence),V.use(a.semanticTokens&&o?i:null)]}var W=new M.ReactCompartment(function(e){return f.AcceptSuggestionOnCommitCharacter.of(e)}),q=new M.ReactCompartment(function(e){return p.CodeActionsOnSaveEnabled.of(e)}),K=new M.ReactCompartment(function(e){return d.CodeIntelligenceEnabled.of(e)});e.s(["default",()=>z],300538);var Y=e.i(399119),Q=e.i(445789),X=e.i(530658),Z=e.i(840838),J=e.i(682532),ee=e.i(873753),et=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},en=w.Facet.define({combine:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s){s.create;var l=s.gutters,u=et(s,["create","gutters"]);t.push(Object.assign(Object.assign({},u),{enabled:!0,gutters:l?l.filter(function(e){return Object.keys(e).length>0}):void 0}))}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return(0,w.combineConfig)(t,{enabled:t.length>0,displayText:"characters",eventHandlers:{},showOverlay:"always",gutters:[]})}}),er=_.EditorView.theme({".cm-minimap-overlay-container":{position:"absolute",top:0,height:"100%",width:"100%","&.cm-minimap-overlay-mouse-over":{opacity:0,transition:"visibility 0s linear 300ms, opacity 300ms"},"&.cm-minimap-overlay-mouse-over:hover":{opacity:1,transition:"visibility 0s linear 0ms, opacity 300ms"},"&.cm-minimap-overlay-off":{display:"none"},"& .cm-minimap-overlay":{background:"rgb(121, 121, 121)",opacity:"0.2",position:"absolute",right:0,top:0,width:"100%",transition:"top 0s ease-in 0ms","&:hover":{opacity:"0.3"}},"&.cm-minimap-overlay-active":{opacity:1,visibility:"visible",transition:"visibility 0s linear 0ms, opacity 300ms","& .cm-minimap-overlay":{opacity:"0.4"}}}}),ei=8,ea=[er,_.ViewPlugin.fromClass(function(){function e(t){(0,m._)(this,e),this.view=t,this._isDragging=!1,t.state.facet(en).enabled&&this.create(t)}return(0,g._)(e,[{key:"create",value:function(e){this.container=(0,Z.default)("div",{class:"cm-minimap-overlay-container"}),this.dom=(0,Z.default)("div",{class:"cm-minimap-overlay"}),this.container.appendChild(this.dom),this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this));var t=e.dom.querySelector(".cm-minimap-inner");t&&t.appendChild(this.container),this.computeShowOverlay(),this.computeHeight(),this.computeTop()}},{key:"remove",value:function(){this.container&&(this.container.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),this.container.remove())}},{key:"update",value:function(e){var t=e.startState.facet(en).enabled,n=e.state.facet(en).enabled;t&&!n?this.remove():(!t&&n&&this.create(e.view),n&&(this.computeShowOverlay(),e.geometryChanged&&(this.computeHeight(),this.computeTop())))}},{key:"computeHeight",value:function(){if(this.dom){var e=this.view.dom.clientHeight/ei;this.dom.style.height=e+"px"}}},{key:"computeTop",value:function(){if(!this._isDragging&&this.dom){var e=this.view.scrollDOM,t=e.clientHeight,n=e.scrollHeight,r=e.scrollTop,i=r/(n-t);isNaN(i)&&(i=0);var a=Math.min((t-t/ei)*i,r/ei);this.dom.style.top=a+"px"}}},{key:"computeShowOverlay",value:function(){if(this.container){"mouse-over"===this.view.state.facet(en).showOverlay?this.container.classList.add("cm-minimap-overlay-mouse-over"):this.container.classList.remove("cm-minimap-overlay-mouse-over");var e=this.view.scrollDOM;e.clientHeight===e.scrollHeight?this.container.classList.add("cm-minimap-overlay-off"):this.container.classList.remove("cm-minimap-overlay-off")}}},{key:"onMouseDown",value:function(e){if(this.container&&2!==e.button){var t=e.clientY,n=e.target;if(n===this.dom){this._dragStartY=e.clientY,this._isDragging=!0,this.container.classList.add("cm-minimap-overlay-active");return}var r=this.view.scrollDOM,i=r.clientHeight,a=r.scrollHeight,o=r.scrollTop,s=n.getBoundingClientRect().top,l=Math.max(0,o-o/(a-i)*(i*ei-i));this.view.scrollDOM.scrollTop=l+(t-s)*ei-i/2}}},{key:"onMouseUp",value:function(e){this._isDragging&&this.container&&(this._dragStartY=void 0,this._isDragging=!1,this.container.classList.remove("cm-minimap-overlay-active"))}},{key:"onMouseMove",value:function(e){if(this._isDragging&&this.dom){if(e.preventDefault(),e.stopPropagation(),!this._dragStartY){this._dragStartY=e.clientY;return}var t=e.clientY-this._dragStartY;this._dragStartY=e.clientY;var n=this.dom.getBoundingClientRect().height,r=this.dom.getBoundingClientRect().y,i=parseFloat(this.dom.style.top),a=this.view.scrollDOM.scrollTop,o=this.view.scrollDOM.clientHeight,s=this.view.scrollDOM.scrollHeight,l=0===a,u=Math.round(a)>=Math.round(s-o);if((!l||!(t<0))&&(!l||!(e.clientY<r))&&(!u||!(t>0))&&(!u||!(e.clientY>r+n))){var c=this.view.scrollDOM.scrollHeight,d=this.view.scrollDOM.clientHeight,f=d-d/ei,p=i+t;this.view.scrollDOM.scrollTop=Math.max(p/f*(c-d),p*ei);var h=Math.min(Math.max(0,p),Math.min(f,(c-d)/ei));this.dom.style.top=h+"px"}}}},{key:"destroy",value:function(){this.remove()}}]),e}(),{eventHandlers:{scroll:function(){var e=this;requestAnimationFrame(function(){return e.computeTop()})}}})],eo=function(){function e(t){(0,m._)(this,e),this.map=new Map,this.view=t}return(0,g._)(e,[{key:"get",value:function(e){return this.map.get(e)}},{key:"set",value:function(e,t){this.map.set(e,t)}}]),e}();function es(e){if(!e.facet(en).enabled)return[];var t,n=[],r=e.doc.iterLines(),i=(0,j.foldedRanges)(e).iter(),a=0;for(r.next();!r.done;){for(var o=r.value,s=a,l=s+o.length;i.value&&i.to<s;)i.next();var u=i.from,c=i.to,d=s>=u&&s<c,f=l>u&&l<=c;if(d){var p=null!=(t=n.pop())?t:[],h=p.pop();h&&h.folded&&(h.to=c),h&&p.push(h),h&&h.folded||p.push({from:u,to:c,folded:!0}),f||p.push({from:c,to:l,folded:!1}),n.push(p)}else f?n.push([{from:s,to:u,folded:!1},{from:u,to:c,folded:!0}]):n.push([{from:s,to:l,folded:!1}]);a=l+1,r.next()}return n}var el=w.StateField.define({create:function(e){return es(e)},update:function(e,t){return eu([t])||t.docChanged?es(t.state):e}});function eu(e){return e.find(function(e){return e.effects.find(function(e){return e.is(j.foldEffect)||e.is(j.unfoldEffect)})})}var ec=function(e){function t(e){var n;return(0,m._)(this,t),(n=(0,Y._)(this,t,[e])).count=void 0,n}return(0,Q._)(t,e),(0,g._)(t,[{key:"shouldUpdate",value:function(e){if(!e.state.facet(en).enabled)return!1;if(e.docChanged)return!0;var t=!0,n=!1,r=void 0;try{for(var i,a=e.transactions[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=!0,l=!1,u=void 0;try{for(var c,d=o.effects[Symbol.iterator]();!(s=(c=d.next()).done);s=!0)if(c.value.is(J.setDiagnosticsEffect))return!0}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!!eu(e.transactions)||void 0===this.count}},{key:"update",value:function(e){var t=this;if(this.shouldUpdate(e)){this.map.clear();var n=e.state.field(el);this.count=(0,J.diagnosticCount)(e.state),(0,J.forEachDiagnostic)(e.state,function(e,r,i){for(var a=t.findLine(r,n),o=t.findLine(i,n),s=e.severity,l=a;l<=o;l++){var u=t.get(l);u&&(s=[s,u].sort(t.sort.bind(t)).slice(0,1)[0]),t.set(l,s)}})}}},{key:"drawLine",value:function(e,t){var n=e.context,r=e.lineHeight,i=e.offsetX,a=e.offsetY,o=this.get(t);o&&(n.globalAlpha=.65,n.beginPath(),n.rect(i,a,n.canvas.width-i,r),n.fillStyle=this.color(o),n.fill())}},{key:"findLine",value:function(e,t){return t.findIndex(function(t){var n=t.slice(0,1)[0],r=t.slice(-1)[0];return!!n&&!!r&&n.from<=e&&e<=r.to})+1}},{key:"color",value:function(e){return"error"===e?"#d11":"warning"===e?"orange":"#999"}},{key:"sort",value:function(e,t){return this.score(t)-this.score(e)}},{key:"score",value:function(e){switch(e){case"error":return 3;case"warning":return 2;default:return 1}}}]),t}(eo),ed=function(e){function t(e){var n;return(0,m._)(this,t),(n=(0,Y._)(this,t,[e])).getDrawInfo(),n._themeClasses=e.dom.classList.value,n}return(0,Q._)(t,e),(0,g._)(t,[{key:"shouldUpdate",value:function(e){return!!e.state.facet(en).enabled&&!!(e.docChanged||e.selectionSet||this._themeClasses!==this.view.dom.classList.value||eu(e.transactions))}},{key:"update",value:function(e){if(this.shouldUpdate(e)){this.map.clear(),this._themeClasses!==this.view.dom.classList.value&&(this._drawInfo=void 0,this._themeClasses=this.view.dom.classList.value);var t=e.state.selection.ranges,n=0,r=!0,i=!1,a=void 0;try{for(var o,s=e.state.field(el).entries()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=(0,X._)(o.value,2),u=l[0],c=l[1],d=[],f=0,p=!0,h=!1,m=void 0;try{for(var g,x=c[Symbol.iterator]();!(p=(g=x.next()).done);p=!0){var y=g.value;do{if(n>=t.length||y.to<t[n].from)continue;if(t[n].from===t[n].to){n++;continue}var b=t[n],w={from:f+Math.max(y.from,b.from)-y.from,to:f+Math.min(y.to,b.to)-y.from,extends:b.to>y.to},_=d.slice(-1)[0];if(_&&_.to===w.from){var k=w.to;y.folded&&w.extends?k=w.from+1:y.folded&&!w.extends&&(k=_.to),d[d.length-1]=Object.assign(Object.assign({},_),{to:k,extends:w.extends})}else y.folded||d.push(w);if(w.extends)break;n++}while(n<t.length&&y.to>=t[n].from)f+=y.folded?1:y.to-y.from}}catch(e){h=!0,m=e}finally{try{p||null==x.return||x.return()}finally{if(h)throw m}}if(0!==d.length){var S=u+1;this.map.set(S,d)}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}}},{key:"drawLine",value:function(e,t){var n=e.context,r=e.lineHeight,i=e.charWidth,a=e.offsetX,o=e.offsetY,s=this.get(t);if(s){var l=!0,u=!1,c=void 0;try{for(var d,f=s[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value,h=a+p.from*i,m=(p.to-p.from)*i,g=n.canvas.width-h;p.extends&&(n.globalAlpha=.65,n.beginPath(),n.rect(h,o,g,r),n.fillStyle=this.getDrawInfo().backgroundColor,n.fill()),n.globalAlpha=1,n.beginPath(),n.rect(h,o,m,r),n.fillStyle=this.getDrawInfo().backgroundColor,n.fill()}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}}}},{key:"getDrawInfo",value:function(){if(this._drawInfo)return this._drawInfo;var e=document.createElement("span");e.setAttribute("class","cm-selectionBackground"),this.view.dom.appendChild(e);var t={backgroundColor:window.getComputedStyle(e).backgroundColor};return this._drawInfo=t,this.view.dom.removeChild(e),t}}]),t}(eo),ef=function(e){function t(e){var n;return(0,m._)(this,t),(n=(0,Y._)(this,t,[e]))._fontInfoMap=new Map,n._themeClasses=new Set(e.dom.classList.values()),e.state.facet(en).enabled&&n.updateImpl(e.state),n}return(0,Q._)(t,e),(0,g._)(t,[{key:"shouldUpdate",value:function(e){return!!(e.docChanged||e.state.facet(en)!==e.startState.facet(en)||this.themeChanged()||eu(e.transactions))}},{key:"update",value:function(e){this.shouldUpdate(e)&&(this._highlightingCallbackId&&(void 0!==window.requestIdleCallback?cancelIdleCallback(this._highlightingCallbackId):clearTimeout(this._highlightingCallbackId)),this.updateImpl(e.state,e.changes))}},{key:"updateImpl",value:function(e,t){var n,r=this;this.map.clear(),this._displayText=e.facet(en).displayText,this.themeChanged()&&this._fontInfoMap.clear();var i=void 0;if(this._previousTree&&t){var a=ee.TreeFragment.addTree(this._previousTree),o=[];t.iterChangedRanges(function(e,t,n,r){return o.push({fromA:e,toA:t,fromB:n,toB:r})}),i=ee.TreeFragment.applyChanges(a,o)}var s=e.doc.toString(),l=null==(n=e.facet(j.language))?void 0:n.parser,u=l?l.parse(s,i):void 0;this._previousTree=u;var c={style:function(t){return(0,j.highlightingFor)(e,t)}},d=[];if(u){var f=e.doc.lineAt(this.view.viewport.from).number,p=e.doc.lineAt(this.view.viewport.to).number,h=p-f,m=f/(e.doc.lines-h),g=4*h*2,x=m*g,y=Math.max(1,Math.floor(f-x)),b=Math.min(p+Math.floor(g-x),e.doc.lines);(0,T.highlightTree)(u,c,function(e,t,n){d.push({from:e,to:t,tags:n})},e.doc.line(y).from,e.doc.line(b).to)}this.updateMapImpl(e,d),d=[];var w=function(){u&&((0,T.highlightTree)(u,c,function(e,t,n){d.push({from:e,to:t,tags:n})}),r.updateMapImpl(e,d),r._highlightingCallbackId=void 0)};this._highlightingCallbackId=void 0!==window.requestIdleCallback?requestIdleCallback(w):setTimeout(w)}},{key:"updateMapImpl",value:function(e,t){this.map.clear();var n=e.doc.toString(),r=t.values(),i=r.next(),a=!0,o=!1,s=void 0;try{for(var l,u=e.field(el).entries()[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=(0,X._)(l.value,2),d=c[0],f=c[1],p=[],h=!0,m=!1,g=void 0;try{for(var x,y=f[Symbol.iterator]();!(h=(x=y.next()).done);h=!0){var b=x.value;if(b.from!==b.to){if(b.folded){p.push({text:"",tags:""});continue}for(var w=b.from;!i.done&&i.value.from<b.to;){var _=i.value,k=_.from,S=_.to,C=_.tags;if(S<w){i=r.next();continue}k>w&&p.push({text:n.slice(w,k),tags:""});var j=Math.max(k,b.from),T=Math.min(S,b.to);if(p.push({text:n.slice(j,T),tags:C}),w=T,S>T)break;i=r.next()}w!==b.to&&p.push({text:n.slice(w,b.to),tags:""})}}}catch(e){m=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw g}}var E=d+1;this.map.set(E,p)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}}},{key:"measure",value:function(e){var t=this.getFontInfo(""),n=t.color,r=t.font,i=t.lineHeight;return e.textBaseline="ideographic",e.fillStyle=n,e.font=r,{charWidth:e.measureText("_").width,lineHeight:i}}},{key:"beforeDraw",value:function(){this._fontInfoMap.clear()}},{key:"drawLine",value:function(e,t){var n=this.get(t);if(n){var r=e.context,i=e.charWidth,a=e.lineHeight,o=e.offsetX,s=e.offsetY;r.textBaseline="ideographic";var l=!0,u=!1,c=void 0;try{for(var d,f,p=n[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var h=f.value,m=this.getFontInfo(h.tags);switch((!d||d.color!==m.color)&&(r.fillStyle=m.color),(!d||d.font!==m.font)&&(r.font=m.font),d=m,a=Math.max(a,m.lineHeight),this._displayText){case"characters":r.fillText(h.text,o,s+a),o+=h.text.length*i;break;case"blocks":for(var g=/\S+/g,x=void 0;null!==(x=g.exec(h.text));){var y=o+x.index*i,b=(g.lastIndex-x.index)*i;if(y>r.canvas.width)break;y+b>r.canvas.width&&(b=r.canvas.width-y);var w=.5,_=a-w;r.fillStyle=m.color,r.globalAlpha=.65,r.beginPath(),r.rect(y,s,b,_),r.fill()}o+=h.text.length*i}}}catch(e){u=!0,c=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}}}},{key:"getFontInfo",value:function(e){var t=this._fontInfoMap.get(e);if(t)return t;var n=(0,Z.default)("span",{class:e}),r=(0,Z.default)("div",{class:"cm-line",style:"display: none"},n);this.view.contentDOM.appendChild(r);var i=window.getComputedStyle(n),a=parseFloat(i.lineHeight)/4,o={color:i.color,font:"".concat(i.fontStyle," ").concat(i.fontWeight," ").concat(a,"px ").concat(i.fontFamily),lineHeight:a};return this._fontInfoMap.set(e,o),this.view.contentDOM.removeChild(r),o}},{key:"themeChanged",value:function(){var e=this._themeClasses,t=new Set(this.view.dom.classList.values());if(this._themeClasses=t,!e||(e.delete("cm-focused"),t.delete("cm-focused"),e.size!==t.size))return!0;var n=!0;return e.forEach(function(e){t.has(e)||(n=!1)}),!n}}]),t}(eo),ep=_.EditorView.theme({"&":{height:"100%",overflowY:"auto"},"& .cm-minimap-gutter":{borderRight:0,flexShrink:0,left:"unset",position:"sticky",right:0,top:0},"& .cm-minimap-inner":{height:"100%",position:"absolute",right:0,top:0,overflowY:"hidden","& canvas":{display:"block"}},"& .cm-minimap-box-shadow":{boxShadow:"12px 0px 20px 5px #6c6c6c"}}),eh=_.ViewPlugin.fromClass(function(){function e(t){(0,m._)(this,e),this.view=t,this.text=new ef(t),this.selection=new ed(t),this.diagnostic=new ec(t),t.state.facet(em)&&this.create(t)}return(0,g._)(e,[{key:"create",value:function(e){var t,n=this,r=e.state.facet(em);if(!r)throw Error("Expected nonnull");for(var i in this.inner=(0,Z.default)("div",{class:"cm-minimap-inner"}),this.canvas=(0,Z.default)("canvas"),this.dom=r.create(e).dom,this.dom.classList.add("cm-gutters"),this.dom.classList.add("cm-minimap-gutter"),this.inner.appendChild(this.canvas),this.dom.appendChild(this.inner),this.view.scrollDOM.insertBefore(this.dom,this.view.contentDOM.nextSibling),this.view.state.facet(en).eventHandlers)t=this,function(e){var r=t.view.state.facet(en).eventHandlers[e];r&&t.dom.addEventListener(e,function(e){return r(e,n.view)})}(i)}},{key:"remove",value:function(){this.dom&&this.dom.remove()}},{key:"update",value:function(e){var t=e.startState.facet(em),n=e.state.facet(em);t&&!n?this.remove():(!t&&n&&this.create(e.view),n&&(this.text.update(e),this.selection.update(e),this.diagnostic.update(e),this.render()))}},{key:"getWidth",value:function(){var e=this.view.dom.clientWidth;return e<=720?e/720*120:120}},{key:"render",value:function(){if(this.dom&&this.canvas&&this.inner){this.text.beforeDraw(),this.updateBoxShadow(),this.dom.style.width=this.getWidth()+"px",this.canvas.style.maxWidth=this.getWidth()+"px",this.canvas.width=2*this.getWidth();var e=this.view.dom.getBoundingClientRect().height;this.inner.style.minHeight=e+"px",this.canvas.height=2*e,this.canvas.style.height=e+"px";var t=this.canvas.getContext("2d");if(t){t.clearRect(0,0,this.canvas.width,this.canvas.height);for(var n=this.text.measure(t),r=n.charWidth,i=n.lineHeight,a=this.canvasStartAndEndIndex(t,i),o=a.startIndex,s=a.endIndex,l=a.offsetY,u=this.view.state.facet(en).gutters,c=o;c<s&&!(c>=this.view.state.field(el).length);c++){var d={offsetX:0,offsetY:l,context:t,lineHeight:i,charWidth:r};if(u.length){d.offsetX+=2;var f=!0,p=!1,h=void 0;try{for(var m,g=u[Symbol.iterator]();!(f=(m=g.next()).done);f=!0){var x=m.value;!function(e,t,n){var r=e[n];r&&(t.context.fillStyle=r,t.context.globalAlpha=1,t.context.beginPath(),t.context.rect(t.offsetX,t.offsetY,4,t.lineHeight),t.context.fill())}(x,d,c+1),d.offsetX+=4}}catch(e){p=!0,h=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}d.offsetX+=2}this.text.drawLine(d,c+1),this.selection.drawLine(d,c+1),this.diagnostic.drawLine(d,c+1),l+=i}t.restore()}}}},{key:"canvasStartAndEndIndex",value:function(e,t){var n=this.view.documentPadding,r=n.top,i=n.bottom;r/=4,i/=4;var a=e.canvas.height,o=this.view.scrollDOM,s=o.clientHeight,l=o.scrollHeight,u=o.scrollTop/(l-s);isNaN(u)&&(u=0);var c=Math.max(0,u*(r+i+this.view.state.field(el).length*t-a)),d=Math.max(0,r-c),f=Math.round(Math.max(0,c-r)/t);return{startIndex:f,endIndex:f+Math.round((a-d)/t),offsetY:d}}},{key:"updateBoxShadow",value:function(){if(this.canvas){var e=this.view.scrollDOM,t=e.clientWidth,n=e.scrollWidth;t+e.scrollLeft<n?this.canvas.classList.add("cm-minimap-box-shadow"):this.canvas.classList.remove("cm-minimap-box-shadow")}}},{key:"destroy",value:function(){this.remove()}}]),e}(),{eventHandlers:{scroll:function(){var e=this;requestAnimationFrame(function(){return e.render()})}},provide:function(e){return _.EditorView.scrollMargins.of(function(t){var n,r=null==(n=t.plugin(e))?void 0:n.getWidth();return r?{right:r}:null})}}),em=w.Facet.define({combine:function(e){var t;return null!=(t=e.find(function(e){return null!==e}))?t:null},enables:function(e){return[[en.compute([e],function(t){return t.facet(e)}),ep,el,eh,ea]]}}),eg=e.i(738324),ev=e.i(88892),ex=e.i(480028),ey=_.EditorView.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:ex.tokens.backgroundDefault,borderLeft:"1px solid ".concat(ex.tokens.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}}),eb=w.StateField.define({create:function(e){return 0===e.doc.length||e.doc.lines>1e3},update:function(e,t){return t.docChanged?0===t.state.doc.length||t.state.doc.lines>1e3:e}}),ew=new M.ReactCompartment(function(e,t,n){var r=function(){return{dom:document.createElement("div")}};return e?null:[ey,eb,em.compute([eg.GutterDiffState,eb],function(e){if(e.field(eb,!1)||"blocks"!==t&&"characters"!==t)return null;var i=e.field(eg.GutterDiffState,!1),a={};if(i)for(var o=1;o<=e.doc.lines;o++)switch(i.getLineChangeType(o)){case ev.LineChangeType.COVERED:a[o]=n.values.global.greenDefault;break;case ev.LineChangeType.MODIFIED:a[o]=n.values.global.blueDefault}return{create:r,displayText:t,gutters:[a]}})]});e.s(["MinimapCompartment",()=>ew],732676);var e_=e.i(555970),ek=e.i(878420),eS=e.i(64386),eC=w.Facet.define({combine:function(e){var t;return null!=(t=e.find(function(e){return null!==e}))?t:null}}),ej=w.Facet.define({combine:function(e){return eE(e)}}),eT=w.Facet.define({combine:function(e){return eE(e)}});function eE(e){var t=[];return e.forEach(function(e){return e?t.push(e):void 0}),t}var eR=e.i(167626),eI=function(e){function t(e){var n;return(0,m._)(this,t),n=(0,Y._)(this,t),(0,x._)(n,"diagnostic",void 0),n.diagnostic=e,n}return(0,Q._)(t,e),(0,g._)(t,[{key:"eq",value:function(e){return(0,eR._)(e,t)&&this.severityValue===e.severityValue}},{key:"severityValue",get:function(){switch(this.diagnostic.severity){case"error":return 3;case"warning":return 2;case"info":return 1;default:return 0}}},{key:"severityColor",get:function(){switch(this.diagnostic.severity){case"error":return"#d11";case"warning":return"orange";case"info":return"#999";default:return"#66d"}}}]),t}(w.RangeValue);function eA(e){var t=new w.RangeSetBuilder;return(0,J.forEachDiagnostic)(e,function(e,n,r){t.add(n,r,new eI(e))}),t.finish()}var eP=w.StateField.define({create:function(e){return eA(e)},update:function(e,t){return(0,k.hasChanged)(t,J.setDiagnosticsEffect)?eA(t.state):e.map(t.changes)},provide:function(e){return ej.compute([e],function(t){for(var n=new Map,r=t.field(e).iter();r.value;){for(var i=t.doc.lineAt(r.from),a=t.doc.lineAt(r.to),o=i.number;o<=a.number;){var s,l=null==(s=n.get(o))?void 0:s.severityValue;(!l||l<r.value.severityValue)&&n.set(o,r.value),o++}r.next()}return Array.from(n.entries()).map(function(e){var t=(0,X._)(e,2),n=t[0],r=t[1];return{color:r.severityColor,number:n,zIndex:r.severityValue}})})}}),eD=e.i(220348),eO="cm-with-scrollbar",eN="cm-scrollbar-gutter",eM="cm-scrollbar-inner",eL="cm-scrollbar-overlay-container",eB="cm-scrollbar-overlay",eV="cm-scrollbar-overlay-invisible",eF="cm-scrollbar-overlay-active",eU="--cm-scrollbar-overlay-height",eG=_.EditorView.theme((a={"&":{height:"100%",overflowY:"auto"}},(0,x._)(a,"& .".concat(eN),{borderRight:0,boxSizing:"border-box",display:"flex",flexShrink:0,height:"100%",insetInlineStart:0,left:"unset",position:"sticky",right:0,top:0,width:"".concat(15,"px"),zIndex:200}),(0,x._)(a,"& .".concat(eM),{height:"100%",position:"absolute",right:0,top:0,overflowY:"hidden",borderLeft:"1px solid",borderLeftColor:"inherit"}),(0,x._)(a,"& .".concat(eM," > canvas"),{display:"block",height:"100%",width:"".concat(14,"px"),opacity:.6}),(0,x._)(a,".".concat(eL),(i={position:"absolute",top:0,height:"100%",width:"100%"},(0,x._)(i,"& .".concat(eB),(r={background:"rgb(121, 121, 121)",opacity:"0.2",position:"absolute",right:0,top:0,height:"max(".concat(20,"px, var(").concat(eU,"))"),width:"100%",transition:"top 0s ease-in 0ms"},(0,x._)(r,"&:hover",{opacity:"0.3"}),(0,x._)(r,"&.".concat(eV),{pointerEvents:"none",opacity:0}),r)),(0,x._)(i,"& .".concat(eF),(0,x._)({opacity:1,visibility:"visible",transition:"visibility 0s linear 0ms, opacity 300ms"},"& .".concat(eB),{opacity:"0.4"})),i)),(0,x._)(a,"&.".concat(eO," .cm-scroller::-webkit-scrollbar"),{width:0}),(0,x._)(a,"&.".concat(eO," .cm-scroller"),{scrollbarWidth:"none"}),a)),e$=function(){function e(t){(0,m._)(this,e),(0,x._)(this,"container",void 0),(0,x._)(this,"dragInfo",null),(0,x._)(this,"handle",void 0),(0,x._)(this,"observer",void 0),(0,x._)(this,"view",void 0),this.view=t,this.container=document.createElement("div"),this.container.classList.add(eL),this.container.role="presentation",this.container.ariaHidden="true",this.handle=document.createElement("div"),this.handle.classList.add(eB),this.container.appendChild(this.handle);var n=t.dom.querySelector(".".concat(eM));n&&n.appendChild(this.container),this.observer=new ResizeObserver(this.resizeHandle.bind(this)),this.observer.observe(t.dom),this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this))}return(0,g._)(e,[{key:"resizeHandle",value:function(){var e=this;this.view.requestMeasure({key:"".concat(this,".resizeHandle"),read:function(){return{ratio:Math.min(1,e.view.scrollDOM.clientHeight/e.view.contentHeight)}},write:function(t){var n=t.ratio;e.handle.style.setProperty(eU,"".concat(100*n,"%")),1===n?e.handle.classList.add(eV):e.handle.classList.remove(eV)}})}},{key:"updateHandlePosition",value:function(){var e=this;this.view.requestMeasure({key:"".concat(this,".onScroll"),read:function(){var t=e.view.contentHeight,n=e.view.scrollDOM.clientHeight,r=e.handle.getBoundingClientRect().height;return{scrollTop:Math.round(e.view.scrollDOM.scrollTop*((n-r)/(t-n)))}},write:function(t){var n=t.scrollTop;e.handle.style.top="".concat(n,"px")}})}},{key:"onMouseDown",value:function(e){var t=this;if(2!==e.button){if(e.preventDefault(),e.target===this.handle){this.dragInfo={dragStartY:e.clientY},this.container.classList.add(eF);return}this.view.requestMeasure({key:"".concat(this,".onMouseDown"),read:function(){var n=t.view.scrollDOM.clientHeight,r=t.view.contentHeight;return{scrollTop:Math.max(0,e.clientY-e.target.getBoundingClientRect().top-n/r*n/2)/n*r}},write:function(e){var n=e.scrollTop;t.view.scrollDOM.scrollTop=n}})}}},{key:"onMouseUp",value:function(){this.dragInfo&&(this.dragInfo=null,this.container.classList.remove(eF))}},{key:"onMouseMove",value:function(e){if(this.dragInfo){e.preventDefault();var t=e.clientY-this.dragInfo.dragStartY;this.view.scrollDOM.scrollTop=this.view.scrollDOM.scrollTop+t/this.view.dom.clientHeight*this.view.contentHeight,this.view.scrollDOM.scrollTop>0&&Math.round(this.view.scrollDOM.scrollTop)<Math.round(this.view.contentHeight-this.view.dom.clientHeight)&&(this.dragInfo={dragStartY:e.clientY}),this.updateHandlePosition()}}},{key:"update",value:function(e){(e.docChanged||e.geometryChanged)&&(this.resizeHandle(),this.updateHandlePosition())}},{key:"destroy",value:function(){this.container.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),this.container.remove(),this.observer.disconnect()}}]),e}(),eH=function(){function e(t){(0,m._)(this,e),(0,x._)(this,"dom",void 0),(0,x._)(this,"context",void 0),(0,x._)(this,"view",void 0),(0,x._)(this,"previousCanvasHeight",void 0),(0,x._)(this,"previousContentHeight",void 0),this.view=t;var n=t.state.facet(eC);if(!n)throw Error("expected config");this.dom=n.create(t).dom,this.dom.classList.add(eN);var r=document.createElement("div");r.classList.add(eM);var i=document.createElement("canvas");i.ariaHidden="true",this.context=i.getContext("2d"),r.appendChild(i),this.dom.appendChild(r),t.scrollDOM.insertBefore(this.dom,t.contentDOM.nextSibling),this.update()}return(0,g._)(e,[{key:"shouldRedraw",value:function(e,t){return!!(!e||!t||(0,k.hasChanged)(e,"doc","selection","focus",eT,ej,j.foldEffect,j.unfoldEffect))||this.view.contentHeight!==this.previousContentHeight||2*t.scrollClientHeight!==this.previousCanvasHeight}},{key:"update",value:function(e){var t=this;this.view.requestMeasure({key:this,read:function(){return{scrollClientHeight:t.view.scrollDOM.clientHeight}},write:function(n){var r=n.scrollClientHeight;if(t.context&&t.shouldRedraw(e,{scrollClientHeight:r})){t.previousContentHeight=t.view.contentHeight,t.context.canvas.width=28,t.context.canvas.height=2*r,t.previousCanvasHeight=t.context.canvas.height,t.context&&t.context.clearRect(0,0,t.context.canvas.width,t.context.canvas.height);var i=t.view.state.facet(eT),a=t.view.state.facet(ej),o=new Map,s=!0,l=!1,u=void 0;try{for(var c,d=a.entries()[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f,p=(0,X._)(c.value,2),h=p[0],m=p[1],g=h%3,x=void 0,y=void 0,b=!0,w=!1,_=void 0;try{for(var k,S=m[Symbol.iterator]();!(b=(k=S.next()).done);b=!0){var C,T=k.value;if(void 0===x||void 0===y){x=T,y=T;continue}if(y.number+1===T.number&&y.color===T.color&&y.zIndex===T.zIndex){y=T;continue}o.set(g,(null!=(C=o.get(g))?C:[]).concat([[x,y]])),x=T,y=T}}catch(e){w=!0,_=e}finally{try{b||null==S.return||S.return()}finally{if(w)throw _}}x&&y&&o.set(g,(null!=(f=o.get(g))?f:[]).concat([[x,y]]))}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}var E=!0,R=!1,I=void 0;try{for(var A,P=o.entries()[Symbol.iterator]();!(E=(A=P.next()).done);E=!0){var D=(0,X._)(A.value,2),O=D[0],N=D[1].sort(function(e,t){var n,r,i=(0,X._)(e,1)[0],a=(0,X._)(t,1)[0];return(null!=(n=i.zIndex)?n:0)-(null!=(r=a.zIndex)?r:0)}),M=!0,L=!1,B=void 0;try{for(var V,F=N[Symbol.iterator]();!(M=(V=F.next()).done);M=!0)!function(){var e=(0,X._)(V.value,2),n=e[0],i=n.color,a=n.number,o=e[1].number,s=t.view.state.doc.line(a),l=t.view.state.doc.line(o),u=1/0,c=-1/0;if((0,j.foldedRanges)(t.view.state).between(s.from,l.to,function(e,t){u>e&&(u=e),c<t&&(c=t)}),u<c){var d=t.view.state.doc.lineAt(u);d.number<=s.number&&(s=d),t.view.state.doc.lineAt(c).number>=l.number&&(l=d)}var f=s.number,p=l.number,h=!0,m=!1,g=void 0;try{for(var x,y=t.view.state.field(eq)[Symbol.iterator]();!(h=(x=y.next()).done);h=!0){var b=(0,X._)(x.value,2),w=b[0],_=b[1];w[0].number<s.number&&(f-=_),w[1].number<l.number&&(p-=_)}}catch(e){m=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw g}}t.drawRange({scrollClientHeight:r,color:i,from:f,to:p,lane:O})}()}catch(e){L=!0,B=e}finally{try{M||null==F.return||F.return()}finally{if(L)throw B}}}}catch(e){R=!0,I=e}finally{try{E||null==P.return||P.return()}finally{if(R)throw I}}var U=!0,G=!1,$=void 0;try{for(var H,z=i[Symbol.iterator]();!(U=(H=z.next()).done);U=!0){var W=H.value,q=!0,K=!1,Y=void 0;try{for(var Q,Z=W[Symbol.iterator]();!(q=(Q=Z.next()).done);q=!0){var J=Q.value,ee=J.color,et=J.number,en=et,er=!0,ei=!1,ea=void 0;try{for(var eo,es=t.view.state.field(eq)[Symbol.iterator]();!(er=(eo=es.next()).done);er=!0){var el=(0,X._)(eo.value,2),eu=(0,X._)(el[0],1)[0],ec=el[1];eu.number<et&&(en-=ec)}}catch(e){ei=!0,ea=e}finally{try{er||null==es.return||es.return()}finally{if(ei)throw ea}}t.drawRange({scrollClientHeight:r,color:ee,from:en})}}catch(e){K=!0,Y=e}finally{try{q||null==Z.return||Z.return()}finally{if(K)throw Y}}}}catch(e){G=!0,$=e}finally{try{U||null==z.return||z.return()}finally{if(G)throw $}}}}})}},{key:"destroy",value:function(){this.dom.remove()}},{key:"drawRange",value:function(e){if(this.context){var t,n=(this.view.documentPadding.top+this.view.defaultLineHeight*(e.from-1))/this.view.contentHeight*e.scrollClientHeight,r=2;e.to&&(r=(this.view.documentPadding.top+this.view.defaultLineHeight*e.to)/this.view.contentHeight*e.scrollClientHeight-n)<4&&(n-=(4-r)/2,r=4),this.context.fillStyle=e.color,this.context.beginPath(),this.context.fillRect(9.333333333333334*(null!=(t=e.lane)?t:0),2*n,28/(void 0===e.lane?1:3),2*r)}}}]),e}();function ez(e){for(var t=[],n=(0,j.foldedRanges)(e).iter();n.value;){var r=t[t.length-1];if(!r||r[0][1].to<n.to){var i=e.doc.lineAt(n.from),a=e.doc.lineAt(n.to);t.push([[i,a],a.number-i.number])}n.next()}return t}function eW(e){return null!==e.facet(eC)}var eq=w.StateField.define({create:function(e){return eW(e)?ez(e):[]},update:function(e,t){return eW(t.state)&&(0,k.hasChanged)(t,"doc",j.foldState,eW)?ez(t.state):e}}),eK=w.Facet.define({combine:function(e){var t;return null!=(t=e.find(function(e){return null!==e}))?t:null},enables:function(e){return[eC.compute([e],function(t){return t.facet(e)}),eG,[eq,(0,eD.ConditionalViewPlugin)(function(e){return new eH(e)},{isEnabled:function(e){return null!==e.facet(eC)},provide:function(){return _.EditorView.editorAttributes.of(function(e){return null!==e.state.facet(eC)?{class:eO}:null})}})],(0,eD.ConditionalViewPlugin)(function(e){return new e$(e)},{isEnabled:function(e){return null!==e.facet(eC)},eventObservers:{scroll:function(){var e;null==(e=this.plugin())||e.updateHandlePosition()}}})]}}),eY=e.i(210736),eQ="cm-multiplayer-selection-green",eX="cm-multiplayer-selection-red",eZ="cm-multiplayer-selection-blue",eJ="cm-multiplayer-selection-gold",e0="cm-multiplayer-selection-purple",e1="cm-multiplayer-selection-teal",e2="cm-multiplayer-selection-pink",e3=_.EditorView.theme((o={},(0,x._)(o,".".concat(eQ),{background:"rgba(27, 196, 125, 0.2)"}),(0,x._)(o,".".concat(eX),{background:"rgba(239, 85, 51, 0.2)"}),(0,x._)(o,".".concat(eZ),{background:"rgba(24, 160, 251, 0.2)"}),(0,x._)(o,".".concat(eJ),{background:"rgba(255, 199, 0, 1)"}),(0,x._)(o,".".concat(e0),{background:"rgba(144, 124, 255, 0.2)"}),(0,x._)(o,".".concat(e1),{background:"rgba(0, 181, 206, 0.2)"}),(0,x._)(o,".".concat(e2),{background:"rgba(238, 70, 211, 0.2)"}),o)),e5={"#1BC47D":eQ,"#EF5533":eX,"#18A0FB":eZ,"#FFC700":eJ,"#907CFF":e0,"#00B5CE":e1,"#EE46D3":e2},e4=w.StateEffect.define(),e8=w.StateEffect.define(),e6=w.StateEffect.define(),e7=w.StateField.define({create:function(){return{}},update:function(e,t){if(!t.changes.empty){var n=function(e){return t.changes.mapPos(Math.min(t.changes.length,e))},r={},i=!0,a=!1,o=void 0;try{for(var s,l=Object.values(e)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;r[u.id]=(0,eS._)((0,ek._)({},u),{position:n(u.position),selectionStart:n(u.selectionStart),selectionEnd:n(u.selectionEnd)})}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}e=r}var c=!0,d=!1,f=void 0;try{for(var p,h=t.effects[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var m=p.value;if(m.is(eY.resizeEditor)&&(e=(0,ek._)({},e)),m.is(e4)&&m.value.position<=t.newDoc.length&&((e=(0,ek._)({},e))[m.value.id]=(0,ek._)({},m.value)),m.is(e8)&&(e=(0,ek._)({},e),m.is(e8)&&delete e[m.value]),m.is(e6)){e=(0,ek._)({},e);var g=!0,x=!1,y=void 0;try{for(var b,w=Object.entries(e)[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var _=(0,X._)(b.value,2),k=_[0];_[1].username===m.value&&delete e[k]}}catch(e){x=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(x)throw y}}}}}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}return e},provide:function(e){return[e3,w.Prec.high((0,_.layer)({above:!1,class:"cm-multiplayer-cursor-layer",update:function(t){return(0,k.hasChanged)(t,e)},markers:function(t){var n=t.state.field(e,!1);if(!n)return[];var r=[],i=!0,a=!1,o=void 0;try{for(var s,l=Object.values(n)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,c=u.selectionStart,d=u.selectionEnd,f=u.color.selection;if(c!==d){var p=w.EditorSelection.range(c,d);r.push.apply(r,(0,C._)(_.RectangleMarker.forRange(t,f,p)))}}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return r}})),eT.compute([e],function(t){var n=t.field(e,!1);return n?Object.entries(n).map(function(e){var n=(0,X._)(e,2),r=(n[0],n[1]);return{color:r.color.cursor,number:t.doc.lineAt(r.selectionStart).number}}):[]})]}}),e9=function(){function e(t,n){var r=this;(0,m._)(this,e),(0,x._)(this,"view",void 0),(0,x._)(this,"presence",void 0),(0,x._)(this,"destroyed",void 0),(0,x._)(this,"dispose",void 0),(0,x._)(this,"followed",void 0),this.view=t,this.presence=n,this.destroyed=!1,this.followed=null,this.dispose=n.onFollowedUserChanged(function(e){return r.onFollowedUserChanged(e)}),Promise.resolve().then(function(){r.onFollowedUserChanged(n.getFollowedUser())})}return(0,g._)(e,[{key:"onFollowedUserChanged",value:function(e){var t=this;if(!this.destroyed&&(this.followed=e,this.followed)){var n=this.view.state.field(e7,!1);if(n){var r=Object.values(n).find(function(e){var n;return e.username===(null==(n=t.followed)?void 0:n.username)});r&&this.jumpToPosition(r.position)}}}},{key:"jumpToPosition",value:function(e){this.view.dispatch({effects:[_.EditorView.scrollIntoView(w.EditorSelection.cursor(e),{x:"center",y:"center"})]})}},{key:"unfollow",value:function(){this.presence.getFollowedUser()&&this.presence.unfollowUser()}},{key:"postUpdate",value:function(e){if(this.followed){var t=void 0,n=!0,r=!1,i=void 0;try{for(var a,o=e.transactions[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=!0,u=!1,c=void 0;try{for(var d,f=s.effects[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;p.is(e4)&&p.value.username===this.followed.username&&(t=p)}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}t&&this.jumpToPosition(t.value.position)}}},{key:"destroy",value:function(){this.destroyed=!0,this.dispose()}}]),e}(),te=new M.ReactCompartment(function(e){return _.ViewPlugin.define(function(t){return new e9(t,e)},{provide:function(e){return _.EditorView.updateListener.of(function(t){var n;return null==(n=t.view.plugin(e))?void 0:n.postUpdate(t)})},eventHandlers:{click:function(){this.unfollow()},wheel:function(){this.unfollow()},keydown:function(e){"Control"!==e.key&&"Meta"!==e.key&&this.unfollow()}}})}),tt=e.i(276385),tn=e.i(938668),tr=e.i(903381),ti=e.i(222342),ta=e.i(282453),to=_.ViewPlugin.define(function(e){var t=e.state.facet(ts),n=[];return{update:function(e){t=e.state.facet(ts);var n=!0,r=!1,i=void 0;try{for(var a,o=e.transactions[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.changes.empty||this.pushTransaction(s)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}},flush:function(){n=[]},logs:function(){return n},pushEvent:function(t){var n={anchor:e.state.selection.main.anchor,head:e.state.selection.main.head,docLength:e.state.doc.length,time:Date.now(),type:t.type};(0,eR._)(t,KeyboardEvent)&&(n.key=t.key,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey),(0,eR._)(t,InputEvent)&&(n.data=t.data,n.inputType=t.inputType,n.isComposing=t.isComposing),(0,eR._)(t,CompositionEvent)&&(n.data=t.data),this.pushLog(n)},pushTransaction:function(e){this.pushLog({userEvent:e.annotation(w.Transaction.userEvent),changes:JSON.stringify(e.changes),time:Date.now(),type:"transaction"})},pushLog:function(e){t&&(n.push(e),n=n.slice(Math.max(0,n.length-100)))}}},{provide:function(e){var t=function(t,n){var r;return null==(r=n.plugin(e))?void 0:r.pushEvent(t)};return w.Prec.highest(_.EditorView.domEventHandlers({keypress:t,keydown:t,keyup:t,beforeinput:t,input:t,compositionstart:t,compositionupdate:t,compositionend:t}))}}),ts=w.Facet.define({combine:function(e){return!!e.length&&e[0]}}),tl=new M.ReactCompartment(function(e){return ts.of(e)});e.s(["KeystrokeDebuggerForErrors",()=>to,"KeystrokeDebuggerForErrorsEnabledCompartment",()=>tl],268403);var tu=e.i(37292),tc=e.i(205104),td=e.i(664152),tf=e.i(603237),tp=new Map,th=function(e,t){if((0,tc.isOTFile)(e)){var n=window.performance.now();tp.set(e,{start:n,source:t})}},tm=function(e){var t=tp.get(e);if(void 0!==t){var n=t.start,r=t.source,i=window.performance.now(),a=(0,tf.getFileViewerType)(e);td.logger.time("time to load file",i-n,{from:r,fileViewerType:a}),tp.delete(e)}};function tg(e){return{trackTimeToLoadFileStart:function(t){return th(t,e)},trackTimeToLoadFileEnd:tm}}e.s(["default",()=>tg],251923);var tv=e.i(446530),tx=e.i(613355),ty=w.Annotation.define(),tb=w.StateEffect.define(),tw=w.StateField.define({create:function(){return!0},update:function(e,t){return!(0,k.hasChanged)(t,tb)&&e},provide:function(e){return e_.Initializing.from(e)}}),t_=(0,tv.cssRecord)({buttonLink:[tx.rcss.reset.button,tx.rcss.linkStyle]}),tk="hide-editor-file-size-warning",tS=ta.default.get(tk,"boolean"),tC=function(){function e(t,n,r,i){var a=this;(0,m._)(this,e),(0,x._)(this,"view",void 0),(0,x._)(this,"path",void 0),(0,x._)(this,"fs",void 0),(0,x._)(this,"destroyed",void 0),(0,x._)(this,"dispose",void 0),(0,x._)(this,"debug",void 0),(0,x._)(this,"writeChange",void 0),this.view=t,this.path=n,this.fs=r,this.writeChange=null,this.destroyed=!1,this.debug=(0,eS._)((0,ek._)({},i),{latestReceivedVersion:0,openVersion:0,initiatedChanges:0,previousInitiatedChanges:null}),this.dispose=r.watchTextFile(n,{onReady:function(e){var n=e.initialContent,r=e.writeChange,o=e.version;!a.destroyed&&(a.debug.latestReceivedVersion=o,a.debug.openVersion=o,a.debug.setBsodFilePathVersion({filePath:a.path,version:o}),a.debug.trackTimeToLoadFileEnd(a.path),a.writeChange=r,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n},effects:tb.of(null),annotations:[w.Transaction.addToHistory.of(!1),w.Transaction.remote.of(!0),ty.of(!0)]}),n.length>=0xa00000&&!0!==tS&&(tS=!0,ta.default.set(tk,!0),i.showWarning((0,tt.jsxs)(tt.Fragment,{children:["Large files may be slow to edit. Consider using",(0,tt.jsx)("br",{}),"Cloud Services like"," ",(0,tt.jsx)("button",{onClick:function(){i.performPaneOperation({operation:"open",secondary:!0,pane:{type:"objectStorage"}})},css:t_.buttonLink,children:"App Storage"})," ","and"," ",(0,tt.jsx)("button",{onClick:function(){i.performPaneOperation({operation:"open",secondary:!0,pane:{type:"neon"}})},css:t_.buttonLink,children:"PostgreSQL"}),"."]}),5e3)))},onChange:function(e){var n=e.changes,r=e.changeSource,i=e.version,o=e.userId;if(!a.destroyed){a.debug.latestReceivedVersion=i,a.debug.setBsodFilePathVersion({filePath:a.path,version:i});try{t.dispatch({changes:n,annotations:[w.Transaction.remote.of(r===tr.ChangeSource.Container),w.Transaction.addToHistory.of(r===tr.ChangeSource.Local||0===o),ty.of(!0)]})}catch(e){a.debugThrowSyncRemoteOpError(n,r,e)}}},onError:function(){a.destroyed||(a.dispose=null,a.writeChange=null)},onMoveOrDelete:function(){a.destroyed||(a.dispose=null,a.writeChange=null)}})}return(0,g._)(e,[{key:"postUpdate",value:function(e){if(e.docChanged&&this.writeChange){var t=!0,n=!1,r=void 0;try{for(var i,a=e.transactions[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(!(o.annotation(w.Transaction.remote)||o.annotation(ty))){this.debug.initiatedChanges++;var s=o.annotation(tn.default)?{author:"ghostwriter"}:{};try{this.writeChange(o.changes,s),this.debug.previousInitiatedChanges=o.changes}catch(t){this.debugThrowWriteChangeError(e,o,t);break}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}},{key:"destroy",value:function(){var e;this.destroyed=!0,null==(e=this.dispose)||e.call(this),this.dispose=null,this.writeChange=null,this.debug.deleteBsodFilePathVersion({filePath:this.path})}},{key:"debugThrowSyncRemoteOpError",value:function(e,t,n){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var a="replitReadError: "+i.error;i.error||(a=i.content.toString());var o=r.view.contentDOM.innerText;r.debug.throwBsod({origin:"Codemirror: ot/syncRemoteOp",error:n,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),changes:JSON.stringify(e),changeSource:t,otClientDoc:a,domText:o,cmDoc:r.view.state.doc.sliceString(0),openVersion:r.debug.openVersion,version:r.debug.latestReceivedVersion,initiatedChanges:r.debug.initiatedChanges}}),(0,_.logException)(r.view.state,n)})}},{key:"debugThrowWriteChangeError",value:function(e,t,n){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var a="replitReadError: "+i.error;i.error||(a=i.content.toString());var o=e.view.contentDOM.innerText,s=e.view.plugin(to),l=null==s?void 0:s.logs();null==s||s.flush(),r.debug.throwBsod({origin:"Codemirror: ot/writeChange",error:n,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),transactionChanges:JSON.stringify(t.changes),otherTransactionChanges:JSON.stringify(e.transactions.filter(function(e){return e!==t}).map(function(e){return e.changes})),transactionDoc:t.newDoc.sliceString(0),updateDoc:e.state.doc.sliceString(0),otClientDoc:a,domText:o,openVersion:r.debug.openVersion,latestReceivedVersion:r.debug.latestReceivedVersion,keystrokes:JSON.stringify(l)}})}),(0,_.logException)(e.state,n)}}]),e}(),tj=new M.ReactCompartment(function(e,t,n){return _.ViewPlugin.define(function(r){return new tC(r,e,t,n)},{provide:function(e){return[tw,_.EditorView.updateListener.of(function(t){var n;return null==(n=t.view.plugin(e))?void 0:n.postUpdate(t)})]}})});function tT(e){var t=e.filePath,n=e.fs,r=e.performPaneOperation,i=tg().trackTimeToLoadFileEnd,a=(0,tu.useThrowBsod)(),o=(0,tu.useSetBsodFilePathVersion)(),l=(0,tu.useDeleteBsodFilePathVersion)(),u=(0,ti.default)().showWarning,c=(0,s.useMemo)(function(){return{trackTimeToLoadFileEnd:i,throwBsod:a,setBsodFilePathVersion:o,deleteBsodFilePathVersion:l,showWarning:u,performPaneOperation:r}},[l,o,a,i,u,r]);return tj.use(t,n,c)}e.s(["OtIsLoading",()=>tw,"useOtCompartment",()=>tT],492555);var tE=e.i(15053),tR=_.EditorView.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:ex.tokens.shadow1,borderRadius:ex.tokens.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block",whiteSpace:"nowrap"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function tI(e){e.style.transform="translate(-10000px, -10000px)"}var tA=/iPhone|iPad|iPod/i;function tP(){return!!window.navigator.userAgent.match(tA)||"ontouchstart"in window&&window.navigator.userAgent.includes("Macintosh")}function tD(e){var t=document.createElement("div");t.textContent=e.username,t.style.backgroundColor=e.color.cursor,t.classList.add("multiplayer-label");var n=document.createElement("div");return n.classList.add("multiplayer-cursor"),n.style.backgroundColor=e.color.cursor,n.style.position=tP()?"absolute":"fixed",n.appendChild(t),{dom:n,label:t}}var tO=new Map,tN=[tR,_.ViewPlugin.define(function(e){var t=e.state.field(e7,!1),n=new Map((t?Object.values(t):[]).map(function(e){return[e.id,{view:tD(e),cursor:e}]})),r=!0,i=0,a="function"==typeof IntersectionObserver?new IntersectionObserver(function(e){Date.now()>i-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&u()},{threshold:[1]}):null;function o(){a&&(a.disconnect(),n.forEach(function(e){a.observe(e.view.dom)}))}function s(){!(!t||0===Object.values(t).length)&&(e.inView&&e.requestMeasure(c),r!==e.inView)&&((r=e.inView)||n.forEach(function(e){tI(e.view.dom)}))}o();var l=null;function u(){null===l&&(l=setTimeout(function(){l=null,s()},50))}window.addEventListener("resize",u);var c={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((t?Object.values(t):[]).map(function(t){var r=n.get(t.id),i=r?function(e,t){var n=tO.get(e);if(n)return n;var r=t.getBoundingClientRect().width;return tO.set(e,r),r}(t.username,r.view.label):null;return[t.id,{position:e.coordsAtPos(t.position),labelWidth:i}]}))}},write:function(e){n.forEach(function(t,n){var r=e.dimensions.get(n);!function(e){var t=e.cursorView,n=e.position,r=e.labelWidth,i=e.editorRect,a=t.dom,o=t.label;if(!n||!r)return tI(a);var s=n.bottom-n.top;if(n.bottom<=i.top+s||n.top+s>=i.bottom||n.right<i.left-.1||n.left>i.right+.1)return tI(a);var l=n.left+r-i.right,u="0px";l>0?(u="-".concat(l,"px"),o.style.borderBottomLeftRadius="4px"):o.style.borderBottomLeftRadius="0px",o.style.pointerEvents="none",o.style.transform="translate(".concat(u,", -100%)");var c=tP()?{x:n.left-i.left+"px",y:n.top-i.top+"px"}:{x:"calc(".concat(n.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(n.top,"px + var(--fixed-position-offset-y))")},d=c.x,f=c.y;a.style.transform="translate(".concat(d,", ").concat(f,")"),a.style.height=s+"px"}({cursorView:t.view,position:(null==r?void 0:r.position)||null,labelWidth:(null==r?void 0:r.labelWidth)||null,editorRect:e.editorRect})})},key:"multiplayer-cursors-plugin-".concat((0,tE.v4)())};return{update:function(r){r.transactions.length&&(i=Date.now());var a=r.state.field(e7,!1);if(a===r.startState.field(e7,!1)){r.geometryChanged&&s();return}var l=new Map,u=new Set;if(a){var c=new Map((0,C._)(n.values()).map(function(e){return[e.cursor.id,e.view]}));Object.values(a).forEach(function(t){var n=c.get(t.id);if(n)u.add(n),l.set(t.id,{view:n,cursor:t});else{var r=tD(t);l.set(t.id,{view:r,cursor:t}),e.dom.appendChild(r.dom)}})}n.forEach(function(e){u.has(e.view)||e.view.dom.remove()}),n=l,t=a,o(),s()},destroy:function(){window.removeEventListener("resize",u),n.forEach(function(e){e.view.dom.remove()}),t=void 0,n=new Map,null==a||a.disconnect(),l&&clearTimeout(l)},maybeMeasure:s}},{eventHandlers:{scroll:function(){this.maybeMeasure()}}})],tM=function(){function e(t,n,r,i){var a=this;(0,m._)(this,e),(0,x._)(this,"view",void 0),(0,x._)(this,"colors",void 0),(0,x._)(this,"disposes",void 0),(0,x._)(this,"destroyed",void 0),(0,x._)(this,"updateSelections",void 0),this.view=t,this.destroyed=!1,this.colors=this.getColorMapFromUsers(i.getActiveUsers()),this.disposes=[],this.updateSelections=null,this.disposes.push(i.onUserLeave(function(e){a.destroyed||a.view.dispatch({effects:e6.of(e.username)})}),i.onActiveUsersChange(function(e){a.destroyed||(a.colors=a.getColorMapFromUsers(e))}),r.watchTextFile(n,{onReady:function(e){var t=e.updateSelections;a.destroyed||(a.updateSelections=t)},onCursor:function(e){if(!a.destroyed){var t=function(e){var t,n=e.cursor,r=e.usernameColorsMap,i=null==(t=n.user)?void 0:t.name;if(i){var a=n.id,o=n.position,s=n.selectionStart,l=n.selectionEnd,u=r[i];if(u&&a&&"number"==typeof o&&"number"==typeof s&&"number"==typeof l)return e4.of({id:a,username:i,position:o,color:{cursor:u,selection:e5[u]||""},selectionStart:s,selectionEnd:l})}}({cursor:e,usernameColorsMap:a.colors});t&&a.view.dispatch({effects:t})}},onRemoveCursor:function(e){a.destroyed||a.view.dispatch({effects:e8.of(e)})},onError:function(){a.updateSelections=null},onMoveOrDelete:function(){a.updateSelections=null}}))}return(0,g._)(e,[{key:"getColorMapFromUsers",value:function(e){return e.reduce(function(e,t){return t.username&&t.color?(0,eS._)((0,ek._)({},e),(0,x._)({},t.username,t.color)):e},{})}},{key:"postUpdate",value:function(e){if(!(!e.selectionSet||e.transactions.every(function(e){return e.annotation(w.Transaction.remote)}))&&this.updateSelections){var t=e.state.selection.ranges.map(function(e){return{position:e.head,selectionStart:e.from,selectionEnd:e.to}});this.updateSelections(t)}}},{key:"destroy",value:function(){this.destroyed=!0,this.disposes.forEach(function(e){return e()})}}]),e}(),tL=new M.ReactCompartment(function(e,t,n){return[tN,e7,_.ViewPlugin.define(function(r){return new tM(r,e,t,n)},{provide:function(e){return _.EditorView.updateListener.of(function(t){var n;return null==(n=t.view.plugin(e))?void 0:n.postUpdate(t)})}})]}),tB=e.i(703613);function tV(e){var t,n=e.view,r=e.presence,i=e.fs,a=e.filePath,o=e.performPaneOperation,l=tL.use(a,i,r),u=te.use(r),c=tT({filePath:a,fs:i,performPaneOperation:o}),d=null==(t=(0,tB.useCodeMirrorValue)(n,e_.Initializing))||t,f=(0,s.useMemo)(function(){return[c,l,u]},[c,l,u]);return(0,s.useMemo)(function(){return{isLoading:d,extensions:f}},[d,f])}e.s(["useMultiplayer",()=>tV],755224);var tF=e.i(319122),tU=e.i(995683),tG=e.i(386594),t$=e.i(240913),tH=RegExp("_(?<num>\\d+)$"),tz=function(e,t,n){return(0,h._)(function(){var r,i,a,o,s,l;return(0,y._)(this,function(u){switch(u.label){case 0:var c;return r=encodeURI(e.name),[4,(c=(i=(0,tc.getParentPath)(n))?i+"/"+r:r,(0,h._)(function(){var e,n,r,i;return(0,y._)(this,function(a){switch(a.label){case 0:return e=(0,tc.getParentPath)(c),[4,t.readDir(e||t$.ROOT_PATH)];case 1:if((n=a.sent()).error)return[2,c];return i=(r=function(e){if(n.children.find(function(t){return"FILE"===t.type&&t.filename===e})){var t,i=(0,tc.getBaseName)(e),a=(0,tc.getExt)(e),o=i.match(tH);if(null==o||null==(t=o.groups)?void 0:t.num){var s=Number(o.groups.num);return r("".concat(i.replace(tH,""),"_").concat(s+1,".").concat(a))}return r("".concat(i,"_2.").concat(a))}return e})((0,tc.getFileName)(c)),[2,e?e+"/"+i:i]}})})())];case 1:return a=u.sent(),[4,(0,tG.readFileAsArrayBuffer)(e)];case 2:return o=u.sent(),[4,t.writeFile(a,tU.default.from(o))];case 3:return u.sent(),s=(0,tc.getBaseName)(e.name),l=(0,tc.getFileName)(a),[2,"![".concat(s,"](").concat(l,")")]}})})()};function tW(e){var t=e.view,n=e.event,r=e.clipboardText,i=e.filePath,a=t.state.selection;if(!i||!(0,tc.isMarkdownFile)(i)||a.ranges.length>1||a.main.from===a.main.to||!r||!(0,tF.default)(r))return void function(){if(!n){var e=r||"";if(a.main.empty){var i=a.main.from+e.length;t.dispatch({changes:[{from:a.main.from,insert:e}],selection:w.EditorSelection.range(i,i)})}else t.dispatch(t.state.replaceSelection(e))}}();n&&n.preventDefault();var o=t.state.sliceDoc(a.main.from,a.main.to),s="[".concat(o,"](").concat(r,")"),l=a.main.from+s.length;t.dispatch({changes:{from:a.main.from,to:a.main.to,insert:s},selection:w.EditorSelection.range(l,l)})}e.s(["uploadImageAndGetMDCode",()=>tz],545915);var tq=_.EditorView.domEventHandlers({paste:function(e,t){var n;tW({filePath:t.state.facet(S.fileName),view:t,event:e,clipboardText:null==(n=e.clipboardData)?void 0:n.getData("Text")})}}),tK=new M.ReactCompartment(function(e){return _.EditorView.domEventHandlers({paste:function(t,n){var r=n.state.facet(S.fileName),i=null==t||null==(u=t.clipboardData)?void 0:u.files,a=function(e){var t=n.state.selection.main.head;n.dispatch({changes:{from:t,insert:e},selection:{anchor:t,head:t+e.length}})};if(i){var o=!0,s=!1,l=void 0;try{for(var u,c,d=i[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var f=c.value;r&&(0,tc.isMarkdownFile)(r)&&tz(f,e,r).then(a)}}catch(e){s=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(s)throw l}}}}})});e.s(["PasteImgCompartment",()=>tK,"PasteLink",()=>tq,"handlePasteEvent",()=>tW],335392);var tY=e.i(305027),tQ=e.i(445735),tX=e.i(858248),tZ=e.i(709485),tJ=function(e){function t(e,n){var r;return(0,m._)(this,t),r=(0,Y._)(this,t),(0,x._)(r,"id",void 0),(0,x._)(r,"result",void 0),r.id=e,r.result=n,r}return(0,Q._)(t,e),(0,g._)(t,null,[{key:"range",value:function(e,t,n){return new this(e,n).range(t.from,t.to)}},{key:"generateId",value:function(){return this.secretId++}}]),t}(w.RangeValue);(0,x._)(tJ,"secretId",0);var t0=function(e){function t(e){var n;return(0,m._)(this,t),n=(0,Y._)(this,t),(0,x._)(n,"key",void 0),n.key=e,n}return(0,Q._)(t,e),(0,g._)(t,null,[{key:"from",value:function(e){return new this(e)}}]),t}(w.RangeValue),t1=w.StateEffect.define({map:function(e,t){var n=w.RangeSet.of(e).map(t).iter(),r=n.from,i=n.to;return tJ.range(e.value.id,w.EditorSelection.cursor(r,i),e.value.result)}}),t2=w.StateEffect.define(),t3=w.StateEffect.define(),t5=w.StateEffect.define(),t4=w.StateEffect.define(),t8=w.StateEffect.define(),t6=function(e){var t=e.state.field(ni);if(!t.size)return!1;for(var n=t.iter(),r=[];n.value;){var i=n.from,a=n.to,o=n.value;r.push({from:i,to:a,value:o}),n.next()}var s=e.state.doc.length,l=w.ChangeSet.empty(s),u=[],c=[],d=!0,f=!1,p=void 0;try{for(var h,m=r[Symbol.iterator]();!(d=(h=m.next()).done);d=!0)!function(){var e=h.value,t=e.from,n=e.to,r=e.value,i=r.result.secret,a=w.ChangeSet.of({from:t,to:n,insert:i},s).map(l,!0);u=u.map(function(e){return e.map(a)});var o=(l=l.compose(a)).mapPos(t)+i.length;u.push(w.EditorSelection.cursor(o)),c.push(t2.of(r.id)),(0,tX.track)(tZ.events.PASTE_SCANNER_USED,{action:"original_accepted",provider:r.result.provider})}()}catch(e){f=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}return e.dispatch({changes:l,effects:c,selection:w.EditorSelection.create(u)}),!0},t7=function(e){return!!e.state.field(ni).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return t3.of(e)})}),!0)},t9=function(){return!1},ne=function(e){return!!e.state.field(ni).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return t2.of(e)})}),!0)};function nt(e,t){var n,r=null==(n=e.clipboardData)?void 0:n.getData("text/plain");if(!r)return!1;var i=(0,tQ.scan)(r);if(!i)return!1;e.preventDefault(),e.stopPropagation();var a=r.slice(0,i.start)+r.slice(i.end),o=tJ.generateId();return t.dispatch((0,eS._)((0,ek._)({},t.state.changeByRange(function(e){var t=e.from,n=e.to,r=w.EditorSelection.cursor(t+i.start);return{range:r,changes:{from:t,to:n,insert:a},effects:t1.of(tJ.range(o,r,i))}})),{scrollIntoView:!0})),(0,tX.track)(tZ.events.PASTE_SCANNER_USED,{action:"secret_detected",provider:i.provider}),!0}var nn=w.StateField.define({create:function(){return w.RangeSet.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var a,o=t.effects[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.is(t4)){var l=s.value,u=l.from,c=l.to,d=l.secret;e=e.update({add:[t0.from(d).range(u,c)],filter:function(){return!1}})}s.is(t8)&&(e=w.RangeSet.empty)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e}}),nr=w.StateField.define({create:function(){return null},update:function(e,t){var n=t.state.field(ni,!1),r=!0,i=!1,a=void 0;try{for(var o,s=t.effects[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;n&&l.is(t3)&&((0,eR._)(l.value,w.SelectionRange)?n.between(l.value.from,l.value.to,function(t,n,r){e=r}):e=l.value),l.is(t5)&&(e=null)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return e}}),ni=w.StateField.define({create:function(){return w.RangeSet.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var a,o=t.effects[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)!function(){var t=a.value;t.is(t1)&&(e=e.update({add:[t.value],sort:!0})),t.is(t2)&&(e=(0,eR._)(t.value,w.SelectionRange)?e.update({filter:function(){return!1},filterFrom:t.value.from,filterTo:t.value.to}):e.update({filter:function(e,n,r){return r.id!==t.value}}))}()}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e},provide:function(){return[_.EditorView.domEventHandlers({paste:nt}),w.Prec.highest(_.keymap.of([{key:"Mod-z",run:ne},{key:"Enter",run:t6},{key:"Tab",run:t7,stopPropagation:!0},{key:"Escape",run:t9}]))]}}),na=tY.ShouldSuppressCompleteCode.of(function(e){var t=e.state.field(ni,!1);if(!t||!t.size)return!1;var n=!1;return t.between(e.newSelection.main.from,e.newSelection.main.to,function(){return n=!0,!1}),n});e.s(["CloseModal",()=>t5,"HideSnippetPocket",()=>t8,"OpenModal",()=>t3,"PasteModalState",()=>nr,"PasteScannerState",()=>ni,"RemovePendingSecret",()=>t2,"SecretSnippetState",()=>nn,"ShowSnippetPocket",()=>t4,"SuppressCompleteCodeWhenSecretsPresent",()=>na,"onAcceptOriginal",()=>t6],140659);var no=e.i(119468),ns=e.i(242131),nl=e.i(684481),nu=e.i(921211),nc=e.i(712771),nd=e.i(979530),nf=e.i(140487),np=e.i(136540),nh=e.i(607278),nm=e.i(739521),ng=e.i(960178),nv=e.i(625484),nx=(0,tv.cssRecord)({buttons:[tx.rcss.display.flex,tx.rcss.rowWithGap(4),tx.rcss.justify.end],input:[tx.rcss.colWithGap(4),tx.rcss.flex.grow(1)],label:[tx.rcss.color.foregroundDimmer,tx.rcss.fontSize(12),tx.rcss.height(24),tx.rcss.justify.center],flexRow:[tx.rcss.display.flex,tx.rcss.rowWithGap(8),tx.rcss.align.center]}),ny={fontFamily:"text-security-disc"},nb=nv.SpecializedView.label;function nw(e){var t=(0,H.default)().secrets,n=(0,s.useId)(),r=(0,s.useId)(),i=(0,X._)((0,s.useState)(""),2),a=i[0],o=i[1],l=(0,X._)((0,s.useState)(e.initialValue),2),u=l[0],c=l[1],d=(0,X._)((0,s.useState)(!1),2),f=d[0],p=d[1],m=(0,s.useRef)(null);return(0,s.useEffect)(function(){if(e.isOpen){var t;null==(t=m.current)||t.focus(),(0,tX.track)(tZ.events.PASTE_SCANNER_USED,{action:"modal_opened",provider:null==e?void 0:e.provider})}},[e.isOpen,null==e?void 0:e.provider]),(0,tt.jsx)(nu.FocusScope,{contain:!0,children:(0,tt.jsx)(nm.Modal,{isOpen:e.isOpen,onRequestClose:e.onCancel,children:(0,tt.jsxs)(nv.View,{gap:16,children:[(0,tt.jsx)(ng.Text,{variant:"subheadBig",multiline:!1,children:"Add a key name for your secret value"}),(0,tt.jsxs)(nv.View,{css:nx.flexRow,children:[(0,tt.jsxs)(nv.View,{css:nx.input,children:[(0,tt.jsx)(nb,{css:nx.label,htmlFor:n,children:"Key"}),(0,tt.jsx)(nh.Input,{id:n,ref:m,value:a,onChange:function(e){return o(e.target.value)}})]}),(0,tt.jsxs)(nv.View,{css:nx.input,children:[(0,tt.jsxs)(nv.View,{css:nx.flexRow,children:[(0,tt.jsx)(nb,{css:nx.label,htmlFor:r,children:"Value"}),(0,tt.jsx)(np.IconButton,{alt:"Toggle Secret",onClick:function(){return p(function(e){return!e})},tooltipPlacement:"top",children:f?(0,tt.jsx)(nd.default,{}):(0,tt.jsx)(nc.default,{})})]}),(0,tt.jsx)(nh.Input,{id:r,value:u,onChange:function(e){return c(e.target.value)},style:f?void 0:ny})]})]}),(0,tt.jsxs)(nv.View,{css:nx.buttons,children:[(0,tt.jsx)(nf.Button,{text:"Cancel",onClick:e.onCancel}),(0,tt.jsx)(nf.Button,{colorway:"primary",text:"Save Secret",disabled:0===a.length||0===u.length,onClick:function(){return(0,h._)(function(){return(0,y._)(this,function(n){switch(n.label){case 0:return[4,t.addEntries([{key:a,value:u}])];case 1:return n.sent(),e.onSaveSecret(a,u),(0,tX.track)(tZ.events.PASTE_SCANNER_USED,{action:"secret_created",provider:null==e?void 0:e.provider}),[2]}})})()}})]})]})})})}var n_=e.i(995691),nk=e.i(416298);e.i(32109);var nS=e.i(926118),nC=(0,tv.cssRecord)({hint:[tx.rcss.align.center,tx.rcss.border({color:ex.tokens.outlineDimmer,direction:"top"}),tx.rcss.color.foregroundDimmest,tx.rcss.display.flex,tx.rcss.flex.row,tx.rcss.px(8),tx.rcss.py(4),tx.rcss.rowWithGap(8)],key:[tx.rcss.px(4)],wrapper:[tx.rcss.backgroundColor.backgroundHigher,tx.rcss.borderRadius(4),tx.rcss.cursor.default,tx.rcss.font.default],mobileButtons:[tx.rcss.flex.grow(1)],mobileHint:[tx.rcss.justify.center]}),nj={borderTop:"1px solid ".concat(ex.tokens.outlineDimmer),borderBottom:"1px solid ".concat(ex.tokens.outlineDimmer),borderRadius:0};function nT(e){return(0,tt.jsxs)(nv.View,{css:nC.wrapper,style:e.onMobile?nj:void 0,children:[(0,tt.jsxs)(nv.View,{p:8,style:{textAlign:e.onMobile?"center":"inherit"},children:[(0,tt.jsx)(nv.View,{children:"The value you pasted looks like a secret."}),(0,tt.jsx)(nv.View,{children:"Store it securely using our Secrets feature."})]}),e.onMobile?(0,tt.jsx)(nR,(0,ek._)({},e)):(0,tt.jsx)(nE,(0,ek._)({},e))]})}function nE(e){return(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsxs)(nv.View,{css:nC.hint,onClick:e.onClickUseSecrets,children:[(0,tt.jsx)(n_.default,{}),"Press",(0,tt.jsx)(nv.View,{css:nC.key,children:(0,tt.jsx)(nS.KeyComboBlocks,{keyCombo:"Tab",small:!0})}),"to use Secrets"]}),(0,tt.jsxs)(nv.View,{css:nC.hint,onClick:e.onClickPasteAnyway,children:[(0,tt.jsx)(nk.default,{}),"Press",(0,tt.jsx)(nv.View,{css:nC.key,children:(0,tt.jsx)(nS.KeyComboBlocks,{keyCombo:"Enter",small:!0})}),"to paste anyway"]})]})}function nR(e){return(0,tt.jsxs)(nv.View,{css:[nC.hint,nC.mobileHint],children:[(0,tt.jsx)(nf.Button,{css:nC.mobileButtons,iconLeft:(0,tt.jsx)(n_.default,{}),text:"Use Secrets",onClick:e.onClickUseSecrets,colorway:"primary"}),(0,tt.jsx)(nf.Button,{css:nC.mobileButtons,iconLeft:(0,tt.jsx)(nk.default,{}),text:"Paste Anyway",onClick:e.onClickPasteAnyway})]})}var nI=e.i(602686),nA=e.i(12291),nP=e.i(929872),nD=(0,tv.cssRecord)({border:[tx.rcss.border({color:ex.tokens.accentPrimaryDefault,direction:"y",width:1})],title:[tx.rcss.display.flex,tx.rcss.rowWithGap(8),tx.rcss.align.center,tx.rcss.justify.spaceBetween,tx.rcss.px(8),tx.rcss.pt(4),tx.rcss.font.default],wrapper:[tx.rcss.backgroundColor.backgroundRoot,tx.rcss.py(0),tx.rcss.position.relative,tx.rcss.zIndex(200)]});function nO(e){var t;return t=e.onClose,(0,s.useEffect)(function(){var e=function(e){"Escape"===e.key&&t(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[t]),(0,tt.jsx)(nu.FocusScope,{autoFocus:!0,children:(0,tt.jsx)(nv.View,{css:nD.wrapper,children:(0,tt.jsxs)(nv.View,{css:nD.border,children:[(0,tt.jsxs)(nv.View,{css:nD.title,children:[(0,tt.jsxs)(ng.Text,{multiline:!1,children:["Access the secret ",(0,tt.jsx)("strong",{children:e.keyName}),":"]}),(0,tt.jsx)(np.IconButton,{alt:"Close",onClick:e.onClose,children:(0,tt.jsx)(nI.default,{})})]}),(0,tt.jsx)(nP.Surface,{background:"root",children:(0,tt.jsx)(nA.default,{elevate:!1,keyName:e.keyName,filePath:e.filePath,onInsert:e.onInsert})})]})})})}var nN=e.i(928353),nM=e.i(74920),nL=ns.GhostText.compute([ni],function(e){var t=e.field(ni).iter();if(null===t.value)return null;for(var n=[];null!==t.value;){var r=t.from,i=t.to,a=t.value;n.push({from:r,to:i,insert:a.result.secret}),t.next()}return n}),nB=function(e){function t(e,n){var r;return(0,m._)(this,t),r=(0,Y._)(this,t),(0,x._)(r,"secret",void 0),(0,x._)(r,"as",void 0),r.secret=e,r.as=n,r}return(0,Q._)(t,e),(0,g._)(t,[{key:"toDOM",value:function(e){var t=this,n=(0,nN.createCodeMirrorElement)((0,tt.jsx)(nT,{onMobile:"pocket"===this.as,onClickUseSecrets:function(){e.dispatch({effects:t3.of(t.secret)})},onClickPasteAnyway:function(){t6(e),e.focus()},onClickUndo:function(){e.dispatch({effects:t2.of(t.secret.id)}),e.focus()}}));return"pocket"===this.as&&(n.style.zIndex="200",n.style.position="relative",this.adjustForGutter(n,e)),n}},{key:"updateDOM",value:function(e,t){return this.adjustForGutter(e,t),!0}},{key:"adjustForGutter",value:function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"}}]),t}(_.WidgetType),nV=nM.MountedReactNodes.compute([nr],function(e){var t=e.facet(S.fileName),n=e.field(nr);return n&&t?{key:"pasteScannerModal",node:function(e){return(0,tt.jsx)(nw,{isOpen:!0,initialValue:n.result.secret,provider:n.result.provider,onSaveSecret:function(t){return(0,h._)(function(){var r,i,a,o,s;return(0,y._)(this,function(l){for(r=e.state.field(ni).iter(),i=[];r.value;)a=r.from,o=r.to,(s=r.value).id===n.id&&(i.push(t2.of(s.id)),i.push(t4.of({secret:t,from:a,to:o}))),r.next();return e.dispatch({effects:(0,C._)(i).concat([t5.of(null)])}),[2]})})()},onCancel:function(){return e.dispatch({effects:t5.of(null)})}})}}:null}),nF=_.EditorView.decorations.compute([nn],function(e){var t=e.field(nn).iter(),n=t.from,r=t.to,i=t.value,a=e.facet(S.fileName);return i&&a?_.Decoration.set(_.Decoration.widget({widget:new nU(i.key,a),side:1,block:!0}).range(n,r)):_.Decoration.none}),nU=function(e){function t(e,n){var r;return(0,m._)(this,t),r=(0,Y._)(this,t),(0,x._)(r,"key",void 0),(0,x._)(r,"filePath",void 0),r.key=e,r.filePath=n,r}return(0,Q._)(t,e),(0,g._)(t,[{key:"toDOM",value:function(e){var t=(0,nN.createCodeMirrorElement)((0,tt.jsx)(nO,{keyName:this.key,filePath:this.filePath,onClose:function(){return e.dispatch({effects:t8.of(null)})},onInsert:function(t){e.dispatch(e.state.changeByRange(function(e){return{range:w.EditorSelection.cursor(e.from+t.length),changes:{from:e.from,to:e.to,insert:t}}})),e.focus(),(0,tX.track)(tZ.events.PASTE_SCANNER_USED,{action:"secret_key_inserted"})}}));return this.adjustForGutter(t,e),t}},{key:"updateDOM",value:function(e,t){return this.adjustForGutter(e,t),!0}},{key:"adjustForGutter",value:function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"}}]),t}(_.WidgetType),nG=[nL,(t=[nr,ni],n=function(e){if(null!=e.field(nr,!1))return null;var t=e.field(ni,!1);return t||null},[_.showTooltip.compute(t,function(e){var t=n(e);if(!t||e.facet(nl.IsMobile))return null;for(var r=t.iter();r.value;){var i=function(){var e=new nB(r.value,"tooltip");return{v:{arrow:!0,pos:r.to,create:function(t){return{dom:e.toDOM(t)}}}}}();if("object"===(0,no._)(i))return i.v}return null}),_.EditorView.decorations.compute(t,function(e){var t=n(e);if(!t||!e.facet(nl.IsMobile))return _.Decoration.none;var r=t.iter();if(!r.value)return _.Decoration.none;for(;r.value;){var i=new nB(r.value,"pocket");return _.Decoration.set(_.Decoration.widget({widget:i,side:1,block:!0}).range(r.to,r.to))}return _.Decoration.none})]),nV,nF],n$=[nn,ni,nr,nG,na];function nH(e,t){var n=performance.now();td.logger.time(e,n-t)}e.s(["pasteScannerExtension",()=>n$],507966);var nz=new M.ReactCompartment(function(e){var t=e?.01:.001;return w.Prec.highest(_.EditorView.domEventHandlers({keydown:function(e){if(Math.random()<t){var n=e.timeStamp;requestAnimationFrame(function(){nH("editor input latency",n),"undefined"!=typeof requestIdleCallback?requestIdleCallback(function(){nH("editor input latency after layout",n)}):setTimeout(function(){nH("editor input latency after layout",n)})})}}}))});e.s(["MeasureInputLatencyCompartment",()=>nz],427469);var nW=w.StateField.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t.effects[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.is(nq))return s.value}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}if(!e)return null;if(!t.changes.empty){var l=t.changes.mapPos(e.pos,-1,w.MapMode.TrackDel),u=t.changes.mapPos(e.pos+e.text.length,-1,w.MapMode.TrackDel);return null===l||null===u||t.newDoc.sliceString(l,u)!==e.text?null:Object.assign(Object.assign({},e),{pos:l})}return e},provide:function(e){return[_.EditorView.decorations.from(e,function(e){if(!e)return _.Decoration.none;var t=e.pos,n=e.pos+e.text.length,r=e.rule.className;return _.Decoration.set(nK({className:r}).range(t,n))}),_.EditorView.contentAttributes.from(e,function(e){return e&&e.rule.cursor?{style:"cursor: ".concat(e.rule.cursor)}:{style:""}})]}}),nq=w.StateEffect.define(),nK=function(e){var t;return _.Decoration.mark({class:"cm-interact ".concat(null!=(t=null==e?void 0:e.className)?t:"")})},nY=_.EditorView.theme({".cm-interact":{background:"rgba(128, 128, 255, 0.2)",borderRadius:"4px"}}),nQ=w.Facet.define(),nX=w.Facet.define({combine:function(e){return e[e.length-1]}}),nZ=_.ViewPlugin.define(function(e){return{target:null,dragging:!1,mouseX:0,mouseY:0,getMatch:function(){var t=e.state.facet(nQ),n=e.posAtCoords({x:this.mouseX,y:this.mouseY});if(!n)return null;var r=e.state.doc.lineAt(n),i=n-r.from,a=null,o=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value,f=!0,p=!1,h=void 0;try{for(var m,g=r.text.matchAll(d.regexp)[Symbol.iterator]();!(f=(m=g.next()).done);f=!0){var x=m.value;if(void 0!==x.index){var y=x[0];if(y){var b=x.index,w=x.index+y.length;i<b||i>w||(!a||y.length<a.text.length)&&(a={rule:d,pos:r.from+b,text:y})}}}}catch(e){p=!0,h=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}return a},updateText:function(t){return function(n){e.dispatch({effects:nq.of(Object.assign(Object.assign({},t),{text:n})),changes:{from:t.pos,to:t.pos+t.text.length,insert:n}})}},setTarget:function(t){this.target=t,e.dispatch({effects:nq.of(t)})},isModKeyDown:function(t){var n=e.state.facet(nX),r=!!window.navigator&&window.navigator.userAgent.includes("Macintosh");switch(n){case"alt":return t.altKey;case"shift":return t.shiftKey;case"ctrl":return t.ctrlKey;case"meta":return t.metaKey;case"mod":return r?t.metaKey:t.ctrlKey}throw Error("Invalid mod key: ".concat(n))},update:function(e){var t=e.state.field(nW,!1);void 0!==t&&this.target!==t&&(this.target=t,null===t&&this.endDrag())},startDrag:function(e){this.dragging||!this.target||(this.dragging=!0,this.target.rule.onDragStart&&this.target.rule.onDragStart(this.target.text,this.updateText(this.target),e))},endDrag:function(){var e;!this.dragging||(this.dragging=!1,(null==(e=this.target)?void 0:e.rule.onDragEnd)&&this.target.rule.onDragEnd(this.target.text,this.updateText(this.target)))}}},{eventHandlers:{mousedown:function(e,t){var n=this;!this.isModKeyDown(e)||this.target&&(e.preventDefault(),this.target.rule.onClick&&this.target.rule.onClick(this.target.text,function(e){n.target&&n.updateText(n.target)(e)},e),this.target.rule.onDrag&&this.startDrag(e))},mousemove:function(e,t){if(this.mouseX=e.clientX,this.mouseY=e.clientY,!this.isModKeyDown(e)){this.target&&this.setTarget(null);return}this.target&&this.dragging?this.target.rule.onDrag&&this.target.rule.onDrag(this.target.text,this.updateText(this.target),e):this.setTarget(this.getMatch())},mouseup:function(e,t){this.endDrag(),this.target&&!this.isModKeyDown(e)&&this.setTarget(null),this.isModKeyDown(e)&&this.setTarget(this.getMatch())},mouseleave:function(e,t){this.endDrag(),this.target&&this.setTarget(null)},keydown:function(e,t){!this.target&&this.isModKeyDown(e)&&this.setTarget(this.getMatch())},keyup:function(e,t){this.target&&!this.isModKeyDown(e)&&(this.endDrag(),this.setTarget(null))}}}),nJ=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[nW,nY,nZ,nX.of(null!=(e=n.key)?e:"alt"),(null!=(t=n.rules)?t:[]).map(function(e){return nQ.of(e)})]},n0=[{regexp:/https?:\/\/[^\s)"']+/g,cursor:"pointer",onClick:function(e){(0,tF.default)(e)&&window.open(e,"_blank")}}],n1=new M.ReactCompartment(function(e){return e?null:nJ({key:"mod",rules:n0})});e.s(["InteractCompartment",()=>n1],930925);var n2=e.i(316699),n3=new Set,n5=(0,n2.default)(function(){var e=!0,t=!1,n=void 0;try{for(var r,i=n3[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;(0,tX.track)(tZ.events.WS_TYPED,{fileExt:a})}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}n3.clear()},18e4),n4=_.EditorView.updateListener.of(function(e){if(e.docChanged){var t=e.state.facet(S.fileName);if(t){var n=(0,tc.getExt)(t)||(0,tc.getFileName)(t);!e.transactions.some(function(e){return e.annotation(w.Transaction.remote)})&&(n3.has(n)||(n3.add(n),n5()))}}});e.s(["TrackOnTypeExtension",()=>n4],194536);var n8=_.EditorView.theme({".cm-ruler-element":{backgroundColor:ex.tokens.backgroundHigher}}),n6=w.StateField.define({create:function(e){return 0===e.doc.length},update:function(e,t){return t.docChanged?0===t.state.doc.length:e}}),n7=(0,_.layer)({above:!1,class:"cm-ruler-layer",update:function(e){return(0,k.hasChanged)(e,n9,n6,eY.resizeEditor)},markers:function(e){if(e.state.field(n6,!1))return[];var t=e.state.facet(n9);if(0===t.length)return[];var n=[],r=e.dom.getBoundingClientRect(),i=e.contentDOM.getBoundingClientRect().left-r.left+6,a=r.width-2,o=Math.max(r.height,e.contentHeight),s=!0,l=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value,p=i+e.defaultCharacterWidth*f;p<a&&n.push(new _.RectangleMarker("cm-ruler-element",p,0,2,o))}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return n}}),n9=w.Facet.define({enables:[n6,n7,n8]}),re=new M.ReactCompartment(function(e){return e.map(function(e){return n9.of(e)})});e.s(["RulersCompartment",()=>re],275465);var rt=_.EditorView.theme({"& .cm-scrollbar-gutter":{backgroundColor:ex.tokens.backgroundDefault},"& .cm-scrollbar-inner":{borderColor:ex.tokens.backgroundHigher}}),rn=new M.ReactCompartment(function(e,t){var n;return e?null:[rt,eK.of({create:function(){return{dom:document.createElement("div")}}}),ej.compute(["doc",eg.GutterDiffState],function(e){var n=e.field(eg.GutterDiffState,!1);if(!n)return null;for(var r=[],i=1;i<=e.doc.lines;i++)switch(n.getLineChangeType(i)){case ev.LineChangeType.COVERED:r.push({number:i,color:t.values.global.greenDefault,zIndex:1});break;case ev.LineChangeType.MODIFIED:r.push({number:i,color:t.values.global.blueDefault,zIndex:0})}return r}),eP,(n=({color:t.values.global.foregroundDefault}).color,eT.compute(["doc","selection"],function(e){return e.selection.ranges.map(function(t){var r=t.head;return{color:n,number:e.doc.lineAt(r).number,zIndex:1/0}})}))]});function rr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(t),a=i.next();!a.done&&r.length<n;)r.push(a.value),a=i.next();return r}e.s(["SemanticScrollbarCompartment",()=>rn],925565),e.s(["default",()=>rr],548440)},770781,518975,705414,714330,351278,91484,442263,816688,260480,e=>{"use strict";var t,n=e.i(223808),r=e.i(672199),i=e.i(753950),a=e.i(179302);e.i(508987);var o=e.i(457103),s=e.i(530658),l=e.i(276385),u=e.i(389959),c=e.i(928353),d=e.i(548440),f=e.i(324975),p=e.i(927600),h=e.i(602686),m=e.i(86306),g=e.i(357114),x=e.i(98816),y=e.i(649960),b=e.i(670413),w=e.i(551959),_=e.i(294751),k=e.i(480028),S=e.i(446530),C=e.i(173703),j=e.i(613355),T=e.i(140487),E=e.i(136540),R=e.i(607278),I=e.i(960178),A=e.i(625484);function P(e){return e>420?"large":"small"}var D=A.SpecializedView.div,O=(0,S.cssRecord)({root:[{borderBottom:"1px solid",borderColor:k.tokens.outlineDimmest}],panelButtonWrapper:[j.rcss.center,j.rcss.height(32)],content:[j.rcss.display.grid,j.rcss.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:k.tokens.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[j.rcss.position.absolute,j.rcss.top(0),j.rcss.right(0),j.rcss.height("100%"),j.rcss.center,j.rcss.pr(4)],searchInputWrapper:[j.rcss.position.relative,{gridArea:"search"}],searchControls:[j.rcss.display.flex,j.rcss.align.center,j.rcss.rowWithGap(8),j.rcss.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[j.rcss.display.flex,j.rcss.align.center,j.rcss.rowWithGap(8),j.rcss.flex.wrap,{gridArea:"replace-controls"}],searchSettings:j.rcss.flex.row});function N(e){var t=(0,u.useRef)(null);return(0,u.useEffect)(function(){if(t.current){var n;e!==(null==(n=t.current)?void 0:n.value)&&(t.current.value=e)}},[e]),t}var M=new c.CodeMirrorComponent((0,u.forwardRef)(function(e,t){var n=e.view,i=e.query,o=e.updateQuery,c=(0,s._)((0,u.useState)(!1),2),k=c[0],S=c[1],j=(0,s._)((0,u.useState)([]),2),M=j[0],L=j[1],B=(0,s._)((0,u.useState)(null),2),V=B[0],F=B[1],U=M.length,G=(0,x.default)(i),$=(0,x.default)(M),H=N(i.search),z=N(i.replace);function W(){(0,r.findNext)(n);var e=n.state.selection.main;n.dispatch({effects:a.EditorView.scrollIntoView(e.from,{y:"center",x:"center"})}),U<=1||F(function(t){if(null===t){var n=M.findIndex(function(t){return t.from===e.from&&t.to===e.to});return -1===n?1:n+1}return t>=U?1:t+1})}function q(){(0,r.findPrevious)(n);var e=n.state.selection.main;n.dispatch({effects:a.EditorView.scrollIntoView(e.from,{y:"center",x:"center"})}),U<=1||F(function(t){if(null===t){var n=M.findIndex(function(t){return t.from===e.from&&t.to===e.to});return -1===n?1:n+1}return t<=1?U||1:t-1})}(0,u.useImperativeHandle)(t,function(){return{onSelectionSet:function(){var e=n.state.selection.main,t=$.current.findIndex(function(t){return t.from<=e.anchor&&t.to>=e.anchor});F(-1!==t?t+1:null)},onDocChanged:function(){L((0,d.default)(G.current,n.state.doc)),F(null)},onExpandRequested:function(){S(!0)}}},[n,G,$]),(0,u.useEffect)(function(){var e=(0,d.default)(i,n.state.doc);L(e);var t=n.state.selection.main,r=e.findIndex(function(e){return e.from<=t.anchor&&e.to>=t.anchor});F(-1!==r?r+1:null)},[n,i]);var K=(0,s._)((0,u.useState)(function(){return P(n.dom.clientWidth)}),2),Y=K[0],Q=K[1],X=(0,y.default)(function(e){e.width&&Q(P(e.width))});function Z(e){return(0,a.runScopeHandlers)(n,e,"search-panel")}var J=U>0,ee=i.search.length>0?"0 / 0":null,et=J?"".concat(V||1," / ").concat(U):ee,en=et?8*et.length:null,er=(0,l.jsxs)(A.View,{css:O.searchSettings,children:[(0,l.jsx)(_.default,{alt:"case sensitive",icon:(0,l.jsx)(f.default,{}),checked:i.caseSensitive,onClick:function(){o({caseSensitive:!i.caseSensitive})}}),(0,l.jsx)(_.default,{alt:"regular expressions",icon:(0,l.jsx)(m.default,{}),checked:i.regexp,onClick:function(){o({regexp:!i.regexp})}}),(0,l.jsx)(_.default,{alt:"whole words",icon:(0,l.jsx)(g.default,{}),checked:i.wholeWord,onClick:function(){o({wholeWord:!i.wholeWord})}})]}),ei=[O.content];return"small"!==Y&&k?ei.push(O.contentExpanded):"small"===Y&&k?ei.push(O.contentExpandedSmall):"small"!==Y||k||ei.push(O.contentSmall),(0,l.jsx)(D,{ref:X,onKeyDown:function(e){Z(e)&&e.preventDefault()},children:(0,l.jsxs)(C.ShadesSurface,{css:O.root,px:4,py:6,row:!0,gap:4,children:[(0,l.jsx)(A.View,{css:O.panelButtonWrapper,children:(0,l.jsx)(E.IconButton,{alt:k?"Close replace panel":"Show replace panel",size:32,onClick:function(){S(function(e){return!e})},children:(0,l.jsx)(p.default,{rotate:90*!!k,style:{transition:"200ms ease"}})})}),(0,l.jsxs)(A.View,{css:ei,children:[(0,l.jsxs)(A.View,{css:O.searchInputWrapper,children:[(0,l.jsx)(w.InputWithHistory,{ref:H,style:{padding:4,paddingRight:null!=en?en:void 0},placeholder:"Search",defaultValue:i.search,name:"search","main-field":"true",onKeyDown:function(e){if((0,b.getCmdOrCtrl)(e)&&"f"===e.key)return void e.currentTarget.select();if("enter"===e.key.toLowerCase()&&!Z(e)){if(e.preventDefault(),e.shiftKey)return void q();W()}},onChange:function(e){o({search:e})}}),et?(0,l.jsx)(A.View,{css:O.matchLabel,children:(0,l.jsx)(I.Text,{variant:"small",color:"dimmest",multiline:!1,children:et})}):null]}),(0,l.jsxs)(A.View,{css:O.searchControls,children:[(0,l.jsxs)(A.View,{row:!0,children:[(0,l.jsx)(E.IconButton,{size:32,alt:"Previous",onClick:function(){q()},children:(0,l.jsx)(p.default,{rotate:-90})}),(0,l.jsx)(E.IconButton,{size:32,alt:"Next",onClick:function(){W()},children:(0,l.jsx)(p.default,{rotate:90})})]}),(0,l.jsx)(T.Button,{text:"Select all",onClick:function(){(0,r.selectMatches)(n),n.focus()}}),er]}),k?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(A.View,{css:O.replaceInputWrapper,children:(0,l.jsx)(R.Input,{ref:z,style:{padding:4},placeholder:"Replacement",name:"replace",defaultValue:i.replace,onKeyDown:function(e){"enter"!==e.key.toLowerCase()||Z(e)||(e.preventDefault(),(0,r.replaceNext)(n))},onChange:function(e){o({replace:e.target.value})}})}),(0,l.jsxs)(A.View,{css:O.replaceControls,children:[(0,l.jsx)(T.Button,{text:"Replace",onClick:function(){(0,r.replaceNext)(n)}}),(0,l.jsx)(T.Button,{text:"Replace all",onClick:function(){(0,r.replaceAll)(n)}})]})]}):null]}),(0,l.jsx)(A.View,{css:O.panelButtonWrapper,children:(0,l.jsx)(E.IconButton,{alt:"Close Search Panel",tooltipBehavior:"hidden",onClick:function(){(0,r.closeSearchPanel)(n)},children:(0,l.jsx)(h.default,{})})})]})})})),L=i.StateEffect.define(),B=[(0,r.search)({createPanel:function(e){var t=!1,i=!1,a=!1,s=!1,l=!1,u=(0,n.default)(function(t){var n,i,a,o,s,l,u=(0,r.getSearchQuery)(e.state),c=new r.SearchQuery({search:null!=(n=t.search)?n:u.search,caseSensitive:null!=(i=t.caseSensitive)?i:u.caseSensitive,literal:null!=(a=t.literal)?a:u.literal,regexp:null!=(o=t.regexp)?o:u.regexp,replace:null!=(s=t.replace)?s:u.replace,wholeWord:null!=(l=t.wholeWord)?l:u.wholeWord});c.eq(u)||e.dispatch({effects:r.setSearchQuery.of(c)})},300),c=M.create({view:e,query:(0,r.getSearchQuery)(e.state),updateQuery:u});return{dom:c,top:!0,update:function(t){(0,o.hasChanged)(t,r.setSearchQuery)&&M.set(c,{view:e,query:(0,r.getSearchQuery)(t.state),updateQuery:u}),t.selectionSet&&!s&&(s=!0,requestAnimationFrame(function(){if(!i){var e;s=!1,null==(e=M.ref(c))||e.onSelectionSet()}})),t.docChanged&&!a&&(a=!0,requestAnimationFrame(function(){if(!i){var e;a=!1,null==(e=M.ref(c))||e.onDocChanged()}})),(0,o.hasChanged)(t,L)&&!l&&(l=!0,requestAnimationFrame(function(){if(!i){var e;l=!1,null==(e=M.ref(c))||e.onExpandRequested()}}))},mount:function(){t||(t=!0,requestAnimationFrame(function(){if(!i){t=!1;var e=c.querySelector("[main-field]");e&&(e.focus(),e.select())}}))},destroy:function(){return i=!0}}}}),a.keymap.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(e){return!!((0,r.searchPanelOpen)(e.state)||(0,r.openSearchPanel)(e))&&(e.dispatch({effects:L.of(null)}),!0)}}])];e.s(["ReplitSearchPanel",()=>B],770781);var V=e.i(904851),F=e.i(90659),U=e.i(721281),G=e.i(488566),$=e.i(486701),H=e.i(736097),z=e.i(555970),W=e.i(492555),q=e.i(260924),K=e.i(700170),Y=e.i(207237),Q=null!=(t=globalThis.requestIdleCallback)?t:globalThis.requestAnimationFrame;function X(e,t,n){var r=e.field(t,!1);if(void 0===r){if(void 0===n)throw Error("Field is not mounted on state");return n}return t.spec.toJSON(r,e)}function Z(e){for(var t=e.sliceString(0,200)+e.length,n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(n>>>0).toString(36)}var J=function(){function e(t,n,r,i){var a=this;(0,V._)(this,e),(0,U._)(this,"view",void 0),(0,U._)(this,"replId",void 0),(0,U._)(this,"cache",void 0),(0,U._)(this,"compartment",void 0),(0,U._)(this,"historyIsMounted",void 0),(0,U._)(this,"destroyed",void 0),(0,U._)(this,"pending",void 0),this.view=t,this.replId=n,this.cache=r,this.compartment=i,this.historyIsMounted=!1,this.destroyed=!1,this.pending=!1,this.scheduleCacheUpdate=this.scheduleCacheUpdate.bind(this),this.view.scrollDOM.addEventListener("scroll",this.scheduleCacheUpdate),this.view.state.field(W.OtIsLoading,!1)||Promise.resolve().then(function(){a.destroyed||a.apply()})}return(0,F._)(e,[{key:"key",get:function(){var e=this.view.state.facet(H.fileName);return e?"".concat(this.replId,":").concat(e):null}},{key:"apply",value:function(){if(!this.historyIsMounted&&this.view.state.field(G.historyField,!1))return void(0,a.logException)(this.view.state,Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view"));if(!this.key||this.view.state.field(W.OtIsLoading,!1)){if(this.historyIsMounted){var e,t,n=this.key?z.Initializing.of(!0):[];this.view.dispatch({effects:this.compartment.reconfigure(n)}),this.historyIsMounted=!1}return}var r=this.cache.get(this.key);if(!r||r.hash!==Z(this.view.state.doc)){this.view.dispatch({effects:this.compartment.reconfigure((0,G.history)())}),this.historyIsMounted=!0;return}var o=i.EditorSelection.fromJSON(r.selection),s=[(e=r.scroll,(t=a.EditorView.scrollIntoView(e.pos,{y:"start",x:"start",yMargin:e.yDiff,xMargin:e.scrollLeft})).value.isSnapshot=!0,t),this.compartment.reconfigure([G.historyField.init(function(e){var t,n;return t=G.historyField,n=r.history,t.spec.fromJSON(n,e)}),(0,G.history)()])];if(this.view.state.field($.foldState,!1))for(var l=0;l<r.folds.length;l+=2){var u=r.folds[l],c=r.folds[l+1];s.push($.foldEffect.of({from:u,to:c}))}this.view.dispatch({selection:o,effects:s}),this.historyIsMounted=!0}},{key:"scheduleCacheUpdate",value:function(){var e=this;this.pending||(this.pending=!0,Q(function(){e.pending&&!e.destroyed&&(e.pending=!1,e.historyIsMounted&&e.key&&e.cache.set(e.key,{hash:Z(e.view.state.doc),scroll:function(e){var t=e.scrollDOM.scrollTop,n=e.scrollDOM.scrollLeft;if(0===t&&0===n)return{pos:0,yDiff:0,scrollLeft:0};var r=e.lineBlockAtHeight(t+8),i=r.from>=e.viewport.from||e.viewportLineBlocks[0].top-t>200?r:e.viewportLineBlocks[0];return{pos:i.from,yDiff:i.top-t,scrollLeft:n}}(e.view),selection:e.view.state.selection.toJSON(),history:X(e.view.state,G.historyField),folds:X(e.view.state,$.foldState,[])}))}))}},{key:"postUpdate",value:function(e){(0,o.hasChanged)(e,H.fileName,W.OtIsLoading)?this.apply():!this.pending&&this.historyIsMounted&&(0,o.hasChanged)(e,"doc","selection",G.historyField,$.foldState)&&this.scheduleCacheUpdate()}},{key:"destroy",value:function(){this.destroyed=!0,this.view.scrollDOM.removeEventListener("scroll",this.scheduleCacheUpdate)}}]),e}(),ee=new K.ReactCompartment(function(e,t){var n=new i.Compartment,r=a.ViewPlugin.define(function(r){return new J(r,e,t,n)},{provide:function(e){return a.EditorView.updateListener.of(function(t){var n;null==(n=t.view.plugin(e))||n.postUpdate(t)})}});return[n.of(z.Initializing.of(!0)),r]});function et(){var e=(0,Y.default)(),t=(0,u.useContext)(q.StateCacheContext);if(!t)throw Error("Expected codemirror state to be in codemirror state context");return ee.use(e,t)}e.s(["default",()=>et],518975);var en=a.EditorView.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}});e.s(["ContainmentTheme",()=>en],705414);var er=e.i(485273),ei=e.i(15053),ea=e.i(310761),eo=e.i(703613),es=e.i(257982),el=e.i(134628),eu=e.i(441329),ec=e.i(479407),ed=e.i(385164),ef=e.i(335392);function ep(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function eh(e,t){var n;return null==t?ep(e):{filePath:e,text:null!=(n=t.state.doc.toString())?n:"",selections:t.state.selection.ranges.map(function(e){var t=e.from;return{location:t,length:e.to-t}}),hasFocus:t.hasFocus}}function em(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,ei.v4)(),n={messageType:el.BridgeMessageType.TEXT_EDITOR_STATE,filePath:e.textEditorState.filePath,text:e.textEditorState.text,selections:e.textEditorState.selections,hasFocus:e.textEditorState.hasFocus,hasGhostwriterSuggestion:e.hasGhostwriterSuggestion,revisionId:e.revisionId};(0,ec.sendMessage)(n,t)}function eg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,ei.v4)(),n={messageType:el.BridgeMessageType.TEXT_EDITOR_CLOSED,filePath:e};(0,ec.sendMessage)(n,t)}function ev(e,t,n,r,i){return r===e&&r===n.textEditorState.filePath&&t===n.textEditorState.filePath&&i===n.revisionId}function ex(e){var t=e.map(function(e){return i.EditorSelection.range(e.location,e.location+e.length)});return i.EditorSelection.create(t)}function ey(e,t,n,r,i){var a,o,s,l,u,c,d,f,p,h,m=i.payload;if((0,el.isBridgePayloadRequestSetSelection)(m)){if(!ev(e,t,r,m.filePath,m.revisionId))return!1;var g=ex(m.selections);return n.dispatch({selection:g,scrollIntoView:!0}),!0}if((0,el.isBridgePayloadRequestSetText)(m)){if(!ev(e,t,r,m.filePath,m.revisionId))return!1;var x=ex(m.selections);return n.dispatch({changes:{from:0,to:n.state.doc.length,insert:m.text},selection:x,scrollIntoView:!0}),!0}if((0,el.isBridgePayloadRequestInsertText)(m)){if(!ev(e,t,r,m.filePath,m.revisionId))return!1;var y=m.insertionRange,b=ex(m.selections);return n.dispatch({changes:{from:y.location,to:y.location+y.length,insert:m.text},selection:b,scrollIntoView:!0}),!0}if((0,el.isBridgePayloadRequestReplaceSelection)(m))return!!ev(e,t,r,m.filePath,m.revisionId)&&(n.dispatch(n.state.replaceSelection(m.text)),!0);if((0,el.isBridgePayloadRequestPasteText)(m))ev(e,t,r,m.filePath,m.revisionId)&&(0,ef.handlePasteEvent)({filePath:e,view:n,clipboardText:m.text});else if((0,el.isBridgePayloadRequestTextEditorAction)(m))switch(m.action){case el.BridgeTextEditorAction.REQUEST_BLUR:if(!ev(e,t,r,m.filePath,m.revisionId))return!1;n.contentDOM.blur();return;case el.BridgeTextEditorAction.REQUEST_UNDO:return a=e,o=t,s=n,l=r,u=m.filePath,!!ev(a,o,l,u,m.revisionId)&&((0,G.undo)(s),!0);case el.BridgeTextEditorAction.REQUEST_REDO:return c=e,d=t,f=n,p=r,h=m.filePath,!!ev(c,d,p,h,m.revisionId)&&((0,G.redo)(f),!0);case el.BridgeTextEditorAction.REQUEST_INDENT_SELECTION:return!!ev(e,t,r,m.filePath,m.revisionId)&&(G.indentMore(n),!0);case el.BridgeTextEditorAction.REQUEST_DEDENT_SELECTION:return!!ev(e,t,r,m.filePath,m.revisionId)&&(G.indentLess(n),!0);case el.BridgeTextEditorAction.REQUEST_TOGGLE_COMMENT:return!!ev(e,t,r,m.filePath,m.revisionId)&&(G.toggleComment(n),!0);case el.BridgeTextEditorAction.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return!!ev(e,t,r,m.filePath,m.revisionId)&&(0,ed.acceptCompleteCodeSuggestion)(n);case el.BridgeTextEditorAction.REQUEST_FOCUS:return n.focus(),!0;default:throw Error("Unknown BridgeTextEditorAction.")}else throw Error("Invalid payload.")}function eb(e){var t,n=e.view,r=e.filePath,i=(0,er.useRouter)(),a=(0,eu.isInBonsaiWebview)(i),o=(0,u.useRef)({revisionId:(0,ei.v4)(),textEditorState:ep(r),hasGhostwriterSuggestion:!1}),s=(0,u.useRef)(r),l=null!=(t=null==n?void 0:n.plugin(eo.StateListenerPlugin))?t:null;(0,u.useEffect)(function(){if(a&&n&&l&&!l.destroyed){var e=function(e){em(o.current,e.messageId)},t=function(t){ey(r,s.current,n,o.current,t)?e(t):(0,ec.sendErrorMessage)(t.messageId)},i=function(t){ey(r,s.current,n,o.current,t)?e(t):(0,ec.sendErrorMessage)(t.messageId)},u=function(n){try{var r=n.data;if(!(0,el.isBridgeMessage)(r)||r.protocolVersion!==el.nativeBridgeProtocolVersion)return;var a=r.payload;r.messageDirection===el.BridgeMessageDirection.TO_NATIVE&&(0,el.isBridgePayloadWorkspaceState)(a)&&(s.current=a.activePaneFilePath),(0,ec.textEditorBridgeMessageHandler)(n,function(n){var a=n.type;switch(a){case el.BridgeMessageType.TEXT_EDITOR_STATE_REQUEST:e(r);break;case el.BridgeMessageType.REQUEST_SET_SELECTION:case el.BridgeMessageType.REQUEST_REPLACE_SELECTION:case el.BridgeMessageType.REQUEST_SET_TEXT:case el.BridgeMessageType.REQUEST_INSERT_TEXT:case el.BridgeMessageType.REQUEST_PASTE_TEXT:t(r);break;case el.BridgeMessageType.TEXT_EDITOR_REQUEST_ACTION:i(r);break;default:(0,es.default)(a)}})}catch(e){throw Error("Invalid message: ".concat(e))}};window.addEventListener("message",u),o.current={revisionId:(0,ei.v4)(),textEditorState:eh(r,n),hasGhostwriterSuggestion:(0,ea.hasPresentedSuggestion)(n.state)},em(o.current);var c=!1,d=!1,f=l.bind({changed:function(e){var t;return e.docChanged?(c=!0,!0):!!e.selectionSet||!!e.focusChanged||(null==(t=o.current)?void 0:t.hasGhostwriterSuggestion)!==(0,ea.hasPresentedSuggestion)(e.state)},callback:function(){var e=c?(0,ei.v4)():o.current.revisionId;c=!1,o.current={revisionId:e,textEditorState:eh(r,n),hasGhostwriterSuggestion:(0,ea.hasPresentedSuggestion)(n.state)},em(o.current)},destroy:function(){window.removeEventListener("message",u),d||(eg(r),d=!0)}});return function(){window.removeEventListener("message",u),f(),d||(eg(r),d=!0)}}},[n,r,a,l])}function ew(e){var t=e.selection,n=e.doc,r=t.ranges.map(function(e){return e.extend(n.lineAt(e.from).from,n.lineAt(e.to).to)});return i.EditorSelection.create(r)}e.s(["default",()=>eb],714330),e.s(["selectFullLines",()=>ew],351278);var e_=e.i(878420),ek=e.i(64386),eS=e.i(116235);function eC(e){return(0,l.jsx)(eS.default,(0,ek._)((0,e_._)({},e),{children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M17 2.25A2.75 2.75 0 0 1 19.75 5v16a.75.75 0 0 1-1.122.651L12 17.863l-6.628 3.788A.75.75 0 0 1 4.25 21V5A2.75 2.75 0 0 1 7 2.25h10ZM7 3.75A1.25 1.25 0 0 0 5.75 5v14.707l5.878-3.358.089-.043a.75.75 0 0 1 .655.043l5.878 3.358V5A1.25 1.25 0 0 0 17 3.75H7Z",clipRule:"evenodd"})}))}function ej(e){return(0,l.jsx)(eS.default,(0,ek._)((0,e_._)({},e),{children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M2.25 5A2.75 2.75 0 0 1 5 2.25h8A2.75 2.75 0 0 1 15.75 5v.293A.749.749 0 0 1 16 5.25c.822 0 1.56.361 2.062.93.428.485.688 1.123.688 1.82v.293A.749.749 0 0 1 19 8.25c.822 0 1.56.361 2.062.93.428.485.688 1.123.688 1.82v8A2.75 2.75 0 0 1 19 21.75h-8A2.75 2.75 0 0 1 8.25 19c0-.088.015-.172.043-.25H8A2.75 2.75 0 0 1 5.25 16c0-.088.015-.172.043-.25H5A2.75 2.75 0 0 1 2.25 13V5Zm4.457 10.75a.749.749 0 0 1 .043.25c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25V8A1.245 1.245 0 0 0 16 6.75a.749.749 0 0 1-.25-.043V13A2.75 2.75 0 0 1 13 15.75H6.707Zm3 3a.749.749 0 0 1 .043.25c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25v-8A1.245 1.245 0 0 0 19 9.75a.749.749 0 0 1-.25-.043V16A2.75 2.75 0 0 1 16 18.75H9.707ZM5 3.75c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25H5Z",clipRule:"evenodd"})}))}function eT(e){return(0,l.jsxs)(eS.default,(0,ek._)((0,e_._)({},e),{children:[(0,l.jsx)("path",{fillRule:"evenodd",d:"M6 2.25a3.75 3.75 0 0 1 3.128 5.817L12 10.94l7.47-7.47a.75.75 0 0 1 1.06 1.06L9.128 15.932a3.75 3.75 0 1 1-1.06-1.06L10.94 12 8.067 9.128A3.75 3.75 0 1 1 6 2.25Zm0 13.5a2.25 2.25 0 1 0 1.6.67l-.01-.01-.01-.012A2.242 2.242 0 0 0 6 15.75Zm0-12a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"}),(0,l.jsx)("path",{d:"M14.27 14.27a.75.75 0 0 1 1.06 0l5.2 5.2a.75.75 0 0 1-1.06 1.06l-5.2-5.2a.75.75 0 0 1 0-1.06Z"})]}))}e.s(["default",()=>eC],91484),e.s(["default",()=>ej],442263),e.s(["default",()=>eT],816688);var eE=e.i(82259),eR=e.i(205104);function eI(e,t,n){var r=e.selection.main,i=e.sliceDoc(r.from,r.to),a=(0,eR.getExt)(t);return{code:i,filePath:t,fileVersion:n,fileContent:e.doc.toString(),range:{indexFrom:r.from,indexTo:r.to,lineFrom:e.doc.lineAt(r.from).number,lineTo:e.doc.lineAt(r.to).number},language:a,referenceType:eE.CodeReferenceType.INLINE}}e.s(["default",()=>eI],260480)},177461,162943,380738,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(276385),i=e.i(389959),a=e.i(15053),o=e.i(629536),s=e.i(608572),l=e.i(753950),u=e.i(179302);e.i(440545);var c=e.i(214705),d=e.i(915599),f=e.i(936381),p=e.i(260171),h=e.i(351278),m=e.i(918323),g=e.i(785707),x=e.i(78866),y=e.i(235387),b=e.i(335392),w=e.i(502379),_=e.i(700170),k=e.i(103490),S=e.i(91484),C=e.i(917255),j=e.i(593767),T=e.i(11986),E=e.i(442263),R=e.i(402099),I=e.i(816688),A=e.i(204977),P=e.i(252204),D=e.i(873169),O=e.i(919061),N=e.i(965097),M=e.i(882848),L=e.i(123515),B=e.i(346781),V=e.i(173993),F=e.i(993796),U=e.i(610357),G=e.i(664152),$=e.i(858248),H=e.i(709485),z=e.i(485237),W=e.i(179147),q=e.i(529810),K=e.i(319207),Y=e.i(556353),Q=e.i(770396),X=e.i(863790),Z=e.i(260480),J=e.i(242719),ee=e.i(106020),et=e.i(100811),en=e.i(667279),er=e.i(623059);e.i(32109);var ei=e.i(384401),ea=e.i(262206),eo=e.i(736318),es=e.i(480028);function el(e){var t=e.label,n=e.icon,r=e.run,i=e.keyboardShortcut,a=e.dataCy;return{match:ee.matchLabel,data:{type:"action",label:t,icon:n,run:r,keyboardShortcut:i,dataCy:a}}}function eu(e){var t=e.path,n=(0,q.default)().fs,r=(0,F.useFlag)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,i.useCallback)(function(e,i){var o,s,c,d,p=e.state,h=p.doc,m=p.selection,g=p.lineBreak,x=h.lineAt(m.main.head);x.length&&e.dispatch({changes:{from:x.to,insert:g},selection:l.EditorSelection.cursor(x.to+1)});var y=n.getOTVersion(t),b=(0,Z.default)(e.state,t,y);if((0,$.track)(H.events.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:i}),r)return void(s=(o={view:e,mainSelection:e.state.selection.main,codeReference:b}).view,c=o.mainSelection,d=o.codeReference,s.dispatch({selection:{anchor:c.to},effects:[f.inlinePocketEffect.of({id:(0,a.v4)(),codeReference:d,type:"ghostwriterKillswitch"}),u.EditorView.scrollIntoView(c.to,{y:"center"})]}));var w=e.state.selection.main.to;e.dispatch({selection:{anchor:w},effects:[f.inlinePocketEffect.of({id:(0,a.v4)(),codeReference:b,type:"generateCode",source:i}),u.EditorView.scrollIntoView(w,{y:"center"})]})},[t,n,r])}function ec(e){var t=e.path,n=(0,q.default)().fs,r=(0,Y.useAddSnippet)(),a=(0,K.useAgentInputView)();return(0,i.useCallback)(function(e,i){if(e.state.selection.main.empty)return null;e.dispatch({selection:(0,h.selectFullLines)(e.state)});var o=n.getOTVersion(t),s=(0,Z.default)(e.state,t,o),l=r(s);if(a){var u=a.state.doc.length;a.dispatch({changes:{from:u,to:u,insert:l+" "},selection:{anchor:u+l.length+1}}),a.focus()}return(0,$.track)(H.events.AI_INLINE_EVENT,{action:"add_to_chat",intent_type:"context",source:i,message_content:s.code}),(0,J.openPane)(e.state,{pane:{type:"agentChat"},secondary:!0}),l},[t,n,r,a])}function ed(e){var a,l,u,f,h,_,F,q,Y,X,Z,ee,eu=e.path,ed=e.view,ef=function(e){var t,n,a=e.path,o=ec({path:a}),l=(t=(0,s.useUpdateFileContextPreferences)(),n=(0,K.useAgentInputView)(),(0,i.useCallback)(function(e,r){var i="@".concat(a);if(t(a,"include"),n){var o=n.state.doc.length;n.dispatch({changes:{from:o,to:o,insert:i+" "},selection:{anchor:o+i.length+1}}),n.focus()}return(0,$.track)(H.events.AI_INLINE_EVENT,{action:"add_to_chat",intent_type:"context",source:r}),(0,J.openPane)(e.state,{pane:{type:"agentChat"},secondary:!0}),i},[a,t,n]));return(0,i.useCallback)(function(e){return e.state.selection.main.empty?[el({label:"Add file to chat",icon:(0,r.jsx)(j.default,{color:es.tokens.accentPrimaryDefault}),dataCy:"context-menu-AddFileToChat",run:function(){l(e,"context_menu")}})]:[el({label:"Add to chat",icon:(0,r.jsx)(j.default,{color:es.tokens.accentPrimaryDefault}),dataCy:"context-menu-AddToChat",run:function(){o(e,"context_menu")}})]},[l,o])}({path:eu}),ep=(0,i.useCallback)(function(e){var i=[el({label:"Copy link to position",icon:(0,r.jsx)(M.default,{}),run:function(){var t=(0,w.offsetToPos)(e.state.doc,e.state.selection.main.head),n=t.line,r=t.character,i=(0,eo.createDeeplinkURL)({path:eu,line:n+1,col:r});(0,U.default)(i)}}),el({label:"Copy",icon:(0,r.jsx)(R.default,{}),keyboardShortcut:(0,ea.defaultKeyCombo)({cmdOrCtrl:!0,key:"c"}),run:function(){var t=(0,p.copiedRange)(e.state).text;(0,U.default)(t)}}),el({label:"Cut",icon:(0,r.jsx)(I.default,{}),keyboardShortcut:(0,ea.defaultKeyCombo)({cmdOrCtrl:!0,key:"x"}),run:function(){var t=(0,p.copiedRange)(e.state),n=t.text,r=t.ranges;(0,U.default)(n),e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}})];return window.navigator.clipboard&&"readText"in window.navigator.clipboard&&i.push(el({label:"Paste",icon:(0,r.jsx)(T.default,{}),keyboardShortcut:(0,ea.defaultKeyCombo)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,t._)(function(){var t,r;return(0,n._)(this,function(n){switch(n.label){case 0:t="",n.label=1;case 1:return n.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return t=n.sent(),[3,4];case 3:return r=n.sent(),G.logger.error("CodeMirror context menu paste failed",{message:r.message}),[2];case 4:return(0,b.handlePasteEvent)({filePath:eu,view:e,clipboardText:t}),[2]}})})()}})),i},[eu]),eh=(a=(0,z.default)(eu),l=(0,W.default)(a),u=(0,ei.useKeyCombo)("editor.action.goToDefinition"),f=(0,ei.useKeyCombo)("editor.action.goToTypeDefinition"),h=(0,ei.useKeyCombo)("editor.action.goToImplementation"),_=(0,ei.useKeyCombo)("editor.action.goToReferences"),F=(0,ei.useKeyCombo)("editor.selection.allOccurrences"),q=(0,ei.useKeyCombo)("editor.action.sourceActions"),Y=(0,ei.useKeyCombo)("editor.action.formatDocument"),X=(0,ei.useKeyCombo)("editor.action.codeActions"),Z=(0,ei.useKeyCombo)("editor.action.renameSymbol"),(0,i.useCallback)(function(e){var t=[],n=l&&a.length;return n&&l.isFindDefinitionSupported&&t.push(el({label:"Go to definition",icon:(0,r.jsx)(P.default,{}),dataCy:"context-menu-JumpToDefinition",run:function(t){(0,x.goToDefinition)(e,t)},keyboardShortcut:u})),n&&l.isFindTypeDefinitionSupported&&t.push(el({label:"Go to type definition",icon:(0,r.jsx)(C.default,{}),run:function(){(0,x.goToTypeDefinition)(e)},keyboardShortcut:f})),n&&l.isFindImplementationSupported&&t.push(el({label:"Go to implementation",icon:(0,r.jsx)(V.default,{}),run:function(){(0,x.goToImplementation)(e)},keyboardShortcut:h})),n&&(l.isFindDefinitionSupported||l.isFindReferencesSupported)&&t.push(el({label:"Show references",icon:(0,r.jsx)(S.default,{}),keyboardShortcut:_,run:function(){(0,g.findReferences)(e)}})),t.push(el({label:"Find in Repl",icon:(0,r.jsx)(B.default,{}),run:function(){var t=(0,p.copiedRange)(e.state).text;(0,J.openPane)(e.state,{pane:{type:"searchReplace",data:{initialQuery:t}}})}})),n&&l.isRenameSupported&&t.push(el({label:"Rename all occurrences",icon:(0,r.jsx)(A.default,{}),keyboardShortcut:Z,run:function(){(0,y.StartRenameCommand)(e)}})),e.state.facet(d.HasFormatter)&&t.push(el({label:"Format document",icon:(0,r.jsx)(O.default,{}),keyboardShortcut:Y,run:function(){(0,c.FormatCommand)(e)}})),!e.state.selection.main.empty&&e.state.facet(d.HasRangeFormatter)&&t.push(el({label:"Format selection",icon:(0,r.jsx)(O.default,{}),run:function(){(0,c.FormatSelectionCommand)(e)}})),t.push(el({label:"Select all occurrences",icon:(0,r.jsx)(E.default,{}),keyboardShortcut:F,run:function(){(0,Q.selectAllOccurrences)(e)}})),n&&l.isCodeActionsSupported&&(l.isSourceActionsSupported&&t.push(el({label:"Source actions",icon:(0,r.jsx)(D.default,{}),keyboardShortcut:q,run:function(){(0,m.CodeActionsSourceActionsCommand)(e)}})),t.push(el({label:"More actions",icon:(0,r.jsx)(N.default,{}),keyboardShortcut:X,run:function(){(0,m.CodeActionsCommand)(e,{force:!0})}}))),t},[l,a,F,q,u,f,h,_,Z,Y,X])),em=(ee=(0,en.useExtensionCommands)(er.ContributionType.EditorContextMenu),(0,i.useCallback)(function(e){var r=[];return r.push({data:{type:"group",key:"extensions"},commands:function(){return(0,t._)(function(){var r;return(0,n._)(this,function(i){switch(i.label){case 0:return r=[{data:{filePath:e.filePath,selection:e.view.state.selection.toJSON()}}],[4,Promise.all(ee.map(function(e){return(0,t._)(function(){var t;return(0,n._)(this,function(n){switch(n.label){case 0:return[4,e.create({path:r})];case 1:if(!(t=n.sent()))return[2,null];return[2,(0,et.wrapExtensionCommand)(t,{path:r})]}})})()}))];case 1:return[2,i.sent().filter(Boolean)]}})})()}}),r},[ee]));return(0,i.useCallback)(function(){var e=ed?[{data:{type:"context",label:o.AGENT_NAME,icon:(0,r.jsx)(k.default,{})},commands:function(){return ef(ed)}},{data:{type:"context",label:"Code actions",icon:(0,r.jsx)(N.default,{})},commands:function(){return eh(ed)}},{data:{type:"context",label:"Clipboard",icon:(0,r.jsx)(T.default,{})},commands:function(){return ep(ed)}},{data:{type:"context",label:"Extensions",icon:(0,r.jsx)(L.default,{})},commands:function(){return em({view:ed,filePath:eu})}}]:[];return{data:{type:"context",label:"Search actions",icon:(0,r.jsx)(B.default,{})},commands:function(){return e}}},[ed,ef,eh,ep,eu,em])}var ef=new _.ReactCompartment(function(e,t,n){return e?null:[(0,X.ContextMenuVisibleExtension)(t),u.EditorView.domEventHandlers({contextmenu:function(e,t){var r=e.clientX,i=e.clientY,a=t.state.selection.main,o=t.posAtCoords({x:r,y:i}),s=t.state.doc.length,u=null===o?s:o;if(u<a.from||u>a.to){var c=l.EditorSelection.cursor(u);t.dispatch({selection:c})}return n(e),!0}})]});e.s(["ContextMenuCompartment",()=>ef,"useAddToChat",()=>ec,"useAssistantGenerateCode",()=>eu,"useGetContextMenuCommand",()=>ed],177461);var ep=e.i(878420),eh=e.i(569384),em=e.i(973245),eg=e.i(304277);function ev(){var e=(0,eh._)(["\n  query ReplCodeExamples($language: String!) {\n    languageExamples(language: $language) {\n      ... on LanguageExamples {\n        examples {\n          ... on LanguageExample {\n            mainFile\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return ev=function(){return e},e}e.i(566901);var ex={},ey=(0,em.gql)(ev());function eb(e){var t=(0,ep._)({},ex,e);return eg.useQuery(ey,t)}e.s(["useReplCodeExamplesQuery",()=>eb],162943);var ew=e.i(64386),e_=e.i(116235);function ek(e){return(0,r.jsx)(e_.default,(0,ew._)((0,ep._)({},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.53 5.47a.75.75 0 0 1 0 1.06L3.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06l-6-6a.75.75 0 0 1 0-1.06l6-6a.75.75 0 0 1 1.06 0ZM19.5 9.5a.75.75 0 0 1 1.06 0l1.97 1.97a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 0 1-1.06-1.06L20.94 12l-1.44-1.44a.75.75 0 0 1 0-1.06ZM14.889 3.266c-.13-.355-.648-.355-.778 0l-.893 2.44a.407.407 0 0 1-.264.247l-2.166.663a.396.396 0 0 0 0 .762l2.166.669c.123.038.22.13.264.247l.893 2.44c.13.355.648.355.778 0l.893-2.44a.407.407 0 0 1 .264-.247l2.166-.666a.396.396 0 0 0 0-.762l-2.166-.666a.407.407 0 0 1-.264-.247l-.893-2.44Z",clipRule:"evenodd"})}))}e.s(["default",()=>ek],380738)},970652,e=>{"use strict";var t,n=e.i(530658),r=e.i(276385),i=e.i(389959),a=e.i(162943),o=e.i(753950),s=e.i(74920),l=e.i(969932);e.i(694906);var u=e.i(446692),c=e.i(380738),d=e.i(581554),f=e.i(173993),p=e.i(205104),h=e.i(993796),m=e.i(858248),g=e.i(709485),x=e.i(917375),y=e.i(86159),b=e.i(721281),w=e.i(409146),_=e.i(269848),k=e.i(967629),S=e.i(877249),C=e.i(754873),j=e.i(613355),T=e.i(960178),E=e.i(625484),R=E.SpecializedView.button;function I(e){var t=e.name,n=e.children,i=e.onClick;return(0,r.jsxs)(R,{onClick:function(){return i()},css:[C.interactive.nofill,j.rcss.p(8),j.rcss.focusRing,j.rcss.textAlign.left],children:[(0,r.jsx)(T.Text,{variant:"subheadDefault",css:j.rcss.pb(16),multiline:!1,children:t}),(0,r.jsx)(E.View,{css:[j.rcss.backgroundColor.backgroundDefault,j.rcss.p(8),j.rcss.borderRadius(8)],children:n})]})}var A="@media (min-width: ".concat(S.BREAKPOINTS.tabletMax,"px)"),P=(0,k.css)([j.rcss.colWithGap(16),(0,b._)({},A,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function D(e){var t=e.children;return(0,r.jsx)(E.View,{css:[(0,b._)({},A,[j.rcss.rowWithGap(16)])],children:t})}function O(e){var t=e.mainFile,n=e.examples,i=e.onSelect;return(0,r.jsxs)(E.View,{gap:24,children:[(0,r.jsx)(T.Header,{level:1,variant:"headerDefault",children:"Code examples"}),(0,r.jsx)(T.Text,{children:"Get started with some program examples."}),(0,r.jsxs)(D,{css:[j.rcss.colWithGap(16)],children:[(0,r.jsx)(E.View,{css:P,children:n.slice(0,(n.length+1)/2).map(function(e){return(0,r.jsx)(I,{name:e.name,onClick:function(){return i(e)},children:(0,r.jsx)(w.default,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)})}),(0,r.jsx)(E.View,{css:P,children:n.slice((n.length+1)/2).map(function(e){return(0,r.jsx)(I,{name:e.name,onClick:function(){return i(e)},children:(0,r.jsx)(w.default,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)})})]})]})}function N(e){var t=e.filePath,n=e.language,i=e.onSelect,o=(0,a.useReplCodeExamplesQuery)({variables:{language:n}}),s=o.data,l=o.loading,u=o.error;if(l)return(0,r.jsx)(E.View,{pt:32,pb:32,gap:0,justify:"center",align:"center",children:(0,r.jsx)(_.default,{})});if(u)return(0,r.jsx)(E.View,{pt:32,pb:32,gap:0,justify:"center",align:"center",children:u.message});var c=(null==s?void 0:s.languageExamples.__typename)==="LanguageExamples"?s.languageExamples.examples:null;return(null==c?void 0:c.length)?(null==c?void 0:c.length)?(0,r.jsx)(O,{mainFile:t,examples:c,onSelect:i}):(0,r.jsx)(E.View,{pt:32,pb:32,gap:0,justify:"center",align:"center",children:(0,r.jsxs)(T.Text,{children:["Sorry, this language doesnt have any examples. Want to add some? Contact us at ",(0,r.jsx)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})}):null}var M=e.i(904851),L=e.i(90659),B=e.i(992785),V=e.i(179302);e.i(508987);var F=e.i(457103),U=e.i(468345),G=e.i(140659),$=e.i(928353),H=e.i(700170);e.i(32109);var z=e.i(926118),W=e.i(480028),q=(0,e.i(446530).cssRecord)({root:[{marginTop:"10%",pointerEvents:"none","*":{pointerEvents:"all"}}],button:[j.rcss.reset.button,j.rcss.rowWithGap(6),j.rcss.align.center,j.rcss.color.foregroundDimmest,j.rcss.cursor.pointer,{fontFamily:W.tokens.fontFamilyDefault,"*":{borderColor:W.tokens.foregroundDimmest,color:W.tokens.foregroundDimmest},":hover *":{borderColor:W.tokens.foregroundDefault,color:W.tokens.foregroundDefault}}]}),K="cm-empty-state-layer",Y="cm-empty-state-dom",Q=V.EditorView.theme((t={},(0,b._)(t,".".concat(K),{width:"100%",height:"100%",pointerEvents:"none",zIndex:"201 !important"}),(0,b._)(t,".".concat(Y),{position:"absolute",width:"100%",pointerEvents:"none",display:"flex",justifyContent:"center"}),t)),X=function(){function e(t){(0,M._)(this,e),(0,b._)(this,"options",void 0),this.options=t}return(0,L._)(e,[{key:"draw",value:function(){var e=this.options,t=e.ctas,n=e.view,i=e.width,a=(0,$.createCodeMirrorElement)((0,r.jsx)(E.View,{css:q.root,p:16,align:"center",gap:8,children:t.map(function(e){return(0,r.jsxs)(E.View,{css:q.button,onClick:function(){return e.onClick(n)},children:[(0,r.jsxs)(E.View,{row:!0,gap:4,children:[e.icon,(0,r.jsx)(T.Text,{variant:"small",children:e.text})]}),e.shortcut?(0,r.jsx)(z.KeyComboBlocks,{keyCombo:e.shortcut,fontSize:12}):null]},e.text)})}));return a.className=Y,a.style.width=i+"px",a.style.visibility=i>240?"visibile":"hidden",a.style.left="0px",a}},{key:"eq",value:function(e){return(0,B.default)(e.options,this.options)}}]),e}(),Z=new H.ReactCompartment(function(e){var t=function(e){var t;return!(e.doc.length>0||e.field(U.InlinePocketState))&&(null==(t=e.field(G.PasteScannerState,!1))||!t.size)},n=o.StateField.define({create:t,update:function(e,n){return t(n.state)}}),r=(0,V.layer)({above:!0,class:K,update:function(e){return(0,F.hasChanged)(e,n)},markers:function(t){if(!t.state.field(n,!1))return[];var r=t.dom.getBoundingClientRect();return[new X({ctas:e,width:Math.round(t.contentDOM.getBoundingClientRect().right-r.left),view:t})]}});return[Q,n,r]}),J=e.i(242719),ee=e.i(933101),et=e.i(952685),en=e.i(384401),er=e.i(739521);function ei(e){var t=e.cta,n=e.version;(0,m.track)(g.events.EDITOR_EMPTY_STATE_CLICKED,{cta:t,version:n})}var ea=o.StateEffect.define(),eo=o.StateField.define({create:function(){return null},update:function(e,t){var n=e;return(0,l.forEachEffect)(t,ea,function(e){n=e.value}),n}}),es=s.MountedReactNodes.from(eo,function(e){if(!e)return null;var t=e.language,n=e.filePath;return{key:"examplesModal",node:function(e){var i=function(){e.dispatch({effects:ea.of(null)})};return(0,r.jsx)(er.Modal,{maxWidth:872,isOpen:!0,onRequestClose:i,children:(0,r.jsx)(ec,{onRequestClose:i,language:t,filePath:n})})}}}),el=[eo,es];function eu(e){var t,n,o,s,l,x=e.isMobile,y=e.filePath,b=e.generateCode,w=(0,en.useKeyCombo)(ee.generateOrModifyWithAICommand.id),_=null!=(s=null==(t=u.FileTypeRepository.from(y))?void 0:t.id)?s:null,k=(0,h.useFlag)({controlName:"flag-leftover-assistant"}),S=(0,a.useReplCodeExamplesQuery)({variables:{language:_},skip:!_}).data,C=(null!=(l=null==S||null==(o=S.languageExamples)||null==(n=o.examples)?void 0:n.length)?l:0)>=1,j=(0,i.useMemo)(function(){var e=[];return!(0,p.isMarkdownFile)(y)&&k&&e.push({icon:(0,r.jsx)(c.default,{}),text:"Generate Code with AI",shortcut:x?void 0:w,onClick:function(e){ei({cta:"generate",version:"new"}),b(e,"shortcut")}}),_&&C&&e.push({icon:(0,r.jsx)(f.default,{}),text:"Start with a code example",onClick:function(e){ei({cta:"examples",version:"new"}),e.dispatch({effects:ea.of({language:_,filePath:y})})}}),e.push({icon:(0,r.jsx)(d.default,{}),text:"Add powerful Integrations",onClick:function(e){(0,J.openPane)(e.state,{pane:{type:"integrations"},secondary:!0}),ei({cta:"integrations",version:"new"}),(0,m.track)(g.events.TOOL_OPENED,{source:"fileEditorEmptyState",tool:"integrations"})}}),e},[y,k,_,C,x,w,b]);return[Z.use(j),el]}function ec(e){var t=e.onRequestClose,a=e.language,o=e.filePath,s=(0,y.useTourStep)(x.newUserTour.id,x.TourStepIds.Examples),l=(0,y.useTourStep)(x.newUserTour.id,x.TourStepIds.Editor),u=(0,n._)((0,i.useState)(!1),2),c=u[0],d=u[1],f=(0,et.default)(o),p=(0,i.useRef)(null==s?void 0:s.isActive),h=(0,i.useRef)();h.current=null==s?void 0:s.isActive;var m=(0,i.useRef)(null==s?void 0:s.goto);return(m.current=null==s?void 0:s.goto,(0,i.useEffect)(function(){return function(){var e;h.current&&(null==(e=m.current)||e.call(m,x.TourStepIds.Editor))}},[]),(0,i.useEffect)(function(){if((null==l?void 0:l.isActive)&&!p.current){if(!c)return void d(!0);l.goto(x.TourStepIds.Examples)}},[l,t,c]),(0,i.useEffect)(function(){if(null==s?void 0:s.isActive){p.current=!0;return}p.current&&t(null)},[t,null==s?void 0:s.isActive]),f)?(0,r.jsx)("div",{ref:null==s?void 0:s.tourRef,children:(0,r.jsx)(N,{filePath:o,language:a,onSelect:function(e){f({code:e.code,insertAt:0}),t({exampleName:e.name})}})}):(0,r.jsx)("div",{children:"Please make sure you have a file open"})}e.s(["useEmptyState",()=>eu],970652)},817760,e=>{"use strict";var t=e.i(530658),n=e.i(848415),r=e.i(288148),i=e.i(205104),a=e.i(529810),o=e.i(259475),s=e.i(545915);function l(e){var l=e.view,u=e.filePath,c=(0,a.default)().fs;return(0,t._)((0,n.useDrop)({accept:[o.DragItems.Code,r.NativeTypes.FILE],drop:function(e,t){if(l){var n=t.getClientOffset(),r=n?l.posAtCoords(n):null;if(null!==r){var a=function(e){l.focus(),l.dispatch({changes:{from:r,insert:e},selection:{anchor:r,head:r+e.length}})};if(e.type===o.DragItems.Code)a(e.code);else{var d=!0,f=!1,p=void 0;try{for(var h,m=e.files[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value;u&&(0,i.isMarkdownFile)(u)&&(0,s.uploadImageAndGetMDCode)(g,c,u).then(a)}}catch(e){f=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}}}}}}),2)[1]}e.s(["default",()=>l])},482070,690140,479166,142914,798705,e=>{"use strict";var t,n,r=e.i(297083),i=e.i(817556),a=e.i(276385),o=e.i(389959),s=e.i(179302),l=e.i(440416),u=e.i(406948),c=e.i(394205),d=e.i(440545),f=e.i(654360),p=e.i(122947),h=e.i(204219),m=e.i(848955),g=e.i(44813),x=e.i(507374),y=e.i(97149),b=e.i(300538),w=e.i(732676),_=e.i(755224),k=e.i(335392),S=e.i(507966),C=e.i(427469),j=e.i(221250),T=e.i(930925),E=e.i(194536),R=e.i(542101),I=e.i(275465),A=e.i(925565),P=e.i(770781),D=e.i(518975),O=e.i(705414),N=e.i(700170),M=e.i(234961),L=e.i(61524),B=e.i(441329),V=e.i(332441),F=e.i(597865),U=e.i(529810),G=e.i(714330),$=e.i(268403),H=e.i(57168),z=e.i(37292),W=e.i(177461),q=e.i(17262),K=e.i(970652),Y=e.i(817760),Q=e.i(242719),X=e.i(933101),Z=e.i(109853);e.i(429225);var J=e.i(59380),ee=e.i(564169),et=e.i(736097),en=e.i(91442);function er(e){var t=e.selection.main.head,n=e.doc.lineAt(t);return{offset:t,line:n.number,column:t-n.from+1}}var ei=new N.ReactCompartment(function(e){return s.EditorView.focusChangeEffect.of(function(t,n){var r=t.facet(et.fileName);return r&&e(r,n?{type:"focus",position:er(t)}:{type:"blur"}),null})}),ea=new N.ReactCompartment(function(e){return s.EditorView.updateListener.of(function(t){if(t.selectionSet){var n=t.state.facet(et.fileName);n&&e(n,{type:"update",hasFocus:t.view.hasFocus,position:er(t.state)})}})});e.i(545082);var eo=e.i(852819),es=e.i(703774),el=new N.ReactCompartment(function(){return(0,s.scrollPastEnd)()}),eu=function(e){var t=(0,F.default)(function(t){return(0,r._)(function(){var n;return(0,i._)(this,function(r){switch(r.label){case 0:return[4,t.status()];case 1:if((n=r.sent()).error)return[2,{error:n.error,isUnmerged:null}];if(n.changes.find(function(t){return t.path===e&&(t.type.index===M.GitStatusChangedFileType.UNMERGED||t.type.worktree===M.GitStatusChangedFileType.UNMERGED)}))return[2,{error:null,isUnmerged:!0}];return[2,{error:null,isUnmerged:!1}]}})})()},[e]);return t||{error:null,isUnmerged:null}};function ec(e){var t,n,r,i,N,M,F=e.filePath,et=e.isHidden,er=e.isReadOnly,ec=e.isReadOnlyWhileAgentWorking,ed=e.deeplink,ef=e.onDeeplinkUpdated,ep=e.performPaneOperation,eh=(0,U.default)(),em=eh.fs,eg=eh.presence,ev=(0,L.usePreferences)("formatOnSave","rulers","minimapDisplay","showLeadingWhitespace","showEnclosedWhitespace","showTrailingWhitespace","showSelectedWhitespace").preferences,ex=(0,R.default)(),ey=ex.ref,eb=ex.view,ew=(0,o.useCallback)(function(e){return ep({operation:"open",pane:e,secondary:!0})},[ep]);(0,ee.useSetCodeEditorView)(eb);var e_=(0,V.useUserAgent)(),ek=$.KeystrokeDebuggerForErrorsEnabledCompartment.use(!!(null==e_?void 0:e_.match(/Chrome/i))&&!!(null==e_?void 0:e_.match(/Android/i))),eS=(0,o.useContext)(eo.SessionContext),eC=(0,z.useGetBsodFileVersionByPath)(),ej=(n=(t={path:F,isHidden:et}).path,r=t.isHidden,i=(0,en.useUpdateCursorState)(),N=ei.use(i),M=ea.use(i),(0,o.useEffect)(function(){i(n,{type:r?"hidden":"unhidden"})},[r,i,n]),(0,o.useEffect)(function(){return function(){i(n,{type:"unmount"})}},[i,n]),(0,o.useMemo)(function(){return[N,M]},[N,M])),eT=(0,_.useMultiplayer)({view:eb,presence:eg,fs:em,filePath:F,performPaneOperation:ep}),eE=eT.isLoading,eR=eT.extensions,eI=(0,D.default)(),eA=(0,b.default)({filePath:F,isLoading:eE});(0,x.default)({filePath:F,view:eb,isLoading:eE,deeplink:ed,onDeeplinkUpdated:ef});var eP=(0,Y.default)({view:eb,filePath:F}),eD=(0,h.default)({filePath:F});(0,G.default)({view:eb,filePath:F});var eO=eu(F).isUnmerged,eN=(0,g.default)({filePath:F,enableConflicts:!0===eO}),eM=(0,B.useIsInMobileWorkspace)(),eL=T.InteractCompartment.use(eM),eB=k.PasteImgCompartment.use(em),eV=C.MeasureInputLatencyCompartment.use(eM),eF=I.RulersCompartment.use(ev.rulers),eU=(0,es.useTheme)(),eG=w.MinimapCompartment.use(eM,ev.minimapDisplay,eU),e$=A.SemanticScrollbarCompartment.use(eM,eU),eH=d.FormatterExtensionCompartment.use(),ez=(0,f.useFormattingProviders)({filePath:F}),eW=c.VisibleWhitespaceCompartment.use(ev.showLeadingWhitespace,ev.showEnclosedWhitespace,ev.showTrailingWhitespace,ev.showSelectedWhitespace),eq=(0,u.useTrackFirstPasteExtension)({analyticsSurface:"workspace_editor"}),eK=(0,W.useAssistantGenerateCode)({path:F}),eY=(0,W.useAddToChat)({path:F}),eQ=(0,o.useCallback)(function(){eb&&eK(eb,"shortcut")},[eb,eK]),eX=(0,K.useEmptyState)({isMobile:eM,generateCode:eK,filePath:F}),eZ=(0,o.useCallback)(function(){ew({type:"agentChat"})},[ew]),eJ=(0,m.useInlineGhostwriterExtension)({onGenerateCode:eQ,onReplyInChat:eZ}),e0=(0,J.useContextMenu)(),e1=e0.onContextMenu,e2=e0.closeContextMenu,e3=e0.openContextMenu,e5=e0.isVisible,e4=(0,o.useCallback)(function(e){eb&&(0,s.runScopeHandlers)(eb,e,"context-menu")&&(e2(),e.stopPropagation(),e.preventDefault())},[e2,eb]),e8=(0,W.useGetContextMenuCommand)({path:F,view:eb}),e6=(0,o.useCallback)(function(e){e1(e,{command:e8(),width:275,onKeyDownHandler:e4})},[e8,e1,e4]),e7=(0,o.useCallback)(function(e,t){e3({target:e,command:[e8(),t],width:275,onKeyDownHandler:e4})},[e8,e4,e3]),e9=W.ContextMenuCompartment.use(eM,e5,e6),te=q.ContextMenuOpenerCompartment.use(e7),tt=(0,o.useCallback)(function(e){e3({target:{x:e.right-275,y:e.top},width:275,command:e8(),onKeyDownHandler:e4})},[e8,e4,e3]),tn=(0,X.useSelectionControls)({addToChat:eY,onMoreClick:tt}),tr=el.use(),ti=(0,Q.usePerformPaneOperationFacet)(ep),ta=l.DisabledWhileAgentWorking.use(ec);return(0,a.jsx)("div",{css:Z.CodeMirrorEditorStyleEditor,"data-cy":eE?"loading-workspace-cm-editor":"workspace-cm-editor-".concat(F),children:(0,a.jsx)(j.default,{ref:ey,elementRef:eP,css:Z.CodeMirrorEditorStyleEditorContainer,filePath:F,hideTooltips:et,readOnly:er,extensions:[e9,te,eR,eI,eA,eX,tr,eL,ek,eV,eN,e$,eG,k.PasteLink,eB,$.KeystrokeDebuggerForErrors,eJ,S.pasteScannerExtension,O.ContainmentTheme,eF,eW,eH,ez,p.RevetGhostwriterCodeInsertState,eD,P.ReplitSearchPanel,E.TrackOnTypeExtension,eM?[]:tn,ej,y.LintPanelExtension,ti,eq,ta],onException:function(e){var t,n={filePath:F,cursorPosition:JSON.stringify(null==eS||null==(t=eS.get(en.cursorStateAtom))?void 0:t.position),fileVersion:eC({filePath:F})};if(eb){var r=eb.plugin($.KeystrokeDebuggerForErrors),i=null==r?void 0:r.logs();null==r||r.flush(),n.domText=eb.contentDOM.innerText,n.keystrokes=JSON.stringify(i),n.selection=JSON.stringify(eb.state.selection.main.toJSON()),n.updateDoc=eb.state.doc.sliceString(0)}(0,H.captureNonFatalWorkspaceException)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:n})},noHistory:!0})})}e.s(["default",()=>ec],482070);var ed=e.i(513705),ef=e.i(435396),ep=e.i(878420),eh=e.i(64386),em=e.i(116235);function eg(e){return(0,a.jsxs)(em.default,(0,eh._)((0,ep._)({},e),{children:[(0,a.jsx)("path",{d:"M7 4.25c-.69 0-1.25.56-1.25 1.25v13.333c0 .69.56 1.25 1.25 1.25h10c.69 0 1.25-.56 1.25-1.25v-7.292a.625.625 0 1 1 1.25 0v7.292a2.5 2.5 0 0 1-2.5 2.5H7a2.5 2.5 0 0 1-2.5-2.5V5.5A2.5 2.5 0 0 1 7 3h4.375a.625.625 0 1 1 0 1.25H7Z"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M15.333 16.541c0 .345-.263.625-.588.625h-5.49c-.325 0-.588-.28-.588-.625s.263-.625.588-.625h5.49c.325 0 .588.28.588.625ZM15.333 10.083c0 .345-.263.625-.588.625h-5.49c-.325 0-.588-.28-.588-.625s.263-.625.588-.625h5.49c.325 0 .588.28.588.625Z",clipRule:"evenodd"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M12 13.416c-.345 0-.625-.263-.625-.588v-5.49c0-.325.28-.588.625-.588s.625.263.625.588v5.49c0 .325-.28.588-.625.588ZM17.889 1.266c-.13-.355-.648-.355-.778 0l-.893 2.44a.407.407 0 0 1-.264.247l-2.166.663a.396.396 0 0 0 0 .762l2.166.669c.123.038.22.13.264.247l.893 2.44c.13.355.648.355.778 0l.893-2.44a.407.407 0 0 1 .264-.247l2.166-.666a.396.396 0 0 0 0-.762l-2.166-.666a.407.407 0 0 1-.264-.247l-.893-2.44Z",clipRule:"evenodd"})]}))}var ev=e.i(530658),ex=e.i(346715),ey=e.i(255615),eb=e.i(443893),ew=e.i(625251),e_=e.i(405411),ek=e.i(131141),eS=e.i(541793),eC=e.i(161322),ej=e.i(828322),eT=e.i(649960),eE=e.i(480028),eR=e.i(446530),eI=e.i(754873),eA=e.i(613355),eP=e.i(604963),eD=e.i(625484),eO=(0,eS.atom)(0),eN=(0,eS.atom)(new Map([["normal",[]],["compact",[]]])),eM=(0,eS.atom)(null,function(e,t,n){var r=e(eF);t(eN,function(e){return(0,ek.produce)(e,function(e){var t=e.get(r);if(!t)throw Error("Expect width for: "+r);t[n.index]=n.width})})}),eL=(0,eS.atom)(null,function(e,t,n){t(eN,function(e){return(0,ek.produce)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)(0,ev._)(a.value,2)[1].slice(0,n)}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}})})}),eB=(0,eS.atom)(function(e){var t=new Map([["normal",0],["compact",0]]),n=!0,r=!1,i=void 0;try{for(var a,o=e(eN)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=(0,ev._)(a.value,2),l=s[0],u=s[1],c=0,d=!0,f=!1,p=void 0;try{for(var h,m=u[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value;void 0!==g&&(c+=g)}}catch(e){f=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}t.set(l,c)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}),eV=(0,eS.atom)(function(e){if("normal"===e(eF))return null;var t=e(eN).get("compact");if(!t)return null;var n=e(eO)-24,r=0,i=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;if(void 0!==u){if((n-=u)>0){r++;continue}return r}}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return null}),eF=(0,eS.atom)(function(e){var t,n=e(eO);return(null!=(t=e(eB).get("normal"))?t:0)>n?"compact":"normal"}),eU=(0,eR.cssRecord)({item:[eA.rcss.viewStyle,eI.interactive.listItem,eA.rcss.p(6),eA.rcss.rowWithGap(4),eA.rcss.align.center,{fontSize:eE.tokens.fontSizeSmall}]});function eG(e){var t=(0,ev._)((0,o.useState)(null),2),n=t[0],r=t[1],i=null!==n&&(null==(d=e.items[n])?void 0:d.popover);if(i)return(0,a.jsx)(a.Fragment,{children:i});var s=[],l=!0,u=!1,c=void 0;try{for(var d,f,p=e.items[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var h=f.value;h.onClick||h.popover||s.push(h.key)}}catch(e){u=!0,c=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}return(0,a.jsx)(ew.Menu,{disabledKeys:s,onAction:function(t){var n=!0,i=!1,a=void 0;try{for(var o,s=e.items[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;if(l.key===t){if(l.onClick){l.onClick();break}l.popover&&r(e.items.indexOf(l));break}}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}},children:e.items.map(function(e){return(0,a.jsx)(ew.MenuItem,{id:e.key,css:eU.item,children:(0,a.jsx)(e$.Provider,{value:function(){},children:(0,o.cloneElement)(e.item,{presentation:"overflowMenu"})})},e.key)})})}var e$=(0,o.createContext)(function(e){});function eH(){return(0,o.useContext)(e$)}var ez=(0,eR.cssRecord)({button:[eA.rcss.viewStyle,eA.rcss.reset.button,eA.rcss.rowWithGap(4),eA.rcss.center,eA.rcss.color.foregroundDimmest,eA.rcss.hover([eA.rcss.color.foregroundDefault]),eA.rcss.height("100%"),{fontSize:12,"&:has(*)":[eA.rcss.px(4),eI.interactive.nofill,eA.rcss.borderRadius(0)]}],tooltip:[eA.rcss.backgroundColor.backgroundHighest,eA.rcss.borderRadius(4),eA.rcss.color.foregroundDimmer,eA.rcss.p(4),eA.rcss.border({color:eE.tokens.outlineDefault}),{fontSize:12}]});function eW(e){var t=(0,eT.default)(function(t){return e.onWidth(t.width)}),n=(0,ev._)((0,o.useState)(null),2),r=n[0],i=n[1];return(0,a.jsx)(eD.View,{innerRef:t,children:(0,a.jsxs)(e_.TooltipTrigger,{isDisabled:null==r||e.hidden,children:[(0,a.jsx)(ey.Button,{isDisabled:e.isDisabled||e.hidden,css:ez.button,style:e.hidden?{opacity:0,pointerEvents:"none"}:void 0,onPress:function(){var t;return null==(t=e.onClick)?void 0:t.call(e)},children:(0,a.jsx)(e$.Provider,{value:i,children:e.children})}),(0,a.jsx)(e_.Tooltip,{placement:"top",offset:8,css:ez.tooltip,children:r})]})})}var eq=(0,eR.cssRecord)({root:[eA.rcss.position.relative,{"& > div:first-of-type > button":{borderBottomLeftRadius:4},"& > div:button:last-of-type > button":{borderBottomRightRadius:4}}],middle:[eA.rcss.flex.growAndShrink(1)],moreButton:[{width:24},eA.rcss.reset.button,eA.rcss.center,eI.interactive.nofill,eA.rcss.height("100%"),eA.rcss.position.absolute,eA.rcss.right(0),eA.rcss.top(0)]});function eK(e){var t=e.left.filter(Boolean),n=e.right.filter(Boolean),r=(0,ev._)((0,o.useState)(function(){return(0,eS.createStore)()}),1)[0],i=(0,eC.useAtomValue)(eF,{store:r}),s=(0,eC.useAtomValue)(eV,{store:r}),l=(0,eC.useSetAtom)(eM,{store:r}),u=(0,eC.useSetAtom)(eO,{store:r}),c=(0,eT.default)(function(e){return u(e.width)}),d=t.length-1,f=(0,ex._)(t).concat((0,ex._)(n)),p=(0,eC.useSetAtom)(eL,{store:r}),h=f.length;return(0,o.useEffect)(function(){p(h)},[p,h]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(eD.View,{className:e.className,css:eq.root,grow:!0,shrink:!0,row:!0,innerRef:c,children:[f.map(function(e,t){return e.popover?(0,a.jsxs)(o.Fragment,{children:[(0,a.jsxs)(eb.DialogTrigger,{children:[(0,a.jsx)(eW,{onWidth:function(e){return l({index:t,width:e})},hidden:null!==s&&t>=s,isDisabled:!e.popover&&!e.onClick,children:(0,o.cloneElement)(e.item,{presentation:i})}),(0,a.jsx)(eP.RawPopover,{placement:t<=d?"top left":"top right",children:e.popover})]}),t===d?(0,a.jsx)(eD.View,{css:eq.middle}):null]},e.key):(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(eW,{onWidth:function(e){return l({index:t,width:e})},onClick:e.onClick,hidden:null!==s&&t>=s,isDisabled:!e.popover&&!e.onClick,children:(0,o.cloneElement)(e.item,{presentation:i})}),t===d?(0,a.jsx)(eD.View,{css:eq.middle}):null]},e.key+t)}),null===s?null:(0,a.jsxs)(eb.DialogTrigger,{children:[(0,a.jsx)(ey.Button,{css:eq.moreButton,children:(0,a.jsx)(ej.default,{size:12})}),(0,a.jsx)(eP.RawPopover,{placement:"top right",children:(0,a.jsx)(eG,{items:f.slice(s)})})]})]})})}e.s(["CodeEditorStatusBar",()=>eK,"useSetTooltip",()=>eH],690140),e.i(32109);var eY=e.i(926118),eQ=e.i(127227),eX=e.i(960178);function eZ(e){var t=e.presentation,n=(0,L.usePreferences)("codeSuggestion").preferences.codeSuggestion,r=eH();return(0,o.useEffect)(function(){r("compact"===t?"AI":null)},[r,t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ef.default,{size:12,color:n?eE.tokens.blurpleDefault:void 0}),"compact"===t?null:(0,a.jsx)(eD.View,{children:"AI"})]})}var eJ=(0,eR.cssRecord)({root:[eA.rcss.maxWidth(260)],featureTitle:[eA.rcss.fontWeight.medium]});function e0(){var e=(0,o.useId)(),t=(0,L.usePreferences)("codeSuggestion"),n=t.preferences.codeSuggestion,r=t.update;return(0,a.jsxs)(eD.View,{css:eJ.root,p:8,children:[(0,a.jsxs)(eD.View,{row:!0,gap:8,align:"center",children:[(0,a.jsxs)(eD.View,{css:eJ.featureTitle,grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:[(0,a.jsx)(eg,{color:eE.tokens.blurpleDefault}),(0,a.jsx)(eX.Text,{children:"AI Autocomplete"})]}),(0,a.jsxs)(eD.View,{row:!0,gap:4,align:"center",children:[(0,a.jsx)(eD.View,{tag:"label",htmlFor:e,children:(0,a.jsx)(eX.Text,{color:"dimmer",variant:"small",children:"Enable"})}),(0,a.jsx)(eQ.Checkbox,{id:e,checked:n,name:"Code Complete",onChange:function(){return r({codeSuggestion:!n})}})]})]}),(0,a.jsxs)(eD.View,{gap:8,children:[(0,a.jsx)(eX.Text,{color:"dimmer",variant:"small",children:"Suggest lines of code as you type based on existing context."}),(0,a.jsxs)(eD.View,{row:!0,gap:4,align:"center",children:[(0,a.jsx)(eX.Text,{color:"dimmer",variant:"small",children:"Press"}),(0,a.jsx)(eY.KeyComboBlocks,{small:!0,keyCombo:"Tab"}),(0,a.jsx)(eX.Text,{color:"dimmer",variant:"small",children:"to accept result"})]})]})]})}function e1(){var e=(0,ed.default)();return(0,ed.isCodeCompleteFrontendEnabled)(e)?{item:(0,a.jsx)(eZ,{}),popover:(0,a.jsx)(e0,{}),key:"ai"}:null}e.s(["useAiItem",()=>e1],479166);var e2=e.i(721281),e3=e.i(204179),e5=e.i(703613);e.i(694906);var e4=e.i(446692);function e8(e){return(0,a.jsx)(em.default,(0,eh._)((0,ep._)({},e),{children:(0,a.jsx)("path",{fill:eE.tokens.foregroundDefault,d:"M8.25 4c-.764 0-1.407.125-1.932.394-.538.276-.905.68-1.143 1.15-.426.842-.425 1.904-.425 2.74v.09c0 .963-.017 1.666-.263 2.153a1.069 1.069 0 0 1-.49.492c-.248.127-.637.229-1.247.229a.75.75 0 0 0 0 1.5c.61 0 .999.101 1.248.229.235.12.383.283.49.492.245.486.262 1.19.262 2.153v.09c0 .835-.001 1.898.425 2.74.238.47.605.874 1.143 1.15.525.268 1.168.393 1.932.393a.75.75 0 0 0 0-1.5c-.61 0-.999-.1-1.248-.228a1.07 1.07 0 0 1-.489-.493c-.246-.486-.263-1.19-.263-2.152v-.09c0-.836.001-1.899-.424-2.74a2.587 2.587 0 0 0-.614-.794c.263-.228.464-.498.614-.794.425-.842.425-1.904.424-2.74v-.09c0-.963.017-1.666.263-2.153.106-.209.254-.371.49-.492C7.25 5.6 7.64 5.5 8.25 5.5a.75.75 0 0 0 0-1.5ZM15.75 4a.75.75 0 0 0 0 1.5c.61 0 1 .101 1.248.229.236.12.384.283.49.492.246.487.263 1.19.263 2.153v.09c-.001.836-.002 1.898.424 2.74.15.296.351.566.614.794a2.586 2.586 0 0 0-.614.794c-.426.841-.425 1.904-.424 2.74v.09c0 .963-.017 1.666-.263 2.152a1.07 1.07 0 0 1-.49.493c-.249.127-.637.229-1.248.229a.75.75 0 1 0 0 1.5c.765 0 1.408-.126 1.932-.394.539-.276.906-.68 1.144-1.15.426-.842.425-1.905.425-2.74v-.09c0-.964.016-1.667.263-2.153a1.07 1.07 0 0 1 .489-.492c.249-.128.637-.23 1.248-.23a.75.75 0 0 0 0-1.5c-.61 0-1-.1-1.248-.228a1.069 1.069 0 0 1-.49-.492c-.246-.487-.262-1.19-.262-2.153v-.09c0-.836.001-1.898-.425-2.74a2.567 2.567 0 0 0-1.144-1.15C17.158 4.125 16.515 4 15.751 4Z"})}))}function e6(e){return(0,a.jsxs)(em.default,(0,eh._)((0,ep._)({},e),{children:[(0,a.jsx)("path",{fill:eE.tokens.foregroundDimmer,fillRule:"evenodd",d:"M6.25 4.5c-.764 0-1.407.117-1.932.37a2.49 2.49 0 0 0-1.143 1.078c-.426.79-.425 1.785-.425 2.57v.084c0 .903-.017 1.562-.263 2.018a1.037 1.037 0 0 1-.49.462c-.248.12-.637.215-1.247.215-.414 0-.75.315-.75.703 0 .388.336.703.75.703.61 0 .999.095 1.248.215.235.113.383.266.49.462.245.456.262 1.115.262 2.018v.085c0 .784-.001 1.78.425 2.57.238.44.605.819 1.143 1.078.525.252 1.168.369 1.932.369.414 0 .75-.315.75-.703 0-.389-.336-.704-.75-.704-.61 0-.999-.095-1.248-.214a1.037 1.037 0 0 1-.489-.462c-.246-.456-.263-1.115-.263-2.019v-.084c0-.784.001-1.78-.424-2.57A2.452 2.452 0 0 0 3.212 12c.263-.214.464-.467.614-.745.425-.789.425-1.785.424-2.569v-.084c0-.904.017-1.563.263-2.02.106-.195.254-.348.49-.46.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.704 0-.388-.336-.703-.75-.703Zm11.5 0c-.415 0-.75.315-.75.703 0 .389.335.704.75.704.61 0 .999.095 1.248.214.235.113.383.266.489.462.246.456.263 1.115.263 2.019v.084c0 .784-.002 1.78.424 2.57.15.277.351.53.614.744a2.452 2.452 0 0 0-.614.745c-.425.789-.425 1.785-.424 2.569v.084c0 .904-.017 1.563-.263 2.02a1.037 1.037 0 0 1-.49.46c-.248.12-.637.215-1.247.215-.415 0-.75.315-.75.704 0 .388.335.703.75.703.764 0 1.407-.117 1.932-.37a2.49 2.49 0 0 0 1.143-1.078c.426-.79.425-1.785.425-2.57v-.084c0-.903.017-1.562.263-2.018.105-.196.254-.349.49-.462.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.703 0-.388-.336-.703-.75-.703-.61 0-.999-.095-1.248-.215a1.036 1.036 0 0 1-.49-.462c-.245-.456-.262-1.115-.262-2.018v-.085c0-.784.001-1.78-.425-2.57a2.49 2.49 0 0 0-1.143-1.078c-.525-.252-1.168-.369-1.932-.369Z",clipRule:"evenodd"}),(0,a.jsx)("path",{fill:eE.tokens.accentPositiveStronger,d:"M16.09 9.227a.692.692 0 0 1-.047.978l-5.077 4.615a.692.692 0 0 1-.932 0l-2.307-2.098a.692.692 0 0 1 .931-1.024l1.842 1.674 4.611-4.192a.692.692 0 0 1 .978.047Z"})]}))}function e7(e){return(0,a.jsxs)(em.default,(0,eh._)((0,ep._)({},e),{children:[(0,a.jsx)("path",{fill:"#F66",fillRule:"evenodd",d:"M8.47 8.47a.75.75 0 0 1 1.06 0L12 10.94l2.47-2.47a.75.75 0 1 1 1.06 1.06L13.06 12l2.47 2.47a.75.75 0 1 1-1.06 1.06L12 13.06l-2.47 2.47a.75.75 0 0 1-1.06-1.06L10.94 12 8.47 9.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}),(0,a.jsx)("path",{fill:eE.tokens.foregroundDimmer,fillRule:"evenodd",d:"M6.25 4.5c-.764 0-1.407.117-1.932.37a2.49 2.49 0 0 0-1.143 1.078c-.426.79-.425 1.785-.425 2.57v.084c0 .903-.017 1.562-.263 2.018a1.037 1.037 0 0 1-.49.462c-.248.12-.637.215-1.247.215-.414 0-.75.315-.75.703 0 .388.336.703.75.703.61 0 .999.095 1.248.215.235.113.383.266.49.462.245.456.262 1.115.262 2.018v.085c0 .784-.001 1.78.425 2.57.238.44.605.819 1.143 1.078.525.252 1.168.369 1.932.369.414 0 .75-.315.75-.703 0-.389-.336-.704-.75-.704-.61 0-.999-.095-1.248-.214a1.037 1.037 0 0 1-.489-.462c-.246-.456-.263-1.115-.263-2.019v-.084c0-.784.001-1.78-.424-2.57A2.452 2.452 0 0 0 3.212 12c.263-.214.464-.467.614-.745.425-.789.425-1.785.424-2.569v-.084c0-.904.017-1.563.263-2.02.106-.195.254-.348.49-.46.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.704 0-.388-.336-.703-.75-.703Zm11.5 0c-.415 0-.75.315-.75.703 0 .389.335.704.75.704.61 0 .999.095 1.248.214.235.113.383.266.489.462.246.456.263 1.115.263 2.019v.084c0 .784-.002 1.78.424 2.57.15.277.351.53.614.744a2.452 2.452 0 0 0-.614.745c-.425.789-.425 1.785-.424 2.569v.084c0 .904-.017 1.563-.263 2.02a1.037 1.037 0 0 1-.49.46c-.248.12-.637.215-1.247.215-.415 0-.75.315-.75.704 0 .388.335.703.75.703.764 0 1.407-.117 1.932-.37a2.49 2.49 0 0 0 1.143-1.078c.426-.79.425-1.785.425-2.57v-.084c0-.903.017-1.562.263-2.018.105-.196.254-.349.49-.462.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.703 0-.388-.336-.703-.75-.703-.61 0-.999-.095-1.248-.215a1.036 1.036 0 0 1-.49-.462c-.245-.456-.262-1.115-.262-2.018v-.085c0-.784.001-1.78-.425-2.57a2.49 2.49 0 0 0-1.143-1.078c-.525-.252-1.168-.369-1.932-.369Z",clipRule:"evenodd"})]}))}function e9(e){return(0,a.jsxs)(em.default,(0,eh._)((0,ep._)({},e),{children:[(0,a.jsx)("path",{fill:eE.tokens.yellowStronger,fillRule:"evenodd",d:"M12 7.33c.368 0 .667.298.667.667v2.822l2.323-1.394a.667.667 0 1 1 .686 1.143l-2.38 1.428 2.38 1.429a.667.667 0 1 1-.686 1.143l-2.323-1.394v2.822a.667.667 0 0 1-1.334 0v-2.822L9.01 14.568a.667.667 0 1 1-.686-1.143l2.38-1.429-2.38-1.428a.667.667 0 1 1 .686-1.143l2.323 1.394V7.997c0-.369.299-.667.667-.667Z",clipRule:"evenodd"}),(0,a.jsx)("path",{fill:eE.tokens.foregroundDimmer,fillRule:"evenodd",d:"M6.25 4.5c-.764 0-1.407.117-1.932.37a2.49 2.49 0 0 0-1.143 1.078c-.426.79-.425 1.785-.425 2.57v.084c0 .903-.017 1.562-.263 2.018a1.037 1.037 0 0 1-.49.462c-.248.12-.637.215-1.247.215-.414 0-.75.315-.75.703 0 .388.336.703.75.703.61 0 .999.095 1.248.215.235.113.383.266.49.462.245.456.262 1.115.262 2.018v.085c0 .784-.001 1.78.425 2.57.238.44.605.819 1.143 1.078.525.252 1.168.369 1.932.369.414 0 .75-.315.75-.703 0-.389-.336-.704-.75-.704-.61 0-.999-.095-1.248-.214a1.037 1.037 0 0 1-.489-.462c-.246-.456-.263-1.115-.263-2.019v-.084c0-.784.001-1.78-.424-2.57A2.452 2.452 0 0 0 3.212 12c.263-.214.464-.467.614-.745.425-.789.425-1.785.424-2.569v-.084c0-.904.017-1.563.263-2.02.106-.195.254-.348.49-.46.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.704 0-.388-.336-.703-.75-.703Zm11.5 0c-.415 0-.75.315-.75.703 0 .389.335.704.75.704.61 0 .999.095 1.248.214.235.113.383.266.489.462.246.456.263 1.115.263 2.019v.084c0 .784-.002 1.78.424 2.57.15.277.351.53.614.744a2.452 2.452 0 0 0-.614.745c-.425.789-.425 1.785-.424 2.569v.084c0 .904-.017 1.563-.263 2.02a1.037 1.037 0 0 1-.49.46c-.248.12-.637.215-1.247.215-.415 0-.75.315-.75.704 0 .388.335.703.75.703.764 0 1.407-.117 1.932-.37a2.49 2.49 0 0 0 1.143-1.078c.426-.79.425-1.785.425-2.57v-.084c0-.903.017-1.562.263-2.018.105-.196.254-.349.49-.462.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.703 0-.388-.336-.703-.75-.703-.61 0-.999-.095-1.248-.215a1.036 1.036 0 0 1-.49-.462c-.245-.456-.262-1.115-.262-2.018v-.085c0-.784.001-1.78-.425-2.57a2.49 2.49 0 0 0-1.143-1.078c-.525-.252-1.168-.369-1.932-.369Z",clipRule:"evenodd"})]}))}var te=e.i(269848),tt=e.i(205104),tn=e.i(780671),tr=e.i(522682),ti=e.i(577811),ta=((t=ta||{})[t.Loading=0]="Loading",t[t.Ready=1]="Ready",t[t.Exited=2]="Exited",t[t.Stalled=3]="Stalled",t[t.Partial=4]="Partial",t[t.Missing=5]="Missing",t[t.Disabled=6]="Disabled",t),to=(0,eS.atom)(new Map),ts=(0,eS.atom)(null,function(e,t,n,r){t(to,function(e){return(0,ek.produce)(e,function(e){var t=e.get(n);t&&e.set(n,(0,eh._)((0,ep._)({},t),{state:r}))})})}),tl=(0,eS.atom)(null,function(e,t,n,r){t(to,function(e){return(0,ek.produce)(e,function(e){var t=e.get(n);t&&e.set(n,(0,eh._)((0,ep._)({},t),{health:r}))})})}),tu=(0,eS.atom)(null,function(e,t,n,r){t(to,function(e){return(0,ek.produce)(e,function(e){var i=new Set,a=!0,o=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(a=(l=u.next()).done);a=!0)!function(){var n,a=l.value;i.add(a.clientId),null==(n=e.get(a.clientId))||n.dispose(),e.set(a.clientId,{client:a,health:a.getServerHealth(),state:a.getServerState(),restart:function(){return r.restart(a.clientId)},dispose:(0,tr.combineDisposables)([a.onServerStateChange(function(e){return t(ts,a.clientId,e)}),a.onServerHealthChange(function(e){return t(tl,a.clientId,e)})])})}()}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}var c=!0,d=!1,f=void 0;try{for(var p,h=e.entries()[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var m=(0,ev._)(p.value,2),g=m[0],x=m[1].dispose;i.has(g)||(x(),e.delete(g))}}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}})})});function tc(e){switch(e){case 3:return 4;case 0:return 3;case 1:return 2;case 2:return 1;default:return 0}}function td(){return tm((0,o.useMemo)(function(){return(0,eS.atom)(function(e){var t;return null!=(t=Array.from(e(to).values()).map(function(e){return tf(e)}).sort(function(e,t){return tc(t)-tc(e)})[0])?t:5})},[]))}function tf(e){return e.health===ti.ServerHealth.STALLED?3:e.state===ti.ServerState.INITIALIZING||e.state===ti.ServerState.INITIALIZED&&e.health!==ti.ServerHealth.READY?0:e.health===ti.ServerHealth.READY?1:e.state===ti.ServerState.EXITED?2:5}function tp(e){return tm((0,o.useMemo)(function(){return(0,eS.atom)(function(t){var n=t(to).get(e);return n?tf(n):5})},[e]))}function th(){return tm((0,o.useMemo)(function(){return(0,eS.atom)(function(e){return Array.from(e(to).values()).map(function(e){return{clientId:e.client.clientId,clientName:e.client.clientName,restart:function(){return e.restart()}}})})},[]))}function tm(e){return(0,eC.useAtomValue)(e,{store:function(){var e=(0,o.useContext)(tg);if(!e)throw Error("Expected store in context");return e}()})}var tg=(0,o.createContext)(null);function tv(e){var t,n,r,i=(t=e.filePath,n=e.lspnix,r=(0,ev._)((0,o.useState)(function(){return(0,eS.createStore)()}),1)[0],(0,o.useEffect)(function(){return n.onClient(t,function(e){return r.set(tu,e,n)})},[t,n,r]),r);return(0,a.jsx)(tg.Provider,{value:i,children:e.children})}e.s(["CodeIntelligenceStatusProvider",()=>tv,"useClients",()=>th,"useCombinedStatusIconState",()=>td,"useServerState",()=>tp],142914);var tx=e.i(988676),ty=e.i(630818),tb=e.i(679668);function tw(e){var t=e.filePath,n=e.presentation,r=(0,ee.useCodeEditorView)(),i=(0,e5.useCodeMirrorValue)(r,et.languageSupport),s=(0,o.useMemo)(function(){var e,n,r,a;return(r=null==(e=e4.FileTypeRepository.from(t))?void 0:e.name)?r:(r=null==i||null==(n=i.language)?void 0:n.name)&&r.length>0?(a=r).slice(0,1).toUpperCase()+a.slice(1).toLowerCase():(r=(0,tt.getExt)(t),i)?r:"Plain Text"},[t,i]),l=(0,e5.useCodeMirrorValue)(r,e3.SelectedProvider),u=(0,ev._)((0,o.useState)(l?{title:l.name,value:l.id}:void 0),2),c=u[0],d=u[1],f=(0,o.useRef)(!1);(0,o.useEffect)(function(){f.current||(null==c?void 0:c.value)!==(null==l?void 0:l.id)&&d(l?{title:l.name,value:l.id}:void 0)},[c,l]);var p=eH();(0,o.useEffect)(function(){p("Language support"+("compact"===n?" (".concat(s,")"):""))},[p,n,s]);var h=td();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tR,{state:h}),"compact"===n?null:(0,a.jsx)(eD.View,{children:s})]})}var t_=(0,eR.cssRecord)({menu:[eA.rcss.maxWidth(390),eA.rcss.minWidth(390)],file:[eA.rcss.pl(4),eA.rcss.display.inlineFlex,eA.rcss.rowWithGap(4),eA.rcss.align.center,{verticalAlign:"top"}],section:[eA.rcss.rowWithGap(8),eA.rcss.align.center,eA.rcss.justify.spaceBetween],header:[eA.rcss.colWithGap(2),eA.rcss.flex.shrink(1)],staticWidth:[eA.rcss.flex.grow(0),eA.rcss.flex.shrink(1)],variableWidth:[eA.rcss.flex.grow(1),eA.rcss.flex.shrink(0),{flexBasis:0}],flexEnd:[eA.rcss.align.end],red:[eA.rcss.color.redDefault],row:[eA.rcss.rowWithGap(8),eA.rcss.align.center]});function tk(e){var t=e.filePath,n=e.openSettings,s=(0,ee.useCodeEditorView)(),l=(0,U.default)().dotReplit,u=(0,e5.useCodeMirrorValue)(s,e3.SelectedProvider),c=(0,e5.useCodeMirrorValue)(s,e3.AvailableProviders),d=(0,ev._)((0,o.useState)(u?{title:u.name,value:u.id}:void 0),2),f=d[0],p=d[1],h=(0,o.useRef)(!1),m=(0,o.useMemo)(function(){var e;return null!=(e=null==c?void 0:c.map(function(e){return{title:e.name,value:e.id,icon:void 0}}))?e:[]},[c]);return(0,a.jsxs)(eD.View,{css:t_.menu,p:8,gap:8,children:[(0,a.jsxs)(eX.Header,{level:1,children:["Language support for ",(0,a.jsxs)("span",{css:t_.file,children:[(0,a.jsx)(ty.default,{path:t,size:16})," ",(0,a.jsx)("span",{children:(0,tt.getFileName)(t)})]})]}),(0,a.jsx)(tx.DividerH,{}),(0,a.jsx)(tS,{openSettings:n}),c&&f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tx.DividerH,{}),(0,a.jsxs)(eD.View,{css:t_.section,children:[(0,a.jsx)(eD.View,{css:[t_.header,t_.staticWidth],children:(0,a.jsx)(eX.Text,{multiline:!1,children:"Code Formatter"})}),1===c.length?(0,a.jsx)(eD.View,{css:[t_.header,t_.variableWidth,t_.flexEnd],children:(0,a.jsx)(eX.Text,{multiline:!1,children:f.title})}):(0,a.jsx)(eD.View,{row:!0,gap:4,children:(0,a.jsx)(tb.Select,{"aria-label":"Select code formatter",items:m,selectedItem:(0,eh._)((0,ep._)({},f),{icon:h.current?(0,a.jsx)(te.default,{size:12}):void 0}),disabled:h.current,onChange:function(e){var n,a;"value"in e&&e.value===f.value||(h.current=!0,p(e),(n=l,a={path:t,formatterId:"value"in e?e.value:""},(0,r._)(function(){var e,t;return(0,i._)(this,function(r){return(e=".".concat((0,tn.getFileExtension)(a.path)),t="rules/formatter/fileExtensions/".concat(e,"/id"),a.formatterId)?[2,n.updateDotReplit([{path:"rules/formatter/fileExtensions",op:"add",value:JSON.stringify((0,e2._)({},"".concat(e),{id:a.formatterId}))}])]:[2,n.updateDotReplit([{path:t,op:"remove"}])]})})()).finally(function(){return h.current=!1}))}})})]})]}):null]})}function tS(e){var t=e.openSettings,n=th();return(0,a.jsxs)(a.Fragment,{children:[n.map(function(e){return(0,a.jsx)(eD.View,{css:t_.section,children:(0,a.jsx)(tj,{languageServerId:e.clientId,name:e.clientName,restart:function(){return e.restart()},openSettings:t})},e.clientId)}),0===n.length?(0,a.jsx)(eD.View,{css:t_.section,children:(0,a.jsx)(tT,{openSettings:t})}):null]})}function tC(e){var t=(0,a.jsx)("a",{tabIndex:0,role:"button",onClick:e.restart,onKeyDown:function(t){"Enter"===t.key&&e.restart()},children:"Restart"});switch(e.state){case 0:return(0,a.jsx)(eX.Text,{multiline:!1,color:"dimmer",children:"Loading"});case 1:return(0,a.jsx)(eX.Text,{multiline:!1,color:"dimmer",children:"Active"});case 3:return(0,a.jsxs)(eD.View,{css:t_.row,children:[(0,a.jsx)(eX.Text,{css:t_.red,multiline:!1,children:"Stalled"})," ",t]});case 2:return(0,a.jsxs)(eD.View,{css:t_.row,children:[(0,a.jsx)(eX.Text,{css:t_.red,multiline:!1,children:"Stopped"})," ",t]});default:return null}}function tj(e){var t=tp(e.languageServerId);switch(t){case 0:case 1:case 2:case 3:return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eD.View,{css:[t_.header,t_.variableWidth],children:(0,a.jsx)(eX.Text,{multiline:!1,children:e.name})}),(0,a.jsx)(eD.View,{css:[t_.header,t_.staticWidth],children:(0,a.jsx)(tC,{restart:e.restart,state:t})})]});default:return null}}function tT(e){return(0,L.usePreferences)("codeIntelligence").preferences.codeIntelligence?(0,a.jsx)(eD.View,{css:t_.header,children:(0,a.jsx)(eX.Text,{color:"dimmer",children:"Limited language support because the language server is not available."})}):(0,a.jsx)(eD.View,{css:t_.header,children:(0,a.jsxs)(eX.Text,{multiline:!0,color:"dimmer",children:["Code intelligence is disabled. Enable it in settings.",(0,a.jsx)("br",{}),(0,a.jsx)("a",{tabIndex:0,role:"button",onClick:e.openSettings,onKeyDown:function(t){"Enter"===t.key&&e.openSettings()},children:"Open settings"})]})})}var tE=((n=tE||{})[n.Loading=0]="Loading",n[n.Ready=1]="Ready",n[n.Exited=2]="Exited",n[n.Stalled=3]="Stalled",n[n.Partial=4]="Partial",n[n.Missing=5]="Missing",n[n.Disabled=6]="Disabled",n);function tR(e){switch(e.state){case 3:case 6:case 4:return(0,a.jsx)(e9,{size:16});case 0:return(0,a.jsx)(te.default,{size:16,color:eE.tokens.blueStronger});case 1:return(0,a.jsx)(eD.View,{dataCy:"ws-code-intelligence-active",children:(0,a.jsx)(e6,{size:16})});case 2:return(0,a.jsx)(e7,{size:16});case 5:return(0,a.jsx)(e8,{size:16})}}function tI(e){var t=e.filePath,n=e.openSettings;return{item:(0,a.jsx)(tw,{filePath:t,openSettings:n}),popover:(0,a.jsx)(tk,{openSettings:n,filePath:t}),key:"codeIntelligence"}}e.s(["useCodeIntelligence",()=>tI],798705)},10581,e=>{"use strict";var t,n,r=e.i(960933),i=((t={}).NOT_INITIALIZED="NOT_INITIALIZED",t.ON_UNBORN_BRANCH="ON_UNBORN_BRANCH",t.MERGING="MERGING",t.REBASING="REBASING",t.REVERTING="REVERTING",t.CHERRY_PICKING="CHERRY_PICKING",t.APPLYING_MAILBOX="APPLYING_MAILBOX",t.BISECTING="BISECTING",t.INDEX_LOCKED="INDEX_LOCKED",t.CONFIG_LOCKED="CONFIG_LOCKED",t.DIRTY_WORKTREE="DIRTY_WORKTREE",t.DIRTY_INDEX="DIRTY_INDEX",t.CLEAN="CLEAN",t.DETACHED_HEAD="DETACHED_HEAD",t.HEAD_MISSING="HEAD_MISSING",t.TREE_CORRUPTED="TREE_CORRUPTED",t);r.Type.Enum(i);var a=((n={}).INITIALIZING="INITIALIZING",n.INTERMEDIATE="INTERMEDIATE",n.NORMAL="NORMAL",n.DETACHED_HEAD="DETACHED_HEAD",n.HEAD_MISSING="HEAD_MISSING",n);r.Type.Enum(a),e.s(["GitRepositoryState",()=>i,"GitRepositoryStateType",()=>a])},82382,405146,630162,715571,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(276385),i=e.i(389959),a=e.i(10581),o=e.i(352740),s=e.i(993796),l=e.i(597865),u=e.i(690140),c=e.i(480028),d=e.i(625484);function f(e){var s=e.presentation,f=(0,l.default)(function(e){return(0,t._)(function(){var t,r,i,o;return(0,n._)(this,function(n){switch(n.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=n.sent()).error)return[2,t];if(r=t.type,i=null,r===a.GitRepositoryStateType.INITIALIZING)return[3,3];return[4,e.status()];case 2:if((o=n.sent()).error)return[2,o];i=o,n.label=3;case 3:return[2,{branchName:null==i?void 0:i.branch,error:null}]}})})()}),p=!f||f.error?null:f.branchName,h=(0,u.useSetTooltip)();return(0,i.useEffect)(function(){h("compact"===s&&p?p:null)},[h,s,p]),p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.default,{color:c.tokens.foregroundDimmer,size:12}),"compact"===s?null:(0,r.jsx)(d.View,{children:p})]}):null}function p(e){return(0,s.useFlag)({controlName:"flag-status-bar-branch",logFlagToAnalytics:!1})?{item:(0,r.jsx)(f,{}),onClick:e,key:"currentBranch"}:null}e.s(["useCurrentBranchItem",()=>p],82382);var h=e.i(672199);e.i(508987);var m=e.i(457103),g=e.i(555970),x=e.i(703613),y=e.i(564169);function b(e){if(e.facet(g.Initializing))return"";var t=e.selection,n="",r=0;if(t.ranges.length>1){r=t.ranges.reduce(function(e,t){return e+(t.to-t.from)},0);var i=t.ranges.length;n="".concat(i," selections")}else{var a=t.ranges[0],o=e.doc.lineAt(a.head),s=a.head-o.from;r=a.to-a.from,n="Ln ".concat(o.number,", Col ").concat(s+1)}return r>0&&(n+=" (".concat(r," chars)")),n}function w(e){var t=e.view,n=(0,i.useRef)(null);return(0,i.useEffect)(function(){var e,r=n.current,i=null!=(e=t.plugin(x.StateListenerPlugin))?e:null;if(r&&i&&!i.destroyed){var a=null,o=t.state;r.textContent=b(o);var s=i.bind({changed:function(e){return(0,m.hasChanged)(e,"selection",g.Initializing)},callback:function(e){o=e.state,null===a&&(a=requestAnimationFrame(function(){a=null,r.textContent=o?b(o):""}))}});return function(){s(),null!==a&&cancelAnimationFrame(a),r.textContent=""}}},[t]),(0,r.jsx)("span",{ref:n,"data-cy":"current-position"})}function _(){var e=(0,y.useCodeEditorView)();return e?{item:(0,r.jsx)(w,{view:e}),onClick:function(){return(0,h.gotoLine)(e)},key:"currentPosition"}:null}e.s(["useCurrentPositionItem",()=>_],405146);var k=e.i(271280);function S(e){var t=e.presentation,n=(0,u.useSetTooltip)();return(0,i.useEffect)(function(){n("compact"===t?"History":null)},[n,t]),(0,r.jsxs)(r.Fragment,{children:["compact"===t?null:(0,r.jsx)(d.View,{children:"History"}),(0,r.jsx)(k.default,{size:12})]})}function C(e){var t=e.filePath,n=e.performPaneOperation,a=(0,i.useCallback)(function(){n({operation:"replace",pane:{type:"history",data:{path:t}}})},[n,t]);return{item:(0,r.jsx)(S,{}),key:"history",onClick:a}}e.s(["useHistoryItem",()=>C],630162);var j=e.i(753950),T=e.i(348320),E=e.i(963323);function R(e,t,n){var r=[],i=0,a=!0,o=!1,s=void 0;try{for(var l,u=e.iterLines()[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=i;if(i=i+c.length+1,0!==c.length){var f=(0,E.numColumns)(c,t),p=c.trimStart(),h=d+(c.length-p.length);if(0!==f&&d!==h){var m="";if(n===T.IndentationType.TABS){var g=Math.floor(f/t),x=f%t;m="	".repeat(g)+" ".repeat(x)}else n===T.IndentationType.SPACES&&(m=" ".repeat(f));m+p!==c&&r.push({from:d,to:h,insert:m})}}}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return j.ChangeSet.of(r,e.length)}function I(e,t,n,r){if(t===T.IndentationType.TABS)return j.ChangeSet.empty(e.length);var i=" ".repeat(r),a=[],o=0,s=!0,l=!1,u=void 0;try{for(var c,d=e.iterLines()[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value,p=o;if(o=o+f.length+1,0!==f.length){var h=(0,E.numColumns)(f,n),m=f.trimStart(),g=p+(f.length-m.length);if(0!==h&&p!==g){var x=Math.floor(h/n),y=h%n,b=i.repeat(x)+" ".repeat(y);b+m!==f&&a.push({from:p,to:g,insert:b})}}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return j.ChangeSet.of(a,e.length)}e.s(["convertIndentationSizeChangeSet",()=>I,"convertIndentationTypeChangeSet",()=>R],715571)},683426,810206,641209,808229,13362,e=>{"use strict";var t=e.i(878420),n=e.i(276385),r=e.i(389959),i=e.i(529810),a=e.i(479166),o=e.i(690140),s=e.i(798705),l=e.i(142914),u=e.i(82382),c=e.i(405146),d=e.i(630162),f=e.i(64386),p=e.i(886513),h=e.i(530658),m=e.i(346715),g=e.i(486701),x=e.i(753950),y=e.i(715571),b=e.i(716343),w=e.i(348320),_=e.i(555970),k=e.i(703613),S=e.i(183035),C=e.i(116235),j=e.i(269848),T=e.i(820228),E=e.i(255701),R=e.i(879990),I=e.i(416298),A=e.i(205104),P=e.i(61524),D=e.i(556088),O=e.i(721281),N=e.i(446530),M=e.i(613355),L=e.i(428596),B=e.i(965153),V=e.i(960178),F=e.i(625484),U="@container (max-width: 480px)",G=(0,N.cssRecord)({wrapper:[(0,O._)({},U,[M.rcss.colWithGap(8),M.rcss.align.start])]});function $(e){var t=e.id,i=e.title,a=e.children,o=e.variant,s=(0,L.useIdSeed)()(t),l="default"===(void 0===o?"default":o);return(0,n.jsxs)(F.View,{css:G.wrapper,gap:8,row:l,justify:l?"space-between":void 0,align:l?"center":void 0,children:[(0,n.jsx)(F.View,{grow:!0,shrink:!0,tag:"label",htmlFor:s,children:"string"==typeof i?(0,n.jsx)(V.Text,{multiline:!1,children:i}):i}),(0,r.cloneElement)(a,{id:s})]})}function H(e){var t=e.title,i=e.defaultExpanded,a=e.children,o=(0,h._)((0,r.useState)(void 0!==i&&i),2),s=o[0],l=o[1];return(0,n.jsx)(B.AccordionItem,{headerContent:(0,n.jsx)(V.Text,{variant:"subheadDefault",children:t}),expanded:s,onClick:function(){return l(!s)},children:(0,n.jsx)(F.View,{p:4,gap:12,children:a})})}e.s(["COLUMN_LAYOUT_BREAKPOINT",()=>U,"CollapsibleSection",()=>H,"Section",()=>$],810206);var z=e.i(140487),W=e.i(85742),q=e.i(624782),K=e.i(12034),Y=e.i(112767),Q=(0,N.cssRecord)({select:[M.rcss.minWidth(200),{button:{border:"0 none"}}],wrapper:[M.rcss.rowWithGap(8),M.rcss.align.center,(0,O._)({},U,[M.rcss.flex.rowReverse])],rightComponentWrapper:(0,O._)({},U,[M.rcss.ml(8)]),titleHeading:[M.rcss.center,M.rcss.justify.start],staffOnlyPill:[M.rcss.height(18)]});function X(e){var t=e.children,r=e.settingName,i=e.settingDescription,a=e.settingId,o=e.title,s=e.rightComponent,l=e.isStaffOnly,u=o;return o||(u=i?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(F.View,{css:Q.titleHeading,row:!0,gap:8,children:[(0,n.jsx)(V.Text,{multiline:!1,children:r}),l?(0,n.jsx)(q.Pill,{css:Q.staffOnlyPill,text:"Staff-only",colorway:"warning"}):null]}),(0,n.jsx)(V.Text,{variant:"small",color:"dimmest",children:i})]}):(0,n.jsx)(V.Text,{multiline:!1,children:r})),(0,n.jsx)($,{id:a,title:u,children:(0,n.jsxs)(F.View,{css:Q.wrapper,children:[s?(0,n.jsx)(F.View,{css:Q.rightComponentWrapper,children:s}):null,t]})})}function Z(e){var t=e.setting,r=e.currentValue,i=e.update,a=e.rightComponent,o=e.filterOptions,s=e.title;if("select"===t.type){var l,u=o?t.options.filter(o):t.options;return(0,n.jsx)(X,{settingName:t.name,settingDescription:t.description,settingId:t.id,title:s,rightComponent:a,children:(0,n.jsx)(K.Select,{"aria-label":t.name,style:{marginRight:0},items:u,defaultSelectedKey:null==(l=u.find(function(e){return r===e.editorPreferencesValue}))?void 0:l.id,onSelectionChange:function(e){var n;if("string"!=typeof t.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");i((0,O._)({},t.editorPreferencesKey,null==(n=u.find(function(t){return t.id===e}))?void 0:n.editorPreferencesValue))},css:Q.select,dataCy:t.id,children:function(e){return(0,n.jsx)(W.ListBoxItem,{id:e.id,label:e.title,dataCy:e.id,fixedHeight:32},e.id)}})})}if("boolean"===t.type)return(0,n.jsx)(X,{settingName:t.name,settingDescription:t.description,settingId:t.id,title:s,rightComponent:a,children:(0,n.jsx)(Y.Switch,{"aria-label":t.name,isSelected:r,onChange:function(e){if("string"!=typeof t.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");i((0,O._)({},t.editorPreferencesKey,e))},dataCy:t.id})});throw Error("Unsupported setting type")}e.s(["EditorSettingBox",()=>Z],641209);var J=e.i(988676),ee=e.i(607278),et=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],en=(0,N.cssRecord)({sizeInput:[M.rcss.py(6),M.rcss.flex.growAndShrink(0),{border:"none"}]});function er(){var e=(0,P.usePreferences)("indentDetection","indentFormatPastes","indentIsSpaces","indentSize"),t=e.preferences,r=e.update;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Z,{setting:D.userPreferences.indentationDetection,currentValue:t.indentDetection,update:r}),(0,n.jsx)(J.DividerH,{}),(0,n.jsx)(Z,{setting:D.userPreferences.indentFormatPastes,currentValue:t.indentFormatPastes,update:r}),(0,n.jsx)(J.DividerH,{}),(0,n.jsx)(Z,{setting:D.userPreferences.indentIsSpaces,currentValue:t.indentIsSpaces,update:r}),(0,n.jsx)(J.DividerH,{}),(0,n.jsx)($,{id:"indentSize",title:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V.Text,{multiline:!1,children:"Indentation Size"}),(0,n.jsx)(V.Text,{variant:"small",color:"dimmest",children:"The number of columns taken up by an indentation level."})]}),children:(0,n.jsx)(ea,{css:en.sizeInput,size:t.indentSize,onChange:function(e){r({indentSize:e})}})})]})}function ei(e){return null==e||("string"==typeof e&&(e=parseInt(e,10)),isNaN(e))?2:(Number.isInteger(e)||(e=Math.round(e)),e<1)?1:e>16?16:e}function ea(e){var t=e.size,i=e.onChange,a=e.className,o=(0,h._)((0,r.useState)(null),2),s=o[0],l=o[1],u=null!==s?s:t.toString(),c=""===u?"6ch":u.length+5.5+"ch";return(0,n.jsx)(ee.Input,{type:"number",style:{width:c},className:a,min:1,max:16,value:u,onBlur:function(){return l(null)},onChange:function(e){var t=e.target.value.trim(),n=e.target.valueAsNumber;""===t||isNaN(n)?l(t):e.target.validity.valid?(l(null),i(ei(n))):(l(t),""===t||isNaN(parseInt(t,10))||i(ei(t)))}})}e.s(["IndentationSizeInput",()=>ea,"default",()=>er,"indentTypeItems",()=>et],808229);var eo=e.i(564169),es=e.i(480028),el=e.i(630818),eu=e.i(396776),ec=e.i(679668),ed=(0,N.cssRecord)({menu:[M.rcss.maxWidth(410)],file:[M.rcss.pl(4),M.rcss.display.inlineFlex,M.rcss.rowWithGap(4),M.rcss.align.center,{verticalAlign:"top"}],section:[M.rcss.rowWithGap(8),M.rcss.align.center,M.rcss.justify.spaceBetween],header:[M.rcss.colWithGap(2),M.rcss.flex.shrink(1)],sizeInput:{border:"none"}});function ef(e){var t,i=e.filePath,a=e.openSettings,o=(0,P.usePreferences)("indentDetection","indentSize").preferences,s=(0,eo.useCodeEditorView)(),l=(0,k.useCodeMirrorValue)(s,_.Initializing),u=null!==l&&!!o.indentDetection&&l,c=(0,k.useCodeMirrorValue)(s,b.FileTypeIndentationType),d=(0,k.useCodeMirrorValue)(s,b.DetectedIndentation),f=(0,k.useCodeMirrorValue)(s,b.CanDetectIndentation),p=null!=(t=(0,k.useCodeMirrorValue)(s,x.EditorState.tabSize))?t:o.indentSize,C="	"===(0,k.useCodeMirrorValue)(s,g.indentUnit)?w.IndentationType.TABS:w.IndentationType.SPACES,j=(0,h._)((0,r.useState)(!1),2),D=j[0],O=j[1],N=(0,h._)((0,r.useState)(C),2),M=N[0],L=N[1],B=(0,h._)((0,r.useState)(p),2),U=B[0],G=B[1],$=(0,h._)((0,r.useState)(!1),2),H=$[0],W=$[1],q=(0,h._)((0,r.useState)(!1),2),K=q[0],Y=q[1],Q=(0,h._)((0,r.useState)(!1),2),X=Q[0],Z=Q[1],ee=(0,h._)((0,r.useState)(!1),2),en=ee[0],er=ee[1];(0,r.useEffect)(function(){H||(L(C),G(p))},[C,p,H]),(0,r.useEffect)(function(){D||(L(C),G(p),W(!1))},[D,C,p]),(0,r.useEffect)(function(){M===C&&U===p&&W(!1)},[M,U,C,p]),(0,r.useEffect)(function(){if(K||X||en){var e=setTimeout(function(){Y(!1),Z(!1),er(!1)},1e3);return function(){return clearTimeout(e)}}},[K,X,en]),u&&D&&O(!1);var ei=(0,r.useCallback)(function(){if(s){var e=(0,y.convertIndentationTypeChangeSet)(s.state.doc,p,C);s.dispatch({changes:e,effects:b.forceIndentationDetection.of(!0)}),Z(!0)}},[s,C,p]),es=(0,r.useCallback)(function(){s&&(s.dispatch({effects:b.forceIndentationDetection.of(!0)}),s.state.field(b.DetectedIndentation)&&s.dispatch({effects:b.setIndentationOverride.of({type:void 0,size:void 0})}),er(!0))},[s]),ef=(0,r.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(s){var t=void 0,n=[b.setIndentationOverride.of({type:M,size:U})];if(e){if(M!==C&&(t=(0,y.convertIndentationTypeChangeSet)(s.state.doc,p,M)),M===w.IndentationType.SPACES&&U!==p){var r=t?t.apply(s.state.doc):s.state.doc,i=(0,y.convertIndentationSizeChangeSet)(r,M,p,U);t=t?t.compose(i):i}t&&n.push(b.forceIndentationDetection.of(!0))}s.dispatch({changes:t,effects:n}),W(!1),Y(!0)}},[s,C,p,M,U]),ep=(0,r.useCallback)(function(){O(!1),a()},[a]),eh=(0,r.useMemo)(function(){if(d){var e=d.size,t=d.type===w.IndentationType.SPACES?"spaces":"tabs";return"This file appears to use a unit of ".concat(e," ").concat(t,".")}return f?"Indentation detection hasn't been run on this file yet.":"This file is too small for indentation detection."},[d,f]);return(0,n.jsxs)(F.View,{css:ed.menu,p:8,gap:8,children:[(0,n.jsxs)(V.Header,{level:1,children:["Indentation for",(0,n.jsxs)("span",{css:ed.file,children:[(0,n.jsx)(el.default,{path:i,size:16})," ",(0,n.jsx)("span",{children:(0,A.getFileName)(i)})]})]}),c?(0,n.jsx)(eu.StatusBanner,{colorway:"warning",icon:(0,n.jsx)(I.default,{}),text:"This file type requires that ".concat(c===w.IndentationType.SPACES?"spaces":"tabs"," be used for indentation.")}):null,(0,n.jsx)(J.DividerH,{}),(0,n.jsxs)(F.View,{css:ed.section,children:[(0,n.jsxs)(F.View,{css:ed.header,children:[(0,n.jsx)(V.Text,{multiline:!1,children:"Indentation unit"}),(0,n.jsx)(V.Text,{variant:"small",color:"dimmer",children:"The size and character to use when indenting lines."})]}),(0,n.jsxs)(F.View,{row:!0,gap:4,children:[(0,n.jsx)(ea,{css:ed.sizeInput,size:U,onChange:function(e){e!==U&&(G(e),W(!0))}}),(0,n.jsx)(ec.Select,{"aria-label":"Select indentation type",items:(0,m._)(et),selectedItem:et.find(function(e){return e.value===(M===w.IndentationType.SPACES?"spaces":"tabs")}),onChange:function(e){var t=(null==e?void 0:e.value)==="spaces"?w.IndentationType.SPACES:w.IndentationType.TABS;t!==M&&(L(t),W(!0))}})]})]}),(0,n.jsx)(J.DividerH,{}),o.indentDetection?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(F.View,{css:ed.section,children:[(0,n.jsxs)(F.View,{css:ed.header,children:[(0,n.jsx)(V.Text,{multiline:!1,children:"Detected indentation unit"}),(0,n.jsx)(V.Text,{variant:"small",color:"dimmer",children:eh})]}),en?(0,n.jsx)(z.Button,{colorway:"positive",text:"Detected!",iconLeft:(0,n.jsx)(S.default,{}),onClick:es}):(0,n.jsx)(z.Button,{text:d?"Re-detect":"Detect",iconLeft:(0,n.jsx)(T.default,{}),disabled:!f&&!d,onClick:es})]}),(0,n.jsx)(J.DividerH,{})]}):null,(0,n.jsxs)(F.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,n.jsx)(z.Button,{text:"Global settings",iconLeft:(0,n.jsx)(E.default,{}),onClick:ep}),(0,n.jsx)(F.View,{row:!0,gap:4,children:K||X?(0,n.jsx)(n.Fragment,{children:K?(0,n.jsx)(z.Button,{text:"Saved!",colorway:"positive",iconLeft:(0,n.jsx)(S.default,{}),onClick:function(){return ef(!1)}}):(0,n.jsx)(z.Button,{text:"Re-indented!",colorway:"positive",iconLeft:(0,n.jsx)(S.default,{}),onClick:ei})}):(0,n.jsx)(n.Fragment,{children:H?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.Button,{text:"Save and re-indent",colorway:"primary",iconLeft:(0,n.jsx)(R.default,{}),onClick:function(){return ef(!0)}}),(0,n.jsx)(z.Button,{text:"Save",iconLeft:(0,n.jsx)(S.default,{}),onClick:function(){return ef(!1)}})]}):(0,n.jsx)(z.Button,{text:"Re-indent file",iconLeft:(0,n.jsx)(R.default,{}),onClick:ei})})})]})]})}function ep(e){var t,i=e.presentation,a=(0,P.usePreferences)("indentDetection","indentSize").preferences,s=(0,eo.useCodeEditorView)(),l=(0,k.useCodeMirrorValue)(s,_.Initializing),u=null!==l&&!!a.indentDetection&&l,c=null!=(t=(0,k.useCodeMirrorValue)(s,x.EditorState.tabSize))?t:a.indentSize,d="	"===(0,k.useCodeMirrorValue)(s,g.indentUnit)?w.IndentationType.TABS:w.IndentationType.SPACES,f=(0,o.useSetTooltip)();return(0,r.useEffect)(function(){f("File Indentation")},[f]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(em,{type:d,loading:u}),"compact"===i?null:(0,n.jsx)(eg,{type:d,size:c,loading:u})]})}function eh(e){var r=e.size,i=void 0===r?16:r,a=(0,p._)(e,["size"]);return(0,n.jsx)(C.default,(0,f._)((0,t._)({size:i},a),{children:(0,n.jsx)("circle",{cx:i,cy:i,r:i/2,fillRule:"evenodd"})}))}function em(e){var t=e.type;return e.loading?(0,n.jsx)(j.default,{size:12}):t===w.IndentationType.SPACES?(0,n.jsx)(eh,{color:es.tokens.foregroundDimmer,size:12}):(0,n.jsx)(R.default,{color:es.tokens.foregroundDimmer,size:12})}function eg(e){var t=e.type,r=e.size;if(e.loading)return(0,n.jsx)(V.Text,{variant:"small",color:"dimmest",children:"Detecting..."});var i=t===w.IndentationType.SPACES?"Spaces":"Tabs";return(0,n.jsxs)(V.Text,{variant:"small",color:"dimmer",children:[i,": ",r]})}var ev=e.i(333859),ex=e.i(97149),ey=e.i(546284),eb=e.i(485237),ew=e.i(214989),e_=(0,N.cssRecord)({group:[M.rcss.align.center,M.rcss.rowWithGap(4)]});function ek(e){var t,i,a,s,l,u,c,d=e.filePath,f=e.presentation,p=(t=d,a=(i=(0,h._)((0,r.useState)(null),2))[0],s=i[1],l=(0,eb.default)(t),(0,r.useEffect)(function(){var e=function(e){if(e.path===t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=l[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var c=o.value;c.isOpen(t)&&n.push.apply(n,(0,m._)(c.getDiagnostics(e.path)))}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}s(n)}},n=[],r=!0,i=!1,a=void 0;try{for(var o,u=l[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var c=o.value;c.isOpen(t)&&n.push.apply(n,(0,m._)(c.getDiagnostics(t)))}}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}s(n);var d=[],f=!0,p=!1,h=void 0;try{for(var g,x=l[Symbol.iterator]();!(f=(g=x.next()).done);f=!0){var y=g.value;d.push(y.onDiagnostics(function(t){return e(t)}))}}catch(e){p=!0,h=e}finally{try{f||null==x.return||x.return()}finally{if(p)throw h}}return function(){d.forEach(function(e){return e()})}},[l,t]),a),g=(0,r.useMemo)(function(){var e,t;return p?(t=(e=p).reduce(function(e,t){return void 0===t.severity||(e[t.severity]=(e[t.severity]||0)+1),e},{}),e.length>0&&0===Object.keys(t).length&&(t[ev.DiagnosticSeverity.Error]=e.length),t):null},[p]),x=g&&null!=(u=g[ev.DiagnosticSeverity.Error])?u:0,y=g&&null!=(c=g[ev.DiagnosticSeverity.Warning])?c:0,b=null===g,w=(0,o.useSetTooltip)();return((0,r.useEffect)(function(){if(b)return void w(null);var e="";0===x&&0===y&&(e="No problems"),x>0&&(e+="".concat((0,ey.default)("Error",x),": ").concat(x)),y>0&&(e.length>0&&(e+=", "),e+="".concat((0,ey.default)("Warning",y),": ").concat(y)),w(e)},[w,f,b,y,x]),g)?(0,n.jsxs)(F.View,{align:"center",row:!0,gap:8,children:[(0,n.jsxs)(F.View,{css:e_.group,children:[(0,n.jsx)(ew.default,{severity:ev.DiagnosticSeverity.Error,size:12}),"compact"===f?null:(0,n.jsx)(V.Text,{color:"dimmer",variant:"small",multiline:!1,children:String(x)})]}),(0,n.jsxs)(F.View,{css:e_.group,children:[(0,n.jsx)(ew.default,{severity:ev.DiagnosticSeverity.Warning,size:12}),"compact"===f?null:(0,n.jsx)(V.Text,{color:"dimmer",variant:"small",multiline:!1,children:String(y)})]})]}):null}var eS=e.i(403781);function eC(e){return(0,n.jsxs)(C.default,(0,f._)((0,t._)({},e),{children:[(0,n.jsx)("path",{d:"M15 16.25a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h6ZM12 6.25a.75.75 0 0 1 .75.75v2.25H15a.75.75 0 0 1 0 1.5h-2.25V13a.75.75 0 0 1-1.5 0v-2.25H9a.75.75 0 0 1 0-1.5h2.25V7a.75.75 0 0 1 .75-.75Z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M14 1.25a3.152 3.152 0 0 1 2.234.926l3.586 3.586A3.156 3.156 0 0 1 20.75 8v12A2.75 2.75 0 0 1 18 22.75H6A2.75 2.75 0 0 1 3.25 20V4A2.75 2.75 0 0 1 6 1.25h8Zm-8 1.5A1.25 1.25 0 0 0 4.75 4v16A1.25 1.25 0 0 0 6 21.25h12A1.25 1.25 0 0 0 19.25 20V7.999a1.651 1.651 0 0 0-.486-1.173l-3.591-3.59A1.65 1.65 0 0 0 14 2.75H6Z",clipRule:"evenodd"})]}))}e.s(["default",()=>eC],13362);var ej=e.i(993796);function eT(e){var t=e.presentation,i=e.toggled?"Diffing":"Diff",a=(0,o.useSetTooltip)();return(0,r.useEffect)(function(){a("compact"===t?i:null)},[a,t,i]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eC,{color:es.tokens.foregroundDimmer,size:12}),"compact"===t?null:(0,n.jsx)(F.View,{children:i})]})}var eE=e.i(913965);function eR(e){return(0,n.jsx)(eE.default,(0,f._)((0,t._)({},e),{children:(0,n.jsx)("path",{fill:"#009118",fillRule:"evenodd",d:"m15.09 2-.29.29v1.066l.254.255h1.342v1.03L7.52 13.65V3.624h1.475l.303-.304V2.242l-.28-.217H1.255L1 2.28v1.102l.258.258h1.35v18.465l.255.254h1.534l6.467-6.682a.512.512 0 0 1 .006-.016l.335-.939a.49.49 0 0 1 .142-.207l.32-.275a.49.49 0 0 1 .32-.118h.383L23 3.138V2.29L22.71 2h-7.62Zm-3.273 12.693-.183.157-.01.008-.004.012-.014.041-.331.928.25.25h1.083l.274-.276.301-1.035-.215-.215h-1l-.15.13Zm-1.871 2.714-.12.48h.774l-1.66 4.745h2.288l.133-.43h-.65l1.642-4.795H9.946Zm7.498.017-.514.583h-.885l-.546-.566h-1.826l-.149.445h.617l-1.592 4.695h1.914l.129-.38h-.46l1.065-3.355h2.039l-1.164 3.735h1.847l.143-.344h-.457l1.082-3.408h1.953l-1.181 3.752h2.034l.145-.38h-.528l1.31-4.257-.373-.503h-1.473l-.497.547h-.936l-.514-.564h-1.183Z",clipRule:"evenodd"})}))}var eI=(0,N.cssRecord)({text:[{textTransform:"capitalize"}]});function eA(t){var i=t.presentation,a=(0,h._)((0,r.useState)(null),2),s=a[0],l=a[1],u=(0,r.useRef)(null),c=(0,r.useRef)(null),d=(0,o.useSetTooltip)(),f=(0,eo.useCodeEditorView)(),p=(0,P.usePreferences)("keyboardHandler").preferences,m=(null==p?void 0:p.keyboardHandler)==="vim",g=(0,r.useCallback)(function(e){var t=null!=e?e:"";if(f&&s&&void 0===e){var n,r,a=s.getCM(f);t=null!=(r=null==a||null==(n=a.state.vim)?void 0:n.mode)?r:"normal"}d("compact"===i?t:null),c.current=t,u.current&&u.current.innerText!==t&&(u.current.innerText=t||"")},[f,s,d,i]);return(0,r.useEffect)(function(){m&&!s&&e.A(441994).then(function(e){l(e),g()})},[m,s,g]),(0,r.useEffect)(function(){if(f&&m&&s){var e,t=u.current,n=null!=(e=f.plugin(k.StateListenerPlugin))?e:null;if(t&&n&&!n.destroyed)return n.bind({changed:function(){var e,t,n=s.getCM(f),r=null!=(t=null==n||null==(e=n.state.vim)?void 0:e.mode)?t:"";return c.current!==r},callback:function(){g()}})}},[f,m,s,g]),m?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eR,{size:12}),"compact"===i?null:(0,n.jsx)("span",{css:eI.text,ref:u})]}):null}var eP=(0,N.cssRecord)({root:[{borderTop:"1px solid ".concat(es.tokens.backgroundHigher)},{height:"29px",contain:"strict"}]}),eD=(0,r.memo)(function(e){var t,i,l,f,p,h,m,g,x,y,b,w,_,S=e.filePath,C=e.performPaneOperation,j=(0,r.useCallback)(function(e){return C({operation:"open",pane:e,secondary:!0})},[C]),T=(0,r.useCallback)(function(){return j({type:"preferences"})},[j]),E=(0,a.useAiItem)(),R=(0,s.useCodeIntelligence)({filePath:S,openSettings:T}),I=(t=(0,eo.useCodeEditorView)(),{item:(0,n.jsx)(ek,{filePath:S}),onClick:t?function(){return(0,ex.toggleLintPanel)(t)}:void 0,key:"lspDiagnostics"}),A=(0,u.useCurrentBranchItem)(function(){return j({type:"git"})}),P=(i=(0,ej.useFlag)({controlName:"flag-editor-git-inline-diff",logFlagToAnalytics:!1}),g=(l=(0,eo.useCodeEditorView)(),f=(0,k.useCodeMirrorValue)(l,eS.GitDiffState),p=!l||!f||null===f.head,h=(null==f?void 0:f.mode)===eS.GitDiffMode.INLINE_DIFF,m={toggle:(0,r.useCallback)(function(){if(!l)return null;l.dispatch({effects:eS.setGitDiffMode.of(h?eS.GitDiffMode.GUTTER_DIFF:eS.GitDiffMode.INLINE_DIFF)})},[l,h]),toggled:h,disabled:p}).toggle,x=m.toggled,y=m.disabled,i&&!y?{item:(0,n.jsx)(eT,{toggled:x}),onClick:g,key:"toggleDiff"}:null),D={item:(0,n.jsx)(eA,{}),key:"vimMode"},O=(0,c.useCurrentPositionItem)(),N=(0,d.useHistoryItem)({filePath:S,performPaneOperation:C}),M=(w=(b={filePath:S,openSettings:T}).filePath,_=b.openSettings,{item:(0,n.jsx)(ep,{}),popover:(0,n.jsx)(ef,{filePath:w,openSettings:_}),key:"indentation"});return(0,n.jsx)(o.CodeEditorStatusBar,{css:eP.root,left:[E,R,I,A,P,D],right:[O,M,N]})});function eO(e){var r=(0,i.default)().lspnix;return(0,n.jsx)(l.CodeIntelligenceStatusProvider,{filePath:e.filePath,lspnix:r,children:(0,n.jsx)(eD,(0,t._)({},e))})}e.s(["CodeEditorStatusBarWithLSP",()=>eO],683426)},493602,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(82259),i=e.i(10681),a=e.i(698053),o=e.i(62424),s=e.i(482070),l=e.i(109853),u=e.i(683426),c=e.i(151386),d=e.i(417120),f=e.i(446530),p=e.i(613355),h=e.i(625484),m=(0,f.cssRecord)({root:[p.rcss.position.relative,p.rcss.flex.column,p.rcss.overflowY("hidden"),p.rcss.width("100%"),p.rcss.height("100%")]});function g(e){var f=(0,n.useRef)(null),p=(0,a.default)(),g=(0,d.useAgentRunState)(),x=g===r.AgentRunState.AGENT_STATE_RUNNING||g===r.AgentRunState.AGENT_STATE_PAUSING,y=(0,c.useFilePaneFlag)();return(0,t.jsxs)(h.View,{innerRef:f,css:m.root,children:[y?null:(0,t.jsx)(o.CodeEditorHeader,{performPaneOperation:e.performPaneOperation,path:e.filePath,isReadOnly:x}),(0,t.jsx)("div",{css:l.CodeMirrorEditorStyleRoot,children:(0,t.jsx)(s.default,{filePath:e.filePath,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,isReadOnly:x,isReadOnlyWhileAgentWorking:x,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated,performPaneOperation:e.performPaneOperation})}),(0,t.jsx)("div",{style:{display:p?"none":"block"},children:(0,t.jsx)(u.CodeEditorStatusBarWithLSP,{filePath:e.filePath,performPaneOperation:e.performPaneOperation})}),e.hideMobileKeyboardToolbar?null:(0,t.jsx)(i.default,{filePath:e.filePath,isLoading:!1})]})}e.s(["default",()=>g])},800633,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(389959),i=e.i(416298),a=e.i(903381),o=e.i(529810),s=e.i(446530),l=e.i(613355),u=e.i(396776),c=e.i(625484);function d(e){var n=e.path,i=e.replaceEditorPath,s=e.getFileRenameInProgress,l=(0,o.default)().fs,u=(0,t._)((0,r.useState)(null),2),c=u[0],d=u[1];return(0,r.useEffect)(function(){if(n){if(n.startsWith("/"))return d('Cannot open "'.concat(n,'"')),function(){d(null)};var e=l.watchPathStat(n,{onNewStat:function(e){var t=s();e.exists?e.type===a.FileType.Directory?d('"'.concat(n,'" is a directory')):d(null):(null==t?void 0:t.from)===n?i(t.to):d('No file found at "'.concat(n,'", it may have been deleted'))},onError:function(){d('Unknown error occured while read "'.concat(n,'", try re-opening the editor'))}});return function(){e(),d(null)}}},[s,l,n,i]),c}var f=(0,s.cssRecord)({root:[l.rcss.coverContainer,l.rcss.center,l.rcss.p(16)]});function p(e){var t=e.message;return(0,n.jsx)(c.View,{css:f.root,children:(0,n.jsx)(c.View,{children:(0,n.jsx)(u.StatusBanner,{icon:(0,n.jsx)(i.default,{}),colorway:"orange",text:t})})})}e.s(["WatchFileErrorMessage",()=>p,"useWatchFileError",()=>d])},162540,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(530658),i=e.i(346715),a=e.i(276385),o=e.i(389959),s=e.i(960933),l=e.i(862927),u=e.i(541793),c=e.i(486701),d=e.i(682532),f=e.i(893255);e.i(440545);var p=e.i(214705),h=e.i(915599),m=e.i(496216),g=e.i(703613),x=e.i(652898),y=e.i(927600),b=e.i(708545),w=e.i(712771),_=e.i(979530),k=e.i(919061),S=e.i(271280),C=e.i(543829),j=e.i(477126),T=e.i(205104),E=e.i(61524),R=e.i(125674),I=e.i(441329),A=e.i(493602),P=e.i(106020),D=e.i(185511),O=e.i(800633),N=e.i(181227),M=e.i(564169);e.i(282890);var L=e.i(716636);e.i(545082);var B=e.i(91442),V=e.i(423111),F=e.i(259493),U=e.i(965863),G=e.i(630818),$=s.Type.Object({type:s.Type.Literal("codeEditor"),data:s.Type.Object({path:s.Type.Union([s.Type.String({minLength:1}),s.Type.Null()]),line:s.Type.Optional(s.Type.Number()),col:s.Type.Optional(s.Type.Number())})}),H={Content:function(e){var r=e.pane,i=e.options;return(0,a.jsx)(W,(0,n._)((0,t._)({},r.data),{isActive:i.isActive,isHidden:i.isHidden,performPaneOperation:i.performPaneOperation}))},Icon:function(e){var t=e.pane,n=e.size;return(0,a.jsx)(G.default,{path:t.data.path||"",size:n})},getTitle:function(e){return e.data.path?(0,T.getFileName)(e.data.path):"No file open"},category:L.PaneCategory.WorkspaceFeatures,decode:function(e){return l.Value.Decode($,e)}};function z(e){var t,n,r,s,l,u,A,O,N,L=e.path,V=e.performPaneOperation,G=(0,M.useCodeEditorView)(),$=(0,R.default)(function(){return G?{match:P.matchLabel,data:{type:"action",label:"Toggle all folds",icon:(0,a.jsx)(y.default,{}),run:function(){0===(0,c.foldedRanges)(G.state).size?(0,c.foldAll)(G):(0,c.unfoldAll)(G)}}}:null},[G]),H=(0,g.useCodeMirrorValue)(G,f.HasHadUserInput);(0,o.useEffect)(function(){H&&V({operation:"commit"})},[H,V]);var z=(0,D.useFileCommands)({path:L,performPaneOperation:V}),W=(t=(0,M.useCodeEditorView)(),n=(0,g.useCodeMirrorValue)(t,h.HasFormatter),(0,R.default)(function(){if(t&&n)return{match:P.matchLabel,data:{label:"Format "+(0,T.getFileName)(L),icon:(0,a.jsx)(k.default,{}),type:"action",run:function(){(0,p.FormatCommand)(t)}}}},[n,L,t])),q=(r=(0,I.useIsInMobileWorkspace)(),l=(s=(0,E.usePreferences)("minimapDisplay")).preferences.minimapDisplay,u=s.update,(0,R.default)(function(){return r?null:{match:P.matchLabel,data:{label:"Minimap",icon:(0,a.jsx)(x.default,{}),type:"context"},commands:function(e){var t=e.active,n=e.searchQuery;return t||n?[{value:"none",label:"Hide",icon:(0,a.jsx)(_.default,{})},{value:"characters",label:"Characters",icon:(0,a.jsx)(j.default,{})},{value:"blocks",label:"Blocks",icon:(0,a.jsx)(C.default,{})}].filter(function(e){return e.value!==l}).map(function(e){return{match:P.matchLabel,data:{type:"action",label:e.label,icon:e.icon,run:function(){u({minimapDisplay:e.value})}}}}):[]}}},[u,l,r])),K=(A=function(){return V({operation:"replace",pane:{type:"history",data:{path:L}}})},(0,R.default)(function(){return{match:P.matchLabel,data:{label:"History",icon:(0,a.jsx)(S.default,{}),type:"action",run:function(){A()}}}},[A])),Y=(O=(0,B.useGetCursorState)(),(0,R.default)(function(){var e=void 0;if((0,T.isMarkdownFile)(L)&&(e={type:"markdown",data:{path:L}}),(0,T.isSVGFile)(L)&&(e={type:"media",data:{path:L}}),(0,T.isCsvFile)(L)&&(e={type:"csvPreview",data:{path:L}}),e)return{match:P.matchLabel,data:{label:"Preview",icon:(0,a.jsx)(w.default,{}),type:"action",run:function(){if(e){if("csvPreview"===e.type){var t;e.data.line=null==(t=O())?void 0:t.position.line}V({operation:"replace",pane:e})}}}}},[O,L,V])),Q=(N=(0,U.useSetRevealFile)(),{match:P.matchLabel,data:{label:"Reveal in file tree",icon:(0,a.jsx)(b.default,{}),type:"action",run:function(){N(L)}}});return(0,F.useSetPaneBindings)(function(){if(G){var e=[],t=[],n=[];return W&&e.push(W),Y&&t.push(Y),q&&t.push(q),$&&t.push($),n.push(Q),n.push(K),z&&e.push.apply(e,(0,i._)(z)),{type:"codeEditor",commands:[{name:"File Operations",commands:e},{name:"View",commands:t},{name:"Navigation",commands:n}].filter(function(e){return e.commands.length>0}),getEditorView:function(){return G},getCurrentSelectionText:function(){if(!G.state.selection.main.empty)return G.state.sliceDoc(G.state.selection.main.from,G.state.selection.main.to)},fetchProblems:function(){return(0,d.forceLinting)(G),(0,m.getDiagnostics)(G.state)}}}},[G,W,Y,K,q,$,Q,z]),(0,F.useSetFocusTarget)(function(){return G},[G]),null}function W(e){var t=e.path,n=e.line,i=e.col,s=e.isHidden,l=e.performPaneOperation,c=(0,r._)((0,o.useState)(!s),2),d=c[0],f=c[1];d||s||f(!0);var p=(0,r._)((0,o.useState)(function(){return(0,u.createStore)()}),1)[0],h=(0,r._)((0,o.useState)(function(){return(0,u.createStore)()}),1)[0],m=(0,o.useCallback)(function(e){l({operation:"replace",pane:{type:"codeEditor",data:{path:e}}})},[l]),g=(0,V.useGetFileRenameInProgress)(),x=(0,O.useWatchFileError)({path:t,replaceEditorPath:m,getFileRenameInProgress:g}),y=(0,R.default)(function(){return{line:n,col:i}},[n,i]),b=(0,R.default)(function(){return function(){l({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})}},[l,t]);return t?x?(0,a.jsx)(O.WatchFileErrorMessage,{message:x}):s&&!d?null:(0,a.jsx)(M.CodeEditorViewContext.Provider,{value:p,children:(0,a.jsxs)(N.HistoryPaneContext.Provider,{value:h,children:[(0,a.jsx)(A.default,{filePath:t,isHidden:null!=s&&s,deeplink:y,onDeeplinkUpdated:b,hideMobileKeyboardToolbar:!0,performPaneOperation:l},t),(0,a.jsx)(z,{path:t,performPaneOperation:l})]})}):null}e.s(["PaneActions",()=>z,"codeEditorUI",()=>H])},676702,e=>{"use strict";var t=e.i(276385),n=e.i(960933),r=e.i(862927),i=e.i(914937),a=e.i(205104),o=e.i(297083),s=e.i(530658),l=e.i(817556),u=e.i(389959),c=e.i(830675),d=e.i(806930),f=e.i(269848),p=e.i(416298),h=e.i(903381),m=e.i(529810),g=e.i(106020),x=e.i(346715),y=e.i(143003),b=e.i(790486),w=e.i(415756),_=e.i(204977),k=e.i(650587),S=e.i(967629),C=e.i(480028),j=e.i(446530),T=e.i(613355),E=e.i(136540),R=e.i(51054),I=e.i(625484),A=(0,S.keyframes)({"0%":{backgroundColor:C.tokens.accentPrimaryDimmer},"100%":{backgroundColor:"transparent"}}),P=(0,j.cssRecord)({filter:[T.rcss.border({color:C.tokens.outlineDimmest,direction:"bottom"})],tableRoot:[T.rcss.flex.growAndShrink(1),T.rcss.width("100%"),T.rcss.overflow("auto"),{'&[data-resizing="true"]':{overflow:"hidden",pointerEvents:"none"}}],virtualTable:[T.rcss.width("fit-content"),T.rcss.position.relative],tableHeader:[T.rcss.display.flex,T.rcss.flex.row,T.rcss.backgroundColor.backgroundDefault,T.rcss.position.sticky,T.rcss.zIndex(1),T.rcss.top(0),T.rcss.noSelect],headerCell:[T.rcss.color.foregroundDefault,T.rcss.fontWeight.medium,T.rcss.fontSize(12),T.rcss.px(6),T.rcss.display.flex,T.rcss.align.center,T.rcss.border({color:C.tokens.outlineDimmest,direction:"bottom"}),T.rcss.border({color:C.tokens.outlineDimmest,direction:"right"}),{height:25,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:first-child":{background:C.tokens.backgroundDefault,position:"sticky",left:0,zIndex:1}}],tableRow:[T.rcss.flex.row,{'&[data-highlighted="true"]':{animation:"".concat(A," ").concat(2e3,"ms ease-out forwards")}}],tableCell:[T.rcss.display.flex,T.rcss.align.center,T.rcss.color.foregroundDimmer,T.rcss.fontSize(12),T.rcss.px(6),T.rcss.border({color:C.tokens.outlineDimmest,direction:"bottom"}),T.rcss.border({color:C.tokens.outlineDimmest,direction:"right"}),{height:25,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:first-child":{justifyContent:"center",position:"sticky",left:0,background:C.tokens.backgroundDefault}}],resizeHandle:[T.rcss.position.absolute,T.rcss.top(0),T.rcss.right(0),T.rcss.height("100%"),T.rcss.width(4),{cursor:"col-resize","&:hover":{backgroundColor:C.tokens.accentPrimaryDefault}}]}),D=function(e,t){var n=(0,s._)((0,u.useState)(e),2),r=n[0],i=n[1],a=(0,u.useMemo)(function(){return new w.AsyncFzf(e,{selector:function(e){return Object.values(e).join(" ")},casing:"case-insensitive"})},[e]);return(0,u.useEffect)(function(){t?a.find(t).then(function(e){i(e.map(function(e){return e.item}))}).catch(function(){}):i(e)},[e,a,t]),r},O=function(e){var t=(0,s._)((0,u.useState)(e),2),n=t[0],r=t[1],i=(0,s._)((0,u.useState)(null),2),a=i[0],o=i[1],l=(0,s._)((0,u.useState)(0),2),c=l[0],d=l[1],f=(0,s._)((0,u.useState)(0),2),p=f[0],h=f[1],m=(0,u.useCallback)(function(e,t){o(e),d(t.clientX),h(n[e])},[n]),g=(0,u.useCallback)(function(e){if(null!==a){var t=Math.max(50,Math.min(300,p+(e.clientX-c)));r(function(e){var n=(0,x._)(e);return n[a]=t,n})}},[a,p,c]),y=(0,u.useCallback)(function(){o(null)},[]);return(0,u.useEffect)(function(){if(null!==a){var e=function(e){return g(e)},t=function(){return y()};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),function(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}},[y,g,a]),{columnWidths:n,setColumnWidths:r,resizingColumn:a,handleResizeStart:m}};function N(e){var n=e.data,r=e.initialLine,i=e.openInEditor,a=(0,k.useIsMobile)(),o=(0,s._)((0,u.useState)(""),2),l=o[0],c=o[1],d=(0,u.useMemo)(function(){if(0===n.length)return{headers:[],data:[],calculatedColumnWidths:[]};var e=[""].concat((0,x._)(n[0])),t=e.map(function(e,t){return{key:t.toString(),label:e,isRowHeader:0===t}}),r=[],i=Array(e.length).fill(0);n.slice(1).forEach(function(e,n){var a={0:(n+1).toString(),key:n.toString()};t.slice(1).forEach(function(t,n){var r=e[n]||"";a[(n+1).toString()]=r,i[n+1]=Math.max(i[n+1],r.length)}),r.push(a)});var a=i.map(function(e,n){return 0===n?25:Math.min(Math.max(8*Math.max(e,t[n].label.length),50),300)});return{headers:t,data:r,calculatedColumnWidths:a}},[n]),f=d.headers,p=d.data,h=d.calculatedColumnWidths,m=D(p,l),g=O(h),w=g.columnWidths,S=g.setColumnWidths,C=g.resizingColumn,j=g.handleResizeStart,T=(0,s._)((0,u.useState)(null),2),A=T[0],N=T[1];(0,u.useEffect)(function(){S(h)},[h,S]);var M=(0,u.useRef)(null),L=(0,b.useVirtualizer)({count:m.length,getScrollElement:function(){return M.current},estimateSize:function(){return 25},overscan:10,rangeExtractor:function(e){var t=new Set([0].concat((0,x._)((0,y.defaultRangeExtractor)(e))));return(0,x._)(t)}});return(0,u.useEffect)(function(){if(r&&m.length>r){var e=r-2;L.scrollToIndex(e,{align:"center"}),N(e);var t=setTimeout(function(){return N(null)},2e3);return function(){return clearTimeout(t)}}},[m.length,r,L]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.View,{css:P.filter,p:4,children:(0,t.jsx)(R.SearchBar,{value:l,onChange:function(e){return c(e.target.value)},onClear:function(){return c("")}})}),(0,t.jsx)("div",{css:P.tableRoot,ref:M,"data-resizing":null!==C,children:(0,t.jsxs)("div",{css:P.virtualTable,style:{height:"".concat(L.getTotalSize(),"px"),width:"".concat(w.reduce(function(e,t){return e+t},0),"px")},children:[(0,t.jsx)("div",{css:P.tableHeader,children:f.map(function(e,n){return(0,t.jsxs)("div",{css:P.headerCell,style:{width:"".concat(w[n],"px")},children:[e.label,a||0===n?null:(0,t.jsx)("div",{css:P.resizeHandle,onMouseDown:function(e){return j(n,e)},role:"separator"})]},e.key)})}),L.getVirtualItems().map(function(e){var n=m[e.index];return n?(0,t.jsx)("div",{css:P.tableRow,"data-index":e.index,"data-highlighted":e.index===A,style:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(e.size,"px"),transform:"translateY(".concat(25+e.start,"px)")},children:f.map(function(e,r){var a=n[e.key];return(0,t.jsx)("div",{css:P.tableCell,style:{width:"".concat(w[r],"px")},children:0===r?(0,t.jsx)(E.IconButton,{colorway:"primary",alt:"Edit at this line",onClick:function(){return i(parseInt(a,10)+1)},size:18,children:(0,t.jsx)(_.default,{})}):a},e.key)})},e.key.toString()):null})]})})]})}var M=e.i(827759),L=e.i(406206),B=e.i(259493),V=e.i(396776),F=(0,j.cssRecord)({root:[T.rcss.flex.column,T.rcss.height("100%"),T.rcss.width("100%"),T.rcss.overflow("hidden")],loadingContainer:[T.rcss.center]});function U(n){var r=n.filePath,i=n.initialLine,a=n.performPaneOperation,x=(0,m.default)().fs,y=(0,s._)((0,u.useState)([]),2),b=y[0],w=y[1],_=(0,u.useCallback)(function(e){a({operation:"replace",pane:{type:"codeEditor",data:{path:r,line:e}}}),a({operation:"commit"})},[a,r]);(0,B.useSetPaneBindings)(function(){return{commands:[{commands:[{match:g.matchLabel,data:{label:"Open in Editor",icon:(0,t.jsx)(d.default,{}),type:"action",run:function(){return _()}}}]}]}},[_]);var k=(0,s._)((0,u.useState)(!1),2),S=k[0],C=k[1],j=(0,s._)((0,u.useState)(!0),2),T=j[0],E=j[1];return(0,u.useEffect)(function(){var t=function(t){return(0,o._)(function(){var n;return(0,l._)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.A(519741)];case 1:return r.sent().default.parse(t,{complete:function(e){w(e.data),E(!1),C(!1)}}),[3,3];case 2:return n=r.sent(),c.captureException(n),C(!0),[3,3];case 3:return[2]}})})()};return x.watchTextFile(r,{onReady:function(e){return t(e.initialContent)},onChange:function(e){return t(e.latestContent)},onMoveOrDelete:function(e){e.eventType===h.ChangeEventType.Delete&&a({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[r,x,a]),(0,t.jsxs)(I.View,{css:F.root,children:[(0,t.jsx)(M.FileHeader,{path:r,performPaneOperation:a,children:(0,t.jsx)(L.PaneHeaderActionButton,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:function(){return _()},icon:(0,t.jsx)(d.default,{})})}),S?(0,t.jsx)(I.View,{p:8,children:(0,t.jsx)(V.StatusBanner,{icon:(0,t.jsx)(p.default,{}),colorway:"red",text:"This CSV could not be displayed."})}):(0,t.jsx)(t.Fragment,{children:T?(0,t.jsx)(I.View,{css:F.loadingContainer,grow:!0,shrink:!0,children:(0,t.jsx)(f.default,{})}):(0,t.jsx)(N,{data:b,openInEditor:_,initialLine:i})})]})}e.i(282890);var G=e.i(716636),$=n.Type.Object({type:n.Type.Literal("csvPreview"),data:n.Type.Object({path:n.Type.String(),line:n.Type.Optional(n.Type.Integer())})}),H={Content:function(e){var n=e.options.performPaneOperation,r=e.pane.data,i=r.path,a=r.line;return(0,t.jsx)(U,{filePath:i,performPaneOperation:n,initialLine:a})},Icon:function(e){var n=e.size;return(0,t.jsx)(i.default,{size:n})},getTitle:function(e){return e.data.path?(0,a.getFileName)(e.data.path):"CSV Preview"},description:"Preview CSV files in a tabular format",category:G.PaneCategory.Other,decode:function(e){return r.Value.Decode($,e)}};e.s(["csvPreviewUI",()=>H],676702)},231133,e=>{e.v({button:"index-module__aSAQ8q__button",menu:"index-module__aSAQ8q__menu"})},751367,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(960933),i=e.i(862927),a=e.i(806930),o=e.i(116235),s=e.i(138716),l=e.i(530658),u=e.i(346715),c=e.i(341190),d=e.i(927600),f=e.i(77164),p=e.i(119274),h=e.i(960178),m=e.i(625484);function g(e){var n=e.tab,r=e.fullPath,i=e.level,a=e.onNavigate;return n.children&&!n.component?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Header,{children:(0,t.jsx)(m.View,{pt:8,px:8,children:(0,t.jsx)(h.Text,{variant:0===i?"subheadDefault":"small",children:n.label})})}),(0,t.jsx)(x,{tabs:n.children,currentPath:r,onNavigate:a})]}):(0,t.jsx)(p.BaseMenuItem,{textValue:n.label,onAction:function(){return a(r)},children:(0,t.jsxs)(m.View,{row:!0,gap:12,align:"center",justify:"space-between",grow:!0,children:[(0,t.jsxs)(m.View,{row:!0,gap:12,align:"center",children:[n.icon,(0,t.jsxs)(m.View,{gap:2,children:[(0,t.jsx)(h.Text,{children:n.label}),n.description?(0,t.jsx)(h.Text,{variant:"small",color:"dimmer",children:n.description}):null]})]}),(0,t.jsx)(d.default,{size:16})]})})}function x(e){var n=e.tabs,r=e.currentPath,i=void 0===r?[]:r,a=e.onNavigate,o=i.length;return(0,t.jsx)(t.Fragment,{children:Object.entries(n).map(function(e){var n=(0,l._)(e,2),r=n[0],s=n[1],c=(0,u._)(i).concat([r]);return(0,t.jsx)(g,{tab:s,fullPath:c,isTopLevel:0===o,level:o,onNavigate:a},c.join("-"))})})}function y(e){var n=e.onNavigate;return(0,t.jsxs)(m.View,{p:16,gap:16,children:[(0,t.jsxs)(m.View,{gap:8,children:[(0,t.jsx)(h.Text,{variant:"subheadBig",children:"Developer Tools"}),(0,t.jsx)(h.Text,{color:"dimmer",children:"Access debugging tools, monitor resources, and manage your development environment"})]}),(0,t.jsx)(p.Menu,{"aria-label":"Developer Tools Overview",selectionMode:"none",children:(0,t.jsx)(x,{tabs:f.developerTabs,onNavigate:n})})]})}var b=e.i(136540),w=e.i(878420),_=e.i(64386),k=e.i(625251),S=e.i(992785),C=e.i(183035),j=e.i(140487),T=e.i(604963),E=e.i(231133);function R(e){var n=e.label,r=e.icon,i=e.description,a=e.isActive,o=e.showChevron,s=e.onAction;return(0,t.jsx)(p.BaseMenuItem,{textValue:n,onAction:s,children:(0,t.jsxs)(m.View,{row:!0,gap:12,align:"center",justify:"space-between",grow:!0,children:[(0,t.jsxs)(m.View,{row:!0,gap:12,align:"center",children:[r,(0,t.jsxs)(m.View,{gap:2,children:[(0,t.jsx)(h.Text,{children:n}),i?(0,t.jsx)(h.Text,{variant:"small",color:"dimmer",children:i}):null]})]}),void 0!==a&&a?(0,t.jsx)(C.default,{size:16}):null,void 0!==o&&o?(0,t.jsx)(d.default,{size:16}):null]})})}function I(e){var n=e.items,r=e.currentPath,i=void 0===r?[]:r,a=e.parentPath,o=e.onNavigate;return(0,t.jsx)(t.Fragment,{children:n.map(function(e){if(e.children&&Object.keys(e.children).length>0){var n=Object.entries(e.children).map(function(e){var t=(0,l._)(e,2),n=t[0],r=t[1];return(0,_._)((0,w._)({},r),{id:n})});return(0,t.jsxs)(k.SubmenuTrigger,{children:[(0,t.jsx)(R,{label:e.label,icon:e.icon,showChevron:!0}),(0,t.jsx)(T.RawPopover,{clsx:E.default.menu,children:(0,t.jsx)(p.Menu,{"aria-label":e.label,children:(0,t.jsx)(I,{items:n,currentPath:i,parentPath:(0,u._)(a).concat([e.id]),onNavigate:o})})})]},e.id)}var r=(0,u._)(a).concat([e.id]);return(0,t.jsx)(R,{label:e.label,icon:e.icon,isActive:(0,S.default)(r,i),onAction:function(){o(r)}},e.id)})})}function A(e){var r=e.tree,i=e.currentPath,a=void 0===i?[]:i,o=e.onNavigate,s=(0,n.useCallback)(function(e){if(0===e)return Object.entries(r).map(function(e){var t=(0,l._)(e,2),n=t[0],r=t[1];return(0,_._)((0,w._)({},r),{id:n})});for(var t=r,n=0;n<e;n++){var i=a[n];if(!i||!t[i])return[];var o=t[i];if(!o.children)return[];t=o.children}return Object.entries(t).map(function(e){var t=(0,l._)(e,2),n=t[0],r=t[1];return(0,_._)((0,w._)({},r),{id:n})})},[r,a]),u=(0,n.useCallback)(function(e){var t=a[e];return s(e).find(function(e){return e.id===t})},[a,s]);return 0===a.length?null:(0,t.jsx)(m.View,{row:!0,gap:6,children:a.map(function(e,r){var i=u(r),l=s(r);return i?(0,t.jsx)(n.Fragment,{children:(0,t.jsx)(p.PopupMenu,{label:i.label,trigger:(0,t.jsx)(j.Button,{clsx:E.default.button,iconLeft:i.icon,variant:"nofill",text:i.label}),children:(0,t.jsx)(I,{items:l,currentPath:a,parentPath:a.slice(0,r),onNavigate:o})})},e+r):null})})}function P(e){var r,i=e.tab,a=e.openPane,o=e.navTo,l=(r=f.developerTabs,(0,n.useMemo)(function(){if(!i||0===i.length)return null;if(0===i.length)return null;var e=r[i[0]];if(!e)return null;for(var t=1;t<i.length;t++){var n=i[t],a=e.children;if(null==a||!a[n])return null;e=a[n]}return e},[r,i])),u=l&&"component"in l&&l.component;return u?(0,t.jsxs)(m.View,{grow:!0,shrink:!0,children:[(0,t.jsxs)(m.View,{row:!0,p:8,gap:0,align:"center",children:[(0,t.jsx)(b.IconButton,{size:32,onClick:function(){return o(null)},alt:"Overview",children:(0,t.jsx)(s.default,{})}),(0,t.jsx)(A,{tree:f.developerTabs,currentPath:i,onNavigate:o})]}),(0,t.jsx)(m.View,{grow:!0,shrink:!0,children:(0,t.jsx)(u,{openPane:a})})]}):(0,t.jsx)(y,{onNavigate:o})}e.i(282890);var D=e.i(716636),O=e.i(480028),N=r.Type.Object({type:r.Type.Literal("developer"),data:r.Type.Optional(r.Type.Object({tab:r.Type.Optional(r.Type.Array(r.Type.String()))}))}),M={Content:function(e){var r=e.pane.data,i=e.options,a=(0,n.useCallback)(function(e){i.performPaneOperation({operation:"open",secondary:!0,pane:e})},[i]),o=(0,n.useCallback)(function(e){i.performPaneOperation({operation:"replace",pane:{type:"developer",data:e?{tab:e}:void 0}})},[i]);return(0,t.jsx)(P,{tab:null==r?void 0:r.tab,openPane:a,navTo:o})},Icon:function(e){var n=e.size;return(0,t.jsx)(o.IconContext.Provider,{value:{color:O.tokens.blueStronger,size:n},children:(0,t.jsx)(a.default,{})})},getTitle:function(){return"Developer"},category:D.PaneCategory.Other,decode:function(e){return i.Value.Decode(N,e)}};e.s(["developerUI",()=>M],751367)},972291,e=>{"use strict";var t,n=e.i(960933),r=e.i(705705),i=e.i(963931);n.Type.Object({refs:n.Type.Array(r.GitRefSchema),hash:n.Type.String(),parents:n.Type.Union([n.Type.Null(),n.Type.Array(n.Type.String())]),grafted:n.Type.Boolean(),author:i.GitUserSchema,committer:i.GitUserSchema,subject:n.Type.String(),body:n.Type.String(),trailers:n.Type.Record(n.Type.String(),n.Type.Union([n.Type.String(),n.Type.Undefined()])),notes:n.Type.Optional(n.Type.String())});var a=((t={}).ADDED="ADDED",t.COPIED="COPIED",t.DELETED="DELETED",t.MODIFIED="MODIFIED",t.RENAMED="RENAMED",t.TYPE_CHANGED="TYPE_CHANGED",t.UNKNOWN="UNKNOWN",t.BROKEN="BROKEN",t),o=n.Type.Enum(a);n.Type.Object({path:n.Type.String(),type:o,originalPath:n.Type.Optional(n.Type.String())}),e.s(["GitCommitFileType",()=>a])},876899,733405,138290,930856,933974,304662,737898,e=>{"use strict";var t,n,r,i,a=e.i(530658),o=e.i(276385),s=e.i(389959),l=e.i(960933),u=e.i(862927),c=e.i(972291),d=e.i(167626),f=e.i(399119),p=e.i(904851),h=e.i(721281),m=e.i(445789),g=e.i(463348),x=((t={}).FILE_HEADER_MISSING="FILE_HEADER_MISSING",t.FILE_HEADER_INVALID="FILE_HEADER_INVALID",t.FILE_HEADER_SAME_SIDE="FILE_HEADER_SAME_SIDE",t.FILE_HEADER_MISSING_LABEL="FILE_HEADER_MISSING_LABEL",t.HUNK_EMPTY="HUNK_EMPTY",t.HUNK_HEADER_INVALID="HUNK_HEADER_INVALID",t.HUNK_LINE_INVALID="HUNK_LINE_INVALID",t.GIT_DIFF_HEADER_MISSING="GIT_DIFF_HEADER_MISSING",t.GIT_DIFF_HEADER_INVALID="GIT_DIFF_HEADER_INVALID",t.GIT_DIFF_HEADER_LINE_INVALID="GIT_DIFF_HEADER_LINE_INVALID",t.NEVER="NEVER",t),y=(n={},(0,h._)(n,"FILE_HEADER_MISSING","Missing one-of either `---` or `+++` headers"),(0,h._)(n,"FILE_HEADER_INVALID","File header does not match the expected format"),(0,h._)(n,"FILE_HEADER_SAME_SIDE","Both file headers use the same prefix (e.g. `---`)"),(0,h._)(n,"FILE_HEADER_MISSING_LABEL","File header is missing a label"),(0,h._)(n,"HUNK_EMPTY","Hunk is empty"),(0,h._)(n,"HUNK_HEADER_INVALID","Hunk header does not match the expected format"),(0,h._)(n,"HUNK_LINE_INVALID","Hunk line does not match the expected format"),(0,h._)(n,"GIT_DIFF_HEADER_MISSING","Git diff header is missing"),(0,h._)(n,"GIT_DIFF_HEADER_INVALID","Git diff header does not match the expected format"),(0,h._)(n,"GIT_DIFF_HEADER_LINE_INVALID","Incorrectly formatted or unknown git diff header line"),(0,h._)(n,"NEVER","Encountered unreachable code, this should never happen"),n),b=function(e){function t(e){var n,r,i,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,p._)(this,t),n=(0,f._)(this,t,["Exception when parsing diff: ".concat(e," - ").concat(y[e])]),(0,h._)(n,"reason",void 0),(0,h._)(n,"patch",void 0),(0,h._)(n,"context",void 0),(0,h._)(n,"chunk",void 0),n.name="ParseError",n.reason=e,n.context=null!=(r=o.context)?r:null,n.chunk=null!=(i=o.chunk)?i:null,n.patch=null!=(a=o.patch)?a:null,n}return(0,m._)(t,e),t}((0,g._)(Error)),w=/(?:\\[0-7]{1,3})+/g,_=/\\([0-7]{1,3})/g,k=/\\([0btvfrn])/g;function S(e){return e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1).replaceAll("\\\\","").replaceAll('\\"','"').replace(w,function(e){null!=r||(r=new TextDecoder);var t=Uint8Array.from(Array.from(e.matchAll(_)),function(e){return parseInt(e[1],8)});return r.decode(t)}).replace(k,function(e,t){switch(t){case"0":return"\0";case"b":return"\b";case"t":return"	";case"v":return"\v";case"f":return"\f";case"r":return"\r";case"n":return"\n";default:throw Error("unexpected match")}}).replaceAll("","\\"):e}function C(e,t){var n=e.startsWith("a/"),r=t.startsWith("b/");return e=n&&(r||"/dev/null"===t)?e.slice(2):e,t=r&&(n||"/dev/null"===e)?t.slice(2):t,[e,t]}var j=/^(---|\+\+\+)[ \t](.+?)([ \t]\d+-\d+-\d+[ \t]\d+:\d+:\d+(?:\.\d+)?[ \t](?:-|\+)\d+)?$/,T=RegExp("^@@[ \\t]+-(\\d+)(?:,(\\d+))?[ \\t]\\+(\\d+)(?:,(\\d+))?[ \\t]@@(?:[ \\t](.*))?$","s"),E=RegExp("^([ +-])(.*)$","s"),R=/(?:^|\n)(?=@@)/;function I(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.split(/\r?\n/),i=r[0],o=r[1];if(!i||!o)throw new b(x.FILE_HEADER_MISSING,{context:e});var s=j.exec(i),l=j.exec(o);if(!s||!l)throw new b(x.FILE_HEADER_INVALID,{context:e,chunk:s?o:i});if(s[1]===l[1])throw new b(x.FILE_HEADER_SAME_SIDE,{context:e});var u=null,c=null;if("---"===s[1]?u=s[2]:"+++"===s[1]&&(c=s[2]),"---"===l[1]?u=l[2]:"+++"===l[1]&&(c=l[2]),null===u||null===c)throw new b(x.FILE_HEADER_MISSING_LABEL,{context:e});n.git&&(u=S(u),c=S(c),u=(t=(0,a._)(C(u,c),2))[0],c=t[1],u="/dev/null"===u?null:u,c="/dev/null"===c?null:c);var d=r.slice(2).join("\n").split(R);return 1===d.length&&""===d[0]?{labelA:u,labelB:c,hunks:[]}:{labelA:u,labelB:c,hunks:d.map(function(t){var n=t.split("\n").filter(function(e){return"\\ No newline at end of file"!==e});if(n.length&&!n[n.length-1]&&n.pop(),!n.length)throw new b(x.HUNK_EMPTY,{context:e,chunk:t});var r=T.exec(n[0]);if(!r)throw new b(x.HUNK_HEADER_INVALID,{context:e,chunk:n[0]});var i=parseInt(r[1],10),a=i+(r[2]?parseInt(r[2],10):1)-1,o=parseInt(r[3],10),s=o+(r[4]?parseInt(r[4],10):1)-1,l=r[5]||null,u=i,c=o;return{fromA:i,toA:a,fromB:o,toB:s,heading:l,lines:n.slice(1).map(function(t){var n,r,i,a=E.exec(t);if(!a)throw new b(x.HUNK_LINE_INVALID,{context:e,chunk:t});var o=a[2];switch(a[1]){case" ":n="same",r=u,i=c,u++,c++;break;case"+":n="added",r=null,i=c,c++;break;case"-":n="removed",r=u,i=null,u++;break;default:throw new b(x.NEVER,{context:e,chunk:t})}return{type:n,content:o,numberA:r,numberB:i}})}})}}var A={"old mode":/^old mode[ \t](\d{6})$/,"new mode":/^new mode[ \t](\d{6})$/,"deleted file mode":/^deleted file mode[ \t](\d{6})$/,"new file mode":/^new file mode[ \t](\d{6})$/,"copy from":/^copy from[ \t](.+)$/,"copy to":/^copy to[ \t](.+)$/,"rename from":/^rename from[ \t](.+)$/,"rename to":/^rename to[ \t](.+)$/,"similarity index":/^similarity index[ \t](\d+)%$/,"dissimilarity index":/^dissimilarity index[ \t](\d+)%$/,index:/^index (.+?)\.\.(.+?)(?:[ \t]([0-7]{6}))?$/},P=/^Binary files (.*) and (.*) differ$/,D=/^diff --git ("a\/.*?"|a\/.*?)[ \t]("b\/.*?"|b\/.*?)$/,O=/(?:^|\n)(?=diff --git)/;function N(e){for(var t in A){var n=A[t],r=e.match(n);if(r)switch(t){case"old mode":case"new mode":case"deleted file mode":case"new file mode":return{type:t,mode:r[1]};case"copy from":case"copy to":case"rename from":case"rename to":return{type:t,path:S(r[1])};case"similarity index":case"dissimilarity index":return{type:t,index:parseInt(r[1],10)};case"index":return{type:t,hashA:r[1],hashB:r[2],mode:r[3]?r[3]:null}}}throw new b(x.GIT_DIFF_HEADER_LINE_INVALID,{chunk:e})}function M(e){var t=e.split(/\r?\n/);if(!t[0])throw new b(x.GIT_DIFF_HEADER_MISSING,{context:e});if(!D.test(t[0]))throw new b(x.GIT_DIFF_HEADER_INVALID,{context:e,chunk:t[0]});var n=t.findIndex(function(e){return e.startsWith("---")});if(-1===n){var r,i=t[0].match(D);if(!i)throw new b(x.FILE_HEADER_INVALID,{context:e,chunk:t[0]});var o=i[1],s=i[2],l=!1;o=S(o),s=S(s),o=(r=(0,a._)(C(o,s),2))[0],s=r[1],o="/dev/null"===o?null:o,s="/dev/null"===s?null:s;for(var u=[],c=1;c<t.length;c++)if(t[c].trim()){if(P.test(t[c])){l=!0;break}u.push(N(t[c]))}return{pathA:o,pathB:s,headers:u,binary:l,hunks:[]}}for(var d=!1,f=[],p=1;p<n;p++){if(P.test(t[p])){d=!0;break}f.push(N(t[p]))}var h=I(t.slice(n).join("\n"),{git:!0});return{pathA:h.labelA,pathB:h.labelB,headers:f,binary:d,hunks:h.hunks}}var L=l.Type.Union([l.Type.Object({type:l.Type.Literal("added"),content:l.Type.String(),numberA:l.Type.Null(),numberB:l.Type.Number()},{title:"HunkLineAdded"}),l.Type.Object({type:l.Type.Literal("removed"),content:l.Type.String(),numberA:l.Type.Number(),numberB:l.Type.Null()},{title:"HunkLineRemoved"}),l.Type.Object({type:l.Type.Literal("same"),content:l.Type.String(),numberA:l.Type.Integer(),numberB:l.Type.Integer()},{title:"HunkLineSame"})],{title:"HunkLine"}),B=l.Type.Object({fromA:l.Type.Integer(),toA:l.Type.Integer(),fromB:l.Type.Integer(),toB:l.Type.Integer(),heading:l.Type.Union([l.Type.String(),l.Type.Null()]),lines:l.Type.Array(L)},{title:"Hunk"}),V=l.Type.Object({labelA:l.Type.Union([l.Type.String(),l.Type.Null()]),labelB:l.Type.Union([l.Type.String(),l.Type.Null()]),hunks:l.Type.Array(B)},{title:"UnifiedDiff"}),F=l.Type.Union([l.Type.Object({type:l.Type.Literal("old mode"),mode:l.Type.String()},{title:"GitDiffHeaderLineOldMode"}),l.Type.Object({type:l.Type.Literal("new mode"),mode:l.Type.String()},{title:"GitDiffHeaderLineNewMode"}),l.Type.Object({type:l.Type.Literal("deleted file mode"),mode:l.Type.String()},{title:"GitDiffHeaderLineDeletedFileMode"}),l.Type.Object({type:l.Type.Literal("new file mode"),mode:l.Type.String()},{title:"GitDiffHeaderLineNewFileMode"}),l.Type.Object({type:l.Type.Literal("copy from"),path:l.Type.String()},{title:"GitDiffHeaderLineCopyFrom"}),l.Type.Object({type:l.Type.Literal("copy to"),path:l.Type.String()},{title:"GitDiffHeaderLineCopyTo"}),l.Type.Object({type:l.Type.Literal("rename from"),path:l.Type.String()},{title:"GitDiffHeaderLineRenameFrom"}),l.Type.Object({type:l.Type.Literal("rename to"),path:l.Type.String()},{title:"GitDiffHeaderLineRenameTo"}),l.Type.Object({type:l.Type.Literal("similarity index"),index:l.Type.Integer()},{title:"GitDiffHeaderLineSimilarityIndex"}),l.Type.Object({type:l.Type.Literal("dissimilarity index"),index:l.Type.Integer()},{title:"GitDiffHeaderLineDissimilarityIndex"}),l.Type.Object({type:l.Type.Literal("index"),hashA:l.Type.String(),hashB:l.Type.String(),mode:l.Type.Union([l.Type.String(),l.Type.Null()])},{title:"GitDiffHeaderLineIndex"})],{title:"GitDiffHeaderLine"});l.Type.Object({pathA:l.Type.Union([l.Type.String(),l.Type.Null()]),pathB:l.Type.Union([l.Type.String(),l.Type.Null()]),headers:l.Type.Array(F),binary:l.Type.Optional(l.Type.Boolean()),hunks:l.Type.Array(B)},{title:"GitDiff"});var U=e.i(878420),G=e.i(64386),$=e.i(116235);function H(e){return(0,o.jsx)($.default,(0,G._)((0,U._)({},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M12 8.25a3.751 3.751 0 0 1 3.675 3H21a.75.75 0 0 1 0 1.5h-5.325a3.751 3.751 0 0 1-7.35 0H3a.75.75 0 0 1 0-1.5h5.325c.348-1.712 1.86-3 3.675-3Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"})}))}e.s(["default",()=>H],733405);var z=e.i(205104),W=e.i(297083),q=e.i(817556),K=e.i(597865),Y=e.i(529810),Q=e.i(830675),X=function(e){var t=e.context,n=e.gitService,r=e.result,i=e.data;Q.withScope(function(e){e.setTag("service","git"),e.setTag("context",t),e.setExtra("env",n.getEnv()),i&&Q.setExtra("data",i),Q.captureException(r.error)})};e.s(["reportErrorToSentry",()=>X],138290);let Z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,a._)((0,s.useState)(null),2),i=r[0],o=r[1],l=(0,a._)((0,s.useState)(!0),2),u=l[0],c=l[1],d=(0,Y.default)().fs,f=(0,K.default)(function(n){return(0,W._)(function(){var r,i;return(0,q._)(this,function(a){switch(a.label){case 0:c(!0),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,W._)(function(){var r,i,a;return(0,q._)(this,function(o){switch(o.label){case 0:if("generatedFile"===t.type)return[2,""];if("git"!==t.type)return[3,2];return r=t.revision,[4,n.getFileContents({path:e,revision:r,convertToBase64:(0,z.isMedia)(e)})];case 1:if((i=o.sent()).error)throw X({context:"use-file-at-revision-fetch-content",gitService:n,result:i,data:{path:e,revision:r}}),i.error;return[2,i.content||""];case 2:return[4,d.readFile(e,{fromDisk:!0})];case 3:if((a=o.sent()).error)throw a.error;return[2,a.content.toString("utf8")]}})})()];case 2:return r=a.sent(),c(!1),[2,{content:r,error:null}];case 3:return i=a.sent(),c(!1),[2,{content:null,error:i}];case 4:return[2]}})})()},[e,t,d],n);return(0,s.useEffect)(function(){f&&(f.error?o(null):o(f.content))},[f]),{fileContent:i,loading:u}};e.i(282890);var J=e.i(716636),ee=e.i(480028),et=e.i(446530),en=e.i(613355),er=e.i(965153),ei=e.i(630818),ea=e.i(960178),eo=e.i(625484),es=e.i(753950),el=e.i(486161),eu=e.i(886513),ec=e.i(346715),ed=e.i(676480),ef=e.i(179302),ep="rgba(180, 0, 0, 0.125)",eh="rgba(0, 180, 0, 0.125)",em=ef.EditorView.theme({"&.cm-merge-b .cm-changedLine":{background:"rgba(0, 180, 0, 0.075)"},"&.cm-merge-a .cm-changedLine":{background:"rgba(180, 0, 0, 0.075)"},"&.cm-merge-b .cm-changedLineGutter":{background:eh},"&.cm-merge-a .cm-changedLineGutter":{background:ep},"&.cm-merge-b .cm-changedText":{background:eh,outline:"solid 1px ".concat(eh),borderRadius:"2px"},"&.cm-merge-a .cm-changedText":{background:ep,outline:"solid 1px ".concat(ep),borderRadius:"2px"},".cm-collapsedLines":{color:ee.tokens.accentPrimaryStrongest,background:ee.tokens.accentPrimaryDimmest,transition:"background 250ms ease","&:hover":{background:ee.tokens.accentPrimaryDimmer}}}),eg=[ef.EditorView.baseTheme({".cm-scroller":{height:"100% !important",overflowY:"auto !important"}}),ef.EditorView.theme({".cm-scroller":{height:"auto !important",overflowY:"visible !important"}})],ev=[es.Prec.highest(eg),em],ex=e.i(210736),ey=e.i(221250),eb=e.i(786962),ew=e.i(98816);function e_(e){var t,n,r,i=e.a,l=e.b,u=e.style,c=e.className,d=(0,eu._)(e,["a","b","style","className"]),f=(0,a._)((0,s.useState)(null),2),p=f[0],h=f[1],m=(0,a._)((0,s.useState)(null),2),g=m[0],x=m[1],y=(0,s.useRef)(!1),b=(0,ew.default)(d),w=(0,ew.default)(i.doc),_=(0,ew.default)(l.doc),k=(0,ey.useBaseCodeMirrorExtensions)((0,G._)((0,U._)({},i),{readOnly:!0})),S=(0,ey.useBaseCodeMirrorExtensions)((0,G._)((0,U._)({},l),{readOnly:!0})),C=(t=(0,a._)((0,s.useState)(),2)[1],(0,s.useCallback)(function(e){t(function(){throw e})},[])),j=d.orientation,T=d.revertControls,E=d.renderRevertControl,R=d.collapseUnchanged,I=d.gutter,A=d.highlightChanges,P=void 0!==R,D=null==R?void 0:R.margin,O=null==R?void 0:R.minSize,N=null!=(n=null==g?void 0:g.a)?n:null,M=null!=(r=null==g?void 0:g.b)?r:null;return(0,ey.assertClientSide)(),(0,s.useEffect)(function(){var e=function(e){C(e)};if(p){var t=null;try{t=new ed.MergeView((0,G._)((0,U._)({},b.current),{parent:p,a:{doc:w.current,extensions:[ef.EditorView.exceptionSink.of(e),ev].concat((0,ec._)(k))},b:{doc:_.current,extensions:[ef.EditorView.exceptionSink.of(e),ev].concat((0,ec._)(S))}}))}catch(t){e(t)}return t&&(x(t),y.current=!0),function(){if(t){x(null);try{t.destroy()}catch(t){e(t)}}}}},[p]),(0,s.useEffect)(function(){N&&!y.current&&N.dispatch({changes:{from:0,to:N.state.doc.length,insert:i.doc}})},[N,i.doc]),(0,s.useEffect)(function(){M&&!y.current&&M.dispatch({changes:{from:0,to:M.state.doc.length,insert:l.doc}})},[M,l.doc]),(0,s.useEffect)(function(){g&&!y.current&&ek(g,b.current.collapseUnchanged)},[g,b,i.doc,l.doc]),(0,s.useEffect)(function(){if(g&&!y.current){var e=P?{margin:D,minSize:O}:void 0;g.reconfigure({orientation:j,revertControls:T,renderRevertControl:E,collapseUnchanged:e,gutter:I,highlightChanges:A}),e&&ek(g,e)}},[g,j,T,E,P,D,O,I,A]),(0,ex.useObserveCodeMirrorResize)(N),(0,ex.useObserveCodeMirrorResize)(M),(0,s.useEffect)(function(){y.current=!1}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{ref:h,className:c,style:u}),(0,o.jsx)(eb.EditorReactRootMount,{view:N}),(0,o.jsx)(eb.EditorReactRootMount,{view:M})]})}function ek(e,t){e&&t&&(e.reconfigure({collapseUnchanged:void 0}),e.reconfigure({collapseUnchanged:(0,U._)({},t)}))}e.s(["default",()=>e_],930856);var eS=e.i(752539),eC=e.i(167392),ej=e.i(568430),eT=e.i(269848),eE=e.i(234961),eR=e.i(624782),eI=e.i(751273);function eA(e){var t,n,r;switch(e.type){case eE.GitStatusChangedFileType.ADDED:case eE.GitStatusChangedFileType.UNTRACKED:t="A",n="Added",r="positive";break;case eE.GitStatusChangedFileType.MODIFIED:t="M",n="Modified",r="yellow";break;case eE.GitStatusChangedFileType.DELETED:t="D",n="Deleted",r="negative";break;case eE.GitStatusChangedFileType.RENAMED:t="R",n="Renamed",r="teal";break;case eE.GitStatusChangedFileType.COPIED:t="C",n="Copied",r="lime";break;default:return null}return(0,o.jsx)(eI.Tooltip,{tooltip:n,children:(0,o.jsx)(eR.Pill,{style:{fontFamily:"monospace"},text:t,colorway:r,variant:"muted",compact:!0})})}function eP(e){var t,n;switch(e.type){case"ADDED":t="Added",n="positive";break;case"MODIFIED":t="Modified",n="yellow";break;case"DELETED":t="Deleted",n="negative";break;case"RENAMED":t="Renamed",n="teal";break;case"COPIED":t="Copy",n="lime";break;default:return null}return(0,o.jsx)(eR.Pill,{style:{fontFamily:"monospace"},text:t,colorway:n,variant:"muted",compact:!0})}e.s(["CommitFileType",()=>eP,"default",()=>eA],933974);var eD=e.i(296223),eO=e.i(173703),eN=e.i(721321),eM=e.i(88619),eL=e.i(136540),eB=[{"& > span:first-child-of-type":[en.rcss.flex.grow(1),en.rcss.textAlign.left]},{"& > span":[en.rcss.flex.shrink(1)]},en.rcss.height("auto"),en.rcss.p(8),en.rcss.fontWeight.medium,en.rcss.backgroundColor.backgroundHigher,en.rcss.flex.row,en.rcss.align.center,en.rcss.justify.spaceBetween,en.rcss.overflow("hidden"),en.rcss.cursor.pointer],eV=(0,et.cssRecord)({buttonFolded:[eB,en.rcss.borderRadius(8)],buttonUnfolded:[eB,en.rcss.borderRadius(8,8,0,0)],rowContainer:[en.rcss.position.relative,en.rcss.zIndex(1),en.rcss.overflow("hidden")],diffContainer:[en.rcss.borderRadius(8)],bodyContainer:[en.rcss.borderRadius(0,0,8,8),en.rcss.p(8),en.rcss.display.flex,en.rcss.flex.row,en.rcss.flex.wrap,en.rcss.align.center,en.rcss.justify.center,en.rcss.backgroundColor.backgroundDefault,en.rcss.border({color:ee.tokens.outlineDimmer,direction:"bottom"}),en.rcss.border({color:ee.tokens.outlineDimmer,direction:"left"}),en.rcss.border({color:ee.tokens.outlineDimmer,direction:"right"})],noChangesContainer:[en.rcss.py(8),en.rcss.px(8),en.rcss.center,en.rcss.width("100%")],innerContainer:[en.rcss.display.flex,en.rcss.align.center],splitContainer:[en.rcss.display.flex,en.rcss.flex.row,en.rcss.justify.spaceBetween,en.rcss.maxWidth("100%"),en.rcss.align.center],splitChild:[{flexBasis:"50%"}],buttonGroupItem:[en.rcss.width(64),en.rcss.height(32)]}),eF=function(e){var t=e.value,n=e.onChange;return(0,o.jsxs)(eN.ButtonGroup,{name:"SplitOrUnifiedDiff",value:t,onChange:n,row:!0,children:[(0,o.jsx)(eo.View,{css:eV.buttonGroupItem,children:(0,o.jsx)(eN.ButtonGroupItem,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,o.jsx)(eo.View,{css:eV.buttonGroupItem,children:(0,o.jsx)(eN.ButtonGroupItem,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},eU=function(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.diff,a="".concat(i.initial.path,"/").concat(i.initial.filename),s="".concat(i.final.path,"/").concat(i.final.filename);return(0,o.jsxs)(eo.View,{css:n?eV.buttonFolded:eV.buttonUnfolded,onClick:function(){return r(!n)},children:[(0,o.jsxs)(eo.View,{css:[eV.rowContainer,en.rcss.flex.shrink(1)],align:"center",row:!0,gap:8,children:["RENAMED"===i.status||"COPIED"===i.status?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ei.default,{path:a}),(0,o.jsx)(ea.Text,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,o.jsx)(ea.Text,{multiline:!1,color:"dimmest",css:[en.rcss.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,o.jsx)(eS.default,{}),(0,o.jsx)(ei.default,{path:s}),(0,o.jsx)(ea.Text,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,o.jsx)(ea.Text,{multiline:!1,color:"dimmest",css:[en.rcss.fontWeight.normal],children:i.final.path})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ei.default,{path:s}),(0,o.jsx)(ea.Text,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,o.jsx)(ea.Text,{multiline:!1,color:"dimmest",css:[en.rcss.fontWeight.normal],children:i.final.path})]}),(0,o.jsx)(eM.CopyIconButton,{textToCopy:s,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,o.jsxs)(eo.View,{css:eV.rowContainer,align:"center",row:!0,gap:8,children:[(0,o.jsx)(eP,{type:i.status}),(0,o.jsx)(eL.IconButton,{alt:n?"Collapse diff":"Expand diff",onClick:function(){return r(!n)},children:n?(0,o.jsx)(eC.default,{}):(0,o.jsx)(ej.default,{})})]})]})},eG=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;return"Split"===n?(0,o.jsx)(e_,{a:{filePath:t.initial.filename,doc:t.initial.content},b:{filePath:t.final.filename,doc:t.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,o.jsx)(ey.default,{filePath:t.final.filename,initialDoc:t.final.content,extensions:[el.InlineDiff.of(es.Text.of(t.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},e$=function(e){return(0,z.isMedia)(e)?"media":(0,z.isOTFile)(e)?"ot":"binary"},eH=function(e){var t=e.content,n=e.type,r=e.filename,i=e.extensions;switch(n){case"media":return(0,o.jsx)(eo.View,{css:[{display:"flex",height:"100%"}],children:(0,o.jsx)(eD.Viewer,{src:(0,eD.getMediaSrc)(t,(0,z.getMediaMime)(r)),mime:(0,z.getMediaMime)(r),fileName:r})});case"ot":return(0,o.jsx)(ey.default,{filePath:r,initialDoc:t,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,o.jsx)(ea.Text,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},ez=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;if(t.loading)return(0,o.jsx)(eo.View,{css:eV.noChangesContainer,children:(0,o.jsx)(eT.default,{size:20})});if(t.initial.content===t.final.content)return(0,o.jsx)(eo.View,{css:eV.noChangesContainer,children:(0,o.jsx)(ea.Text,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===t.status)return(0,o.jsx)(eo.View,{css:eV.noChangesContainer,children:(0,o.jsx)(ea.Text,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=e$(t.initial.filename),a=e$(t.final.filename);if("ADDED"===t.status)switch(a){case"media":return(0,o.jsx)(eo.View,{css:eV.noChangesContainer,children:(0,o.jsx)(eo.View,{css:eV.innerContainer,children:(0,o.jsx)(eD.Viewer,{src:(0,eD.getMediaSrc)(t.final.content,(0,z.getMediaMime)(t.final.filename)),mime:(0,z.getMediaMime)(t.final.filename),fileName:t.final.filename})})});case"ot":return(0,o.jsx)(eo.View,{css:eV.noChangesContainer,children:(0,o.jsx)(ey.default,{filePath:t.final.filename,initialDoc:t.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,o.jsx)(eo.View,{css:eV.noChangesContainer,children:(0,o.jsx)(ea.Text,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"binary"===i&&"binary"===a?(0,o.jsx)(eo.View,{css:eV.noChangesContainer,children:(0,o.jsx)(ea.Text,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}):"ot"===i&&"ot"===a?(0,o.jsx)(eG,{diff:t,splitOrUnified:n,extensions:r}):(0,o.jsxs)(eo.View,{css:eV.splitContainer,p:8,children:[(0,o.jsx)(eo.View,{css:eV.splitChild,align:"center",justify:"center",children:(0,o.jsx)(eH,{content:t.initial.content,type:i,filename:t.initial.filename,extensions:r})}),(0,o.jsx)(eo.View,{css:eV.splitChild,children:(0,o.jsx)(eH,{content:t.final.content,type:a,filename:t.final.filename,extensions:r})})]})},eW=function(e){var t=e.diff,n=e.folded,r=e.setFolded,i=e.splitOrUnified;return(0,o.jsxs)(eo.View,{css:eV.diffContainer,grow:!0,children:[(0,o.jsx)(eU,{folded:n,setFolded:r,diff:t}),n?null:(0,o.jsx)(eO.ShadesSurface,{css:eV.bodyContainer,children:(0,o.jsx)(ez,{diff:t,splitOrUnified:i})})]},t.id)};e.s(["DiffBody",()=>ez,"DiffViewer",()=>eW,"SplitOrUnifiedDiffButton",()=>eF],304662);var eq=e.i(220743),eK=e.i(140487),eY=e.i(929872),eQ=ee.tokens.outlineDimmest,eX=(0,s.createContext)({});function eZ(){return(0,s.useContext)(eX)}function eJ(e){var t=e.diff,n=e.onPathClick,r=e.onViewFullDiff,i=e.children,a=(0,s.useMemo)(function(){var e=!0,n=!1,r=void 0;try{for(var i,a=t.headers[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;if("index"===o.type)return{a:o.hashA,b:o.hashB}}}catch(e){n=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}},[t]),l=(0,s.useMemo)(function(){return{handlePathNavigation:n?function(e,r){var i="a"===e?t.pathA:t.pathB,o="a"===e?null==a?void 0:a.a:null==a?void 0:a.b;i&&n({path:i,revision:o,line:r})}:void 0,handleViewFullDiffNavigation:r?function(){var e=t.pathB||t.pathA,n=(null==a?void 0:a.b)||(null==a?void 0:a.a);e&&r({path:e,revision:n})}:void 0}},[t,n,r,a]);return(0,o.jsx)(eX.Provider,{value:l,children:i})}var e0=e.i(562713),e1=e.i(348704),e2=e.i(731291);e.i(694906);var e3=e.i(446692),e5=e.i(703774),e4=new WeakSet,e8="/* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */",e6=e.i(788106),e7=e.i(828322),e9=e.i(546284),te="--number-width-a",tt="--number-width-b",tn=(0,et.cssRecord)({content:{marginLeft:ee.tokens.space8,wordBreak:"break-word",whiteSpace:"pre-wrap"},nbsp:{userSelect:"none"},span:{"&::selection":{backgroundColor:ee.tokens.accentPrimaryDimmer}},line:{display:"flex",flexDirection:"row",alignItems:"stretch",gap:"1ch",paddingLeft:"1ch",paddingRight:ee.tokens.space8,".is-patch-with-border &":{"&.is-added":{borderLeft:"1px solid ".concat(ee.tokens.accentPositiveDimmest)},"&.is-removed":{borderLeft:"1px solid ".concat(ee.tokens.accentNegativeDimmest)},"&.is-same":{borderLeft:"1px solid ".concat(eQ)}},"&.is-skipped":{paddingTop:ee.tokens.space4,paddingBottom:ee.tokens.space4,color:ee.tokens.foregroundDimmest,userSelect:"none"}},number:{flexShrink:0,whiteSpace:"nowrap",userSelect:"none",".is-added &":{color:ee.tokens.accentPositiveStronger},".is-removed &":{color:ee.tokens.accentNegativeStronger},".is-same &":{color:ee.tokens.foregroundDimmest},".is-skipped &":{position:"relative",left:"25%",color:ee.tokens.foregroundDimmest}},numberContainer:{display:"flex",flexDirection:"row",alignItems:"start",justifyContent:"flex-end",flexShrink:0,"&.is-side-a":{width:"var(".concat(te,")")},"&.is-side-b":{width:"var(".concat(tt,")")}}});function tr(e){var t=(0,e5.useTheme)().values;return(0,s.useMemo)(function(){if("same"===e)return"";var n="added"===e?t.global.accentPositiveDefault:t.global.accentNegativeDefault;return(0,e6.default)(n).alpha(.2).hex()},[e,t.global.accentPositiveDefault,t.global.accentNegativeDefault])}function ti(e){var t=e.type,n=void 0===t?"same":t,r=e.changes,i=eZ().handleViewFullDiffNavigation,a=tr(n);if(r<=0)return null;var s=!1,l=!1;return("removed"===n||"same"===n)&&(s=(0,o.jsx)(e7.default,{size:20})),("added"===n||"same"===n)&&(l=(0,o.jsx)(e7.default,{size:20})),(0,o.jsxs)("div",{className:"is-".concat(n," is-skipped"),css:tn.line,style:{backgroundColor:a},children:[(0,o.jsx)(to,{side:"a",type:n,number:s}),(0,o.jsx)(to,{side:"b",type:n,number:l}),(0,o.jsx)("div",{css:tn.content,children:(0,o.jsx)("span",{css:tn.span,children:i?(0,o.jsx)(eK.Button,{text:"view ".concat(r," more ").concat((0,e9.default)("change",r)),iconLeft:(0,o.jsx)(eq.default,{}),variant:"underlinedOnHover",colorway:"primary",onClick:function(){return i()}}):"".concat(r," more ").concat((0,e9.default)("change",r)," not shown")})})]})}function ta(e){var t=e.type,n=e.content,r=e.numberA,i=e.numberB,a=tr(t);return(0,o.jsxs)("div",{className:"is-".concat(t),css:tn.line,style:{backgroundColor:a},children:[(0,o.jsx)(to,{side:"a",type:t,number:void 0===r?null:r}),(0,o.jsx)(to,{side:"b",type:t,number:void 0===i?null:i}),(0,o.jsx)("div",{className:"is-".concat(t),css:tn.content,children:"string"==typeof n?(0,o.jsx)("span",{css:tn.span,children:n||(0,o.jsx)("span",{css:tn.nbsp,children:""})}):n.map(function(e,t){var n=e.text,r=e.tags;return(0,o.jsx)("span",{className:r,css:tn.span,children:n||(0,o.jsx)("span",{css:tn.nbsp,children:""})},t)})})]})}function to(e){var t=e.side,n=e.type,r=e.number,i=eZ().handlePathNavigation;return!1===r?null:null===r?(0,o.jsx)("div",{css:tn.numberContainer,className:"is-side-".concat(t)}):(0,o.jsx)("div",{css:tn.numberContainer,className:"is-side-".concat(t),children:i&&"number"==typeof r?(0,o.jsx)(eK.Button,{text:(0,o.jsx)("span",{css:tn.number,children:r}),variant:"underlinedOnHover",onClick:function(){return i("removed"===n?"a":"b",r)}}):(0,o.jsx)("span",{css:tn.number,children:r})})}var ts=(0,et.cssRecord)({hunk:[en.rcss.flex.column,{":not(:first-of-type)":{borderTop:"1px solid ".concat(eQ)},":first-of-type [data-hunk-header]":{borderTopLeftRadius:3}}],header:[en.rcss.colorMixBg(ee.tokens.interactiveBackground,ee.tokens.surfaceBackground),{gap:"1ch",padding:"".concat(ee.tokens.space4," 1ch"),".is-patch-with-border &":{borderLeft:"1px solid ".concat(eQ)}}],countAdded:[en.rcss.textAlign.right,en.rcss.color.accentPositiveStronger,en.rcss.width("var(".concat(tt,")"))],countRemoved:[en.rcss.textAlign.right,en.rcss.color.accentNegativeStronger,en.rcss.width("var(".concat(te,")"))],sectionHeading:[en.rcss.ml(8),en.rcss.font.code,en.rcss.color.foregroundDimmer],hunks:[en.rcss.flex.column,en.rcss.font.code,(i={lineHeight:ee.tokens.lineHeightSmall},(0,h._)(i,"> div:last-child"+e8,en.rcss.pb(2)),(0,h._)(i,"> div:first-child"+e8,en.rcss.pt(4)),i)]});function tl(e){var t=e.hunk,n=e.hideHeader,r=e.maxLines,i=(0,s.useMemo)(function(){var e=0,n=0,r=!0,i=!1,a=void 0;try{for(var o,s=t.lines[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;"added"===l.type?n++:"removed"===l.type&&e++}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return{a:e,b:n}},[t]),a=(0,s.useMemo)(function(){return void 0!==r&&t.lines.length>r?t.lines.slice(0,r):t.lines},[t,r]);return(0,o.jsxs)(eo.View,{css:ts.hunk,children:[n?null:(0,o.jsxs)(eo.View,{css:ts.header,row:!0,align:"center","data-hunk-header":!0,children:[(0,o.jsxs)("span",{css:ts.countRemoved,children:["-",i.a]}),(0,o.jsxs)("span",{css:ts.countAdded,children:["+",i.b]}),t.heading?(0,o.jsx)("span",{css:ts.sectionHeading,children:t.heading}):null]}),(0,o.jsx)(eo.View,{css:ts.hunks,children:a.map(function(e,t){return(0,o.jsx)(ta,(0,U._)({},e),t)})})]})}var tu=(0,et.cssRecord)({diff:[en.rcss.flex.column,{"&.is-patch-with-border":en.rcss.borderRadius(4)}],header:[en.rcss.rowWithGap(8),en.rcss.my(8),en.rcss.align.center,en.rcss.flex.wrap],headerFile:{lineHeight:1,"&.is-added":en.rcss.color.accentPositiveStronger,"&.is-removed":en.rcss.color.accentNegativeStronger},binaryTag:[en.rcss.color.accentPrimaryStronger],container:[en.rcss.flex.column,en.rcss.overflow("hidden"),{".is-patch-with-border &":[en.rcss.borderRadius(4),{"&.is-modified":{border:"1px solid ".concat(eQ),borderLeft:"none"},"&.is-added":{border:"1px solid ".concat(ee.tokens.accentPositiveDimmest),borderLeft:"none"},"&.is-removed":{border:"1px solid ".concat(ee.tokens.accentNegativeDimmest),borderLeft:"none"},"&.is-no-changes":{border:"1px solid ".concat(ee.tokens.outlineDimmer)},"&.is-binary":{border:"1px solid ".concat(ee.tokens.outlineDimmer)}}],"&.is-no-changes":[en.rcss.p(8),en.rcss.center],"&.is-binary":[en.rcss.p(8),en.rcss.center]}],file:[en.rcss.flex.column,en.rcss.font.code,{lineHeight:ee.tokens.lineHeightSmall,"> div:last-child":en.rcss.pb(2),"> div:first-child":en.rcss.pt(4)}]});function tc(e){var t,n,r,i,l,u,c=e.diff,d=e.maxLines,f=e.noHeader,p=e.noBorder,m=e.background,g=e.compressed,x=e.onPathClick,y=e.onViewFullDiff,b=(n=(t=(0,a._)((0,s.useState)(c),2))[0],r=t[1],i=(0,e5.useTheme)(),l=(0,s.useMemo)(function(){return(0,e1.highlightStyleFromSpecs)(i.values.editor.syntaxHighlighting)},[i.values.editor.syntaxHighlighting]),(0,s.useEffect)(function(){!l.module||e4.has(l.module)||(e0.StyleModule.mount(document,l.module),e4.add(l.module))},[l.module]),(0,s.useEffect)(function(){r(c);var e=0,t=!0,n=!1,i=void 0;try{for(var a,o=c.hunks[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;if((e+=s.lines.length)>1e3)return}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}var u=new AbortController,d=u.signal;return(0,W._)(function(){var e,t,n,r,i,a,o;return(0,q._)(this,function(s){switch(s.label){case 0:if(0===c.hunks.length)return[2,c];if(e=c.pathA?e3.FileTypeRepository.from(c.pathA):null,t=c.pathB?e3.FileTypeRepository.from(c.pathB):null,n=null,r=null,!(e&&e.codeMirrorLanguage))return[3,4];if(!e.codeMirrorLanguage.support)return[3,1];return i=e.codeMirrorLanguage.support.language.parser,[3,3];case 1:return[4,e.codeMirrorLanguage.load()];case 2:i=s.sent().language.parser,s.label=3;case 3:n=i,s.label=4;case 4:if(!(t&&t.codeMirrorLanguage))return[3,8];if(!t.codeMirrorLanguage.support)return[3,5];return a=t.codeMirrorLanguage.support.language.parser,[3,7];case 5:return[4,t.codeMirrorLanguage.load()];case 6:a=s.sent().language.parser,s.label=7;case 7:r=a,s.label=8;case 8:if(d.aborted||!n&&!r)return[2,c];return o=c.hunks.map(function(e){var t=e.lines.filter(function(e){return null!==e.numberA}).map(function(e){return e.content}).join("\n"),i=e.lines.filter(function(e){return null!==e.numberB}).map(function(e){return e.content}).join("\n");e.heading&&(t=t?"".concat(e.heading,"\n").concat(t):"",i=i?"".concat(e.heading,"\n").concat(i):"");var a=(0,e2.renderCodeToHighlightedLines)(t,l,n),o=(0,e2.renderCodeToHighlightedLines)(i,l,r);return e.heading&&t&&a.shift(),e.heading&&i&&o.shift(),(0,G._)((0,U._)({},e),{lines:e.lines.map(function(t){if(null!==t.numberB)n="b",r=t.numberB;else if(null!==t.numberA)n="a",r=t.numberA;else throw Error("Invalid line, no number for either side");var n,r,i="a"===n?a[r-e.fromA]:o[r-e.fromB];if(!i)throw Error("Line not found in side ".concat(n));return(0,G._)((0,U._)({},t),{content:i})})})}),[2,(0,G._)((0,U._)({},c),{hunks:o})]}})})().then(function(e){d.aborted||r(e)}),function(){u.abort()}},[c,l]),n),w=(0,s.useMemo)(function(){var e=0,t=0,n=0,r=0,i=!0,a=!1,o=void 0;try{for(var s,l=c.hunks[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,d=0,f=0,p=!0,h=!1,m=void 0;try{for(var x,y=u.lines[Symbol.iterator]();!(p=(x=y.next()).done);p=!0){var b=x.value;b.numberA&&(n=Math.max(n,b.numberA)),b.numberB&&(r=Math.max(r,b.numberB)),"removed"===b.type&&d++,"added"===b.type&&f++}}catch(e){h=!0,m=e}finally{try{p||null==y.return||y.return()}finally{if(h)throw m}}e=Math.max(e,d),t=Math.max(t,f)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}var w=n.toString().length,_=r.toString().length;if((!g||c.hunks.length>1)&&c.pathA&&c.pathB){var k=e.toString().length+1,S=t.toString().length+1;w=Math.max(w,k),_=Math.max(_,S)}return{a:w,b:_}},[c,g]);return(0,o.jsx)(eJ,{diff:c,onPathClick:x,onViewFullDiff:y,children:(0,o.jsxs)(eo.View,{css:tu.diff,className:p?"":"is-patch-with-border",style:(u={},(0,h._)(u,te,"".concat(w.a,"ch")),(0,h._)(u,tt,"".concat(w.b,"ch")),u),children:[!f&&(c.pathA||c.pathB)?(0,o.jsx)(tf,{diff:b}):null,(0,o.jsx)(th,{diff:b,compressed:g,background:m,maxLines:d})]})})}function td(){return(0,o.jsx)(ea.Text,{css:tu.binaryTag,variant:"small",children:"Binary"})}function tf(e){var t=e.diff;if(t.pathA&&t.pathB&&t.pathA===t.pathB)return(0,o.jsxs)(eo.View,{css:tu.header,children:[(0,o.jsx)(tp,{diff:t,side:"b"}),t.binary?(0,o.jsx)(td,{}):null]});if(t.pathA&&t.pathB&&t.pathA!==t.pathB)return(0,o.jsxs)(eo.View,{css:tu.header,children:[(0,o.jsx)(tp,{diff:t,side:"a"}),t.binary?(0,o.jsx)(td,{}):null,(0,o.jsx)(eS.default,{color:ee.tokens.foregroundDimmest}),(0,o.jsx)(tp,{diff:t,side:"b"}),t.binary?(0,o.jsx)(td,{}):null]});var n=t.pathA?"a":"b";return(0,o.jsxs)(eo.View,{css:tu.header,children:[(0,o.jsx)(tp,{diff:t,side:n}),t.binary?(0,o.jsx)(td,{}):null]})}function tp(e){var t=e.diff,n=e.side,r=eZ().handlePathNavigation,i="a"===n?t.pathA:t.pathB,a="a"===n?t.pathB:t.pathA;if(!i)return null;var s="";a!==i&&(s="b"===n?"is-added":"is-removed");var l=(0,o.jsx)(ea.Text,{className:s,css:tu.headerFile,children:i});return r?(0,o.jsx)(eK.Button,{text:l,iconLeft:(0,o.jsx)(ei.default,{path:i}),onClick:function(){return r(n)},variant:"underlinedOnHover"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ei.default,{path:i}),l]})}function th(e){var t=e.diff,n=e.background,r=e.compressed,i=e.maxLines,a=null===n?void 0:n||"root";if(t.binary)return(0,o.jsx)(eY.Surface,{className:"is-binary",css:tu.container,background:a,children:(0,o.jsx)(ea.Text,{color:"dimmest",children:"Changes can't be shown for binary files."})});if(!t.hunks.length)return(0,o.jsx)(eY.Surface,{className:"is-no-changes",css:tu.container,background:a,children:(0,o.jsx)(ea.Text,{color:"dimmer",children:"No additional changes"})});if(t.pathA&&t.pathB){var s=0,l=t.hunks.reduce(function(e,t){return e+t.lines.reduce(function(e,t){return e+ +("same"!==t.type)},0)},0),u=t.hunks.map(function(e){if(void 0!==i&&s>=i)return null;var n=void 0!==i?i-s:void 0;return l-=e.lines.slice(0,n).reduce(function(e,t){return e+ +("same"!==t.type)},0),s+=e.lines.length+1,(0,o.jsx)(tl,{hunk:e,hideHeader:r&&1===t.hunks.length,maxLines:n},s)});return(0,o.jsxs)(eY.Surface,{className:"is-modified",css:tu.container,background:a,children:[u,(0,o.jsx)(ti,{changes:l})]})}var c=t.pathB?"b":"a",d="a"===c?"removed":"added",f=t.hunks.flatMap(function(e){return e.lines.filter(function(e){return e.type!==("a"===c?"added":"removed")}).map(function(e){return e.content})}),p=void 0!==i?f.slice(0,i):f,h=f.length-p.length;return(0,o.jsx)(eY.Surface,{className:"is-".concat(d),css:tu.container,background:a,children:(0,o.jsxs)(eo.View,{css:tu.file,children:[p.map(function(e,t){return(0,o.jsx)(ta,{type:d,content:e,numberA:"a"===c&&t+1,numberB:"b"===c&&t+1},t)}),h<=0?null:(0,o.jsx)(ti,{type:d,changes:h})]})})}var tm=(0,et.cssRecord)({patch:en.rcss.colWithGap(12),truncatedDiffsMessage:[en.rcss.color.foregroundDimmest,en.rcss.align.center,en.rcss.justify.start]}),tg=/^diff --git /m;function tv(e){return{pathA:e.labelA,pathB:e.labelB,headers:[],binary:!1,hunks:e.hunks}}function tx(e){var t=e.patch,n=e.maxLines,r=e.maxDiffs,i=e.noHeader,a=e.noBorder,l=e.background,u=e.compressed,c=e.onPathClick,f=e.onViewFullDiff,p=(0,s.useMemo)(function(){return function e(t){return Array.isArray(t)?t.flatMap(function(t){return e(t)}):"string"==typeof t?tg.test(t)?function(e){var t=e.split(O);t.length&&!t[0].startsWith("diff --git")&&t.shift();try{return t.map(function(e){return e.endsWith("\n")?e.slice(0,-1):e}).map(M)}catch(t){throw(0,d._)(t,b)&&(t.patch=e),t}}(t):[tv(I(t))]:"headers"in t?[t]:[tv(t)]}(t)},[t]),h=(0,s.useMemo)(function(){var e=void 0!==r?Math.min(p.length,r):p.length;if(!u&&e===p.length)return p;for(var t=[],n=0;n<e;n++){var i=p[n];if(!u){t.push(i);continue}t.push((0,G._)((0,U._)({},i),{hunks:i.hunks.map(function(e){return function(e){for(var t,n,r,i,a=(0,ec._)(e.lines),o=e.fromA,s=e.fromB,l=e.toA,u=e.toB;(null==(t=a[0])?void 0:t.type)==="same"&&(null==(n=a[1])?void 0:n.type)==="same";)a.shift(),o++,s++;for(;(null==(r=a[a.length-1])?void 0:r.type)==="same"&&(null==(i=a[a.length-2])?void 0:i.type)==="same";)a.pop(),l--,u--;return(0,G._)((0,U._)({},e),{fromA:o,fromB:s,toA:l,toB:u,lines:a})}(e)}).filter(function(e){return e.lines.length>0})}))}return t},[p,r,u]),m=p.length-h.length,g=1===m?"file":"files";return(0,o.jsxs)(eo.View,{css:tm.patch,children:[h.map(function(e,t){return(0,o.jsx)(tc,{diff:e,maxLines:n,noHeader:i,noBorder:a,background:l,compressed:u,onPathClick:c,onViewFullDiff:f},t)}),m<=0?null:(0,o.jsx)(eo.View,{css:tm.truncatedDiffsMessage,pt:4,row:!0,gap:4,children:f?(0,o.jsx)(eK.Button,{text:"view in full (".concat(m," more changed ").concat(g,")"),iconLeft:(0,o.jsx)(eq.default,{}),onClick:function(){return f({})},variant:"underlinedOnHover",colorway:"primary"}):(0,o.jsxs)(ea.Text,{children:[m," other changed ",g," not shown"]})})]})}var ty=l.Type.Object({type:l.Type.Literal("git"),revision:l.Type.String()}),tb=l.Type.Object({type:l.Type.Literal("fs")}),tw=l.Type.Object({type:l.Type.Literal("generatedFile"),content:l.Type.String()}),t_=l.Type.Object({left:l.Type.Object({path:l.Type.String(),data:l.Type.Union([ty,tb,tw])}),right:l.Type.Object({path:l.Type.String(),data:l.Type.Union([ty,tb,tw])})}),tk=l.Type.Object({type:l.Type.Literal("patch"),diff:V}),tS=l.Type.Object({type:l.Type.Literal("rawPatch"),diffString:l.Type.String(),filePath:l.Type.String()}),tC=l.Type.Object({type:l.Type.Literal("diff"),data:l.Type.Union([t_,l.Type.Array(t_),tk,tS])}),tj=(0,et.cssRecord)({container:[en.rcss.p(8)],singleDiffWrapper:[en.rcss.width("100%"),en.rcss.backgroundColor.backgroundHigher,en.rcss.borderRadius(4),en.rcss.mb(8)],accordionBody:[en.rcss.border({direction:"x",width:1,color:ee.tokens.backgroundHigher}),en.rcss.border({direction:"bottom",width:1,color:ee.tokens.backgroundHigher}),en.rcss.backgroundColor.backgroundDefault,en.rcss.borderRadius(0,0,4,4)]});function tT(e){var t=e.left,n=e.right,r=e.splitOrUnified,i=(0,a._)((0,s.useState)(!0),2),l=i[0],u=i[1],d=Z(t.path,t.data),f=d.fileContent,p=d.loading,h=Z(n.path,n.data),m=h.fileContent,g=h.loading,x="generatedFile"===t.data.type?t.data.content:null,y="generatedFile"===n.data.type?n.data.content:null,b=f||x,w=m||y,_=(0,s.useMemo)(function(){return null===b&&null!==w?c.GitCommitFileType.ADDED:null!==b&&null===w?c.GitCommitFileType.DELETED:c.GitCommitFileType.MODIFIED},[b,w]),k={id:"".concat(t.path,"-").concat(n.path),status:_,loading:p||g,initial:{filename:(0,z.getFileName)(t.path),path:(0,z.getParentPath)(t.path),content:null!=b?b:""},final:{filename:(0,z.getFileName)(n.path),path:(0,z.getParentPath)(n.path),content:null!=w?w:""}};return(0,o.jsx)(eo.View,{css:tj.singleDiffWrapper,children:(0,o.jsx)(er.AccordionItem,{expanded:l,onClick:function(){return u(function(e){return!e})},headerContent:(0,o.jsxs)(eo.View,{row:!0,gap:8,children:[(0,o.jsx)(ei.default,{path:t.path}),(0,o.jsx)(ea.Text,{multiline:!1,children:t.path})]}),children:(0,o.jsx)(eo.View,{css:tj.accordionBody,p:4,children:(0,o.jsx)(ez,{splitOrUnified:r,diff:k})})})})}function tE(e){var t=e.patch;return(0,o.jsx)(eo.View,{css:tj.container,children:(0,o.jsx)(tx,{patch:t.diff,compressed:!1,background:null})})}function tR(e){var t=e.rawPatch,n=(0,s.useMemo)(function(){try{return I(t.diffString)}catch(e){return null}},[t.diffString]);return n?(0,o.jsx)(eo.View,{css:tj.container,children:(0,o.jsx)(tx,{patch:n,compressed:!1,background:null})}):(0,o.jsx)(eo.View,{css:tj.container,align:"center",justify:"center",p:16,children:(0,o.jsx)(ea.Text,{color:"dimmer",children:"Failed to parse diff"})})}var tI={Content:function(e){var t=e.pane.data,n=(0,a._)((0,s.useState)("Split"),2),r=n[0],i=n[1],l=(0,s.useMemo)(function(){return Array.isArray(t)?t:[t]},[t]);return"type"in t&&"patch"===t.type?(0,o.jsx)(tE,{patch:t}):"type"in t&&"rawPatch"===t.type?(0,o.jsx)(tR,{rawPatch:t}):(0,o.jsxs)(eo.View,{gap:8,css:tj.container,children:[(0,o.jsx)(eF,{value:r,onChange:i}),(0,o.jsx)(eo.View,{children:l.map(function(e){return"left"in e&&"right"in e?(0,o.jsx)(tT,{left:e.left,right:e.right,splitOrUnified:r},e.left.path+e.right.path):null})})]})},Icon:function(){return(0,o.jsx)(H,{})},getTitle:function(e){var t=e.data,n=Array.isArray(t)?t:[t];if(1===n.length){var r=n[0];if("type"in r&&"patch"===r.type){var i=r.diff,a=i.labelA,o=i.labelB;return a===o?"Diff: ".concat((0,z.getFileName)(null!=a?a:"")):"Diff: ".concat(a," - ").concat(o)}if("type"in r&&"rawPatch"===r.type)return"Diff: ".concat((0,z.getFileName)(r.filePath));if("left"in r&&"right"in r)return r.left.path===r.right.path?"Diff: ".concat((0,z.getFileName)(r.left.path)):"Diff: ".concat((0,z.getFileName)(r.left.path)," - ").concat((0,z.getFileName)(r.right.path))}return"Diff: ".concat(n.length," files")},category:J.PaneCategory.WorkspaceFeatures,decode:function(e){return u.Value.Decode(tC,e)}};e.s(["diffUI",()=>tI],876899);var tA=e.i(569384),tP=e.i(973245),tD=e.i(304277);function tO(){var e=(0,tA._)(["\n  query WorkspaceDraw($id: String!) {\n    currentUser {\n      id\n      username\n    }\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n      }\n    }\n  }\n"]);return tO=function(){return e},e}e.i(566901);var tN={},tM=(0,tP.gql)(tO());function tL(e){var t=(0,U._)({},tN,e);return tD.useQuery(tM,t)}e.s(["useWorkspaceDrawQuery",()=>tL],737898)},900396,282007,118022,e=>{"use strict";var t=e.i(276385),n=e.i(960933),r=e.i(862927),i=e.i(72128),a=e.i(205104),o=e.i(529810),s=e.i(394212),l=e.i(297083),u=e.i(878420),c=e.i(64386),d=e.i(530658),f=e.i(346715),p=e.i(817556),h=e.i(389959),m=e.i(223808),g=e.i(15053),x=e.i(737898),y=e.i(995683),b=e.i(921521),w=e.i(207237),_=e.i(299798),k=e.i(927158),S=e.i(516351),C=function(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})};let j=function(e,t,n){if(!e)return[];var r,i=t(e.getSceneElementsIncludingDeleted()),a=e.getAppState();return(r=n.reduce(function(e,t){var n,r,o;return t.id===(null==(n=a.editingElement)?void 0:n.id)||t.id===(null==(r=a.resizingElement)?void 0:r.id)||t.id===(null==(o=a.draggingElement)?void 0:o.id)||(i[t.id]&&i[t.id].version>t.version||i[t.id]&&i[t.id].version===t.version&&i[t.id].versionNonce!==t.versionNonce&&i[t.id].versionNonce<t.versionNonce?e.push(i[t.id]):e.push(t),delete i[t.id]),e},[])).concat.apply(r,(0,f._)(Object.values(i)))},T=function(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n};var E=e.i(663762),R=e.i(967629),I=e.i(480028),A=e.i(703774),P=e.i(625484),D=e.i(219577),O=(0,R.css)(".excalidraw.excalidraw-modal-container.excalidraw--mobile{margin-top:",D.HEADER_HEIGHT-1,"px;}");function N(n){var r,i=n.fs,a=n.filePath,o=(0,d._)((0,h.useState)(void 0),2),D=o[0],N=o[1],M=(0,b.default)(),L=(0,h.useRef)(function(e){return(0,f._)(e)}),B=(0,h.useRef)(function(e){return -1}),V=(0,h.useRef)(),F=(0,h.useRef)(T()),U=(0,k.usePid2Callback)(function(e){return function(t){return e.excalidraw.update.rpc(t)}},[]);(0,h.useEffect)(function(){e.A(532703).then(function(e){L.current=function(t){return t.filter(function(t){return t.isDeleted||!e.isInvisiblySmallElement(t)})},B.current=e.getSceneVersion,N(e.Excalidraw)})},[]);var G=(0,h.useCallback)(function(){return V.current},[]),$=(0,w.default)(),H=(0,x.useWorkspaceDrawQuery)({variables:{id:$},ssr:!1}),z=H.data,W=H.loading,q=(null==z||null==(r=z.currentUser)?void 0:r.username)||"",K=(0,A.useTheme)().isDarkColorScheme,Y=(0,E.useActiveUsers)(),Q=(0,S.default)(),X=null==Q?void 0:Q.color,Z=(0,d._)((0,h.useState)(new Map),2),J=Z[0],ee=Z[1],et=(0,d._)((0,h.useState)(-1),2),en=et[0],er=et[1],ei=(0,h.useRef)((0,g.v4)()).current;(0,h.useEffect)(function(){(0,l._)(function(){var e,t;return(0,p._)(this,function(n){switch(n.label){case 0:if(!z||!z.currentUser)return[2];return[4,F.current];case 1:return n.sent(),e=G().getAppState().collaborators,t=new Map,Y.forEach(function(n){if(n.username!==(null==z||null==(r=z.currentUser)?void 0:r.username)){var r,i=e.get(n.username)||{};t.set(n.username,(0,c._)((0,u._)({},i),{username:n.username,color:{background:n.color,foreground:n.color}}))}}),G().updateScene({collaborators:t}),[2]}})})()},[z,Y,G]);var ea=(0,h.useCallback)(function(e,t){return(0,l._)(function(){var n,r,i,o,s,l;return(0,p._)(this,function(u){t||(e=e.filter(function(e){return!J.has(e.id)||e.version>J.get(e.id)})),n=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)l=s.value,J.set(l.id,l.version),ee(new Map(J))}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null==U||U({paneId:ei,path:a,$kind:"elements",elements:JSON.stringify(e)}),[2]})})()},[U,ei,a,J]);(0,_.usePid2)(function(e,t){var n=t.signal;return(0,l._)(function(){var t,r,i,o,l,d,f,h,m,g,x,y,b,w,_,k;return(0,p._)(this,function(p){switch(p.label){case 0:return t=e.excalidraw.listen.subscribe({paneId:ei,path:a},{signal:n}).resReadable,[4,F.current];case 1:p.sent(),r=!1,i=!1,p.label=2;case 2:p.trys.push([2,7,8,13]),l=(0,s._)(t),p.label=3;case 3:return[4,l.next()];case 4:if(!(r=!(d=p.sent()).done))return[3,6];if(!(f=d.value).ok)return[2];"collaborator"===f.payload.$kind?(h=G().getAppState().collaborators,g=(m=f.payload).pointer,x=m.selectedElementIds,h.set(f.payload.username,(0,c._)((0,u._)({},h.get(f.payload.username)),{pointer:g,selectedElementIds:x,username:f.payload.username})),G().updateScene({collaborators:h})):"elements"===f.payload.$kind?(y=JSON.parse(f.payload.elements),b=j(G(),C,y),(w=B.current(b))>en&&(er(w),G().updateScene({elements:b}))):"leave"===f.payload.$kind&&((_=G().getAppState().collaborators).delete(f.payload.username),G().updateScene({collaborators:_})),p.label=5;case 5:return r=!1,[3,3];case 6:return[3,13];case 7:return k=p.sent(),i=!0,o=k,[3,13];case 8:if(p.trys.push([8,,11,12]),!(r&&null!=l.return))return[3,10];return[4,l.return()];case 9:p.sent(),p.label=10;case 10:return[3,12];case 11:if(i)throw o;return[7];case 12:return[7];case 13:return[2]}})})()},[ei,a,G,en,B]),(0,h.useEffect)(function(){(0,l._)(function(){var e,t;return(0,p._)(this,function(n){switch(n.label){case 0:if(!a||!i)return[2];return[4,i.readFile(a)];case 1:if(!("content"in(e=n.sent())))return[3,3];return t=JSON.parse(e.content.toString()||"{}"),[4,F.current];case 2:n.sent(),G().updateScene({elements:t.elements||[],appState:t.appState||{}}),G().scrollToContent(),n.label=3;case 3:return[2]}})})()},[a,i,G]);var eo=(0,h.useCallback)((0,m.default)(function(e,t){return(0,l._)(function(){var n;return(0,p._)(this,function(r){switch(r.label){case 0:if(n=e.filter(function(e){return!e.isDeleted}),!a)return[3,2];return[4,i.writeFile(a,y.default.from(JSON.stringify({elements:n,files:t})))];case 1:r.sent(),r.label=2;case 2:return[2]}})})()},350),[a]),es=(0,h.useCallback)(function(e){var t=B.current(e);t>en&&(ea(L.current(e),!1),er(t))},[ea,L,B]);return(0,t.jsxs)(P.View,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:X?"0 3px 0 3px ".concat(X):"none",backgroundColor:I.tokens.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){null==U||U({paneId:ei,path:a,$kind:"leave"})},children:[D&&!W?(0,t.jsx)(D,{ref:function(e){e&&(V.current=e,e.readyPromise&&e.readyPromise.then(function(e){F.current.resolve(e)}).catch(function(e){F.current.reject(e)}))},UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:K?"dark":"light",onPointerUpdate:function(e){var t=e.pointer;null==U||U({paneId:ei,path:a,$kind:"collaborator",pointer:t,selectedElementIds:G().getAppState().selectedElementIds||{}})},onChange:function(e,t,n){es(e),B.current(e)>en&&eo(e,n)},name:q}):null,M?(0,t.jsx)(R.Global,{styles:[O]}):null]})}function M(e){var n=e.fs,r=e.filePath;return(0,t.jsx)(N,{fs:n,filePath:r},r)}e.s(["default",()=>M],282007);var L=e.i(185511),B=e.i(294468),V=e.i(827759);e.i(282890);var F=e.i(716636),U=e.i(259493),G=n.Type.Object({type:n.Type.Literal("draw"),data:n.Type.Object({path:n.Type.String()})}),$={Content:function(e){var n=e.pane,r=e.options.performPaneOperation;return(0,t.jsx)(H,{path:n.data.path,performPaneOperation:r})},Icon:function(e){var n=e.size;return(0,t.jsx)(i.default,{size:n})},getTitle:function(e){return(0,a.getFileName)(e.data.path)},category:F.PaneCategory.WorkspaceFeatures,decode:function(e){return r.Value.Decode(G,e)}};function H(e){var n=e.path,r=e.performPaneOperation,i=(0,o.default)().fs,a=(0,L.useFileCommands)({path:n,performPaneOperation:r});return(0,U.useSetPaneBindings)(function(){if(a)return{commands:[{commands:a}]}},[a]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(V.FileHeader,{path:n,performPaneOperation:r}),(0,t.jsx)(B.Content,{children:(0,t.jsx)(M,{fs:i,filePath:n})})]})}e.s(["drawUI",()=>$],900396);var z=e.i(995691),W=e.i(32967),q=n.Type.Object({type:n.Type.Literal("envEditor")}),K={Content:function(e){var n=e.options.performPaneOperation;return(0,t.jsx)(W.default,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,t.jsx)(z.default,{size:n})},getTitle:function(){return"Secrets"},description:"Store sensitive information (like API keys) securely in your App",category:F.PaneCategory.WorkspaceFeatures,decode:function(e){return r.Value.Decode(q,e)}};e.s(["envEditorUI",()=>K],118022)},627557,e=>{"use strict";var t=e.i(530658),n=e.i(633600);function r(e,t){for(var n=[],r=e.split(t),i=0;i<r.length;i++){var a=r[i].trim();""!==a&&n.push(a)}return n}function i(e){return e.replace(/^<|>$/g,"")}function a(e){return"'".concat(e.replace(/'/g,"'\\''"),"'")}function o(e){return e.replace(/^refs\/(?:heads|remotes)\//,"")}function s(e){if(-1===e.indexOf("/")||e.startsWith("refs/heads/"))return[null,null];if(e.startsWith("refs/remotes/")){var t=(0,n._)(e.split("/"));return[t[2],t.slice(3).join("/")]}var r=(0,n._)(e.split("/"));return[r[0],r.slice(1).join("/")]}function l(e){return e.replace(/^refs\/remotes\//,"")}function u(e){var t=(0,n._)(e.split("\n")),r=t[0],i=t.slice(1);return i.length?"".concat(r,"\n").concat(i.map(function(e){return"	"+e}).join("\n")):e}function c(e){if(0===Object.keys(e).length)return"";var n=Object.entries(e).map(function(e){var n=(0,t._)(e,2),r=n[0],i=n[1];return"".concat(r,": ").concat(u(i))}).join("\n");return'-m "'.concat(n,'"')}function d(e){var t=(0,n._)(e.split("\n")),r=t[0],i=t.slice(1);return i.length?"".concat(r,"\n").concat(i.map(function(e){return e.slice(1)}).join("\n")):e}e.s(["formatTrailer",()=>u,"formatTrailersForMessage",()=>c,"parseTrailer",()=>d,"removeBranchRefsPath",()=>o,"removeGitEmailBrackets",()=>i,"removeRemoteRefsPath",()=>l,"splitRemoteFromBranch",()=>s,"splitTrimFilter",()=>r,"wrapInSingleQuotes",()=>a])},625108,e=>{"use strict";var t=e.i(530658),n=e.i(633600),r=e.i(705705),i="HEAD -> ",a="refs/heads/",o="refs/remotes/",s="tag: ",l="refs/tags/",u=/^refs\/remotes\/([^/]+)\/HEAD$/;e.s(["parseGitRef",()=>function e(c){var d;switch("HEAD"===(d=c)||"refs/HEAD"===d||d.startsWith(i)?r.GitRefType.HEAD:d.startsWith(a)?r.GitRefType.BRANCH:d.startsWith(o)?u.test(d)?r.GitRefType.REMOTE_HEAD:r.GitRefType.REMOTE_BRANCH:d.startsWith(l)||d.startsWith(s)?r.GitRefType.TAG:r.GitRefType.BRANCH){case r.GitRefType.HEAD:if(c.startsWith(i)){if(c.endsWith("(detached)"))return{type:r.GitRefType.HEAD,name:"HEAD",detached:!0,ref:null};return{type:r.GitRefType.HEAD,name:"HEAD",detached:!1,ref:e(c.slice(i.length))}}return{type:r.GitRefType.HEAD,name:"HEAD",detached:!1,ref:null};case r.GitRefType.REMOTE_HEAD:var f=c.slice(o.length),p=(0,t._)(f.split("/"),1)[0];return{type:r.GitRefType.REMOTE_HEAD,name:"HEAD",remote:p};case r.GitRefType.BRANCH:return{type:r.GitRefType.BRANCH,name:c.startsWith(a)?c.slice(a.length):c};case r.GitRefType.REMOTE_BRANCH:var h=c.slice(o.length),m=(0,n._)(h.split("/")),g=m[0],x=m.slice(1).join("/");return{type:r.GitRefType.REMOTE_BRANCH,name:h,remote:g,branch:x};case r.GitRefType.TAG:return c.startsWith(s)&&(c=c.slice(s.length)),c.startsWith(l)&&(c=c.slice(l.length)),{type:r.GitRefType.TAG,name:c}}}])},167193,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(346715),i=e.i(817556),a=e.i(627557),o=e.i(625108),s=e.i(680183),l=e.i(705705);function u(e,t){return!!e&&!!t&&(e===t||e.name===t.name&&e.remote===t.remote)}function c(e){var t=(0,n._)(e.split("	"),6),r=t[0],i=t[1],u=t[2],c=t[3],d=t[4],f=t[5],p=(0,o.parseGitRef)(r),h={hash:u,author:{name:c,email:(0,a.removeGitEmailBrackets)(d),date:1e3*parseInt(f,10)}};if(p.type===l.GitRefType.BRANCH){var m=i?(0,o.parseGitRef)(i):null,g=m&&(m.type===l.GitRefType.REMOTE_BRANCH||m.type===l.GitRefType.BRANCH)?m:null;return{type:s.GitBranchType.LOCAL,name:p.name,push:g,remote:null,tracking:null,commit:h}}return p.type===l.GitRefType.REMOTE_BRANCH?{type:s.GitBranchType.REMOTE,name:p.branch,remote:p.remote,push:null,tracking:null,commit:h}:null}function d(e){return(0,t._)(function(e){var t,n,o=arguments;return(0,i._)(this,function(i){switch(i.label){case 0:return[4,e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!1===e.local&&!1===e.remote)throw Error("Cannot specify both local and remote as false");var t=[];if(t.push('--format="%(refname)%09%(push)%09%(objectname)%09%(authorname)%09%(authoremail)%09%(authordate:unix)"'),e.max&&t.push("--count=".concat(e.max)),e.pattern)if("string"==typeof e.pattern)t.push((0,a.wrapInSingleQuotes)(e.pattern));else{var n,i,o=e.pattern.map(function(e){return(0,a.wrapInSingleQuotes)(e)});t.push.apply(t,(0,r._)(o))}else(null==(n=e.local)||n)&&t.push("refs/heads"),(null==(i=e.remote)||i)&&t.push("refs/remotes");return"git for-each-ref ".concat(t.join(" "))}(o.length>1&&void 0!==o[1]?o[1]:{}),{serviceMethod:"git-list-branches"})];case 1:if((t=i.sent()).error)return[2,t];return(n=function(e){var t=[],n=[],i=!0,a=!1,o=void 0;try{for(var u,c=e[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var d=u.value;d.type===s.GitBranchType.LOCAL?t.push(d):d.type===s.GitBranchType.REMOTE&&n.push(d)}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}var f=new Set,p=[],h=!0,m=!1,g=void 0;try{for(var x,y=n[Symbol.iterator]();!(h=(x=y.next()).done);h=!0)!function(){var e=x.value,n=t.find(function(t){return t.push&&t.push.type===l.GitRefType.REMOTE_BRANCH&&t.push.remote===e.remote&&t.push.branch===e.name&&t.name===e.name});n&&(f.add(e),f.add(n),p.push({type:s.GitBranchType.TRACKED,name:n.name,remote:e.remote,push:n.push,tracking:e,commit:n.commit}))}()}catch(e){m=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw g}}var b=e.filter(function(e){return!f.has(e)});return(0,r._)(b).concat((0,r._)(p))}((0,a.splitTrimFilter)(t.output,"\n").map(c).filter(function(e){return null!==e}))).sort(function(e,t){return t.commit.author.date-e.commit.author.date}),[2,{branches:n,error:null}]}})}).apply(this,arguments)}e.s(["branchesEqual",()=>u,"default",()=>d])},716149,e=>{e.v({errorNotification:"GitErrorNotification-module__ZFxZDG__errorNotification",errorType:"GitErrorNotification-module__ZFxZDG__errorType"})},137804,730792,520739,691490,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(276385),a=e.i(389959),o=e.i(113388),s=e.i(269848),l=e.i(529810),u=e.i(346715),c=e.i(541793),d=e.i(161322),f=(0,a.createContext)(null),p=(0,a.createContext)(null);function h(){var e=(0,a.useContext)(f);if(!e)throw Error("Expected store in context");return e}var m=(0,c.atom)([]),g=(0,c.atom)(function(e){return e(m)},function(e,t,n){var r=e(m),i=Math.random().toString(36).substring(7);t(m,[{id:i,type:n,dismiss:function(){var n=e(m).filter(function(e){return e.id!==i});t(m,n)}}].concat((0,u._)(r)))});function x(){return(0,d.useAtomValue)(g,{store:h()})}function y(){return(0,d.useSetAtom)(g,{store:h()})}function b(){var e=(0,a.useContext)(p);if(!e)throw Error("Expected mode switcher in context");return e}e.s(["GitPaneErrorContext",()=>f,"GitPaneModeSwitcherContext",()=>p,"useGitErrorList",()=>x,"useGitPaneModeSwitcher",()=>b,"useNotifyGitError",()=>y],730792);var w=e.i(878420),_=e.i(709485),k=e.i(858248);function S(e,t){(0,k.track)(_.events.GIT_FEATURE_USED,(0,w._)({action:e,source:"git-pane"},t))}e.s(["trackGitPaneEvent",()=>S],520739);var C=e.i(446530),j=e.i(613355),T=e.i(140487),E=e.i(127227),R=e.i(960178),I=e.i(625484),A=(0,C.cssRecord)({checkboxLabel:j.rcss.rowWithGap(8)});function P(){var e=(0,a.useId)(),u=(0,n._)((0,a.useState)(!0),2),c=u[0],d=u[1],f=(0,n._)((0,a.useState)(!1),2),p=f[0],h=f[1],m=y(),g=(0,l.default)().git;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T.Button,{text:p?"Initializing...":"Initialize Git Repository",iconLeft:p?(0,i.jsx)(s.default,{}):(0,i.jsx)(o.default,{}),colorway:"primary",loading:p,onClick:function(){return(0,t._)(function(){var e;return(0,r._)(this,function(t){switch(t.label){case 0:if(p)return[2];return h(!0),[4,g.init({initialCommit:c,includeAllInitialFiles:!0})];case 1:return(e=t.sent()).error?(h(!1),m(e.error)):(g.forceRefresh(),S("repository-initialized")),[2]}})})()}}),(0,i.jsxs)(I.View,{css:A.checkboxLabel,tag:"label",children:[(0,i.jsx)(E.Checkbox,{id:e,checked:c,onChange:function(e){return d(e)},size:"small"}),(0,i.jsx)(R.Text,{variant:"small",multiline:!1,children:"Create initial commit with all changes"})]})]})}e.s(["default",()=>P],137804);var D=e.i(416298),O=e.i(825118),N=e.i(602686),M=e.i(255701),L=e.i(597865),B=e.i(526962),V=(0,C.cssRecord)({remedies:[j.rcss.flex.wrap,{gap:"8px"}]});function F(e){var t=e.description,n=e.remedies,r=e.error;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.Text,{children:t}),(0,i.jsxs)(I.View,{css:V.remedies,row:!0,align:"center",justify:"end",children:[n,(0,i.jsx)(T.Button,{text:"Dismiss",iconLeft:(0,i.jsx)(N.default,{}),onClick:r.dismiss})]})]})}function U(e){var n=e.error,a=b(),o=(0,L.default)(function(e){return(0,t._)(function(){var t,o,s;return(0,r._)(this,function(r){switch(r.label){case 0:switch(n.type){case O.GitErrors.UNKNOWN_NOT_GIT:return[3,1];case O.GitErrors.UNKNOWN:return[3,2];case O.GitErrors.CHANNEL_CLOSED:return[3,3];case O.GitErrors.NOT_INITIALIZED:return[3,4];case O.GitErrors.UNAUTHENTICATED:return[3,5];case O.GitErrors.INDEX_FILE_CORRUPT:return[3,7];case O.GitErrors.UNKNOWN_REMOTE:return[3,8];case O.GitErrors.UNKNOWN_REF:return[3,9];case O.GitErrors.INDEX_LOCKED:return[3,10];case O.GitErrors.NO_COMMITS:return[3,11];case O.GitErrors.PATH_MATCHED_NO_FILES:return[3,12];case O.GitErrors.USER_NOT_CONFIGURED:return[3,13];case O.GitErrors.INVALID_REFERENCE:return[3,14];case O.GitErrors.BRANCH_ALREADY_EXISTS:return[3,15];case O.GitErrors.MERGE_CONFLICT:return[3,16];case O.GitErrors.UPSTREAM_NOT_SET:return[3,17];case O.GitErrors.HEAD_DETACHED:return[3,18];case O.GitErrors.DIRTY_WORKTREE:return[3,19];case O.GitErrors.PROTECTED_BRANCH:return[3,20];case O.GitErrors.PUSH_REJECTED:return[3,21];case O.GitErrors.REMOTE_ALREADY_EXISTS:return[3,22];case O.GitErrors.TIMEOUT:return[3,23];case O.GitErrors.ALREADY_INITIALIZED:return[3,24];case O.GitErrors.PRE_COMMIT_HOOK_FAILED:return[3,25]}return[3,26];case 1:return t="Unknown error from the Git service. This is probably a bug in the app.",o=null,[3,27];case 2:return t="There was an unrecognized fatal error with Git. This is probably a bug in the app.",o=null,[3,27];case 3:return t="The command was interrupted. Please try again.",o=null,[3,27];case 4:return t="There isn't a Git repository in the Repl's root directory.",o=null,[3,27];case 5:return[4,e.getRemotes()];case 6:if((s=r.sent()).error)return[2,s];if(0!==s.remotes.size)return t="Failed to authenticate with the remote. Please ensure you have a valid connection to authenticate with the current remote.",o=(0,i.jsx)(T.Button,{colorway:"primary",iconLeft:(0,i.jsx)(M.default,{}),text:"Edit Settings",onClick:function(){a({type:B.GitPaneModeType.SETTINGS}),n.dismiss()}}),[3,27];return t="Failed to authenticate with the remote.",o=null,[3,27];case 7:return t="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",o=null,[3,27];case 8:return t="The remote specified isn't configured.",o=null,[3,27];case 9:return t="Remote ref of current branch is missing, publish your branch or restore the remote branch",o=null,[3,27];case 10:return t="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",o=null,[3,27];case 11:return t="There are no commits in the repository.",o=null,[3,27];case 12:return t="The path specified didn't match any files.",o=null,[3,27];case 13:return t="There isn't any user information configured for Git.",o=null,[3,27];case 14:return t="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",o=null,[3,27];case 15:return t="The branch specified already exists.",o=null,[3,27];case 16:return t="There was an unexpected merge conflict.",o=null,[3,27];case 17:return t="The upstream branch isn't set.",o=null,[3,27];case 18:return t="The HEAD is detached. You have a commit checked out, not a branch.",o=null,[3,27];case 19:return t="There are uncommitted changes.",o=null,[3,27];case 20:return t="This operation cannot be performed on a protected branch.",o=null,[3,27];case 21:return t="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",o=null,[3,27];case 22:return t="The remote specified already exists.",o=null,[3,27];case 23:return t="The remote operation timed out.",o=null,[3,27];case 24:return t="There is already a Git repository in the Repl's root directory.",o=null,[3,27];case 25:return t="The pre-commit hook failed.",o=null,[3,27];case 26:return t="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",o=null,[3,27];case 27:return[2,{description:t,remedies:o,error:null}]}})})()},[n,a],{refresh:!1});if(!o)return(0,i.jsx)(F,{description:null,remedies:null,error:n});if(o.error)return(0,i.jsx)(F,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:n});var s=o.description,l=o.remedies;return(0,i.jsx)(F,{description:s,remedies:l,error:n})}var G=e.i(173703),$=e.i(716149);function H(e){var t=e.error;return(0,i.jsxs)(G.ShadesSurface,{colorShade:"error",elevate:"1x",border:"regular",p:4,br:"container",clsx:$.default.errorNotification,children:[(0,i.jsxs)(I.View,{row:!0,py:4,px:8,align:"center",justify:"space-between",children:[(0,i.jsxs)(I.View,{row:!0,gap:4,align:"center",children:[(0,i.jsx)(D.default,{}),(0,i.jsx)(R.Text,{variant:"subheadDefault",multiline:!1,children:function(e){switch(e.type){case O.GitErrors.UNKNOWN_NOT_GIT:return"Unknown Error";case O.GitErrors.UNKNOWN:return"Unknown Git Error";case O.GitErrors.NOT_INITIALIZED:case O.GitErrors.UNAUTHENTICATED:case O.GitErrors.INDEX_FILE_CORRUPT:case O.GitErrors.UNKNOWN_REMOTE:case O.GitErrors.UNKNOWN_REF:case O.GitErrors.INDEX_LOCKED:case O.GitErrors.NO_COMMITS:case O.GitErrors.PATH_MATCHED_NO_FILES:case O.GitErrors.USER_NOT_CONFIGURED:case O.GitErrors.INVALID_REFERENCE:case O.GitErrors.BRANCH_ALREADY_EXISTS:case O.GitErrors.MERGE_CONFLICT:case O.GitErrors.HEAD_DETACHED:case O.GitErrors.DIRTY_WORKTREE:case O.GitErrors.PUSH_REJECTED:case O.GitErrors.PROTECTED_BRANCH:case O.GitErrors.REMOTE_ALREADY_EXISTS:case O.GitErrors.ALREADY_INITIALIZED:case O.GitErrors.TIMEOUT:case O.GitErrors.OBJECT_HAS_NO_NOTE:case O.GitErrors.NOTE_SUCCESSFULLY_REMOVED:case O.GitErrors.NOTE_SUCCESSFULLY_OVERWRITTEN:case O.GitErrors.OBJECT_ALREADY_HAS_NOTE:case O.GitErrors.PRE_COMMIT_HOOK_FAILED:return"Git Error";default:return"Unknown Error"}}(t)})]}),(0,i.jsx)(R.Text,{clsx:$.default.errorType,multiline:!1,children:t.type})]}),(0,i.jsx)(I.View,{pt:4,pb:8,px:8,gap:8,br:0,children:(0,i.jsx)(U,{error:t})})]})}var z=(0,C.cssRecord)({errorList:[{pointerEvents:"none"},{transition:"background-color 100ms"},j.rcss.position.absolute,j.rcss.top(0),j.rcss.bottom(0),j.rcss.left(0),j.rcss.right(0),j.rcss.p(8),j.rcss.colWithGap(16),j.rcss.zIndex(10)]});function W(){var e=x();return(0,i.jsx)(I.View,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:z.errorList,children:e.map(function(e){return(0,i.jsx)(H,{error:e},e.id)})})}e.s(["default",()=>W],691490)},374463,(e,t,n)=>{"use strict";t.exports=function(){}},618277,864667,e=>{"use strict";var t,n,r,i,a,o,s=e.i(297083),l=e.i(530658),u=e.i(817556),c=e.i(276385),d=e.i(389959),f=e.i(269848),p=e.i(979897),h=e.i(597865),m=e.i(529810),g=e.i(730792),x=e.i(520739),y=e.i(136540);function b(){var e,t,n,r,i=(0,l._)((0,d.useState)(!1),2),a=i[0],o=i[1],b=(0,m.default)().git,w=(t=(e=(0,l._)((0,d.useState)(!1),2))[0],n=e[1],r=(0,m.default)().git,(0,d.useEffect)(function(){return r.onBusyChange(n)},[r]),t),_=(0,g.useNotifyGitError)(),k=(0,h.default)(function(e){return(0,s._)(function(){var t,n;return(0,u._)(this,function(r){switch(r.label){case 0:return[4,e.isInitialized()];case 1:if((t=r.sent()).error)return _(t.error),[2,t];if(!t.initialized)return[2,{hasRemotes:!1,error:null}];return[4,e.getRemotes()];case 2:if((n=r.sent()).error)return _(n.error),[2,n];return[2,{hasRemotes:n.remotes.size>0,error:null}]}})})()},[_]);if(null==k?void 0:k.error)return null;var S=!!k&&k.hasRemotes,C=w||a||null===k;return(0,c.jsx)(y.IconButton,{alt:S?"Refresh and Fetch":"Refresh",size:24,onClick:function(){return(0,s._)(function(){var e;return(0,u._)(this,function(t){switch(t.label){case 0:if(b.isBusy()||C)return[2];if(o(!0),!S)return[3,2];return[4,b.fetch()];case 1:(e=t.sent()).error?_(e.error):(0,x.trackGitPaneEvent)("remote-fetched"),t.label=2;case 2:return[4,b.refreshProfiles()];case 3:return t.sent(),b.forceRefresh(),setTimeout(function(){return o(!1)},500),[2]}})})()},disabled:C,children:C?(0,c.jsx)(f.default,{}):(0,c.jsx)(p.default,{})})}e.s(["RefreshButton",()=>b],618277);var w=e.i(374463),_=function(){return(_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function k(e,t){switch(t.type){case o.REGISTER_TAB_STOP:var n=t.payload;if(!n.domElementRef.current)return e;for(var r=-1,s=e.tabStops.length-1;s>=0;--s){var l=e.tabStops[s];if(l.id===n.id)return(0,w.default)(!1,"'".concat(n.id,"' tab stop already registered")),e;if(-1===r&&l.domElementRef.current&&4&l.domElementRef.current.compareDocumentPosition(n.domElementRef.current)){r=s+1;break}}-1===r&&(r=0);var u=e.tabStops.slice();return u.splice(r,0,n),_(_({},e),{selectedId:j(u,e.selectedId),tabStops:u,rowStartMap:null});case o.UNREGISTER_TAB_STOP:var c=t.payload.id,u=e.tabStops.filter(function(e){return e.id!==c});if(u.length===e.tabStops.length)return(0,w.default)(!1,"'".concat(c,"' tab stop already unregistered")),e;return _(_({},e),{selectedId:j(u,e.selectedId),tabStops:u,rowStartMap:null});case o.TAB_STOP_UPDATED:var d=t.payload,f=d.id,p=d.rowIndex,h=d.disabled,m=e.tabStops.findIndex(function(e){return e.id===f});if(-1===m)return(0,w.default)(!1,"'".concat(f,"' tab stop not registered")),e;var g=e.tabStops[m];if(g.disabled===h&&g.rowIndex===p)return e;var n=_(_({},g),{rowIndex:p,disabled:h}),u=e.tabStops.slice();return u.splice(m,1,n),_(_({},e),{selectedId:j(u,e.selectedId),tabStops:u,rowStartMap:null});case o.KEY_DOWN:var x=t.payload,y=x.id,b=x.key,k=x.ctrlKey,m=e.tabStops.findIndex(function(e){return e.id===y});if(-1===m)return(0,w.default)(!1,"'".concat(y,"' tab stop not registered")),e;var R=e.tabStops[m];if(R.disabled)return e;var I=null!==R.rowIndex,A=m===S(e.tabStops),P=m===C(e.tabStops),D=function(e,t,n,r,o,s,l){switch(e){case i.ArrowLeft:if(n||"horizontal"===r||"both"===r)return!n&&o&&s?a.VERY_LAST:a.PREVIOUS;return null;case i.ArrowRight:if(n||"horizontal"===r||"both"===r)return!n&&o&&l?a.VERY_FIRST:a.NEXT;return null;case i.ArrowUp:if(n)return a.PREVIOUS_ROW;if("vertical"===r||"both"===r)return o&&s?a.VERY_LAST:a.PREVIOUS;return null;case i.ArrowDown:if(n)return a.NEXT_ROW;if("vertical"===r||"both"===r)return o&&l?a.VERY_FIRST:a.NEXT;return null;case i.Home:return!n||t?a.VERY_FIRST:a.FIRST_IN_ROW;case i.End:return!n||t?a.VERY_LAST:a.LAST_IN_ROW;default:return null}}(b,k,I,e.direction,e.loopAround,A,P);if(!D)return e;switch(D){case a.NEXT:for(var s=m+1;s<e.tabStops.length;++s){var g=e.tabStops[s];if(I&&g.rowIndex!==R.rowIndex)break;if(!g.disabled)return T(e,g)}break;case a.PREVIOUS:for(var s=m-1;s>=0;--s){var g=e.tabStops[s];if(I&&g.rowIndex!==R.rowIndex)break;if(!g.disabled)return T(e,g)}break;case a.VERY_FIRST:var O=S(e.tabStops);if(O>-1)return T(e,e.tabStops[O]);break;case a.VERY_LAST:var N=C(e.tabStops);if(N>-1)return T(e,e.tabStops[N]);break;case a.PREVIOUS_ROW:if(null===R.rowIndex||0===R.rowIndex)break;var M=e.rowStartMap||E(e),L=M.get(R.rowIndex);if(void 0===L)break;for(var B=m-L,s=R.rowIndex-1;s>=0;--s){var V=M.get(s);if(void 0===V)return e;var F=e.tabStops[V+B];if(F&&!F.disabled)return T(e,F,M)}return _(_({},e),{allowFocusing:!0,rowStartMap:M});case a.NEXT_ROW:var U=e.tabStops[e.tabStops.length-1].rowIndex;if(null===R.rowIndex||null===U||R.rowIndex===U)break;var M=e.rowStartMap||E(e),L=M.get(R.rowIndex);if(void 0===L)break;for(var B=m-L,s=R.rowIndex+1;s<=U;++s){var G=M.get(s);if(void 0===G)return e;var F=e.tabStops[G+B];if(F&&!F.disabled)return T(e,F,M)}return _(_({},e),{allowFocusing:!0,rowStartMap:M});case a.FIRST_IN_ROW:if(null===R.rowIndex)break;var M=e.rowStartMap||E(e),L=M.get(R.rowIndex);if(void 0===L)break;for(var s=L;s<e.tabStops.length;++s){var g=e.tabStops[s];if(g.rowIndex!==R.rowIndex)break;if(!g.disabled)return T(e,e.tabStops[s],M)}break;case a.LAST_IN_ROW:if(null===R.rowIndex)break;for(var M=e.rowStartMap||E(e),$=M.has(R.rowIndex+1)?(M.get(R.rowIndex+1)||0)-1:e.tabStops.length-1,s=$;s>=0;--s){var g=e.tabStops[s];if(g.rowIndex!==R.rowIndex)break;if(!g.disabled)return T(e,e.tabStops[s],M)}}return e;case o.CLICKED:var H=t.payload.id,m=e.tabStops.findIndex(function(e){return e.id===H});if(-1===m)return(0,w.default)(!1,"'".concat(H,"' tab stop not registered")),e;var R=e.tabStops[m];return R.disabled?e:T(e,R,void 0,e.focusOnClick);case o.OPTIONS_UPDATED:return _(_({},e),t.payload);default:return e}}function S(e){return e.findIndex(function(e){return!e.disabled})}function C(e){for(var t=e.length-1;t>=0;--t)if(!e[t].disabled)return t;return -1}function j(e,t){if(null===t){var n=e.findIndex(function(e){return!e.disabled});return -1===n?null:e[n].id}var r=e.findIndex(function(e){return e.id===t});return -1===r||e[r].disabled?-1===(r=e.findIndex(function(e){return!e.disabled}))?null:e[r].id:t}function T(e,t,n,r){return void 0===r&&(r=!0),_(_({},e),{allowFocusing:r,selectedId:t.id,rowStartMap:n||e.rowStartMap})}function E(e){for(var t=new Map,n=0;n<e.tabStops.length;++n){var r=e.tabStops[n].rowIndex;null===r||t.has(r)||t.set(r,n)}return t}(t=i||(i={})).ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.ArrowUp="ArrowUp",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",(n=a||(a={})).PREVIOUS="PREVIOUS",n.NEXT="NEXT",n.VERY_FIRST="VERY_FIRST",n.VERY_LAST="VERY_LAST",n.PREVIOUS_ROW="PREVIOUS_ROW",n.NEXT_ROW="NEXT_ROW",n.FIRST_IN_ROW="FIRST_IN_ROW",n.LAST_IN_ROW="LAST_IN_ROW",(r=o||(o={})).REGISTER_TAB_STOP="REGISTER_TAB_STOP",r.UNREGISTER_TAB_STOP="UNREGISTER_TAB_STOP",r.KEY_DOWN="KEY_DOWN",r.CLICKED="CLICKED",r.TAB_STOP_UPDATED="TAB_STOP_UPDATED",r.OPTIONS_UPDATED="OPTIONS_UPDATED";var R={selectedId:null,allowFocusing:!1,tabStops:[],direction:"horizontal",focusOnClick:!1,loopAround:!1,rowStartMap:null},I=(0,d.createContext)({state:R,dispatch:function(){}}),A=function(e){var t=e.children,n=e.options,r=(0,d.useReducer)(k,_(_({},R),n)),i=r[0],a=r[1];(0,d.useEffect)(function(){var e,t,r;a({type:o.OPTIONS_UPDATED,payload:{direction:null!=(e=null==n?void 0:n.direction)?e:R.direction,focusOnClick:null!=(t=null==n?void 0:n.focusOnClick)?t:R.focusOnClick,loopAround:null!=(r=null==n?void 0:n.loopAround)?r:R.loopAround}})},[null==n?void 0:n.direction,null==n?void 0:n.focusOnClick,null==n?void 0:n.loopAround]);var s=(0,d.useMemo)(function(){return{state:i,dispatch:a}},[i]);return d.default.createElement(I.Provider,{value:s},t)},P=0;function D(e,t,n){void 0===n&&(n=null);var r=(0,d.useRef)(null);function a(){return r.current||(r.current="rti_".concat(++P)),r.current}var s=(0,d.useRef)(!1),l=(0,d.useContext)(I);(0,d.useEffect)(function(){var r=a();return l.dispatch({type:o.REGISTER_TAB_STOP,payload:{id:r,domElementRef:e,rowIndex:n,disabled:t}}),function(){l.dispatch({type:o.UNREGISTER_TAB_STOP,payload:{id:r}})}},[]),(0,d.useEffect)(function(){s.current?l.dispatch({type:o.TAB_STOP_UPDATED,payload:{id:a(),rowIndex:n,disabled:t}}):s.current=!0},[n,t]);var u=(0,d.useCallback)(function(e){var t=i[e.key];t&&(l.dispatch({type:o.KEY_DOWN,payload:{id:a(),key:t,ctrlKey:e.ctrlKey}}),e.preventDefault())},[]),c=(0,d.useCallback)(function(){l.dispatch({type:o.CLICKED,payload:{id:a()}})},[]),f=a()===l.state.selectedId,p=f&&l.state.allowFocusing;return[f?0:-1,p,u,c]}function O(e,t){(0,d.useEffect)(function(){e&&t.current&&t.current.focus()},[e])}e.s(["RovingTabIndexProvider",()=>A,"useFocusEffect",()=>O,"useRovingTabIndex",()=>D],864667)},861392,e=>{"use strict";var t=e.i(530658),n=e.i(680183),r=e.i(705705),i=e.i(627557),a=/[~^:?*[\\\0-\x20\x7F]/,o=/^(([A-Za-z0-9]+@|http(|s):\/\/)|(http(|s):\/\/[A-Za-z0-9]+@))([A-Za-z0-9.]+(:\d+)?)(?::|\/)([\d/\w.-]+?)$/,s=new RegExp([a,/^$/,/^\//,/\/$/,/\.lock$/,/\/{2,}/,/^\./,/\.$/,/\/\./,/\.\./,/@\{/,/^@$/,/^-/].map(function(e){return"(?:".concat(e.source,")")}).join("|"));function l(e){return 0===e.length||!a.test(e)}function u(e){return!s.test(e)}function c(e){return!s.test(e)}function d(e){return o.test(e)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"==typeof e?(0,i.removeBranchRefsPath)(e):"commit"in e?e.type===n.GitBranchType.LOCAL||t&&e.type===n.GitBranchType.TRACKED?e.name:"".concat(e.remote,"/").concat(e.name):e.name}function p(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return e;if("commit"in e)return e.type===n.GitBranchType.LOCAL||t&&e.type===n.GitBranchType.TRACKED?"refs/heads/".concat(e.name):"refs/remotes/".concat(e.remote,"/").concat(e.name);if(e.type===r.GitRefType.BRANCH)return"refs/heads/".concat(e.name);if(e.type===r.GitRefType.REMOTE_BRANCH)return"refs/remotes/".concat(e.remote,"/").concat(e.branch);throw Error("Unknown branch object")}function h(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return a&&!e.startsWith("refs/remotes/")?null:(0,t._)((0,i.splitRemoteFromBranch)(e),1)[0];if("commit"in e)return a&&e.type!==n.GitBranchType.REMOTE?null:e.remote;if(e.type===r.GitRefType.BRANCH)return null;if(e.type===r.GitRefType.REMOTE_BRANCH)return e.remote;throw Error("Unknown branch object")}function m(e,t){return e===t||null!==e&&null!==t&&p(e)===p(t)}e.s(["getBranchRemote",()=>h,"getFullBranchName",()=>p,"getQualifiedBranchName",()=>f,"hasOnlyValidBranchNameCharacters",()=>l,"isSameBranchRef",()=>m,"isValidBranchName",()=>u,"isValidRemoteName",()=>c,"isValidRemoteUrl",()=>d])},291689,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245);e.i(304277);var i=e.i(566901);function a(){var e=(0,n._)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return a=function(){return e},e}var o={},s=(0,r.gql)(a());function l(e){var n=(0,t._)({},o,e);return i.useLazyQuery(s,n)}e.s(["useGitUserImageByUsernameLazyQuery",()=>l])},458112,e=>{"use strict";e.s(["GITHUB_PRIVACY_EMAIL_DOMAIN",()=>"users.noreply.github.com","REPLIT_PRIVACY_EMAIL_DOMAIN",()=>"users.noreply.replit.com"])},944520,350098,688216,191967,825711,666853,e=>{"use strict";var t=e.i(276385),n=e.i(656077),r=e.i(953436),i=e.i(255701),a=e.i(618277),o=e.i(526962),s=e.i(480028),l=e.i(446530),u=e.i(613355),c=e.i(136540),d=e.i(960178),f=e.i(625484),p=e.i(297083),h=e.i(878420),m=e.i(64386),g=e.i(886513),x=e.i(530658),y=e.i(346715),b=e.i(817556),w=e.i(389959),_=e.i(790486),k=e.i(864667),S=e.i(167193),C=e.i(861392),j=e.i(680183),T=e.i(167392),E=e.i(568430),R=e.i(269848),I=e.i(40916),A=e.i(597865),P=e.i(529810),D=e.i(730792),O=e.i(954856),N=e.i(291689),M=e.i(334028),L=e.i(683855),B=e.i(458112),V=e.i(714165),F=e.i(751273),U=(0,l.cssRecord)({gitUserContainer:[u.rcss.flex.row],gitUserInnerContainer:[u.rcss.align.center,u.rcss.flex.row,{"& > :not(:first-child)":{marginLeft:s.tokens.space4}}],gitUserInnerContainerFlipped:[u.rcss.align.center,u.rcss.flex.rowReverse,{"& > :not(:last-child)":{marginLeft:s.tokens.space4}}],alignCenter:[u.rcss.align.center]});function G(e){var n=e.name,r=e.email,i=e.allowPlaceholderAvatar,a=void 0!==i&&i,o=e.color,s=void 0===o?"default":o,l=e.small,u=void 0!==l&&l,c=e.flip,p=void 0!==c&&c,h=e.placement,m=e.showTooltip;return void 0===m||m?(0,t.jsx)(f.View,{css:U.gitUserContainer,children:(0,t.jsx)(F.Tooltip,{placement:void 0===h?"bottom":h,tooltip:(0,t.jsx)(d.Text,{children:r}),children:(0,t.jsxs)(f.View,{css:p?U.gitUserInnerContainerFlipped:U.gitUserInnerContainer,children:[(0,t.jsx)($,{email:r,name:n,enablePlaceholder:a,small:u}),(0,t.jsx)(d.Text,{multiline:!1,color:s,variant:u?"small":"text",children:n})]})})}):(0,t.jsx)(f.View,{css:U.gitUserContainer,children:(0,t.jsxs)(f.View,{css:p?U.gitUserInnerContainerFlipped:U.gitUserInnerContainer,children:[(0,t.jsx)($,{email:r,name:n,enablePlaceholder:a,small:u}),(0,t.jsx)(d.Text,{multiline:!1,color:s,variant:u?"small":"text",children:n})]})})}function $(e){var n=e.name,r=e.email,i=e.enablePlaceholder,a=void 0!==i&&i,o=e.small,l=void 0!==o&&o,u=(0,x._)((0,N.useGitUserImageByUsernameLazyQuery)({initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1}),1)[0],c=(0,x._)((0,w.useState)(null),2),d=c[0],f=c[1];return(0,w.useEffect)(function(){(0,p._)(function(){var e,t,n,i,a,o,s,l,c,d;return(0,b._)(this,function(p){switch(p.label){case 0:if(!r.endsWith("@".concat(B.GITHUB_PRIVACY_EMAIL_DOMAIN)))return[3,1];return e=r.split("@")[0],(t=(0,x._)(e.split("+"),2))[0],n=t[1],f((0,L.sanitizeHref)("https://github.com/".concat(n,".png"))),[3,4];case 1:if(!r.endsWith("@".concat(B.REPLIT_PRIVACY_EMAIL_DOMAIN)))return[3,3];return o=r.split("@")[0],(s=(0,x._)(o.split("-"),2))[0],[4,u({variables:{username:s[1]}})];case 2:return(l=null==(a=p.sent().data)||null==(i=a.userByUsername)?void 0:i.image)&&f(l),[3,4];case 3:c=(0,O.md5)(r),(d=new URL("https://gravatar.com/avatar/".concat(c))).searchParams.append("d","404"),f(d.toString()),p.label=4;case 4:return[2]}})})()},[r,u]),(0,w.useMemo)(function(){var e=l?12:16;return null===d?a?(0,t.jsx)(M.default,{css:U.alignCenter,size:e,color:s.tokens.foregroundDefault}):null:(0,t.jsx)(V.Avatar,{css:U.alignCenter,username:n,src:d,onError:function(){return f(null)},size:e})},[d,a,l,n])}e.s(["default",()=>G],350098);var H=e.i(520739),z=e.i(352740),W=e.i(205104),q=e.i(916271),K=(0,l.cssRecord)({revertText:[u.rcss.color.orangeStronger,u.rcss.fontWeight.medium],mergeText:[u.rcss.color.purpleStronger,u.rcss.fontWeight.medium],pullRequestId:[u.rcss.fontWeight.medium],hash:[u.rcss.fontWeight.medium],filePathPrefix:[u.rcss.color.foregroundDimmest],commitBody:[u.rcss.font.code,{whiteSpace:"pre-wrap"},{fontSize:s.tokens.fontSizeSmall}],clickableName:[u.rcss.cursor.pointer,{"&:hover":{textDecoration:"underline"}}],tooltip:[u.rcss.display.inlineFlex,u.rcss.rowWithGap(4),u.rcss.align.center],path:[{fontSize:s.tokens.fontSizeSmall},u.rcss.font.code],currentBranchIndicator:[u.rcss.height(16),u.rcss.width(16),u.rcss.align.center],currentBranchDot:[u.rcss.height(6),u.rcss.width(6),u.rcss.backgroundColor.accentPrimaryStronger,u.rcss.borderRadius("full")],branchNameWrapper:[u.rcss.flex.row,u.rcss.align.center],fixTooltipDisplay:{"& > span":{display:"inline-block"}},headingWrapper:[u.rcss.display.inlineFlex,u.rcss.rowWithGap(4),u.rcss.align.center,u.rcss.flex.shrink(1),u.rcss.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},u.rcss.mr(4)],headingCurrent:[u.rcss.px(4)],current:[u.rcss.position.relative,u.rcss.top("-1px"),u.rcss.display.inlineFlex,u.rcss.pl(2),u.rcss.pr(8)],icon:[{verticalAlign:"baseline !important"},u.rcss.mr(4)],bodyContainer:[u.rcss.border({color:s.tokens.outlineDimmest,direction:"full"}),u.rcss.borderRadius(8),u.rcss.p(16)]});function Y(e){var n=e.text,r=e.className;return(0,t.jsx)("span",{className:r,css:K.revertText,children:n})}function Q(e){var n=e.text,r=e.className;return(0,t.jsx)("span",{className:r,css:K.mergeText,children:n})}function X(e){var n,r=e.id,i=e.hash,a=e.className;return n=void 0===i||i?"string"==typeof r&&r.startsWith("#")?r:"#".concat(r):"string"==typeof r&&r.startsWith("#")?r.slice(1):"".concat(r),(0,t.jsx)("span",{className:a,css:K.pullRequestId,children:n})}function Z(e){var n=e.hash,r=e.length,i=e.className;return(0,t.jsx)("span",{className:i,css:K.hash,children:n.slice(0,(void 0===r?8:r)+1)})}function J(e){var n=e.subject,r=e.remoteName,i=e.quoted,a=void 0!==i&&i,o=e.className;return r?(0,t.jsx)(q.default,{className:o,background:!1,lineBreaks:!0,themed:!0,useRemarkGfm:!0,remarkGitHubOptions:{repository:r},children:a?'"'.concat(n,'"'):n}):(0,t.jsx)("span",{className:o,children:a?'"'.concat(n,'"'):n})}function ee(e){var n=e.body,r=e.view,i=e.className;return"Source"===(void 0===r?"Source":r)?(0,t.jsx)(f.View,{css:K.bodyContainer,children:(0,t.jsx)("pre",{className:i,css:K.commitBody,children:n})}):(0,t.jsx)(f.View,{css:K.bodyContainer,children:(0,t.jsx)(q.default,{className:i,background:!1,mentionsLink:!0,lineBreaks:!0,themed:!0,useRemarkGfm:!0,children:n})})}function et(){return(0,t.jsx)("span",{css:K.fixTooltipDisplay,children:(0,t.jsx)(F.Tooltip,{tooltip:"This is your current branch",children:(0,t.jsx)(f.View,{css:K.currentBranchIndicator,children:(0,t.jsx)(f.View,{css:K.currentBranchDot})})})})}function en(e){var n=e.name,r=e.remote,i=e.current,a=void 0!==i&&i,o=e.heading,s=void 0!==o&&o,l=e.icon,u=void 0!==l&&l,c=e.onClick,f=e.className,p=null;return(!0===u?p=s?(0,t.jsx)(z.default,{size:16}):(0,t.jsx)(z.default,{css:K.icon,size:12}):u&&(p=u),s)?(0,t.jsxs)("div",{css:K.headingWrapper,children:[p,(0,t.jsxs)(d.Text,{variant:"subheadDefault",multiline:!1,children:[r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{css:K.headingRemote,children:r}),(0,t.jsx)("span",{css:K.headingRemote,children:"/"})]}):null,c?(0,t.jsx)(ea,{label:"View branch",onClick:c,children:n}):(0,t.jsx)("span",{children:n})]}),a?(0,t.jsx)("span",{css:s?K.headingCurrent:K.current,children:(0,t.jsx)(et,{})}):null]}):(0,t.jsxs)("span",{className:f,css:K.branchNameWrapper,children:[p,r?(0,t.jsxs)("span",{children:[r,"/"]}):null,c?(0,t.jsx)(ea,{label:"View branch",onClick:c,children:n}):(0,t.jsx)("span",{children:n}),a?(0,t.jsx)(et,{}):null]})}function er(e){var n=e.path,r=e.prefix,i=e.onClick,a=e.className,o=(0,W.getFileName)(n),s=!i&&(o===n||null!==r&&r+o===n);return(0,t.jsx)("span",{css:K.fixTooltipDisplay,children:(0,t.jsx)(F.Tooltip,{maxWidth:"auto",tooltip:(0,t.jsx)(ei,{path:n,openable:!!i}),isDisabled:s,children:i?(0,t.jsxs)(ea,{label:"Open ".concat(o),onClick:i,className:a,children:[r?(0,t.jsx)("span",{css:K.filePathPrefix,children:r}):null,(0,t.jsx)("span",{children:o})]}):(0,t.jsxs)("span",{className:a,children:[r?(0,t.jsx)("span",{css:K.filePathPrefix,children:r}):null,(0,t.jsx)("span",{children:o})]})})})}function ei(e){var n=e.path,r=e.openable;return(0,t.jsxs)("span",{css:K.tooltip,children:[void 0===r||r?(0,t.jsx)("span",{children:"Open"}):null,(0,t.jsx)("span",{css:K.path,children:n})]})}function ea(e){var n=e.label,r=e.onClick,i=e.className,a=e.children;return(0,t.jsx)("span",{className:i,css:K.clickableName,role:"button",tabIndex:-1,"aria-label":n,onClick:r,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==r||r())},children:a})}e.s(["BranchName",()=>en,"CommitBody",()=>ee,"CommitSubject",()=>J,"FilePath",()=>er,"Hash",()=>Z,"MergeText",()=>Q,"PullRequestID",()=>X,"RevertText",()=>Y],688216);var eo=e.i(754873),es=e.i(140487),el=e.i(988676),eu=e.i(604963),ec=e.i(51054),ed=e.i(257811),ef=f.SpecializedView.button,ep=(0,l.cssRecord)({fullWidth:[u.rcss.width("100%")],paddedX:[u.rcss.px(8)],loadingContainer:[u.rcss.display.flex,u.rcss.align.center,u.rcss.justify.center,u.rcss.py(48)],menu:[u.rcss.maxWidth(390),u.rcss.width(280),u.rcss.display.flex,u.rcss.flex.shrink(1),u.rcss.maxHeight(640),u.rcss.borderRadius(8),u.rcss.overflow("hidden")],form:[u.rcss.display.flex,u.rcss.flex.growAndShrink(1),u.rcss.flex.column,u.rcss.overflow("hidden")],body:[u.rcss.py(8),u.rcss.colWithGap(8),u.rcss.flex.growAndShrink(1),u.rcss.overflow("auto")],selector:[u.rcss.display.flex,u.rcss.align.center,u.rcss.rowWithGap(4),u.rcss.color.foregroundDefault],menuItem:[{backgroundColor:"inherit"},eo.interactive.listItem,u.rcss.px(8),u.rcss.py(4),u.rcss.borderRadius(0),u.rcss.align.start],virtualItem:[u.rcss.position.absolute,u.rcss.top(0),u.rcss.left(0),u.rcss.width("100%"),u.rcss.overflow("hidden")],virtualList:[u.rcss.position.relative],divider:[u.rcss.mt(8),u.rcss.mb(8),u.rcss.ml(0),u.rcss.mr(0)],errorText:[u.rcss.color.accentNegativeStronger,u.rcss.mt(4)],createBranchButton:[u.rcss.height(32),u.rcss.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),eh=function(e,t){var n=(0,D.useNotifyGitError)(),r=(0,P.default)().git,i=(0,x._)((0,w.useState)(!0),2),a=i[0],s=i[1],l=(0,A.default)(function(e){return(0,p._)(function(){var t,r,i,a,o,l,u,c,d,f,p,h,m,g,x,y,w,_,k,S,j;return(0,b._)(this,function(b){switch(b.label){case 0:return s(!0),[4,e.isInitialized()];case 1:if((t=b.sent()).error)return n(t.error),s(!1),[2,t];if(!t.initialized)return s(!1),[2,{active:[],stale:[],important:[],error:null}];return[4,e.listBranches()];case 2:if((r=b.sent()).error)return n(r.error),s(!1),[2,r];return[4,e.findDefaultBranches()];case 3:if((i=b.sent()).error)return n(i.error),s(!1),[2,i];a=r.branches,o=new Set,l=!0,u=!1,c=void 0;try{for(d=function(){var e=p.value,t=a.find(function(t){return(0,C.isSameBranchRef)(t,e)});t&&o.add(t)},f=i.refs[Symbol.iterator]();!(l=(p=f.next()).done);l=!0)d()}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}h=Date.now()-72e6,m=[],g=[],x=!0,y=!1,w=void 0;try{for(_=a[Symbol.iterator]();!(x=(k=_.next()).done);x=!0)S=k.value,o.has(S)||(S.commit.author.date>h?m.push(S):g.push(S))}catch(e){y=!0,w=e}finally{try{x||null==_.return||_.return()}finally{if(y)throw w}}return j=Array.from(o),s(!1),[2,{active:m,stale:g,important:j,error:null}]}})})()},[n]),u=function(t){return(0,p._)(function(){var i;return(0,b._)(this,function(o){switch(o.label){case 0:if(a||(0,C.isSameBranchRef)(e,t))return[2];return s(!0),[4,r.switchBranch(t)];case 1:return(i=o.sent()).error?(n(i.error),s(!1)):(r.forceRefresh(),(0,H.trackGitPaneEvent)("branch-switched")),[2]}})})()},c=function(e){return(0,p._)(function(){var t;return(0,b._)(this,function(i){switch(i.label){case 0:if(a||""===e)return[2];return s(!0),[4,r.createBranch({name:e,checkout:!0})];case 1:return(t=i.sent()).error?(n(t.error),s(!1)):(r.forceRefresh(),(0,H.trackGitPaneEvent)("branch-created")),[2]}})})()};if((0,w.useEffect)(function(){null!==e&&(s(!1),t({type:o.GitPaneModeType.CURRENT_BRANCH}))},[e,t]),null===l||a)return{loading:a,active:[],stale:[],important:[],handleSwitchBranch:u,handleCreateBranch:c,error:null};if(l.error)return{loading:a,active:[],stale:[],important:[],handleSwitchBranch:u,handleCreateBranch:c,error:l.error};var d=l.active,f=l.stale,h=l.important;return{loading:a,active:null!=d?d:[],stale:null!=f?f:[],important:null!=h?h:[],handleSwitchBranch:u,handleCreateBranch:c,error:null}},em=function(e){var n=e.branch,r=eh(n,e.switchMode),i=r.loading,a=r.active,o=r.important,s=r.stale,l=r.handleSwitchBranch,u=r.handleCreateBranch,c=(0,x._)((0,w.useState)(!1),2),d=c[0],f=c[1],h=(0,x._)((0,w.useState)(""),2),m=h[0],g=h[1],y=(0,x._)((0,w.useState)(!1),2),_=y[0],k=y[1];return(0,t.jsx)(eS,{isOpen:d,setIsOpen:f,important:o,active:a,stale:s,current:n,query:m,setQuery:g,onSwitchBranch:l,createBranchLoading:_,createBranch:function(){return(0,p._)(function(){return(0,b._)(this,function(e){switch(e.label){case 0:return k(!0),[4,u(m)];case 1:return e.sent(),g(""),k(!1),[2]}})})()},loading:i})},eg=function(e){var n=e.onClick,r=e.children,i=(0,w.useRef)(null),a=(0,x._)((0,k.useRovingTabIndex)(i,!1),4),o=a[0],s=a[1],l=a[2],u=a[3];return(0,k.useFocusEffect)(s,i),(0,t.jsx)(ef,{ref:i,role:"menuitem",css:ep.menuItem,onClick:function(e){u(),n(e)},onKeyDown:l,tabIndex:o,children:r})},ev=function(e){var n=e.branch;return(0,t.jsxs)(f.View,{shrink:!0,row:!0,gap:8,align:"center",children:[(0,t.jsx)(G,{name:n.commit.author.name,email:n.commit.author.email,color:"dimmer",allowPlaceholderAvatar:!0,placement:"top",showTooltip:!1,small:!0}),(0,t.jsx)(d.Text,{color:"dimmer",variant:"small",children:(0,ed.toRelativeDate)({date:n.commit.author.date})})]})},ex=function(e){var n=e.branch,r=e.current,i=e.onSwitchBranch,a=(0,w.useMemo)(function(){return(0,S.branchesEqual)(n,r)},[n,r]);return(0,t.jsxs)(eg,{onClick:function(){return i(n)},children:[(0,t.jsx)(d.Text,{multiline:!1,css:u.rcss.color.foregroundDefault,children:(0,t.jsx)(en,{name:n.name,remote:n.type===j.GitBranchType.REMOTE?n.remote:null,current:a})}),(0,t.jsx)(ev,{branch:n})]})},ey=function(e,t){return t.filter(function(t){return(0,C.getFullBranchName)(t).toLowerCase().includes(e.toLowerCase())})},eb=function(e,t,n){var r=0,i=[];if(e.length+t.length+n.length===0)return i;if(e.length>0){i.push({key:"heading-important-".concat(r++),type:"heading",title:"Important"});for(var a=0;a<e.length;++a)i.push({key:"branch-important-".concat(r++),type:"branch",branch:e[a]});t.length+n.length>0&&i.push({key:"divider-important-".concat(r++),type:"divider"})}if(t.length>0){i.push({key:"heading-active-".concat(r++),type:"heading",title:"Active"});for(var o=0;o<t.length;++o)i.push({key:"branch-active-".concat(r++),type:"branch",branch:t[o]});n.length>0&&i.push({key:"divider-active-".concat(r++),type:"divider"})}if(n.length>0){i.push({key:"heading-stale-".concat(r++),type:"heading",title:"Stale"});for(var s=0;s<n.length;++s)i.push({key:"branch-stale-".concat(r++),type:"branch",branch:n[s]})}return i},ew=function(e){var n=e.item,r=e.current,i=e.onSwitchBranch;return"heading"===n.type?(0,t.jsx)(f.View,{css:ep.paddedX,children:(0,t.jsx)(d.Text,{multiline:!1,variant:"small",color:"dimmest",css:u.rcss.fontWeight.medium,children:n.title})}):"divider"===n.type?(0,t.jsx)(f.View,{css:ep.divider,children:(0,t.jsx)(el.DividerH,{})}):(0,t.jsx)(f.View,{children:(0,t.jsx)(ex,{branch:n.branch,current:r,onSwitchBranch:i})})},e_=function(e){var n=e.items,r=e.current,i=e.onSwitchBranch,a=(0,w.useRef)(null),o=(0,_.useVirtualizer)({overscan:10,count:n.length,getScrollElement:function(){return a.current},estimateSize:function(e){var t,r;return null!=(t=void 0===(r=n[e])?0:"heading"===r.type?30:"branch"===r.type?65:"divider"===r.type?20:void 0)?t:0}});return(0,t.jsx)(k.RovingTabIndexProvider,{options:{direction:"vertical"},children:(0,t.jsx)("div",{css:ep.body,ref:a,children:(0,t.jsx)("ul",{css:ep.virtualList,style:{height:"".concat(o.getTotalSize(),"px")},children:o.getVirtualItems().map(function(e){return(0,t.jsx)("div",{css:ep.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:o.measureElement,children:(0,t.jsx)(ew,{item:n[e.index],current:r,onSwitchBranch:i})},e.key.toString())})})})})},ek=function(e){var n=e.query,r=e.setQuery,i=e.filteredImportant,a=e.filteredActive,o=e.filteredStale,s=e.current,l=e.onSwitchBranch,u=e.createBranchLoading,c=e.createBranch,p=e.loading,h=(0,w.useMemo)(function(){return eb(i,a,o)},[i,a,o]),m='Create Branch "'.concat(n,'"'),g=(0,w.useMemo)(function(){return(0,y._)(i).concat((0,y._)(a),(0,y._)(o)).some(function(e){return e.name===n})},[n,i,a,o]);return(0,t.jsx)(f.View,{css:ep.menu,children:(0,t.jsx)("form",{onSubmit:function(e){e.preventDefault(),c()},css:ep.form,children:p?(0,t.jsx)(f.View,{css:ep.loadingContainer,children:(0,t.jsx)(R.default,{})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.View,{p:8,children:(0,t.jsx)(ec.SearchBar,{value:n,onChange:function(e){r(e.target.value)},onClear:function(){r("")},loading:!1,placeholder:"Find or create a branch..."})}),(0,t.jsx)(f.View,{css:ep.paddedX,children:(0,t.jsx)(el.DividerH,{})}),h.length>0?(0,t.jsx)(e_,{items:h,current:s,onSwitchBranch:l}):null,g||""===n?null:(0,t.jsxs)(f.View,{p:8,children:[(0,t.jsx)(es.Button,{text:m,size:"small",iconLeft:u?(0,t.jsx)(R.default,{}):(0,t.jsx)(I.default,{}),stretch:!0,css:ep.createBranchButton,disabled:u||!(0,C.isValidBranchName)(n),type:"submit"}),(0,C.isValidBranchName)(n)?null:(0,t.jsx)(d.Text,{variant:"small",css:ep.errorText,multiline:!1,children:"Invalid branch name"})]})]})})})},eS=function(e){var n=e.isOpen,r=e.setIsOpen,i=e.important,a=e.active,o=e.stale,s=e.current,l=e.query,u=e.setQuery,c=e.onSwitchBranch,f=e.createBranchLoading,p=e.createBranch,x=e.loading,y=(0,w.useMemo)(function(){return ey(l,i)},[l,i]),b=(0,w.useMemo)(function(){return ey(l,a)},[l,a]),_=(0,w.useMemo)(function(){return ey(l,o)},[l,o]);return(0,t.jsxs)(eu.PopoverTrigger,{label:"View Branches",placement:"bottom",isOpen:n,onOpenChange:function(e){r(e)},offset:16,children:[function(e){var r=e.onClick,i=(0,g._)(e,["onClick"]);return(0,t.jsx)(es.Button,{variant:"nofill",text:(0,t.jsxs)(d.Text,(0,m._)((0,h._)({multiline:!1,variant:"small",css:ep.selector},i),{children:[(0,t.jsx)(en,{name:s.name,remote:s.type===j.GitBranchType.REMOTE?s.remote:null,icon:!0}),n?(0,t.jsx)(E.default,{}):(0,t.jsx)(T.default,{})]})),size:"small",stretch:!0,alignment:"start",css:ep.fullWidth,onClick:r})},(0,t.jsx)(ek,{query:l,setQuery:u,filteredImportant:y,filteredActive:b,filteredStale:_,current:s,onSwitchBranch:c,createBranchLoading:f,createBranch:p,loading:x})]})},eC=(0,l.cssRecord)({container:[u.rcss.height(36),u.rcss.px(8),u.rcss.py(4),u.rcss.rowWithGap(8),u.rcss.backgroundColor.backgroundDefault,u.rcss.align.center,u.rcss.justify.spaceBetween,u.rcss.zIndex(1),{borderBottom:"1px solid ".concat(s.tokens.outlineDimmer)}],left:[u.rcss.rowWithGap(4),u.rcss.align.center,u.rcss.flex.growAndShrink(1)],right:[u.rcss.rowWithGap(8),u.rcss.align.center],back:{marginLeft:-4}}),ej=function(e){var n=e.openSettings;return(0,t.jsxs)(f.View,{css:eC.container,children:[(0,t.jsxs)(f.View,{css:eC.left,children:[(0,t.jsx)(r.default,{size:16}),(0,t.jsx)(d.Text,{variant:"subheadDefault",multiline:!1,children:"Repository"})]}),(0,t.jsxs)(f.View,{css:eC.right,children:[(0,t.jsx)(eD,{openSettings:n}),(0,t.jsx)(a.RefreshButton,{})]})]})},eT=function(e){var n=e.branch,r=e.switchMode,i=e.openSettings;return(0,t.jsxs)(f.View,{css:eC.container,children:[(0,t.jsx)(f.View,{css:eC.left,children:(0,t.jsx)(em,{branch:n,switchMode:r})}),(0,t.jsxs)(f.View,{css:eC.right,children:[(0,t.jsx)(eD,{openSettings:i}),(0,t.jsx)(a.RefreshButton,{})]})]})},eE=function(e){var n=e.onBack;return(0,t.jsxs)(f.View,{css:eC.container,children:[(0,t.jsxs)(f.View,{css:eC.left,children:[(0,t.jsx)(eA,{onBack:n,alt:"Back"}),(0,t.jsx)(d.Text,{variant:"subheadDefault",multiline:!1,children:"Settings"})]}),(0,t.jsx)(f.View,{css:eC.right})]})},eR=function(e){var n=e.switchMode,r=e.openSettings;return(0,t.jsxs)(f.View,{css:eC.container,children:[(0,t.jsxs)(f.View,{css:eC.left,children:[(0,t.jsx)(eP,{switchMode:n}),(0,t.jsx)(d.Text,{variant:"subheadDefault",multiline:!1,children:"Commit"})]}),(0,t.jsxs)(f.View,{css:eC.right,children:[(0,t.jsx)(eD,{openSettings:r}),(0,t.jsx)(a.RefreshButton,{})]})]})};function eI(e){var n=e.mode,r=e.branch,i=e.switchMode,a=e.onBack,s=function(){return i({type:o.GitPaneModeType.SETTINGS})};switch(n){case o.GitPaneModeType.DASHBOARD:return(0,t.jsx)(ej,{openSettings:s});case o.GitPaneModeType.BRANCH:case o.GitPaneModeType.CURRENT_BRANCH:if(null===r)throw Error("Tried to show branch in header, but branch is null");return(0,t.jsx)(eT,{branch:r,switchMode:i,openSettings:s});case o.GitPaneModeType.SETTINGS:return(0,t.jsx)(eE,{onBack:a});case o.GitPaneModeType.COMMIT:return(0,t.jsx)(eR,{switchMode:i,openSettings:s});default:return(0,t.jsxs)(f.View,{css:eC.container,children:[(0,t.jsx)(f.View,{css:eC.left}),(0,t.jsx)(f.View,{css:eC.right})]})}}function eA(e){var r=e.onBack,i=e.alt;return(0,t.jsx)(c.IconButton,{css:eC.back,alt:i,size:28,onClick:r,children:(0,t.jsx)(n.default,{})})}function eP(e){var n=e.switchMode;return(0,t.jsx)(eA,{css:eC.back,onBack:function(){return n({type:o.GitPaneModeType.CURRENT_BRANCH})},alt:"Back to current branch"})}function eD(e){var n=e.openSettings;return(0,t.jsx)(c.IconButton,{alt:"Settings",size:24,onClick:n,children:(0,t.jsx)(i.default,{})})}function eO(){return(0,t.jsxs)(f.View,{children:[(0,t.jsx)(d.Text,{multiline:!1,children:"Unsupported state: you are applying a mailbox patch."}),(0,t.jsx)(d.Text,{multiline:!1,children:"Please finish the patch manually."})]})}function eN(){return(0,t.jsxs)(f.View,{children:[(0,t.jsx)(d.Text,{multiline:!1,children:"Unsupported state: you are in the middle of a bisect."}),(0,t.jsx)(d.Text,{multiline:!1,children:"Please finish the bisect manually."})]})}e.s(["default",()=>eI],944520),e.s(["default",()=>eO],191967),e.s(["default",()=>eN],825711);var eM=e.i(569384),eL=e.i(973245),eB=e.i(304277);function eV(){var e=(0,eM._)(["\n  query PushBranchButtonIsProjectRepl($id: String!) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return eV=function(){return e},e}e.i(566901);var eF={},eU=(0,eL.gql)(eV());function eG(e){var t=(0,h._)({},eF,e);return eB.useQuery(eU,t)}e.s(["usePushBranchButtonIsProjectReplQuery",()=>eG],666853)},791675,e=>{"use strict";var t,n,r=((t={}).FS_CHANGE="FS_CHANGE",t.FORCED_REFRESH="FORCED_REFRESH",t.NEW_PROFILE="NEW_PROFILE",t.CHANGED_PROFILE="CHANGED_PROFILE",t),i=((n={}).REPLIT_DEFAULT="REPLIT_DEFAULT",n.GITHUB="GITHUB",n.BITBUCKET="BITBUCKET",n.GITLAB="GITLAB",n);e.s(["GitEvent",()=>r,"GitProfileProvider",()=>i])},891156,e=>{e.v({connectExistingButtonDesktop:"PushBranchButton-module__7kiiaq__connectExistingButtonDesktop",connectExistingButtonMobile:"PushBranchButton-module__7kiiaq__connectExistingButtonMobile",mobileButton:"PushBranchButton-module__7kiiaq__mobileButton",remoteStatusBanner:"PushBranchButton-module__7kiiaq__remoteStatusBanner",remoteStatusBannerDesktop:"PushBranchButton-module__7kiiaq__remoteStatusBannerDesktop",remoteStatusBannerMobile:"PushBranchButton-module__7kiiaq__remoteStatusBannerMobile"})},243599,242816,36397,368085,264887,e=>{"use strict";e.s(["DeprecationBanner",()=>K,"PushBranchButton",()=>Q],243599);var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(276385),a=e.i(389959),o=e.i(666853),s=e.i(680183),l=e.i(627557),u=e.i(490262),c=e.i(416746),d=e.i(269848),f=e.i(220743),p=e.i(255701),h=e.i(993796),m=e.i(207237),g=e.i(597865),x=e.i(529810),y=e.i(730792),b=e.i(138290),w=e.i(520739),_=e.i(791675);function k(){var e=(0,g.default)(function(e){return(0,t._)(function(){return(0,r._)(this,function(t){return[2,{connectedToGithub:e.hasProfile(_.GitProfileProvider.GITHUB),error:null}]})})()});return null==e||e.error?null:e.connectedToGithub}function S(){var e=(0,h.useFlag)({controlName:"flag-github-connection-migration",default:!1}),n=(0,g.default)(function(n){return(0,t._)(function(){var i;return(0,r._)(this,function(a){switch(a.label){case 0:var o,s;return i={},[4,(o=n,s=e,(0,t._)(function(){return(0,r._)(this,function(e){switch(e.label){case 0:return[4,o.getProfiles()];case 1:return[2,e.sent().filter(function(e){return e.provider!==_.GitProfileProvider.REPLIT_DEFAULT&&(!s||e.provider!==_.GitProfileProvider.GITHUB||!!e.isSourceOpenInt)}).length>0]}})})())];case 1:return[2,(i.connectedToGitProvider=a.sent(),i.error=null,i)]}})})()});return null==n||n.error?null:n.connectedToGitProvider}e.s(["default",()=>k],242816),e.s(["default",()=>S],36397);var C=e.i(526962),j=e.i(952e3),T=e.i(861392),E=e.i(183035),R=e.i(602686),I=e.i(967629),A=e.i(613355),P=e.i(140487),D=e.i(607278),O=e.i(960178),N=e.i(625484),M=e.i(352758),L=(0,I.css)(A.rcss.rowWithGap(4)),B=(0,I.css)(A.rcss.flex.growAndShrink(1)),V=(0,I.css)(A.rcss.color.accentNegativeStronger,A.rcss.pl(4));function F(e){var o=e.initialRemoteUrl,s=e.remoteName,l=e.updateRemote,u=(0,x.default)().git,c=(0,n._)((0,a.useState)(),2),d=c[0],f=c[1];(0,a.useEffect)(function(){f(void 0)},[o]);var p=(0,n._)((0,a.useState)(),2),h=p[0],m=p[1],g=(0,n._)((0,a.useState)(!1),2),y=g[0],_=g[1],k=function(){return(0,t._)(function(){var e,t,n;return(0,r._)(this,function(r){switch(r.label){case 0:if(r.trys.push([0,5,6,7]),!d)return[2];if(_(!0),!(0,T.isValidRemoteUrl)(d))throw Error("Invalid remote url.");return[4,u.getRemotes()];case 1:if((e=r.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));if(!e.remotes.has(s))return[3,3];return[4,u.setRemoteURL({remote:s,url:d})];case 2:if((t=r.sent()).error)throw(0,b.reportErrorToSentry)({context:"remote-input",gitService:u,result:t,data:{remote:s,url:d}}),Error("Error (".concat(t.error,") setting ").concat(s," to use ").concat(d," as a remote."));return(0,w.trackGitPaneEvent)("remote-edited"),l(d),[2];case 3:return[4,u.addRemote({name:s,url:d})];case 4:if((n=r.sent()).error)throw(0,b.reportErrorToSentry)({context:"remote-input",gitService:u,result:n,data:{remote:s,url:d}}),Error("Error (".concat(n.error,") adding ").concat(s," ").concat(d," as a remote."));return(0,w.trackGitPaneEvent)("remote-added"),[3,7];case 5:return m(r.sent().message),[3,7];case 6:return _(!1),[7];case 7:return[2]}})})()};return(0,i.jsxs)(N.View,{grow:!0,children:[(0,i.jsx)(D.Input,{name:"Remote URL",placeholder:"Enter Remote URL",value:null!=d?d:o,autoComplete:"off",autoCorrect:"off",onChange:function(e){m(void 0),f(e.target.value)},inputMode:"url","aria-label":"Remote URL",onKeyDown:function(e){"Enter"===e.key&&k()}}),h?(0,i.jsx)(O.Text,{variant:"small",css:V,multiline:!1,children:h}):null,d&&d!==o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(M.default,{height:1}),(0,i.jsxs)(N.View,{css:L,children:[(0,i.jsx)(P.Button,{css:B,text:"Cancel",iconLeft:(0,i.jsx)(R.default,{}),onClick:function(){return f(void 0)}}),(0,i.jsx)(P.Button,{css:B,text:y?"Saving":"Save",loading:y,colorway:"primary",iconLeft:(0,i.jsx)(E.default,{}),onClick:k})]})]}):null]})}e.s(["default",()=>F],368085);var U=e.i(739521),G=e.i(624782),$=e.i(396776),H=e.i(891156),z=function(){var e=(0,n._)((0,a.useState)(""),2),t=e[0],r=e[1];return(0,i.jsxs)(N.View,{gap:8,children:[(0,i.jsx)(O.Text,{color:"dimmest",multiline:!1,children:"Connect Existing Remote"}),(0,i.jsx)(F,{remoteName:"origin",initialRemoteUrl:t,updateRemote:r})]})},W=function(e){var t=e.onCreateRemoteClick,r=(0,n._)((0,a.useState)(!1),2),o=r[0],s=r[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($.StatusBanner,{text:(0,i.jsxs)(N.View,{gap:8,children:[(0,i.jsxs)(N.View,{row:!0,justify:"space-between",align:"center",gap:8,children:[(0,i.jsx)("span",{children:"No remote repositories configured. To push your changes, create a new repository or connect to an existing one."}),(0,i.jsxs)(N.View,{row:!0,gap:4,clsx:H.default.remoteStatusBannerDesktop,children:[(0,i.jsx)(P.Button,{text:"Create Remote",onClick:t,colorway:"primary"}),(0,i.jsx)(P.Button,{text:"Connect Existing",onClick:function(){s(!0)},clsx:H.default.connectExistingButtonDesktop,variant:"outlined"})]})]}),(0,i.jsxs)(N.View,{row:!0,gap:4,clsx:H.default.remoteStatusBannerMobile,align:"center",children:[(0,i.jsx)(P.Button,{text:"Create Remote",clsx:H.default.mobileButton,onClick:t,colorway:"primary"}),(0,i.jsx)(P.Button,{text:"Connect Existing",clsx:H.default.connectExistingButtonMobile,onClick:function(){s(!0)},variant:"outlined"})]})]}),closable:!1,clsx:H.default.remoteStatusBanner}),(0,i.jsx)(U.Modal,{isOpen:o,onRequestClose:function(){return s(!1)},children:(0,i.jsx)(z,{})})]})},q=function(){var e=(0,y.useGitPaneModeSwitcher)();return(0,i.jsx)($.StatusBanner,{icon:(0,i.jsx)(c.default,{}),text:"No Git provider configured. To push your changes, connect to a provider.",action:(0,i.jsx)(P.Button,{size:"small",variant:"outlined",onClick:function(){e({type:C.GitPaneModeType.SETTINGS})},iconLeft:(0,i.jsx)(p.default,{}),text:"Settings"})})},K=function(e){var t=e.onViewSettingsClick;return(0,i.jsx)($.StatusBanner,{colorway:"warning",icon:(0,i.jsx)(c.default,{}),text:"Your GitHub connection has been deprecated. Please reconnect to continue using it.",action:(0,i.jsx)(P.Button,{size:"small",colorway:"warning",variant:"outlined",onClick:t,iconLeft:(0,i.jsx)(p.default,{}),text:"Settings"})})},Y=function(e){var t=e.loading,n=e.nonProjectRemote,r=e.isConnectedToValidGitProvider,a=e.isConnectedToGitHub,o=e.onCreateRemoteClick,s=(0,h.useFlag)({controlName:"flag-github-connection-migration"}),l=(0,y.useGitPaneModeSwitcher)();return s&&a&&!r?(0,i.jsx)(K,{onViewSettingsClick:function(){return l({type:C.GitPaneModeType.SETTINGS})}}):r?t||n?null:(0,i.jsx)(W,{onCreateRemoteClick:o}):(0,i.jsx)(q,{})};function Q(e){var c,p,h,_=e.branch,C=e.performPaneOperation,T=e.onCreateRemoteClick,E=(0,n._)((0,a.useState)(!1),2),R=E[0],I=E[1],A=(0,n._)((0,a.useState)(!1),2),D=A[0],M=A[1],L=(0,n._)((0,a.useState)(null),2),B=L[0],V=L[1],F=(0,n._)((0,a.useState)(!1),2),$=F[0],H=F[1],z=(0,m.default)(),W=k(),q=(0,o.usePushBranchButtonIsProjectReplQuery)({variables:{id:z}}).data,K=S(),Q=(null==q||null==(c=q.getRepl)?void 0:c.__typename)==="Repl"&&(null==(p=q.getRepl.project)?void 0:p.id)||!1,X=(0,y.useNotifyGitError)(),Z=(0,x.default)().git,J=(0,g.default)(function(e){return(0,t._)(function(){var t,n,i,a,o,s,u,c,d,f;return(0,r._)(this,function(r){switch(r.label){case 0:return[4,e.isInitialized()];case 1:if((n=r.sent()).error)return X(n.error),(0,b.reportErrorToSentry)({context:"publish-branch-button-initialized",gitService:e,result:n}),[2,{remote:null,error:n.error}];if(!n.initialized)return[2,{remote:null,error:null}];return[4,e.getRemotes()];case 2:if((i=r.sent()).error)return(0,b.reportErrorToSentry)({context:"publish-branch-button-get-remotes",gitService:e,result:i}),X(i.error),[2,i];return a=(0,j.getDefaultNonProjectRemote)(i.remotes),[4,e.status()];case 3:if((o=r.sent()).error)return X(o.error),(0,b.reportErrorToSentry)({context:"publish-branch-button-status",gitService:e,result:o}),[2,o];if(!(o.branch&&a))return[3,5];return s=(0,l.removeBranchRefsPath)(o.branch),u="refs/remotes/".concat(a,"/").concat(s),[4,e.branchExists(u)];case 4:(c=r.sent()).error?((0,b.reportErrorToSentry)({context:"publish-branch-button-branch-exists",gitService:e,result:c,data:{upstream:s,fullRemoteRef:u}}),X(c.error)):c.exists&&V("".concat(a,"/").concat(s)),r.label=5;case 5:return f=a&&null!=(d=null==(t=i.remotes.get(a))?void 0:t.fetch)?d:null,[2,{remote:a,remoteUrl:f,error:null}]}})})()},[X],{keepStaleResult:!1});if((0,a.useEffect)(function(){(0,t._)(function(){var e;return(0,r._)(this,function(t){switch(t.label){case 0:if(!($&&B))return[3,2];return[4,Z.setBranchUpstream({upstream:B})];case 1:(e=t.sent()).error&&((0,b.reportErrorToSentry)({context:"publish-branch-button-set-branch-upstream",gitService:Z,result:e,data:{upstream:B}}),X(e.error)),H(!1),V(null),t.label=2;case 2:return[2]}})})()},[Z,X,$,B]),null==J?void 0:J.error)return null;var ee=J?J.remote:null,et=null===J,en=_.type!==s.GitBranchType.LOCAL||!ee||$,er="".concat(ee,"/").concat(_.name);return(h=R?"Pushing to '".concat(er,"'..."):_.type!==s.GitBranchType.LOCAL?"Branch has already been pushed to '".concat(er,"'"):et?"Checking if branch ".concat(_.name," can be pushed..."):ee?"Push branch as '".concat(er,"'"):"No remotes to push to",Q&&J&&!ee)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P.Button,{iconLeft:(0,i.jsx)(G.Pill,{text:"Beta",variant:"outline",colorway:"blue"}),text:"Collaborate in the Project pane",onClick:function(){C({operation:"open",pane:{type:"project"}})},iconRight:(0,i.jsx)(f.default,{})}),(0,i.jsx)(O.Text,{color:"dimmer",children:"Use the Project pane to merge your changes between repls and collaborate with your teammates. You've received early access to this feature with your Replit Teams subscription."})]}):(0,i.jsxs)(i.Fragment,{children:[B?(0,i.jsx)(U.Modal,{isOpen:D,onRequestClose:function(){return M(!1)},children:(0,i.jsxs)(N.View,{gap:24,children:[(0,i.jsx)(O.Text,{variant:"headerDefault",children:"Branch already exists"}),(0,i.jsx)(O.Text,{children:"Upstream branch '".concat(B,"' already exists.\n          To push the branch, please confirm you would like to set upstream branch to it.")}),(0,i.jsx)(P.Button,{text:"Set upstream to '".concat(B,"'"),onClick:function(){B&&(H(!0),M(!1))}})]})}):null,(0,i.jsx)(Y,{loading:et,nonProjectRemote:ee,isConnectedToGitHub:W,isConnectedToValidGitProvider:null!=K&&K,onCreateRemoteClick:T}),(0,i.jsx)(P.Button,{text:h,iconLeft:et||R?(0,i.jsx)(d.default,{}):(0,i.jsx)(u.default,{}),onClick:function(){return(0,t._)(function(){var e;return(0,r._)(this,function(t){switch(t.label){case 0:if(!ee||R)return[2];if(B)return M(!0),[2];return I(!0),[4,Z.push({publish:{remote:ee}})];case 1:return(e=t.sent()).error?(I(!1),X(e.error),(0,b.reportErrorToSentry)({context:"publish-branch-button-push",gitService:Z,result:e,data:{remote:ee}})):(Z.forceRefresh(),(0,w.trackGitPaneEvent)("branch-published-to-remote")),[2]}})})()},loading:et||R,disabled:en})]})}var X=function(e,t,n){var r=new Set,i=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;r.add(u.hash)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}var c=!0,d=!1,f=void 0;try{for(var p,h=n[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var m=p.value;r.add(m.hash)}}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}return e.filter(function(e){return!r.has(e.hash)})};function Z(e,i,o){var s=(0,y.useNotifyGitError)(),l=(0,g.default)(function(a){return(0,t._)(function(){var t,s,l,u,c,d,f,p,h;return(0,r._)(this,function(r){switch(r.label){case 0:return[4,a.isInitialized()];case 1:if((t=r.sent()).error)return(0,b.reportErrorToSentry)({context:"use-branch-commits",gitService:a,result:t}),[2,{error:t.error}];if(!t.initialized)return[2,{log:[],onlyRemote:[],onlyLocal:[],error:null}];if(!e)return[2,{error:null}];if(!(!e.tracking||0===i&&0===o))return[3,3];return s=(0,T.getQualifiedBranchName)(e,!0),[4,a.log({max:100,revRange:s})];case 2:if((l=r.sent()).error)return(0,b.reportErrorToSentry)({context:"use-branch-commits",gitService:a,result:l,data:{branch:e,behind:i,ahead:o,revision:s}}),[2,l];return[2,{log:l.commits,error:null}];case 3:return u=(0,T.getQualifiedBranchName)(e),[4,Promise.all([a.log({max:100,revRange:e.name}),a.log({max:100,revRange:"".concat(e.name,"..").concat(u)}),a.log({max:100,revRange:"".concat(u,"..").concat(e.name)})])];case 4:if(c=r.sent(),f=(d=(0,n._)(c,3))[0],p=d[1],h=d[2],f.error)return(0,b.reportErrorToSentry)({context:"use-branch-commits-log",gitService:a,result:f,data:{branch:e,behind:i,ahead:o,remoteBranch:u}}),[2,{error:f.error}];if(p.error)return(0,b.reportErrorToSentry)({context:"use-branch-commits-only-remote",gitService:a,result:p,data:{branch:e,behind:i,ahead:o,remoteBranch:u}}),[2,{error:p.error}];if(h.error)return(0,b.reportErrorToSentry)({context:"use-branch-commits-only-local",gitService:a,result:h,data:{branch:e,behind:i,ahead:o,remoteBranch:u}}),[2,{error:h.error}];return[2,{log:f.commits,onlyRemote:p.commits,onlyLocal:h.commits,error:null}]}})})()},[e,i,o]);return(0,a.useMemo)(function(){if(!l)return null;if(l.error)return s(l.error),{error:l.error};var e=l.log,t=l.onlyRemote,n=l.onlyLocal;return t||n?(e&&(e=X(e,null!=t?t:[],null!=n?n:[])),{log:e,onlyRemote:t,onlyLocal:n,error:null}):{log:e,error:null}},[s,l])}e.s(["default",()=>Z,"filterKnownCommits",()=>X],264887)},810446,e=>{e.v({headerText:"CommitMessage-module__jFHAna__headerText",input:"CommitMessage-module__jFHAna__input",inputDisabled:"CommitMessage-module__jFHAna__inputDisabled"})},575352,e=>{e.v({autoStageMessage:"StagingArea-module__hV4-yG__autoStageMessage",details:"StagingArea-module__hV4-yG__details",disabled:"StagingArea-module__hV4-yG__disabled",fileLists:"StagingArea-module__hV4-yG__fileLists",headerText:"StagingArea-module__hV4-yG__headerText"})},25358,336135,309143,415206,454880,134444,236649,982737,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(276385),a=e.i(389959),o=e.i(183035),s=e.i(546284),l=e.i(529810),u=e.i(730792),c=e.i(138290),d=e.i(520739),f=e.i(633600),p=e.i(167392),h=e.i(568430),m=e.i(441329),g=e.i(159667);e.i(32109);var x=e.i(926118),y=e.i(384401),b=e.i(173703),w=e.i(136540),_=e.i(607278),k=e.i(960178),S=e.i(625484),C=e.i(810446);function j(e){var t=e.message,r=e.disabled,o=void 0!==r&&r,s=e.onMessageChange,l=e.onCommitShortcut,u=(0,n._)((0,a.useState)(!1),2),c=u[0],d=u[1],j=(0,n._)((0,a.useState)(!1),2),T=j[0],E=j[1],R=(0,n._)((0,a.useState)(!1),2),I=R[0],A=R[1],P=(0,m.useIsInMobileWorkspace)(),D=(0,a.useRef)(null),O=(0,a.useRef)(null),N=(0,f._)(t.split("\n\n")),M=N[0],L=void 0===M?"":M,B=N.slice(1).join("\n\n");function V(e,t){s((e=e.replaceAll("\n"," "))+(t?"\n\n"+t:""))}var F=(0,y.useKeyCombo)(g.commands.gitCommit.id);(0,y.useCommandScope)(g.GitCommandScope,I),(0,y.useCommandBinding)(function(){return[g.commands.gitCommit.id,{run:function(){null==l||l()},scope:g.GitCommandScope,bubble:!1}]},[l]),(0,a.useEffect)(function(){T&&O.current&&(O.current.focus(),E(!1))},[T]);var U=c||!!B;return(0,i.jsxs)(b.ShadesSurface,{elevate:"1x",br:"container",border:"subtle",p:8,pt:6,gap:8,children:[(0,i.jsxs)(S.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,i.jsxs)(S.View,{row:!0,gap:8,align:"center",children:[(0,i.jsx)(k.Text,{clsx:C.default.headerText,variant:"small",children:"Message"}),!F||o||P?null:(0,i.jsx)(x.KeyComboBlocks,{keyCombo:F,small:!0})]}),(0,i.jsx)(w.IconButton,{alt:c?"Hide description":"Add description",onClick:function(){return d(function(e){return!e})},size:24,children:c?(0,i.jsx)(h.default,{}):(0,i.jsx)(p.default,{})})]}),(0,i.jsxs)(S.View,{gap:8,children:[(0,i.jsx)(_.Input,{ref:D,clsx:o?C.default.inputDisabled:C.default.input,placeholder:"Summary",value:L,disabled:o,onChange:function(e){V(e.currentTarget.value,B)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),c?O.current&&(O.current.focus(),O.current.setSelectionRange(0,0)):(d(!0),E(!0)))},onFocus:function(){A(!0)},onBlur:function(){A(!1)}}),U?(0,i.jsx)(_.MultiLineInput,{ref:O,clsx:o?C.default.inputDisabled:C.default.input,placeholder:"Description (optional)",value:B,disabled:o,onChange:function(e){var t,n=e.currentTarget.value;(V(L,n),c||n)?c||d(!0):null==(t=D.current)||t.focus()},onKeyDown:function(e){if("Backspace"===e.key&&""===B){var t;e.preventDefault(),e.stopPropagation(),null==(t=D.current)||t.focus()}},onFocus:function(){T&&E(!1),A(!0)},onBlur:function(){A(!1)},autoSize:!0}):null]})]})}var T=e.i(234961),E=e.i(923772),R=e.i(790486),I=e.i(125674),A=e.i(269848),P=e.i(348867),D=e.i(40916),O=e.i(536262),N=e.i(446530),M=e.i(613355),L=(0,N.cssRecord)({actionsIndex:[M.rcss.height(24),M.rcss.align.center,M.rcss.borderRadius(4)],actionsWorktree:[M.rcss.height(24),M.rcss.flex.row,M.rcss.align.center,M.rcss.borderRadius(4)],unstage:[M.rcss.height(24),M.rcss.width(24),M.rcss.borderRadius(2)],stage:[M.rcss.height(24),M.rcss.width(24),M.rcss.borderRadius(2)],discard:[M.rcss.height(24),M.rcss.width(24),M.rcss.borderRadius(2)],discardIcon:{transform:"scale(0.85)"},divider:[M.rcss.height("75%"),M.rcss.width(1),M.rcss.backgroundColor.outlineStronger]});function B(e){var o=e.file,s=e.list,l=e.stageFiles,u=e.restoreFiles,c=e.disabled,d=void 0!==c&&c,f=(0,n._)((0,a.useState)(!1),2),p=f[0],h=f[1],m=(0,n._)((0,a.useState)(!1),2),g=m[0],x=m[1];return(d=d||g||p,"index"===s)?(0,i.jsx)(S.View,{row:!0,clsx:L.actionsIndex,children:(0,i.jsx)(w.IconButton,{css:L.unstage,alt:"Unstage changes",size:18,onClick:function(){return(0,t._)(function(){return(0,r._)(this,function(e){switch(e.label){case 0:if(d)return[2];return h(!0),[4,l({reset:[o.path]})];case 1:return e.sent(),h(!1),[2]}})})()},disabled:d,children:p?(0,i.jsx)(A.default,{}):(0,i.jsx)(P.default,{})})}):(0,i.jsxs)(S.View,{row:!0,clsx:L.actionsWorktree,children:[(0,i.jsx)(w.IconButton,{css:L.discard,alt:"Discard changes",size:18,onClick:function(){return(0,t._)(function(){return(0,r._)(this,function(e){switch(e.label){case 0:if(d||"worktree"!==s)return[2];return x(!0),[4,u(o.path)];case 1:return e.sent(),x(!1),[2]}})})()},disabled:d,children:g?(0,i.jsx)(A.default,{}):(0,i.jsx)(O.default,{css:L.discardIcon})}),(0,i.jsx)(S.View,{align:"center",clsx:L.divider}),(0,i.jsx)(w.IconButton,{css:L.stage,alt:"Stage changes",size:18,onClick:function(){return(0,t._)(function(){return(0,r._)(this,function(e){switch(e.label){case 0:if(d)return[2];return h(!0),[4,l({add:[o.path]})];case 1:return e.sent(),h(!1),[2]}})})()},disabled:d,children:p?(0,i.jsx)(A.default,{}):(0,i.jsx)(D.default,{})})]})}var V=e.i(688216),F=e.i(630818),U=(0,N.cssRecord)({source:[M.rcss.color.foregroundDimmest],sourceArrow:[M.rcss.mx(8)]});function G(e){var t=e.path,n=e.prefix,r=e.source,a=e.onClick;return(0,i.jsxs)(S.View,{grow:!0,shrink:!0,align:"center",row:!0,gap:8,children:[(0,i.jsx)(F.default,{path:t}),(0,i.jsxs)(k.Text,{multiline:!1,children:[(0,i.jsx)(V.FilePath,{path:t,prefix:n,onClick:a}),r?(0,i.jsxs)("span",{css:U.source,children:[(0,i.jsx)("span",{css:U.sourceArrow,children:""}),(0,i.jsx)(V.FilePath,{path:r})]}):null]})]})}var $=e.i(933974);function H(e){var t,n=e.file,r=e.list,a=e.stageFiles,o=e.restoreFiles,s=e.pathMap,l=e.disabled,u=e.onFilePathClick,c=null==s?void 0:s.get(n.path),d=null==(t=n.source)?void 0:t.path,f="index"===r?n.type.index:n.type.worktree,p=(0,I.default)(function(){if(f!==T.GitStatusChangedFileType.DELETED)return function(){return u({path:n.path})}},[n.path,u,f]);return(0,i.jsxs)(S.View,{py:2,row:!0,gap:4,align:"center",children:[(0,i.jsx)(G,{path:n.path,prefix:c,source:d,onClick:p}),(0,i.jsx)(B,{file:n,list:r,stageFiles:a,restoreFiles:o,disabled:void 0!==l&&l}),(0,i.jsx)($.default,{type:f})]})}var z=e.i(140487),W=(0,N.cssRecord)({actions:[M.rcss.backgroundColor.backgroundHighest,M.rcss.borderRadius(8)],buttonDiscard:[M.rcss.borderRadius(8,0,0,8)],buttonStage:[M.rcss.borderRadius(0,8,8,0)],divider:[M.rcss.my(8),M.rcss.width(1),M.rcss.backgroundColor.outlineStronger]});function q(e){var o=e.type,s=e.stageFiles,l=e.restoreFiles,u=e.disabled,c=void 0!==u&&u,d=(0,n._)((0,a.useState)(!1),2),f=d[0],p=d[1],h=(0,n._)((0,a.useState)(!1),2),m=h[0],g=h[1];function x(){return(0,t._)(function(){return(0,r._)(this,function(e){switch(e.label){case 0:if(c)return[2];return p(!0),[4,s({all:"index"!==o})];case 1:return e.sent(),p(!1),[2]}})})()}return(c=c||m||f,"index"===o)?(0,i.jsx)(z.Button,{text:"Unstage All",iconLeft:f?(0,i.jsx)(A.default,{}):(0,i.jsx)(P.default,{}),onClick:x,disabled:c,loading:f,size:"small"}):(0,i.jsxs)(S.View,{css:W.actions,row:!0,gap:2,children:[(0,i.jsx)(z.Button,{css:W.buttonDiscard,text:"Discard All",iconLeft:m?(0,i.jsx)(A.default,{}):(0,i.jsx)(O.default,{}),onClick:function(){return(0,t._)(function(){return(0,r._)(this,function(e){switch(e.label){case 0:if(c||"worktree"!==o)return[2];return g(!0),[4,l(!0)];case 1:return e.sent(),g(!1),[2]}})})()},disabled:c,loading:m,size:"small"}),(0,i.jsx)("div",{css:W.divider}),(0,i.jsx)(z.Button,{css:W.buttonStage,text:"Stage All",iconLeft:f?(0,i.jsx)(A.default,{}):(0,i.jsx)(D.default,{}),onClick:x,disabled:c,loading:f,size:"small"})]})}var K=e.i(480028),Y=(0,N.cssRecord)({header:[M.rcss.px(8),M.rcss.rowWithGap(4),M.rcss.align.center],headerFoldable:[M.rcss.py(4),M.rcss.pl(4),M.rcss.pr(8),M.rcss.rowWithGap(4),M.rcss.align.center],headerText:[M.rcss.flex.grow(1)],body:[M.rcss.px(8),M.rcss.maxHeight("25vh"),M.rcss.overflowY("auto")]});function Q(e){var t,r=e.files,o=e.type,s=e.stageFiles,l=e.restoreFiles,u=e.onFilePathClick,c=e.pathMap,d=e.foldable,f=void 0!==d&&d,p=e.disabled,h=void 0!==p&&p,m=(0,n._)((0,a.useState)(!1),2),g=m[0],x=m[1],y=(0,a.useRef)(null),b=(0,a.useRef)(null),w=(0,R.useVirtualizer)({count:r.length,getScrollElement:function(){return b.current},getItemKey:function(e){return r[e].path},estimateSize:function(){return 28},overscan:20}),_=w.getVirtualItems();return f&&g?(0,i.jsx)(S.View,{py:4,children:(0,i.jsxs)(S.View,{css:f?Y.headerFoldable:Y.header,children:[(0,i.jsx)(X,{files:r,type:o,setFolded:x,foldable:!0,folded:!0}),(0,i.jsx)(q,{type:o,stageFiles:s,restoreFiles:l,disabled:h})]})}):(0,i.jsxs)(S.View,{innerRef:y,pt:4,pb:8,gap:4,children:[(0,i.jsxs)(S.View,{css:f?Y.headerFoldable:Y.header,children:[(0,i.jsx)(X,{files:r,type:o,setFolded:x,foldable:f}),(0,i.jsx)(q,{type:o,stageFiles:s,restoreFiles:l,disabled:h})]}),(0,i.jsx)(S.SpecializedView.div,{ref:b,css:Y.body,children:(0,i.jsx)("div",{style:{minHeight:w.getTotalSize()},children:(0,i.jsx)("div",{style:{transform:"translateY(".concat(null==(t=_[0])?void 0:t.start,"px)"),willChange:"transform"},children:_.map(function(e){var t=r[e.index];return(0,i.jsx)("div",{"data-index":e.index,children:(0,i.jsx)(H,{file:t,list:o,stageFiles:s,restoreFiles:l,onFilePathClick:u,pathMap:c,disabled:h},t.path)},e.key.toString())})})})})]})}function X(e){var t=e.files,n=e.type,r=e.setFolded,a=e.foldable,o=void 0!==a&&a,l=e.folded,u=(0,s.default)("file",t.length),c="".concat(t.length," ").concat("index"===n?"staged":"changed"," ").concat(u);return o&&void 0!==l&&l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.IconButton,{alt:"Show list",onClick:function(){return r(!1)},children:(0,i.jsx)(p.default,{})}),(0,i.jsx)(k.Text,{css:Y.headerText,multiline:!1,children:c})]}):(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsx)(w.IconButton,{alt:"Hide list",onClick:function(){return r(!0)},children:(0,i.jsx)(h.default,{color:K.tokens.foregroundDimmest})}):null,(0,i.jsx)(k.Text,{css:Y.headerText,color:"dimmest",multiline:!1,children:c})]})}var Z=e.i(878420),J=e.i(64386),ee=e.i(619542),et=e.i(98816),en=e.i(739521),er=(0,N.cssRecord)({list:[M.rcss.px(4),M.rcss.colWithGap(2)]});function ei(e){var t=e.show,n=e.files,r=e.pathMap,o=e.callback,l=(0,et.default)(o),u=(0,a.useCallback)(function(){var e;null==(e=l.current)||e.call(l,!0)},[l]),c=(0,a.useCallback)(function(){var e;null==(e=l.current)||e.call(l,!1)},[l]);return(0,i.jsx)(en.Modal,{isOpen:t,onRequestClose:c,children:t?(0,i.jsxs)(S.View,{gap:8,children:[(0,i.jsxs)(k.Header,{level:2,children:["Discard ",(0,s.default)("Change",n.length)]}),(0,i.jsx)(ea,{files:n,pathMap:r}),(0,i.jsxs)(S.View,{row:!0,gap:8,justify:"end",children:[(0,i.jsx)(z.Button,{text:"Cancel",iconLeft:(0,i.jsx)(ee.default,{}),onClick:c}),(0,i.jsx)(z.Button,{text:"Discard ".concat((0,s.default)("Change",n.length)),iconLeft:(0,i.jsx)(O.default,{}),colorway:"negative",onClick:u})]})]}):null})}function ea(e){var t=e.files,n=e.pathMap,r=[],a=[],o=!0,l=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var f=c.value;f.type.worktree===T.GitStatusChangedFileType.UNTRACKED?a.push(f):r.push(f)}}catch(e){l=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(l)throw u}}return!r.length&&a.length?(0,i.jsxs)(S.View,{gap:4,children:[(0,i.jsx)(k.Text,{children:1===a.length?"Do you want to permanently delete this file?":"Do you want to permanently delete these files?"}),(0,i.jsx)(eo,{files:a,pathMap:n})]}):r.length&&!a.length?(0,i.jsxs)(S.View,{gap:4,children:[(0,i.jsx)(k.Text,{children:1===r.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,i.jsx)(eo,{files:r,pathMap:n})]}):(0,i.jsxs)(S.View,{gap:12,children:[r.length?(0,i.jsxs)(S.View,{gap:4,children:[(0,i.jsxs)(k.Header,{level:3,children:["Tracked ",(0,s.default)("File",r.length)]}),(0,i.jsx)(k.Text,{multiline:!1,children:1===r.length?"This file will have its changes undone.":"These files will have their changes undone."}),(0,i.jsx)(eo,{files:r,pathMap:n})]}):null,a.length?(0,i.jsxs)(S.View,{gap:4,children:[(0,i.jsxs)(k.Header,{level:3,children:["Untracked ",(0,s.default)("File",a.length)]}),(0,i.jsx)(k.Text,{multiline:!1,children:1===a.length?"This file will be permanently deleted.":"These files will be permanently deleted."}),(0,i.jsx)(eo,{files:a,pathMap:n})]}):null]})}function eo(e){var t=e.files,n=e.pathMap,r=(0,a.useMemo)(function(){return t.length>20?t.slice(0,20):t},[t]);return(0,i.jsx)(S.View,{children:(0,i.jsxs)("ul",{css:er.list,children:[r.map(function(e){var t;return(0,i.jsx)("li",{children:(0,i.jsx)(G,{path:e.path,prefix:n.get(e.path),source:null==(t=e.source)?void 0:t.path})},e.path)}),t.length<=20?null:(0,i.jsx)("li",{children:(0,i.jsxs)(k.Text,{color:"dimmer",children:["... ",t.length-20," more"," ",(0,s.default)("file",t.length-20)]})})]})})}function es(e){var t=(0,n._)((0,a.useState)(function(){return{show:!1,files:[]}}),2),r=t[0],o=t[1];return{openRestoreConfirmationModal:(0,a.useCallback)(function(e){return new Promise(function(t){0===e.length&&t(!1),o({show:!0,files:e,callback:function(e){o({show:!1,files:[],callback:void 0}),t(e)}})})},[]),restoreConfirmationModal:(0,a.useMemo)(function(){return(0,i.jsx)(ei,(0,J._)((0,Z._)({},r),{pathMap:e}))},[r,e])}}e.s(["useRestoreConfirmationModal",()=>es],336135);var el=e.i(575352);function eu(e){var o=e.status,s=e.stageFiles,l=e.restoreFiles,u=e.onStagedFileClick,c=e.disabled,d=void 0!==c&&c,f=(0,n._)((0,a.useState)(!1),2),p=f[0],h=f[1],m=(0,n._)((0,a.useState)(!1),2),g=m[0],x=m[1],y=(0,n._)((0,a.useState)(!1),2),w=y[0],_=y[1],C=(0,a.useMemo)(function(){return(0,E.getUniquePathMap)(o.changes.map(function(e){return e.path}))},[o]),j=(0,n._)((0,a.useMemo)(function(){var e=[],t=[],n=!0,r=!1,i=void 0;try{for(var a,s=o.changes[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;l.staged&&e.push(l),l.type.worktree!==T.GitStatusChangedFileType.UNMODIFIED&&t.push(l)}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return[e,t]},[o.changes]),2),R=j[0],I=j[1],A=R.length>0&&I.length>0,P=es(C),D=P.openRestoreConfirmationModal,O=P.restoreConfirmationModal,N=(0,a.useCallback)(function(e){return(0,t._)(function(){return(0,r._)(this,function(t){switch(t.label){case 0:if(!("all"in e))return[3,2];return x(!0),[4,s(e)];case 1:return t.sent(),x(!1),[3,4];case 2:return[4,s(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})})()},[s]),M=(0,a.useCallback)(function(e){return(0,t._)(function(){var t,n;return(0,r._)(this,function(r){switch(r.label){case 0:if(!0!==e)return[3,4];return _(!0),[4,D(I)];case 1:if(!r.sent())return[3,3];return[4,l(e)];case 2:r.sent(),r.label=3;case 3:return _(!1),[3,8];case 4:if("string"==typeof e){if(!(n=I.find(function(t){return t.path===e})))throw _(!1),Error("Could not find file in worktree list");t=[n]}else t=I.filter(function(t){return e.includes(t.path)});return[4,D(t)];case 5:if(!r.sent())return[3,7];return[4,l(e)];case 6:r.sent(),r.label=7;case 7:_(!1),r.label=8;case 8:return[2]}})})()},[D,l,I]),L=I.length,B=R.length,V=d||g||w;return p?(0,i.jsx)(b.ShadesSurface,{elevate:"1x",br:"container",border:"subtle",p:8,clsx:d?el.default.disabled:void 0,children:(0,i.jsx)(ec,{folded:p,setFolded:h,changeCount:L,stagedCount:B})}):0===R.length&&0===I.length?(0,i.jsxs)(b.ShadesSurface,{elevate:"1x",br:"container",border:"subtle",p:8,clsx:d?el.default.disabled:void 0,children:[(0,i.jsx)(ec,{folded:p,setFolded:h,changeCount:L,stagedCount:B}),(0,i.jsx)(S.View,{py:8,align:"center",children:(0,i.jsx)(k.Text,{color:"dimmest",multiline:!1,children:"No changed or staged files."})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(b.ShadesSurface,{elevate:"1x",br:"container",border:"subtle",p:8,clsx:d?el.default.disabled:void 0,children:[(0,i.jsx)(ec,{folded:p,setFolded:h,changeCount:L,stagedCount:B}),(0,i.jsxs)(S.View,{gap:8,clsx:el.default.fileLists,children:[0===R.length?null:(0,i.jsx)(Q,{type:"index",files:R,stageFiles:N,restoreFiles:M,onFilePathClick:u,pathMap:C,foldable:!0,disabled:V}),0===I.length?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q,{type:"worktree",files:I,stageFiles:N,restoreFiles:M,onFilePathClick:u,pathMap:C,foldable:!0,disabled:V}),A?null:(0,i.jsx)(S.View,{clsx:el.default.autoStageMessage,py:4,children:(0,i.jsx)(k.Text,{variant:"small",color:"dimmest",multiline:!1,children:"Committing will automatically stage your changes."})})]})]})]}),O]})}function ec(e){var t=e.folded,n=e.setFolded,r=e.changeCount,a=e.stagedCount;return(0,i.jsxs)(S.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,i.jsxs)(S.View,{row:!0,gap:8,align:"center",children:[(0,i.jsx)(k.Text,{clsx:el.default.headerText,variant:"small",children:"Review Changes"}),(0,i.jsx)(ed,{changeCount:r,stagedCount:a})]}),(0,i.jsx)(w.IconButton,{alt:t?"Expand":"Collapse",onClick:function(){return n(!t)},size:24,children:t?(0,i.jsx)(p.default,{}):(0,i.jsx)(h.default,{})})]})}function ed(e){var t=e.changeCount,n=e.stagedCount,r=t>0,a=n>0;return r||a?(0,i.jsxs)(k.Text,{clsx:el.default.details,variant:"small",color:"dimmest",children:[r?(0,i.jsxs)("span",{children:[t," ",(0,s.default)("change",t)]}):null,r&&a?(0,i.jsx)("span",{children:" / "}):null,a?(0,i.jsxs)("span",{children:[n," staged"]}):null]}):(0,i.jsx)(k.Text,{clsx:el.default.details,variant:"small",color:"dimmest",children:"no changes"})}var ef=e.i(751273);function ep(e){var f=e.status,p=e.onStagedFileClick,h=e.defaultMessage,m=(0,n._)((0,a.useState)(f),2),g=m[0],x=m[1],y=(0,n._)((0,a.useState)(null!=h?h:""),2),b=y[0],w=y[1],_=(0,n._)((0,a.useState)(0),2),C=_[0],T=_[1],E=(0,n._)((0,a.useState)(!1),2),R=E[0],I=E[1],A=(0,u.useNotifyGitError)();(0,a.useEffect)(function(){return x(f)},[f]);var P=(0,l.default)().git;if(!g||!g.changes.length)return(0,i.jsx)(S.View,{gap:8,children:(0,i.jsx)(k.Text,{color:"dimmest",multiline:!1,children:"There are no changes to commit."})});var D=g.changes.length,O=g.changes.filter(function(e){return e.staged}).length;function N(){return(0,t._)(function(){var e,t;return(0,r._)(this,function(n){switch(n.label){case 0:if(""===b||R||0===D||C>0)return[2];if(I(!0),0!==O)return[3,2];return[4,P.stageFiles({all:!0})];case 1:n.sent(),n.label=2;case 2:return[4,P.commit({message:b})];case 3:if(!(e=n.sent()).error)return[3,4];return I(!1),A(e.error),(0,c.reportErrorToSentry)({context:"commit-area-commit",gitService:P,result:e,data:{message:b}}),[3,6];case 4:return(0,d.trackGitPaneEvent)("commit-created",{hasDescription:-1!==b.trim().indexOf("\n\n")}),[4,P.status()];case 5:t=n.sent(),I(!1),t.error?(A(t.error),(0,c.reportErrorToSentry)({context:"commit-area-status",gitService:P,result:t,data:{message:b}})):(w(""),x(t)),P.forceRefresh(),n.label=6;case 6:return[2]}})})()}var M="Nothing to commit";if(R)M="Committing...";else if(O>0&&O<D){var L=(0,s.default)("change",O);M="Commit ".concat(O," staged ").concat(L)}else D>0&&(M="Stage and commit all changes");var B=!b||0===D||C>0||R;return(0,i.jsxs)(S.View,{gap:8,children:[(0,i.jsx)(j,{message:b,disabled:R,onMessageChange:w,onCommitShortcut:N}),(0,i.jsx)(eu,{status:g,stageFiles:function(e){return(0,t._)(function(){var t,n;return(0,r._)(this,function(r){switch(r.label){case 0:if(R)return[2];return T(function(e){return e+1}),[4,P.stageFiles(e)];case 1:if((t=r.sent()).error)return[3,3];return[4,P.status()];case 2:return(n=r.sent()).error?((0,c.reportErrorToSentry)({context:"commit-area-status",gitService:P,result:n,data:{opts:e}}),A(n.error)):x(n),P.forceRefresh(),[3,4];case 3:A(t.error),(0,c.reportErrorToSentry)({context:"commit-area-stage-files",gitService:P,result:t,data:{opts:e}}),r.label=4;case 4:return T(function(e){return e-1}),[2]}})})()},restoreFiles:function(e){return(0,t._)(function(){var t,n;return(0,r._)(this,function(r){switch(r.label){case 0:if(R)return[2];return T(function(e){return e+1}),[4,P.restoreFiles(e)];case 1:if((t=r.sent()).error)return[3,3];return[4,P.status()];case 2:return(n=r.sent()).error?((0,c.reportErrorToSentry)({context:"commit-area-status",gitService:P,result:n,data:{files:e}}),A(n.error)):x(n),P.forceRefresh(),[3,4];case 3:(0,c.reportErrorToSentry)({context:"commit-area-restore-files",gitService:P,result:t,data:{files:e}}),A(t.error),r.label=4;case 4:return T(function(e){return e-1}),[2]}})})()},onStagedFileClick:p,disabled:R}),B?(0,i.jsx)(ef.Tooltip,{tooltip:C>0?"Changes in progress":0===D?"There are no changes to commit.":"You must enter a commit message before you can commit.",children:(0,i.jsx)(z.Button,{text:M,onClick:N,disabled:B,loading:R,colorway:"primary",iconLeft:(0,i.jsx)(o.default,{}),stretch:!0})}):(0,i.jsx)(z.Button,{text:M,onClick:N,disabled:B,loading:R,colorway:"primary",iconLeft:(0,i.jsx)(o.default,{}),stretch:!0})]})}e.s(["default",()=>ep],25358);var eh=/\s\(#(\d+)\)$/,em=/^Revert "(.+)"/,eg=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function ev(e){var t=em.exec(e.subject),n=eg.exec(e.body);if(t&&n){var r,i=n[1],a=t[1],o=eh.exec(a);return o&&(r=parseInt(o[1],10)),{hash:i,subject:a,pr:r}}return null}var ex=/\B#\d+\b/g,ey=/^Merged? pull request (#\d+\b)/,eb=/^Merge branch '(.+)'/,ew=/into (.+)$/;function e_(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var t=e.subject.match(ex);if(t){var n,r=parseInt(t[t.length-1].slice(1),10);if(r)return eh.test(e.subject)&&(n=e.subject.replace(eh,"").trim()),!n&&ey.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(n=e.body),{type:"pull-request",id:r,subject:n,reverts:ev(e)}}}if(ey.test(e.subject)){var i,a=ey.exec(e.subject);if(a)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(a[1].slice(1),10),subject:i,reverts:ev(e)}}if(eb.test(e.subject)){var o=eb.exec(e.subject);if(o){var s=ew.exec(e.subject);return{type:"branch",source:o[1],target:s?s[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}e.s(["parseCommitAsMerge",()=>e_,"parseCommitAsRevert",()=>ev],309143);var ek=e.i(886513),eS=e.i(682205),eC={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(K.tokens.purpleStrongest),borderRadius:"50%"},ej=(0,N.cssRecord)({markerContainer:[M.rcss.display.flex,M.rcss.align.center,M.rcss.justify.center,M.rcss.minHeight(20),M.rcss.minWidth(20)],commitMarker:[M.rcss.height(4),M.rcss.width(4),M.rcss.backgroundColor.foregroundDefault,M.rcss.borderRadius("full")],collapsedMarkerIconDot:[M.rcss.height(3),M.rcss.width(3),M.rcss.backgroundColor.foregroundDimmer,M.rcss.borderRadius("full")],collapsedMarkerIconContainer:[M.rcss.display.flex,M.rcss.align.center,M.rcss.justify.center,{"div + div":{marginLeft:1}}],collapsedMarker:[M.rcss.display.flex,M.rcss.align.center,M.rcss.justify.center,M.rcss.height(20),M.rcss.width(20),M.rcss.backgroundColor.backgroundHighest,M.rcss.borderRadius("full")],revertMarker:[M.rcss.display.flex,M.rcss.height(20),M.rcss.width(20),M.rcss.backgroundColor.orangeDimmest,M.rcss.borderRadius("full"),M.rcss.align.center,M.rcss.justify.center],mergeMarker:[M.rcss.display.flex,M.rcss.height(20),M.rcss.width(20),M.rcss.backgroundColor.purpleDimmest,M.rcss.borderRadius("full"),M.rcss.align.center,M.rcss.justify.center],mergeMarkerIconContainer:[M.rcss.position.relative,M.rcss.height(9),M.rcss.width(13)],mergeMarkerIconLeft:[(0,Z._)({},eC),M.rcss.left(0)],mergeMarkerIconRight:[(0,Z._)({},eC),M.rcss.right(0)],boundaryMarker:[M.rcss.height(6),M.rcss.width(6),M.rcss.backgroundColor.backgroundDefault,M.rcss.borderRadius("full"),{border:"1px solid ".concat(K.tokens.backgroundHighest)}]});function eT(e){var t=function(e){switch(e){case"none":default:return null;case"commit":return(0,i.jsx)(eE,{});case"revert":return(0,i.jsx)(eR,{});case"merge":return(0,i.jsx)(eI,{});case"boundary":return(0,i.jsx)(eA,{});case"collapsed":return(0,i.jsx)(eP,{})}}(e.type);return t?(0,i.jsx)("div",{css:ej.markerContainer,children:t}):null}function eE(){return(0,i.jsx)("div",{css:ej.commitMarker})}function eR(){return(0,i.jsx)("div",{css:ej.revertMarker,children:(0,i.jsx)(O.default,{size:12,color:K.tokens.orangeStrongest})})}function eI(){return(0,i.jsx)("div",{css:ej.mergeMarker,children:(0,i.jsxs)("div",{css:ej.mergeMarkerIconContainer,children:[(0,i.jsx)("div",{css:ej.mergeMarkerIconLeft}),(0,i.jsx)("div",{css:ej.mergeMarkerIconRight})]})})}function eA(){return(0,i.jsx)("div",{css:ej.boundaryMarker})}function eP(){return(0,i.jsx)("div",{css:ej.collapsedMarker,children:(0,i.jsxs)("div",{css:ej.collapsedMarkerIconContainer,children:[(0,i.jsx)("div",{css:ej.collapsedMarkerIconDot}),(0,i.jsx)("div",{css:ej.collapsedMarkerIconDot}),(0,i.jsx)("div",{css:ej.collapsedMarkerIconDot})]})})}e.s(["default",()=>eT],415206);var eD=e.i(721281),eO=[M.rcss.position.absolute,M.rcss.left(0),M.rcss.width(18)],eN=(0,N.cssRecord)({connectorSegmentBorderSolid:[eO,{borderRight:"1px solid ".concat(K.tokens.outlineDimmest)}],connectorSegmentBorderDashed:[eO,{borderRight:"1px dashed ".concat(K.tokens.outlineDimmest)}]});function eM(e){var t=e.boundaryTop,n=void 0!==t&&t,r=e.boundaryBottom,a=void 0!==r&&r,o=e.joint,s=void 0===o?"top":o,l=e.hideTop,u=void 0!==l&&l,c=e.hideBottom,d=void 0!==c&&c;if(u&&d)return null;if(n===a&&!u&&!d)return(0,i.jsx)(eB,{top:0,bottom:0,dashed:n&&a});var f=u?null:(0,i.jsx)(eL,{start:"top",joint:s,dashed:n}),p=d?null:(0,i.jsx)(eL,{start:"bottom",joint:s,dashed:a});return(0,i.jsxs)(i.Fragment,{children:[f,p]})}function eL(e){var t,n,r=e.start,a=e.joint,o=e.dashed,s="center"===a?(t={},(0,eD._)(t,r,0),(0,eD._)(t,"height","50%"),t):(n={},(0,eD._)(n,r,0),(0,eD._)(n,r===a?"height":a,8),n);return(0,i.jsx)(eB,(0,J._)((0,Z._)({},s),{dashed:void 0!==o&&o}))}function eB(e){var t=e.top,n=e.bottom,r=e.height,a=e.dashed;return(0,i.jsx)("div",{css:void 0!==a&&a?eN.connectorSegmentBorderDashed:eN.connectorSegmentBorderSolid,style:{top:t,bottom:n,height:r}})}var eV=e.i(754873),eF=(0,N.cssRecord)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[eV.interactive.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[M.rcss.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:20},nodeUnfoldedContentSurface:[M.rcss.mt(4),M.rcss.mb(8),M.rcss.p(8),M.rcss.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[M.rcss.position.relative]});function eU(e){var t=e.boundaryTop,r=e.boundaryBottom,o=void 0!==r&&r,s=e.hideConnectorTop,l=e.hideConnectorBottom,u=void 0!==l&&l,c=e.joint,d=void 0===c?"top":c,f=e.marker,m=e.header,g=e.unfoldedContent,x=e.children,y=e.className,w=(0,n._)((0,a.useState)(!0),2),_=w[0],k=w[1];return(0,i.jsxs)(S.View,{className:y,css:M.rcss.position.relative,children:[(0,i.jsx)(eM,{boundaryTop:void 0!==t&&t,boundaryBottom:o,joint:d,hideTop:void 0!==s&&s,hideBottom:u}),f?(0,i.jsx)(e$,{joint:d,children:f}):null,g?(0,i.jsxs)(S.View,{css:eF.containerInteractive,role:"button",tabIndex:0,onClick:function(){k(!_)},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&k(!_)},children:[_?(0,i.jsx)("div",{css:eF.nodeFoldedIconContainer,children:(0,i.jsx)(p.default,{})}):(0,i.jsx)("div",{css:eF.nodeUnFoldedIconContainer,children:(0,i.jsx)(h.default,{})}),(0,i.jsxs)(S.View,{css:eF.nodeContentContainer,children:[m?(0,i.jsx)(S.View,{css:eF.nodeHeader,children:m}):null,x?(0,i.jsx)(S.View,{children:x}):null]})]}):(0,i.jsx)(S.View,{css:eF.container,children:(0,i.jsxs)(S.View,{css:eF.nodeContentContainer,children:[m?(0,i.jsx)(S.View,{css:eF.nodeHeader,children:m}):null,x?(0,i.jsx)(S.View,{children:x}):null]})}),!g||_?null:(0,i.jsxs)(S.View,{css:eF.unfoldedContentContainer,children:[u?null:(0,i.jsx)(eB,{top:0,bottom:0,dashed:o}),(0,i.jsx)(b.ShadesSurface,{clsx:eF.nodeUnfoldedContentSurface,elevate:"1x",children:g})]})]})}var eG=(0,N.cssRecord)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function e$(e){var t=e.joint,n=e.children;return(0,i.jsx)("div",{css:eG[void 0===t?"top":t],children:n})}e.s(["default",()=>eU],454880);var eH=e.i(988676),ez=(0,N.cssRecord)({container:[M.rcss.height("100%")],textContainer:[M.rcss.center],text:[M.rcss.flex.shrink(0)]});function eW(e){var t=e.text,n=(0,ek._)(e,["text"]);return(0,i.jsx)(eU,(0,Z._)({marker:(0,i.jsx)(eT,{type:"boundary"}),joint:"center",header:(0,i.jsxs)(S.View,{css:ez.container,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,i.jsx)(eH.DividerH,{}),(0,i.jsxs)(S.View,{css:ez.textContainer,row:!0,gap:4,children:[(0,i.jsx)(eS.default,{size:12,color:K.tokens.foregroundDimmest}),(0,i.jsx)(k.Text,{css:ez.text,variant:"small",color:"dimmest",multiline:!1,children:t})]}),(0,i.jsx)(eH.DividerH,{})]})},n))}e.s(["default",()=>eW],134444);var eq=e.i(350098),eK=e.i(402099),eY=e.i(88619),eQ=e.i(257811),eX=(0,N.cssRecord)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:K.tokens.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:K.tokens.space2},"> dd":{marginLeft:K.tokens.space12,paddingBottom:K.tokens.space2}},listHeader:[M.rcss.fontWeight.medium],commitList:[M.rcss.colWithGap(2),M.rcss.pl(4)]}),eZ=function(e,t){var n=!e.body,r=null,i=null;return t&&"type"in t?(r=t,"pull-request"===t.type&&(t.reverts&&(i=t.reverts),t.subject&&(n=!0))):t&&(i=t),{hideBody:n,merge:r,revert:i}},eJ=function(e){var t=e.hash;return(0,i.jsx)(eY.CopyButton,{size:"small",iconLeft:(0,i.jsx)(eK.default,{}),textToCopy:t,text:t.slice(0,7),tooltipSuccessText:"Hash copied!"})},e0=function(e){var t=e.onClick,n=e.text,r=e.loading;return(0,i.jsx)(ef.Tooltip,{tooltip:"Discard current changes and restore files to time of commit",children:(0,i.jsx)(z.Button,{text:n,onClick:t,size:"small",iconLeft:void 0!==r&&r?(0,i.jsx)(A.default,{}):(0,i.jsx)(O.default,{})})})},e1=function(e,t){return e.name!==t.name||e.email!==t.email},e2=function(e,t){return!(6e4>Math.abs(e-t))};function e3(e){var t=e.commit,n=e.info,r=e1(t.committer,t.author),a=e2(t.author.date,t.committer.date),o=eZ(t,void 0===n?null:n),s=o.hideBody,l=o.merge,u=o.revert;return(0,i.jsxs)(S.View,{gap:8,children:[s?null:(0,i.jsxs)(S.View,{gap:8,children:[(0,i.jsx)(k.Text,{children:(0,i.jsx)(V.CommitBody,{body:t.body})}),(0,i.jsx)(eH.DividerH,{css:M.rcss.backgroundColor.outlineDimmer})]}),(0,i.jsxs)(S.View,{children:[(0,i.jsx)(k.Text,{css:eX.listHeader,multiline:!1,children:"Author"}),(0,i.jsxs)("dl",{css:eX.definitionList,children:[(0,i.jsx)("dt",{children:"Name:"}),(0,i.jsx)("dd",{children:t.author.name}),(0,i.jsx)("dt",{children:"Email:"}),(0,i.jsx)("dd",{children:t.author.email})]})]}),r?(0,i.jsxs)(S.View,{children:[(0,i.jsx)(k.Text,{css:eX.listHeader,multiline:!1,children:"Committer"}),(0,i.jsxs)("dl",{css:eX.definitionList,children:[(0,i.jsx)("dt",{children:"Name:"}),(0,i.jsx)("dd",{children:t.committer.name}),(0,i.jsx)("dt",{children:"Email:"}),(0,i.jsx)("dd",{children:t.committer.email})]})]}):null,(0,i.jsxs)(S.View,{children:[(0,i.jsx)(k.Text,{css:eX.listHeader,multiline:!1,children:"Commit"}),(0,i.jsxs)("dl",{css:eX.definitionList,children:[a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("dt",{children:"Authored:"}),(0,i.jsx)("dd",{children:(0,i.jsx)(eQ.Timestamp,{date:t.author.date,dateFormat:"absolute"})}),(0,i.jsx)("dt",{children:"Committed:"}),(0,i.jsx)("dd",{children:(0,i.jsx)(eQ.Timestamp,{date:t.committer.date,dateFormat:"absolute"})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("dt",{children:"Date:"}),(0,i.jsx)("dd",{children:(0,i.jsx)(eQ.Timestamp,{date:t.author.date,dateFormat:"absolute"})})]}),(0,i.jsx)("dt",{children:"Hash:"}),(0,i.jsx)("dd",{children:(0,i.jsx)(eJ,{hash:t.hash})}),l&&"pull-request"===l.type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("dt",{children:"PR:"}),(0,i.jsxs)("dd",{children:["#",l.id]})]}):null,l&&"branch"===l.type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("dt",{children:"Merged:"}),(0,i.jsx)("dd",{children:l.source}),l.target?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("dt",{children:"Into:"}),(0,i.jsx)("dd",{children:l.target})]}):null]}):null,u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("dt",{children:"Reverted:"}),(0,i.jsx)("dd",{children:u.hash})]}):null]})]}),l&&"simple"===l.type?(0,i.jsxs)(S.View,{children:[(0,i.jsx)(k.Text,{css:eX.listHeader,multiline:!1,children:"Merged"}),(0,i.jsxs)(S.View,{css:eX.commitList,children:[(0,i.jsx)(k.Text,{multiline:!1,children:l.a}),(0,i.jsx)(k.Text,{multiline:!1,children:l.b})]})]}):null,l&&"octopus"===l.type?(0,i.jsxs)(S.View,{children:[(0,i.jsx)(k.Text,{css:eX.listHeader,multiline:!1,children:"Merged"}),(0,i.jsx)(S.View,{css:eX.commitList,children:l.parents.map(function(e,t){return(0,i.jsx)(k.Text,{multiline:!1,children:e},t)})})]}):null]})}e.s(["CopyHashButton",()=>eJ,"RestoreButton",()=>e0,"default",()=>e3,"getCommitDetails",()=>eZ,"shouldShowCommitDate",()=>e2,"shouldShowCommitter",()=>e1],236649);var e5=(0,N.cssRecord)({headerText:[M.rcss.rowWithGap(4),M.rcss.flex.row,M.rcss.align.stretch,M.rcss.fontWeight.medium,{"> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}],headerContainer:[{"> span":{width:"calc(100%)"}}],button:[M.rcss.reset.button,M.rcss.linkStyle,M.rcss.color.foregroundDefault,M.rcss.fontWeight.medium,{display:"block",width:"100%",textAlign:"left"}]}),e4=function(e){var t=e.author;return(0,i.jsxs)(S.View,{row:!0,gap:8,align:"center",children:[(0,i.jsx)(eq.default,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,i.jsx)(eQ.Timestamp,{date:t.date,textColor:"dimmest",textVariant:"small",dateFormat:"switch"})]})},e8=function(e){var t=e.children;return(0,i.jsx)(k.Text,{css:e5.headerText,multiline:!1,maxLines:1,children:t})},e6=function(e){var t=e.commit,n=e.onViewCommitClick,r=e.children;return(0,i.jsx)(S.View,{css:e5.headerContainer,gap:4,align:"start",justify:"start",children:(0,i.jsx)(ef.Tooltip,{tooltip:"View ".concat(t.hash.slice(0,7)),children:(0,i.jsx)("button",{css:e5.button,onClick:function(){return n(t.hash)},children:r})})})};function e7(e){var t=e.commit,n=(0,ek._)(e,["commit"]);return(0,i.jsx)(eU,(0,J._)((0,Z._)({marker:(0,i.jsx)(eT,{type:"commit"}),header:(0,i.jsx)(e8,{children:(0,i.jsx)(V.CommitSubject,{subject:t.subject})}),unfoldedContent:(0,i.jsx)(e3,{commit:t})},n),{children:(0,i.jsx)(e4,{author:t.author})}))}var e9=function(e){var t=e.commit,n=e.onViewCommitClick,r=(0,ek._)(e,["commit","onViewCommitClick"]);return(0,i.jsx)(eU,(0,J._)((0,Z._)({marker:(0,i.jsx)(eT,{type:"commit"}),header:(0,i.jsx)(e6,{commit:t,onViewCommitClick:function(){return n(t.hash)},children:(0,i.jsx)(e8,{children:(0,i.jsx)(V.CommitSubject,{subject:t.subject})})})},r),{children:(0,i.jsx)(e4,{author:t.author})}))};e.s(["HeaderContainer",()=>e6,"HeaderText",()=>e8,"NodeCommitFlat",()=>e9,"NodeUserAndDate",()=>e4,"default",()=>e7],982737)},385485,e=>{e.v({messageSurface:"AccessibilityBanner-module__KbYUjq__messageSurface"})},325411,e=>{e.v({"background-pulse":"RemoteUpdateArea-module__VN3oSW__background-pulse",loading:"RemoteUpdateArea-module__VN3oSW__loading"})},467880,e=>{e.v({errorText:"CreateRemoteForm-module__hiv3cW__errorText",privateToggle:"CreateRemoteForm-module__hiv3cW__privateToggle",statusText:"CreateRemoteForm-module__hiv3cW__statusText"})},952e3,467612,166963,636680,875259,680011,772275,540285,710106,973267,35647,737553,674373,345008,569484,e=>{"use strict";e.s(["default",()=>tY,"getDefaultNonProjectRemote",()=>tX,"styles",()=>tK],952e3);var t,n,r=e.i(530658),i=e.i(346715),a=e.i(276385),o=e.i(389959),s=e.i(680183),l=e.i(243599),u=e.i(264887),c=e.i(25358),d=e.i(878420),f=e.i(886513),p=e.i(790486),h=e.i(309143),m=e.i(134444),g=e.i(982737),x=e.i(64386),y=e.i(541792),b=e.i(236649),w=e.i(415206),_=e.i(454880),k=e.i(688216),S=e.i(613355),C=e.i(960178),j=e.i(625484);function T(e){var t,n=e.commit,r=e.info,i=(0,f._)(e,["commit","info"]);return"branch"!==r.type&&(t="pull-request"===r.type&&r.subject?r.subject:n.subject),(0,a.jsx)(_.default,(0,x._)((0,d._)({marker:(0,a.jsx)(w.default,{type:"merge"}),header:(0,a.jsxs)(g.HeaderText,{children:[(0,a.jsx)(k.MergeText,{text:"merged"}),(0,a.jsx)(R,{info:r,hash:n.hash,subject:n.subject})]}),unfoldedContent:(0,a.jsx)(b.default,{commit:n,info:r})},i),{children:(0,a.jsxs)(j.View,{gap:8,children:[t?(0,a.jsx)(C.Text,{color:"dimmer",variant:"small",multiline:!1,children:(0,a.jsx)(k.CommitSubject,{subject:t})}):null,(0,a.jsx)(g.NodeUserAndDate,{author:n.author})]})}))}var E=function(e){var t,n=e.commit,r=e.info,i=e.onViewCommitClick,o=(0,f._)(e,["commit","info","onViewCommitClick"]);return"branch"!==r.type&&(t="pull-request"===r.type&&r.subject?r.subject:n.subject),(0,a.jsx)(_.default,(0,x._)((0,d._)({marker:(0,a.jsx)(w.default,{type:"merge"}),header:(0,a.jsx)(g.HeaderContainer,{commit:n,onViewCommitClick:function(){return i(n.hash)},children:(0,a.jsxs)(g.HeaderText,{children:[(0,a.jsx)(k.MergeText,{text:"merged"}),(0,a.jsx)(R,{info:r,hash:n.hash,subject:n.subject})]})})},o),{children:(0,a.jsxs)(j.View,{gap:8,children:[t?(0,a.jsx)(C.Text,{color:"dimmer",variant:"small",multiline:!1,children:(0,a.jsx)(k.CommitSubject,{subject:t})}):null,(0,a.jsx)(g.NodeUserAndDate,{author:n.author})]})}))};function R(e){var t=e.info,n=e.hash,r=e.subject,i=(0,a.jsx)("span",{css:S.rcss.fontWeight.medium,children:r});switch(t.type){case"pull-request":return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"pull request"}),(0,a.jsx)(k.PullRequestID,{id:t.id}),t.reverts&&t.reverts.pr?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"-"}),(0,a.jsx)(k.RevertText,{text:"reverts"}),(0,a.jsx)(k.PullRequestID,{id:t.reverts.pr})]}):null]});case"branch":if(!t.target)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"branch"}),(0,a.jsx)(k.BranchName,{name:t.source})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.BranchName,{name:t.source}),(0,a.jsx)("span",{children:"into"}),(0,a.jsx)(k.BranchName,{name:t.target})]});case"simple":return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.Hash,{hash:t.a}),(0,a.jsx)(y.default,{css:{alignSelf:"center"},size:12}),(0,a.jsx)(k.Hash,{hash:t.b})]});case"octopus":return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"commit"}),(0,a.jsx)(k.Hash,{hash:n}),(0,a.jsxs)("span",{children:["(",t.parents.length," parents)"]})]});default:return i}}function I(e){var t=e.commit,n=e.info,r=(0,f._)(e,["commit","info"]);return(0,a.jsx)(_.default,(0,x._)((0,d._)({marker:(0,a.jsx)(w.default,{type:"revert"}),header:(0,a.jsxs)(g.HeaderText,{children:[(0,a.jsx)(k.RevertText,{text:"reverted"}),(0,a.jsx)(k.Hash,{hash:n.hash}),(0,a.jsx)(k.CommitSubject,{subject:n.subject,quoted:!0})]}),unfoldedContent:(0,a.jsx)(b.default,{commit:t,info:n})},r),{children:(0,a.jsx)(g.NodeUserAndDate,{author:t.author})}))}var A=function(e){var t=e.commit,n=e.info,r=e.onViewCommitClick,i=(0,f._)(e,["commit","info","onViewCommitClick"]);return(0,a.jsx)(_.default,(0,x._)((0,d._)({marker:(0,a.jsx)(w.default,{type:"revert"}),header:(0,a.jsx)(g.HeaderContainer,{commit:t,onViewCommitClick:function(){return r(t.hash)},children:(0,a.jsxs)(g.HeaderText,{children:[(0,a.jsx)(k.RevertText,{text:"reverted"}),(0,a.jsx)(k.Hash,{hash:n.hash}),(0,a.jsx)(k.CommitSubject,{subject:n.subject,quoted:!0})]})})},i),{children:(0,a.jsx)(g.NodeUserAndDate,{author:t.author})}))},P=e.i(446530),D=(0,P.cssRecord)({body:[S.rcss.flex.growAndShrink(1)],virtualItem:[S.rcss.position.absolute,S.rcss.top(0),S.rcss.left(0),S.rcss.width("100%"),S.rcss.overflow("hidden")],virtualList:[S.rcss.position.relative]}),O=function(){return 60};function N(e){var t=e.items,n=(0,o.useRef)(null),r=(0,p.useVirtualizer)({overscan:10,count:t.length,getScrollElement:function(){return n.current},estimateSize:O});return(0,a.jsx)("div",{ref:n,css:D.body,children:(0,a.jsx)("div",{css:D.virtualList,style:{height:"".concat(r.getTotalSize(),"px")},children:r.getVirtualItems().map(function(e){return(0,a.jsx)("div",{css:D.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:r.measureElement,children:(0,a.jsx)(M,{items:t,index:e.index})},e.key.toString())})})})}function M(e){var t=e.items,n=e.index,r=t[n],i=0===n,o=n===t.length-1;if("boundary"===r.type)return(0,a.jsx)(m.default,{text:r.text,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},r.text);var s=t[n-1]?t[n-1].type:null,l=t[n+1]?t[n+1].type:null;return(0,a.jsx)(L,{commit:r.commit,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:"commit"!==s,boundaryBottom:"commit"!==l,onViewCommitClick:r.onViewCommitClick},r.commit.hash)}function L(e){var t=e.commit,n=e.onViewCommitClick,r=(0,f._)(e,["commit","onViewCommitClick"]),i=(0,h.parseCommitAsMerge)(t);if(i)return n?(0,a.jsx)(E,(0,d._)({info:i,commit:t,onViewCommitClick:n},r)):(0,a.jsx)(T,(0,d._)({info:i,commit:t},r));var o=(0,h.parseCommitAsRevert)(t);return o?n?(0,a.jsx)(A,(0,d._)({info:o,commit:t,onViewCommitClick:n},r)):(0,a.jsx)(I,(0,d._)({info:o,commit:t},r)):n?(0,a.jsx)(g.NodeCommitFlat,(0,d._)({commit:t,onViewCommitClick:n},r)):(0,a.jsx)(g.default,(0,d._)({commit:t},r))}var B=e.i(368964),V=e.i(569384),F=e.i(973245),U=e.i(304277);function G(){var e=(0,V._)(["\n  query AccessibilityBannerGetRemoteAccessibility(\n    $provider: ProviderEnum!\n    $remoteUrl: String!\n  ) {\n    getRemoteAccessibility(provider: $provider, remoteUrl: $remoteUrl) {\n      __typename\n      ... on RemoteAccessibility {\n        accessibility\n        message\n      }\n    }\n  }\n"]);return G=function(){return e},e}e.i(566901);var $={},H=(0,F.gql)(G()),z=e.i(167392),W=e.i(568430),q=e.i(220743),K=e.i(167626),Y=e.i(627557),Q=e.i(464121);function X(e){return!!e&&("string"==typeof e?e.includes(Q.GITHUB_URL):e.fetch.includes(Q.GITHUB_URL))}function Z(e){return!!e&&("string"==typeof e?e.includes(Q.BITBUCKET_URL):e.fetch.includes(Q.BITBUCKET_URL))}function J(e){return!!e&&("string"==typeof e?e.includes(Q.GITLAB_URL):e.fetch.includes(Q.GITLAB_URL))}function ee(e){return e.endsWith(".git")?e.slice(0,-4):e}function et(e){if(!e)return null;var t="string"==typeof e?e:e.fetch;return X(t)||J(t)||Z(t)?ee(t):null}function en(e){var t="string"==typeof e?e:e.fetch;if(X(t)||Z(t)||J(t)){var n=(t=ee(t)).split("/");if(n.length<2)return null;var r=n[n.length-2],i=n[n.length-1];return"".concat(r,"/").concat(i)}return null}var er=e.i(173703),ei=e.i(140487),ea=e.i(91720),eo=e.i(396776),es=e.i(385485),el=function(e){var t,n,r,i,o,s,l,u=e.remoteUrl,c=X(u),f=(t={variables:{provider:"github",remoteUrl:u},skip:!c},n=(0,d._)({},$,t),U.useQuery(H,n)).data,p=null==f||null==(r=f.getRemoteAccessibility)?void 0:r.accessibility;if(p&&p!==B.AccessibilityEnum.Accessible)return p===B.AccessibilityEnum.NeedsOauthAppApproval?(0,a.jsx)(eu,{message:null!=(s=null==f||null==(o=f.getRemoteAccessibility)?void 0:o.message)?s:""}):(0,a.jsx)(ec,{message:null!=(l=null==f||null==(i=f.getRemoteAccessibility)?void 0:i.message)?l:"",remoteUrl:null!=u?u:""})},eu=function(e){var t=e.message,n=(0,r._)((0,o.useState)(!1),2),i=n[0],s=n[1];return(0,a.jsx)(j.View,{p:8,children:(0,a.jsx)(eo.StatusBanner,{colorway:"negative",text:(0,a.jsxs)(j.View,{gap:4,py:4,children:[(0,a.jsx)(C.Text,{multiline:!0,variant:"small",children:"Your organization has restricted Oauth app access. Request approval from your organization admins to access this repository."}),(0,a.jsxs)(j.View,{row:!0,align:"center",justify:"start",gap:4,children:[(0,a.jsx)(ea.ButtonLink,{size:"small",colorway:"negative",target:"_blank",rel:"noopener noreferrer",text:"Request approval",iconRight:(0,a.jsx)(q.default,{}),href:"https://docs.github.com/en/account-and-profile/how-tos/organization-membership/requesting-organization-approval-for-oauth-apps"}),(0,a.jsx)(ei.Button,{variant:"underlined",text:(0,a.jsx)(C.Text,{variant:"small",color:"dimmer",children:i?"Hide details":"View details"}),iconRight:i?(0,a.jsx)(W.default,{}):(0,a.jsx)(z.default,{}),onClick:function(){return s(!i)}})]}),i?(0,a.jsx)(er.ShadesSurface,{clsx:es.default.messageSurface,elevate:"1x",children:(0,a.jsx)(C.Text,{variant:"small",color:"dimmer",children:t})}):null]})})})},ec=function(e){var t=e.message,n=e.remoteUrl,i=(0,r._)((0,o.useState)(!1),2),s=i[0],l=i[1];return(0,a.jsx)(j.View,{pt:8,px:8,children:(0,a.jsx)(eo.StatusBanner,{colorway:"negative",text:(0,a.jsxs)(j.View,{gap:8,children:[(0,a.jsxs)(j.View,{row:!0,align:"center",justify:"start",gap:8,children:[(0,a.jsxs)(C.Text,{multiline:!0,variant:"small",children:["The remote repository is not accessible. Please confirm that you have access to this repository"," ",n?": ".concat(n):"","."]}),(0,a.jsx)(ei.Button,{variant:"underlined",text:(0,a.jsx)(C.Text,{variant:"small",color:"dimmer",children:s?"Hide details":"View details"}),iconRight:s?(0,a.jsx)(W.default,{}):(0,a.jsx)(z.default,{}),onClick:function(){return l(!s)}})]}),s?(0,a.jsx)(er.ShadesSurface,{clsx:es.default.messageSurface,elevate:"1x",children:(0,a.jsx)(C.Text,{variant:"small",color:"dimmer",children:t})}):null]})})})},ed=e.i(682205),ef=e.i(597853),ep=e.i(36654),eh=e.i(269848),em=e.i(820228),eg=e.i(979897),ev=e.i(591936),ex=e.i(730792),ey=e.i(255701),eb=e.i(416298),ew=e.i(993796),e_=e.i(242816),ek=e.i(526962),eS=(0,P.cssRecord)({warning:[S.rcss.align.start],header:[S.rcss.fontWeight.bold]});function eC(){var e=(0,ex.useGitPaneModeSwitcher)(),t=(0,ew.useFlag)({controlName:"flag-github-connection-migration",default:!1}),n=(0,e_.default)();return(0,a.jsx)(a.Fragment,{children:n?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(l.DeprecationBanner,{onViewSettingsClick:function(){return e({type:ek.GitPaneModeType.SETTINGS})}})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eo.StatusBanner,{css:eS.warning,icon:(0,a.jsx)(eb.default,{}),colorway:"warning",text:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{css:eS.header,children:t?"Can't push or pull from git provider":"Can't push or pull from GitHub"}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{children:t?"This app has a remote repository configured but you are not connected to any git providers.":"This app has a GitHub repository as a remote but you are not connected to GitHub."})]})}),(0,a.jsx)(ei.Button,{colorway:"primary",iconLeft:(0,a.jsx)(ey.default,{}),text:"Edit Settings",onClick:function(){e({type:ek.GitPaneModeType.SETTINGS})}})]})})}var ej=e.i(682070),eT=(0,P.cssRecord)({text:[S.rcss.flex.shrink(1)]});function eE(e){var t=e.date,n=(0,r._)((0,o.useState)(null),2),i=n[0],s=n[1];return((0,o.useEffect)(function(){if(t){var e=function(){var e=new Date,n="just now";e.getTime()-t.getTime()>6e4&&(n=(0,ej.default)(t,e,{addSuffix:!0})),s(n=n.replace(/minutes?/,"min"))};e();var n=setInterval(e,6e4);return function(){clearInterval(n),s(null)}}},[t]),i)?(0,a.jsxs)(C.Text,{css:eT.text,variant:"small",color:"dimmest",multiline:!1,children:["last fetched ",i]}):null}function eR(e){var t=e.hasRemoteMergeConflict,n=e.hasUnpulledCommits,r=e.hasUnpushedCommits,i=e.workTreeDirty,o=[];return i&&n&&o.push("Can't pull: you have uncommitted changes"),t&&(n||r)&&(n&&r?(i||o.push("Warning: pulling will start a merge with conflicts"),o.push("Can't push: unpulled changes must be merged first")):n?i||o.push("Warning: pulling will start a merge with conflicts"):r&&o.push("Can't push: merge conflict with remote")),o.length?(0,a.jsx)(a.Fragment,{children:o.map(function(e){return(0,a.jsx)(eo.StatusBanner,{text:e,colorway:"warning",icon:(0,a.jsx)(eb.default,{})},e)})}):null}var eI=e.i(297083),eA=e.i(817556),eP=e.i(830675),eD=e.i(825118),eO=e.i(529810),eN=e.i(520739),eM=e.i(861392),eL=e.i(791675),eB=e.i(960933);eB.Type.Object({name:eB.Type.String(),push:eB.Type.String(),fetch:eB.Type.String()});var eV=((t={}).FF_ONLY="FF_ONLY",t.MERGE="MERGE",t.REBASE="REBASE",t);eB.Type.Enum(eV),e.s(["GitPullMode",()=>eV],467612);var eF=e.i(10581),eU=e.i(597865);function eG(e){return(0,eI._)(function(){var t,n;return(0,eA._)(this,function(r){switch(r.label){case 0:return t=null,[4,Promise.race([e,new Promise(function(e){return t=setTimeout(function(){eP.withScope(function(e){e.setTag("gitPane",!0),eP.captureException(Error("Remote update operation timed out"))}),e({error:eD.GitErrors.TIMEOUT})},9e4)})])];case 1:return n=r.sent(),t&&clearTimeout(t),[2,n]}})})()}var e$=(0,P.cssRecord)({container:[S.rcss.flex.grow(1)],branch:[S.rcss.mr(4),S.rcss.color.foregroundDefault,S.rcss.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[S.rcss.color.foregroundDimmest],text:[S.rcss.ml(4),S.rcss.color.foregroundDimmest]});function eH(e){var t=e.upstream,n=e.remotes,r=(0,o.useMemo)(function(){return function(e,t){var n=null,r=null;if((0,K._)(e,Map)){var i=(0,Y.splitRemoteFromBranch)(t),a=i[0];if(n=i[1],!a||!n)return null;var o=e.get(a);if(!o)return null;r=et(o)}else n=t,r=et(e);return r&&X(r)?"".concat(r,"/tree/").concat(n):null}(n,t)},[t,n]);return(0,a.jsxs)(C.Text,{css:e$.container,variant:"small",multiline:!1,children:[r?(0,a.jsx)("a",{css:e$.branch,href:r,target:"_blank",children:t}):(0,a.jsx)("span",{css:e$.branch,children:t}),(0,a.jsx)("span",{css:e$.divider,children:""}),(0,a.jsx)("span",{css:e$.text,children:"upstream"})]})}var ez=e.i(272461),eW=e.i(136540),eq=e.i(751273),eK=e.i(325411);function eY(e){var t=e.remotes,n=e.gotoPendingState,i=(0,ex.useNotifyGitError)(),s=function(e){var t=e.onError,n=e.onPullConflicts,i=(0,r._)((0,o.useState)(!1),2),a=i[0],s=i[1],l=(0,r._)((0,o.useState)(!1),2),u=l[0],c=l[1],f=(0,r._)((0,o.useState)(!1),2),p=f[0],h=f[1],m=(0,r._)((0,o.useState)(!1),2),g=m[0],y=m[1],b=(0,eO.default)().git,w=(0,eU.default)(function(e){return(0,eI._)(function(){var t,n,r,i,a,o,s,l,u,c,f,p,h,m,g,y,b,w,_,k,S,C;return(0,eA._)(this,function(j){switch(j.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:eV.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needProviderConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:if((a=j.sent()).error)return[2,a];if(o=a.state,a.type!==eF.GitRepositoryStateType.NORMAL)return[2,{error:eD.GitErrors.INVALID_STATE}];return(o===eF.GitRepositoryState.DIRTY_WORKTREE||o===eF.GitRepositoryState.DIRTY_INDEX)&&(i.workTreeDirty=!0),[4,e.status()];case 2:if((s=j.sent()).error)return[2,s];if(l=s.branch,u=null==(t=s.upstream)?void 0:t.branch,f=null!=(c=null==(n=s.upstream)?void 0:n.ahead)?c:0,h=null!=(p=null==(r=s.upstream)?void 0:r.behind)?p:0,!l)return[2,{error:eD.GitErrors.HEAD_DETACHED}];if(i.ahead=f,i.behind=h,!u)return[3,9];return i.upstream=u,i.hasUnpulledCommits=h>0,i.hasUnpushedCommits=f>0,[4,e.lastFetched()];case 3:if((g=j.sent()).error)return[2,g];return i.lastFetched=g.lastFetched,[4,e.canMergeBranches(l,u)];case 4:var T;if((y=j.sent()).error)return[2,y];return y.canMerge||(i.hasRemoteMergeConflict=!0),[4,(T=u,(0,eI._)(function(){var t,n,r;return(0,eA._)(this,function(i){switch(i.label){case 0:if(!(t=(0,eM.getBranchRemote)(T)))return[2,{error:eD.GitErrors.INVALID_REFERENCE}];return[4,e.getRemotes()];case 1:if((n=i.sent()).error)return[2,n];if(!(r=n.remotes.get(t)))return[2,{error:eD.GitErrors.INVALID_REFERENCE}];return[2,{remote:r,error:null}]}})})())];case 5:if((b=j.sent()).error)return[2,b];if(w=b.remote,S=null!=(k=null==(_=(0,ew.getUserFlags)())||null==(m=_.flags["flag-github-connection-migration"])?void 0:m.value)&&k,C=!1,!S)return[3,7];return[4,e.getProfiles()];case 6:return C=!j.sent().some(function(e){return e.isSourceOpenInt}),[3,8];case 7:C=!e.hasProfile(eL.GitProfileProvider.GITHUB)&&X(w),j.label=8;case 8:C&&(i.needProviderConnection=!0),i.workTreeDirty||i.needProviderConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needProviderConnection||(i.canPush=!0),f>0&&(i.pullMode=i.hasRemoteMergeConflict?eV.MERGE:eV.REBASE),j.label=9;case 9:return[2,(0,x._)((0,d._)({},i),{error:null})]}})})()});if(!w)return{type:"loading"};if(w.error||!w.upstream)return{type:"error",error:w.error};if(!w.upstream)return{type:"noUpstream"};var _=w.upstream,k=w.hasUnpulledCommits,S=w.hasUnpushedCommits,C=w.hasRemoteMergeConflict,j=w.pullMode,T=w.canPull,E=w.canPush,R=w.workTreeDirty,I=w.needProviderConnection,A=w.ahead,P=w.behind,D=w.lastFetched;if(I)return{type:"needProviderConnection",upstream:_};var O=a||u||p||g,N=!_||I||O,M=!T||O,L=!E||O,B=!T&&!E||C||O;return{type:"remote",fetch:function(){return(0,eI._)(function(){var e;return(0,eA._)(this,function(n){switch(n.label){case 0:if(N)return[2];return s(!0),[4,eG(b.fetch())];case 1:return e=n.sent(),b.forceRefresh(),s(!1),e.error?t(e.error):(0,eN.trackGitPaneEvent)("remote-fetched"),[2]}})})()},fetching:a,fetchDisabled:N,lastFetched:D,pull:function(){return(0,eI._)(function(){var e;return(0,eA._)(this,function(r){switch(r.label){case 0:if(M)return[2];return c(!0),[4,eG(b.pull({mode:j,allowConflicts:!0}))];case 1:return e=r.sent(),c(!1),e.error?t(e.error):(e.hasConflicts&&n(),b.forceRefresh(),(0,eN.trackGitPaneEvent)("upstream-pulled")),[2]}})})()},pulling:u,pullDisabled:M,pullMode:j,canPull:T,push:function(){return(0,eI._)(function(){var e;return(0,eA._)(this,function(n){switch(n.label){case 0:if(L)return[2];return h(!0),[4,eG(b.push())];case 1:return e=n.sent(),b.forceRefresh(),h(!1),e.error?t(e.error):(0,eN.trackGitPaneEvent)("upstream-pushed"),[2]}})})()},pushing:p,pushDisabled:L,canPush:E,sync:function(){return(0,eI._)(function(){var e,n;return(0,eA._)(this,function(r){switch(r.label){case 0:if(B)return[2];if(y(!0),!T)return[3,2];return[4,eG(b.pull({mode:j}))];case 1:if((e=r.sent()).error)return t(e.error),y(!1),[2];(0,eN.trackGitPaneEvent)("upstream-pulled"),r.label=2;case 2:if(!E)return[3,4];return[4,b.push()];case 3:if((n=r.sent()).error)return t(n.error),y(!1),[2];(0,eN.trackGitPaneEvent)("upstream-pushed"),r.label=4;case 4:return b.forceRefresh(),y(!1),[2]}})})()},syncing:g,syncDisabled:B,upstream:_,hasUnpulledCommits:k,hasUnpushedCommits:S,hasRemoteMergeConflict:C,workTreeDirty:R,ahead:A,behind:P}}({onError:i,onPullConflicts:n}),l="error"===s.type?s.error:null;return((0,o.useEffect)(function(){l&&i(l)},[l,i]),"loading"===s.type)?(0,a.jsx)(er.ShadesSurface,{elevate:"1x",br:"container",clsx:eK.default.loading}):"error"===s.type||"noUpstream"===s.type?null:"needProviderConnection"===s.type?(0,a.jsxs)(er.ShadesSurface,{elevate:"1x",br:"container",border:"subtle",p:8,gap:8,children:[(0,a.jsxs)(j.View,{row:!0,gap:8,align:"center",children:[(0,a.jsx)(eH,{upstream:s.upstream,remotes:t}),(0,a.jsx)(eq.Tooltip,{tooltip:"Fetch latest from remote",children:(0,a.jsx)(eW.IconButton,{alt:"Fetch",disabled:!0,size:24,children:(0,a.jsx)(eg.default,{})})})]}),(0,a.jsx)(eC,{})]}):(0,a.jsxs)(er.ShadesSurface,{elevate:"1x",br:"container",border:"subtle",p:8,gap:8,children:[(0,a.jsxs)(j.View,{row:!0,gap:8,align:"center",children:[(0,a.jsx)(eH,{upstream:s.upstream,remotes:t}),(0,a.jsx)(eE,{date:s.lastFetched}),(0,a.jsx)(eq.Tooltip,{tooltip:"Fetch latest from remote",children:(0,a.jsx)(eW.IconButton,{alt:"Fetch",onClick:s.fetch,disabled:s.fetchDisabled||s.fetching,size:24,children:s.fetching?(0,a.jsx)(eh.default,{}):(0,a.jsx)(eg.default,{})})})]}),(0,a.jsx)(eR,{hasRemoteMergeConflict:s.hasRemoteMergeConflict,hasUnpulledCommits:s.hasUnpulledCommits,hasUnpushedCommits:s.hasUnpushedCommits,workTreeDirty:s.workTreeDirty}),(0,a.jsxs)(j.View,{row:!0,gap:8,align:"center",children:[(0,a.jsx)(j.View,{grow:!0,children:(0,a.jsx)(eq.Tooltip,{tooltip:"Pull & push the latest changes",children:(0,a.jsx)(ei.Button,{text:(0,a.jsx)(eQ,{behind:s.behind,ahead:s.ahead}),iconLeft:s.syncing?(0,a.jsx)(eh.default,{}):(0,a.jsx)(em.default,{}),onClick:s.sync,loading:s.syncing,disabled:s.syncDisabled})})}),(0,a.jsxs)(ez.Group,{children:[(0,a.jsx)(ei.Button,{text:"Pull",iconLeft:s.pulling?(0,a.jsx)(eh.default,{}):(0,a.jsx)(ep.default,{}),onClick:s.pull,loading:s.pulling,disabled:s.pullDisabled}),(0,a.jsx)(ei.Button,{text:"Push",iconLeft:s.pushing?(0,a.jsx)(eh.default,{}):(0,a.jsx)(ev.default,{}),onClick:s.push,loading:s.pushing,disabled:s.pushDisabled})]})]})]})}function eQ(e){var t=e.behind,n=e.ahead;return(0,a.jsxs)(j.View,{row:!0,gap:4,align:"center",children:[(0,a.jsx)("span",{children:"Sync Changes"}),t>0&&(0,a.jsx)(C.Text,{color:"dimmest",children:(0,a.jsxs)(j.View,{row:!0,align:"center",children:[(0,a.jsx)("span",{children:t}),(0,a.jsx)(ed.default,{size:16})]})}),n>0&&(0,a.jsx)(C.Text,{color:"dimmest",children:(0,a.jsxs)(j.View,{row:!0,align:"center",children:[(0,a.jsx)("span",{children:n}),(0,a.jsx)(ef.default,{size:16})]})})]})}var eX=e.i(252204),eZ=e.i(819229),eJ=e.i(693732),e0=e.i(913965);function e1(e){return(0,a.jsxs)(e0.default,(0,x._)((0,d._)({},e),{children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_9408_262)",children:[(0,a.jsx)("path",{fill:"#E24329",d:"m23.595 9.585-.03-.09L20.302.982a.855.855 0 0 0-.847-.532.85.85 0 0 0-.495.18.832.832 0 0 0-.293.45l-2.205 6.75H7.537L5.332 1.08a.855.855 0 0 0-.78-.645.862.862 0 0 0-.855.54L.435 9.51l-.038.082a6.075 6.075 0 0 0 2.01 7.005l.015.008.03.022 4.973 3.728 2.46 1.86 1.5 1.14a1.012 1.012 0 0 0 1.215 0l1.5-1.14 2.46-1.86 5.002-3.75h.015a6.068 6.068 0 0 0 2.025-7.02h-.007Z"}),(0,a.jsx)("path",{fill:"#FC6D26",d:"m23.595 9.585-.03-.09a11.062 11.062 0 0 0-4.395 1.98l-7.162 5.43 4.567 3.45 5.003-3.75h.015a6.067 6.067 0 0 0 2.002-7.02Z"}),(0,a.jsx)("path",{fill:"#FCA326",d:"m7.425 20.355 2.46 1.86 1.5 1.14a1.012 1.012 0 0 0 1.215 0l1.5-1.14 2.46-1.86-4.575-3.45-4.552 3.45h-.008Z"}),(0,a.jsx)("path",{fill:"#FC6D26",d:"M4.83 11.475A11.033 11.033 0 0 0 .435 9.502l-.038.09a6.075 6.075 0 0 0 2.01 7.005l.015.008.03.022 4.973 3.728L12 16.905l-7.17-5.43Z"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_9408_262",children:(0,a.jsx)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}var e2=(0,P.cssRecord)({remoteUrl:[{border:"none"},S.rcss.height("auto"),S.rcss.py(4),S.rcss.px(8)]}),e3=function(e){switch(e){case"github":return(0,a.jsx)(eZ.default,{});case"gitlab":return(0,a.jsx)(e1,{});case"bitbucket":return(0,a.jsx)(eJ.default,{})}};function e5(e){var t=e.branch,n=e.remotes,i=(0,r._)((0,o.useMemo)(function(){if(t.type===s.GitBranchType.LOCAL)return[null,null,null];var e=n.get(t.remote);if(!e)return[null,null,null];var r=et(e),i=en(e),a=null;return X(r)?a="github":J(r)?a="gitlab":Z(r)&&(a="bitbucket"),[r,i,a]},[t,n]),3),l=i[0],u=i[1],c=i[2];return l&&u&&c?(0,a.jsx)(ea.ButtonLink,{css:e2.remoteUrl,text:u,href:l,target:"_blank",iconLeft:e3(c),iconRight:(0,a.jsx)(eX.default,{}),variant:"outlined",size:"small"}):null}var e4=e.i(967629),e8=(0,e4.keyframes)({from:{opacity:0},to:{opacity:1}}),e6=(0,P.cssRecord)({loadingView:[{animation:"".concat(e8," 0.125s 0.25s linear backwards")},S.rcss.flex.grow(1),S.rcss.display.flex,S.rcss.center]});function e7(){return(0,a.jsx)(j.View,{css:e6.loadingView,children:(0,a.jsx)(eh.default,{size:48})})}function e9(){var e=(0,V._)(["\n  query CreateRemoteFormRepl($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return e9=function(){return e},e}function te(){var e=(0,V._)(["\n  query CreateRemoteFormUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          installations {\n            id\n            type\n            name\n            avatarUrl\n            accountId\n            repositorySelection\n          }\n          accessToken\n        }\n        gitHubInfoV2 {\n          organizations {\n            id\n            type\n            avatarUrl\n            name\n          }\n        }\n        bitbucketInfo {\n          workspacesToProjects {\n            uuid\n            name\n            slug\n            projects {\n              uuid\n              name\n            }\n          }\n        }\n        gitLabInfo {\n          groups {\n            namespaceId\n            name\n            visibility\n            description\n            avatarUrl\n            webUrl\n            fullName\n            fullPath\n          }\n        }\n      }\n    }\n  }\n"]);return te=function(){return e},e}e.s(["default",()=>e7],166963);var tt={},tn=(0,F.gql)(e9()),tr=(0,F.gql)(te()),ti=e.i(399245),ta=e.i(995691),to=e.i(257982),ts=e.i(968783),tl=e.i(222342),tu=e.i(207237);function tc(){var e=(0,V._)(["\n  fragment GitProviderAuthorizations on OrgAuthorizations {\n    createPublicGitRemote {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n  }\n"]);return tc=function(){return e},e}function td(){var e=(0,V._)(["\n  query GetGitProviderAuthorizations($orgId: String!) {\n    currentUser {\n      id\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          settings {\n            ... on OrgSettings {\n              allowedGitProvider\n              allowedGitRemoteTarget\n            }\n          }\n          authorizations {\n            ...GitProviderAuthorizations\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return td=function(){return e},e}var tf={},tp=(0,F.gql)(tc()),th=(0,F.gql)(td(),tp),tm=e.i(625251),tg=e.i(119274);function tv(e){var t,n=e.value,i=e.onChange,o=e.workspacesToProjects,s=e.whitelistedWorkspaces,l=e.loading,u=e.disabled;if(s){var c=new Set(s.map(function(e){return e.toLowerCase()}));t=o.map(function(e){if(!e)return null;var t,n=null==(t=e.projects)?void 0:t.filter(function(t){var n;return null!=t&&!!t.name&&c.has((null!=(n=e.name)?n:"").toLowerCase())});return n&&0!==n.length?(0,x._)((0,d._)({},e),{projects:n}):null}).filter(function(e){return null!=e})}else t=o;var f=t.some(function(e){return(null==e?void 0:e.projects)&&e.projects.length>0}),p=(0,ex.useGitPaneModeSwitcher)();return(0,a.jsxs)(j.View,{gap:2,children:[f||l?null:(0,a.jsx)(eo.StatusBanner,{colorway:"warning",text:(0,a.jsxs)(j.View,{gap:8,children:[(0,a.jsx)(C.Text,{children:"No available projects. Connect your Bitbucket account to continue."}),(0,a.jsx)(ei.Button,{colorway:"warning",text:"Manage Connection",onClick:function(){return p({type:ek.GitPaneModeType.SETTINGS})}})]})}),(0,a.jsx)(tg.PopupMenu,{isDisabled:!f||u,label:"Select a project",trigger:l?(0,a.jsx)(ei.Button,{text:(0,a.jsx)(eh.default,{}),disabled:!0}):(0,a.jsx)(ei.Button,{iconRight:(0,a.jsx)(z.default,{}),text:n?"".concat(n.projectName," (").concat(n.workspaceName,")"):"Select a Bitbucket project",disabled:!f||u}),onAction:function(e){var t,n,a,s,l,u=(0,r._)(e.toString().split("::"),2),c=u[0],d=u[1],f=o.find(function(e){return(null==e?void 0:e.slug)===c}),p=null==f||null==(t=f.projects)?void 0:t.find(function(e){return(null==e?void 0:e.uuid)===d});p&&f&&i({projectUuid:null!=(n=p.uuid)?n:"",projectName:null!=(a=p.name)?a:"",workspaceName:null!=(s=f.name)?s:"",workspaceSlug:null!=(l=f.slug)?l:""})},children:t.map(function(e){var t,n;return e?(0,a.jsxs)(tm.MenuSection,{children:[(0,a.jsx)(tg.MenuHeader,{text:null!=(n=e.name)?n:"Unnamed Workspace"}),null==(t=e.projects)?void 0:t.map(function(t){var n;return t?(0,a.jsx)(tg.MenuItem,{id:"".concat(e.slug,"::").concat(t.uuid),label:null!=(n=t.name)?n:"Unnamed Project"},"".concat(e.slug,"::").concat(t.uuid)):null}),(0,a.jsx)(tg.Separator,{})]},e.uuid):null})}),s?(0,a.jsx)(eo.StatusBanner,{text:"Your team admin has limited the workspaces you can create repositories in. Allowed workspace names: ".concat(s.join(", "))}):null]})}var tx=e.i(640581),ty=e.i(416746),tb=e.i(116235);function tw(e){return(0,a.jsx)(tb.default,(0,x._)((0,d._)({},e),{children:(0,a.jsx)("path",{d:"M15 14.25A4.75 4.75 0 0 1 19.75 19v2a.75.75 0 0 1-.75.75H5a.75.75 0 0 1-.75-.75v-2A4.75 4.75 0 0 1 9 14.25h6ZM12 2.25a4.75 4.75 0 1 1 0 9.5 4.75 4.75 0 0 1 0-9.5Z"})}))}var t_=e.i(714165),tk=e.i(721321),tS=e.i(552144);function tC(e){var t,n=e.value,r=e.onChange,i=e.organizations,s=e.whitelistedOrganizations,l=e.loading,u=e.disabled,c=s&&s.length>0;if((0,o.useEffect)(function(){c&&"personal"===n.type&&r({type:"organization"})},[c,n.type,r]),s){var d=new Set(s.map(function(e){return e.toLowerCase()}));t=null==i?void 0:i.filter(function(e){return d.has(e.name.toLowerCase())})}else t=i;var f=t&&t.length>0,p=(null==n?void 0:n.type)==="organization"?n.organizationName:void 0,h=(0,ex.useGitPaneModeSwitcher)();return(0,a.jsxs)(j.View,{gap:8,children:[(0,a.jsxs)(tk.ButtonGroup,{stretch:!0,row:!0,name:"repository-location",value:null==n?void 0:n.type,onChange:function(e){if("organization"===e){if(!f)return void r({type:"organization",organizationName:void 0});r({type:"organization",organizationName:t[0].name})}else r({type:"personal"})},disabled:l||u||c,children:[(0,a.jsx)(tk.ButtonGroupItem,{id:"personal",value:"personal",text:"Personal",icon:(0,a.jsx)(tw,{})}),(0,a.jsx)(tk.ButtonGroupItem,{id:"organization",value:"organization",text:"Organization",icon:l?(0,a.jsx)(eh.default,{}):(0,a.jsx)(tx.default,{})})]}),(null==n?void 0:n.type)==="organization"&&(0,a.jsxs)(j.View,{children:[f||l?(0,a.jsx)(tg.PopupMenu,{isDisabled:!f||u,label:"Select an organization",trigger:l?(0,a.jsx)(ei.Button,{text:(0,a.jsx)(eh.default,{}),disabled:!0}):(0,a.jsx)(ei.Button,{iconRight:(0,a.jsx)(z.default,{}),text:null!=p?p:"Select a target GitHub organization",disabled:!f||u}),onAction:function(e){r({type:"organization",organizationName:e.toString()})},items:t.map(function(e){return{id:e.id,name:e.name,avatarUrl:e.avatarUrl}}),children:function(e){var t;return(0,a.jsx)(tg.MenuItem,{id:e.name,label:e.name,icon:(0,a.jsx)(t_.Avatar,{src:null!=(t=e.avatarUrl)?t:null,username:e.name,size:16})},e.name)}}):(0,a.jsx)(eo.StatusBanner,{colorway:"warning",text:(0,a.jsxs)(j.View,{gap:4,children:[(0,a.jsx)(C.Text,{children:"No available organizations. Connect your GitHub account to continue."}),(0,a.jsx)(ei.Button,{colorway:"warning",text:"Manage Connection",onClick:function(){return h({type:ek.GitPaneModeType.SETTINGS})}})]})}),(0,a.jsx)(j.View,{pt:4,children:s?(0,a.jsx)(eo.StatusBanner,{text:(0,a.jsxs)(j.View,{row:!0,gap:8,align:"center",children:[(0,a.jsx)(ty.default,{}),(0,a.jsxs)(C.Text,{variant:"small",textWrap:"wrap",shrink:!0,children:["Your team admin has limited the organizations you can create repositories in. Allowed organizations:"," ",s.join(", ")]})]})}):(0,a.jsx)(tS.StatusBannerButton,{text:" Not seeing your organization? You may need to request approval",iconLeft:(0,a.jsx)(q.default,{}),href:"https://docs.github.com/en/account-and-profile/how-tos/organization-membership/requesting-organization-approval-for-oauth-apps"})})]})]})}function tj(e){var t,n=e.value,r=e.onChange,i=e.groups,s=e.whitelistedGroups,l=e.loading,u=e.disabled,c=s&&s.length>0;if((0,o.useEffect)(function(){c&&"personal"===n.type&&r({type:"group"})},[c,n.type,r]),s){var d=new Set(s.map(function(e){return e.toLowerCase()}));t=i.filter(function(e){return!!e.fullName&&d.has(e.fullName.toLowerCase())})}else t=i;var f=t.length>0,p=(null==n?void 0:n.type)==="group"?n.groupName:void 0,h=(0,ex.useGitPaneModeSwitcher)();return(0,a.jsxs)(j.View,{gap:8,children:[(0,a.jsxs)(tk.ButtonGroup,{stretch:!0,row:!0,name:"repository-location",value:null==n?void 0:n.type,onChange:function(e){if("group"===e){var n;if(!f)return void r({type:"group"});r({type:"group",groupId:t[0].namespaceId,groupName:null!=(n=t[0].fullName)?n:t[0].name})}else r({type:"personal"})},disabled:l||u||c,children:[(0,a.jsx)(tk.ButtonGroupItem,{id:"personal",value:"personal",text:"Personal",icon:(0,a.jsx)(tw,{})}),(0,a.jsx)(tk.ButtonGroupItem,{id:"group",value:"group",text:"Group",icon:l?(0,a.jsx)(eh.default,{}):(0,a.jsx)(tx.default,{})})]}),(null==n?void 0:n.type)==="group"&&(0,a.jsxs)(j.View,{children:[f||l?(0,a.jsx)(tg.PopupMenu,{isDisabled:!f||u,label:"Select a group",trigger:l?(0,a.jsx)(ei.Button,{text:(0,a.jsx)(eh.default,{}),disabled:!0}):(0,a.jsx)(ei.Button,{iconRight:(0,a.jsx)(z.default,{}),text:null!=p?p:"Select a GitLab group",disabled:!f||u}),onAction:function(e){var n,i=t.find(function(t){return t.namespaceId===Number(e)});i&&r({type:"group",groupId:i.namespaceId,groupName:null!=(n=i.fullName)?n:i.name})},children:t.map(function(e){var t;return(0,a.jsx)(tg.MenuItem,{id:e.namespaceId.toString(),label:null!=(t=e.fullName)?t:e.name},e.namespaceId)})}):(0,a.jsx)(eo.StatusBanner,{colorway:"warning",text:(0,a.jsxs)(j.View,{gap:4,children:[(0,a.jsxs)(C.Text,{children:["No available groups. Connect your GitLab account to continue."," "]}),(0,a.jsx)(ei.Button,{colorway:"warning",text:"Manage Connection",onClick:function(){return h({type:ek.GitPaneModeType.SETTINGS})}})]})}),s?(0,a.jsx)(eo.StatusBanner,{text:(0,a.jsxs)(j.View,{row:!0,gap:8,align:"center",children:[(0,a.jsx)(ty.default,{}),(0,a.jsxs)(C.Text,{variant:"small",textWrap:"wrap",shrink:!0,children:["Your team admin has limited the groups you can create repositories in. Allowed group names:"," ",s.join(", ")]})]})}):null]})]})}var tT=e.i(951262);function tE(){var e=(0,V._)(["\n  mutation CreateBitbucketRepo($input: CreateBitbucketRepoInput!) {\n    createBitbucketRepo(input: $input) {\n      ... on CreateBitbucketRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return tE=function(){return e},e}var tR={},tI=(0,F.gql)(tE());function tA(){var e=(0,V._)(["\n  mutation CreateGitHubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return tA=function(){return e},e}var tP={},tD=(0,F.gql)(tA());function tO(){var e=(0,V._)(["\n  mutation CreateGitLabRepo($input: CreateGitlabProjectInput!) {\n    createGitlabProject(input: $input) {\n      ... on CreateGitlabProjectResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return tO=function(){return e},e}var tN={},tM=(0,F.gql)(tO()),tL=e.i(428596),tB=e.i(607278),tV=e.i(352758),tF=e.i(467880);function tU(e){var t,n,i,s,l,u,c,f,p,h,m,g,x,y,b,w,_,k,S,T,E,R,I,A,P,D,O,N=e.remoteName,M=e.onCreateSuccess,L=e.updateRemote,V=(0,tl.default)().showConfirm,F=(0,eO.default)().git,G=(0,tL.useIdSeed)(),$=(0,tu.default)(),H=(0,o.useRef)(null),z=(0,o.useRef)(null),W=(0,ts.useCurrentUserStoredOrgContext)().orgId,q=(t={variables:{replId:$}},n=(0,d._)({},tt,t),U.useQuery(tn,n)).data,K=(i=(0,d._)({},tt,void 0),U.useQuery(tr,i)),Y=K.data,Q=K.loading,X=(f=(l={variables:{orgId:null!=(s=(0,ts.useCurrentUserStoredOrgContext)().orgId)?s:""},skip:!s},u=(0,d._)({},tf,l),c=U.useQuery(th,u)).data,p=c.loading,(0,o.useMemo)(function(){if(!s||p)return{canCreatePublicRemote:!0,privateRemoteMessage:void 0,allowedGitProvider:void 0,allowedGitRemoteTarget:void 0,loading:p,authorizations:void 0};var e,t,n,r,i,a=null==f||null==(e=f.currentUser)?void 0:e.org;if((null==a?void 0:a.__typename)!=="Org")return{canCreatePublicRemote:!0,privateRemoteMessage:void 0,allowedGitProvider:void 0,allowedGitRemoteTarget:void 0,loading:!1,authorizations:void 0};var o=a.settings,l=a.authorizations,u=null==l?void 0:l.createPublicGitRemote,c=null==(n=null==u?void 0:u.isAuthorized)||n,d=null!=(r=null==u?void 0:u.message)?r:void 0,h=(null==o?void 0:o.__typename)==="OrgSettings"&&null!=(i=o.allowedGitProvider)?i:void 0,m=(null==o?void 0:o.__typename)==="OrgSettings"?null==(t=o.allowedGitRemoteTarget)?void 0:t.filter(function(e){return null!==e}):void 0;return m&&0===m.length&&(m=void 0),{canCreatePublicRemote:c,privateRemoteMessage:d,allowedGitProvider:h,allowedGitRemoteTarget:m,loading:!1,authorizations:l}},[s,p,f])),Z=X.canCreatePublicRemote,J=X.privateRemoteMessage,ee=X.allowedGitProvider,et=X.allowedGitRemoteTarget,en=X.loading,er=!Z,ea=null!=(P=null==Y||null==(T=Y.currentUser)||null==(S=T.gitHubInfoV2)?void 0:S.organizations)?P:[],es=null!=(D=null==Y||null==(R=Y.currentUser)||null==(E=R.bitbucketInfo)?void 0:E.workspacesToProjects)?D:[],el=null!=(O=null==Y||null==(A=Y.currentUser)||null==(I=A.gitLabInfo)?void 0:I.groups)?O:[],eu=(null==q?void 0:q.getRepl.__typename)==="Repl"?q.getRepl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},ec=eu.slug,ed=eu.description,ef=eu.isPrivate,ep=eu.url,em=(g=(m=(0,r._)((h=(0,d._)({},tP,void 0),tT.useMutation(tD,h)),2))[0],{create:function(e){return(0,eI._)(function(){var t,n,r,i;return(0,eA._)(this,function(a){switch(a.label){case 0:return[4,g({variables:{input:{name:e.name,description:e.description,homepage:e.homepage,isPrivate:e.isPrivate,githubOrgId:"organization"===e.location.type?e.location.organizationName:void 0,ownerType:"organization"===e.location.type?B.GithubRepoOwnerType.Organization:B.GithubRepoOwnerType.User,orgId:e.orgId}}})];case 1:if((null==(t=(i=a.sent()).data)?void 0:t.createGithubRepo.__typename)==="UnauthorizedError"||(null==(n=i.data)?void 0:n.createGithubRepo.__typename)==="UserError")return[2,{error:i.data.createGithubRepo.message}];if((null==(r=i.data)?void 0:r.createGithubRepo.__typename)==="CreateGithubRepoResult")return[2,{remoteUrl:i.data.createGithubRepo.remoteUrl}];return[2,{error:"Unknown error occurred"}]}})})()},loading:m[1].loading}),eg=em.create,ev=em.loading,ex=(b=(y=(0,r._)((x=(0,d._)({},tR,void 0),tT.useMutation(tI,x)),2))[0],{create:function(e){return(0,eI._)(function(){var t,n,r,i;return(0,eA._)(this,function(a){switch(a.label){case 0:return[4,b({variables:{input:{workspace:e.project.workspaceSlug,name:e.name,description:e.description,isPrivate:e.isPrivate,orgId:e.orgId}}})];case 1:if((null==(t=(i=a.sent()).data)?void 0:t.createBitbucketRepo.__typename)==="UnauthorizedError"||(null==(n=i.data)?void 0:n.createBitbucketRepo.__typename)==="UserError")return[2,{error:i.data.createBitbucketRepo.message}];if((null==(r=i.data)?void 0:r.createBitbucketRepo.__typename)==="CreateBitbucketRepoResult")return[2,{remoteUrl:i.data.createBitbucketRepo.remoteUrl}];return[2,{error:"Unknown error occurred"}]}})})()},loading:y[1].loading}),ey=ex.create,eb=ex.loading,ew=(k=(_=(0,r._)((w=(0,d._)({},tN,void 0),tT.useMutation(tM,w)),2))[0],{create:function(e){return(0,eI._)(function(){var t,n,r,i;return(0,eA._)(this,function(a){switch(a.label){case 0:return[4,k({variables:{input:{name:e.name,description:e.description,isPrivate:e.isPrivate,namespaceId:"group"===e.location.type?e.location.groupId:void 0,ownerType:"group"===e.location.type?B.GitlabProjectOwnerType.Group:B.GitlabProjectOwnerType.User,orgId:e.orgId,groupName:e.groupName}}})];case 1:if((null==(t=(i=a.sent()).data)?void 0:t.createGitlabProject.__typename)==="UnauthorizedError"||(null==(n=i.data)?void 0:n.createGitlabProject.__typename)==="UserError")return[2,{error:i.data.createGitlabProject.message}];if((null==(r=i.data)?void 0:r.createGitlabProject.__typename)==="CreateGitlabProjectResult")return[2,{remoteUrl:i.data.createGitlabProject.remoteUrl}];return[2,{error:"Unknown error occurred"}]}})})()},loading:_[1].loading}),e_=ew.create,ek=ew.loading,eS=ev||eb||ek,eC=(0,r._)((0,o.useState)(null!=ee?ee:"github"),2),ej=eC[0],eT=eC[1];(0,o.useEffect)(function(){ee&&ee!==ej&&eT(ee)},[ee,ej]);var eE=(0,r._)((0,o.useState)(),2),eR=eE[0],eP=eE[1],eD=(0,r._)((0,o.useState)({type:"personal"}),2),eL=eD[0],eB=eD[1],eV=(0,r._)((0,o.useState)(void 0),2),eF=eV[0],eU=eV[1],eG=(0,r._)((0,o.useState)({type:"personal"}),2),e$=eG[0],eH=eG[1],ez=(0,r._)((0,o.useState)(!!er||null==ef||ef),2),eW=ez[0],eK=ez[1],eY=(0,r._)((0,o.useState)(null!=ec?ec:""),2),eQ=eY[0],eX=eY[1],e0=(0,r._)((0,o.useState)(),2),e2=e0[0],e3=e0[1],e5=(0,r._)((0,o.useState)(null!=ed?ed:ep&&"Repository for https://replit.com".concat(ep)),2),e4=e5[0],e8=e5[1],e6=(0,r._)((0,o.useState)(),2),e7=e6[0],e9=e6[1],te=!eQ||"bitbucket"===ej&&!eF||"github"===ej&&"organization"===eL.type&&!eL.organizationName||"gitlab"===ej&&"group"===e$.type&&!e$.groupName,tc=function(){e3(void 0),e9(void 0),eP(void 0)},td=function(e){return(0,eI._)(function(){var t,n,r;return(0,eA._)(this,function(i){switch(i.label){case 0:return[4,F.getRemotes()];case 1:if((t=i.sent()).error)return eP("Error finding current remotes, ".concat(t.error)),[2];if(!t.remotes.has(N))return[3,3];return[4,F.setRemoteURL({remote:N,url:e})];case 2:if((n=i.sent()).error)return eP("Error (".concat(n.error,") setting ").concat(N," to use ").concat(e," as a remote.")),[2];return null==L||L(e),(0,eN.trackGitPaneEvent)("remote-edited"),[2];case 3:return[4,F.addRemote({name:N,url:e})];case 4:if((r=i.sent()).error)return eP("Error (".concat(r.error,") adding ").concat(N," ").concat(e," as a remote.")),[2];return null==L||L(e),(0,eN.trackGitPaneEvent)("remote-added"),[2]}})})()},tp={github:{name:"GitHub",icon:(0,a.jsx)(eZ.default,{})},bitbucket:{name:"Bitbucket",icon:(0,a.jsx)(eJ.default,{})},gitlab:{name:"GitLab",icon:(0,a.jsx)(e1,{})}};return Q||en?(0,a.jsx)(j.View,{align:"center",justify:"center",children:(0,a.jsx)(eh.default,{})}):(0,a.jsxs)(j.View,{gap:4,children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Text,{color:"dimmest",multiline:!1,children:"Git Provider"}),(0,a.jsx)(tk.ButtonGroup,{stretch:!0,row:!0,name:"git-provider",value:ej,onChange:function(e){return eT(e)},children:Object.entries(tp).map(function(e){var t=(0,r._)(e,2),n=t[0],i=t[1];if(!ee||n===ee)return(0,a.jsx)(tk.ButtonGroupItem,{id:G(n),value:n,text:i.name,icon:i.icon},n)})})]}),(0,a.jsx)(tV.default,{height:1}),(0,a.jsx)(C.Text,{color:"dimmest",multiline:!1,children:"Repository Location"}),function(e){switch(e){case"github":return(0,a.jsx)(tC,{value:eL,onChange:eB,organizations:ea,whitelistedOrganizations:"github"===ee?et:void 0,loading:Q||en});case"bitbucket":return(0,a.jsx)(tv,{value:eF,onChange:eU,workspacesToProjects:es.filter(function(e){return null!=e}),whitelistedWorkspaces:"bitbucket"===ee?et:void 0,loading:Q||en});case"gitlab":return(0,a.jsx)(tj,{value:e$,onChange:eH,groups:el.filter(function(e){return null!=e}),whitelistedGroups:"gitlab"===ee?et:void 0,loading:Q||en});default:(0,to.default)(e)}}(ej),(0,a.jsx)(C.Text,{color:"dimmest",multiline:!1,id:G("repo-name-label"),children:"Repository name"}),(0,a.jsx)(tB.Input,{ref:H,placeholder:"Enter repository name",value:eQ,onChange:function(e){e3(void 0),eX(e.target.value)},onKeyDown:function(e){if("Enter"===e.key){var t;e.preventDefault(),null==(t=z.current)||t.focus()}},"aria-labelledby":G("repo-name-label")}),(0,a.jsx)(C.Text,{clsx:tF.default.errorText,multiline:!1,children:e2}),(0,a.jsx)(tV.default,{height:1}),(0,a.jsx)(C.Text,{color:"dimmest",multiline:!1,id:G("repo-description-label"),children:"Repository description"}),(0,a.jsx)(tB.MultiLineInput,{ref:z,maxLength:350,name:"Repository description",placeholder:"Enter repository description",value:null!=e4?e4:void 0,onChange:function(e){e9(void 0),e8(e.target.value)},"aria-labelledby":G("repo-description-label")}),(0,a.jsx)(C.Text,{css:tF.default.errorText,multiline:!1,children:e7}),(0,a.jsx)(tV.default,{height:1}),(0,a.jsx)(C.Text,{color:"dimmest",multiline:!1,children:"Privacy"}),(0,a.jsx)(eq.Tooltip,{tooltip:null!=J?J:"You can create public repositories.",isDisabled:!er,children:(0,a.jsxs)(tk.ButtonGroup,{tag:"fieldset",id:G("privacy"),name:G("privacy"),disabled:er||Q||en,value:eW,onChange:function(e){return eK(e)},row:!0,clsx:tF.default.privateToggle,children:[(0,a.jsx)(tk.ButtonGroupItem,{id:G("true"),value:!0,text:"Private",icon:(0,a.jsx)(ta.default,{})}),(0,a.jsx)(tk.ButtonGroupItem,{id:G("false"),value:!1,text:"Public",icon:(0,a.jsx)(ti.default,{})})]})}),(0,a.jsx)(tV.default,{height:2}),(0,a.jsx)(j.View,{children:te?(0,a.jsx)(eo.StatusBanner,{clsx:tF.default.statusText,colorway:"negative",text:(0,a.jsx)(C.Text,{variant:"small",children:function(){if(!eQ)return"Repository name is required";if("bitbucket"===ej&&!eF)return"Bitbucket project is required";if("github"===ej){if("organization"===eL.type&&!eL.organizationName)return"Target organization is required";if("personal"===eL.type&&"github"===ee&&et)return"Personal repositories are disabled by your team admin"}if("gitlab"===ej){if("group"===e$.type&&!e$.groupName)return"Target group is required";if("personal"===e$.type&&"gitlab"===ee&&et)return"Personal repositories are disabled by your team admin"}return""}()})}):null}),(0,a.jsx)(ei.Button,{text:eS?"Creating Repository on ".concat(tp[ej].name,""):"Create Repository on ".concat(tp[ej].name),colorway:"primary",iconLeft:tp[ej].icon,onClick:function(){return(0,eI._)(function(){var e,t,n;return(0,eA._)(this,function(r){switch(r.label){case 0:if(tc(),!eQ)return[2];if(!(0,eM.isValidRemoteName)(eQ))return e3("Invalid remote name."),[2];if("bitbucket"!==ej)return[3,4];if(!eF)return eP("Please select a Bitbucket project"),[2];return[4,ey({orgId:W,name:eQ,description:null!=e4?e4:void 0,isPrivate:eW,project:eF})];case 1:if((e=r.sent()).error)return eP(e.error),[2];if(!e.remoteUrl)return[3,3];return[4,td(e.remoteUrl)];case 2:r.sent(),(0,eN.trackGitPaneEvent)("bitbucket-repository-published"),V("Created repository on Bitbucket"),M(),r.label=3;case 3:return[2];case 4:if("github"!==ej)return[3,8];if("organization"===eL.type&&!eL.organizationName)return eP("Please select an organization"),[2];return[4,eg({orgId:W,name:eQ,description:e4,homepage:ep?"https://replit.com".concat(ep):void 0,isPrivate:eW,location:eL})];case 5:if((t=r.sent()).error)return eP(t.error),[2];if(!t.remoteUrl)return[3,7];return[4,td(t.remoteUrl)];case 6:r.sent(),(0,eN.trackGitPaneEvent)("github-repository-published"),V("Created repository on Github"),M(),r.label=7;case 7:return[2];case 8:if("gitlab"!==ej)return[3,11];if("group"===e$.type&&!e$.groupName)return eP("Please select a group"),[2];return[4,e_({orgId:W,name:eQ,groupName:"group"===e$.type?e$.groupName:void 0,description:e4,isPrivate:eW,location:e$})];case 9:if((n=r.sent()).error)return eP(n.error),[2];if(!n.remoteUrl)return[3,11];return[4,td(n.remoteUrl)];case 10:r.sent(),(0,eN.trackGitPaneEvent)("gitlab-repository-published"),V("Created repository on GitLab"),M(),r.label=11;case 11:return[2]}})})()},loading:eS,disabled:te}),eR?(0,a.jsx)(C.Text,{css:tF.default.errorText,maxLines:2,multiline:!1,children:eR}):null]})}e.s(["default",()=>tU],636680);var tG=function(e){return"repl-".concat(e)};function t$(e){return e.url.endsWith(".replit.dev:.")}var tH=function(e){var t=e.replId,n=e.branch;return"repl-".concat(t,"/").concat(n)},tz=function(e){var t=e.git,n=e.replId;return(0,eI._)(function(){var e,r,i,a,o,s;return(0,eA._)(this,function(l){switch(l.label){case 0:return e=tG(n),r="".concat(n,"@ssh.v1.replit.dev:."),[4,t.getRemotes()];case 1:if((i=l.sent()).error)return[2,i];if(!i.remotes.has(e))return[3,4];if((null==(a=i.remotes.get(e))?void 0:a.fetch)===r)return[3,3];return[4,t.setRemoteURL({remote:e,url:r})];case 2:if((o=l.sent()).error)return[2,o];l.label=3;case 3:return[2,{error:null,remote:{name:e,url:r}}];case 4:return[4,t.addRemote({name:e,url:r,fetch:!0})];case 5:if((s=l.sent()).error&&s.error!==eD.GitErrors.REMOTE_ALREADY_EXISTS)return[2,s];return[2,{error:null,remote:{name:e,url:r}}]}})})()};function tW(e){var t=(0,eU.default)(function(t){return(0,eI._)(function(){var n;return(0,eA._)(this,function(r){switch(r.label){case 0:if(!e)return[2,{hasStarted:!1,error:null,remote:null}];return[4,tz({git:t,replId:e})];case 1:if((n=r.sent()).error)return[2,{hasStarted:!0,error:n.error}];return[2,{hasStarted:!0,error:null,remote:n.remote}]}})})()},[e]);return t&&t.hasStarted?t.error?{state:"Error",error:t.error}:{state:"Success",error:null,remote:t.remote}:{state:"Loading",error:null}}e.s(["isReplRemote",()=>t$,"remoteBranchForRepl",()=>tH,"remoteNameForRepl",()=>tG,"setupRemoteForReplId",()=>tz,"useSetupRemoteForReplId",()=>tW],875259);var tq=e.i(739521),tK=(0,P.cssRecord)({view:[],sectionContainer:[S.rcss.colWithGap(8)],section:[S.rcss.pt(8),S.rcss.pb(16),S.rcss.px(8),S.rcss.colWithGap(8)],remoteUpdatesHeader:[],reviewChangesHeader:[],headerText:[S.rcss.fontWeight.medium],replMergingHeader:[S.rcss.rowWithGap(8),S.rcss.align.center],switchToBranch:[S.rcss.p(4),S.rcss.flex.row,S.rcss.align.center,S.rcss.justify.spaceBetween,S.rcss.mt(0),S.rcss.mb(0)]});function tY(e){var t,n,d,f,p,h=e.status,m=e.remotes,g=e.branch,x=e.onStagedFileClick,y=e.onViewCommitClick,b=e.gotoPendingState,w=e.current,_=void 0!==w&&w,k=e.performPaneOperation,S=_?null==h||null==(t=h.upstream)?void 0:t.behind:void 0,T=_?null==h||null==(n=h.upstream)?void 0:n.ahead:void 0,E=(0,u.default)(g,S,T),R=!!m&&m.size>0,I=tX(m),A=I?null==m||null==(d=m.get(I))?void 0:d.fetch:null,P=(null==g?void 0:g.type)===s.GitBranchType.LOCAL,D=(0,r._)((0,o.useState)(!1),2),O=D[0],M=D[1],L=(0,o.useMemo)(function(){if(!E||E.error)return[];var e=[],t=E.log,n=void 0===t?[]:t,r=E.onlyRemote,a=void 0===r?[]:r,o=E.onlyLocal,s=void 0===o?[]:o,l=n.length>0,u=a.length>0,c=s.length>0;return u&&(e.push({type:"boundary",text:"Not pulled from remote"}),e.push.apply(e,(0,i._)(tQ(a,y)))),c&&(e.push({type:"boundary",text:"Not pushed to remote"}),e.push.apply(e,(0,i._)(tQ(s,y)))),l&&((u||c)&&e.push({type:"boundary",text:"Up to date with remote"}),e.push.apply(e,(0,i._)(tQ(n,y)))),e},[E,y]);return g?(0,a.jsxs)(j.View,{grow:!0,pt:4,pb:8,px:4,gap:8,children:[(0,a.jsxs)(j.View,{gap:12,children:[(0,a.jsx)(tq.Modal,{isOpen:O,onRequestClose:function(){return M(!1)},children:(0,a.jsx)(tU,{remoteName:null!=(p=null==m||null==(f=m.values().next().value)?void 0:f.name)?p:"origin",onCreateSuccess:function(){return M(!1)}})}),A?(0,a.jsx)(el,{remoteUrl:A}):null,P?(0,a.jsx)(j.View,{css:tK.section,children:(0,a.jsx)(l.PushBranchButton,{performPaneOperation:k,branch:g,onCreateRemoteClick:function(){return M(!0)}})}):null,_&&!P&&m&&R?(0,a.jsxs)(j.View,{css:tK.section,children:[(0,a.jsxs)(j.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,a.jsx)(C.Text,{css:tK.headerText,multiline:!1,children:"Remote Updates"}),(0,a.jsx)(e5,{branch:g,remotes:m})]}),(0,a.jsx)(eY,{remotes:m,gotoPendingState:b})]}):null,_&&h?(0,a.jsxs)(j.View,{css:tK.section,children:[(0,a.jsx)(j.View,{row:!0,gap:8,align:"center",children:(0,a.jsx)(C.Text,{css:tK.headerText,multiline:!1,children:"Commit"})}),(0,a.jsx)(c.default,{status:h,onStagedFileClick:x})]}):null]}),E?(0,a.jsx)(N,{items:L}):(0,a.jsx)(e7,{})]}):(0,a.jsx)("div",{children:"No branch"})}function tQ(e,t){return e.map(function(e){return{type:"commit",commit:e,onViewCommitClick:t}})}function tX(e){if(!e||!e.size)return null;if(e.has("origin"))return"origin";var t=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=(0,r._)(a.value,2),l=s[0],u=s[1];if(!t$({url:u.fetch}))return l}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return null}function tZ(){return(0,a.jsxs)(j.View,{children:[(0,a.jsx)(C.Text,{multiline:!1,children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,a.jsx)(C.Text,{multiline:!1,children:"Please finish the cherry-pick manually."})]})}e.s(["default",()=>tZ],680011);var tJ=e.i(138290);let t0=function(e){var t=(0,eU.default)(function(t){return(0,eI._)(function(){var n,r,i;return(0,eA._)(this,function(a){switch(a.label){case 0:return[4,t.isInitialized()];case 1:if((n=a.sent()).error)return[2,{error:n.error}];if(!n.initialized)return[2,{error:eD.GitErrors.NOT_INITIALIZED}];return[4,t.log({max:1,revRange:e})];case 2:if((r=a.sent()).error)return[2,{error:r.error}];if(0===r.commits.length)return[2,{error:eD.GitErrors.NO_COMMITS}];return[2,{commit:null!=(i=r.commits[0])?i:null,error:null}]}})})()},[e]);return(0,o.useMemo)(function(){return t?t.error?{error:t.error}:t:null},[t])};var t1=e.i(234961),t2=e.i(923772),t3=e.i(15053),t5=e.i(205104);let t4=function(e){var t=(0,ex.useNotifyGitError)(),n=(0,eU.default)(function(t){return(0,eI._)(function(){var n,r,a,o,s,l;return(0,eA._)(this,function(u){switch(u.label){case 0:return a=e.hash,[4,t.getFilesForCommit(a)];case 1:if(null==(o=u.sent())?void 0:o.error)return(0,tJ.reportErrorToSentry)({context:"use-commit-diffs",gitService:t,result:o,data:{commit:e}}),[2,{error:o.error,diffs:[]}];return s=(null==o||null==(n=o.files)?void 0:n.filter(function(e){return["ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],l=(null==o||null==(r=o.files)?void 0:r.filter(function(e){return["DELETED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],[2,{error:null,diffs:Array.from(new Set((0,i._)(s).concat((0,i._)(l)))).map(function(e){var t,n;return{id:(0,t3.v4)(),status:e.type,loading:!1,initial:{filename:(0,t5.getFileName)(null!=(t=e.originalPath)?t:e.path),path:(0,t5.getParentPath)(null!=(n=e.originalPath)?n:e.path),content:""},final:{filename:(0,t5.getFileName)(e.path),path:(0,t5.getParentPath)(e.path),content:""}}})}]}})})()},[e]);return(0,o.useMemo)(function(){return n?n.error?(t(n.error),null):n:null},[t,n])};var t8=function(e,t,n,r){return(0,eI._)(function(){var i,a,o;return(0,eA._)(this,function(s){switch(s.label){case 0:return i=""===t?n:"".concat(t,"/").concat(n),[4,e.getFileContents({path:i,revision:r,convertToBase64:(0,t5.isMedia)(i)})];case 1:if((a=s.sent()).error)throw a.error;return[2,null!=(o=null==a?void 0:a.content)?o:""]}})})()},t6=e.i(336135),t7=e.i(480028),t9=e.i(806930),ne=e.i(712771),nt=e.i(546284),nn=e.i(51054),nr=e.i(304662),ni=(0,P.cssRecord)({splitOrUnisonContainer:[S.rcss.flex.wrap],emphasizedText:[S.rcss.fontWeight.medium],buttonGroupItem:[S.rcss.width(64),S.rcss.height(32)],textContainer:[S.rcss.mt(8),S.rcss.overflow("break-all")]}),na=function(e){var t=e.children;return(0,a.jsx)(j.View,{css:ni.splitOrUnisonContainer,gap:8,align:"center",justify:"space-between",row:!0,children:t})},no=function(e){var t=e.value,n=e.onChange;return(0,a.jsxs)(tk.ButtonGroup,{name:"SplitOrUnifiedDiff",value:t,onChange:n,row:!0,children:[(0,a.jsx)(j.View,{css:ni.buttonGroupItem,children:(0,a.jsx)(tk.ButtonGroupItem,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,a.jsx)(j.View,{css:ni.buttonGroupItem,children:(0,a.jsx)(tk.ButtonGroupItem,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},ns=function(e){var t=e.value,n=e.onChange;return(0,a.jsx)(eW.IconButton,{alt:"Markdown"===t?"View Source":"View Markdown",onClick:function(){return n("Markdown"===t?"Source":"Markdown")},children:"Markdown"===t?(0,a.jsx)(t9.default,{}):(0,a.jsx)(ne.default,{})})},nl=function(e){var t=e.files,n=e.totalFiles;return t===n?(0,a.jsxs)(C.Text,{css:ni.textContainer,children:["Showing"," ",(0,a.jsxs)("span",{css:ni.emphasizedText,children:[n," changed ",(0,nt.default)("file",n),"."]})]}):(0,a.jsxs)(C.Text,{css:ni.textContainer,children:["Showing"," ",(0,a.jsxs)("span",{css:ni.emphasizedText,children:[t," of ",n," changed ",(0,nt.default)("file",n),"."]})]})},nu=function(e){var t=e.query,n=e.setQuery,r=e.totalDiffs,i=e.diffs,s=e.splitOrUnified,l=e.setSplitOrUnified,u=e.folded,c=e.setFolded,d=(0,o.useMemo)(function(){return i.filter(function(e){var n="".concat(e.final.path,"/").concat(e.final.filename),r="".concat(e.initial.path,"/").concat(e.initial.filename);return n.toLowerCase().includes(t.toLowerCase())||r.toLowerCase().includes(t.toLowerCase())})},[t,i]);return(0,a.jsxs)(j.View,{gap:16,children:[(0,a.jsx)(nn.SearchBar,{value:t,onChange:function(e){n(e.target.value)},onClear:function(){n("")},loading:!1,placeholder:"Filter changed files"}),(0,a.jsxs)(na,{children:[(0,a.jsx)(nl,{files:d.length,totalFiles:r}),i.length>0?(0,a.jsx)(no,{value:s,onChange:function(e){return l(e)}}):null]}),d.map(function(e){var t;return(0,a.jsx)(nr.DiffViewer,{folded:null==(t=u[e.id])||t,setFolded:function(t){return c(e.id,t)},diff:e,splitOrUnified:s},e.id)})]})},nc=e.i(350098),nd=e.i(257811),nf=(0,P.cssRecord)({metaContainer:[S.rcss.flex.wrap]});let np=function(e){var t=e.author,n=e.committer,r=(0,b.shouldShowCommitter)(n,t),i=(0,b.shouldShowCommitDate)(n.date,t.date);return(0,a.jsxs)(j.View,{css:nf.metaContainer,row:!0,gap:4,align:"center",children:[r&&i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(nc.default,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,a.jsx)(C.Text,{variant:"small",children:"authored"}),(0,a.jsx)(nd.Timestamp,{date:t.date,textColor:"dimmest",textVariant:"small"}),(0,a.jsx)(C.Text,{variant:"small",children:"and"})]}):null,r&&!i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(nc.default,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,a.jsx)(C.Text,{variant:"small",children:"authored"}),(0,a.jsx)(C.Text,{variant:"small",children:"and"})]}):null,(0,a.jsx)(nc.default,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),!r&&i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Text,{variant:"small",children:"authored "}),(0,a.jsx)(nd.Timestamp,{date:t.date,textColor:"dimmest",textVariant:"small"}),(0,a.jsx)(C.Text,{variant:"small",children:"and "})]}):null,(0,a.jsx)(C.Text,{variant:"small",children:"committed"}),(0,a.jsx)(nd.Timestamp,{date:n.date,textColor:"dimmest",textVariant:"small"})]})};var nh=(0,P.cssRecord)({dullText:[S.rcss.color.foregroundDimmest],tooltipContainer:[S.rcss.display.inlineBlock]}),nm=function(e){var t=e.onViewCommitClick,n=e.hash;return(0,a.jsx)("span",{css:nh.tooltipContainer,children:(0,a.jsx)(eq.Tooltip,{tooltip:"View commit",children:(0,a.jsx)("button",{css:[S.rcss.reset.button,S.rcss.linkStyle,S.rcss.fontWeight.medium],onClick:function(){return t(n)},children:n.slice(0,7)})})})};let ng=function(e){var t=e.parents,n=e.grafted,r=e.onViewCommitClick;return(0,a.jsxs)(C.Text,{variant:"small",children:[(0,a.jsxs)("span",{css:nh.dullText,children:[n?"Grafted with ":null,t.length," ",(0,nt.default)("parent",t.length)," "]}),0===t.length?null:t.map(function(e,n){return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(nm,{hash:e,onViewCommitClick:r}),n===t.length-1?"":(0,a.jsx)("span",{css:nh.dullText,children:", "})]},e)})]})};var nv=e.i(721281);let nx=function(e){var t=e.source,n=e.target;return n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"branch"}),(0,a.jsx)(k.BranchName,{name:t}),(0,a.jsx)("span",{children:" into "}),(0,a.jsx)(k.BranchName,{name:n})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"branch"}),(0,a.jsx)(k.BranchName,{name:t})]})};var ny="gitCommitSubject",nb=(0,e4.css)([S.rcss.display.inline,{fontSize:"inherit",fontWeight:"inherit",lineHeight:"inherit"}]),nw=(0,P.cssRecord)({header:[(n={},(0,nv._)(n,"& .".concat(ny),nb),(0,nv._)(n,"& .".concat(ny," > div"),nb),(0,nv._)(n,"& .".concat(ny," p"),nb),n)],markerContainer:[S.rcss.display.inlineFlex,S.rcss.mr(4)],mergeContainer:[S.rcss.rowWithGap(4),S.rcss.flex.row,S.rcss.flex.wrap,S.rcss.align.stretch,S.rcss.flex.shrink(0)]});let n_=function(e){var t=e.merge,n=e.revert,r=e.subject,i=e.remotes,s=e.onViewCommitClick,l=(0,o.useMemo)(function(){var e,r=null;if(((null==t?void 0:t.type)==="pull-request"?r=t.id:n&&(null==n?void 0:n.pr)&&(r=n.pr),r)&&i){var a=i.get("origin");if(!a){var o=Array.from(i.values());if(1!==o.length)return;a=o[0]}return null!=(e=en(a))?e:void 0}},[t,i,n]);return(0,a.jsxs)(C.Header,{level:2,variant:"subheadDefault",multiline:!0,css:nw.header,children:[t?(0,a.jsxs)("span",{css:nw.mergeContainer,children:[(0,a.jsx)("span",{css:nw.markerContainer,children:(0,a.jsx)(w.default,{type:"merge"})}),(0,a.jsx)(k.MergeText,{text:"merged"}),(null==t?void 0:t.type)==="pull-request"?(0,a.jsxs)(a.Fragment,{children:["PR ",(0,a.jsx)(k.PullRequestID,{id:t.id,hash:!0}),(null==n?void 0:n.pr)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.RevertText,{text:"reverts"})," ",(0,a.jsx)(k.PullRequestID,{id:n.pr,hash:!0})]}):null]}):null,(null==t?void 0:t.type)==="branch"?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(nx,{source:t.source,target:t.target})}):null]}):null,n&&!t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{css:nw.markerContainer,children:(0,a.jsx)(w.default,{type:"revert"})}),(0,a.jsx)(k.RevertText,{text:"reverted"})," ",(0,a.jsx)("button",{css:[S.rcss.reset.button,S.rcss.linkStyle,S.rcss.fontWeight.medium],onClick:function(){(null==n?void 0:n.hash)!==void 0&&s(n.hash)},children:n.hash.slice(0,7)})," - "]}):null,(0,a.jsx)(k.CommitSubject,{className:ny,subject:r,remoteName:l})]})};var nk=(0,P.cssRecord)({splitContainer:[S.rcss.display.flex,S.rcss.flex.row,S.rcss.flex.shrink(1),S.rcss.flex.wrap,S.rcss.justify.spaceBetween,S.rcss.maxWidth("100%"),S.rcss.border({color:t7.tokens.outlineDimmest,direction:"bottom"}),S.rcss.pb(16)]});let nS=function(e){var t,n=e.git,s=e.commit,l=e.info,u=e.onViewCommitClick,c=void 0===u?function(){}:u,f=e.remotes,p=e.status,h=(0,o.useMemo)(function(){return(0,t2.getUniquePathMap)(p?p.changes.map(function(e){return e.path}):[])},[p]),m=(0,o.useMemo)(function(){if(!p)return[];var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=p.changes[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o.type.worktree!==t1.GitStatusChangedFileType.UNMODIFIED&&e.push(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e},[p]),g=(0,tl.default)().showConfirm,y=(0,ex.useNotifyGitError)(),w=(0,r._)((0,o.useState)(!1),2),_=w[0],S=w[1],T=(0,r._)((0,o.useState)(""),2),E=T[0],R=T[1],I=(0,r._)((0,o.useState)("Split"),2),A=I[0],P=I[1],D=(0,r._)((0,o.useState)("Markdown"),2),O=D[0],N=D[1],M=(0,r._)((0,o.useState)({}),2),L=M[0],B=M[1],V=(0,r._)((0,o.useState)([]),2),F=V[0],U=V[1],G=(0,b.getCommitDetails)(s,l),$=G.hideBody,H=G.merge,z=G.revert,W=s.hash,q=s.subject,K=s.body,Y=s.committer,Q=s.author,X=s.grafted,Z=null!=(t=s.parents)?t:[],J=t4(s),ee=(0,o.useCallback)(function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return(0,eI._)(function(){var t,r;return(0,eA._)(this,function(i){switch(i.label){case 0:return[4,n.restoreFiles(e,s.hash)];case 1:if((t=i.sent()).error)return[3,3];return[4,n.status()];case 2:return(r=i.sent()).error?(y(r.error),(0,tJ.reportErrorToSentry)({context:"commit-view",gitService:n,result:r,data:{files:e,commit:s.hash}})):g("Restored commit!"),n.forceRefresh(),[3,4];case 3:y(t.error),(0,tJ.reportErrorToSentry)({context:"commit-view",gitService:n,result:t,data:{files:e,commit:s.hash}}),i.label=4;case 4:return[2]}})})()},[s.hash,n,y,g]),et=(0,t6.useRestoreConfirmationModal)(h),en=et.openRestoreConfirmationModal,er=et.restoreConfirmationModal,ei=(0,o.useCallback)(function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return(0,eI._)(function(){var t,n;return(0,eA._)(this,function(r){switch(r.label){case 0:if(!0!==e)return[3,6];if(S(!0),0!==m.length)return[3,2];return[4,ee()];case 1:return r.sent(),S(!1),[2];case 2:return[4,en(m)];case 3:if(!r.sent())return[3,5];return[4,ee()];case 4:r.sent(),r.label=5;case 5:return S(!1),[3,10];case 6:if("string"==typeof e){if(!(n=m.find(function(t){return t.path===e})))throw S(!1),Error("Could not find file in worktree list");t=[n]}else t=m.filter(function(t){return e.includes(t.path)});return[4,en(t)];case 7:if(!r.sent())return[3,9];return[4,ee(e)];case 8:r.sent(),r.label=9;case 9:S(!1),r.label=10;case 10:return[2]}})})()},[en,ee,m]);return(0,o.useEffect)(function(){var e;U(null!=(e=null==J?void 0:J.diffs.map(function(e){return(0,x._)((0,d._)({},e),{loading:!0})}))?e:[])},[J]),(0,o.useEffect)(function(){null!==J&&J.error&&y(J.error)},[J,y]),(0,a.jsxs)(j.View,{p:16,gap:16,children:[(0,a.jsx)(n_,{remotes:f,merge:H,revert:z,subject:q,onViewCommitClick:c}),(0,a.jsxs)(na,{children:[(0,a.jsxs)(j.View,{row:!0,gap:8,shrink:!0,align:"start",children:[(0,a.jsx)(b.CopyHashButton,{hash:W}),(0,a.jsx)(b.RestoreButton,{onClick:function(){return ei()},text:"Restore All",loading:_})]}),$?null:(0,a.jsx)(ns,{value:O,onChange:function(e){N(e)}})]}),$?null:(0,a.jsx)(k.CommitBody,{body:K,view:O}),(0,a.jsxs)(j.View,{css:nk.splitContainer,children:[(0,a.jsx)(np,{author:Q,committer:Y}),(0,a.jsx)(ng,{parents:Z,grafted:X,onViewCommitClick:c})]}),null!==H?(0,a.jsx)(C.Text,{variant:"small",color:"dimmest",children:"There is more than one parent, diffing against the first parent."}):null,null===J?(0,a.jsx)(e7,{}):(0,a.jsx)(nu,{query:E,setQuery:R,totalDiffs:J.diffs.length,diffs:F,splitOrUnified:A,setSplitOrUnified:P,folded:L,setFolded:function(e,t){return(0,eI._)(function(){var r,a,o;return(0,eA._)(this,function(l){switch(l.label){case 0:if(B(function(n){var r=(0,d._)({},n);return r[e]=t,r}),!(r=F.find(function(t){return t.id===e})))return y(eD.GitErrors.INVALID_STATE),(0,tJ.reportErrorToSentry)({context:"commit-view",gitService:n,result:{error:eD.GitErrors.INVALID_STATE},data:{diffId:e}}),[2];if(!(!t&&r.loading))return[3,4];l.label=1;case 1:var u;return l.trys.push([1,3,,4]),[4,(u=r,(0,eI._)(function(){var e,t,r,i;return(0,eA._)(this,function(a){switch(a.label){case 0:return t=s.hash,[4,t8(n,u.final.path,u.final.filename,t)];case 1:if(r=a.sent(),i="",!(!s.grafted&&(null==(e=s.parents)?void 0:e.length)))return[3,3];return[4,t8(n,u.initial.path,u.initial.filename,"".concat(t,"^"))];case 2:i=a.sent(),a.label=3;case 3:return[2,(0,x._)((0,d._)({},u),{loading:!1,initial:(0,x._)((0,d._)({},u.initial),{content:i}),final:(0,x._)((0,d._)({},u.final),{content:r})})]}})})())];case 2:return a=l.sent(),U(function(t){var n=(0,i._)(t),r=n.findIndex(function(t){return t.id===e});return n[r]=a,n}),[3,4];case 3:return o=l.sent(),(0,tJ.reportErrorToSentry)({context:"commit-view",gitService:n,result:o,data:{diffId:e}}),y(o),[2];case 4:return[2]}})})()}}),er]})};function nC(e){var t=e.hash,n=e.remotes,r=e.onViewCommitClick,i=e.switchMode,o=e.status,s=(0,eO.default)().git,l=(0,ex.useNotifyGitError)(),u=t0(null!=t?t:"");if(null===u)return(0,a.jsx)(e7,{});if(u.error)return u.error===eD.GitErrors.NOT_INITIALIZED?i({type:ek.GitPaneModeType.CURRENT_BRANCH}):(l(u.error),(u.error===eD.GitErrors.UNKNOWN||u.error===eD.GitErrors.UNKNOWN_NOT_GIT)&&(0,tJ.reportErrorToSentry)({context:"commit-view",gitService:s,result:u,data:{hash:t}})),null;if(null===u.commit)return l(eD.GitErrors.UNKNOWN),null;var c=u.commit,d=(0,h.parseCommitAsMerge)(c)||(0,h.parseCommitAsRevert)(c);return(0,a.jsx)(nS,{git:s,commit:c,info:d,onViewCommitClick:r,remotes:n,status:o})}function nj(){return(0,a.jsxs)(j.View,{children:[(0,a.jsx)(C.Text,{multiline:!0,children:"Unsupported state: your config is currently locked. This can happen if multiple git processes are running operations at the same time."}),(0,a.jsx)(C.Text,{multiline:!0,children:"Please resolve the issue by ending those git operations. If you are sure you do not have git operations running, you can delete your .git/config.lock file."})]})}e.s(["default",()=>nC],772275),e.s(["default",()=>nj],540285);var nT=e.i(167193),nE=e.i(754873),nR=(0,P.cssRecord)({branch:[nE.interactive.nofill,S.rcss.py(12),S.rcss.px(8),S.rcss.colWithGap(2),S.rcss.justify.center,S.rcss.borderRadius(8),S.rcss.flex.shrink(1)]});function nI(e){var t=e.branch,n=e.current,r=e.onClick;return(0,a.jsxs)(j.View,{css:nR.branch,tabIndex:0,role:"button","aria-label":"Switch to branch ".concat((0,eM.getQualifiedBranchName)(t,!0)),onClick:r,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==r||r())},children:[(0,a.jsx)(C.Text,{multiline:!1,children:(0,a.jsx)(k.BranchName,{name:t.name,remote:t.type===s.GitBranchType.REMOTE?t.remote:null,current:void 0!==n&&n,onClick:r,icon:!0})}),(0,a.jsx)(nA,{branch:t})]})}function nA(e){var t=e.branch;return(0,a.jsxs)(j.View,{shrink:!0,row:!0,gap:8,align:"center",children:[(0,a.jsx)(nc.default,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,a.jsx)(nd.Timestamp,{date:t.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var nP=(0,P.cssRecord)({expandButton:[{verticalAlign:"middle"},S.rcss.justify.spaceBetween],branchListContainer:[S.rcss.display.flex],topRowInteractive:[{verticalAlign:"middle"},S.rcss.justify.spaceBetween,S.rcss.borderRadius(8,8,0,0)],branchList:[S.rcss.borderRadius(8)],branchListFoldable:[S.rcss.borderRadius(0,0,8,8)]});function nD(e){var t=e.name,n=e.branches,i=e.current,s=void 0===i?null:i,l=e.foldable,u=void 0!==l&&l,c=e.folded,d=e.switchBranch,f=(0,r._)((0,o.useState)(!!u&&void 0!==c&&c),2),p=f[0],h=f[1],m=(0,o.useMemo)(function(){return n.map(function(e){return(0,a.jsx)(nI,{branch:e,current:(0,nT.branchesEqual)(e,s),onClick:function(){return d(e)}},(0,eM.getFullBranchName)(e))})},[n,s,d]);return p?(0,a.jsx)(ei.Button,{css:nP.expandButton,text:t,iconRight:(0,a.jsx)(z.default,{}),onClick:function(){return h(!1)},size:"big"}):u?(0,a.jsxs)(j.View,{css:nP.branchListContainer,children:[(0,a.jsx)(ei.Button,{css:nP.topRowInteractive,text:t,iconRight:(0,a.jsx)(W.default,{}),onClick:function(){return h(!0)},size:"big"}),(0,a.jsx)(er.ShadesSurface,{clsx:nP.branchListFoldable,elevate:"1x",children:m})]}):(0,a.jsxs)(j.View,{css:nP.branchListContainer,children:[(0,a.jsx)(j.View,{p:4,row:!0,align:"center",justify:"space-between",children:(0,a.jsx)(C.Text,{variant:"subheadDefault",multiline:!1,children:t})}),(0,a.jsx)(er.ShadesSurface,{clsx:nP.branchList,elevate:"1x",children:m})]})}var nO=e.i(40916),nN=(0,P.cssRecord)({container:[S.rcss.borderRadius(8)],button:[S.rcss.flex.grow(1)],inputDisabled:[{opacity:.75}]});function nM(){var e=(0,r._)((0,o.useState)(!0),2),t=e[0],n=e[1],i=(0,r._)((0,o.useState)(""),2),s=i[0],l=i[1],u=(0,r._)((0,o.useState)(!1),2),c=u[0],d=u[1],f=(0,ex.useNotifyGitError)(),p=(0,eO.default)().git;function h(){n(!0),l("")}function m(){return(0,eI._)(function(){var e;return(0,eA._)(this,function(r){switch(r.label){case 0:if(t||!s||c)return[2];return d(!0),[4,p.createBranch({name:s,checkout:!0})];case 1:return(e=r.sent()).error?(f(e.error),d(!1)):(p.forceRefresh(),d(!1),l(""),n(!0),(0,eN.trackGitPaneEvent)("branch-created")),[2]}})})()}if(t)return(0,a.jsx)(ei.Button,{text:"Create Branch",iconLeft:(0,a.jsx)(nO.default,{}),onClick:function(){return n(!1)}});var g=!s||!(0,eM.isValidBranchName)(s);return(0,a.jsxs)(er.ShadesSurface,{clsx:nN.container,p:8,gap:8,elevate:"1x",children:[(0,a.jsx)(nL,{value:s,onChange:l,onSubmit:m,onCancel:h,disabled:c}),(0,a.jsxs)(j.View,{row:!0,gap:4,children:[(0,a.jsx)(ei.Button,{css:nN.button,text:"Cancel",onClick:h,disabled:c}),(0,a.jsx)(ei.Button,{css:nN.button,text:"Create Branch",colorway:"primary",iconLeft:(0,a.jsx)(nO.default,{}),onClick:m,loading:c,disabled:g})]})]})}function nL(e){var t=e.value,n=e.disabled,r=e.onChange,i=e.onSubmit,o=e.onCancel;function s(e){(0,eM.hasOnlyValidBranchNameCharacters)(e)&&(null==r||r(e))}return(0,a.jsx)(tB.Input,{value:t,css:n?nN.inputDisabled:void 0,disabled:n,placeholder:"Enter a name for your new branch",onChange:function(e){return s(e.currentTarget.value)},onKeyDown:function(e){var n=e.key,r=function(){return e.preventDefault()};switch(n){case"Enter":null==i||i(),r();break;case"Escape":null==o||o(),r();break;case" ":if(""===t){r();break}s(t+"-"),r()}},onBlur:function(){""===t&&(null==o||o())},autoFocus:!0})}function nB(e){var t=e.currentBranch,n=e.switchMode,i=(0,ex.useNotifyGitError)(),s=(0,eO.default)().git,l=(0,r._)((0,o.useState)(null),2),u=l[0],c=l[1],d=(0,eU.default)(function(e){return(0,eI._)(function(){var t,n,r,a,o,s,l,u,c,d,f,p,h,m,g,x,y,b,w;return(0,eA._)(this,function(_){switch(_.label){case 0:return[4,e.listBranches()];case 1:if((t=_.sent()).error)return i(t.error),(0,tJ.reportErrorToSentry)({context:"dashboard-view",gitService:e,result:t}),[2,t];return[4,e.findDefaultBranches()];case 2:if((n=_.sent()).error)return i(n.error),[2,n];r=t.branches,a=new Set,o=!0,s=!1,l=void 0;try{for(u=function(){var e=d.value,t=r.find(function(t){return(0,eM.isSameBranchRef)(t,e)});t&&a.add(t)},c=n.refs[Symbol.iterator]();!(o=(d=c.next()).done);o=!0)u()}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}f=Date.now()-5184e6,p=[],h=[],m=!0,g=!1,x=void 0;try{for(y=r[Symbol.iterator]();!(m=(b=y.next()).done);m=!0)w=b.value,a.has(w)||(w.commit.author.date>f?p.push(w):h.push(w))}catch(e){g=!0,x=e}finally{try{m||null==y.return||y.return()}finally{if(g)throw x}}return[2,{active:p,stale:h,important:Array.from(a),error:null}]}})})()},[i]),f=function(e){return(0,eI._)(function(){var r;return(0,eA._)(this,function(a){switch(a.label){case 0:if(null!==u)return[2];return(0,eM.isSameBranchRef)(t,e)&&n({type:ek.GitPaneModeType.CURRENT_BRANCH}),c(e),[4,s.switchBranch(e)];case 1:return(r=a.sent()).error?(i(r.error),(0,tJ.reportErrorToSentry)({context:"dashboard-view",gitService:s,result:r,data:{branch:e.name}}),c(null)):(s.forceRefresh(),(0,eN.trackGitPaneEvent)("branch-switched")),[2]}})})()};if((0,o.useEffect)(function(){null!==u&&(0,eM.isSameBranchRef)(t,u)&&(c(null),n({type:ek.GitPaneModeType.CURRENT_BRANCH}))},[t,u,n]),!d||null!==u)return(0,a.jsx)(e7,{});if(d.error)return(0,a.jsx)("div",{children:d.error});var p=d.active,h=d.stale,m=d.important;return(0,a.jsx)(j.View,{gap:8,children:(0,a.jsxs)(j.View,{pb:8,px:8,gap:16,children:[t?(0,a.jsxs)(j.View,{gap:8,children:[(0,a.jsx)(nD,{branches:[t],current:t,name:"Current Branch",switchBranch:f}),(0,a.jsx)(nM,{})]}):null,(0,a.jsx)(C.Text,{variant:"subheadDefault",multiline:!1,css:tK.switchToBranch,children:"Switch Branch"}),0===m.length?null:(0,a.jsx)(nD,{branches:m,current:t,name:"Important",switchBranch:f,foldable:!0}),0===p.length?null:(0,a.jsx)(nD,{branches:p,current:t,name:"Active",switchBranch:f,foldable:!0}),0===h.length?null:(0,a.jsx)(nD,{branches:h,current:t,name:"Stale",switchBranch:f,foldable:!0,folded:!0})]})})}function nV(){return(0,a.jsxs)(j.View,{children:[(0,a.jsx)(C.Text,{multiline:!1,children:"Unsupported state: your HEAD is currently detached."}),(0,a.jsx)(C.Text,{multiline:!1,children:"Please checkout a branch."})]})}function nF(){return(0,a.jsxs)(j.View,{children:[(0,a.jsx)(C.Text,{multiline:!0,children:"Unsupported state: your index is currently locked. This can happen if multiple git processes are running operations at the same time."}),(0,a.jsx)(C.Text,{multiline:!0,children:"Please resolve the issue by ending those git operations. If you are sure you do not have git operations running, you can delete your .git/index.lock file."})]})}e.s(["default",()=>nB],710106),e.s(["default",()=>nV],973267),e.s(["default",()=>nF],35647);var nU=e.i(619542);function nG(e){return(0,a.jsx)(tb.default,(0,x._)((0,d._)({},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M6 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM2.25 6a3.75 3.75 0 1 1 4.527 3.67 8.25 8.25 0 0 0 7.554 7.553A3.751 3.751 0 0 1 21.75 18a3.75 3.75 0 0 1-7.43.726 9.75 9.75 0 0 1-7.57-4.53V21a.75.75 0 0 1-1.5 0V9.675A3.751 3.751 0 0 1 2.25 6ZM18 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"})}))}var n$=e.i(183035),nH=e.i(630818);function nz(e){var t=e.files,n=e.uniquePathMap,i=e.onFileClick,o=[];if((0,K._)(t,Map)){var s=!0,l=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=(0,r._)(c.value,2),p=f[0],h=f[1],m=n.get(p);o.push({path:p,prefix:m,resolved:h})}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}else{var g=!0,x=!1,y=void 0;try{for(var b,w=t[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var _=b.value,S=n.get(_);o.push({path:_,prefix:S,resolved:!0})}}catch(e){x=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(x)throw y}}}return(0,a.jsx)(j.View,{gap:4,children:o.map(function(e){var t=e.path,n=e.prefix,r=e.resolved;return(0,a.jsxs)(j.View,{row:!0,gap:8,align:"center",children:[(0,a.jsxs)(j.View,{grow:!0,align:"center",row:!0,gap:8,children:[(0,a.jsx)(nH.default,{path:t}),(0,a.jsx)(C.Text,{multiline:!1,children:(0,a.jsx)(k.FilePath,{path:t,prefix:n,onClick:function(){return i({path:t,type:"conflict"})}})})]}),r?(0,a.jsx)(n$.default,{color:t7.tokens.greenStronger}):(0,a.jsx)(eb.default,{color:t7.tokens.orangeStronger})]},t)})})}function nW(e){var t=e.hasConflicts?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{css:S.rcss.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{css:S.rcss.fontWeight.medium,children:"You are in the middle of a merge."}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,a.jsx)(eo.StatusBanner,{colorway:"warning",icon:(0,a.jsx)(eb.default,{}),text:t})}var nq=e.i(752539),nK=e.i(733405),nY=(0,P.cssRecord)({left:[{flexBasis:0,flexGrow:1},S.rcss.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[S.rcss.p(8),S.rcss.rowWithGap(4),S.rcss.flex.grow(1),S.rcss.center,S.rcss.borderRadius(8)]});function nQ(e){var t,n=e.branch,i=e.refs,o=e.refsAreBranches,s=e.isUpstreamPull;if(!i.length)return null;if(s){var l=(0,r._)((0,Y.splitRemoteFromBranch)(i[0]),2),u=l[0],c=l[1];u&&c&&(t=(0,a.jsx)(er.ShadesSurface,{clsx:nY.branch,elevate:"1x",children:(0,a.jsx)(k.BranchName,{remote:u,name:c,icon:!0,heading:!0})}))}return t||(t=i.map(function(e){return(0,a.jsx)(er.ShadesSurface,{clsx:nY.branch,elevate:"1x",children:(0,a.jsx)(k.BranchName,{name:e,icon:!!o||(0,a.jsx)(nK.default,{size:16}),heading:!0})},e)})),(0,a.jsxs)(j.View,{row:!0,gap:4,align:"center",justify:"space-between",children:[(0,a.jsx)(j.View,{css:nY.left,children:t}),(0,a.jsx)(nq.default,{size:24,color:t7.tokens.foregroundDimmest}),(0,a.jsx)(j.View,{css:nY.right,children:(0,a.jsx)(er.ShadesSurface,{clsx:nY.branch,elevate:"1x",children:(0,a.jsx)(k.BranchName,{name:n,icon:!0,current:!0,heading:!0})})})]})}var nX=e.i(127227),nZ=(0,P.cssRecord)({fakePaneHeader:[S.rcss.backgroundColor.backgroundDefault,S.rcss.align.center,{borderBottom:"1px solid ".concat(t7.tokens.outlineDimmer)}],listContainer:[S.rcss.borderRadius(8)],list:[],listDisabled:[{opacity:.5},S.rcss.pb(8),S.rcss.colWithGap(8)],listHeader:[S.rcss.pb(4),S.rcss.flex.grow(1),S.rcss.border({color:t7.tokens.outlineDimmer,direction:"bottom"})],listFiles:[S.rcss.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},S.rcss.rowWithGap(8)]});function nJ(e){var t=e.onFileClick,n=e.gotoPendingState,s=(0,r._)((0,o.useState)(!0),2),l=s[0],u=s[1],c=(0,r._)((0,o.useState)(!1),2),d=c[0],f=c[1],p=(0,r._)((0,o.useState)(!1),2),h=p[0],m=p[1],g=d||h,x=(0,ex.useNotifyGitError)(),y=(0,eO.default)().git,b=(0,o.useId)(),w=(0,eU.default)(function(e){return(0,eI._)(function(){var t,n,i,a,o,s,l,u,c,d,f,p,h,m,g,x,y,b,w,_;return(0,eA._)(this,function(k){switch(k.label){case 0:return[4,e.status()];case 1:if((t=k.sent()).error)return(0,tJ.reportErrorToSentry)({context:"use-merging-view-state-status",gitService:e,result:t}),[2,t];if(!(n=t.branch))return[2,{error:eD.GitErrors.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((i=k.sent()).error)return[2,i];return a=i.files,[4,e.getMergingRefs()];case 3:if((o=k.sent()).error)return(0,tJ.reportErrorToSentry)({context:"use-merging-view-state-merging-refs",gitService:e,result:o,data:{status:t,conflictingFiles:a}}),[2,o];s=o.commits,c=(u=(l=o.branches).length>0)?l:s,d=t.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),f=!0,p=!0,h=!1,m=void 0;try{for(g=a[Symbol.iterator]();!(p=(x=g.next()).done);p=!0)if(!(0,r._)(x.value,2)[1]){f=!1;break}}catch(e){h=!0,m=e}finally{try{p||null==g.return||g.return()}finally{if(h)throw m}}return y=(0,t2.getUniquePathMap)(t.changes.map(function(e){return e.path})),b=a.size>0,w=d.length>0,_=null!==t.upstream&&1===l.length&&l[0]===t.upstream.branch,[2,{refs:c,branch:n,conflictingFiles:a,otherChangedFiles:d,refsAreBranches:u,allIsResolved:f,uniquePathMap:y,hasConflicts:b,hasOtherChanges:w,isUpstreamPull:_,error:null}]}})})()});if((0,o.useEffect)(function(){(null==w?void 0:w.error)&&x(w.error)},[null==w?void 0:w.error,x]),!w)return(0,a.jsx)(e7,{});if(w.error)return null;var _=w.refs,k=w.branch,T=w.conflictingFiles,E=w.otherChangedFiles,R=w.refsAreBranches,I=w.allIsResolved,A=w.uniquePathMap,P=w.hasConflicts,D=w.hasOtherChanges,O=w.isUpstreamPull,N=O?"Complete in-progress pull":"Complete in-progress merge";return P&&(N=O?"Resolve pull conflicts":"Resolve merge conflicts"),(0,a.jsxs)(j.View,{children:[(0,a.jsxs)(j.View,{css:nZ.fakePaneHeader,p:8,row:!0,gap:8,children:[(0,a.jsx)(nG,{}),(0,a.jsx)(C.Text,{variant:"subheadDefault",multiline:!1,children:N})]}),(0,a.jsxs)(j.View,{pt:16,pb:8,px:8,gap:12,children:[(0,a.jsx)(nQ,{branch:k,refs:_,refsAreBranches:R,isUpstreamPull:O}),(0,a.jsx)(nW,{hasConflicts:P}),(0,a.jsxs)(er.ShadesSurface,{clsx:nZ.listContainer,p:8,gap:8,elevate:"1x",children:[(0,a.jsxs)(j.View,{pb:8,gap:8,children:[(0,a.jsx)(j.View,{css:nZ.listHeader,children:(0,a.jsx)(C.Text,{css:S.rcss.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,a.jsx)(j.View,{css:nZ.listFiles,children:P?(0,a.jsx)(nz,{files:T,uniquePathMap:A,onFileClick:t}):(0,a.jsx)(C.Text,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this merge."})})]}),D?(0,a.jsxs)(j.View,{css:l?nZ.list:nZ.listDisabled,children:[(0,a.jsx)(j.View,{css:nZ.listHeader,children:(0,a.jsx)(C.Text,{css:S.rcss.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,a.jsx)(j.View,{css:nZ.listFiles,children:(0,a.jsx)(nz,{files:E,uniquePathMap:A,onFileClick:t})})]}):null]}),(0,a.jsxs)(j.View,{css:nZ.includeOtherFiles,tag:"label",children:[(0,a.jsx)(nX.Checkbox,{id:b,checked:l,onChange:function(e){return u(e)}}),(0,a.jsx)(C.Text,{multiline:!1,children:"Include other changed files in commit"})]}),(0,a.jsxs)(j.View,{gap:8,children:[(0,a.jsx)(ei.Button,{text:O?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:d?(0,a.jsx)(eh.default,{}):(0,a.jsx)(nG,{}),disabled:!I||g,loading:d,onClick:function(){return(0,eI._)(function(){var e,t,r,a,o,s,u,c,d,p,h;return(0,eA._)(this,function(m){switch(m.label){case 0:if(!I||g)return[2];f(!0),e=[],t=!0,r=!1,a=void 0;try{for(o=T.keys()[Symbol.iterator]();!(t=(s=o.next()).done);t=!0)u=s.value,e.push(u)}catch(e){r=!0,a=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw a}}return l&&(c=e).push.apply(c,(0,i._)(E)),[4,y.stageFiles({all:!1})];case 1:if((d=m.sent()).error)return x(d.error),f(!1),[2];return[4,y.stageFiles({add:e})];case 2:if((p=m.sent()).error)return x(p.error),f(!1),[2];return[4,y.mergeContinue()];case 3:if(!(h=m.sent()).error)return[3,5];return[4,y.stageFiles({all:!1})];case 4:return m.sent(),x(h.error),f(!1),[3,6];case 5:n(),y.forceRefresh(),m.label=6;case 6:return[2]}})})()}}),(0,a.jsx)(ei.Button,{text:O?"Abort pull":"Abort merge",colorway:"negative",iconLeft:h?(0,a.jsx)(eh.default,{}):(0,a.jsx)(nU.default,{}),disabled:g,loading:h,onClick:function(){return(0,eI._)(function(){var e;return(0,eA._)(this,function(t){switch(t.label){case 0:if(g)return[2];return m(!0),[4,y.mergeAbort()];case 1:return(e=t.sent()).error?(x(e.error),m(!1),(0,tJ.reportErrorToSentry)({context:"merging-view-abort",gitService:y,result:e,data:{branch:k}})):(n(),y.forceRefresh()),[2]}})})()}})]})]})]})}e.s(["default",()=>nJ],737553);var n0=(0,P.cssRecord)({fakePaneHeader:[S.rcss.backgroundColor.backgroundDefault,S.rcss.align.center,{borderBottom:"1px solid ".concat(t7.tokens.outlineDimmer)}],listContainer:[S.rcss.borderRadius(8)],list:[],listDisabled:[{opacity:.5},S.rcss.pb(8),S.rcss.colWithGap(8)],listHeader:[S.rcss.pb(4),S.rcss.flex.grow(1),S.rcss.border({color:t7.tokens.outlineDimmer,direction:"bottom"})],listFiles:[S.rcss.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},S.rcss.rowWithGap(8)]});function n1(e){var t=e.onFileClick,n=e.gotoPendingState,s=(0,r._)((0,o.useState)(!0),2),l=s[0],u=s[1],c=(0,r._)((0,o.useState)(!1),2),d=c[0],f=c[1],p=(0,r._)((0,o.useState)(!1),2),h=p[0],m=p[1],g=d||h,x=(0,ex.useNotifyGitError)(),y=(0,eO.default)().git,b=(0,o.useId)(),w=(0,eU.default)(function(e){return(0,eI._)(function(){var t,n,i,a,o,s,l,u,c,d,f,p,h,m;return(0,eA._)(this,function(g){switch(g.label){case 0:return[4,e.status()];case 1:if((t=g.sent()).error)return(0,tJ.reportErrorToSentry)({context:"use-rebasing-view-state-status",gitService:e,result:t}),[2,t];if(!(n=t.branch))return[2,{error:eD.GitErrors.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((i=g.sent()).error)return[2,i];a=i.files,o=t.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),s=!0,l=!0,u=!1,c=void 0;try{for(d=a[Symbol.iterator]();!(l=(f=d.next()).done);l=!0)if(!(0,r._)(f.value,2)[1]){s=!1;break}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}return p=(0,t2.getUniquePathMap)(t.changes.map(function(e){return e.path})),h=a.size>0,m=o.length>0,[2,{branch:n,conflictingFiles:a,otherChangedFiles:o,allIsResolved:s,uniquePathMap:p,hasConflicts:h,hasOtherChanges:m,error:null}]}})})()});if((0,o.useEffect)(function(){(null==w?void 0:w.error)&&x(w.error)},[null==w?void 0:w.error,x]),!w)return(0,a.jsx)(e7,{});if(w.error)return null;var _=w.branch,k=w.conflictingFiles,T=w.otherChangedFiles,E=w.allIsResolved,R=w.uniquePathMap,I=w.hasConflicts,A=w.hasOtherChanges,P="Complete in-progress rebase";return I&&(P="Resolve conflicts"),(0,a.jsxs)(j.View,{children:[(0,a.jsxs)(j.View,{css:n0.fakePaneHeader,p:8,row:!0,gap:8,children:[(0,a.jsx)(nG,{}),(0,a.jsx)(C.Text,{variant:"subheadDefault",multiline:!1,children:P})]}),(0,a.jsxs)(j.View,{pt:16,pb:8,px:8,gap:12,children:[(0,a.jsx)(nW,{hasConflicts:I}),(0,a.jsxs)(er.ShadesSurface,{clsx:n0.listContainer,p:8,gap:8,elevate:"1x",children:[(0,a.jsxs)(j.View,{pb:8,gap:8,children:[(0,a.jsx)(j.View,{css:n0.listHeader,children:(0,a.jsx)(C.Text,{css:S.rcss.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,a.jsx)(j.View,{css:n0.listFiles,children:I?(0,a.jsx)(nz,{files:k,uniquePathMap:R,onFileClick:t}):(0,a.jsx)(C.Text,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this step."})})]}),A?(0,a.jsxs)(j.View,{css:l?n0.list:n0.listDisabled,children:[(0,a.jsx)(j.View,{css:n0.listHeader,children:(0,a.jsx)(C.Text,{css:S.rcss.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,a.jsx)(j.View,{css:n0.listFiles,children:(0,a.jsx)(nz,{files:T,uniquePathMap:R,onFileClick:t})})]}):null]}),(0,a.jsxs)(j.View,{css:n0.includeOtherFiles,tag:"label",children:[(0,a.jsx)(nX.Checkbox,{id:b,checked:l,onChange:function(e){return u(e)}}),(0,a.jsx)(C.Text,{multiline:!1,children:"Include other changed files in commit"})]}),(0,a.jsxs)(j.View,{gap:8,children:[(0,a.jsx)(ei.Button,{text:"commit and continue rebase",colorway:"primary",iconLeft:d?(0,a.jsx)(eh.default,{}):(0,a.jsx)(nG,{}),disabled:!E||g,loading:d,onClick:function(){return(0,eI._)(function(){var e,t,r,a,o,s,u,c,d,p,h;return(0,eA._)(this,function(m){switch(m.label){case 0:if(!E||g)return[2];f(!0),e=[],t=!0,r=!1,a=void 0;try{for(o=k.keys()[Symbol.iterator]();!(t=(s=o.next()).done);t=!0)u=s.value,e.push(u)}catch(e){r=!0,a=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw a}}return l&&(c=e).push.apply(c,(0,i._)(T)),[4,y.stageFiles({all:!1})];case 1:if((d=m.sent()).error)return x(d.error),f(!1),[2];return[4,y.stageFiles({add:e})];case 2:if((p=m.sent()).error)return x(p.error),f(!1),[2];return[4,y.escapeHatchGitExecWrite("git rebase --continue")];case 3:if(!(h=m.sent()).error)return[3,5];return[4,y.stageFiles({all:!1})];case 4:return m.sent(),x(h.error),f(!1),[3,6];case 5:n(),y.forceRefresh(),m.label=6;case 6:return[2]}})})()}}),(0,a.jsx)(ei.Button,{text:"Abort rebase",colorway:"negative",iconLeft:h?(0,a.jsx)(eh.default,{}):(0,a.jsx)(nU.default,{}),disabled:g,loading:h,onClick:function(){return(0,eI._)(function(){var e;return(0,eA._)(this,function(t){switch(t.label){case 0:if(g)return[2];return m(!0),[4,y.escapeHatchGitExecWrite("git rebase --abort")];case 1:return(e=t.sent()).error?(x(e.error),m(!1),(0,tJ.reportErrorToSentry)({context:"rebasing-view-abort",gitService:y,result:e,data:{branch:_}})):(n(),y.forceRefresh()),[2]}})})()}})]})]})]})}function n2(){return(0,a.jsxs)(j.View,{children:[(0,a.jsx)(C.Text,{multiline:!1,children:"Unsupported state: you are in the middle of a rebase."}),(0,a.jsx)(C.Text,{multiline:!1,children:"Please finish the rebase manually."})]})}function n3(){return(0,a.jsxs)(j.View,{children:[(0,a.jsx)(C.Text,{multiline:!1,children:"Unsupported state: you are in the middle of a revert."}),(0,a.jsx)(C.Text,{multiline:!1,children:"Please finish the revert manually."})]})}e.s(["default",()=>n1],674373),e.s(["default",()=>n2],345008),e.s(["default",()=>n3],569484)},686356,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245),i=e.i(304277);function a(){var e=(0,n._)(["\n  fragment GitServiceUser on CurrentUser {\n    image\n    username\n    email\n    firstName\n    lastName\n    gitHubInfo {\n      isAppCurrentlyInstalled\n      accessToken\n      userInfo {\n        name\n        username\n        email\n        avatarUrl\n      }\n    }\n    gitHubInfoV2 {\n      accessToken\n      userInfo {\n        name\n        username\n        email\n        avatarUrl\n      }\n    }\n    bitbucketInfo {\n      accessToken\n      userInfo {\n        name\n        username\n        email\n        avatarUrl\n      }\n    }\n    gitLabInfo {\n      accessToken\n      userInfo {\n        name\n        username\n        email\n        avatarUrl\n      }\n    }\n  }\n"]);return a=function(){return e},e}function o(){var e=(0,n._)(["\n  query GitServiceCurrentUser {\n    currentUser {\n      id\n      ...GitServiceUser\n    }\n  }\n  ","\n"]);return o=function(){return e},e}e.i(566901);var s={},l=(0,r.gql)(a()),u=(0,r.gql)(o(),l);function c(e){var n=(0,t._)({},s,e);return i.useQuery(u,n)}e.s(["GitServiceCurrentUserDocument",()=>u,"useGitServiceCurrentUserQuery",()=>c])},836102,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(686356),i=e.i(791675),a=e.i(257982),o=e.i(173738),s=e.i(458112);function l(e){switch(e){case i.GitProfileProvider.GITHUB:return"GitHub";case i.GitProfileProvider.BITBUCKET:return"Bitbucket";case i.GitProfileProvider.GITLAB:return"GitLab";case i.GitProfileProvider.REPLIT_DEFAULT:return"Default Profile";default:(0,a.default)(e)}}function u(e){return(0,t._)(function(e){var t,a,l,u,c,d,f,p,h,m,g,x,y,b,w,_,k,S,C,j,T,E,R,I,A,P,D,O,N,M,L,B,V,F,U,G,$,H,z;return(0,n._)(this,function(n){switch(n.label){case 0:return t=e.defaultUsername,a=e.defaultUserId,l=e.onProfiles,x=new Map,[4,null===o.apolloClient||void 0===o.apolloClient?void 0:o.apolloClient.query({query:r.GitServiceCurrentUserDocument,context:{noBatch:!0},fetchPolicy:"network-only"})];case 1:var W,q,K,Y;return k=(_=null!=(w=null==(b=(null!=(y=n.sent())?y:{data:null}).data)?void 0:b.currentUser)?w:{username:t,id:a,firstName:null,lastName:null}).id,S=_.firstName,C=_.lastName,j=_.username,k&&j&&(E=j,S&&(E=S),C&&(E=C),S&&C&&(E=S+" "+C),I={provider:i.GitProfileProvider.REPLIT_DEFAULT,email:"".concat(k,"-").concat(j,"@").concat(s.REPLIT_PRIVACY_EMAIL_DOMAIN),name:E,username:j,avatar:null!=(R=null==b||null==(T=b.currentUser)?void 0:T.image)?R:null},x.set(I.provider,I)),(P=null!=(A=null==b||null==(c=b.currentUser)||null==(u=c.gitHubInfoV2)?void 0:u.userInfo)?A:null==b||null==(f=b.currentUser)||null==(d=f.gitHubInfo)?void 0:d.userInfo)&&P.email&&P.username&&((null==b||null==(q=b.currentUser)||null==(W=q.gitHubInfoV2)?void 0:W.accessToken)||(null==b||null==(Y=b.currentUser)||null==(K=Y.gitHubInfo)?void 0:K.isAppCurrentlyInstalled))&&(L={provider:i.GitProfileProvider.GITHUB,email:P.email,name:null!=(N=P.name)?N:P.username,username:P.username,avatar:null!=(M=P.avatarUrl)?M:null,isSourceOpenInt:!!(null==b||null==(O=b.currentUser)||null==(D=O.gitHubInfoV2)?void 0:D.accessToken)},x.set(L.provider,L)),(B=null==b||null==(h=b.currentUser)||null==(p=h.bitbucketInfo)?void 0:p.userInfo)&&B.email&&B.username&&(U={provider:i.GitProfileProvider.BITBUCKET,email:B.email,name:null!=(V=B.name)?V:B.username,username:B.username,avatar:null!=(F=B.avatarUrl)?F:null,isSourceOpenInt:!0},x.set(U.provider,U)),(G=null==b||null==(g=b.currentUser)||null==(m=g.gitLabInfo)?void 0:m.userInfo)&&G.email&&G.username&&(z={provider:i.GitProfileProvider.GITLAB,email:G.email,name:null!=($=G.name)?$:G.username,username:G.username,avatar:null!=(H=G.avatarUrl)?H:null,isSourceOpenInt:!0},x.set(z.provider,z)),l(x),[2]}})}).apply(this,arguments)}e.s(["default",()=>u,"providerEnumToDisplayName",()=>l])},254837,e=>{e.v({"connection-section-glow":"ProviderConnectionSection-module__5MNnsG__connection-section-glow",connectionItem:"ProviderConnectionSection-module__5MNnsG__connectionItem",sectionContainer:"ProviderConnectionSection-module__5MNnsG__sectionContainer",sectionHeader:"ProviderConnectionSection-module__5MNnsG__sectionHeader",sectionHeaderCollapsed:"ProviderConnectionSection-module__5MNnsG__sectionHeaderCollapsed",sectionHeaderExpanded:"ProviderConnectionSection-module__5MNnsG__sectionHeaderExpanded"})},221721,883117,627254,548747,372014,919449,81621,33297,e=>{"use strict";var t,n=e.i(276385),r=e.i(960933),i=e.i(862927),a=e.i(113388),o=e.i(116235),s=e.i(297083),l=e.i(530658),u=e.i(817556),c=e.i(389959),d=e.i(541793),f=e.i(507491),p=e.i(167193),h=e.i(10581),m=e.i(257982),g=e.i(993796),x=e.i(98816),y=e.i(597865),b=e.i(529810),w=e.i(137804),_=e.i(691490),k=e.i(730792),S=e.i(944520),C=e.i(138290),j=e.i(520739),T=e.i(526962),E=e.i(191967),R=e.i(825711),I=e.i(952e3),A=e.i(680011),P=e.i(772275),D=e.i(540285),O=e.i(710106),N=e.i(973267),M=e.i(35647),L=e.i(166963),B=e.i(737553),V=e.i(674373),F=e.i(345008),U=e.i(569484),G=e.i(791675),$=e.i(485273),H=e.i(252204),z=e.i(441329),W=e.i(836102),q=e.i(714165),K=e.i(960178),Y=e.i(625484);function Q(e){var t=e.username,r=e.avatar,i=e.fullName;return(0,n.jsxs)(Y.View,{row:!0,gap:8,align:"center",children:[(0,n.jsx)(q.Avatar,{src:null!=r?r:null,username:t,fullName:i}),(0,n.jsx)(K.Text,{variant:"subheadDefault",multiline:!1,children:t})]})}var X=e.i(480028),Z=e.i(446530),J=e.i(754873),ee=e.i(613355),et=e.i(91720),en=e.i(734882),er=(0,Z.cssRecord)({list:{"> div:first-child":ee.rcss.borderRadius(8,8,0,0),"> div:last-child":[ee.rcss.borderRadius(0,0,8,8),{border:"none"}]},profile:[J.interactive.filled,ee.rcss.flex.row,ee.rcss.justify.spaceBetween,ee.rcss.p(12),ee.rcss.borderRadius(0),ee.rcss.border({color:X.tokens.outlineDefault,direction:"bottom"})],email:[ee.rcss.flex.shrink(1)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function ei(e){var t=e.profiles,r=e.current,i=e.onSelectProvider,a=(0,$.useRouter)(),o=(0,z.isInBonsaiWebview)(a),s=(0,c.useId)(),l=(0,g.useFlag)({controlName:"flag-github-connection-migration",default:!1});return(0,n.jsx)(en.RadioGroup,{name:s,css:er.list,value:null!=r?r:"",children:t.map(function(e){if(l&&e.provider===G.GitProfileProvider.GITHUB&&!e.isSourceOpenInt)return null;var t=(0,W.providerEnumToDisplayName)(e.provider),a=void 0;return e.provider!==G.GitProfileProvider.GITHUB||l?e.provider!==G.GitProfileProvider.REPLIT_DEFAULT&&(a="/integrations"):a=o?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1",(0,n.jsx)(ea,{profile:e,providerName:t,current:e.provider===r,onSelectProvider:i,settingsURL:a},e.provider)})})}function ea(e){var t=e.profile,r=e.current,i=e.providerName,a=e.settingsURL,o=e.onSelectProvider,s=t.provider,l=t.name,u=t.username,d=t.email,f=t.avatar,p=(0,c.useId)();return(0,n.jsxs)(Y.View,{onClick:function(){return o(s)},css:er.profile,children:[(0,n.jsxs)(Y.View,{shrink:!0,gap:4,children:[(0,n.jsxs)(Y.View,{row:!0,gap:8,align:"center",children:[(0,n.jsx)(Q,{username:u,avatar:f,fullName:l}),a?(0,n.jsx)(et.ButtonLink,{css:er.settingsButton,text:"".concat(i," Settings"),iconRight:(0,n.jsx)(H.default,{}),href:a,target:"_blank",variant:"outlined",size:"small"}):(0,n.jsx)(K.Text,{color:"dimmest",variant:"small",multiline:!1,children:i})]}),(0,n.jsxs)(K.Text,{color:"dimmest",css:er.email,multiline:!1,children:[l," <",d,">"]})]}),(0,n.jsx)(en.Radio,{css:er.radio,id:p,checked:r,value:s})]})}var eo=(0,Z.cssRecord)({profileContainer:[ee.rcss.flex.column]});function es(){var e=(0,b.default)().git,t=(0,y.default)(function(e){return(0,s._)(function(){var t,n;return(0,u._)(this,function(r){return t=e.getCurrentProfile(),[2,{profiles:e.getProfiles(),current:null!=(n=null==t?void 0:t.provider)?n:null,error:null}]})})()});if(!t)return null;if(null!==t.error)return(0,C.reportErrorToSentry)({context:"git-profiles",gitService:e,result:{error:t.error}}),null;var r=t.profiles,i=t.current;return(0,n.jsx)(Y.View,{css:eo.profileContainer,children:(0,n.jsx)(ei,{profiles:r,current:i,onSelectProvider:function(t){e.setCurrentProfile(t),t===G.GitProfileProvider.REPLIT_DEFAULT?(0,j.trackGitPaneEvent)("profile-changed",{profile:"replit"}):t===G.GitProfileProvider.GITHUB?(0,j.trackGitPaneEvent)("profile-changed",{profile:"github"}):t===G.GitProfileProvider.BITBUCKET&&(0,j.trackGitPaneEvent)("profile-changed",{profile:"bitbucket"})}})})}var el=e.i(167392),eu=e.i(568430),ec=e.i(486898),ed=e.i(819229),ef=e.i(269848),ep=e.i(90319),eh=e.i(917063),em=e.i(882793),eg=e.i(163355),ev=e.i(140487),ex=e.i(988676),ey=e.i(211397),eb=e.i(254837),ew=[],e_=[];function ek(e){var t,r,i,a,o,d,f,p=e.expanded,h=e.onClick,x=e.shouldAnimateOnMount,y=void 0!==x&&x,w=e.connectorData,_=e.connectorLoading,k=void 0!==_&&_,S=e.connectorRefetch,C=(0,g.useFlag)({controlName:"flag-killswitch-gitlab",default:!1}),j=(0,l._)((0,c.useState)(null),2),T=j[0],E=j[1],R=(0,c.useRef)(null);(0,c.useEffect)(function(){if(y&&R.current){var e=R.current;e.style.setProperty("animation","".concat(eb.default["connection-section-glow"]," 1.5s")),e.addEventListener("animationend",function(){return e.style.removeProperty("animation")},{once:!0})}},[y]);var I=(0,l._)((0,c.useState)(!1),2),A=I[0],P=I[1],D=(0,l._)((0,c.useState)(null),2),O=D[0],N=D[1],M=(0,eg.usePersonalConnectorMutations)({refetch:null!=S?S:function(){}}),L=M.handleEvent,B=M.handleDelete,V=(0,b.default)().git,F=(null==w||null==(t=w.currentUser)?void 0:t.__typename)==="CurrentUser"&&(null==w||null==(i=w.currentUser)||null==(r=i.connectorContext)?void 0:r.__typename)==="CurrentUserConnectorContext"?null==w||null==(a=w.currentUser)?void 0:a.connectorContext:null,U=null!=(o=null==F?void 0:F.openIntClientToken)?o:null,$=null!=(d=null==F?void 0:F.connections)?d:ew,H=null!=(f=null==F?void 0:F.connectorConfigs)?f:e_,z=(0,c.useMemo)(function(){var e=[],t=$.filter(function(e){return em.VERSION_CONTROL_CONNECTORS.has(e.connectorName)}),n=new Set(t.map(function(e){return e.connectorName})),r=H.filter(function(e){return e.connectorName&&em.VERSION_CONTROL_CONNECTORS.has(e.connectorName)&&!n.has(e.connectorName)});return t.forEach(function(t){var n,r,i,a=(0,em.isAppScopedConnector)(t.connectorName)?"appConnection":"accountConnection",o=C&&"GITLAB_SOURCE_CONTROL"===t.connectorName;e.push({id:t.connectionId,displayName:t.displayName,iconPath:t.iconPath,connectorName:t.connectorName,connectorType:a,type:t.type,status:o?"maintenance":null!=(n=t.status)?n:"",repls:null!=(r=t.repls)?r:[],description:null!=(i=em.CONNECTOR_DESCRIPTIONS[t.connectorName])?i:""})}),r.forEach(function(t){var n,r,i=C&&"GITLAB_SOURCE_CONTROL"===t.connectorName;e.push({id:t.id,displayName:null!=(n=t.displayName)?n:"",iconPath:t.iconPath,connectorName:null!=(r=t.connectorName)?r:"",connectorType:"availableConnector",type:t.type,status:i?"maintenance":"",repls:[],description:t.connectorName?em.CONNECTOR_DESCRIPTIONS[t.connectorName]:""})}),e},[$,H,C]),W=(0,c.useMemo)(function(){return z},[z]),q=function(e){var t=e.item.status;return"maintenance"===t?(0,n.jsxs)(Y.View,{row:!0,align:"center",gap:4,children:[(0,n.jsx)(ec.default,{size:8,color:"orange"}),(0,n.jsx)(K.Text,{variant:"small",color:"dimmer",children:"Under maintenance"})]}):(0,n.jsxs)(Y.View,{row:!0,align:"center",gap:4,children:[(0,n.jsx)(ec.default,{size:8,color:"healthy"===t?"green":"grey"}),(0,n.jsx)(K.Text,{variant:"small",color:"dimmer",children:"healthy"===t?"Active":"Disconnected"})]})},Q=function(e){var t=e.item;if(C&&"GITLAB_SOURCE_CONTROL"===t.connectorName)return(0,n.jsx)(ev.Button,{variant:"default",text:"Unavailable",size:"small",disabled:!0});switch(t.connectorType){case"accountConnection":case"appConnection":return(0,n.jsx)(ev.Button,{variant:"outlined",size:"small",colorway:"negative",text:"Delete",onClick:function(){E(t)}});case"availableConnector":return(0,n.jsx)(ev.Button,{iconLeft:(0,n.jsx)(ep.default,{}),variant:"outlined",colorway:"primary",size:"small",text:"Sign in",onClick:function(){N(t.connectorName),P(!0)}});default:(0,m.default)(t.connectorType)}};return(0,n.jsxs)(Y.View,{clsx:eb.default.sectionContainer,innerRef:R,children:[(0,n.jsxs)(Y.View,{row:!0,justify:"space-between",align:"center",p:8,clsx:[eb.default.sectionHeader,p?eb.default.sectionHeaderExpanded:eb.default.sectionHeaderCollapsed],onClick:h,children:[(0,n.jsx)(Y.View,{grow:!0,shrink:!0,children:(0,n.jsx)(K.Text,{variant:"subheadDefault",multiline:!1,children:"Connections"})}),k?(0,n.jsx)(ef.default,{}):p?(0,n.jsx)(eu.default,{}):(0,n.jsx)(el.default,{})]}),(0,n.jsx)(ex.DividerH,{}),p&&!k?(0,n.jsxs)(Y.View,{p:8,children:[W.map(function(e){return(0,n.jsxs)(Y.View,{row:!0,grow:!0,clsx:eb.default.connectionItem,children:[(0,n.jsxs)(Y.View,{gap:8,row:!0,align:"center",children:["GITHUB"===e.connectorName?(0,n.jsx)(ed.default,{size:24,style:{padding:3}}):null,"GITHUB"!==e.connectorName&&e.iconPath?(0,n.jsx)(ey.default,{width:24,height:24,src:e.iconPath,alt:e.displayName}):null,(0,n.jsx)(K.Text,{children:e.displayName}),(0,n.jsx)(q,{item:e})]}),(0,n.jsx)(Y.View,{row:!0,justify:"end",children:(0,n.jsx)(Q,{item:e})})]},e.id)}),(0,n.jsx)(eh.AddIntegrationModal,{isOpen:A,setIsOpen:function(e){return P(e)},token:null!=U?U:"",selectedConnector:null!=O?O:void 0,onEvent:function(e){return(0,s._)(function(){var t;return(0,u._)(this,function(n){switch(n.label){case 0:return[4,L(e)];case 1:if(n.sent(),!O)return[3,6];if(!(t=function(e){if(!em.VERSION_CONTROL_CONNECTORS.has(e))return null;switch(e){case"GITHUB_SOURCE_CONTROL":return G.GitProfileProvider.GITHUB;case"BITBUCKET_SOURCE_CONTROL":return G.GitProfileProvider.BITBUCKET;case"GITLAB_SOURCE_CONTROL":return G.GitProfileProvider.GITLAB;default:return null}}(O)))return[3,3];return[4,V.refreshProfiles({preferredProvider:t})];case 2:return n.sent(),[3,5];case 3:return[4,V.refreshProfiles({})];case 4:n.sent(),n.label=5;case 5:return[3,8];case 6:return[4,V.refreshProfiles({})];case 7:n.sent(),n.label=8;case 8:return[2]}})})()}}),(0,n.jsx)(eh.DeleteIntegrationModal,{isOpen:!!T,setIsOpen:function(){return E(null)},onDelete:function(){return(0,s._)(function(){return(0,u._)(this,function(e){switch(e.label){case 0:if(!T)return[3,3];return[4,B(T.id)];case 1:return e.sent(),[4,V.refreshProfiles({})];case 2:e.sent(),E(null),e.label=3;case 3:return[2]}})})()},connectorDisplayName:null==T?void 0:T.displayName})]}):null]})}var eS=e.i(36397),eC=e.i(636680),ej=e.i(739521);function eT(e){var t=e.remoteName,r=e.updateRemote,i=(0,l._)((0,c.useState)(!1),2),a=i[0],o=i[1],s=(0,eS.default)();return(0,n.jsxs)(n.Fragment,{children:[s?(0,n.jsx)(ev.Button,{text:"Create Remote",onClick:function(){return o(!0)},variant:"outlined",disabled:!s}):null,(0,n.jsx)(ej.Modal,{isOpen:a,onRequestClose:function(){return o(!1)},children:(0,n.jsx)(eC.default,{remoteName:t,updateRemote:r,onCreateSuccess:function(){return o(!1)}})})]})}var eE=e.i(368085),eR=e.i(352758),eI="origin";function eA(e){var t=e.shouldAnimateConnections,r=(0,y.default)(function(e){return(0,s._)(function(){var t,n,r,i;return(0,u._)(this,function(a){switch(a.label){case 0:return[4,e.getRemotes()];case 1:if((t=a.sent()).error)return(0,C.reportErrorToSentry)({context:"remote-config",gitService:e,result:t}),[2,{url:void 0,name:eI,error:t.error}];if(!(r=(0,l._)(null!=(n=t.remotes.values())?n:void 0,1)[0]))return[2,{url:void 0,name:eI,error:null}];return[2,{url:r.push||r.fetch,name:null!=(i=r.name)?i:eI,error:null}]}})})()});return null==r?(0,n.jsxs)(Y.View,{css:ee.rcss.center,children:[(0,n.jsx)(K.Text,{color:"dimmest",multiline:!1,children:"Loading remote information."}),(0,n.jsx)(L.default,{})]}):(null==r?void 0:r.error)?null:(0,n.jsx)(eP,{initialRemoteUrl:null==r?void 0:r.url,remoteName:null==r?void 0:r.name,shouldAnimateConnections:void 0!==t&&t})}function eP(e){var t=e.initialRemoteUrl,r=e.remoteName,i=(0,l._)((0,c.useState)(t),2),a=i[0],o=i[1],s=function(e){o(e)};return(0,n.jsxs)(Y.View,{children:[(0,n.jsx)(K.Text,{variant:"subheadDefault",multiline:!1,children:"Remote"}),(0,n.jsx)(eR.default,{height:1}),(0,n.jsxs)(Y.View,{row:!0,justify:"space-between",gap:4,children:[(0,n.jsx)(eE.default,{remoteName:r,initialRemoteUrl:a,updateRemote:s}),(0,n.jsx)(eT,{remoteName:r,updateRemote:s})]}),(0,n.jsx)(eR.default,{height:2})]})}function eD(e){var t=e.shouldAnimateConnections,r=void 0!==t&&t,i=e.connectorData,a=e.connectorLoading,o=e.connectorRefetch,s=(0,l._)((0,c.useState)(!0),2),u=s[0],d=s[1];return(0,c.useEffect)(function(){r&&d(!0)},[r]),(0,n.jsxs)(Y.View,{px:16,children:[(0,n.jsx)(eR.default,{height:2}),(0,n.jsx)(eA,{}),(0,n.jsx)(eR.default,{height:2}),(0,n.jsx)(ek,{expanded:u,onClick:function(){return d(!u)},shouldAnimateOnMount:r,connectorData:i,connectorLoading:a,connectorRefetch:o}),(0,n.jsx)(eR.default,{height:2}),(0,n.jsx)(eO,{})]})}function eO(){return(0,n.jsxs)(Y.View,{children:[(0,n.jsx)(K.Text,{variant:"subheadDefault",multiline:!1,children:"Commit author"}),(0,n.jsx)(eR.default,{height:1}),(0,n.jsx)(es,{})]})}function eN(){return(0,n.jsx)(Y.View,{children:(0,n.jsx)(K.Text,{multiline:!0,children:"Something went wrong. Please refresh the page and try again."})})}(t={})[t.GitHub=0]="GitHub",t[t.Bitbucket=1]="Bitbucket";var eM=e.i(416298),eL=e.i(25358),eB=e.i(688216),eV=e.i(396776),eF=(0,Z.cssRecord)({fakePaneHeader:[ee.rcss.backgroundColor.backgroundDefault,ee.rcss.align.center,{borderBottom:"1px solid ".concat(X.tokens.outlineDimmer)}]});function eU(e){var t=e.onFileClick,r=e.status;return(0,n.jsxs)(Y.View,{children:[(0,n.jsx)(eG,{}),(0,n.jsxs)(Y.View,{p:8,pt:16,gap:16,children:[(0,n.jsx)(eV.StatusBanner,{colorway:"orange",icon:(0,n.jsx)(eM.default,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,n.jsxs)(Y.View,{css:I.styles.section,children:[(0,n.jsx)(Y.View,{css:I.styles.reviewChangesHeader,children:(0,n.jsx)(K.Text,{css:I.styles.headerText,multiline:!1,children:"Commit"})}),(0,n.jsx)(eL.default,{status:r,onStagedFileClick:t,defaultMessage:"Initial commit"})]})]})]})}function eG(){var e=(0,k.useNotifyGitError)(),t=(0,y.default)(function(t){return(0,s._)(function(){var n;return(0,u._)(this,function(r){switch(r.label){case 0:return[4,t.status()];case 1:return(n=r.sent()).error&&((0,C.reportErrorToSentry)({context:"unborn-branch-view-status",gitService:t,result:n}),e(n.error)),[2,n]}})})()},[e]);return(null==t?void 0:t.error)?null:(0,n.jsx)(Y.View,{css:eF.fakePaneHeader,px:8,py:4,row:!0,gap:8,children:(null==t?void 0:t.branch)?(0,n.jsx)(eB.BranchName,{name:t.branch,current:!0,heading:!0}):null})}var e$=e.i(712516);e.i(282890);var eH=e.i(66718),ez=(0,Z.cssRecord)({gitPane:[ee.rcss.position.relative,ee.rcss.display.flex,ee.rcss.minHeight("100%")],gitPaneContent:[ee.rcss.overflow("auto")]});function eW(e){var t=e.isActive,r=e.performPaneOperation,i=e.mode,a=void 0===i?{type:T.GitPaneModeType.CURRENT_BRANCH}:i,o=(0,c.useRef)(),d=(0,c.useCallback)(function(e){r({operation:"replace",pane:{type:"git",data:{mode:e}}})},[r]),m=(0,l._)((0,c.useState)(!1),2),g=m[0],b=m[1],w=(0,l._)((0,c.useState)(!1),2),_=w[0],E=w[1];(0,c.useEffect)(function(){a.type!==T.GitPaneModeType.SETTINGS&&_&&E(!1)},[a.type,_]);var R=(0,f.useUserConnectorsPageQuery)({ssr:!1}),I=R.data,A=R.loading,P=R.refetch;eQ(void 0!==t&&t);var D=(0,y.default)(function(e){return(0,s._)(function(){var t,n,r,i,a,o,s,l,c,d;return(0,u._)(this,function(u){switch(u.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=u.sent()).error)return[2,t];if(n=t.state,r=t.type,i=null,a=null,o=null,r===h.GitRepositoryStateType.INITIALIZING)return[3,6];return[4,e.status()];case 2:if((s=u.sent()).error)return(0,C.reportErrorToSentry)({context:"git-pane-status",gitService:e,result:s,data:{state:n,type:r}}),[2,s];return i=s,[4,e.getRemotes()];case 3:if((l=u.sent()).error)return(0,C.reportErrorToSentry)({context:"git-pane-remotes",gitService:e,result:l,data:{state:n,type:r}}),[2,l];if(a=l.remotes,!i.branch)return[3,5];return[4,e.getBranch(i.branch)];case 4:if((c=u.sent()).error)return(0,C.reportErrorToSentry)({context:"git-pane-branch",gitService:e,result:c,data:{state:n,type:r}}),[2,c];o=c.branch,u.label=5;case 5:return[3,8];case 6:return[4,e.status()];case 7:if((d=u.sent()).error)return(0,C.reportErrorToSentry)({context:"git-pane-status-initializing",gitService:e,result:d,data:{state:n,type:r}}),[2,{state:n,type:r,status:i,remotes:a,currentBranch:o,error:null}];i=d,u.label=8;case 8:return[2,{state:n,type:r,status:i,remotes:a,currentBranch:o,error:null}]}})})()}),N=!D||D.error?null:D.currentBranch,M=(0,c.useCallback)(function(e){switch(d(e),e.type){case T.GitPaneModeType.DASHBOARD:(0,j.trackGitPaneEvent)("pane-mode-changed",{mode:"dashboard"});break;case T.GitPaneModeType.BRANCH:(0,j.trackGitPaneEvent)("pane-mode-changed",{mode:"branch"});break;case T.GitPaneModeType.CURRENT_BRANCH:(0,j.trackGitPaneEvent)("pane-mode-changed",{mode:"current-branch"});break;case T.GitPaneModeType.SETTINGS:(0,j.trackGitPaneEvent)("pane-mode-changed",{mode:"settings"})}},[d]),B=(0,c.useCallback)(function(){o.current?(M(o.current),o.current=void 0):M({type:T.GitPaneModeType.CURRENT_BRANCH})},[M]),V=(0,x.default)(a),F=(0,c.useCallback)(function(e){var t=function(e){o.current=V.current,M(e)};switch(e.type){case T.GitPaneModeType.DASHBOARD:t(e);break;case T.GitPaneModeType.BRANCH:if((0,p.branchesEqual)(e.branch,N)){t({type:T.GitPaneModeType.CURRENT_BRANCH});break}t(e);break;case T.GitPaneModeType.CURRENT_BRANCH:case T.GitPaneModeType.SETTINGS:case T.GitPaneModeType.COMMIT:t(e)}},[M,N,V]),U=(0,c.useCallback)(function(e){var t=e.path,n=e.type,i=(0,eH.getPaneTypeForFile)({path:t});"codeEditor"!==i?r({operation:"open",pane:{type:i,data:{path:t}},secondary:!0}):"conflict"===(void 0===n?"change":n)?r({operation:"open",pane:{type:"codeEditor",data:{path:t}},secondary:!0}):r({operation:"open",pane:{type:"diff",data:{left:{path:t,data:{type:"git",revision:"HEAD"}},right:{path:t,data:{type:"fs"}}}},secondary:!0})},[r]),G=(0,c.useCallback)(function(e){F({type:T.GitPaneModeType.COMMIT,hash:e})},[F]),$=(0,c.useCallback)(function(){b(!0)},[]);a.type===T.GitPaneModeType.BRANCH&&(0,p.branchesEqual)(a.branch,N)&&M({type:T.GitPaneModeType.CURRENT_BRANCH}),(0,c.useEffect)(function(){return b(!1)},[D]);var H=function(){if(g||!D||D.error)return(0,n.jsx)(eq,{children:(null==D?void 0:D.error)?(0,n.jsx)(e$.default,{pane:{type:"git"},headerText:"Git pane is unavailable.",bodyText:(0,n.jsxs)(n.Fragment,{children:["Something went wrong. Error: ",(0,n.jsx)("code",{children:D.error})]}),asciiArt:"Computer"}):(0,n.jsx)(L.default,{})});switch(D.type){case h.GitRepositoryStateType.INITIALIZING:case h.GitRepositoryStateType.INTERMEDIATE:case h.GitRepositoryStateType.DETACHED_HEAD:return(0,n.jsx)(eq,{children:(0,n.jsx)(eK,{state:D.state,status:D.status,onFileClick:U,gotoPendingState:$})});case h.GitRepositoryStateType.NORMAL:if(a.type===T.GitPaneModeType.BRANCH&&!a.branch||a.type===T.GitPaneModeType.CURRENT_BRANCH&&!N)return(0,n.jsx)(eq,{header:(0,n.jsx)(S.default,{mode:T.GitPaneModeType.DASHBOARD,branch:null,switchMode:F,onBack:B}),children:(0,n.jsx)(O.default,{currentBranch:null,switchMode:F})});var e=null;return a.type===T.GitPaneModeType.CURRENT_BRANCH?e=N:a.type===T.GitPaneModeType.BRANCH&&(e=a.branch),(0,n.jsx)(eq,{header:(0,n.jsx)(S.default,{mode:a.type,branch:e,switchMode:F,onBack:B}),children:(0,n.jsx)(k.GitPaneModeSwitcherContext.Provider,{value:function(e){e.type===T.GitPaneModeType.SETTINGS&&(E(!0),setTimeout(function(){E(!1)},1600)),F(e)},children:(0,n.jsx)(eY,{performPaneOperation:r,mode:a,status:D.status,remotes:D.remotes,currentBranch:N,switchMode:F,onStagedFileClick:U,onViewCommitClick:G,gotoPendingState:$,shouldAnimateConnections:_,connectorData:I,connectorLoading:A,connectorRefetch:P})})})}}();return(0,n.jsx)(k.GitPaneModeSwitcherContext.Provider,{value:F,children:H})}function eq(e){var t=e.header,r=e.children,i=(0,l._)((0,c.useState)(function(){return(0,d.createStore)()}),1)[0];return(0,n.jsx)(k.GitPaneErrorContext.Provider,{value:i,children:(0,n.jsxs)(Y.View,{css:ez.gitPane,children:[(0,n.jsx)(_.default,{}),t,(0,n.jsx)(Y.View,{css:ez.gitPaneContent,grow:!0,shrink:!0,children:r})]})})}function eK(e){var t=e.state,r=e.status,i=e.onFileClick,a=e.gotoPendingState,o=(0,g.useFlag)({controlName:"flag-new-rebase-editor",logFlagToAnalytics:!1,default:!1});switch(t){case h.GitRepositoryState.NOT_INITIALIZED:return(0,n.jsx)(e$.default,{pane:{type:"git"},action:(0,n.jsx)(w.default,{})});case h.GitRepositoryState.ON_UNBORN_BRANCH:return(0,n.jsx)(eU,{onFileClick:i,status:r});case h.GitRepositoryState.MERGING:return(0,n.jsx)(B.default,{onFileClick:i,gotoPendingState:a});case h.GitRepositoryState.REBASING:return o?(0,n.jsx)(V.default,{gotoPendingState:a,onFileClick:i}):(0,n.jsx)(F.default,{});case h.GitRepositoryState.REVERTING:return(0,n.jsx)(U.default,{});case h.GitRepositoryState.CHERRY_PICKING:return(0,n.jsx)(A.default,{});case h.GitRepositoryState.APPLYING_MAILBOX:return(0,n.jsx)(E.default,{});case h.GitRepositoryState.BISECTING:return(0,n.jsx)(R.default,{});case h.GitRepositoryState.DETACHED_HEAD:return(0,n.jsx)(N.default,{});case h.GitRepositoryState.INDEX_LOCKED:return(0,n.jsx)(M.default,{});case h.GitRepositoryState.CONFIG_LOCKED:return(0,n.jsx)(D.default,{});case h.GitRepositoryState.CLEAN:case h.GitRepositoryState.DIRTY_INDEX:case h.GitRepositoryState.DIRTY_WORKTREE:case h.GitRepositoryState.HEAD_MISSING:case h.GitRepositoryState.TREE_CORRUPTED:return(0,n.jsx)(eN,{});default:(0,m.default)(t)}}function eY(e){var t=e.mode,r=e.status,i=e.remotes,a=e.currentBranch,o=e.switchMode,s=e.onStagedFileClick,l=e.onViewCommitClick,u=e.gotoPendingState,c=e.performPaneOperation,d=e.shouldAnimateConnections,f=e.connectorData,p=e.connectorLoading,h=e.connectorRefetch;switch(t.type){case T.GitPaneModeType.DASHBOARD:return(0,n.jsx)(O.default,{currentBranch:a,switchMode:o});case T.GitPaneModeType.BRANCH:return(0,n.jsx)(I.default,{performPaneOperation:c,status:r,branch:t.branch,remotes:i,onStagedFileClick:s,onViewCommitClick:l,gotoPendingState:u});case T.GitPaneModeType.CURRENT_BRANCH:return(0,n.jsx)(I.default,{performPaneOperation:c,status:r,remotes:i,branch:a,onStagedFileClick:s,onViewCommitClick:l,gotoPendingState:u,current:!0});case T.GitPaneModeType.SETTINGS:return(0,n.jsx)(eD,{shouldAnimateConnections:d,connectorData:f,connectorLoading:p,connectorRefetch:h});case T.GitPaneModeType.COMMIT:return(0,n.jsx)(P.default,{status:r,remotes:i,onViewCommitClick:l,hash:t.hash,switchMode:o});default:(0,m.default)(t)}}function eQ(e){var t=(0,b.default)().git;(0,c.useEffect)(function(){e&&setTimeout(function(){t.forceRefresh()},100)},[e,t])}e.s(["default",()=>eW,"useGitRefreshWhenIsActive",()=>eQ],883117);var eX=e.i(716636),eZ=r.Type.Object({type:r.Type.Literal("git"),data:r.Type.Optional(r.Type.Object({mode:T.GitPaneModeSchema}))}),eJ={Content:function(e){var t,r=e.options,i=r.isActive,a=r.performPaneOperation,o=e.pane;return(0,n.jsx)(eW,{isActive:i,performPaneOperation:a,mode:null==(t=o.data)?void 0:t.mode})},Icon:function(e){var t=e.size;return(0,n.jsx)(o.IconContext.Provider,{value:{color:X.tokens.greenStrongest,size:t},children:(0,n.jsx)(a.default,{})})},getTitle:function(){return"Git"},description:"Version control for your App",category:eX.PaneCategory.WorkspaceFeatures,decode:function(e){return i.Value.Decode(eZ,e)}};e.s(["gitUI",()=>eJ],221721);var e0=e.i(878420),e1=e.i(709485),e2=e.i(858248),e3=e.i(37292),e5=e.i(181227);function e4(){var e=(0,e3.useThrowBsod)();return(0,c.useCallback)(function(t,n,r){e({origin:"History2: useHistoryBSOD",error:t,tags:{source:"ws-history2",type:n},extras:(0,e0._)({state:e5.historyStateDebug.current()},r)})},[e])}function e8(e){(0,e2.track)(e1.events.HISTORY_USED,{action:e,which:"ws"})}function e6(e){var t=e.onClose;return(0,n.jsx)(ev.Button,{text:"Cancel",onClick:function(){e8("historyExplicitlyClosed"),t()}})}e.s(["historyEvent",()=>e8,"useHistoryBSOD",()=>e4],627254),e.s(["default",()=>e6],548747);var e7=e.i(112767);function e9(){var e,t="/replEnvironmentMobile"===(0,$.useRouter)().pathname,r=(0,e5.useHistoryState)(),i=(0,e5.useSetHistoryState)(),a=!r||0===r.count;return(0,n.jsx)(e7.Switch,{isDisabled:a,onChange:function(e){return i({comparing:e})},isSelected:null!=(e=null==r?void 0:r.comparing)&&e,children:t?"Compare":"Compare Latest"})}e.s(["default",()=>e9],372014);var te=e.i(257811);function tt(){var e=(0,e5.useHistoryState)();if(!e||0===e.count)return null;var t=e.changes[e.version].timestamp;return(0,n.jsx)(te.Timestamp,{textColor:"dimmer",dateFormat:"switch",date:t})}e.s(["default",()=>tt],919449);var tn=e.i(95136);function tr(e){var t=e.reversed,r=void 0!==t&&t,i=e.hideName,a=void 0!==i&&i,o=e.color,s=void 0===o?"default":o,l=(0,e5.useHistoryState)(),u=(0,c.useMemo)(function(){return[r?ee.rcss.rowReverseWithGap(4):ee.rcss.rowWithGap(4),ee.rcss.align.center]},[r]);if(!l)return null;if(0===l.count)return(0,n.jsxs)(Y.View,{css:u,children:[(0,n.jsx)(tn.default,{size:24}),(0,n.jsx)(K.Text,{color:s,multiline:!1,children:"Server Authored"})]});var d=l.changes[l.version];if(!l.users)return(0,n.jsxs)(Y.View,{css:u,children:[(0,n.jsx)(q.Avatar,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),a?null:(0,n.jsx)(K.Text,{color:s,multiline:!1,children:"Unknown"})]});var f=l.users[d.userId];if(!f)if(d.timestamp>16546464e5)return(0,n.jsxs)(Y.View,{css:u,children:[(0,n.jsx)(tn.default,{size:24}),a?null:(0,n.jsx)(K.Text,{color:s,multiline:!1,children:"Server Authored"})]});else return(0,n.jsxs)(Y.View,{css:u,children:[(0,n.jsx)(q.Avatar,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),a?null:(0,n.jsx)(K.Text,{color:s,multiline:!1,children:"Unknown"})]});return(0,n.jsxs)(Y.View,{css:u,children:[(0,n.jsx)(q.Avatar,{size:24,src:f.image,username:f.username}),a?null:(0,n.jsx)(K.Text,{color:s,multiline:!1,children:f.username})]})}e.s(["default",()=>tr],81621);var ti=e.i(569384),ta=e.i(973245);function to(){var e=(0,ti._)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return to=function(){return e},e}function ts(){var e=(0,ti._)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return ts=function(){return e},e}var tl=(0,ta.gql)(to());(0,ta.gql)(ts()),e.s(["WorkspaceHistory2UsersDocument",()=>tl],33297)},605976,e=>{"use strict";var t=e.i(276385),n=e.i(485273),r=e.i(389959),i=e.i(548747),a=e.i(372014),o=e.i(919449),s=e.i(81621),l=e.i(181227),u=e.i(167626),c=e.i(530658),d=e.i(442121),f=e.i(529810),p=e.i(297083),h=e.i(633600),m=e.i(346715),g=e.i(817556),x=e.i(830675),y=e.i(33297),b=e.i(810394),w=e.i(399119),_=e.i(904851),k=e.i(445789),S=function(e){function t(e){var n;return(0,_._)(this,t),(n=(0,w._)(this,t,[e])).name="UserError",n}return(0,k._)(t,e),t}((0,e.i(463348)._)(Error));function C(e,t,n){return new Promise(function(r,i){try{var a=e.watchTextFile(t,{onReady:function(e){return(0,p._)(function(){var t,o;return(0,g._)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,n(e)];case 1:return t=s.sent(),r(t),[3,3];case 2:return o=s.sent(),i(o),[3,3];case 3:return a(),[2]}})})()}})}catch(e){i(e)}})}var j=b.USER_LOOKUP_LIMIT,T=e.i(627254),E=e.i(271280),R=e.i(416746),I=e.i(222342),A=e.i(967629),P=e.i(173703),D=e.i(613355),O=e.i(140487),N=e.i(739521),M=e.i(396776),L=e.i(960178),B=e.i(257811),V=e.i(625484),F=(0,A.css)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function U(e){var n=e.onCloseHistory,i=(0,I.default)().showError,a=(0,c._)((0,r.useState)(!1),2),o=a[0],d=a[1],m=(0,c._)((0,r.useState)(!1),2),y=m[0],b=m[1],w=(0,f.default)().fs,_=(0,l.useHistoryState)(),k=(0,T.useHistoryBSOD)(),j="Reset",A=!0;return _?0===_.count?(j="No history",A=!0):y||o?(j="Resetting...",A=!0):_.playing?(j="Playing...",A=!0):_.version===_.count-1?(j="Viewing latest",A=!0):(j="Reset editor to here",A=!1):(j="Loading...",A=!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O.Button,{text:j,disabled:A,onClick:function(){return d(!0)},colorway:"primary",iconLeft:(0,t.jsx)(E.default,{})}),_&&0!==_.count&&(0,t.jsx)(N.Modal,{isOpen:o,onRequestClose:function(){y||d(!1)},children:(0,t.jsxs)(V.View,{gap:24,children:[(0,t.jsx)(L.Header,{variant:"headerDefault",level:2,children:"Reset file version"}),(0,t.jsx)(P.ShadesSurface,{css:[D.rcss.borderRadius(8)],px:16,py:12,children:(0,t.jsxs)("dl",{css:F,children:[(0,t.jsx)("dt",{children:"File"}),(0,t.jsx)("dd",{children:_.filePath}),(0,t.jsx)("dt",{children:"Version"}),(0,t.jsxs)("dd",{children:[_.version+1,(0,t.jsxs)("span",{css:[D.rcss.color.foregroundDimmest],children:[(0,t.jsx)("span",{css:D.rcss.mx(8),children:"/"}),_.count]})]}),(0,t.jsx)("dt",{children:"Date"}),(0,t.jsx)("dd",{children:(0,t.jsx)(B.Timestamp,{date:_.changes[_.version].timestamp,dateFormat:"absolute"})}),(0,t.jsx)("dt",{children:"Author"}),(0,t.jsx)("dd",{children:(0,t.jsx)(s.default,{})})]})}),(0,t.jsx)(M.StatusBanner,{icon:(0,t.jsx)(R.default,{}),colorway:"positive",text:"Resetting is non-destructive. The reset content will become a new version at the end of history. You can always go back to the version you just had."}),(0,t.jsxs)(V.View,{row:!0,gap:8,justify:"end",children:[(0,t.jsx)(O.Button,{text:"Cancel",disabled:y,onClick:function(){return d(!1)}}),(0,t.jsx)(O.Button,{text:y?"Resetting Version...":"Reset Version",disabled:y,colorway:"primary",onClick:function(){return(0,p._)(function(){var e,t;return(0,g._)(this,function(r){switch(r.label){case 0:if(!_||!w||y)return[2];r.label=1;case 1:var a;return r.trys.push([1,3,4,5]),b(!0),(0,T.historyEvent)("versionRestored"),e=_.filePath,[4,(a=_.version+1,C(w,e,function(t){var n=t.fetchChanges,r=t.writeChange,i=t.version;return(0,p._)(function(){var t,o,s,l,u;return(0,g._)(this,function(c){switch(c.label){case 0:if(a>i)throw Error("Cannot reset to a version that does not exist");if(a===i)return[2];t=null,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,n(1,i,"")];case 2:if((o=c.sent()).isDisposed)throw new S("File deleted or removed.");return t=o.result,[3,4];case 3:throw c.sent(),new S("Something went wrong while resetting the file. It is possible that a bad connection is to blame. Please try again.");case 4:l=(s=(0,h._)(t.slice(a,t.length).reverse()))[0],u=s.slice(1).reduce(function(e,t){return e.compose(t.invertedChanges)},l.invertedChanges);try{r(u)}catch(e){throw x.captureException(e),new S("Something went wrong while resetting the file. Maybe the file changed while you were restoring it? Please try again.")}return[4,w.flush(new Set([e]))];case 5:return c.sent(),[2]}})})()}))];case 2:return r.sent(),n(),[3,5];case 3:if(t=r.sent(),(0,u._)(t,S))return i(t.message),[2];return k(t,"restore"),[3,5];case 4:return d(!1),b(!1),[7];case 5:return[2]}})})()},iconLeft:(0,t.jsx)(E.default,{})})]})]})})]})}var G=e.i(337761),$=e.i(480028);let H=(0,r.forwardRef)(function(e,n){var i=(0,l.useHistoryState)(),a=(0,r.useRef)(null);(0,r.useImperativeHandle)(n,function(){return a.current}),i&&a.current&&(a.current.setAttribute("aria-valuemin","1"),a.current.setAttribute("aria-valuemax",String(i.count)),a.current.setAttribute("aria-valuenow",String(i.version+1)));var o=(0,r.useMemo)(function(){return(0,t.jsx)("div",{ref:a,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:$.tokens.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat($.tokens.foregroundDefault," inset")}}})},[]);return i&&i.count>1?o:null}),z=(0,r.forwardRef)(function(e,n){var i=(0,l.useHistoryState)(),a=(0,r.useMemo)(function(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,t.jsx)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:$.tokens.backgroundHighest,borderRadius:"2px"},children:(0,t.jsx)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:$.tokens.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})},[n]),o=(0,r.useMemo)(function(){return(0,t.jsx)("div",{ref:n,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,t.jsx)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:$.tokens.backgroundHighest,borderRadius:"2px"}})})},[n]);return i&&i.count>1?a:o});var W=["ArrowLeft","ArrowRight","Home","End"];function q(){var e=(0,l.useHistoryState)(),n=(0,l.useSetHistoryState)(),i=(0,c._)((0,r.useState)(!1),2),a=i[0],o=i[1],s=(0,r.useRef)(null),u=(0,r.useRef)(null),d=(0,r.useRef)(null),f=function(e){(0,G.styleSet)(s,"--scrubber-transition-time",e)},p=function(e){(0,G.styleSet)(s,"--scrubber-progress",e.toString())};return e&&!a&&(p(e.version/(e.count-1)),e.playing?f("50ms"):f("100ms")),(0,r.useEffect)(function(){if(e&&u.current&&d.current&&!a){var t=u.current,r=d.current,i=function(i){if(0===i.button){o(!0),r.focus();var a=t.getBoundingClientRect(),s=r.getBoundingClientRect(),l=a.width,u=s.width,c=i.target===t?u/2:i.clientX-s.left,d=null,h=function(t){var r=Math.max(0,Math.min(1,(t-a.left-c)/(l-u)));r!==d&&(d=r,p(r),n({version:Math.round(r*(e.count-1)),playing:!1}))};h(i.clientX);var m=function(e){f("0ms"),h(e.clientX),e.preventDefault(),e.stopPropagation()},g=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),f("100ms"),o(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",g),window.addEventListener("pointercancel",g),i.preventDefault(),i.stopPropagation()}};return t.addEventListener("pointerdown",i),r.addEventListener("pointerdown",i),function(){t.removeEventListener("pointerdown",i),r.removeEventListener("pointerdown",i)}}},[e,n,a]),(0,r.useEffect)(function(){if(e&&d.current&&!a){var t=d.current,r=function(t){if(e&&W.includes(t.key)){var r=t.shiftKey?10:1,i=e.version,a=e.count-1,o=Math.max(0,i-r),s=Math.min(a,i+r),l=null;switch(t.key){case"ArrowLeft":l=o;break;case"ArrowRight":l=s;break;case"Home":l=0;break;case"End":l=a}null!==l&&(n({version:l,playing:!1}),t.preventDefault(),t.stopPropagation())}};return t.addEventListener("keydown",r),function(){t.removeEventListener("keydown",r)}}},[e,n,a]),(0,r.useMemo)(function(){return(0,t.jsxs)(V.View,{innerRef:s,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,t.jsx)(z,{ref:u}),(0,t.jsx)(H,{ref:d})]})},[])}var K=e.i(656077),Y=e.i(927600);function Q(){var e=(0,l.useHistoryState)(),n=0,r=0;e&&0!==e.count&&(n=e.version+1,r=e.count);var i=e?"default":"dimmer";return(0,t.jsxs)(V.View,{row:!0,gap:4,justify:"space-between",children:[(0,t.jsx)(L.Text,{css:{minWidth:"2ch",textAlign:"right"},color:i,multiline:!1,children:n}),(0,t.jsx)(L.Text,{css:{width:"1ch",textAlign:"center"},color:"dimmer",multiline:!1,children:"/"}),(0,t.jsx)(L.Text,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",multiline:!1,children:r})]})}var X=e.i(961970),Z=e.i(803640);function J(e){if(e<0)throw Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}var ee=e.i(136540);function et(){var e,n,i,a,o=(0,l.useHistoryState)(),s=(0,l.useSetHistoryState)(),u=(null!=(n=null==o||null==(e=o.changes)?void 0:e.length)?n:1)-1,d=null!=(i=null==o?void 0:o.version)?i:0,f=null!=(a=null==o?void 0:o.playing)&&a,p=!o||0===o.count,h=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:J,a=(0,c._)((0,r.useState)(!1),2),o=a[0],s=a[1],l=(0,r.useCallback)(function(){t(1)},[t]),u=(0,r.useCallback)(function(){e+1>n?s(!1):t(e+1)},[t,e,n]);return(0,r.useEffect)(function(){if(o){var e=setTimeout(function(){u()},i(n));return function(){return clearTimeout(e)}}},[o,u,i,n]),{isPlaying:o,start:function(){s(!0)},stop:function(){s(!1)},reset:l}}(d,function(e){return s({version:e})},u),m=h.isPlaying,g=h.start,x=h.stop;(0,r.useEffect)(function(){m&&!f?x():!m&&f&&g()},[f,m,g,x]);var y="Loading...";return o&&(m?y="Pause":o.version===o.count-1?y="Play file history from beginning":0===o.version?y="Play file history":o.version>0&&(y="Play file history from here")),(0,t.jsx)(ee.IconButton,{alt:y,size:24,disabled:p,onClick:function(){d===u?s({version:0,playing:!0}):s({playing:!f})},children:m?(0,t.jsx)(X.default,{}):(0,t.jsx)(Z.default,{})})}function en(){return(0,t.jsxs)(V.View,{row:!0,gap:4,align:"center",children:[(0,t.jsx)(et,{}),(0,t.jsx)(er,{}),(0,t.jsx)(Q,{}),(0,t.jsx)(ei,{})]})}function er(){var e=(0,l.useHistoryState)(),n=(0,l.useSetHistoryState)(),r=!e||0===e.version||0===e.count;return(0,t.jsx)(ee.IconButton,{alt:"Move backwards one version",size:24,disabled:r,onClick:function(){e&&e.version>0&&n({version:e.version-1})},children:(0,t.jsx)(K.default,{})})}function ei(){var e=(0,l.useHistoryState)(),n=(0,l.useSetHistoryState)(),r=!e||e.version===e.count-1||0===e.count;return(0,t.jsx)(ee.IconButton,{alt:"Move forwards one version",size:24,disabled:r,onClick:function(){e&&e.version<e.count-1&&n({version:e.version+1})},children:(0,t.jsx)(Y.default,{})})}function ea(e){var h,x,b,w,_,k=e.filePath,S=e.onCloseHistory,E="/replEnvironmentMobile"===(0,n.useRouter)().pathname,R=E?D.rcss.borderRadius(0):D.rcss.borderRadius(0,0,8,8),I=(0,l.useHistoryState)(),A=(0,l.useSetHistoryState)(),O=(0,l.useClearHistoryState)(),N=(0,T.useHistoryBSOD)(),M=(x=(h=(0,c._)((0,r.useState)({data:null,loading:!0,error:null,handledError:null}),2))[0],b=h[1],w=(0,f.default)().fs,_=(0,d.useApolloClient)(),(0,r.useEffect)(function(){if(!k)return void b({data:null,loading:!1,error:null,handledError:null});b({data:null,loading:!0,error:null,handledError:null});var e=!1;return(0,p._)(function(){var e,t,n;return(0,g._)(this,function(r){switch(r.label){case 0:return[4,C(w,k,function(e){var t=e.fetchChanges,n=e.version;return(0,p._)(function(){return(0,g._)(this,function(e){return 0===n?[2,{isDisposed:!1,result:[]}]:[2,t(1,n,"")]})})()})];case 1:var i;if((e=r.sent()).isDisposed)return[2,{data:null,handledError:"File deleted or removed."}];return[4,(i=t=e.result,(0,p._)(function(){var e,t,n,r,a,o,s,l,u,c,d,f,p,h,x,b,w,k;return(0,g._)(this,function(g){switch(g.label){case 0:e=new Set,t=!0,n=!1,r=void 0;try{for(a=i[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)(s=o.value).userId&&e.add(s.userId)}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}if(0===e.size)return[2,{}];if(e.size>=j)return[2,"too_many_users"];return[4,_.query({query:y.WorkspaceHistory2UsersDocument,variables:{ids:Array.from(e)}})];case 1:if(u=(l=g.sent()).data,c=l.error)throw c;d=u.currentUser?[u.currentUser].concat((0,m._)(u.usersByIds)):u.usersByIds,f={},p=!0,h=!1,x=void 0;try{for(b=d[Symbol.iterator]();!(p=(w=b.next()).done);p=!0)f[(k=w.value).id]={id:k.id,username:k.username,image:k.image}}catch(e){h=!0,x=e}finally{try{p||null==b.return||b.return()}finally{if(h)throw x}}return[2,f]}})})())];case 2:if("too_many_users"===(n=r.sent()))return[2,{data:{changes:t,users:null},handledError:null}];return[2,{data:{changes:t,users:n},handledError:null}]}})})().then(function(t){var n=t.data,r=t.handledError;if(!e){if(r)return void b({data:null,loading:!1,error:null,handledError:r});b({data:n,loading:!1,error:null,handledError:null})}}).catch(function(t){e||((0,u._)(t,Error)||(t=Error(t)),b({data:null,loading:!1,error:t,handledError:null}))}),function(){e=!0}},[k,w,_]),x),B=M.data,F=M.loading,G=M.error;return(0,r.useEffect)(function(){return G?void N(G,"history2-index",{filePath:k}):B&&!F?(A({filePath:k,changes:B.changes,users:B.users}),(0,T.historyEvent)("historyLoaded"),function(){O()}):void 0},[k,B,F,G,N,A,O]),(0,t.jsxs)(V.View,{css:[D.rcss.zIndex(3),D.rcss.overflow("hidden"),R,D.rcss.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat($.tokens.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],p:8,gap:8,children:[(0,t.jsxs)(P.ShadesSurface,{css:[D.rcss.position.relative,D.rcss.colWithGap(4),D.rcss.px(12),D.rcss.pt(8),D.rcss.pb(8),D.rcss.align.center,D.rcss.borderRadius(8),D.rcss.overflow("hidden")],children:[(0,t.jsx)(q,{}),(0,t.jsxs)(V.View,{css:[D.rcss.display.flex,D.rcss.flex.row,D.rcss.align.center,D.rcss.justify.spaceBetween,D.rcss.width("100%")],children:[(0,t.jsx)(en,{}),I&&I.count>0?(0,t.jsxs)(V.View,{row:!0,gap:4,align:"center",children:[(0,t.jsx)(o.default,{}),F||E?null:(0,t.jsx)(L.Text,{color:"dimmer",multiline:!1,children:""}),(0,t.jsx)(s.default,{color:"dimmer",hideName:E,reversed:!0})]}):null]})]}),(0,t.jsxs)(V.View,{css:[D.rcss.display.flex,D.rcss.flex.row],children:[(0,t.jsx)(eo,{justify:"flex-start",children:(0,t.jsx)(a.default,{})}),(0,t.jsxs)(eo,{justify:"flex-end",children:[(0,t.jsx)(i.default,{onClose:S}),(0,t.jsx)(U,{onCloseHistory:S})]})]})]})}function eo(e){var n=e.children,r=e.justify;return(0,t.jsx)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:r,columnGap:$.tokens.space8,minWidth:0},children:n})}e.s(["default",()=>ea],605976)},975068,e=>{e.v({centeredMessage:"ConnectorsPane-module__dm_Zsq__centeredMessage",manageConnectionContainer:"ConnectorsPane-module__dm_Zsq__manageConnectionContainer",searchControlsDesktop:"ConnectorsPane-module__dm_Zsq__searchControlsDesktop",searchControlsMobile:"ConnectorsPane-module__dm_Zsq__searchControlsMobile",tabPanels:"ConnectorsPane-module__dm_Zsq__tabPanels",tabs:"ConnectorsPane-module__dm_Zsq__tabs"})},851581,e=>{e.v({container:"DatabaseItem-module__43v9-W__container",containerNotClickable:"DatabaseItem-module__43v9-W__containerNotClickable",containerSelected:"DatabaseItem-module__43v9-W__containerSelected",skeletonText:"DatabaseItem-module__43v9-W__skeletonText"})},902071,e=>{e.v({databaseGrid:"DatabaseOverviewPage-module__9pcY1q__databaseGrid",skeletonText:"DatabaseOverviewPage-module__9pcY1q__skeletonText",wrapper:"DatabaseOverviewPage-module__9pcY1q__wrapper"})},579134,e=>{e.v({productionDatabaseTourContent:"DatabaseSelector-module__vw1Uoq__productionDatabaseTourContent"})},61313,e=>{e.v({selectorBar:"DatabaseSelectorBar-module__qW8E_q__selectorBar"})},944967,(e,t,n)=>{var r=e.r(365738);!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var o=arguments[t];o&&(e=a(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if((void 0===e?"undefined":r._(e))!=="object")return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var o in e)n.call(e,o)&&e[o]&&(t=a(t,o));return t}(o)))}return e}function a(e,t){return t?e?e+" "+t:e+t:e}if(t.exports)i.default=i,t.exports=i;else if("function"==typeof define&&"object"===r._(define.amd)&&define.amd)void 0!==i&&e.v(i);else window.classNames=i}()},3382,e=>{e.v({"skeleton-delay-fadein":"DatabaseOverviewTab2-module__pDjseq__skeleton-delay-fadein",skeletonDelayed:"DatabaseOverviewTab2-module__pDjseq__skeletonDelayed",skeletonIcon:"DatabaseOverviewTab2-module__pDjseq__skeletonIcon",skeletonItem:"DatabaseOverviewTab2-module__pDjseq__skeletonItem",skeletonName:"DatabaseOverviewTab2-module__pDjseq__skeletonName",skeletonStorage:"DatabaseOverviewTab2-module__pDjseq__skeletonStorage",tableGrid:"DatabaseOverviewTab2-module__pDjseq__tableGrid"})},877768,e=>{e.v({envVarLabel:"DatabaseEnvVariable-module__ZGGlvq__envVarLabel"})},67810,e=>{e.v({content:"DatabaseTabs-module__YqHQRG__content",overviewTabPanel:"DatabaseTabs-module__YqHQRG__overviewTabPanel",settingsTabPanel:"DatabaseTabs-module__YqHQRG__settingsTabPanel",studioTabPanel:"DatabaseTabs-module__YqHQRG__studioTabPanel",tabList:"DatabaseTabs-module__YqHQRG__tabList",tabPanels:"DatabaseTabs-module__YqHQRG__tabPanels",wrapper:"DatabaseTabs-module__YqHQRG__wrapper"})},467495,e=>{e.v({divider:"WorkspacePreferencesSection-module__Y7UL9G__divider"})},846445,e=>{e.v({root:"index-module__nGOWIa__root",tabPanel:"index-module__nGOWIa__tabPanel"})},110066,637972,224986,466638,138071,827305,275222,779284,401455,921009,697851,494948,932287,e=>{"use strict";var t,n,r,i,a,o=e.i(878420),s=e.i(64386),l=e.i(530658),u=e.i(276385),c=e.i(389959),d=e.i(960933),f=e.i(862927),p=e.i(541793),h=e.i(271280),m=e.i(205104),g=e.i(125674),x=e.i(185511),y=e.i(827759),b=e.i(605976),w=e.i(179302),_=e.i(486701),k=e.i(399119),S=e.i(904851),C=e.i(90659),j=e.i(721281),T=e.i(445789),E=e.i(753950),R=e.i(433772),I=e.i(167626),A=e.i(960308),P=(0,e.i(275072).StateEffectField)();function D(e){if(!(0,I._)(e,E.Transaction))return{compareTo:e.field(P.state,!1),changed:!1};var t=e.state.field(P.state,!1),n=e.startState.field(P.state,!1)!==t;return{compareTo:t,changed:n}}function O(e,t){e.state.field(P.state,!1)!==t&&e.dispatch({effects:P.effect.of(t)})}var N=E.StateField.define({create:function(){return null},update:function(e,t){var n=D(t),r=n.compareTo,i=n.changed;if(!r)return null;if(!t.docChanged&&!i)return e;var a=t.state.doc.toString();return new A.LineBasedDiff(a,r)}}),M=null!=(i=globalThis.requestIdleCallback)?i:globalThis.requestAnimationFrame,L=null!=(a=globalThis.cancelIdleCallback)?a:globalThis.cancelAnimationFrame,B=w.Decoration.line({class:"cm-diff-deleted"}),V=function(e){function t(e,n){var r;return(0,S._)(this,t),r=(0,k._)(this,t),(0,j._)(r,"insertion",void 0),(0,j._)(r,"highlight",void 0),(0,j._)(r,"pendingHighlight",void 0),r.insertion=e,r.highlight=n,r}return(0,T._)(t,e),(0,C._)(t,[{key:"destroy",value:function(){this.pendingHighlight&&L(this.pendingHighlight)}},{key:"toDOM",value:function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e}},{key:"eq",value:function(e){return!e.pendingHighlight&&this.insertion===e.insertion}},{key:"updateDOM",value:function(e){var t=this;return this.pendingHighlight&&(L(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=M(function(){if(t.highlight){t.pendingHighlight=null;try{var n=t.highlight();e.innerHTML="",e.append(n)}catch(e){}}})),!0}}]),t}(w.WidgetType),F=E.StateField.define({create:function(){return w.Decoration.none},update:function(e,t){var n=t.state.field(N,!1);if(!n)return w.Decoration.none;var r=D(t).changed;if(!t.docChanged&&!r)return e.map(t.changes);var i=[],a=function(e,t){i.push({from:e,to:e,value:t})},o=n.startInsertions();if(o){var s=!0,l=!1,u=void 0;try{for(var c,d=o[Symbol.iterator]();!(s=(c=d.next()).done);s=!0)!function(){var e=c.value,n=new V(e.content,function(){return U(t.state,e.content)});a(0,w.Decoration.widget({widget:n,side:-1,block:!0}))}()}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}var f=!0,p=!1,h=void 0;try{for(var m,g=n.lines()[Symbol.iterator]();!(f=(m=g.next()).done);f=!0){var x=m.value;if(x.isDeleted&&a(x.from,B),x.insertions){var y=!0,b=!1,_=void 0;try{for(var k,S=x.insertions[Symbol.iterator]();!(y=(k=S.next()).done);y=!0)!function(){var e=k.value,n=new V(e.content,function(){return U(t.state,e.content)});a(x.to,w.Decoration.widget({widget:n,side:1,block:!0}))}()}catch(e){b=!0,_=e}finally{try{y||null==S.return||S.return()}finally{if(b)throw _}}}}}catch(e){p=!0,h=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}return w.Decoration.set(i,!0)},provide:function(e){return w.EditorView.decorations.from(e)}});function U(e,t){var n,r=document.createDocumentFragment(),i=null==(n=e.facet(_.language))?void 0:n.parser;if(!i){var a=document.createElement("span");return a.textContent=t,r.append(a),r}var o=i.parse(t),s=0;if((0,R.highlightTree)(o,{style:function(t){return(0,_.highlightingFor)(e,t)}},function(e,n,i){if(e>s){var a=document.createElement("span");a.textContent=t.slice(s,e),r.append(a)}var o=document.createElement("span");o.className=i,o.textContent=t.slice(e,n),r.append(o),s=n}),s<t.length){var l=document.createElement("span");l.textContent=t.slice(s),r.append(l)}return r}var G=e.i(346715),$=function(e){function t(e){var n;return(0,S._)(this,t),n=(0,k._)(this,t),(0,j._)(n,"line",void 0),n.line=e,n}return(0,T._)(t,e),(0,C._)(t,[{key:"eq",value:function(e){return this.line===e.line}},{key:"toDOM",value:function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e}}]),t}(w.GutterMarker),H=function(e){function t(e,n){var r;return(0,S._)(this,t),r=(0,k._)(this,t),(0,j._)(r,"lines",void 0),(0,j._)(r,"preceding",void 0),r.elementClass="cm-diff-gutter-block",r.lines=e,n&&(r.preceding=n),r}return(0,T._)(t,e),(0,C._)(t,[{key:"eq",value:function(e){var t,n,r,i;if((null==(t=this.lines)?void 0:t.length)!==(null==e||null==(n=e.lines)?void 0:n.length)||(null==(r=this.preceding)?void 0:r.length)!==(null==e||null==(i=e.preceding)?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var a=0;a<this.preceding.length;a++){var o=this.preceding[a],s=e.preceding[a];if(o.height!==s.height||o.left!==s.left||o.right!==s.right)return!1}if(this.lines&&e.lines)for(var l=0;l<this.lines.length;l++){var u=this.lines[l],c=e.lines[l];if(u.height!==c.height||u.left!==c.left||u.right!==c.right)return!1}return!0}},{key:"toDOM",value:function(){var e=this,t=document.createElement("div");if(this.preceding){var n=this.preceding.slice().reverse(),r=0,i=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;r+=u.height;var c=this.piece(u);c.style.position="absolute",c.style.top="-".concat(r,"px"),t.prepend(c)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}var d=this.lines.map(function(t){return e.piece(t)});return t.append.apply(t,(0,G._)(d)),t}},{key:"piece",value:function(e){var t=e.height,n=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==n&&(i.innerText=n.toString());var a=document.createElement("span");a.className="cm-diff-gutter-part",null!==r&&(a.innerText=r.toString());var o=document.createElement("div");return o.className="cm-diff-gutter-element",o.style.height="".concat(t,"px"),o.append(i,a),(null===n||null===r)&&(null===r&&o.classList.add("cm-diff-gutter-deleted"),null===n&&o.classList.add("cm-diff-gutter-inserted")),o}}]),t}(w.GutterMarker),z=(0,w.gutter)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var t=e.viewportLineBlocks,n=[],r=D(e.state).compareTo,i=e.state.field(N,!1),a=function(e,t){n.push({from:e,to:e,value:t})};if(!r||!i){var o=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value,f=e.state.doc.lineAt(d.from).number;if(d.type===w.BlockType.Text)a(d.from,new $(f));else if(Array.isArray(d.type)){var p=!0,h=!1,m=void 0;try{for(var g,x=d.type[Symbol.iterator]();!(p=(g=x.next()).done);p=!0){var y=g.value;if(y.type===w.BlockType.Text){a(y.from,new $(f));break}}}catch(e){h=!0,m=e}finally{try{p||null==x.return||x.return()}finally{if(h)throw m}}}}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}return E.RangeSet.of(n,!0)}var b=!0,_=!1,k=void 0;try{for(var S,C=t[Symbol.iterator]();!(b=(S=C.next()).done);b=!0){var j=S.value,T=[],R=e.state.doc.lineAt(j.from).number,I=i.line(R);if(I){var A=e.defaultLineHeight,P=I.offset,O=I.isDeleted,M=I.insertions,L=1===R?i.startInsertions():null,B=L?L.length:0,V=L?[]:null;if(!(Array.isArray(j.type)&&j.type.length>=B+(null!=(z=null==M?void 0:M.length)?z:0)+1)){if(L&&V){var F=!0,U=!1,G=void 0;try{for(var z,W,q=L[Symbol.iterator]();!(F=(W=q.next()).done);F=!0){var K=W.value;V.push({height:A,left:null,right:K.number})}}catch(e){U=!0,G=e}finally{try{F||null==q.return||q.return()}finally{if(U)throw G}}}if(T.push({height:j.height,left:R,right:O?null:R+P}),M){var Y=!0,Q=!1,X=void 0;try{for(var Z,J=M[Symbol.iterator]();!(Y=(Z=J.next()).done);Y=!0){var ee=Z.value;T.push({height:A,left:null,right:ee.number})}}catch(e){Q=!0,X=e}finally{try{Y||null==J.return||J.return()}finally{if(Q)throw X}}}a(j.from,new H(T,V));continue}for(var et=0;et<j.type.length;et++){var en=j.type[et];if((null==en?void 0:en.type)===w.BlockType.Text){if(L&&V)for(var er=0;er<L.length;er++){var ei,ea=L[er],eo=j.type[et-er-1];V.push({height:null!=(ei=null==eo?void 0:eo.height)?ei:A,left:null,right:ea.number})}if(T.push({height:en.height,left:R,right:O?null:R+P}),M)for(var es=0;es<M.length;es++){var el,eu=M[es],ec=j.type[et+es+1];T.push({height:null!=(el=null==ec?void 0:ec.height)?el:A,left:null,right:eu.number})}break}}a(j.from,new H(T,V))}}}catch(e){_=!0,k=e}finally{try{b||null==C.return||C.return()}finally{if(_)throw k}}return E.RangeSet.of(n,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var t=!0,n=!1,r=void 0;try{for(var i,a=e.transactions[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(D(o).changed)return!0}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1},initialSpacer:function(e){return new $(e.state.doc.lines)},updateSpacer:function(e,t){var n=t.state.doc.lines;return D(t.state).compareTo?new H([{height:0,left:n,right:n}]):new $(n)}}),W="#0053A644",q="#c93c3733",K=[w.EditorView.theme({".cm-diff-inserted":{backgroundColor:W},".cm-diff-deleted":{backgroundColor:q},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:W,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:q,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),P.state,N,F,z,(0,_.foldGutter)({openText:"",closedText:""})],Y=e.i(463348),Q=e.i(817556),X=((t={})[t.Insertion=0]="Insertion",t[t.Deletion=1]="Deletion",t),Z=function(){function e(t){(0,S._)(this,e),(0,j._)(this,"map",new Map),(0,j._)(this,"duration",void 0),this.duration=t}return(0,C._)(e,[{key:"set",value:function(e,t,n,r,i){var a=this.map.get(e);a||(a=new Map,this.map.set(e,a)),a.set(t,{from:e,to:t,time:n,type:r,cursor:i})}},{key:"get",value:function(e,t){var n=this.map.get(e);if(n)return n.get(t)}},{key:"update",value:function(t){var n=Date.now(),r=new e(this.duration),i=!0,a=!1,o=void 0;try{for(var s,l=this[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;if(!(n-u.time>this.duration)){var c=t.changes.mapPos(u.from,-1,E.MapMode.TrackDel),d=t.changes.mapPos(u.to,-1,E.MapMode.TrackDel);if(null!==c&&null!==d){var f=u.cursor;t.docChanged&&(f=!1),r.set(c,d,u.time,u.type,f)}}}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return t.changes.iterChangedRanges(function(e,t,i,a){r.set(i,a,n,+(i===a),!0)},!0),r}},{key:"cursors",value:function(){var e,t,n,r,i,a,o;return(0,Q._)(this,function(s){switch(s.label){case 0:e=!0,t=!1,n=void 0,s.label=1;case 1:s.trys.push([1,6,7,8]),r=this[Symbol.iterator](),s.label=2;case 2:if(e=(i=r.next()).done)return[3,5];if(!(a=i.value).cursor)return[3,4];return[4,{type:a.type,pos:a.to}];case 3:s.sent(),s.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return o=s.sent(),t=!0,n=o,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}})}},{key:Symbol.iterator,value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this.map.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=!0,l=!1,u=void 0;try{for(var c,d=o.values()[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value;e.push(f)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e[Symbol.iterator]()}}]),e}(),J=function(){function e(t){var n=this;(0,S._)(this,e),(0,j._)(this,"view",void 0),(0,j._)(this,"overlay",void 0),(0,j._)(this,"elements",void 0),(0,j._)(this,"measureRequest",void 0),this.view=t,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],t=n.view.scrollDOM.getBoundingClientRect(),r=n.view.scrollDOM.scrollTop,i=n.view.scrollDOM.scrollLeft,a=!0,o=!1,s=void 0;try{for(var l,u=n.elements.values()[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=c.dom,f=c.pos,p=c.offsetX,h=c.offsetY,m=n.view.coordsAtPos(f),g=n.view.lineBlockAt(f);if(!m){e.push({dom:d,x:null,y:null});continue}var x=g.top-r+t.top+n.view.documentPadding.top,y=Math.round((m.top-x)/n.view.defaultLineHeight)*n.view.defaultLineHeight+x,b=i+m.left-t.left+p,w=r+y-t.top+h;e.push({dom:d,x:b,y:w})}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return e},write:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)!function(){var e=i.value,t=e.dom,n=e.x,r=e.y;if(null===n||null===r)return t.style.visibility="hidden",t.style.transition="none";t.style.visibility="",t.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),t.style.transition.startsWith("none")&&requestAnimationFrame(function(){t.style.transition=""})}()}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}}return(0,C._)(e,[{key:"destroy",value:function(){this.view.scrollDOM.removeChild(this.overlay)}},{key:"map",value:function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var t=Array.from(this.elements.values()),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=e.changes.mapPos(s.pos,-1,E.MapMode.TrackDel);if(!l){this.removeElement(s.dom);continue}s.pos=l}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}}},{key:"addElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:t,offsetX:n,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}}},{key:"removeElement",value:function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))}},{key:"updateElement",value:function(e,t){var n=t.pos,r=t.offsetX,i=t.offsetY,a=this.elements.get(e);a&&(void 0!==n&&(a.pos=n),void 0!==r&&(a.offsetX=r),void 0!==i&&(a.offsetY=i),this.view.requestMeasure(this.measureRequest))}},{key:"clear",value:function(){this.elements.clear(),this.overlay.innerHTML=""}}]),e}(),ee="cm-flash-insertion",et="cm-flash-deletion",en="cm-flash-element",er=w.EditorView.theme((0,j._)({},".".concat(ee,", .").concat(et),{display:"inline-block"})),ei=function(e){function t(){var e;return(0,S._)(this,t),e=(0,k._)(this,t,arguments),(0,j._)(e,"animation",void 0),e}return(0,T._)(t,e),(0,C._)(t,[{key:"type",get:function(){return this.classList.contains(ee)?X.Insertion:X.Deletion}},{key:"isPlaying",get:function(){var e;return(null==(e=this.animation)?void 0:e.playState)==="running"}},{key:"isNested",value:function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if((0,I._)(e,t)&&e.type===this.type)return!0;e=e.parentElement}return!1}},{key:"stop",value:function(){var e,t;null==(t=this.animation)||null==(e=t.cancel)||e.call(t)}},{key:"play",value:function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var t=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(t>1e3)){var n=this.type===X.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)";this.animate&&(this.animation=this.animate({backgroundColor:e?[n,n,"transparent"]:["transparent",n,"transparent"],offset:[0,.05,1]},{id:"cm-flash-anim",duration:1e3,easing:"ease-in-out",delay:-t}))}}}},{key:"connectedCallback",value:function(){this.play()}},{key:"attributeChangedCallback",value:function(e,t,n){"data-time"===e&&n&&this.play()}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),t}((0,Y._)(HTMLElement));customElements.get(en)||customElements.define(en,ei);var ea=function(){function e(t){(0,S._)(this,e),(0,j._)(this,"view",void 0),(0,j._)(this,"prevFlashes",void 0),(0,j._)(this,"decorations",void 0),(0,j._)(this,"hasRenderedOnce",void 0),(0,j._)(this,"overlay",void 0),this.view=t,this.prevFlashes=new Z(1e3),this.decorations=w.Decoration.set([]),this.hasRenderedOnce=!1,this.overlay=new J(t)}return(0,C._)(e,[{key:"destroy",value:function(){this.overlay.destroy()}},{key:"update",value:function(e){if(!this.hasRenderedOnce){e.docChanged&&(this.hasRenderedOnce=!0);return}var t=this.prevFlashes.update(e),n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;switch(l.type){case X.Insertion:n.push({from:l.from,to:l.to,value:(u=l.time,w.Decoration.mark({class:ee,tagName:en,attributes:{"data-time":u.toString()}}))});break;case X.Deletion:var u,c,d=e.state.wordAt(l.from);d&&n.push({from:d.from,to:l.to,value:(c=l.time,w.Decoration.mark({class:et,tagName:en,attributes:{"data-time":c.toString()}}))})}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}this.overlay.clear();var f=this.view.defaultLineHeight.toString()+"px",p=!0,h=!1,m=void 0;try{for(var g,x=t.cursors()[Symbol.iterator]();!(p=(g=x.next()).done);p=!0){var y=g.value,b=y.type,_=y.pos,k=function(e,t){var n=e===X.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=t,r.style.borderRadius="1px",r.style.backgroundColor=n,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}(b,f);this.overlay.addElement(k,_)}}catch(e){h=!0,m=e}finally{try{p||null==x.return||x.return()}finally{if(h)throw m}}this.prevFlashes=t,this.decorations=w.Decoration.set(n,!0)}}]),e}(),eo=w.ViewPlugin.fromClass(ea,{decorations:function(e){return e.decorations}}),es=E.Prec.lowest([er,eo]),el=e.i(221250),eu=e.i(542101),ec=e.i(700170),ed=e.i(109853),ef=e.i(181227),ep=e.i(633600),eh=function(){function e(t){(0,S._)(this,e),(0,j._)(this,"changes",void 0),(0,j._)(this,"forward",void 0),(0,j._)(this,"inverted",void 0),(0,j._)(this,"locations",void 0),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var n=!0,r=!1,i=void 0;try{for(var a,o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)a=this,function(){var e=o.value,t=e.changes,n=e.invertedChanges,r=null,i=!1;t.iterChangedRanges(function(e,t,n,a){i||(r||(r=a),n!==a&&(i=!0))}),a.forward.push(t),a.inverted.push(n),a.locations.push(r)}()}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}return(0,C._)(e,[{key:"length",get:function(){return this.forward.length}},{key:"slice",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(t>this.length||n>this.length||t<0||n<0)throw Error("Invalid version range");if(t===n){if(0===this.length)return[E.ChangeSet.empty(0),null];var r=this.forward[t].newLength;return[E.ChangeSet.empty(r),null]}var i=t<n?em(this.forward.slice(t,n)):em(this.inverted.slice(n,t).reverse()),a=t<n?t:n-1,o=null!=(e=this.locations[a])?e:null;return null!==o&&o>i.newLength&&(o=i.newLength),[i,o]}},{key:"get",value:function(e){if(e>this.length||e<0)throw Error("Invalid version");return this.changes[e]}},{key:"documentFor",value:function(e){if(e>this.length||e<0)throw Error("Invalid version");if(0===this.length)return"";var t=(0,l._)(this.slice(0,e),1)[0],n=E.Text.of([""]);return t.apply(n).sliceString(0)}}]),e}();function em(e){if(0===e.length)return E.ChangeSet.empty(0);if(1===e.length)return e[0];var t=(0,ep._)(e),n=t[0],r=t.slice(1),i=n,a=!0,o=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;i=i.compose(c)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i}var eg=e.i(627254),ev=e.i(564169),ex=new ec.ReactCompartment(function(){return(0,w.scrollPastEnd)()}),ey=[es,K];function eb(e){var t,n,r,i=e.filePath,a=(0,ef.useHistoryState)(),o=(0,eu.default)(),s=o.ref,d=o.view;(0,ev.useSetCodeEditorView)(d),(0,ef.useSetHistoryDebugView)(d);var f=(0,eg.useHistoryBSOD)();t=(0,c.useMemo)(function(){return(null==a?void 0:a.changes)?new eh(a.changes):null},[null==a?void 0:a.changes]),n=(0,c.useMemo)(function(){return t?t.documentFor(t.length):null},[t]),r=(0,c.useRef)({current:-1,next:0,pending:!1}),(0,c.useEffect)(function(){if(d)return function(){r.current.pending=!1,r.current={current:-1,next:0,pending:!1}}},[d]),(0,c.useEffect)(function(){if(d&&a&&t){a.comparing?O(d,n):O(d,null);var e=r.current;e.next=a.version,e.pending||e.current===e.next||(e.pending=!0,requestAnimationFrame(function(){!1===e.pending||(e.pending=!1,d&&t&&e.current!==e.next&&(function(e,t,n,r){var i=(0,l._)(t.slice(n+1,r+1),2),a=i[0],o=i[1];if(a.length!==e.state.doc.length){var s=(0,l._)(t.slice(0,r+1),1)[0];if(s.length!==e.state.doc.length)throw Error("Unresolvable mismatch between changes and document");e.dispatch({changes:{from:0,to:e.state.doc.length}}),e.dispatch({changes:s});return}e.dispatch({changes:a,effects:o?w.EditorView.scrollIntoView(o,{yMargin:10}):void 0})}(d,t,e.current,e.next),e.current=e.next))}))}},[d,a,t,n]);var p=ex.use();return(0,u.jsx)("div",{css:ed.CodeMirrorEditorStyleRoot,children:(0,u.jsx)("div",{css:ed.CodeMirrorEditorStyleEditor,children:a&&0===a.count?(0,u.jsx)(ew,{}):(0,u.jsx)("div",{css:ed.CodeMirrorEditorStyleEditor,children:(0,u.jsx)(el.default,{ref:s,css:ed.CodeMirrorEditorStyleEditorContainer,filePath:i,extensions:[p,ey],initializing:!a,onException:function(e){f(e,"viewer-codemirror")},readOnly:!0,noHistory:!0,hideGutter:!0})})})})}function ew(){return(0,u.jsx)("div",{css:[ed.CodeMirrorEditorStyleEditor,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,u.jsx)("span",{children:"This file has no history."})})}e.i(282890);var e_=e.i(716636),ek=e.i(259493),eS=d.Type.Object({type:d.Type.Literal("history"),data:d.Type.Object({path:d.Type.Union([d.Type.String(),d.Type.Null()])})}),eC={Content:function(e){var t=e.pane,n=e.options;return(0,u.jsx)(ej,(0,s._)((0,o._)({},t.data),{performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.size;return(0,u.jsx)(h.default,{size:t})},getTitle:function(e){return e.data.path?"History - ".concat((0,m.getFileName)(e.data.path)):"History - no file open"},category:e_.PaneCategory.WorkspaceFeatures,decode:function(e){return f.Value.Decode(eS,e)}};function ej(e){var t=e.path,n=e.performPaneOperation,r=(0,l._)((0,c.useState)(function(){return(0,p.createStore)()}),1)[0],i=(0,l._)((0,c.useState)(function(){return(0,p.createStore)()}),1)[0],a=(0,x.useFileCommands)({path:t,performPaneOperation:n});(0,ek.useSetPaneBindings)(function(){if(a)return{commands:[{commands:a}]}},[a]);var o=(0,g.default)(function(){return function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})}},[t,n]);return t?(0,u.jsx)(ev.CodeEditorViewContext.Provider,{value:r,children:(0,u.jsx)(ef.HistoryPaneContext.Provider,{value:i,children:(0,u.jsxs)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,u.jsx)(y.FileHeader,{path:t,performPaneOperation:n}),(0,u.jsx)(eb,{filePath:t}),(0,u.jsx)(b.default,{filePath:t,onCloseHistory:o})]})})}):null}e.s(["historyUI",()=>eC],110066);var eT=e.i(581554),eE=e.i(297083),eR=e.i(652172),eI=e.i(415756),eA=e.i(137182),eP=e.i(486898),eD=e.i(269848),eO=e.i(109591),eN=e.i(40916),eM=e.i(123515),eL=e.i(255701),eB=e.i(917063),eV=e.i(109900),eF=e.i(801769),eU=e.i(24290),eG=e.i(696263),e$=e.i(275531),eH=e.i(968783),ez=e.i(993796),eW=e.i(858248),eq=e.i(709485),eK=e.i(344782),eY=e.i(613355),eQ=e.i(140487),eX=e.i(734582),eZ=e.i(119274),eJ=e.i(51054),e0=e.i(272119),e1=e.i(423828),e2=e.i(628796),e3=e.i(960178),e5=e.i(625484),e4=e.i(975068),e8=[],e6=[],e7=function(e){var t=e.query,n=e.connectionsUsedInApp,r=e.onManage,i=e.onDelete,a=e.isLoading,o=e.currentReplId,s=(0,l._)((0,c.useState)(null),2),d=s[0],f=s[1],p=(0,c.useMemo)(function(){return new eI.Fzf(n,{fuzzy:!1,selector:function(e){return"".concat(e.displayName," ").concat(e.type)}})},[n]),h=(0,c.useMemo)(function(){return t?p.find(t).map(function(e){return e.item}):n},[p,t,n]),m=function(e){var t=e.item;if("appConnection"===t.connectorType){var n=t.connectorName.toLowerCase(),i="/integrations/".concat(n,"/apps/").concat(o);return(0,u.jsx)(eQ.Button,{iconLeft:(0,u.jsx)(eL.default,{}),variant:"default",text:"Manage",size:"small",onClick:function(){(0,eW.track)(eq.events.MANAGE_CONNECTION_CLICKED,{connectorName:t.connectorName}),window.open(i,"_blank")}})}return r?(0,u.jsx)(eQ.Button,{iconLeft:(0,u.jsx)(eL.default,{}),variant:"default",text:"Manage",size:"small",onClick:function(){if("availableConnector"!==t.connectorType){var e;(0,eW.track)(eq.events.MANAGE_CONNECTION_CLICKED,{connectorName:t.connectorName}),r(null!=(e=t.connections)?e:[],t.connectorType)}}}):(0,u.jsx)(eZ.PopupMenu,{"aria-label":"Manage integration",trigger:(0,u.jsx)(eQ.Button,{iconLeft:(0,u.jsx)(eL.default,{}),size:"small",variant:"default",text:"Manage"}),children:(0,u.jsx)(eZ.MenuItem,{id:"delete-".concat(t.id),label:"Delete",isDestructive:!0,onAction:function(){f(t)}})})};return(0,u.jsxs)(e5.View,{pt:12,children:[(0,u.jsx)(eX.IndexTable,{title:"",autoLayout:!1,columns:[{key:"name",label:"Name",allowSorting:!1,width:200,isRowHeader:!0},{key:"description",label:"Description",allowSorting:!1,maxWidth:760},{key:"status",label:"Connection Status",allowSorting:!1,width:118},{key:"actions",label:"",allowSorting:!1,width:99}],items:h,emptyState:t?void 0:(0,u.jsx)(function(){return(0,u.jsx)(e5.View,{className:e4.default.centeredMessage,children:(0,u.jsx)(e3.Text,{children:"No connections added to this app"})})},{}),loading:void 0!==a&&a,children:function(e){var t;return(0,u.jsxs)(e1.TableRow,{id:e.id,children:[(0,u.jsx)(e0.TableCell,{children:(0,u.jsxs)(e5.View,{gap:8,row:!0,align:"center",children:[(0,u.jsx)(e5.View,{children:(0,u.jsx)(eR.default,{width:24,height:24,src:null!=(t=e.iconPath)?t:"",alt:e.displayName})}),(0,u.jsx)(e3.Text,{children:e.displayName})]})},"name"),(0,u.jsx)(e0.TableCell,{children:(0,u.jsx)(e3.Text,{color:"dimmer",variant:"text",children:e.description})},"description"),(0,u.jsx)(e0.TableCell,{children:(0,u.jsx)(e5.View,{row:!0,children:"accountConnection"===e.connectorType&&(0,u.jsxs)(e5.View,{row:!0,gap:8,align:"center",children:[(0,u.jsx)(eP.default,{size:8,color:"healthy"===e.status?"green":"red"}),(0,u.jsx)(e3.Text,{variant:"small",children:"healthy"===e.status?"Active":"Disconnected"})]})})},"status"),(0,u.jsx)(e0.TableCell,{children:(0,u.jsx)(e5.View,{row:!0,justify:"end",children:(0,u.jsx)(m,{item:e})})},"actions")]},e.id)}}),(0,u.jsx)(eB.DeleteIntegrationModal,{isOpen:!!d,setIsOpen:function(){return f(null)},onDelete:function(){return(0,eE._)(function(){var e,t,n,r;return(0,Q._)(this,function(a){switch(a.label){case 0:if(!(i&&(null==d||null==(t=d.connections)||null==(e=t[0])?void 0:e.connectionId)))return[3,2];return[4,i(null==d||null==(r=d.connections)||null==(n=r[0])?void 0:n.connectionId)];case 1:a.sent(),a.label=2;case 2:return f(null),[2]}})})()},connectorDisplayName:null==d?void 0:d.displayName})]})},e9=function(e,t){var n=e.filter(function(e){var n;return null==(n=e.repls)?void 0:n.some(function(e){return e.id===t})});return(0,e$.groupConnectionsByConnector)(n)},te=[{id:"used",label:"Used in this app",icon:(0,u.jsx)(eO.default,{})},{id:"all",label:"All connectors",icon:(0,u.jsx)(eM.default,{})}],tt=function(e){var t=e.token,n=e.connections,r=e.connectorConfigs,i=e.orgId,a=e.openPane,d=void 0===a?function(){}:a,f=e.currentReplId,p=e.connectionsUsedInApp,h=e.whitelist,m=e.refetch,g=e.isLoading,x=void 0!==g&&g,y=e.showConnectorsSection,b=void 0===y||y,w=(0,l._)((0,eA.useCreateWorkspaceConnectionMutation)(),1)[0],_=(0,l._)((0,eA.useDeleteWorkspaceConnectionMutation)(),1)[0],k=(0,l._)((0,c.useState)("used"),2),S=k[0],C=k[1],j=(0,l._)((0,c.useState)(null),2),T=j[0],E=j[1],R=(0,l._)((0,c.useState)(!1),2),I=R[0],A=R[1],P=(0,l._)((0,c.useState)(""),2),D=P[0],O=P[1],N=(0,l._)((0,c.useState)(null),2),M=N[0],L=N[1],B=(0,c.useCallback)(function(e){return(0,eE._)(function(){return(0,Q._)(this,function(t){switch(t.label){case 0:return[4,_({variables:{input:{connectionId:e,orgId:null!=i?i:null}},optimisticResponse:{__typename:"RootMutationType",deleteConnection:{__typename:"DeleteConnection",success:!0}},update:function(t){try{var n,r=t.readQuery({query:eA.WorkspaceUserConnectorsDocument});if((null==r||null==(n=r.currentUser)?void 0:n.__typename)==="CurrentUser"){var i=r.currentUser.connectorContext.connections.filter(function(t){return t.connectionId!==e});t.writeQuery({query:eA.WorkspaceUserConnectorsDocument,data:{currentUser:(0,s._)((0,o._)({},r.currentUser),{connectorContext:(0,s._)((0,o._)({},r.currentUser.connectorContext),{connections:i})})}})}}catch(e){}}})];case 1:return t.sent(),[4,m()];case 2:return t.sent(),[2]}})})()},[_,m,i]),V=function(e,t){E({connections:e,connectorType:t})};return T?(0,u.jsxs)(e5.View,{className:e4.default.manageConnectionContainer,children:[(0,u.jsx)(eF.ManageConnection,{connections:T.connections,connectorType:T.connectorType,onBack:function(){return E(null)},onDelete:function(){L(T.connections[0])},openAppConnectionInNewTab:!0,disableAppTitleLink:!0}),(0,u.jsx)(eB.DeleteIntegrationModal,{isOpen:!!M,setIsOpen:function(){return L(null)},onDelete:function(){return(0,eE._)(function(){return(0,Q._)(this,function(e){switch(e.label){case 0:if(!M)return[3,2];return[4,B(M.connectionId)];case 1:e.sent(),E(null),L(null),e.label=2;case 2:return[2]}})})()},connectorDisplayName:null==M?void 0:M.displayName})]}):(0,u.jsxs)(e5.View,{css:eY.rcss.pageContent,gap:32,children:[(0,u.jsxs)(e5.View,{align:"center",justify:"space-between",row:!0,children:[(0,u.jsxs)(e5.View,{gap:8,align:"center",row:!0,children:[(0,u.jsx)(eT.default,{size:24}),(0,u.jsx)(e3.Header,{level:1,variant:"headerBig",children:"Integrations"})]}),(0,u.jsxs)(e5.View,{row:!0,gap:8,className:e4.default.searchControlsDesktop,children:[(0,u.jsx)(eJ.SearchBar,{placeholder:"Search integrations",value:D,onChange:function(e){return O(e.target.value)},onClear:function(){return O("")}}),i?null:(0,u.jsx)(eQ.Button,{text:"Request an integration",iconLeft:(0,u.jsx)(eN.default,{}),variant:"outlined",onClick:function(){return A(!0)}})]})]}),(0,u.jsxs)(e5.View,{row:!0,gap:8,className:e4.default.searchControlsMobile,children:[(0,u.jsx)(eJ.SearchBar,{placeholder:"Search integrations",value:D,onChange:function(e){return O(e.target.value)},onClear:function(){return O("")}}),i?null:(0,u.jsx)(eQ.Button,{text:"Request an integration",iconLeft:(0,u.jsx)(eN.default,{}),variant:"outlined",onClick:function(){return A(!0)}})]}),(0,u.jsxs)(e5.View,{gap:16,children:[(0,u.jsxs)(e5.View,{gap:4,children:[(0,u.jsx)(e3.Header,{level:2,variant:"subheadBig",children:"Replit managed"}),(0,u.jsx)(e3.Text,{color:"dimmer",children:"These are built-in integrations that work automatically. Create an app and your agent can start using these right away."})]}),(0,u.jsx)(eU.ReplitManagedTable,{query:D,openPane:d})]}),b?(0,u.jsxs)(e5.View,{gap:16,children:[(0,u.jsx)(e5.View,{row:!0,justify:"space-between",align:"center",children:(0,u.jsxs)(e5.View,{gap:4,children:[(0,u.jsx)(e3.Header,{level:2,variant:"subheadBig",children:"Connectors"}),(0,u.jsx)(e3.Text,{color:"dimmer",children:"These are first-party integrations Replit supports. Sign in once and build with them across your apps."})]})}),(0,u.jsx)("div",{className:e4.default.tabs,children:(0,u.jsxs)(e2.Tabs,{selectedKey:S,onSelectionChange:C,children:[(0,u.jsx)(e2.TabList,{withDividers:!1,children:te.map(function(e){return(0,u.jsx)(e2.Tab,{id:e.id,iconLeft:e.icon,children:e.label},e.id)})}),(0,u.jsx)("div",{className:e4.default.tabPanels,children:(0,u.jsxs)(e2.TabPanels,{children:[(0,u.jsx)(e2.TabPanel,{id:"used",children:(0,u.jsx)(e7,{query:D,token:t,connectionsUsedInApp:p,onManage:V,onDelete:B,isLoading:x,currentReplId:void 0===f?"":f})}),(0,u.jsx)(e2.TabPanel,{id:"all",children:(0,u.jsx)(eB.ConnectorsShared,{token:t,connectorConfigs:r,connections:n,onDelete:B,onEvent:function(e){return(0,eE._)(function(){return(0,Q._)(this,function(t){switch(t.label){case 0:if("connect.connection-connected"!==e.name)return[3,2];return[4,w({variables:{input:{connectionId:e.data.connection_id,orgId:null!=i?i:null}}})];case 1:t.sent(),m(),C("all"),t.label=2;case 2:return[2]}})})()},onManage:V,query:D,shouldShowConnectButton:!0,whitelist:h,isLoading:x})})]})})]})})]}):null,b?(0,u.jsx)(eK.McpServersSection,{query:D}):null,(0,u.jsx)(eV.GitProvidersSection,{query:D,onOpenGitPane:function(){return d({type:"git"})}}),i?null:(0,u.jsx)(eG.RequestNewConnectorModal,{isOpen:I,onRequestClose:function(){return A(!1)}})]})};let tn=function(e){var t,n,r,i=e.openPane,a=e.currentReplId,o=void 0===a?"":a,s=(0,eH.useCurrentUserStoredOrgContext)(),l=s.orgSlug,d=s.orgId,f=(0,ez.useFlag)({controlName:"flag-free-plan",default:!1}),p=(0,eA.useWorkspaceUserConnectorsQuery)({ssr:!1,skip:!!d}),h=p.data,m=p.loading,g=p.error,x=p.refetch,y=(0,eA.useWorkspaceOrgConnectorsQuery)({ssr:!1,skip:!d||!l,variables:l?{orgSlug:l}:void 0}),b=y.data,w=y.loading,_=y.error,k=y.refetch,S=m||w,C=d?k:x,j=(null==h||null==(t=h.currentUser)?void 0:t.__typename)!=="CurrentUser"||h.currentUser.isSubscribed,T=!(f&&!j&&!d),E=(0,c.useMemo)(function(){var e,t,n,r,i,a,s,l,u,c,f=(null==b||null==(e=b.currentUser)?void 0:e.__typename)==="CurrentUser"&&(null==b||null==(n=b.currentUser)||null==(t=n.org)?void 0:t.__typename)==="Org"?null==b||null==(i=b.currentUser)||null==(r=i.org)?void 0:r.connectorContext:null,p=(null==h||null==(a=h.currentUser)?void 0:a.__typename)==="CurrentUser"?null==h||null==(s=h.currentUser)?void 0:s.connectorContext:null,m=d?f:p;if(!m)return{token:null,connections:e8,connectorConfigs:e6,connectionsUsedInApp:[]};var g=(null==m?void 0:m.__typename)==="CurrentUserConnectorContext"||(null==m?void 0:m.__typename)==="OrgConnectorContext"?m.openIntClientToken:null,x=((null==m?void 0:m.__typename)==="CurrentUserConnectorContext"||(null==m?void 0:m.__typename)==="OrgConnectorContext")&&null!=(l=m.connections)?l:e8,y=e9(x,o);return{token:g,connections:x,connectorConfigs:((null==m?void 0:m.__typename)==="CurrentUserConnectorContext"||(null==m?void 0:m.__typename)==="OrgConnectorContext")&&null!=(u=m.connectorConfigs)?u:e6,connectionsUsedInApp:y,connectorWhitelist:((null==m?void 0:m.__typename)==="CurrentUserConnectorContext"||(null==m?void 0:m.__typename)==="OrgConnectorContext")&&null!=(c=m.connectorWhitelist)?c:[]}},[d,h,b,o]);return S?(0,u.jsx)(e5.View,{className:e4.default.centeredMessage,children:(0,u.jsx)(eD.default,{})}):g||_?(0,u.jsx)(e5.View,{className:e4.default.centeredMessage,children:(0,u.jsx)(e3.Text,{children:"Error loading connectors"})}):(0,u.jsx)(tt,{orgId:d,openPane:void 0===i?function(){}:i,currentReplId:o,token:null!=(n=E.token)?n:"",connections:E.connections,connectorConfigs:E.connectorConfigs,connectionsUsedInApp:E.connectionsUsedInApp,refetch:C,whitelist:null!=(r=E.connectorWhitelist)?r:[],isLoading:S,showConnectorsSection:T})};var tr=e.i(207237),ti=e.i(142365),ta=e.i(806804);function to(e){var t=e.openPane,n=(0,tr.default)(),r=(0,ta.default)("integrations-pane","integrations-toast").dismiss;return(0,c.useEffect)(function(){r()},[r]),(0,ti.useTrackEffect)(eq.events.INTEGRATIONS_PANE_USED,{action:"viewed"}),(0,u.jsx)(tn,{openPane:t,currentReplId:n})}var ts=d.Type.Object({type:d.Type.Literal("integrations")}),tl={Content:function(e){var t=e.options.performPaneOperation,n=(0,c.useCallback)(function(e){return t({operation:"open",secondary:!0,pane:e})},[t]);return(0,u.jsx)(to,{openPane:n})},Icon:function(e){var t=e.size;return(0,u.jsx)(eT.default,{size:t})},getTitle:function(){return"Integrations"},description:"Connect to Replit-native and external services",category:e_.PaneCategory.CloudServices,decode:function(e){return f.Value.Decode(ts,e)}};e.s(["integrationsUI",()=>tl],637972);var tu=e.i(116235),tc=e.i(483620),td=e.i(787527),tf=e.i(761201),tp=e.i(752539),th=e.i(402099),tm=e.i(610357),tg=e.i(952685);e.i(545082);var tv=e.i(91442),tx=e.i(446530),ty=e.i(929872),tb=(0,tx.cssRecord)({button:{width:"fit-content"}});function tw(e){var t=e.code,n=e.activeFile,r=(0,tv.useGetCursorState)(),i=(0,tg.default)(n),a=i?{text:"Insert",iconRight:(0,u.jsx)(tp.default,{}),onClick:function(){var e,n,a;return i({code:t,insertAt:null!=(a=null==(n=r())||null==(e=n.position)?void 0:e.offset)?a:"end"})}}:{text:"Copy",iconLeft:(0,u.jsx)(th.default,{}),onClick:function(){return(0,tm.default)(t)}};return(0,u.jsx)(ty.Surface,{background:"default",children:(0,u.jsx)(eQ.Button,(0,o._)({size:"small",variant:"outlined",css:tb.button},a))})}var t_=e.i(480028),tk=e.i(607278),tS=(0,tx.cssRecord)({self:eY.rcss.colWithGap(4),content:[eY.rcss.backgroundColor.backgroundRoot,eY.rcss.borderRadius(4),eY.rcss.p(4),eY.rcss.align.center,eY.rcss.maxWidth("100%"),eY.rcss.overflowX("auto"),{width:"fit-content"}]});function tC(e){var t=e.method,n=e.content,r=e.activeFile,i=(0,l._)((0,c.useState)(n),2),a=i[0],o=i[1];return(0,u.jsxs)(e5.View,{css:tS.self,children:[(0,u.jsx)(tA,{title:t}),(0,u.jsx)(e5.View,{css:tS.content,row:!0,gap:4,children:a.map(function(e,n){var r="".concat(t,"-").concat(n);return"input"===e.type?(0,u.jsx)(tT,{i:n,value:e.value,placeholder:e.placeholder,setContent:o},r):(0,u.jsx)(tR,{value:e.value},r)})}),(0,u.jsx)(tw,{code:a.reduce(function(e,t){return e+(t.value||("input"===t.type?t.placeholder:""))},""),activeFile:r})]})}var tj=(0,tx.cssRecord)({self:[eY.rcss.width(64),eY.rcss.height(24),eY.rcss.zIndex(1)]});function tT(e){var t=e.i,n=e.value,r=e.placeholder,i=e.setContent;return(0,u.jsx)(tk.Input,{onChange:function(e){i(function(n){return n.map(function(n,r){return t===r?(0,s._)((0,o._)({},n),{value:e.target.value}):n})})},placeholder:r,value:n||"",css:tj.self})}var tE=(0,tx.cssRecord)({self:[eY.rcss.borderRadius(0),eY.rcss.backgroundColor.backgroundRoot],code:[eY.rcss.font.code,eY.rcss.color.greyStronger,eY.rcss.p(4),{whiteSpace:"pre-wrap"}]});function tR(e){var t=e.value;return(0,u.jsx)(e5.View,{css:tE.self,children:(0,u.jsx)(e3.Text,{css:tE.code,children:t})})}var tI=(0,tx.cssRecord)({self:eY.rcss.rowWithGap(4),bold:{fontWeight:t_.tokens.fontWeightMedium}});function tA(e){var t=e.title,n=(0,l._)((0,g.default)(function(){var e=(0,ep._)(t.split(" "));return[e[0],e.slice(1).join(" ")]},[t]),2),r=n[0],i=n[1];return(0,u.jsxs)(e5.View,{css:tI.self,children:[(0,u.jsx)(e3.Text,{css:tI.bold,multiline:!1,children:r}),(0,u.jsx)(e3.Text,{color:"dimmer",multiline:!1,children:i})]})}var tP=((n=tP||{}).IMPORT="Import the database",n.CREATE="Create a new database",n.SET="Set a key to a value",n.GET="Get a key's value",n.DELETE="Delete a key",n.LIST="List all keys",n.LIST_PREFIX="List keys with a prefix",n),tD={language:"Bash",methods:[tL("Set a key to a value","curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),tL("Get a key's value","curl $REPLIT_DB_URL/{{key}}"),tL("Delete a key","curl -XDELETE $REPLIT_DB_URL/{{key}}"),tL("List all keys",'curl "$REPLIT_DB_URL?prefix={{key}}"')]},tO={language:"Node",methods:[tL("Import the database",'const Database = require("@replit/database")'),tL("Create a new database","const db = new Database()"),tL("Set a key to a value",'db.set("{{key}}", "{{value}}").then(() => {})'),tL("Get a key's value",'db.get("{{key}}").then(value => {})'),tL("Delete a key",'db.delete("{{key}}").then(() => {})'),tL("List all keys","db.list().then(keys => {\n  console.log(keys);\n})"),tL("List keys with a prefix",'db.list("{{prefix}}").then(matches => {})')]},tN={language:"Go",methods:[tL("Import the database",'import "github.com/replit/database-go"'),tL("Set a key to a value",'db.Set("{{key}}", "{{value}}")'),tL("Get a key's value",'value, _ := database.Get("{{key}}")'),tL("Delete a key",'database.Delete("{{key}}")'),tL("List all keys",'keys, _ := database.ListKeys("")'),tL("List keys with a prefix",'matches, _ := database.ListKeys("{{prefix}}")')]},tM={language:"Python",methods:[tL("Import the database","from replit import db"),tL("Set a key to a value",'db["{{key}}"] = "{{value}}"'),tL("Get a key's value",'db["{{key}}"]'),tL("Delete a key",'del db["{{key}}"]'),tL("List all keys","keys = db.keys()\nprint(list(keys))"),tL("List keys with a prefix",'matches = db.prefix("{{prefix}}")')]};function tL(e,t){return{method:e,content:function(e){for(var t=[],n=0;n<e.length;){var r=e.indexOf("{{",n),i=e.indexOf("}}",n);if(-1===r||-1===i){t.push({type:"code",value:e.substring(n)});break}t.push({type:"code",value:e.substring(n,r)}),t.push({type:"input",placeholder:e.substring(r+2,i)}),n=i+2}return t}(t)}}var tB=(0,tx.cssRecord)({self:eY.rcss.colWithGap(24),code:[eY.rcss.font.code,eY.rcss.color.greyStronger,eY.rcss.backgroundColor.backgroundRoot,eY.rcss.p(4),eY.rcss.borderRadius(4)]});function tV(e){var t=e.activeFile,n=(0,g.default)(function(){switch(t?(0,m.getExt)(t):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return tO;case"go":return tN;case"py":return tM;default:return tD}},[t]);return(0,u.jsxs)(e5.View,{css:tB.self,children:[(0,u.jsxs)(e3.Text,{color:"dimmer",children:["You can use the Database from any App by making HTTP requests or a client library as outlined below. Weve set an environment variable called ",(0,u.jsx)("code",{css:tB.code,children:"REPLIT_DB_URL"})," in your App if you'd like to interact with the database directly."]}),n.methods.map(function(e){return(0,u.jsx)(tC,{method:e.method,content:e.content,activeFile:t},"".concat(n.language).concat(e.method))})]})}var tF=e.i(965153);function tU(e){var t=e.title,n=e.defaultExpanded,r=e.children;return(0,u.jsx)(tF.AccordionItem,{defaultExpanded:n,headerContent:(0,u.jsx)(e3.Text,{variant:"subheadDefault",multiline:!1,children:t}),children:(0,u.jsx)(e5.View,{p:12,gap:8,children:r})})}var tG=e.i(546284),t$=e.i(967629),tH=e.i(6338),tz=e.i(27820),tW=(0,t$.keyframes)("from{opacity:0}to{opacity:1}"),tq=(0,tx.cssRecord)({self:[{animation:"".concat(tW," 100ms forwards ease-in-out alternate")}],selfLoadingText:[eY.rcss.height(16),eY.rcss.width(48),eY.rcss.borderRadius(4),tH.loadingStyle.backgroundPulse()],selfLoading:[eY.rcss.height(12),eY.rcss.borderRadius(16),tH.loadingStyle.backgroundPulse()],text:[eY.rcss.rowWithGap(4),{display:"inline-flex"}],textSpan:[eY.rcss.width("fit-content"),eY.rcss.display.inlineFlex]});function tK(e){var t,n,r=e.database,i=e.loading,a=(null==r?void 0:r.sizeMB)||0,o=(t=1e6*(t=a)/1048576,"".concat(t.toFixed(),"/50 MiB")),s=i||!r;return(0,u.jsx)(e5.View,{css:tq.self,gap:8,children:s?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(e5.View,{css:tq.selfLoadingText}),(0,u.jsx)(e5.View,{css:tq.selfLoading})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(e3.Text,{color:"dimmer",css:tq.text,multiline:!1,children:[(0,u.jsx)(e5.SpecializedView.span,{css:tq.textSpan,children:o}),(0,u.jsx)(e5.SpecializedView.span,{css:tq.textSpan,children:"|"}),(0,u.jsx)(e5.SpecializedView.span,{css:tq.textSpan,children:(n=(n=null==r?void 0:r.keysCount)||0,"".concat(n," ").concat((0,tG.default)("key",n)))})]}),(0,u.jsx)(tz.MeasureBar,{current:a,total:50,tooltip:o})]})},s?"databaseLoadingStats":"databaseLoadedStats")}var tY=e.i(569384),tQ=e.i(973245),tX=e.i(304277);function tZ(){var e=(0,tY._)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return tZ=function(){return e},e}function tJ(){var e=(0,tY._)(["\n  query Database($replID: String!) {\n    getRepl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return tJ=function(){return e},e}e.i(566901);var t0={},t1=(0,tQ.gql)(tZ()),t2=(0,tQ.gql)(tJ(),t1),t3=e.i(712516),t5=e.i(827456),t4=e.i(91720),t8=e.i(396776),t6=(0,tx.cssRecord)({sectionWrapper:[eY.rcss.width("100%"),eY.rcss.maxWidth(450)]});function t7(){var e,t,n,r,i,a,s,l,c,d=(s=(r={variables:{replID:(0,tr.default)()},pollInterval:1e4},i=(0,o._)({},t0,r),a=tX.useQuery(t2,i)).data,l=a.error,c=a.loading,s&&("Repl"===s.getRepl.__typename?t=null==s||null==(n=s.getRepl)?void 0:n.database:e="Could not fetch Database info"),l&&("GraphQL error: You don't have access to this database"===l.message?t=null:e=l.message),{db:t,loading:c,error:e}),f=d.db,p=d.error,h=d.loading,m=(0,tv.useCursorFilepath)(),g=(0,t5.usePaneUIContext)().getTitle({type:"database"});return(0,u.jsx)(t3.default,{pane:{type:"database"},headerText:g,action:(0,u.jsxs)(e5.View,{css:t6.sectionWrapper,gap:16,children:[p?(0,u.jsx)(t8.StatusBanner,{colorway:"negative",text:p}):null,(0,u.jsx)(tU,{title:"Storage capacity",children:(0,u.jsx)(tK,{database:f,loading:h})}),(0,u.jsx)(tU,{title:"How to use the database",children:(0,u.jsx)(tV,{activeFile:m})}),(0,u.jsx)(t4.ButtonLink,{href:tf.LINKS_DOCS.REPL_DATABASE,target:"_blank",rel:"noopener",iconLeft:(0,u.jsx)(td.default,{}),text:"Learn more in the docs"})]})})}var t9=d.Type.Object({type:d.Type.Literal("database")}),ne={Content:function(){return(0,u.jsx)(t7,{})},Icon:function(e){var t=e.size;return(0,u.jsx)(tu.IconContext.Provider,{value:{color:t_.tokens.blurpleStronger,size:t},children:(0,u.jsx)(tc.default,{})})},getTitle:function(){return"Replit Key-Value Store"},description:"Free, easy-to-use key-value store suitable for unstructured data, caching, session management, fast lookups, and flexible data models",category:e_.PaneCategory.CloudServices,decode:function(e){return f.Value.Decode(t9,e)}};e.s(["kvStoreUI",()=>ne],224986);var nt=e.i(226236),nn=e.i(316699),nr=e.i(806930),ni=e.i(903381),na=e.i(736451),no=e.i(649960),ns=e.i(376363),nl=e.i(529810),nu=e.i(62424),nc=e.i(106020),nd=e.i(411928),nf=e.i(406206),np=(0,tx.cssRecord)({root:[eY.rcss.coverContainer,eY.rcss.center]});function nh(){return(0,u.jsx)(e5.View,{css:np.root,children:(0,u.jsx)(eD.default,{size:32})})}var nm=e.i(877249),ng=(0,c.memo)(nd.default),nv=(0,tx.cssRecord)({bodyRoot:[eY.rcss.overflowY("auto")],contentRoot:[eY.rcss.height("100%"),eY.rcss.width("100%"),eY.rcss.overflow("auto"),eY.rcss.zIndex(2),eY.rcss.align.center,eY.rcss.py(16),eY.rcss.px(16),eY.rcss.borderRadius(8),(0,j._)({margin:"0 auto"},"@media only screen and (min-width: ".concat(nm.BREAKPOINTS.tabletMin,"px)"),eY.rcss.px(32))],emptyState:[{"& button":[{color:t_.tokens.foregroundDimmer}]}],markdownContainer:[eY.rcss.width("100%"),{"& .rendered-markdown":[eY.rcss.flex.column,eY.rcss.center],"& .rendered-markdown > *":[eY.rcss.maxWidth(840),eY.rcss.width("100%")],"& .rendered-markdown > table":eY.rcss.maxWidth("100%")}],paneRoot:[eY.rcss.position.relative,eY.rcss.overflowY("hidden"),eY.rcss.height("100%"),eY.rcss.width("100%")]});function nx(e){var t,n,r=(0,nl.default)().fs,i=(0,l._)((t=(0,c.useRef)(!1),n=(0,c.useRef)(null),[(0,no.default)(function(){t.current=!0,n.current&&clearTimeout(n.current),n.current=setTimeout(function(){t.current=!1},150)},{type:"throttle",wait:37.5}),t]),2),a=i[0],o=i[1],s=(0,c.useRef)(null),d=(0,na.usePrefersReducedMotion)(),f=e.path,p=e.performPaneOperation,h=(0,c.useCallback)(function(){p({operation:"replace",pane:{type:"codeEditor",data:{path:f}}}),p({operation:"commit"})},[p,f]);(0,ek.useSetPaneBindings)(function(){return{commands:[{commands:[{match:nc.matchLabel,data:{label:"Open in Editor",icon:(0,u.jsx)(nr.default,{}),type:"action",run:h}}]}]}},[h]);var m=e.isHidden,g=(0,tv.useObservableCursorState)();(0,c.useEffect)(function(){if(!m){var e=(0,nn.default)(function(e){(0,ns.default)(e,{behavior:d?"auto":"smooth",scrollMode:"if-needed"})},100),t=(0,nn.default)(function(t){if(f===(null==t?void 0:t.path)&&t&&!o.current){var n=s.current?function(e,t){var n=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null==n?void 0:n.length))return null;var r=Array.from(n).reverse(),i=t.line,a=t.column,o=!0,s=!1,u=void 0;try{for(var c,d=r[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var f=c.value,p=f.dataset.sourcepos;if(!p)throw Error("Expected data source pos on selected element");var h=(0,l._)(p.split("-"),2),m=h[0],g=h[1],x=(0,l._)(m.split(":").map(Number),2),y=x[0],b=x[1],w=(0,l._)(g.split(":").map(Number),2),_=w[0],k=w[1];if(i>=y&&a>=b&&(i<_||i===_&&a<=k))return f}}catch(e){s=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(s)throw u}}}(s.current,t.position):null;n&&e(n)}},200),n=g.subscribe(t);return function(){t.cancel(),e.cancel(),n()}}},[g,m,d,f]);var x=(0,l._)((0,c.useState)(null),2),b=x[0],w=x[1];return(0,c.useEffect)(function(){return w(null),r.watchTextFile(f,{onReady:function(e){w(e.initialContent.toString())},onChange:function(e){w(e.latestContent)},onMoveOrDelete:function(e){e.eventType===ni.ChangeEventType.Delete&&p({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[f,r,p]),(0,u.jsxs)(e5.View,{css:nv.paneRoot,children:[(0,u.jsx)(y.FileHeader,{path:e.path,performPaneOperation:p,children:b&&b.trim().length?(0,u.jsx)(nf.PaneHeaderActionButton,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:h,icon:(0,u.jsx)(nr.default,{})}):null}),(0,nu.isCustomInstructionFile)(f)?(0,u.jsx)(nu.CustomInstructionBanner,{}):null,(0,u.jsx)(e5.View,{css:nv.bodyRoot,grow:!0,shrink:!0,children:(0,u.jsx)(ny,{ref:a,content:b,fs:r,markdownContainerRef:s,openInEditor:h,path:f})})]})}var ny=(0,c.forwardRef)(function(e,t){var n=e.content,r=e.fs,i=e.markdownContainerRef,a=e.openInEditor,o=e.path;return null===n?(0,u.jsx)(nb,{}):(0,u.jsx)(e5.View,{css:nv.contentRoot,gap:8,innerRef:t,children:(0,u.jsx)(e5.View,{innerRef:i,css:nv.markdownContainer,children:n.trim().length?(0,u.jsx)(ng,{path:o,source:n,fs:r,sourcePos:!0}):(0,u.jsx)("div",{className:"rendered-markdown rendered-markdown-empty",children:(0,u.jsxs)(e5.View,{css:nv.emptyState,gap:4,align:"center",innerRef:t,children:[(0,u.jsx)(e3.Text,{color:"dimmer",children:(0,u.jsx)("i",{children:"This file is empty"})}),(0,u.jsx)(eQ.Button,{text:"Open in Editor",iconLeft:(0,u.jsx)(nr.default,{}),onClick:a,variant:"nofill"})]})})})})});function nb(){var e=(0,l._)((0,c.useState)(!1),2),t=e[0],n=e[1];return(0,c.useEffect)(function(){var e=setTimeout(function(){return n(!0)},500);return function(){clearTimeout(e)}},[]),t?(0,u.jsx)(nh,{}):null}var nw=d.Type.Object({type:d.Type.Literal("markdown"),data:d.Type.Object({path:d.Type.String({minLength:1})})}),n_={Content:function(e){var t=e.pane,n=e.options;return(0,u.jsx)(nx,{path:t.data.path,isHidden:!!n.isHidden,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.size;return(0,u.jsx)(nt.default,{fill:"currentColor",size:t})},getTitle:function(e){return e.data.path?(0,m.getFileName)(e.data.path):"Markdown"},category:e_.PaneCategory.WorkspaceFeatures,decode:function(e){return f.Value.Decode(nw,e)}};e.s(["markdownPreviewUi",()=>n_],466638);var nk=e.i(294468),nS=e.i(296223),nC=e.i(630818),nj=d.Type.Object({type:d.Type.Literal("media"),data:d.Type.Object({path:d.Type.String()})}),nT={Content:function(e){var t=e.pane,n=e.options;return(0,u.jsx)(nE,{path:t.data.path,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.pane,n=e.size;return(0,u.jsx)(nC.default,{path:t.data.path,size:n})},getTitle:function(e){return(0,m.getFileName)(e.data.path)},category:e_.PaneCategory.WorkspaceFeatures,decode:function(e){return f.Value.Decode(nj,e)}};function nE(e){var t=e.path,n=e.performPaneOperation,r=(0,nl.default)().fs,i=(0,x.useFileCommands)({path:t,performPaneOperation:n}),a=i?(0,G._)(i):[],o=(0,c.useCallback)(function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})},[n,t]),s={match:nc.matchLabel,data:{label:"Open in Editor",icon:(0,u.jsx)(nr.default,{}),type:"action",run:function(){o()}}};return(0,m.isSVGFile)(t)&&a.push(s),(0,ek.useSetPaneBindings)(function(){if(i)return{commands:[{commands:a}]}},[i]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(y.FileHeader,{path:t,performPaneOperation:n,children:(0,u.jsx)(nf.PaneHeaderActionButton,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:o,icon:(0,u.jsx)(nr.default,{})})}),(0,u.jsx)(nk.Content,{centered:!0,children:(0,u.jsx)(nS.default,{filePath:t,fs:r})})]})}e.s(["mediaUI",()=>nT],138071);var nR=e.i(917736),nI=e.i(984556),nA=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],nP=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function nD(e,t){var n,r=t||{},i=r.signed,a=r.digitsNumber,o=r.isKib,s=r.isKibNotation;if(n=void 0!==i&&i?e<0?"-":"+":"",0===e)return"".concat(n,"0B");var l=void 0===o||o?1024:1e3,u=Math.floor(Math.log(Math.abs(e))/Math.log(l));return"".concat(n).concat(parseFloat(Math.abs(e/Math.pow(l,u)).toFixed(void 0===a?2:a))).concat((void 0!==s&&s?nA:nP)[u])}var nO=e.i(262664),nN=e.i(424746),nM=d.Type.Literal("overview-page"),nL=d.Type.Literal("db-page");d.Type.Union([nM,nL]);var nB=d.Type.Literal("overview"),nV=d.Type.Literal("commands"),nF=d.Type.Literal("settings"),nU=d.Type.Literal("drizzle-studio");d.Type.Union([nB,nV,nF,nU]);var nG=d.Type.Object({databaseId:d.Type.Integer()}),n$=d.Type.Optional(nG),nH=(0,c.createContext)(void 0),nz=function(e){var t,n,r,i,a,d,p,h,m,g,x,y,b=e.children,w=e.initialOpenAtDatabase,_=e.performPaneOperation,k=(0,c.useCallback)(function(e){_({operation:"open",pane:e})},[_]),S=(0,c.useCallback)(function(){_({operation:"replace",pane:{type:"neon"}})},[_]),C=(0,l._)((0,c.useState)("overview"),2),j=C[0],T=C[1],E=(0,c.useCallback)(function(e){T(e),S()},[S]),R=(0,l._)((0,c.useState)(f.Value.Check(n$,w)?w.databaseId:null),2),I=R[0],A=R[1],P=(0,l._)((0,c.useState)(f.Value.Check(n$,w)?"db-page":"overview-page"),2),D=P[0],O=P[1];(0,c.useEffect)(function(){w&&f.Value.Check(n$,w)&&(O("db-page"),A(w.databaseId))},[w]);var N=(0,l._)((0,c.useState)(null),2),M=N[0],L=N[1],B=(0,l._)((0,c.useState)(null),2),V=B[0],F=B[1],U=(0,c.useCallback)(function(e){L(e),S()},[S]),$=(0,c.useCallback)(function(e){F(e),S()},[S]),H=(0,c.useCallback)(function(e){A(e),S()},[S]),z=(n=(t=(0,nN.useNeonDevelopmentDatabase)()).database,r=t.loading,a=(i=(0,nN.useNeonProductionDatabase)()).database,d=i.loading,h=(p=(0,nO.useHeliumDevelopmentDatabase)()).database,m=p.loading,g=p.heliumMigrationState,x=p.refetchHeliumState,y="USING_HELIUM"===g,{databases:(0,c.useMemo)(function(){var e=[];if(y)h&&e.push(h),a&&e.push((0,s._)((0,o._)({},a),{kind:"neon",maxSizeBytes:parseFloat(null!=(t=a.quotaLogicalSizeBytes)?t:"0")}));else{var t,r=[n,a].filter(Boolean);e.push.apply(e,(0,G._)(r.map(function(e){var t;return(0,s._)((0,o._)({},e),{kind:"neon",maxSizeBytes:parseFloat(null!=(t=e.quotaLogicalSizeBytes)?t:"0")})})))}return e},[y,a,h,n]),loading:r||d||m,heliumMigrationState:g,refetchHeliumState:x}),W=z.databases,q=z.loading,K=z.heliumMigrationState,Y=z.refetchHeliumState;return(0,u.jsx)(nH.Provider,{value:{selectedTab:j,selectTab:E,selectedPage:D,selectPage:O,selectedSchema:M,selectSchema:U,selectedTable:V,selectTable:$,selectedDatabaseId:I,selectDatabaseId:H,databases:W,loading:q,openPane:k,heliumMigrationState:K,refetchHeliumState:Y},children:b})},nW=function(){var e=(0,c.useContext)(nH);if(!e)throw Error("useDatabaseContext must be used within a DatabasePaneProvider");return e},nq=e.i(830675),nK=(0,c.createContext)(null),nY=function(){var e=(0,c.useContext)(nK);if(!e)throw Error("useRefreshContext must be used within a RefreshProvider");return e},nQ=function(e,t){var n=nY(),r=n.registerRefresh,i=n.unregisterRefresh;(0,c.useEffect)(function(){if(t)return r(e,t),function(){return i(e)}},[e,t,r,i])};function nX(e,t){return(0,c.useCallback)(function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(0,eE._)(function(){var n;return(0,Q._)(this,function(i){switch(i.label){case 0:t(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,e.apply(void 0,(0,G._)(r))];case 2:return i.sent(),[3,5];case 3:return n=i.sent(),nq.captureException(n),[3,5];case 4:return t(!1),[7];case 5:return[2]}})})()},[e,t])}var nZ=function(e){var t=e.children,n=(0,l._)((0,c.useState)(!1),2),r=n[0],i=n[1],a=nW().selectedPage,o=(0,c.useRef)(new Map),s=(0,c.useCallback)(function(e,t){o.current.set(e,t)},[]),d=(0,c.useCallback)(function(e){o.current.delete(e)},[]),f=nX(function(e){return(0,eE._)(function(){var t;return(0,Q._)(this,function(n){switch(n.label){case 0:return[4,null==(t=o.current.get(e))?void 0:t()];case 1:return n.sent(),[2]}})})()},i),p=nX(function(){return(0,eE._)(function(){var e,t;return(0,Q._)(this,function(n){switch(n.label){case 0:if("overview-page"!==a)return[3,2];return[4,Promise.all([null==(e=o.current.get(a))?void 0:e()].concat((0,G._)(Array.from(o.current.entries()).map(function(e){var t=(0,l._)(e,2),n=t[0],r=t[1];return(0,eE._)(function(){return(0,Q._)(this,function(e){switch(e.label){case 0:if(!n.startsWith("database-item-"))return[3,2];return[4,r()];case 1:return e.sent(),[3,3];case 2:return[2,Promise.resolve()];case 3:return[2]}})})()}))))];case 1:return n.sent(),[3,4];case 2:return[4,null==(t=o.current.get(a))?void 0:t()];case 3:n.sent(),n.label=4;case 4:return[2]}})})()},i);return(0,u.jsx)(nK.Provider,{value:{refreshing:r,registerRefresh:s,unregisterRefresh:d,refreshByKey:f,refreshCurrentContext:p},children:t})},nJ=e.i(832550),n0=e.i(927600),n1=e.i(416746),n2=e.i(961970),n3=e.i(851581),n5=tH.loadingStyle.backgroundPulse(t_.tokens.backgroundHigher,t_.tokens.backgroundHighest),n4=function(e){var t,n=e.name,r=e.storage,i=e.loading,a=e.onClick,o=e.isSelected,s=e.isFrozen,l=void 0!==s&&s,c=e.isEphemeral,d=(0,u.jsx)(tc.default,{});return l?d=(0,u.jsx)(n2.default,{}):void 0!==c&&c&&(d=(0,u.jsx)(n1.default,{color:"orange"})),(0,u.jsxs)(e5.View,{row:!0,align:"center",justify:"space-between",clsx:(t={},(0,j._)(t,n3.default.container,a),(0,j._)(t,n3.default.containerSelected,a&&void 0!==o&&o),(0,j._)(t,n3.default.containerNotClickable,!a),t),onClick:a,children:[(0,u.jsxs)(e5.View,{row:!0,align:"center",gap:12,children:[d,(0,u.jsxs)(e5.View,{children:[(0,u.jsx)(e3.Text,{variant:"subheadDefault",children:n}),i?(0,u.jsx)(e5.View,{css:n5,className:n3.default.skeletonText}):(0,u.jsx)(e3.Text,{variant:"small",color:"dimmer",children:l?"Database is paused":r})]})]}),a?(0,u.jsx)(n0.default,{}):null]})},n8=e.i(912790),n6=e.i(902071),n7=tH.loadingStyle.backgroundPulse(t_.tokens.backgroundHigher,t_.tokens.backgroundHighest),n9=function(e){var t=e.databases,n=e.onSelectDatabase,r=(0,nI.useDatabaseUsageSectionCurrentUserQuery)(),i=r.data,a=r.refetch,o=(0,c.useMemo)(function(){return function(e){var t,n,r=e.data;if((null==r||null==(t=r.currentUser)?void 0:t.__typename)==="CurrentUser"){var i=null==r||null==(n=r.currentUser)?void 0:n.usageInterval;if(i&&"UsageInterval"===i.__typename){var a=i.resources.neonComputeTime.usage;return{computeTimeUsageFormatted:(0,n8.toDisplaySize)(a,{resourceUsageType:"Hours"}),renewalInfo:new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"})}}}}({data:i})},[i]),s=void 0===o;return nQ("overview-page",a),(0,u.jsx)(e5.View,{row:!1,className:n6.default.wrapper,children:(0,u.jsxs)(e5.View,{p:16,gap:8,grow:1,children:[(0,u.jsx)(e3.Text,{variant:"subheadDefault",children:"Databases"}),(0,u.jsx)(e5.View,{className:n6.default.databaseGrid,children:t.map(function(e){return(0,u.jsx)(re,{database:e,onSelectDatabase:n},e.databaseId)})}),(0,u.jsxs)(e5.View,{gap:8,pt:8,children:[(0,u.jsx)(e3.Text,{variant:"subheadDefault",children:"Billing Period"}),s?(0,u.jsx)(e5.View,{css:n7,className:n6.default.skeletonText}):(0,u.jsxs)(e3.Text,{variant:"small",color:"dimmer",children:["Renews monthly, ",null==o?void 0:o.renewalInfo]})]}),(0,u.jsxs)(e5.View,{gap:8,pt:8,children:[(0,u.jsx)(e3.Text,{variant:"subheadDefault",children:"Hours of Compute Used"}),s?(0,u.jsx)(e5.View,{css:n7,className:n6.default.skeletonText}):(0,u.jsx)(e3.Text,{variant:"small",color:"dimmer",children:null==o?void 0:o.computeTimeUsageFormatted})]})]})})},re=function(e){var t=e.database,n=e.onSelectDatabase,r=nW().selectPage,i=(0,nJ.useGetDatabaseSize)(t),a=i.databaseSize,o=i.loading,s=i.refetch;nQ("database-item-".concat(t.databaseId),s);var l="".concat(nD(a)," / ").concat(nD(t.maxSizeBytes));return(0,u.jsx)(n4,{name:"neon"===t.kind&&"production"===t.type?"Production Database":"Development Database",isFrozen:"neon"===t.kind&&t.isFrozen,isEphemeral:"neon"===t.kind&&t.isEphemeral,loading:o,storage:l,onClick:function(){n(t),r("db-page")}})},rt=e.i(820228),rn=e.i(183035),rr=e.i(167392),ri=e.i(965863),ra=e.i(604963),ro=e.i(579134);function rs(e){return"neon"===e.kind&&"development"===e.type||"helium"===e.kind}function rl(e){return"neon"===e.kind&&"production"===e.type}function ru(e){var t=e.selectedDatabase;return(0,u.jsx)(eQ.Button,{size:"default",variant:"nofill",text:"".concat(rs(t)?"Development":"Production"," Database"),iconRight:(0,u.jsx)(rr.default,{size:12})})}function rc(e){var t=e.selectedDatabase,n=e.databases,r=e.onSelect,i=function(e){return rs(e)?"Development":"Production"};return(0,u.jsx)(eZ.PopupMenu,{label:i(t),items:n,trigger:(0,u.jsx)(ru,{selectedDatabase:t}),children:n.map(function(e){return(0,u.jsx)(eZ.MenuItem,{icon:(0,u.jsx)(rn.default,{visibility:e.databaseId===t.databaseId?"visible":"hidden"}),id:e.databaseId,label:i(e),onAction:function(){r(e)},isDisabled:e.databaseId===t.databaseId},e.databaseId)})})}function rd(e){var t=e.dismissDatabaseTour;return(0,u.jsxs)(e5.View,{clsx:ro.default.productionDatabaseTourContent,gap:12,p:16,children:[(0,u.jsx)(e3.Text,{variant:"subheadDefault",children:"Not sure where your data went? Check your Production database."}),(0,u.jsx)(e3.Text,{children:"Replit now uses separate production and development databases to keep your live data safe."}),(0,u.jsxs)(e5.View,{row:!0,align:"center",justify:"end",gap:8,children:[(0,u.jsx)(t4.ButtonLink,{href:"https://docs.replit.com/cloud-services/storage-and-databases/production-databases",target:"_blank",text:"Learn more"}),(0,u.jsx)(eQ.Button,{onClick:t,text:"Got it",colorway:"primary"})]})]})}function rf(e){var t=e.onSelect,n=e.selectedDatabase,r=e.databases,i=nW().selectedPage,a=r.some(rl),o=(0,ta.default)("workspace","workspace-database-pane-toggle-tour"),s=o.shouldDisplay,d=o.register,f=o.dismiss,p=(0,l._)((0,c.useState)(!0),2),h=p[0],m=p[1],g=a&&"db-page"===i&&rs(n),x=(0,ri.useActivePane)(),y=(null==x?void 0:x.type)==="neon";(0,c.useEffect)(function(){g&&d()},[g,d]);var b=g&&s&&h&&y;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(e5.View,{children:b?(0,u.jsxs)(ra.PopoverTrigger,{isOpen:b,onOpenChange:m,label:"Database toggle tour",placement:"bottom",arrow:!0,offset:4,children:[(0,u.jsx)("div",{children:(0,u.jsx)(rc,{selectedDatabase:n,databases:r,onSelect:t})}),(0,u.jsx)(rd,{dismissDatabaseTour:f})]}):(0,u.jsx)(rc,{selectedDatabase:n,databases:r,onSelect:t})})})}var rp=e.i(61313),rh=function(e){var t=e.onSelectDatabase,n=e.selectedDatabase,r=e.databases,i=e.onShowAllDatabases,a=nW(),o=a.selectedPage,s=a.selectedTab,l=nY(),c=l.refreshCurrentContext,d=l.refreshing;return(0,u.jsxs)(e5.View,{justify:"space-between",row:!0,px:8,py:4,align:"center",className:rp.default.selectorBar,children:[(0,u.jsxs)(e5.View,{row:!0,align:"center",children:[(0,u.jsx)(eQ.Button,{variant:"nofill",text:"All Databases",onClick:i}),"overview-page"===o?null:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(n0.default,{}),(0,u.jsx)(rf,{onSelect:t,selectedDatabase:n,databases:r})]})]}),"drizzle-studio"===s?null:(0,u.jsx)(eQ.Button,{iconLeft:d?(0,u.jsx)(eD.default,{}):(0,u.jsx)(rt.default,{}),variant:"nofill",text:"Refresh",size:"small",onClick:c})]})},rm=e.i(452831),rg=e.i(87995),rv=e.i(850834),rx=e.i(368964);function ry(){var e=(0,tY._)(["\n  fragment CurrentUserUsageBasedBillingSummary on CurrentUser {\n    __typename\n    usageBasedBilling {\n      __typename\n      ... on UserUsageBasedBillingSummary {\n        capabilities {\n          canUseUsageBasedBilling\n          explanation\n          hasPaymentMethod\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return ry=function(){return e},e}var rb=(0,tQ.gql)(ry());function rw(){var e=(0,tY._)(["\n  query DatabaseFrozen {\n    currentUser {\n      id\n      userSubscriptionType\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return rw=function(){return e},e}var r_={},rk=(0,tQ.gql)(rw(),rb),rS=e.i(196127),rC=e.i(549645),rj=e.i(416298),rT=e.i(330666);let rE={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8]))\\d{3}|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4]))|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|22"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","[24-689]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]]],BL:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:395|76[018])\\d|475[0-5])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","(?:[2-467]\\d\\d|8001)\\d{5}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[23]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-9]|33|44|66|77|88)|622)[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","[189]\\d{8}|[1-68]\\d{6}",[7,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","10(?:10|9[56])|2[0-57-9](?:100|9[56])"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:60\\d\\d|9101)\\d{6}|(?:1\\d|3)\\d{9}",[10,11],[["(\\d{3})(\\d{7})","$1 $2",["6"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0(4(?:[14]4|56)|[579])?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","[27]\\d{6,7}|[34]\\d{5,7}|63\\d{6}|(?:5|8\\d\\d)\\d{7}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[0568]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:[0-5]\\d\\d|69[7-9]|70[0-79])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-2]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","[56]94\\d{6}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[56]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:395|76[018])\\d|475[0-5])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([3-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","9008\\d{3}|(?:[2-467]\\d\\d|510|862)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","(?:[2-489]\\d|55)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[1-9]\\d{8}|3[2-9]\\d{7}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],0,0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0",0,"(000[259]\\d{6})$|(?:(?:003768)0?)|0","$1"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[25]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[4-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(8-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",1]],"8",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{5})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29[1289]|389)","529(?:1[1-46-9]|2[013-8]|90)|5(?:298|389)[0-46-9]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|892","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|892"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5293[01]\\d{4}|5(?:2(?:[0-25-7]\\d|3[1-578]|4[02-46-8]|8[0235-7]|9[0-289])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[0189]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[017]\\d|2[0-2]|6[0-8]|8[0-3]))\\d{6}"],["80\\d{7}"],["89\\d{7}"],0,0,0,0,["592(?:4[0-2]|93)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:395|76[018])\\d|475[0-5])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","596\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","1(?:(?:[27]2|44|99)[1-9]|65[0-689])\\d{7}|(?:1(?:[01]\\d|2[13-9]|[35][1-9]|4[0-35-9]|6[0-46-9]|7[013-9]|8[1-79]|9[1-8])|[2-9]\\d)\\d{8}",[10,11],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],0,1],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],0,1],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],0,1]],"01",0,"0(?:[12]|4[45])|1",0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[047]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","(?:[124-7]|9\\d{3})\\d{6}|[1-9]\\d{7}|[78]\\d{9,13}",[7,8,10,11,12,13,14],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[47]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|80\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-6])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[16]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-5]))\\d{4}"],["69(?:2\\d\\d|3(?:[06][0-6]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-27]|8[0-8]|9[0-479]))\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-5]|76(?:2[27]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[2378]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[237-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","(?:[1-6]|[7-9]\\d\\d)\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","800\\d{4}|(?:[249]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-8]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|77|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|[89]00\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|[69]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","[0-57-9]\\d{8}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[04]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","[1-6]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["5056(?:[0-35-9]\\d|4[46])\\d{4}|(?:4722|505[2-57-9]|983[29])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[01356]|3[0-24679]|4[167]|5[0-2]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],UY:["598","0(?:0|1[3-9]\\d)","(?:0004|4)\\d{9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[7,8,10,13],[["(\\d{3})(\\d{4})","$1 $2",["405|8|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["4"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","810","200\\d{6}|(?:33|[5-79]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|5[0-4]|6\\d|[78]0)\\d{4}"],["639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"[0-36-9]\\d{8}",[9],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-36-9]"]]],0,0,0,0,0,0,[0,["[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,0,0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[013-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}},rR={ext:"ext.",country:"Phone number country",phone:"Phone",AB:"Abkhazia",AC:"Ascension Island",AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"land Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthlemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Cote d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CW:"Curaao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands",FM:"Federated States of Micronesia",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"North Korea",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Laos",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MF:"Saint Martin (French Part)",MG:"Madagascar",MH:"Marshall Islands",MK:"North Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",OS:"South Ossetia",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Serbia",RU:"Russia",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten",SY:"Syria",SZ:"Swaziland",TA:"Tristan da Cunha",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See (Vatican City State)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Kosovo",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe",ZZ:"International"};var rI=e.i(203537),rA=rI.default.shape({country_calling_codes:rI.default.object.isRequired,countries:rI.default.object.isRequired}),rP=rI.default.objectOf(rI.default.string),rD=e.i(944967);function rO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rN(e,t){for(var n,r=0,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return rO(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rO(e,void 0)}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t.split(""));!(n=i()).done;)n.value===e&&r++;return r}function rM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rL(e,t){void 0!==t&&(function(){if("undefined"!=typeof navigator)return rB.test(navigator.userAgent)}()?setTimeout(function(){return e.setSelectionRange(t,t)},0):e.setSelectionRange(t,t))}var rB=/Android/i;function rV(e,t,n,r,i){var a=function(e,t,n){for(var r="",i=0,a=0;a<e.length;){var o=n(e[a],r);void 0!==o&&(r+=o,void 0!==t&&(t===a?i=r.length-1:t>a&&(i=r.length))),a++}return void 0===t&&(i=r.length),{value:r,caret:i}}(e.value,e.selectionStart,t),o=a.value,s=a.caret;if(r){var l=function(e,t,n){switch(n){case"Backspace":t>0&&(e=e.slice(0,t-1)+e.slice(t),t--);break;case"Delete":e=e.slice(0,t)+e.slice(t+1)}return{value:e,caret:t}}(o,s,r);o=l.value,s=l.caret}var u=function(e,t,n){"string"==typeof n&&(n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",n=arguments.length>2?arguments[2]:void 0;if(!e)return function(e){return{text:e}};var r=rN(t,e);return function(i){if(!i)return{text:"",template:e};for(var a,o=0,s="",l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return rM(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rM(e,void 0)}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e.split(""));!(a=l()).done;){var u=a.value;if(u!==t){s+=u;continue}if(s+=i[o],++o===i.length&&i.length<r)break}return n&&(s=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ",i=e.length,a=rN("(",e)-rN(")",e);a>0&&i<t.length;)e+=t[i].replace(n,r),")"===t[i]&&a--,i++;return e}(s,e)),{text:s,template:e}}}(n));var r=n(e)||{},i=r.text,a=r.template;if(void 0===i&&(i=e),a)if(void 0===t)t=i.length;else{for(var o=0,s=!1,l=-1;o<i.length&&o<a.length;){if(i[o]!==a[o]){if(0===t){s=!0,t=o;break}l=o,t--}o++}s||(t=l+1)}return{text:i,caret:t}}(o,s,n),c=u.text;s=u.caret,e.value=c,rL(e,s),i(o)}var rF=["value","parse","format","inputComponent","onChange","onKeyDown"];function rU(){return(rU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rG(e,t){var n=e.value,r=e.parse,i=e.format,a=e.inputComponent,o=e.onChange,s=e.onKeyDown,l=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,rF),u=(0,c.useRef)(),d=(0,c.useCallback)(function(e){u.current=e,t&&("function"==typeof t?t(e):t.current=e)},[t]),f=(0,c.useCallback)(function(e){rV(u.current,r,i,void 0,o)},[u,r,i,o]),p=(0,c.useCallback)(function(e){s&&s(e);var t=u.current;if(!t.hasAttribute("readonly")){var n=function(e){switch(e.keyCode){case 8:return"Backspace";case 46:return"Delete"}}(e);switch(n){case"Delete":case"Backspace":e.preventDefault();var a,l,c,d=function(e){if(e.selectionStart!==e.selectionEnd)return{start:e.selectionStart,end:e.selectionEnd}}(t);if(d){return a=t,l=d,c=a.value,a.value=c=c.slice(0,l.start)+c.slice(l.end),rL(a,l.start),rV(t,r,i,void 0,o)}return rV(t,r,i,n,o)}}},[u,r,i,o,s]);return c.default.createElement(a,rU({},l,{ref:d,value:i(null==n?"":n).text,onKeyDown:p,onChange:f}))}(rG=c.default.forwardRef(rG)).propTypes={parse:rI.default.func.isRequired,format:rI.default.func.isRequired,inputComponent:rI.default.elementType.isRequired,type:rI.default.string.isRequired,value:rI.default.string,onChange:rI.default.func.isRequired,onKeyDown:rI.default.func,onCut:rI.default.func,onPaste:rI.default.func},rG.defaultProps={inputComponent:"input",type:"text"};let r$=rG;function rH(e,t){e=e.split("-"),t=t.split("-");for(var n=e[0].split("."),r=t[0].split("."),i=0;i<3;i++){var a=Number(n[i]),o=Number(r[i]);if(a>o)return 1;if(o>a)return -1;if(!isNaN(a)&&isNaN(o))return 1;if(isNaN(a)&&!isNaN(o))return -1}return e[1]&&t[1]?e[1]>t[1]?1:e[1]<t[1]?-1:0:!e[1]&&t[1]?1:e[1]&&!t[1]?-1:0}function rz(e){return(rz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rW(e,t){if(!(0,I._)(e,t))throw TypeError("Cannot call a class as a function")}function rq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rK(e,t,n){return t&&rq(e.prototype,t),n&&rq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var rY=" ext. ",rQ=/^\d+$/,rX=function(){function e(t){rW(this,e),function(e){if(!e)throw Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!r3(e)||!r3(e.countries))throw Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(r3(e)?"an object of shape: { "+Object.keys(e).join(", ")+" }":"a "+r5(e)+": "+e,"."))}(t),this.metadata=t,r6.call(this,t)}return rK(e,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(e){return"001"!==e})}},{key:"getCountryMetadata",value:function(e){return this.metadata.countries[e]}},{key:"nonGeographic",value:function(){if(!this.v1&&!this.v2&&!this.v3)return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(e){return void 0!==this.getCountryMetadata(e)}},{key:"hasCallingCode",value:function(e){if(this.getCountryCodesForCallingCode(e))return!0;if(this.nonGeographic()){if(this.nonGeographic()[e])return!0}else{var t=this.countryCallingCodes()[e];if(t&&1===t.length&&"001"===t[0])return!0}}},{key:"isNonGeographicCallingCode",value:function(e){return this.nonGeographic()?!!this.nonGeographic()[e]:!this.getCountryCodesForCallingCode(e)}},{key:"country",value:function(e){return this.selectNumberingPlan(e)}},{key:"selectNumberingPlan",value:function(e,t){if(e&&rQ.test(e)&&(t=e,e=null),e&&"001"!==e){if(!this.hasCountry(e))throw Error("Unknown country: ".concat(e));this.numberingPlan=new rZ(this.getCountryMetadata(e),this)}else if(t){if(!this.hasCallingCode(t))throw Error("Unknown calling code: ".concat(t));this.numberingPlan=new rZ(this.getNumberingPlanMetadata(t),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(e){var t=this.countryCallingCodes()[e];if(t){if(1===t.length&&3===t[0].length)return;return t}}},{key:"getCountryCodeForCallingCode",value:function(e){var t=this.getCountryCodesForCallingCode(e);if(t)return t[0]}},{key:"getNumberingPlanMetadata",value:function(e){var t=this.getCountryCodeForCallingCode(e);if(t)return this.getCountryMetadata(t);if(this.nonGeographic()){var n=this.nonGeographic()[e];if(n)return n}else{var r=this.countryCallingCodes()[e];if(r&&1===r.length&&"001"===r[0])return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(e){return this.numberingPlan.type(e)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(e){return this.selectNumberingPlan(e)}},{key:"hasSelectedNumberingPlan",value:function(){return void 0!==this.numberingPlan}}]),e}(),rZ=function(){function e(t,n){rW(this,e),this.globalMetadataObject=n,this.metadata=t,r6.call(this,n.metadata)}return rK(e,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(e){return e[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var e=this;return(this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[]).map(function(t){return new rJ(t,e)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(e){return e[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return(!this.types()||0!==this.types().length)&&!!this.types()}},{key:"type",value:function(e){if(this.hasTypes()&&r2(this.types(),e))return new r1(r2(this.types(),e),this)}},{key:"ext",value:function(){return this.v1||this.v2?rY:this.metadata[13]||rY}}]),e}(),rJ=function(){function e(t,n){rW(this,e),this._format=t,this.metadata=n}return rK(e,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!(!this.nationalPrefixFormattingRule()||r0.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),e}(),r0=/^\(?\$1\)?$/,r1=function(){function e(t,n){rW(this,e),this.type=t,this.metadata=n}return rK(e,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),e}();function r2(e,t){switch(t){case"FIXED_LINE":return e[0];case"MOBILE":return e[1];case"TOLL_FREE":return e[2];case"PREMIUM_RATE":return e[3];case"PERSONAL_NUMBER":return e[4];case"VOICEMAIL":return e[5];case"UAN":return e[6];case"PAGER":return e[7];case"VOIP":return e[8];case"SHARED_COST":return e[9]}}var r3=function(e){return"object"===rz(e)},r5=function(e){return rz(e)};function r4(e,t){if((t=new rX(t)).hasCountry(e))return t.country(e).countryCallingCode();throw Error("Unknown country: ".concat(e))}function r8(e,t){return t.countries.hasOwnProperty(e)}function r6(e){var t=e.version;"number"==typeof t?(this.v1=1===t,this.v2=2===t,this.v3=3===t,this.v4=4===t):t?-1===rH(t,"1.2.0")?this.v2=!0:-1===rH(t,"1.7.35")?this.v3=!0:this.v4=!0:this.v1=!0}function r7(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r9(e,t){return function e(t,n,r){var i=r.type(n),a=i&&i.possibleLengths()||r.possibleLengths();if(!a)return"IS_POSSIBLE";if("FIXED_LINE_OR_MOBILE"===n){if(!r.type("FIXED_LINE"))return e(t,"MOBILE",r);var o=r.type("MOBILE");o&&(a=function(e,t){for(var n,r=e.slice(),i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r7(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r7(e,void 0)}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);!(n=i()).done;){var a=n.value;0>e.indexOf(a)&&r.push(a)}return r.sort(function(e,t){return e-t})}(a,o.possibleLengths()))}else if(n&&!i)return"INVALID_LENGTH";var s=t.length,l=a[0];return l===s?"IS_POSSIBLE":l>s?"TOO_SHORT":a[a.length-1]<s?"TOO_LONG":a.indexOf(s,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}(e,void 0,t)}function ie(e,t){return"IS_POSSIBLE"===r9(e,t)}function it(e,t){return e=e||"",RegExp("^(?:"+t+")$").test(e)}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ii=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function ia(e,t,n){if(t=t||{},e.country){(n=new rX(n)).selectNumberingPlan(e.country,e.countryCallingCode);var r=t.v2?e.nationalNumber:e.phone;if(it(r,n.nationalNumberPattern())){if(io(r,"FIXED_LINE",n))return n.type("MOBILE")&&""===n.type("MOBILE").pattern()||!n.type("MOBILE")||io(r,"MOBILE",n)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var i,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ir(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(e,void 0)}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(ii);!(i=a()).done;){var o=i.value;if(io(r,o,n))return o}}}}function io(e,t,n){return!(!(t=n.type(t))||!t.pattern()||t.possibleLengths()&&0>t.possibleLengths().indexOf(e.length))&&it(e,t.pattern())}var is="0-9---",il="".concat("--").concat("/").concat(".").concat(" ").concat("()\\[\\]").concat("~"),iu="+";function ic(e){return e.replace(RegExp("[".concat(il,"]+"),"g")," ").trim()}var id=/(\$\d)/;function ip(e,t,n){var r=n.useInternationalFormat,i=n.withNationalPrefix;n.carrierCode,n.metadata;var a=e.replace(new RegExp(t.pattern()),r?t.internationalFormat():i&&t.nationalPrefixFormattingRule()?t.format().replace(id,t.nationalPrefixFormattingRule()):t.format());return r?ic(a):a}var ih=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function im(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ig(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ig(Object(n),!0).forEach(function(t){var r,i,a;r=e,i=t,a=n[t],i in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ig(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ix={formatExtension:function(e,t,n){return"".concat(e).concat(n.ext()).concat(t)}};function iy(e,t,n,r,i){var a=function(e,t){for(var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return im(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return im(e,void 0)}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(n=r()).done;){var i=n.value;if(i.leadingDigitsPatterns().length>0){var a=i.leadingDigitsPatterns()[i.leadingDigitsPatterns().length-1];if(0!==t.search(a))continue}if(it(t,i.pattern()))return i}}(r.formats(),e);return a?ip(e,a,{useInternationalFormat:"INTERNATIONAL"===n,withNationalPrefix:!a.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!i||!1!==i.nationalPrefix,carrierCode:t,metadata:r}):e}function ib(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ib(Object(n),!0).forEach(function(t){var r,i,a;r=e,i=t,a=n[t],i in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ib(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var i_=function(){var e;function t(e,n,r){if(!(0,I._)(this,t))throw TypeError("Cannot call a class as a function");if(!e)throw TypeError("`country` or `countryCallingCode` not passed");if(!n)throw TypeError("`nationalNumber` not passed");if(!r)throw TypeError("`metadata` not passed");var i=function(e,t){var n,r,i=new rX(t);return/^[A-Z]{2}$/.test(e)?(n=e,i.selectNumberingPlan(n),r=i.countryCallingCode()):r=e,{country:n,countryCallingCode:r}}(e,r),a=i.country,o=i.countryCallingCode;this.country=a,this.countryCallingCode=o,this.nationalNumber=n,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return r}}return e=[{key:"setExt",value:function(e){this.ext=e}},{key:"getPossibleCountries",value:function(){var e,t,n,r;return this.country?[this.country]:(e=this.countryCallingCode,t=this.nationalNumber,(r=new rX(n=this.getMetadata()).getCountryCodesForCallingCode(e))?r.filter(function(e){var r,i,a;return r=t,i=e,(a=new rX(n)).selectNumberingPlan(i),a.numberingPlan.possibleLengths().indexOf(r.length)>=0}):[])}},{key:"isPossible",value:function(){return function(e,t,n){if(void 0===t&&(t={}),n=new rX(n),t.v2){if(!e.countryCallingCode)throw Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}else{if(!e.phone)return!1;if(e.country){if(!n.hasCountry(e.country))throw Error("Unknown country: ".concat(e.country));n.country(e.country)}else{if(!e.countryCallingCode)throw Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}}if(n.possibleLengths())return ie(e.phone||e.nationalNumber,n);if(e.countryCallingCode&&n.isNonGeographicCallingCode(e.countryCallingCode))return!0;throw Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){var e,t;return(e=e={v2:!0},(t=new rX(t=this.getMetadata())).selectNumberingPlan(this.country,this.countryCallingCode),t.hasTypes())?void 0!==ia(this,e,t.metadata):it(e.v2?this.nationalNumber:this.phone,t.nationalNumberPattern())}},{key:"isNonGeographic",value:function(){return new rX(this.getMetadata()).isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(e){return this.number===e.number&&this.ext===e.ext}},{key:"getType",value:function(){return ia(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(e,t){return function(e,t,n,r){if(n=n?iv(iv({},ix),n):ix,r=new rX(r),e.country&&"001"!==e.country){if(!r.hasCountry(e.country))throw Error("Unknown country: ".concat(e.country));r.country(e.country)}else{if(!e.countryCallingCode)return e.phone||"";r.selectNumberingPlan(e.countryCallingCode)}var i,a,o,s,l,u,c,d,f,p,h,m,g,x=r.countryCallingCode(),y=n.v2?e.nationalNumber:e.phone;switch(t){case"NATIONAL":if(!y)return"";return i=g=iy(y,e.carrierCode,"NATIONAL",r,n),a=e.ext,o=r,s=n.formatExtension,a?s(i,a,o):i;case"INTERNATIONAL":if(!y)return"+".concat(x);return g=iy(y,null,"INTERNATIONAL",r,n),l=g="+".concat(x," ").concat(g),u=e.ext,c=r,d=n.formatExtension,u?d(l,u,c):l;case"E.164":return"+".concat(x).concat(y);case"RFC3966":var b={number:"+".concat(x).concat(y),ext:e.ext},w=b.number,_=b.ext;if(!w)return"";if("+"!==w[0])throw Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(w).concat(_?";ext="+_:"");case"IDD":if(!n.fromCountry)return;return f=function(e,t,n,r,i){if(r4(r,i.metadata)===n){var a,o,s=iy(e,t,"NATIONAL",i);return"1"===n?n+" "+s:s}var l=(a=void 0,((o=new rX(i.metadata)).selectNumberingPlan(r,a),o.defaultIDDPrefix())?o.defaultIDDPrefix():ih.test(o.IDDPrefix())?o.IDDPrefix():void 0);if(l)return"".concat(l," ").concat(n," ").concat(iy(e,null,"INTERNATIONAL",i))}(y,e.carrierCode,x,n.fromCountry,r),p=e.ext,h=r,m=n.formatExtension,p?m(f,p,h):f;default:throw Error('Unknown "format" argument passed to "formatNumber()": "'.concat(t,'"'))}}(this,e,t?iw(iw({},t),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(e){return this.format("NATIONAL",e)}},{key:"formatInternational",value:function(e){return this.format("INTERNATIONAL",e)}},{key:"getURI",value:function(e){return this.format("RFC3966",e)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(),ik=function(){var e;function t(e){var n=e.onCountryChange,r=e.onCallingCodeChange;if(!(0,I._)(this,t))throw TypeError("Cannot call a class as a function");this.onCountryChange=n,this.onCallingCodeChange=r}return e=[{key:"reset",value:function(e){var t=e.country,n=e.callingCode;this.international=!1,this.missingPlus=!1,this.IDDPrefix=void 0,this.callingCode=void 0,this.digits="",this.resetNationalSignificantNumber(),this.initCountryAndCallingCode(t,n)}},{key:"resetNationalSignificantNumber",value:function(){this.nationalSignificantNumber=this.getNationalDigits(),this.nationalSignificantNumberMatchesInput=!0,this.nationalPrefix=void 0,this.carrierCode=void 0,this.complexPrefixBeforeNationalSignificantNumber=void 0}},{key:"update",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];this[r]=e[r]}}},{key:"initCountryAndCallingCode",value:function(e,t){this.setCountry(e),this.setCallingCode(t)}},{key:"setCountry",value:function(e){this.country=e,this.onCountryChange(e)}},{key:"setCallingCode",value:function(e){this.callingCode=e,this.onCallingCodeChange(e,this.country)}},{key:"startInternationalNumber",value:function(e,t){this.international=!0,this.initCountryAndCallingCode(e,t)}},{key:"appendDigits",value:function(e){this.digits+=e}},{key:"appendNationalSignificantNumberDigits",value:function(e){this.nationalSignificantNumber+=e}},{key:"getNationalDigits",value:function(){return this.international?this.digits.slice((this.IDDPrefix?this.IDDPrefix.length:0)+(this.callingCode?this.callingCode.length:0)):this.digits}},{key:"getDigitsWithoutInternationalPrefix",value:function(){return this.international&&this.IDDPrefix?this.digits.slice(this.IDDPrefix.length):this.digits}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function iS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var iC=/x/;function ij(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}function iT(e,t){return")"===e[t]&&t++,function(e){for(var t=[],n=0;n<e.length;)"("===e[n]?t.push(n):")"===e[n]&&t.pop(),n++;var r=0,i="";t.push(e.length);for(var a=0;a<t.length;a++){var o=t[a];i+=e.slice(r,o),r=o+1}return i}(e.slice(0,t))}function iE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var iR={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};function iI(e){for(var t,n="",r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return iE(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iE(e,void 0)}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e.split(""));!(t=r()).done;){var i=iR[t.value];i&&(n+=i)}return n}function iA(e,t,n){var r,i,a=n.metadata,o=n.useNationalPrefixFormattingRule,s=n.getSeparatorAfterNationalPrefix,l=ip(e.nationalSignificantNumber,t,{carrierCode:e.carrierCode,useInternationalFormat:e.international,withNationalPrefix:o,metadata:a});if(!o&&(e.nationalPrefix?l=e.nationalPrefix+s(t)+l:e.complexPrefixBeforeNationalSignificantNumber&&(l=e.complexPrefixBeforeNationalSignificantNumber+" "+l)),r=l,i=e,iI(r)===i.getNationalDigits())return l}var iP=function(){var e;function t(){if(!(0,I._)(this,t))throw TypeError("Cannot call a class as a function")}return e=[{key:"parse",value:function(e){if(this.context=[{or:!0,instructions:[]}],this.parsePattern(e),1!==this.context.length)throw Error("Non-finalized contexts left when pattern parse ended");var t=this.context[0],n=t.branches,r=t.instructions;if(n)return{op:"|",args:n.concat([iN(r)])};if(0===r.length)throw Error("Pattern is required");return 1===r.length?r[0]:r}},{key:"startContext",value:function(e){this.context.push(e)}},{key:"endContext",value:function(){this.context.pop()}},{key:"getContext",value:function(){return this.context[this.context.length-1]}},{key:"parsePattern",value:function(e){if(!e)throw Error("Pattern is required");var t=e.match(iO);if(!t){if(iD.test(e))throw Error("Illegal characters found in a pattern: ".concat(e));this.getContext().instructions=this.getContext().instructions.concat(e.split(""));return}var n=t[1],r=e.slice(0,t.index),i=e.slice(t.index+n.length);switch(n){case"(?:":r&&this.parsePattern(r),this.startContext({or:!0,instructions:[],branches:[]});break;case")":if(!this.getContext().or)throw Error('")" operator must be preceded by "(?:" operator');if(r&&this.parsePattern(r),0===this.getContext().instructions.length)throw Error('No instructions found after "|" operator in an "or" group');var a=this.getContext().branches;a.push(iN(this.getContext().instructions)),this.endContext(),this.getContext().instructions.push({op:"|",args:a});break;case"|":if(!this.getContext().or)throw Error('"|" operator can only be used inside "or" groups');if(r&&this.parsePattern(r),!this.getContext().branches)if(1===this.context.length)this.getContext().branches=[];else throw Error('"branches" not found in an "or" group context');this.getContext().branches.push(iN(this.getContext().instructions)),this.getContext().instructions=[];break;case"[":r&&this.parsePattern(r),this.startContext({oneOfSet:!0});break;case"]":if(!this.getContext().oneOfSet)throw Error('"]" operator must be preceded by "[" operator');this.endContext(),this.getContext().instructions.push({op:"[]",args:function(e){for(var t=[],n=0;n<e.length;){if("-"===e[n]){if(0===n||n===e.length-1)throw Error("Couldn't parse a one-of set pattern: ".concat(e));for(var r=e[n-1].charCodeAt(0)+1,i=e[n+1].charCodeAt(0)-1,a=r;a<=i;)t.push(String.fromCharCode(a)),a++}else t.push(e[n]);n++}return t}(r)});break;default:throw Error("Unknown operator: ".concat(n))}i&&this.parsePattern(i)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(),iD=/[\(\)\[\]\?\:\|]/,iO=RegExp("(\\||\\(\\?\\:|\\)|\\[|\\])");function iN(e){return 1===e.length?e[0]:e}function iM(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return iL(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iL(e,void 0)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function iL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var iB=function(){var e;function t(e){if(!(0,I._)(this,t))throw TypeError("Cannot call a class as a function");this.matchTree=new iP().parse(e)}return e=[{key:"match",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.allowOverflow;if(!e)throw Error("String is required");var r=function e(t,n,r){if("string"==typeof n){var i=t.join("");return 0===n.indexOf(i)?t.length===n.length?{match:!0,matchedChars:t}:{partialMatch:!0}:0===i.indexOf(n)?r&&t.length>n.length?{overflow:!0}:{match:!0,matchedChars:t.slice(0,n.length)}:void 0}if(Array.isArray(n)){for(var a=t.slice(),o=0;o<n.length;){var s=e(a,n[o],r&&o===n.length-1);if(!s)return;if(s.overflow)return s;if(s.match){if(0===(a=a.slice(s.matchedChars.length)).length)if(o===n.length-1)return{match:!0,matchedChars:t};else return{partialMatch:!0}}else if(s.partialMatch)return{partialMatch:!0};else throw Error("Unsupported match result:\n".concat(JSON.stringify(s,null,2)));o++}return r?{overflow:!0}:{match:!0,matchedChars:t.slice(0,t.length-a.length)}}switch(n.op){case"|":for(var l,u,c=iM(n.args);!(u=c()).done;){var d=e(t,u.value,r);if(d)if(d.overflow)return d;else if(d.match)return{match:!0,matchedChars:d.matchedChars};else if(d.partialMatch)l=!0;else throw Error("Unsupported match result:\n".concat(JSON.stringify(d,null,2)))}if(l)return{partialMatch:!0};return;case"[]":for(var f,p=iM(n.args);!(f=p()).done;){var h=f.value;if(t[0]===h){if(1===t.length)return{match:!0,matchedChars:t};if(r)return{overflow:!0};return{match:!0,matchedChars:[h]}}}return;default:throw Error("Unsupported instruction tree: ".concat(n))}}(e.split(""),this.matchTree,!0);if(r&&r.match&&delete r.matchedChars,!r||!r.overflow||n)return r}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function iV(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return iF(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iF(e,void 0)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function iF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var iU=ij("9",15),iG=/[- ]/,i$=RegExp("["+il+"]*\\$1["+il+"]*(\\$\\d["+il+"]*)*$"),iH=function(){var e;function t(e){e.state;var n=e.metadata;if(!(0,I._)(this,t))throw TypeError("Cannot call a class as a function");this.metadata=n,this.resetFormat()}return e=[{key:"resetFormat",value:function(){this.chosenFormat=void 0,this.template=void 0,this.nationalNumberTemplate=void 0,this.populatedNationalNumberTemplate=void 0,this.populatedNationalNumberTemplatePosition=-1}},{key:"reset",value:function(e,t){this.resetFormat(),e?(this.isNANP="1"===e.callingCode(),this.matchingFormats=e.formats(),t.nationalSignificantNumber&&this.narrowDownMatchingFormats(t)):(this.isNANP=void 0,this.matchingFormats=[])}},{key:"format",value:function(e,t){var n=this;if("IS_POSSIBLE"===r9(t.nationalSignificantNumber,this.metadata))for(var r,i=iV(this.matchingFormats);!(r=i()).done;){var a=r.value,o=function(e,t,n){var r=n.metadata,i=n.shouldTryNationalPrefixFormattingRule,a=n.getSeparatorAfterNationalPrefix;if(new RegExp("^(?:".concat(t.pattern(),")$")).test(e.nationalSignificantNumber))return function(e,t,n){var r=n.metadata,i=n.shouldTryNationalPrefixFormattingRule,a=n.getSeparatorAfterNationalPrefix;if(e.nationalSignificantNumber,e.international,e.nationalPrefix,e.carrierCode,i(t)){var o=iA(e,t,{useNationalPrefixFormattingRule:!0,getSeparatorAfterNationalPrefix:a,metadata:r});if(o)return o}return iA(e,t,{useNationalPrefixFormattingRule:!1,getSeparatorAfterNationalPrefix:a,metadata:r})}(e,t,{metadata:r,shouldTryNationalPrefixFormattingRule:i,getSeparatorAfterNationalPrefix:a})}(t,a,{metadata:this.metadata,shouldTryNationalPrefixFormattingRule:function(e){return n.shouldTryNationalPrefixFormattingRule(e,{international:t.international,nationalPrefix:t.nationalPrefix})},getSeparatorAfterNationalPrefix:function(e){return n.getSeparatorAfterNationalPrefix(e)}});if(o)return this.resetFormat(),this.chosenFormat=a,this.setNationalNumberTemplate(o.replace(/\d/g,"x"),t),this.populatedNationalNumberTemplate=o,this.populatedNationalNumberTemplatePosition=this.template.lastIndexOf("x"),o}return this.formatNationalNumberWithNextDigits(e,t)}},{key:"formatNationalNumberWithNextDigits",value:function(e,t){var n=this.chosenFormat,r=this.chooseFormat(t);if(r)if(r===n)return this.formatNextNationalNumberDigits(e);else return this.formatNextNationalNumberDigits(t.getNationalDigits())}},{key:"narrowDownMatchingFormats",value:function(e){var t=this,n=e.nationalSignificantNumber,r=e.nationalPrefix,i=e.international,a=n.length-3;a<0&&(a=0),this.matchingFormats=this.matchingFormats.filter(function(e){return t.formatSuits(e,i,r)&&t.formatMatches(e,n,a)}),this.chosenFormat&&-1===this.matchingFormats.indexOf(this.chosenFormat)&&this.resetFormat()}},{key:"formatSuits",value:function(e,t,n){return!(n&&!e.usesNationalPrefix()&&!e.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!t&&!n&&e.nationalPrefixIsMandatoryWhenFormattingInNationalFormat())}},{key:"formatMatches",value:function(e,t,n){var r=e.leadingDigitsPatterns().length;if(0===r)return!0;n=Math.min(n,r-1);var i=e.leadingDigitsPatterns()[n];if(t.length<3)try{return void 0!==new iB(i).match(t,{allowOverflow:!0})}catch(e){return console.error(e),!0}return new RegExp("^(".concat(i,")")).test(t)}},{key:"getFormatFormat",value:function(e,t){return t?e.internationalFormat():e.format()}},{key:"chooseFormat",value:function(e){for(var t,n=this,r=iV(this.matchingFormats.slice());!(t=r()).done;){var i=function(){var r=t.value;return n.chosenFormat===r?"break":i$.test(n.getFormatFormat(r,e.international))?n.createTemplateForFormat(r,e)?(n.chosenFormat=r,"break"):(n.matchingFormats=n.matchingFormats.filter(function(e){return e!==r}),"continue"):"continue"}();if("break"===i)break;if("continue"===i)continue}return this.chosenFormat||this.resetFormat(),this.chosenFormat}},{key:"createTemplateForFormat",value:function(e,t){if(!(e.pattern().indexOf("|")>=0)){var n=this.getTemplateForFormat(e,t);if(n)return this.setNationalNumberTemplate(n,t),!0}}},{key:"getSeparatorAfterNationalPrefix",value:function(e){return this.isNANP||e&&e.nationalPrefixFormattingRule()&&iG.test(e.nationalPrefixFormattingRule())?" ":""}},{key:"getInternationalPrefixBeforeCountryCallingCode",value:function(e,t){var n=e.IDDPrefix,r=e.missingPlus;return n?t&&!1===t.spacing?n:n+" ":r?"":"+"}},{key:"getTemplate",value:function(e){if(this.template){for(var t=-1,n=0,r=e.international?this.getInternationalPrefixBeforeCountryCallingCode(e,{spacing:!1}):"";n<r.length+e.getDigitsWithoutInternationalPrefix().length;)t=this.template.indexOf("x",t+1),n++;return iT(this.template,t+1)}}},{key:"setNationalNumberTemplate",value:function(e,t){this.nationalNumberTemplate=e,this.populatedNationalNumberTemplate=e,this.populatedNationalNumberTemplatePosition=-1,t.international?this.template=this.getInternationalPrefixBeforeCountryCallingCode(t).replace(/[\d\+]/g,"x")+ij("x",t.callingCode.length)+" "+e:this.template=e}},{key:"getTemplateForFormat",value:function(e,t){var n,r=t.nationalSignificantNumber,i=t.international,a=t.nationalPrefix,o=t.complexPrefixBeforeNationalSignificantNumber,s=e.pattern();s=s.replace(/\[([^\[\]])*\]/g,"\\d").replace(/\d(?=[^,}][^,}])/g,"\\d");var l=iU.match(s)[0];if(!(r.length>l.length)){var u=RegExp("^"+s+"$"),c=r.replace(/\d/g,"9");u.test(c)&&(l=c);var d=this.getFormatFormat(e,i);if(this.shouldTryNationalPrefixFormattingRule(e,{international:i,nationalPrefix:a})){var f=d.replace(id,e.nationalPrefixFormattingRule());if(iI(e.nationalPrefixFormattingRule())===(a||"")+iI("$1")&&(d=f,n=!0,a))for(var p=a.length;p>0;)d=d.replace(/\d/,"x"),p--}var h=l.replace(new RegExp(s),d).replace(/9/g,"x");return!n&&(o?h=ij("x",o.length)+" "+h:a&&(h=ij("x",a.length)+this.getSeparatorAfterNationalPrefix(e)+h)),i&&(h=ic(h)),h}}},{key:"formatNextNationalNumberDigits",value:function(e){var t=function(e,t,n){for(var r,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return iS(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iS(e,void 0)}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n.split(""));!(r=i()).done;){var a=r.value;if(0>e.slice(t+1).search(iC))return;t=e.search(iC),e=e.replace(iC,a)}return[e,t]}(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition,e);return t?(this.populatedNationalNumberTemplate=t[0],this.populatedNationalNumberTemplatePosition=t[1],iT(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition+1)):void this.resetFormat()}},{key:"shouldTryNationalPrefixFormattingRule",value:function(e,t){var n=t.international,r=t.nationalPrefix;if(e.nationalPrefixFormattingRule()){var i=e.usesNationalPrefix();if(i&&r||!i&&!n)return!0}}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(),iz=RegExp("(["+is+"])");function iW(e,t,n,r){if(t){var i=new rX(r);i.selectNumberingPlan(t,n);var a=new RegExp(i.IDDPrefix());if(0===e.search(a)){var o=(e=e.slice(e.match(a)[0].length)).match(iz);if(!o||null==o[1]||!(o[1].length>0)||"0"!==o[1])return e}}}function iq(e,t){if(e&&t.numberingPlan.nationalPrefixForParsing()){var n=RegExp("^(?:"+t.numberingPlan.nationalPrefixForParsing()+")"),r=n.exec(e);if(r){var i,a,o,s=r.length-1,l=s>0&&r[s];if(t.nationalPrefixTransformRule()&&l)i=e.replace(n,t.nationalPrefixTransformRule()),s>1&&(a=r[1]);else{var u=r[0];i=e.slice(u.length),l&&(a=r[1])}if(l){var c=e.indexOf(r[1]);e.slice(0,c)===t.numberingPlan.nationalPrefix()&&(o=t.numberingPlan.nationalPrefix())}else o=r[0];return{nationalNumber:i,nationalPrefix:o,carrierCode:a}}}return{nationalNumber:e}}function iK(e,t){var n,r,i,a=iq(e,t),o=a.carrierCode,s=a.nationalNumber;return s!==e&&(n=e,r=s,!(!it(n,(i=t).nationalNumberPattern())||it(r,i.nationalNumberPattern()))||t.possibleLengths()&&!function(e,t){switch(r9(e,t)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}(s,t))?{nationalNumber:e}:{nationalNumber:s,carrierCode:o}}function iY(e,t,n,r){var i=t?r4(t,r):n;if(0===e.indexOf(i)){(r=new rX(r)).selectNumberingPlan(t,n);var a=e.slice(i.length),o=iK(a,r).nationalNumber,s=iK(e,r).nationalNumber;if(!it(s,r.nationalNumberPattern())&&it(o,r.nationalNumberPattern())||"TOO_LONG"===r9(s,r))return{countryCallingCode:i,number:a}}return{number:e}}function iQ(e,t,n,r){if(!e)return{};if("+"!==e[0]){var i,a=iW(e,t,n,r);if(a&&a!==e)i=!0,e="+"+a;else{if(t||n){var o=iY(e,t,n,r),s=o.countryCallingCode,l=o.number;if(s)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:s,number:l}}return{number:e}}}if("0"===e[1])return{};r=new rX(r);for(var u=2;u-1<=3&&u<=e.length;){var c=e.slice(1,u);if(r.hasCallingCode(c))return r.selectNumberingPlan(c),{countryCallingCodeSource:i?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:c,number:e.slice(u)};u++}return{}}function iX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return iZ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iZ(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var iJ=RegExp("^["+il+is+"]+$","i"),i0="(?:["+iu+"]["+il+is+"]*|["+il+is+"]+)",i1=RegExp("[^"+il+is+"]+.*$"),i2=/[^\d\[\]]/,i3=function(){var e;function t(e){var n=e.defaultCountry,r=e.defaultCallingCode,i=e.metadata,a=e.onNationalSignificantNumberChange;if(!(0,I._)(this,t))throw TypeError("Cannot call a class as a function");this.defaultCountry=n,this.defaultCallingCode=r,this.metadata=i,this.onNationalSignificantNumberChange=a}return e=[{key:"input",value:function(e,t){var n,r,i,a,o,s=iX((i=(r=iX("+"===(n=function(e){var t,n=e.search(i0);if(!(n<0))return"+"===(e=e.slice(n))[0]&&(t=!0,e=e.slice(1)),e=e.replace(i1,""),t&&(e="+"+e),e}(e)||"")[0]?[n.slice(1),!0]:[n],2))[0],a=r[1],iJ.test(i)||(i=""),[i,a]),2),l=s[0],u=s[1],c=iI(l);return u&&!t.digits&&(t.startInternationalNumber(),c||(o=!0)),c&&this.inputDigits(c,t),{digits:c,justLeadingPlus:o}}},{key:"inputDigits",value:function(e,t){var n=t.digits,r=n.length<3&&n.length+e.length>=3;if(t.appendDigits(e),r&&this.extractIddPrefix(t),this.isWaitingForCountryCallingCode(t)){if(!this.extractCountryCallingCode(t))return}else t.appendNationalSignificantNumberDigits(e);t.international||this.hasExtractedNationalSignificantNumber||this.extractNationalSignificantNumber(t.getNationalDigits(),function(e){return t.update(e)})}},{key:"isWaitingForCountryCallingCode",value:function(e){var t=e.international,n=e.callingCode;return t&&!n}},{key:"extractCountryCallingCode",value:function(e){var t=iQ("+"+e.getDigitsWithoutInternationalPrefix(),this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),n=t.countryCallingCode,r=t.number;if(n)return e.setCallingCode(n),e.update({nationalSignificantNumber:r}),!0}},{key:"reset",value:function(e){if(e){this.hasSelectedNumberingPlan=!0;var t=e._nationalPrefixForParsing();this.couldPossiblyExtractAnotherNationalSignificantNumber=t&&i2.test(t)}else this.hasSelectedNumberingPlan=void 0,this.couldPossiblyExtractAnotherNationalSignificantNumber=void 0}},{key:"extractNationalSignificantNumber",value:function(e,t){if(this.hasSelectedNumberingPlan){var n=iq(e,this.metadata),r=n.nationalPrefix,i=n.nationalNumber,a=n.carrierCode;if(i!==e)return this.onExtractedNationalNumber(r,a,i,e,t),!0}}},{key:"extractAnotherNationalSignificantNumber",value:function(e,t,n){if(!this.hasExtractedNationalSignificantNumber)return this.extractNationalSignificantNumber(e,n);if(this.couldPossiblyExtractAnotherNationalSignificantNumber){var r=iq(e,this.metadata),i=r.nationalPrefix,a=r.nationalNumber,o=r.carrierCode;if(a!==t)return this.onExtractedNationalNumber(i,o,a,e,n),!0}}},{key:"onExtractedNationalNumber",value:function(e,t,n,r,i){var a,o,s=r.lastIndexOf(n);if(s>=0&&s===r.length-n.length){o=!0;var l=r.slice(0,s);l!==e&&(a=l)}i({nationalPrefix:e,carrierCode:t,nationalSignificantNumber:n,nationalSignificantNumberMatchesInput:o,complexPrefixBeforeNationalSignificantNumber:a}),this.hasExtractedNationalSignificantNumber=!0,this.onNationalSignificantNumberChange()}},{key:"reExtractNationalSignificantNumber",value:function(e){return!!this.extractAnotherNationalSignificantNumber(e.getNationalDigits(),e.nationalSignificantNumber,function(t){return e.update(t)})||(this.extractIddPrefix(e)||this.fixMissingPlus(e)?(this.extractCallingCodeAndNationalSignificantNumber(e),!0):void 0)}},{key:"extractIddPrefix",value:function(e){var t=e.international,n=e.IDDPrefix,r=e.digits;if(e.nationalSignificantNumber,!t&&!n){var i=iW(r,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata);if(void 0!==i&&i!==r)return e.update({IDDPrefix:r.slice(0,r.length-i.length)}),this.startInternationalNumber(e,{country:void 0,callingCode:void 0}),!0}}},{key:"fixMissingPlus",value:function(e){if(!e.international){var t=iY(e.digits,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),n=t.countryCallingCode;if(t.number,n)return e.update({missingPlus:!0}),this.startInternationalNumber(e,{country:e.country,callingCode:n}),!0}}},{key:"startInternationalNumber",value:function(e,t){var n=t.country,r=t.callingCode;e.startInternationalNumber(n,r),e.nationalSignificantNumber&&(e.resetNationalSignificantNumber(),this.onNationalSignificantNumberChange(),this.hasExtractedNationalSignificantNumber=void 0)}},{key:"extractCallingCodeAndNationalSignificantNumber",value:function(e){this.extractCountryCallingCode(e)&&this.extractNationalSignificantNumber(e.getNationalDigits(),function(t){return e.update(t)})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function i5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i4(e,t){var n=t.countries,r=t.defaultCountry,i=t.metadata;i=new rX(i);for(var a,o=[],s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i5(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i5(e,void 0)}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n);!(a=s()).done;){var l=a.value;if(i.country(l),i.leadingDigits()){if(e&&0===e.search(i.leadingDigits()))return l}else if(ia({phone:e,country:l},void 0,i.metadata))if(!r)return l;else{if(l===r)return l;o.push(l)}}if(o.length>0)return o[0]}function i8(e,t){var n=t.nationalNumber,r=t.defaultCountry,i=t.metadata,a=i.getCountryCodesForCallingCode(e);if(a)return 1===a.length?a[0]:i4(n,{countries:a,defaultCountry:r,metadata:i.metadata})}function i6(e){return(i6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i7(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i9=function(){var e;function t(e,n){if(!(0,I._)(this,t))throw TypeError("Cannot call a class as a function");this.metadata=new rX(n);var r,i=function(e){if(Array.isArray(e))return e}(r=this.getCountryAndCallingCode(e))||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),2!==a.length);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}}(r,2)||function(e,t){if(e){if("string"==typeof e)return i7(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i7(e,2)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],o=i[1];this.defaultCountry=a,this.defaultCallingCode=o,this.reset()}return e=[{key:"getCountryAndCallingCode",value:function(e){var t,n;return e&&("object"===i6(e)?(t=e.defaultCountry,n=e.defaultCallingCode):t=e),t&&!this.metadata.hasCountry(t)&&(t=void 0),[t,n]}},{key:"input",value:function(e){var t=this.parser.input(e,this.state),n=t.digits;if(t.justLeadingPlus)this.formattedOutput="+";else if(n){if(this.determineTheCountryIfNeeded(),this.state.nationalSignificantNumber&&this.formatter.narrowDownMatchingFormats(this.state),this.metadata.hasSelectedNumberingPlan()&&(r=this.formatter.format(n,this.state)),void 0===r&&this.parser.reExtractNationalSignificantNumber(this.state)){this.determineTheCountryIfNeeded();var r,i=this.state.getNationalDigits();i&&(r=this.formatter.format(i,this.state))}this.formattedOutput=r?this.getFullNumber(r):this.getNonFormattedNumber()}return this.formattedOutput}},{key:"reset",value:function(){var e=this;return this.state=new ik({onCountryChange:function(t){e.country=t},onCallingCodeChange:function(t,n){e.metadata.selectNumberingPlan(n,t),e.formatter.reset(e.metadata.numberingPlan,e.state),e.parser.reset(e.metadata.numberingPlan)}}),this.formatter=new iH({state:this.state,metadata:this.metadata}),this.parser=new i3({defaultCountry:this.defaultCountry,defaultCallingCode:this.defaultCallingCode,metadata:this.metadata,state:this.state,onNationalSignificantNumberChange:function(){e.determineTheCountryIfNeeded(),e.formatter.reset(e.metadata.numberingPlan,e.state)}}),this.state.reset({country:this.defaultCountry,callingCode:this.defaultCallingCode}),this.formattedOutput="",this}},{key:"isInternational",value:function(){return this.state.international}},{key:"getCallingCode",value:function(){if(this.isInternational())return this.state.callingCode}},{key:"getCountryCallingCode",value:function(){return this.getCallingCode()}},{key:"getCountry",value:function(){if(this.state.digits)return this._getCountry()}},{key:"_getCountry",value:function(){return this.state.country}},{key:"determineTheCountryIfNeeded",value:function(){(!this.state.country||this.isCountryCallingCodeAmbiguous())&&this.determineTheCountry()}},{key:"getFullNumber",value:function(e){var t=this;if(this.isInternational()){var n=function(e){return t.formatter.getInternationalPrefixBeforeCountryCallingCode(t.state,{spacing:!!e})+e},r=this.state.callingCode;return n(r?e?"".concat(r," ").concat(e):r:"".concat(this.state.getDigitsWithoutInternationalPrefix()))}return e}},{key:"getNonFormattedNationalNumberWithPrefix",value:function(){var e=this.state,t=e.nationalSignificantNumber,n=e.complexPrefixBeforeNationalSignificantNumber,r=e.nationalPrefix,i=t,a=n||r;return a&&(i=a+i),i}},{key:"getNonFormattedNumber",value:function(){var e=this.state.nationalSignificantNumberMatchesInput;return this.getFullNumber(e?this.getNonFormattedNationalNumberWithPrefix():this.state.getNationalDigits())}},{key:"getNonFormattedTemplate",value:function(){var e=this.getNonFormattedNumber();if(e)return e.replace(/[\+\d]/g,"x")}},{key:"isCountryCallingCodeAmbiguous",value:function(){var e=this.state.callingCode,t=this.metadata.getCountryCodesForCallingCode(e);return t&&t.length>1}},{key:"determineTheCountry",value:function(){this.state.setCountry(i8(this.isInternational()?this.state.callingCode:this.defaultCallingCode,{nationalNumber:this.state.nationalSignificantNumber,defaultCountry:this.defaultCountry,metadata:this.metadata}))}},{key:"getNumberValue",value:function(){var e=this.state,t=e.digits,n=e.callingCode,r=e.country,i=e.nationalSignificantNumber;if(t){if(this.isInternational())if(n)return"+"+n+i;else return"+"+t;else if(r||n)return"+"+(r?this.metadata.countryCallingCode():n)+i}}},{key:"getNumber",value:function(){var e=this.state,t=e.nationalSignificantNumber,n=e.carrierCode,r=e.callingCode,i=this._getCountry();if(t&&(i||r)){if(i&&i===this.defaultCountry){var a=new rX(this.metadata.metadata);a.selectNumberingPlan(i);var o=a.numberingPlan.callingCode(),s=this.metadata.getCountryCodesForCallingCode(o);if(s.length>1){var l=i4(t,{countries:s,defaultCountry:this.defaultCountry,metadata:this.metadata.metadata});l&&(i=l)}}var u=new i_(i||r,t,this.metadata.metadata);return n&&(u.carrierCode=n),u}}},{key:"isPossible",value:function(){var e=this.getNumber();return!!e&&e.isPossible()}},{key:"isValid",value:function(){var e=this.getNumber();return!!e&&e.isValid()}},{key:"getNationalNumber",value:function(){return this.state.nationalSignificantNumber}},{key:"getChars",value:function(){return(this.state.international?"+":"")+this.state.digits}},{key:"getTemplate",value:function(){return this.formatter.getTemplate(this.state)||this.getNonFormattedTemplate()||""}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function at(e){for(var t,n="",r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ae(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,void 0)}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e.split(""));!(t=r()).done;){var i=t.value;n+=an(i,n)||""}return n}function an(e,t){if("+"===e){if(t)return;return"+"}return iR[e]}function ar(e){var t=e.country,n=e.international,r=e.withCountryCallingCode,i=e.metadata;return t&&n&&!r?"+".concat(r4(t,i)):""}function ai(e,t){return t&&" "===(e=e.slice(t.length))[0]&&(e=e.slice(1)),e}var aa=["country","international","withCountryCallingCode","metadata"];function ao(){return(ao=Object.assign.bind()).apply(this,arguments)}let as=function(e){function t(e,t){var n=e.country,r=e.international,i=e.withCountryCallingCode,a=e.metadata,o=void 0===a?void 0:a,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,aa),l=(0,c.useCallback)(function(e){var t=new i9(n,o),a=ar({country:n,international:r,withCountryCallingCode:i,metadata:o}),s=t.input(a+e),l=t.getTemplate();return a&&(s=ai(s,a),l&&(l=ai(l,a))),{text:s,template:l}},[n,o]);return c.default.createElement(r$,ao({},s,{ref:t,parse:an,format:l}))}return(t=c.default.forwardRef(t)).propTypes={value:rI.default.string.isRequired,onChange:rI.default.func.isRequired,country:rI.default.string,international:rI.default.bool,withCountryCallingCode:rI.default.bool,metadata:rI.default.object},t}();var al=["value","onChange","country","international","withCountryCallingCode","metadata","inputComponent"];function au(){return(au=Object.assign.bind()).apply(this,arguments)}let ac=function(e){function t(e,t){var n=e.value,r=e.onChange,i=e.country,a=e.international,o=e.withCountryCallingCode,s=e.metadata,l=void 0===s?void 0:s,u=e.inputComponent,d=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,al),f=ar({country:i,international:a,withCountryCallingCode:o,metadata:l}),p=(0,c.useCallback)(function(e){var t=at(e.target.value);t===n&&0===ad(f,t,i,l).indexOf(e.target.value)&&(t=t.slice(0,-1)),r(t)},[f,n,r,i,l]);return c.default.createElement(void 0===u?"input":u,au({},d,{ref:t,value:ad(f,n,i,l),onChange:p}))}return(t=c.default.forwardRef(t)).propTypes={value:rI.default.string.isRequired,onChange:rI.default.func.isRequired,country:rI.default.string,international:rI.default.bool,withCountryCallingCode:rI.default.bool,metadata:rI.default.object,inputComponent:rI.default.elementType},t}();function ad(e,t,n,r){var i,a,o;return ai((i=e+t,a=n,(o=r)||(o=a,a=void 0),new i9(a,o).input(i)),e)}function af(e){return String.fromCodePoint(127397+e.toUpperCase().charCodeAt(0))}var ap=["value","onChange","options"],ah=["value","options","className","iconComponent","getIconAspectRatio","arrowComponent","unicodeFlags"];function am(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ag(){return(ag=Object.assign.bind()).apply(this,arguments)}function av(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ax(e){var t=e.value,n=e.onChange,r=e.options,i=av(e,ap),a=(0,c.useCallback)(function(e){var t=e.target.value;n("ZZ"===t?void 0:t)},[n]);return(0,c.useMemo)(function(){return a_(r,t)},[r,t]),c.default.createElement("select",ag({},i,{value:t||"ZZ",onChange:a}),r.map(function(e){var t=e.value,n=e.label,r=e.divider;return c.default.createElement("option",{key:r?"|":t||"ZZ",value:r?"|":t||"ZZ",disabled:!!r,style:r?ay:void 0},n)}))}ax.propTypes={value:rI.default.string,onChange:rI.default.func.isRequired,options:rI.default.arrayOf(rI.default.shape({value:rI.default.string,label:rI.default.string,divider:rI.default.bool})).isRequired};var ay={fontSize:"1px",backgroundColor:"currentColor",color:"inherit"};function ab(e){var t=e.value,n=e.options,r=e.className,i=e.iconComponent,a=(e.getIconAspectRatio,e.arrowComponent),o=e.unicodeFlags,s=av(e,ah),l=(0,c.useMemo)(function(){return a_(n,t)},[n,t]);return c.default.createElement("div",{className:"PhoneInputCountry"},c.default.createElement(ax,ag({},s,{value:t,options:n,className:(0,rD.default)("PhoneInputCountrySelect",r)})),o&&t&&c.default.createElement("div",{className:"PhoneInputCountryIconUnicode"},af(t[0])+af(t[1])),!(o&&t)&&c.default.createElement(i,{"aria-hidden":!0,country:t,label:l&&l.label,aspectRatio:o?1:void 0}),c.default.createElement(void 0===a?aw:a,null))}function aw(){return c.default.createElement("div",{className:"PhoneInputCountrySelectArrow"})}function a_(e,t){for(var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return am(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return am(e,void 0)}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(n=r()).done;){var i=n.value;if(!i.divider&&i.value===t)return i}}ab.propTypes={iconComponent:rI.default.elementType,arrowComponent:rI.default.elementType,unicodeFlags:rI.default.bool};var ak=["country","countryName","flags","flagUrl"];function aS(){return(aS=Object.assign.bind()).apply(this,arguments)}function aC(e){var t=e.country,n=e.countryName,r=e.flags,i=e.flagUrl,a=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,ak);return r&&r[t]?r[t]({title:n}):c.default.createElement("img",aS({},a,{alt:n,role:n?void 0:"presentation",src:i.replace("{XX}",t).replace("{xx}",t.toLowerCase())}))}aC.propTypes={country:rI.default.string.isRequired,countryName:rI.default.string.isRequired,flags:rI.default.objectOf(rI.default.elementType),flagUrl:rI.default.string.isRequired};var aj=["aspectRatio"],aT=["title"],aE=["title"];function aR(){return(aR=Object.assign.bind()).apply(this,arguments)}function aI(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function aA(e){var t=e.aspectRatio,n=aI(e,aj);return 1===t?c.default.createElement(aD,n):c.default.createElement(aP,n)}function aP(e){var t=e.title,n=aI(e,aT);return c.default.createElement("svg",aR({},n,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 75 50"}),c.default.createElement("title",null,t),c.default.createElement("g",{className:"PhoneInputInternationalIconGlobe",stroke:"currentColor",fill:"none",strokeWidth:"2",strokeMiterlimit:"10"},c.default.createElement("path",{strokeLinecap:"round",d:"M47.2,36.1C48.1,36,49,36,50,36c7.4,0,14,1.7,18.5,4.3"}),c.default.createElement("path",{d:"M68.6,9.6C64.2,12.3,57.5,14,50,14c-7.4,0-14-1.7-18.5-4.3"}),c.default.createElement("line",{x1:"26",y1:"25",x2:"74",y2:"25"}),c.default.createElement("line",{x1:"50",y1:"1",x2:"50",y2:"49"}),c.default.createElement("path",{strokeLinecap:"round",d:"M46.3,48.7c1.2,0.2,2.5,0.3,3.7,0.3c13.3,0,24-10.7,24-24S63.3,1,50,1S26,11.7,26,25c0,2,0.3,3.9,0.7,5.8"}),c.default.createElement("path",{strokeLinecap:"round",d:"M46.8,48.2c1,0.6,2.1,0.8,3.2,0.8c6.6,0,12-10.7,12-24S56.6,1,50,1S38,11.7,38,25c0,1.4,0.1,2.7,0.2,4c0,0.1,0,0.2,0,0.2"})),c.default.createElement("path",{className:"PhoneInputInternationalIconPhone",stroke:"none",fill:"currentColor",d:"M12.4,17.9c2.9-2.9,5.4-4.8,0.3-11.2S4.1,5.2,1.3,8.1C-2,11.4,1.1,23.5,13.1,35.6s24.3,15.2,27.5,11.9c2.8-2.8,7.8-6.3,1.4-11.5s-8.3-2.6-11.2,0.3c-2,2-7.2-2.2-11.7-6.7S10.4,19.9,12.4,17.9z"}))}function aD(e){var t=e.title,n=aI(e,aE);return c.default.createElement("svg",aR({},n,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"}),c.default.createElement("title",null,t),c.default.createElement("g",{className:"PhoneInputInternationalIconGlobe",stroke:"currentColor",fill:"none",strokeWidth:"2",strokeLinecap:"round"},c.default.createElement("path",{d:"M8.45,13A21.44,21.44,0,1,1,37.08,41.56"}),c.default.createElement("path",{d:"M19.36,35.47a36.9,36.9,0,0,1-2.28-13.24C17.08,10.39,21.88.85,27.8.85s10.72,9.54,10.72,21.38c0,6.48-1.44,12.28-3.71,16.21"}),c.default.createElement("path",{d:"M17.41,33.4A39,39,0,0,1,27.8,32.06c6.62,0,12.55,1.5,16.48,3.86"}),c.default.createElement("path",{d:"M44.29,8.53c-3.93,2.37-9.86,3.88-16.49,3.88S15.25,10.9,11.31,8.54"}),c.default.createElement("line",{x1:"27.8",y1:"0.85",x2:"27.8",y2:"34.61"}),c.default.createElement("line",{x1:"15.2",y1:"22.23",x2:"49.15",y2:"22.23"})),c.default.createElement("path",{className:"PhoneInputInternationalIconPhone",stroke:"transparent",fill:"currentColor",d:"M9.42,26.64c2.22-2.22,4.15-3.59.22-8.49S3.08,17,.93,19.17c-2.49,2.48-.13,11.74,9,20.89s18.41,11.5,20.89,9c2.15-2.15,5.91-4.77,1-8.71s-6.27-2-8.49.22c-1.55,1.55-5.48-1.69-8.86-5.08S7.87,28.19,9.42,26.64Z"}))}function aO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function aN(e,t){return!!r8(e,t)||(console.error("Country not found: ".concat(e)),!1)}function aM(e,t){return e&&0===(e=e.filter(function(e){return aN(e,t)})).length&&(e=void 0),e}function aL(e){return new rX(e).getCountries()}aA.propTypes={title:rI.default.string.isRequired,aspectRatio:rI.default.number},aP.propTypes={title:rI.default.string.isRequired},aD.propTypes={title:rI.default.string.isRequired};var aB=["country","label","aspectRatio"];function aV(){return(aV=Object.assign.bind()).apply(this,arguments)}function aF(e){var t=e.flags,n=e.flagUrl,r=e.flagComponent,i=e.internationalIcon;function a(e){var a=e.country,o=e.label,s=e.aspectRatio,l=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,aB),u=i===aA?s:void 0;return c.default.createElement("div",aV({},l,{className:(0,rD.default)("PhoneInputCountryIcon",{"PhoneInputCountryIcon--square":1===u,"PhoneInputCountryIcon--border":a})}),a?c.default.createElement(r,{country:a,countryName:o,flags:t,flagUrl:n,className:"PhoneInputCountryIconImg"}):c.default.createElement(i,{title:o,aspectRatio:u,className:"PhoneInputCountryIconImg"}))}return a.propTypes={country:rI.default.string,label:rI.default.string.isRequired,aspectRatio:rI.default.number},a}function aU(e){return(aU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}aF({flagUrl:"https://purecatamphetamine.github.io/country-flag-icons/3x2/{XX}.svg",flagComponent:aC,internationalIcon:aA});function aH(e){return(aH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function az(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aW(e){var t="function"==typeof Map?new Map:void 0;return(aW=function(e){var n;if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return aq(e,arguments,aQ(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),aY(r,e)})(e)}function aq(e,t,n){return(aq=aK()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&aY(i,n.prototype),i}).apply(null,arguments)}function aK(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function aY(e,t){return(aY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aQ(e){return(aQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aX=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&aY(r,e);var t,n=(t=aK(),function(){var e,n=aQ(r);return e=t?Reflect.construct(n,arguments,aQ(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===aH(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return az(e)}(this,e)});function r(e){var t;if(!(0,I._)(this,r))throw TypeError("Cannot call a class as a function");return Object.setPrototypeOf(az(t=n.call(this,e)),r.prototype),t.name=t.constructor.name,t}return Object.defineProperty(r,"prototype",{writable:!1}),r}(aW(Error)),aZ=function(e){return"([".concat(is,"]{1,").concat(e,"})")};function aJ(e){var t="[ \\t,]*",n="[:\\.]?[ \\t,-]*",r="[ \\t]*";return";ext="+aZ("20")+"|"+(t+"(?:e?xt(?:ensi(?:o?|))?n?|??||anexo)"+n+aZ("20"))+"#?|"+(t+"(?:[x#~]|int|)"+n+aZ("9"))+"#?|"+("[- ]+"+aZ("6"))+"#|"+(r+"(?:,{2}|;)"+n+aZ("15"))+"#?|"+(r+"(?:,)+"+n+aZ("9"))+"#?"}var a0="["+iu+"]{0,1}(?:["+il+"]*["+is+"]){3,}["+il+is+"]*",a1=RegExp("^["+iu+"]{0,1}(?:["+il+"]*["+is+"]){1,2}$","i"),a2=RegExp("^["+is+"]{2}$|^"+(a0+"(?:"+aJ())+")?$","i"),a3=RegExp("(?:"+aJ()+")$","i"),a5="(["+is+"]|[\\-\\.\\(\\)]?)",a4=RegExp("^\\+"+a5+"*["+is+"]"+a5+"*$","g"),a8=RegExp("^("+("["+is+"]+((\\-)*[")+is+"])*\\.)*[a-zA-Z]+((\\-)*["+is+"])*\\.?$","g"),a6="tel:",a7=";phone-context=",a9=RegExp("["+iu+is+"]"),oe=RegExp("[^"+is+"#]+$");function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach(function(t){var r,i,a;r=e,i=t,a=n[t],i in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach(function(t){var r,i,a;r=e,i=t,a=n[t],i in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oa(e,t){return"+"+r4(e,t)}function oo(e,t){return function(){var e,t=function(e){var t,n,r,i,a=function(e){if(Array.isArray(e))return e}(t=Array.prototype.slice.call(e))||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),4!==a.length);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}}(t,4)||function(e,t){if(e){if("string"==typeof e)return a$(e,4);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a$(e,4)}}(t,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=a[0],s=a[1],l=a[2],u=a[3];if("string"==typeof o)n=o;else throw TypeError("A text for parsing must be a string.");if(s&&"string"!=typeof s)if("object"===aU(s))l?(r=s,i=l):i=s;else throw Error("Invalid second argument: ".concat(s));else u?(r=l,i=u):(r=void 0,i=l),s&&(r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aG(Object(n),!0).forEach(function(t){var r,i,a;r=e,i=t,a=n[t],i in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aG(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({defaultCountry:s},r));return{text:n,options:r,metadata:i}}(arguments),n=t.text,r=t.options,i=t.metadata,a=r;a&&a.defaultCountry&&!r8(a.defaultCountry,i)&&(a=oi(oi({},a),{},{defaultCountry:void 0}));try{return e=a,function(e,t,n){if(t=t||{},n=new rX(n),t.defaultCountry&&!n.hasCountry(t.defaultCountry)){if(t.v2)throw new aX("INVALID_COUNTRY");throw Error("Unknown country: ".concat(t.defaultCountry))}var r,i,a,o,s=function(e,t,n){var r=function(e,t){var n=t.extractFormattedPhoneNumber,r=function(e){var t=e.indexOf(a7);if(t<0)return null;var n=t+a7.length;if(n>=e.length)return"";var r=e.indexOf(";",n);return r>=0?e.substring(n,r):e.substring(n)}(e);if(!(null===r||0!==r.length&&(a4.test(r)||a8.test(r))))throw new aX("NOT_A_NUMBER");if(null===r)i=n(e)||"";else{i="","+"===r.charAt(0)&&(i+=r);var i,a,o=e.indexOf(a6);a=o>=0?o+a6.length:0;var s=e.indexOf(a7);i+=e.substring(a,s)}var l=i.indexOf(";isub=");if(l>0&&(i=i.substring(0,l)),""!==i)return i}(e,{extractFormattedPhoneNumber:function(e){if(e){if(e.length>250){if(t)throw new aX("TOO_LONG");return}if(!1===n)return e;var r=e.search(a9);return r<0?void 0:e.slice(r).replace(oe,"")}}});if(!r)return{};if(!(r.length>=2&&a2.test(r)))return a1.test(r)?{error:"TOO_SHORT"}:{};var i=function(e){var t=e.search(a3);if(t<0)return{};for(var n=e.slice(0,t),r=e.match(a3),i=1;i<r.length;){if(r[i])return{number:n,ext:r[i]};i++}}(r);return i.ext?i:{number:r}}(e,t.v2,t.extract),l=s.number,u=s.ext,c=s.error;if(!l){if(t.v2){if("TOO_SHORT"===c)throw new aX("TOO_SHORT");throw new aX("NOT_A_NUMBER")}return{}}var d=function(e,t,n,r){var i,a=iQ(at(e),t,n,r.metadata),o=a.countryCallingCodeSource,s=a.countryCallingCode,l=a.number;if(s)r.selectNumberingPlan(s);else{if(!l||!t&&!n)return{};r.selectNumberingPlan(t,n),t&&(i=t),s=n||r4(t,r.metadata)}if(!l)return{countryCallingCodeSource:o,countryCallingCode:s};var u=iK(at(l),r),c=u.nationalNumber,d=u.carrierCode,f=i8(s,{nationalNumber:c,defaultCountry:t,metadata:r});return f&&(i=f,"001"===f||r.country(i)),{country:i,countryCallingCode:s,countryCallingCodeSource:o,nationalNumber:c,carrierCode:d}}(l,t.defaultCountry,t.defaultCallingCode,n),f=d.country,p=d.nationalNumber,h=d.countryCallingCode,m=d.countryCallingCodeSource,g=d.carrierCode;if(!n.hasSelectedNumberingPlan()){if(t.v2)throw new aX("INVALID_COUNTRY");return{}}if(!p||p.length<2){if(t.v2)throw new aX("TOO_SHORT");return{}}if(p.length>17){if(t.v2)throw new aX("TOO_LONG");return{}}if(t.v2){var x=new i_(h,p,n.metadata);return f&&(x.country=f),g&&(x.carrierCode=g),u&&(x.ext=u),x.__countryCallingCodeSource=m,x}var y=(t.extended?!!n.hasSelectedNumberingPlan():!!f)&&it(p,n.nationalNumberPattern());return t.extended?{country:f,countryCallingCode:h,carrierCode:g,valid:y,possible:!!y||!!(!0===t.extended&&n.possibleLengths()&&ie(p,n)),phone:p,ext:u}:y?(r=f,i=p,a=u,o={country:r,phone:i},a&&(o.ext=a),o):{}}(n,on(on({},e),{},{v2:!0}),i)}catch(e){if((0,I._)(e,aX));else throw e}}(e||"",t)}function os(e,t,n){if(e){if("+"===e[0]){if("+"===e)return;var r=new i9(t,n);return r.input(e),r.getNumberValue()}if(t){var i=od(e,t,n);return"+".concat(r4(t,n)).concat(i||"")}}}function ol(e,t){var n,r,i=t.country,a=t.countries,o=t.required,s=t.metadata;if("+"===e)return i;var l=(n=e,(r=new i9(null,s)).input(n),r.getCountry());return l&&(!a||a.indexOf(l)>=0)?l:!i||o||of(e,i,s)?i:void 0}function ou(e,t,n){if(0!==e.indexOf(oa(t,n)))return e.replace(/\D/g,"");var r=new i9(t,n);r.input(e);var i=r.getNumber();return i?i.formatNational().replace(/\D/g,""):""}function oc(e,t,n){return String.prototype.localeCompare?e.localeCompare(t,n):e<t?-1:+(e>t)}function od(e,t,n){var r=new i9(t,n);r.input(e);var i=r.getNumber();return i&&i.nationalNumber}function of(e,t,n){for(var r=oa(t,n),i=0;i<e.length&&i<r.length;){if(e[i]!==r[i])return!1;i++}return!0}function op(e){var t=e.value,n=e.phoneNumber,r=e.defaultCountry,i=e.international,a=e.useNationalFormat,o=e.metadata;return(!1===i||a)&&n&&n.country?n.formatNational().replace(/\D/g,""):!t&&i&&r?oa(r,o):t}function oh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function om(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oh(Object(n),!0).forEach(function(t){var r,i,a;r=e,i=t,a=n[t],i in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function og(e,t){return null===e&&(e=void 0),null===t&&(t=void 0),e===t}function ov(e){return(ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ox=["name","disabled","readOnly","autoComplete","style","className","inputRef","inputComponent","numberInputProps","smartCaret","countrySelectComponent","countrySelectProps","containerComponent","defaultCountry","countries","countryOptionsOrder","labels","flags","flagComponent","flagUrl","addInternationalOption","internationalIcon","displayInitialValueAsLocalNumber","initialValueFormat","onCountryChange","limitMaxLength","countryCallingCodeEditable","focusInputOnCountrySelection","reset","metadata","international","locales"];function oy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ob(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oy(Object(n),!0).forEach(function(t){oj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ow(){return(ow=Object.assign.bind()).apply(this,arguments)}function o_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ok(e,t){return(ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oS(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oC(e){return(oC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oT=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&ok(a,e);var t,n,r,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=oC(a);return e=t?Reflect.construct(n,arguments,oC(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===ov(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return oS(e)}(this,e)});function a(e){if(!(0,I._)(this,a))throw TypeError("Cannot call a class as a function");oj(oS(p=i.call(this,e)),"setInputRef",function(e){p.inputRef.current=e;var t=p.props.inputRef;t&&("function"==typeof t?t(e):t.current=e)}),oj(oS(p),"isCountrySupportedWithError",function(e){return aN(e,p.props.metadata)}),oj(oS(p),"onCountryChange",function(e){var t=p.props,n=t.international,r=t.metadata,i=t.onChange,a=t.focusInputOnCountrySelection,o=p.state,s=function(e,t){var n=t.prevCountry,r=t.newCountry,i=t.metadata,a=t.useNationalFormat;if(n===r)return e;if(!e)if(a)return"";else return r?oa(r,i):"";if(r){if("+"===e[0]){if(a)return 0===e.indexOf("+"+r4(r,i))?function(e,t,n){if(t){var r="+"+r4(t,n);if(e.length<r.length){if(0===r.indexOf(e))return""}else if(0===e.indexOf(r))return e.slice(r.length)}for(var i=0,a=Object.keys(n.country_calling_codes);i<a.length;i++){var o=a[i];if(1===e.indexOf(o))return e.slice(1+o.length)}return""}(e,r,i):"";if(n){var o=oa(r,i);if(0!==e.indexOf(o))return o}else{var s=oa(r,i);return 0===e.indexOf(s)?e:s}}}else if("+"!==e[0])return os(e,n,i)||"";return e}(o.phoneDigits,{prevCountry:o.country,newCountry:e,metadata:r,useNationalFormat:!n}),l=os(s,e,r);a&&p.inputRef.current.focus(),p.setState({country:e,hasUserSelectedACountry:!0,phoneDigits:s,value:l},function(){i(l)})}),oj(oS(p),"onChange",function(e){var t=p.props,n=t.defaultCountry,r=t.onChange,i=t.addInternationalOption,a=t.international,o=t.limitMaxLength,s=t.countryCallingCodeEditable,l=t.metadata,u=p.state,c=u.countries,d=function(e,t){var n,r=t.prevPhoneDigits,i=t.country,a=t.defaultCountry,o=t.countryRequired,s=t.getAnyCountry,l=t.countries,u=t.international,c=t.limitMaxLength,d=t.countryCallingCodeEditable,f=t.metadata;if(u&&!1===d&&i){var p,h=oa(i,f);if(0!==e.indexOf(h))return e&&"+"!==e[0]?p=os(e=h+e,i,f):e=h,{phoneDigits:e,value:p,country:i}}return!1===u&&i&&e&&"+"===e[0]&&(e=ou(e,i,f)),e&&i&&c&&(e=function(e,t,n){var r=od(e,t,n);if(r){var i,a,o=r.length-(i=t,(a=new rX(a=n)).selectNumberingPlan(i),a.numberingPlan.possibleLengths()[a.numberingPlan.possibleLengths().length-1]);if(o>0)return e.slice(0,e.length-o)}return e}(e,i,f)),e&&"+"!==e[0]&&(!i||u)&&(e="+"+e),!e&&r&&"+"===r[0]&&(i=u?void 0:a),"+"===e&&r&&"+"===r[0]&&r.length>1&&(i=void 0),e&&(n="+"===e[0]&&("+"===e||i&&0===oa(i,f).indexOf(e))?void 0:os(e,i,f)),n&&(i=ol(n,{country:i,countries:l,metadata:f}),!1===u&&i&&e&&"+"===e[0]&&(n=os(e=ou(e,i,f),i,f))),!i&&o&&(i=a||s()),{phoneDigits:e,country:i,value:n}}(e,{prevPhoneDigits:u.phoneDigits,country:u.country,countryRequired:!i,defaultCountry:n,getAnyCountry:function(){return p.getFirstSupportedCountry({countries:c})},countries:c,international:a,limitMaxLength:o,countryCallingCodeEditable:s,metadata:l}),f=d.phoneDigits,h=d.country,m=d.value,g={phoneDigits:f,value:m,country:h};!1!==s||m||f!==p.state.phoneDigits||(g.forceRerender={}),p.setState(g,function(){return r(m)})}),oj(oS(p),"_onFocus",function(){return p.setState({isFocused:!0})}),oj(oS(p),"_onBlur",function(){return p.setState({isFocused:!1})}),oj(oS(p),"onFocus",function(e){p._onFocus();var t=p.props.onFocus;t&&t(e)}),oj(oS(p),"onBlur",function(e){var t=p.props.onBlur;p._onBlur(),t&&t(e)}),oj(oS(p),"onCountryFocus",function(e){p._onFocus();var t=p.props.countrySelectProps;if(t){var n=t.onFocus;n&&n(e)}}),oj(oS(p),"onCountryBlur",function(e){p._onBlur();var t=p.props.countrySelectProps;if(t){var n=t.onBlur;n&&n(e)}}),p.inputRef=c.default.createRef();var t,n,r,o,s,l,u,d,f,p,h=p.props,m=h.value,g=(h.labels,h.international),x=h.addInternationalOption,y=h.displayInitialValueAsLocalNumber,b=h.initialValueFormat,w=h.metadata,_=p.props,k=_.defaultCountry,S=_.countries;k&&!p.isCountrySupportedWithError(k)&&(k=void 0),S=aM(S,w);var C=oo(m,w);p.CountryIcon=aF(p.props);var j=(r=(t={value:m,phoneNumber:C,defaultCountry:k,required:!x,countries:S||aL(w),getAnyCountry:function(){return p.getFirstSupportedCountry({countries:S})},metadata:w}).value,o=t.phoneNumber,s=t.defaultCountry,l=t.getAnyCountry,u=t.countries,d=t.required,f=t.metadata,o&&o.country?n=o.country:s&&(!r||of(r,s,f))&&(n=s),u&&0>u.indexOf(n)&&(n=void 0),!n&&d&&u&&u.length>0&&(n=l()),n);return p.state={props:p.props,country:j,countries:S,phoneDigits:op({value:m,phoneNumber:C,defaultCountry:k,international:g,useNationalFormat:y||"national"===b,metadata:w}),value:m},p}return n=[{key:"componentDidMount",value:function(){var e=this.props.onCountryChange,t=this.props.defaultCountry,n=this.state.country;e&&(t&&!this.isCountrySupportedWithError(t)&&(t=void 0),n!==t&&e(n))}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.onCountryChange,r=this.state.country;n&&r!==t.country&&n(r)}},{key:"getCountrySelectOptions",value:function(e){var t=e.countries,n=this.props,r=n.international,i=n.countryCallingCodeEditable,a=n.countryOptionsOrder,o=n.addInternationalOption,s=n.labels,l=n.locales,u=n.metadata;return this.useMemoCountrySelectOptions(function(){var e,n,c,d,f,p,h;return function(e,t){if(!t)return e;for(var n,r=[],i=[],a=r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return aO(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aO(e,void 0)}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);!(n=o()).done;){var s=n.value;"|"===s?a.push({divider:!0}):"..."===s||""===s?a=i:function(){var t=void 0;t=""===s?void 0:s;var n=e.indexOf(e.filter(function(e){return e.value===t})[0]),r=e[n];e.splice(n,1),a.push(r)}()}return r.concat(e).concat(i)}((n=(e={countries:t||aL(u),countryNames:s,addInternationalOption:(!r||!1!==i)&&o,compareStringsLocales:l}).countries,c=e.countryNames,d=e.addInternationalOption,f=e.compareStringsLocales,(p=e.compareStrings)||(p=oc),(h=n.map(function(e){return{value:e,label:c[e]||e}})).sort(function(e,t){return p(e.label,t.label,f)}),d&&h.unshift({label:c.ZZ}),h),function(e,t){if(e&&(e=e.filter(function(e){switch(e){case"":case"|":case"...":case"":return!0;default:return aN(e,t)}})).length>0)return e}(a,u))},[t,a,o,s,u])}},{key:"useMemoCountrySelectOptions",value:function(e,t){return this.countrySelectOptionsMemoDependencies&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;){if(e[n]!==t[n])return!1;n++}return!0}(t,this.countrySelectOptionsMemoDependencies)||(this.countrySelectOptionsMemo=e(),this.countrySelectOptionsMemoDependencies=t),this.countrySelectOptionsMemo}},{key:"getFirstSupportedCountry",value:function(e){var t=e.countries;return this.getCountrySelectOptions({countries:t})[0].value}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.disabled,r=e.readOnly,i=e.autoComplete,a=e.style,o=e.className,s=(e.inputRef,e.inputComponent),l=e.numberInputProps,u=e.smartCaret,d=e.countrySelectComponent,f=e.countrySelectProps,p=e.containerComponent,h=(e.defaultCountry,e.countries,e.countryOptionsOrder,e.labels),m=(e.flags,e.flagComponent,e.flagUrl,e.addInternationalOption,e.internationalIcon,e.displayInitialValueAsLocalNumber,e.initialValueFormat,e.onCountryChange,e.limitMaxLength,e.countryCallingCodeEditable,e.focusInputOnCountrySelection,e.reset,e.metadata),g=(e.international,e.locales,function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,ox)),x=this.state,y=x.country,b=x.countries,w=x.phoneDigits,_=x.isFocused,k=this.getCountrySelectOptions({countries:b});return c.default.createElement(p,{style:a,className:(0,rD.default)(o,"PhoneInput",{"PhoneInput--focus":_,"PhoneInput--disabled":n,"PhoneInput--readOnly":r})},c.default.createElement(d,ow({name:t?"".concat(t,"Country"):void 0,"aria-label":h.country},f,{value:y,options:k,onChange:this.onCountryChange,onFocus:this.onCountryFocus,onBlur:this.onCountryBlur,disabled:n||f&&f.disabled,readOnly:r||f&&f.readOnly,iconComponent:this.CountryIcon})),c.default.createElement(u?as:ac,ow({ref:this.setInputRef,type:"tel",autoComplete:i},l,g,{name:t,metadata:m,country:y,value:w||"",onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,disabled:n,readOnly:r,inputComponent:s,className:(0,rD.default)("PhoneInputInput",l&&l.className,g.className)})))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return ob({props:e},function(e,t,n){var r=e.metadata,i=e.countries,a=e.defaultCountry,o=e.value,s=e.reset,l=e.international,u=e.displayInitialValueAsLocalNumber,c=e.initialValueFormat,d=t.defaultCountry,f=t.value,p=t.reset;n.country;var h=n.value,m=n.hasUserSelectedACountry,g=function(e){return op(om(om({},e),{},{international:l,useNationalFormat:u||"national"===c,metadata:r}))};if(s!==p)return{phoneDigits:g({value:void 0,defaultCountry:a}),value:void 0,country:a,hasUserSelectedACountry:void 0};if(a!==d){var x=!a||aN(a,r),y=!h||l&&h===g({value:void 0,defaultCountry:d}),b=!o&&y;if(!m&&x&&b)return{country:a,phoneDigits:g({value:void 0,defaultCountry:a}),value:void 0}}if(!og(o,f)&&!og(o,h)){if(o){var w,_,k=oo(o,r),S=aM(i,r);k&&k.country?(!S||S.indexOf(k.country)>=0)&&(w=k.country):(w=ol(o,{country:void 0,countries:S,metadata:r}))||!a||0!==o.indexOf(oa(a,r))||(w=a)}return o||(_={hasUserSelectedACountry:void 0}),om(om({},_),{},{phoneDigits:g({phoneNumber:k,value:o,defaultCountry:a}),value:o,country:o?w:a})}}(e,t.props,t))}}],n&&o_(a.prototype,n),r&&o_(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a}(c.default.PureComponent),oE=c.default.forwardRef(function(e,t){return c.default.createElement(oT,ow({},function(e){for(var t in e=ob({},e),oR)void 0===e[t]&&(e[t]=oR[t]);return e}(e),{inputRef:t}))});oE.propTypes={value:rI.default.string,onChange:rI.default.func.isRequired,onFocus:rI.default.func,onBlur:rI.default.func,disabled:rI.default.bool,readOnly:rI.default.bool,autoComplete:rI.default.string,initialValueFormat:rI.default.oneOf(["national"]),displayInitialValueAsLocalNumber:rI.default.bool,defaultCountry:rI.default.string,countries:rI.default.arrayOf(rI.default.string),labels:rP,locales:rI.default.oneOfType([rI.default.string,rI.default.arrayOf(rI.default.string)]),flagUrl:rI.default.string,flags:rI.default.objectOf(rI.default.elementType),flagComponent:rI.default.elementType,addInternationalOption:rI.default.bool,internationalIcon:rI.default.elementType,countryOptionsOrder:rI.default.arrayOf(rI.default.string),style:rI.default.object,className:rI.default.string,countrySelectComponent:rI.default.elementType,countrySelectProps:rI.default.object,inputComponent:rI.default.elementType,containerComponent:rI.default.elementType,numberInputProps:rI.default.object,smartCaret:rI.default.bool,international:rI.default.bool,limitMaxLength:rI.default.bool,countryCallingCodeEditable:rI.default.bool,metadata:rA,onCountryChange:rI.default.func,focusInputOnCountrySelection:rI.default.bool};var oR={autoComplete:"tel",countrySelectComponent:ab,flagComponent:aC,flagUrl:"https://purecatamphetamine.github.io/country-flag-icons/3x2/{XX}.svg",internationalIcon:aA,inputComponent:"input",containerComponent:"div",reset:rI.default.any,smartCaret:!0,addInternationalOption:!0,countryCallingCodeEditable:!0,focusInputOnCountrySelection:!0},oI=["metadata","labels"];function oA(){return(oA=Object.assign.bind()).apply(this,arguments)}function oP(e){var t=c.default.forwardRef(function(t,n){var r=t.metadata,i=t.labels,a=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,oI);return c.default.createElement(oE,oA({},a,{ref:n,metadata:void 0===r?e:r,labels:void 0===i?rR:i}))});return t.propTypes={metadata:rA,labels:rP},t}oP();let oD=oP(rE);var oO=e.i(951262);function oN(){var e=(0,tY._)(["\n  mutation SendSmsVerification($input: SendSmsVerificationInput!) {\n    sendSmsVerification(input: $input) {\n      ... on SendSmsVerificationResult {\n        __typename\n        success\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n      ... on TooManyRequestsError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return oN=function(){return e},e}function oM(){var e=(0,tY._)(["\n  mutation ConfirmSmsVerification($input: ConfirmSmsVerificationInput!) {\n    confirmSmsVerification(input: $input) {\n      ... on ConfirmSmsVerificationResult {\n        __typename\n        success\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n      ... on TooManyRequestsError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return oM=function(){return e},e}var oL={},oB=(0,tQ.gql)(oN()),oV=(0,tQ.gql)(oM()),oF=function(e,t){switch(t.type){case"setPhoneNumber":return(0,s._)((0,o._)({},e),{phoneNumber:t.phoneNumber});case"setCode":return(0,s._)((0,o._)({},e),{code:t.code});case"setError":return(0,s._)((0,o._)({},e),{error:t.message});case"setMode":return(0,s._)((0,o._)({},e),{mode:t.mode});default:return e}},oU=function(){var e,t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.onSuccess,u=i.context,d=(0,l._)((0,c.useReducer)(oF,{mode:"phone-input"}),2),f=d[0],p=d[1],h=(0,l._)((e={onError:function(){return p({type:"setError",message:"Something went wrong"})},onCompleted:function(e){"SendSmsVerificationResult"===e.sendSmsVerification.__typename?p({type:"setMode",mode:"code-input"}):p({type:"setError",message:e.sendSmsVerification.message})}},t=(0,o._)({},oL,e),oO.useMutation(oB,t)),2),m=h[0],g=h[1].loading,x=(0,l._)((n={onError:function(){return p({type:"setError",message:"Something went wrong"})},onCompleted:function(e){if("ConfirmSmsVerificationResult"===e.confirmSmsVerification.__typename){null==a||a(),p({type:"setMode",mode:"success"});return}p({type:"setError",message:e.confirmSmsVerification.message})}},r=(0,o._)({},oL,n),oO.useMutation(oV,r)),2),y=x[0],b=x[1].loading;return[(0,s._)((0,o._)({},f),{loading:b||g}),{reset:function(){p({type:"setMode",mode:"phone-input"}),p({type:"setPhoneNumber",phoneNumber:void 0}),p({type:"setCode",code:void 0}),p({type:"setError",message:void 0})},submitCode:function(){if(!b){var e=f.phoneNumber,t=f.code;if(!e)return void p({type:"setError",message:"Phone number is required"});if(!t)return void p({type:"setError",message:"Verification code is required"});p({type:"setError",message:void 0}),y({variables:{input:{phoneNumber:e,code:t,context:u}}})}},submitPhoneNumber:function(){if(!g){var e=f.phoneNumber;if(!e)return void p({type:"setError",message:"Phone number is required"});p({type:"setError",message:void 0}),m({variables:{input:{phoneNumber:e,context:u}}})}},handleCodeChange:function(e){p({type:"setCode",code:e})},handlePhoneNumberChange:function(e){p({type:"setPhoneNumber",phoneNumber:e})}}]},oG=e.i(754873),o$=(0,tx.cssRecord)({mobilePhoneInput:[{".PhoneInput":[eY.rcss.display.flex,eY.rcss.rowWithGap(4),oG.interactive.filledAndOutlined,eY.rcss.px(8),eY.rcss.py(4),eY.rcss.color.foregroundDefault,{".PhoneInputCountry":[eY.rcss.rowWithGap(4),eY.rcss.display.flex,eY.rcss.align.center,eY.rcss.flex.shrink(1),eY.rcss.position.relative,{".PhoneInputCountryIcon":[eY.rcss.width(16),eY.rcss.height(12),{".PhoneInputCountryIconImg":[eY.rcss.display.block,eY.rcss.width("100%"),eY.rcss.height("100%")]}],".PhoneInputCountrySelect":[eY.rcss.position.absolute,eY.rcss.top(0),eY.rcss.left(0),eY.rcss.width("100%"),eY.rcss.height("100%"),{opacity:0,zIndex:1,cursor:"pointer"}],".PhoneInputCountrySelectArrow":[eY.rcss.display.block,eY.rcss.width(8),eY.rcss.height(8),eY.rcss.mx(2),eY.rcss.mb(4),{content:'""',borderStyle:"solid",borderColor:t_.tokens.foregroundDefault,borderTopWidth:0,borderBottomWidth:1,borderLeftWidth:0,borderRightWidth:1,transform:"rotate(45deg)"}]}],".PhoneInputInput":[eY.rcss.flex.grow(1),{appearance:"none",background:"transparent",border:0,"&:focus":{outline:0}}]}]}],resetResendOptions:[eY.rcss.display.inlineBlock],textButton:[eY.rcss.reset.button,eY.rcss.color.accentPrimaryStronger,eY.rcss.focusRing,eY.rcss.borderRadius(4),{":focus":{outlineOffset:"2px"},transitionProperty:"color, box-shadow",transitionDuration:nm.TRANSITIONS.duration,transitionTimingFunction:nm.TRANSITIONS.timingFunction,":not([disabled])":{textDecoration:"underline",cursor:"pointer","@media (hover: hover)":{":hover":{color:t_.tokens.accentPrimaryStrongest}},":not(textarea):active":{color:t_.tokens.accentPrimaryStrongest}}}]}),oH=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,c.useId)();return e?"".concat(e,"-").concat(t):t};let oz=function(e){var t=e.context,n=e.ctas,r=void 0===n?{sendCode:"Send code",confirmCode:"Confirm code"}:n,i=e.onSuccess,a=e.autoFocus,o=(0,l._)(oU({onSuccess:i,context:t}),2),s=o[0],c=o[1],d=oH("sms-verification-phone"),f=oH("sms-verification-phone-error"),p=oH("sms-verification-code"),h=oH("sms-verification-code-error");switch(s.mode){case"phone-input":return(0,u.jsxs)(e5.View,{css:o$.mobilePhoneInput,gap:8,tag:"form",onSubmit:function(e){e.preventDefault(),c.submitPhoneNumber()},children:[(0,u.jsx)(e3.Text,{children:"Enter your phone number:"}),(0,u.jsx)(rT.VisuallyHidden,{children:(0,u.jsx)("label",{htmlFor:d,children:"Phone Number"})}),(0,u.jsx)(oD,{id:d,addInternationalOption:!1,countryCallingCodeEditable:!1,defaultCountry:"US",international:!0,value:s.phoneNumber,onChange:c.handlePhoneNumberChange,numberInputProps:{"aria-describedby":f,onKeyDown:function(e){"Enter"===e.key&&c.submitPhoneNumber()},autoFocus:void 0===a||a}}),s.error?(0,u.jsx)(t8.StatusBanner,{id:f,colorway:"warning",text:s.error}):null,(0,u.jsx)(e3.Text,{variant:"small",color:"dimmer",children:"Your phone number is only used for account verification."}),(0,u.jsx)(eQ.Button,{colorway:"primary",text:r.sendCode,loading:s.loading,type:"submit"})]});case"code-input":return(0,u.jsxs)(e5.View,{gap:8,tag:"form",onSubmit:function(e){e.preventDefault(),c.submitCode()},children:[(0,u.jsxs)(e3.Text,{children:["We just sent a verification code to ",s.phoneNumber,". Enter the code below."]}),(0,u.jsx)(rT.VisuallyHidden,{children:(0,u.jsx)("label",{htmlFor:p,children:"code"})}),(0,u.jsx)(tk.Input,{id:p,type:"text",inputMode:"numeric",pattern:"[0-9]*",autoComplete:"one-time-code",value:s.code,onChange:function(e){var t=e.currentTarget.value;return c.handleCodeChange(t)},onKeyDown:function(e){"Enter"===e.key&&c.submitCode()},"aria-describedby":h}),s.error?(0,u.jsx)(t8.StatusBanner,{id:h,colorway:"warning",text:s.error}):null,(0,u.jsxs)(e5.View,{gap:0,children:[(0,u.jsx)(e3.Text,{variant:"small",color:"dimmer",multiline:!0,children:"Didn't get the code?"}),(0,u.jsxs)(e3.Text,{variant:"small",color:"dimmer",css:o$.resetResendOptions,children:[(0,u.jsx)("button",{disabled:s.loading,css:o$.textButton,onClick:c.submitPhoneNumber,type:"button",children:"Resend the code"})," or ",(0,u.jsx)("button",{disabled:s.loading,css:o$.textButton,onClick:c.reset,type:"button",children:"use a different number"})]})]}),(0,u.jsx)(eQ.Button,{text:r.confirmCode,colorway:"primary",loading:s.loading,type:"submit"})]});case"success":return(0,u.jsx)(e5.View,{align:"center",children:(0,u.jsx)(eD.default,{size:24})})}};e.s(["default",0,oz],827305);var oW=e.i(222342),oq=e.i(441329),oK=e.i(341126),oY=e.i(418725),oQ=function(e){(0,eW.track)(eq.events.DATABASE_USED,(0,o._)({type:"PostgreSQL",provider:"neon"},e))},oX=e.i(702069),oZ=e.i(443394),oJ=e.i(739521),o0=e.i(552144),o1=e.i(531603),o2=(0,tx.cssRecord)({cta:[eY.rcss.width("100%")],ctaStatusBanner:[eY.rcss.textAlign.left]});function o3(e){var t=e.loading,n=e.ubbExplanation,r=e.hasPaymentMethod,i=e.handleOnUnpause,a=e.refetchUbbCapabilitiesQueryData,o=e.setShowPaymentMethodForm,s=e.showPaymentMethodForm,l=e.setShowSupportForm,c=e.replId,d=(0,oq.useIsInBonsaiWebview)(),f=(0,oZ.getCurrentUrl)(),p=(0,eH.useCurrentUserStoredOrgContext)(),h=p.orgId,m=p.orgRole,g=p.orgSlug;if(void 0!==h)if(m!==rx.SystemOrgGroupType.SystemAdmins)return(0,u.jsx)(t8.StatusBanner,{text:"Your database has been frozen. Please contact your organization admin to address outstanding invoices",colorway:"warning",icon:(0,u.jsx)(rj.default,{}),css:o2.ctaStatusBanner});else{var x=g?"".concat((0,oK.orgLinks)({slug:g}).settings.href,"/billing"):"#";return(0,u.jsx)(t8.StatusBanner,{text:"Your database has been frozen. Address outstanding invoices to unfreeze it",colorway:"warning",icon:(0,u.jsx)(rj.default,{}),css:o2.ctaStatusBanner,action:(0,u.jsx)(rg.default,{href:x,children:(0,u.jsx)(eQ.Button,{colorway:"warning",text:"View invoices"})})})}return n===rx.UserUsageBasedBillingCapabilitiesExplanation.NeedsSubscription||n===rx.UserUsageBasedBillingCapabilitiesExplanation.NeedsSubscriptionOrPaymentMethod?d?(0,u.jsx)(t8.StatusBanner,{text:"You need a subscription to use PostgreSQL databases. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,u.jsx)(rj.default,{}),css:o2.ctaStatusBanner}):(0,u.jsx)(oY.default,{context:"workspace_postgresql_pane",text:"Upgrade your plan to unpause database",css:o2.cta,colorway:"primary",variant:"outlined",disabled:s,onPlanCheckoutComplete:a,modalHeadingText:"Upgrade your plan to unpause database",redirectPath:f}):n===rx.UserUsageBasedBillingCapabilitiesExplanation.NeedsSmsVerification?(0,u.jsx)(oz,{context:rx.SmsVerificationContext.Neon,onSuccess:a}):n===rx.UserUsageBasedBillingCapabilitiesExplanation.NeedsPaymentMethod?d?(0,u.jsx)(t8.StatusBanner,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,u.jsx)(rj.default,{}),css:o2.ctaStatusBanner}):(0,u.jsx)(eQ.Button,{colorway:"primary",text:"Add a payment method",css:o2.cta,disabled:s,loading:t,iconLeft:(0,u.jsx)(rC.default,{}),onClick:function(){return o()}}):n===rx.UserUsageBasedBillingCapabilitiesExplanation.NeedsUnbanning?(0,u.jsx)(o0.StatusBannerButton,{text:"Your account currently has restrictions on use PostgreSQL databases. We're here to help! Please reach out to support@replit.com for assistance.",colorway:"warning",iconLeft:(0,u.jsx)(rj.default,{}),css:o2.ctaStatusBanner,onClick:function(){return l()}}):n===rx.UserUsageBasedBillingCapabilitiesExplanation.InsufficientBudget?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(t8.StatusBanner,{text:"You've reached your monthly usage budget. Increase your budget to unpause your database.",colorway:"warning",icon:(0,u.jsx)(rj.default,{}),css:o2.ctaStatusBanner}),(0,u.jsx)(oX.UsageBudget,{onUpdateSuccess:a,replId:c})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eQ.Button,{colorway:"primary",onClick:i,text:"Unpause database",loading:t,css:o2.cta}),!1===r?(0,u.jsx)(o0.StatusBannerButton,{text:"Add a payment method to avoid downtime",colorway:"warning",iconLeft:(0,u.jsx)(rj.default,{}),css:o2.ctaStatusBanner,onClick:function(){return d?null:o()}}):null]})}function o5(e){var t,n,r,i=e.replId,a=e.neonProjectId,d=(0,l._)((0,c.useState)(!1),2),f=d[0],p=d[1],h=(0,l._)((0,c.useState)(!1),2),m=h[0],g=h[1],x=(0,oW.default)().showError,y=(t={notifyOnNetworkStatusChange:!0,onError:function(e){x(e.message)}},n=(0,o._)({},r_,t),tX.useQuery(rk,n)),b=y.loading,w=y.data,_=y.refetch,k=(0,l._)((0,rS.useUnfreezeNeonDatabaseMutation)({refetchQueries:[{query:rv.GetNeonDatabasesDocument,variables:{input:{replId:i}}}],onError:function(e){x("Error when unfreezing Neon database: ".concat(e.message)),oQ({action:"unfreeze",success:!1})},update:function(e,t){var n,r=t.data,l=e.readQuery({query:rv.GetNeonDatabasesDocument,variables:{input:{replId:i}}});(null==r?void 0:r.unfreezeNeonDatabase.__typename)==="UnfreezeNeonDatabaseResult"&&(null==l||null==(n=l.getNeonDatabases)?void 0:n.__typename)==="GetNeonDatabasesResult"&&e.writeQuery({query:rv.GetNeonDatabasesDocument,variables:{input:{replId:i}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:l.getNeonDatabases.databases.map(function(e){return e.projectId===a?(0,s._)((0,o._)({},e),{isFrozen:!1}):e})}}})},onCompleted:function(e){if((null==e?void 0:e.unfreezeNeonDatabase.__typename)!=="UnfreezeNeonDatabaseResult"){x("Error: Unfreezes Neon Database failed."),oQ({action:"unfreeze",success:!1});return}(null==e?void 0:e.unfreezeNeonDatabase.success)?oQ({action:"unfreeze",success:!0}):(x("Error: Unfreezes Neon Database failed."),oQ({action:"unfreeze",success:!1}))}}),2),S=k[0],C=k[1].loading,j=(null==w||null==(r=w.currentUser)?void 0:r.usageBasedBilling.__typename)==="UserUsageBasedBillingSummary"?w.currentUser.usageBasedBilling.capabilities:null;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(oJ.Modal,{isOpen:m,onRequestClose:function(){return g(!1)},children:(0,u.jsx)(o1.default,{onRequestClose:function(){return g(!1)}})}),(0,u.jsx)(e5.View,{gap:8,children:(0,u.jsx)(o3,{replId:i,loading:b||C,ubbExplanation:null==j?void 0:j.explanation,hasPaymentMethod:null==j?void 0:j.hasPaymentMethod,handleOnUnpause:function(){S({variables:{input:{replId:i,neonProjectId:a}}})},refetchUbbCapabilitiesQueryData:_,setShowPaymentMethodForm:function(){return p(!0)},showPaymentMethodForm:f,setShowSupportForm:function(){return g(!0)}})})]})}function o4(){var e=(0,tY._)(["\n  fragment CloudServicesReplAuthorizations on ReplAuthorizations {\n    useFreeTierCloudServices {\n      code\n      isAuthorized\n      message\n    }\n  }\n"]);return o4=function(){return e},e}function o8(){var e=(0,tY._)(["\n  query GetCloudServicesReplAuthorizations($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          ...CloudServicesReplAuthorizations\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return o8=function(){return e},e}var o6={},o7=(0,tQ.gql)(o4()),o9=(0,tQ.gql)(o8(),o7);function se(){var e,t,n=(e={variables:{replId:(0,tr.default)()}},t=(0,o._)({},o6,e),tX.useQuery(o9,t)),r=n.data,i=n.loading,a=n.error,s=n.refetch;return{authorizations:(null==r?void 0:r.getRepl.__typename)==="Repl"?r.getRepl.authorizations:void 0,loading:i,error:a,refetch:s}}var st=e.i(3382),sn=tH.loadingStyle.backgroundPulse(t_.tokens.backgroundHigher,t_.tokens.backgroundHighest);function sr(e){var t=e.database,n=e.replId,r=e.connectionString,i=(0,nJ.useGetTables)({connectionString:r}),a=i.tables,o=i.loading,s=i.refetch,l="neon"===t.kind;return nQ("overview-tab",s),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(e5.View,{gap:8,pt:1,children:[l?(0,u.jsx)(si,{database:t,replId:n}):null,(0,u.jsxs)(e5.View,{gap:8,children:[(0,u.jsx)(e3.Text,{variant:"subheadDefault",children:"Tables"}),(0,u.jsx)(sa,{tables:a,tablesLoading:o})]})]})})}var si=function(e){var t,n=e.database,r=e.replId,i=se().authorizations,a=null==i||null==(t=i.useFreeTierCloudServices)?void 0:t.isAuthorized,o=n.isEphemeral,s=n.isFrozen,l=n.scheduledFreezeTime||void 0,c=n.scheduledDeletionTime||void 0,d=s?n.frozenReason||"frozen":void 0;return a&&o?(0,u.jsx)(rm.FreeTierUpsellBanner,{product:"neon",suspendedReason:d,scheduledSuspensionTime:l,scheduledDeletionTime:c}):s?(0,u.jsx)(o5,{neonProjectId:n.projectId,replId:r}):null},sa=function(e){var t=e.tables,n=e.tablesLoading,r=nW(),i=r.selectTab,a=r.selectSchema,o=r.selectTable;return n?(0,u.jsx)(so,{}):0===t.length?(0,u.jsx)(e3.Text,{children:"You don't have any tables in this database yet."}):(0,u.jsx)(e5.View,{className:st.default.tableGrid,children:t.map(function(e){return(0,u.jsx)(n4,{name:e.name,storage:"".concat(e.estimatedRows.toString()," rows"),onClick:function(){i("drizzle-studio"),a("public"),o(e.name)}},e.name)})})},so=function(){return(0,u.jsx)(e5.View,{clsx:[st.default.tableGrid,st.default.skeletonDelayed],children:Array.from({length:2}).map(function(e,t){return(0,u.jsxs)(e5.View,{row:!0,align:"center",justify:"space-between",p:12,className:st.default.skeletonItem,children:[(0,u.jsxs)(e5.View,{row:!0,align:"center",gap:12,children:[(0,u.jsx)(e5.View,{css:sn,className:st.default.skeletonIcon}),(0,u.jsxs)(e5.View,{gap:4,children:[(0,u.jsx)(e5.View,{css:sn,className:st.default.skeletonName}),(0,u.jsx)(e5.View,{css:sn,className:st.default.skeletonStorage})]})]}),(0,u.jsx)(e5.View,{css:sn,className:st.default.skeletonChevron})]},"skeleton-".concat(t))})})},ss=e.i(491194),sl="DATABASE_URL",su="PGDATABASE",sc="PGHOST",sd="PGPORT",sf="5432",sp="PGUSER",sh="PGPASSWORD",sm=function(e){var t=e.connectionString,n=e.databaseName,r=e.pooled;void 0!==r&&r&&(t=function(e){if(!e||"string"!=typeof e)throw Error("Connection string must be a non-empty string");if(e.includes("-pooler."))return e;if(!e.startsWith("postgres://")&&!e.startsWith("postgresql://"))throw Error("Invalid PostgreSQL connection string format");if(!e.includes(".neon.tech"))throw Error("Not a Neon connection string");try{var t=e.replace("postgres://","https://").replace("postgresql://","https://"),n=new URL(t);if(!n.hostname.startsWith("ep-")||!n.hostname.endsWith(".neon.tech"))throw Error("Not a valid Neon endpoint hostname");var r=n.hostname.split("."),i=r[0];if(!i.startsWith("ep-"))throw Error("Invalid endpoint format");var a=[i+"-pooler"].concat((0,G._)(r.slice(1))).join("."),o=e.startsWith("postgres://")?"postgres://":"postgresql://";return e.replace(n.hostname,a).replace("https://",o)}catch(e){if((0,I._)(e,Error)&&e.message.includes("URL"))throw Error("Invalid connection string format");throw e}}(t));var i=new URL(t.replace("postgres://","https://").replace("postgresql://","https://"));return new Map([[sl,t],[su,n],[sc,i.host],[sd,sf],[sp,i.username],[sh,i.password]])},sg=e.i(927158),sv=e.i(11986),sx=e.i(712771),sy=e.i(979530),sb=e.i(428596),sw=e.i(877768),s_=function(e){var t=e.envVarKey,n=e.envVarValue,r=e.isSecret,i=(0,sb.useIdSeed)()("db-env-var-".concat(t)),a=(0,l._)((0,c.useState)(!1),2),o=a[0],s=a[1];return(0,u.jsxs)(e5.View,{gap:8,py:8,row:!0,align:"center",children:[(0,u.jsx)("label",{clsx:sw.default.envVarLabel,htmlFor:i,children:t}),(0,u.jsx)(e5.View,{grow:!0,shrink:!0,children:(0,u.jsx)(tk.Input,{id:i,type:!r||o?"text":"password",readOnly:!0,value:n})}),(0,u.jsxs)(e5.View,{align:"center",gap:8,row:!0,children:[(0,u.jsx)(eQ.Button,{text:"",iconLeft:(0,u.jsx)(sv.default,{}),onClick:function(){(0,tm.default)(n),oQ({action:"envVarCopied",envVarKey:t,envVarType:"value"})}}),r?(0,u.jsx)(eQ.Button,{text:"",iconLeft:o?(0,u.jsx)(sy.default,{}):(0,u.jsx)(sx.default,{}),onClick:function(){return s(function(e){return!e})}}):null]})]})},sk=function(e){var t=e.database;return"neon"===t.kind?(0,u.jsx)(sS,{connectionString:t.connectionString,databaseName:t.databaseName,databaseType:t.type}):(0,u.jsx)(e5.View,{gap:8,children:(0,u.jsx)(s_,{envVarKey:sl,envVarValue:t.connectionString,isSecret:!0})})},sS=function(e){var t,n=e.connectionString,r=e.databaseName,i=e.databaseType,a=(0,g.default)(function(){return sm({connectionString:n,databaseName:r})},[n,r]),o=a.get(sc),s=a.get(sp),d=a.get(sh);if("string"!=typeof o||"string"!=typeof s||"string"!=typeof d)throw Error("Expected all envVars to exist");var f=(t=(0,nl.default)().secrets,(0,c.useCallback)(function(e){return function(e){return(0,eE._)(function(e){var t,n;return(0,Q._)(this,function(r){switch(r.label){case 0:return t=e.secrets,n=sm({connectionString:e.connectionString,databaseName:e.databaseName}),[4,(0,eE._)(function(){var e,r,i,a,o,s,u,c,d,f;return(0,Q._)(this,function(p){switch(p.label){case 0:return[4,t.read()];case 1:e=p.sent(),r=new Map,i=!0,a=!1,o=void 0;try{for(s=n[Symbol.iterator]();!(i=(u=s.next()).done);i=!0)d=(c=(0,l._)(u.value,2))[0],f=c[1],e.get(d)!==f&&r.set(d,f)}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return r.size>0&&t.addEntries(r),[2]}})})()];case 1:return r.sent(),[2]}})}).apply(this,arguments)}({secrets:t,connectionString:e.connectionString,databaseName:e.databaseName})},[t]));return(0,c.useEffect)(function(){"production"!==i&&f({connectionString:n,databaseName:r})},[i,n,r,f]),(0,u.jsxs)(e5.View,{children:[(0,u.jsx)(s_,{envVarKey:sl,envVarValue:n,isSecret:!0}),(0,u.jsx)(s_,{envVarKey:su,envVarValue:r}),(0,u.jsx)(s_,{envVarKey:sc,envVarValue:o}),(0,u.jsx)(s_,{envVarKey:sd,envVarValue:sf}),(0,u.jsx)(s_,{envVarKey:sp,envVarValue:s}),(0,u.jsx)(s_,{envVarKey:sh,envVarValue:d,isSecret:!0})]})},sC=e.i(344481);function sj(e){var t=e.totalUsageBytes,n=e.maxUsageBytes,r=e.loading;return(0,u.jsxs)(e5.View,{gap:4,children:[(0,u.jsx)(e3.Text,{variant:"subheadDefault",children:"Storage Used"}),(0,u.jsx)(e5.View,{pt:8,pb:4,children:(0,u.jsx)(tz.MeasureBar,{current:t,total:n,loading:r,tooltipHidden:!0})}),(0,u.jsxs)(e5.View,{row:!0,align:"center",justify:"space-between",pb:4,children:[(0,u.jsxs)(e3.Text,{variant:"small",color:"dimmer",children:["Total usage: ",nD(t)]}),(0,u.jsxs)(e3.Text,{variant:"small",color:"dimmer",children:["Max usage: ",nD(n)]})]})]})}var sT=e.i(173703),sE=(0,tx.cssRecord)({remove:[eY.rcss.py(8)]}),sR=function(e){var t=e.replId,n=e.neonDatabase,r=(0,oW.default)().showError,i=nW(),a=i.refetchHeliumState,o=i.selectPage,s=(0,l._)((0,rS.useDeleteNeonDatabaseMutation)({refetchQueries:[{query:rv.GetNeonDatabasesDocument,variables:{input:{replId:t}}}],update:function(e,n,r){var i=n.data,a=r.variables;if(null==i||!i.deleteNeonDatabase||"success"in i.deleteNeonDatabase){var o=e.readQuery({query:rv.GetNeonDatabasesDocument,variables:{input:{replId:t}}});a&&(null==o?void 0:o.getNeonDatabases.__typename)==="GetNeonDatabasesResult"&&e.writeQuery({query:rv.GetNeonDatabasesDocument,variables:{input:{replId:t}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:o.getNeonDatabases.databases.filter(function(e){return e.databaseId!==a.input.databaseId})}}})}}}),2),u=s[0],d=s[1].loading,f=(0,c.useCallback)(function(){x(!0)},[]),p=(0,sg.usePid2Callback)(function(e){return function(){return(0,eE._)(function(){var t;return(0,Q._)(this,function(n){switch(n.label){case 0:return[4,e.secrets.removeSecrets.rpc({secrets:[sl,su,sc,sd,sp,sh]})];case 1:return(t=n.sent()).ok||"CANCEL"===t.payload.code||"UNEXPECTED_DISCONNECT"===t.payload.code||nq.captureException("Failed to remove pg secrets",{extra:{code:t.payload.code}}),[2]}})})()}},[]),h=(0,c.useCallback)(function(){return(0,eE._)(function(){var e,i,s;return(0,Q._)(this,function(l){switch(l.label){case 0:return[4,u({variables:{input:{replId:t,databaseId:n.databaseId}}})];case 1:if(i=(e=l.sent()).data,s=e.errors,x(!1),s&&s.length>0)return r("Error when deleting Neon database: ".concat(null==s?void 0:s.join())),oQ({action:"removed",success:!1}),[2];if((null==i?void 0:i.deleteNeonDatabase.__typename)!=="DeleteNeonDatabaseResult")return r("Error: ".concat(null==i?void 0:i.deleteNeonDatabase.message)),oQ({action:"removed",success:!1}),[2];if(!(null==i?void 0:i.deleteNeonDatabase.success))return[3,5];if(oQ({action:"removed",success:!0}),"development"!==n.type)return[3,4];return[4,null==p?void 0:p()];case 2:return l.sent(),[4,null==a?void 0:a()];case 3:l.sent(),o("overview-page"),l.label=4;case 4:return[3,6];case 5:r("Error: Delete Neon Database failed."),oQ({action:"removed",success:!1}),l.label=6;case 6:return[2]}})})()},[u,n.databaseId,n.type,t,a,o,r,p]),m=(0,l._)((0,c.useState)(!1),2),g=m[0],x=m[1];return{isPendingDelete:g,cancelDelete:(0,c.useCallback)(function(){x(!1)},[]),removeDatabase:h,deleteLoading:d,handleRemoveDatabaseClick:f}},sI=function(e){var t=sR({replId:e.replId,neonDatabase:e.neonDatabase}),n=t.isPendingDelete,r=t.cancelDelete,i=t.removeDatabase,a=t.deleteLoading,o=t.handleRemoveDatabaseClick;return(0,u.jsx)(u.Fragment,{children:n||a?(0,u.jsxs)(sT.ShadesSurface,{p:8,gap:8,children:[(0,u.jsx)(e3.Text,{children:"Removing this database will permanently destroy all the data."}),(0,u.jsx)(t8.StatusBanner,{icon:(0,u.jsx)(rj.default,{}),colorway:"warning",text:"This action cannot be undone."}),(0,u.jsx)(eQ.Button,{text:"Yes, Remove Database",colorway:"negative",disabled:a,iconLeft:(0,u.jsx)(ss.default,{}),onClick:i}),(0,u.jsx)(eQ.Button,{autoFocus:!0,text:"Cancel",disabled:a,onClick:r})]}):(0,u.jsx)(eQ.Button,{css:sE.remove,text:"Remove Database",disabled:a,iconLeft:(0,u.jsx)(ss.default,{}),onClick:o})})};function sA(e){var t=e.database,n=(0,tr.default)(),r=(0,nJ.useGetDatabaseSize)(t),i=r.databaseSize,a=r.loading;return nQ("settings-tab",r.refetch),(0,u.jsxs)(e5.View,{gap:12,children:[(0,u.jsxs)(e5.View,{gap:12,children:["neon"===t.kind&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(sC.DatabaseSettingsHistoryRetentionSection,{neonDatabase:t}),(0,u.jsx)(sC.DatabaseSettingsRestoreSection,{neonDatabase:t})]}),(0,u.jsx)(sj,{loading:a,totalUsageBytes:i,maxUsageBytes:t.maxSizeBytes}),(0,u.jsxs)(e5.View,{gap:2,children:[(0,u.jsx)(e3.Text,{variant:"subheadDefault",children:"Environment variables"}),(0,u.jsx)(sk,{database:t})]})]}),"neon"===t.kind&&(0,u.jsx)(sI,{replId:n,neonDatabase:t})]})}var sP=e.i(788401),sD=e.i(161322),sO=(0,p.atom)(!0),sN=function(){return(0,sD.useSetAtom)(sO)},sM=(0,e.i(115306).default)(function(){return e.A(279490).then(function(e){return e.DrizzleStudio_DO_NOT_USE_OR_YOU_WILL_BE_FIRED})},{loadableGenerated:{modules:[594244]},ssr:!1}),sL=function(e){var t,n;return{queryFn:null!=(t=(0,sg.usePid2Callback)(function(t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return(0,eE._)(function(){var a;return(0,Q._)(this,function(o){switch(o.label){case 0:return[4,t.database.rawExecuteQuery.rpc({connectionString:e,sql:n,params:r,options:{mode:null==i?void 0:i.mode}})];case 1:if(!(a=o.sent()).ok){if("UNEXPECTED_DISCONNECT"===a.payload.code||"CANCEL"===a.payload.code)return[2,[]];throw Error(a.payload.message)}return[2,a.payload.rows]}})})()}},[e]))?t:function(){return(0,eE._)(function(){return(0,Q._)(this,function(e){return[2,[]]})})()},transactionFn:null!=(n=(0,sg.usePid2Callback)(function(t){return function(n){return(0,eE._)(function(){var r;return(0,Q._)(this,function(i){switch(i.label){case 0:return[4,t.database.rawExecuteTransaction.rpc({connectionString:e,queries:n})];case 1:if(!(r=i.sent()).ok){if("UNEXPECTED_DISCONNECT"===r.payload.code||"CANCEL"===r.payload.code)return[2,[]];throw Error(r.payload.message)}return[2,r.payload]}})})()}},[e]))?n:function(){return(0,eE._)(function(){return(0,Q._)(this,function(e){return[2,[]]})})()}}};function sB(e){var t=e.connectionString,n=e.databaseId,r=e.selectedSchema,i=e.selectedTable,a=e.readonly,o=sL(t),s=o.queryFn,l=o.transactionFn;return(0,ti.useTrackEffect)(eq.events.DRIZZLE_STUDIO_USED,{action:"opened"}),(0,u.jsx)(sM,{databaseId:"".concat(n.toString(),"-").concat(t),queryFn:s,transactionFn:l,selectedSchema:void 0===r?null:r,selectedTable:void 0===i?null:i,readonly:void 0!==a&&a})}var sV=e.i(112767),sF=e.i(67810),sU=function(e){var t=e.selectedDatabase,n=(0,tr.default)(),r=nW(),i=r.selectedTab,a=r.selectTab,o=r.selectedSchema,s=r.selectedTable,l=(0,sD.useAtomValue)(sO),c=sN(),d="neon"===t.kind?(0,sP.normalizeConnectionString)(t):t.connectionString,f="neon"!==t.kind||"production"!==t.type;return(0,u.jsxs)(e2.Tabs,{className:sF.default.wrapper,onSelectionChange:a,selectedKey:i,children:[(0,u.jsxs)(e2.TabList,{className:sF.default.tabList,withDividers:!1,children:[(0,u.jsx)(e2.Tab,{id:"overview",iconLeft:(0,u.jsx)(n1.default,{}),children:"Overview"}),(0,u.jsx)(e2.Tab,{id:"drizzle-studio",iconLeft:(0,u.jsx)(nR.default,{}),isDisabled:"neon"===t.kind&&t.isFrozen,children:"My Data"}),(0,u.jsx)(e2.Tab,{id:"settings",iconLeft:(0,u.jsx)(eL.default,{}),children:"Settings"})]}),(0,u.jsxs)(e5.View,{className:sF.default.tabPanels,children:[(0,u.jsx)(e2.TabPanel,{id:"overview",className:sF.default.overviewTabPanel,children:(0,u.jsx)(e5.View,{className:sF.default.content,children:(0,u.jsx)(sr,{database:t,replId:n,connectionString:d})})}),(0,u.jsx)(e2.TabPanel,{id:"drizzle-studio",className:sF.default.studioTabPanel,children:(0,u.jsxs)(e5.View,{className:sF.default.content,children:[!f&&(0,u.jsx)(t8.StatusBanner,{text:l?"You're viewing your database in read-only mode.":"Any changes made here will immediately impact your live application.",variant:"default",colorway:l?void 0:"primary",action:(0,u.jsxs)(e5.View,{row:!0,align:"center",gap:8,children:[(0,u.jsx)(e3.Text,{variant:"small",children:"Enable Editing"}),(0,u.jsx)(sV.Switch,{"aria-labelledby":"enable-editing",isSelected:!l,onChange:function(e){c(!e)}})]})}),(0,u.jsx)(sB,{connectionString:d,databaseId:t.databaseId,selectedSchema:o,selectedTable:s,readonly:!f&&l})]})}),(0,u.jsx)(e2.TabPanel,{id:"settings",className:sF.default.settingsTabPanel,children:(0,u.jsx)(e5.View,{className:sF.default.content,children:(0,u.jsx)(sA,{database:t})})})]})]})},sG=function(e){var t,n=e.databases,r=nW(),i=r.selectedPage,a=r.selectPage,o=r.selectedDatabaseId,s=(0,l._)((0,c.useState)(o&&null!=(t=n.find(function(e){return e.databaseId===o}))?t:n[0]),2),d=s[0],f=s[1],p=sN();return(0,c.useEffect)(function(){return function(){p(!0)}},[p]),(0,c.useEffect)(function(){n.length>0&&!n.some(function(e){return e.databaseId===d.databaseId})&&f(n[0])},[n,d]),(0,u.jsx)(nZ,{children:(0,u.jsxs)(e5.View,{row:!1,style:{height:"100%",overflow:"hidden"},children:[(0,u.jsx)(rh,{onSelectDatabase:f,selectedDatabase:d,databases:n,onShowAllDatabases:function(){a("overview-page")}}),(0,u.jsx)(s$,{selectedPage:i,databases:n,onSelectDatabase:f,selectedDatabase:d})]})})},s$=function(e){var t=e.selectedPage,n=e.databases,r=e.onSelectDatabase,i=e.selectedDatabase;switch(t){case"overview-page":return(0,u.jsx)(n9,{databases:n,onSelectDatabase:r});case"db-page":return(0,u.jsx)(sU,{selectedDatabase:i,onSelectDatabase:r})}};let sH=function(){var e=nW(),t=e.loading,n=e.databases,r=e.heliumMigrationState;if(t)return(0,u.jsx)(t3.default,{pane:{type:"neon"},maxWidth:450,loading:!0});if(n.length>0)return(0,u.jsx)(sG,{databases:n});if("UNSUPPORTED_DB"===r||"USING_NEON"===r)return(0,u.jsx)(t3.default,{pane:{type:"neon"},maxWidth:450,headerText:"Unsupported development database",bodyText:"Invalid DATABASE_URL Secrets"});if(void 0===r)return(0,u.jsx)(t3.default,{pane:{type:"neon"},maxWidth:450,headerText:"Database not available",bodyText:"Something went wrong. Please refresh the page and try again."});throw Error("Invalid database state")};var sz=d.Type.Object({type:d.Type.Literal("neon"),data:d.Type.Optional(d.Type.Object({openAtDatabase:n$},{additionalProperties:!0}))}),sW={Content:function(e){var t=e.pane.data,n=e.options;return(0,u.jsx)(nz,{initialOpenAtDatabase:null==t?void 0:t.openAtDatabase,performPaneOperation:n.performPaneOperation,children:(0,u.jsx)(sH,{})})},Icon:function(e){var t=e.size;return(0,u.jsx)(tu.IconContext.Provider,{value:{color:t_.tokens.blueStrongest,size:t},children:(0,u.jsx)(nR.default,{})})},getTitle:function(){return"Database"},description:"Stores structured data such as user profiles, game scores, and product catalogs.",category:e_.PaneCategory.CloudServices,decode:function(e){return f.Value.Decode(sz,e)}};e.s(["neonUI",()=>sW],275222);var sq=e.i(146432);function sK(){var e=(0,tY._)(["\n  fragment ObjectStorageBucket on Bucket {\n    id\n    externalId\n    name\n    suspendedReason\n    scheduledDeletionTime\n  }\n"]);return sK=function(){return e},e}function sY(){var e=(0,tY._)(["\n  query ObjectStoragePane(\n    $replId: String!\n    $bucketsAfter: String\n    $bucketsCount: Int\n  ) {\n    currentUser {\n      id\n    }\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n        authorizations {\n          createObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n          editObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n        }\n        buckets(after: $bucketsAfter, count: $bucketsCount) {\n          ... on BucketConnection {\n            __typename\n            items {\n              ...ObjectStorageBucket\n            }\n            pageInfo {\n              nextCursor\n            }\n          }\n          ... on UnauthorizedError {\n            __typename\n            message\n          }\n        }\n        defaultBucket {\n          ... on Bucket {\n            ...ObjectStorageBucket\n          }\n          ... on Error {\n            message\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n          ... on UserError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return sY=function(){return e},e}function sQ(){var e=(0,tY._)(["\n  mutation ObjectStoragePaneCreateBucket($input: CreateBucketInput!) {\n    createBucket(input: $input) {\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return sQ=function(){return e},e}var sX={},sZ=(0,tQ.gql)(sK()),sJ=(0,tQ.gql)(sY(),sZ),s0=(0,tQ.gql)(sQ(),sZ);function s1(e){var t=(0,o._)({},sX,e);return oO.useMutation(s0,t)}var s2=e.i(346781),s3=e.i(255444);function s5(){var e=(0,tY._)(["\n  query CreateBucketName($teamId: Int, $name: String) {\n    bucketName: replTitle(teamId: $teamId, title: $name)\n  }\n"]);return s5=function(){return e},e}var s4={},s8=(0,tQ.gql)(s5()),s6=e.i(818503),s7=(0,tx.cssRecord)({createBucketButton:[eY.rcss.flex.growAndShrink(1),eY.rcss.justify.center,eY.rcss.textAlign.center],labeledInput:[eY.rcss.textAlign.left],row:[eY.rcss.flex.growAndShrink(1),eY.rcss.pt(16),eY.rcss.rowWithGap(16),{flexBasis:"300px"}],wrapper:[eY.rcss.flex.wrap]});function s9(e){var t,n,r,i,a,s,d,f,p,h,m,g,x,y,b=e.isOpen,w=e.loading,_=e.handleCreateBucket,k=e.onRequestClose,S=(n=(t={}).preferredName,r=t.teamId,a=(i=(0,l._)((0,c.useState)(""),2))[0],s=i[1],d=(0,c.useRef)(null),f=(0,c.useRef)(!1),g=(p={variables:{name:n,teamId:r},fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1},h=(0,o._)({},s4,p),m=tX.useQuery(s8,h)).data,x=m.previousData,y=(null==g?void 0:g.bucketName)||(null==x?void 0:x.bucketName),(0,c.useEffect)(function(){!y||f.current||s(y)},[y]),{name:a,setName:(0,c.useCallback)(function(e){f.current=!0,s(e.slice(0,60))},[]),nameInputRef:d}),C=S.name,j=S.setName,T=S.nameInputRef,E=(0,tr.default)();return(0,u.jsx)(e5.View,{children:(0,u.jsx)(oJ.Modal,{fitContent:!0,isOpen:b,onRequestClose:k,children:(0,u.jsxs)(sT.ShadesSurface,{elevate:!1,children:[(0,u.jsx)(e3.Header,{level:1,variant:"subheadBig",children:"Create a Bucket"}),(0,u.jsxs)(e5.View,{css:s7.wrapper,row:!0,children:[(0,u.jsx)(e5.View,{css:s7.row,children:(0,u.jsx)(le,{name:C,setName:j,nameInputRef:T,disabled:w})}),(0,u.jsx)(e5.View,{css:s7.row,children:(0,u.jsx)(eQ.Button,{css:s7.createBucketButton,text:w?"Creating bucket...":"Create bucket",onClick:function(){return _({name:C,replId:E})},colorway:"primary",iconLeft:w?(0,u.jsx)(eD.default,{}):(0,u.jsx)(eN.default,{}),disabled:w})})]})]})})})}function le(e){var t=e.name,n=e.setName,r=e.nameInputRef,i=e.disabled,a=(0,sb.useIdSeed)();return(0,u.jsxs)(e5.View,{css:s7.labeledInput,grow:!0,shrink:!0,gap:8,children:[(0,u.jsx)(s6.Label,{htmlFor:a("bucketName"),children:"Name"}),(0,u.jsx)(tk.Input,{spellCheck:!1,id:a("bucketName"),disabled:i,onChange:function(e){n(e.currentTarget.value)},value:t,ref:r,placeholder:"Name your Bucket"})]})}var lt=e.i(711300),ln=e.i(634203),lr=e.i(35877),li=e.i(747304);function la(e,t){var n=(0,li._)(e,t,"update");if(n.set){if(!n.get)throw TypeError("attempted to read set only private field");return"__destrWrapper"in n||(n.__destrWrapper={set value(v){n.set.call(e,v)},get value(){return n.get.call(e)}}),n.__destrWrapper}if(!n.writable)throw TypeError("attempted to set read only private field");return n}var lo=function e(t){(0,S._)(this,e),(0,j._)(this,"value",void 0),(0,j._)(this,"next",void 0),this.value=t},ls=new WeakMap,ll=new WeakMap,lu=new WeakMap,lc=function(){function e(){(0,S._)(this,e),(0,ln._)(this,ls,{writable:!0,value:void 0}),(0,ln._)(this,ll,{writable:!0,value:void 0}),(0,ln._)(this,lu,{writable:!0,value:void 0}),this.clear()}return(0,C._)(e,[{key:"enqueue",value:function(e){var t=new lo(e);(0,lt._)(this,ls)?(0,lt._)(this,ll).next=t:(0,lr._)(this,ls,t),(0,lr._)(this,ll,t),la(this,lu).value++}},{key:"dequeue",value:function(){var e=(0,lt._)(this,ls);if(e)return(0,lr._)(this,ls,(0,lt._)(this,ls).next),la(this,lu).value--,e.value}},{key:"peek",value:function(){if((0,lt._)(this,ls))return(0,lt._)(this,ls).value}},{key:"clear",value:function(){(0,lr._)(this,ls,void 0),(0,lr._)(this,ll,void 0),(0,lr._)(this,lu,0)}},{key:"size",get:function(){return(0,lt._)(this,lu)}},{key:Symbol.iterator,value:function(){var e;return(0,Q._)(this,function(t){switch(t.label){case 0:e=(0,lt._)(this,ls),t.label=1;case 1:if(!e)return[3,3];return[4,e.value];case 2:return t.sent(),e=e.next,[3,1];case 3:return[2]}})}}]),e}();function ld(e){if(!((Number.isInteger(e)||e===1/0)&&e>0))throw TypeError("Expected `concurrency` to be a number from 1 and up")}var lf=e.i(995683),lp=e.i(837399),lh=e.i(386594),lm=d.Type.Object({id:d.Type.String(),name:d.Type.String(),contentType:d.Type.Optional(d.Type.String()),timeCreated:d.Type.String(),size:d.Type.String()}),lg=d.Type.Array(lm),lv="file",lx=((r={})[r.Direct=1]="Direct",r[r.Multipart=2]="Multipart",r);function ly(e){return"".concat(e.status," - ").concat(e.statusText)}function lb(e){return(0,eE._)(function(e){var t,n,r,i;return(0,Q._)(this,function(a){switch(t=e.bucketExternalId,n=e.objectName,r=e.file,void 0===(i=e.uploadMethod)?1:i){case 1:return[2,function(e){return(0,eE._)(function(e){var t,n,r,i,a;return(0,Q._)(this,function(o){switch(o.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.file,i=encodeURIComponent(n),[4,fetch("/object-storage/upload/storage/v1/b/".concat(t,"/o?uploadType=media&name=").concat(i),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},body:r})];case 1:if(!(a=o.sent()).ok)throw Error("Failed to upload object: ".concat(ly(a)));return[2]}})}).apply(this,arguments)}({bucketExternalId:t,objectName:n,file:r})];case 2:return[2,function(e){return(0,eE._)(function(e){var t,n,r,i,a,o,s,l,u,c;return(0,Q._)(this,function(d){switch(d.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.file,[4,(0,lh.readFileAsArrayBuffer)(r)];case 1:return i=d.sent(),o=(a=lf.default.from(i)).toBuffer(),s=encodeURIComponent(n),[4,function(e){return(0,eE._)(function(e){var t,n,r,i,a,o;return(0,Q._)(this,function(s){switch(s.label){case 0:return t=e.bucketExternalId,n=e.encodedObjectName,r=e.file,[4,fetch("/object-storage/".concat(t,"/").concat(n,"?uploads"),{method:"POST",credentials:"same-origin",headers:{"Content-Length":"0","Content-Type":r.type,"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(i=s.sent()).ok)throw Error("Failed to initiate multipart upload: ".concat(ly(i)));return[4,i.text()];case 2:if(a=s.sent(),!(o=new DOMParser().parseFromString(a,"text/xml").getElementsByTagName("UploadId")[0].textContent))throw Error("Failed to initiate multipart upload: missing UploadId");return[2,o]}})}).apply(this,arguments)}({bucketExternalId:t,encodedObjectName:s,file:r})];case 2:var f,p,h,m,g,x,y,b;return l=d.sent(),ld(f=5),p=new lc,h=0,m=function(){h<f&&p.size>0&&(p.dequeue()(),h++)},g=function(){h--,m()},x=function(e,t,n){return(0,eE._)(function(){var r;return(0,Q._)(this,function(i){switch(i.label){case 0:t(r=(0,eE._)(function(){return(0,Q._)(this,function(t){return[2,e.apply(void 0,(0,G._)(n))]})})()),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r];case 2:case 3:return i.sent(),[3,4];case 4:return g(),[2]}})})()},y=function(e,t,n){new Promise(function(e){p.enqueue(e)}).then(x.bind(void 0,e,t,n)),(0,eE._)(function(){return(0,Q._)(this,function(e){switch(e.label){case 0:return[4,Promise.resolve()];case 1:return e.sent(),h<f&&m(),[2]}})})()},Object.defineProperties(b=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise(function(t){y(e,t,n)})},{activeCount:{get:function(){return h}},pendingCount:{get:function(){return p.size}},clearQueue:{value:function(){p.clear()}},concurrency:{get:function(){return f},set:function(e){ld(e),f=e,queueMicrotask(function(){for(;h<f&&p.size>0;)m()})}}}),u=b,[4,Promise.all(Array(Math.ceil(a.length/0x2000000)).fill(0).map(function(e,n){var r=o.subarray(0x2000000*n,(n+1)*0x2000000);return u(function(){return function(e){return(0,eE._)(function(e){var t,n,r,i,a,o,s;return(0,Q._)(this,function(l){switch(l.label){case 0:return t=e.bucketExternalId,n=e.encodedObjectName,r=e.partNumber,i=e.uploadId,a=e.chunk,[4,fetch("/object-storage/".concat(t,"/").concat(n,"?partNumber=").concat(r,"&uploadId=").concat(i),{method:"PUT",credentials:"same-origin",headers:{"Content-Length":a.length.toString(),"Content-Type":"text/xml","X-Requested-With":"XMLHttpRequest"},body:a})];case 1:if(!(o=l.sent()).ok)throw Error("Failed to upload chunk: ".concat(ly(o)));if(!(s=o.headers.get("x-upload-etag")))throw Error("Failed to upload chunk: missing x-upload-etag");return[2,{partNumber:r,etag:s}]}})}).apply(this,arguments)}({bucketExternalId:t,encodedObjectName:s,partNumber:n+1,uploadId:l,chunk:r})})}))];case 3:return c=d.sent(),[4,function(e){return(0,eE._)(function(e){var t,n,r,i,a,o,s,l;return(0,Q._)(this,function(u){switch(u.label){case 0:return t=e.bucketExternalId,n=e.encodedObjectName,r=e.uploadId,i=e.parts,o=(a=document.implementation.createDocument("","",null)).createElement("CompleteMultipartUpload"),i.forEach(function(e){var t=a.createElement("Part"),n=a.createElement("PartNumber");n.textContent=e.partNumber.toString(),t.appendChild(n);var r=a.createElement("ETag");r.textContent=e.etag,t.appendChild(r),o.appendChild(t)}),a.appendChild(o),s=new XMLSerializer().serializeToString(a),[4,fetch("/object-storage/".concat(t,"/").concat(n,"?uploadId=").concat(r),{method:"POST",credentials:"same-origin",headers:{"Content-Length":s.length.toString(),"Content-Type":"application/xml","X-Requested-With":"XMLHttpRequest"},body:s})];case 1:if(!(l=u.sent()).ok)throw Error("Failed to complete multipart upload: ".concat(ly(l)));return[2]}})}).apply(this,arguments)}({bucketExternalId:t,encodedObjectName:s,uploadId:l,parts:c})];case 4:return d.sent(),[2]}})}).apply(this,arguments)}({bucketExternalId:t,objectName:n,file:r})]}return[2]})}).apply(this,arguments)}function lw(e){return(0,eE._)(function(e){var t,n,r;return(0,Q._)(this,function(i){switch(i.label){case 0:return t=e.bucketExternalId,n=encodeURIComponent(e.objectName),[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o/").concat(n),{method:"DELETE",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(r=i.sent()).ok)throw Error("Failed to delete object: ".concat(ly(r)));return[2]}})}).apply(this,arguments)}var l_=e.i(131141),lk=e.i(15053),lS=(0,p.atom)(new Map);function lC(e){var t=e.items,n=e.objects,r=new Set(t.map(function(e){return e.name})),i=n.filter(function(e){return!r.has(e.name)});return(0,G._)(t).concat((0,G._)(i))}var lj=(0,p.atom)(null,function(e,t,n){var r=n.bucketExternalId,i=n.objects,a=n.nextPageToken,o=n.isSearch;t(lS,function(e){return(0,l_.produce)(e,function(t){var n,s,l=e.get(r),u=t.get(r);if(!u)return void t.set(r,{items:i,nextPageToken:a,isLoading:!1});var c=lC({items:u.items,objects:i}),d=u.search;if(o){u.search=d={items:lC({items:null!=(s=null==d?void 0:d.items)?s:[],objects:i}),currentPageToken:null==l||null==(n=l.search)?void 0:n.currentPageToken,nextPageToken:a},u.items=c,u.isLoading=!1;return}u.items=c,u.search=void 0,u.currentPageToken=null==l?void 0:l.nextPageToken,u.nextPageToken=a,u.isLoading=!1})})}),lT=(0,p.atom)(null,function(e,t,n){var r=n.bucketExternalId,i=n.isLoading;t(lS,function(e){return(0,l_.produce)(e,function(e){var t=e.get(r);t?t.isLoading=i:e.set(r,{items:[],isLoading:i})})})}),lE=(0,p.atom)(null,function(e,t,n){var r=n.bucketExternalId,i=n.name,a=n.contentType,o=n.size,s={id:"optimistic-"+(0,lk.v4)(),name:i,contentType:a,size:o,timeCreated:new Date().toISOString(),optimisticallyInserted:!0};t(lS,function(e){return(0,l_.produce)(e,function(e){var t=e.get(r);if(!t)return void e.set(r,{items:[s],isLoading:!1});var n=t.items.find(function(e){return e.name===i});n?Object.assign(n,s):t.items.push(s)})})}),lR=(0,p.atom)(null,function(e,t,n){var r=n.name,i=n.bucketExternalId,a=n.isPendingDeletion,o=n.isOptimisticallyInserted;t(lS,function(e){return(0,l_.produce)(e,function(e){var t=e.get(i);if(!t)throw Error("Bucket not found when updating object");var n=t.items.findIndex(function(e){return e.name===r});if(-1===n)throw Error("Bucket not found when updating object");void 0!==a&&(t.items[n].isPendingDeletion=a),void 0!==o&&(t.items[n].optimisticallyInserted=o)})})}),lI=(0,p.atom)(null,function(e,t,n){var r=n.name,i=n.bucketExternalId;t(lS,function(e){return(0,l_.produce)(e,function(e){var t=e.get(i);if(!t)throw Error("Bucket not found when removing object");var n=t.search;if(n){n.items=n.items.filter(function(e){return e.name!==r});return}e.set(i,{items:t.items.filter(function(e){return e.name!==r}),isLoading:t.isLoading,nextPageToken:t.nextPageToken,search:n})})})}),lA=new Intl.Collator;function lP(e){return e.sort(function(e,t){return lA.compare(e.displayName,t.displayName)})}var lD=[1e3,2500,5e3];function lO(){var e=(0,sD.useAtomValue)(lS),t=(0,sD.useSetAtom)(lj),n=(0,sD.useSetAtom)(lT),r=(0,l._)((0,c.useState)(!1),2),i=r[0],a=r[1],o=(0,l._)((0,c.useState)(1e3),2),s=o[0],u=o[1];return{fetchObjects:(0,c.useCallback)(function(r){var i=r.bucketExternalId,o=r.matchGlob,l=r.loadMorePageToken,u=r.isNewBucket,c=r.onError;return(0,eE._)(function(){var r,d,p,h,m;return(0,Q._)(this,function(g){switch(g.label){case 0:if(u)return t({bucketExternalId:i,objects:[],isSearch:o}),[2];a(!0),g.label=1;case 1:return g.trys.push([1,3,4,5]),n({bucketExternalId:i,isLoading:!0}),d=e.get(i),p=o?null==d||null==(r=d.search)?void 0:r.currentPageToken:null==d?void 0:d.currentPageToken,[4,function(e){return(0,eE._)(function(e){var t,n,r,i,a,o,s,l,u,c;return(0,Q._)(this,function(d){switch(d.label){case 0:return t=e.bucketExternalId,n=e.pageToken,i=void 0===(r=e.maxResults)?1e3:r,a=e.matchGlob,o=new URLSearchParams({maxResults:i.toString()}),n&&o.append("pageToken",n),a&&o.append("matchGlob","**".concat(a,"**")),[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o?").concat(o.toString()),{method:"GET",credentials:"same-origin"})];case 1:if(!(s=d.sent()).ok)throw Error("Failed to get objects: ".concat(ly(s)));return[4,s.json()];case 2:if(c=null!=(u=(l=d.sent()).items)?u:[],!f.Value.Check(lg,c))throw(0,lp.validationErrors)(lg,c);return[2,{items:c,nextPageToken:l.nextPageToken}]}})}).apply(this,arguments)}({bucketExternalId:i,pageToken:null!=l?l:p,matchGlob:o,maxResults:s})];case 2:return t({bucketExternalId:i,objects:(h=g.sent()).items,nextPageToken:h.nextPageToken,isSearch:o}),[3,5];case 3:return m=g.sent(),nq.captureException(m,{tags:{bucketExternalId:i,action:"fetchObjects"}}),null==c||c((0,I._)(m,Error)?m:Error("Failed to fetch objects")),[3,5];case 4:return n({bucketExternalId:i,isLoading:!1}),a(!1),[7];case 5:return[2]}})})()},[t,n,e,s]),setMaxResults:u,maxResults:s,loading:i}}function lN(){var e=(0,l._)((0,c.useState)(!1),2),t=e[0],n=e[1],r=(0,sD.useSetAtom)(lE),i=(0,sD.useSetAtom)(lI),a=(0,sD.useSetAtom)(lR);return{uploadFiles:function(e){return(0,eE._)(function(e){var t,o,s,l,u;return(0,Q._)(this,function(c){switch(c.label){case 0:t=e.bucketExternalId,o=e.files,s=e.targetFolder,l=e.onError,n(!0),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Promise.all(o.map(function(e){return(0,eE._)(function(){var n,o;return(0,Q._)(this,function(l){switch(l.label){case 0:n=s+(e.webkitRelativePath||e.dirPath||e.name),r({bucketExternalId:t,name:n,contentType:e.type,size:null==e?void 0:e.size.toString()}),o=e.size>0x1e00000?lx.Multipart:lx.Direct,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,lb({bucketExternalId:t,objectName:n,file:e,uploadMethod:o})];case 2:return l.sent(),a({bucketExternalId:t,name:n,isOptimisticallyInserted:!1}),[3,4];case 3:return l.sent(),i({bucketExternalId:t,name:n}),[3,4];case 4:return[2]}})})()}))];case 2:return c.sent(),[3,4];case 3:return u=c.sent(),null==l||l(u),[3,4];case 4:return n(!1),[2]}})}).apply(this,arguments)},loading:t}}function lM(){var e=(0,tY._)(["\n  query UserBuckets($input: CurrentUserBucketsInput!) {\n    currentUser {\n      id\n      buckets(input: $input) {\n        ... on BucketConnection {\n          __typename\n          items {\n            ...ObjectStorageBucket\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return lM=function(){return e},e}function lL(){var e=(0,tY._)(["\n  query OrgBuckets($orgId: String!, $input: OrgBucketsInput!) {\n    currentUser {\n      id\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          buckets(input: $input) {\n            ... on BucketConnection {\n              __typename\n              items {\n                ...ObjectStorageBucket\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n            ... on Error {\n              message\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return lL=function(){return e},e}function lB(){var e=(0,tY._)(["\n  mutation AddReplBucket($input: AddReplBucketInput!) {\n    addReplBucket(input: $input) {\n      __typename\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return lB=function(){return e},e}var lV={},lF=(0,tQ.gql)(lM(),sZ),lU=(0,tQ.gql)(lL(),sZ),lG=(0,tQ.gql)(lB(),sZ),l$=e.i(255615),lH=e.i(654647),lz=e.i(178339),lW=e.i(85742),lq=(0,tx.cssRecord)({error:[eY.rcss.color.accentNegativeStronger],button:[eY.rcss.reset.button,eY.rcss.viewStyle,oG.interactive.nofill,eY.rcss.display.inlineFlex,{borderColor:oG.interactive.outlined.borderColor},eY.rcss.flex.growAndShrink(1)],select:[eY.rcss.display.flex,eY.rcss.flex.growAndShrink(1)],selectDisabled:[{backgroundColor:t_.tokens.backgroundHigher}],popover:[eY.rcss.width("max-content"),eY.rcss.overflow("auto"),eY.rcss.p(1),eY.rcss.minWidth(240)],labeledInput:[eY.rcss.minWidth(250)],listbox:[eY.rcss.maxHeight(300),eY.rcss.minWidth(300),eY.rcss.overflow("auto")],dropdownItemAndContainer:[eY.rcss.flex.row,eY.rcss.align.center,oG.interactive.listItem,eY.rcss.px(8),eY.rcss.py(4)],selectedItemAndContainer:[eY.rcss.px(8),eY.rcss.py(4),eY.rcss.justify.spaceBetween,eY.rcss.align.center,eY.rcss.rowWithGap(8)],selectedBucketName:[eY.rcss.align.center,eY.rcss.textAlign.left,eY.rcss.rowWithGap(8)],bucketName:[eY.rcss.textAlign.left,eY.rcss.rowWithGap(8)],loading:[eY.rcss.minWidth(200),eY.rcss.display.flex,eY.rcss.flex.grow(1),tH.loadingStyle.backgroundPulse(t_.tokens.backgroundHighest,t_.tokens.backgroundHigher)]});function lK(e){var t=e.buckets,n=e.error,r=e.loading,i=e.onChange,a=e.onLoadMore,o=e.selectedBucketId,s=(0,c.useId)();return(0,u.jsxs)(e5.View,{grow:!0,shrink:!0,children:[(0,u.jsx)(lJ,{buckets:t,loading:r,selectedBucketId:o,onLoadMore:a,onSelectionChange:function(e){"string"==typeof e&&i(e)}}),n?(0,u.jsx)(e5.View,{css:lq.error,"aria-live":"polite","aria-atomic":"true",id:s,children:(0,u.jsx)("span",{children:n})}):null]})}var lY=(0,tx.cssRecord)({self:[lq.dropdownItemAndContainer,eY.rcss.justify.spaceBetween,{backgroundColor:t_.tokens.interactiveBackground}]});function lQ(){return(0,u.jsx)(e5.View,{css:lq.selectDisabled,children:(0,u.jsx)(e5.View,{css:lq.selectedItemAndContainer,children:(0,u.jsx)(e5.View,{css:lq.selectedBucketName,children:(0,u.jsx)(e3.Text,{color:"dimmer",variant:"text",children:"No buckets available to add"})})})})}function lX(e){var t=e.title;return(0,u.jsxs)(e5.View,{css:lq.selectedItemAndContainer,children:[(0,u.jsx)(e5.View,{css:lq.selectedBucketName,children:(0,u.jsx)(e3.Text,{variant:"text",children:t})}),(0,u.jsx)(rr.default,{})]})}function lZ(e){var t=e.bucketName,n=e.selected;return(0,u.jsxs)(e5.View,{css:n?lY.self:lq.dropdownItemAndContainer,children:[(0,u.jsx)(e5.View,{css:lq.bucketName,align:"center",children:(0,u.jsx)(e3.Text,{variant:"text",color:n?"default":"dimmer",children:t})}),(0,u.jsx)(e5.View,{pl:8,align:"center",row:!0,children:n?(0,u.jsx)(rn.default,{}):null})]})}function lJ(e){var t=e.buckets,n=e.loading,r=e.selectedBucketId,i=e.onLoadMore,a=e.onSelectionChange,o=(0,sb.useIdSeed)(),s=(0,c.useMemo)(function(){return t.find(function(e){return e.id===r})},[t,r]);return(0,u.jsxs)(e5.View,{css:lq.labeledInput,grow:!0,shrink:!0,gap:8,children:[(0,u.jsx)(s6.Label,{htmlFor:o("bucket"),children:"Bucket"}),n?(0,u.jsx)(tk.Input,{css:lq.loading,disabled:!0}):(0,u.jsxs)(lz.Select,{css:lq.select,id:o("bucket"),onSelectionChange:a,"aria-label":"Bucket Select",children:[(0,u.jsx)(l$.Button,{css:lq.button,isDisabled:!s,children:s?(0,u.jsx)(lX,{title:s.name}):(0,u.jsx)(lQ,{})}),(0,u.jsx)(ra.RawPopover,{css:lq.popover,background:"default",placement:"bottom left",children:(0,u.jsx)(lW.ListBox,{css:lq.listbox,onLoadMore:i,children:t.map(function(e){var t=e.id,n=e.name;return(0,u.jsx)(lH.ListBoxItem,{id:t,textValue:n,children:(0,u.jsx)(lZ,{bucketName:n,selected:t===r})},t)})})})]})]})}var l0=(0,tx.cssRecord)({addBucketButton:[eY.rcss.flex.growAndShrink(1),eY.rcss.justify.center,eY.rcss.textAlign.center],row:[eY.rcss.flex.growAndShrink(1),eY.rcss.pt(16),eY.rcss.rowWithGap(16),{flexBasis:"300px"}],wrapper:[eY.rcss.flex.wrap]});function l1(e){var t,n,r,i,a,d,f,p,h,m,g,x,y,b,w,_,k,S,C,j,T,E,R,I,A,P=e.excludeBucketIds,D=e.isOpen,O=e.onBucketAdded,N=e.onError,M=e.onRequestClose,L=e.orgId,B=(0,l._)((0,c.useState)(),2),V=B[0],F=B[1],U=(0,tr.default)(),$=(h=(t={onError:N,orgId:L}).orgId,x=(g=(n={fetchPolicy:"network-only",onError:m=t.onError,skip:void 0!==h,ssr:!1,variables:{input:l2}},r=(0,o._)({},lV,n),tX.useQuery(lF,r))).data,y=g.fetchMore,b=g.loading,w=(0,c.useCallback)(function(){var e,t,n;y({variables:{input:(0,s._)((0,o._)({},l2),{after:null==x||null==(n=x.currentUser)||null==(t=n.buckets)||null==(e=t.pageInfo)?void 0:e.nextCursor})},updateQuery:function(e,t){if(!(null==(a=t.fetchMoreResult)||null==(i=a.currentUser)||null==(r=i.buckets)?void 0:r.items))return e;var n=(0,o._)({},t.fetchMoreResult);if(null==(s=n.currentUser)?void 0:s.buckets){var r,i,a,s,l,u,c,d=null!=(c=null==e||null==(u=e.currentUser)||null==(l=u.buckets)?void 0:l.items)?c:[],f=n.currentUser.buckets.items;n.currentUser.buckets.items=(0,G._)(f).concat((0,G._)(d))}return n}})},[y,x]),k=(_=(i={fetchPolicy:"network-only",onError:m,skip:void 0===h,ssr:!1,variables:{input:l2,orgId:h||""}},a=(0,o._)({},lV,i),tX.useQuery(lU,a))).data,S=_.fetchMore,C=_.loading,T=(null==(j=(null==k||null==(d=k.currentUser)?void 0:d.org.__typename)==="Org"?null==k||null==(f=k.currentUser)?void 0:f.org:void 0)?void 0:j.buckets.__typename)==="BucketConnection"?null==j?void 0:j.buckets:void 0,E=(0,c.useCallback)(function(){S({variables:{input:(0,s._)((0,o._)({},l2),{after:null==T?void 0:T.pageInfo.nextCursor})},updateQuery:function(e,t){var n,r,i=t.fetchMoreResult,a=null==i?void 0:i.currentUser;if((null==a?void 0:a.__typename)!=="CurrentUser")return e;var l=null==i||null==(n=i.currentUser)?void 0:n.org;if((null==l?void 0:l.__typename)!=="Org")return e;var u=l.buckets;if("BucketConnection"!==u.__typename)return e;var c=null==e||null==(r=e.currentUser)?void 0:r.org;if((null==c?void 0:c.__typename)!=="Org")return i;var d=c.buckets;return"BucketConnection"!==d.__typename?i:(0,s._)((0,o._)({},i),{currentUser:(0,s._)((0,o._)({},a),{__typename:"CurrentUser",org:(0,s._)((0,o._)({},l),{__typename:"Org",buckets:(0,s._)((0,o._)({},u),{__typename:"BucketConnection",items:(0,G._)(u.items).concat((0,G._)(d.items))})})})})}})},[S,T]),R=(0,c.useCallback)(function(){h?E():w()},[h,E,w]),{buckets:h?null==T?void 0:T.items:null==x||null==(p=x.currentUser)?void 0:p.buckets.items,fetchMore:R,loading:C||b}),H=$.buckets,z=$.fetchMore,W=$.loading;(0,c.useEffect)(function(){!V&&H&&H.length>1&&F(H[0].id)},[V,H]);var q=(0,c.useMemo)(function(){return H?H.filter(function(e){return!(null!=P?P:[]).includes(e.id)}):[]},[H,P]);(0,c.useEffect)(function(){!V&&q&&q.length>0&&F(q[0].id)},[q,V]);var K=(0,l._)((I={variables:{input:{bucketId:null!=V?V:"",replId:U}}},A=(0,o._)({},lV,I),oO.useMutation(lG,A)),2),Y=K[0],Q=K[1].loading;return(0,u.jsx)(e5.View,{children:(0,u.jsx)(oJ.Modal,{fitContent:!0,isOpen:D,onRequestClose:M,children:(0,u.jsxs)(sT.ShadesSurface,{elevate:!1,children:[(0,u.jsx)(e3.Header,{level:1,variant:"subheadBig",children:"Choose a Bucket"}),(0,u.jsxs)(e5.View,{css:l0.wrapper,row:!0,children:[(0,u.jsx)(e5.View,{css:l0.row,children:(0,u.jsx)(lK,{buckets:q,loading:W,onChange:F,onLoadMore:z,selectedBucketId:V})}),(0,u.jsx)(e5.View,{css:l0.row,children:(0,u.jsx)(eQ.Button,{css:l0.addBucketButton,text:Q?"Adding Bucket to Repl...":"Add Bucket to Repl",onClick:function(){Y({onCompleted:function(e){var t="Bucket"===e.addReplBucket.__typename?e.addReplBucket:null;t?(O(t,!1),F(void 0)):N(Error("Failed to create bucket"))},onError:N})},colorway:"primary",iconLeft:Q||W?(0,u.jsx)(eD.default,{}):(0,u.jsx)(eN.default,{}),disabled:Q||!V})})]})]})})})}var l2={count:10},l3=e.i(119468),l5=e.i(469305),l4=e.i(671536),l8=e.i(276822),l6=e.i(545453),l7=e.i(595974),l9=e.i(916271),ue=e.i(679668),ut=[{icon:(0,u.jsx)(l5.default,{}),title:"JavaScript",value:"js"},{icon:(0,u.jsx)(l4.default,{}),title:"Python",value:"py"},{icon:(0,u.jsx)(nr.default,{}),title:"All other languages",value:"other"}],un={js:{packagerConfigLanguage:"nodejs",description:(0,u.jsx)(l9.default,{components:{code:function(e){return(0,u.jsx)(l8.default,(0,o._)({language:"json"},e))}},children:"This library supports Bun, Deno, and Node.js. It is not recommended for browser-based applications.\n  \nFor more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/typescript-api-reference/)."}),packageName:"@replit/object-storage",commands:[{label:"Import Object Store Library",code:"const { Client } = require('@replit/object-storage');\nconst client = new Client();\n"},{label:"Download an object as text (i.e. JSON)",code:"const { ok, value: textValue, error } = await client.downloadAsText('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object as its raw byte representation (i.e. images)",code:"const { ok, value: bytesValue, error } = await client.downloadAsBytes('file.png');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object by streaming the object's contents (i.e. streaming data over an API)",code:"const { ok, value: stream, error } = await client.downloadAsStream('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object to the filesystem",code:"const { ok, error } = await client.downloadToFilename('file.json', destFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"List the objects in the bucket",code:"const { ok, value, error } = await client.list();\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from text (i.e. JSON)",code:"const { ok, error } = await client.uploadFromText('file.json', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from its byte representation (i.e. images)",code:"const { ok, error } = await client.uploadFromBytes('file.png', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from the filesystem",code:"const { ok, error } = await client.uploadFromFilename('file.json', srcFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from a stream (i.e. streaming data over an API)",code:"const { ok, error } = await client.uploadFromStream('file.json', stream);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Delete an object from the bucket",code:"const { ok, error } = await client.delete('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"}]},py:{packagerConfigLanguage:"python3",description:(0,u.jsx)(l9.default,{components:{code:function(e){return(0,u.jsx)(l8.default,(0,o._)({language:"json"},e))}},children:"For more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/python-api-reference/)."}),packageName:"replit-object-storage",commands:[{label:"Import Object Store Library",code:"from replit.object_storage import Client\nclient = Client()"},{label:"Download an object as text (i.e. JSON)",code:'client.download_as_text("file.json")'},{label:"Download an object as its raw byte representation (i.e. images)",code:'client.download_as_bytes("file.png")'},{label:"Download an object to the filesystem",code:'client.download_to_filename("file.json", dest_filename)'},{label:"List the objects in the bucket",code:"client.list()"},{label:"Upload an object from text (i.e. JSON)",code:'client.upload_from_text("file.json", data)'},{label:"Upload an object from its byte representation (i.e. images)",code:'client.upload_from_bytes("file.png", data)'},{label:"Upload an object from the filesystem",code:'client.upload_from_filename("file.json", src_filename)'},{label:"Delete an object from the bucket",code:'client.delete("file.json")'}]},other:{description:(0,u.jsx)(l9.default,{components:{code:function(e){return(0,u.jsx)(l8.default,(0,o._)({language:"json"},e))}},children:'\nYou can use the [Google Cloud client libraries](https://cloud.google.com/storage/docs/reference/libraries#use) to interact with your bucket in any of the supported languages.\n\nIf there isn\'t a client library for your language of choice, you can use the [JSON API](https://cloud.google.com/storage/docs/json_api).\n\nWith both the client libraries and the JSON API, only blob/file/object APIs are authorized.\n\n## Authorization\n\n### Client libraries\n\n1. Create a JSON file with these contents in your project root directory, `google_application_credentials.json`\n\n```\n{\n  "type": "external_account",\n  "audience": "replit",\n  "credential_source": {\n    "url": "http://127.0.0.1:1106/credential"\n  },\n  "token_url": "http://127.0.0.1:1106/token"\n}\n```\n\n2. Set the `GOOGLE_APPLICATION_CREDENTIALS` environment variable to `"google_application_credentials.json"`\n3. Set the `GCLOUD_PROJECT` environment variable to `""`\n\n### JSON API\n\n1. Issue a `POST` request to `http://127.0.0.1:1106/token`\n\n## Bucket Selection\nUsing Google Cloud APIs or libraries directly requires a bucket name parameter to be specified on all requests. This field is interchangeable with your bucket\'s ID within Replit App Storage.\n\nTo get the ID of the default bucket for your App or Deployment, issue a `GET` request to `http://127.0.0.1:1106/object-storage/default-bucket`\n'}),commands:[]}},ur=(0,tx.cssRecord)({statusBanner:[eY.rcss.maxWidth("fit-content")]});function ui(e){var t=e.onError,n=(0,l._)((0,c.useState)("js"),2),r=n[0],i=n[1],a=(0,oW.default)().showConfirm,s=(0,nl.default)().packager,d=(0,l6.usePackagerConfigs)().configs,f=(0,l7.useGetInstalledPackages)(),p=(0,l._)((0,c.useState)(!1),2),h=p[0],m=p[1],g=d.find(function(e){return e.language===un[r].packagerConfigLanguage}),x=!!(un[r].packagerConfigLanguage&&un[r].packageName&&g),y=!!(g&&f(g.id).some(function(e){return e.name===un[r].packageName})),b=(0,l._)((0,c.useState)(!1),2),w=b[0],_=b[1],k=ut.find(function(e){return e.value===r}),S=w||y;return(0,c.useLayoutEffect)(function(){var e=!0,t=!1,n=void 0;try{for(var r,a=ut[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=function(){var e=r.value;if(un[e.value].packagerConfigLanguage&&d.find(function(t){return t.language===un[e.value].packagerConfigLanguage}))return i(e.value),{v:void 0}}();if("object"===(0,l3._)(o))return o.v}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}i("other")},[]),(0,u.jsxs)(e5.View,{gap:16,children:[(0,u.jsx)(e5.View,{row:!0,gap:0,children:(0,u.jsx)(ue.Select,{"aria-label":"Select programming language",items:ut,selectedItem:k,initialSelectedItem:ut[0],onChange:function(e){_(!1),i(e.value)}})}),un[r].description?un[r].description:null,!S&&x?(0,u.jsx)(eQ.Button,{onClick:function(){return(0,eE._)(function(){return(0,Q._)(this,function(e){switch(e.label){case 0:if(!x)return t(Error("Package not available for selected language")),[2];return m(!0),[4,s.addPackages([{name:un[r].packageName}])];case 1:return e.sent()?(a("Installed ".concat(un[r].packageName," package")),_(!0)):t(Error("Failed to install ".concat(un[r].packageName," package"))),[2]}})})()},text:"Install ".concat(un[r].packageName," package"),colorway:"primary",loading:h}):null,k&&S?(0,u.jsx)(t8.StatusBanner,{text:"Package installed",colorway:"positive",css:ur.statusBanner}):null,un[r].commands.map(function(e){return(0,u.jsxs)(e5.View,{gap:6,children:[(0,u.jsx)(e3.Text,{children:e.label}),(0,u.jsx)(l9.default,{components:{code:function(e){return(0,u.jsx)(l8.default,(0,o._)({language:r},e))}},children:"```\n".concat(e.code)})]},e.label)})]})}function ua(){var e=(0,tY._)(["\n  query ObjectStorageReplOrg($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return ua=function(){return e},e}var uo={},us=(0,tQ.gql)(ua()),ul=e.i(325990),uu=e.i(257982),uc=e.i(596139),ud=e.i(845228),uf=(0,tx.cssRecord)({ctaStatusBanner:[eY.rcss.textAlign.left],cta:[eY.rcss.width("100%"),eY.rcss.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],payment:[eY.rcss.borderRadius(12),eY.rcss.textAlign.left,eY.rcss.shadow(2)],freeTierBanner:[eY.rcss.borderRadius(12)],fullWidthButton:[eY.rcss.width("100%")]});function up(e){var t=e.children,n=e.createBucketAuthz,r=e.actionDescription,i=e.refetchAuthzQueryData,a=e.loading,o=e.replId,s=(0,l._)((0,c.useState)(!1),2),d=s[0],f=s[1],p=(0,l._)((0,c.useState)(!1),2),h=p[0],m=p[1];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(e5.View,{gap:8,children:[(0,u.jsx)(uh,{replId:o,mainActionCTA:t,showPaymentMethodForm:d,setShowPaymentMethodForm:function(){return f(!0)},setShowSupportForm:function(){return m(!0)},createBucketAuthz:n,actionDescription:r,refetchAuthzQueryData:i,loading:a}),d?(0,u.jsx)(sT.ShadesSurface,{css:uf.payment,p:16,children:(0,u.jsx)(ud.NewPaymentMethodForm,{onClose:function(){return(0,eE._)(function(){return(0,Q._)(this,function(e){switch(e.label){case 0:return f(!1),[4,i()];case 1:return e.sent(),[2]}})})()},context:"workspace_object_storage_pane"})}):null]}),(0,u.jsx)(oJ.Modal,{isOpen:h,onRequestClose:function(){return m(!1)},children:(0,u.jsx)(o1.default,{onRequestClose:function(){return m(!1)}})})]})}function uh(e){var t=e.mainActionCTA,n=e.showPaymentMethodForm,r=e.setShowPaymentMethodForm,i=e.setShowSupportForm,a=e.createBucketAuthz,o=e.actionDescription,s=e.refetchAuthzQueryData,l=e.loading,c=e.replId,d=(0,oq.useIsInBonsaiWebview)(),f=(0,oZ.getCurrentUrl)();if(!a)return null;if(!a.isAuthorized&&d)return(0,u.jsx)(t8.StatusBanner,{text:a.message,colorway:"warning",icon:(0,u.jsx)(rj.default,{}),css:uf.ctaStatusBanner});switch(a.code){case rx.ReplAuthorizationCode.RequiresActiveSubscription:return(0,u.jsx)(e5.View,{gap:8,align:"center",children:(0,u.jsx)(oY.default,{context:"workspace_object_storage_pane",text:"Upgrade your plan to ".concat(o),css:uf.cta,colorway:"primary",variant:"default",disabled:n,onPlanCheckoutComplete:s,modalHeadingText:"Upgrade your plan to ".concat(o),redirectPath:f})});case rx.ReplAuthorizationCode.RequiresPaymentMethodOrSubscription:return(0,u.jsxs)(e5.View,{gap:8,align:"center",children:[(0,u.jsx)(oY.default,{context:"workspace_object_storage_pane",text:"Upgrade your plan to ".concat(o),css:uf.cta,colorway:"primary",variant:"default",disabled:n,onPlanCheckoutComplete:s,modalHeadingText:"Upgrade your plan to ".concat(o),redirectPath:f}),(0,u.jsx)(eQ.Button,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:uf.cta,disabled:n,loading:l,iconLeft:(0,u.jsx)(rC.default,{}),onClick:function(){return r()}})]});case rx.ReplAuthorizationCode.RequiresSmsVerification:return(0,u.jsx)(oz,{context:rx.SmsVerificationContext.ObjectStorage,onSuccess:s});case rx.ReplAuthorizationCode.RequiresPaymentMethod:return(0,u.jsx)(eQ.Button,{colorway:"primary",text:"Add a payment method",css:uf.cta,disabled:n,loading:l,iconLeft:(0,u.jsx)(rC.default,{}),onClick:function(){return r()}});case rx.ReplAuthorizationCode.RequiresUnbanning:return(0,u.jsx)(o0.StatusBannerButton,{text:"Your account is not currently allowed to ".concat(o,". We're here to help! Please reach out to support@replit.com for assistance."),colorway:"warning",iconLeft:(0,u.jsx)(rj.default,{}),css:uf.ctaStatusBanner,onClick:function(){return i()}});case rx.ReplAuthorizationCode.RequiresUnbanningFreeTierQuota:return(0,u.jsxs)(sT.ShadesSurface,{gap:12,p:12,css:uf.freeTierBanner,children:[(0,u.jsxs)(e3.Text,{textAlign:"center",children:["You've used up your free Cloud credits. Upgrade to ",uc.corePlanName," to store your files permanently."]}),(0,u.jsx)(oY.default,{context:"workspace_free_tier_upsell_banner_object_storage",text:"Upgrade to ".concat(uc.corePlanName),variant:"default",colorway:"primary",redirectPath:f,modalHeadingText:"Upgrade for permanent file storage",modalSubHeadingText:"Store your files permanently with Replit ".concat(uc.corePlanName),css:uf.fullWidthButton})]});case rx.ReplAuthorizationCode.InsufficientBudget:return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(t8.StatusBanner,{text:"You've reached your monthly usage budget. Increase your budget to ".concat(o,"."),colorway:"warning",icon:(0,u.jsx)(rj.default,{}),css:uf.ctaStatusBanner}),(0,u.jsx)(oX.UsageBudget,{onUpdateSuccess:s,replId:c})]});case rx.ReplAuthorizationCode.FeatureDisabled:case rx.ReplAuthorizationCode.FeatureUnsupportedForReplitTeams:case rx.ReplAuthorizationCode.FeatureUnsupportedForTeamsEdu:case rx.ReplAuthorizationCode.FeatureUnsupportedForTeamsFree:case rx.ReplAuthorizationCode.FeatureUnsupportedForTeamsPro:case rx.ReplAuthorizationCode.InsufficientPermissions:case rx.ReplAuthorizationCode.InsufficientQuota:case rx.ReplAuthorizationCode.RequiresActiveTeamsSubscription:case rx.ReplAuthorizationCode.PaymentDelinquent:case rx.ReplAuthorizationCode.RequiresEmailVerification:return(0,u.jsx)(t8.StatusBanner,{text:a.message,colorway:"warning",icon:(0,u.jsx)(rj.default,{}),css:uf.ctaStatusBanner});case rx.ReplAuthorizationCode.Authorized:case rx.ReplAuthorizationCode.AuthorizedQuota:return(0,u.jsx)(u.Fragment,{children:t});case rx.ReplAuthorizationCode.RequiresEnterprisePlan:return;default:(0,uu.default)(a.code)}}var um=e.i(751273),ug=e.i(211397),uv=[{imageUrl:"/public/images/object-storage/objects-in-bucket.svg",text:"Keep your app's uploads safe and organized. Store photos, videos, and documents in easy-to-use storage 'buckets'.",altText:"An image and a file going into a bucket"},{imageUrl:"/public/images/object-storage/upload-to-cloud.svg",text:"Perfect for apps where people upload files  like photo galleries, portfolios, or forms with attachments.",altText:"Images being uploaded to a cloud"},{imageUrl:"/public/images/object-storage/share-same-bucket.svg",text:"Your files work in both development and production automatically, so what you test is what your users see.",altText:"Development icon and deployment icon sharing a bucket"}],ux=(0,tx.cssRecord)({action:[eY.rcss.width("100%"),eY.rcss.maxWidth(320),eY.rcss.px(32),{marginLeft:"auto",marginRight:"auto"}],rowText:[eY.rcss.flex.growAndShrink(1),eY.rcss.textAlign.left]});function uy(e){var t,n,r,i,a=e.createBucketAuthz,s=e.editBucketAuthz,d=e.refetchAuthzQueryData,f=e.onBucketAdded,p=e.onError,h=e.innerRef,m=(0,l._)((0,c.useState)(!1),2),g=m[0],x=m[1],y=(0,c.useCallback)(function(){return x(!1)},[]),b=(0,c.useCallback)(function(){return x(!0)},[]),w=(0,l._)((0,c.useState)(!1),2),_=w[0],k=w[1],S=(0,c.useCallback)(function(){return k(!1)},[]),C=(0,c.useCallback)(function(){return k(!0)},[]),j=(0,tr.default)(),T=(t={variables:{replId:j}},n=(0,o._)({},uo,t),tX.useQuery(us,n)).data,E=(null==T?void 0:T.getRepl.__typename)==="Repl"?null==(r=T.getRepl.org)?void 0:r.id:void 0,R=(0,ul.useOrgFlag)({controlName:"flag-deployments-switch-to-azure"}),I=(0,ez.useFlag)({controlName:"flag-deployments-switch-to-azure"}),A=(0,ul.useOrgFlag)({controlName:"flag-azure-org-can-use-object-store"}),P=(0,ez.useFlag)({controlName:"flag-azure-org-can-use-object-store"}),D=!(R||I)||A||P,O=(0,l._)(s1(),2),N=O[0],M=O[1].loading;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l1,{isOpen:g,onBucketAdded:f,onError:p,onRequestClose:y,orgId:E}),(0,u.jsx)(s9,{isOpen:_,loading:M,handleCreateBucket:function(e){N({variables:{input:e},onCompleted:function(e){var t="Bucket"===e.createBucket.__typename?e.createBucket:null;t?f(t):p(Error("Failed to create bucket"))},onError:p})},onRequestClose:S}),(0,u.jsx)(t3.default,{pane:{type:"objectStorage"},maxWidth:450,body:uv.map(function(e,t){return(0,u.jsxs)(e5.View,{row:!0,gap:16,children:[(0,u.jsx)(e5.View,{children:(0,u.jsx)(ug.default,{src:e.imageUrl,width:44,height:44,alt:e.altText})}),(0,u.jsx)(e3.Text,{css:ux.rowText,children:e.text})]},t)}),innerRef:h,action:(0,u.jsxs)(up,{replId:j,createBucketAuthz:a,actionDescription:"create a bucket",refetchAuthzQueryData:d,loading:M,children:[(0,u.jsx)(um.Tooltip,{tooltip:"App Storage is not yet available with Azure",isDisabled:D,children:(0,u.jsx)(eQ.Button,{css:ux.action,text:M?"Creating bucket...":"Create new bucket",onClick:C,colorway:"primary",iconLeft:M?(0,u.jsx)(eD.default,{}):(0,u.jsx)(eN.default,{}),disabled:!D||M})}),(0,u.jsx)(e5.View,{children:(0,u.jsx)(um.Tooltip,{isDisabled:null==s?void 0:s.isAuthorized,tooltip:null!=(i=null==s?void 0:s.message)?i:"You are not authorized to edit buckets",delay:"default",placement:"bottom-start",children:(0,u.jsx)(eQ.Button,{css:ux.action,text:"Use an existing bucket",onClick:b,iconLeft:(0,u.jsx)(s2.default,{}),disabled:!D||M||!(null==s?void 0:s.isAuthorized)})})})]})})]})}var ub=e.i(274014),uw=e.i(790486),u_=e.i(795570),uk=e.i(36654),uS=e.i(873169),uC=e.i(456594),uj=e.i(302905),uT=e.i(978497);function uE(e){return(0,u.jsxs)(tu.default,(0,s._)((0,o._)({},e),{children:[(0,u.jsx)("path",{d:"M12.025 9.251a.748.748 0 0 1 .232.047c.012.004.026.006.038.012.019.008.036.02.055.03.023.012.048.024.07.039a.756.756 0 0 1 .11.09l3 3a.75.75 0 0 1-1.06 1.061l-1.72-1.72V16a.75.75 0 0 1-1.5 0v-4.19l-1.72 1.72a.75.75 0 1 1-1.06-1.06l3-3 .056-.052c.01-.008.022-.015.033-.022a.74.74 0 0 1 .26-.122l.06-.014.034-.005A.758.758 0 0 1 12 9.25l.025.001Z"}),(0,u.jsx)("path",{fillRule:"evenodd",d:"m7.93 2.25.17.005a2.75 2.75 0 0 1 2.122 1.225l.81 1.2.004.008a1.252 1.252 0 0 0 1.057.562H20A2.75 2.75 0 0 1 22.75 8v10A2.75 2.75 0 0 1 20 20.75H4A2.75 2.75 0 0 1 1.25 18V5A2.75 2.75 0 0 1 4 2.25h3.93ZM4 3.75A1.25 1.25 0 0 0 2.75 5v13A1.25 1.25 0 0 0 4 19.25h16A1.25 1.25 0 0 0 21.25 18V8a1.25 1.25 0 0 0-1.126-1.244L20 6.75h-7.9a2.75 2.75 0 0 1-2.317-1.237L8.98 4.319l-.005-.006a1.251 1.251 0 0 0-.89-.553l-.154-.01H4Z",clipRule:"evenodd"})]}))}e.s(["default",()=>uE],779284);var uR=e.i(493166),uI=e.i(371088),uA=e.i(672963),uP=e.i(822243),uD=e.i(848415),uO=e.i(288148),uN=function(e){var t=e.folderPath,n=e.onDropNativeFiles,r=(0,l._)((0,uD.useDrop)(function(){return{accept:[lv,uO.NativeTypes.FILE],drop:function(e){return"files"in e&&n(e.files),{name:t}},collect:function(e){return{isOver:!!e.isOver()}}}}),2);return{isDraggedOver:r[0].isOver,drop:r[1]}},uM=function(e){var t=e.currentFolder,n=e.onDropNativeFiles,r=(0,l._)((0,uD.useDrop)(function(){return{accept:[uO.NativeTypes.FILE],drop:function(e,t){t.didDrop()||e.dirContent.then(function(e){n(e)})},collect:function(e){return{isOverCurrent:e.isOver({shallow:!0})}}}},[t]),2);return{isOverCurrent:r[0].isOverCurrent,drop:r[1]}},uL=e.i(934226),uB=e.i(123850),uV=e.i(272461),uF=e.i(136540),uU=e.i(12034),uG=e.i(257811),u$=e.i(557862),uH="1px dashed ".concat(t_.tokens.accentPrimaryDefault),uz=eY.container.min(500),uW=(0,uB.createCssVarTokens)(["bodyOutline","bodyMarginBottom"]),uq=uW.cssVars,uK=uW.styleTokens,uY=(0,tx.cssRecord)({buttons:[(0,j._)({},uz,[eY.rcss.rowWithGap(8)])],tableWrapper:[eY.rcss.borderRadius(4),{outline:uK.bodyOutline,marginBottom:uK.bodyMarginBottom}],tableHeader:[eY.rcss.position.sticky,eY.rcss.top(0),eY.rcss.textAlign.left,eY.rcss.zIndex(1),eY.rcss.backgroundColor.backgroundDefault],tableHeaderMainColumn:[eY.rcss.textAlign.left,eY.rcss.p(4)],footer:[eY.rcss.mb(8),eY.rcss.pt(8),eY.rcss.flex.growAndShrink(1)],loadMoreButton:[eY.rcss.flex.growAndShrink(1)],pageSizeSelect:[eY.rcss.minWidth(75),{borderTopRightRadius:"".concat(t_.tokens.space4," !important"),borderBottomRightRadius:"".concat(t_.tokens.space4," !important")}]});function uQ(e){var t,n,r,i,a,d,f,p,h,m,g,x,y,b,w=e.bucketExternalId,_=e.onOpenCommandsTab,k=e.onError,S=e.disabled,C=(0,l._)((0,c.useState)(""),2),T=C[0],E=C[1],R=(0,sD.useAtomValue)(lS).get(w),I=null!=(y=null==R?void 0:R.isLoading)&&y,A=(0,l._)((0,c.useState)(""),2),P=A[0],D=A[1],O=(n=(t={searchQuery:T,bucketState:R,currentFolder:P}).bucketState,r=t.currentFolder,(0,c.useMemo)(function(){if(!n)return{displayedItems:[],nextPageToken:void 0,total:0};var e=n.items,t=n.search,i=n.nextPageToken,a=t?t.items:e,l=t?t.nextPageToken:i,u=t?t.items.length:e.length,c=[],d=new Map,f=!0,p=!1,h=void 0;try{for(var m,g=a[Symbol.iterator]();!(f=(m=g.next()).done);f=!0){var x=m.value;if(x.name.startsWith(r)&&x.name!==r){var y=x.name.slice(r.length);if(!y.includes("/")){c.push((0,s._)((0,o._)({},x),{isFolder:!1,displayName:y}));continue}var b=y.split("/")[0];if(d.get(b)||d.set(b,{isFolder:!0,name:r+b+"/",displayName:b}),x.name===r+b+"/"){var w=d.get(b);if(!w)throw Error("Folder should have been added to map");w.optimisticallyInserted=x.optimisticallyInserted,w.isPendingDeletion=x.isPendingDeletion}}}}catch(e){p=!0,h=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}var _=lP(Array.from(d.values())),k=lP(c);return{displayedItems:(0,G._)(_).concat((0,G._)(k)),nextPageToken:l,total:u}},[n,r])),N=O.displayedItems,M=O.nextPageToken,L=O.total,B=!!M,V=(0,c.useMemo)(function(){return[{accessorKey:"name",header:"Name",size:500},{accessorKey:"added",header:"Added",size:200},{accessorKey:"size",header:"Size",size:200}]},[]),F=(0,ub.useReactTable)({data:N,columns:V,getCoreRowModel:(0,ub.getCoreRowModel)()}),U=F.getRowModel().rows,$=(0,c.useRef)(null),H=(0,uw.useVirtualizer)({count:B?U.length+1:U.length,getScrollElement:function(){return $.current},estimateSize:function(){return 34},overscan:20}),z=lO(),W=z.fetchObjects,q=z.maxResults,K=z.setMaxResults,Y=(a=(i=(0,l._)((0,c.useState)(!1),2))[0],d=i[1],f=(0,sD.useSetAtom)(lE),p=(0,sD.useSetAtom)(lR),h=(0,sD.useSetAtom)(lI),{createFolder:function(e){return(0,eE._)(function(e){var t,n,r,i,a,o,s;return(0,Q._)(this,function(l){switch(l.label){case 0:if(t=e.bucketExternalId,n=e.folderName,r=e.currentFolder,i=e.onError,n.includes("/"))return null==i||i(Error("Folder name cannot contain a forward slash")),[2];d(!0),f({bucketExternalId:t,name:a=r+n+"/",contentType:"text/plain",size:"0"}),o=new File([""],n,{type:"text/plain"}),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,lb({bucketExternalId:t,objectName:a,file:o})];case 2:return l.sent(),p({bucketExternalId:t,name:a,isOptimisticallyInserted:!1}),[3,4];case 3:return s=l.sent(),null==i||i(s),h({bucketExternalId:t,name:a}),[3,4];case 4:return d(!1),[2]}})}).apply(this,arguments)},loading:a}).createFolder,X=lN().uploadFiles,Z=(0,c.useRef)(null),J=(0,c.useRef)(null),ee=(0,l._)((0,c.useState)(!1),2),et=ee[0],en=ee[1],er=(0,l._)((0,c.useState)(null),2),ei=er[0],ea=er[1],eo=uM({currentFolder:P,onDropNativeFiles:function(e){X({bucketExternalId:w,files:e,targetFolder:P,onError:k})}}),es=eo.isOverCurrent,el=eo.drop,eu=function(e){E(e),""===e&&W({bucketExternalId:w,onError:k})},ec=!(N&&N.length);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(e5.View,{grow:!0,shrink:!0,children:[(0,u.jsxs)(e5.View,{css:uY.buttons,gap:8,children:[(0,u.jsxs)(e5.View,{row:!0,gap:8,children:[(0,u.jsx)(eQ.Button,{onClick:function(){Z.current&&Z.current.click()},text:"Upload files",colorway:"primary",iconLeft:(0,u.jsx)(uC.default,{}),disabled:S}),(0,u.jsx)(eQ.Button,{onClick:function(){J.current&&J.current.click()},text:"Upload folder",colorway:"primary",iconLeft:(0,u.jsx)(uE,{}),disabled:S})]}),(0,u.jsxs)(e5.View,{grow:!0,row:!0,gap:8,justify:"space-between",children:[(0,u.jsx)(eQ.Button,{onClick:function(){return en(!0)},text:"Create folder",iconLeft:(0,u.jsx)(uT.default,{}),disabled:S}),(0,u.jsx)(e5.View,{grow:!0,children:(0,u.jsx)(eJ.SearchBar,{value:T,onChange:function(e){return eu(e.target.value)},onKeyDown:function(e){"Escape"===e.key&&eu(""),"Enter"===e.key&&W({bucketExternalId:w,matchGlob:T,onError:k})},onClear:function(){return eu("")},disabled:I||S})}),(0,u.jsx)(eQ.Button,{onClick:function(){return W({bucketExternalId:w,matchGlob:T,onError:k})},text:"Refresh",loading:I,iconLeft:(0,u.jsx)(rt.default,{}),disabled:S})]})]}),(0,u.jsxs)(e5.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,u.jsx)(ct,{currentFolder:P,bucketExternalId:w,setCurrentFolder:D,onError:k}),(0,u.jsx)(e5.View,{children:I?(0,u.jsx)(eD.default,{size:12}):(0,u.jsxs)(e3.Text,{color:"dimmer",variant:"small",children:[B?"Loaded":"Total"," ",L]})})]}),(0,u.jsx)(e5.View,{innerRef:el,css:uY.tableWrapper,grow:!0,shrink:!0,style:(b={},(0,j._)(b,uq.bodyOutline,(g=(m={isOverCurrent:es,isEmpty:ec}).isOverCurrent,x=m.isEmpty,g?uH:x?"1px dashed ".concat(t_.tokens.outlineDefault):void 0)),(0,j._)(b,uq.bodyMarginBottom,es||ec?t_.tokens.space8:void 0),b),children:!ec||et?(0,u.jsx)("div",{ref:$,className:"container",style:{overflow:"auto",flex:"1 1 auto"},children:(0,u.jsx)("div",{style:{height:"".concat(H.getTotalSize(),"px")},children:(0,u.jsxs)("table",{style:{width:"100%"},children:[(0,u.jsx)("thead",{css:uY.tableHeader,children:F.getHeaderGroups().map(function(e){return(0,u.jsx)("tr",{children:e.headers.map(function(e){return(0,u.jsx)("th",{css:uY.tableHeaderMainColumn,colSpan:e.colSpan,style:{width:e.getSize()},children:(0,ub.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,u.jsxs)("tbody",{children:[et?(0,u.jsx)(ci,{onCreateFolder:function(e){en(!1),Y({bucketExternalId:w,folderName:e,currentFolder:P,onError:k})},onCanceled:function(){return en(!1)}}):null,H.getVirtualItems().map(function(e,t){if(e.index>U.length-1)return(0,u.jsx)("tr",{style:{height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start-t*e.size,"px)")},children:(0,u.jsx)("td",{colSpan:3,children:(0,u.jsxs)(uV.Group,{css:uY.footer,children:[(0,u.jsx)(eQ.Button,{css:uY.loadMoreButton,onClick:function(){return W({bucketExternalId:w,matchGlob:T,loadMorePageToken:M,onError:k})},text:I?"":"Load more",iconLeft:I?(0,u.jsx)(eD.default,{}):void 0,loading:I,disabled:I||!B}),(0,u.jsx)(uU.Select,{css:uY.pageSizeSelect,isDisabled:I||!B,"aria-label":"Select page size",selectedKey:q.toString(),onSelectionChange:function(e){return K(Number(e))},items:lD.map(function(e){return{id:e.toString()}}),children:function(e){return(0,u.jsx)(lW.ListBoxItem,{label:e.id},e.id)}})]})})},e.key.toString());var n=N[e.index];return n?n.isFolder?(0,u.jsx)(u0,{index:t,virtualRow:e,item:n,setCurrentFolder:D,onDeleteClick:ea,bucketExternalId:w,onError:k,disabled:S},n.name):(0,u.jsx)(u1,{index:t,virtualRow:e,item:n,bucketExternalId:w,onDeleteClick:ea,onError:k,disabled:S},n.name):null})]})]})})}):(0,u.jsx)(u.Fragment,{children:I?(0,u.jsx)(e5.View,{align:"center",justify:"center",style:{flex:1},children:(0,u.jsx)(eD.default,{})}):(0,u.jsx)(cl,{onOpenCommandsTab:_})})}),(0,u.jsx)(uL.UploadInputs,{fileUploadInputRef:Z,dirUploadInputRef:J,uploadFiles:function(e){return X({bucketExternalId:w,files:e.files,targetFolder:P,onError:k})}})]}),(0,u.jsx)(co,{bucketExternalId:w,requestedDeleteItem:ei,onRequestClose:function(){return ea(null)},onError:k})]})}var uX=(0,uB.createCssVarTokens)(["rowOutline","rowOpacity","rowTextDecoration","rowCursor"]),uZ=uX.cssVars,uJ=uX.styleTokens;function u0(e){var t,n=e.index,r=e.virtualRow,i=e.item,a=e.bucketExternalId,o=e.setCurrentFolder,s=e.onDeleteClick,l=e.onError,c=e.disabled,d=lN().uploadFiles,f=(0,oW.default)().showConfirm,p=uN({folderPath:i.name,onDropNativeFiles:function(e){f('Uploading files to "'.concat(i.name,'"')),d({bucketExternalId:a,files:e,targetFolder:i.name,onError:l})}}),h=p.isDraggedOver,m=p.drop;return(0,u.jsx)(u4,{index:n,virtualRow:r,item:i,ref:m,onDeleteClick:function(){return s(i)},icon:(0,u.jsx)(uj.default,{}),timeCreatedCell:"-",sizeCell:"-",style:(t={},(0,j._)(t,uZ.rowOutline,h?uH:void 0),(0,j._)(t,uZ.rowCursor,"pointer"),t),onClick:function(){return o(i.name)},onKeyDown:function(e){"Enter"===e.key&&o(i.name)},disabled:c})}function u1(e){var t,n,r,i,a,o,s,d,f,p,h,m=e.index,g=e.virtualRow,x=e.item,y=e.bucketExternalId,b=e.onDeleteClick,w=e.onError,_=e.disabled,k=encodeURIComponent(x.name),S="/object-storage/storage/v1/b/".concat(y,"/o/").concat(k,"?alt=media"),C=!!(x.optimisticallyInserted||x.isPendingDeletion),T=(n=(t=(0,l._)((0,c.useState)(!1),2))[0],r=t[1],i=(0,sD.useSetAtom)(lR),a=(0,sD.useSetAtom)(lE),o=(0,sD.useSetAtom)(lI),{loading:n,moveObject:function(e){return(0,eE._)(function(e){var t,n,s,l,u,c,d;return(0,Q._)(this,function(f){switch(f.label){case 0:t=e.bucketExternalId,n=e.object,s=e.destinationFolder,l=e.onError,u=e.onSuccess,r(!0),c=s+n.name.split("/").pop(),i({bucketExternalId:t,name:n.name,isPendingDeletion:!0}),a({bucketExternalId:t,name:c,contentType:n.contentType,size:n.size}),f.label=1;case 1:return f.trys.push([1,4,,5]),[4,function(e){return(0,eE._)(function(e){var t,n,r,i,a,o,s;return(0,Q._)(this,function(l){switch(l.label){case 0:return t=e.sourceBucketExternalId,n=e.destinationBucketExternalId,r=e.sourceObjectName,i=e.destinationObjectName,a=encodeURIComponent(r),o=encodeURIComponent(i),[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o/").concat(a,"/copyTo/b/").concat(n,"/o/").concat(o),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(s=l.sent()).ok)throw Error("Failed to copy object: ".concat(ly(s)));return[2]}})}).apply(this,arguments)}({destinationBucketExternalId:t,sourceBucketExternalId:t,sourceObjectName:n.name,destinationObjectName:c})];case 2:return f.sent(),[4,lw({bucketExternalId:t,objectName:n.name})];case 3:return f.sent(),o({bucketExternalId:t,name:n.name}),i({bucketExternalId:t,name:c,isOptimisticallyInserted:!1}),null==u||u(),[3,5];case 4:return d=f.sent(),null==l||l(d),i({bucketExternalId:t,name:n.name,isPendingDeletion:!1}),o({bucketExternalId:t,name:c}),[3,5];case 5:return r(!1),[2]}})}).apply(this,arguments)}}).moveObject,E=(0,oW.default)().showConfirm,R=(d=(s={item:x,disableDrag:C,onDropOverFolder:function(e){return T({bucketExternalId:y,object:x,destinationFolder:e,onSuccess:function(){E('Moved "'.concat(x.name,'" to "').concat(e,'"'))},onError:w})}}).item,f=s.disableDrag,p=s.onDropOverFolder,{isDragging:(h=(0,l._)((0,uP.useDrag)(function(){return{type:lv,canDrag:!f,item:function(){return{name:d.name,type:lv}},collect:function(e){return{isDragging:!!e.isDragging()}},end:function(e,t){var n=t.getDropResult();n&&n&&p(n.name)}}},[f]),2))[0].isDragging,drag:h[1]}),I=R.isDragging,A=R.drag;return(0,u.jsx)(u4,{index:m,virtualRow:g,item:x,ref:A,onDeleteClick:function(){return b(x)},icon:(0,u.jsx)(ca,{contentType:x.contentType}),timeCreatedCell:(0,u.jsx)(uG.Timestamp,{date:x.timeCreated}),sizeCell:nD(Number(x.size),{isKib:!0,isKibNotation:!0}),style:(0,j._)({},uZ.rowOpacity,I?.5:void 0),additionalActionButtons:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(uF.IconButton,{alt:"Download",css:u3.rowActionButton,disabled:_,children:(0,u.jsx)("a",{download:x.displayName,href:_?void 0:S,css:eY.rcss.color.foregroundDefault,"aria-disabled":_,onClick:function(e){_&&(e.preventDefault(),e.stopPropagation())},style:_?{pointerEvents:"none"}:void 0,children:(0,u.jsx)(uk.default,{})})})}),disabled:_})}var u2=(0,tx.cssRecord)({row:[eY.rcss.position.relative,eY.rcss.borderRadius(4),{outline:uJ.rowOutline,outlineOffset:-1,opacity:uJ.rowOpacity,cursor:uJ.rowCursor,":hover":{background:"".concat(t_.tokens.backgroundHigher," !important")},":hover #action-buttons":{display:"flex"},":focus":{outline:"2px solid ".concat(t_.tokens.accentPrimaryDefault)}}],text:[eY.rcss.flex.shrink(1)]}),u3=(0,tx.cssRecord)({row:[u2.row],pendingRow:[u2.row,eY.rcss.color.foregroundDimmest],tableData:[eY.rcss.p(4),{":first-of-type":{borderTopLeftRadius:4,borderBottomLeftRadius:4},":last-of-type, :nth-last-of-type(2)":{borderTopRightRadius:4,borderBottomRightRadius:4}}],text:u2.text,strikeThroughText:[u2.text,{textDecoration:"line-through"}],actionButtonTableData:[eY.rcss.position.relative],rowActionButtonGroup:[eY.rcss.position.absolute,eY.rcss.right(0),eY.rcss.top(0),eY.rcss.bottom(0),eY.rcss.rowWithGap(4),eY.rcss.align.center,eY.rcss.backgroundColor.backgroundHigher,{display:"none",borderTopRightRadius:4,borderBottomRightRadius:4}],rowActionButton:[oG.interactive.filled],loadingTableData:[eY.rcss.position.relative],loadingIconWrapper:[eY.rcss.position.absolute,eY.rcss.right(4),eY.rcss.top(0),eY.rcss.bottom(0),eY.rcss.justify.center],loadingIcon:[{borderRadius:"50%"},eY.rcss.backgroundColor.backgroundDefault]}),u5=function(){var e=(0,l._)((0,c.useState)(!1),2),t=e[0],n=e[1],r=(0,l._)((0,c.useState)(null),2),i=r[0],a=r[1];return(0,c.useEffect)(function(){if(null!==i){var e=function(){n(i.offsetWidth<i.scrollWidth||i.offsetHeight<i.scrollHeight)};e();var t=new ResizeObserver(e);return t.observe(i),function(){return t.disconnect()}}},[i]),{attachObserver:a,isOverflowing:t}},u4=(0,c.forwardRef)(function(e,t){var n=e.index,r=e.virtualRow,i=e.item,a=e.onDeleteClick,l=e.icon,c=e.timeCreatedCell,d=e.sizeCell,f=e.style,p=e.onClick,h=e.onKeyDown,m=e.additionalActionButtons,g=e.disabled,x=i.isPendingDeletion?u3.strikeThroughText:u3.text,y=i.optimisticallyInserted||i.isPendingDeletion,b=u5(),w=b.attachObserver,_=b.isOverflowing;return(0,u.jsxs)("tr",{style:(0,s._)((0,o._)({},f),{height:"".concat(r.size,"px"),transform:"translateY(".concat(r.start-n*r.size,"px)"),background:r.index%2==0?"color-mix(in srgb, ".concat(t_.tokens.backgroundDefault," 60%, ").concat(t_.tokens.backgroundRoot,")"):void 0}),ref:t,tabIndex:0,css:y?u3.pendingRow:u3.row,onClick:p,onKeyDown:h,children:[(0,u.jsx)("td",{css:u3.tableData,children:(0,u.jsx)(um.Tooltip,{isDisabled:!_,tooltip:i.displayName,children:(0,u.jsxs)(e5.View,{row:!0,gap:8,align:"center",children:[l,(0,u.jsx)(e3.Text,{multiline:!0,maxLines:1,css:x,ref:w,children:i.displayName})]})})}),(0,u.jsx)("td",{css:u3.tableData,children:(0,u.jsx)(e3.Text,{multiline:!0,maxLines:1,css:x,children:c})}),(0,u.jsx)("td",{css:u3.tableData,children:(0,u.jsx)(e3.Text,{multiline:!0,maxLines:1,css:x,children:d})}),y?null:(0,u.jsx)("td",{css:u3.actionButtonTableData,children:(0,u.jsxs)(e5.View,{css:u3.rowActionButtonGroup,px:4,id:"action-buttons",children:[m,(0,u.jsx)(uF.IconButton,{onClick:a,alt:"Delete",css:u3.rowActionButton,disabled:g,children:(0,u.jsx)(ss.default,{color:t_.tokens.accentNegativeDefault})})]})}),y?(0,u.jsx)("td",{css:u3.loadingTableData,children:(0,u.jsx)(e5.View,{css:u3.loadingIconWrapper,children:(0,u.jsx)(eD.default,{css:u3.loadingIcon})})}):null]},i.name)}),u8=(0,uB.createCssVarTokens)(["breadcrumbOutline","breadcrumbTextColor"]),u6=u8.cssVars,u7=u8.styleTokens,u9=(0,tx.cssRecord)({breadcrumb:[{color:u7.breadcrumbTextColor,outline:u7.breadcrumbOutline}]}),ce=function(e){var t=e.split("/").filter(function(e){return""!==e}),n=t.map(function(e,n){return{folderName:e,path:t.slice(0,n+1).join("/")+"/"}});return[{folderName:"Objects",path:""}].concat((0,G._)(n))};function ct(e){var t=e.currentFolder,n=e.bucketExternalId,r=e.setCurrentFolder,i=e.onError,a=ce(t);return(0,u.jsx)(e5.View,{pt:12,pb:4,row:!0,gap:2,align:"center",children:a.map(function(e,t){var o=e.folderName,s=e.path,l=t===a.length-1;return(0,u.jsxs)(c.Fragment,{children:[(0,u.jsx)(cn,{folderPath:s,folderName:o,bucketExternalId:n,onClick:function(){return r(s)},isLastBreadcrumb:l,onError:i}),l?null:(0,u.jsx)(e3.Text,{color:"dimmest",children:"/"})]},s)})})}function cn(e){var t,n=e.folderPath,r=e.folderName,i=e.bucketExternalId,a=e.onClick,o=e.isLastBreadcrumb,s=e.onError,l=lN().uploadFiles,c=uN({folderPath:n,onDropNativeFiles:function(e){return l({bucketExternalId:i,files:e,targetFolder:n,onError:s})}}),d=c.isDraggedOver,f=c.drop;return(0,u.jsx)(eQ.Button,{ref:f,text:r,variant:"nofill",onClick:a,iconLeft:(0,u.jsx)(uj.default,{}),size:"small",disabled:o,style:(t={},(0,j._)(t,u6.breadcrumbTextColor,o?t_.tokens.foregroundDefault:void 0),(0,j._)(t,u6.breadcrumbOutline,d?uH:void 0),t),css:u9.breadcrumb})}var cr=(0,tx.cssRecord)({icon:[eY.rcss.height(24),eY.rcss.width(24),eY.rcss.center]});function ci(e){var t=e.onCreateFolder,n=e.onCanceled,r=(0,l._)((0,c.useState)(""),2),i=r[0],a=r[1],o=(0,uA.default)(n,[]);return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:3,children:(0,u.jsxs)(e5.View,{innerRef:o,row:!0,gap:8,align:"center",children:[(0,u.jsx)(e5.View,{css:cr.icon,children:(0,u.jsx)(uj.default,{})}),(0,u.jsx)(tk.Input,{value:i,autoFocus:!0,onChange:function(e){return a(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(t(i),a("")),"Escape"===e.key&&n()},autoCapitalize:"off",autoComplete:"off",autoCorrect:"off"})]})})})}function ca(e){var t=e.contentType;return t?t.startsWith("image/")?(0,u.jsx)(uR.default,{}):t.startsWith("video/")?(0,u.jsx)(u_.default,{}):t.startsWith("audio/")?(0,u.jsx)(uI.default,{}):(0,u.jsx)(uS.default,{}):(0,u.jsx)(uS.default,{})}function co(e){var t,n,r,i,a,o,s,d,f,p,h,m=e.bucketExternalId,g=e.requestedDeleteItem,x=e.onRequestClose,y=e.onError,b=(n=(t=(0,l._)((0,c.useState)(!1),2))[0],r=t[1],i=(0,sD.useSetAtom)(lR),a=(0,sD.useSetAtom)(lI),{loading:n,deleteObject:function(e){return(0,eE._)(function(e){var t,n,o,s;return(0,Q._)(this,function(l){switch(l.label){case 0:t=e.bucketExternalId,n=e.objectName,o=e.onError,r(!0),i({bucketExternalId:t,name:n,isPendingDeletion:!0}),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,lw({bucketExternalId:t,objectName:n})];case 2:return l.sent(),a({bucketExternalId:t,name:n}),[3,4];case 3:return s=l.sent(),null==o||o(s),i({bucketExternalId:t,name:n,isPendingDeletion:!1}),[3,4];case 4:return r(!1),[2]}})}).apply(this,arguments)}}).deleteObject,w=(s=(o=(0,l._)((0,c.useState)(!1),2))[0],d=o[1],f=(0,sD.useSetAtom)(lR),p=(0,sD.useSetAtom)(lI),h=(0,sD.useAtomValue)(lS),{loading:s,deleteFolder:function(e){return(0,eE._)(function(e){var t,n,r,i,a,o,s;return(0,Q._)(this,function(l){switch(l.label){case 0:t=e.bucketExternalId,n=e.folderPath,r=e.onError,d(!0),o=(null!=(a=null==(i=h.get(t))?void 0:i.items)?a:[]).filter(function(e){return e.name.startsWith(n)}),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(o.map(function(e){return(0,eE._)(function(){return(0,Q._)(this,function(n){switch(n.label){case 0:f({bucketExternalId:t,name:e.name,isPendingDeletion:!0}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,lw({bucketExternalId:t,objectName:e.name})];case 2:return n.sent(),p({bucketExternalId:t,name:e.name}),[3,4];case 3:return n.sent(),f({bucketExternalId:t,name:e.name,isPendingDeletion:!1}),[3,4];case 4:return[2]}})})()}))];case 2:return l.sent(),[3,4];case 3:return s=l.sent(),null==r||r(s),[3,4];case 4:return d(!1),[2]}})}).apply(this,arguments)}}).deleteFolder;return(0,u.jsx)(oJ.Modal,{isOpen:!!g,onRequestClose:x,children:g?(0,u.jsx)(u$.default,{name:g.displayName,description:'"'.concat(g.displayName,'" ').concat(g.isFolder?" and all its contents":""),entityType:g.isFolder?"folder":"file",hideModal:x,delete:function(){return(0,eE._)(function(){return(0,Q._)(this,function(e){switch(e.label){case 0:if(!(null==g?void 0:g.isFolder))return[3,2];return[4,w({bucketExternalId:m,folderPath:g.name,onError:y})];case 1:return e.sent(),x(),[2];case 2:if(!g)return[3,4];return[4,b({bucketExternalId:m,objectName:g.name,onError:y})];case 3:e.sent(),x(),e.label=4;case 4:return[2]}})})()}}):null})}var cs=(0,tx.cssRecord)({wrapper:[eY.rcss.center,eY.rcss.colWithGap(16),eY.rcss.flex.grow(1),eY.rcss.justify.center,eY.rcss.borderRadius(4),eY.rcss.mb(8)],textWrapper:[eY.rcss.center,eY.rcss.colWithGap(4)],text:[eY.rcss.center],textButton:[eY.rcss.color.accentPrimaryStronger]});function cl(e){var t=e.onOpenCommandsTab;return(0,u.jsx)(e5.View,{css:cs.wrapper,children:(0,u.jsxs)(e5.View,{css:cs.textWrapper,children:[(0,u.jsx)(e3.Text,{variant:"subheadBig",children:"No objects"}),(0,u.jsxs)(e5.View,{css:cs.text,children:[(0,u.jsx)(e3.Text,{children:"Drag and drop or click to upload,"}),(0,u.jsxs)(e5.View,{row:!0,gap:4,align:"center",children:[(0,u.jsx)(e3.Text,{children:"or"}),(0,u.jsx)(eQ.Button,{variant:"underlinedOnHover",colorway:"primary",onClick:t,text:"upload using commands",css:cs.textButton})]})]})]})})}function cu(){var e=(0,tY._)(["\n  mutation ObjectStorageSettingsDeleteBucket($input: DeleteBucketInput!) {\n    deleteBucket(input: $input) {\n      ... on Bucket {\n        id\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return cu=function(){return e},e}function cc(){var e=(0,tY._)(["\n  mutation ObjectStorageSettingsRemoveReplBucket(\n    $input: RemoveReplBucketInput!\n  ) {\n    removeReplBucket(input: $input) {\n      __typename\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return cc=function(){return e},e}var cd={},cf=(0,tQ.gql)(cu()),cp=(0,tQ.gql)(cc(),sZ),ch=e.i(602686),cm=e.i(258941);function cg(e){var t,n,r=e.bucketId,i=e.bucketExternalId,a=e.onSettingsUpdate,s=e.onError,d=e.disabled,f=(0,tr.default)(),p=(0,l._)((0,c.useState)(!1),2),h=p[0],m=p[1],g=function(){return m(!1)},x=(0,l._)((0,c.useState)(!1),2),y=x[0],b=x[1],w=function(){return b(!1)},_=(0,l._)((t=(0,o._)({},cd,void 0),oO.useMutation(cf,t)),2),k=_[0],S=_[1].loading,C=(0,l._)((n=(0,o._)({},cd,void 0),oO.useMutation(cp,n)),2),j=C[0],T=C[1].loading;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(e5.View,{gap:32,children:[(0,u.jsx)(e5.View,{gap:12,children:(0,u.jsxs)(e5.View,{gap:6,children:[(0,u.jsx)(e3.Text,{variant:"subheadDefault",children:"Bucket ID"}),(0,u.jsx)(l9.default,{children:"```\n".concat(i)})]})}),(0,u.jsxs)(e5.View,{gap:12,children:[(0,u.jsxs)(e5.View,{gap:6,children:[(0,u.jsx)(eQ.Button,{text:T?"Removing Bucket from Repl...":"Remove Bucket from Repl",loading:T,css:eY.rcss.color.accentNegativeStronger,onClick:function(){return b(!0)},disabled:d}),(0,u.jsx)(e3.Text,{color:"dimmest",children:"Your Repl will no longer be able to access this bucket. No data will be deleted and you can re-add this bucket at any time."})]}),(0,u.jsxs)(e5.View,{gap:6,children:[(0,u.jsx)(eQ.Button,{text:S?"Deleting":"Delete Bucket",loading:S,iconLeft:(0,u.jsx)(ss.default,{color:t_.tokens.accentNegativeStronger}),css:eY.rcss.color.accentNegativeStronger,onClick:function(){return m(!0)},disabled:d}),(0,u.jsx)(e3.Text,{color:"dimmest",children:"You cannot undo this action."})]})]})]}),(0,u.jsx)(oJ.Modal,{isOpen:y,onRequestClose:w,children:(0,u.jsx)(cm.default,{prompt:"Remove Bucket?",desc:"This action will revoke this Repl's access to this bucket.",onCancel:w,confirmText:"Remove Bucket",icon:(0,u.jsx)(ch.default,{}),onConfirm:function(){j({variables:{input:{bucketId:r,replId:f}},onError:s,onCompleted:function(e){"Bucket"===e.removeReplBucket.__typename?a({type:"removeBucket",data:{bucketId:r}}):s(Error("Failed to remove bucket: "+e.removeReplBucket.message))}}),w()}})}),(0,u.jsx)(oJ.Modal,{isOpen:h,onRequestClose:g,children:(0,u.jsx)(u$.default,{name:"bucket",description:"this bucket and all its contents",entityType:"bucket",hideModal:g,delete:function(){return k({variables:{input:{bucketId:r}},onError:s,onCompleted:function(e){"Bucket"===e.deleteBucket.__typename?a({type:"deleteBucket",data:{bucketId:r}}):s(Error("Failed to delete bucket: "+e.deleteBucket.message))}})}})})]})}var cv=e.i(988676),cx=e.i(788124),cy=[{icon:(0,u.jsx)(sq.default,{}),title:"Objects",value:"objects"},{icon:(0,u.jsx)(nr.default,{}),title:"Commands",value:"commands"},{icon:(0,u.jsx)(eL.default,{}),title:"Settings",value:"settings"}],cb=(0,tx.cssRecord)({controlSeparator:[eY.rcss.color.outlineDefault,eY.rcss.px(8)],panels:[eY.rcss.flex.column,eY.rcss.px(8),eY.rcss.pt(12),eY.rcss.flex.growAndShrink(1)],objectTabPanel:[eY.rcss.flex.column,eY.rcss.flex.growAndShrink(1)]}),cw=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.onError,i=n.onCompleted,a=(0,tr.default)(),s=(0,c.useCallback)(function(e){if((null==e?void 0:e.getRepl.__typename)==="Repl")try{return function(e){if("Repl"!==e.__typename)throw Error("Failed to fetch bucket data");var t,n=e.buckets;if(n&&"BucketConnection"!==n.__typename)throw Error(n.message);var r=null!=(t=null==n?void 0:n.items)?t:[];if(!r.length)return{buckets:r};var i=e.defaultBucket;if(i)if("Bucket"===i.__typename)return{initialBucket:i,buckets:r};else throw Error(i.message);return{initialBucket:r[0],buckets:r}}(e.getRepl)}catch(e){null==r||r(e)}},[]),u=(e={variables:{replId:a,bucketsCount:10},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){if((null==e?void 0:e.getRepl.__typename)==="Repl"){var t=s(e);t&&(null==i||i(t))}}},t=(0,o._)({},sX,e),tX.useQuery(sJ,t)),d=u.data,f=u.loading,p=u.error,h=u.refetch,m=(0,l._)((0,c.useState)(d?s(d):void 0),2),g=m[0],x=m[1];return(0,c.useEffect)(function(){d&&x(s(d))},[s,d]),{buckets:null==g?void 0:g.buckets,initialBucket:null==g?void 0:g.initialBucket,data:d,loading:f,error:p,refetch:h}};function c_(e){var t=e.buckets,n=e.onRequestAddBucket,r=e.onRequestCreateBucket,i=e.onSelect,a=e.selectedBucketId,o=e.disabled,s=(0,c.useMemo)(function(){if(t&&a)return t.find(function(e){return e.id===a})},[t,a]);return s&&t?(0,u.jsx)(e5.View,{children:(0,u.jsxs)(eZ.PopupMenu,{label:s.name,items:t,trigger:(0,u.jsx)(eQ.Button,{size:"default",variant:"nofill",text:s.name,iconRight:(0,u.jsx)(rr.default,{size:12})}),children:[t.map(function(e){return(0,u.jsx)(eZ.MenuItem,{icon:(0,u.jsx)(rn.default,{visibility:e.id===s.id?"visible":"hidden"}),id:e.id,label:e.name,onAction:e.id!==s.id?function(){i(e)}:void 0},e.id)}),(0,u.jsx)(eZ.Separator,{}),(0,u.jsx)(eZ.MenuItem,{icon:(0,u.jsx)(eN.default,{}),id:"create-new",label:"Create new bucket",onAction:r,isDisabled:o},"create-new"),(0,u.jsx)(eZ.MenuItem,{icon:(0,u.jsx)(s2.default,{}),id:"add-existing",label:"Add an existing bucket",onAction:n,isDisabled:o},"add-existing")]})}):(0,u.jsx)(e5.View,{children:(0,u.jsx)(eQ.Button,{size:"default",variant:"nofill",text:"Loading...",iconRight:(0,u.jsx)(rr.default,{size:12})})})}function ck(e){var t=e.onSelect,n=e.selectedView,r=e.disabled,i=(0,c.useMemo)(function(){return cy.find(function(e){return e.value===n})},[n]);return i?(0,u.jsx)(e5.View,{children:(0,u.jsx)(eZ.PopupMenu,{onAction:function(e){var n=cy.find(function(t){return t.value===e});n&&t(n.value)},label:i.title,items:cy,trigger:(0,u.jsx)(eQ.Button,{size:"default",variant:"nofill",text:i.title,iconLeft:i.icon,iconRight:(0,u.jsx)(rr.default,{size:12})}),children:function(e){return(0,u.jsx)(eZ.MenuItem,{icon:e.icon,id:e.value,label:e.title,isDisabled:r&&"commands"===e.value},e.value)}})}):null}var cS=d.Type.Object({type:d.Type.Literal("objectStorage")}),cC={Content:function(){var e,t,n,r,i=(0,l._)((0,c.useState)(),2),a=i[0],o=i[1],s=(0,c.useMemo)(function(){return null==a?void 0:a.map(function(e){return e.id})},[a]),d=(0,l._)((0,c.useState)(),2),f=d[0],p=d[1],h=(0,l._)((0,c.useState)("objects"),2),m=h[0],g=h[1],x=(0,l._)((0,c.useState)(!1),2),y=x[0],b=x[1],w=(0,c.useCallback)(function(){return b(!1)},[]),_=(0,c.useCallback)(function(){return b(!0)},[]),k=(0,l._)((0,c.useState)(!1),2),S=k[0],C=k[1],j=(0,c.useCallback)(function(){return C(!1)},[]),T=(0,c.useCallback)(function(){return C(!0)},[]),E=se().authorizations,R=null==E||null==(e=E.useFreeTierCloudServices)?void 0:e.isAuthorized,I=R&&(null==f?void 0:f.suspendedReason)!=null,A=(0,sD.useAtomValue)(lS).get(null!=(n=null==f?void 0:f.externalId)?n:""),P=lO(),D=P.fetchObjects,O=P.loading,N=(0,c.useCallback)(function(e){p(e),g("objects"),D({bucketExternalId:e.externalId})},[D]),M=(0,nl.default)().dotReplit;(0,c.useEffect)(function(){f&&M.updateDotReplit([(0,s3.setObjectStorageDefaultBucketId)(f.externalId)])},[f,M]);var L=(0,oW.default)(),B=L.showConfirm,V=L.showError,F=function(e){V(e.message),nq.withScope(function(t){t.setTag("object-storage-pane",!0),nq.captureException(e)})},U=cw({onError:F,onCompleted:function(e){var t=e.buckets,n=e.initialBucket;o(t),!f&&n&&(p(n),D({bucketExternalId:null==n?void 0:n.externalId}))}}),$=U.data,H=U.loading,z=U.error,W=U.refetch,q=(0,l._)(s1(),2),K=q[0],Y=q[1].loading,X=(0,c.useCallback)(function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];o(function(t){return t?[e].concat((0,G._)(t)):[e]}),p(e),W(),D({bucketExternalId:e.externalId,isNewBucket:t})},[D,W]),Z=(0,c.useCallback)(function(e){var t=(null!=a?a:[]).filter(function(t){return t.id!==e});if(o(t),0===t.length){p(void 0),g("objects"),M.updateDotReplit([{path:"objectStorage",op:"remove"}]);return}p(t[0]),D({bucketExternalId:t[0].externalId}),g("objects")},[D,a,M]),J=(null==$?void 0:$.getRepl.__typename)==="Repl"?$.getRepl.authorizations.createObjectBucket:void 0,ee=(null==$?void 0:$.getRepl.__typename)==="Repl"?$.getRepl.authorizations.editObjectBucket:void 0,et=(null==$?void 0:$.getRepl.__typename)==="Repl"?null==(t=$.getRepl.org)?void 0:t.id:void 0;if(z)return(0,u.jsx)(e5.View,{p:16,children:(0,u.jsx)(t8.StatusBanner,{text:'Error: "'.concat(z.message,'". The issue has been logged and the Replit team will look into it.'),colorway:"negative"})});if(H&&!a)return(0,u.jsx)(t3.default,{pane:{type:"objectStorage"},maxWidth:450,loading:!0});if(!f)return(0,u.jsx)(uy,{createBucketAuthz:J,editBucketAuthz:ee,refetchAuthzQueryData:W,onBucketAdded:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(0,eE._)(function(){return(0,Q._)(this,function(n){return X(e,t),[2]})})()},onError:F});switch(m){case"objects":r=O&&void 0===A?(0,u.jsx)(nh,{}):(0,u.jsx)(e5.View,{css:cb.objectTabPanel,children:(0,u.jsx)(cx.default,{children:(0,u.jsx)(uQ,{bucketExternalId:f.externalId,onOpenCommandsTab:function(){g("commands")},onError:F,disabled:I})})});break;case"commands":r=(0,u.jsx)(e5.View,{children:(0,u.jsx)(ui,{onError:F})});break;case"settings":r=(0,u.jsx)(e5.View,{children:(0,u.jsx)(cg,{bucketId:f.id,bucketExternalId:f.externalId,onSettingsUpdate:function(e){("deleteBucket"===e.type||"removeBucket"===e.type)&&Z(e.data.bucketId),"deleteBucket"===e.type&&B("Bucket deleted successfully"),"removeBucket"===e.type&&B("Bucket removed from Repl successfully")},onError:F,disabled:I})})}return(0,u.jsxs)(e5.View,{grow:!0,shrink:!0,children:[(0,u.jsx)(l1,{excludeBucketIds:null!=s?s:[],isOpen:y,onBucketAdded:function(e){w(),X(e,!1),B("Bucket added to Repl successfully")},onError:F,onRequestClose:w,orgId:et}),(0,u.jsx)(s9,{isOpen:S,loading:Y,handleCreateBucket:function(e){K({variables:{input:{name:e.name,replId:e.replId}},onCompleted:function(e){var t="Bucket"===e.createBucket.__typename?e.createBucket:null;t?(j(),X(t),B("Bucket created successfully")):F(Error("Failed to create bucket"))},onError:F})},onRequestClose:j}),(0,u.jsxs)(e5.View,{px:8,py:4,align:"center",row:!0,children:[(0,u.jsx)(c_,{buckets:a,onRequestAddBucket:_,onRequestCreateBucket:T,onSelect:N,selectedBucketId:null==f?void 0:f.id,disabled:I}),(0,u.jsx)(e3.Text,{css:cb.controlSeparator,variant:"small",children:"/"}),(0,u.jsx)(ck,{onSelect:g,selectedView:m,disabled:I})]}),(0,u.jsx)(cv.DividerH,{}),R&&f.suspendedReason&&f.scheduledDeletionTime?(0,u.jsx)(e5.View,{p:8,children:(0,u.jsx)(rm.FreeTierUpsellBanner,{product:"object_storage",suspendedReason:f.suspendedReason,scheduledDeletionTime:f.scheduledDeletionTime})}):null,(0,u.jsx)(e5.View,{css:cb.panels,children:r})]})},Icon:function(e){var t=e.size;return(0,u.jsx)(tu.IconContext.Provider,{value:{color:t_.tokens.tealStrongest,size:t},children:(0,u.jsx)(sq.default,{})})},getTitle:function(){return"App Storage"},description:"App Storage is Replit's built-in object storage that lets your app easily host and save uploads like images, videos, and documents.",category:e_.PaneCategory.CloudServices,decode:function(e){return f.Value.Decode(cS,e)}};e.s(["objectStorageUI",()=>cC],401455);var cj=e.i(921211),cT=e.i(266600),cE=e.i(204977),cR=e.i(799634),cI=e.i(314531),cA=e.i(262206),cP=e.i(926118),cD=e.i(384401),cO=e.i(290446);function cN(e){var t=(0,c.useRef)(null),n=(0,c.useRef)([]);function r(){t.current&&clearTimeout(t.current),n.current=[]}function i(t){e({type:"success",shortcut:t.length>1?[t[0],t[1]]:t[0]}),r()}return{onKeyDown:function(r){var a=t.current,o=n.current;r.preventDefault(),r.stopPropagation(),a&&clearTimeout(a);var s=(0,cA.getPartialKeyCombination)(r);if(s){if((0,cA.isPrefix)(s))return void e({type:"update",recorded:o.length?[o[0],s]:[s]});if(o.length>0&&"Enter"===s)return void i(o);o.push(s),e({type:"update",recorded:o}),t.current=setTimeout(function(){return i(o)},600*(2!==o.length))}},startRecording:function(){r(),e({type:"start"})},stopRecording:function(){r(),e({type:"stop"})}}}var cM=(0,tx.cssRecord)({row:[eY.rcss.minHeight(28)],right:[eY.rcss.position.relative,eY.rcss.flex.grow(1),eY.rcss.flex.shrink(0)],recordingRow:[eY.rcss.flex.column,eY.rcss.align.center,eY.rcss.justify.end],recordingRowKeys:[eY.rcss.position.relative],recordingRowPlaceholder:[eY.rcss.display.flex,eY.rcss.align.baseline,eY.rcss.rowWithGap(4),{fontStyle:"italic"}],keys:[eY.rcss.display.inlineFlex,eY.rcss.rowWithGap(12)],secondaryText:[eY.rcss.display.flex,eY.rcss.flex.row,eY.rcss.align.center,eY.rcss.rowWithGap(4)],secondaryTextId:[eY.rcss.flex.grow(1),eY.rcss.flex.shrink(0)],secondaryTextDescription:[eY.rcss.flex.grow(0),eY.rcss.flex.shrink(1),eY.rcss.color.foregroundDimmest]}),cL=(0,tx.cssRecord)({input:[{opacity:0,width:1}],searchingText:[{fontStyle:"italic"}]});function cB(e){var t,n,r,i,a=e.command,o=e.filter,s=e.shortcutsToCommands,d=e.onViewShortcutConflicts,f=(0,cD.useMapKeybinding)(),p=(0,cD.useUnmapKeybinding)(),h=(0,cD.useDefaultKeyCombo)(a.id),m=(0,l._)((0,c.useState)(null),2),x=m[0],y=m[1],b=cN(function(e){switch(e.type){case"start":return void y({recorded:[]});case"stop":return void y(null);case"update":return void y({recorded:e.recorded});case"success":var t=(0,cA.parseKeyCombo)(e.shortcut);if(!t||f(a.id,t))return void y(null);y(null);return;case"error":return void y(function(t){var n;return{error:e.message,recorded:null!=(n=null==t?void 0:t.recorded)?n:[]}})}}),w=b.stopRecording,_=b.startRecording,k=b.onKeyDown,S=(0,uA.default)(function(){return w()},[]),C=!!x;cH(C);var j=null!=(i=null==x?void 0:x.recorded)?i:[],T=null==x?void 0:x.error,E=o.length>0,R=null==(t=cI.default.match(o,a.name))?void 0:t.ranges,I=null==(n=cI.default.match(o,a.id))?void 0:n.ranges,A=(null==a?void 0:a.description)?null==(r=cI.default.match(o,a.description))?void 0:r.ranges:void 0,P=(0,g.default)(function(){return o.replaceAll('"',"").split("-").map(function(e){return e.toLowerCase()})},[o]);return(0,u.jsxs)(e5.View,{gap:8,"data-testid":a.id,children:[(0,u.jsxs)(e5.View,{css:cM.row,row:!0,gap:8,align:"center",children:[(0,u.jsxs)(e5.View,{grow:0,shrink:!0,gap:2,children:[(0,u.jsx)(cO.HighlightMatches,{text:a.name,highlight:R,dimmed:E}),(0,u.jsxs)(e3.Text,{variant:"small",css:cM.secondaryText,multiline:!1,children:[E?(0,u.jsx)(cO.HighlightMatches,{css:cM.secondaryTextId,text:a.id,highlight:I,dimmed:E}):null,a.description?(0,u.jsxs)(u.Fragment,{children:[E?(0,u.jsx)(e3.Text,{color:"dimmest",multiline:!1,children:""}):null,(0,u.jsx)(cO.HighlightMatches,{css:cM.secondaryTextDescription,text:a.description,highlight:A,dimmed:E})]}):null]})]}),(0,u.jsxs)(e5.View,{innerRef:C?S:void 0,css:cM.right,row:!0,gap:16,align:"center",justify:"end",children:[C?(0,u.jsx)(cj.FocusScope,{autoFocus:!0,restoreFocus:!0,children:(0,u.jsx)("input",{onKeyDown:k,css:cL.input})}):null,a.shortcut&&!C&&s.length>1?(0,u.jsx)(uF.IconButton,{"data-testid":"View conflicts",alt:"View conflicts",onClick:function(){(0,c.startTransition)(function(){a.shortcut&&d(cV([a.shortcut]))})},children:(0,u.jsx)(rj.default,{color:t_.tokens.foregroundDimmer})}):null,a.shortcut&&!C?(0,u.jsx)(cP.KeyComboBlocks,{small:!0,keyCombo:a.shortcut,match:P}):null,a.shortcut||C?null:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eQ.Button,{size:"small",variant:"outlined",iconLeft:(0,u.jsx)(eN.default,{}),text:"Add shortcut",onClick:function(){return _()}}),h?(0,u.jsx)(uF.IconButton,{alt:"Reset",onClick:function(){return f(a.id,h)},children:(0,u.jsx)(rt.default,{})}):null]}),C?(0,u.jsx)(e5.View,{css:cM.recordingRow,children:(0,u.jsxs)(e5.View,{row:!0,gap:8,align:"center",children:[(0,u.jsx)(e5.View,{css:cM.recordingRowKeys,children:j.length>0?(0,u.jsx)(e5.View,{css:cM.keys,children:j.map(function(e,t){return(0,u.jsx)(cP.KeyComboBlocks,{small:!0,keyCombo:e},"".concat(e,"-").concat(t))})}):(0,u.jsx)(e3.Text,{multiline:!1,color:"dimmest",css:cM.recordingRowPlaceholder,children:"Recording"})}),(0,u.jsx)(uF.IconButton,{alt:"Stop",onClick:function(){return w()},children:(0,u.jsx)(cq,{})})]})}):null,a.shortcut&&!C?(0,u.jsxs)(e5.View,{row:!0,gap:4,children:[h&&h!==a.shortcut?(0,u.jsx)(uF.IconButton,{alt:"Reset",onClick:function(){return f(a.id,h)},children:(0,u.jsx)(rt.default,{})}):null,(0,u.jsx)(uF.IconButton,{alt:"Change",onClick:function(){return _()},children:(0,u.jsx)(cE.default,{})}),(0,u.jsx)(uF.IconButton,{alt:"Remove",onClick:function(){return p(a.id)},children:(0,u.jsx)(ss.default,{})})]}):null]})]}),T?(0,u.jsx)(t8.StatusBanner,{icon:(0,u.jsx)(rj.default,{}),colorway:"warning",text:T,closable:!0,closeAction:function(){return y(function(e){var t;return{recorded:null!=(t=null==e?void 0:e.recorded)?t:[]}})}}):null]})}function cV(e){var t=e.flat();return t.length>1?t.map(function(e){return cV([e])}).join(" "):(0,cA.keyCombinationOrPrefixToKeys)(t[0]).map(function(e){return'"'.concat(e,'"')}).join("-").replaceAll(" ","space")}var cF=(0,tx.cssRecord)({surface:[eY.rcss.borderRadius(8),eY.rcss.colWithGap(12)]});function cU(e){var t=e.search,n=e.setSearch,r=(0,c.useRef)(null),i=(0,l._)((0,c.useState)(!1),2),a=i[0],o=i[1];cH(a);var s=cN(function(e){var t,i,a;switch(e.type){case"start":o(!0),n(""),null==r||null==(t=r.current)||t.focus();return;case"stop":case"error":o(!1),null==r||null==(i=r.current)||i.focus(),null==r||null==(a=r.current)||a.select();return;case"success":return void n(cV([e.shortcut]));case"update":return void n(cV(e.recorded))}}),d=s.stopRecording,f=s.startRecording,p=s.onKeyDown;return(0,u.jsxs)(e5.View,{row:!0,gap:8,align:"center",children:[(0,u.jsx)(cj.FocusScope,{children:(0,u.jsx)(tk.Input,{ref:r,placeholder:a?"Searching with pressed keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:a?d:void 0,onChange:function(e){n(e.currentTarget.value)},onKeyDown:a?function(e){"Escape"===e.key?d():p(e)}:void 0,value:t})}),(0,u.jsx)(e5.View,{row:!0,gap:4,align:"center",children:a?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(e3.Text,{color:"dimmest",css:cL.searchingText,multiline:!1,children:"Searching"}),(0,u.jsx)(uF.IconButton,{alt:"Stop Recording",onClick:d,children:(0,u.jsx)(cq,{})})]}):(0,u.jsx)(uF.IconButton,{alt:"Record Keys",onClick:f,children:(0,u.jsx)(cR.default,{})})}),(0,u.jsx)(uF.IconButton,{alt:"Clear Input",disabled:0===t.length,onClick:function(){var e;n(""),null==r||null==(e=r.current)||e.focus()},children:(0,u.jsx)(cT.default,{})})]})}function cG(){var e=(0,l._)((0,c.useState)(""),2),t=e[0],n=e[1],r=(0,c.useDeferredValue)(t);return(0,u.jsxs)(e5.View,{p:0,gap:8,children:[(0,u.jsx)(cU,{search:t,setSearch:n}),(0,u.jsx)(c$,{search:r,setSearch:n})]})}var c$=(0,c.memo)(function(e){var t=e.search,n=e.setSearch,r=(0,cD.useKeyBindings)(),i=(0,g.default)(function(){return(0,G._)(r.values())},[r]),a=(0,c.useMemo)(function(){return cI.default.filter(t,i,{extract:function(e){var t="".concat(e.name," ").concat(e.id);return e.description&&(t+=" ".concat(e.description)),e.shortcut&&(t+=" ".concat(cV([e.shortcut]))),t}})},[t,i]),o=(0,c.useMemo)(function(){return a.reduce(function(e,t){var n=t.original,r=n.shortcut;if(!r)return e;var i=e.get(r);return i?i.push(n):i=[n],e.set(r,i),e},new Map)},[a]);return a.length>0?(0,u.jsx)(sT.ShadesSurface,{css:cF.surface,pt:8,elevate:!1,children:a.map(function(e,r){var i;return(0,u.jsxs)(c.Fragment,{children:[r>0?(0,u.jsx)(sT.ShadesSurface,{style:{height:1}}):null,(0,u.jsx)(cB,{command:e.original,filter:t,shortcutsToCommands:null!=(i=o.get(e.original.shortcut))?i:[],onViewShortcutConflicts:n})]},e.original.id)})}):null});function cH(e){var t="You have unsaved changes";(0,c.useEffect)(function(){var n=function(e){return e.preventDefault(),e.returnValue=t,t};if(e)return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}},[e])}var cz=(0,t$.keyframes)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),cW=(0,tx.cssRecord)({background:[{animationName:cz,animation:"".concat(cz," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(t_.tokens.redStronger)},eY.rcss.height(11),eY.rcss.width(11),eY.rcss.borderRadius("full"),eY.rcss.position.absolute],container:[eY.rcss.position.relative,eY.rcss.align.center,eY.rcss.justify.center],icon:[{zIndex:1}]});function cq(){return(0,u.jsxs)(e5.View,{css:cW.container,children:[(0,u.jsx)(eP.default,{css:cW.icon,color:t_.tokens.redStronger}),(0,u.jsx)(e5.View,{css:cW.background})]})}function cK(){var e=(0,sb.useIdSeed)()("keyboard_shortcuts");return(0,u.jsxs)(e5.View,{gap:12,children:[(0,u.jsx)(e5.View,{tag:"label",htmlFor:e}),(0,u.jsx)(cG,{})]})}var cY=e.i(485273),cQ=e.i(556088),cX=e.i(61524),cZ=e.i(670413),cJ=e.i(332441);function c0(){var e=(0,tY._)(["\n  query AiDeveloperSection {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return c0=function(){return e},e}e.i(148382);var c1={},c2=(0,tQ.gql)(c0());e.i(877212);var c3=e.i(63846),c5=e.i(17886),c4=e.i(952098),c8=e.i(416143);e.i(660670);var c6=e.i(170039),c7=e.i(810206),c9=e.i(624782),de=(0,t$.css)([eY.rcss.height(18)]);function dt(){return(0,u.jsx)(c9.Pill,{css:de,text:"Staff-only",colorway:"warning"})}var dn=(0,c3.getAiEndpoint)(),dr=(0,c4.getCurrentChortEndpoint)(),di=(0,c4.getCurrentChatProxyEndpoint)(),da=(0,c6.getUseChatProxyOverride)(),ds=[{title:"automatic",value:null},{title:"enabled",value:!0},{title:"disabled",value:!1}],dl=c3.endpointOverride?[{title:"override",value:c3.endpointOverride}]:Array.from((0,G._)(Object.entries(c8.AiEndpoints)).concat([["custom",""]]),function(e){return{title:e[0],value:e[1]}}),du=c6.CHORT_ENVIRONMENT_HOST_OVERRIDE?[{title:"override",value:c6.CHORT_ENVIRONMENT_HOST_OVERRIDE}]:Array.from([["automatic",""]].concat((0,G._)(Object.entries(c6.CHORT_ENDPOINTS)),[["custom",""]]),function(e){return{title:e[0],value:e[1]}}),dc=(0,c5.isEnvProduction)()||c3.endpointOverride?dl[0]:dl[1],dd=du[0];function df(){var e=(0,l._)((0,c.useState)(da),2),t=e[0],n=e[1],r=(0,ez.useFlag)({controlName:"flag-use-chort-chat-proxy",type:"boolean",default:!1});return(0,u.jsx)(c7.Section,{id:"chatProxyMode",title:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(e5.View,{row:!0,gap:8,align:"center",justify:"start",children:[(0,u.jsx)(e3.Text,{multiline:!1,children:"Chat Proxy Mode"}),(0,u.jsx)(dt,{})]}),(0,u.jsxs)(e5.View,{gap:8,children:[(0,u.jsxs)(e3.Text,{variant:"small",color:"dimmest",children:["Proxy status: ",(null!==t?t:r)?"enabled":"disabled"]}),(0,u.jsxs)(e3.Text,{variant:"small",color:"dimmest",children:["Current chat proxy endpoint: ",di]}),(0,u.jsx)(e3.Text,{variant:"small",color:"dimmest",children:"Reloading window is required for change to take effect."})]})]}),children:(0,u.jsx)(e5.View,{gap:12,children:(0,u.jsx)(ue.Select,{"aria-label":"Select chat proxy mode",css:[eY.rcss.minWidth(184)],initialSelectedItem:ds.find(function(e){return e.value===t}),onChange:function(e){e&&((0,c6.setUseChatProxyOverride)(e.value),n(e.value),window.location.reload())},items:ds})})})}function dp(){var e,t=(0,l._)((0,c.useState)(!Object.values(dl).map(function(e){return e.value}).includes(dn)),2),n=t[0],r=t[1],i=(0,l._)((0,c.useState)(""),2),a=i[0],o=i[1],s=(0,ez.useFlag)({controlName:"flag-use-chort-chat-proxy",type:"boolean",default:!1}),d=null!==da?da:s;return(0,u.jsx)(c7.Section,{id:"chatServiceEndpoint",title:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(e5.View,{row:!0,gap:8,align:"center",justify:"start",children:[(0,u.jsx)(e3.Text,{multiline:!1,children:"AI Chat Service Endpoint"}),(0,u.jsx)(dt,{})]}),(0,u.jsx)(e5.View,{gap:8,children:d?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(e3.Text,{variant:"small",color:"dimmest",children:"The chat proxy is enabled, so this setting is not used."})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(e3.Text,{variant:"small",color:"dimmest",children:["Current chat endpoint: ",dn]}),(0,u.jsx)(e3.Text,{variant:"small",color:"dimmest",children:"Reloading window is required for change to take effect."})]})})]}),children:(0,u.jsxs)(e5.View,{gap:12,children:[(0,u.jsx)(ue.Select,{"aria-label":"Select AI chat service endpoint",disabled:d,css:[eY.rcss.minWidth(184)],initialSelectedItem:null!=(e=dl.find(function(e){return e.value===dn}))?e:dn?dl[dl.length-1]:dc,onChange:function(e){(null==e?void 0:e.title)!=="custom"?((0,c3.setAiEndpoint)(e.value),r(!1),window.location.reload()):r(!0)},items:dl}),n?(0,u.jsxs)(e5.View,{row:!0,gap:4,children:[(0,u.jsx)(tk.Input,{disabled:d,value:a,onChange:function(e){o(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(0,c3.setAiEndpoint)(a)}}),(0,u.jsx)(uF.IconButton,{alt:"Update custom url",disabled:d,onClick:function(){(0,c3.setAiEndpoint)(a),window.location.reload()},children:dn!==a?(0,u.jsx)(rt.default,{}):(0,u.jsx)(rn.default,{})})]}):null]})})}function dh(){var e,t=(0,l._)((0,c.useState)(!Object.values(du).map(function(e){return e.value}).includes(dr)),2),n=t[0],r=t[1],i=null===c6.CHORT_ENVIRONMENT_HOST_OVERRIDE&&null===(0,c6.getChortLocalEndpointOverride)(),a=(0,l._)((0,c.useState)(""),2),o=a[0],s=a[1];return(0,u.jsx)(c7.Section,{id:"chortServiceEndpoint",title:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(e5.View,{row:!0,gap:8,align:"center",justify:"start",children:[(0,u.jsx)(e3.Text,{multiline:!1,children:"Chort Service Endpoint"}),(0,u.jsx)(dt,{})]}),(0,u.jsxs)(e5.View,{gap:8,children:[(0,u.jsxs)(e3.Text,{variant:"small",color:"dimmest",children:["Current chort endpoint: ",dr]}),(0,u.jsx)(e3.Text,{variant:"small",color:"dimmest",children:"Reloading window is required for change to take effect."})]})]}),children:(0,u.jsxs)(e5.View,{gap:12,children:[(0,u.jsx)(ue.Select,{"aria-label":"Select code generation service endpoint",css:[eY.rcss.minWidth(184)],items:du,initialSelectedItem:i?dd:null!=(e=du.find(function(e){return e.value===dr}))?e:dd,onChange:function(e){(null==e?void 0:e.title)!=="custom"&&(null==e?void 0:e.title)!=="automatic"?((0,c6.setChortLocalEndpointOverride)(e.value),r(!1),window.location.reload()):(null==e?void 0:e.title)==="automatic"?((0,c6.setChortLocalEndpointOverride)(null),r(!1),window.location.reload()):r(!0)}}),n?(0,u.jsxs)(e5.View,{row:!0,gap:4,children:[(0,u.jsx)(tk.Input,{value:o,onChange:function(e){s(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(0,c6.setChortLocalEndpointOverride)(o)}}),(0,u.jsx)(uF.IconButton,{alt:"Update custom url",onClick:function(){(0,c6.setChortLocalEndpointOverride)(o),window.location.reload()},children:dr!==o?(0,u.jsx)(rt.default,{}):(0,u.jsx)(rn.default,{})})]}):null]})})}function dm(){var e,t,n=(e=(0,o._)({},c1,void 0),tX.useQuery(c2,e)).data;return(null==n||null==(t=n.currentUser)?void 0:t.isStaff)?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(df,{}),(0,u.jsx)(dp,{}),(0,u.jsx)(dh,{})]}):null}function dg(){var e=(0,tY._)(["\n  query CodeSuggestionPreferences($replId: String!) {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return dg=function(){return e},e}var dv={},dx=(0,tQ.gql)(dg()),dy=e.i(973519);function db(e){var t=e.context,n=e.text,r=(0,dy.useGlobalModal)().show;return(0,u.jsx)(eQ.Button,{text:void 0===n?"Activate":n,colorway:"primary",onClick:function(){return(0,eE._)(function(){return(0,Q._)(this,function(e){switch(e.label){case 0:return[4,r("MembershipPurchaseModal",{analyticsContext:{upgrade:{context:t}}})];case 1:return e.sent(),[2]}})})()}})}var dw=e.i(641209);function d_(){var e,t,n,r,i=(n={variables:{replId:(0,tr.default)()}},r=(0,o._)({},dv,n),tX.useQuery(dx,r)).data,a=(null==i||null==(e=i.currentUser)?void 0:e.userSubscriptionType)===rx.UserSubscriptionTypeEnum.HackerPro,s=(null==i?void 0:i.getRepl.__typename)==="Repl"&&null!=(t=i.getRepl.org)&&!!t.id,c=(0,oq.isInBonsaiWebview)((0,cY.useRouter)()),d=(0,cX.usePreferences)("codeSuggestion"),f=d.preferences,p=d.update;return(0,u.jsxs)(e5.View,{gap:12,children:[(0,u.jsx)(dw.EditorSettingBox,{currentValue:f.codeSuggestion,update:function(e){var t=p(e),n=!0,r=!1,i=void 0;try{for(var a,o=Object.entries(e)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=(0,l._)(a.value,2),u=s[0],c=s[1];(0,eW.track)(eq.events.SETTINGS_TOGGLED,{settingChanged:u,updatedValue:c})}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t},setting:cQ.userPreferences.codeSuggestion,title:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(e5.View,{row:!0,gap:8,align:"center",children:(0,u.jsx)(e3.Text,{multiline:!1,children:"AI Code Completion"})}),(0,u.jsxs)(e3.Text,{variant:"small",color:"dimmest",children:["Code completion provides inline ghost text suggestions while you code.",(0,u.jsx)("br",{}),"Press tab or swipe right on your mobile device to accept."]})]})}),s||a||c?null:(0,u.jsxs)(e5.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,u.jsx)(e3.Text,{children:"Upgrade for full access to Replit AI"}),(0,u.jsx)(db,{text:"Upgrade to Replit ".concat(uc.corePlanName),context:"workspace_settings_pane"})]})]})}var dk=e.i(808229);function dS(e){return e.slice().sort(function(e,t){return e-t})}var dC=(0,tx.cssRecord)({ruler:[eY.rcss.borderRadius(8)],remove:[eY.rcss.borderRadius(4)],title:[eY.rcss.pr(8),eY.rcss.overflow("visible"),eY.rcss.flex.shrink(0)],body:[eY.rcss.flex.wrapReverse,eY.rcss.align.start,eY.rcss.justify.end,eY.rcss.flex.growAndShrink(1),{gap:t_.tokens.space4}],list:[eY.rcss.flex.wrap,eY.rcss.flex.growAndShrink(1),eY.rcss.align.end,eY.rcss.justify.end,{gap:t_.tokens.space4}]});function dj(e){var t=e.pos,n=e.onRemove;return(0,u.jsxs)(sT.ShadesSurface,{css:dC.ruler,py:4,px:8,row:!0,gap:4,align:"center",children:[(0,u.jsx)(e3.Text,{multiline:!1,children:t}),(0,u.jsx)(uF.IconButton,{css:dC.remove,alt:"Remove ruler",onClick:n,children:(0,u.jsx)(cT.default,{})})]})}function dT(){var e=(0,l._)((0,c.useState)(!1),2),t=e[0],n=e[1],r=(0,l._)((0,c.useState)(80),2),i=r[0],a=r[1],o=(0,c.useRef)(null),s=(0,c.useRef)(null),d=-1===i,f=i>=0&&i<=1e3,p=(0,cX.usePreferences)("rulers"),h=p.preferences,m=p.update,g=dS(h.rulers);return(0,u.jsx)(c7.Section,{id:"rulers",title:(0,u.jsx)(e3.Text,{css:dC.title,multiline:!1,children:"Rulers"}),children:(0,u.jsxs)(e5.View,{css:dC.body,row:!0,children:[(0,u.jsx)(e5.View,{css:dC.list,row:!0,children:g.map(function(e,t){return(0,u.jsx)(dj,{pos:e,onRemove:function(){m({rulers:g.filter(function(e,n){return n!==t})})}},t)})}),t?(0,u.jsxs)(e5.View,{row:!0,gap:4,align:"center",children:[(0,u.jsx)(tk.Input,{ref:o,type:"number",style:{width:d?"6ch":i.toString().length+5.5+"ch"},value:i>=0?i.toString():"",onChange:function(e){if(""===e.target.value)a(-1);else{var t=parseInt(e.target.value,10);isNaN(t)||a(t)}},onKeyDown:function(e){"Escape"===e.key?(a(80),n(!1)):"Enter"===e.key&&f&&(m({rulers:dS((0,G._)(g).concat([i]))}),n(!1),a(80))},onBlur:function(e){e.relatedTarget!==s.current&&(n(!1),a(80))},onFocus:function(e){e.target.select()},autoFocus:!0}),(0,u.jsx)(eQ.Button,{ref:s,text:"Accept",colorway:"primary",iconLeft:(0,u.jsx)(rn.default,{}),disabled:!f,onClick:function(){f&&(m({rulers:dS((0,G._)(g).concat([i]))}),n(!1),a(80))},onBlur:function(e){e.relatedTarget!==o.current&&(n(!1),a(80))}})]}):(0,u.jsx)(u.Fragment,{children:g.length>=10?null:(0,u.jsx)(eQ.Button,{text:"Add Ruler",iconLeft:(0,u.jsx)(eN.default,{}),onClick:function(){return n(!0)}})})]})})}var dE=(0,tx.cssRecord)({container:[(0,j._)({},c7.COLUMN_LAYOUT_BREAKPOINT,[eY.rcss.colWithGap(8)])],switchWrapper:[eY.rcss.rowWithGap(8),eY.rcss.align.center,eY.rcss.justify.end,(0,j._)({},c7.COLUMN_LAYOUT_BREAKPOINT,[eY.rcss.flex.rowReverse])],switchLabel:[(0,j._)({},c7.COLUMN_LAYOUT_BREAKPOINT,[eY.rcss.ml(8)])]});function dR(){var e=(0,cX.usePreferences)("showLeadingWhitespace","showTrailingWhitespace","showEnclosedWhitespace","showSelectedWhitespace"),t=e.preferences,n=e.update;return(0,u.jsxs)(e5.View,{css:dE.container,row:!0,justify:"space-between",align:"start",children:[(0,u.jsxs)(e5.View,{grow:!0,shrink:!0,children:[(0,u.jsx)(e3.Text,{children:"Show Whitespace"}),(0,u.jsx)(e3.Text,{multiline:!0,variant:"small",color:"dimmest",children:"Make whitespace characters visible, such as tabs and spaces."})]}),(0,u.jsxs)(e5.View,{gap:12,children:[(0,u.jsxs)(e5.View,{css:dE.switchWrapper,tag:"label",children:[(0,u.jsx)(e3.Text,{variant:"small",css:dE.switchLabel,children:"Leading"}),(0,u.jsx)(sV.Switch,{"aria-label":"Show leading whitespace",isSelected:t.showLeadingWhitespace,onChange:function(e){n({showLeadingWhitespace:e})}})]}),(0,u.jsxs)(e5.View,{css:dE.switchWrapper,tag:"label",children:[(0,u.jsx)(e3.Text,{variant:"small",css:dE.switchLabel,children:"Enclosed"}),(0,u.jsx)(sV.Switch,{"aria-label":"Show enclosed whitespace",isSelected:t.showEnclosedWhitespace,onChange:function(e){n({showEnclosedWhitespace:e})}})]}),(0,u.jsxs)(e5.View,{css:dE.switchWrapper,tag:"label",children:[(0,u.jsx)(e3.Text,{variant:"small",css:dE.switchLabel,children:"Trailing"}),(0,u.jsx)(sV.Switch,{"aria-label":"Show trailing whitespace",isSelected:t.showTrailingWhitespace,onChange:function(e){n({showTrailingWhitespace:e})}})]}),(0,u.jsxs)(e5.View,{css:dE.switchWrapper,tag:"label",children:[(0,u.jsx)(e3.Text,{variant:"small",css:dE.switchLabel,children:"Selected"}),(0,u.jsx)(sV.Switch,{"aria-label":"Show selected whitespace",isSelected:t.showSelectedWhitespace,onChange:function(e){n({showSelectedWhitespace:e})}})]})]})]})}var dI=e.i(838124),dA=e.i(596608),dP=e.i(834903),dD=e.i(721321);function dO(e){var t=e.setting,n=e.currentValue,r=e.update;return(0,u.jsx)(c7.Section,{title:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(e3.Text,{multiline:!1,children:t.name}),(0,u.jsx)(e3.Text,{variant:"small",color:"dimmest",children:t.description})]}),id:t.id,children:(0,u.jsx)(dD.ButtonGroup,{name:"Agent Position",value:n,onChange:function(e){r({agentPosition:e})},row:!0,children:t.options.map(function(e){return(0,u.jsx)(dD.ButtonGroupItem,{id:e.id,value:e.editorPreferencesValue,icon:"leftSidebar"===e.editorPreferencesValue?(0,u.jsx)(dA.default,{}):(0,u.jsx)(dP.default,{})},e.id)})})})}var dN=e.i(759317),dM=e.i(308521),dL=e.i(703774);function dB(){var e=(0,dL.useTheme)(),t=e.theme,n=e.setActiveTheme;return(0,u.jsxs)(dD.ButtonGroup,{name:"Theme",value:t.id,onChange:n,row:!0,children:[(0,u.jsx)(dD.ButtonGroupItem,{id:"replitLight",value:"replitLight",text:"Light",icon:(0,u.jsx)(dM.default,{})}),(0,u.jsx)(dD.ButtonGroupItem,{id:"replitDark",value:"replitDark",text:"Dark",icon:(0,u.jsx)(dN.default,{})})]})}var dV=e.i(467495);function dF(){return(0,u.jsx)("div",{className:dV.default.divider})}function dU(){var e=(0,cX.usePreferences)("fontSize","minimapDisplay","wrapping","keyboardHandler","multiselectModifierKey","showFileTreeGitStatus","codeIntelligence","codeActionsOnSave","formatOnSave","semanticTokens","accessibleTerminal","shellBellAudio","webviewAutoOpenOnPortOpened","agentAudioNotification","agentPushNotification","agentPosition","assistantPushNotification","forwardPortsAutomatically","acceptSuggestionOnCommitCharacter","enableCloseBracketMatching"),t=e.preferences,n=e.update,r=(0,oq.isInBonsaiWebview)((0,cY.useRouter)()),i=(0,oq.useIsInMobileWorkspace)(),a=(0,dI.useIsExtensionRepl)(),l=(0,cJ.useIsMac)(),c=(0,ez.useFlag)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),d=function(e){Object.keys(e).forEach(function(t){var n=e[t];(0,eW.track)(eq.events.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n})}),n(e)};if(!t)return null;var f=(0,s._)((0,o._)({},cQ.userPreferences.multiselectModifierKey),{options:cQ.userPreferences.multiselectModifierKey.options.map(function(e){return(0,s._)((0,o._)({},e),{title:(0,cZ.getKeyCharTextForPlatform)("cmdOrCtrlKey"===e.id?cZ.KeyChar.CMD_OR_CTRL_KEY:cZ.KeyChar.ALT_KEY,l)})})});return(0,u.jsxs)(e5.View,{gap:6,pb:32,children:[(0,u.jsxs)(c7.CollapsibleSection,{title:"Agent & Assistant",defaultExpanded:!0,children:[r?null:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(dO,{setting:cQ.userPreferences.agentPosition,update:d,currentValue:t.agentPosition}),(0,u.jsx)(dF,{})]}),(0,u.jsx)(dw.EditorSettingBox,{setting:cQ.userPreferences.agentAudioNotification,update:d,currentValue:t.agentAudioNotification}),(0,u.jsx)(dF,{}),(0,u.jsx)(dw.EditorSettingBox,{setting:cQ.userPreferences.agentPushNotification,update:d,currentValue:t.agentPushNotification}),(0,u.jsx)(dF,{}),(0,u.jsx)(dw.EditorSettingBox,{setting:cQ.userPreferences.assistantPushNotification,update:d,currentValue:t.assistantPushNotification}),(0,u.jsx)(dF,{})]}),(0,u.jsxs)(c7.CollapsibleSection,{title:"App Preview",defaultExpanded:!0,children:[(0,u.jsx)(c7.Section,{id:"webviewAutoOpenOnPortOpened",title:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(e3.Text,{children:a?"Automatic Preview (unavailable in this Repl)":"Automatic Preview"}),(0,u.jsx)(e3.Text,{variant:"small",color:"dimmest",children:"Open a web preview automatically when a port is open"}),a?(0,u.jsx)(e5.View,{pt:8,children:(0,u.jsx)(t8.StatusBanner,{colorway:"orange",text:'This preference is unavailable in Extension Apps. To view custom tools in dev mode, click the "Preview" button in Extension Devtools instead.'})}):null]}),children:(0,u.jsx)(sV.Switch,{"aria-label":"Automatic Webview",isSelected:t.webviewAutoOpenOnPortOpened,isDisabled:a,onChange:function(e){d({webviewAutoOpenOnPortOpened:e})}})}),(0,u.jsx)(dF,{}),(0,u.jsx)(dw.EditorSettingBox,{setting:cQ.userPreferences.forwardPortsAutomatically,update:d,currentValue:t.forwardPortsAutomatically}),(0,u.jsx)(dF,{})]}),(0,u.jsxs)(c7.CollapsibleSection,{title:"Appearance",defaultExpanded:!0,children:[(0,u.jsx)(dw.EditorSettingBox,{setting:cQ.userPreferences.fontSize,update:d,currentValue:t.fontSize}),r?null:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(dF,{}),(0,u.jsx)(c7.Section,{id:"theme",title:"Theme",children:(0,u.jsx)(dB,{})})]}),(0,u.jsx)(dF,{})]}),(0,u.jsxs)(c7.CollapsibleSection,{title:"Code Editing",defaultExpanded:!1,children:[(0,u.jsx)(d_,{}),(0,u.jsx)(dF,{}),(0,u.jsx)(c7.Section,{id:"acceptSuggestionOnCommitCharacter",title:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(e3.Text,{children:"Accept Suggestion on Commit Character"}),(0,u.jsxs)(e3.Text,{variant:"small",color:"dimmest",children:["Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (",(0,u.jsx)("code",{children:";"}),") can be a commit character that accepts the suggestion and types the character."]})]}),children:(0,u.jsx)(sV.Switch,{"aria-label":"Accept suggestion on commit character",isSelected:t.acceptSuggestionOnCommitCharacter,onChange:function(e){d({acceptSuggestionOnCommitCharacter:e})}})}),(0,u.jsx)(dF,{}),(0,u.jsx)(c7.Section,{id:"enableCloseBracketMatching",title:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(e3.Text,{children:"Auto close brackets"}),(0,u.jsx)(e3.Text,{variant:"small",color:"dimmest",children:"Controls whether the editor should automatically close brackets after the user adds an opening bracket."})]}),children:(0,u.jsx)(sV.Switch,{"aria-label":"Auto close brackets",isSelected:t.enableCloseBracketMatching,onChange:function(e){d({enableCloseBracketMatching:e})}})}),(0,u.jsx)(dF,{}),(0,u.jsx)(dw.EditorSettingBox,{setting:cQ.userPreferences.wrapping,update:d,currentValue:t.wrapping}),(0,u.jsx)(dF,{}),(0,u.jsx)(dk.default,{}),(0,u.jsx)(dF,{}),i?null:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(dw.EditorSettingBox,{setting:cQ.userPreferences.minimap,update:d,currentValue:t.minimapDisplay}),(0,u.jsx)(dF,{})]}),(0,u.jsx)(dw.EditorSettingBox,{setting:cQ.userPreferences.codeIntelligence,update:d,currentValue:t.codeIntelligence}),(0,u.jsx)(dF,{}),c&&t.codeIntelligence?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(dw.EditorSettingBox,{setting:cQ.userPreferences.semanticTokens,update:d,currentValue:t.semanticTokens}),(0,u.jsx)(dF,{})]}):null,(0,u.jsx)(dR,{}),(0,u.jsx)(dF,{})]}),(0,u.jsxs)(c7.CollapsibleSection,{title:"Advanced Developer Settings",defaultExpanded:!1,children:[(0,u.jsx)(dT,{}),(0,u.jsx)(dF,{}),(0,u.jsx)(dw.EditorSettingBox,{setting:cQ.userPreferences.keyboardHandler,update:d,currentValue:t.keyboardHandler}),(0,u.jsx)(dF,{}),(0,u.jsx)(dw.EditorSettingBox,{setting:f,update:d,currentValue:t.multiselectModifierKey}),(0,u.jsx)(dF,{}),(0,u.jsx)(dw.EditorSettingBox,{setting:cQ.userPreferences.showFileTreeGitStatus,update:d,currentValue:t.showFileTreeGitStatus}),(0,u.jsx)(dm,{}),(0,u.jsx)(dF,{}),(0,u.jsx)(dw.EditorSettingBox,{setting:cQ.userPreferences.accessibleTerminal,update:d,currentValue:t.accessibleTerminal}),(0,u.jsx)(dF,{}),(0,u.jsx)(dw.EditorSettingBox,{setting:cQ.userPreferences.shellBellAudio,update:d,currentValue:t.shellBellAudio})]})]})}var dG=e.i(846445);function d$(e){var t=e.defaultTabKey,n=(0,oq.useIsInMobileWorkspace)();return(0,u.jsxs)(e5.View,{clsx:dG.default.root,p:16,gap:16,grow:!0,shrink:!0,children:[(0,u.jsxs)(e5.View,{justify:"center",gap:2,children:[(0,u.jsx)(e3.Header,{variant:"subheadBig",level:3,children:"User Settings"}),(0,u.jsx)(e3.Text,{variant:"small",color:"dimmest",children:"The following settings apply to your account and will be used across all your Apps."})]}),n?(0,u.jsx)(dU,{}):(0,u.jsxs)(e2.Tabs,{defaultSelectedKey:void 0===t?"workspace":t,children:[(0,u.jsxs)(e2.TabList,{withDividers:!1,children:[(0,u.jsx)(e2.Tab,{id:"workspace",children:"Workspace"}),(0,u.jsx)(e2.Tab,{id:"shortcuts",children:"Keyboard shortcuts"})]}),(0,u.jsxs)(e2.TabPanels,{children:[(0,u.jsx)(e2.TabPanel,{id:"workspace",clsx:dG.default.tabPanel,children:(0,u.jsx)(dU,{})}),(0,u.jsx)(e2.TabPanel,{id:"shortcuts",clsx:dG.default.tabPanel,children:(0,u.jsx)(cK,{})})]})]})]})}var dH=d.Type.Object({type:d.Type.Literal("preferences"),data:d.Type.Optional(d.Type.Object({tab:d.Type.Optional(d.Type.Union([d.Type.Literal("workspace"),d.Type.Literal("shortcuts"),d.Type.Number()]))}))}),dz={Content:function(e){var t,n=e.pane.data;return(null==n?void 0:n.tab)===1?t="shortcuts":(null==n?void 0:n.tab)===0||(null==n?void 0:n.tab)==="workspace"?t="workspace":(null==n?void 0:n.tab)==="shortcuts"&&(t="shortcuts"),(0,u.jsx)(d$,{defaultTabKey:t})},Icon:function(e){var t=e.size;return(0,u.jsx)(tu.IconContext.Provider,{value:{color:t_.tokens.greyStrongest,size:t},children:(0,u.jsx)(eL.default,{})})},getTitle:function(){return"User Settings"},description:"Configure personal editor preferences and workspace settings which apply to all Apps",category:e_.PaneCategory.Other,decode:function(e){return f.Value.Decode(dH,e)}};function dW(e){return(0,u.jsx)(tu.default,(0,s._)((0,o._)({},e),{children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M6 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM2.25 6a3.75 3.75 0 1 1 4.5 3.675V21a.75.75 0 0 1-1.5 0V9.675A3.751 3.751 0 0 1 2.25 6Zm10 0a.75.75 0 0 1 .75-.75h3A2.75 2.75 0 0 1 18.75 8v6.325A3.751 3.751 0 0 1 18 21.75a3.75 3.75 0 0 1-.75-7.425V8A1.25 1.25 0 0 0 16 6.75h-3a.75.75 0 0 1-.75-.75ZM18 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"})}))}e.s(["preferencesUI",()=>dz],921009),e.s(["default",()=>dW],697851);var dq=e.i(750936);function dK(){var e=(0,tY._)(["\n  fragment ProjectMergeSectionRepl on Repl {\n    id\n    title\n  }\n"]);return dK=function(){return e},e}function dY(){var e=(0,tY._)(["\n  fragment ProjectMergeSectionCurrentUser on CurrentUser {\n    id\n  }\n"]);return dY=function(){return e},e}var dQ=(0,tQ.gql)(dK()),dX=(0,tQ.gql)(dY());function dZ(){var e=(0,tY._)(["\n  fragment ReplToReplMergeOrg on Org {\n    id\n    slug\n  }\n"]);return dZ=function(){return e},e}function dJ(){var e=(0,tY._)(["\n  fragment ReplMergeRelatedRepl on Repl {\n    id\n    url\n    nextPagePathname\n    ...ReplSelectorRepl\n  }\n  ","\n"]);return dJ=function(){return e},e}function d0(){var e=(0,tY._)(["\n  fragment ReplToReplMergeProject on Project {\n    id\n    mainRepl {\n      id\n      ...ReplMergeRelatedRepl\n    }\n  }\n  ","\n"]);return d0=function(){return e},e}function d1(){var e=(0,tY._)(["\n  fragment ReplToReplMergeCurrentRepl on Repl {\n    id\n    ...ProjectMergeSectionRepl\n  }\n  ","\n"]);return d1=function(){return e},e}function d2(){var e=(0,tY._)(["\n  query ReplToReplMergeGetRelatedRepls($id: String!) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          repls {\n            items {\n              ...ReplMergeRelatedRepl\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return d2=function(){return e},e}var d3=(0,tQ.gql)(dZ()),d5=(0,tQ.gql)(dJ(),dq.ReplSelectorReplFragmentDoc),d4=(0,tQ.gql)(d0(),d5),d8=(0,tQ.gql)(d1(),dQ);function d6(){var e=(0,tY._)(["\n  query ProjectPane($id: String!) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        ...ReplToReplMergeCurrentRepl\n        project {\n          ...ReplToReplMergeProject\n          org {\n            ...ReplToReplMergeOrg\n          }\n        }\n      }\n    }\n    currentUser {\n      ...ProjectMergeSectionCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return d6=function(){return e},e}(0,tQ.gql)(d2(),d5),e.s(["ReplMergeRelatedReplFragmentDoc",()=>d5,"ReplToReplMergeCurrentReplFragmentDoc",()=>d8,"ReplToReplMergeOrgFragmentDoc",()=>d3,"ReplToReplMergeProjectFragmentDoc",()=>d4],494948);var d7={},d9=(0,tQ.gql)(d6(),d8,d4,d3,dX);function fe(e){var t=(0,o._)({},d7,e);return tX.useQuery(d9,t)}e.s(["useProjectPaneQuery",()=>fe],932287)},538667,183187,172588,432052,e=>{"use strict";var t,n=e.i(297083),r=e.i(878420),i=e.i(64386),a=e.i(530658),o=e.i(817556),s=e.i(389959),l=e.i(467612),u=e.i(597865),c=e.i(529810),d=e.i(264887),f=e.i(875259),p=function(){var e=(0,a._)((0,s.useReducer)(function(){return Math.random()},Math.random()),2);return[e[0],e[1]]},h=function(e){var t=e.ours,r=e.theirs,i=(0,a._)(p(),2),l=i[0],c=i[1],f=(0,u.default)(function(e){return(0,n._)(function(){var n,i,s,l,u,c,d;return(0,o._)(this,function(o){switch(o.label){case 0:return[4,Promise.all([e.log({max:100,revRange:t}),null!==r?e.log({max:100,revRange:"".concat(t,"..").concat(r)}):null,null!==r?e.log({max:100,revRange:"".concat(r,"..").concat(t)}):null])];case 1:if(n=o.sent(),s=(i=(0,a._)(n,3))[0],l=i[1],u=i[2],s.error)return[2,s];if(null==l?void 0:l.error)return[2,l];if(null==u?void 0:u.error)return[2,u];return[2,{error:null,both:s.commits,theirs:null!=(c=null==l?void 0:l.commits)?c:[],ours:null!=(d=null==u?void 0:u.commits)?d:[]}]}})})()},[t,r,l]);return[(0,s.useMemo)(function(){return null===f?{error:null}:f.error?f:{error:null,both:(0,d.filterKnownCommits)(f.both,f.theirs,f.ours),theirs:f.theirs,ours:f.ours}},[f]),c]},m=function(){var e=(0,c.default)().git,t=(0,a._)((0,s.useState)({loading:!1,error:null}),2),r=t[0],i=t[1];return[(0,s.useCallback)(function(t){var r=t.remote,a=t.branch,s=t.allowConflicts,u=void 0!==s&&s;return(0,n._)(function(){var t;return(0,o._)(this,function(n){switch(n.label){case 0:return i({loading:!0,error:null}),[4,e.pull({mode:l.GitPullMode.MERGE,allowConflicts:u,experimental_override_remote:{name:r,branch:a}})];case 1:return(t=n.sent()).error?i({loading:!1,error:t.error}):(i({loading:!1,error:null}),e.forceRefresh()),[2]}})})()},[e]),r]},g=function(e){var t,l,c,d,g,x,y,b,w,_,k,S,C,j,T,E=e.selectedReplId,R=(0,f.useSetupRemoteForReplId)(null!=E?E:null),I=(0,a._)(m(),2),A=I[0],P=I[1],D=(0,a._)((l=(t=(0,a._)(p(),2))[0],c=t[1],[(0,u.default)(function(e){return(0,n._)(function(){var t;return(0,o._)(this,function(n){switch(n.label){case 0:return[4,e.getRepositoryState()];case 1:return(t=n.sent()).error,[2,t]}})})()},[l]),c]),2),O=D[0],N=D[1],M=(0,a._)((g=(d=(0,a._)(p(),2))[0],x=d[1],[(0,u.default)(function(e){return(0,n._)(function(){var t;return(0,o._)(this,function(n){switch(n.label){case 0:return[4,e.status()];case 1:return(t=n.sent()).error,[2,t]}})})()},[g]),x]),1)[0],L=(0,a._)(h({ours:"main",theirs:E?(0,f.remoteBranchForRepl)({replId:E,branch:"main"}):null}),2),B=L[0],V=L[1],F=(0,a._)((b=(y={remoteName:E?(0,f.remoteNameForRepl)(E):null,onCompleted:function(){N(),V()}}).remoteName,w=y.onCompleted,k=(_=(0,a._)((0,s.useState)(!1),2))[0],S=_[1],j=(C=(0,a._)(p(),2))[0],T=C[1],(0,u.default)(function(e){return(0,n._)(function(){var t;return(0,o._)(this,function(n){switch(n.label){case 0:if(!b)return[2,{error:null}];return S(!0),[4,e.fetch({remote:b})];case 1:return t=n.sent(),S(!1),null==t.error&&w(),[2,t]}})})()},[b,j]),[k,T]),2);return{state:O,status:M,commits:B,isFetching:F[0],refetch:F[1],remote:R,pull:{state:P,doPull:function(e){"Success"===R.state&&A((0,i._)((0,r._)({},e),{remote:R.remote.name}))}}}},x=(0,s.createContext)(null);function y(){var e=(0,s.useContext)(x);if(null===e)throw Error("useProjectGitState must be used inside a ProjectGitStateProvider");return e}e.s(["ProjectGitStateContext",()=>x,"useProjectGitState",()=>y,"useProjectGitStateHooks",()=>g],538667);var b=e.i(886513),w=e.i(346715),_=e.i(276385),k=e.i(695784),S=e.i(569384),C=e.i(973245),j=e.i(304277);e.i(566901);var T=e.i(494948);function E(){var e=(0,S._)(["\n  fragment ProjectReplsComboBoxRepl on Repl {\n    id\n    ...ReplMergeRelatedRepl\n  }\n  ","\n"]);return E=function(){return e},e}function R(){var e=(0,S._)(["\n  query ProjectReplsComboBox($id: String!, $replsInput: ProjectReplsInput!) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          mainRepl {\n            ...ProjectReplsComboBoxRepl\n          }\n          repls(input: $replsInput) {\n            items {\n              ...ProjectReplsComboBoxRepl\n            }\n            pageInfo {\n              nextCursor\n              hasNextPage\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return R=function(){return e},e}var I={},A=(0,C.gql)(E(),T.ReplMergeRelatedReplFragmentDoc),P=(0,C.gql)(R(),A),D=e.i(162914),O=e.i(98816),N=e.i(222342),M=e.i(125674),L=e.i(446530),B=e.i(613355),V=e.i(714165),F=e.i(880321),U=e.i(85742),G=e.i(624782),$=e.i(960178),H=e.i(625484),z=(0,L.cssRecord)({replSelector:[B.rcss.minWidth(300)],item:[B.rcss.display.grid,B.rcss.overflow("hidden"),{gap:4,gridAutoRows:"min-content",gridAutoFlow:"row",whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),W=function(e){var t,l,u=e.replId,c=e.onSelect,d=e.selectedReplId,f=(0,b._)(e,["replId","onSelect","selectedReplId"]),p=(0,a._)((0,s.useState)(""),2),h=p[0],m=p[1],g=(0,D.default)(h,250),x=(0,N.default)().showError,y=(0,a._)((0,s.useState)({options:[],mainRepl:null,nextCursor:null}),2),S=y[0],C=y[1],T=(t={variables:{id:u,replsInput:{count:10,filters:{title:{search:g}}}},ssr:!1,fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,onCompleted:function(e){var t,n,r,i=e&&"Repl"===e.getRepl.__typename&&(null==(t=e.getRepl.project)?void 0:t.__typename)==="Project"?e.getRepl.project:null,a=(null==i?void 0:i.repls.__typename)==="ReplConnection"?i.repls:null;i&&a||x("Something went wrong loading Apps - please try again."),C({mainRepl:null!=(n=null==i?void 0:i.mainRepl)?n:null,nextCursor:(null==a?void 0:a.pageInfo.hasNextPage)&&a.pageInfo.nextCursor?a.pageInfo.nextCursor:null,options:null!=(r=null==a?void 0:a.items)?r:[]})}},l=(0,r._)({},I,t),j.useQuery(P,l)),E=T.loading,R=T.refetch,A=T.networkStatus,L=(0,M.default)(function(){var e=S.mainRepl,t=S.options.filter(function(e){return e.id!==u});return""===g&&e&&e.id!==u?[e].concat((0,w._)(t.filter(function(t){return t.id!==e.id}))):t},[S,u,g]),B=(0,a._)((0,s.useState)(!1),2),W=B[0],q=B[1];(0,s.useEffect)(function(){if(!W){var e=L.find(function(e){return e.id===d});e&&(q(!0),""===h&&m(e.title))}},[W,h,d,L]);var K=(0,O.default)(c),Y=(0,s.useCallback)(function(e){var t=L.find(function(t){return t.id===e});t&&(K.current(t),m(t.title))},[L,K]);return(0,_.jsx)(F.ComboBox,(0,i._)((0,r._)({menuTrigger:"focus",inputValue:h,onInputChange:function(e){m(e)},onSelectionChange:Y,items:L,selectedKey:d,css:z.replSelector,isLoading:E,allowsEmptyCollection:!0,onLoadMore:function(){return(0,n._)(function(){var e,t,n,a,s,l;return(0,o._)(this,function(o){switch(o.label){case 0:if(!(S.nextCursor&&A!==k.NetworkStatus.fetchMore))return[3,2];return t=S.options,[4,R({id:u,replsInput:{count:10,filters:{title:{search:g}},cursor:S.nextCursor}})];case 1:(a=(n=o.sent())&&"Repl"===n.data.getRepl.__typename&&(null==(e=n.data.getRepl.project)?void 0:e.__typename)==="Project"&&"ReplConnection"===n.data.getRepl.project.repls.__typename?n.data.getRepl.project.repls:null)||x("Something went wrong loading Apps - please try again."),l=null!=(s=null==a?void 0:a.items)?s:[],C((0,i._)((0,r._)({},S),{nextCursor:(null==a?void 0:a.pageInfo.hasNextPage)&&a.pageInfo.nextCursor?a.pageInfo.nextCursor:null,options:t.concat(l)})),o.label=2;case 2:return[2]}})})()},emptyMessage:"No Apps found",maxHeight:200},f),{children:function(e){var t,n,r,i;return(0,_.jsxs)(U.BaseListBoxItem,{textValue:e.title,children:[(0,_.jsx)(V.Avatar,{src:null!=(r=null==(t=e.owner)?void 0:t.image)?r:"",username:null!=(i=null==(n=e.owner)?void 0:n.username)?i:"Unknown User",size:24}),(0,_.jsxs)(H.View,{css:z.item,children:[(0,_.jsx)($.Text,{children:e.title}),(0,_.jsxs)(H.View,{row:!0,gap:8,align:"center",children:[(0,_.jsx)($.Text,{children:e.owner?"@".concat(e.owner.username):""}),S.mainRepl&&S.mainRepl.id===e.id?(0,_.jsx)(G.Pill,{text:"Main Repl",variant:"filled"}):null]})]})]})}}))};e.s(["ProjectReplsComboBox",()=>W],183187);var q=e.i(331762),K=e.i(753950),Y=e.i(486161),Q=e.i(930856),X=e.i(221250),Z=e.i(752539),J=e.i(167392),ee=e.i(568430),et=e.i(269848),en=e.i(416298),er=e.i(205104),ei=e.i(331148),ea=e.i(933974),eo=e.i(296223),es=e.i(480028),el=e.i(173703),eu=e.i(88619),ec=e.i(136540),ed=e.i(630818),ef=e.i(396776),ep=[{"& > span:first-child-of-type":[B.rcss.flex.grow(1),B.rcss.textAlign.left]},{"& > span":[B.rcss.flex.shrink(1)]},B.rcss.height("auto"),B.rcss.p(8),B.rcss.fontWeight.medium,B.rcss.backgroundColor.backgroundHigher,B.rcss.flex.row,B.rcss.align.center,B.rcss.justify.spaceBetween,B.rcss.overflow("hidden"),B.rcss.cursor.pointer],eh=(0,L.cssRecord)({buttonFolded:[ep,B.rcss.borderRadius(8)],buttonUnfolded:[ep,B.rcss.borderRadius(8,8,0,0)],rowContainer:[B.rcss.position.relative,B.rcss.zIndex(1),B.rcss.overflow("hidden")],diffContainer:[B.rcss.borderRadius(8)],bodyContainer:[B.rcss.borderRadius(0,0,8,8),B.rcss.p(8),B.rcss.display.flex,B.rcss.flex.row,B.rcss.flex.wrap,B.rcss.align.center,B.rcss.justify.center,B.rcss.backgroundColor.backgroundDefault,B.rcss.border({color:es.tokens.outlineDimmer,direction:"bottom"}),B.rcss.border({color:es.tokens.outlineDimmer,direction:"left"}),B.rcss.border({color:es.tokens.outlineDimmer,direction:"right"})],noChangesContainer:[B.rcss.py(8),B.rcss.px(8),B.rcss.center,B.rcss.width("100%")],innerContainer:[B.rcss.display.flex,B.rcss.align.center],splitContainer:[B.rcss.display.flex,B.rcss.flex.row,B.rcss.justify.spaceBetween,B.rcss.maxWidth("100%"),B.rcss.align.center],splitChild:[{flexBasis:"50%"}]}),em=function(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.diff,a="".concat(i.initial.path,"/").concat(i.initial.filename),o="".concat(i.final.path,"/").concat(i.final.filename);return(0,_.jsxs)(H.View,{css:n?eh.buttonFolded:eh.buttonUnfolded,onClick:function(){return r(!n)},children:[(0,_.jsxs)(H.View,{css:[eh.rowContainer,B.rcss.flex.shrink(1)],align:"center",row:!0,gap:8,children:["RENAMED"===i.status||"COPIED"===i.status?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(ed.default,{path:a}),(0,_.jsx)($.Text,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,_.jsx)($.Text,{multiline:!1,color:"dimmest",css:[B.rcss.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,_.jsx)(Z.default,{}),(0,_.jsx)(ed.default,{path:o}),(0,_.jsx)($.Text,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,_.jsx)($.Text,{multiline:!1,color:"dimmest",css:[B.rcss.fontWeight.normal],children:i.final.path})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(ed.default,{path:o}),(0,_.jsx)($.Text,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,_.jsx)($.Text,{multiline:!1,color:"dimmest",css:[B.rcss.fontWeight.normal],children:i.final.path})]}),(0,_.jsx)(eu.CopyIconButton,{textToCopy:o,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,_.jsxs)(H.View,{css:eh.rowContainer,align:"center",row:!0,gap:8,children:[(0,_.jsx)(ea.CommitFileType,{type:i.status}),(0,_.jsx)(ec.IconButton,{alt:n?"Collapse diff":"Expand diff",onClick:function(){return r(!n)},children:n?(0,_.jsx)(J.default,{}):(0,_.jsx)(ee.default,{})})]})]})},eg=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;return"Split"===n?(0,_.jsx)(Q.default,{a:{filePath:t.initial.filename,doc:t.initial.content},b:{filePath:t.final.filename,doc:t.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,_.jsx)(X.default,{filePath:t.final.filename,initialDoc:t.final.content,extensions:[Y.InlineDiff.of(K.Text.of(t.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},ev=function(e){return(0,er.isMedia)(e)?"media":(0,er.isOTFile)(e)?"ot":"binary"},ex=function(e){var t=e.content,n=e.type,r=e.filename,i=e.extensions;switch(n){case"media":return(0,_.jsx)(H.View,{css:[{display:"flex",height:"100%"}],children:(0,_.jsx)(eo.Viewer,{src:(0,eo.getMediaSrc)(t,(0,er.getMediaMime)(r)),fileName:r,mime:(0,er.getMediaMime)(r)})});case"ot":return(0,_.jsx)(X.default,{filePath:r,initialDoc:t,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,_.jsx)($.Text,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},ey=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;if(t.initial.content===t.final.content)return(0,_.jsx)(H.View,{css:eh.noChangesContainer,children:(0,_.jsx)($.Text,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===t.status)return(0,_.jsx)(H.View,{css:eh.noChangesContainer,children:(0,_.jsx)($.Text,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=(0,ei.default)(q.Buffer.from(t.initial.content))?"binary":ev(t.initial.filename),a=(0,ei.default)(q.Buffer.from(t.final.content))?"binary":ev(t.final.filename);if("binary"===i||"binary"===a)return(0,_.jsx)(H.View,{css:eh.noChangesContainer,children:(0,_.jsx)($.Text,{color:"dimmest",multiline:!1,children:"This binary file has changed."})});if("ADDED"===t.status)switch(a){case"media":return(0,_.jsx)(H.View,{css:eh.noChangesContainer,children:(0,_.jsx)(H.View,{css:eh.innerContainer,children:(0,_.jsx)(eo.Viewer,{src:(0,eo.getMediaSrc)(t.final.content,(0,er.getMediaMime)(t.final.filename)),fileName:t.final.filename,mime:(0,er.getMediaMime)(t.final.filename)})})});case"ot":return(0,_.jsx)(H.View,{css:eh.noChangesContainer,children:(0,_.jsx)(X.default,{filePath:t.final.filename,initialDoc:t.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,_.jsx)(H.View,{css:eh.noChangesContainer,children:(0,_.jsx)($.Text,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"ot"===i&&"ot"===a?(0,_.jsx)(eg,{diff:t,splitOrUnified:n,extensions:r}):(0,_.jsxs)(H.View,{css:eh.splitContainer,p:8,children:[(0,_.jsx)(H.View,{css:eh.splitChild,align:"center",justify:"center",children:(0,_.jsx)(ex,{content:t.initial.content,type:i,filename:t.initial.filename,extensions:r})}),(0,_.jsx)(H.View,{css:eh.splitChild,children:(0,_.jsx)(ex,{content:t.final.content,type:a,filename:t.final.filename,extensions:r})})]})},eb=function(e){var t=e.diff,l=e.fetchDiffFileContents,u=e.splitOrUnified,c=(0,a._)((0,s.useState)({expanded:!1,loading:!1,content:null,error:null}),2),d=c[0],f=c[1];return(0,_.jsxs)(H.View,{css:eh.diffContainer,grow:!0,children:[(0,_.jsx)(em,{folded:!d.expanded,setFolded:function(e){return(0,n._)(function(){var n;return(0,o._)(this,function(a){switch(a.label){case 0:if(f((0,i._)((0,r._)({},d),{expanded:!e,loading:null==d.content})),e)return[3,2];return[4,l(t)];case 1:n=a.sent(),f(function(e){return(0,i._)((0,r._)({},e),{loading:!1,error:n.error?n.error:null,content:null==n.error?{initial:n.content.base,final:n.content.head}:null})}),a.label=2;case 2:return[2]}})})()},diff:t}),d.expanded?(0,_.jsxs)(el.ShadesSurface,{css:eh.bodyContainer,children:[d.error?(0,_.jsx)(ef.StatusBanner,{colorway:"negative",icon:(0,_.jsx)(en.default,{}),text:d.error}):null,d.loading?(0,_.jsx)(H.View,{p:8,children:(0,_.jsx)(et.default,{})}):null,d.content?(0,_.jsx)(ey,{diff:(0,i._)((0,r._)({},t),{initial:(0,i._)((0,r._)({},t.initial),{content:d.content.initial}),final:(0,i._)((0,r._)({},t.final),{content:d.content.final})}),splitOrUnified:u}):null]}):null]},t.id)};e.s(["DiffViewer",()=>eb],172588);var ew=((t={}).Git="Git",t.Fs="Fs",t);function e_(e){return(0,n._)(function(e){var t,r,i;return(0,o._)(this,function(a){switch(a.label){case 0:if(t=e.file,r=e.fs,i=e.git,"Fs"!==t.type)return[3,2];return[4,function(e){return(0,n._)(function(e){var t,n;return(0,o._)(this,function(r){switch(r.label){case 0:return t=e.path,[4,e.fs.readFile(t,{fromDisk:!0})];case 1:if((n=r.sent()).error)return[2,{content:null,error:n.error}];return[2,{content:n.content.toString("utf8"),error:null}]}})}).apply(this,arguments)}({path:t.path,fs:r})];case 1:case 3:return[2,a.sent()];case 2:return[4,i.getFileContents({path:t.path,revision:t.revision,convertToBase64:(0,er.isMedia)(t.path)})]}})}).apply(this,arguments)}function ek(e){return(0,n._)(function(){var t,n,r,i,s,l,u,c,d,f,p;return(0,o._)(this,function(o){switch(o.label){case 0:return t=e.fs,n=e.git,r=e.base,i=e.head,c=Promise.all,[4,e_({git:n,fs:t,file:i})];case 1:return d=[o.sent()],[4,e_({git:n,fs:t,file:r})];case 2:return[4,c.apply(Promise,[d.concat([o.sent()])])];case 3:if(l=(s=a._.apply(void 0,[o.sent(),2]))[0],(u=s[1]).error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(r.type," for ").concat(r.path),content:null}];if(l.error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(i.type," for ").concat(i.path),content:null}];return[2,{error:null,content:{base:null!=(f=u.content)?f:"",head:null!=(p=l.content)?p:""}}]}})})()}e.s(["FetchFileType",()=>ew,"fetchFileContentsForDiff",()=>ek],432052)},598534,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(346715),i=e.i(817556),a=e.i(972291);function o(e){switch(e){case"A":return a.GitCommitFileType.ADDED;case"C":return a.GitCommitFileType.COPIED;case"D":return a.GitCommitFileType.DELETED;case"M":return a.GitCommitFileType.MODIFIED;case"R":return a.GitCommitFileType.RENAMED;case"T":return a.GitCommitFileType.TYPE_CHANGED;case"X":default:return a.GitCommitFileType.UNKNOWN;case"B":return a.GitCommitFileType.BROKEN}}function s(e){return Array.from(e.matchAll(c)).map(function(e){var t=(0,n._)(e,4),r=t[1],i=t[2];return{path:t[3],originalPath:i,type:o(r)}})}function l(e){return Array.from(e.matchAll(u)).map(function(e){var t=(0,n._)(e,3),r=t[1];return{path:t[2],type:o(r)}})}var u=/([ADMUXBT])\0([^\0]+)/g,c=/([RC])\d*\0([^\0]+)\0([^\0]+)/g;function d(e,n){return(0,t._)(function(){var o,u,c;return(0,i._)(this,function(d){switch(d.label){case 0:return[4,(0,t._)(function(){var t;return(0,i._)(this,function(r){switch(r.label){case 0:return[4,e("git log -1 --pretty=%P ".concat(n))];case 1:if((t=r.sent()).error)return[2,!1];return[2,t.output.trim().length>0]}})})()];case 1:if(!d.sent())return[2,(0,t._)(function(){var t,r,o,s,l,u,c,d,f;return(0,i._)(this,function(i){switch(i.label){case 0:return[4,e("git ls-tree --name-only -r ".concat(n),{serviceMethod:"git-get-files-for-commit"})];case 1:if((t=i.sent()).error)return[2,t];r=[],o=t.output.split("\n").filter(Boolean),s=!0,l=!1,u=void 0;try{for(c=o[Symbol.iterator]();!(s=(d=c.next()).done);s=!0)f=d.value,r.push({path:f,type:a.GitCommitFileType.ADDED})}catch(e){l=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(l)throw u}}return[2,{files:r,error:null}]}})})()];return[4,e("git diff-tree --no-commit-id --name-status -z -r -C --find-copies-harder -M ".concat(n),{serviceMethod:"git-get-files-for-commit"})];case 2:if((o=d.sent()).error)return[2,o];return u=s(o.output),c=l(o.output),[2,{files:(0,r._)(u).concat((0,r._)(c)),error:null}]}})})()}e.s(["default",()=>d,"getChangedFilesExcludingRenamesAndCopies",()=>l,"getRenamedOrCopiedFiles",()=>s])},986091,301736,773422,25082,e=>{"use strict";var t=e.i(276385),n=e.i(297083),r=e.i(530658),i=e.i(817556),a=e.i(389959),o=e.i(13362),s=e.i(269848),l=e.i(125674),u=e.i(529810),c=e.i(172588),d=e.i(432052),f=e.i(878420),p=e.i(64386),h=e.i(346715),m=e.i(15053),g=e.i(598534),x=e.i(205104),y=e.i(825118),b=e.i(257982),w=e.i(597865),_={z:!0,findCopies:!0,findCopiesHarder:!0,findRenames:!0,nameStatus:!0},k={z:"-z",findCopies:"--find-copies",findCopiesHarder:"--find-copies-harder",findRenames:"--find-renames",nameStatus:"--name-status"},S=e.i(972291),C=e.i(234961),j=e.i(538667);function T(e){switch(e){case C.GitStatusChangedFileType.UNMODIFIED:return null;case C.GitStatusChangedFileType.MODIFIED:return S.GitCommitFileType.MODIFIED;case C.GitStatusChangedFileType.TYPE_CHANGED:return S.GitCommitFileType.TYPE_CHANGED;case C.GitStatusChangedFileType.DELETED:return S.GitCommitFileType.DELETED;case C.GitStatusChangedFileType.RENAMED:return S.GitCommitFileType.RENAMED;case C.GitStatusChangedFileType.COPIED:return S.GitCommitFileType.COPIED;case C.GitStatusChangedFileType.UNTRACKED:case C.GitStatusChangedFileType.UNMERGED:case C.GitStatusChangedFileType.ADDED:return S.GitCommitFileType.ADDED;default:(0,b.default)(e)}}var E=e.i(51054),R=e.i(960178),I=e.i(625484),A=e.i(304662),P=function(e,t){return""===e?t:"".concat(e,"/").concat(t)};function D(e,t){return t.filter(function(t){var n="".concat(t.final.path,"/").concat(t.final.filename),r="".concat(t.initial.path,"/").concat(t.initial.filename);return n.toLowerCase().includes(e.toLowerCase())||r.toLowerCase().includes(e.toLowerCase())})}function O(e){var n=e.children,r=e.headerContent;return(0,t.jsxs)(I.View,{gap:16,children:[(0,t.jsxs)(I.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,t.jsx)(R.Header,{level:2,variant:"subheadDefault",children:"Changed Files"}),r]}),n]})}function N(e){var C,N,M,L,B,V,F=(0,u.default)(),U=F.fs,G=F.git,$=(0,r._)((0,a.useState)(""),2),H=$[0],z=$[1],W=(0,r._)((0,a.useState)("Split"),2),q=W[0],K=W[1],Y=(C={type:"revisionToRevisionDiff",head:e.head,base:e.base},N=(0,p._)((0,f._)({},C),{flags:(0,p._)((0,f._)({},_),{nameStatus:!0})}),M=(0,w.default)(function(e){return(0,n._)(function(){var t,n;return(0,i._)(this,function(r){switch(r.label){case 0:return t=function(e){var t,n=e.base,r=null!=(t=e.flags)?t:_,i=["git","diff"];switch(Object.keys(r).forEach(function(e){k[e]&&i.push(k[e])}),e.type){case"revisionToRevisionDiff":i.push("".concat(n,"...").concat(e.head));break;case"revisionToIndexDiff":i.push("--staged",n);break;default:(0,b.default)(e)}return i}(N),[4,e.escapeHatchGitExecRead(t.join(" "),{serviceMethod:"useGitDiff"})];case 1:if((n=r.sent()).error||null===n.output)return[2,{error:y.GitErrors.UNKNOWN}];return[2,{diff:n.output,error:null}]}})})()}),L=(0,l.default)(function(){return null==M?{loading:!0,error:null,data:null}:M.error?{loading:!1,error:M.error,data:null}:{loading:!1,error:null,data:M.diff}},[M]),(0,l.default)(function(){if(null==L||L.loading)return{loading:!0,error:null,data:null};if(L.error)return{loading:!1,error:L.error,data:null};var e,t=null!=(e=L.data)?e:"",n=(0,g.getRenamedOrCopiedFiles)(t),r=(0,g.getChangedFilesExcludingRenamesAndCopies)(t);return{loading:!1,error:null,data:Array.from(new Set((0,h._)(n).concat((0,h._)(r)))).filter(function(e){return["DELETED","ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}).map(function(e){var t,n;return{id:(0,m.v4)(),status:e.type,initial:{filename:(0,x.getFileName)(null!=(t=e.originalPath)?t:e.path),path:(0,x.getParentPath)(null!=(n=e.originalPath)?n:e.path)},final:{filename:(0,x.getFileName)(e.path),path:(0,x.getParentPath)(e.path)}}})}},[L])),Q=(0,l.default)(function(){var e;return D(H,null!=(e=Y.data)?e:[])},[H,Y]),X=function(t){return(0,n._)(function(){return(0,i._)(this,function(n){switch(n.label){case 0:return[4,(0,d.fetchFileContentsForDiff)({git:G,fs:U,base:{type:d.FetchFileType.Git,revision:e.base,path:P(t.initial.path,t.initial.filename)},head:{type:d.FetchFileType.Git,revision:e.head,path:P(t.final.path,t.final.filename)}})];case 1:return[2,n.sent()]}})})()},Z=(B=(0,j.useProjectGitState)().status,V=(0,l.default)(function(){return B&&null==B.error?B.changes:[]},[B]),(0,l.default)(function(){return V.map(function(e){var t,n,r,i,a=null!=(r=null!=(n=T(e.type.worktree))?n:T(e.type.index))?r:S.GitCommitFileType.UNKNOWN,o=null!=(i=null==(t=e.source)?void 0:t.path)?i:e.path;return{id:(0,m.v4)(),status:a,initial:{filename:(0,x.getFileName)(o),path:(0,x.getParentPath)(o)},final:{filename:(0,x.getFileName)(e.path),path:(0,x.getParentPath)(e.path)}}})},[V])),J=(0,l.default)(function(){return D(H,Z)},[H,Z]),ee=function(e){return(0,n._)(function(){return(0,i._)(this,function(t){switch(t.label){case 0:return[4,(0,d.fetchFileContentsForDiff)({git:G,fs:U,base:{type:d.FetchFileType.Git,revision:"HEAD",path:P(e.initial.path,e.initial.filename)},head:{type:d.FetchFileType.Fs,path:P(e.final.path,e.final.filename)}})];case 1:return[2,t.sent()]}})})()};return Y.loading?(0,t.jsx)(O,{children:(0,t.jsx)(s.default,{})}):Y.error||null==Y.data?(0,t.jsx)(O,{children:(0,t.jsx)(R.Text,{children:"Something went wrong. Please try another Repl."})}):0===Y.data.length&&0===Z.length?(0,t.jsx)(O,{children:(0,t.jsxs)(I.View,{row:!0,gap:4,align:"center",children:[(0,t.jsx)(o.default,{}),(0,t.jsx)(R.Text,{children:"No changes to merge"})]})}):(0,t.jsx)(O,{headerContent:(0,t.jsxs)(I.View,{row:!0,gap:8,children:[(0,t.jsx)(A.SplitOrUnifiedDiffButton,{value:q,onChange:K}),(0,t.jsx)(E.SearchBar,{value:H,onChange:function(e){z(e.target.value)},onClear:function(){z("")},loading:!1,placeholder:"Filter changed files"})]}),children:(0,t.jsxs)(I.View,{gap:12,children:[J.length?(0,t.jsxs)(I.View,{gap:8,children:[(0,t.jsx)(R.Header,{level:3,variant:"text",color:"dimmer",children:"Uncommitted Changes"}),J.map(function(e){return(0,t.jsx)(c.DiffViewer,{diff:e,splitOrUnified:q,fetchDiffFileContents:ee},e.id)})]}):null,Q.length?(0,t.jsxs)(I.View,{gap:8,children:[(0,t.jsx)(R.Header,{level:3,variant:"text",color:"dimmer",children:"Committed Changes"}),Q.map(function(e){return(0,t.jsx)(c.DiffViewer,{diff:e,splitOrUnified:q,fetchDiffFileContents:X},e.id)})]}):null]})})}var M=e.i(875259),L=function(e){var n=e.selectedRepl,r=e.isMainRepl,i=(0,M.remoteBranchForRepl)({replId:n.id,branch:"main"}),a="HEAD";return(0,t.jsx)(N,{base:r?a:i,head:r?i:a})};e.s(["ChangesSection",()=>L],986091);var B=e.i(416746),V=e.i(396776);function F(){var e=(0,r._)((0,a.useState)(!1),2),n=e[0],i=e[1],o=(0,u.default)().fs;return(0,a.useEffect)(function(){var e=!1,t=o.watchPathStat(".gitignore",{onNewStat:function(t){e||i(!t.exists)},onError:function(){}});return function(){e=!0,t()}},[o]),n?(0,t.jsx)(V.StatusBanner,{icon:(0,t.jsx)(B.default,{}),text:(0,t.jsxs)(R.Text,{children:["This project does not have a .gitignore file. It is recommended that all projects have a .gitignore file. You can find templates for .gitignore files for different languages"," ",(0,t.jsx)("a",{href:"https://github.com/github/gitignore",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})}):null}e.s(["GitIgnoreWarning",()=>F],301736);var U=e.i(87995),G=e.i(10581),$=e.i(185591);function H(e){var r=e.selectedRepl,a=(0,w.default)(function(e){return(0,n._)(function(){var t;return(0,i._)(this,function(n){switch(n.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=n.sent()).error)return[2,{error:null,message:"Something went wrong, this Repl's git state could not be read. Please make sure there is still a .git folder."}];if(t.state!==G.GitRepositoryState.CLEAN)return[2,{error:null,message:"This Repl has uncommitted changes. This will prevent any merges. Please undo or commit your changes before leaving the Repl."}];return[2,{error:null,message:null}]}})})()}),o=null==a?void 0:a.message;return(0,t.jsxs)(I.View,{gap:12,children:[(0,t.jsx)(R.Header,{level:2,variant:"subheadDefault",children:"Main Repl"}),(0,t.jsxs)(R.Text,{children:["You are in the main Repl for the project. If you want to merge in changes, head to"," ",r?(0,t.jsx)(U.default,(0,p._)((0,f._)({target:"_blank"},(0,$.replLinkProps)(r,{initialPaneType:"project"})),{children:r.title})):"a fork","."]}),o?(0,t.jsx)(V.StatusBanner,{icon:(0,t.jsx)(B.default,{}),colorway:"negative",text:o}):null]})}e.s(["MainReplSection",()=>H],773422);var z=e.i(569384),W=e.i(973245),q=e.i(304277);e.i(566901);var K=e.i(655366);function Y(){var e=(0,z._)(["\n  query PushToRemoteRepl($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        title\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return Y=function(){return e},e}var Q={},X=(0,W.gql)(Y(),K.CrosisContextReplFragmentDoc,K.CrosisContextCurrentUserFragmentDoc);function Z(e){var t=(0,f._)({},Q,e);return q.useQuery(X,t)}e.s(["usePushToRemoteReplQuery",()=>Z],25082)},556171,e=>{"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.session,r=e.askpass,i=e.author,a=e.committer,o={GIT_AUTHOR_NAME:"",GIT_AUTHOR_EMAIL:"",GIT_COMMITTER_NAME:"",GIT_COMMITTER_EMAIL:"",GIT_ASKPASS:"replit-git-askpass",GIT_PAGER:"",GIT_EDITOR:"",PAGER:"",EDITOR:""};if(void 0!==t&&(o.REPLIT_SESSION=t,o.REPLIT_ASKPASS_PID2_SESSION=t),void 0!==r&&(o.GIT_ASKPASS=r),i){o.GIT_AUTHOR_NAME=i.username,o.GIT_COMMITTER_NAME=i.username;var s=n(i);o.GIT_AUTHOR_EMAIL=s,o.GIT_COMMITTER_EMAIL=s,a&&(o.GIT_COMMITTER_NAME=a.username,o.GIT_COMMITTER_EMAIL=n(a))}return o}function n(e){if("id"in e)return"".concat(e.id,"-").concat(e.username,"@users.noreply.replit.com");if("email"in e)return e.email;throw Error("Invalid user")}e.s(["createGitServiceEnvironmentVariables",()=>t])},760890,e=>{"use strict";var t=e.i(297083),n=e.i(346715),r=e.i(817556),i=e.i(825118),a=e.i(861392),o=e.i(627557);function s(e,s){return(0,t._)(function(e,t){var s,l,u,c,d;return(0,r._)(this,function(r){switch(r.label){case 0:if(s=t.name,l=t.url,c=void 0!==(u=t.fetch)&&u,s=(0,o.removeRemoteRefsPath)(s),!(0,a.isValidRemoteName)(s))return[2,{error:i.GitErrors.INVALID_REFERENCE,extras:{remote:s}}];return s=(0,o.wrapInSingleQuotes)(s),l=(0,o.wrapInSingleQuotes)(l),[4,e(["git remote add"].concat((0,n._)(c?["-f"]:[]),[s,l]).join(" "),{serviceMethod:"git-add-remote"})];case 1:if((d=r.sent()).error)return[2,d];return[2,{didFetch:d.output.includes("Updating"),error:null}]}})}).apply(this,arguments)}e.s(["gitAddRemote",()=>s],760890)},480539,52221,598016,387539,118711,370451,861683,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(825118),i=e.i(861392),a=e.i(625108);function o(e,o){return(0,t._)(function(){var t,s,l,u,c,d;return(0,n._)(this,function(n){switch(n.label){case 0:if(t=(o=(0,i.getFullBranchName)(o)).startsWith("refs/heads/"),s=o.startsWith("refs/remotes/"),t)return[3,2];return l=s?o:"refs/remotes/".concat(o),[4,e("git show-ref --verify ".concat(l),{serviceMethod:"git-branch-exists"})];case 1:if(!(u=n.sent()).error)return[2,{exists:!0,ref:(0,a.parseGitRef)(l),error:null}];if(u.error!==r.GitErrors.INVALID_REFERENCE)return[2,u];n.label=2;case 2:if(s)return[3,4];return c=t?o:"refs/heads/".concat(o),[4,e("git show-ref --verify ".concat(c),{serviceMethod:"git-branch-exists"})];case 3:if(!(d=n.sent()).error)return[2,{exists:!0,ref:(0,a.parseGitRef)(c),error:null}];if(d.error!==r.GitErrors.INVALID_REFERENCE)return[2,d];n.label=4;case 4:return[2,{exists:!1,ref:null,error:null}]}})})()}e.s(["default",()=>o],52221),e.s(["gitBranchExists",()=>o],480539);var s=e.i(627557);function l(e,r,a){return(0,t._)(function(){var t,o,l;return(0,n._)(this,function(n){switch(n.label){case 0:if((0,i.isSameBranchRef)(r,a)){if(r=(0,i.getQualifiedBranchName)(r,!0),a=(0,i.getQualifiedBranchName)(a),r===a)return[2,{canMerge:!0,error:null}]}else r=(0,i.getQualifiedBranchName)(r),a=(0,i.getQualifiedBranchName)(a);return r=(0,s.wrapInSingleQuotes)(r),a=(0,s.wrapInSingleQuotes)(a),t="git merge-base ".concat(r," ").concat(a),o='git merge-tree "$('.concat(t,')" ').concat(r," ").concat(a),[4,e("set -eo pipefail; (".concat(o," | ").concat("( (grep -q -e '^+<* \\.our$' && echo '1') || echo '0')",") || test $? -eq 141"),{serviceMethod:"git-can-merge-branches"})];case 1:if((l=n.sent()).error)return[2,l];return[2,{canMerge:"0"===l.output,error:null}]}})})()}e.s(["default",()=>l],598016),e.s(["gitCanMergeBranches",()=>l],387539);var u=e.i(530658),c=e.i(346715),d=e.i(960933);function f(e,r){return(0,t._)(function(){var t,i;return(0,n._)(this,function(n){switch(n.label){case 0:return[4,e(function(e){var t=e.message,n=e.trailers,r=e.files,i=e.allowEmpty,a=e.noVerify,o=["--allow-empty-message","--cleanup=whitespace","--no-edit","--quiet","-m ".concat((0,s.wrapInSingleQuotes)(t))];if(n){var l=!0,d=!1,f=void 0;try{for(var p,h=Object.entries(n)[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var m=(0,u._)(p.value,2),g=m[0],x=m[1],y=(0,s.wrapInSingleQuotes)("".concat(g,":").concat((0,s.formatTrailer)(x)));o.push("--trailer ".concat(y))}}catch(e){d=!0,f=e}finally{try{l||null==h.return||h.return()}finally{if(d)throw f}}}return(void 0===i||i)&&o.push("--allow-empty"),(void 0===a||a)&&o.push("--no-verify"),r&&o.push.apply(o,["--only","--"].concat((0,c._)(r.map(s.wrapInSingleQuotes)))),"git --literal-pathspecs commit ".concat(o.join(" "))}(r),{serviceMethod:"git-commit"})];case 1:if((t=n.sent()).error)return[2,t];return[4,e("git rev-parse HEAD",{serviceMethod:"git-commit"})];case 2:if((i=n.sent()).error)return[2,i];return[2,{hash:i.output,error:null}]}})})()}d.Type.Object({message:d.Type.String(),trailers:d.Type.Optional(d.Type.Record(d.Type.String(),d.Type.String())),noVerify:d.Type.Optional(d.Type.Boolean()),files:d.Type.Optional(d.Type.Array(d.Type.String())),allowEmpty:d.Type.Optional(d.Type.Boolean())}),e.s(["gitCommit",()=>f],118711);var p=e.i(705705),h=e.i(878420);function m(e,a){return(0,t._)(function(){var l,u,c,d,f;return(0,n._)(this,function(m){switch(m.label){case 0:return[4,o(e,a=(0,i.getFullBranchName)(a,!0))];case 1:if((l=m.sent()).error)return[2,l];if(!l.exists)return[2,{error:r.GitErrors.INVALID_REFERENCE,extras:{branch:a}}];if(u={guess:!1},l.ref.type!==p.GitRefType.REMOTE_BRANCH)return[3,3];return d=l.ref.branch,[4,o(e,"refs/heads/".concat(d))];case 2:if((f=m.sent()).error)return[2,f];return f.exists?c=f.ref:(u.track=!0,u.newBranch=d,c=l.ref),[3,4];case 3:c=l.ref,m.label=4;case 4:var g;return g=(0,h._)({branchRef:c},u),[2,(0,t._)(function(){var t,r;return(0,n._)(this,function(n){switch(n.label){case 0:return t=["--quiet"],g.guess||t.push("--no-guess"),(g.newBranch&&void 0===g.track||g.track)&&t.push("--track"),g.force&&t.push("-f"),g.newBranch&&t.push("-b",g.newBranch),t.push((0,s.wrapInSingleQuotes)(g.branchRef.name),"--"),[4,e("git checkout ".concat(t.join(" ")),{serviceMethod:"git-checkout"})];case 1:if((r=n.sent()).error)return[2,r];return[2,{ok:!0,error:null}]}})})()]}})})()}function g(e,i){return(0,t._)(function(e,t){var i,a,l,u,c,d,f,h,g,x,y;return(0,n._)(this,function(n){switch(n.label){case 0:return i=t.name,l=void 0===(a=t.startPoint)?"HEAD":a,u=t.track,d=void 0!==(c=t.checkout)&&c,[4,o(e,i=(0,s.removeBranchRefsPath)(i))];case 1:if((f=n.sent()).error)return[2,f];if(f.exists)return[2,{error:r.GitErrors.BRANCH_ALREADY_EXISTS,extras:{branch:i}}];if("HEAD"===l){if(!0===u)return[2,{error:r.GitErrors.INVALID_REFERENCE,extras:{branch:i}}];u=!1}if(!1===u)return[3,3];return[4,o(e,l)];case 2:if((h=n.sent()).error)return[2,h];if(!h.exists&&!0===u)return[2,{error:r.GitErrors.INVALID_REFERENCE,extras:{branch:i}}];h.exists&&h.ref.type===p.GitRefType.REMOTE_BRANCH&&void 0===u&&(u=!0),n.label=3;case 3:return g=["--quiet",u?"--track":"--no-track",(0,s.wrapInSingleQuotes)(i),(0,s.wrapInSingleQuotes)(l)],[4,e("git branch ".concat(g.join(" ")),{serviceMethod:"git-create-branch"})];case 4:if((x=n.sent()).error)return[2,x];if(!d)return[3,6];return[4,m(e,i)];case 5:if((y=n.sent()).error)return[2,y];n.label=6;case 6:return[2,{error:null}]}})}).apply(this,arguments)}d.Type.Object({branchRef:d.Type.Union([p.GitBranchRefSchema,p.GitRemoteBranchRefSchema]),guess:d.Type.Optional(d.Type.Boolean()),newBranch:d.Type.Optional(d.Type.String()),track:d.Type.Optional(d.Type.Boolean()),force:d.Type.Optional(d.Type.Boolean())}),e.s(["default",()=>m],370451),e.s(["gitCreateBranch",()=>g],861683)},200437,633386,997229,e=>{"use strict";var t=e.i(297083),n=e.i(346715),r=e.i(817556),i=e.i(960933),a=e.i(627557);function o(e){return(0,t._)(function(e){var t,i,o,s,l,u=arguments;return(0,r._)(this,function(r){switch(r.label){case 0:return t=u.length>1&&void 0!==u[1]?u[1]:{},i=["--quiet"],t.depth&&(o=t.deepen?"--deepen":"--depth",i.push("".concat(o,"=").concat(t.depth))),t.remote?i.push((0,a.wrapInSingleQuotes)(t.remote)):i.push("--all"),!1===t.tags&&i.push("--no-tags"),t.refs&&t.refs.length>0&&(s=i).push.apply(s,(0,n._)(t.refs)),[4,e("git fetch ".concat(i.join(" ")),{serviceMethod:"git-fetch"})];case 1:if((l=r.sent()).error)return[2,l];return[2,{error:null}]}})}).apply(this,arguments)}i.Type.Object({remote:i.Type.Optional(i.Type.String()),depth:i.Type.Optional(i.Type.Number()),deepen:i.Type.Optional(i.Type.Boolean()),tags:i.Type.Optional(i.Type.Boolean()),refs:i.Type.Optional(i.Type.Array(i.Type.String()))}),e.s(["default",()=>o],633386),e.s(["gitFetch",()=>o],200437);var s=e.i(625108),l=["main","master","trunk","dev","develop","development","staging","prod","production"].map(function(e){return'if [ $(git rev-parse --verify --quiet "heads/'.concat(e,'") ]; then\n      echo "refs/heads/').concat(e,'"\n    fi')}).join("\n"),u='\ngit remote | while IFS= read -r remote; do\n  if [ -z "$remote" ]; then continue; fi\n  if [ "$remote" = "gitsafe-backup" ]; then continue; fi\n  branch="$('.concat('\nif [ -f ".git/refs/remotes/$remote/HEAD" ]; then\n  echo "$(sed -e "s/^ref: refs\\/remotes\\/$remote\\///" < .git/refs/remotes/$remote/HEAD)"\nelse\n  remote_result="$(git ls-remote --symref "$remote" HEAD)"\n  if [ -z "$remote_result" ]; then\n    echo ""\n  else\n    branch_name="$(\n      echo "$remote_result" | \\\n      head -1 | \\\n      awk \'{print $2}\' | \\\n      sed -e "s/^refs\\/heads\\///"\n    )"\n    git remote set-head "$remote" "$branch_name" >&2\n    echo "$branch_name"\n  fi\nfi\n'.trim(),')"\n  if [ -z "$branch" ]; then continue; fi\n  echo "refs/remotes/$remote/$branch"\n  if [ $(git rev-parse --verify --quiet "heads/$branch") ]; then\n    echo "refs/heads/$branch"\n  fi\ndone\n').concat(l,"\n").trim();function c(e){return(0,t._)(function(){var t;return(0,r._)(this,function(r){switch(r.label){case 0:return[4,e(u,{serviceMethod:"git-find-default-branches"})];case 1:if((t=r.sent()).error)return[2,t];return[2,{refs:(0,n._)(new Set((0,a.splitTrimFilter)(t.output,"\n"))).map(function(e){return(0,s.parseGitRef)(e)}),error:null}]}})})()}e.s(["gitFindDefaultBranches",()=>c],997229)},221856,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(825118),a=e.i(861392),o=e.i(627557),s=e.i(680183),l=e.i(167193);function u(e,u){return(0,t._)(function(){var t,c,d,f,p,h,m,g,x,y,b,w;return(0,r._)(this,function(r){switch(r.label){case 0:if(u=(0,a.getQualifiedBranchName)(u,!0),!(0,a.isValidBranchName)(u))return[2,{error:i.GitErrors.INVALID_REFERENCE,extras:{branch:u}}];return t=(0,o.removeBranchRefsPath)(u),d=(c=(0,n._)((0,o.splitRemoteFromBranch)(u),2))[0],f=c[1],p=["refs/heads/".concat(t),"refs/remotes/*/".concat(t)],d&&f&&(p.push("refs/heads/".concat(f)),p.push("refs/remotes/".concat(d,"/").concat(f))),[4,(0,l.default)(e,{pattern:p})];case 1:if((h=r.sent()).error)return[2,h];if(0===h.branches.length)return[2,{error:i.GitErrors.INVALID_REFERENCE,extras:{branch:u}}];m=!0,g=!1,x=void 0;try{for(y=h.branches[Symbol.iterator]();!(m=(b=y.next()).done);m=!0)if((w=b.value).type!==s.GitBranchType.REMOTE&&w.name===t||d&&f&&w.type!==s.GitBranchType.LOCAL&&w.remote===d&&w.name===f)return[2,{branch:w,error:null}]}catch(e){g=!0,x=e}finally{try{m||null==y.return||y.return()}finally{if(g)throw x}}return[2,{error:i.GitErrors.INVALID_REFERENCE,extras:{branch:u}}]}})})()}e.s(["gitGetBranch",()=>u],221856)},879737,721035,846849,126416,452814,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(960933),a=e.i(627557),o=e.i(972291),s=/(?:(?:[ADMTU]\0[^\0]+?)|(?:[RC][0-9]+\0[^\0]+?\0[^\0]+?))(?=\0|$)/g,l=/([ACDMRTU])([0-9]+)?\0([^\0]+?)(?:\0([^\0]+?))?$/;function u(e,i){return(0,t._)(function(){var t,u,c,d,f,p,h,m,g,x,y,b,w,_,k;return(0,r._)(this,function(r){switch(r.label){case 0:return t="".concat((0,a.wrapInSingleQuotes)(i.a)," ").concat((0,a.wrapInSingleQuotes)(i.b)),u=["--name-status","-z","-M"],i.copies&&u.push("-C","-C"),[4,e("git diff ".concat(u.join(" ")," ").concat(t))];case 1:if((c=r.sent()).error)return[2,c];d=[],f=!0,p=!1,h=void 0;try{for(m=c.output.matchAll(s)[Symbol.iterator]();!(f=(g=m.next()).done);f=!0)(x=(0,n._)(g.value,1)[0].match(l))&&(b=(y=(0,n._)(x,5))[1],w=y[3],_=y[4],k=function(e){switch(e){case"A":case"U":return o.GitCommitFileType.ADDED;case"C":return o.GitCommitFileType.COPIED;case"D":return o.GitCommitFileType.DELETED;case"M":return o.GitCommitFileType.MODIFIED;case"R":return o.GitCommitFileType.RENAMED;case"T":return o.GitCommitFileType.TYPE_CHANGED;default:throw Error("Unknown file type: ".concat(e))}}(b),d.push(k===o.GitCommitFileType.RENAMED||k===o.GitCommitFileType.COPIED?{type:k,path:_,originalPath:w}:{type:k,path:w}))}catch(e){p=!0,h=e}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}return[2,{files:d,error:null}]}})})()}i.Type.Object({a:i.Type.String(),b:i.Type.String(),copies:i.Type.Optional(i.Type.Boolean())}),e.s(["gitGetChangesBetweenCommits",()=>u],879737);var c=e.i(878420),d=e.i(64386),f=e.i(825118),p=e.i(625108),h=["only","separator=".concat("%x1e"),"key_value_separator=".concat("%x1d")].join(","),m='--format="format:'+["%D","%H","%P","%an","%ae","%at","%cn","%ce","%ct","%s","%b","%(trailers:".concat(h,")"),"%N"].join("%x1f")+'"';function g(e){var t=e.trimStart().split("\x1f"),r=(0,n._)(t,13),i=r[0],o=r[1],s=r[2],l=r[3],u=r[4],c=r[5],d=r[6],f=r[7],h=r[8],m=r[9],g=r[10],x=r[11],y=r[12];if(void 0===o)throw Error("Malformed git log output: missing commit hash");if(void 0===l||void 0===u||void 0===c||void 0===d||void 0===f||void 0===h)throw Error("Malformed git log output: missing commit user information");var b=[],w=s?s.split(" "):null,_=!1;if(i){var k=!0,S=!1,C=void 0;try{for(var j,T=(0,a.splitTrimFilter)(i,",")[Symbol.iterator]();!(k=(j=T.next()).done);k=!0){var E=j.value;if("grafted"===E){_=!0;continue}b.push((0,p.parseGitRef)(E))}}catch(e){S=!0,C=e}finally{try{k||null==T.return||T.return()}finally{if(S)throw C}}}var R={name:l,email:u,date:1e3*parseInt(c,10)},I={name:d,email:f,date:1e3*parseInt(h,10)},A=m?m.trim():"",P=g?g.trim():"",D=!1,O={};x&&(O=Object.fromEntries((0,a.splitTrimFilter)(x,"\x1e").map(function(e){var t=e.indexOf("\x1d"),n=-1===t?e:e.slice(0,t),r=-1===t?"":e.slice(t+1);if(P&&!D){D=!0;var i=P.lastIndexOf(n+":");-1!==(i=-1===i?P.lastIndexOf(n+"="):i)&&(P=P.slice(0,i).trim())}return[n,(0,a.parseTrailer)(r)]})));var N=y&&""!==y.trim()?y.trim():void 0;return{refs:b,hash:o,parents:w,grafted:_,author:R,committer:I,subject:A,body:P,trailers:O,notes:N}}function x(e){return(0,t._)(function(e){var t,n=arguments;return(0,r._)(this,function(r){switch(r.label){case 0:var i,o,s,l,u,c,d;return[4,e((s=void 0===(o=(i=n.length>1&&void 0!==n[1]?n[1]:{}).max)?25:o,l=i.skip,u=i.revRange,c=i.path,d=["-z","--decorate=full","--full-history",m],s=Math.max(1,Math.min(s,200)),d.push("-n ".concat(s)),l&&d.push("--skip ".concat(l)),u&&d.push(u),d.push("--"),c&&d.push(c),"git log ".concat(d.join(" "))),{serviceMethod:"git-log"})];case 1:if((t=r.sent()).error){if(t.error===f.GitErrors.NO_COMMITS)return[2,{commits:[],error:null}];return[2,t]}return[2,{commits:(0,a.splitTrimFilter)(t.output,"\0").map(g),error:null}]}})}).apply(this,arguments)}function y(e,n){return(0,t._)(function(){var t,i;return(0,r._)(this,function(r){switch(r.label){case 0:if(!n.commit)return[2,{error:f.GitErrors.INVALID_REFERENCE,extras:{commit:n.commit}}];return[4,x(e,{max:1,revRange:n.commit})];case 1:if((t=r.sent()).error)return[2,t];if(0===t.commits.length)return[2,{error:f.GitErrors.INVALID_REFERENCE,extras:{commit:n.commit}}];return i=t.commits[0],[2,(0,d._)((0,c._)({},i),{error:null})]}})})()}i.Type.Object({max:i.Type.Optional(i.Type.Integer()),skip:i.Type.Optional(i.Type.Integer()),revRange:i.Type.Optional(i.Type.String()),path:i.Type.Optional(i.Type.String())}),e.s(["default",()=>x],721035),i.Type.Object({commit:i.Type.String()}),e.s(["gitGetCommit",()=>y],846849);var b=["git diff -z --name-only --diff-filter=U","echo -n ".concat("\x1f"),"{ git grep -z -l -E '<{7,}|={7,}|>{7,}' || exit $(( $? == 1 ? 0 : $? )); }"].join(" && ");function w(e){return(0,t._)(function(){var t,i,o,s,l,u,c,d,f,p,h;return(0,r._)(this,function(r){switch(r.label){case 0:return[4,e(b,{serviceMethod:"git-get-conflicting-files"})];case 1:if((t=r.sent()).error)return[2,t];if(o=(i=(0,n._)(t.output.split("\x1f").map(function(e){return(0,a.splitTrimFilter)(e,"\0")}),2))[0],s=i[1],!o.length)return[2,{files:new Map,error:null}];l=new Map,u=!0,c=!1,d=void 0;try{for(f=o[Symbol.iterator]();!(u=(p=f.next()).done);u=!0)h=p.value,l.set(h,!s.includes(h))}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}return[2,{files:l,error:null}]}})})()}function _(e,n){return(0,t._)(function(e,t){var n,i,o,s,l,u;return(0,r._)(this,function(r){switch(r.label){case 0:if(n=t.path,i=t.convertToBase64,s=void 0===(o=t.revision)?"HEAD":o,""===n)return[2,{content:null,error:null}];return l=(0,a.wrapInSingleQuotes)("".concat(s,":").concat(n)),[4,e(i?"git --no-pager show ".concat(l," | base64"):"git --no-pager show ".concat(l),{verbatim:!0,serviceMethod:"git-get-file-contents"})];case 1:if((u=r.sent()).error){if(u.error===f.GitErrors.PATH_MATCHED_NO_FILES)return[2,{content:null,error:null}];return[2,u]}return[2,{content:u.output,error:null}]}})}).apply(this,arguments)}e.s(["gitGetConflictingFiles",()=>w],126416),e.s(["gitGetFileContents",()=>_],452814)},878907,e=>{"use strict";var t=e.i(598534);e.s(["gitGetFilesForCommit",()=>t.default])},809713,428169,351892,410347,349472,401580,766787,685804,679495,679258,177050,147373,167310,271520,125666,37038,923137,521047,319723,299571,345462,579876,e=>{"use strict";var t,n,r=e.i(297083),i=e.i(817556),a=e.i(825118),o=e.i(627557),s=e.i(10581);function l(e,t){return"{ ".concat(e,"; } > /dev/null 2>&1 && echo -n '").concat(t,"' && exit 0")}var u=[l("! git rev-parse --is-inside-work-tree",s.GitRepositoryState.NOT_INITIALIZED),l('[ "$(! git rev-parse HEAD -- 2>&1)" = "fatal: bad revision \'HEAD\'" ]',s.GitRepositoryState.ON_UNBORN_BRANCH),l("! git cat-file -e HEAD",s.GitRepositoryState.HEAD_MISSING),l("! git ls-tree HEAD > /dev/null 2>&1",s.GitRepositoryState.TREE_CORRUPTED),l("git rev-parse -q --verify MERGE_HEAD",s.GitRepositoryState.MERGING),l("[ -d '.git/rebase-apply' ] && [ -f '.git/rebase-apply/applying' ]",s.GitRepositoryState.APPLYING_MAILBOX),l("[ -d '.git/rebase-apply' ] || [ -d '.git/rebase-merge' ]",s.GitRepositoryState.REBASING),l("git rev-parse -q --verify REVERT_HEAD",s.GitRepositoryState.REVERTING),l("git rev-parse -q --verify CHERRY_PICK_HEAD",s.GitRepositoryState.CHERRY_PICKING),l("[ -f '.git/BISECT_LOG' ]",s.GitRepositoryState.BISECTING),l("! git symbolic-ref -q HEAD",s.GitRepositoryState.DETACHED_HEAD),l("[ -f '.git/index.lock' ]",s.GitRepositoryState.INDEX_LOCKED),l("[ -f '.git/config.lock' ]",s.GitRepositoryState.CONFIG_LOCKED),"git update-index -q --refresh > /dev/null || exit $?",l('{ ! git diff-files --quiet; } || [ -n "$(git ls-files --others --exclude-standard)" ]',s.GitRepositoryState.DIRTY_WORKTREE),l("! git diff-index --cached --quiet HEAD --",s.GitRepositoryState.DIRTY_INDEX),'echo -n "CLEAN"'].join(";");function c(e){return(0,r._)(function(){var t,n,r;return(0,i._)(this,function(i){switch(i.label){case 0:return[4,e(u,{serviceMethod:"git-get-repository-state"})];case 1:if((t=i.sent()).error)return[2,t];if(!(t.output in s.GitRepositoryState))return[2,{error:a.GitErrors.UNKNOWN,extras:{output:t.output}}];return r=function(e){switch(e){case s.GitRepositoryState.NOT_INITIALIZED:case s.GitRepositoryState.ON_UNBORN_BRANCH:return s.GitRepositoryStateType.INITIALIZING;case s.GitRepositoryState.MERGING:case s.GitRepositoryState.REBASING:case s.GitRepositoryState.REVERTING:case s.GitRepositoryState.CHERRY_PICKING:case s.GitRepositoryState.APPLYING_MAILBOX:case s.GitRepositoryState.BISECTING:case s.GitRepositoryState.INDEX_LOCKED:case s.GitRepositoryState.CONFIG_LOCKED:return s.GitRepositoryStateType.INTERMEDIATE;case s.GitRepositoryState.DIRTY_WORKTREE:case s.GitRepositoryState.DIRTY_INDEX:case s.GitRepositoryState.CLEAN:return s.GitRepositoryStateType.NORMAL;case s.GitRepositoryState.DETACHED_HEAD:return s.GitRepositoryStateType.DETACHED_HEAD;case s.GitRepositoryState.HEAD_MISSING:case s.GitRepositoryState.TREE_CORRUPTED:return s.GitRepositoryStateType.HEAD_MISSING}}(n=t.output),[2,{state:n,type:r,error:null}]}})})()}function d(e){return(0,r._)(function(){var t,n,r,l,u,d,f;return(0,i._)(this,function(i){switch(i.label){case 0:return[4,c(e)];case 1:if((t=i.sent()).error)return[2,t];if((n=t.state)!==s.GitRepositoryState.MERGING)return[2,{error:a.GitErrors.INVALID_STATE,extras:{state:n,expected:[s.GitRepositoryState.MERGING]}}];return[4,e("cat '.git/MERGE_HEAD'",{serviceMethod:"git-get-merging-refs"})];case 2:if((r=i.sent()).error)return[2,r];if(!(l=(0,o.splitTrimFilter)(r.output,"\n")).length)return[2,{commits:[],branches:[],error:null}];return u="{ grep -F '".concat(l.join("\n"),"' || exit 0; }"),[4,e("".concat('git for-each-ref --format="%(objectname)	%(refname)" refs/heads/ refs/remotes/'," | ").concat(u),{serviceMethod:"git-get-merging-refs"})];case 3:if((d=i.sent()).error)return[2,d];if(!d.output)return[2,{commits:l,branches:[],error:null}];return f=(0,o.splitTrimFilter)(d.output,"\n").map(function(e){return e.split("	")[1]}).map(o.removeBranchRefsPath),[2,{commits:l,branches:f,error:null}]}})})()}e.s(["gitGetMergingRefs",()=>d],809713);var f=e.i(530658);function p(e){return(0,r._)(function(){var t,n,r,a,s,l,u,c,d,p,h,m,g,x;return(0,i._)(this,function(i){switch(i.label){case 0:return[4,e("git remote -v",{serviceMethod:"git-get-remotes"})];case 1:if((t=i.sent()).error)return[2,t];if(""===t.output)return[2,{remotes:new Map,error:null}];n=new Map,r=!0,a=!1,s=void 0;try{for(l=(0,o.splitTrimFilter)(t.output,"\n")[Symbol.iterator]();!(r=(u=l.next()).done);r=!0)c=u.value,p=(d=(0,f._)(c.split(/\s+/),3))[0],h=d[1],m=d[2],p&&h&&m&&"gitsafe-backup"!==p&&(x=null!=(g=n.get(p))?g:{name:p,fetch:"",push:""},"(fetch)"===m?(x.fetch=h,""===x.push&&(x.push=h),n.set(p,x)):"(push)"===m&&(x.push=h,""===x.fetch&&(x.fetch=h),n.set(p,x)))}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}return[2,{remotes:n,error:null}]}})})()}e.s(["gitGetRemotes",()=>p],428169),e.s(["gitGetRepositoryState",()=>c],351892);var h=e.i(878420),m=e.i(64386),g=e.i(960933);g.Type.Object({gitsafeBackupUrl:g.Type.Optional(g.Type.String())});var x='git commit --allow-empty --no-edit --quiet -m "Initial commit"',y='git add -A && git commit --allow-empty --no-edit --quiet -m "Initial commit"';function b(e,t,n){return(0,r._)(function(e){var t,n,o,l,u,d,f,p,g,b,w,_,k,S,C,j,T,E,R=arguments;return(0,i._)(this,function(I){switch(I.label){case 0:return o=void 0===(n=(t=R.length>1&&void 0!==R[1]?R[1]:{}).initialCommit)||n,u=void 0===(l=t.includeAllInitialFiles)||l,f=void 0===(d=t.gitsafeBackupUrl)?"git://gitsafe:5418/backup.git":d,p=R.length>2?R[2]:void 0,g=R.length>3?R[3]:void 0,b=(0,m._)((0,h._)({},p),{serviceMethod:"git-init"}),[4,c(e)];case 1:if((w=I.sent()).error)return[2,w];if(w.type!==s.GitRepositoryStateType.INITIALIZING)return[2,{error:a.GitErrors.ALREADY_INITIALIZED}];if(w.state!==s.GitRepositoryState.ON_UNBORN_BRANCH)return[3,4];if(!o)return[3,3];return[4,e(u?y:x,b)];case 2:if((_=I.sent()).error)return[2,_];I.label=3;case 3:return[2,{error:null}];case 4:return[4,e(["git init --quiet","git checkout --quiet --no-progress -b main"],b)];case 5:if((k=I.sent()).error)return[2,k];return[4,e("git remote add gitsafe-backup ".concat(f),b)];case 6:if((S=I.sent()).error)return[2,S];return[4,e("git config remote.gitsafe-backup.skipFetchAll true",b)];case 7:if((C=I.sent()).error)return[2,C];if(!o)return[3,10];return[4,e(u?y:x,b)];case 8:if((j=I.sent()).error)return[2,j];return[4,function(e,t){return(0,r._)(function(e){var t,n,r,a,o,s=arguments;return(0,i._)(this,function(i){switch(i.label){case 0:return n=void 0===(t=(s.length>1&&void 0!==s[1]?s[1]:{}).gitsafeBackupUrl)?"git://gitsafe:5418/backup.git":t,[4,e("git remote get-url gitsafe-backup",r=s.length>2?s[2]:void 0)];case 1:if(!i.sent().error)return[3,3];return[4,e("git remote add gitsafe-backup ".concat(n),r)];case 2:if((a=i.sent()).error)return[2,a];i.label=3;case 3:return[4,e("git push --quiet gitsafe-backup HEAD:main",r)];case 4:if((o=i.sent()).error)return[2,o];return[2,{error:null}]}})}).apply(this,arguments)}(e,{},b)];case 9:(T=I.sent()).error&&g&&(E=Error("Gitsafe error during git init: ".concat(T.error)),g.captureSentryError(E),g.log("Gitsafe error during git init: ".concat(T.error))),I.label=10;case 10:return[2,{error:null}]}})}).apply(this,arguments)}function w(e){return(0,r._)(function(){var t;return(0,i._)(this,function(n){switch(n.label){case 0:return[4,e("git rev-parse --is-inside-work-tree",{serviceMethod:"git-is-initialized"})];case 1:if((t=n.sent()).error){if(t.error===a.GitErrors.NOT_INITIALIZED)return[2,{initialized:!1,error:null}];return[2,t]}return[2,{initialized:"true"===t.output,error:null}]}})})()}function _(e){return(0,r._)(function(){var t,n;return(0,i._)(this,function(r){switch(r.label){case 0:return[4,e("if [ -f '.git/FETCH_HEAD' ]; then stat -c %Y '.git/FETCH_HEAD'; fi",{serviceMethod:"git-last-fetched"})];case 1:if((t=r.sent()).error)return[2,t];if(!t.output||isNaN(n=parseInt(t.output,10)))return[2,{lastFetched:null,error:null}];return[2,{lastFetched:new Date(n*=1e3),error:null}]}})})()}g.Type.Object({initialCommit:g.Type.Optional(g.Type.Boolean()),includeAllInitialFiles:g.Type.Optional(g.Type.Boolean()),gitsafeBackupUrl:g.Type.Optional(g.Type.String())}),e.s(["gitInit",()=>b],410347),e.s(["gitIsInitialized",()=>w],349472),e.s(["gitLastFetched",()=>_],401580);var k=e.i(167193);e.s(["gitListBranches",()=>k.default],766787);var S=e.i(721035);function C(e){return(0,r._)(function(e){var t,n=arguments;return(0,i._)(this,function(r){switch(r.label){case 0:return[4,e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return e.cached&&t.push("--cached"),e.deleted&&t.push("--deleted"),e.modified&&t.push("--modified"),e.others&&t.push("--others"),e.ignored&&t.push("--ignored"),e.directory&&t.push("--directory"),e.noEmptyDirectory&&t.push("--no-empty-directory"),"git ls-files ".concat(t.join(" "))}(n.length>1&&void 0!==n[1]?n[1]:{}),{serviceMethod:"git-ls-files"})];case 1:if((t=r.sent()).error)return[2,t];return[2,{files:t.output.split("\n").filter(function(e){return e.length>0}),error:null}]}})}).apply(this,arguments)}e.s(["gitLog",()=>S.default],685804),e.s(["gitLsFiles",()=>C],679495);var j=e.i(861392),T=e.i(52221),E=e.i(598016);function R(e,t){return(0,r._)(function(e,t){var n,r,l,u,d,f,p,h,m;return(0,i._)(this,function(i){switch(i.label){case 0:return n=t.branch,r=t.message,u=void 0!==(l=t.allowConflicts)&&l,[4,c(e)];case 1:if((d=i.sent()).error)return[2,d];if(f=d.state,d.type!==s.GitRepositoryStateType.NORMAL||f===s.GitRepositoryState.DIRTY_WORKTREE||f===s.GitRepositoryState.DIRTY_INDEX)return[2,{error:a.GitErrors.INVALID_STATE,extras:{state:f,expected:[s.GitRepositoryStateType.NORMAL]}}];return[4,(0,T.default)(e,n)];case 2:if((p=i.sent()).error)return[2,p];if(!p.exists)return[2,{error:a.GitErrors.INVALID_REFERENCE,extras:{branch:n}}];if(u)return[3,4];return[4,(0,E.default)(e,n,"HEAD")];case 3:if((h=i.sent()).error)return[2,h];if(!h.canMerge)return[2,{error:a.GitErrors.MERGE_CONFLICT}];i.label=4;case 4:var g,x,y,b;return x=(g={branch:n,message:r}).branch,y=g.message,x=(0,j.getFullBranchName)(x),b=["--quiet","--no-edit","--no-ff","--overwrite-ignore","--commit"],y&&b.push("-m",(0,o.wrapInSingleQuotes)(y)),b.push((0,o.wrapInSingleQuotes)(x)),[4,e("git merge ".concat(b.join(" ")),{serviceMethod:"git-merge"})];case 5:if((m=i.sent()).error!==a.GitErrors.MERGE_CONFLICT)return[3,8];if(u)return[3,7];return[4,e("git merge --abort")];case 6:return i.sent(),[2,m];case 7:return[2,{hasConflicts:!0,error:null}];case 8:if(m.error)return[2,m];return[2,{hasConflicts:!1,error:null}]}})}).apply(this,arguments)}function I(e){return(0,r._)(function(){var t;return(0,i._)(this,function(n){switch(n.label){case 0:return[4,e("git merge --abort",{serviceMethod:"git-merge-abort"})];case 1:if((t=n.sent()).error)return[2,t];return[2,{error:null}]}})})()}function A(e){return(0,r._)(function(){var t;return(0,i._)(this,function(n){switch(n.label){case 0:return[4,e("GIT_EDITOR=: git merge --continue",{serviceMethod:"git-merge-continue"})];case 1:if((t=n.sent()).error)return[2,t];return[2,{error:null}]}})})()}e.s(["gitMerge",()=>R],679258),e.s(["gitMergeAbort",()=>I],177050),e.s(["gitMergeContinue",()=>A],147373);var P=e.i(234961),D="# branch.oid ",O="# branch.head ",N="# branch.upstream ",M="# branch.ab ",L="# stash ",B=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,V=/^([RC])([0-9]+) (.+?)\t(.+)$/,F=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,U=/([RC][0-9]+ .+?)\0(.+?(?:\0|$))/g,G=((t=G||{}).ORDINARY="1",t.RENAMED_OR_COPIED="2",t.UNMERGED="u",t.UNTRACKED="?",t.IGNORED="!",t);function $(e){return(0,r._)(function(){var t,n,r,a,s,l,u,c,d,p,h,m,g,x,y,b,w,_,k,S,C,j;return(0,i._)(this,function(i){switch(i.label){case 0:return t=null,n=null,r=null,a=0,s=[],l=["-z","--porcelain=v2","--branch","--show-stash","--untracked-files=all"],[4,e("git status ".concat(l.join(" ")),{serviceMethod:"git-status"})];case 1:if((u=i.sent()).error)return[2,u];c=u.output.replaceAll(U,"$1	$2"),d=(0,o.splitTrimFilter)(c,"\0"),p=!0,h=!1,m=void 0;try{for(g=d[Symbol.iterator]();!(p=(x=g.next()).done);p=!0)(y=x.value).startsWith("#")?y.startsWith(D)?(b=y.substring(D.length),"(initial)"!==b&&(t=b)):y.startsWith(O)?(w=y.substring(O.length),"(detached)"!==w&&(n=w)):y.startsWith(N)?(_=y.substring(N.length),"(not queried)"!==_&&(r={branch:_,ahead:0,behind:0})):y.startsWith(M)?r&&(S=(k=(0,f._)(y.substring(M.length).split(" ").map(function(e){return Math.abs(parseInt(e,10))}),2))[0],C=k[1],r.ahead=S,r.behind=C):y.startsWith(L)&&(a=parseInt(y.substring(L.length),10)):(j=function(e){var t=e[0];switch(e=e.substring(2),t){case"!":default:return null;case"?":return{type:{index:P.GitStatusChangedFileType.UNTRACKED,worktree:P.GitStatusChangedFileType.UNTRACKED},path:e,staged:!1,unmerged:!1};case"u":var n=e.match(F);if(!n)return null;var r=(0,f._)(n,12),i=r[1],a=r[2],o=r[11],s=H(i),l=H(a),u=s!==P.GitStatusChangedFileType.UNMODIFIED;return{type:{index:s,worktree:l},path:o,staged:u,unmerged:!0};case"1":case"2":var c=e.match(B);if(!c)return null;var d=(0,f._)(c,10),p=d[1],h=d[2],m=d[9],g=H(p),x=H(h),y=g!==P.GitStatusChangedFileType.UNMODIFIED;if("1"===t)return{type:{index:g,worktree:x},path:m,staged:y,unmerged:!1};if("2"===t){var b=m.match(V);if(!b)return null;var w=(0,f._)(b,5),_=w[1],k=w[2],S=w[3],C=w[4];return{type:{index:g,worktree:x},path:S,staged:y,unmerged:!1,source:{type:function(e){switch(e){case"R":default:return P.GitStatusChangedFileType.RENAMED;case"C":return P.GitStatusChangedFileType.COPIED}}(_),score:parseInt(k,10),path:C}}}return null}}(y),null!==j&&s.push(j))}catch(e){h=!0,m=e}finally{try{p||null==g.return||g.return()}finally{if(h)throw m}}return[2,{commit:t,branch:n,upstream:r,stashes:a,changes:s,error:null}]}})})()}function H(e){switch(e){case".":default:return P.GitStatusChangedFileType.UNMODIFIED;case"M":return P.GitStatusChangedFileType.MODIFIED;case"T":return P.GitStatusChangedFileType.TYPE_CHANGED;case"A":return P.GitStatusChangedFileType.ADDED;case"D":return P.GitStatusChangedFileType.DELETED;case"R":return P.GitStatusChangedFileType.RENAMED;case"C":return P.GitStatusChangedFileType.COPIED;case"U":return P.GitStatusChangedFileType.UNMERGED}}function z(e){return(0,r._)(function(e){var t,n,r,s,l,u,c,d,p,h=arguments;return(0,i._)(this,function(i){switch(i.label){case 0:return t=h.length>1&&void 0!==h[1]?h[1]:{},[4,$(e)];case 1:if((n=i.sent()).error)return[2,n];if(!n.branch)return[2,{error:a.GitErrors.HEAD_DETACHED}];if(!n.upstream&&!t.experimental_override_remote||(s=(r=(0,f._)(t.experimental_override_remote?[t.experimental_override_remote.name,t.experimental_override_remote.branch]:(0,o.splitRemoteFromBranch)(n.upstream.branch),2))[0],l=r[1],!s||!l))return[2,{error:a.GitErrors.UPSTREAM_NOT_SET}];if(n.changes.length>0)return[2,{error:a.GitErrors.DIRTY_WORKTREE}];if("FF_ONLY"===(c=null!=(u=t.mode)?u:"FF_ONLY")&&n.upstream&&n.upstream.ahead>0)return[2,{error:a.GitErrors.MERGE_CONFLICT}];switch("FF_ONLY"!==c&&n.upstream&&0===n.upstream.ahead&&(c="FF_ONLY"),d=["--quiet","--no-edit"],c){case"FF_ONLY":d.push("--no-rebase","--ff-only");break;case"MERGE":d.push("--no-rebase","--ff");break;case"REBASE":d.push("--rebase")}return d.push((0,o.wrapInSingleQuotes)(s),(0,o.wrapInSingleQuotes)(l)),[4,e("git pull ".concat(d.join(" ")),{serviceMethod:"git-pull"})];case 2:if((p=i.sent()).error!==a.GitErrors.MERGE_CONFLICT)return[3,8];if(t.allowConflicts)return[2,{hasConflicts:!0,error:null}];switch(c){case"MERGE":return[3,3];case"REBASE":return[3,5]}return[3,7];case 3:return[4,e("git merge --abort",{serviceMethod:"git-pull"})];case 4:case 6:return i.sent(),[3,7];case 5:return[4,e("git rebase --abort",{serviceMethod:"git-pull"})];case 7:return[2,p];case 8:if(p.error)return[2,p];return[2,{hasConflicts:!1,error:null}]}})}).apply(this,arguments)}(n={}).FF_ONLY="FF_ONLY",n.MERGE="MERGE",n.REBASE="REBASE",e.s(["gitPull",()=>z],167310);var W=e.i(705705),q=e.i(633386);function K(e){return(0,r._)(function(e){var t,n,r,s,l,u,c,d,p,h,m,g,x=arguments;return(0,i._)(this,function(i){switch(i.label){case 0:return t=x.length>1&&void 0!==x[1]?x[1]:{},[4,$(e)];case 1:if((n=i.sent()).error)return[2,n];if(!n.branch)return[2,{error:a.GitErrors.HEAD_DETACHED}];if(r=null,s=null,t.publish){if(n.upstream)return[2,{error:a.GitErrors.BRANCH_ALREADY_EXISTS,extras:{branch:n.upstream}}];r=t.publish.remote,s=null!=(l=t.publish.name)?l:n.branch,r=(0,o.removeBranchRefsPath)(r),s=(0,o.removeBranchRefsPath)(s)}else{if(!n.upstream)return[2,{error:a.GitErrors.UPSTREAM_NOT_SET}];if(!t.force&&n.upstream.behind>0)return[2,{error:a.GitErrors.PUSH_REJECTED}];r=(u=(0,f._)((0,o.splitRemoteFromBranch)(n.upstream.branch),2))[0],s=u[1]}if(!r||!s)return[2,{error:a.GitErrors.UPSTREAM_NOT_SET}];if(t.force)return[3,3];return[4,(0,q.default)(e,{remote:r})];case 2:if((c=i.sent()).error)return[2,c];i.label=3;case 3:if(!t.publish)return[3,5];return d="refs/remotes/".concat(r,"/").concat(s),[4,(0,T.default)(e,d)];case 4:if((p=i.sent()).error)return[2,p];if(p.exists&&p.ref.type===W.GitRefType.REMOTE_BRANCH)return[2,{error:a.GitErrors.BRANCH_ALREADY_EXISTS,extras:{branch:s}}];i.label=5;case 5:return h=["--quiet"],t.force&&!t.publish&&h.push("--force-with-lease"),t.publish&&h.push("--set-upstream"),m="refs/heads/".concat(n.branch,":refs/heads/").concat(s),h.push((0,o.wrapInSingleQuotes)(r),(0,o.wrapInSingleQuotes)(m)),[4,e("git push ".concat(h.join(" ")),{serviceMethod:"git-push"})];case 6:if((g=i.sent()).error)return[2,g];return[2,{error:null}]}})}).apply(this,arguments)}function Y(e,t){return(0,r._)(function(){var n;return(0,i._)(this,function(r){switch(r.label){case 0:if(t=(0,o.removeRemoteRefsPath)(t),!(0,j.isValidRemoteName)(t))return[2,{error:a.GitErrors.INVALID_REFERENCE,extras:{remote:t}}];return[4,e("git remote rm ".concat((0,o.wrapInSingleQuotes)(t)),{serviceMethod:"git-remove-remote"})];case 1:if((n=r.sent()).error)return[2,n];return[2,{error:null}]}})})()}e.s(["gitPush",()=>K],271520),e.s(["gitRemoveRemote",()=>Y],125666);var Q=e.i(721281);function X(e,t){return(0,r._)(function(){var n;return(0,i._)(this,function(r){switch(r.label){case 0:var i,a,s,l,u,c;return[4,e((a=(0,o.wrapInSingleQuotes)(t.commit),s=(0,o.wrapInSingleQuotes)(null!=(i=t.message)?i:"Restored to ".concat(a)),l=(0,m._)((0,h._)({},t.trailers),(0,Q._)({},"Replit-Restored-To","${RESOLVED_COMMIT_HASH}")),u=(0,o.formatTrailersForMessage)(l),c="-p HEAD"+(t.extraParent?" -p ".concat((0,o.wrapInSingleQuotes)(t.extraParent)):""),["set -eo pipefail;","RESOLVED_COMMIT_HASH=$(git rev-parse ".concat(a,");"),"COMMIT_HASH=$(git commit-tree ".concat(c," -m ").concat(s," ").concat(u,' "${RESOLVED_COMMIT_HASH}^{tree}");'),'git reset --quiet --hard "$COMMIT_HASH"; echo -n "$COMMIT_HASH";'].join(" ")))];case 1:if((n=r.sent()).error)return[2,n];return[2,{hash:n.output,error:null}]}})})()}function Z(e,t,n){return(0,r._)(function(){var r,a,s,l,u,c,d,f,p,h,m,g,x,y,b;return(0,i._)(this,function(i){switch(i.label){case 0:if("string"==typeof t){if(""===t)return[2,{error:null}];t=[t]}if(!0!==t&&0===t.length)return[2,{error:null}];if(void 0===n)return[3,2];return r=["--quiet","--no-overlay","--worktree","--source=".concat(n),!0===t?".":"-- ".concat(t.join(" "))],[4,e("git --literal-pathspecs restore ".concat(r.join(" ")),{serviceMethod:"git-restore-files"})];case 1:if((a=i.sent()).error)return[2,a];return[2,{error:null}];case 2:return[4,$(e)];case 3:if((s=i.sent()).error)return[2,s];l=[],u=[],c=!0,d=!1,f=void 0;try{for(p=s.changes[Symbol.iterator]();!(c=(h=p.next()).done);c=!0)if(m=h.value,!0===t||t.includes(m.path))switch(m.type.worktree){case P.GitStatusChangedFileType.UNMODIFIED:continue;case P.GitStatusChangedFileType.UNTRACKED:l.push((0,o.wrapInSingleQuotes)(m.path));break;default:u.push((0,o.wrapInSingleQuotes)(m.path))}}catch(e){d=!0,f=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw f}}if(0===l.length&&0===u.length&&void 0===n)return[2,{error:null}];return g=[],l.length&&(x=["--quiet","--force","--",l.join(" ")],g.push("git --literal-pathspecs clean ".concat(x.join(" ")))),u.length&&(y=["--quiet","--no-overlay","--worktree","-- ".concat(u.join(" "))],g.push("git --literal-pathspecs restore ".concat(y.join(" ")))),[4,e(g,{serviceMethod:"git-restore-files"})];case 4:if((b=i.sent()).error)return[2,b];return[2,{error:null}]}})})()}function J(e,t){return(0,r._)(function(e,t){var n,r,a,s;return(0,i._)(this,function(i){switch(i.label){case 0:return n=t.upstream,r=t.branchName,a=["--set-upstream-to",n],r&&a.push((0,o.wrapInSingleQuotes)(r)),[4,e("git branch ".concat(a.join(" ")),{serviceMethod:"git-set-branch-upstream"})];case 1:if((s=i.sent()).error)return[2,s];return[2,{error:null}]}})}).apply(this,arguments)}function ee(e,t){return(0,r._)(function(e,t){var n,r,s;return(0,i._)(this,function(i){switch(i.label){case 0:if(n=t.remote,r=t.url,n=(0,o.removeRemoteRefsPath)(n),!(0,j.isValidRemoteName)(n))return[2,{error:a.GitErrors.INVALID_REFERENCE,extras:{remote:n}}];if(!(0,j.isValidRemoteUrl)(r))return[2,{error:a.GitErrors.INVALID_REFERENCE,extras:{url:r}}];return n=(0,o.wrapInSingleQuotes)(n),r=(0,o.wrapInSingleQuotes)(r),[4,e("git remote set-url ".concat(n," ").concat(r),{serviceMethod:"git-set-remote-url"})];case 1:if((s=i.sent()).error)return[2,s];return[2,{error:null}]}})}).apply(this,arguments)}function et(e,t){return(0,r._)(function(){var n,r;return(0,i._)(this,function(i){switch(i.label){case 0:if(!(n=function(e){if("all"in e)return e.all?["git add -A"]:["git reset -q -- ."];var t=e.add,n=e.reset;if(!(null==t?void 0:t.length)&&!(null==n?void 0:n.length))return null;var r=[];if(t){var i=t.map(o.wrapInSingleQuotes).join(" ");r.push("git --literal-pathspecs add -- ".concat(i))}if(n){var a=n.map(o.wrapInSingleQuotes).join(" ");r.push("git --literal-pathspecs reset -q -- ".concat(a))}return r}(t)))return[2,{error:null}];return[4,e(n,{serviceMethod:"git-stage-files"})];case 1:if((r=i.sent()).error)return[2,r];return[2,{error:null}]}})})()}g.Type.Object({commit:g.Type.String(),extraParent:g.Type.Optional(g.Type.String()),message:g.Type.Optional(g.Type.String()),trailers:g.Type.Optional(g.Type.Record(g.Type.String(),g.Type.String()))}),e.s(["gitRestoreCommit",()=>X],37038),e.s(["gitRestoreFiles",()=>Z],923137),e.s(["gitSetBranchUpstream",()=>J],521047),e.s(["gitSetRemoteURL",()=>ee],319723),g.Type.Union([g.Type.Object({all:g.Type.Boolean()}),g.Type.Object({add:g.Type.Optional(g.Type.Array(g.Type.String())),reset:g.Type.Optional(g.Type.Array(g.Type.String()))})]),e.s(["gitStageFiles",()=>et],299571),e.s(["gitStatus",()=>$],345462);var en=e.i(370451);e.s(["gitSwitchBranch",()=>en.default],579876)},940395,e=>{"use strict";var t=e.i(904851),n=e.i(90659),r=e.i(721281),i=e.i(530658),a=function(){function e(n,i){(0,t._)(this,e),(0,r._)(this,"cache",void 0),(0,r._)(this,"lastInvalidation",void 0),(0,r._)(this,"ttl",void 0),(0,r._)(this,"debounceTime",void 0),this.cache=new Map,this.lastInvalidation=0,this.ttl=n,this.debounceTime=i}return(0,n._)(e,[{key:"has",value:function(e){return this.cache.has(e)}},{key:"get",value:function(e){var t=this.cache.get(e);if(!t)throw Error("No value found for key: ".concat(e));return t.result}},{key:"set",value:function(e,t){var n=this,r=this.cache.get(e);r&&(clearTimeout(r.timeout),this.cache.delete(e));var i={result:t,timeout:setTimeout(function(){return n.cache.delete(e)},this.ttl),pending:!0};t.finally(function(){return i.pending=!1}),this.cache.set(e,i)}},{key:"invalidate",value:function(){if(!(Date.now()-this.lastInvalidation<this.debounceTime)){var e=new Map,t=!0,n=!1,r=void 0;try{for(var a,o=this.cache[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=(0,i._)(a.value,2),l=s[0],u=s[1];u.pending?e.set(l,u):clearTimeout(u.timeout)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}this.cache=e,this.lastInvalidation=Date.now()}}},{key:"clear",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.cache.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;clearTimeout(a.timeout)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.cache.clear(),this.lastInvalidation=0}}]),e}();e.s(["default",()=>a])},354507,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(346715),i=e.i(817556),a=e.i(830675),o=e.i(223808),s=e.i(556171),l=e.i(760890),u=e.i(480539),c=e.i(387539),d=e.i(118711),f=e.i(861683),p=e.i(791675),h=e.i(200437),m=e.i(997229),g=e.i(221856),x=e.i(879737),y=e.i(846849),b=e.i(126416),w=e.i(452814),_=e.i(878907),k=e.i(809713),S=e.i(428169),C=e.i(351892),j=e.i(410347),T=e.i(349472),E=e.i(401580),R=e.i(766787),I=e.i(685804),A=e.i(679495),P=e.i(679258),D=e.i(177050),O=e.i(147373),N=e.i(167310),M=e.i(271520),L=e.i(125666),B=e.i(37038),V=e.i(923137),F=e.i(521047),U=e.i(319723),G=e.i(299571),$=e.i(345462),H=e.i(579876),z=e.i(866408);e.i(792e3);var W=e.i(8808),q=e.i(836102),K=e.i(904851),Y=e.i(90659),Q=e.i(721281),X=e.i(825118),Z=e.i(968263),J=e.i(826771),ee=e.i(664152),et=e.i(940395),en=e.i(322606),er=function(){function e(n){var r=this,o=n.container,s=n.getEnv,l=n.awaitPromise;(0,K._)(this,e),(0,Q._)(this,"queue",void 0),(0,Q._)(this,"cache",void 0),(0,Q._)(this,"running",void 0),this.cache=new et.default(3e4,2e3),this.running=(0,J.observableValue)(!1),this.queue=[],o.openChannel({service:"exec"},function(e){var n=e.channel,o=function(e,r){return(0,t._)(function(){var o,u,c;return(0,i._)(this,function(d){switch(d.label){case 0:if(0===e.length)throw Error("Expected at least one command");if(!l)return[3,2];return[4,l];case 1:d.sent(),d.label=2;case 2:var f;return o=Date.now(),[4,(u=["bash","-c",Array.isArray(e)?e.join(" && "):e],f=s(),(0,t._)(function(){var e,t,o,s,l,c,d;return(0,i._)(this,function(i){switch(i.label){case 0:if("open"!==n.status)return[2,{output:"JS Error\nchannel closed before command was run",error:X.GitErrors.CHANNEL_CLOSED}];i.label=1;case 1:return i.trys.push([1,3,,4]),e="",t=n.onCommand(function(t){null!==t.output&&void 0!==t.output&&(e+=t.output)}),o=void 0,(s=Promise.race([new Promise(function(e){return o=setTimeout(e,9e4)}),n.request({exec:{env:f,args:u,noUserEnv:!0}})])).finally(function(){t(),clearTimeout(o)}),[4,s];case 2:if(void 0===(l=i.sent()))return ee.logger.error("Git request timed out.",{appService:"git",command:u,gitEnv:JSON.stringify(f),TIMEOUT:9e4,verbatim:null==r?void 0:r.verbatim,serviceMethod:null==r?void 0:r.serviceMethod,extraEnv:null==r?void 0:r.env}),[2,{output:e,error:X.GitErrors.TIMEOUT}];if(!l.ok&&l.channelClosed)return[2,{output:"JS Error\nchannel closed during command execution",error:X.GitErrors.CHANNEL_CLOSED}];if(l.error||!l.ok)return[2,{output:c="".concat(l.error,"\n").concat(e),error:(0,X.gitErrorFromOutput)(c)}];return[2,{output:e,error:null}];case 3:return d=i.sent(),a.withScope(function(e){e.setTag("service","git"),e.setExtra("command",u),e.setExtra("env",f),r&&e.setExtra("options",r),a.captureException(d)}),[2,{output:"JS Error\n".concat(String(d)),error:X.GitErrors.UNKNOWN_NOT_GIT}];case 4:return[2]}})})())];case 3:if(c=d.sent(),(0,en.emitGitDebugEvent)(e,c,!1,o),c.error)return[2,{error:c.error}];return[2,{output:(null==r?void 0:r.verbatim)?c.output:c.output.trim(),error:null}]}})})()},u=function(e,t){if(0===e.length)throw Error("Expected at least one command");var n=Array.isArray(e)?e.join(" && "):e;if(r.cache.has(n)){var i=r.cache.get(n);return i.then(function(t){(0,en.emitGitDebugEvent)(e,t,!0)}),i}var a=o(n,t);return r.cache.set(n,a),a},c=function(e,t){return r.cache.clear(),o(e,t)},d=function(){return(0,t._)(function(){var e;return(0,i._)(this,function(t){switch(t.label){case 0:if(!(this.queue.length>0)||"open"!==n.status)return[3,7];if(!(e=this.queue.shift()))return[3,6];if("read"!==e.type)return[3,2];return[4,e.fn(u)];case 1:case 3:return t.sent(),[3,6];case 2:if("write"!==e.type)return[3,4];return[4,e.fn(c)];case 4:return[4,e.fn(o)];case 5:t.sent(),t.label=6;case 6:return[3,0];case 7:return 0===this.queue.length&&this.running.set(!1),[2]}})}).call(r)};return r.running.current&&d(),r.running.subscribe(function(e){e&&d()})})}return(0,Y._)(e,[{key:"add",value:function(e,n){var r=(0,Z.default)();return this.queue.push({type:n,fn:function(n){return(0,t._)(function(){var t;return(0,i._)(this,function(i){switch(i.label){case 0:return[4,e(n)];case 1:return t=i.sent(),r.resolve(t),[2]}})})()}}),this.running.current||this.running.set(!0),r.promise}},{key:"wrap",value:function(e,t){var n=this;if("function"!=typeof e)throw Error("Expected a function");return function(){for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n.add(function(t){return e.apply(void 0,[t].concat((0,r._)(a)))},t)}}}]),e}(),ei=e.i(240913),ea=e.i(903381),eo=".git";function es(e){var K,Y=e.container,Q=e.fs,X=e.provideProfiles,Z=void 0===X?q.default:X,J=(0,z.default)();J.setMaxListeners(1/0);var ee=(0,s.createGitServiceEnvironmentVariables)(),et=!1,en=new Map,es=null,el=Y.getContext(),eu=function(e){return(0,t._)(function(){var t,r;return(0,i._)(this,function(i){switch(i.label){case 0:return[4,Z({defaultUsername:null==el||null==(t=el.currentUser)?void 0:t.username,defaultUserId:null==el||null==(r=el.currentUser)?void 0:r.id,onProfiles:function(t){var r,i=!0,o=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=(0,n._)(l.value,2),d=c[0],f=c[1];en.set(d,f),J.emit(p.GitEvent.NEW_PROFILE)}}catch(e){o=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}t.has(p.GitProfileProvider.GITHUB)||en.delete(p.GitProfileProvider.GITHUB),t.has(p.GitProfileProvider.GITLAB)||en.delete(p.GitProfileProvider.GITLAB),t.has(p.GitProfileProvider.BITBUCKET)||en.delete(p.GitProfileProvider.BITBUCKET);var h=en.get(p.GitProfileProvider.REPLIT_DEFAULT),m=en.get(p.GitProfileProvider.GITHUB),g=en.get(p.GitProfileProvider.BITBUCKET),x=en.get(p.GitProfileProvider.GITLAB),y=null!=(r=null!=m?m:g)?r:x;if(es&&!e&&(e=es.provider),e===p.GitProfileProvider.GITHUB&&m)es=m;else if(e===p.GitProfileProvider.BITBUCKET&&g)es=g;else if(e===p.GitProfileProvider.GITLAB&&x)es=x;else if(e===p.GitProfileProvider.REPLIT_DEFAULT&&h)es=h;else if(y)es=y;else{if(!h)return void a.captureException(Error("No default profile found"));es=h}J.emit(p.GitEvent.CHANGED_PROFILE)}})];case 1:return[2,i.sent()]}})})()},ec=new er({container:Y,getEnv:function(){return ee},awaitPromise:eu()});J.on(p.GitEvent.FS_CHANGE,function(){return ec.cache.invalidate()}),J.on(p.GitEvent.FORCED_REFRESH,function(){return ec.cache.invalidate()}),J.on(p.GitEvent.NEW_PROFILE,function(){return ec.cache.invalidate()}),J.on(p.GitEvent.CHANGED_PROFILE,function(){return ec.cache.invalidate()});var ed=function(){var e,t=Y.getContext(),n=null==t||null==(e=t.currentUser)?void 0:e.id;if(null!=n){var r="[init]\ndefaultBranch = main\n[user]\n";""!==ee.GIT_AUTHOR_EMAIL&&(r+="email = ".concat(ee.GIT_AUTHOR_EMAIL.replace(/'/g,"'\"'\"'"),"\n")),""!==ee.GIT_AUTHOR_NAME&&(r+="name = ".concat(ee.GIT_AUTHOR_NAME.replace(/'/g,"'\"'\"'"),"\n"));var i="/run/replit/user/".concat(n,"/.config/git");null!=n&&Y.exec("bash","-c","tmpf=$(mktemp); mkdir -p ".concat(i," && echo '").concat(r,'\' > "$tmpf" && mv "$tmpf" ').concat("".concat(i,"/config")))}};return Y.onConnectionStateChanged(function(e){e===W.ConnectionState.CONNECTED&&ed()}),J.on(p.GitEvent.CHANGED_PROFILE,function(){null!=es&&(ee=(0,s.createGitServiceEnvironmentVariables)({session:K,author:{username:es.name,email:es.email}}),ed())}),{getEnv:function(){return ee},setSession:function(e){K=e,ee=(0,s.createGitServiceEnvironmentVariables)({session:K,author:es?{username:es.name,email:es.email}:void 0}),J.emit(p.GitEvent.FORCED_REFRESH)},getProfiles:function(){return Array.from(en.values())},hasProfile:function(e){return en.has(e)},getProfile:function(e){var t=en.get(e);if(!t)throw Error("Fetched a profile that has not been setup!");return t},addProfile:function(e){en.set(e.provider,e),J.emit(p.GitEvent.NEW_PROFILE)},getCurrentProfile:function(){return es},setCurrentProfile:function(e){var t=en.get(e);if(!t)throw Error("Can't set a non-existent profile!");es=t,ee=(0,s.createGitServiceEnvironmentVariables)({session:K,author:{username:t.name,email:t.email}}),J.emit(p.GitEvent.CHANGED_PROFILE)},onProfileAdded:function(e){var t=function(){e(Array.from(en.values()))};return J.on(p.GitEvent.NEW_PROFILE,t),function(){J.off(p.GitEvent.NEW_PROFILE,t)}},onCurrentProfileChanged:function(e){var t=function(){e(es)};return J.on(p.GitEvent.CHANGED_PROFILE,t),function(){J.off(p.GitEvent.CHANGED_PROFILE,t)}},refreshProfiles:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preferredProvider;return eu(e)},onRefresh:function(e){if(!et){var n,a,s,l,u,c,d,f,h,m,g,x;n=!1,a=!1,s=function(){return J.emit(p.GitEvent.FS_CHANGE)},c=(l={wait:1e3,cooldown:5e3,maxWait:5e3}).wait,d=l.cooldown,f=l.maxWait,h=null,m=!1,g=(0,o.default)(function(e){return h=setTimeout(function(){return h=null},d),m=!1,u=s.apply(void 0,(0,r._)(e))},c,{maxWait:f}),(x=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return null!==h?u:(m||(m=!0),g(t))}).cancel=function(){null!==h?(clearTimeout(h),h=null):(g.cancel(),m=!1)},x.flush=function(){return null!==h?(clearTimeout(h),h=null,u):g.flush()},x.isPending=function(){return m},x.isInCooldown=function(){return null!==h},(0,t._)(function(){var e;return(0,i._)(this,function(t){return e=!0,Q.watchDir(ei.ROOT_PATH,{onChange:function(t){!n&&t.find(function(e){return e.filename===eo&&e.type===ea.FileType.Directory})&&(function(){if(!n){n=!0;var e=!0;Q.watchDir(eo,{onChange:function(){e?e=!1:x()},onMoveOrDelete:function(){n=!1,x()},onError:function(e,t){n=!1,RegExp(".+permission denied","im").test(e.message)||Y.unrecoverableError(e,t)}})}}(),e||x()),e&&(e=!1)},onError:function(e,t){return Y.unrecoverableError(e,t)}}),[2]})})(),Q.onStatusChange(function(e){n&&(e===ea.FsStatus.Syncing&&x.isInCooldown()?a=!0:e===ea.FsStatus.Clean&&(a||x(),a=!1))}),et=!0}var y=function(){return e(p.GitEvent.FS_CHANGE)},b=function(){return e(p.GitEvent.FORCED_REFRESH)},w=function(){return e(p.GitEvent.NEW_PROFILE)},_=function(){return e(p.GitEvent.CHANGED_PROFILE)};return J.on(p.GitEvent.FS_CHANGE,y),J.on(p.GitEvent.FORCED_REFRESH,b),J.on(p.GitEvent.NEW_PROFILE,w),J.on(p.GitEvent.CHANGED_PROFILE,_),function(){J.off(p.GitEvent.FS_CHANGE,y),J.off(p.GitEvent.FORCED_REFRESH,b),J.off(p.GitEvent.NEW_PROFILE,w),J.off(p.GitEvent.CHANGED_PROFILE,_)}},forceRefresh:function(){J.emit(p.GitEvent.FORCED_REFRESH)},isBusy:function(){return ec.running.current},onBusyChange:function(e){var t=!1,n=(0,o.default)(e,200);return ec.running.subscribe(function(e){t&&!e?(n(!1),t=!1):!t&&e&&(n(!0),t=!0)})},init:ec.wrap(j.gitInit,"write"),isInitialized:ec.wrap(T.gitIsInitialized,"read"),lsFiles:ec.wrap(A.gitLsFiles,"read"),status:ec.wrap($.gitStatus,"read"),log:ec.wrap(I.gitLog,"read"),findDefaultBranches:ec.wrap(m.gitFindDefaultBranches,"read"),listBranches:ec.wrap(R.gitListBranches,"read"),setBranchUpstream:ec.wrap(F.gitSetBranchUpstream,"write"),stageFiles:ec.wrap(G.gitStageFiles,"write"),commit:ec.wrap(d.gitCommit,"write"),switchBranch:ec.wrap(H.gitSwitchBranch,"write"),branchExists:ec.wrap(u.gitBranchExists,"read"),createBranch:ec.wrap(f.gitCreateBranch,"write"),getRemotes:ec.wrap(S.gitGetRemotes,"read"),fetch:ec.wrap(h.gitFetch,"write"),canMergeBranches:ec.wrap(c.gitCanMergeBranches,"read"),pull:ec.wrap(N.gitPull,"write"),push:ec.wrap(M.gitPush,"write"),getRepositoryState:ec.wrap(C.gitGetRepositoryState,"read"),getFileContents:ec.wrap(w.gitGetFileContents,"read"),addRemote:ec.wrap(l.gitAddRemote,"write"),removeRemote:ec.wrap(L.gitRemoveRemote,"write"),setRemoteURL:ec.wrap(U.gitSetRemoteURL,"write"),getBranch:ec.wrap(g.gitGetBranch,"read"),restoreFiles:ec.wrap(V.gitRestoreFiles,"write"),lastFetched:ec.wrap(E.gitLastFetched,"read"),merge:ec.wrap(P.gitMerge,"write"),mergeContinue:ec.wrap(O.gitMergeContinue,"write"),mergeAbort:ec.wrap(D.gitMergeAbort,"write"),getConflictingFiles:ec.wrap(b.gitGetConflictingFiles,"read"),getMergingRefs:ec.wrap(k.gitGetMergingRefs,"read"),getFilesForCommit:ec.wrap(_.gitGetFilesForCommit,"read"),getCommit:ec.wrap(y.gitGetCommit,"read"),restoreCommit:ec.wrap(B.gitRestoreCommit,"write"),escapeHatchGitExecRead:ec.wrap(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(void 0,(0,r._)(n))},"read"),escapeHatchGitExecWrite:ec.wrap(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(void 0,(0,r._)(n))},"write"),getChangesBetweenCommits:ec.wrap(x.gitGetChangesBetweenCommits,"read")}}e.s(["default",()=>es],354507)},752394,e=>{"use strict";var t=e.i(297083),n=e.i(167626),r=e.i(817556),i=e.i(862927),a=e.i(569384);function o(){var e=(0,a._)(["\n  query GitAuth {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      gitHubInfoV2 {\n        accessToken\n      }\n      bitbucketInfo {\n        accessToken\n      }\n    }\n  }\n"]);return o=function(){return e},e}var s=(0,e.i(973245).gql)(o()),l=e.i(960933),u=l.Type.Object({id:l.Type.String(),user_id:l.Type.Number(),ssh_hostname:l.Type.String(),token:l.Type.String()}),c=e.i(968323),d=e.i(173738),f=e.i(664152),p=e.i(344188),h=["http:","https:","vscode:"];function m(e){return(0,t._)(function(e){var t,n;return(0,r._)(this,function(r){switch(r.label){case 0:return t=e.replId,[4,(0,c.tryCatchAsync)(function(){return(0,p.postJson)("/data/repls/".concat(t,"/get_ssh_token"))})];case 1:if((n=r.sent()).error)return[2,{type:"error",message:n.error.toString()}];if(!i.Value.Check(u,n.value))return[2,{type:"error",message:"Invalid JSON"}];return[2,{type:"success",data:n.value}]}})}).apply(this,arguments)}function g(){return(0,t._)(function(){var e;return(0,r._)(this,function(t){switch(t.label){case 0:if(!d.apolloClient)throw Error("Expected apollo");return[4,d.apolloClient.query({query:s})];case 1:if(!(null==(e=t.sent().data)?void 0:e.currentUser))throw Error("Expected current user");return[2,e.currentUser]}})})()}function x(){(0,n._)(document.activeElement,HTMLElement)&&document.activeElement.blur()}function y(e){var n=e.container,i=e.fs,a=e.openMultipleFiles,o=e.openMultipleURLs,s=e.enableReplspaceSshTokenPassthrough,l=new Set,u=!1,c=null;return n.openChannel({service:"open",name:"open"},function(e){e.channel.onCommand(function(e){if("replspaceApiOpenMultipleFiles"===e.body){if(!e.replspaceApiOpenMultipleFiles)throw Error("Expected replspaceApiOpenMultipleFiles");var t=e.replspaceApiOpenMultipleFiles,n=t.files,r=t.urls.flatMap(function(e){var t;try{t=new URL(e)}catch(e){return[]}return h.includes(t.protocol)?[t]:[]});a&&n.length>0&&(x(),a({paths:n})),o&&r.length>0&&(x(),o({urls:r.map(function(e){return e.toString()})}))}})}),n.openChannel({service:"git",name:"git"},function(e){var n=e.channel;return n.onCommand(function(e){return(0,t._)(function(){var t,o,s,d,p,h,m,y,b,w,_,k,S,C,j,T,E,R,I,A,P,D,O,N,M,L,B;return(0,r._)(this,function(r){switch(r.label){case 0:switch(e.body){case"replspaceApiOpenFile":return[3,1];case"replspaceApiGetGitHubToken":return[3,7];case"replspaceApiGetBitbucketToken":return[3,9]}return[3,11];case 1:if(!e.replspaceApiOpenFile)throw Error("Expected replspaceApiOpenFile");if(o=(t=e.replspaceApiOpenFile).file,s=t.waitForClose,d=t.nonce,a)return[3,3];if(!o.endsWith(".git/COMMIT_EDITMSG"))return s&&n.send({replspaceApiCloseFile:{file:o,nonce:d}}),window.alert("tried to open ".concat(o," but failed")),[2];return p=window.prompt("Enter a commit message"),[4,i.writeFile(o,null!=p?p:"")];case 2:if(r.sent(),!s)return[2];return[3,5];case 3:if(x(),a({paths:[o]}),!s||!c)return[2];return[4,c(o)];case 4:r.sent(),r.label=5;case 5:return[4,i.flush()];case 6:if(r.sent(),"open"!==n.status)return[2];return n.send({replspaceApiCloseFile:{file:o,nonce:d}}),[2];case 7:if(!e.replspaceApiGetGitHubToken)throw Error("Expected replspaceApiGetGitHubToken");return h=function(){var t;"open"===n.status&&n.send({replspaceApiGitHubToken:{token:"",nonce:null==(t=e.replspaceApiGetGitHubToken)?void 0:t.nonce}})},[4,g()];case 8:if(null==(m=r.sent()).gitHubInfoV2&&null==m.gitHubInfo)return h(),[2];if(!l.size)return h(),f.logger.error("Got a replspaceApiGetGitHubToken command but no confirm listener is set up"),[2];if(y=function(){var t,r,i,a;"open"===n.status&&n.send({replspaceApiGitHubToken:{token:null!=(a=null==(t=m.gitHubInfoV2)?void 0:t.accessToken)?a:null==(r=m.gitHubInfo)?void 0:r.accessToken,nonce:null==(i=e.replspaceApiGetGitHubToken)?void 0:i.nonce}})},u)return y(),[2];b=!1,w=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=l[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)(null)}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},_=!0,k=!1,S=void 0;try{for(C=l[Symbol.iterator]();!(_=(j=C.next()).done)&&(T=j.value,!b);_=!0)T(function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!b){if(b=!0,!e){h(),w();return}t&&(u=e),y(),w()}})}catch(e){k=!0,S=e}finally{try{_||null==C.return||C.return()}finally{if(k)throw S}}return[2];case 9:if(!e.replspaceApiGetBitbucketToken)throw Error("Expected replspaceApiGetBitbucketToken");return E=function(){var t;"open"===n.status&&n.send({replspaceApiBitbucketToken:{token:"",nonce:null==(t=e.replspaceApiGetBitbucketToken)?void 0:t.nonce}})},[4,g()];case 10:if(null==(R=r.sent()).bitbucketInfo)return E(),[2];if(!l.size)return E(),f.logger.error("Got a replspaceApiGetBitbucketToken command but no confirm listener is set up"),[2];if(I=function(){var t,r;"open"===n.status&&n.send({replspaceApiBitbucketToken:{token:null==(t=R.bitbucketInfo)?void 0:t.accessToken,nonce:null==(r=e.replspaceApiGetBitbucketToken)?void 0:r.nonce}})},u)return I(),[2];A=!1,P=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=l[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)(null)}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},D=!0,O=!1,N=void 0;try{for(M=l[Symbol.iterator]();!(D=(L=M.next()).done)&&(B=L.value,!A);D=!0)B(function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!A){if(A=!0,!e){E(),P();return}t&&(u=e),I(),P()}})}catch(e){O=!0,N=e}finally{try{D||null==M.return||M.return()}finally{if(O)throw N}}r.label=11;case 11:return[2]}})})()}),function(){}}),void 0!==s&&s&&n.openChannel({service:"sshtoken",name:"sshtoken"},function(e){var n=e.channel;n.onCommand(function(e){return(0,t._)(function(){var t,i,a,o,s,l;return(0,r._)(this,function(r){switch(r.label){case 0:if(!e.replspaceApiSSHTokenGetRequest)throw Error("Expected replspaceApiSSHTokenGetRequest");return i=(t=e.replspaceApiSSHTokenGetRequest).nonce,a=t.replid,o=function(e){"open"===n.status&&n.send({replspaceApiSSHTokenGetResponse:e})},s=function(){o({token:"",nonce:i})},[4,m({replId:a})];case 1:if(l=r.sent(),"open"!==n.status)return[2];if("error"===l.type)return s(),f.logger.error(l.message),[2];return o({token:l.data.token,nonce:i,sshHostname:l.data.ssh_hostname}),[2]}})})()})}),{onConfirmSendToken:function(e){var t=function(t){return e(t)};return l.add(t),function(){l.delete(t)}},setWaitForFileClose:function(e){c=e}}}e.s(["default",()=>y,"fetchReplSshToken",()=>m],752394)},367017,124116,349602,e=>{"use strict";var t,n=e.i(276385),r=e.i(960933),i=e.i(862927),a=e.i(697851),o=e.i(389959),s=e.i(932287),l=e.i(269848),u=e.i(222342),c=e.i(207237),d=e.i(537548),f=e.i(86159),p=e.i(883117),h=e.i(878420),m=e.i(64386),g=e.i(530658),x=e.i(825118),y=e.i(10581),b=e.i(682205),w=e.i(733405),_=e.i(13362),k=e.i(252204),S=e.i(820228),C=e.i(541792),j=e.i(416298),T=e.i(97349),E=e.i(538667),R=e.i(183187),I=e.i(986091),A=e.i(301736),P=e.i(773422),D=e.i(297083),O=e.i(817556),N=e.i(416746),M=e.i(257982),L=e.i(611361),B=e.i(830675),V=e.i(25082),F=e.i(467612),U=e.i(629712),G=e.i(792e3),$=e.i(170784),H=e.i(354507),z=e.i(752394),W=e.i(529810),q=e.i(875259),K=e.i(446530),Y=e.i(613355),Q=e.i(428596),X=e.i(140487),Z=e.i(127227),J=e.i(818503),ee=e.i(396776),et=e.i(960178),en=e.i(751273),er=e.i(625484),ei=(0,K.cssRecord)({infoIcon:[Y.rcss.color.foregroundDimmer,{marginTop:3}],infoMessage:{flex:1}}),ea=((t=ea||{}).CannotMerge="CannotMerge",t.NothingToMerge="NothingToMerge",t.OnlyUncommittedChanges="OnlyUncommittedChanges",t.UncommittedAndCommittedChanges="UncommittedAndCommittedChanges",t.OnlyCommittedChanges="OnlyCommittedChanges",t),eo=function(){var e,t,n=(0,E.useProjectGitState)(),r=n.commits,i=n.state;if((null==i?void 0:i.error)!=null||!(null==i?void 0:i.type)||i.type!==y.GitRepositoryStateType.NORMAL||(null==i?void 0:i.state)==null||null!=r.error||!(null==r?void 0:r.ours))return"CannotMerge";var a=i.state===y.GitRepositoryState.DIRTY_WORKTREE||i.state===y.GitRepositoryState.DIRTY_INDEX,o=!!((null==r||null==(e=r.ours)?void 0:e.length)&&(null==r||null==(t=r.ours)?void 0:t.length)>0);return a&&!o?"OnlyUncommittedChanges":a&&o?"UncommittedAndCommittedChanges":!a&&o?"OnlyCommittedChanges":"NothingToMerge"};function es(e){var t,r,i,a,s,c,d,f,p,h,m,b,w,_,k,S,C,E,R,I,A,P=e.sourceRepl,K=e.destinationRepl,Y=e.projectId,ea=e.mainReplId,es=e.orgId,el=e.currentUser,eu=(0,u.default)().showError,ec=(0,Q.useIdSeed)()("includeUncommittedChanges"),ed=(0,g._)((0,o.useState)(!1),2),ef=ed[0],ep=ed[1],eh=(0,g._)((r=(t={destinationReplId:K.id,sourceReplId:P.id,onSuccess:function(e){var t=e.didAutoCommit;(0,T.trackProjectsFeatureUsed)({action:"merge",orgId:es,projectId:Y,autoCommitEnabled:t,sourceReplType:P.id===ea?"mainRepl":"devRepl",destinationReplType:K.id===ea?"mainRepl":"devRepl"})}}).sourceReplId,i=t.destinationReplId,a=t.onSuccess,s=(0,W.default)().git,c=(0,o.useRef)(null),f=(d=(0,g._)((0,o.useState)(!1),2))[0],p=d[1],m=(h=(0,u.default)()).showError,b=h.showConfirm,w=(0,V.usePushToRemoteReplQuery)({variables:{id:i}}),_=(0,o.useCallback)(function(){if(!w.data)return null;var e=w.data,t=e.getRepl,n=e.currentUser;if(!n||"Repl"!==t.__typename)return null;if(c.current)if(c.current.replId===t.id&&c.current.currentUserId===n.id)return c.current;else c.current.container.close();var r=(0,G.default)({onUnrecoverableError:function(e){B.captureException(e,{tags:{projects:!0},extra:{replid:t.id}})}});r.connect({context:(0,$.createConnectContext)({repl:t,currentUser:n}),getMinimumRetryDelayMs:function(){return 0}});var i=(0,U.default)({container:r}),a=(0,H.default)({container:r,fs:i}),o=(0,z.default)({container:r,fs:i,enableReplspaceSshTokenPassthrough:!0});return c.current={container:r,git:a,fs:i,replspace:o,replId:t.id,currentUserId:n.id},c.current},[w.data]),(0,o.useEffect)(function(){if(c.current){var e=c.current.container;return function(){e.close()}}},[]),[(0,o.useCallback)(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoCommit:!1}).autoCommit;return(0,D._)(function(){var t,n,i,o,l,u,c,d,f;return(0,O._)(this,function(h){switch(h.label){case 0:if(null==(n=(null==(t=w.data)?void 0:t.getRepl.__typename)==="Repl"?w.data.getRepl:null))return m("Please try again."),[2];i=n.title,p(!0),h.label=1;case 1:if(h.trys.push([1,7,8,9]),!e)return[3,3];return[4,function(e){return(0,D._)(function(e){var t,n,r;return(0,O._)(this,function(i){switch(i.label){case 0:return t=e.git,n=e.commitMessage,[4,t.stageFiles({all:!0})];case 1:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];return[4,t.getRepositoryState()];case 2:if((r=i.sent()).error)return[2,{success:!1,error:"Could not commit your changes"}];if(r.state!==y.GitRepositoryState.DIRTY_INDEX)return[3,4];return[4,t.commit({message:n})];case 3:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];i.label=4;case 4:return[2,{success:!0,error:null}]}})}).apply(this,arguments)}({git:s,commitMessage:e.message})];case 2:if((o=h.sent()).error)return m(o.error),[2];h.label=3;case 3:if(!(l=_()))return m('Could not merge: the "'.concat(i,'" Repl could not be reached, please try again.')),[2];return[4,(u=l.git).getRepositoryState()];case 4:if((c=h.sent()).error)return m('Could not merge: the "'.concat(i,"\" Repl's git state could not be read, please try again.")),[2];if(c.state!==y.GitRepositoryState.CLEAN)return m('Could not merge: the "'.concat(i,'" Repl has uncommitted changes, please open that repl and commit or reset any changes.')),[2];return[4,(0,q.setupRemoteForReplId)({git:u,replId:r})];case 5:if(h.sent().error)return m('Could not merge: the "'.concat(i,'" Repl could not be reached, please try again.')),[2];return[4,u.pull({experimental_override_remote:{name:(0,q.remoteNameForRepl)(r),branch:"main"},allowConflicts:!1,mode:F.GitPullMode.REBASE})];case 6:if((d=h.sent()).error){switch(d.error){case x.GitErrors.MERGE_CONFLICT:f="this would result in a merge conflict. Get the latest changes in your repl, then try again.";break;case x.GitErrors.DIRTY_WORKTREE:f='the "'.concat(i,'" Repl has uncommitted changes, please open that repl and commit or reset any changes.');break;case x.GitErrors.HEAD_DETACHED:f='the "'.concat(i,'" Repl is on an unknown branch, please open that repl and checkout a branch before merging.');break;default:f='please check the "'.concat(i,'" Repl or try again.')}return m("Could not merge: ".concat(f)),[2]}return b("Changes pushed!"),s.forceRefresh(),null==a||a({didAutoCommit:!!e}),[3,9];case 7:return h.sent(),m("Could not merge: something went wrong, please try again."),[3,9];case 8:return p(!1),[7];case 9:return[2]}})})()},[w,_,r,m,b,s,a]),{loading:f}]),2),em=eh[0],eg=eh[1].loading,ev=(C=(k={replId:K.id,orgId:es,projectId:Y,currentUserId:el.id}).replId,E=k.orgId,R=k.projectId,I=k.currentUserId,Object.values(null!=(S=(0,L.useProjectPresenceUsersByRepl)({orgId:E,projectId:R})[C])?S:{}).filter(function(e){return e.id!==I})),ex=eo(),ey="NothingToMerge"===ex||"CannotMerge"===ex||eg,eb="Automatic commit for ".concat(P.title);switch(ex){case"NothingToMerge":A="You do not have any commits to merge in yet";break;case"CannotMerge":A="You cannot merge right now";break;case"OnlyUncommittedChanges":case"UncommittedAndCommittedChanges":case"OnlyCommittedChanges":A="Your changes will be pulled into ".concat(K.title);break;default:(0,M.default)(ex)}return(0,n.jsxs)(er.View,{gap:8,children:[ev.length>0?(0,n.jsx)(ee.StatusBanner,{icon:(0,n.jsx)(j.default,{}),colorway:"orange",text:"".concat(K.title," has active coders (@").concat(ev[0].username).concat(ev.length>1?" and others":"","). Merging may disrupt ongoing work.")}):null,(0,n.jsx)(en.Tooltip,{tooltip:A,isDisabled:null===A,placement:"top",maxWidth:300,children:(0,n.jsx)(X.Button,{colorway:"primary",text:"Merge changes into ".concat(K.title),disabled:ey,onClick:function(){return(0,D._)(function(){return(0,O._)(this,function(e){switch(e.label){case 0:switch(ex){case"NothingToMerge":return[3,1];case"CannotMerge":return[3,2];case"OnlyCommittedChanges":return[3,3];case"UncommittedAndCommittedChanges":return[3,5];case"OnlyUncommittedChanges":return[3,7]}return[3,9];case 1:return eu("No changes to merge"),[3,10];case 2:return eu("You cannot merge right now"),[3,10];case 3:return[4,em({autoCommit:!1})];case 4:case 6:case 8:return e.sent(),[3,10];case 5:return[4,em({autoCommit:!!ef&&{message:eb}})];case 7:return[4,em({autoCommit:{message:eb}})];case 9:(0,M.default)(ex),e.label=10;case 10:return[2]}})})()},loading:eg,iconLeft:eg?(0,n.jsx)(l.default,{}):void 0})}),"OnlyUncommittedChanges"===ex?(0,n.jsxs)(er.View,{row:!0,gap:6,children:[(0,n.jsx)(N.default,{css:ei.infoIcon}),(0,n.jsx)(et.Text,{color:"dimmer",css:ei.infoMessage,children:"All changes are uncommitted, so they will be automatically committed when you merge"})]}):null,"UncommittedAndCommittedChanges"===ex?(0,n.jsxs)(er.View,{row:!0,gap:6,children:[(0,n.jsx)(Z.Checkbox,{id:ec,checked:ef,onChange:ep}),(0,n.jsx)(J.Label,{htmlFor:ec,children:(0,n.jsx)(et.Text,{color:"dimmer",children:"Include uncommitted changes in merge"})}),(0,n.jsx)(en.Tooltip,{tooltip:"Any changes you have not committed will be automatically committed and merged",delay:"default",children:(0,n.jsx)(N.default,{css:ei.infoIcon})})]}):null]})}var el=e.i(541793),eu=e.i(569384),ec=e.i(973245),ed=e.i(304277);function ef(){var e=(0,eu._)(["\n  query ProjectCommitGraphRemoteRepl($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return ef=function(){return e},e}e.i(566901);var ep={},eh=(0,ec.gql)(ef()),em=e.i(46654),eg=e.i(691490),ev=e.i(730792),ex=e.i(607278),ey=(0,K.cssRecord)({input:[Y.rcss.py(0),Y.rcss.minHeight(24),Y.rcss.pl(12)]}),eb=function(){var e=(0,W.default)().git;return(0,o.useCallback)(function(t){return(0,D._)(function(){return(0,O._)(this,function(n){switch(n.label){case 0:return[4,e.stageFiles({all:!0})];case 1:return n.sent(),[4,e.commit({message:t,allowEmpty:!1})];case 2:return n.sent(),e.forceRefresh(),[2]}})})()},[e])},ew=function(e){var t=e.onDone,r=(0,g._)((0,o.useState)(""),2),i=r[0],a=r[1],s=eb(),l=(0,g._)((0,o.useState)(!1),2),u=l[0],c=l[1];return(0,n.jsx)(ex.Input,{autoFocus:!0,autoCapitalize:"off","aria-label":"Commit message",placeholder:"cmd+enter to commit",onKeyDown:function(e){return(0,D._)(function(){return(0,O._)(this,function(n){switch(n.label){case 0:if(!("Enter"===e.key&&e.metaKey))return[3,2];return e.stopPropagation(),e.preventDefault(),c(!0),[4,s(i)];case 1:n.sent(),c(!1),n.label=2;case 2:return"Escape"===e.key&&(a(""),t()),[2]}})})()},onChange:function(e){a(e.target.value)},disabled:u,onBlur:t,css:ey.input})},e_=e.i(721281),ek=e.i(480028),eS=e.i(907371),eC=(0,e.i(123850).createCssVarTokens)(["commit-text-foreground","commit-extended-text-foreground","commit-graph-color","segment-grid-area"]),ej=eC.cssVars,eT=eC.styleTokens,eE=[Y.rcss.position.absolute,{top:6,left:3,width:10,height:10,borderRadius:"50%"}],eR=(0,K.cssRecord)({graph:[Y.rcss.display.grid,{gridTemplateAreas:'\n        "title-left title-left"\n        "action-left action-left"\n        "left left"\n        "spacer title-right"\n        "spacer action-right"\n        "spacer right"\n        "split-left split-right"\n        "common common"',gridTemplateColumns:"minmax(16px, min-content) 1fr",gridTemplateRows:"min-content ".repeat(8).trim()},(0,e_._)({},Y.container.min("tabletMin"),{gridTemplateAreas:'\n          "title-left title-right"\n          "action-left action-right"\n          "left right" \n          "split-left split-right"  \n          "common common"',gridTemplateColumns:"1fr 1fr",gridTemplateRows:"min-content ".repeat(5).trim()})],segment:[Y.rcss.flex.column,Y.rcss.align.start,Y.rcss.justify.end,{listStyleType:"none",gridArea:eT["segment-grid-area"],minWidth:0,maxWidth:"100%"}],action:[{gridArea:eT["segment-grid-area"]}],title:[{gridArea:eT["segment-grid-area"]}],commit:[{minWidth:0,maxWidth:"100%"},{'&[data-interactive="true"]':[Y.rcss.border({width:0})]}],decoration:[Y.rcss.position.relative,{height:"100%",width:16}],commitDot:[eE,{backgroundColor:eT["commit-graph-color"]}],commitDotUntracked:[eE,{"&:before":[eE,{boxSizing:"border-box",top:-2,left:-2,content:'""',border:"2px dashed ".concat(eT["commit-graph-color"])}],border:"2px solid ".concat(ek.tokens.accentPrimaryStronger)}],line:[{marginLeft:"auto",marginRight:"auto",position:"absolute",width:"2px",left:"calc(50% - ".concat(1,"px)"),height:"calc(100% - ".concat(8,"px)"),backgroundColor:eT["commit-graph-color"],transform:"translateY(".concat(15,"px)")},{background:"linear-gradient(to top, transparent 0%,  ".concat(eT["commit-graph-color"]," ").concat(10,"px)")},{"li:last-child  &":{height:"calc(100% - ".concat(15,"px)"),background:"none",backgroundColor:eT["commit-graph-color"]}}],commitColumn:[Y.rcss.viewStyle,Y.rcss.colWithGap(8),Y.rcss.minHeight(24),{minWidth:0,maxWidth:"calc(100% - ".concat(16,"px)"),overflow:"hidden"}],commitMessage:[{color:eT["commit-text-foreground"]}],commitDescription:[{color:eT["commit-extended-text-foreground"]}],splitLeft:[{gridArea:"split-left",position:"relative",height:16,width:"100%"}],splitRight:[{gridArea:"split-right",position:"relative",height:16,width:16}],curveRight:[Y.rcss.position.absolute,{bottom:0,left:7,borderRadius:"100% 0 0 0",borderTop:"2px solid ".concat(eT["commit-graph-color"]),borderLeft:"2px solid ".concat(eT["commit-graph-color"]),height:9,width:9}],curveUp:[Y.rcss.position.absolute,{top:0,left:0,borderRadius:"0 0 100% 0",borderBottom:"2px solid ".concat(eT["commit-graph-color"]),borderRight:"2px solid ".concat(eT["commit-graph-color"]),height:9,width:9}],fullLine:[{position:"absolute",width:2,height:"100%",left:7,backgroundColor:eT["commit-graph-color"]}],sidewaysLine:[{position:"absolute",width:"calc(100% - ".concat(16,"px)"),height:2,left:16,top:7,backgroundColor:eT["commit-graph-color"]}],compactLine:[Y.rcss.height("100%"),Y.rcss.position.relative,{gridArea:"spacer"},(0,e_._)({},Y.container.min("tabletMin"),{display:"none"})]}),eI=function(e){var t=e.children,r=e.hasLeft,i=e.hasRight;return(0,n.jsxs)(er.View,{css:eR.graph,children:[t,(0,n.jsx)(eO,{hasLeft:r,hasRight:i}),(0,n.jsx)("div",{css:eR.compactLine,children:(0,n.jsx)("div",{css:eR.decoration,children:(0,n.jsx)("div",{css:eR.fullLine,style:r?(0,e_._)({},ej["commit-graph-color"],ek.tokens.accentPrimaryDefault):{}})})})]})},eA=function(e){var t,r,i=e.children,a=e.area,s=e.title,l=e.action;if(!o.Children.count(i))return null;var u="common"===a?(t={},(0,e_._)(t,ej["segment-grid-area"],a),(0,e_._)(t,ej["commit-graph-color"],ek.tokens.outlineDefault),(0,e_._)(t,ej["commit-text-foreground"],ek.tokens.foregroundDimmer),(0,e_._)(t,ej["commit-extended-text-foreground"],ek.tokens.foregroundDimmest),t):(r={},(0,e_._)(r,ej["segment-grid-area"],a),(0,e_._)(r,ej["commit-graph-color"],ek.tokens.accentPrimaryDefault),(0,e_._)(r,ej["commit-text-foreground"],ek.tokens.accentPrimaryStrongest),(0,e_._)(r,ej["commit-extended-text-foreground"],ek.tokens.foregroundDimmest),r);return(0,n.jsxs)(n.Fragment,{children:["common"===a?null:(0,n.jsx)(eD,{area:a,children:s}),"common"===a?null:(0,n.jsx)(eP,{area:a,children:l}),(0,n.jsx)(er.View,{style:u,tag:"ol",css:eR.segment,"aria-label":a,children:i})]})},eP=function(e){var t=e.children,r=e.area,i=(0,e_._)({},ej["segment-grid-area"],"action-".concat(r));return(0,n.jsx)(er.View,{style:i,css:eR.action,py:4,row:!0,gap:8,children:t})},eD=function(e){var t=e.children,r=e.area,i=(0,e_._)({},ej["segment-grid-area"],"title-".concat(r));return(0,n.jsx)(er.View,{style:i,css:eR.title,children:"string"==typeof t?(0,n.jsx)(et.Header,{level:3,variant:"subheadDefault",color:"dimmer",children:t}):t})},eO=function(e){var t=e.hasLeft,r=e.hasRight,i=(0,e_._)({},ej["commit-graph-color"],t?ek.tokens.accentPrimaryDefault:"transparent"),a=(0,e_._)({},ej["commit-graph-color"],r?ek.tokens.accentPrimaryDefault:"transparent");return t||r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{css:eR.splitLeft,children:[(0,n.jsxs)("div",{css:eR.decoration,children:[(0,n.jsx)("div",{css:eR.line,"data-line":!0,style:i}),(0,n.jsx)("div",{css:eR.fullLine,"data-full-line":!0,style:i})]}),(0,n.jsx)("div",{css:eR.curveRight,style:a}),(0,n.jsx)("div",{css:eR.sidewaysLine,style:a})]}),(0,n.jsx)("div",{css:eR.splitRight,style:a,children:(0,n.jsx)("div",{css:eR.curveUp})})]}):null},eN=function(e){var t=e.onClick,r=e.children,i=e.className;return t?(0,n.jsx)(X.BaseButton,{className:i,onPress:t,css:Y.rcss.reset.button,children:r}):(0,n.jsx)("div",{className:i,children:r})},eM=function(e){var t=e.message,r=e.description,i=e.type,a=e.onClick,o=(0,eS.useCreateInteractive)({variant:"nofill"});return(0,n.jsxs)(er.View,(0,m._)((0,h._)({tag:"li",css:eR.commit,pr:8,row:!0,align:"start",justify:"start","data-interactive":!!a},a?o:{}),{children:[(0,n.jsxs)("div",{css:eR.decoration,children:[(0,n.jsx)("div",{css:eR.line}),(0,n.jsx)("div",{css:"working"===i?eR.commitDotUntracked:eR.commitDot})]}),(0,n.jsxs)(eN,{onClick:a,css:eR.commitColumn,children:[(0,n.jsx)(et.Text,{multiline:!1,css:eR.commitMessage,style:"working"===i?(0,e_._)({},ej["commit-text-foreground"],ek.tokens.accentPrimaryStronger):{},children:t}),r?(0,n.jsx)(et.Text,{css:eR.commitDescription,children:r}):null]})]}))},eL=function(){var e=(0,g._)((0,o.useState)(!1),2),t=e[0],r=e[1];return t?(0,n.jsx)("li",{children:(0,n.jsx)(ew,{onDone:function(){return r(!1)}})}):(0,n.jsx)(eM,{type:"working",message:"uncommitted changes",onClick:function(){return r(!0)}})},eB=function(e){var t,r,i,a,o,s,l,u,c,d,f,p=(d={variables:{id:e.selectedRepl.id}},f=(0,h._)({},ep,d),ed.useQuery(eh,f)).data,m=(0,E.useProjectGitState)(),g=m.state,x=m.commits,b=(null==g?void 0:g.error)?null:null!=(l=null==g?void 0:g.state)?l:null,w=(null==g?void 0:g.error)?null:null!=(u=null==g?void 0:g.type)?u:null,_=(null==p||null==(t=p.getRepl)?void 0:t.__typename)==="Repl"&&p.getRepl.title||"Remote",k=((c=w===y.GitRepositoryStateType.NORMAL&&b!==y.GitRepositoryState.CLEAN,true),c);if(null==x?void 0:x.error)return(0,n.jsx)(et.Text,{children:x.error});var S=!!(null==x||null==(r=x.theirs)?void 0:r.length),C=!!(null==x||null==(i=x.ours)?void 0:i.length)||k;return(0,n.jsxs)(eI,{hasLeft:S,hasRight:C,children:[S?(0,n.jsx)(eA,{area:"left",title:_,children:null==x||null==(a=x.theirs)?void 0:a.map(function(e){return(0,n.jsx)(eM,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,em.ago)(e.author.date))},e.hash)})}):null,C?(0,n.jsxs)(eA,{area:"right",title:"My workspace",children:[k?(0,n.jsx)(eL,{}):null,null==x||null==(o=x.ours)?void 0:o.map(function(e){return(0,n.jsx)(eM,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,em.ago)(e.author.date))},e.hash)})]}):null,(0,n.jsx)(eA,{area:"common",children:null==x||null==(s=x.both)?void 0:s.map(function(e){return(0,n.jsx)(eM,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,em.ago)(e.author.date))},e.hash)})})]})},eV=function(e){var t=(0,g._)((0,o.useState)(function(){return(0,el.createStore)()}),1)[0];return(0,n.jsxs)(ev.GitPaneErrorContext.Provider,{value:t,children:[(0,n.jsx)(eg.default,{}),(0,n.jsx)(eB,(0,h._)({},e))]})},eF=e.i(136540),eU=e.i(848969),eG=e.i(185591),e$=(0,K.cssRecord)({header:[Y.rcss.border({color:ek.tokens.outlineDimmest,direction:"bottom"})],headerLeft:[Y.rcss.flex.wrap,Y.rcss.align.center,{flex:1}],comboBoxAndActions:[Y.rcss.flex.wrap,Y.rcss.flex.shrink(1)],iconButton:[Y.rcss.color.foregroundDimmer,Y.rcss.hover(Y.rcss.color.foregroundDefault)],swapIcon:[Y.rcss.color.foregroundDimmest,{rotate:"90deg"}],warnings:[{"&:empty":Y.rcss.display.none}],toggle:[Y.rcss.minWidth(123)],errorView:[Y.rcss.rowWithGap(8),Y.rcss.justify.center],viewSection:[Y.rcss.px(8),Y.rcss.py(12),{":not(:last-of-type)":Y.rcss.border({color:ek.tokens.outlineDimmest,direction:"bottom"})}]}),eH=function(e){var t=e.selectedRepl,r=e.currentRepl,i=e.remoteResult,a=e.tab,o=e.isMainRepl;return t?"Loading"===i.state?(0,n.jsx)(l.default,{}):"Error"===i.state?(0,n.jsx)(et.Text,{children:"Something went wrong, please try again."}):"changes"===a?(0,n.jsx)(I.ChangesSection,{selectedRepl:t,isMainRepl:o}):(0,n.jsx)(eV,{selectedRepl:t,currentRepl:r}):(0,n.jsx)(et.Text,{children:"Select a Repl to compare against your current Repl."})},ez=(0,o.forwardRef)(function(e,t){var r,i,a,s,u,c=e.repl,d=e.project,f=e.openGitPane,p=e.org,I=e.currentUser,D=!!d.mainRepl&&c.id===d.mainRepl.id,O=(0,g._)((0,o.useState)(D?null:null!=(i=d.mainRepl)?i:null),2),N=O[0],M=O[1],L=(0,g._)((0,o.useState)("changes"),2),B=L[0],V=L[1],F=function(){return V("changes"===B?"commits":"changes")};(0,o.useEffect)(function(){(0,T.trackProjectsFeatureUsed)({action:"tabOpened",orgId:p.id,projectId:d.id,tab:B,replType:D?"mainRepl":"devRepl"})},[B,d,p,D]);var U=(0,E.useProjectGitStateHooks)({selectedReplId:null!=(a=null==N?void 0:N.id)?a:null}),G=U.isFetching,$=U.refetch,H=U.state,z=U.remote,W=U.pull,q=W.doPull,K=W.state,Y=K.error,Q=K.loading,Z=(null==H?void 0:H.error)?null:null!=(s=null==H?void 0:H.state)?s:null;return(0,n.jsx)(E.ProjectGitStateContext.Provider,{value:U,children:(0,n.jsxs)(er.View,{innerRef:t,children:[(0,n.jsxs)(er.View,{css:e$.header,p:8,row:!0,gap:2,children:[(0,n.jsxs)(er.View,{css:e$.headerLeft,row:!0,gap:8,children:["changes"===B?(0,n.jsx)(X.Button,{css:e$.toggle,text:"Changes",iconLeft:(0,n.jsx)(_.default,{}),iconRight:(0,n.jsx)(C.default,{css:e$.swapIcon}),onClick:F},"toggle"):(0,n.jsx)(X.Button,{css:e$.toggle,text:"Commits",iconLeft:(0,n.jsx)(w.default,{}),iconRight:(0,n.jsx)(C.default,{css:e$.swapIcon}),onClick:F},"toggle"),(0,n.jsx)(et.Text,{color:"dimmer",multiline:!0,children:"compared against"}),(0,n.jsxs)(er.View,{css:e$.comboBoxAndActions,row:!0,gap:8,children:[(0,n.jsx)(R.ProjectReplsComboBox,{"aria-label":"Select a Repl",replId:c.id,selectedReplId:null!=(u=null==N?void 0:N.id)?u:null,onSelect:M}),(0,n.jsxs)(er.View,{row:!0,gap:0,align:"center",children:[(0,n.jsx)(eF.IconButton,{alt:"Pull",onClick:function(){q({branch:"main"}),(0,T.trackProjectsFeatureUsed)({action:"pull",orgId:p.id,projectId:d.id,replType:D?"mainRepl":"devRepl"})},disabled:Q||D,css:e$.iconButton,children:G?(0,n.jsx)(l.default,{}):(0,n.jsx)(b.default,{})}),N?(0,n.jsx)(eU.IconButtonLink,(0,m._)((0,h._)({alt:"Go to ".concat(N.title),target:"_blank"},(0,eG.replLinkProps)(N,{initialPaneType:"project"})),{css:e$.iconButton,children:(0,n.jsx)(k.default,{})})):null]})]})]}),(0,n.jsx)(er.View,{pt:4,row:!0,gap:8,children:(0,n.jsx)(eF.IconButton,{alt:"Fetch",onClick:$,disabled:"Success"!==z.state,css:e$.iconButton,children:G?(0,n.jsx)(l.default,{}):(0,n.jsx)(S.default,{})})})]}),(0,n.jsxs)(er.View,{css:e$.warnings,p:8,gap:12,children:[Y===x.GitErrors.DIRTY_WORKTREE?(0,n.jsx)(er.View,{css:e$.errorView,children:(0,n.jsx)(ee.StatusBanner,{colorway:"negative",icon:(0,n.jsx)(j.default,{}),text:"You have uncommitted changes. Please commit them before pulling."})}):null,Y===x.GitErrors.MERGE_CONFLICT?(0,n.jsxs)(er.View,{css:e$.errorView,children:[(0,n.jsx)(ee.StatusBanner,{colorway:"negative",icon:(0,n.jsx)(j.default,{}),text:"There were conflicts in the changes you are trying to pull. Click to resolve them."}),(0,n.jsx)(X.Button,{text:"Resolve Manually",onClick:function(){f(),q({branch:"main",allowConflicts:!0}),(0,T.trackProjectsFeatureUsed)({projectId:d.id,orgId:p.id,action:"pullWithConflicts",replType:D?"mainRepl":"devRepl"})},colorway:"negative"})]}):null,Z===y.GitRepositoryState.MERGING?(0,n.jsx)(ee.StatusBanner,{colorway:"primary",text:"Merge in progress"}):null,Z===y.GitRepositoryState.REBASING?(0,n.jsx)(ee.StatusBanner,{colorway:"primary",text:"Rebase in progress"}):null,(0,n.jsx)(A.GitIgnoreWarning,{})]}),D?(0,n.jsx)(er.View,{css:e$.viewSection,children:(0,n.jsx)(P.MainReplSection,{selectedRepl:null!=N?N:void 0})}):null,!D&&N?(0,n.jsx)(er.View,{css:e$.viewSection,children:(0,n.jsx)(es,{destinationRepl:N,sourceRepl:c,projectId:d.id,mainReplId:null==(r=d.mainRepl)?void 0:r.id,orgId:p.id,currentUser:I})}):null,(0,n.jsx)(er.View,{css:e$.viewSection,children:(0,n.jsx)(eH,{currentRepl:c,selectedRepl:N,remoteResult:z,isMainRepl:D,tab:B})})]})})}),eW=(0,K.cssRecord)({container:[Y.rcss.p(8)]});function eq(e){var t,r,i,a,h,m,x,b,w,_=e.isActive,k=e.performPaneOperation,S=(0,f.useSetTourStepTarget)(d.projectsTour.id,d.StepIds.ProjectPane),C=(0,c.default)(),j=(r=(t=(0,W.default)()).container,i=t.fs,a=t.git,m=(h=(0,g._)((0,o.useState)({state:"loading"}),2))[0],x=h[1],(0,o.useEffect)(function(){(0,D._)(function(){var e;return(0,O._)(this,function(t){switch(t.label){case 0:return x({state:"loading"}),[4,a.getRepositoryState()];case 1:if((e=t.sent()).error&&x({state:"error",error:"Could not get repository status"}),e.error||e.state===y.GitRepositoryState.NOT_INITIALIZED)return x({state:"error",error:"Could not get repository status"}),[2];return[4,a.escapeHatchGitExecWrite("git config --local core.sshCommand replit-git-ssh")];case 2:if(t.sent().error)return x({state:"error",error:"Could not configure SSH"}),[2];return x({state:"finished",hasInstalled:!0}),[2]}})})()},[r,i,a]),m),T=(0,s.useProjectPaneQuery)({variables:{id:C}}),E=T.data,R=T.loading,I=T.error,A=(null==E?void 0:E.getRepl.__typename)==="Repl"?E.getRepl:null,P=(null==E?void 0:E.currentUser)?E.currentUser:null,N=(null==A||null==(b=A.project)?void 0:b.__typename)==="Project"?A.project:null,M=(null==N||null==(w=N.org)?void 0:w.__typename)==="Org"?N.org:null,L=(0,u.default)().showError,B="error"===j.state?j.error:null;return((0,o.useEffect)(function(){B&&L(B)},[L,B]),(0,p.useGitRefreshWhenIsActive)(_),R||"loading"===j.state)?(0,n.jsx)(er.View,{p:16,row:!0,gap:8,justify:"center",children:(0,n.jsx)(l.default,{})}):M&&N?!I&&A&&P?(0,n.jsx)(ez,{ref:S,repl:A,project:N,org:M,openGitPane:function(){return k({operation:"open",pane:{type:"git"}})},currentUser:P}):(0,n.jsx)(er.View,{css:eW.container,children:(0,n.jsx)(et.Text,{children:"Something went wrong, please try again."})}):(0,n.jsx)(er.View,{css:eW.container,children:(0,n.jsx)(et.Text,{children:"This Repl is not a project!"})})}e.i(282890);var eK=e.i(716636),eY=r.Type.Object({type:r.Type.Literal("project")}),eQ={Content:function(e){var t=e.options,r=t.isActive,i=t.performPaneOperation;return(0,n.jsx)(eq,{isActive:r,performPaneOperation:i})},Icon:function(){return(0,n.jsx)(a.default,{})},getTitle:function(){return"Project"},description:"Manage changes in your Project and sync or merge changes across Apps in the Project",category:eK.PaneCategory.WorkspaceFeatures,decode:function(e){return i.Value.Decode(eY,e)}};e.s(["projectUI",()=>eQ],367017);var eX=r.Type.Object({type:r.Type.Literal("replitAuth")}),eZ=function(e){return i.Value.Decode(eX,e)};e.s(["decode",()=>eZ],124116);var eJ=e.i(951262);function e0(){var e=(0,eu._)(["\n  query ReplitAuth($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        title\n        iconUrl\n        timeCreated\n        hasAuthUsers\n        authorizations {\n          editMetadata {\n            isAuthorized\n          }\n          manageAuth {\n            isAuthorized\n            code\n            message\n          }\n        }\n        authProviderConfig {\n          ... on AuthProviderConfig {\n            id\n            minimizedProviders\n          }\n        }\n        config {\n          sessionSecretRotatedAt\n        }\n      }\n    }\n  }\n"]);return e0=function(){return e},e}function e1(){var e=(0,eu._)(["\n  query ReplitAuthUsers(\n    $id: String!\n    $count: Int\n    $after: String\n    $orderBy: ReplitAuthUserOrderByInput\n    $filter: ReplitAuthUserFilterInput\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        authUsers(\n          count: $count\n          after: $after\n          orderBy: $orderBy\n          filter: $filter\n        ) {\n          items {\n            id\n            banned\n            timeCreated\n            lastLoggedIn\n            displayName\n            image\n            email\n            userId\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n"]);return e1=function(){return e},e}function e2(){var e=(0,eu._)(["\n  mutation UpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        title\n        iconUrl\n      }\n    }\n  }\n"]);return e2=function(){return e},e}function e3(){var e=(0,eu._)(["\n  mutation UpdateReplitAuthProviderConfig(\n    $input: UpdateReplitAuthProviderConfigInput!\n  ) {\n    updateReplitAuthProviderConfig(input: $input) {\n      ... on AuthProviderConfig {\n        id\n        minimizedProviders\n      }\n    }\n  }\n"]);return e3=function(){return e},e}function e5(){var e=(0,eu._)(["\n  mutation UpdateReplitAuthUserBanStatus(\n    $input: UpdateReplitAuthUserBanStatusInput!\n  ) {\n    updateReplitAuthUserBanStatus(input: $input) {\n      ... on UpdateReplitAuthUserBanStatusOutput {\n        success\n        message\n        user {\n          id\n          banned\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return e5=function(){return e},e}function e4(){var e=(0,eu._)(["\n  mutation UpdateSessionSecretRotatedAt(\n    $input: UpdateSessionSecretRotatedAtInput!\n  ) {\n    updateSessionSecretRotatedAt(input: $input) {\n      ... on Repl {\n        id\n        config {\n          sessionSecretRotatedAt\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return e4=function(){return e},e}var e8={},e6=(0,ec.gql)(e0());function e7(e){var t=(0,h._)({},e8,e);return ed.useQuery(e6,t)}var e9=(0,ec.gql)(e1());function te(e){var t=(0,h._)({},e8,e);return ed.useQuery(e9,t)}(0,ec.gql)(e2());var tt=(0,ec.gql)(e3());function tn(e){var t=(0,h._)({},e8,e);return eJ.useMutation(tt,t)}var tr=(0,ec.gql)(e5());function ti(e){var t=(0,h._)({},e8,e);return eJ.useMutation(tr,t)}var ta=(0,ec.gql)(e4());function to(e){var t=(0,h._)({},e8,e);return eJ.useMutation(ta,t)}e.s(["useReplitAuthQuery",()=>e7,"useReplitAuthUsersQuery",()=>te,"useUpdateReplitAuthProviderConfigMutation",()=>tn,"useUpdateReplitAuthUserBanStatusMutation",()=>ti,"useUpdateSessionSecretRotatedAtMutation",()=>to],349602)},783742,e=>{"use strict";var t=e.i(276385),n=e.i(116235),r=e.i(11541);e.i(282890);var i=e.i(716636),a=e.i(124116),o=e.i(530658),s=e.i(87995),l=e.i(389959),u=e.i(349602),c=e.i(269848),d=e.i(222878),f=e.i(255701),p=e.i(334028),h=e.i(416298),m=e.i(761201),g=e.i(207237),x=e.i(297083),y=e.i(167626),b=e.i(346715),w=e.i(817556),_=e.i(417751),k=e.i(737362),S=e.i(444903),C=e.i(819229),j=e.i(878420),T=e.i(64386),E=e.i(11029),R=e.i(936706),I=e.i(222342),A=e.i(142365),P=e.i(213733),D=e.i(858248),O=e.i(709485),N=e.i(445016),M=e.i(927158),L=e.i(416746),B=e.i(795903),V=e.i(468095),F=e.i(604963),U=e.i(552144);function G(e){var n=e.openPane,r=(0,V.useSendAgentMessage)({openPane:n}),i=(0,o._)((0,l.useState)(!1),2),a=i[0],s=i[1],u=(0,l.useCallback)(function(e){r("Add Replit Auth to my app",e),s(!1)},[r]);return(0,t.jsxs)(F.PopoverTrigger,{isOpen:a,onOpenChange:s,label:"Ask Agent options",placement:"bottom start",children:[(0,t.jsx)(U.StatusBannerButton,{iconLeft:(0,t.jsx)(L.default,{}),text:"Replit Auth is not configured. Click set up with Agent, and log into your app once with Replit Auth to configure.",colorway:"primary",onClick:function(){return s(!0)}}),(0,t.jsx)(B.SendAgentMessageMenu,{onClick:u})]})}var $=e.i(480028),H=e.i(446530),z=e.i(613355),W=e.i(428596),q=e.i(140487),K=e.i(127227),Y=e.i(607278),Q=e.i(929872),X=e.i(960178),Z=e.i(625484),J=e.i(836224),ee=(0,H.cssRecord)({loadingContainer:[z.rcss.height("100%")],sectionContainer:[z.rcss.mb(24)],providerItem:[z.rcss.gap(8)],form:[z.rcss.p(0)],sectionTitle:[z.rcss.mb(16)],sectionSubtitle:[z.rcss.mb(16)],providerIconContainer:[z.rcss.mr(8),z.rcss.flex.row,z.rcss.align.center],errorText:[{color:$.tokens.foregroundDefault}],configContent:[{maxWidth:430}],pageTitle:[z.rcss.mb(16)],saveButton:[z.rcss.mt(16)],timestampContainer:[z.rcss.mb(16)]}),et=[{id:"google",label:"Google",icon:(0,t.jsx)(function(e){return(0,t.jsx)(n.default,(0,T._)((0,j._)({},e),{children:(0,t.jsx)("path",{d:"M16.855 6.55c-1.25-1.19-2.83-1.8-4.6-1.8-3.13 0-5.78 2.11-6.73 4.96-.24.72-.38 1.49-.38 2.29s.13 1.57.38 2.29c.95 2.85 3.6 4.96 6.73 4.96 1.62 0 2.99-.44 4.07-1.16 1.26-.85 2.11-2.1 2.4-3.58h-6.47V10h11.3c.12.73.19 1.48.19 2.27 0 3.65-1.3 6.73-3.56 8.82-1.98 1.83-4.69 2.91-7.93 2.91-4.69 0-8.74-2.7-10.71-6.62a11.86 11.86 0 0 1 0-10.76C3.515 2.7 7.565 0 12.255 0c3.24 0 5.95 1.19 8.02 3.13l-3.42 3.42Z"})}))},{size:16})},{id:"github",label:"GitHub",icon:(0,t.jsx)(C.default,{size:16})},{id:"x",label:"X",icon:(0,t.jsx)(R.default,{size:16})},{id:"apple",label:"Apple",icon:(0,t.jsx)(S.default,{size:16})},{id:"email",label:"Email",icon:(0,t.jsx)(E.default,{size:16})}];function en(e){var n=e.replId,r=e.hasAuthUsers,i=e.hasReplitAuthIntegration,a=e.openPane,s=(0,u.useReplitAuthQuery)({variables:{id:n}}),d=s.data,f=s.loading,p=s.refetch,h=(0,o._)((0,u.useUpdateSessionSecretRotatedAtMutation)(),1)[0],m=(0,I.default)(),g=m.showError,S=m.showConfirm,C=(0,o._)((0,l.useState)(""),2),j=C[0],T=C[1],E=(0,o._)((0,l.useState)([]),2),R=E[0],L=E[1],B=(0,o._)((0,l.useState)(null),2),V=B[0],F=B[1],U=(0,o._)((0,l.useState)(!1),2),$=U[0],H=U[1],en=(0,o._)((0,l.useState)(!0),2),er=en[0],ei=en[1],ea=(0,W.useIdSeed)(),eo=(0,l.useRef)(void 0),es=(0,l.useRef)([]);(0,A.useTrackEffect)(O.events.AUTH_PANE_USED,{action:"Configure Tab Viewed",replId:n});var el=(0,o._)((0,k.useWorkspaceHeaderReplInfoUpdateReplMutation)({onError:function(e){return g((0,P.default)(e.message))},onCompleted:function(e){S("App info updated successfully");var t=e.updateRepl.repl;t&&"url"in t&&t.url&&t.url!==eo.current&&(window.history.replaceState(null,"",t.url+window.location.search+window.location.hash),eo.current=t.url)}}),1)[0],eu=(0,o._)((0,u.useUpdateReplitAuthProviderConfigMutation)({onError:function(e){g((0,P.default)(e.message))},onCompleted:function(e){e.updateReplitAuthProviderConfig&&"AuthProviderConfig"===e.updateReplitAuthProviderConfig.__typename?(S("Login providers updated"),es.current=(0,b._)(R)):g("Failed to update login providers")}}),2),ec=eu[0],ed=eu[1].loading,ef=(0,l.useCallback)(function(){if((null==d?void 0:d.getRepl)&&"Repl"===d.getRepl.__typename){T(d.getRepl.title||""),"url"in d.getRepl&&"string"==typeof d.getRepl.url&&(eo.current=d.getRepl.url);var e=d.getRepl.authProviderConfig,t=et.map(function(e){return e.id});e&&"AuthProviderConfig"===e.__typename&&e.minimizedProviders&&(t=t.filter(function(t){return!e.minimizedProviders.includes(t)})),L(t),es.current=(0,b._)(t)}},[d]);(0,l.useEffect)(function(){d&&ef()},[d,ef]);var ep=function(){(0,D.track)(O.events.AUTH_PANE_USED,{action:"App Info Saved",appName:j}),el({variables:{input:{id:n,title:j}}})},eh=function(e){L(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):(0,b._)(t).concat([e])})},em=(0,M.usePid2Callback)(function(e){return function(){return(0,x._)(function(){var t;return(0,w._)(this,function(r){switch(r.label){case 0:H(!0),r.label=1;case 1:return r.trys.push([1,10,11,12]),[4,e.secrets.addSessionSecret.rpc({rotate:!0})];case 2:if(!r.sent().ok)return[3,8];r.label=3;case 3:return r.trys.push([3,5,,6]),[4,h({variables:{input:{replId:n}}})];case 4:case 5:return r.sent(),[3,6];case 6:return[4,p()];case 7:return r.sent(),S("Session secret rotated successfully"),(0,D.track)(O.events.AUTH_PANE_USED,{action:"Session Secret Rotated",replId:n}),[3,9];case 8:g("Failed to rotate session secret"),r.label=9;case 9:return[3,12];case 10:return t=r.sent(),g((0,y._)(t,Error)?t.message:"Failed to rotate session secret"),[3,12];case 11:return H(!1),[7];case 12:return[2]}})})()}},[S,g,n,h,p]);if((0,l.useEffect)(function(){if((null==d?void 0:d.getRepl)&&"Repl"===d.getRepl.__typename){ei(!1);var e,t,n=d.getRepl,r=Math.max(n.timeCreated?new Date(n.timeCreated).getTime():0,null!=(t=null==(e=n.config)?void 0:e.sessionSecretRotatedAt)?t:0);F(r>0?r:null)}else f||(ei(!1),F(null))},[d,f]),f)return(0,t.jsx)(Z.View,{css:ee.loadingContainer,row:!0,justify:"center",align:"center",children:(0,t.jsx)(c.default,{size:24})});var eg=(null==d?void 0:d.getRepl)&&"Repl"===d.getRepl.__typename?d.getRepl:null;return eg?(0,t.jsxs)(Z.View,{css:ee.configContent,gap:12,children:[!1===i&&!1===r?(0,t.jsx)(G,{openPane:a}):null,(0,t.jsx)(X.Text,{variant:"subheadBig",css:ee.pageTitle,children:"Configure your log in screen"}),(0,t.jsxs)(Z.View,{css:ee.sectionContainer,children:[(0,t.jsx)(X.Text,{css:ee.sectionTitle,variant:"subheadDefault",children:"App info"}),(0,t.jsx)("form",{css:ee.form,onSubmit:function(e){e.preventDefault(),ep()},children:(0,t.jsx)(Z.View,{align:"stretch",gap:16,children:(0,t.jsxs)(Q.Surface,{background:"default",gap:16,children:[(0,t.jsx)(Z.View,{children:(0,t.jsxs)(Z.View,{gap:4,children:[(0,t.jsxs)(Z.View,{row:!0,justify:"space-between",align:"end",children:[(0,t.jsx)("label",{htmlFor:ea("app-name"),children:(0,t.jsx)(X.Text,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,t.jsx)(J.default,{maxLength:60,value:j,hideLabel:!0})]}),(0,t.jsx)(Y.Input,{value:j,onChange:function(e){return T(e.target.value)},onBlur:ep,placeholder:"Your app name",maxLength:60,id:ea("app-name")})]})}),(0,t.jsx)(N.default,{replId:n,authz:{isAuthorized:eg&&eg.authorizations.editMetadata.isAuthorized},initialIconUrl:eg.iconUrl||"",originIconUrl:""})]})})})]}),(0,t.jsxs)(Z.View,{css:ee.sectionContainer,children:[(0,t.jsx)(X.Text,{css:ee.sectionTitle,variant:"subheadDefault",children:"Log in providers"}),(0,t.jsx)(X.Text,{multiline:!0,css:ee.sectionSubtitle,children:"Choose which login options to display prominently. Unchecked options will appear in a dropdown menu."}),(0,t.jsx)(Z.View,{gap:12,children:et.map(function(e){return(0,t.jsxs)(Z.View,{css:ee.providerItem,row:!0,align:"center",children:[(0,t.jsx)(K.Checkbox,{checked:R.includes(e.id),onChange:function(){return eh(e.id)},id:ea("provider-".concat(e.id))}),(0,t.jsx)("label",{htmlFor:ea("provider-".concat(e.id)),children:(0,t.jsxs)(Z.View,{css:z.rcss.flex.row,align:"center",children:[(0,t.jsx)(Z.View,{css:ee.providerIconContainer,children:e.icon}),(0,t.jsx)(X.Text,{children:e.label})]})})]},e.id)})}),(0,t.jsx)(Z.View,{css:ee.saveButton,children:(0,t.jsx)(q.Button,{onClick:function(){return(0,x._)(function(){var e;return(0,w._)(this,function(t){switch(t.label){case 0:return e=et.map(function(e){return e.id}).filter(function(e){return!R.includes(e)}),(0,D.track)(O.events.AUTH_PANE_USED,{action:"Login Providers Saved",selectedProviders:R,minimizedProviders:e}),[4,ec({variables:{input:{replId:n,minimizedProviders:e}}})];case 1:return t.sent(),[2]}})})()},text:"Save providers",colorway:"primary",loading:ed,disabled:ed})})]}),(0,t.jsxs)(Z.View,{css:ee.sectionContainer,children:[(0,t.jsx)(X.Text,{css:ee.sectionTitle,variant:"subheadDefault",children:"Session Secret"}),(0,t.jsx)(X.Text,{multiline:!0,css:ee.sectionSubtitle,children:"Rotate your SESSION_SECRET to invalidate existing sessions and generate a new secret. You will also need to publish to rotate the secret in production."}),!er&&V?(0,t.jsx)(Z.View,{css:ee.timestampContainer,children:(0,t.jsxs)(X.Text,{variant:"small",color:"dimmer",children:["Last rotated: ",(0,_.format)(new Date(V),"PPpp")]})}):null,(0,t.jsx)(Z.View,{css:ee.saveButton,children:(0,t.jsx)(q.Button,{onClick:em||void 0,text:"Rotate Secret",colorway:"primary",loading:$,disabled:$||!em})})]})]}):(0,t.jsx)(Z.View,{children:(0,t.jsx)(X.Text,{css:ee.errorText,children:"Error loading app information."})})}var er=e.i(721281),ei=e.i(619542),ea=e.i(828322),eo=e.i(162914),es=e.i(173703),el=e.i(714165),eu=e.i(136540),ec=e.i(249373),ed=e.i(734582),ef=e.i(119274),ep=e.i(739521),eh=e.i(624782),em=e.i(51054),eg=e.i(272119),ev=e.i(423828),ex=e.i(257811),ey={userId:"USER_ID",name:"NAME",username:"USERNAME",added:"LAST_LOGIN",email:"EMAIL"},eb=[{key:"userId",label:"User ID",isRowHeader:!0,className:"userIdColumn",allowSorting:!1},{key:"email",label:"Email",className:"emailColumn",allowSorting:!0},{key:"name",label:"Name",className:"nameColumn",allowSorting:!0},{key:"lastLoggedIn",label:"Last logged in",className:"lastLoggedInColumn",allowSorting:!0},{key:"actions",label:"",alignment:"end",className:"actionsColumn"}],ew=(0,H.cssRecord)({wrapper:[z.rcss.height("100%"),z.rcss.display.flex,z.rcss.flex.column],container:[z.rcss.flex.column,z.rcss.flex.grow(1),z.rcss.height("100%")],headerTitle:[z.rcss.mb(16),z.rcss.flex.row,z.rcss.align.center,z.rcss.gap(8)],tableWrapper:[z.rcss.flex.column,z.rcss.flex.growAndShrink(1),z.rcss.minHeight(0),z.rcss.overflow("hidden")],table:[z.rcss.width("100%"),z.rcss.height("100%"),z.rcss.container("table"),z.rcss.flex.grow(1),{"& .userIdColumn":{minWidth:100,maxWidth:200,width:"15%"},"& .nameColumn":{minWidth:200,maxWidth:350,width:"20%"},"& .emailColumn":(0,er._)({minWidth:200,maxWidth:350,width:"25%"},z.container.max(800,"table"),[{display:"none"}]),"& .lastLoggedInColumn":{minWidth:150,maxWidth:200,width:"10%"},"& .actionsColumn":{width:"10%"}}],searchContainer:[z.rcss.mb(16),{width:"fit-content"}]}),e_=(0,H.cssRecord)({modalContent:[z.rcss.flex.column,z.rcss.gap(16)],detailsRow:[z.rcss.flex.column,z.rcss.gap(4)],label:[z.rcss.color.foregroundDefault,{fontSize:$.tokens.fontSizeSmall,lineHeight:$.tokens.lineHeightDefault,fontWeight:$.tokens.fontWeightMedium}],value:[z.rcss.gap(8),z.rcss.color.foregroundDimmer,{fontSize:$.tokens.fontSizeDefault,lineHeight:$.tokens.lineHeightDefault}],buttonsContainer:[z.rcss.gap(8)]}),ek=(0,H.cssRecord)({title:[z.rcss.mb(16)]});function eS(e,t){var n=(0,I.default)(),r=n.showConfirm,i=n.showError,a=(0,o._)((0,u.useUpdateReplitAuthUserBanStatusMutation)(),1)[0];return function(){return(0,x._)(function(){var n,o;return(0,w._)(this,function(s){switch(s.label){case 0:if(!t)return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),(0,D.track)(O.events.AUTH_PANE_USED,{action:t.banned?"User Unbanned":"User Banned",userId:t.userId}),[4,a({variables:{input:{replId:e,userId:Number(t.userId),action:t.banned?"UNBAN":"BAN"}},update:function(e,n){var r=n.data;(null==r?void 0:r.updateReplitAuthUserBanStatus.__typename)==="UpdateReplitAuthUserBanStatusOutput"&&r.updateReplitAuthUserBanStatus.success&&e.modify({id:e.identify({__typename:"ReplitAuthUser",id:t.id}),fields:{banned:function(){return!t.banned}}})}})];case 2:return(null==(o=null==(n=s.sent().data)?void 0:n.updateReplitAuthUserBanStatus)?void 0:o.__typename)==="UpdateReplitAuthUserBanStatusOutput"&&o.success?r(o.message):(null==o?void 0:o.__typename)==="NotFoundError"||(null==o?void 0:o.__typename)==="UnauthorizedError"?i(o.message):i("Failed to update ban status"),[3,4];case 3:return s.sent(),i("Failed to update ban status"),[3,4];case 4:return[2]}})})()}}function eC(e){var n,r=e.replId,i=e.hasAuthUsers,a=e.hasReplitAuthIntegration,s=e.openPane,c=(0,o._)((0,l.useState)(""),2),d=c[0],f=c[1],h=(0,o._)((0,l.useState)(null),2),m=h[0],g=h[1],y=(0,o._)((0,l.useState)(!1),2),_=y[0],k=y[1],S=(0,o._)((0,l.useState)({field:"LAST_LOGIN",direction:"DESC"}),2),C=S[0],E=S[1],R=(0,l.useRef)(null),I=(0,eo.default)(d,500);(0,A.useTrackEffect)(O.events.AUTH_PANE_USED,{action:"Users Tab Viewed",replId:r}),(0,A.useTrackEffectWithPredicate)(O.events.AUTH_PANE_USED,{action:"Users Searched"},function(){return!!I},[I]);var P=(0,u.useReplitAuthUsersQuery)({variables:{id:r,count:50,orderBy:C,filter:I?{search:I}:void 0},fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,ssr:!1}),N=P.data,M=P.loading,L=P.error,B=P.fetchMore,V=(0,l.useMemo)(function(){if((null==N?void 0:N.getRepl)&&"Repl"===N.getRepl.__typename&&N.getRepl.authUsers)return N.getRepl.authUsers},[N]),F=(0,l.useMemo)(function(){var e;return null!=(e=null==V?void 0:V.items)?e:[]},[V]),U=null!=(n=null==V?void 0:V.pageInfo.hasNextPage)&&n,$=(0,l.useMemo)(function(){return F.some(function(e){return e.email})},[F]),H=(0,l.useMemo)(function(){return eb.filter(function(e){return"email"!==e.key||$})},[$]),z=(0,l.useCallback)(function(){return(0,x._)(function(){return(0,w._)(this,function(e){switch(e.label){case 0:if(M||!U)return[2];return[4,B({variables:{id:r,count:50,after:null==V?void 0:V.pageInfo.nextCursor,orderBy:C,filter:I?{search:I}:void 0},updateQuery:function(e,t){var n,r,i=t.fetchMoreResult;if((null==(n=i.getRepl)?void 0:n.__typename)!=="Repl"||!i.getRepl.authUsers)return e;var a=(null==(r=e.getRepl)?void 0:r.__typename)==="Repl"&&e.getRepl.authUsers?e.getRepl.authUsers.items:[],o=(0,b._)(a).concat((0,b._)(i.getRepl.authUsers.items));return(0,T._)((0,j._)({},i),{getRepl:(0,T._)((0,j._)({},i.getRepl),{authUsers:(0,T._)((0,j._)({},i.getRepl.authUsers),{items:o})})})}})];case 1:return e.sent(),[2]}})})()},[M,U,B,r,null==V?void 0:V.pageInfo.nextCursor,C,I]),W=(0,l.useCallback)(function(e){if(e.column){var t=ey[e.column]||"LAST_LOGIN",n="ascending"===e.direction?"ASC":"DESC";(0,D.track)(O.events.AUTH_PANE_USED,{action:"Users Sorted",sortField:t,sortDirection:n}),E({field:t,direction:n})}},[]),q=(0,l.useMemo)(function(){return null!==m&&F.find(function(e){return e.userId===m})||null},[F,m]);return(0,t.jsx)("div",{ref:R,css:ew.wrapper,children:(0,t.jsxs)(Z.View,{css:ew.container,gap:12,children:[!1===a&&!1===i?(0,t.jsx)(G,{openPane:s}):null,(0,t.jsxs)(Z.View,{css:ew.headerTitle,children:[(0,t.jsx)(p.default,{size:24}),(0,t.jsx)(X.Text,{variant:"subheadBig",children:"Users"})]}),(0,t.jsx)(Z.View,{css:ew.searchContainer,children:(0,t.jsx)(em.SearchBar,{placeholder:"Search users",value:d,onChange:function(e){return f(e.target.value)},onClear:function(){f("")}})}),(0,t.jsx)(es.ShadesSurface,{css:ew.tableWrapper,children:(0,t.jsx)(ed.IndexTable,{css:ew.table,autoLayout:!0,title:"Authenticated Users",columns:H,items:F,selectionMode:"none",selectionBehavior:"replace",loading:M,loadingPlaceholder:{numRows:50,height:36},errorMessage:null==L?void 0:L.message,emptyState:(0,t.jsx)(ec.default,{title:M?"Loading users...":"No users",description:function(){if(!M)return I?"No users match your search criteria.":"Users who log in to your app will appear here."}(),illustration:(0,t.jsx)(p.default,{size:24})}),canLoadMore:U,onLoadMore:z,isLoadingMore:V&&M,onSortChange:W,children:function(e){return(0,t.jsxs)(ev.TableRow,{id:e.id,children:[(0,t.jsx)(eg.TableCell,{className:"userIdColumn",children:(0,t.jsx)(X.Text,{children:e.userId})},"userId-".concat(e.id)),$?(0,t.jsx)(eg.TableCell,{className:"emailColumn",children:(0,t.jsx)(X.Text,{children:e.email||""})},"email-".concat(e.id)):null,(0,t.jsx)(eg.TableCell,{className:"nameColumn",children:(0,t.jsxs)(Z.View,{row:!0,align:"center",gap:8,children:[(0,t.jsx)(el.Avatar,{src:e.image||null,username:e.displayName||"",size:20}),(0,t.jsx)(X.Text,{children:e.displayName||""}),e.banned?(0,t.jsx)(eh.Pill,{text:"Banned",colorway:"negative",variant:"muted",compact:!0}):null]})},"name-".concat(e.id)),(0,t.jsx)(eg.TableCell,{className:"lastLoggedInColumn",children:e.lastLoggedIn?(0,t.jsx)(ex.Timestamp,{date:e.lastLoggedIn,dateFormat:"relative"}):"Never"},"lastLoggedIn-".concat(e.id)),(0,t.jsx)(eg.TableCell,{className:"actionsColumn",children:(0,t.jsx)(ej,{user:e,onViewDetails:function(){g(e.userId),k(!0)},replId:r})},"actions-".concat(e.id))]},e.id)}})}),q?(0,t.jsx)(eT,{user:q,isOpen:_,onClose:function(){k(!1),g(null)},portalContainer:R.current,replId:r}):null]})})}var ej=function(e){var n=e.user,r=e.onViewDetails,i=eS(e.replId,n);return(0,t.jsx)(Z.View,{row:!0,justify:"end",children:(0,t.jsxs)(ef.PopupMenu,{placement:"bottom end",trigger:(0,t.jsx)(eu.IconButton,{alt:"Actions",children:(0,t.jsx)(ea.default,{})}),children:[(0,t.jsx)(ef.MenuItem,{label:"View details",onAction:function(){(0,D.track)(O.events.AUTH_PANE_USED,{action:"User Details Viewed",userId:n.userId}),r()}}),(0,t.jsx)(ef.MenuItem,{label:n.banned?"Unban user":"Ban user",onAction:i})]})})};function eT(e){var n=e.user,r=e.isOpen,i=e.onClose,a=e.portalContainer,o=eS(e.replId,n);return n?(0,t.jsx)(ep.Modal,{isOpen:r,onRequestClose:i,portalContainer:a,children:(0,t.jsxs)(Z.View,{css:e_.modalContent,children:[(0,t.jsxs)(Z.View,{row:!0,align:"center",gap:8,css:ek.title,children:[(0,t.jsx)(el.Avatar,{src:n.image||null,username:n.displayName||"",size:32}),(0,t.jsx)(X.Text,{variant:"subheadBig",children:n.displayName||""}),n.banned?(0,t.jsx)(eh.Pill,{colorway:"negative",text:"Banned",variant:"muted"}):null]}),(0,t.jsxs)(Z.View,{css:e_.detailsRow,children:[(0,t.jsx)(X.Text,{css:e_.label,children:"User ID"}),(0,t.jsx)(X.Text,{css:e_.value,children:n.userId})]}),n.displayName?(0,t.jsxs)(Z.View,{css:e_.detailsRow,children:[(0,t.jsx)(X.Text,{css:e_.label,children:"Name"}),(0,t.jsx)(X.Text,{css:e_.value,children:n.displayName})]}):null,n.email?(0,t.jsxs)(Z.View,{css:e_.detailsRow,children:[(0,t.jsx)(X.Text,{css:e_.label,children:"Email"}),(0,t.jsx)(X.Text,{css:e_.value,children:n.email})]}):null,(0,t.jsxs)(Z.View,{css:e_.detailsRow,children:[(0,t.jsx)(X.Text,{css:e_.label,children:"Account created"}),(0,t.jsx)(X.Text,{css:e_.value,children:(0,t.jsx)(ex.Timestamp,{dateFormat:"absolute",absoluteFormat:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},date:new Date(n.timeCreated)})})]}),(0,t.jsxs)(Z.View,{css:e_.detailsRow,children:[(0,t.jsx)(X.Text,{css:e_.label,children:"Last login"}),(0,t.jsx)(X.Text,{css:e_.value,children:(null==n?void 0:n.lastLoggedIn)?(0,t.jsx)(ex.Timestamp,{dateFormat:"absolute",absoluteFormat:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},date:new Date(n.lastLoggedIn)}):"Never"})]}),(0,t.jsx)(Z.View,{row:!0,justify:"start",css:e_.buttonsContainer,children:(0,t.jsx)(q.Button,{text:n.banned?"Unban User":"Ban User",onClick:o,colorway:n.banned?"primary":"negative",iconLeft:n.banned?void 0:(0,t.jsx)(ei.default,{})})})]})}):(i(),null)}var eE=e.i(299798),eR=e.i(848969),eI=e.i(396776),eA=e.i(628796),eP=(0,H.cssRecord)({container:[z.rcss.flex.column,z.rcss.flex.growAndShrink(1),z.rcss.height("100%")],header:[z.rcss.border({color:$.tokens.outlineDimmest,width:1,direction:"bottom"}),z.rcss.overflowX("auto"),z.rcss.overflowY("hidden")],help:[z.rcss.border({color:$.tokens.outlineDimmest,width:1,direction:"bottom"})],tabs:[z.rcss.flex.growAndShrink(1),{height:"100%",'[role="tablist"]':{height:"100%"}}],body:[z.rcss.overflowY("auto")],content:[z.rcss.maxHeight("100%")],centered:[z.rcss.flex.column,z.rcss.justify.center,z.rcss.align.center,z.rcss.height("100%"),z.rcss.p(16)],bannerWrapper:[z.rcss.width("fit-content")],loadingContainer:[z.rcss.flex.column,z.rcss.justify.center,z.rcss.align.center,z.rcss.height("100%")]});function eD(e){var n,r,i,a,y,b,_=e.performPaneOperation,k=(0,g.default)(),S=(0,o._)((0,l.useState)("users"),2),C=S[0],j=S[1],T=(0,l.useCallback)(function(e){return _({operation:"open",pane:e})},[_]),E=(0,u.useReplitAuthQuery)({variables:{id:k}}),R=E.data,I=E.loading,A=(null==R||null==(a=R.getRepl)?void 0:a.__typename)==="Repl"?R.getRepl:null,P=null==A?void 0:A.hasAuthUsers,D=(r=(n=(0,o._)((0,l.useState)(void 0),2))[0],i=n[1],(0,eE.usePid2)(function(e){return(0,x._)(function(){var t;return(0,w._)(this,function(n){switch(n.label){case 0:return[4,e.agentReplConfig.getReplConfig.rpc({})];case 1:return(t=n.sent()).ok?i((t.payload.integrations||[]).some(function(e){return e.includes("log_in_with_replit")})):i(!1),[2]}})})()},[]),r);return I?(0,t.jsx)(Z.View,{css:eP.loadingContainer,children:(0,t.jsx)(c.default,{})}):(null==A||null==(b=A.authorizations)||null==(y=b.manageAuth)?void 0:y.isAuthorized)?(0,t.jsxs)(Z.View,{css:eP.container,children:[(0,t.jsxs)(Z.View,{css:eP.header,row:!0,justify:"space-between",children:[(0,t.jsx)("div",{css:eP.tabs,children:(0,t.jsx)(eA.Tabs,{selectedKey:C,onSelectionChange:function(e){return j(e)},children:(0,t.jsxs)(eA.TabList,{"aria-label":"Authentication Options",children:[(0,t.jsx)(eA.Tab,{id:"users",children:(0,t.jsxs)(Z.View,{row:!0,align:"center",gap:8,children:[(0,t.jsx)(p.default,{size:16})," Users"]})}),(0,t.jsx)(eA.Tab,{id:"configure",children:(0,t.jsxs)(Z.View,{row:!0,align:"center",gap:8,children:[(0,t.jsx)(f.default,{size:16})," Configure"]})})]})})}),(0,t.jsx)(Z.View,{row:!0,css:eP.help,align:"center",children:(0,t.jsx)(eR.IconButtonLink,{alt:"Visit the Replit Auth documentation to learn more.",target:"_blank",href:m.LINKS_DOCS.REPLIT_AUTH,children:(0,t.jsx)(d.default,{})})})]}),(0,t.jsx)(es.ShadesSurface,{css:eP.body,elevate:!1,grow:!0,shrink:!0,children:(0,t.jsx)(Z.View,{css:eP.content,p:16,children:"users"===C?(0,t.jsx)(eC,{replId:k,hasAuthUsers:P,hasReplitAuthIntegration:D,openPane:T}):(0,t.jsx)(en,{replId:k,hasAuthUsers:P,hasReplitAuthIntegration:D,openPane:T})})})]}):(0,t.jsx)(Z.View,{css:eP.centered,children:(0,t.jsxs)(Z.View,{css:eP.bannerWrapper,gap:8,children:[(0,t.jsx)(eI.StatusBanner,{colorway:"warning",icon:(0,t.jsx)(h.default,{}),text:"You are not authorized to manage Auth."}),(0,t.jsx)(s.default,{href:m.LINKS_DOCS.REPLIT_AUTH,target:"_blank",rel:"noopener",children:"Visit the Replit Auth documentation to learn more."})]})})}var eO={Content:function(e){var n=e.options;return(0,t.jsx)(eD,{performPaneOperation:n.performPaneOperation})},Icon:function(e){var i=e.size;return(0,t.jsx)(n.IconContext.Provider,{value:{color:$.tokens.orangeStrongest,size:i},children:(0,t.jsx)(r.default,{color:$.tokens.limeStrongest})})},getTitle:function(){return"Auth"},description:"Let users log in to your App using a prebuilt login page",category:i.PaneCategory.CloudServices,decode:a.decode};e.s(["replitAuthUI",()=>eO],783742)},573598,e=>{"use strict";var t=e.i(331762),n=e.i(394212),r=e.i(297083),i=e.i(530658),a=e.i(817556),o=e.i(276385),s=e.i(389959);e.i(877212);var l=e.i(924908),u=e.i(858248),c=e.i(709485),d=e.i(299798),f=e.i(230776),p=e.i(417120),h=e.i(330666),m=e.i(346574),g=e.i(61524),x=e.i(649960),y=e.i(670413),b=e.i(441329),w=e.i(909478);e.i(429225);var _=e.i(59380),k=e.i(646067),S=e.i(541793),C=e.i(161322),j=e.i(15053),T=e.i(82259),E=e.i(51553),R=e.i(291607);e.i(925218);var I=e.i(641555),A=e.i(820228),P=e.i(967629),D=e.i(613355),O=e.i(140487),N=e.i(136540),M=e.i(625484),L=(0,S.atom)(0),B=(0,S.atom)(function(e){return e(L)<=R.COMPACT_WIDTH?"compact":"normal"}),V="\x1b[0J",F="\x1b[0m",U=(0,P.css)([D.rcss.position.absolute,D.rcss.left(8),D.rcss.right(0),D.rcss.zIndex(5)]);function G(e){var t,n,d,f,p,h,m,g,y,b,w,_,k=e.lineNumber,P=e.paneHeight,D=e.shell,G=e.sendToShellChannel,H=e.onClose,z=(0,s.useMemo)(function(){return null==D?void 0:D._term},[D]),W=(0,s.useMemo)(function(){var e,t=null==z?void 0:z._core;return null!=(e=null==t?void 0:t._renderService.dimensions.css.cell)?e:{width:0,height:0}},[z]),q=(0,s.useRef)(""),K=(0,s.useRef)(!1),Y=(0,s.useRef)(null),Q=(0,i._)((0,s.useState)(64),2),X=Q[0],Z=Q[1],J=(0,s.useRef)(null),ee=(0,s.useCallback)(function(e){return Z(e.height)},[Z]),et=(t=(0,l.useChatter)(),d=(n=(0,i._)((0,s.useState)(null),2))[0],f=n[1],h=(p=(0,i._)((0,s.useState)(!1),2))[0],m=p[1],g=(0,s.useCallback)(function(e){return(0,r._)(function(){var n,r;return(0,a._)(this,function(i){switch(i.label){case 0:return m(!0),[4,t.sessions.create({sessionType:T.SessionType.INLINE_CHAT})];case 1:if(!(n=i.sent()).ok)return m(!1),[2,n];return f(r=n.payload),[4,r.appendEvent({kind:"shellSuggestion",message:e,modelType:T.ModelType.BASIC})];case 2:return i.sent(),[2]}})})()},[t]),y=(0,s.useCallback)(function(){return(0,r._)(function(){return(0,a._)(this,function(e){switch(e.label){case 0:if(!d)return[3,2];return[4,d.abortLastEvent()];case 1:e.sent(),m(!1),e.label=2;case 2:return[2]}})})()},[d]),w=(b=(0,I.useObservableMemo)(function(){return null==d?void 0:d.reduce($,1)},[d],{default:{message:"",completed:!1}})).message,_=b.completed,(0,s.useEffect)(function(){_&&m(!1)},[_]),{sendMessage:g,stopMessage:y,loading:h,message:w,completed:_}),en=et.sendMessage,er=et.stopMessage,ei=et.message,ea=et.loading,eo=et.completed;(0,s.useEffect)(function(){if(0===ei.length){q.current="";return}q.current!==ei&&(K.current&&(D.write("\x1b[u"),D.write(V)),D.write("\x1b[s"),D.write("\x1b[0;90m"),D.write(ei.replaceAll("\n","\r\n").trim()),D.write(F),K.current=!0,q.current=ei)},[D,ei]);var es=(0,s.useCallback)(function(){(0,u.track)(c.events.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell"}),er(),K.current&&(D.write("\x1b[u"),D.write(V),D.write(F)),H()},[D,er,H]);(0,s.useEffect)(function(){return D.onData(function(){er(),H()}).dispose},[D,er,H]);var el=(0,R.useInputState)({id:(0,j.v4)(),inputRef:J,loading:ea,onSubmit:function(){eh?ep():((0,u.track)(c.events.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:eu}),em())},onClose:es}),eu=el.value,ec=el.setValue,ed=el.onKeyDown,ef=el.escPressed,ep=(0,s.useCallback)(function(){K.current&&ei?(D.write("\x1b[u"),D.write(V),D.write(F),G(ei),(0,u.track)(c.events.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",source:"shell"}),H()):es()},[ei,D,G,H,es]),eh=eo&&Y.current===eu,em=(0,s.useCallback)(function(){Y.current=eu,(0,u.track)(c.events.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:eu}),en(eu)},[en,eu]),eg=W.height*(k+1)+8,ev="top";eg+X>P&&(ev="bottom",eg=P-W.height*(k+1)+4);var ex=(0,E.useIsAiClientConnected)(),ey=(0,i._)((0,s.useState)(function(){return(0,S.createStore)()}),1)[0],eb=(0,C.useSetAtom)(L,{store:ey}),ew=(0,C.useAtomValue)(B,{store:ey}),e_=(0,x.default)(function(e){return eb(e.width)});return(0,o.jsx)(M.View,{css:U,style:{top:"top"===ev?eg:void 0,bottom:"bottom"===ev?eg:void 0},children:(0,o.jsxs)(R.PocketContainer,{requestMeasure:ee,type:"generateCode",isCodeMirrorPocket:!1,innerRef:e_,children:[(0,o.jsx)(R.Input,{value:eu,inputRef:J,onChange:function(e){return ec(e.currentTarget.value)},placeholder:"Enter a prompt to generate a shell command",onKeyDown:ed,autoFocus:!0}),(0,o.jsxs)(R.Footer,{children:[(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(R.ModeLabel,{}),eo?(0,o.jsx)(N.IconButton,{alt:"Rerun the same prompt",onClick:function(){return em()},size:12,colorway:"grey",children:(0,o.jsx)(A.default,{})}):null]}),eh?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(O.Button,{variant:"outlined",size:"small",text:"Reject",onClick:function(){(0,u.track)(c.events.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",source:"shell"}),es()}}),(0,o.jsx)(O.Button,{size:"small",text:"Accept",colorway:"blurple",onClick:ep,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,o.jsx)(R.Submit,{escPressed:ef,connecting:!ex,loading:ea,disabled:!eu||!eu.trim(),promptPresentation:"normal"===ew,onClick:function(){ea?((0,u.track)(c.events.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell",message_content:eu}),er()):((0,u.track)(c.events.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:eu}),em())}})]})]})})}var $={direction:"reverse",state:{message:"",completed:!1},reducer:function(e,t){var n;e.sender.type===T.UserType.AI&&(null==(n=e.contents.contents)?void 0:n.$kind)==="shellSuggestionEventContents"&&e.contents.contents.shellSuggestionEventContents.content&&(t.message=e.contents.contents.shellSuggestionEventContents.content,t.completed=e.state===T.EventState.COMPLETE)}},H=e.i(529810),z=e.i(978799);function W(e){var t=e.portsOpenedByThisShell,n=e.performPaneOperation,r=e.onClose,i=(0,H.default)().ports,a=(0,s.useCallback)(function(e){i.updateDotReplitPortsMapping(e,void 0)},[i]),l=(0,s.useCallback)(function(e){i.tryExposingPortAutomatically(e)},[i]);return(0,o.jsx)(z.PortInfo,{configurations:t.map(function(e){return e.configuration}),openWebview:function(){n({operation:"open",secondary:!0,pane:{type:"webview",data:{ports:t.length>0?{type:"local",port:t[0].configuration.localPort}:void 0}}})},openNetworkingTool:function(){n({operation:"open",secondary:!0,pane:{type:"developer",data:{tab:["networking"]}}})},onClose:function(){null==r||r()},onDontExposePort:function(){1===t.length&&a(t[0].configuration.localPort)},onDoExposePort:function(){1===t.length&&l(t[0].configuration.localPort)}})}var q=e.i(926587),K=e.i(337805),Y=e.i(446530),Q=(0,P.css)([D.rcss.height("100%"),D.rcss.overflow("hidden"),{"& .xterm":[D.rcss.ml(8),D.rcss.mt(8),D.rcss.mb(4),D.rcss.height("100%")]}]),X=(0,Y.cssRecord)({container:[D.rcss.height("100%"),{"&:focus-within .controls":{opacity:1}}],xterm:Q,xtermWithBorderRadius:[Q,{"& .xterm-viewport":[D.rcss.borderRadius(0,0,8,8)]}]}),Z=(0,P.css)([D.rcss.position.absolute,D.rcss.flex.row,D.rcss.top(8),D.rcss.right(8),D.rcss.height(30),D.rcss.align.center,D.rcss.zIndex(8),{opacity:0}]);function J(e){var t,n,l=e.shell,u=e.shellMetadata,c=e.sendToShellChannel,d=e.shellRef,f=e.className,S=e.openSearchAndReplace,C=e.openAgentWithMessage,j=e.performPaneOperation,T=e.isGeneratePromptVisible,E=e.currentPromptLineNumber,R=e.onCloseGeneratePrompt,I=e.searchState,A=e.setSearchState,P=(0,g.usePreferences)("accessibleTerminal").preferences.accessibleTerminal,O=(0,p.useIsAgentOptimisticallyWorking)(),N=(0,w.useOpenedPortsMatchingCgroup)(null!=(t=null==u?void 0:u.cgroup)?t:void 0);l&&I.isSearching&&(n=(0,o.jsx)(q.SearchWidget,{searchValue:I.searchText,setSearchValue:function(e){A({isSearching:!0,searchText:e})},findPrevious:l.findPrevious,findNext:l.findNext,exit:function(){return A({isSearching:!1})}}));var L=(0,b.useIsInMobileWorkspace)(),B=(0,_.useContextMenu)().onContextMenu,V=(0,k.useGetShellContextMenuCommand)({xterm:l,isWorkflowsTerminal:!1,openShellSearch:function(e){A({isSearching:!0,searchText:e})},openSearchAndReplace:S}),F=(0,s.useCallback)(function(e){return(0,r._)(function(){return(0,a._)(this,function(t){return C((0,m.shellMessagePrompt)(e)),[2]})})()},[C]);(0,K.useTerminalSelectionPopover)({xterm:l,onAskAgent:F,isAgentBusy:O}),(0,s.useEffect)(function(){null==l||l.fit()},[l,N]);var U=(0,i._)((0,s.useState)(0),2),$=U[0],H=U[1],z=(0,x.default)(function(e){H(e.height)},{type:"throttle",wait:200});return(0,o.jsxs)(M.View,{className:f,innerRef:z,css:X.container,onKeyDown:function(e){"f"===e.key&&(0,y.getCmdOrCtrl)(e)&&(A({isSearching:!0,searchText:""}),e.preventDefault())},children:[!P&&(0,o.jsx)(h.VisuallyHidden,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the shell.'}),(0,o.jsxs)(M.View,{css:[D.rcss.coverContainer,D.rcss.flex.column],onClick:function(){T&&(R(),null==l||l.focus())},children:[(0,o.jsx)(M.View,{css:[L?X.xterm:X.xtermWithBorderRadius,D.rcss.flex.growAndShrink(1),T?{pointerEvents:"none",filter:"opacity(0.75)"}:null],innerRef:d,onContextMenu:function(e){return B(e,{command:V})}}),(0,o.jsx)(W,{portsOpenedByThisShell:N,performPaneOperation:j,onClose:function(){null==l||l.focus(),null==l||l.fit()}})]}),l&&T?(0,o.jsx)(G,{lineNumber:E,paneHeight:$,shell:l,sendToShellChannel:c,onClose:function(){R(),l.focus()}}):null,l?(0,o.jsx)(M.View,{className:"controls",css:Z,children:n}):null]})}var ee=e.i(468095),et=(0,P.css)([D.rcss.position.relative,D.rcss.height("100%")]);function en(e){var h=e.shellId,m=e.paneId,g=e.performPaneOperation,x=e.userId,y=e.xterm,b=e.xtermRef,w=e.currentPromptLineNumber,_=e.isGeneratePromptVisible,k=e.onCloseGeneratePrompt,S=e.searchState,C=e.setSearchState,j=(0,i._)((0,s.useState)(void 0),2),T=j[0],E=j[1],R=(0,s.useCallback)(function(e){g({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[g]),I=(0,s.useCallback)(function(e){g({operation:"open",secondary:!0,pane:e})},[g]),A=(0,ee.useSendAgentMessage)({openPane:I}),P=(0,l.useChatter)(),D=(0,p.useIsAgentOptimisticallyWorking)(),O=(0,s.useCallback)(function(e){return(0,r._)(function(){var t,n;return(0,a._)(this,function(r){switch(r.label){case 0:if(!D)return[3,3];return t=(0,f.packContentsForQueuedMessage)({text:e,attachedFiles:[]}),[4,P.queue.enqueue({contents:t})];case 1:return r.sent(),[4,P.sessions.agent.current.once()];case 2:return I({type:"agentChat",data:{sessionId:null==(n=r.sent())?void 0:n.id}}),[3,4];case 3:A(e,{createNewSession:!1}),r.label=4;case 4:return(0,u.track)(c.events.AGENT_USED,{action:D?"message_queued":"message_sent",message_content:e,message_source:"shell",is_agent_repl:!0}),[2]}})})()},[D,P,A,I]),N=(0,s.useRef)(null);(0,d.usePid2)(function(e,i){var o=i.signal;return(0,r._)(function(){var i,s,l,u,c,d;return(0,a._)(this,function(f){return y?(s=(i=e.shellExec.connect.stream({id:h,userId:x,processViewId:m,size:y.getSize()},{signal:o})).reqWritable,l=i.resReadable,N.current=u=function(e){s.write({$kind:"stdin",stdin:new Uint8Array(t.Buffer.from(e))})},c=y.onResize(function(t){return(0,r._)(function(){return(0,a._)(this,function(n){switch(n.label){case 0:return[4,e.shellExec.resize.rpc({id:h,userId:x,processViewId:m,size:t})];case 1:return n.sent(),[2]}})})()}),d=y.onData(u),y.write("\x1bc"),(0,r._)(function(){var e,t,r,i,o,s,u;return(0,a._)(this,function(a){switch(a.label){case 0:e=!1,t=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),i=(0,n._)(l),a.label=2;case 2:return[4,i.next()];case 3:if(!(e=!(o=a.sent()).done))return[3,5];if(!(s=o.value).ok)return y.clear(),[2];"output"===s.payload.$kind&&y.write(s.payload.output),a.label=4;case 4:return e=!1,[3,2];case 5:return[3,12];case 6:return u=a.sent(),t=!0,r=u,[3,12];case 7:if(a.trys.push([7,,10,11]),!(e&&null!=i.return))return[3,9];return[4,i.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(t)throw r;return[7];case 11:return[7];case 12:return[2]}})})(),[2,function(){N.current=null,s.close(),c.dispose(),d.dispose()}]):[2]})})()},[y,h,x,m]),(0,d.usePid2)(function(e,t){var i=t.signal;return(0,r._)(function(){var t,r,o,s,l,u,c,d;return(0,a._)(this,function(a){switch(a.label){case 0:t=e.shellExec.monitor.subscribe({id:h},{signal:i}).resReadable,r=!1,o=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),l=(0,n._)(t),a.label=2;case 2:return[4,l.next()];case 3:if(!(r=!(u=a.sent()).done))return[3,5];if(!(c=u.value).ok)if("NO_PROCESS_MATCHING_ID"===c.payload.code)return[3,4];else return[3,5];"NotStarted"!==c.payload.state&&c.payload.cgroupPath&&E({cgroup:c.payload.cgroupPath}),a.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return d=a.sent(),o=!0,s=d,[3,12];case 7:if(a.trys.push([7,,10,11]),!(r&&null!=l.return))return[3,9];return[4,l.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(o)throw s;return[7];case 11:return[7];case 12:return[2]}})})()},[h]);var L=(0,s.useCallback)(function(e){return!!N.current&&(N.current(e),!0)},[N]);return(0,o.jsx)(M.View,{css:et,children:(0,o.jsx)(J,{shell:y,shellMetadata:T,shellRef:b,performPaneOperation:g,currentPromptLineNumber:w,isGeneratePromptVisible:_,sendToShellChannel:L,openSearchAndReplace:R,openAgentWithMessage:O,onCloseGeneratePrompt:k,searchState:S,setSearchState:C})})}e.s(["ShellPid2",()=>en],573598)},249041,602259,272553,e=>{"use strict";var t,n=e.i(276385),r=e.i(960933),i=e.i(862927),a=e.i(116235),o=e.i(840111),s=e.i(394212),l=e.i(297083),u=e.i(721281),c=e.i(878420),d=e.i(64386),f=e.i(530658),p=e.i(817556),h=e.i(389959),m=e.i(255615),g=e.i(625251),x=e.i(167392),y=e.i(602686),b=e.i(269848),w=e.i(40916),_=e.i(346781),k=e.i(491194),S=e.i(47503),C=e.i(993796),j=e.i(207237),T=e.i(858248),E=e.i(709485),R=e.i(299798),I=e.i(927158),A=e.i(529810),P=e.i(106020),D=e.i(573598),O=e.i(759025),N=e.i(782672),M=e.i(384401);e.i(282890);var L=e.i(66718);e.i(545082);var B=e.i(663762),V=e.i(259493),F=e.i(210481),U=e.i(480028),G=e.i(446530),$=e.i(907371),H=e.i(613355),z=e.i(136540),W=e.i(119274),q=e.i(960178),K=e.i(751273),Y=e.i(625484),Q=e.i(73213),X=(0,G.cssRecord)({wrapper:[H.rcss.height("100%"),H.rcss.flex.column],headerWrapper:[H.rcss.border({direction:"bottom",color:U.tokens.outlineDimmest}),H.rcss.height(28)],failureWrapper:[H.rcss.color.accentNegativeStronger],terminalWrapper:[H.rcss.height("100%"),H.rcss.flex.growAndShrink(1)],shellListItemWrapper:[H.rcss.width("100%"),H.rcss.overflow("hidden")],shellListButton:[H.rcss.viewStyle,H.rcss.p(2),H.rcss.height(22),H.rcss.rowWithGap(8),H.rcss.align.center,H.rcss.flex.shrink(1),{transitionProperty:"background-color, box-shadow, opacity",opacity:.8}],shellListButtonLabel:[H.rcss.display.flex,H.rcss.align.center,H.rcss.rowWithGap(8),H.rcss.flex.shrink(1)],shellListItem:[H.rcss.display.flex,H.rcss.rowWithGap(8),H.rcss.borderRadius(),H.rcss.px(6),H.rcss.py(4),H.rcss.align.center,H.rcss.color.foregroundDefault,H.rcss.cursor.pointer,{transitionProperty:"background-color, box-shadow",backgroundColor:"transparent",borderWidth:1,borderStyle:"solid",borderColor:"transparent",outline:"2px solid ".concat(U.tokens.accentPrimaryDefault),outlineOffset:"-2px",outlineColor:"transparent"},{"&[data-hovered],&[data-focused]":{backgroundColor:U.tokens.interactiveBackground},"&[data-selected]":{backgroundColor:U.tokens.interactiveBackgroundActive},"&[aria-disabled]":{color:U.tokens.foregroundDimmest,cursor:"not-allowed"}}],shellListItemText:[H.rcss.font.code,H.rcss.fontSize(U.tokens.fontSizeSmall),H.rcss.flex.shrink(0)],shellListItemCommand:[H.rcss.font.code,H.rcss.fontSize(U.tokens.fontSizeSmall),H.rcss.flex.growAndShrink(1),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],shellListCurrentText:[H.rcss.fontSize(U.tokens.fontSizeSmall),H.rcss.color.greyDefault],shellListNotRunningText:[H.rcss.fontSize(U.tokens.fontSizeSmall),H.rcss.color.greyDefault],runningShellsCountBadge:[H.rcss.width(18),H.rcss.height(18),H.rcss.align.center,H.rcss.justify.center,H.rcss.backgroundColor.backgroundHighest,H.rcss.borderRadius("full"),H.rcss.fontSize(U.tokens.fontSizeSmall)]});function Z(e){var t,r,i,a,o,s,l,d,p,m,g,x,y,b,w,R,I,N,B,U,G,$,H,z,W,q,K,Q,Z,ee,et,en,er,ei,ea,eo,es=e.paneId,el=e.performPaneOperation,eu=e.emitPaneMetrics,ec=e.initialPwd,ed=e.initialCmd,ef=e.isActive,ep=(0,f._)((0,h.useState)({state:"not-connected"}),2),eh=ep[0],em=ep[1],eg="connected"===eh.state?eh.id:void 0,ev=(0,S.useCurrentUserId)(),ex=(0,h.useCallback)(function(e){return em({state:"connected",id:e})},[em]),ey=(i=(t={isActive:ef,performPaneOperation:el,emitPaneMetrics:eu}).performPaneOperation,a=t.emitPaneMetrics,o=t.isActive,s=(0,h.useCallback)(function(e){i({operation:"open",secondary:!0,pane:{type:(0,L.getPaneTypeForFile)(e),data:e}})},[i]),l=(0,h.useCallback)(function(e,t){i({operation:"open",secondary:!0,pane:{type:"webview",data:{ports:{type:"local",path:e,port:t}}}})},[i]),d=(0,A.default)().fs,p=(0,j.default)(),m=(0,C.useFlag)({controlName:"flag-leftover-assistant"}),g=(0,h.useRef)(null),x=(0,h.useRef)(""),b=(y=(0,f._)((0,h.useState)(0),2))[0],w=y[1],I=(R=(0,f._)((0,h.useState)(!1),2))[0],N=R[1],B=(0,h.useRef)(!1),U=(0,O.useInBandFinalTermMessages)({onFTCSState:function(e){var t=e.state;t===O.FTCSState.CommandExecuted&&(B.current=!0),t===O.FTCSState.CommandFinished&&(B.current=!1),g.current=t},onOpenGeneratePrompt:function(){B.current||N(!0)},onUpdateCurrentPromptLineNumber:w}),G=(0,h.useCallback)(function(e,t){if(t.startsWith("A")){var n=t.replace(/^A;/,"");(0,T.track)(E.events.SHELL_COMMAND_EVALED,{context:n,replId:p,api:"pid2",pwd:x.current})}t.startsWith("B")&&(x.current=t.replace(/^B;/,""))},[p]),$=(0,h.useCallback)(function(e){return i({operation:"open",pane:e,secondary:!0})},[i]),z=(H=(0,f._)((0,F.default)({openFile:s,listFiles:d.listFiles,openWebview:l,onInBandOSCMessages:(r={},(0,u._)(r,O.FTCS_OSC_ID,U),(0,u._)(r,82,G),r),openPane:$,emitPaneMetrics:a}),2))[0],W=H[1],q=(0,h.useCallback)(function(){N(!1)},[]),K=(0,h.useId)(),Q="scope-shell-".concat(K),(0,M.useCommandScope)(Q,o),(0,M.useCommandBinding)(function(){return[O.generateWithAIInShellCommand.id,{run:function(){!B.current&&m&&N(!0)},scope:Q,bubble:!1}]},[N,m]),(0,V.useSetFocusTarget)(function(){return z},[z]),ee=(Z=(0,f._)((0,h.useState)({isSearching:!1}),2))[0],et=Z[1],en=(0,h.useCallback)(function(){var e;et({isSearching:!0,searchText:null!=(e=null==z?void 0:z._term.getSelection())?e:""})},[z]),er=(0,h.useCallback)(function(){et({isSearching:!1})},[]),ei=(0,h.useCallback)(function(){ee.isSearching?er():en()},[en,er,ee]),ea=(0,h.useCallback)(function(){null==z||z.clear()},[z]),eo=(0,h.useMemo)(function(){return[{match:P.matchLabel,data:{type:"action",label:"Clear Shell",icon:(0,n.jsx)(k.default,{}),run:ea}},{match:P.matchLabel,data:{type:"action",label:"Find in Shell",icon:(0,n.jsx)(_.default,{}),run:en}}]},[en,ea]),(0,V.useSetPaneBindings)(function(){return{commands:[{commands:eo}],type:"shell"}},[eo]),{xterm:z,xtermRef:W,searchState:ee,setSearchState:et,toggleSearch:ei,isGeneratePromptVisible:I,currentPromptLineNumber:b,onCloseGeneratePrompt:q,clearShell:ea});return(0,n.jsxs)(Y.View,{css:X.wrapper,children:[(0,n.jsx)(J,{step:eh,setStep:em,shellId:eg,initialCmd:ed,initialPwd:ec,switchShellSession:ex,toggleSearch:ey.toggleSearch,clearShell:ey.clearShell}),(0,n.jsxs)(Y.View,{css:X.terminalWrapper,children:[ev&&void 0!==eg?(0,n.jsx)(D.ShellPid2,(0,c._)({shellId:eg,paneId:es,performPaneOperation:el,userId:ev},ey)):null,"errored"===eh.state?(0,n.jsx)(Y.View,{css:X.failureWrapper,p:8,children:"Failed to load the Shell."}):null]})]})}function J(e){var t=e.shellId,r=e.step,i=e.setStep,a=e.initialPwd,o=e.initialCmd,s=e.switchShellSession,u=e.toggleSearch,c=e.clearShell,d=(0,h.useRef)(!1),f=(0,I.usePid2Callback)(function(e){return function(t){return(0,l._)(function(){var n;return(0,p._)(this,function(r){switch(r.label){case 0:if(d.current)return[2];return d.current=!0,[4,e.shellExec.spawn.rpc({cmd:"bash",cwd:(null==t?void 0:t.restoreFromPaneState)?a:void 0,initialCmd:(null==t?void 0:t.restoreFromPaneState)?o:void 0,autoCleanup:!0})];case 1:return(n=r.sent()).ok?i({state:"connected",id:n.payload.id}):"UNEXPECTED_DISCONNECT"===n.payload.code?i({state:"not-connected"}):i({state:"errored"}),d.current=!1,[2]}})})()}},[i,a,o]),m=(0,I.usePid2Callback)(function(e){return function(){return(0,l._)(function(){return(0,p._)(this,function(n){switch(n.label){case 0:if(!t)return[3,2];return[4,e.shellExec.kill.rpc({id:t})];case 1:n.sent(),n.label=2;case 2:return[2]}})})()}},[t]);return(0,n.jsxs)(Y.View,{css:X.headerWrapper,grow:0,shrink:0,align:"center",justify:"space-between",row:!0,gap:4,px:4,children:[(0,n.jsxs)(Y.View,{grow:!0,shrink:!0,row:!0,gap:2,align:"center",children:[(0,n.jsx)(ee,{shellId:t,spawnShell:f,switchShellSession:s,step:r}),(0,n.jsx)(er,{})]}),(0,n.jsxs)(Y.View,{shrink:0,row:!0,gap:4,align:"center",children:[(0,n.jsx)(z.IconButton,{alt:"Search in Shell",onClick:function(){u()},children:(0,n.jsx)(_.default,{color:U.tokens.foregroundDimmest})}),(0,n.jsx)(z.IconButton,{alt:"Clear Output",onClick:function(){c()},children:(0,n.jsx)(k.default,{color:U.tokens.foregroundDimmest})}),(0,n.jsx)(z.IconButton,{alt:"Kill Shell",disabled:void 0===m,onClick:function(){null==m||m()},children:(0,n.jsx)(y.default,{color:U.tokens.foregroundDimmest})})]})]})}function ee(e){var t=e.step,r=e.shellId,i=e.spawnShell,a=e.switchShellSession,o=(0,f._)((0,h.useState)([]),2),u=o[0],y=o[1],b=u.find(function(e){return e.id===r});(0,R.usePid2)(function(e,t){var n=t.signal;return(0,l._)(function(){var t,r,i,a,o,l,u,c;return(0,p._)(this,function(d){switch(d.label){case 0:t=e.shellExec.monitorAll.subscribe({},{signal:n}).resReadable,r=!1,i=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),o=(0,s._)(t),d.label=2;case 2:return[4,o.next()];case 3:if(!(r=!(l=d.sent()).done))return[3,5];if(!(u=l.value).ok)return[2];y(u.payload.processes.filter(function(e){return"Running"===e.state})),d.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return c=d.sent(),i=!0,a=c,[3,12];case 7:if(d.trys.push([7,,10,11]),!(r&&null!=o.return))return[3,9];return[4,o.return()];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(i)throw a;return[7];case 11:return[7];case 12:return[2]}})})()},[]),(0,h.useEffect)(function(){"not-connected"===t.state&&(null==i||i({restoreFromPaneState:!0}))},[i,t.state]),(0,h.useEffect)(function(){"connected"!==t.state||u.find(function(e){return e.id===r})||(u.length>0?a(u[0].id):null==i||i())},[r,u,i,t.state,a]);var _=(0,$.useCreateInteractive)({variant:"nofill"});return b&&"Running"===b.state?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(W.PopupMenu,{trigger:(0,n.jsxs)(m.Button,(0,d._)((0,c._)({css:X.shellListButton},_),{children:[(0,n.jsx)(x.default,{size:12}),(0,n.jsx)(Y.View,{css:X.shellListButtonLabel,children:(0,n.jsx)(en,{shellState:b})}),(0,n.jsx)(et,{userIdsToProcessViewIds:b.userIdsToProcessViewIds}),u.length>1?(0,n.jsx)(K.Tooltip,{tooltip:"".concat(u.length," Shells are running"),children:(0,n.jsx)(Y.View,{css:X.runningShellsCountBadge,children:u.length})}):null]})),children:[u.filter(function(e){return"Running"===e.state}).sort(function(e,t){var n,r;return("Running"===e.state&&null!=(n=e.idx)?n:0)-("Running"===t.state&&null!=(r=t.idx)?r:0)}).map(function(e){var t,r=null!=(t=e.command)?t:e.previousCommand,i=e.cwd.replace(/^\/home\/runner/,"~"),o="".concat(i).concat(r?": ".concat(r):""),s=e.id===b.id;return(0,n.jsxs)(g.MenuItem,{css:X.shellListItem,onAction:function(){a(e.id)},textValue:o,children:[(0,n.jsx)(en,{shellState:e}),s?(0,n.jsx)(q.Text,{css:X.shellListCurrentText,children:"Current"}):null,(0,n.jsx)(et,{userIdsToProcessViewIds:e.userIdsToProcessViewIds})]},e.id)}),(0,n.jsx)(W.Separator,{}),(0,n.jsx)(W.MenuItem,{label:"New Shell",icon:(0,n.jsx)(w.default,{}),onAction:function(){null==i||i()}})]})}):null}function et(e){var t=e.userIdsToProcessViewIds,r=(0,B.useActiveUsers)(),i=(0,h.useMemo)(function(){var e;return null!=(e=Object.keys(null!=t?t:{}).map(function(e){return parseInt(e,10)}).map(function(e){return r.find(function(t){return t.id===e})}).filter(Boolean))?e:[]},[t,r]);return 0===i.length?null:(0,n.jsx)(Y.View,{grow:0,shrink:0,row:!0,gap:4,align:"center",children:i.map(function(e){return(0,n.jsx)(Q.default,{user:e,size:16},e.id)})})}function en(e){var t,r=e.shellState;if("Running"!==r.state)return(0,n.jsx)(q.Text,{css:X.shellListNotRunningText,children:"Not Running"});var i=void 0!==r.command||void 0!==r.previousCommand;return(0,n.jsxs)(Y.View,{css:X.shellListItemWrapper,row:!0,children:[(0,n.jsx)(q.Text,{css:X.shellListItemText,children:r.cwd.replace(/^\/home\/runner/,"~")}),i?(0,n.jsxs)(n.Fragment,{children:[":",(0,n.jsx)(q.Text,{css:X.shellListItemCommand,style:{color:void 0===r.command?U.tokens.greyDefault:void 0},children:null!=(t=r.command)?t:r.previousCommand})]}):null]})}function er(){return(0,N.useNixError)()?(0,n.jsx)(K.Tooltip,{tooltip:"The environment is rebuilding in the background due to a change in configuration files",children:(0,n.jsx)(b.default,{color:U.tokens.foregroundDimmest})}):null}var ei=e.i(341727),ea=e.i(716636),eo=r.Type.Object({type:r.Type.Literal("shell"),data:r.Type.Optional(r.Type.Object({initialPwd:r.Type.Optional(r.Type.String()),initialCmd:r.Type.Optional(r.Type.String())}))}),es={Content:function(e){var t,r,i=e.pane,a=e.options;return(0,ei.default)().didConnectOnce?(0,n.jsx)(Z,{paneId:a.paneId,isActive:a.isActive,initialPwd:null==(t=i.data)?void 0:t.initialPwd,initialCmd:null==(r=i.data)?void 0:r.initialCmd,performPaneOperation:a.performPaneOperation,emitPaneMetrics:a.emitPaneMetrics}):null},Icon:function(e){var t=e.size;return(0,n.jsx)(a.IconContext.Provider,{value:{color:U.tokens.blueStrongest,size:t},children:(0,n.jsx)(o.default,{})})},getTitle:function(){return"Shell"},description:"Directly access your App through a command line interface (CLI)",category:ea.PaneCategory.WorkspaceFeatures,decode:function(e){return i.Value.Decode(eo,e)}};e.s(["shellUI",()=>es],249041);var el=e.i(346715),eu=e.i(819906),ec=e.i(761201),ed=["youtube.com","youtube-nocookie.com","vimeo.com","wistia.com","sadanandpai.github.io"],ef=function(e){try{var t=new URL(e).hostname;return ed.some(function(e){return t===e||t.endsWith("."+e)})}catch(e){return!1}},ep=r.Type.Object({type:r.Type.Literal("videoPlayer"),data:r.Type.Object({embedUrl:r.Type.String(),title:r.Type.String()})}),eh={Content:function(e){var t=e.pane.data;return(0,n.jsx)(em,{title:t.title,embedUrl:t.embedUrl})},Icon:function(e){var t=e.size;return(0,n.jsx)(eu.default,{size:t})},getTitle:function(e){return e.data.title},category:ea.PaneCategory.Other,decode:function(e){return i.Value.Decode(ep,e)}};function em(e){var t,r=e.embedUrl,i=e.borderRadius,a=e.title;return ef(r)?(0,n.jsx)("iframe",{title:a,src:r,frameBorder:"0",css:[H.rcss.coverContainer,(t=H.rcss).borderRadius.apply(t,(0,el._)(void 0===i?[0,0,8,8]:i))]}):(0,n.jsxs)("div",{children:["Only YouTube, Vimeo, and Wistia videos are supported."," ",(0,n.jsx)("a",{href:ec.COMMUNITY_URL,target:"_blank",children:"Request more formats here."})]})}e.s(["videoPlayerUI",()=>eh],602259);var eg=e.i(155119),ev=e.i(82259);e.i(877212);var ex=e.i(924908);e.i(925218);var ey=e.i(267103),eb=e.i(641555),ew=e.i(909478),e_=e.i(848327),ek=e.i(712516),eS=e.i(224386),eC=e.i(820228),ej=e.i(965153),eT=e.i(140487),eE=e.i(396776),eR=e.i(916271),eI=(0,G.cssRecord)({toolButton:[H.rcss.display.inlineBlock],actionContent:[H.rcss.width(450),H.rcss.maxWidth("100%"),H.rcss.colWithGap(16)]});function eA(e){var t=e.openNetworkingTool;return(0,n.jsx)(ek.default,{pane:{type:"vnc"},bodyText:(0,n.jsxs)(q.Text,{multiline:!0,children:["No VNC server is currently running with compatible ports available to view. Try running your App, and check the"," ",(0,n.jsx)(eT.Button,{css:eI.toolButton,text:"Networking tool",iconLeft:(0,n.jsx)(eS.default,{}),size:"small",onClick:t})," ","to ensure ports are being forwarded correctly."]})})}function eP(){return(0,n.jsx)(ek.default,{pane:{type:"vnc"},bodyText:(0,n.jsx)(q.Text,{multiline:!0,children:"VNC is unavailable as the Agent is testing your App."})})}function eD(e){var t=e.vncUrl,r=e.onRetry;return(0,n.jsx)(ek.default,{pane:{type:"vnc"},action:(0,n.jsxs)(Y.View,{css:eI.actionContent,children:[(0,n.jsx)(eE.StatusBanner,{colorway:"warning",text:(0,n.jsxs)(n.Fragment,{children:["There was an error connecting to the server",t?(0,n.jsxs)(n.Fragment,{children:[" at ",(0,n.jsx)("br",{}),t]}):""]})}),t?(0,n.jsx)(ej.AccordionItem,{headerContent:"Diagnosis",children:(0,n.jsx)(Y.View,{p:8,gap:8,children:(0,n.jsx)(eR.default,{children:"If you see a connection error, it's possible that your internet service provider (ISP) has security settings blocking the URL shown above.\n\nPlease contact your ISP and ask them to unblock the URL. Here are the support links for common ISPs:\n\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n      "})})}):null,(0,n.jsx)(eT.Button,{iconLeft:(0,n.jsx)(eC.default,{}),text:"Refresh connection",onClick:r})]})})}var eO=e.i(739521),eN=e.i(557154),eM=((t=eM||{}).Connecting="Connecting",t.Connected="Connected",t.Disconnected="Disconnected",t.Errored="Errored",t),eL=(0,G.cssRecord)({root:[H.rcss.position.relative,H.rcss.height("100%"),H.rcss.width("100%")],target:[H.rcss.height("100%"),H.rcss.width("100%")],overlay:[H.rcss.coverContainer,H.rcss.backgroundColor.backgroundDefault,{"&:empty":[H.rcss.display.none]}]}),eB={direction:"reverse",state:{isActive:!1},reducer:function(e,t){var n;if((null==(n=e.contents.contents)?void 0:n.$kind)==="subagentRunning"){var r,i=e.contents.contents.subagentRunning;if((null==i||null==(r=i.contents)?void 0:r.$kind)==="uiTestingSubagentEventContents")return t.isActive=e.state===ev.EventState.IN_PROGRESS,!1}}};function eV(e){var t,r,i,a,o=e.openNetworkingTool,s=(0,ew.useIsVNCPortOpened)(),l=(r=(0,ex.useChatter)(),i=(0,ey.useObservable)(r.sessions.agent.current),null!=(t=null==(a=(0,eb.useObservableMemo)(function(){return null==i?void 0:i.reduce(eB,100).result},[i]))?void 0:a.isActive)&&t);return s?l?(0,n.jsx)(eP,{}):(0,n.jsx)(eF,{}):(0,n.jsx)(eA,{openNetworkingTool:o})}function eF(){var e=(0,f._)((0,h.useState)(void 0),2),t=e[0],r=e[1],i=(0,f._)((0,h.useState)(!1),2),a=i[0],o=i[1],s=(0,h.useCallback)(function(){o(!0)},[o]),l=(0,e_.useNoVNC)({password:t,setPassword:r,handlePromptForPassword:s,vncOptions:{scaleViewport:!0,resizeSession:!0,viewOnly:!1}}),u=l.status,c=l.vncUrl,d=l.vncEl,p=l.connect;return(0,n.jsxs)(Y.View,{"data-cy":"vnc",css:eL.root,children:[(0,n.jsx)("div",{ref:d,css:eL.target,"data-cy":"vnc-output-".concat(u.toLowerCase())}),(0,n.jsxs)(Y.View,{css:eL.overlay,children:["Connecting"===u?(0,n.jsx)(ek.default,{pane:{type:"vnc"},loading:!0}):null,"Disconnected"===u?(0,n.jsx)(ek.default,{pane:{type:"vnc"},bodyText:"Disconnected"}):null,"Errored"===u?(0,n.jsx)(eD,{vncUrl:c,onRetry:p}):null]}),(0,n.jsx)(eO.Modal,{isOpen:a,onRequestClose:function(){return o(!1)},children:(0,n.jsx)(eN.default,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"VNC Password",type:"text",onCancel:function(){return o(!1)},onConfirm:function(e){r(e),o(!1)}})})]})}var eU=r.Type.Object({type:r.Type.Literal("vnc")}),eG={Content:function(e){var t=e.options.performPaneOperation,r=(0,h.useCallback)(function(){return t({operation:"open",secondary:!0,pane:{type:"developer",data:{tab:["networking"]}}})},[t]);return(0,n.jsx)(Y.View,{grow:!0,shrink:!0,children:(0,n.jsx)(eV,{openNetworkingTool:r})})},Icon:function(e){var t=e.size;return(0,n.jsx)(eg.default,{size:t})},getTitle:function(){return"VNC"},description:"View your app's desktop screen output",category:ea.PaneCategory.WorkspaceFeatures,decode:function(e){return i.Value.Decode(eU,e)}};e.s(["vncUI",()=>eG],272553)},882303,47580,756e3,666976,325602,226349,714603,779830,483570,312421,714312,939040,e=>{"use strict";var t,n=e.i(276385),r=e.i(960933),i=e.i(862927),a=e.i(116235),o=e.i(819906),s=e.i(999292);e.i(282890);var l=e.i(716636),u=e.i(480028),c=r.Type.Object({type:r.Type.Literal("workflows")}),d={Content:function(){return(0,n.jsx)(s.default,{})},Icon:function(e){var t=e.size;return(0,n.jsx)(a.IconContext.Provider,{value:{color:u.tokens.greenStrongest,size:t},children:(0,n.jsx)(o.default,{})})},getTitle:function(){return"Workflows"},description:"Configure different ways to run your App",category:l.PaneCategory.WorkspaceFeatures,decode:function(e){return i.Value.Decode(c,e)}};e.s(["workflowsUI",()=>d],882303);var f=e.i(878420),p=e.i(64386);function h(e){return(0,n.jsxs)(a.default,(0,p._)((0,f._)({},e),{children:[(0,n.jsx)("path",{fillRule:"evenodd",d:"M1.25 5A2.75 2.75 0 0 1 4 2.25h4.999c.251 0 .485.126.625.334L11.4 5.25H20A2.75 2.75 0 0 1 22.75 8v4.5a.75.75 0 0 1-1.5 0V8c0-.69-.56-1.25-1.25-1.25h-9a.751.751 0 0 1-.625-.335L8.598 3.75H4c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h4a.75.75 0 0 1 0 1.5H4A2.75 2.75 0 0 1 1.25 19V5Z",clipRule:"evenodd"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M22.55 17.646a.854.854 0 0 1 0 1.208l-3.696 3.696a.855.855 0 0 1-1.208-1.209l3.091-3.091-3.091-3.091a.855.855 0 0 1 1.208-1.209l3.696 3.696Z",clipRule:"evenodd"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M17.376 18.854 13.68 22.55a.854.854 0 0 1-1.208-1.209l3.092-3.091-3.092-3.091a.855.855 0 0 1 1.208-1.209l3.696 3.696a.854.854 0 0 1 0 1.208Z",clipRule:"evenodd"})]}))}function m(e){return(0,n.jsxs)(a.default,(0,p._)((0,f._)({},e),{children:[(0,n.jsx)("path",{fillRule:"evenodd",d:"M1.25 5A2.75 2.75 0 0 1 4 2.25h4.999c.251 0 .485.126.625.334L11.4 5.25H20A2.75 2.75 0 0 1 22.75 8v2.5a.75.75 0 0 1-1.5 0V8c0-.69-.56-1.25-1.25-1.25h-9a.751.751 0 0 1-.625-.335L8.598 3.75H4c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h5a.75.75 0 0 1 0 1.5H4A2.75 2.75 0 0 1 1.25 19V5Z",clipRule:"evenodd"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M12.472 17.646a.854.854 0 0 0 0 1.208l3.696 3.696a.854.854 0 0 0 1.208-1.209l-3.092-3.091 3.092-3.091a.855.855 0 0 0-1.208-1.209l-3.696 3.696Z",clipRule:"evenodd"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"m17.646 18.854 3.695 3.696a.854.854 0 0 0 1.209-1.209l-3.092-3.091 3.092-3.091a.854.854 0 1 0-1.209-1.209l-3.695 3.696a.854.854 0 0 0 0 1.208Z",clipRule:"evenodd"})]}))}e.s(["default",()=>h],47580),e.s(["default",()=>m],756e3);var g=e.i(346715),x=e.i(389959),y=e.i(526017),b=e.i(36654),w=e.i(712771),_=e.i(979530),k=e.i(779284),S=e.i(828322),C=e.i(346781),j=e.i(596608),T=e.i(834903),E=e.i(903381),R=e.i(61524),I=e.i(650587);function A(){var e=(0,I.useIsMobile)();return(0,x.useMemo)(function(){return!e&&function(){if("undefined"==typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}()},[e])}e.s(["useCanUploadDir",()=>A],666976);var P=e.i(574203),D=e.i(605526),O=e.i(207237),N=e.i(106020);e.i(429225);var M=e.i(59380);(t={}).AddFile="AddFile",t.AddFolder="AddFolder",t.UploadFile="UploadFile",t.UploadFolder="UploadFolder",t.DownloadZip="DownloadZip",t.Duplicate="Duplicate",t.ShowHiddenFiles="ShowHiddenFiles",t.HideHiddenFiles="HideHiddenFiles",t.OpenTab="OpenTab",t.OpenPane="OpenPane",t.CopyLink="CopyLink",t.CopyFilePath="CopyFilePath",t.CopyFolderPath="CopyFolderPath",t.OpenShellHere="OpenShellHere",t.Rename="Rename",t.Download="Download",t.DownloadFolder="DownloadFolder",t.Delete="Delete",t.OpenWith="OpenWith";var L={AddFile:{type:"AddFile",text:"Add file"},AddFolder:{type:"AddFolder",text:"Add folder"},UploadFile:{type:"UploadFile",text:"Upload files"},UploadFolder:{type:"UploadFolder",text:"Upload folder"},DownloadZip:{type:"DownloadZip",text:"Download as zip"},Duplicate:{type:"Duplicate",text:"Duplicate file"},ShowHiddenFiles:{type:"ShowHiddenFiles",text:"Show hidden files"},HideHiddenFiles:{type:"HideHiddenFiles",text:"Hide hidden files"},OpenTab:{type:"OpenTab",text:"Open tab"},OpenPane:{type:"OpenPane",text:"Open pane"},CopyFilePath:{type:"CopyFilePath",text:"Copy file path"},CopyFolderPath:{type:"CopyFolderPath",text:"Copy folder path"},CopyLink:{type:"CopyLink",text:"Copy link"},OpenShellHere:{type:"OpenShellHere",text:"Open shell here"},Rename:{type:"Rename",text:"Rename"},Download:{type:"Download",text:"Download"},DownloadFolder:{type:"DownloadFolder",text:"Download folder"},Delete:{type:"Delete",text:"Delete"}};e.s(["NodeActions",()=>L],325602);var B=e.i(934226),V=e.i(297083),F=e.i(817556),U=e.i(569384);function G(){var e=(0,U._)(["\n  query FiletreeDownloadZip($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return G=function(){return e},e}var $=(0,e.i(973245).gql)(G()),H=e.i(173738);function z(e){return(0,V._)(function(){var t,n,r;return(0,F._)(this,function(i){switch(i.label){case 0:return[4,null===H.apolloClient||void 0===H.apolloClient?void 0:H.apolloClient.query({query:$,variables:{replId:e}})];case 1:return r=(null==(n=i.sent())||null==(t=n.data)?void 0:t.getRepl.__typename)==="Repl"?n.data.getRepl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}})})()}e.s(["downloadZip",()=>z],226349);var W=e.i(858248),q=e.i(709485);function K(e){(0,W.track)(q.events.FILETREE_USED,e)}e.s(["default",()=>K],714603),e.i(545082);var Y=e.i(423111),Q=e.i(136540);function X(e){var t=e.filetree,r=e.size,i=e.closeFiletree,a=(0,O.default)(),o=(0,D.useOrgId)(a).orgId,s=(0,P.default)(o).banSourceCodeExport,l=(0,Y.useSetAreHiddenFilesVisible)(),c=(0,Y.useAreHiddenFilesVisible)(),d=(0,x.useRef)(null),f=(0,x.useRef)(null),p=A(),h=(0,R.usePreferences)("agentPosition"),I=h.preferences.agentPosition,V=h.update,F=(0,x.useCallback)(function(){var e=[];return p&&e.push({icon:(0,n.jsx)(k.default,{}),label:L.UploadFolder.text,run:function(){f.current&&(f.current.click(),K({replId:a,action:"uploaded",fileType:E.FileType.Directory}))}}),s||e.push({icon:(0,n.jsx)(b.default,{}),label:L.DownloadZip.text,run:function(){return z(a)}},{icon:c?(0,n.jsx)(_.default,{}):(0,n.jsx)(w.default,{}),label:c?L.HideHiddenFiles.text:L.ShowHiddenFiles.text,run:function(){l(!c)}}),t.getExpandedDirs()&&e.push({icon:(0,n.jsx)(y.default,{}),label:"Collapse all",run:function(){var e=t.getExpandedDirs();e&&t.collapse((0,g._)(e))}}),i&&e.push({icon:(0,n.jsx)(m,{}),label:"Close files",run:i}),e.push({icon:"leftSidebar"===I?(0,n.jsx)(j.default,{}):(0,n.jsx)(T.default,{}),label:"Move sidebar to the "+("leftSidebar"===I?"left":"right"),run:function(){V({agentPosition:"leftSidebar"===I?"rightSidebar":"leftSidebar"})}}),{data:{type:"context",label:"Search actions",icon:(0,n.jsx)(C.default,{})},commands:function(){return e.map(function(e){return{match:N.matchLabel,data:{type:"action",label:e.label,run:e.run,icon:e.icon}}})}}},[c,l,a,p,t,s,i,I,V]),U=(0,M.useContextMenu)().openContextMenu,G=(0,x.useRef)(null);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Q.IconButton,{size:r,alt:"menu",tooltipBehavior:"hidden",ref:G,onClick:function(){return G.current&&U({target:G.current,command:F()})},children:(0,n.jsx)(S.default,{color:u.tokens.foregroundDimmest})}),(0,n.jsx)(B.UploadInputs,{fileUploadInputRef:d,dirUploadInputRef:f,uploadFiles:t.upload})]})}e.s(["RootActions",()=>X],779830);var Z=e.i(10581),J=e.i(597865);function ee(){var e,t,n=(0,R.usePreferences)("showFileTreeGitStatus").preferences.showFileTreeGitStatus,r=(0,J.default)(function(e){return(0,V._)(function(){var t,r;return(0,F._)(this,function(i){switch(i.label){case 0:if(!n)return[2,{status:null,error:null}];return[4,e.getRepositoryState()];case 1:if((t=i.sent()).error)return[2,t];if(t.type!==Z.GitRepositoryStateType.NORMAL)return[2,{status:null,error:null}];return[4,e.status()];case 2:if((r=i.sent()).error)return[2,r];return[2,{status:r,error:null}]}})})()},[n]);return r&&!r.error&&(null==(e=r.status)?void 0:e.changes)?function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.set(s.path,{index:s.type.index,worktree:s.type.worktree})}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}(null==(t=r.status)?void 0:t.changes):null}e.s(["useFileTreeGitStatus",()=>ee],483570);var et=e.i(251923);function en(){var e=(0,O.default)(),t=(0,et.default)("fileTree").trackTimeToLoadFileStart;return(0,x.useCallback)(function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(n);var i={action:"select",source:"filetree"};r.newTab?i={action:"newTab",source:"filetree"}:r.newPane&&(i={action:"newPane",source:"filetree"}),K((0,f._)({replId:e},i))},[e,t])}e.s(["useTrackOpenFile",()=>en],312421);var er=e.i(530658),ei=e.i(205104),ea=["json","md","draw","txt"],eo=[".gitignore",".replit"];function es(e,t){var n=new Map,r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l,u=o.value,c=(0,ei.getExt)(u);if(c&&(!t||c.startsWith(t))){var d=null!=(l=n.get(c))?l:0;n.set(c,d+1)}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return(0,g._)(n.entries()).sort(function(e,t){var n=(0,er._)(e,2)[1];return(0,er._)(t,2)[1]-n}).map(function(e){return(0,er._)(e,1)[0]})}function el(e,t){if(e.fileType===E.FileType.Directory||!e.input)return[];if("."===e.input)return eo.map(function(e){return{value:e,highlight:[{from:1,to:e.length}]}});if(e.input.startsWith("."))return eo.filter(function(t){return t.startsWith(e.input)}).map(function(t){return{value:t,highlight:[{from:t.length-e.input.length,to:t.length}]}});var n=(0,ei.getExt)(e.input),r=es(e.siblings.map(function(e){return e.filename}),n);if(r.length<3&&r.push.apply(r,(0,g._)(es(t(),n))),r.length<3){var i=n?ea.filter(function(e){return e.startsWith(n)}):ea;r.push.apply(r,(0,g._)(i))}return(0,g._)(new Set(r)).slice(0,3).map(function(t){var r=e.input;r.endsWith(".")?r=r.slice(0,-1):n&&(r=r.slice(0,-(n.length+1)));var i=r+"."+t;return{value:i,highlight:[{from:e.input.length,to:i.length}]}})}e.s(["getFileExtensionSuggestions",()=>el],714312);var eu=function(e){if(1===e.length)return e[0].type===E.FileType.File?"file":"folder";if(e.length>1){var t=e.filter(function(e){return e.type===E.FileType.File}).length,n=e.filter(function(e){return e.type===E.FileType.Directory}).length,r=t>1?"files":"file",i=n>1?"folders":"folder",a="file";return t>0&&n>0?a="".concat(r," and ").concat(i):t>0?a="".concat(r):n>0&&(a="".concat(i)),"".concat(a)}return""};function ec(e){var t=eu(e),n=1===e.length?t:"".concat(e.length," ").concat(t),r=e.slice(0,5).map(function(e){return e.path}).join(", ");return{name:n,description:e.length>5?"".concat(r," and ").concat(e.length-5," more ").concat(eu(e.slice(5))):r,confirmDescription:n}}e.s(["getDeleteText",()=>ec],939040)},958600,e=>{e.v({root:"Search-module__WdCIWq__root"})},378430,e=>{e.v({header:"Filetree-module__ge4tiq__header",root:"Filetree-module__ge4tiq__root"})},147955,e=>{e.v({content:"index-module__O-X0oa__content",emptyState:"index-module__O-X0oa__emptyState",filetreeButton:"index-module__O-X0oa__filetreeButton",root:"index-module__O-X0oa__root"})},376513,e=>{e.v({container:"PoweredBy-module__lDn-cG__container",hounddogLogo:"PoweredBy-module__lDn-cG__hounddogLogo",semgrepLogo:"PoweredBy-module__lDn-cG__semgrepLogo"})},997574,e=>{e.v({severity:"SeverityIcon-module__PAUhHq__severity"})},218174,e=>{e.v({actionButton:"VulnerabilityActions-module__4c6x0W__actionButton",actionButtonPrimary:"VulnerabilityActions-module__4c6x0W__actionButtonPrimary",fullWidth:"VulnerabilityActions-module__4c6x0W__fullWidth"})},940518,e=>{e.v({filePath:"MaliciousVulnerability-module__wa25vq__filePath",isExpanded:"MaliciousVulnerability-module__wa25vq__isExpanded",maliciousVulnerabilityCode:"MaliciousVulnerability-module__wa25vq__maliciousVulnerabilityCode",vulnerability:"MaliciousVulnerability-module__wa25vq__vulnerability",vulnerabilityHeader:"MaliciousVulnerability-module__wa25vq__vulnerabilityHeader"})},732691,e=>{e.v({dependencyVulnerabilityGroup:"DependencyVulnerability-module__49J-9W__dependencyVulnerabilityGroup",dependencyVulnerabilityName:"DependencyVulnerability-module__49J-9W__dependencyVulnerabilityName",isExpanded:"DependencyVulnerability-module__49J-9W__isExpanded",vulnerability:"DependencyVulnerability-module__49J-9W__vulnerability",vulnerabilityHeader:"DependencyVulnerability-module__49J-9W__vulnerabilityHeader"})},656161,e=>{e.v({filePath:"HoundDogVulnerability-module__CQ_3yG__filePath",hounddogVulnerabilityCode:"HoundDogVulnerability-module__CQ_3yG__hounddogVulnerabilityCode",isExpanded:"HoundDogVulnerability-module__CQ_3yG__isExpanded",vulnerability:"HoundDogVulnerability-module__CQ_3yG__vulnerability",vulnerabilityHeader:"HoundDogVulnerability-module__CQ_3yG__vulnerabilityHeader"})},31741,e=>{e.v({analysisVulnerabilityCode:"SASTVulnerability-module__-8u26G__analysisVulnerabilityCode",filePath:"SASTVulnerability-module__-8u26G__filePath",isExpanded:"SASTVulnerability-module__-8u26G__isExpanded",vulnerability:"SASTVulnerability-module__-8u26G__vulnerability",vulnerabilityHeader:"SASTVulnerability-module__-8u26G__vulnerabilityHeader"})},481121,e=>{e.v({ignoredIssuesContainer:"index-module__f-J0sW__ignoredIssuesContainer",ignoredIssuesText:"index-module__f-J0sW__ignoredIssuesText",lastScanSummaryContainer:"index-module__f-J0sW__lastScanSummaryContainer",lastScanSummaryText:"index-module__f-J0sW__lastScanSummaryText",root:"index-module__f-J0sW__root",scanSettingSurface:"index-module__f-J0sW__scanSettingSurface",scanSettingTitleText:"index-module__f-J0sW__scanSettingTitleText"})},610137,710078,274526,315479,135596,903270,607752,e=>{"use strict";var t,n,r,i,a=e.i(878420),o=e.i(64386),s=e.i(886513),l=e.i(530658),u=e.i(276385),c=e.i(389959),d=e.i(960933),f=e.i(862927),p=e.i(541793),h=e.i(806930),m=e.i(205104),g=e.i(346715),x=e.i(484035),y=e.i(47580),b=e.i(529810),w=e.i(282007),_=e.i(564169);e.i(282890);var k=e.i(66718),S=e.i(788154),C=e.i(162540),j=e.i(259493),T=e.i(62424),E=e.i(493602),R=e.i(144619),I=e.i(296223),A=e.i(185511),P=e.i(294468),D=e.i(297083),O=e.i(817556),N=e.i(564604),M=e.i(978497),L=e.i(756e3),B=e.i(903381),V=e.i(61524),F=e.i(207237);e.i(429225);var U=e.i(59380),G=e.i(779830),$=e.i(160290),H=e.i(483570),z=e.i(1736),W=e.i(312421),q=e.i(714312),K=e.i(939040);e.i(545082);var Y=e.i(423111),Q=e.i(965863),X=e.i(624253),Z=e.i(140487),J=e.i(960178),ee=e.i(625484);function et(e){var t,n=e.paths,r=e.onCancel,i=e.onConfirm;return(0,u.jsxs)(ee.View,{gap:24,children:[(0,u.jsx)(J.Header,{level:1,variant:"headerDefault",children:n.length>1?"Overwrite files?":"Overwrite file?"}),(0,u.jsxs)(J.Text,{children:[(t=(t=n).map(m.getFileName)).length<2?t[0]:"".concat(t.slice(0,-1).join(", ")," and ").concat(t.slice(-1))," already"," ",n.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",n.length>1?"them":"it","? This cannot be undone."]}),(0,u.jsxs)(ee.View,{row:!0,gap:12,justify:"end",children:[(0,u.jsx)(Z.Button,{onClick:function(){return r()},text:"Cancel"}),(0,u.jsx)(Z.Button,{colorway:"negative",onClick:function(){return i()},text:"Yes, overwrite ".concat(n.length>1?"these files":"this file"),iconLeft:(0,u.jsx)(X.default,{})})]})]})}e.s(["default",()=>et],710078);var en=e.i(11986),er=e.i(526017),ei=e.i(402099),ea=e.i(204977),eo=e.i(712771),es=e.i(979530),el=e.i(882848),eu=e.i(516169),ec=e.i(346781),ed=e.i(491194),ef=e.i(240913),ep=e.i(993796),eh=e.i(610357),em=e.i(133294),eg=e.i(106020),ev=e.i(736318),ex=e.i(714603),ey=e.i(480028);function eb(e){return{match:eg.matchLabel,data:{type:"action",label:"Rename",icon:(0,u.jsx)(ea.default,{}),run:e}}}function ew(e){return{match:eg.matchLabel,data:{type:"action",label:"Save file",icon:(0,u.jsx)(eu.default,{}),run:e}}}function e_(e){return[{label:"Add file",icon:(0,u.jsx)(N.default,{}),run:function(){return e(B.FileType.File)}},{label:"Add folder",icon:(0,u.jsx)(M.default,{}),run:function(){return e(B.FileType.Directory)}}].map(function(e){var t=e.label,n=e.icon,r=e.run;return{match:eg.matchLabel,data:{type:"action",label:t,icon:n,run:r}}})}function ek(e){return[{label:"Copy file path",icon:(0,u.jsx)(en.default,{}),run:function(){return(0,eh.default)(e)}},{label:"Copy link",icon:(0,u.jsx)(el.default,{}),run:function(){return(0,eh.default)((0,ev.createDeeplinkURL)({path:e}))}}].map(function(e){var t=e.label,n=e.icon,r=e.run;return{match:eg.matchLabel,data:{type:"action",label:t,icon:n,run:r}}})}function eS(e){return{match:eg.matchLabel,data:{type:"action",label:"Duplicate file",icon:(0,u.jsx)(ei.default,{}),run:e}}}function eC(e){return{match:eg.matchLabel,data:{type:"action",icon:(0,u.jsx)(ed.default,{color:ey.tokens.redDefault}),label:"Delete",run:e}}}function ej(){var e=(0,F.default)(),t=(0,b.default)().fs,n=(0,ep.useFlag)({controlName:"flag-direct-file-downloads"}),r=(0,c.useCallback)(function(r,i){var a=r.path,o=[{data:{type:"group",key:"rename"},commands:function(){return[eb(function(){return i.rename(a)})]}}];return(0,m.isOTFile)(a)&&o.push({data:{type:"group",key:"saveFile"},commands:function(){return[ew(function(){return(0,D._)(function(){return(0,O._)(this,function(e){switch(e.label){case 0:return[4,t.flush(new Set([a]),B.FlushSource.MANUAL_SAVE)];case 1:return e.sent(),[2]}})})()})]}}),o.push({data:{type:"group",key:"copy"},commands:function(){return ek(a)}}),o.push(eS(function(){return(0,D._)(function(){var n;return(0,O._)(this,function(r){switch(r.label){case 0:n=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,em.default)(a,t)];case 2:return n=r.sent(),[3,4];case 3:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 4:return(0,ex.default)({replId:e,action:"duplicated",fileType:B.FileType.File}),i.rename(n),[2]}})})()})),o.push((0,A.createDownloadCommand)(a,t,n)),o.push({data:{type:"group",key:"deleteFile"},commands:function(){return[eC(function(){return i.deleteNodes(r)})]}}),o},[e,t,n]),i=(0,Y.useSetAreHiddenFilesVisible)(),a=(0,Y.useAreHiddenFilesVisible)(),o=(0,c.useCallback)(function(e,t){var n=e.path,r=n===ef.ROOT_PATH,o=r?[]:[{data:{type:"group",key:"rename"},commands:function(){return[eb(function(){return t.rename(e.path)})]}}];return o.push.apply(o,(0,g._)(e_(function(n){return t.create(n,e.path)}))),r||o.push({data:{type:"group",key:"copy"},commands:function(){return ek(n)}}),t.getExpandedDirs()&&o.push({match:eg.matchLabel,data:{icon:(0,u.jsx)(er.default,{}),type:"action",label:"Collapse "+(r?"all":"child folders"),run:function(){var e=t.getExpandedDirs(n);e&&t.collapse((0,g._)(e))}}}),r||o.push({data:{type:"group",key:"deleteFile"},commands:function(){return[eC(function(){return t.deleteNodes(e)})]}}),r&&o.push({data:{type:"group",key:"hiddenFiles"},commands:function(){return[{match:eg.matchLabel,data:{type:"action",label:(a?"Hide":"Show")+" hidden files",icon:a?(0,u.jsx)(es.default,{}):(0,u.jsx)(eo.default,{}),run:function(){i(!a)}}}]}}),o},[a,i]);return(0,c.useCallback)(function(e,t){return{data:{type:"context",label:"Search actions",icon:(0,u.jsx)(ec.default,{})},commands:function(){return e.type===B.FileType.Directory?o(e,t):r(e,t)}}},[r,o])}e.s(["getCopyCommands",()=>ek,"getCreateCommands",()=>e_,"getDeleteCommand",()=>eC,"getDuplicateCommand",()=>eS,"getRenameCommand",()=>eb,"getSaveCommand",()=>ew,"useGetContextMenuCommand",()=>ej],274526);var eT=e.i(721281),eE=e.i(6560),eR=e.i(980338),eI=e.i(958600),eA=(0,ey.cvarsFrom)("Search.module.css",["--input-height"]),eP={type:"context",icon:(0,u.jsx)(ec.default,{}),label:"",description:"Search..."};function eD(e){var t=e.openFile,n=(0,b.default)().fs,r=(0,Q.useGetRecentFiles)(),i=(0,z.useShouldHideFileInWorkspace)(),a=(0,c.useMemo)(function(){var e=(0,eE.createFindOrCreateFileCommand)({openFile:function(e){return t(e.path)},fs:n,shouldHideFile:i,getRecentFiles:r});return e.data=eP,delete e.match,e},[t,n,i,r]);return(0,u.jsx)(ee.View,{clsx:eI.default.root,style:(0,eT._)({},eA.inputHeight,"32px"),children:(0,u.jsx)(eR.CommandBar,{fullWidth:!0,command:a,openOnInput:!0,compact:!0})})}var eO=e.i(173703),eN=e.i(136540),eM=e.i(739521),eL=e.i(557862),eB=e.i(378430);function eV(e){var t,n,r,i,s,d,f,p,h,m,g,x,y,w,_,k,S,C,j,T=e.openFile,E=e.currentPath,R=e.onClose,I=(n=(t={openFile:T,currentPath:E}).openFile,r=t.currentPath,i=(0,F.default)(),d=(s=(0,l._)((0,c.useState)(null),2))[0],f=s[1],p=(0,W.useTrackOpenFile)(),h=(0,z.useShouldHideFileInWorkspace)(!0),m=(0,c.useCallback)(function(e){return!h(e.filename)},[h]),g=(0,b.default)().fs,x="cmdOrCtrlKey"===(0,V.usePreferences)("multiselectModifierKey").preferences.multiselectModifierKey?"cmdOrCtrlKey":"altKey",y=(0,Q.useGetRecentFiles)(),w=(0,c.useCallback)(function(e){return(0,q.getFileExtensionSuggestions)(e,y)},[y]),_=(0,U.useContextMenu)().onContextMenu,k=ej(),S=(0,Y.useSetFileRenameInProgress)(),C=(0,$.useFiletree)({fs:g,filter:m,fontSize:13,onFileSelect:function(e){var t=e.path;n(t),p(t)},onCreate:function(e){e.type===B.FileType.File&&n(e.path)},multiselectModifierKey:x,onConflicts:function(e){return f({type:"conflicts",data:e})},onDeleteNodes:function(e){return f({type:"deleteNode",data:e})},onContextMenu:function(e,t){return _(e,{command:k(t,C)})},autocomplete:w,localCacheKey:i+":sidebar",onFileRenameStart:S,onFileRenameEnd:function(){return S(null)}}),j=(0,H.useFileTreeGitStatus)(),(0,c.useEffect)(function(){return C.setFileStatus(j)},[C,j]),(0,c.useEffect)(function(){(0,D._)(function(){return(0,O._)(this,function(e){switch(e.label){case 0:if(null===r)return C.select(null),[2];return[4,C.select({path:r,type:B.FileType.File})];case 1:if(e.sent(),r!=r)return[2];return C.scrollToPath(r),[2]}})})()},[r,C]),{filetree:C,activeModal:d,closeModal:function(){return f(null)}}),A=I.filetree,P=I.activeModal,X=I.closeModal;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(eO.ShadesSurface,{clsx:eB.default.root,translate:"no",elevate:!1,children:[(0,u.jsxs)(ee.View,{clsx:eB.default.header,align:"center",justify:"space-between",row:!0,children:[(0,u.jsxs)(ee.View,{row:!0,gap:2,align:"center",children:[(0,u.jsx)(eN.IconButton,{size:28,alt:"Close files",onClick:R,children:(0,u.jsx)(L.default,{})}),(0,u.jsx)(J.Text,{variant:"small",children:"Files"})]}),(0,u.jsxs)(ee.View,{row:!0,justify:"end",align:"center",children:[(0,u.jsx)(eN.IconButton,{size:28,alt:"New file",dataCy:"filetree-add-file",onClick:function(){A.create(B.FileType.File)},children:(0,u.jsx)(N.default,{})}),(0,u.jsx)(eN.IconButton,{size:28,alt:"New folder",onClick:function(){A.create(B.FileType.Directory)},children:(0,u.jsx)(M.default,{})}),(0,u.jsx)(G.RootActions,{size:28,filetree:A})]})]}),(0,u.jsxs)(ee.View,{grow:!0,shrink:!0,children:[(0,u.jsx)(eD,{openFile:T}),(0,u.jsx)(ee.View,{grow:!0,shrink:!0,children:(0,u.jsx)($.Filetree,{store:A.store})})]})]}),(0,u.jsxs)(eM.Modal,{isOpen:!!P,onRequestClose:X,children:[(null==P?void 0:P.type)==="conflicts"?(0,u.jsx)(et,{paths:P.data.conflicts.map(function(e){return e.path}),onCancel:X,onConfirm:function(){var e=P.data;"move"===e.type?A.move({nodes:e.nodes,to:e.to,overwrite:!0}):A.upload({files:e.files,parentPath:e.to,overwrite:!0}),X()}}):null,(null==P?void 0:P.type)==="deleteNode"?(0,u.jsx)(eL.default,(0,o._)((0,a._)({},(0,K.getDeleteText)(P.data.nodes)),{delete:function(){return P.data.confirm()},hideModal:X})):null]})]})}var eF=e.i(959406),eU=e.i(827759),eG=e.i(147955);function e$(e){var t,n,r=e.performPaneOperation,i=null!=(n=null==(t=e.data)?void 0:t.path)?n:null,o=(0,l._)((0,c.useState)(!i),2),s=o[0],d=o[1],f=(0,c.useCallback)(function(e){r({operation:"replace",pane:(0,eF.getPaneForFile)(e)})},[r]),p=(0,A.useFileCommands)({path:i,performPaneOperation:r});(0,j.useSetPaneBindings)(function(){if(p)return{commands:[{commands:p?(0,g._)(p):[]}]}},[p]);var h=(0,_.useCodeEditorView)();return(0,u.jsxs)(ee.View,{clsx:eG.default.root,grow:!0,shrink:!0,row:!0,children:[s?(0,u.jsx)(eV,{onClose:function(){return d(!1)},openFile:f,currentPath:null!=i?i:null}):null,(0,u.jsxs)(ee.View,{clsx:eG.default.root,grow:!0,shrink:!0,children:[(0,u.jsxs)(eU.Header,{children:[(0,u.jsxs)(eU.HeaderLeft,{noPadding:!s,children:[s?null:(0,u.jsx)(eN.IconButton,{size:28,alt:"Open files",onClick:function(){return d(!0)},clsx:eG.default.filetreeButton,children:(0,u.jsx)(y.default,{})}),i?(0,u.jsx)(u.Fragment,{children:s?(0,u.jsx)(u.Fragment,{children:h?(0,u.jsx)(x.CodeNav,{view:h}):null}):(0,u.jsx)(R.FileBreadcrumbs,{path:i,onFileClick:f,children:h?(0,u.jsx)(x.CodeNav,{view:h}):null})}):null]}),(0,u.jsx)(eU.HeaderRight,{children:i?(0,u.jsx)(T.FileActions,{path:i,performPaneOperation:e.performPaneOperation,isReadOnly:e.isReadOnly}):null})]}),i&&(0,T.isCustomInstructionFile)(i)?(0,u.jsx)(T.CustomInstructionBanner,{}):null,(0,u.jsx)(ee.View,{grow:!0,shrink:!0,clsx:eG.default.content,children:(0,u.jsx)(eH,(0,a._)({},e))})]})]})}function eH(e){var t,n,r,i,a,o=(0,b.default)().fs,s=e.performPaneOperation,l=e.data,d=null!=(r=null==(t=e.data)?void 0:t.path)?r:null,f=null!=(i=null==(n=e.data)?void 0:n.type)?i:(0,k.getPaneTypeForFile)({path:d}),p=void 0,h=void 0;(null==l?void 0:l.type)==="codeEditor"&&(p=l.line,h=l.col);var m=(0,c.useMemo)(function(){return{line:p,col:h}},[p,h]),g=(0,c.useCallback)(function(){s({operation:"replace",pane:{type:"codeEditor",data:{path:d}}})},[s,d]);if(!d)return(0,u.jsx)(ee.View,{clsx:eG.default.emptyState,align:"center",justify:"center",children:(0,u.jsx)(J.Text,{color:"dimmest",children:"No file open"})});switch(f){case"media":return(0,u.jsx)(P.Content,{centered:!0,children:(0,u.jsx)(I.default,{filePath:d,fs:o})});case"binary":return(0,u.jsx)(S.BinaryPaneContent,{path:d});case"draw":return(0,u.jsxs)(P.Content,{children:[(0,u.jsx)(w.default,{fs:o,filePath:d})," "]});default:return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(E.default,{filePath:d,isHidden:null!=(a=e.isHidden)&&a,deeplink:m,onDeeplinkUpdated:g,hideMobileKeyboardToolbar:!0,performPaneOperation:e.performPaneOperation},d),(0,u.jsx)(C.PaneActions,{path:d,performPaneOperation:e.performPaneOperation})]})}}var ez=e.i(716636),eW=e.i(630818),eq=d.Type.String({minLength:1}),eK=d.Type.Object({type:d.Type.Literal("codeEditor"),path:d.Type.Union([eq,d.Type.Null()]),line:d.Type.Optional(d.Type.Number()),col:d.Type.Optional(d.Type.Number())}),eY=d.Type.Object({type:d.Type.Optional(d.Type.Union([d.Type.Literal("draw"),d.Type.Literal("media"),d.Type.Literal("binary"),d.Type.Literal("markdown"),d.Type.Literal("csv")])),path:eq}),eQ=d.Type.Object({type:d.Type.Literal("file"),data:d.Type.Optional(d.Type.Union([eK,eY]))}),eX={Content:function(e){var t=e.options,n=(0,s._)(e,["options"]),r=t.performPaneOperation,i=(0,l._)((0,c.useState)(function(){return(0,p.createStore)()}),1)[0];return(0,u.jsx)(_.CodeEditorViewContext.Provider,{value:i,children:(0,u.jsx)(e$,(0,o._)((0,a._)({isReadOnly:!1,isHidden:t.isHidden},n.pane),{performPaneOperation:r}))})},Icon:function(e){var t=e.size,n=e.pane.data;return(null==n?void 0:n.path)?(0,u.jsx)(eW.default,{path:n.path,size:t}):(0,u.jsx)(h.default,{size:t})},getTitle:function(e){var t;return(null==(t=e.data)?void 0:t.path)?(0,m.getFileName)(e.data.path):"Code"},category:ez.PaneCategory.WorkspaceFeatures,decode:function(e){return f.Value.Decode(eQ,e)},description:"View and edit files"};e.s(["fileUI",()=>eX],610137),e.i(877212);var eZ=e.i(924908);e.i(925218);var eJ=e.i(267103),e0=e.i(602686),e1=e.i(116235),e2=e.i(269848),e3=e.i(255701),e5=e.i(357253),e4=((t={}).DEPLOYMENT_PANE_COVER_PAGE="deployment_pane_cover_page",t.DEPLOYMENT_PANE_FINAL_PAGE="deployment_pane_final_page",t.REDEPLOY_PANE="redeploy_pane",t.SECURITY_SCANNER_PANE="security_scanner_pane",t),e8=((n={}).Dependency="dependency",n.Analysis="analysis",n.Malicious="malicious",n.Hounddog="hounddog",n);e.s(["RunScanContext",()=>e4,"VulnerabilityTypes",()=>e8],315479);var e6=e.i(858248),e7=e.i(709485),e9=e.i(394212),te=e.i(830675),tt=e.i(299798),tn=e.i(927158),tr=e.i(852819),ti=(0,p.atom)(null),ta=(0,p.atom)(null),to=(0,p.atom)(!0),ts=(0,p.atom)(!0);function tl(){return(0,tr.useSet)(ti)}var tu=e.i(257982),tc=((r={}).INFO="info",r.LOW="low",r.MODERATE="moderate",r.HIGH="high",r.CRITICAL="critical",r);function td(e){var t=e.toLowerCase();switch(t){case"info":case"low":case"moderate":case"high":case"critical":return t;case"medium":return"moderate";default:throw Error("Unknown severity: ".concat(e))}}function tf(e){(0,e6.track)(e7.events.SECURITY_SCAN,{action:"run_scan_clicked",context:e})}function tp(e){try{var t=[],n=[],r=[],i=[];e.forEach(function(e){var a=e.kind;switch(a){case"dependencyAudit":t.push(e);break;case"sast":n.push(e);break;case"maliciousFile":r.push(e);break;case"hounddog":i.push(e);break;default:(0,tu.default)(a)}});try{var a,o=(a={},(0,eT._)(a,tc.INFO,[]),(0,eT._)(a,tc.LOW,[]),(0,eT._)(a,tc.MODERATE,[]),(0,eT._)(a,tc.HIGH,[]),(0,eT._)(a,tc.CRITICAL,[]),(0,eT._)(a,"majorBumpLibs",[]),a);t.forEach(function(e){var t;o[td(e.severity.level)].push(e.package.name),(null==(t=e.fix)?void 0:t.requiresMajorUpdate)&&o.majorBumpLibs.push(e.package.name)}),(0,e6.track)(e7.events.DEPENDENCY_AUDIT_COMPLETED,{vulnerabilities:o})}catch(e){te.withScope(function(t){t.setTag("securityScan",!0),t.setTag("scanType","dependency"),t.setExtra("originalError",e),te.captureException(Error("Error tracking dependency audit"))})}try{var s,l=(s={},(0,eT._)(s,tc.INFO,[]),(0,eT._)(s,tc.LOW,[]),(0,eT._)(s,tc.MODERATE,[]),(0,eT._)(s,tc.HIGH,[]),(0,eT._)(s,tc.CRITICAL,[]),s);n.forEach(function(e){l[td(e.severity)].push({checkId:e.checkId,path:e.location.path,message:e.message.slice(0,100)})}),(0,e6.track)(e7.events.SAST_SCAN_COMPLETED,{vulnerabilities:l})}catch(e){te.withScope(function(t){t.setTag("securityScan",!0),t.setTag("scanType","sast"),t.setExtra("originalError",e),te.captureException(Error("Error tracking SAST scan"))})}!function(e){try{var t=(a={},(0,eT._)(a,tc.INFO,[]),(0,eT._)(a,tc.LOW,[]),(0,eT._)(a,tc.MODERATE,[]),(0,eT._)(a,tc.HIGH,[]),(0,eT._)(a,tc.CRITICAL,[]),a),n=!0,r=!1,i=void 0;try{for(var a,o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;t[td(l.severity)].push({name:l.name,paths:l.paths})}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}(0,e6.track)(e7.events.MALICIOUS_FILE_SCAN_COMPLETED,{vulnerabilities:t})}catch(e){te.withScope(function(t){t.setTag("securityScan",!0),t.setTag("scanType","maliciousFile"),t.setExtra("originalError",e),te.captureException(Error("Error tracking malicious file scan"))})}}(r),function(e){try{var t=(a={},(0,eT._)(a,tc.INFO,[]),(0,eT._)(a,tc.LOW,[]),(0,eT._)(a,tc.MODERATE,[]),(0,eT._)(a,tc.HIGH,[]),(0,eT._)(a,tc.CRITICAL,[]),a),n=!0,r=!1,i=void 0;try{for(var a,o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;t[td(l.severity)].push({remediationStrategy:l.remediationStrategy,privacyViolations:l.privacyViolations,message:l.message})}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}(0,e6.track)(e7.events.HOUNDDOG_SCAN_COMPLETED,{vulnerabilities:t})}catch(e){te.withScope(function(t){t.setTag("securityScan",!0),t.setTag("scanType","hounddog"),t.setExtra("originalError",e),te.captureException(Error("Error tracking hounddog scan"))})}}(i)}catch(e){te.withScope(function(t){t.setTag("securityScan",!0),t.setExtra("originalError",e),te.captureException(Error("Error tracking security scan result"))})}}e.s(["trackRunScanClickEvent",()=>tf,"trackSecurityScanResult",()=>tp],135596);var th=((i={}).Fixed="fixed",i.Pending="pending",i);function tm(e){return!e||"fixed"===e.status}function tg(e){return e.type!==e8.Dependency||e.fix.available&&!e.fix.breakingChanges&&"npm"===e.ecosystem}var tv=function(e,t){var n=t.filter(function(e){var t=td("string"==typeof e.severity?e.severity:e.severity.level);return t===tc.CRITICAL||t===tc.HIGH}).map(function(e){var t,n;return"dependencyAudit"===e.kind?(t=e.id,n="npm"):"hounddog"===e.kind?(t=e.hash,n="hounddog"):(t=e.fingerprint,n="sast"===e.kind?"opengrep":"replit"),(0,o._)((0,a._)({},e),{severity:td("string"==typeof e.severity?e.severity:e.severity.level),id:t,source:n})}),r=[];e.forEach(function(e){var t=n.find(function(t){return t.id===e.id});switch(e.status){case"fixed":t&&r.push({id:e.id,status:"pending"});break;case"pending":t||r.push({id:e.id,status:"fixed"});break;default:(0,tu.default)(e.status)}});var i=n.map(function(e){var t,n,r=e.kind;switch(r){case"dependencyAudit":return n=e.fix&&e.fix.available?e.fix.requiresMajorUpdate?{available:!0,breakingChanges:!0,version:{name:e.package.name,version:e.fix.version,isSemVerMajor:!0}}:{available:!0,breakingChanges:!1}:{available:!1},{type:e8.Dependency,id:e.id,status:"pending",ecosystem:e.package.ecosystem,severity:e.severity,name:e.package.name,source:e.source,isDirect:null==(t=e.dependency)?void 0:t.isDirect,currentVersion:e.package.version,fix:n,ignored:e.ignored};case"sast":return{type:e8.Analysis,id:e.fingerprint,name:e.checkId,status:"pending",message:e.message,location:e.location,severity:td(e.severity),source:"opengrep",ignored:e.ignored};case"maliciousFile":return{type:e8.Malicious,id:e.fingerprint,name:e.name,status:"pending",paths:e.paths,message:"".concat(e.description," ").concat(e.mitigation),severity:td(e.severity),source:"replit",ignored:e.ignored};case"hounddog":return{type:e8.Hounddog,id:e.hash,name:e.ruleIds.join(", "),status:"pending",message:e.message,location:e.location,ruleIds:e.ruleIds,privacyViolations:e.privacyViolations,remediationStrategy:e.remediationStrategy,remediationSummary:e.remediationSummary,remediationPrompt:e.remediationPrompt,severity:td(e.severity),source:"hounddog",ignored:e.ignored};default:(0,tu.default)(r)}}),s=e.map(function(e){var t=i.find(function(t){return t.id===e.id}),n=r.find(function(t){return t.id===e.id});return n?(0,o._)((0,a._)({},e,t),{status:n.status}):(0,o._)((0,a._)({},e,t),{status:e.status})});return(0,g._)(s).concat((0,g._)(i.filter(function(t){return!e.find(function(e){return e.id===t.id})})))},tx=new Set;function ty(){var e=(0,ep.useFlag)({controlName:"flag-hounddog-scan",default:!1}),t=(0,l._)((0,c.useState)(!1),2),n=t[0],r=t[1],i=(0,l._)((0,c.useState)(!1),2),a=i[0],o=i[1],s=(0,c.useRef)(null),u=(0,tr.useGet)(to),d=(0,tr.useGet)(ts),f=(0,c.useRef)(null),p=(0,tr.useValue)(ti),h=tl(),m=(0,tr.useValue)(ta),g=(0,tr.useSet)(ta),x=(0,tr.useValue)(to),y=(0,tr.useSet)(to),b=(0,tr.useValue)(ts),w=(0,tr.useSet)(ts),_=(0,c.useCallback)(function(){if(s.current){var t=u(),n=d(),r=[];n&&(r=["dependencyAudit","maliciousFile","sast"]),e&&t&&r.push("hounddog"),s.current.write({kind:"start-scan",scanners:r}),o(!0)}},[u,d,e]);(0,tt.usePid2)(function(t,n){return(0,D._)(function(t,n){var r,i,a,l,c,p,m,x,y,b,w,_,k;return(0,O._)(this,function(S){switch(S.label){case 0:r=n.signal,i=u(),a=d(),l=[],a&&(l=["dependencyAudit","maliciousFile","sast"]),e&&i&&l.push("hounddog"),p=(c=t.securityScan.scan.stream({scanners:l},{signal:r})).resReadable,s.current=c.reqWritable,m=!1,x=!1,S.label=1;case 1:S.trys.push([1,6,7,12]),b=function(){var e=_.value;if(!e.ok)return"UNEXPECTED_DISCONNECT"===e.payload.code||"CANCEL"===e.payload.code?"break":("extras"in e.payload&&e.payload.extras&&"scanId"in e.payload.extras&&e.payload.extras.scanId!==f.current||(te.withScope(function(t){t.setTag("securityScan",!0),t.setExtra("riverError",e.payload),te.captureException(Error("Unhandled error during security scan"))}),o(!1),h([])),"continue");var t=e.payload;return"started"===t.kind?(f.current=t.scanId,o(!0),"continue"):null!==f.current&&t.scanId!==f.current?"continue":void(h(function(e){return tv(null!=e?e:[],t.results)}),g(new Date),o(!1),!tx.has(t.scanId)&&(tx.add(t.scanId),tp(t.results)))},w=(0,e9._)(p),S.label=2;case 2:return[4,w.next()];case 3:if(!(m=!(_=S.sent()).done)||"break"===b())return[3,5];S.label=4;case 4:return m=!1,[3,2];case 5:return[3,12];case 6:return k=S.sent(),x=!0,y=k,[3,12];case 7:if(S.trys.push([7,,10,11]),!(m&&null!=w.return))return[3,9];return[4,w.return()];case 8:S.sent(),S.label=9;case 9:return[3,11];case 10:if(x)throw y;return[7];case 11:return[7];case 12:return[2]}})}).apply(this,arguments)},[u,d,h,g,o,e]);var k=(0,tn.usePid2Callback)(function(e){return function(){return(0,D._)(function(){return(0,O._)(this,function(t){switch(t.label){case 0:return r(!0),[4,e.securityScan.fixDependencyAudit.rpc({})];case 1:return t.sent(),r(!1),o(!0),_(),[2]}})})()}},[_]);return{flagHoundDogScan:e,runScan:_,scanResult:p,lastScanDate:m,isScanning:a,isUpdatingDependencies:n,updateDependencies:k,privacyScanEnabled:x,setPrivacyScanEnabled:y,securityScanEnabled:b,setSecurityScanEnabled:w}}var tb=e.i(376513);function tw(){var e=ty().flagHoundDogScan;return(0,u.jsxs)(ee.View,{pb:8,pt:16,gap:8,clsx:tb.default.container,children:[(0,u.jsx)(J.Text,{color:"dimmest",variant:"small",children:"Vulnerability scans are enabled by the following Replit partners:"}),(0,u.jsxs)(ee.View,{gap:16,children:[(0,u.jsxs)(ee.View,{row:!0,align:"center",gap:6,children:[(0,u.jsx)(t_,{}),(0,u.jsx)(J.Text,{color:"dimmest",variant:"small",children:"Security scans are powered by Semgrep Community Edition."})]}),e?(0,u.jsxs)(ee.View,{row:!0,align:"center",gap:6,children:[(0,u.jsx)(tk,{}),(0,u.jsx)(J.Text,{color:"dimmest",variant:"small",children:"Privacy scans are powered by HoundDog.ai."})]}):null]}),e?(0,u.jsxs)(J.Text,{color:"dimmest",variant:"small",children:["Security scanning powered by"," ",(0,u.jsx)("a",{href:"https://semgrep.dev/",target:"_blank",rel:"noopener noreferrer",children:"Semgrep"})," ","and privacy scanning powered by"," ",(0,u.jsx)("a",{href:"https://hounddog.ai/",target:"_blank",rel:"noopener noreferrer",children:"HoundDog.ai"})," ",", both running locally on Replit infrastructure. No code or data is transmitted to any third party, including"," ",(0,u.jsx)("a",{href:"https://semgrep.dev/",target:"_blank",rel:"noopener noreferrer",children:"Semgrep"})," ","or"," ",(0,u.jsx)("a",{href:"https://hounddog.ai/",target:"_blank",rel:"noopener noreferrer",children:"HoundDog.ai"}),"."]}):null]})}function t_(){return(0,u.jsxs)("svg",{clsx:tb.default.semgrepLogo,xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 1670 252",children:[(0,u.jsxs)("g",{fill:"#13bf95",children:[(0,u.jsx)("path",{d:"m412-4e-7c55.22847 0 100 44.77153 100 100 0 55.22847-44.77153 100-100 100s-100-44.77153-100-100c1e-3 -22.75534 7.76297-44.82984 22.00391-62.57812 5.79468 6.661495 7.89062 10.6061 13.99609 20.57812h3.5c-3.0923-7.636258-7.63896-15.06492-13.76367-24.96093 18.96049-21.03049 45.94792-33.03689 74.26367-33.03906zm0 44c-30.92795 0-56 25.07205-56 56 0 30.92795 25.07205 56 56 56s56-25.07205 56-56c0-30.92794-25.07205-56-56-56z"}),(0,u.jsx)("path",{d:"m256 0c-55.22841 0-100 44.77158-100 100 8e-3 22.74213 7.76844 44.80216 22 62.54102 0.04153-0.05203 0.07004-0.09276 0.11133-0.14454 0.01252 0.01556 0.02458 0.03133 0.03711 0.04688 0.96022-1.20705 1.88357-2.443 2.78711-3.69336 4.19703-5.49557 7.10017-10.10355 9.92773-17.07812 0.25397-0.55649 0.51186-1.11021 0.75586-1.67188h3.38086c-0.72386 2.98756-1.74037 5.91654-2.99414 8.88477-2.79519 5.99462-6.2697 12.37905-9.80078 18.10937-0.05698 0.09227-0.10092 0.17302-0.1582 0.26563 18.94128 20.83966 45.79173 32.72679 73.95312 32.74023 28.16139-0.01344 55.01184-11.90057 73.95312-32.74023-0.05728-0.09261-0.10122-0.17336-0.1582-0.26563-3.53108-5.73032-7.00559-12.11475-9.80078-18.10937-1.25377-2.96823-2.27028-5.89721-2.99414-8.88477h3.38086c0.244 0.56167 0.50189 1.11539 0.75586 1.67188 2.82756 6.97457 5.7307 11.58255 9.92773 17.07812 0.90354 1.25036 1.82689 2.48631 2.78711 3.69336 0.01253-0.01555 0.02459-0.03132 0.03711-0.04688 0.04129 0.05178 0.0698 0.09251 0.11133 0.14454 14.23156-17.73886 21.992-39.79889 22-62.54102 0-55.22842-44.77159-100-100-100zm0 44c30.92792 0 56 25.07208 56 56 0 30.92792-25.07208 56-56 56s-56-25.07208-56-56c0-0.966497 0.02388-1.926386 0.07227-2.880859 1.49985-29.58868 25.96631-53.11914 55.92773-53.11914z"}),(0,u.jsx)("path",{d:"m100 0c-55.22848 0-100 44.77152-100 100 0 55.22847 44.77152 100 100 100 55.22847 0 100-44.77153 100-100-1e-3 -22.75534-7.76297-44.82984-22.00391-62.57812-5.79468 6.661495-7.89062 10.6061-13.99609 20.57812h-3.5c3.0923-7.636258 7.63896-15.06492 13.76367-24.96093-18.96049-21.03049-45.94792-33.03689-74.26367-33.03906zm0 44c30.92795 0 56 25.07205 56 56 0 30.92795-25.07205 56-56 56-30.92795 0-56-25.07205-56-56 0-30.92795 25.07205-56 56-56z"})]}),(0,u.jsxs)("g",{fill:"currentColor",children:[(0,u.jsx)("path",{d:"M659.55109 194.4763q-15.41724 0-28.48243-3.92117-13.0652-4.18248-23.51636-12.02494-10.45116-8.10366-18.55228-19.8669l20.64231-23.52687q12.8032 18.0379 24.82438 25.09587 12.01918 6.79666 27.96042 6.79666 9.40715 0 16.98426-2.87559 7.57802-2.87548 12.01918-8.10365 4.44227-5.22817 4.44227-11.76394 0-4.70538-1.56782-8.62645-1.56783-4.18258-4.96488-7.31947-3.39705-3.13698-8.36183-5.75097-4.96487-2.87558-11.49717-4.96677-6.5326-2.09119-14.89423-3.39838-14.11021-3.13698-24.82437-7.84216-10.45116-4.70528-17.76827-11.763938-7.05521-7.058063-10.45116-16.207914-3.39705-9.149252-3.39705-20.389893 0-11.23994 4.96487-20.650891 4.96488-9.672049 13.58721-16.729911 8.62313-7.058063 20.38131-10.7179437Q648.83763 6 662.16483 6q14.89423 0 26.6534 3.6596807 12.01919 3.6596803 21.16533 10.9789423 9.14573 7.058062 15.41723 17.513907l-21.16532 20.650891q-5.48748-8.365056-12.01918-13.854927-6.2714-5.751069-14.11022-8.626454-7.83922-2.875585-16.46225-2.875585-9.66835 0-16.98426 3.136984-7.0552 2.875584-11.23517 8.103557-4.18096 5.228172-4.18096 12.286935 0 5.228172 2.09033 9.672049 2.35164 4.182478 6.5326 7.58076 4.44227 3.398382 11.49717 6.012468 7.05521 2.614186 16.46225 4.443977 14.37122 3.136983 25.60839 8.103557 11.49718 4.705375 19.3363 11.239938 8.10062 6.53527 12.01918 14.90092 4.18096 8.36506 4.18096 18.03791 0 17.7759-8.36182 30.84684-8.10063 12.80893-23.25536 19.86689-15.15523 6.79666-35.80054 6.79666z"}),(0,u.jsx)("path",{d:"M815.75346 194.4763q-21.42632 0-37.88957-8.88785-16.46225-9.14925-25.8694-24.83487-9.14573-15.94591-9.14573-36.33581 0-16.20791 5.22617-29.539839 5.22618-13.33193 14.37122-23.003879 9.40715-9.933547 22.21034-15.16192 13.0652-5.489571 28.22143-5.489571 13.58721 0 25.08538 5.228173 11.75818 4.966773 20.38131 14.115925 8.62313 8.887853 13.0652 21.174888 4.70357 12.286933 4.44227 26.663863l-.26129 11.50294h-111.8317l-6.01009-21.69789h92.50341l-3.91966 4.44398v-6.01247q-.78393-8.365057-5.48749-14.639924-4.70357-6.535166-12.01918-10.194946-7.05521-3.92108-15.67824-3.92108-13.5872 0-22.73334 5.228173-9.14574 4.966674-14.11022 14.900921-4.70357 9.933546-4.70357 24.311876 0 13.85492 5.74869 24.04987 6.01009 10.19495 16.72225 15.94591 10.71317 5.48958 24.82438 5.48958 9.92975 0 18.29028-3.13699 8.36183-3.39838 18.29028-11.76394l14.63322 20.6509q-6.5327 6.27376-15.67824 10.97894-9.14574 4.70537-19.07429 7.31946-9.92975 2.61418-19.5973 2.61418z"}),(0,u.jsx)("path",{d:"M899.25473 191.86632V54.367045h29.52845v28.493849l-4.96487 2.614086q2.35163-6.796664 6.794-12.808932 4.70357-6.012468 11.23517-10.717943 6.5327-4.705376 14.11021-7.319362 7.57752-2.613986 15.41724-2.614086 11.49717 0 20.1203 3.921079 8.88457 3.659681 14.63327 11.239941 6.01 7.58076 8.8845 19.344898l-4.7036-.784246 1.8291-4.443977q3.1357-6.012468 8.1006-11.23994 5.2262-5.489571 11.7582-9.41065 6.5325-4.182478 13.8492-6.273767 7.3166-2.352688 14.1102-2.352688 15.6782 0 25.8694 6.273767 10.1901 6.273767 15.4172 19.082899 5.2262 12.808933 5.2262 31.630837v82.86656h-29.7905V111.0948q0-11.239946-2.8745-18.298908-2.8744-7.058863-8.6231-10.455945-5.7487-3.659681-14.8943-3.659681-6.794 0-13.0652 2.352688-6.0101 2.352687-10.4511 6.535165-4.4423 4.182478-7.0553 9.933448-2.3519 5.489573-2.3519 12.286933v82.08157h-29.78842V110.5725q0-10.19495-3.13565-17.252911-2.87445-7.319461-8.62313-10.978942-5.74869-3.659681-14.11022-3.659681-6.794 0-12.80319 2.352688-6.01009 2.352687-10.45116 6.535165-4.44227 3.92108-7.05521 9.672049-2.35163 5.489572-2.35163 12.024932v82.60457z"}),(0,u.jsx)("path",{d:"M1199.1093 251.996q-14.8942 0-29.7905-4.70527-14.8942-4.70538-24.3003-12.02494l10.9741-22.48188q5.2262 3.92118 12.0192 6.79666 7.0553 3.13699 14.6332 4.70528 7.8393 1.82989 15.6783 1.82989 14.1102 0 23.5163-4.70538 9.4071-4.44397 14.1103-13.59293 4.9648-8.88775 4.9648-22.21988v-25.61886l3.6583 1.56849q-1.3066 8.36505-8.6231 15.68492-7.0554 7.31946-17.7683 12.02493-10.7132 4.44388-21.9494 4.44388-19.3362 0-34.7545-9.14925-15.1552-9.14925-24.0403-25.09587-8.6233-15.94592-8.6233-36.59781t8.6233-36.596804q8.6231-16.207914 23.7783-25.356866 15.1552-9.41065 34.2325-9.41065 7.8393 0 15.1553 2.091189 7.3165 1.82989 13.5872 5.228172 6.2711 3.398382 10.9741 7.58076 4.9647 4.182478 8.1004 8.887753 3.1357 4.705375 3.9196 8.887853l-6.0101 2.091189.2613-31.892831h29.0055V182.98707q0 16.46891-4.9647 29.27784-4.7036 12.80893-14.1102 21.69789-9.1458 8.88785-22.4724 13.33193Q1215.829 252 1199.1038 252Zm1.0452-84.43455q12.2812 0 21.6883-5.75097 9.6684-5.75107 14.8943-15.68492 5.2261-9.93355 5.2261-23.26588 0-13.07093-5.4873-23.265874-5.2263-10.194946-14.6333-15.945916-9.407-5.75107-21.6883-5.75107-12.0192 0-21.4263 6.012469-9.4071 5.751069-14.6332 15.945915-5.2262 10.194946-5.2262 23.003876 0 13.07093 5.2262 23.26588 5.2261 9.93355 14.6332 15.68492 9.4071 5.75097 21.4263 5.75097z"}),(0,u.jsx)("path",{d:"M1297.8108 191.86632V54.367045h29.2664l.5227 43.392771-3.6583-9.933548q2.8743-10.194946 9.9297-18.298903 7.0552-8.365056 16.2013-13.070931 9.1458-4.966674 18.8133-4.966674 4.4423 0 8.6231.784206 4.1809.784206 6.5327 1.82989l-7.8393 32.15383q-3.1356-1.307093-7.0552-2.091189-3.9196-1.045594-7.8392-1.045594-6.794 0-13.0652 2.614086-6.0102 2.614186-10.7132 7.319461-4.4424 4.443877-7.3165 10.71794-2.6131 6.01247-2.6131 13.33193v74.76161z"}),(0,u.jsx)("path",{d:"M1454.2132 194.4763q-21.4264 0-37.8896-8.88785-16.4623-9.14925-25.8684-24.83487-9.1458-15.94591-9.1458-36.33581 0-16.20791 5.2261-29.539839 5.2262-13.33193 14.3713-23.003879 9.4071-9.933547 22.2103-15.16192 13.0652-5.489571 28.2204-5.489571 13.5872 0 25.0844 5.228173 11.7582 4.966773 20.3823 14.115925 8.623 8.887853 13.0652 21.174888 4.7036 12.286933 4.4423 26.663863l-.2615 11.50294h-111.8317l-6.0101-21.69789h92.5034l-3.9197 4.44398v-6.01247q-.7839-8.365057-5.4875-14.639924-4.7034-6.535166-12.0191-10.194946-7.0554-3.92108-15.6783-3.92108-13.5872 0-22.7323 5.228173-9.146 4.966674-14.1102 14.900921-4.7036 9.933546-4.7036 24.311876 0 13.85492 5.7487 24.04987 6.0101 10.19495 16.7222 15.94591 10.7132 5.48958 24.8244 5.48958 9.9297 0 18.2903-3.13699 8.3618-3.39838 18.2903-11.76394l14.6332 20.6509q-6.5326 6.27376-15.6782 10.97894-9.1458 4.70537-19.0743 7.31946-9.9297 2.61418-19.5973 2.61418z"}),(0,u.jsx)("path",{d:"M1532.8144 249.37601V54.367045h29.2664l.2611 31.369834-4.7036-2.352688q1.5679-8.103557 8.8846-15.16192 7.3165-7.319361 17.7682-11.763937 10.7132-4.443977 22.2104-4.443977 18.2903 0 32.4025 9.149252 14.3712 9.149251 22.7343 25.095867Q1670 102.20539 1670 122.85628q0 20.65189-8.3617 36.85781-8.1007 15.94591-22.4723 25.35686-14.1102 9.14926-32.1405 9.14926-12.0192 0-23.2564-4.70528-10.9741-4.70527-18.8132-12.28693-7.8393-7.58066-9.6685-15.94592l7.3168-3.65968v91.75351zm68.724-81.81956q11.4972 0 20.3813-5.75097 9.1458-5.75107 14.3712-15.68492 5.2261-10.19495 5.2261-23.26588 0-12.80893-5.2261-22.74288-4.9648-9.933544-14.1102-15.684914-8.8843-5.75097-20.6423-5.75097t-20.9043 5.75097q-8.8845 5.489571-14.1102 15.684914-5.2262 9.93355-5.2262 22.74288 0 13.07093 5.2262 23.26588 5.2262 9.93355 14.1102 15.68492 9.1456 5.75097 20.9043 5.75097z"})]})]})}function tk(){return(0,u.jsxs)("svg",{clsx:tb.default.hounddogLogo,xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 1274.52 320.46",children:[(0,u.jsxs)("defs",{children:[(0,u.jsxs)("radialGradient",{id:"radial-gradient",cx:123.74,cy:181.05,r:367.45,gradientUnits:"userSpaceOnUse",children:[(0,u.jsx)("stop",{offset:0,stopColor:"#45c4d7"}),(0,u.jsx)("stop",{offset:.51,stopColor:"#4f73b8"}),(0,u.jsx)("stop",{offset:.6,stopColor:"#496bad"}),(0,u.jsx)("stop",{offset:.75,stopColor:"#37558e"}),(0,u.jsx)("stop",{offset:.95,stopColor:"#1b325d"}),(0,u.jsx)("stop",{offset:1,stopColor:"#142950"})]}),(0,u.jsx)("style",{children:".cls-1{fill:url(#radial-gradient)}.cls-2{fill:#4f73b8}.cls-3{fill:#53a6dc}"})]}),(0,u.jsx)("path",{d:"M163.34 283.39a188.56 188.56 0 0 1-40.72 22 2.91 2.91 0 0 1-1.05.12 2.72 2.72 0 0 1-1-.12 188.37 188.37 0 0 1-40.75-22 84.59 84.59 0 0 1-17 1.65c-1.72 0-3.43 0-5.15-.14 26.36 23.11 56.33 34 58 34.61a19.33 19.33 0 0 0 12 0c1.65-.58 31.64-11.5 58-34.61-1.73.1-3.45.14-5.12.14a85 85 0 0 1-17.21-1.65ZM242.89 108.65l-9.84-2.36-3.2-.75c-4.46-1.06-23.12-4.91-23.47-5a1.76 1.76 0 0 0-.41 0 1.5 1.5 0 0 0-.32.1.66.66 0 0 0-.15.07s0 0-.09 0-.3.21-.32.21c-.63.49-3.11 5-3.85 9.08a22.1 22.1 0 0 1-9.12 42.22c-.69 0-1.34 0-2-.09-.39 0-.82.06-1.25.08 3.06 3.18 6.11 6.19 8.91 8.83 2.16 2.08 4.3 4.14 6.43 6.21a93.54 93.54 0 0 1 23.67 38.16c.5 1.44 2.09 5.78 3.64 10.26 9.87-37.28 13.84-85.54 15.24-106.19Zm-9.5 57.08a4.8 4.8 0 1 1 4.53-5.09 4.84 4.84 0 0 1-4.53 5.09Zm2.76-17.21a4.81 4.81 0 1 1 4.47-5.07 4.76 4.76 0 0 1-4.47 5.07ZM121.57 18.63a66.23 66.23 0 0 1 63 46.06c7.42 1 14.15 2.23 20.15 3.49a84.77 84.77 0 0 0-166.26 0c6-1.26 12.73-2.48 20.11-3.52a66.21 66.21 0 0 1 63-46.03Z",className:"cls-1"}),(0,u.jsx)("path",{d:"M189.68 113.28a5.09 5.09 0 0 0-.54 0c-.17 0-.37 0-.54.06-.54.06-1 .15-1.55.25s-1 .24-1.53.39c-.24.07-.48.17-.73.25a10.37 10.37 0 0 0-1.39.59 6.67 6.67 0 0 0-.71.34c-.22.12-.49.25-.71.38l-.6.37-.54.37a1.94 1.94 0 0 0-.42.32 4 4 0 0 0-.56.43c-.08.07-.21.16-.3.25s-.38.33-.58.5a16.1 16.1 0 0 0-2.87 3.51 2.34 2.34 0 0 0-.39.66c-.13.22-.23.44-.38.66a3.51 3.51 0 0 1-.22.48c-.07.17-.15.34-.22.5l-.26.66c-.08.16-.11.33-.17.48s-.17.51-.24.75c-.11.42-.21.85-.3 1.28a2.65 2.65 0 0 0-.13.67 9.94 9.94 0 0 0-.15 1.13c0 .54-.06 1.09-.06 1.62a16.71 16.71 0 0 0 2.56 9 17.56 17.56 0 0 0 1.49 2 14.92 14.92 0 0 0 1.23 1.29c.2.18.37.35.58.52a14.48 14.48 0 0 0 1.21 1c.16.1.31.19.48.31a6.34 6.34 0 0 0 .67.42 15.45 15.45 0 0 0 2 1 11.43 11.43 0 0 0 1.67.61c.23.07.45.15.66.2s.65.16 1 .23l.61.12a7.68 7.68 0 0 0 .82.11 16.36 16.36 0 0 0 2 .11 17 17 0 0 0 0-33.93c-.31.08-.57.11-.89.11Zm14.24 17.26a13.17 13.17 0 1 1-13.14-13.17 13.14 13.14 0 0 1 13.14 13.17Z",className:"cls-1"}),(0,u.jsx)("path",{d:"M190.54 138.41a8.19 8.19 0 1 0-8.19-8.19 8.19 8.19 0 0 0 8.19 8.19Z",className:"cls-1"}),(0,u.jsx)("path",{d:"M221.89 210.22a92.09 92.09 0 0 0-23.26-37.52c-2.2-2.14-4.4-4.26-6.64-6.38-6.23-6-13.87-13.55-19.66-21.15-.68-.89-1.33-1.75-1.94-2.63a22.94 22.94 0 0 1 19.46-35.13 22.25 22.25 0 0 1 4.4.43C195.38 104 198 94.93 203 94a4.8 4.8 0 0 1 1.47-.06c2 .21 7.85 1.47 14.8 3.06 7.68 1.76 16.74 3.92 23.56 5.56v-.18a10.37 10.37 0 0 0 .24-1.49 13.52 13.52 0 0 0-7.54-12.38c-.71-.33-11.23-5.12-30.44-9.48l-2.09-.39q-16-2.64-32.39-4.26-23.18-2.28-46.93-2.31H123a486.41 486.41 0 0 0-50.07 2.62Q50.11 77 28 81.51a137.41 137.41 0 0 0-20.39 7A13.51 13.51 0 0 0 0 100.85c0 .32.07 1.15.09 2.42.66 12.15 3.88 65 14.91 110l.81 3.16c.78 3.15 1.64 6.24 2.53 9.27h-.07c.24.88.5 1.75.76 2.61 3.56 11.78 7.75 22.51 12.71 31.23a61 61 0 0 0 3.54 5.69c1.92 2.83 4.51 7.42 6.9 9a5.08 5.08 0 0 0 .61.36 18.13 18.13 0 0 0 1.94.67h.06c4.23 1.22 10.4 1.64 15.54 1.74h2.39c.91 0 1.86 0 2.72-.06a70.49 70.49 0 0 0 7.55-.63l1.51-.2.58-.1c1.3-.22 2.55-.46 3.82-.75a1.16 1.16 0 0 0 .18 0c.45-.12.92-.21 1.36-.33s1-.25 1.46-.39c.31-.1.67-.19 1-.3s.89-.25 1.32-.4a2.7 2.7 0 0 0 .48-.16c.23-.07.43-.13.64-.21.56-.17 1.06-.37 1.56-.56l.24-.09c.73-.26 1.42-.56 2.11-.84a42.54 42.54 0 0 0 4.19-2c1.38-.71 2.74-1.49 4.05-2.33.65-.41 1.31-.85 2-1.29s1.26-.91 1.9-1.37a66.25 66.25 0 0 0 20.2-26c.26.55.56 1.12.8 1.7s.67 1.38 1 2.08.58 1.09.85 1.64c.1.09.1.2.17.31l.71 1.18c.3.53.62 1.05.91 1.57s.64 1.05 1 1.56a65.78 65.78 0 0 0 7.35 9.36c.41.43.82.86 1.26 1.28.81.83 1.7 1.65 2.61 2.45 1.12 1 2.3 1.93 3.49 2.86.46.36.95.69 1.41 1s1.21.85 1.85 1.24l.93.6c.43.28.89.53 1.3.8a3.87 3.87 0 0 0 .49.26 4.87 4.87 0 0 0 .45.27c.57.32 1.13.63 1.73.93.78.4 1.53.78 2.33 1.15l1.6.71c.71.31 1.46.6 2.2.88s1.27.47 1.94.69c.19.06.35.13.5.16.62.21 1.21.4 1.81.57 1.31.4 2.63.74 4 1 .6.13 1.21.27 1.83.39s1.21.21 1.8.33c.84.15 1.74.28 2.61.38.51.08 1 .13 1.51.18 1.83.21 3.69.32 5.6.39.91 0 1.8.06 2.74.06h2.38c5.16-.1 11.31-.52 15.53-1.74a18.49 18.49 0 0 0 1.92-.67 4.3 4.3 0 0 0 .66-.36c2.41-1.62 5-6.18 6.9-9 1.21-1.78 2.4-3.67 3.54-5.69 4.94-8.72 9.13-19.45 12.68-31.23.29-.86.54-1.73.78-2.61a34.44 34.44 0 0 0 .8-3.85 17.2 17.2 0 0 0-1.27-4.59c-.78-2.48-1.7-4.95-2.4-7.01ZM57.18 117a13.66 13.66 0 1 1-13.65 13.67A13.69 13.69 0 0 1 57.18 117Zm151.68 110.24c-.06.2-.13.38-.21.59a1.2 1.2 0 0 1 0 .2v.11c-.47 1.43-.93 2.84-1.42 4.22s-1 2.74-1.47 4.08c-.76 2-1.55 3.92-2.35 5.79-.24.63-.54 1.24-.8 1.84s-.63 1.38-1 2c-.24.5-.45 1-.71 1.48-.46 1-1 1.91-1.45 2.85l-1.49 2.69c-.79 1.29-1.55 2.54-2.37 3.7a.51.51 0 0 1-.13.16.82.82 0 0 0-.11.17 2 2 0 0 1-.19.24 9.3 9.3 0 0 1-1.36 1.57 10.16 10.16 0 0 1-5.5 2.75l-1.43.14a72.12 72.12 0 0 1-8.88.23c-.46 0-1 0-1.45-.08a8.33 8.33 0 0 1-.88-.05c-.68 0-1.34-.1-2-.17-.41 0-.82-.1-1.19-.15a2.52 2.52 0 0 1-.41-.06c-.32 0-.62-.08-.92-.13l-.8-.13c-.43-.08-.87-.15-1.3-.24s-1-.19-1.46-.31c-.8-.18-1.6-.37-2.4-.6l-1.59-.47-.78-.26a2.85 2.85 0 0 0-.33-.13l-.27-.09a14.54 14.54 0 0 1-1.43-.55 3 3 0 0 1-.45-.17c-.37-.14-.76-.31-1.17-.48l-.65-.3c-.28-.13-.58-.26-.84-.41s-.62-.29-.92-.44c-1-.5-1.9-1-2.85-1.61s-2.07-1.35-3.06-2.09a46.49 46.49 0 0 1-4.09-3.48s-.07-.06-.09-.07a48.26 48.26 0 0 1-5.5-6.38 2.94 2.94 0 0 0-.2-.26c-.62-.87-1.19-1.71-1.72-2.58a13.89 13.89 0 0 1-.85-1.41c-.28-.47-.58-.93-.82-1.41s-.51-.94-.77-1.42-.61-1.18-.89-1.77a77.35 77.35 0 0 1-4-10.18c-.17-.53-.32-1.05-.45-1.57s-.24-.81-.33-1.19c-.23-.78-.41-1.54-.56-2.27a15.24 15.24 0 0 1-.47-2.08c-.11-.5-.22-1-.28-1.4-.17-.75-.26-1.42-.37-2v-.09c-.06-.27-.06-.75-.11-1v-.17c3.67-6.41 9.28-16.08 12.75-22.11l.48-.82c3.65-6.35.65-11.55-6.71-11.55h-28.57c-7.32 0-10.34 5.2-6.65 11.55l.47.82c3.46 6 9 15.7 12.73 22.11 0 .12 0 .78-.08.91-1.08 7.35-5.59 28-21.45 39.88-.47.37-1 .72-1.51 1.07s-1 .67-1.47 1c-1 .59-1.94 1.14-2.93 1.65a6.91 6.91 0 0 1-.91.44 8.58 8.58 0 0 1-.86.41 3.62 3.62 0 0 1-.69.31c-.28.14-.6.25-.89.38s-.56.23-.82.34c-.79.31-1.57.58-2.35.83-.45.16-.9.3-1.36.43-.12 0-.26.06-.41.12-.41.12-.88.25-1.36.36s-.79.19-1.2.28-1 .22-1.45.31-.88.19-1.34.25l-.62.11c-.35.06-.67.11-1 .14a3.35 3.35 0 0 1-.47.06l-1.06.13c-.69.09-1.4.15-2.07.19-.3 0-.62.05-.91.07l-1.38.06a72.65 72.65 0 0 1-8.91-.23l-1.42-.14A10.41 10.41 0 0 1 48 257.4a2.12 2.12 0 0 1-.2-.24 3.59 3.59 0 0 0-.25-.33 76.19 76.19 0 0 1-6-10.72 143.7 143.7 0 0 1-7-18c0-.1-.08-.2-.1-.31a5.84 5.84 0 0 0-.2-.59 11.49 11.49 0 0 1-.34-2.71 9.19 9.19 0 0 1 .19-2v-.09c.19-.77.37-1.58.6-2.38s.33-1.36.52-2.05c.24-.85.5-1.73.8-2.61.18-.68.43-1.36.67-2.05a82.09 82.09 0 0 1 20.47-31.88c17.57-17.23 37.94-33.85 37.94-54.1 0-11.1-6.15-23.31-22.2-37.3a484.15 484.15 0 0 1 50.37-2.63q23.92 0 47.32 2.33c-16.35 14.1-22.59 26.4-22.59 37.6 0 20.25 20.37 36.87 38 54.1a82 82 0 0 1 20.42 31.88c.25.69.45 1.37.66 2.05.15.42.26.82.39 1.22.59 2 1.1 3.95 1.51 5.82v.05a12.46 12.46 0 0 1 .18 2 10.64 10.64 0 0 1-.2 2.05 4.86 4.86 0 0 1-.1.73Z",className:"cls-1"}),(0,u.jsx)("path",{d:"M405.37 127v111.91h-27.26v-46.07h-42.46v46.07h-27.23V127h27.23v43.85h42.46V127ZM435.57 234.62a40.66 40.66 0 0 1-16.43-15.94q-6-10.38-6-24.25c0-9.15 2-17.18 6.06-24.17a41.14 41.14 0 0 1 16.56-16 52.82 52.82 0 0 1 47.22 0 41 41 0 0 1 16.59 16c4.06 7 6.07 15 6.07 24.17a46.91 46.91 0 0 1-6.16 24.17 41.49 41.49 0 0 1-16.74 16 50.08 50.08 0 0 1-23.68 5.58 49.13 49.13 0 0 1-23.49-5.56Zm36.83-23.77q5.52-5.73 5.51-16.42c0-7.11-1.8-12.59-5.33-16.42a18.17 18.17 0 0 0-26.42-.09q-5.25 5.66-5.26 16.51 0 10.69 5.2 16.42a16.78 16.78 0 0 0 13 5.75 17.74 17.74 0 0 0 13.3-5.75ZM601.66 149.93v89H574.4v-12.11a30 30 0 0 1-11.27 9.46 34 34 0 0 1-15.72 3.6 35.2 35.2 0 0 1-18-4.56 30.56 30.56 0 0 1-12.07-13.14q-4.34-8.62-4.34-20.26v-52h27.14v48.31c0 6 1.49 10.59 4.58 13.9s7.24 5 12.44 5 9.5-1.67 12.59-5 4.65-7.93 4.65-13.9v-48.3ZM694.07 159.11q9.28 10.13 9.31 27.84v52h-27.11v-48.3c0-6-1.51-10.59-4.61-13.87s-7.24-5-12.44-5-9.38 1.65-12.47 5-4.64 7.92-4.64 13.87v48.3h-27.23v-89h27.23v11.81a29.35 29.35 0 0 1 11.2-9.33 35.41 35.41 0 0 1 15.78-3.43c10.46 0 18.72 3.36 24.98 10.11ZM715.76 170.2a38 38 0 0 1 14.11-15.95 36.74 36.74 0 0 1 19.93-5.57 35.05 35.05 0 0 1 16 3.65 29.4 29.4 0 0 1 11.42 9.9v-41.31h27.26v118h-27.26v-12.76a27.91 27.91 0 0 1-11 10.22 34.28 34.28 0 0 1-16.46 3.82 36.47 36.47 0 0 1-19.93-5.66 38.5 38.5 0 0 1-14.11-16.11q-5.21-10.44-5.2-24.16t5.24-24.07Zm55.8 8.13a19.14 19.14 0 0 0-27.58-.09q-5.7 5.82-5.69 16t5.71 16.2a18.18 18.18 0 0 0 13.77 6 18.39 18.39 0 0 0 13.81-5.91q5.66-5.86 5.66-16.09c-.02-6.81-1.91-12.19-5.68-16.11Z",className:"cls-2"}),(0,u.jsx)("path",{d:"M890.29 127.38a51.08 51.08 0 0 1 21.82 20.71q7.57 13.47 7.55 31.68t-7.55 31.63a50.16 50.16 0 0 1-21.82 20.45q-14.19 7.07-33.66 7.06h-37V120.13h37q19.44 0 33.66 7.25Zm1.46 86.62q12.07-12.19 12.1-34.19t-12.22-34.58c-8.11-8.3-19.75-12.44-35-12.44h-21.45v93.39h21.45q23.07-.04 35.12-12.18ZM947.7 234.78a40.05 40.05 0 0 1-15.7-15.87c-3.77-6.84-5.63-14.81-5.63-23.84s1.92-16.83 5.82-23.68a40 40 0 0 1 15.84-15.78 48.63 48.63 0 0 1 45 0 40.72 40.72 0 0 1 15.9 15.7 47.58 47.58 0 0 1 5.82 23.76 46.52 46.52 0 0 1-6 23.84 41.41 41.41 0 0 1-16.16 15.87 46.58 46.58 0 0 1-22.68 5.58 44.63 44.63 0 0 1-22.21-5.58Zm36.89-10.84a28 28 0 0 0 11.11-11q4.21-7.32 4.21-17.86t-4.12-17.85a27.39 27.39 0 0 0-10.86-10.93 31.18 31.18 0 0 0-29.09 0 26.25 26.25 0 0 0-10.62 10.93c-2.66 4.88-4 10.83-4 17.85s1.24 13.14 3.87 18A26 26 0 0 0 955.56 224a29.51 29.51 0 0 0 14.36 3.59 30.46 30.46 0 0 0 14.67-3.65ZM1083.4 155a33 33 0 0 1 12.65 12.44v-15.9h14.7v89.29a44 44 0 0 1-5.1 21.29 36.09 36.09 0 0 1-14.65 14.59c-6.28 3.51-13.68 5.26-22.06 5.26-11.49 0-21-2.7-28.69-8.12a31.75 31.75 0 0 1-13.52-22.17H1041a22.91 22.91 0 0 0 9.94 12.84c5 3.23 11 4.87 18 4.87 8 0 14.51-2.51 19.55-7.51s7.55-12 7.55-21v-18.39a34.62 34.62 0 0 1-12.74 12.76 37.38 37.38 0 0 1-19.78 5.11 39.67 39.67 0 0 1-36-21.84 49.78 49.78 0 0 1-5.42-23.61c0-8.93 1.77-16.76 5.42-23.52a39.51 39.51 0 0 1 14.88-15.72 41.15 41.15 0 0 1 21.14-5.57 38.93 38.93 0 0 1 19.86 4.9Zm8.66 22.82a27.81 27.81 0 0 0-10.73-11.25 30.4 30.4 0 0 0-29.74-.07 27.73 27.73 0 0 0-10.71 11.16 35.76 35.76 0 0 0-4 17.21 36.64 36.64 0 0 0 4 17.46 28.32 28.32 0 0 0 10.71 11.33 28.86 28.86 0 0 0 14.82 3.9 29.36 29.36 0 0 0 14.92-3.9 27.84 27.84 0 0 0 10.73-11.33 35.59 35.59 0 0 0 4-17.3 35.07 35.07 0 0 0-4-17.17ZM1126.54 237a9.89 9.89 0 0 1 7-16.9 9.22 9.22 0 0 1 6.81 2.87 10.24 10.24 0 0 1 0 14 9.19 9.19 0 0 1-6.81 2.88 9.59 9.59 0 0 1-7-2.85ZM1156 171.39a39.58 39.58 0 0 1 14.91-15.72 41.1 41.1 0 0 1 21.17-5.57c7.64 0 14.3 1.65 19.93 4.94a33 33 0 0 1 12.57 12.44v-15.94h14.69v87.37h-14.69v-16.25a33.82 33.82 0 0 1-12.82 12.66 38.23 38.23 0 0 1-19.86 5 39.49 39.49 0 0 1-21.05-5.74 40.64 40.64 0 0 1-14.85-16.1 50.49 50.49 0 0 1-5.39-23.61q0-13.35 5.39-23.48Zm64.64 6.47a28.3 28.3 0 0 0-10.8-11.25 30.4 30.4 0 0 0-29.74-.07 28 28 0 0 0-10.7 11.16 35.77 35.77 0 0 0-4 17.21 36.65 36.65 0 0 0 4 17.46 28.57 28.57 0 0 0 10.7 11.33 30.3 30.3 0 0 0 29.74 0 28.33 28.33 0 0 0 10.8-11.33 36.26 36.26 0 0 0 3.94-17.3 35.73 35.73 0 0 0-3.94-17.21ZM1257.93 134.47a9.89 9.89 0 0 1 7-16.9 9.06 9.06 0 0 1 6.75 2.87 10.16 10.16 0 0 1 0 14 9 9 0 0 1-6.75 2.86 9.38 9.38 0 0 1-7-2.83Zm14 17.07v87.37h-14.51v-87.37Z",className:"cls-3"})]})}var tS=e.i(131141),tC=e.i(82259),tj=e.i(802088),tT=e.i(183035),tE=e.i(803304),tR=e.i(416746),tI=e.i(416298),tA=e.i(751273),tP=e.i(997574);function tD(e){var t,n=e.severity,r=e.loading,i=e.resolved,a=ey.tokens.blueDimmest,o=ey.tokens.blueStrongest,s="";switch(n){case tc.LOW:a=ey.tokens.blueDimmest,o=ey.tokens.blueStrongest,t=(0,u.jsx)(tR.default,{}),s="Low severity vulnerability";break;case tc.MODERATE:a=ey.tokens.yellowDimmest,o=ey.tokens.yellowStrongest,t=(0,u.jsx)(tI.default,{}),s="Moderate severity vulnerability";break;case tc.HIGH:a=ey.tokens.orangeDimmest,o=ey.tokens.orangeStrongest,t=(0,u.jsx)(tI.default,{}),s="High severity vulnerability";break;case tc.CRITICAL:a=ey.tokens.redDimmest,o=ey.tokens.redStrongest,t=(0,u.jsx)(tE.default,{}),s="Critical severity vulnerability"}return i&&(a=ey.tokens.accentPositiveDimmest,o=ey.tokens.accentPositiveStrongest,t=(0,u.jsx)(tT.default,{}),s="This vulnerability has been resolved"),r&&(a=ey.tokens.accentPrimaryDimmest,o=ey.tokens.accentPrimaryStrongest,s="Security scan in progress",t=(0,u.jsx)(e2.default,{})),(0,u.jsx)(tA.Tooltip,{tooltip:s,placement:"top",isDisabled:r,children:(0,u.jsx)("div",{clsx:tP.default.severity,style:{background:a,color:o},children:t})})}var tO=e.i(167392),tN=e.i(568430);function tM(e){var t=e.open,n=e.onClick;return(0,u.jsx)(eN.IconButton,{alt:t?"Hide details":"Show details",onClick:n,children:t?(0,u.jsx)(tN.default,{}):(0,u.jsx)(tO.default,{})})}function tL(e){var t=e.expanded,n=e.setExpanded;return(0,u.jsx)(ee.View,{row:!0,grow:!0,align:"center",justify:"end",gap:8,children:(0,u.jsx)(tM,{open:t,onClick:function(){return n(!t)}})})}var tB=e.i(220743),tV=e.i(91720),tF=e.i(218174);function tU(e){var t=e.onClick;return(0,u.jsx)(ee.View,{clsx:tF.default.fullWidth,children:(0,u.jsx)(Z.Button,{text:"View Agent Session",iconRight:(0,u.jsx)(tB.default,{}),variant:"nofill",size:"small",onClick:t})})}function tG(e){var t=e.disabled,n=e.loading,r=e.onClick;return(0,u.jsx)(ee.View,{clsx:tF.default.fullWidth,children:(0,u.jsx)(Z.Button,{text:"Update automatically",disabled:t,loading:n,size:"small",onClick:r})})}function t$(e){var t=e.disabled,n=e.loading,r=e.tooltip,i=e.onClick;return(0,u.jsx)(ee.View,{clsx:tF.default.fullWidth,children:(0,u.jsx)(tA.Tooltip,{isDisabled:!r,tooltip:r,children:(0,u.jsx)(Z.Button,{text:"Fix with Agent",disabled:t,loading:n,colorway:"primary",size:"small",onClick:i})})})}function tH(e){var t=e.allowIgnore,n=e.disabled,r=e.ignored,i=e.ignoreIssue,a=e.unignoreIssue;return(0,u.jsx)(ee.View,{clsx:tF.default.fullWidth,children:r?(0,u.jsx)(Z.Button,{variant:"outlined",text:"Move to active",size:"small",disabled:n,onClick:function(){return null==a?void 0:a()}}):(0,u.jsx)(tA.Tooltip,{isDisabled:t,tooltip:t?void 0:"This is a critical issue and cannot be hidden.",children:(0,u.jsx)(Z.Button,{variant:"default",text:"Hide",size:"small",disabled:n||!t,onClick:function(){return null==i?void 0:i()}})})})}function tz(e){var t=e.state,n=e.openAgentSession,r=e.onUpdateDependencies,i=e.onFixWithAgent,a=e.disabled,o=e.updatingDependencies,s=e.hasUnresolvedFixableVulns,l=e.ignored,c=e.ignoreIssue,d=e.unignoreIssue,f=e.allowIgnore,p=e.learnMoreUrl,h="";return t.running?h="Agent is currently working on another task":t.fixing?h="Your session is being created":a&&(h="An action is in progress, please wait"),(0,u.jsxs)(ee.View,{row:!0,align:"center",justify:"center",gap:8,pt:8,children:[t.resolved||t.fixing||t.running?null:(0,u.jsx)(ee.View,{grow:!0,clsx:tF.default.actionButton,children:(0,u.jsx)(tH,{allowIgnore:f,disabled:null!=a&&a,ignored:!!f&&l,ignoreIssue:f?c:void 0,unignoreIssue:f?d:void 0})}),n&&t.session?(0,u.jsx)(ee.View,{grow:!0,clsx:tF.default.actionButtonPrimary,children:(0,u.jsx)(tU,{onClick:function(){return n(t.session)}})}):null,r&&s&&!t.session?(0,u.jsx)(ee.View,{grow:!0,clsx:tF.default.actionButton,children:(0,u.jsx)(tG,{disabled:a,loading:o,onClick:function(){return r()}})}):null,!i||t.resolved||t.session||l?null:(0,u.jsx)(ee.View,{grow:!0,clsx:tF.default.actionButtonPrimary,children:(0,u.jsx)(t$,{disabled:a||t.fixing||t.running,loading:t.fixing,tooltip:h,onClick:function(){return i()}})}),!p||i||t.resolved?null:(0,u.jsx)(ee.View,{grow:!0,clsx:tF.default.actionButtonPrimary,children:(0,u.jsx)(tV.ButtonLink,{variant:"outlined",colorway:"primary",href:p,text:"Learn More",noNextLink:!0,target:"_blank",rel:"noopener noreferrer"})})]})}var tW=e.i(940518);function tq(e){var t,n=e.disabled,r=e.state,i=e.openAgentSession,a=e.onFixWithAgent,o=(0,l._)((0,c.useState)(!1),2),s=o[0],d=o[1];return(0,u.jsxs)(eO.ShadesSurface,{clsx:tW.default.vulnerability,p:8,children:[(0,u.jsxs)(ee.View,{clsx:(t={},(0,eT._)(t,tW.default.vulnerabilityHeader,s),(0,eT._)(t,tW.default.isExpanded,!r.resolved||s),t),row:!0,gap:8,align:"center",justify:"space-between",wrap:!r.resolved,shrink:!0,children:[(0,u.jsxs)(ee.View,{row:!0,gap:8,align:"center",shrink:!0,children:[(0,u.jsx)(tD,{severity:r.vulnerability.severity,loading:r.running||r.fixing,resolved:r.resolved}),(0,u.jsx)(J.Text,{variant:"subheadDefault",color:r.resolved?"dimmer":"default",children:"Detected malicious file vulnerability"})]}),(0,u.jsx)(tL,{expanded:s,setExpanded:d})]}),s?(0,u.jsxs)(ee.View,{gap:8,children:[(0,u.jsx)(J.Text,{color:"dimmer",variant:"small",children:r.vulnerability.message}),(0,u.jsx)(ee.View,{clsx:tW.default.maliciousVulnerabilityCode,gap:4,children:(0,u.jsx)(ee.View,{gap:8,children:r.vulnerability.paths.map(function(e){return(0,u.jsx)(ee.View,{clsx:tW.default.filePath,children:e},e)})})})]}):null,(0,u.jsx)(tz,{allowIgnore:!1,openAgentSession:i,onFixWithAgent:a?function(){a(r.vulnerability),(0,e6.track)(e7.events.SECURITY_SCAN,{action:"fix_vulnerability_agent",name:r.vulnerability.name,paths:r.vulnerability.paths,type:e8.Malicious})}:void 0,state:r,disabled:n})]})}var tK=e.i(409570),tY=e.i(995691),tQ=e.i(624782);function tX(e){var t,n=e.type,r=e.loading,i=e.resolved,a=n===e8.Hounddog,o=a?"warning":"negative",s=a?(0,u.jsx)(tY.default,{size:16,alt:"Privacy scan"}):(0,u.jsx)(e5.default,{size:16,alt:"Security scan"});return r?(s=(0,u.jsx)(e2.default,{size:16,alt:"Fix with agent in progress"}),t="Fix with agent in progress"):i?(s=(0,u.jsx)(tT.default,{size:16,alt:"This vulnerability has been resolved"}),t="This vulnerability has been resolved",o="lime"):t=a?"Privacy risk":"Security vulnerability",(0,u.jsx)(tA.Tooltip,{tooltip:t,placement:"top",children:(0,u.jsx)(tQ.Pill,{colorway:o,variant:"filled",text:a?"Privacy":"Security",iconLeft:s})})}var tZ=e.i(732691);function tJ(e){var t,n,r,i=e.disabled,a=e.states,o=e.updatingDependencies,s=e.openAgentSession,d=e.onFixWithAgent,f=e.onUpdateDependencies,p=(0,l._)((0,c.useState)(!1),2),h=p[0],m=p[1],g=(n=null==(t=a.find(function(e){return e.session}))?void 0:t.session,{running:a.some(function(e){return e.running}),fixing:a.some(function(e){return e.fixing}),resolved:a.every(function(e){return e.resolved}),session:null!=n?n:null}),x=a.filter(function(e){return e.type===e8.Dependency}).filter(function(e){return tg(e.vulnerability)}),y=a.filter(function(e){return e.type===e8.Dependency}).filter(function(e){return!tg(e.vulnerability)}),b=x.length>0,w=y.length>0,_=x.some(function(e){return tg(e.vulnerability)&&!tm(e.vulnerability)});return b||w?(0,u.jsxs)(eO.ShadesSurface,{clsx:tZ.default.vulnerability,p:8,children:[(0,u.jsxs)(ee.View,{clsx:(r={},(0,eT._)(r,tZ.default.vulnerabilityHeader,!0),(0,eT._)(r,tZ.default.isExpanded,!g.resolved||h),r),row:!0,gap:8,align:"center",justify:"space-between",wrap:!g.resolved,shrink:!0,children:[(0,u.jsxs)(ee.View,{row:!0,gap:8,align:"start",shrink:!0,children:[(0,u.jsx)(tX,{type:e8.Dependency,loading:g.running||g.fixing,resolved:g.resolved}),(0,u.jsx)(J.Text,{color:g.resolved?"dimmer":"default",multiline:!1,showTooltipOnTruncate:!0,shrink:1,children:"Outdated dependencies have known vulnerabilities"})]}),(0,u.jsx)(tL,{expanded:h,setExpanded:m})]}),g.resolved&&!h?null:(0,u.jsxs)(ee.View,{gap:16,children:[(0,u.jsx)(J.Text,{color:"dimmer",variant:"small",children:"There are dependencies that have vulnerabilities and may need to be updated."}),b?(0,u.jsxs)(ee.View,{gap:8,children:[(0,u.jsx)(J.Text,{color:"dimmer",variant:"small",children:"These dependencies can be updated automatically."}),(0,u.jsx)(ee.View,{clsx:tZ.default.dependencyVulnerabilityGroup,gap:4,children:x.map(function(e){var t=e.vulnerability;return(0,u.jsx)(t1,{name:t.name,status:t.status,version:t.currentVersion},t.id)})})]}):null,w?(0,u.jsxs)(ee.View,{gap:8,children:[(0,u.jsxs)(J.Text,{color:"dimmer",variant:"small",children:["These dependencies may cause issues if updated without making additional changes."," ",d?"You can have the Agent update them for you and make any necessary changes.":null]}),(0,u.jsx)(ee.View,{clsx:tZ.default.dependencyVulnerabilityGroup,gap:4,children:y.map(function(e){var t=e.vulnerability;return(0,u.jsx)(t1,{name:t.name,status:t.status,version:t.currentVersion},t.id)})})]}):null]}),(0,u.jsx)(tz,{openAgentSession:s,onUpdateDependencies:f,updatingDependencies:o,onFixWithAgent:d?function(){var e=a.filter(function(e){return e.vulnerability.status!==th.Fixed}).map(function(e){return e.vulnerability}).filter(function(e){return e.type===e8.Dependency});d(e),(0,e6.track)(e7.events.SECURITY_SCAN,{action:"fix_vulnerability_agent",checkIds:e.map(function(e){return e.id}),type:e8.Dependency})}:void 0,state:g,disabled:i,hasUnresolvedFixableVulns:_,allowIgnore:!1})]}):null}function t0(e){var t,n=e.disabled,r=e.state,i=e.openAgentSession,a=e.onFixWithAgent,o=(0,l._)((0,c.useState)(!1),2),s=o[0],d=o[1];return(0,u.jsxs)(eO.ShadesSurface,{clsx:tZ.default.vulnerability,p:8,children:[(0,u.jsx)(ee.View,{clsx:(t={},(0,eT._)(t,tZ.default.vulnerabilityHeader,!0),(0,eT._)(t,tZ.default.isExpanded,!r.resolved||s),t),gap:8,children:(0,u.jsxs)(ee.View,{row:!0,gap:8,align:"start",justify:"space-between",shrink:!0,children:[(0,u.jsxs)(ee.View,{row:!0,gap:8,align:"start",shrink:!0,children:[(0,u.jsx)(tX,{type:r.vulnerability.type,loading:r.running||r.fixing,resolved:r.resolved}),(0,u.jsx)(J.Text,{color:r.resolved?"dimmer":"default",multiline:!1,showTooltipOnTruncate:!0,shrink:1,children:"Dependency has known vulnerabilities"})]}),(0,u.jsx)(tL,{expanded:s,setExpanded:d})]})}),r.resolved&&!s?null:(0,u.jsxs)(ee.View,{gap:8,children:[(0,u.jsxs)(J.Text,{color:"dimmer",variant:"small",children:["This dependency has known vulnerabilities and may need to be replaced with something else."," ",a?"You can have the Agent update them for you and make any necessary changes.":null]}),(0,u.jsx)(ee.View,{clsx:tZ.default.dependencyVulnerabilityGroup,gap:4,children:(0,u.jsx)(t1,{name:r.vulnerability.name,status:r.vulnerability.status,version:r.vulnerability.currentVersion},r.vulnerability.id)})]}),(0,u.jsx)(tz,{openAgentSession:i,onFixWithAgent:a?function(){a([r.vulnerability]),(0,e6.track)(e7.events.SECURITY_SCAN,{action:"fix_vulnerability_agent",checkIds:[r.vulnerability.id],name:r.vulnerability.name,type:e8.Dependency})}:void 0,state:r,disabled:n,allowIgnore:!1})]})}function t1(e){var t=e.name,n=e.status,r=e.version,i=n===th.Fixed;return(0,u.jsxs)(ee.View,{row:!0,gap:8,align:"center",children:[n!==th.Fixed?null:(0,u.jsx)(tT.default,{color:ey.tokens.accentPositiveStronger}),n!==th.Pending?null:(0,u.jsx)(tK.default,{}),(0,u.jsx)(J.Text,{color:i?"dimmer":"default",children:(0,u.jsxs)("span",{clsx:tZ.default.dependencyVulnerabilityName,children:[t,r?"@".concat(r):null]})})]})}var t2=e.i(409146),t3=e.i(656161);function t5(e){var t,n=e.disabled,r=e.state,i=e.openAgentSession,a=e.onFixWithAgent,o=e.ignoreIssue,s=e.unignoreIssue,d=(0,l._)((0,c.useState)(!1),2),f=d[0],p=d[1],h=r.vulnerability;return(0,u.jsxs)(eO.ShadesSurface,{clsx:t3.default.vulnerability,p:8,children:[(0,u.jsx)(ee.View,{clsx:(t={},(0,eT._)(t,t3.default.vulnerabilityHeader,f),(0,eT._)(t,t3.default.isExpanded,!r.resolved||f),t),gap:8,children:(0,u.jsxs)(ee.View,{row:!0,gap:8,align:"start",justify:"space-between",shrink:!0,children:[(0,u.jsxs)(ee.View,{row:!0,gap:8,align:"start",shrink:!0,clsx:t3.default.titleContainer,children:[(0,u.jsx)(tX,{type:h.type,loading:r.running||r.fixing,resolved:r.resolved}),(0,u.jsx)(J.Text,{color:r.resolved?"dimmer":"default",multiline:!1,showTooltipOnTruncate:!0,shrink:1,children:h.message})]}),(0,u.jsx)(tL,{expanded:f,setExpanded:p})]})}),f?(0,u.jsxs)(ee.View,{gap:8,children:[(0,u.jsx)(J.Text,{color:"dimmer",variant:"small",children:r.vulnerability.message}),(0,u.jsxs)(ee.View,{children:[(0,u.jsx)(J.Text,{variant:"small",children:"Associated Compliance Framework"}),(0,u.jsx)(J.Text,{color:"dimmer",variant:"small",children:h.privacyViolations.join(", ")})]}),(0,u.jsxs)(ee.View,{gap:4,children:[(0,u.jsx)(J.Text,{variant:"small",children:"Remediation Strategy:"}),(0,u.jsx)(J.Text,{color:"dimmer",variant:"small",children:h.remediationSummary})]}),(0,u.jsxs)(ee.View,{clsx:t3.default.hounddogVulnerabilityCode,gap:4,children:[(0,u.jsxs)(ee.View,{row:!0,align:"center",gap:8,children:[(0,u.jsx)(eW.default,{path:h.location.path,size:16}),(0,u.jsx)(J.Text,{clsx:t3.default.filePath,color:"dimmest",variant:"small",children:h.location.path})]}),(0,u.jsx)(t2.default,{code:h.location.lines,filePath:h.location.path,fontSize:12,lineNumbersStart:h.location.start.line,lineNumbers:!0})]})]}):null,(0,u.jsx)(tz,{allowIgnore:!0,ignored:h.ignored,ignoreIssue:o,unignoreIssue:s,openAgentSession:i,onFixWithAgent:a&&"deletion"===h.remediationStrategy?function(){a(h),(0,e6.track)(e7.events.SECURITY_SCAN,{action:"fix_vulnerability_agent",checkIds:[r.vulnerability.id],name:r.vulnerability.name,type:e8.Hounddog})}:void 0,learnMoreUrl:"https://docs.hounddog.ai/scanner/sensitive-data-exposure-in-third-party-or-ai-integrations--beyon",state:r,disabled:n})]})}var t4=e.i(31741);function t8(e){var t,n=e.disabled,r=e.state,i=e.openAgentSession,a=e.onFixWithAgent,o=e.ignoreIssue,s=e.unignoreIssue,d=(0,l._)((0,c.useState)(!1),2),f=d[0],p=d[1];return(0,u.jsxs)(eO.ShadesSurface,{clsx:t4.default.vulnerability,p:8,children:[(0,u.jsx)(ee.View,{clsx:(t={},(0,eT._)(t,t4.default.vulnerabilityHeader,f),(0,eT._)(t,t4.default.isExpanded,!r.resolved||f),t),gap:8,children:(0,u.jsxs)(ee.View,{row:!0,gap:8,align:"start",justify:"space-between",shrink:!0,children:[(0,u.jsxs)(ee.View,{row:!0,gap:8,align:"start",shrink:!0,children:[(0,u.jsx)(tX,{type:r.vulnerability.type,loading:r.running||r.fixing,resolved:r.resolved}),(0,u.jsx)(J.Text,{color:r.resolved?"dimmer":"default",multiline:!1,showTooltipOnTruncate:!0,shrink:1,children:r.vulnerability.message})]}),(0,u.jsx)(tL,{expanded:f,setExpanded:p})]})}),f?(0,u.jsxs)(ee.View,{gap:8,children:[(0,u.jsx)(J.Text,{color:"dimmer",variant:"small",children:r.vulnerability.message}),(0,u.jsxs)(ee.View,{clsx:t4.default.analysisVulnerabilityCode,gap:4,children:[(0,u.jsxs)(ee.View,{row:!0,align:"center",gap:8,children:[(0,u.jsx)(eW.default,{path:r.vulnerability.location.path,size:16}),(0,u.jsx)(J.Text,{clsx:t4.default.filePath,color:"dimmest",variant:"small",children:r.vulnerability.location.path})]}),(0,u.jsx)(t2.default,{code:r.vulnerability.location.lines,filePath:r.vulnerability.location.path,fontSize:12,lineNumbersStart:r.vulnerability.location.start.line,lineNumbers:!0})]})]}):null,(0,u.jsx)(tz,{allowIgnore:!0,ignored:r.vulnerability.ignored,ignoreIssue:o,unignoreIssue:s,openAgentSession:i,onFixWithAgent:a?function(){a(r.vulnerability),(0,e6.track)(e7.events.SECURITY_SCAN,{action:"fix_vulnerability_agent",checkIds:[r.vulnerability.id],name:r.vulnerability.name,type:e8.Analysis})}:void 0,state:r,disabled:n})]})}var t6=e.i(988676);function t7(e,t){return(0,tS.produce)(e,function(n){switch(t.type){case"UPDATE":var r=new Set(e.vulnerabilities.keys()),i=!0,a=!1,o=void 0;try{for(var s,l=t.vulns[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;r.delete(u.id);var c=n.vulnerabilities.get(u.id);c?(c.vulnerability=u,c.resolved=tm(u)):n.vulnerabilities.set(u.id,{type:u.type,vulnerability:u,resolved:tm(u),session:null,running:!1,fixing:!1})}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}var d=!0,f=!1,p=void 0;try{for(var h,m=r[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value;n.vulnerabilities.delete(g)}}catch(e){f=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}n.running.id&&r.has(n.running.id)&&(n.running.id=null);break;case"RUNNING":n.running.state=t.state,t.session?n.running.id=t.session.id:n.running.id=null;var x=!0,y=!1,b=void 0;try{for(var w,_=n.vulnerabilities.values()[Symbol.iterator]();!(x=(w=_.next()).done);x=!0){var k,S=w.value;S.running=(null==(k=S.session)?void 0:k.id)===n.running.id}}catch(e){y=!0,b=e}finally{try{x||null==_.return||_.return()}finally{if(y)throw b}}break;case"SESSION_OPENED":n.running.id=t.session.id;var C=!0,j=!1,T=void 0;try{for(var E,R=t.ids[Symbol.iterator]();!(C=(E=R.next()).done);C=!0){var I=E.value,A=n.vulnerabilities.get(I);A&&(A.session=t.session)}}catch(e){j=!0,T=e}finally{try{C||null==R.return||R.return()}finally{if(j)throw T}}break;case"FIXING":var P=!0,D=!1,O=void 0;try{for(var N,M=t.ids[Symbol.iterator]();!(P=(N=M.next()).done);P=!0){var L=N.value,B=n.vulnerabilities.get(L);B&&(B.fixing=t.state)}}catch(e){D=!0,O=e}finally{try{P||null==M.return||M.return()}finally{if(D)throw O}}}})}function t9(e){var t=e.scanResult,n=e.currentAgentSession,r=e.openAgentSession,i=e.onFixWithAgent,s=e.onUpdateDependencies,d=e.isScanning,f=e.isUpdatingDependencies,p=(0,l._)((0,c.useReducer)(t7,null,function(){return{running:{id:null,state:!1},updatingDependencies:!1,vulnerabilities:new Map}}),2),h=p[0],m=p[1],g=(R=tl(),I=(0,tn.usePid2Callback)(function(e){return function(t){var n=t.kind,r=t.fingerprint;return(0,D._)(function(){return(0,O._)(this,function(t){return[2,e.securityScan.ignoreScan.rpc({kind:n,fingerprint:r})]})})()}}),A=(0,c.useCallback)(function(e){var t=e.kind,n=e.id;return(0,D._)(function(){return(0,O._)(this,function(e){switch(e.label){case 0:if(!I)return[2];return[4,I({kind:t,fingerprint:n})];case 1:if(!e.sent().ok)return[2];return R(function(e){return e?e.map(function(e){return e.id===n?(0,o._)((0,a._)({},e),{ignored:!0}):e}):null}),[2]}})})()},[I,R]),P=(0,tn.usePid2Callback)(function(e){return function(t){var n=t.kind,r=t.fingerprint;return(0,D._)(function(){return(0,O._)(this,function(t){return[2,e.securityScan.unignoreScan.rpc({kind:n,fingerprint:r})]})})()}}),{ignoreIssue:A,unignoreIssue:(0,c.useCallback)(function(e){var t=e.kind,n=e.id;return(0,D._)(function(){return(0,O._)(this,function(e){switch(e.label){case 0:if(!P)return[2];return[4,P({kind:t,fingerprint:n})];case 1:if(!e.sent().ok)return[2];return R(function(e){return e?e.map(function(e){return e.id===n?(0,o._)((0,a._)({},e),{ignored:!1}):e}):null}),[2]}})})()},[P,R])}),x=g.ignoreIssue,y=g.unignoreIssue;(0,c.useEffect)(function(){m({type:"UPDATE",vulns:t})},[t]);var b=(0,c.useMemo)(function(){if(i)return function(e){return(0,D._)(function(){var t;return(0,O._)(this,function(n){switch(n.label){case 0:m({type:"FIXING",ids:Array.isArray(e)?e.map(function(e){return e.id}):[e.id],state:!0}),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,i(e)];case 2:return t=n.sent(),m({type:"SESSION_OPENED",ids:Array.isArray(e)?e.map(function(e){return e.id}):[e.id],session:t}),[2,t];case 3:return m({type:"FIXING",ids:Array.isArray(e)?e.map(function(e){return e.id}):[e.id],state:!1}),[7];case 4:return[2]}})})()}},[i]);(0,tj.useObserver)(null==n?void 0:n.agent.state,{next:function(e){(null==e?void 0:e.state)!==tC.AgentRunState.AGENT_STATE_PAUSED&&(null==e?void 0:e.state)!==tC.AgentRunState.AGENT_STATE_NOT_STARTED?m({type:"RUNNING",session:n,state:!0}):m({type:"RUNNING",session:null,state:!1})}});var w=[],_=[],k=[],S=[],C=[],j=!0,T=!1,E=void 0;try{for(var R,I,A,P,N,M=h.vulnerabilities.values()[Symbol.iterator]();!(j=(N=M.next()).done);j=!0){var L=N.value;L.type===e8.Dependency?L.vulnerability.fix.available?w.push(L):_.push(L):L.type===e8.Analysis?k.push(L):L.type===e8.Malicious?S.push(L):L.type===e8.Hounddog&&C.push(L)}}catch(e){T=!0,E=e}finally{try{j||null==M.return||M.return()}finally{if(T)throw E}}var B=h.running.state;return(0,u.jsxs)(ee.View,{gap:16,children:[(0,u.jsx)(tJ,{disabled:d||f||B,states:w,updatingDependencies:f,openAgentSession:r,onFixWithAgent:b,onUpdateDependencies:s}),_.map(function(e){return(0,u.jsx)(t0,{disabled:d||f||B,state:e,openAgentSession:r,onFixWithAgent:b},e.vulnerability.id)}),S.length&&(w.length||_.length)?(0,u.jsx)(t6.DividerH,{}):null,S.map(function(e){return(0,u.jsx)(tq,{disabled:d||f||B,state:e,openAgentSession:r,onFixWithAgent:b},"MaliciousVulnerability-".concat(e.vulnerability.id))}),k.length&&(w.length||_.length||S.length)?(0,u.jsx)(t6.DividerH,{}):null,k.map(function(e){return(0,u.jsx)(t8,{disabled:d||f||B,state:e,openAgentSession:r,onFixWithAgent:b,ignoreIssue:function(){return(0,D._)(function(){return(0,O._)(this,function(t){switch(t.label){case 0:return[4,x({kind:"sast",id:e.vulnerability.id})];case 1:return t.sent(),(0,e6.track)(e7.events.SECURITY_SCAN,{action:"hide_issue_clicked",type:"sast",vulnerabilityId:e.vulnerability.id,vulnerabilityName:e.vulnerability.name,severity:e.vulnerability.severity}),[2]}})})()},unignoreIssue:function(){return(0,D._)(function(){return(0,O._)(this,function(t){switch(t.label){case 0:return[4,y({kind:"sast",id:e.vulnerability.id})];case 1:return t.sent(),(0,e6.track)(e7.events.SECURITY_SCAN,{action:"unhide_issue_clicked",type:"sast",vulnerabilityId:e.vulnerability.id,vulnerabilityName:e.vulnerability.name,severity:e.vulnerability.severity}),[2]}})})()}},e.vulnerability.id)}),C.length&&(w.length||_.length||S.length||k.length)?(0,u.jsx)(t6.DividerH,{}):null,C.map(function(e){return(0,u.jsx)(t5,{disabled:d||f||B,state:e,openAgentSession:r,onFixWithAgent:b,ignoreIssue:function(){return(0,D._)(function(){return(0,O._)(this,function(t){switch(t.label){case 0:return[4,x({kind:"hounddog",id:e.vulnerability.id})];case 1:return t.sent(),(0,e6.track)(e7.events.SECURITY_SCAN,{action:"hide_issue_clicked",type:"hounddog",vulnerabilityId:e.vulnerability.id,vulnerabilityName:e.vulnerability.name,severity:e.vulnerability.severity}),[2]}})})()},unignoreIssue:function(){return(0,D._)(function(){return(0,O._)(this,function(t){switch(t.label){case 0:return[4,y({kind:"hounddog",id:e.vulnerability.id})];case 1:return t.sent(),(0,e6.track)(e7.events.SECURITY_SCAN,{action:"unhide_issue_clicked",type:"hounddog",vulnerabilityId:e.vulnerability.id,vulnerabilityName:e.vulnerability.name,severity:e.vulnerability.severity}),[2]}})})()}},"HoundDogVulnerability-".concat(e.vulnerability.id))})]})}var ne=e.i(904851),nt=e.i(90659),nn=e.i(119468),nr=e.i(374106),ni=e.i(641555),na=function(){function e(){(0,ne._)(this,e),(0,eT._)(this,"state",void 0),this.state={fixing:!1,currSession:null,prevSession:null}}return(0,nt._)(e,[{key:"startFixWithAgent",value:function(e){var t,n=e.sessionId,r=e.vulns;this.state.fixing&&this.completeFixing(!1),t=this.state.currSession,this.state={fixing:!0,prevSession:t,currSession:{sessionId:n,vulns:r,commits:0,startTime:new Date,endTime:null,fixed:!1}}}},{key:"commit",value:function(e){var t=e.sessionId;!this.state.fixing||t===this.state.currSession.sessionId&&this.state.currSession.commits++}},{key:"hasAgentFixedVulns",value:function(e){if(!this.state.fixing)return!1;var t=this.state.currSession.vulns;return Array.isArray(t)?t.every(function(t){return tm(e.find(function(e){return e.id===t.id}))}):tm(e.find(function(e){return e.id===t.id}))}},{key:"completeFixing",value:function(e){if(this.state.fixing){var t=(0,o._)((0,a._)({},this.state.currSession),{endTime:new Date,fixed:e});this.state={fixing:!1,currSession:t,prevSession:this.state.prevSession},this.trackAgentFix()}}},{key:"trackAgentFix",value:function(){if(!this.state.fixing&&this.state.currSession){var e=this.state.currSession,t=e.sessionId,n=e.vulns,r=e.commits,i=e.startTime,a=e.endTime,o=e.fixed,s=a.getTime()-i.getTime();(0,e6.track)(e7.events.SECURITY_SCAN,{action:"agent_fix_completed",sessionId:t,vulns:n,commits:r,timeTaken:s,fixed:o,type:Array.isArray(n)?e8.Dependency:n.type})}}},{key:"updateScanResult",value:function(e){this.state.fixing&&this.hasAgentFixedVulns(e)&&this.completeFixing(!0)}},{key:"agentFixFailed",value:function(e){this.state.fixing&&e===this.state.currSession.sessionId&&this.completeFixing(!1)}}]),e}(),no=e.i(929872),ns=e.i(112767),nl=e.i(628796),nu=e.i(257811),nc=e.i(481121),nd=d.Type.Object({type:d.Type.Literal("securityScan")}),nf={Content:function(e){var t=e.options.performPaneOperation,n=(0,c.useCallback)(function(e){t({operation:"open",pane:{type:"agentChat",data:{sessionId:e}}})},[t]),r=(0,c.useCallback)(function(e){t({operation:"open",secondary:!1,pane:e})},[t]);return(0,u.jsx)(np,{openAgentSession:n,openPane:r})},Icon:function(e){var t=e.size;return(0,u.jsx)(e1.IconContext.Provider,{value:{color:ey.tokens.blueStrongest,size:t},children:(0,u.jsx)(e5.default,{})})},getTitle:function(){return"Security Scanner"},description:"Scan your app for vulnerabilities",category:ez.PaneCategory.CloudServices,decode:function(e){return f.Value.Decode(nd,e)}},np=function(e){var t,n,r,i,a,o,s,d,f,p,h,m,g,x,y=e.openAgentSession,b=e.openPane,w=ty(),_=w.flagHoundDogScan,k=w.scanResult,S=w.lastScanDate,C=w.runScan,j=w.isScanning,T=w.isUpdatingDependencies,E=w.updateDependencies,R=w.securityScanEnabled,I=w.setSecurityScanEnabled,A=w.privacyScanEnabled,P=w.setPrivacyScanEnabled,N=(0,l._)((0,c.useState)(!1),2),M=N[0],L=N[1];(0,c.useEffect)(function(){j||k||C()},[j,C,k]);var B=(0,eZ.useChatter)(),V=(0,eJ.useObservable)(B.sessions.agent.current,null),F=(!(t=(0,c.useRef)()).current&&(t.current=new na),n=t.current,i=(r=ty()).isScanning,a=r.runScan,o=r.scanResult,s=r.updateDependencies,d=(0,eZ.useChatter)(),p=(f=(0,l._)((0,c.useState)(null),2))[0],h=f[1],m=(0,ni.useObservableMemo)(function(){return p?d.sessions.get(p):null},[p,d]),g=(0,ni.useObservableMemo)(function(){return null==m?void 0:m.data.select(function(e){return e.readOnly})},[m],{default:!1}),x=(0,c.useCallback)(function(e){return(0,D._)(function(){var t,r,i,a,o,l,u,c,f,p,m,g,x,b,w,_,k,S,C,j,T,E,R,I,A,P,D,N;return(0,O._)(this,function(O){switch(O.label){case 0:if(t="",Array.isArray(e))return[3,1];return(r=e.type)===e8.Analysis?t=["A recent security scan returned the following vulnerability alert using static code analysis: ",e.message.split("\n").map(function(e){return"> ".concat(e)}).join("\n"),"> **Location:** `".concat(e.location.path,"` (lines ").concat(e.location.start.line,"-").concat(e.location.end.line,")"),"\n**Instructions:**\n- Examine the code at the specified location to understand the vulnerability context\n- Decide whether the reported issue is real. *Use execution path, context, and impact to judge.*\n- If you have high confidence that it's exploitable, provide the smallest safe patch. Tell the user it is important to test their app before continuing with their deployment.\n- If the issue is a false positive but violates coding best practices, apply the minimal fix to follow recommended patterns. Otherwise, if there's no security risk and the code follows best practices, make no change and explain why."].join("\n"):r===e8.Malicious?t=["A security scan found malicious files matching known supply chain attack signatures:",e.message.split("\n").map(function(e){return"> ".concat(e)}).join("\n"),e.paths.map(function(e){return"> **Malicious File :** `".concat(e,"`")}).join("\n"),"\n**IMMEDIATE ACTION REQUIRED:**\n- **DO NOT EXECUTE** any code from these files\n- Immediately quarantine or delete the malicious files listed above\n- Check if these files are part of compromised npm packages\n- Audit for compromised dependencies and update to clean versions\n\nPlease take these actions and confirm when the malicious files have been removed."].join("\n"):r===e8.Hounddog?t="deletion"===e.remediationStrategy?["A privacy scan detected sensitive data leakage in your code:",e.message.split("\n").map(function(e){return"> ".concat(e)}).join("\n"),"> **Location:** `".concat(e.location.path,"` (lines ").concat(e.location.start.line,"-").concat(e.location.end.line,")"),"\n**Remediation Strategy: REMOVAL**","- ".concat(null!=(i=e.remediationPrompt)?i:e.remediationSummary),"\nPlease review the code and safely remove the sensitive data exposure."].join("\n"):["A privacy scan detected sensitive data leakage in your code:",e.message.split("\n").map(function(e){return"> ".concat(e)}).join("\n"),"> **Location:** `".concat(e.location.path,"` (lines ").concat(e.location.start.line,"-").concat(e.location.end.line,")"),"","**Remediation Strategy**","- ".concat(e.remediationSummary)].filter(Boolean).join("\n"):(0,tu.default)(r),[3,4];case 1:if(a=[],o=[],!(l=e.filter(function(e){return e.type===e8.Dependency}).filter(function(e){return e.status===th.Pending})).length)return[3,3];u=!0,c=!1,f=void 0;try{for(p=l[Symbol.iterator]();!(u=(m=p.next()).done);u=!0)(g=m.value).fix.available?a.push({name:g.name,from:g.currentVersion,to:g.fix.breakingChanges&&"object"===(0,nn._)(g.fix.version)?g.fix.version.version:void 0}):o.push({name:g.name,version:null!=(x=g.currentVersion)?x:""})}catch(e){c=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw f}}return[4,null==s?void 0:s()];case 2:O.sent(),O.label=3;case 3:b="",w="",_=!0,k=!1,S=void 0;try{for(C=a[Symbol.iterator]();!(_=(j=C.next()).done);_=!0)T=j.value,b+=T.from&&T.to?"".concat(T.name,"@").concat(T.from," -> ").concat(T.name,"@").concat(T.to,"\n"):"".concat(T.name,"\n")}catch(e){k=!0,S=e}finally{try{_||null==C.return||C.return()}finally{if(k)throw S}}E=!0,R=!1,I=void 0;try{for(A=o[Symbol.iterator]();!(E=(P=A.next()).done);E=!0)D=P.value,w+="".concat(D.name,"@").concat(D.version,"\n")}catch(e){R=!0,I=e}finally{try{E||null==A.return||A.return()}finally{if(R)throw I}}b&&(b=b.trim()),b&&(t=["In response to a security scan, the following dependencies needed to be updated:\n```",b,"```\n\nEnsure that the app still works and fix any issues that may have come up."].join("\n")),w&&(t=["In response to a security scan, the following dependencies contains critical CVEs and needed to be replaced:\n```",w,"```\n\nEnsure that the app still works and fix any issues that may have come up."].join("\n")),O.label=4;case 4:if(!t)throw Error("No message to send");return[4,d.sessions.create({sessionType:tC.SessionType.AGENT_SESSION})];case 5:if(!(N=O.sent()).ok)throw N;return N.payload.appendEvent({kind:"message",intent:tC.MessageAction.AGENT,message:t}),y(N.payload.id),n.startFixWithAgent({sessionId:N.payload.id,vulns:e}),h(N.payload.id),[2,N.payload]}})})()},[d,s,y,h,n]),(0,c.useEffect)(function(){o&&n.state.fixing&&n.updateScanResult(o)},[o,n]),(0,c.useEffect)(function(){p&&g&&n.state.fixing&&n.agentFixFailed(p)},[g,p,n]),(0,eZ.useChatHook)("received-completed-event",function(e){var t=e.event;(0,nr.isEventAgentToolDataKind)(t,"commitData")&&n.state.fixing&&(n.commit({sessionId:t.sessionId}),i||a())}),{fixWithAgent:x}).fixWithAgent,U=(0,c.useCallback)(function(){C(),tf(e4.SECURITY_SCANNER_PANE)},[C]),G=(0,c.useMemo)(function(){var e;return null!=(e=null==k?void 0:k.filter(function(e){return!e.ignored}))?e:[]},[k]),$=(0,c.useMemo)(function(){var e;return null!=(e=null==k?void 0:k.filter(function(e){return e.ignored}))?e:[]},[k]);return(0,u.jsxs)(ee.View,{justify:"space-between",grow:!0,height:"100%",px:32,py:16,align:"center",clsx:nc.default.root,children:[(0,u.jsxs)(ee.View,{gap:16,grow:!0,style:{width:"100%"},children:[(0,u.jsxs)(ee.View,{row:!0,gap:8,align:"start",children:[_?(0,u.jsx)(J.Text,{variant:"headerDefault",children:"Security and Privacy Scanner"}):(0,u.jsx)(J.Text,{variant:"headerDefault",children:"Security Scanner"}),(0,u.jsx)(ee.View,{pt:4,children:(0,u.jsx)(tQ.Pill,{colorway:"primary",text:"Beta",variant:"filled"})})]}),(0,u.jsxs)(J.Text,{variant:"small",color:"dimmer",children:["Run a scan to check for potential security risks"," ",_?" and privacy leaks":""," in your application. Scans are typically complete within minutes."," ",(0,u.jsx)("a",{href:"https://docs.replit.com/replit-workspace/workspace-features/security-scanner",target:"_blank",children:"Learn more"})]}),(0,u.jsxs)(ee.View,{row:!0,align:"start",gap:8,children:[(0,u.jsx)(Z.Button,{colorway:"primary",text:j?"Scanning for vulnerabilities":"Run scan",iconLeft:j?(0,u.jsx)(e2.default,{}):(0,u.jsx)(e5.default,{}),loading:j,onClick:U}),_?(0,u.jsx)(Z.Button,{text:"Scan settings",iconLeft:(0,u.jsx)(e3.default,{}),onClick:function(){return L(function(e){return!e})}}):null]}),M?(0,u.jsxs)(no.Surface,{background:"default",clsx:nc.default.scanSettingSurface,p:6,gap:6,children:[(0,u.jsxs)(ee.View,{row:!0,justify:"space-between",children:[(0,u.jsx)(J.Text,{clsx:nc.default.scanSettingTitleText,children:"Scan Settings"}),(0,u.jsx)(eN.IconButton,{alt:"Dismiss scan setting",onClick:function(){return L(!1)},children:(0,u.jsx)(e0.default,{})})]}),(0,u.jsxs)(ee.View,{row:!0,justify:"space-between",children:[(0,u.jsx)(J.Text,{children:"Enable privacy vulnerability detection"}),(0,u.jsx)(ns.Switch,{size:"small","aria-label":"Enable privacy vulnerability detection",isSelected:A,onChange:function(e){return P(e)}})]}),(0,u.jsxs)(ee.View,{row:!0,justify:"space-between",children:[(0,u.jsx)(J.Text,{children:"Enable security vulnerability detection"}),(0,u.jsx)(ns.Switch,{size:"small","aria-label":"Enable security vulnerability detection",isSelected:R,onChange:function(e){return I(e)}})]})]}):null,(0,u.jsx)(nl.Tabs,{children:(0,u.jsxs)(ee.View,{pb:8,children:[(0,u.jsxs)(nl.TabList,{withUnderline:!0,children:[(0,u.jsx)(nl.Tab,{id:"active-issues",children:"Active Issues"}),(0,u.jsx)(nl.Tab,{id:"hidden-issues",children:"Hidden Issues"})]}),(0,u.jsxs)(nl.TabPanels,{children:[(0,u.jsxs)(nl.TabPanel,{id:"active-issues",children:[null!==k&&S?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(nh,{count:k?G.filter(function(e){return e.status===th.Pending&&(e.type!==e8.Dependency||e.fix.available)}).length:0,timestamp:S,openPane:b})}):null,0===G.length?null:(0,u.jsx)(t9,{isScanning:j,isUpdatingDependencies:T,scanResult:G,currentAgentSession:V,onUpdateDependencies:null!=E?E:void 0,openAgentSession:function(e){return y(e.id)},onFixWithAgent:F})]}),(0,u.jsx)(nl.TabPanel,{id:"hidden-issues",children:(0,u.jsx)(ee.View,{clsx:nc.default.ignoredIssuesContainer,children:0===$.length?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(J.Text,{className:nc.default.ignoredIssuesText,children:"No hidden issues found."})}):(0,u.jsx)(t9,{isScanning:j,isUpdatingDependencies:T,scanResult:$,currentAgentSession:V,onUpdateDependencies:null!=E?E:void 0,openAgentSession:function(e){return y(e.id)},onFixWithAgent:F})})})]})]})})]}),(0,u.jsx)(t6.DividerH,{}),(0,u.jsx)(tw,{})]})};function nh(e){var t=e.count,n=e.timestamp,r=e.openPane,i="No vulnerabilities found.";return 1===t?i="1 potential vulnerability found.":t>1&&(i="".concat(t," potential vulnerabilities found.")),(0,u.jsxs)(ee.View,{gap:4,clsx:nc.default.lastScanSummaryContainer,children:[(0,u.jsxs)(ee.View,{row:!0,wrap:!0,gap:4,children:[(0,u.jsx)(J.Text,{clsx:nc.default.lastScanSummaryText,children:i}),0===t?(0,u.jsxs)(ee.View,{gap:4,row:!0,children:[(0,u.jsx)(J.Text,{color:"dimmer",children:"Ready to deploy?"}),(0,u.jsx)(Z.Button,{colorway:"blue",variant:"underlinedOnHover",text:"Go back to Deployments",onClick:function(){r({type:"deployments"}),(0,e6.track)(e7.events.SECURITY_SCAN,{action:"deployment_pane_redirected"})}})]}):null]}),(0,u.jsxs)(ee.View,{row:!0,children:[(0,u.jsx)(J.Text,{variant:"small",color:"dimmer",children:"Last ran on"}),"",(0,u.jsx)(nu.Timestamp,{date:n,textVariant:"small",textColor:"dimmer",dateFormat:"absolute"})]})]})}e.s(["securityScanUI",()=>nf],903270);var nm=(0,c.createContext)(null);e.s(["SubreplContext",()=>nm],607752)},416558,17609,e=>{"use strict";var t,n,r=e.i(297083),i=e.i(878420),a=e.i(530658),o=e.i(817556),s=e.i(866408);function l(e){return(0,r._)(function(e){var t,n;return(0,o._)(this,function(r){return t=e.container,n=e.service,[2,new Promise(function(e){var r=t.openChannel({service:n},function(t){return e([t.channel,r]),r})})]})}).apply(this,arguments)}var u=((t={}).OUTPUT="OUTPUT",t.ERROR="ERROR",t.STATE_CHANGED="STATE_CHANGED",t.CHANNEL_OPENED="CHANNEL_OPENED",t);function c(e){var t=e.container,n=(0,s.default)(),c=null;function d(){return(0,r._)(function(){return(0,o._)(this,function(e){return c&&"open"===c.status?[2,c]:[2,new Promise(function(e){n.once(u.CHANNEL_OPENED,function(t){e(t)})})]})})()}function f(){return(0,r._)(function(){return(0,o._)(this,function(e){return[2,l({container:t,service:"nix"})]})})()}return t.openChannel({service:"nix"},function(e){var t=e.channel;return c=t,n.emit(u.CHANNEL_OPENED,t),function(){c=null}}),{searchPackages:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r._)(function(){var n,r,s,l;return(0,o._)(this,function(o){switch(o.label){case 0:return[4,f()];case 1:return r=(n=a._.apply(void 0,[o.sent(),2]))[0],s=n[1],[4,r.request({nixPackageSearchRequest:(0,i._)({query:e},t)})];case 2:if((l=o.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(s(),l.error)return[2,{error:l.error,packages:null}];if(!l.nixPackageSearchResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:l.nixPackageSearchResponse.packages,error:null}]}})})()},listPackages:function(){return(0,r._)(function(){var e,t,n,r;return(0,o._)(this,function(i){switch(i.label){case 0:return[4,f()];case 1:return t=(e=a._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixPackageListRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(n(),r.error)return[2,{error:r.error,packages:null}];if(!r.nixPackageListResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:r.nixPackageListResponse.packages,error:null}]}})})()},getChannels:function(){return(0,r._)(function(){var e,t,n,r;return(0,o._)(this,function(i){switch(i.label){case 0:return[4,f()];case 1:return t=(e=a._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixChannelsRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channels:null}];if(n(),r.error)return[2,{error:r.error,channels:null}];if(!r.nixChannelsResponse)return[2,{error:"Response expected but none received",channels:null}];return[2,{channels:r.nixChannelsResponse.channels,error:null}]}})})()},getLatestStableChannel:function(){return(0,r._)(function(){var e,t,n,r;return(0,o._)(this,function(i){switch(i.label){case 0:return[4,f()];case 1:return t=(e=a._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixChannelLatestStableRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channel:null}];if(n(),r.error)return[2,{error:r.error,channel:null}];if(!r.nixChannelLatestStableResponse)return[2,{error:"Response expected but none received",channel:null}];return[2,{channel:r.nixChannelLatestStableResponse.channel,error:null}]}})})()},addPackages:function(e){return(0,r._)(function(){var t;return(0,o._)(this,function(n){switch(n.label){case 0:return[4,d()];case 1:return[4,n.sent().request({nixPackageAddRequest:{packages:e}})];case 2:if((t=n.sent()).channelClosed)return[2,"channel closed"];if(t.error)return[2,t.error];if(!t.nixPackageAddResponse)return[2,"response expected but non received"];return[2,null]}})})()},removePackages:function(e){return(0,r._)(function(){var t;return(0,o._)(this,function(n){switch(n.label){case 0:return[4,d()];case 1:return[4,n.sent().request({nixPackageRemoveRequest:{packages:e}})];case 2:if((t=n.sent()).channelClosed)return[2,"channel closed"];if(t.error)return[2,t.error];if(!t.nixPackageRemoveResponse)return[2,"response expected but non received"];return[2,null]}})})()},packageInfo:function(e){return(0,r._)(function(){var t;return(0,o._)(this,function(n){switch(n.label){case 0:return[4,d()];case 1:return[4,n.sent().request({nixPackageInfoRequest:{name:e}})];case 2:if((t=n.sent()).channelClosed)return[2,{package:null,error:"channel closed"}];if(t.error)return[2,{package:null,error:t.error}];if(!t.nixPackageInfoResponse)return[2,{package:null,error:"response expected but non received"}];if(!t.nixPackageInfoResponse.package)return[2,{package:null,error:"package not found"}];return[2,{package:t.nixPackageInfoResponse.package,error:null}]}})})()}}}e.s(["default",()=>c],416558);var d=e.i(830675),f=e.i(671901),p=e.i(709485),h=e.i(464458),m=e.i(968323),g=((n={}).OUTPUT="OUTPUT",n.ERROR="ERROR",n.STATE_CHANGED="STATE_CHANGED",n.CHANNEL_OPENED="CHANNEL_OPENED",n);function x(e){var t=e.container,n=e.forceTrace,i=e.track,u=(0,s.default)(),c=new Map;function x(e){var t=c.get(e);return t||(t={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},c.set(e,t)),t}function y(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,r._)(function(){var r,i,s;return(0,o._)(this,function(o){switch(o.label){case 0:return[4,l({container:t,service:"packager3"})];case 1:if(i=(r=a._.apply(void 0,[o.sent(),2]))[0],s=r[1],!e)return[3,3];return[4,i.request({packageSetPackagerRequest:{packagerId:e}})];case 2:o.sent(),o.label=3;case 3:if("open"!==i.status){if(n>5)throw Error("Failed to getAnonymousPackagerChannel");return[2,y(e,n+1)]}return[2,[i,s]]}})})()}function b(e){return(0,r._)(function(){var n;return(0,o._)(this,function(r){return((n=x(e)).didCallOpenChannel||function(e){var n=x(e);if(n.didCallOpenChannel)throw Error("Already called open channel");n.didCallOpenChannel=!0,n.closeChannel=t.openChannel({service:"packager3",name:e||"packager",action:f.api.OpenChannel.Action.ATTACH_OR_CREATE},function(t){var r=t.channel;return r.onCommand(function(t){if(null!=t.state){var n=t.state===f.api.State.Running;u.emit(g.STATE_CHANGED,n,e)}else null!=t.output?u.emit(g.OUTPUT,t.output,e):null!=t.error&&u.emit(g.ERROR,t.error,e)}),e?r.request({packageSetPackagerRequest:{packagerId:e}}).then(function(){n.packagerChannel=r,u.emit(g.CHANNEL_OPENED,r,e)}):(n.packagerChannel=r,u.emit(g.CHANNEL_OPENED,r,e)),function(){n.packagerChannel=null}})}(e),n.packagerChannel&&"open"===n.packagerChannel.status)?[2,n.packagerChannel]:[2,new Promise(function(t){u.once(g.CHANNEL_OPENED,function(n,r){r===e&&t(n)})})]})})()}return{addPackages:function(e,t){return(0,r._)(function(){var n,r,a,s;return(0,o._)(this,function(o){switch(o.label){case 0:return[4,b(t)];case 1:if("open"!==(r=o.sent()).status)return[2,!1];return a=e.map(function(e){return{name:e.name,spec:e.version}}),[4,r.request({packageAdd:{pkgs:a,useNewResponse:!0}})];case 2:if((s=o.sent()).channelClosed||s.error)return[2,!1];return(null==(n=s.packageAddResponse)?void 0:n.installedSystemDependencies)&&i&&i(p.events.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:t}),[2,!0]}})})()},removePackages:function(e,t){return(0,r._)(function(){var n,r,i;return(0,o._)(this,function(a){switch(a.label){case 0:return[4,b(t)];case 1:if("open"!==(n=a.sent()).status)return[2,!1];return r=e.map(function(e){return{name:e}}),[4,n.request({packageRemove:{pkgs:r}})];case 2:if((i=a.sent()).channelClosed)return[2,!1];return[2,!!i.ok]}})})()},searchPackages:function(e,t){return(0,r._)(function(){var n,r,i,s;return(0,o._)(this,function(o){switch(o.label){case 0:return[4,y(t)];case 1:return r=(n=a._.apply(void 0,[o.sent(),2]))[0],i=n[1],[4,r.request({packageSearch:{query:e}})];case 2:if((s=o.sent()).channelClosed)return[2,[]];if(i(),"packageSearchResp"===s.body&&s.packageSearchResp)return[2,s.packageSearchResp.results||[]];return d.captureException(Error("Unknown packager3 command ".concat(s.body,". ")+"Expected packageSearchResp. Received error: ".concat(s.error))),[2,[]]}})})()},fetchPackageInfo:function(e,t){return(0,r._)(function(){var n,r,i,s;return(0,o._)(this,function(o){switch(o.label){case 0:return[4,y(t)];case 1:return r=(n=a._.apply(void 0,[o.sent(),2]))[0],i=n[1],[4,r.request({packageInfo:{pkg:{name:e}}})];case 2:if((s=o.sent()).channelClosed)return[2,void 0];if(i(),"packageInfoResp"===s.body&&s.packageInfoResp)return[2,s.packageInfoResp.pkg||void 0];return d.captureException(Error("Unknown packager3 command ".concat(s.body,". ")+"Expected packageInfoResp. Received error: ".concat(s.error))),[2,void 0]}})})()},installPackages:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r._)(function(){return(0,o._)(this,function(s){return[2,(0,h.startSpanFromContext)(e,"packager.installPackages",function(e){return(0,r._)(function(){var r,s,l;return(0,o._)(this,function(o){switch(o.label){case 0:return[4,b(t)];case 1:if("open"!==(r=o.sent()).status)return[2,(0,m.Err)("ChannelClosed")];return[4,r.request({packageInstall:{useNewResponse:!0,disableGuess:a},traceInfo:(0,h.getTraceInfo)(e),forceTrace:n})];case 2:if((s=o.sent()).error)return[2,(0,m.Err)(s.error)];if(s.channelClosed)return[2,(0,m.Err)("ChannelClosed")];if(!(l=s.packageInstallResponse))return[2,(0,m.Err)("No package install response found")];return l.installedSystemDependencies&&i&&i(p.events.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:t}),[2,(0,m.Ok)(l)]}})})()})]})})()},listSpecfile:function(e){return(0,r._)(function(){var t,n,r,i,s,l,u;return(0,o._)(this,function(o){switch(o.label){case 0:return[4,y(e)];case 1:return n=(t=a._.apply(void 0,[o.sent(),2]))[0],r=t[1],[4,n.request({packageListSpecfile:{}})];case 2:if((i=o.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(r(),i.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(i.error)}];case"packageListSpecfileResp":if(!(l=null==(s=i.packageListSpecfileResp)?void 0:s.pkgs))return[2,{packages:null,error:"list specfile returned an empty response"}];return[2,{packages:l,error:null}];default:return u="Unknown packager3 listSpecFile command ".concat(i.body,". ")+"Expected error or packageListSpecfileResp",d.captureException(Error(u)),[2,{packages:null,error:u}]}}})})()},getPackagerIds:function(){return Array.from(c.keys())},clearPackager:function(e){var t=c.get(e);(null==t?void 0:t.closeChannel)&&t.closeChannel(),c.delete(e)},onOutput:function(e){return u.on(g.OUTPUT,e),function(){u.removeListener(g.OUTPUT,e)}},onError:function(e){return u.on(g.ERROR,e),function(){u.removeListener(g.ERROR,e)}},onStateChanged:function(e){return u.on(g.STATE_CHANGED,e),function(){u.removeListener(g.STATE_CHANGED,e)}}}}e.s(["default",()=>x],17609)},259788,788222,444815,e=>{"use strict";var t,n=e.i(822658),r=e.i(546544),i=e.i(817221),a=function(e){var t=e.configurationSupport;return{textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["markdown","plaintext"]}},publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[1,2]}},formatting:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:i.default}},semanticTokens:{dynamicRegistration:!0,requests:{range:!0,full:{delta:!0}},tokenTypes:r.KNOWN_SEMANTIC_TOKENS,tokenModifiers:r.KNOWN_SEMANTIC_TOKEN_MODIFIERS,formats:[n.TokenFormat.Relative],overlappingTokenSupport:!0,multilineTokenSupport:!0,serverCancelSupport:!0,augmentsSyntaxTokens:!0},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,contextSupport:!0,completionItem:{commitCharactersSupport:!0,documentationFormat:["markdown","plaintext"],labelDetailsSupport:!0,resolveSupport:{properties:["detail","documentation"]},snippetSupport:!0},completionList:{itemDefaults:["commitCharacters"]}},codeAction:{resolveSupport:{properties:["edit"]},dataSupport:!0,dynamicRegistration:!0,isPreferredSupport:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(n.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["markdown","plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:t.clientToServer||t.serverToClient?{dynamicRegistration:!0}:void 0,configuration:t.serverToClient,semanticTokens:{refreshSupport:!0},executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[n.ResourceOperationKind.Create,n.ResourceOperationKind.Delete,n.ResourceOperationKind.Rename]}}}};e.s(["createClientCapabilities",()=>a],259788);var o=e.i(331762),s=e.i(904851),l=e.i(90659),u=e.i(721281),c=e.i(167626),d=e.i(830675),f=e.i(664152),p=new TextEncoder,h=new TextDecoder,m=(t=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source,RegExp("(".concat(t,"\\r\\n)*(").concat(t,")$"),"i")),g=function(){function e(t){(0,s._)(this,e),(0,u._)(this,"onMessage",void 0),(0,u._)(this,"buffer",void 0),(0,u._)(this,"headers",void 0),this.onMessage=t,this.buffer=new Uint8Array,this.read=this.read.bind(this)}return(0,l._)(e,[{key:"consumeHeaders",value:function(){var e=function(e){var t=e.findIndex(function(t,n){return 13===t&&10===e[n+1]&&13===e[n+2]&&10===e[n+3]});if(-1!==t){var n=h.decode(e.slice(0,t)),r=n.match(m);if(!r)throw f.logger.error("Failed to parse LSP header, no matches",{fragment:n}),Error("Unable to match header, text: ".concat(n));var i=Object.create(null),a=r[0].split("\r\n"),o=!0,s=!1,l=void 0;try{for(var u,c=a[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value,p=d.indexOf(":");if(-1===p)throw f.logger.error("Failed to parse LSP header, missing colon",{fragment:n}),Error('Message header must separate key and value using ":"');var g=d.substr(0,p),x=d.substr(p+1).trim();if("Content-Length"===g){var y=parseInt(x,10);if(isNaN(y))throw f.logger.error("Failed to parse LSP header, NaN content length",{fragment:n}),Error("Content-Length value must be a number.");i[g]=parseInt(x,10)}else i[g]=x}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}if(null==i["Content-Length"])throw f.logger.error("Failed to parse LSP header, no Content-Length",{fragment:n}),Error("Header must provide a Content-Length property.");return{headerLength:t,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e}},{key:"read",value:function(e){for(this.buffer=(t=this.buffer,n=p.encode(e),(r=new Uint8Array(t.length+n.length)).set(t),r.set(n,t.length),r);null!=(i=this.headers)?i:this.headers=this.consumeHeaders();){var t,n,r,i,a=this.headers.value["Content-Length"];if(this.buffer.length<a)return;var s=function(e,t,n){var r=h.decode(e.slice(0,t));try{return{json:JSON.parse(r),buffer:e.slice(t)}}catch(u){var i=o.Buffer.from(e).toString();if((0,c._)(u,SyntaxError)&&"Unexpected end of JSON input"===u.message){f.logger.info("Failed to parse LSP message, falling back to json parsing",{buffer:i,length:t,rpcContent:r,attempt:"original-length",headers:JSON.stringify(n)});var a=function(e,t){for(var n=0,r=0,i=!1,a=0;a<e.length+1;a++){if(0!==a&&!n&&!r&&!i)return a;var o=e[a];switch(o){case 92:a++;continue;case 34:i=!i;continue}if(!i)switch(o){case 123:n++;break;case 125:n--;break;case 91:r++;break;case 93:r--}}return -1}(e,0);if(-1!==a){var s=e.slice(0,a),l=h.decode(s);try{return{json:JSON.parse(l),buffer:e.slice(a)}}catch(e){f.logger.error("Failed to parse LSP message",{givenError:e,buffer:i,length:t,rpcContent:r,attempt:"recomputed-length"})}}}else f.logger.error("Failed to parse LSP message",{givenError:u,buffer:i,length:t,rpcContent:r,attempt:"content-length"});return{json:void 0,buffer:e.slice(t)}}}(this.buffer,a,this.headers),l=s.json,u=s.buffer;if(this.headers=void 0,this.buffer=u,void 0!==l)try{this.onMessage(l)}catch(e){d.captureException(e)}}}}]),e}();e.s(["MessageReader",()=>g],788222);var x=e.i(878420),y=e.i(64386),b=function(){function e(){(0,s._)(this,e)}return(0,l._)(e,[{key:"supports",value:function(e){return e.includes("css-language-server")}},{key:"onResponse",value:function(e,t){return"textDocument/hover"===e?this.onHover(t):t}},{key:"onHover",value:function(e){if("error"in e)return e;var t=e.result;return"cancelled"in e&&!1!==e.cancelled||!t?e:(Array.isArray(t.contents)&&(t.contents={kind:"markdown",value:["```html",t.contents[0],"```",t.contents[1],""].join("\n")}),(0,y._)((0,x._)({},e),{result:t}))}}]),e}(),w=function(){function e(){(0,s._)(this,e)}return(0,l._)(e,[{key:"supports",value:function(e){return"module:dotnet-7.0/languageServer:omni-sharp"===e}},{key:"onResponse",value:function(e,t){switch(e){case"textDocument/codeAction":return this.onCodeAction(t);case"textDocument/completion":return this.onCompletion(t)}return t}},{key:"onCodeAction",value:function(e){return"error"in e&&-32801===e.error.code?{cancelled:!0,result:null}:e}},{key:"onCompletion",value:function(e){return"error"in e&&-32801===e.error.code?{cancelled:!0,result:null}:e}}]),e}(),_=[new(function(){function e(){(0,s._)(this,e)}return(0,l._)(e,[{key:"supports",value:function(e){return e.includes("typescript-language-server")}},{key:"onResponse",value:function(e,t){return"textDocument/completion"===e?this.onCompletion(t):t}},{key:"onCompletion",value:function(e){if("error"in e||"cancelled"in e&&!1!==e.cancelled)return e;var t=e.result;if(!t)return e;Array.isArray(t)&&(t={isIncomplete:!1,items:t});for(var n=0;n<t.items.length;n++){var r=t.items[n];r.sortText&&r.sortText.startsWith("")&&(r.sortText=r.sortText.replace("",""))}return(0,y._)((0,x._)({},e),{result:t})}}]),e}()),new b,new w];function k(e){var t=!0,n=!1,r=void 0;try{for(var i,a=_[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.supports(e))return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return new S}var S=function(){function e(){(0,s._)(this,e)}return(0,l._)(e,[{key:"supports",value:function(){return!0}},{key:"onResponse",value:function(e,t){return t}}]),e}();e.s(["getQuirkHandler",()=>k],444815)},886383,e=>{"use strict";var t,n=e.i(297083),r=e.i(530658),i=e.i(346715),a=e.i(817556),o=e.i(992785);e.i(694906);var s=e.i(627720),l=e.i(671901),u=e.i(664152),c=e.i(52425),d=e.i(331762),f=e.i(878420),p=e.i(64386),h=e.i(886513),m=e.i(119468),g=e.i(830675),x=e.i(619593),y=e.i(502379),b=e.i(446692),w=e.i(866408),_=e.i(272391),k=e.i(259788),S=e.i(788222),C=e.i(444815),j=e.i(577811);function T(e,t){var n,r;return null!=(r=null==(n=b.FileTypeRepository.from(e))?void 0:n.id)?r:t}var E=((t=E||{}).INITIALIZED="INITIALIZED",t.READY="READY",t.DIAGNOSTICS="DIAGNOSTICS",t.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",t.SERVER_HEALTH_CHANGE="SERVER_HEALTH_CHANGE",t.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE",t.REQUEST="REQUEST",t.RESPONSE="RESPONSE",t.CANCEL_REQUEST="CANCEL_REQUEST",t.SEND_NOTIFICATION="SEND_NOTIFICATION",t.RECEIVE_NOTIFICATION="RECEIVE_NOTIFICATION",t.SEMANTIC_TOKENS_REFRESH="SEMANTIC_TOKENS_REFRESH",t);function R(){return Math.floor(0x7fffffff*Math.random())}function I(e){var t=JSON.stringify((0,p._)((0,f._)({},e),{jsonrpc:"2.0"})),n=d.Buffer.byteLength(t,"utf8");return"Content-Length: ".concat(n,"\r\n\r\n").concat(t)}function A(e,t){var n,r,i,a,s,l;return t&&t?!!(0,o.default)(null==e?void 0:e.fileTypeAttrs,t.fileTypeAttrs)&&!!(0,o.default)(null==e||null==(n=e.config)?void 0:n.startCommand,null==(r=t.config)?void 0:r.startCommand)&&!!(0,o.default)(null==e||null==(i=e.config)?void 0:i.initializationOptionsJson,null==(a=t.config)?void 0:a.initializationOptionsJson)&&!!(0,o.default)(null==e||null==(s=e.config)?void 0:s.configurationJson,null==(l=t.config)?void 0:l.configurationJson):!!t==!!t}function P(e){var t=e.container,d=e.toolchain,b=e.fs,E=e.enableMultipleLSPClientsPerFile,P=void 0!==E&&E,D=new Map,O=new Map,N={},M=!0;function L(e){var t=N[e];if(!t)throw Error("LSPNix: removeLanguage called with lspId never configured");var n=t.client;if(n){t.client=null,n.destroy();var i=!0,a=!1,o=void 0;try{for(var s,l=D[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=(0,r._)(s.value,2),c=u[0],d=u[1],f=O.get(c);if(f){f.delete(n),O.set(c,f);var p=!0,h=!1,m=void 0;try{for(var g,x=d[Symbol.iterator]();!(p=(g=x.next()).done);p=!0)(0,g.value)(Array.from(f))}catch(e){h=!0,m=e}finally{try{p||null==x.return||x.return()}finally{if(h)throw m}}}}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}t.closeChannel(),delete N[e]}function B(e,t){if(N[e])throw Error("LSPNix: addLanguage called with lspId already configured");N[e]={client:null,option:t,closeChannel:function(){}},M&&G(e)}var V=new Map;function F(e){if(!M)return!1;var t=N[e];return!!t&&!t.client}function U(e,t,n){new Date().getTime()-n.getTime()<5e3?t<3?setTimeout(function(){F(e)&&G(e,t+1)},1e3*Math.pow(2,t)):u.logger.error("LSP server is crash-looping. Giving up.",{lspId:e,appService:"lspnix"}):setTimeout(function(){F(e)&&G(e)})}function G(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,n._)(function(){var d,E,L,B,F,G,$;return(0,a._)(this,function(H){switch(H.label){case 0:if(!M)throw Error("LSPNix: Called startClient while not enabled");if(!N[e])throw Error("LSPNix: No config found for lspId: ".concat(e));if(!V.get(e))return[3,2];return[4,V.get(e)];case 1:if(H.sent())return[2];H.label=2;case 2:if(E=(d=N[e]).client,d.closeChannel,L=d.option,E)throw Error("LSPNix: A previous client is already set for language: ".concat(e));return B=function(){},F=new Promise(function(e){B=e}),V.set(e,F),G=[],$=t.openChannel({service:"lsp2",skip:function(e){var t=e.repl.language,n=t.startsWith("nix")||t.startsWith("html");return n||(u.logger.error("Skipped opening lsp channel for non-nix repl",{language:t,appService:"lspnix"}),B(null)),!n}},function(d){var E=d.channel,F=null,H=!1,z=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!H){H=!0,t||(B(null),V.delete(e)),G.forEach(function(e){return e()}),null==F||F.destroy(),(null==(o=N[e])?void 0:o.client)===F&&(N[e].client=null),t&&M||$();var n=!0,i=!1,a=void 0;try{for(var o,s,l=D[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=(0,r._)(s.value,2),c=u[0],d=u[1],f=O.get(c);if(f&&F&&f.has(F)){f.delete(F),f.size?O.set(c,f):O.delete(c);var p=!0,h=!1,m=void 0;try{for(var g,x=d[Symbol.iterator]();!(p=(g=x.next()).done);p=!0)(0,g.value)(Array.from(f))}catch(e){h=!0,m=e}finally{try{p||null==x.return||x.return()}finally{if(h)throw m}}}}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}}};if("open"!==E.status)return void u.logger.error("LSPNix got a channel that wasn't open. This is expected to be impossible.",{lspId:e,appService:"lspnix"});var W=new Date;return E.request({startLSP:{languageServerId:e}}).then(function(d){if(!d.ok)return void u.logger.error("LSP server failed to start",{lspId:e,appService:"lspnix",serverError:d.error});if(M&&N[e]){G.push(E.onCommand(function(t){t.state===l.api.State.Stopped&&(u.logger.error("LSP server unexpectedly disconnected",{lspId:e,appService:"lspnix"}),z(),M&&U(e,i,W))}));var $=0;(function e(t,r){return(0,n._)(function(){var n;return(0,a._)(this,function(i){switch(i.label){case 0:return[4,t.exec("pwd")];case 1:if(null!==(n=i.sent()).error){if(!r())return[2,{error:Error("LSPNix: Could not get working directory "+n.error),workingDirectory:null}];return[2,e(t,r)]}return[2,{error:null,workingDirectory:n.output.replace("\n","")}]}})})()})(t,function(){return $++<5&&M&&A(N[e].option,L)&&"open"===E.status}).then(function(t){if(!N[e])return void u.logger.info("LSPNix: lsp map changed while getting working directory",{lspId:e,appService:"lspnix"});if(!A(N[e].option,L))return void u.logger.info("LSPNix: configuration changed while getting working directory",{lspId:e,appService:"lspnix"});if("open"!==E.status)return void u.logger.error("LSPNix: channel wasn't open after getting working directory",{lspId:e,appService:"lspnix"});if(t.error)return void u.logger.error("LSPNix: failed to get working directory",{lspId:e,appService:"lspnix",originalError:null==(d=t.error)?void 0:d.message});if(F=function(e){var t,r=e.connection,i=e.isSupportedFile,s=e.clientId,l=e.clientName,c=e.getWorkspaceConfiguration,d=e.onWorkspaceConfigurationChange,b=e.applyWorkspaceEdit,E=(0,w.default)();E.setMaxListeners(1/0);var A=null,P=j.ServerState.OFFLINE,D=j.ServerHealth.NOT_READY,O=null,N=!1,M=new Map,L=new Map,B=null;function V(e){if(!A)throw Error("Expected rootUri");var t=e.slice(A.length+1);try{return decodeURIComponent(t)}catch(e){throw g.withScope(function(n){n.setExtra("fragment_to_decode",t),g.captureException(e)}),e}}function F(e){if(!A)throw Error("Expected rootUri");if(e.startsWith("/"))throw Error("Path must be relative. Got: ".concat(e));return A+"/"+e}function U(e){P!==e&&(P!==j.ServerState.INITIALIZED&&G(j.ServerHealth.NOT_READY),P=e,E.emit("SERVER_STATE_CHANGE",P))}function G(e){D!==e&&(D=e,E.emit("SERVER_HEALTH_CHANGE",D))}function $(e){E.emit("SEND_NOTIFICATION",e),r.write(I(e))}function H(e){return(0,n._)(function(){var t,n,i,o,l,c,d,m;return(0,a._)(this,function(a){if(o=void 0===(i=(n=void 0===(t=e.options)?{}:t).id)?R():i,l=n.signal,c=n.tap,d=(0,h._)(e,["options"]),!Number.isInteger(o))throw Error("Request ID must be an integer");return r.didClose()?[2,Promise.resolve({result:null,cancelled:!0})]:(E.emit("REQUEST",{id:o,data:d}),null==l||l.addEventListener("abort",function(){W(o)},{once:!0}),r.write(I((0,p._)((0,f._)({},d),{id:o}))),null===B&&(B=setTimeout(function(){G(j.ServerHealth.STALLED)},3e4)),m=new Promise(function(e){L.set(o,{requestData:d,resolve:e})}),c&&c(m),[2,m.then(function(e){null!==B&&(clearTimeout(B),B=null),P!==j.ServerState.INITIALIZED||e.cancelled||G(j.ServerHealth.READY);var t=(0,C.getQuirkHandler)(s).onResponse(d.method,e);if("error"in t){var n=t.error,r=n.code,i=n.message,a=n.data;u.logger.error("LSP request failed",{code:r,lspId:s,errorMessage:i,data:JSON.stringify(a),requestData:d})}return t})])})})()}function z(e,t){r.write(I((0,p._)((0,f._)({},t),{id:e})))}function W(e){var t=L.get(e);t&&(E.emit("CANCEL_REQUEST",e),t.resolve({result:null,cancelled:!0}),L.delete(e),$({method:"$/cancelRequest",params:{id:e}}))}var q=0,K=new S.MessageReader(function(e){var t=L.get(e.id);if(e.id&&t){var n=t.resolve;L.delete(e.id);var r=e.result,i=e.error;if((void 0!==r||i)&&E.emit("RESPONSE",e),void 0!==r){q=0,n({result:r,cancelled:!1});return}if(i){q++,n({error:i}),q>20&&(u.logger.error("LSP experienced 20 consecutive errors. Setting server health to 'BROKEN",{lspId:s}),G(j.ServerHealth.BROKEN),q=0);return}throw u.logger.error("LSP response message contained neither error nor result"),new _.default("Expected either message or error in LSP response").setExtra("message",JSON.stringify(e))}var a=e.method;if("client/registerCapability"===a){var l=e.params.registrations;if(!l||!Array.isArray(l))throw Error("Expected registrations array");l.forEach(function(e){var t=e.method;if(!t)throw Error("Expected registration method");if(!O)throw Error("Expected server capabilities");var n=e.registerOptions||!0;switch(t){case"textDocument/definition":O.definitionProvider=!0;break;case"textDocument/typeDefinition":O.typeDefinitionProvider=!0;break;case"textDocument/implementation":O.implementationProvider=!0;break;case"textDocument/references":O.referencesProvider=!0;break;case"textDocument/hover":O.hoverProvider=!0;break;case"textDocument/semanticTokens":O.semanticTokensProvider=n;break;case"textDocument/completion":O.completionProvider=n;break;case"textDocument/formatting":O.documentFormattingProvider=n;break;case"textDocument/rename":O.renameProvider=n;break;case"textDocument/codeAction":O.codeActionProvider=n;break;case"textDocument/signatureHelp":O.signatureHelpProvider=n;break;case"textDocument/didSave":if("number"==typeof O.textDocumentSync)break;O.textDocumentSync=(0,p._)((0,f._)({},O.textDocumentSync||{}),{save:n});break;case"textDocument/willSaveWaitUntil":if("number"==typeof O.textDocumentSync)break;O.textDocumentSync=(0,p._)((0,f._)({},O.textDocumentSync||{}),{willSave:!0});break;case"textDocument/didChange":if("number"==typeof O.textDocumentSync)break;O.textDocumentSync=(0,p._)((0,f._)({},O.textDocumentSync||{}),{change:n});break;case"textDocument/didOpen":case"textDocument/didClose":if("number"==typeof O.textDocumentSync)break;O.textDocumentSync=(0,p._)((0,f._)({},O.textDocumentSync||{}),{openClose:!0});break;case"workspace/executeCommand":O.executeCommandProvider=n;break;default:u.logger.info("Unexpected dynamically registered capability in LSP client",{method:t})}E.emit("SERVER_CAPABILITIES_CHANGE",O)}),z(e.id,{result:null,cancelled:!1});return}if("workspace/applyEdit"===a)return void b(e.params).then(function(t){z(e.id,{result:t,cancelled:!1})});if("textDocument/publishDiagnostics"===a){var d=V(e.params.uri),h=M.get(d);if(!h)return;var m=e.params.diagnostics;if((0,o.default)(h.diagnostics,m))return;h.diagnostics=m,E.emit("DIAGNOSTICS",{path:d,diagnostics:m});return}if("workspace/configuration"===a){var g,y=e.params,w=Array(y.items.length).fill(null),k=null!=(g=null==c?void 0:c())?g:null;k&&(w=y.items.map(function(e){return e.section?(0,x.default)(k,e.section):k})),z(e.id,{result:w,cancelled:!1})}("window/logMessage"===a||"telemetry/event"===a)&&E.emit("RECEIVE_NOTIFICATION",e),"workspace/semanticTokens/refresh"===a&&E.emit("SEMANTIC_TOKENS_REFRESH")});function Y(e){if(!O)throw Error("Expected client to be initialized");if(!O[e])throw Error("LSP Server does not support ".concat(e.replace(/Provider$/,"")));return O[e]}function Q(e){return A&&e?e.filter(function(e){return"uri"in e?e.uri.startsWith(A):e.targetUri.startsWith(A)}):e}r.read(K.read);var X=function(){};return{initialize:function(e){return(0,n._)(function(e){var n,r,i,o;return(0,a._)(this,function(a){switch(a.label){case 0:return n=e.pwd,r=e.initializationOptions,U(j.ServerState.INITIALIZING),A="file://".concat(n),[4,H({method:"initialize",params:{initializationOptions:r,capabilities:(0,k.createClientCapabilities)({configurationSupport:{serverToClient:!!c,clientToServer:!!d}}),processId:null,rootUri:A,workspaceFolders:[{name:A,uri:A}]}})];case 1:if("error"in(i=a.sent()))throw Error("Something went wrong initializing the LSP client: ".concat(i.error.message));if(i.cancelled)throw Error("Initialize request cancelled");if(!i.result)throw Error("Expected result in initialize request");return $({method:"initialized",params:{}}),O=i.result.capabilities,t=i.result.serverInfo,E.emit("SERVER_CAPABILITIES_CHANGE",O),U(j.ServerState.INITIALIZED),d&&(X=d(function(e){$({method:"workspace/didChangeConfiguration",params:{settings:e}})})),c&&(o=c())&&$({method:"workspace/didChangeConfiguration",params:{settings:o}}),[2]}})}).apply(this,arguments)},generateId:R,notify:{didOpen:function(e,t){if(!i(e))throw Error("Path not supported");var n,r=M.get(e);if(r&&0!==r.buffers){r.buffers++,M.set(e,r);return}var a=null!=(n=null==r?void 0:r.version)?n:0;M.set(e,{version:a,buffers:1,diagnostics:[]}),$({method:"textDocument/didOpen",params:{textDocument:{uri:F(e),languageId:T(e,s),text:t,version:a}}})},didChange:function(e,t){var n=M.get(e);if(!n)throw Error('Document for "'.concat(e,'" is not open'));n.version++,$({method:"textDocument/didChange",params:{textDocument:{uri:F(e),version:n.version},contentChanges:t}})},didSave:function(e){if(!M.get(e))throw Error('Document for "'.concat(e,'" is not open'));Y("textDocumentSync"),$({method:"textDocument/didSave",params:{textDocument:{uri:F(e)}}})},didClose:function(e){var t=M.get(e);if(!t)throw Error('Document for "'.concat(e,'" is not open'));t.buffers--,t.buffers>0||($({method:"textDocument/didClose",params:{textDocument:{uri:F(e)}}}),M.delete(e))},cancelRequest:function(e){W(e)}},request:{completion:function(e,t,n,r){return Y("completionProvider"),H({options:r,method:"textDocument/completion",params:{textDocument:{uri:F(e)},position:t,context:n}})},resolveCompletionItem:function(e){if(!Y("completionProvider").resolveProvider)throw Error("LSP Server does not support resolving completion items");return H({method:"completionItem/resolve",params:e})},signatureHelp:function(e,t,n){return H({options:n,method:"textDocument/signatureHelp",params:{textDocument:{uri:F(e)},position:t}})},hover:function(e,t,n){return H({options:n,method:"textDocument/hover",params:{textDocument:{uri:F(e)},position:t}})},codeActions:function(e,t,n,r){var i=M.get(e);if(!i)throw Error("Document for path ".concat(e," is not open."));var a=i.diagnostics.filter(function(e){return(0,y.isOverlapping)(e.range,t)});return H({method:"textDocument/codeAction",params:{textDocument:{uri:F(e)},range:t,context:(0,p._)((0,f._)({},r),{diagnostics:a})},options:n})},resolveCodeAction:function(e){return H({method:"codeAction/resolve",params:e})},executeCommand:function(e,t){return H({method:"workspace/executeCommand",params:{command:e,arguments:t}})},format:function(e,t){return Y("documentFormattingProvider"),H({method:"textDocument/formatting",params:{textDocument:{uri:F(e)},options:t}})},formatRange:function(e,t,n){return Y("documentRangeFormattingProvider"),H({method:"textDocument/rangeFormatting",params:{textDocument:{uri:F(e)},range:t,options:n}})},findDefinitions:function(e,t,r){var i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,n._)(function(){var n,o;return(0,a._)(this,function(a){switch(a.label){case 0:return Y("definitionProvider"),[4,H({options:r,method:"textDocument/definition",params:{textDocument:{uri:F(e)},position:t}})];case 1:if(!1!==(n=a.sent()).cancelled)return[2,n];return(o=n.result)&&i&&(o=Q(Array.isArray(o)?o:[o])),[2,(0,p._)((0,f._)({},n),{result:o})]}})})()},findTypeDefinitions:function(e,t,r){var i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,n._)(function(){var n,o;return(0,a._)(this,function(a){switch(a.label){case 0:return Y("typeDefinitionProvider"),[4,H({options:r,method:"textDocument/typeDefinition",params:{textDocument:{uri:F(e)},position:t}})];case 1:if(!1!==(n=a.sent()).cancelled)return[2,n];return(o=n.result)&&i&&(o=Q(Array.isArray(o)?o:[o])),[2,(0,p._)((0,f._)({},n),{result:o})]}})})()},findImplementations:function(e,t,r){var i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,n._)(function(){var n,o;return(0,a._)(this,function(a){switch(a.label){case 0:return Y("implementationProvider"),[4,H({options:r,method:"textDocument/implementation",params:{textDocument:{uri:F(e)},position:t}})];case 1:if(!1!==(n=a.sent()).cancelled)return[2,n];return(o=n.result)&&i&&(o=Q(Array.isArray(o)?o:[o])),[2,(0,p._)((0,f._)({},n),{result:o})]}})})()},findReferences:function(e,t,n){return Y("referencesProvider"),H({method:"textDocument/references",params:{textDocument:{uri:F(e)},position:t,context:n}})},rename:function(e,t,n,r){return Y("renameProvider"),H({options:r,method:"textDocument/rename",params:{textDocument:{uri:F(e)},position:t,newName:n}})},prepareRename:function(e,t){var n=Y("renameProvider");if("boolean"==typeof n||!n.prepareProvider)throw Error("LSP server does not support prepare rename");return H({method:"textDocument/prepareRename",params:{textDocument:{uri:F(e)},position:t}})},documentHighlights:function(e,t,r){return(0,n._)(function(){return(0,a._)(this,function(n){switch(n.label){case 0:return[4,H({options:r,method:"textDocument/documentHighlight",params:{position:t,textDocument:{uri:F(e)}}})];case 1:return[2,n.sent()]}})})()},documentSymbol:function(e,t){return(0,n._)(function(){var n;return(0,a._)(this,function(r){switch(r.label){case 0:return[4,H({options:t,method:"textDocument/documentSymbol",params:{textDocument:{uri:F(e)}}})];case 1:if(!("result"in(n=r.sent())))return[2,n];if(n.result)return[2,{result:n.result,cancelled:!1}];return[2]}})})()}},semanticTokensFull:function(e,t){if(!Y("semanticTokensProvider").full)throw Error("LSP server does not support full semantic tokens");return H({options:t,method:"textDocument/semanticTokens/full",params:{textDocument:{uri:F(e)}}})},semanticTokensDelta:function(e,t,n){var r=Y("semanticTokensProvider");if(!(null==r?void 0:r.full)||"object"!==(0,m._)(r.full)||!r.full.delta)throw Error("LSP server does not support delta semantic tokens");return H({options:n,method:"textDocument/semanticTokens/full/delta",params:{textDocument:{uri:F(e)},previousResultId:t}})},semanticTokensRange:function(e,t,n){if(!Y("semanticTokensProvider").range)throw Error("LSP server does not support range semantic tokens");return H({options:n,method:"textDocument/semanticTokens/range",params:{textDocument:{uri:F(e)},range:t}})},onDiagnostics:(0,w.createAddListener)(E,"DIAGNOSTICS"),onServerStateChange:(0,w.createAddListener)(E,"SERVER_STATE_CHANGE"),onServerHealthChange:(0,w.createAddListener)(E,"SERVER_HEALTH_CHANGE"),onServerCapabilitiesChange:(0,w.createAddListener)(E,"SERVER_CAPABILITIES_CHANGE"),onRequest:(0,w.createAddListener)(E,"REQUEST"),onResponse:(0,w.createAddListener)(E,"RESPONSE"),onCancelRequest:(0,w.createAddListener)(E,"CANCEL_REQUEST"),onSendNotification:(0,w.createAddListener)(E,"SEND_NOTIFICATION"),onReceiveNotification:(0,w.createAddListener)(E,"RECEIVE_NOTIFICATION"),onSemanticTokensRefresh:(0,w.createAddListener)(E,"SEMANTIC_TOKENS_REFRESH"),shutdown:function(){for(var e in U(j.ServerState.EXITING),M.clear(),L)W(Number(e));X(),H({method:"shutdown"}).then(function(){$({method:"exit"}),U(j.ServerState.EXITED),E.removeAllListeners()})},isDestroyed:function(){return N},destroy:function(){for(var e in N=!0,M.clear(),L)W(Number(e));X(),U(j.ServerState.EXITED),E.removeAllListeners()},getServerState:function(){return P},getServerHealth:function(){return D},getServerCapabilities:function(){return O},getServerInfo:function(){return t},getDiagnostics:function(e){var t=M.get(e);if(!t)throw Error("File with path ".concat(e," is not open."));return t.diagnostics},isOpen:function(e){return M.has(e)},documentUriToPath:V,pathToDocumentURI:F,isSupportedFile:i,getLanguageId:function(e){return T(e,s)},clientId:s,clientName:l}}({connection:{read:function(e){"open"===E.status&&E.onCommand(function(t){t.output&&e(t.output)})},write:function(e){if("open"!==E.status){(null==F?void 0:F.isDestroyed())&&u.logger.error("LSPNix: tried to write to channel but the lsp client is already destroyed");return}E.send({input:e})},didClose:function(){return"open"!==E.status}},clientId:e,clientName:N[e].option.name,isSupportedFile:function(e){return(0,s.isFileSupported)(e,L)},applyWorkspaceEdit:function(e){var t=e.edit;return(0,n._)(function(){return(0,a._)(this,function(e){return F?[2,(0,c.applyWorkspaceEdit)({edit:t,fs:b,client:F})]:[2,{applied:!1}]})})()},getWorkspaceConfiguration:function(){if(!(null==(e=L.config)?void 0:e.configurationJson))return null;var e,t=null;try{t=JSON.parse(L.config.configurationJson)}catch(e){u.logger.error("Failed to parse LSP workspace configuration",{configurationJson:L.config.configurationJson})}return t}}),null==(l=L.config)?void 0:l.initializationOptionsJson)try{$=JSON.parse(L.config.initializationOptionsJson)}catch(e){u.logger.error("Failed to parse LSP initializationOptions",{initializationOptionsJson:L.config.initializationOptionsJson})}var l,d,$,H=F.initialize({pwd:t.workingDirectory,initializationOptions:$}).catch(function(t){if((null==t?void 0:t.message)!=="Initialize request cancelled")throw u.logger.error("LSPNix: failed to initialize client",{lspId:e,appService:"lspnix",originalError:null==t?void 0:t.message}),t});G.push(F.onServerHealthChange(function(t){if(t===j.ServerHealth.BROKEN&&(u.logger.info("LSP: Server health broken",{lspId:e}),z(),M)){u.logger.info("LSP: retrying after server health broken",{lspId:e}),U(e,i,W);return}}),F.onServerStateChange(function(t){return(0,n._)(function(){var n,i,o,l,c,d,f,p,h,m,g,x,y,b,w;return(0,a._)(this,function(a){switch(a.label){case 0:if("open"!==E.status)return u.logger.info("LSPNix: channel wasn't open on state change",{lspId:e,appService:"lspnix",state:t}),z(),[2];if(!F)return u.logger.info("LSPNix: client was null on state change. This should never happen",{lspId:e,appService:"lspnix",state:t}),z(),[2];if(!A(N[e].option,L))return u.logger.info("LSPNix: configuration changed and received state change",{lspId:e,appService:"lspnix",state:t}),z(),[2];if(t===j.ServerState.EXITED)return u.logger.info("LSP server exited via 'exit' notification",{lspId:e,appService:"lspnix"}),z(),[2];if(t!==j.ServerState.INITIALIZED)return[2];return[4,H];case 1:if(a.sent(),"open"!==E.status)return u.logger.info("LSPNix: channel wasn't open after initialization",{lspId:e,appService:"lspnix"}),z(),[2];B(F),V.delete(e),N[e].client=F,n=!0,i=!1,o=void 0;try{for(l=D[Symbol.iterator]();!(n=(c=l.next()).done);n=!0)if((f=(d=(0,r._)(c.value,2))[0],p=d[1],(0,s.isFileSupported)(f,L))&&(h=O.get(f),P||!h||!h.size)){m=h?h.add(F):new Set([F]),O.set(f,m),g=!0,x=!1,y=void 0;try{for(b=p[Symbol.iterator]();!(g=(w=b.next()).done);g=!0)(0,w.value)(Array.from(m))}catch(e){x=!0,y=e}finally{try{g||null==b.return||b.return()}finally{if(x)throw y}}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return[2]}})})()}))})}}),function(e){z(e.willReconnect)}}),N[e].closeChannel=$,[2]}})})()}function $(e){var t=null==e?void 0:e.languageServers;if(!t||0===t.length){var n=!0,r=!1,i=void 0;try{for(var a,o=Object.keys(N)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;L(s)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return}var l={},u=!0,c=!1,d=void 0;try{for(var f,p=t[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;l[h.id]=h}}catch(e){c=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}var m=!0,g=!1,x=void 0;try{for(var y,b=Object.keys(N)[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var w=y.value;l[w]||L(w)}}catch(e){g=!0,x=e}finally{try{m||null==b.return||b.return()}finally{if(g)throw x}}var _=!0,k=!1,S=void 0;try{for(var C,j=Object.keys(l)[Symbol.iterator]();!(_=(C=j.next()).done);_=!0){var T=C.value,E=N[T],R=l[T];if(!E){B(T,R);continue}A(E.option,R)||(L(T),B(T,R))}}catch(e){k=!0,S=e}finally{try{_||null==j.return||j.return()}finally{if(k)throw S}}}return(0,n._)(function(){var e;return(0,a._)(this,function(t){try{e=d.configs.current,$(e),d.configs.subscribe($)}catch(e){u.logger.error("LSP initialization failed: "+e.message)}return[2]})})(),{restart:function(e){if(M){var t=N[e];if(t){if(t.client){var n=!0,i=!1,a=void 0;try{for(var o,s,l=D[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=(0,r._)(s.value,2),c=u[0],d=u[1],f=O.get(c);if(f){f.delete(t.client),O.set(c,f);var p=!0,h=!1,m=void 0;try{for(var g,x=d[Symbol.iterator]();!(p=(g=x.next()).done);p=!0)(0,g.value)(Array.from(f))}catch(e){h=!0,m=e}finally{try{p||null==x.return||x.return()}finally{if(h)throw m}}}}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}}t.closeChannel(),null==(o=t.client)||o.destroy(),t.client=null,G(e)}}},disable:function(){if(M){M=!1;var e=!0,t=!1,n=void 0;try{for(var i,a=Object.values(N)[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;o.closeChannel(),null==(c=o.client)||c.destroy(),o.client=null;var s=!0,l=!1,u=void 0;try{for(var c,d,f=D[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var p=(0,r._)(d.value,2),h=p[0],m=p[1];if(O.has(h)){O.delete(h);var g=!0,x=!1,y=void 0;try{for(var b,w=m[Symbol.iterator]();!(g=(b=w.next()).done);g=!0)(0,b.value)([])}catch(e){x=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(x)throw y}}}}}catch(e){l=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(l)throw u}}}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}},enable:function(){if(!M){M=!0;var e=!0,t=!1,n=void 0;try{for(var r,i=Object.keys(N)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;G(a)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},onClient:function(e,t){D.has(e)||D.set(e,[]),null==(c=D.get(e))||c.push(t);var n=!1,r=[],a=O.get(e);if(a&&a.size)r.push.apply(r,(0,i._)(Array.from(a)));else{var o=!0,l=!1,u=void 0;try{for(var c,d,f=Object.values(N)[Symbol.iterator]();!(o=(d=f.next()).done);o=!0){var p=d.value;if((0,s.isFileSupported)(e,p.option)&&p.client&&(r.push(p.client),!P))break}}catch(e){l=!0,u=e}finally{try{o||null==f.return||f.return()}finally{if(l)throw u}}}return Promise.resolve().then(function(){!n&&r.length&&t(r)}),function(){n=!0;var r,i=null!=(r=D.get(e))?r:[];D.set(e,i.filter(function(e){return e!==t}))}}}}e.s(["createLSPNixService",()=>P],886383)},86774,e=>{"use strict";e.i(242933);var t=e.i(790164),n=e.i(297083),r=e.i(721281),i=e.i(878420),a=e.i(64386),o=e.i(530658),s=e.i(817556),l=e.i(830675),u=e.i(935835),c=e.i(709485),d=e.i(858248);function f(e){var f=e.container,p=e.sendTrackingEvents;return function(e){var t,d=e.container,f=e.observable,p=e.track,h=new Promise(function(e){return t=e});function m(e){return(0,n._)(function(){var t,n;return(0,s._)(this,function(r){switch(r.label){case 0:return[4,h];case 1:return t=r.sent(),f.set(Array.isArray(e)?new Map(e.map(function(e){return[e.key,e.value]})):e),[4,t.request({secretsSetRequest:{contents:u.default.serialize(f.current)}})];case 2:if((n=r.sent()).error)throw Error(n.error);return null==p||p(c.events.SECRETS_USED,{action:"replaceAll"}),[2]}})})()}return d.openChannel({service:"secrets",name:"secretser",skip:function(){return!1}},function(e){var n;return(n=e.channel).onCommand(function(e){if(e.secretsGetResponse){var t=e.secretsGetResponse.contents;if(t){var n=u.default.parse(t);!function(e,t){if(e.size!==t.size)return!1;var n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=(0,o._)(a.value,2),u=l[0],c=l[1];if(!t.has(u)||t.get(u)!==c)return!1}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return!0}(f.current,n)&&f.set(n)}}}),n.request({secretsGetRequest:{}}).then(function(e){e.channelClosed||(e.error&&l.withScope(function(t){t.setTag("service","secrets"),l.captureException(Error("failed to initialize secrets: "+e.error))}),t(n))}),function(){h=new Promise(function(e){return t=e})}}),{addEntries:function(e){return(0,n._)(function(){var t,n,r,i,a,l,u,d,g,x,y,b,w,_,k,S,C;return(0,s._)(this,function(s){switch(s.label){case 0:return[4,h];case 1:if(s.sent(),t=new Map(f.current),Array.isArray(e)){n=!0,r=!1,i=void 0;try{for(a=e[Symbol.iterator]();!(n=(l=a.next()).done);n=!0)d=(u=l.value).key,g=u.value,t.set(d,g)}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}else{x=!0,y=!1,b=void 0;try{for(w=e[Symbol.iterator]();!(x=(_=w.next()).done);x=!0)S=(k=(0,o._)(_.value,2))[0],C=k[1],t.set(S,C)}catch(e){y=!0,b=e}finally{try{x||null==w.return||w.return()}finally{if(y)throw b}}}return[4,m(t)];case 2:return s.sent(),null==p||p(c.events.SECRETS_USED,{action:"addEntries"}),[2]}})})()},removeEntries:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n._)(function(){var e,n,r,i,a,o,l,u;return(0,s._)(this,function(s){switch(s.label){case 0:return[4,h];case 1:if(s.sent(),0===(e=t.filter(function(e){return f.current.has(e)})).length)return[2];n=new Map(f.current),r=!0,i=!1,a=void 0;try{for(o=e[Symbol.iterator]();!(r=(l=o.next()).done);r=!0)u=l.value,n.delete(u)}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return[4,m(n)];case 2:return s.sent(),null==p||p(c.events.SECRETS_USED,{action:"removeEntries"}),[2]}})})()},read:function(){return(0,n._)(function(){var e,t,n=arguments;return(0,s._)(this,function(r){switch(r.label){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{skipCache:!1},[4,h];case 1:if(t=r.sent(),!e.skipCache)return[2,new Map(f.current)];return[4,t.request({secretsGetRequest:{}})];case 2:return r.sent(),[2,new Map(f.current)]}})}).apply(this,arguments)},replaceAll:m,watch:function(e){var t=!1,n=null;return h.then(function(){t||(n=f.subscribe(e))}),function(){t=!0,null==n||n()}},replaceAllExternalSecrets:function(e){return(0,n._)(function(){var t;return(0,s._)(this,function(n){switch(n.label){case 0:return[4,h];case 1:return[4,n.sent().request({externalSecretsSetRequest:{externalSecrets:Array.isArray(e)?e.reduce(function(e,t){return(0,a._)((0,i._)({},e),(0,r._)({},t.key,t.url))},{}):Object.fromEntries(e)}})];case 2:if((t=n.sent()).error)throw Error(t.error);return[2]}})})()}}}({container:f,observable:new t.ObservableState(new Map),track:void 0===p||p?d.track:void 0})}e.s(["default",()=>f],86774)},998352,e=>{e.v({container:"SubreplCodeEditor-module__M49e5q__container",dirty:"SubreplCodeEditor-module__M49e5q__dirty",editor:"SubreplCodeEditor-module__M49e5q__editor",error:"SubreplCodeEditor-module__M49e5q__error",header:"SubreplCodeEditor-module__M49e5q__header",loading:"SubreplCodeEditor-module__M49e5q__loading"})},411546,e=>{e.v({container:"CodeEditor-module__QRR71q__container"})},752003,e=>{e.v({container:"Commands-module__uKRO5q__container",icon:"Commands-module__uKRO5q__icon",option:"Commands-module__uKRO5q__option"})},521926,e=>{e.v({container:"SubreplFileTree-module__VjRARW__container",error:"SubreplFileTree-module__VjRARW__error"})},31885,e=>{e.v({container:"FileTree-module__xJZbsG__container"})},741246,e=>{e.v({connecting:"SubreplShell-module__TEx63W__connecting",container:"SubreplShell-module__TEx63W__container",terminal:"SubreplShell-module__TEx63W__terminal"})},559795,e=>{e.v({container:"Shell-module__CY9zNW__container"})},623032,e=>{e.v({actions:"SubreplWorkspaceLayout-module__OSQtoa__actions",container:"SubreplWorkspaceLayout-module__OSQtoa__container",content:"SubreplWorkspaceLayout-module__OSQtoa__content",fileTree:"SubreplWorkspaceLayout-module__OSQtoa__fileTree",mainArea:"SubreplWorkspaceLayout-module__OSQtoa__mainArea",paneContent:"SubreplWorkspaceLayout-module__OSQtoa__paneContent",paneHidden:"SubreplWorkspaceLayout-module__OSQtoa__paneHidden",tab:"SubreplWorkspaceLayout-module__OSQtoa__tab",tabActive:"SubreplWorkspaceLayout-module__OSQtoa__tabActive",tabHeader:"SubreplWorkspaceLayout-module__OSQtoa__tabHeader",tabTitle:"SubreplWorkspaceLayout-module__OSQtoa__tabTitle",tabs:"SubreplWorkspaceLayout-module__OSQtoa__tabs"})},322945,e=>{e.v({clickable:"StripeConnectionSection-module__8shaba__clickable",container:"StripeConnectionSection-module__8shaba__container",contentBorder:"StripeConnectionSection-module__8shaba__contentBorder",hiddenContent:"StripeConnectionSection-module__8shaba__hiddenContent"})},638311,e=>{e.v({stepContainer:"StepItem-module__P9w8vW__stepContainer",stepNumber:"StepItem-module__P9w8vW__stepNumber",title:"StepItem-module__P9w8vW__title"})},209065,e=>{e.v({editBotTokenButton:"TelegramConnectionSection-module__elEOTa__editBotTokenButton",hidden:"TelegramConnectionSection-module__elEOTa__hidden",inactiveContainer:"TelegramConnectionSection-module__elEOTa__inactiveContainer",stepsContainer:"TelegramConnectionSection-module__elEOTa__stepsContainer"})},990929,e=>{e.v({container:"AutoscaleConfigEditor-module__iR3aEW__container"})},93699,e=>{e.v({root:"EnvSync-module__gEfg_G__root"})},1470,(e,t,n)=>{var r=e.r(365738),i=1/0,a=0/0,o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=/^(?:0|[1-9]\d*)$/,d=parseInt,f=Object.prototype.toString,p=Math.ceil,h=Math.max;function m(e){var t=void 0===e?"undefined":r._(e);return!!e&&("object"==t||"function"==t)}function g(e){return e?(e=function(e){if("number"==typeof e)return e;if((void 0===(t=e)?"undefined":r._(t))=="symbol"||t&&(void 0===t?"undefined":r._(t))=="object"&&"[object Symbol]"==f.call(t))return a;if(m(e)){var t,n="function"==typeof e.valueOf?e.valueOf():e;e=m(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var i=l.test(e);return i||u.test(e)?d(e.slice(2),i?2:8):s.test(e)?a:+e}(e))===i||e===-i?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}t.exports=function(e,t,n){n&&"number"!=typeof n&&function(e,t,n){if(!m(n))return!1;var i,a,o,s,l,u,d,p=void 0===t?"undefined":r._(t);return("number"==p?!!(null!=(i=n)&&"number"==typeof(a=i.length)&&a>-1&&a%1==0&&a<=0x1fffffffffffff&&"[object Function]"!=(s=m(o=i)?f.call(o):"")&&"[object GeneratorFunction]"!=s&&(d=null==(d=n.length)?0x1fffffffffffff:d)&&("number"==typeof t||c.test(t))&&t>-1&&t%1==0&&t<d):"string"==p&&t in n)&&(l=n[t],l===(u=e)||l!=l&&u!=u)}(e,t,n)&&(t=n=void 0),e=g(e),void 0===t?(t=e,e=0):t=g(t),n=void 0===n?e<t?1:-1:g(n);for(var i=e,a=t,o=n,s=void 0,l=-1,u=h(p((a-i)/(o||1)),0),d=Array(u);u--;)d[s?u:++l]=i,i+=o;return d}},627950,e=>{e.v({connectionContainer:"SlackConnectorSetupUI-module__WV9B6G__connectionContainer",inlineCode:"SlackConnectorSetupUI-module__WV9B6G__inlineCode",statusContainer:"SlackConnectorSetupUI-module__WV9B6G__statusContainer"})},860302,e=>{e.v({hidden:"SlackConnectionSection-module__rwhQgq__hidden",radiusDefault:"SlackConnectionSection-module__rwhQgq__radiusDefault"})},835109,491637,342424,379790,814167,754898,988105,197486,552780,878284,942859,487517,521439,648518,62279,302454,546345,304484,264646,802436,620365,912467,147255,475868,e=>{"use strict";var t,n=e.i(309968),r=e.i(94063),i=e.i(79998),a=e.i(788154),o=e.i(162540),s=e.i(676702),l=e.i(751367),u=e.i(876899),c=e.i(900396),d=e.i(118022),f=e.i(221721),p=e.i(110066),h=e.i(637972),m=e.i(224986),g=e.i(466638),x=e.i(138071),y=e.i(275222),b=e.i(401455),w=e.i(921009),_=e.i(367017),k=e.i(783742),S=e.i(782370),C=e.i(249041),j=e.i(602259),T=e.i(272553),E=e.i(236906),R=e.i(882303),I=e.i(610137),A=e.i(903270),P=e.i(276385),D=e.i(960933),O=e.i(862927),N=e.i(116235),M=e.i(840111),L=e.i(389959),B=e.i(541793),V=e.i(161322),F=e.i(57168),U=e.i(607752);e.i(148382);var G=e.i(297083),$=e.i(878420),H=e.i(64386),z=e.i(530658),W=e.i(817556),q=e.i(827444),K=e.i(282332),Y=e.i(19004),Q=e.i(416558),X=e.i(17609),Z=e.i(748855),J=e.i(664152),ee=e.i(19379),et=e.i(858248),en=e.i(635984),er=e.i(122965),ei=e.i(116680),ea=e.i(873379),eo=e.i(534518),es=e.i(886383),el=e.i(801127),eu=e.i(86774),ec=e.i(529810),ed=e.i(262962),ef=e.i(911839);function ep(e){return e.dotdevHostname.endsWith(".localhost")?"http://".concat(e.dotdevHostname,":8081"):"https://".concat(e.dotdevHostname)}var eh=(0,L.createContext)(null);function em(){var e=(0,L.useContext)(eh);if(!e)throw Error("useSubreplServicesContext must be used within a SubreplServicesContext.Provider");return e}var eg=e.i(960178),ev=e.i(625484);function ex(e){var t,n,r,i,a,o,s,l,u=e.replId,c=e.subreplId,d=e.onError,f=e.children,p=(0,L.useMemo)(function(){return(0,B.createStore)()},[]),h=(0,L.useMemo)(function(){return{type:"subrepl",replId:u,subreplId:c}},[u,c]),m=(t=(0,L.useMemo)(function(){return{replId:u,subreplId:c,onUnrecoverableError:function(e){(0,F.captureFatalWorkspaceException)(e,{tags:{subrepl:!0},extras:{replId:u,subreplId:c,context:"SubreplWorkspace"}}),null==d||d(e)}}},[u,c,d]),r=(n=(0,z._)((0,L.useState)(null),2))[0],i=n[1],a=(0,ec.default)(),o=(0,ed.useCurrentUser)(),s=(0,er.useFlaggedRetrier)(),l=(0,ea.default)(a.container),(0,L.useEffect)(function(){if(!t)return void i(null);var e,n,r,a,o,s,l,u,c,d,f,p,h,m,g,x,y,b,w,_,k,S,C=(e=t.replId,n=t.subreplId,r=t.onUnrecoverableError,a=t.enableMultipleLSPClientsPerFile,o=t.openTelemetryTracing,(s={replId:e,subreplId:n,onUnrecoverableError:r}).replId,l=s.subreplId,u=s.onUnrecoverableError,p=(f={register:function(e,t){return d(),window.addEventListener("online",e),window.addEventListener("offline",t),c=function(){window.removeEventListener("online",e),window.removeEventListener("offline",t)},d},unregister:d=function(){c&&(c(),c=void 0)}}).register,h=f.unregister,m=(0,K.default)({fetchConnectionMetadata:function(e){return(0,G._)(function(){return(0,W._)(this,function(t){return[2,(0,ef.fetchSubreplConnectionMetadata)((0,H._)((0,$._)({},e),{subreplId:l}))]})})()},getOverrideClusterMetadata:ei.default,getDotdevUrl:ep,logger:J.logger,onUnrecoverableError:u,performance:window.performance,preFetchConnectionMetadata:function(){return(0,G._)(function(){return(0,W._)(this,function(e){switch(e.label){case 0:return window.performance.clearMarks(q.performanceMarks.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(q.performanceMarks.fetchConnectionMetadataPageInvisibleEnd),window.performance.mark(q.performanceMarks.fetchConnectionMetadataPageInvisibleStart),[4,(0,ee.pageVisible)()];case 1:e.sent(),window.performance.mark(q.performanceMarks.fetchConnectionMetadataPageInvisibleEnd),e.label=2;case 2:return[2]}})})()},registerReconnectionMonitor:p,unregisterReconnectionMonitor:h,getPid2Version:en.getPid2Version}),g=(0,eo.default)({container:m}),x=(0,Y.default)({container:m,fs:g}),y=(0,Q.default)({container:m}),b=(0,Z.default)({container:m,dotReplit:x}),w=(0,X.default)({container:m,forceTrace:o,track:et.track}),_=(0,el.createPortsService)({container:m,dotReplit:x}),k=(0,es.createLSPNixService)({container:m,toolchain:b,fs:g,enableMultipleLSPClientsPerFile:void 0!==a&&a}),S=(0,eu.default)({container:m}),{container:m,fs:g,dotReplit:x,nixService:y,toolchain:b,packager:w,ports:_,lspnix:k,secrets:S});return i(C),function(){setTimeout(function(){C.container.destroy()},3e4)}},[t]),(0,L.useEffect)(function(){if(r&&t){var e,n,i=a.container.getContext();if(i){var l={repl:{__typename:"Repl",id:t.replId,language:i.repl.language,authorizations:i.repl.authorizations},currentUser:o?{__typename:"CurrentUser",id:o.id,username:o.username,isSubscribed:null!=(n=null==(e=i.currentUser)?void 0:e.isSubscribed)&&n}:void 0};return r.container.connect({context:l,getMinimumRetryDelayMs:s}),function(){r.container.close()}}}},[r,t,a.container,l,o,s]),r);return m?(0,P.jsx)(V.Provider,{store:p,children:(0,P.jsx)(U.SubreplContext.Provider,{value:h,children:(0,P.jsx)(eh.Provider,{value:m,children:f})})}):(0,P.jsx)(ev.View,{width:"100%",height:"100%",align:"center",justify:"center",children:(0,P.jsx)(eg.Text,{color:"dimmer",children:"Connecting to subrepl"})})}var ey=e.i(721281),eb=e.i(602686),ew=e.i(40916),e_=e.i(346715),ek=e.i(119468),eS=e.i(15053),eC=e.i(282453);function ej(e,t){return"".concat("subrepl-layout:").concat(e,":").concat(t)}function eT(e,t){return"".concat("subrepl-layout-ttl:").concat(e,":").concat(t)}var eE=(0,B.atom)(null),eR=(0,B.atom)(!1),eI=(0,B.atom)(null,function(e,t,n){var r=function(e,t){if(!eC.default.available())return null;var n=ej(e,t),r=eT(e,t);try{var i=eC.default.get(r);if(!i)return null;var a="number"==typeof i?i:parseInt(String(i),10);if(isNaN(a)||a<Date.now())return eC.default.remove(n),eC.default.remove(r),null;var o=eC.default.get(n);if(!(o&&(void 0===o?"undefined":(0,ek._)(o))==="object"&&Array.isArray(o.mainPanes)&&o.data&&"object"===(0,ek._)(o.data)&&"number"==typeof o.version&&"number"==typeof o.savedAt&&"string"==typeof o.fileTreePaneId&&1)||2!==o.version)return null;return o}catch(e){return null}}(n.replId,n.subreplId);if(r)t(eE,r);else{var i,a,o,s={mainPanes:[a=(0,eS.v4)()],activeMainPane:a,fileTreeVisible:!0,fileTreePaneId:o=(0,eS.v4)(),data:(i={},(0,ey._)(i,a,{type:"shell"}),(0,ey._)(i,o,{type:"fileTree"}),i),version:2};t(eE,(0,H._)((0,$._)({},s),{savedAt:Date.now()}))}t(eR,!1)}),eA=(0,B.atom)(null,function(e,t,n){var r=n.replId,i=n.subreplId,a=e(eE);if(a){if(eC.default.available()){var o=(0,H._)((0,$._)({},a),{savedAt:Date.now()}),s=ej(r,i),l=eT(r,i),u=Date.now()+864e5;try{eC.default.set(s,o),eC.default.set(l,u)}catch(e){}}t(eR,!1)}}),eP=(0,B.atom)(null,function(e,t,n){var r=e(eE);if(r){var i=(0,eS.v4)();t(eE,(0,H._)((0,$._)({},r),{mainPanes:(0,e_._)(r.mainPanes).concat([i]),activeMainPane:i,data:(0,H._)((0,$._)({},r.data),(0,ey._)({},i,n))})),t(eR,!0)}}),eD=(0,B.atom)(null,function(e,t,n){var r=e(eE);if(r&&n!==r.fileTreePaneId){var i=r.mainPanes.filter(function(e){return e!==n}),a=(0,$._)({},r.data);delete a[n];var o=r.activeMainPane;o===n&&(o=i.length>0?i[i.length-1]:null),t(eE,(0,H._)((0,$._)({},r),{mainPanes:i,activeMainPane:o,data:a})),t(eR,!0)}}),eO=(0,B.atom)(null,function(e,t,n){var r=e(eE);!r||r.mainPanes.includes(n)&&(t(eE,(0,H._)((0,$._)({},r),{activeMainPane:n})),t(eR,!0))});(0,B.atom)(null,function(e,t){var n=e(eE);n&&(t(eE,(0,H._)((0,$._)({},n),{fileTreeVisible:!n.fileTreeVisible})),t(eR,!0))});var eN=(0,L.createContext)(null);function eM(e){var t=e.children,n=(0,L.useMemo)(function(){return(0,B.createStore)()},[]);return(0,P.jsx)(eN.Provider,{value:n,children:t})}function eL(){var e=(0,L.useContext)(eN);if(!e)throw Error("useSubreplStore must be used within SubreplLayoutStoreProvider");return e}var eB=(0,B.atom)({width:0,height:0});(0,B.atom)(function(e){var t=e(eE);return t?t.mainPanes:[]});var eV=(0,B.atom)(function(e){var t=e(eE);return t?t.mainPanes.map(function(e){return{paneId:e,data:t.data[e],isActive:e===t.activeMainPane}}):[]}),eF=(0,B.atom)(function(e){var t=e(eE);return t&&t.fileTreeVisible?{paneId:t.fileTreePaneId,data:t.data[t.fileTreePaneId]}:null}),eU=e.i(806930),eG=e.i(302905),e$=e.i(113388),eH=e.i(399245),ez=e.i(167626),eW=e.i(72158),eq=e.i(488566),eK=e.i(486701),eY=e.i(682532),eQ=e.i(672199),eX=e.i(753950),eZ=e.i(179302);e.i(694906);var eJ=e.i(446692),e0=e.i(480028),e1=e.i(998352),e2=eZ.EditorView.theme({"&":{backgroundColor:e0.tokens.backgroundDefault,color:e0.tokens.foregroundDefault,height:"100%"},".cm-content":{caretColor:e0.tokens.accentPrimaryDefault,fontFamily:e0.tokens.fontFamilyCode,fontSize:e0.tokens.fontSizeDefault},".cm-cursor":{borderLeftColor:e0.tokens.accentPrimaryDefault},"&.cm-focused .cm-cursor":{borderLeftColor:e0.tokens.accentPrimaryDefault},".cm-gutters":{backgroundColor:e0.tokens.backgroundHigher,color:e0.tokens.foregroundDimmest,border:"none"},".cm-activeLineGutter":{backgroundColor:e0.tokens.backgroundHighest},".cm-activeLine":{backgroundColor:"color-mix(in srgb, ".concat(e0.tokens.backgroundHigher," 40%, transparent)")},".cm-selectionBackground, &.cm-focused .cm-selectionBackground":{backgroundColor:"color-mix(in srgb, ".concat(e0.tokens.accentPrimaryDefault," 30%, transparent)")}});function e3(e){var t=e.filePath,n=e.isHidden,r=void 0!==n&&n,i=e.onSave,a=e.autoSave,o=void 0===a||a,s=em(),l=(0,L.useRef)(null),u=(0,L.useRef)(null),c=(0,L.useRef)(null),d=(0,z._)((0,L.useState)(!0),2),f=d[0],p=d[1],h=(0,z._)((0,L.useState)(null),2),m=h[0],g=h[1],x=(0,z._)((0,L.useState)(!1),2),y=x[0],b=x[1],w=(0,L.useRef)(""),_=(0,L.useRef)(null);(0,L.useEffect)(function(){if(!r){var e=!1;return(0,G._)(function(){var n,r,i,a,d,f,h,m,x,y;return(0,W._)(this,function(k){switch(k.label){case 0:p(!0),g(null),k.label=1;case 1:return k.trys.push([1,3,4,5]),[4,s.fs.readFile(t)];case 2:if(n=k.sent(),e)return[2];if(null!==n.error)return g("Failed to read file: ".concat(n.error)),[2];(w.current=r=n.content.toString("utf8"),u.current&&c.current!==t&&((i=u.current)._blurHandler&&u.current.contentDOM.removeEventListener("blur",i._blurHandler),u.current.destroy(),u.current=null),!u.current&&l.current)&&(f=null==(d=eJ.FileTypeRepository.from(t))||null==(a=d.codeMirrorLanguage)?void 0:a.support,h=(0,e_._)([(0,eZ.lineNumbers)(),(0,eZ.highlightActiveLineGutter)(),(0,eZ.highlightSpecialChars)(),(0,eq.history)(),(0,eK.foldGutter)(),(0,eZ.drawSelection)(),(0,eZ.dropCursor)(),eX.EditorState.allowMultipleSelections.of(!0),(0,eK.indentOnInput)(),(0,eK.syntaxHighlighting)(eK.defaultHighlightStyle,{fallback:!0}),(0,eK.bracketMatching)(),(0,eW.closeBrackets)(),(0,eW.autocompletion)(),(0,eZ.rectangularSelection)(),(0,eZ.crosshairCursor)(),(0,eZ.highlightActiveLine)(),(0,eQ.highlightSelectionMatches)(),eZ.keymap.of([{key:"Mod-s",run:function(){var e;return null==(e=_.current)||e.call(_),!0}}].concat((0,e_._)(eW.closeBracketsKeymap),(0,e_._)(eq.defaultKeymap),(0,e_._)(eQ.searchKeymap),(0,e_._)(eq.historyKeymap),(0,e_._)(eW.completionKeymap),(0,e_._)(eY.lintKeymap),[eq.indentWithTab])),e2]).concat((0,e_._)(f?[f]:[]),[eZ.EditorView.updateListener.of(function(e){e.docChanged&&b(!0)})]),u.current=m=new eZ.EditorView({state:eX.EditorState.create({doc:r,extensions:h}),parent:l.current}),o&&(x=function(){var e;null==(e=_.current)||e.call(_)},m.contentDOM.addEventListener("blur",x),m._blurHandler=x),c.current=t);return b(!1),[3,5];case 3:if(y=k.sent(),e)return[2];return g("Error loading file: ".concat((0,ez._)(y,Error)?y.message:String(y))),[3,5];case 4:return e||p(!1),[7];case 5:return[2]}})})(),function(){e=!0}}},[o,t,r,s.fs]);var k=(0,L.useCallback)(function(){return(0,G._)(function(){var e,n,r;return(0,W._)(this,function(a){switch(a.label){case 0:if(!u.current||!y)return[2];if((e=u.current.state.doc.toString())===w.current)return b(!1),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,s.fs.writeFile(t,e)];case 2:if(null!==(n=a.sent()).error)return g("Failed to save: ".concat(n.error)),[2];return w.current=e,b(!1),null==i||i(),[3,4];case 3:return r=a.sent(),g("Error saving: ".concat((0,ez._)(r,Error)?r.message:String(r))),[3,4];case 4:return[2]}})})()},[t,y,s.fs,i]);return((0,L.useEffect)(function(){_.current=k},[k]),(0,L.useEffect)(function(){return function(){if(u.current){var e=u.current;e._blurHandler&&u.current.contentDOM.removeEventListener("blur",e._blurHandler),u.current.destroy(),u.current=null}}},[]),r)?null:m?(0,P.jsx)(ev.View,{clsx:e1.default.error,p:16,align:"center",justify:"center",children:(0,P.jsx)(eg.Text,{variant:"small",color:"default",children:m})}):(0,P.jsxs)(ev.View,{clsx:e1.default.container,children:[f?(0,P.jsx)(ev.View,{clsx:e1.default.loading,p:16,align:"center",justify:"center",children:(0,P.jsxs)(eg.Text,{variant:"small",color:"dimmer",children:["Loading ",t,"..."]})}):null,(0,P.jsx)(ev.View,{clsx:e1.default.header,row:!0,align:"center",justify:"space-between",p:8,children:(0,P.jsxs)(ev.View,{row:!0,gap:4,children:[(0,P.jsx)(eg.Text,{variant:"small",color:"dimmer",children:t}),y?(0,P.jsx)(eg.Text,{variant:"small",clsx:e1.default.dirty,children:"(unsaved)"}):null]})}),(0,P.jsx)(ev.View,{clsx:e1.default.editor,innerRef:l,grow:!0})]})}var e5=e.i(411546);function e4(e){var t=e.path,n=e.isHidden;return(0,P.jsx)(ev.View,{clsx:e5.default.container,children:(0,P.jsx)(e3,{filePath:t,isHidden:n})})}var e8=e.i(173703),e6=e.i(752003),e7=[{type:"shell",label:"Shell",description:"Terminal for running commands",icon:(0,P.jsx)(M.default,{})},{type:"fileTree",label:"Files",description:"Browse and manage files",icon:(0,P.jsx)(eG.default,{})},{type:"webview",label:"Webview",description:"Preview web content",icon:(0,P.jsx)(eH.default,{})},{type:"git",label:"Git",description:"Version control",icon:(0,P.jsx)(e$.default,{})}];function e9(e){var t=e.paneId,n=eL(),r=(0,V.useSetAtom)(eP,{store:n}),i=(0,V.useSetAtom)(eD,{store:n}),a=(0,L.useCallback)(function(e){switch(i(t),e){case"shell":r({type:"shell"});break;case"fileTree":r({type:"fileTree"});break;case"webview":r({type:"webview"});break;case"git":r({type:"git"})}},[i,r,t]);return(0,P.jsxs)(ev.View,{clsx:e6.default.container,p:16,gap:16,children:[(0,P.jsxs)(ev.View,{gap:4,children:[(0,P.jsx)(eg.Text,{variant:"subheadDefault",children:"Add pane"}),(0,P.jsx)(eg.Text,{variant:"small",color:"dimmer",children:"Choose a pane type to add to the workspace"})]}),(0,P.jsx)(ev.View,{gap:8,children:e7.map(function(e){return(0,P.jsx)(e8.ShadesSurface,{clsx:e6.default.option,onClick:function(){return a(e.type)},onKeyDown:function(t){("Enter"===t.key||" "===t.key)&&(t.preventDefault(),a(e.type))},br:"default",border:"regular",p:12,role:"button",tabIndex:0,children:(0,P.jsxs)(ev.View,{row:!0,gap:12,align:"center",children:[(0,P.jsx)(ev.View,{clsx:e6.default.icon,children:e.icon}),(0,P.jsxs)(ev.View,{gap:2,children:[(0,P.jsx)(eg.Text,{variant:"small",children:e.label}),(0,P.jsx)(eg.Text,{variant:"small",color:"dimmer",children:e.description})]})]})},e.type)})})]})}var te=e.i(160290),tt=e.i(710078),tn=e.i(939040),tr=e.i(739521),ti=e.i(557862),ta=e.i(521926);function to(e){var t=e.onFileSelect,n=e.currentPath,r=em(),i=(0,z._)((0,L.useState)(null),2),a=i[0],o=i[1],s=(0,z._)((0,L.useState)(null),2),l=s[0],u=s[1],c=function(){return o(null)},d=(0,L.useCallback)(function(e){return!e.filename.startsWith(".")||[".replit",".env",".gitignore"].includes(e.filename)},[]),f=(0,L.useCallback)(function(e){var n=e.path;null==t||t(n)},[t]),p=(0,te.useFiletree)({fs:r.fs,filter:d,fontSize:13,onFileSelect:f,onConflicts:function(e){return o({type:"conflicts",data:e})},onDeleteNodes:function(e){return o({type:"deleteNode",data:e})},onLoad:function(e){var t=e.error;t?u("Failed to load files: ".concat(t.message)):u(null)}});return((0,L.useEffect)(function(){n&&p.scrollToPath(n)},[n,p]),l)?(0,P.jsx)(ev.View,{clsx:ta.default.error,p:16,align:"center",justify:"center",children:(0,P.jsx)(eg.Text,{variant:"small",color:"default",children:l})}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(ev.View,{clsx:ta.default.container,children:(0,P.jsx)(te.Filetree,{store:p.store})}),(0,P.jsxs)(tr.Modal,{isOpen:!!a,onRequestClose:c,children:[(null==a?void 0:a.type)==="conflicts"?(0,P.jsx)(tt.default,{paths:a.data.conflicts.map(function(e){return e.path}),onCancel:c,onConfirm:function(){var e=a.data;"move"===e.type?p.move({nodes:e.nodes,to:e.to,overwrite:!0}):p.upload({files:e.files,parentPath:e.to,overwrite:!0}),c()}}):null,(null==a?void 0:a.type)==="deleteNode"?(0,P.jsx)(ti.default,(0,H._)((0,$._)({},(0,tn.getDeleteText)(a.data.nodes)),{delete:function(){return a.data.confirm()},hideModal:c})):null]})]})}var ts=e.i(31885);function tl(e){e.expandedPaths;var t=eL(),n=(0,V.useSetAtom)(eP,{store:t}),r=(0,L.useCallback)(function(e){n({type:"codeEditor",path:e})},[n]);return(0,P.jsx)(ev.View,{clsx:ts.default.container,children:(0,P.jsx)(to,{onFileSelect:r})})}var tu=e.i(8808),tc=e.i(210481),td=e.i(741246);function tf(e){var t=e.isHidden,n=void 0!==t&&t,r=e.onOpenFile,i=em(),a=(0,z._)((0,L.useState)(function(){return i.container.getConnectionState()}),2),o=a[0],s=a[1],l=(0,z._)((0,L.useState)(!1),2),u=l[0],c=l[1],d=(0,L.useRef)(null),f=(0,L.useCallback)(function(e){null==r||r(e.path,e.line,e.col)},[r]),p=(0,z._)((0,tc.default)({listFiles:i.fs.listFiles,openFile:f,autoFit:!0}),2),h=p[0],m=p[1];(0,L.useEffect)(function(){var e=i.container.onConnectionStateChanged(function(e){s(e)});return s(i.container.getConnectionState()),e},[i.container]),(0,L.useEffect)(function(){if(h&&!n){if(o!==tu.ConnectionState.CONNECTED){d.current&&(d.current(),d.current=null),c(!1);return}if(!d.current)return d.current=i.container.openChannel({service:"exec",name:"subrepl-shell"},function(e){var t=e.channel;c(!0);var n=t.onCommand(function(e){e.output&&h.write(e.output)}),r=h.onData(function(e){t.send({input:e})}),i=h.onResize(function(e){var n=e.cols,r=e.rows;t.send({resizeTerm:{cols:n,rows:r}})}),a=h.getSize();return t.send({resizeTerm:{cols:a.cols,rows:a.rows}}),t.send({exec:{args:["bash","-i"]}}),function(){n(),r.dispose(),i.dispose(),c(!1)}}),function(){d.current&&(d.current(),d.current=null),c(!1)}}},[h,i.container,o,n]);var g=o===tu.ConnectionState.DISCONNECTED?"Container disconnected. Waiting to reconnect...":o!==tu.ConnectionState.CONNECTED?"Connecting to container...":u?null:"Opening shell...";return(0,P.jsxs)(ev.View,{clsx:td.default.container,children:[g?(0,P.jsx)(ev.View,{clsx:td.default.connecting,p:8,children:(0,P.jsx)(eg.Text,{variant:"small",color:"dimmer",children:g})}):null,(0,P.jsx)(ev.View,{clsx:td.default.terminal,innerRef:m})]})}var tp=e.i(559795);function th(e){var t=e.isHidden,n=eL(),r=(0,V.useSetAtom)(eP,{store:n}),i=(0,L.useCallback)(function(e){r({type:"codeEditor",path:e})},[r]);return(0,P.jsx)(ev.View,{clsx:tp.default.container,children:(0,P.jsx)(tf,{isHidden:t,onOpenFile:i})})}var tm={shell:{Content:function(e){var t=e.paneId,n=e.isHidden;return(0,P.jsx)(th,{paneId:t,isHidden:n})},Icon:function(e){var t=e.size;return(0,P.jsx)(M.default,{size:t})},getTitle:function(){return"Shell"}},fileTree:{Content:function(e){var t=e.paneId,n=e.data;return(0,P.jsx)(tl,{paneId:t,expandedPaths:n.expandedPaths})},Icon:function(e){var t=e.size;return(0,P.jsx)(eG.default,{size:t})},getTitle:function(){return"Files"}},codeEditor:{Content:function(e){var t=e.paneId,n=e.data,r=e.isHidden;return(0,P.jsx)(e4,{paneId:t,path:n.path,isHidden:r})},Icon:function(e){var t=e.size;return(0,P.jsx)(eU.default,{size:t})},getTitle:function(e){var t;return null!=(t=e.path.split("/").pop())?t:"Editor"}},webview:{Content:function(){return(0,P.jsx)(ev.View,{p:16,children:"Webview not yet implemented"})},Icon:function(e){var t=e.size;return(0,P.jsx)(eH.default,{size:t})},getTitle:function(){return"Webview"}},git:{Content:function(){return(0,P.jsx)(ev.View,{p:16,children:"Git not yet implemented"})},Icon:function(e){var t=e.size;return(0,P.jsx)(e$.default,{size:t})},getTitle:function(){return"Git"}},commands:{Content:function(e){var t=e.paneId;return(0,P.jsx)(e9,{paneId:t})},Icon:function(e){var t=e.size;return(0,P.jsx)(eU.default,{size:t})},getTitle:function(){return"Commands"}}},tg=e.i(136540),tv=e.i(623032);function tx(e){var t,n=e.replId,r=e.subreplId,i=eL(),a=(0,L.useRef)(null),o=(0,V.useAtomValue)(eE,{store:i}),s=(0,V.useAtomValue)(eV,{store:i}),l=(0,V.useAtomValue)(eF,{store:i}),u=(0,V.useAtomValue)(eR,{store:i}),c=(0,V.useSetAtom)(eB,{store:i}),d=(0,V.useSetAtom)(eI,{store:i}),f=(0,V.useSetAtom)(eA,{store:i}),p=(0,V.useSetAtom)(eO,{store:i}),h=(0,V.useSetAtom)(eD,{store:i}),m=(0,V.useSetAtom)(eP,{store:i});return(0,L.useEffect)(function(){n&&r&&d({replId:n,subreplId:r})},[d,n,r]),(0,L.useEffect)(function(){var e=a.current;if(e){var t=function(){var t=e.getBoundingClientRect();c({width:t.width,height:t.height})};t();var n=new ResizeObserver(t);return n.observe(e),function(){n.disconnect()}}},[c]),(0,L.useEffect)(function(){if(u&&n&&r){var e=setTimeout(function(){f({replId:n,subreplId:r})},1e3);return function(){return clearTimeout(e)}}},[u,f,n,r]),(0,L.useEffect)(function(){if(n&&r)return function(){f({replId:n,subreplId:r})}},[f,n,r]),(0,P.jsx)(ev.View,{clsx:tv.default.container,innerRef:a,row:!0,children:o?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(ev.View,{clsx:tv.default.mainArea,grow:!0,children:[(0,P.jsxs)(ev.View,{clsx:tv.default.tabHeader,row:!0,align:"center",children:[(0,P.jsx)(ev.View,{clsx:tv.default.tabs,row:!0,grow:!0,children:s.map(function(e){var t=tm[e.data.type],n=t.Icon;return(0,P.jsxs)(ev.View,{clsx:[tv.default.tab,(0,ey._)({},tv.default.tabActive,e.isActive)],row:!0,align:"center",gap:4,px:8,onClick:function(){return p(e.paneId)},role:"tab",tabIndex:0,children:[(0,P.jsx)(n,{size:12}),(0,P.jsx)(eg.Text,{variant:"small",clsx:tv.default.tabTitle,children:t.getTitle(e.data)}),s.length>1?(0,P.jsx)(tg.IconButton,{alt:"Close pane",size:18,onClick:function(){return h(e.paneId)},children:(0,P.jsx)(eb.default,{})}):null]},e.paneId)})}),(0,P.jsx)(ev.View,{clsx:tv.default.actions,row:!0,px:4,children:(0,P.jsx)(tg.IconButton,{alt:"Add pane",size:24,onClick:function(){return m({type:"commands"})},children:(0,P.jsx)(ew.default,{})})})]}),(0,P.jsx)(ev.View,{clsx:tv.default.content,grow:!0,children:s.map(function(e){var t=tm[e.data.type].Content;return(0,P.jsx)(ev.View,{clsx:[tv.default.paneContent,(0,ey._)({},tv.default.paneHidden,!e.isActive)],children:(0,P.jsx)(t,{paneId:e.paneId,data:e.data,isHidden:!e.isActive})},e.paneId)})})]}),l?(0,P.jsx)(ev.View,{clsx:tv.default.fileTree,children:(t=tm[l.data.type].Content,(0,P.jsx)(t,{paneId:l.paneId,data:l.data,isHidden:!1}))}):null]}):null})}function ty(e){var t=e.replId,n=e.subreplId;return(0,P.jsx)(eM,{children:(0,P.jsx)(tx,{replId:t,subreplId:n})})}e.i(282890);var tb=e.i(716636),tw=D.Type.Object({type:D.Type.Literal("subreplWorkspace"),data:D.Type.Object({replId:D.Type.String(),subreplId:D.Type.String()})}),t_={Content:function(e){var t=e.pane;return(0,P.jsx)(ex,{replId:t.data.replId,subreplId:t.data.subreplId,children:(0,P.jsx)(ty,{replId:t.data.replId,subreplId:t.data.subreplId})})},Icon:function(e){var t=e.size;return(0,P.jsx)(N.IconContext.Provider,{value:{color:e0.tokens.greenStrongest,size:t},children:(0,P.jsx)(M.default,{})})},getTitle:function(e){return"Subrepl: ".concat(e.data.subreplId.slice(0,8))},description:"Workspace for interacting with a subrepl container",category:tb.PaneCategory.Other,decode:function(e){return O.Value.Decode(tw,e)}};function tk(){return{codeEditor:o.codeEditorUI,webview:E.webviewUI,media:x.mediaUI,binary:a.binaryUI,vnc:T.vncUI,adminPanel:n.adminPanelUI,runnerOutput:S.runnerOutputUI,shell:C.shellUI,envEditor:d.envEditorUI,draw:c.drawUI,git:f.gitUI,diff:u.diffUI,history:p.historyUI,database:m.kvStoreUI,neon:y.neonUI,markdown:g.markdownPreviewUi,csvPreview:s.csvPreviewUI,objectStorage:b.objectStorageUI,workflows:R.workflowsUI,project:_.projectUI,agentFiles:r.agentFilesUI,integrations:h.integrationsUI,videoPlayer:j.videoPlayerUI,replitAuth:k.replitAuthUI,securityScan:A.securityScanUI,preferences:w.preferencesUI,automations:i.automationsUI,file:I.fileUI,developer:l.developerUI,subreplWorkspace:t_}}e.s(["createPaneUIConfig",()=>tk],835109);var tS=e.i(149818),tC=e.i(529131);function tj(e){(0,tC.default)(1,arguments);var t=(0,tS.default)(e);return t.setMinutes(0,0,0),t}var tT=e.i(716499),tE=e.i(65582);function tR(e,t){(0,tC.default)(2,arguments);var n=(0,tT.default)(t);return(0,tE.default)(e,-n)}e.s(["subHours",()=>tR],491637);var tI=e.i(571926),tA=e.i(604957),tP=e.i(100915),tD=e.i(569384),tO=e.i(973245),tN=e.i(304277);function tM(){var e=(0,tD._)(["\n  fragment ReplAnalyticsDurationResult on ReplAnalyticsDuration {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return tM=function(){return e},e}function tL(){var e=(0,tD._)(["\n  query ReplAnalyticsDuration(\n    $id: String!\n    $input: ReplAnalyticsDurationInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsDuration(input: $input) {\n          ... on ReplAnalyticsDuration {\n            ...ReplAnalyticsDurationResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return tL=function(){return e},e}e.i(566901);var tB={},tV=(0,tO.gql)(tM()),tF=(0,tO.gql)(tL(),tV),tU=e.i(967629),tG=e.i(703774),t$=e.i(613355),tH=(0,tU.css)([t$.rcss.maxHeight(320),t$.rcss.minHeight(240),{aspectRatio:"2 / 1"}]);function tz(){var e=(0,tG.useTheme)().values;return{animation:{duration:0},backgroundColor:e.global.backgroundHigher,borderColor:e.global.outlineDimmer,borderWidth:1,titleFont:{family:"'IBM Plex Sans', sans-serif"},titleColor:e.global.foregroundDimmest,bodyFont:{family:"'IBM Plex Sans', sans-serif"},bodyColor:e.global.foregroundDimmest,footerFont:{family:"'IBM Plex Sans', sans-serif"},footerColor:e.global.foregroundDimmest,padding:8,cornerRadius:6}}var tW=e.i(6338),tq=e.i(396776),tK=function(e){var t=e.data;tP.Chart.register(tP.BarElement);var n=(0,tG.useTheme)().values;return(0,P.jsx)(tA.Bar,{options:{responsive:!0,maintainAspectRatio:!1,datasets:{bar:{categoryPercentage:1,barPercentage:1}},plugins:{tooltip:tz()},scales:{y:{title:{display:!0,text:"# Requests",color:n.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:n.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return e}},grid:{color:n.global.outlineDimmest}},x:{title:{font:{family:"'IBM Plex Sans', sans-serif"},display:!0,text:"Duration (ms)",color:n.global.foregroundDimmer},ticks:{autoSkip:!1,maxRotation:20,color:n.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:n.global.outlineDimmest}}}},data:{labels:t.results.map(function(e){var t=e.value.replace("ms","").split("-"),n=t[t.length-1];return n.includes("s+")?n.replace("s+","000+"):"< "+n}),datasets:[{borderWidth:0,data:t.results.map(function(e){return e.count}),backgroundColor:Array(t.results.length).fill(n.global.tealDefault)}]}})};let tY=function(e){var t,n,r,i,a=e.replId,o=e.start,s=e.hours,l=(0,z._)((0,L.useState)(void 0),2),u=l[0],c=l[1],d=(t={variables:{id:a,input:{start:o,hours:s,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsDuration.__typename){case"UserError":case"NotFoundError":c(Error(e.getRepl.analyticsDuration.message))}}},n=(0,$._)({},tB,t),tN.useQuery(tF,n)),f=d.data,p=d.loading,h=d.error;return h&&c(h),(0,P.jsxs)(ev.View,{gap:8,children:[(0,P.jsx)(eg.Text,{variant:"subheadDefault",children:"Request Durations (ms)"}),(0,P.jsxs)(ev.View,{children:[p?(0,P.jsx)(ev.View,{css:[tH,t$.rcss.borderRadius(),tW.loadingStyle.backgroundPulse()]}):null,u?(0,P.jsx)(tq.StatusBanner,{text:u.message,colorway:"negative"}):null,(null==f||null==(r=f.getRepl)?void 0:r.__typename)==="Repl"&&(null==(i=f.getRepl.analyticsDuration)?void 0:i.__typename)==="ReplAnalyticsDuration"?(0,P.jsx)(ev.View,{css:tH,children:(0,P.jsx)(tK,{data:f.getRepl.analyticsDuration})}):null]})]})};var tQ=e.i(233760);function tX(){var e=(0,tD._)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return tX=function(){return e},e}function tZ(){var e=(0,tD._)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return tZ=function(){return e},e}function tJ(){var e=(0,tD._)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return tJ=function(){return e},e}var t0={},t1=(0,tO.gql)(tX()),t2=(0,tO.gql)(tZ(),t1),t3=(0,tO.gql)(tJ(),t2),t5=e.i(417751),t4=e.i(671341),t4=t4;tP.Chart.register(tP.CategoryScale,tP.LinearScale,tP.PointElement,tP.LineElement,tP.Tooltip);let t8=function(e){var t=e.labels,n=e.datasets,r=e.maintainAspectRatio,i=e.yAxisLabel,a=e.xAxisLabel,o=e.unit,s=(0,tG.useTheme)().values,l={labels:t.map(function(e){return e.toISOString()}),datasets:n.map(function(e){return(0,H._)((0,$._)({},e),{data:e.data.map(function(e){var t=e.x,n=e.y;return{x:t.toISOString(),y:n}}),pointRadius:.5,tension:.1})})},u=t.length;return(0,P.jsx)(tA.Line,{options:{clip:4,interaction:{mode:"nearest",intersect:!1},transitions:{active:{animation:{duration:0}}},elements:{point:{hoverRadius:4},line:{borderWidth:2}},responsive:!0,maintainAspectRatio:void 0===r||r,plugins:{tooltip:(0,H._)((0,$._)({},tz()),{callbacks:{title:function(e){var t=new Date(e[0].label);return(0,t5.format)(t,"MMM d, HH:mm (z)")}}})},scales:{y:{title:{display:!0,text:void 0===i?"# Requests":i,color:s.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:s.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:s.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return o?"".concat(e).concat(o):e}},min:0},x:{title:{display:!0,text:void 0===a?"Time":a,color:s.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:s.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:s.global.foregroundDimmer,callback:function(e,n){var r=t[n];if(u<=24){if(r.getHours()%4!=0)return;return(0,t5.format)(r,"HH:mm")}if(r.toISOString()===(0,t4.default)(r).toISOString())return(0,t5.format)(r,"MMM d")}}}}},data:l})};var t6=function(e){var t=e.data,n=e.start,r=e.hours,i=(0,tG.useTheme)().values,a=Array(r).fill(0).map(function(e,t){return(0,tQ.addHours)(n,t)}),o=t.results.reduce(function(e,t){return e.set(t.timestamp,t),e},new Map),s=[{label:"Connected",data:a.map(function(e){var t;return{y:(null!=(t=o.get(e.toISOString()))?t:{success:0}).success,x:e}}),borderColor:i.global.accentPrimaryStronger,backgroundColor:i.global.accentPrimaryStronger},{label:"Failed",data:a.map(function(e){var t;return{y:(null!=(t=o.get(e.toISOString()))?t:{failure:0}).failure,x:e}}),borderColor:i.global.accentNegativeStronger,backgroundColor:i.global.accentNegativeStronger}];return(0,P.jsx)(t8,{labels:a,datasets:s,maintainAspectRatio:!1})};let t7=function(e){var t,n,r,i,a=e.replId,o=e.start,s=e.hours,l=(0,z._)((0,L.useState)(void 0),2),u=l[0],c=l[1],d=(t={variables:{id:a,input:{start:o,hours:s,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":c(Error(e.getRepl.analyticsPageViews.message))}}},n=(0,$._)({},t0,t),tN.useQuery(t3,n)),f=d.data,p=d.loading,h=d.error,m=(null==f||null==(r=f.getRepl)?void 0:r.__typename)==="Repl"&&(null==(i=f.getRepl.analyticsPageViews)?void 0:i.__typename)==="ReplAnalyticsPageViews"?f.getRepl.analyticsPageViews:void 0,g=m?m.uniques:void 0;return h&&c(h),(0,P.jsxs)(ev.View,{gap:8,children:[(0,P.jsxs)(ev.View,{row:!0,align:"center",justify:"space-between",children:[(0,P.jsx)(eg.Text,{variant:"subheadDefault",multiline:!1,children:"Requests"}),g?(0,P.jsxs)(eg.Text,{multiline:!1,children:[(0,P.jsx)("strong",{children:g})," unique IP addresses"]}):null]}),(0,P.jsxs)(ev.View,{children:[p?(0,P.jsx)(ev.View,{css:[t$.rcss.width("100%"),tH,t$.rcss.borderRadius(),tW.loadingStyle.backgroundPulse()]}):null,u?(0,P.jsx)(tq.StatusBanner,{text:u.message,colorway:"negative"}):null,m?(0,P.jsx)(ev.View,{css:tH,children:(0,P.jsx)(t6,{data:m,start:o,hours:s})}):null]})]})};function t9(){var e=(0,tD._)(["\n  fragment ReplAnalyticsTimeSeriesDataPoint on ReplAnalyticsTimeSeriesData {\n    __typename\n    timestamp\n    value\n    count\n    unit\n  }\n"]);return t9=function(){return e},e}function ne(){var e=(0,tD._)(["\n  fragment ReplAnalyticsTimeSeries on ReplAnalyticsTimeSeries {\n    __typename\n    results {\n      ...ReplAnalyticsTimeSeriesDataPoint\n    }\n  }\n  ","\n"]);return ne=function(){return e},e}function nt(){var e=(0,tD._)(["\n  query ReplAnalyticsTimeSeries(\n    $id: String!\n    $input: ReplAnalyticsTimeSeriesInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTimeSeries(input: $input) {\n          ... on ReplAnalyticsTimeSeries {\n            ...ReplAnalyticsTimeSeries\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return nt=function(){return e},e}var nn={},nr=(0,tO.gql)(t9()),ni=(0,tO.gql)(ne(),nr),na=(0,tO.gql)(nt(),ni),no=e.i(530929),ns=e.i(781862),nl=e.i(9231),nu=e.i(661998),nc=e.i(254878),nd=e.i(160771),nf=e.i(999128);function np(e,t,n){(0,tC.default)(2,arguments);var r=n||{},i=r.locale,a=i&&i.options&&i.options.weekStartsOn,o=null==a?0:(0,tT.default)(a),s=null==r.weekStartsOn?o:(0,tT.default)(r.weekStartsOn);if(!(s>=0&&s<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=(0,tS.default)(e),u=(0,tT.default)(t),c=7*((u%7+7)%7<s)+u-l.getUTCDay();return l.setUTCDate(l.getUTCDate()+c),l}var nh=e.i(135518),nm=e.i(273047),ng=e.i(971329),nv=e.i(957289),nx=/^(1[0-2]|0?\d)/,ny=/^(3[0-1]|[0-2]?\d)/,nb=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,nw=/^(5[0-3]|[0-4]?\d)/,n_=/^(2[0-3]|[0-1]?\d)/,nk=/^(2[0-4]|[0-1]?\d)/,nS=/^(1[0-1]|0?\d)/,nC=/^(1[0-2]|0?\d)/,nj=/^[0-5]?\d/,nT=/^[0-5]?\d/,nE=/^\d/,nR=/^\d{1,2}/,nI=/^\d{1,3}/,nA=/^\d{1,4}/,nP=/^-?\d+/,nD=/^-?\d/,nO=/^-?\d{1,2}/,nN=/^-?\d{1,3}/,nM=/^-?\d{1,4}/,nL=/^([+-])(\d{2})(\d{2})?|Z/,nB=/^([+-])(\d{2})(\d{2})|Z/,nV=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,nF=/^([+-])(\d{2}):(\d{2})|Z/,nU=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function nG(e,t,n){var r=t.match(e);if(!r)return null;var i=parseInt(r[0],10);return{value:n?n(i):i,rest:t.slice(r[0].length)}}function n$(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*((n[2]?parseInt(n[2],10):0)*36e5+(n[3]?parseInt(n[3],10):0)*6e4+(n[5]?parseInt(n[5],10):0)*1e3),rest:t.slice(n[0].length)}:null}function nH(e,t,n){switch(e){case 1:return nG(nE,t,n);case 2:return nG(nR,t,n);case 3:return nG(nI,t,n);case 4:return nG(nA,t,n);default:return nG(RegExp("^\\d{1,"+e+"}"),t,n)}}function nz(e,t,n){switch(e){case 1:return nG(nD,t,n);case 2:return nG(nO,t,n);case 3:return nG(nN,t,n);case 4:return nG(nM,t,n);default:return nG(RegExp("^-?\\d{1,"+e+"}"),t,n)}}function nW(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function nq(e,t){var n,r=t>0,i=r?t:1-t;if(i<=50)n=e||100;else{var a=i+50;n=e+100*Math.floor(a/100)-100*(e>=a%100)}return r?n:1-n}var nK=[31,28,31,30,31,30,31,31,30,31,30,31],nY=[31,29,31,30,31,30,31,31,30,31,30,31];function nQ(e){return e%400==0||e%4==0&&e%100!=0}let nX={G:{priority:140,parse:function(e,t,n,r){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}},set:function(e,t,n,r){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,t,n,r){var i=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return nH(4,e,i);case"yo":return n.ordinalNumber(e,{unit:"year",valueCallback:i});default:return nH(t.length,e,i)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,r){var i=e.getUTCFullYear();if(n.isTwoDigitYear){var a=nq(n.year,i);return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,t,n,r){var i=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return nH(4,e,i);case"Yo":return n.ordinalNumber(e,{unit:"year",valueCallback:i});default:return nH(t.length,e,i)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,r){var i=(0,nf.default)(e,r);if(n.isTwoDigitYear){var a=nq(n.year,i);return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,nv.default)(e,r)}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,nv.default)(e,r)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,t,n,r){return"R"===t?nz(4,e):nz(t.length,e)},set:function(e,t,n,r){var i=new Date(0);return i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0),(0,ng.default)(i)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,t,n,r){return"u"===t?nz(4,e):nz(t.length,e)},set:function(e,t,n,r){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,t,n,r){switch(t){case"Q":case"QQ":return nH(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,r){return e.setUTCMonth((n-1)*3,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,t,n,r){switch(t){case"q":case"qq":return nH(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,r){return e.setUTCMonth((n-1)*3,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,t,n,r){var i=function(e){return e-1};switch(t){case"M":return nG(nx,e,i);case"MM":return nH(2,e,i);case"Mo":return n.ordinalNumber(e,{unit:"month",valueCallback:i});case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,t,n,r){var i=function(e){return e-1};switch(t){case"L":return nG(nx,e,i);case"LL":return nH(2,e,i);case"Lo":return n.ordinalNumber(e,{unit:"month",valueCallback:i});case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,t,n,r){switch(t){case"w":return nG(nw,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return nH(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,r){return(0,nv.default)(function(e,t,n){(0,tC.default)(2,arguments);var r=(0,tS.default)(e),i=(0,tT.default)(t),a=(0,nm.default)(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*a),r}(e,n,r),r)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,t,n,r){switch(t){case"I":return nG(nw,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return nH(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,r){return(0,ng.default)(function(e,t){(0,tC.default)(2,arguments);var n=(0,tS.default)(e),r=(0,tT.default)(t),i=(0,nh.default)(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,n,r),r)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(e,t,n,r){switch(t){case"d":return nG(ny,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return nH(t.length,e)}},validate:function(e,t,n){var r=nQ(e.getUTCFullYear()),i=e.getUTCMonth();return r?t>=1&&t<=nY[i]:t>=1&&t<=nK[i]},set:function(e,t,n,r){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(e,t,n,r){switch(t){case"D":case"DD":return nG(nb,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return nH(t.length,e)}},validate:function(e,t,n){return nQ(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365},set:function(e,t,n,r){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,t,n,r){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return(e=np(e,n,r)).setUTCHours(0,0,0,0),e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return nH(t.length,e,i);case"eo":return n.ordinalNumber(e,{unit:"day",valueCallback:i});case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return(e=np(e,n,r)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return nH(t.length,e,i);case"co":return n.ordinalNumber(e,{unit:"day",valueCallback:i});case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,r){return(e=np(e,n,r)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,t,n,r){var i=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return nH(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return n.day(e,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i});case"iiiii":return n.day(e,{width:"narrow",context:"formatting",valueCallback:i});case"iiiiii":return n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i});default:return n.day(e,{width:"wide",context:"formatting",valueCallback:i})||n.day(e,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i})}},validate:function(e,t,n){return t>=1&&t<=7},set:function(e,t,n,r){return(e=function(e,t){(0,tC.default)(2,arguments);var n=(0,tT.default)(t);n%7==0&&(n-=7);var r=(0,tS.default)(e),i=7*((n%7+7)%7<1)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+i),r}(e,n,r)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,t,n,r){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(nW(n),0,0,0),e},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(e,t,n,r){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(nW(n),0,0,0),e},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(e,t,n,r){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,r){return e.setUTCHours(nW(n),0,0,0),e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,t,n,r){switch(t){case"h":return nG(nC,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return nH(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=12},set:function(e,t,n,r){var i=e.getUTCHours()>=12;return i&&n<12?e.setUTCHours(n+12,0,0,0):i||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,t,n,r){switch(t){case"H":return nG(n_,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return nH(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=23},set:function(e,t,n,r){return e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,t,n,r){switch(t){case"K":return nG(nS,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return nH(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,r){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(e,t,n,r){switch(t){case"k":return nG(nk,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return nH(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=24},set:function(e,t,n,r){return e.setUTCHours(n<=24?n%24:n,0,0,0),e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,t,n,r){switch(t){case"m":return nG(nj,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return nH(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,r){return e.setUTCMinutes(n,0,0),e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,t,n,r){switch(t){case"s":return nG(nT,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return nH(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,r){return e.setUTCSeconds(n,0),e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,t,n,r){return nH(t.length,e,function(e){return Math.floor(e*Math.pow(10,-t.length+3))})},set:function(e,t,n,r){return e.setUTCMilliseconds(n),e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,t,n,r){switch(t){case"X":return n$(nL,e);case"XX":return n$(nB,e);case"XXXX":return n$(nV,e);case"XXXXX":return n$(nU,e);default:return n$(nF,e)}},set:function(e,t,n,r){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,t,n,r){switch(t){case"x":return n$(nL,e);case"xx":return n$(nB,e);case"xxxx":return n$(nV,e);case"xxxxx":return n$(nU,e);default:return n$(nF,e)}},set:function(e,t,n,r){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,t,n,r){return nG(nP,e,void 0)},set:function(e,t,n,r){return[new Date(1e3*n),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,t,n,r){return nG(nP,e,void 0)},set:function(e,t,n,r){return[new Date(n),{timestampIsSet:!0}]},incompatibleTokens:"*"}};var nZ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,n0=/^'([^]*?)'?$/,n1=/''/g,n2=/\S/,n3=/[a-zA-Z]/;function n5(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}var n4=e.i(760129),n8=e.i(310158),n6=e.i(674),n7=e.i(767428),n9=e.i(55721),re=e.i(456317),rt=e.i(980768),rn=e.i(435575),rr=e.i(965078),ri=e.i(671662),ra=e.i(771348),ro=e.i(199674),rs=e.i(123767),rs=rs,rl=e.i(279896),rl=rl,ru=e.i(550470),ru=ru,rc=e.i(351263),rc=rc;function rd(e,t){(0,tC.default)(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,a=null==i?0:(0,tT.default)(i),o=null==n.weekStartsOn?a:(0,tT.default)(n.weekStartsOn);if(!(o>=0&&o<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=(0,tS.default)(e),l=s.getDay();return s.setDate(s.getDate()-(7*(l<o)+l-o)),s.setHours(0,0,0,0),s}var t4=t4,rf=e.i(975676),rf=rf,rp=e.i(410960),rp=rp,rh={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};tP._adapters._date.override({_id:"date-fns",formats:function(){return rh},parse:function(e,t){if(null==e)return null;var n=void 0===e?"undefined":(0,ek._)(e);return"number"===n||(0,ez._)(e,Date)?e=(0,tS.default)(e):"string"===n&&(e="string"==typeof t?function(e,t,n,r){(0,tC.default)(3,arguments);var i,a=String(e),o=String(t),s=r||{},l=s.locale||no.default;if(!l.match)throw RangeError("locale must contain match property");var u=l.options&&l.options.firstWeekContainsDate,c=null==u?1:(0,tT.default)(u),d=null==s.firstWeekContainsDate?c:(0,tT.default)(s.firstWeekContainsDate);if(!(d>=1&&d<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=l.options&&l.options.weekStartsOn,p=null==f?0:(0,tT.default)(f),h=null==s.weekStartsOn?p:(0,tT.default)(s.weekStartsOn);if(!(h>=0&&h<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===o)if(""===a)return(0,tS.default)(n);else return new Date(NaN);var m={firstWeekContainsDate:d,weekStartsOn:h,locale:l},g=[{priority:10,subPriority:-1,set:n5,index:0}],x=o.match(nJ).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,nu.default[t])(e,l.formatLong,m):e}).join("").match(nZ),y=[];for(i=0;i<x.length;i++){var b=x[i];!s.useAdditionalWeekYearTokens&&(0,nd.isProtectedWeekYearToken)(b)&&(0,nd.throwProtectedError)(b,o,e),!s.useAdditionalDayOfYearTokens&&(0,nd.isProtectedDayOfYearToken)(b)&&(0,nd.throwProtectedError)(b,o,e);var w=b[0],_=nX[w];if(_){var k=_.incompatibleTokens;if(Array.isArray(k)){for(var S=void 0,C=0;C<y.length;C++){var j=y[C].token;if(-1!==k.indexOf(j)||j===w){S=y[C];break}}if(S)throw RangeError("The format string mustn't contain `".concat(S.fullToken,"` and `").concat(b,"` at the same time"))}else if("*"===_.incompatibleTokens&&y.length)throw RangeError("The format string mustn't contain `".concat(b,"` and any other token at the same time"));y.push({token:w,fullToken:b});var T=_.parse(a,b,l.match,m);if(!T)return new Date(NaN);g.push({priority:_.priority,subPriority:_.subPriority||0,set:_.set,validate:_.validate,value:T.value,index:g.length}),a=T.rest}else{if(w.match(n3))throw RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");if("''"===b?b="'":"'"===w&&(b=b.match(n0)[1].replace(n1,"'")),0!==a.indexOf(b))return new Date(NaN);a=a.slice(b.length)}}if(a.length>0&&n2.test(a))return new Date(NaN);var E=g.map(function(e){return e.priority}).sort(function(e,t){return t-e}).filter(function(e,t,n){return n.indexOf(e)===t}).map(function(e){return g.filter(function(t){return t.priority===e}).sort(function(e,t){return t.subPriority-e.subPriority})}).map(function(e){return e[0]}),R=(0,tS.default)(n);if(isNaN(R))return new Date(NaN);var I=(0,ns.default)(R,(0,nc.default)(R)),A={};for(i=0;i<E.length;i++){var P=E[i];if(P.validate&&!P.validate(I,P.value,m))return new Date(NaN);var D=P.set(I,A,P.value,m);D[0]?(I=D[0],(0,nl.default)(A,D[1])):I=D}return I}(e,t,new Date,this.options):(0,n4.parseISO)(e,this.options)),(0,n8.isValid)(e)?e.getTime():null},format:function(e,t){return(0,t5.format)(e,t,this.options)},add:function(e,t,n){switch(n){case"millisecond":return(0,rt.default)(e,t);case"second":return(0,rn.addSeconds)(e,t);case"minute":return function(e,t){(0,tC.default)(2,arguments);var n=(0,tT.default)(t);return(0,rt.default)(e,6e4*n)}(e,t);case"hour":return(0,tQ.addHours)(e,t);case"day":return(0,re.addDays)(e,t);case"week":return function(e,t){(0,tC.default)(2,arguments);var n=(0,tT.default)(t);return(0,n9.default)(e,7*n)}(e,t);case"month":return(0,n7.addMonths)(e,t);case"quarter":return function(e,t){(0,tC.default)(2,arguments);var n=(0,tT.default)(t);return(0,n6.default)(e,3*n)}(e,t);case"year":return function(e,t){(0,tC.default)(2,arguments);var n=(0,tT.default)(t);return(0,n6.default)(e,12*n)}(e,t);default:return e}},diff:function(e,t,n){switch(n){case"millisecond":return(0,rc.default)(e,t);case"second":return(0,ru.default)(e,t);case"minute":return(0,rl.default)(e,t);case"hour":return(0,rs.default)(e,t);case"day":return(0,ro.differenceInDays)(e,t);case"week":return function(e,t){(0,tC.default)(2,arguments);var n=(0,ra.default)(e,t)/7;return n>0?Math.floor(n):Math.ceil(n)}(e,t);case"month":return(0,ri.default)(e,t);case"quarter":return function(e,t){(0,tC.default)(2,arguments);var n=(0,ri.default)(e,t)/3;return n>0?Math.floor(n):Math.ceil(n)}(e,t);case"year":return function(e,t){(0,tC.default)(2,arguments);var n=(0,tS.default)(e),r=(0,tS.default)(t),i=(0,rr.default)(n,r),a=Math.abs(function(e,t){(0,tC.default)(2,arguments);var n=(0,tS.default)(e),r=(0,tS.default)(t);return n.getFullYear()-r.getFullYear()}(n,r));n.setFullYear(1584),r.setFullYear(1584);var o=(0,rr.default)(n,r)===-i,s=i*(a-Number(o));return 0===s?0:s}(e,t);default:return 0}},startOf:function(e,t,n){switch(t){case"second":return function(e){(0,tC.default)(1,arguments);var t=(0,tS.default)(e);return t.setMilliseconds(0),t}(e);case"minute":return function(e){(0,tC.default)(1,arguments);var t=(0,tS.default)(e);return t.setSeconds(0,0),t}(e);case"hour":return tj(e);case"day":return(0,t4.default)(e);case"week":return rd(e);case"isoWeek":return rd(e,{weekStartsOn:+n});case"month":return function(e){(0,tC.default)(1,arguments);var t=(0,tS.default)(e);return t.setDate(1),t.setHours(0,0,0,0),t}(e);case"quarter":return function(e){(0,tC.default)(1,arguments);var t=(0,tS.default)(e),n=t.getMonth();return t.setMonth(n-n%3,1),t.setHours(0,0,0,0),t}(e);case"year":return function(e){(0,tC.default)(1,arguments);var t=(0,tS.default)(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}(e);default:return e}},endOf:function(e,t){switch(t){case"second":return function(e){(0,tC.default)(1,arguments);var t=(0,tS.default)(e);return t.setMilliseconds(999),t}(e);case"minute":return function(e){(0,tC.default)(1,arguments);var t=(0,tS.default)(e);return t.setSeconds(59,999),t}(e);case"hour":return function(e){(0,tC.default)(1,arguments);var t=(0,tS.default)(e);return t.setMinutes(59,59,999),t}(e);case"day":return(0,rp.default)(e);case"week":return function(e,t){(0,tC.default)(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,a=null==i?0:(0,tT.default)(i),o=null==n.weekStartsOn?a:(0,tT.default)(n.weekStartsOn);if(!(o>=0&&o<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=(0,tS.default)(e),l=s.getDay();return s.setDate(s.getDate()+((l<o?-7:0)+6-(l-o))),s.setHours(23,59,59,999),s}(e);case"month":return(0,rf.default)(e);case"quarter":return function(e){(0,tC.default)(1,arguments);var t=(0,tS.default)(e),n=t.getMonth();return t.setMonth(n-n%3+3,0),t.setHours(23,59,59,999),t}(e);case"year":return function(e){(0,tC.default)(1,arguments);var t=(0,tS.default)(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}(e);default:return e}}}),tP.Chart.register(tP.CategoryScale,tP.LinearScale,tP.PointElement,tP.LineElement,tP.Title,tP.Tooltip,tP.TimeScale);let rm=function(e){var t,n=e.data,r=e.start,i=e.end,a=e.label,o=e.unit,s=e.xAxisLabel,l=e.yAxisLabel,u=(0,tG.useTheme)().values,c=tz(),d={datasets:[{label:a,data:n,fill:!1,borderColor:u.global.blueDimmer,tension:.1}]},f=(t=Math).max.apply(t,(0,e_._)(n.map(function(e){return e.y}))),p=Math.ceil(o===tI.ResourceMonitoringUnit.Percentage?Math.max(f,100):Math.ceil(1.2*f)),h=function(e,t){var n=t.getTime()-e.getTime();if(n<=36e5)return{unit:"minute",stepSize:5};if(n<=216e5)return{unit:"minute",stepSize:30};if(n<=864e5)return{unit:"hour",stepSize:2};if(n<=2592e5)return{unit:"hour",stepSize:6};if(n<=6048e5)return{unit:"hour",stepSize:12};else return{unit:"day",stepSize:1}}(r,i),m=h.unit,g=h.stepSize;return(0,P.jsx)(tA.Line,{data:d,options:{animation:!1,scales:{x:{type:"time",time:{unit:m},title:{display:!0,text:s},min:r.getTime(),max:i.getTime(),ticks:{stepSize:g,color:u.global.foregroundDimmer}},y:{title:{display:!0,text:l},type:"linear",suggestedMax:p,ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:u.global.foregroundDimmer,callback:function(e){return o?"".concat(e).concat(o):e}},min:0}},maintainAspectRatio:!1,responsive:!0,plugins:{tooltip:(0,$._)({},c)}}})};var rg=function(e){var t,n,r,i,a=e.start,o=e.end,s=e.timeSeriesFragment,l=e.xAxisLabel,u=e.yAxisLabel;if(0===s.results.length)return(0,P.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px"},children:"No Data Available"});var c=(r=(t=s.results)[0].value,{label:r,unit:(i=null==(n=t[0])?void 0:n.unit)?function(e,t){var n=Object.entries(e).find(function(e){var n=(0,z._)(e,2);return n[0],n[1]===t});if(n)return e[n[0]]}(tI.ResourceMonitoringUnit,i):void 0,data:t.map(function(e){return{x:new Date(e.timestamp),y:e.count}})}),d=c.label,f=c.unit,p=c.data;return(0,P.jsx)(rm,{data:p,start:a,end:o,label:d,unit:f,xAxisLabel:l,yAxisLabel:u})},rv=function(e){var t=e.data,n=e.start,r=e.hours,i=e.colorFn,a=Array(r).fill(0).map(function(e,t){return(0,tQ.addHours)(n,t)}),o=t.results.reduce(function(e,t){var n,r=t.timestamp,i=t.value,a=t.count,o=null!=(n=e.get(i))?n:new Map;return o.set(r,a),e.set(i,o),e},new Map),s=(0,e_._)(o.keys()).map(function(e,t){var n=i(e,t),r=o.get(e);return{label:e,data:a.map(function(e){var t,n=null!=(t=null==r?void 0:r.get(e.toISOString()))?t:0;return{x:new Date(e),y:n}}),borderColor:n,backgroundColor:n}});return(0,P.jsx)(t8,{labels:a,datasets:s,maintainAspectRatio:!1})};let rx=function(e){var t,n,r,i,a=e.replId,o=e.title,s=e.metric,l=e.start,u=e.hours,c=e.colorFn,d=(0,z._)((0,L.useState)(void 0),2),f=d[0],p=d[1],h=(t={variables:{id:a,input:{metric:s,start:l,hours:u,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsTimeSeries.__typename){case"TooManyRequestsError":p(Error("Too many requests"));break;case"UserError":case"NotFoundError":p(Error(e.getRepl.analyticsTimeSeries.message))}}},n=(0,$._)({},nn,t),tN.useQuery(na,n)),m=h.data,g=h.loading,x=h.error,y=(null==m||null==(r=m.getRepl)?void 0:r.__typename)==="Repl"&&(null==(i=m.getRepl.analyticsTimeSeries)?void 0:i.__typename)==="ReplAnalyticsTimeSeries"?m.getRepl.analyticsTimeSeries:void 0;return x&&p(x),(0,P.jsxs)(ev.View,{gap:8,children:[(0,P.jsx)(ev.View,{row:!0,align:"center",justify:"space-between",children:(0,P.jsx)(eg.Text,{variant:"subheadDefault",multiline:!1,children:o})}),(0,P.jsxs)(ev.View,{children:[g?(0,P.jsx)(ev.View,{css:[t$.rcss.width("100%"),tH,t$.rcss.borderRadius(),tW.loadingStyle.backgroundPulse()]}):null,f?(0,P.jsx)(tq.StatusBanner,{text:f.message,colorway:"negative"}):null,y?(0,P.jsx)(ev.View,{css:tH,children:(0,tI.isResourceMonitoringMetric)(s)?(0,P.jsx)(rg,{start:l,end:(0,tQ.addHours)(l,u),timeSeriesFragment:y}):(0,P.jsx)(rv,{data:y,start:l,hours:u,colorFn:c})}):null]})]})};e.s(["default",0,rx],342424);var ry=e.i(115306);function rb(){var e=(0,tD._)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return rb=function(){return e},e}function rw(){var e=(0,tD._)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return rw=function(){return e},e}var r_={},rk=(0,tO.gql)(rb()),rS=(0,tO.gql)(rw(),rk),rC=e.i(526017),rj=e.i(178496),rT=function(e){var t=e.data,n=e.variant;if(0===t.results.length)return(0,P.jsx)(eg.Text,{multiline:!1,children:"No results"});switch(n){case"map":return(0,P.jsx)(rI,{data:t});case"pie":return(0,P.jsx)(rR,{data:t,devices:!1});case"device-pie":return(0,P.jsx)(rR,{data:t,devices:!0});case"table":return(0,P.jsx)(rE,{data:t})}},rE=function(e){var t=e.data;return tP.Chart.register(tP.ArcElement),(0,P.jsx)(ev.View,{children:t.results.map(function(e,t){return(0,P.jsxs)(ev.View,{css:[{borderBottom:"1px solid ".concat(e0.tokens.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],py:8,row:!0,gap:16,children:[(0,P.jsx)(ev.View,{css:[t$.rcss.maxWidth("90%")],grow:!0,children:(0,P.jsx)(eg.Text,{title:e.value,multiline:!1,children:e.value})}),(0,P.jsx)(ev.View,{children:(0,P.jsx)(eg.Text,{multiline:!1,children:e.count})})]},t)})})},rR=function(e){var t=e.data,n=e.devices,r=(0,tG.useTheme)(),i=r.isDarkColorScheme,a=r.values,o=i?t$.dataViz.categorical:t$.dataViz.categorical.reverse(),s=new Map;return n?t.results.forEach(function(e){var t=e.value,n=e.count,r=t.match(/\(.*\)/);if(r&&r.length){var i=r[0].substring(1,r[0].length-1),a=s.get(i)||0;s.set(i,a+n)}else{var o=s.get("Unknown")||0;s.set("Unknown",o+n)}}):t.results.forEach(function(e){var t=e.value,n=e.count,r=t.replace(/ \(.*\)/,""),i=s.get(r)||0;s.set(r,i+n)}),(0,P.jsx)(ev.View,{css:tH,children:(0,P.jsx)(tA.Pie,{options:{radius:"90%",maintainAspectRatio:!1,plugins:{tooltip:tz()}},data:{labels:(0,e_._)(s.keys()),datasets:[{borderWidth:+((0,e_._)(s.keys()).length>1),borderColor:a.global.outlineDimmest,data:(0,e_._)(s.values()),backgroundColor:Array(s.size).fill(0).map(function(e,t){return o[t%o.length]})}]}})})},rI=function(t){var n=t.data,r=(0,ry.default)(function(){return e.A(590590)},{loadableGenerated:{modules:[568727]},ssr:!1}),i=n.results.map(function(e){return{country:e.value,numHits:e.count}});return(0,P.jsx)(r,{countries:i})};let rA=function(e){var t,n,r,i,a=e.replId,o=e.start,s=e.hours,l=e.metric,u=e.count,c=e.variant,d=void 0===c?"table":c,f=e.expandable,p=(0,tI.getTopListMetricLabel)(l),h=(0,z._)((0,L.useState)(void 0),2),m=h[0],g=h[1],x=(0,z._)((0,L.useState)(!1),2),y=x[0],b=x[1],w=(t={variables:{id:a,input:{metric:l,start:o,hours:s,deployment:!0,count:y?3*u:u}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsTopList.__typename){case"UserError":case"NotFoundError":g(Error(e.getRepl.analyticsTopList.message))}}},n=(0,$._)({},r_,t),tN.useQuery(rS,n)),_=w.data,k=w.loading,S=w.error;return S&&g(S),(0,P.jsxs)(ev.View,{gap:8,children:[(0,P.jsxs)(ev.View,{row:!0,gap:8,children:[(0,P.jsx)(eg.Text,{variant:"subheadDefault",multiline:!1,children:"device-pie"===d?"Top Devices":"Top ".concat(p)}),void 0!==f&&f?(0,P.jsx)(tg.IconButton,{alt:y?"Collapse list":"Expand list",onClick:function(){return b(!y)},children:y?(0,P.jsx)(rC.default,{}):(0,P.jsx)(rj.default,{})}):null]}),(0,P.jsxs)(ev.View,{children:[k?(0,P.jsx)(ev.View,{css:[t$.rcss.height(80),t$.rcss.borderRadius(),tW.loadingStyle.backgroundPulse()]}):null,m?(0,P.jsx)(tq.StatusBanner,{text:m.message,colorway:"negative"}):null,(null==_||null==(r=_.getRepl)?void 0:r.__typename)==="Repl"&&(null==(i=_.getRepl.analyticsTopList)?void 0:i.__typename)==="ReplAnalyticsTopList"?(0,P.jsx)(rT,{variant:d,data:_.getRepl.analyticsTopList}):null]})]})};var rP=e.i(107129),rD=e.i(241703),rO=e.i(32995),rN=e.i(952521),rM=e.i(446530),rL=e.i(119274),rB=[{label:"six hours",key:6},{label:"one day",key:24},{label:"five days",key:120},{label:"one week",key:168},{label:"two weeks",key:336},{label:"thirty days",key:720}],rV={label:"one week",key:168},rF=t$.container.min(600),rU=(0,rM.cssRecord)({fullWidth:(0,ey._)({},rF,{gridColumn:"span 2"})}),rG=(0,rM.cssRecord)({container:[t$.rcss.display.grid,t$.rcss.gap(32),t$.rcss.pb(32),(0,ey._)({},rF,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"})],fullWidth:rU.fullWidth,map:[rU.fullWidth],pies:[rU.fullWidth,t$.rcss.flex.column,(0,ey._)({gap:32},t$.container.min(480),[t$.rcss.flex.row,{" > *":{flex:1}}])]}),r$=function(e){var t=e.replId,n=(0,z._)((0,L.useState)(rV),2),r=n[0],i=r.key,a=r.label,o=n[1],s=(0,z._)((0,L.useState)(tR(tj(new Date),i-1)),2),l=s[0],u=s[1],c=(0,rN.useDismissibleElement)("deployment-analytics-dot"),d=c.isDone,f=c.setAsDone,p=tR(tj(new Date),23),h=(0,tG.useTheme)().values,m=[h.global.redStronger,h.global.redDimmer,h.global.redStrongest,h.global.redDimmest],g=[h.global.orangeDefault,h.global.orangeDimmer,h.global.orangeStronger,h.global.orangeDimmest],x=[h.global.blueDefault,h.global.blueDimmer,h.global.blueStronger,h.global.blueDimmest],y=[h.global.greenDefault,h.global.greenDimmer,h.global.greenStronger,h.global.greenDimmest];return(0,L.useEffect)(function(){(0,rP.trackDeploymentSectionViewed)({context:rD.Views.Analytics})},[]),(0,L.useEffect)(function(){d||f()},[d,f]),(0,P.jsx)(rO.PaneSection,{children:(0,P.jsxs)(ev.View,{css:rG.container,children:[(0,P.jsx)(ev.View,{css:rG.fullWidth,children:(0,P.jsx)(rL.PopupMenu,{items:rB,label:"Past ".concat(a),onAction:function(e){var t,n="string"==typeof e?parseInt(e,10):e;o(null!=(t=rB.find(function(e){return e.key===n}))?t:rV),u(tR(tj(new Date),n-1))},children:function(e){return(0,P.jsx)(rL.MenuItem,{label:e.label,id:e.key},e.key)}})}),(0,P.jsx)(ev.View,{css:rG.fullWidth,children:(0,P.jsx)(t7,{replId:t,start:l,hours:i})}),(0,P.jsx)(rA,{replId:t,metric:tI.TopListMetrics.Url,start:l,hours:i,count:4,expandable:!0}),(0,P.jsx)(rA,{replId:t,metric:tI.TopListMetrics.Referrer,start:l,hours:i,count:4,expandable:!0}),(0,P.jsx)(rx,{replId:t,title:"HTTP Statuses (24h)",metric:tI.TimeSeriesMetrics.Statuses,start:p,hours:24,colorFn:function(e,t){var n=Number(e);return n<300?y[t%y.length]:n<400?x[t%x.length]:n<500?g[t%g.length]:m[t%m.length]}}),(0,P.jsx)(tY,{replId:t,start:l,hours:i}),(0,P.jsxs)(ev.View,{css:rG.pies,children:[(0,P.jsx)(rA,{replId:t,metric:tI.TopListMetrics.Browser,start:l,hours:i,count:100,variant:"pie"}),(0,P.jsx)(rA,{replId:t,metric:tI.TopListMetrics.Browser,start:l,hours:i,count:100,variant:"device-pie"})]}),(0,P.jsx)(ev.View,{css:rG.map,children:(0,P.jsx)(rA,{replId:t,metric:tI.TopListMetrics.Country,start:l,hours:i,count:100,variant:"map"})})]})})};e.s(["Analytics",()=>r$],379790);var rH=e.i(664219),rz=e.i(165349);function rW(){var e=(0,tD._)(["\n  query HostingDeploymentConfigRedeploy($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        ignoredSecrets\n        activityLogs(count: 20) {\n          items {\n            id\n            ...HostingActivityLogLine2\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n        currentBuild {\n          id\n          envVars {\n            name\n            value\n          }\n          suspendedReason\n          machineConfiguration {\n            id\n            label\n            vcpu\n            memory\n            slug\n          }\n          maxMachineInstances\n          provider\n        }\n        ...DeploymentsDeployOptionsDeployment\n        repl {\n          id\n          authorizations {\n            editDeploymentSecrets {\n              isAuthorized\n              message\n            }\n            editSecrets {\n              isAuthorized\n              message\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return rW=function(){return e},e}var rq={},rK=(0,tO.gql)(rW(),rz.HostingActivityLogLine2FragmentDoc,rH.DeploymentsDeployOptionsDeploymentFragmentDoc);function rY(e){var t=(0,$._)({},rq,e);return tN.useQuery(rK,t)}e.s(["useHostingDeploymentConfigRedeployQuery",()=>rY],814167);var rQ=e.i(256758),rX=e.i(709485),rZ=e.i(187505),rJ=e.i(140487),r0=e.i(259421),r1=(0,rM.cssRecord)({buttonLeft:[t$.rcss.borderRadius(8,0,0,8),t$.rcss.flex.growAndShrink(1)],buttonRight:[t$.rcss.borderRadius(0,8,8,0)]});function r2(e){var t=e.shouldShow,n=e.onDismissTour,r=(0,rZ.useTrackClick)().trackClick,i=(0,z._)((0,L.useState)(!1),2),a=i[0],o=i[1];return(0,P.jsxs)(P.Fragment,{children:[t?(0,P.jsxs)(ev.View,{pb:12,row:!0,gap:2,justify:"center",children:[(0,P.jsx)(rJ.Button,{iconLeft:(0,P.jsx)(rQ.default,{}),onClick:function(){r({productArea:"publishing",target:"deploy_with_app_button"}),(0,et.track)(rX.events.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),o(!0)},text:"Deploy with the Replit App!",css:r1.buttonLeft}),(0,P.jsx)(rJ.Button,{css:r1.buttonRight,text:"",iconLeft:(0,P.jsx)(eb.default,{}),onClick:n})]}):null,(0,P.jsx)(tr.Modal,{isOpen:a,onRequestClose:function(){o(!1),n()},children:(0,P.jsx)(r0.default,{source:"deployment_build_success"})})]})}e.s(["default",()=>r2],754898);var r3=e.i(951262);function r5(){var e=(0,tD._)(["\n  query StripeConnectionClaimSandbox($replId: String!) {\n    stripeClaimableSandbox(replId: $replId) {\n      id\n      claimUrl\n      claimedAt\n    }\n  }\n"]);return r5=function(){return e},e}function r4(){var e=(0,tD._)(["\n  mutation StripeConnectionDeleteStripeConnection(\n    $input: DeleteConnectionInput!\n  ) {\n    deleteConnection(input: $input) {\n      ... on DeleteConnection {\n        success\n      }\n    }\n  }\n"]);return r4=function(){return e},e}function r8(){var e=(0,tD._)(["\n  mutation StripeConnectionCreateStripeConnection(\n    $input: CreateConnectionInput!\n  ) {\n    createConnection(input: $input) {\n      ... on CreateConnection {\n        connectionId\n      }\n    }\n  }\n"]);return r8=function(){return e},e}var r6={},r7=(0,tO.gql)(r5()),r9=(0,tO.gql)(r4()),ie=(0,tO.gql)(r8()),it=e.i(486898),ir=e.i(252204),ii=e.i(254498),ia=e.i(269848),io=e.i(89078),is=e.i(344489),il=e.i(479373),iu=e.i(58261),ic=e.i(207237),id=e.i(810206),ip=e.i(91720),ih=e.i(607278),im=e.i(624782),ig=e.i(112767),iv=e.i(322945),ix=function(e){var t=e.syncSandboxWithLive,n=e.setSyncSandboxWithLive,r=e.hideRecommendedPill;return(0,P.jsx)(id.Section,{id:"syncSandboxWithLive",title:(0,P.jsxs)(ev.View,{gap:4,children:[(0,P.jsxs)(ev.View,{row:!0,gap:8,align:"center",children:[(0,P.jsx)(eg.Text,{children:"Sync Stripe live account with Stripe sandbox"}),void 0!==r&&r?null:(0,P.jsx)(im.Pill,{text:"Recommended",colorway:"positive",variant:"muted",compact:!0})]}),(0,P.jsx)(eg.Text,{variant:"small",color:"dimmer",children:"Automatically sync your sandbox products and prices to your live account."})]}),children:(0,P.jsx)(ig.Switch,{isSelected:t,onChange:n,"aria-label":"Sync sandbox with live account"})})};function iy(e){var t,n,r,i,a,o,s,l,u=e.syncSandboxWithLive,c=e.setSyncSandboxWithLive,d=(0,il.useStripeConnection)(),f=d.hasStripeConnection,p=d.stripeConnection,h=d.loading,m=(0,iu.useConnectorContext)(),g=m.connectorConfigs,x=m.refetch,y=(0,ic.default)(),b=(0,rZ.useTrackClick)().trackClick,w=(0,z._)((0,L.useState)("INPUT"),2),_=w[0],k=w[1],S=(0,z._)((0,L.useState)(""),2),C=S[0],j=S[1],T=(0,z._)((0,L.useState)(""),2),E=T[0],R=T[1],I=(0,z._)((0,L.useState)(null),2),A=I[0],D=I[1],O=(0,z._)((0,L.useState)(!1),2),N=O[0],M=O[1],B=(0,z._)((0,L.useState)(!1),2),V=B[0],F=B[1],U=(0,z._)((0,L.useState)(!1),2),H=U[0],q=U[1],K=(0,z._)((0,L.useState)(null),2),Y=K[0],Q=K[1],X=(0,z._)((0,L.useState)(null),2),Z=X[0],J=X[1],ee=(t={variables:{replId:y},skip:f},n=(0,$._)({},r6,t),tN.useQuery(r7,n)),en=ee.data,er=ee.loading,ei=ee.error,ea=ee.startPolling,eo=ee.stopPolling,es=null==en||null==(s=en.stripeClaimableSandbox)?void 0:s.claimUrl,el=!!(null==en||null==(l=en.stripeClaimableSandbox)?void 0:l.claimedAt);(0,L.useEffect)(function(){if(V){ea(1e3);var e=setTimeout(function(){eo(),F(!1)},3e4);return function(){clearTimeout(e),eo()}}},[V,ea,eo]),(0,L.useEffect)(function(){V&&el&&(eo(),F(!1),(0,et.track)(rX.events.STRIPE_SANDBOX_CLAIMED,{source:"publish_pane",replId:y}))},[V,el,eo,y]);var eu=(0,z._)((r={onCompleted:function(e){return(0,G._)(function(){var t;return(0,W._)(this,function(n){switch(n.label){case 0:if((null==e||null==(t=e.createConnection)?void 0:t.__typename)!=="CreateConnection")return[3,2];return[4,x()];case 1:return n.sent(),k("CONNECTED"),[3,3];case 2:D("Failed to create connection"),k("INPUT"),n.label=3;case 3:return[2]}})})()},onError:function(e){D(e.message||"Failed to connect to Stripe"),k("INPUT")}},i=(0,$._)({},r6,r),r3.useMutation(ie,i)),1)[0],ec=(0,z._)((a={onCompleted:function(e){return(0,G._)(function(){var t;return(0,W._)(this,function(n){switch(n.label){case 0:if((null==e||null==(t=e.deleteConnection)?void 0:t.__typename)!=="DeleteConnection")return[3,2];return[4,x()];case 1:return n.sent(),k("INPUT"),j(""),R(""),Q(null),J(null),[3,3];case 2:D("Failed to disconnect from Stripe"),k("INPUT"),n.label=3;case 3:return[2]}})})()},onError:function(e){D(e.message||"Failed to disconnect from Stripe"),k("INPUT")}},o=(0,$._)({},r6,a),r3.useMutation(r9,o)),1)[0],ed=g.find(function(e){return"STRIPE"===e.connectorName}),ef=C.trim().length>0&&E.trim().length>0&&el&&!Y&&!Z,ep=(0,L.useCallback)(function(){ed&&ef&&(k("CONNECTING"),D(null),eu({variables:{input:{connectorConfigId:ed.id,settings:{publishable:C.trim(),secret:E.trim(),environment:"production"},replId:y}}}))},[eu,ed,C,E,y,ef]),eh=(0,L.useCallback)(function(){(null==p?void 0:p.connectionId)&&(k("DISCONNECTING"),D(null),ec({variables:{input:{connectionId:p.connectionId}}}))},[ec,p]),em=A||(ei?ei.message||"Failed to load Stripe sandbox information. Please try again later.":null);if(h)return(0,P.jsxs)(ev.View,{gap:8,align:"center",p:16,children:[(0,P.jsx)(ia.default,{}),(0,P.jsx)(eg.Text,{color:"dimmer",children:"Loading Stripe connection..."})]});if(f)return(0,P.jsxs)(ev.View,{className:iv.default.container,children:[(0,P.jsxs)(ev.View,{row:!0,justify:"space-between",align:"center",p:8,className:iv.default.clickable,onClick:function(){return M(!N)},children:[(0,P.jsxs)(ev.View,{row:!0,gap:8,align:"center",style:{flex:1,minWidth:0},children:[(0,P.jsx)(ii.default,{size:24}),(0,P.jsx)(eg.Text,{children:"Live Stripe account status"})]}),(0,P.jsxs)(ev.View,{row:!0,gap:8,align:"center",children:[(0,P.jsxs)(ev.View,{row:!0,gap:4,align:"center",children:[(0,P.jsx)(it.default,{size:8,color:e0.tokens.greenStronger}),(0,P.jsx)(eg.Text,{color:"dimmer",variant:"small",children:"Connected"})]}),(0,P.jsx)(tg.IconButton,{alt:N?"Show connection details":"Hide connection details",onClick:function(){return M(!N)},children:N?(0,P.jsx)(rj.default,{color:e0.tokens.foregroundDimmer}):(0,P.jsx)(rC.default,{color:e0.tokens.foregroundDimmer})})]})]}),(0,P.jsxs)(ev.View,{p:8,gap:12,className:N?iv.default.hiddenContent:iv.default.contentBorder,children:[(0,P.jsxs)(ev.View,{gap:4,children:[(0,P.jsx)(eg.Text,{variant:"small",children:"Live publishable key"}),(0,P.jsx)(ih.Input,{value:"pk_live_123_123",disabled:!0,type:"password"})]}),(0,P.jsxs)(ev.View,{gap:4,children:[(0,P.jsx)(eg.Text,{variant:"small",children:"Live secret key"}),(0,P.jsx)(ih.Input,{value:"sk_live_123_123",disabled:!0,type:"password"})]}),(0,P.jsx)(ix,{syncSandboxWithLive:u,setSyncSandboxWithLive:c}),(0,P.jsx)(rJ.Button,{text:"DISCONNECTING"===_?"Disconnecting...":"Disconnect",onClick:eh,disabled:"DISCONNECTING"===_,loading:"DISCONNECTING"===_,colorway:"negative",stretch:!0})]})]});if(!ed)return null;var ex=(0,P.jsxs)(P.Fragment,{children:[em?(0,P.jsx)(io.default,{children:em}):null,(0,P.jsx)(is.ClaimSandboxStep,{isCompleted:el,claimUrl:es,claimLoading:er,isPolling:V,onClaimClick:function(){b({productArea:"integrations",target:"stripe_sandbox_claim_button"}),F(!0)}}),(0,P.jsx)(is.FindLiveKeysStep,{isCompleted:H,sandboxClaimed:el,onAcknowledge:function(){return q(!0)}}),(0,P.jsx)(is.EnterLiveKeysStep,{sandboxClaimed:el,liveKeysAcknowledged:H,publishableKey:C,onPublishableKeyChange:function(e){j(e),Q((0,is.renderStripeKeyError)(e,"publishable"))},isConnecting:"CONNECTING"===_,publishableKeyError:Y,secretKey:E,onSecretKeyChange:function(e){R(e),J((0,is.renderStripeKeyError)(e,"secret"))},secretKeyError:Z,onConnect:ep,canConnect:ef,buttonText:"Save",buttonLoadingText:"Connecting...",extraContent:(0,P.jsx)(ix,{syncSandboxWithLive:u,setSyncSandboxWithLive:c})})]});return(0,P.jsx)(ev.View,{gap:8,children:(0,P.jsxs)(ev.View,{className:iv.default.container,children:[(0,P.jsxs)(ev.View,{row:!0,justify:"space-between",align:"center",p:8,className:iv.default.clickable,onClick:function(){return M(!N)},children:[(0,P.jsxs)(ev.View,{row:!0,gap:8,align:"center",style:{flex:1,minWidth:0},children:[(0,P.jsx)(ii.default,{size:24}),(0,P.jsx)(eg.Text,{children:"Connect your live Stripe account"})]}),(0,P.jsxs)(ev.View,{row:!0,gap:8,align:"center",children:[(0,P.jsx)(ip.ButtonLink,{size:"small",text:"Read Docs",href:"https://docs.replit.com/replitai/stripe-payments",target:"_blank",onClick:function(e){e.stopPropagation(),b({productArea:"integrations",target:"stripe_learn_more_button"})},iconRight:(0,P.jsx)(ir.default,{})}),(0,P.jsx)(tg.IconButton,{alt:N?"Show connection form":"Hide connection form",onClick:function(){return M(!N)},children:N?(0,P.jsx)(rj.default,{color:e0.tokens.foregroundDimmer}):(0,P.jsx)(rC.default,{color:e0.tokens.foregroundDimmer})})]})]}),(0,P.jsx)(ev.View,{p:8,gap:12,className:N?iv.default.hiddenContent:iv.default.contentBorder,children:ex})]})})}e.s(["SyncToggleSection",()=>ix,"default",()=>iy],988105);var ib=e.i(204977),iw=e.i(712771),i_=e.i(979530),ik=e.i(399344),iS=(0,B.atom)("BOT_TOKEN"),iC="TELEGRAM_BOT_TOKEN",ij=e.i(886513),iT=e.i(183035),iE=e.i(638311),iR=((t={}).INACTIVE="INACTIVE",t.ACTIVE="ACTIVE",t.COMPLETE="COMPLETE",t);function iI(e){var t=e.state,n=e.number,r=e.title,i=e.children,a=e.numberStyleVariant,o=void 0===a?"no-fill":a,s=e.showChildren,l=(0,ij._)(e,["state","number","title","children","numberStyleVariant","showChildren"]);return(0,P.jsx)(e8.ShadesSurface,(0,H._)((0,$._)({elevate:"ACTIVE"===t&&"1x",className:iE.default.stepContainer},l),{children:(0,P.jsxs)(ev.View,{row:!0,gap:8,align:"start",children:["hidden_no_space"===o?null:"COMPLETE"===t?(0,P.jsx)(ev.View,{align:"center",justify:"center",className:iE.default.stepNumber,children:(0,P.jsx)(iT.default,{})}):(0,P.jsx)(e8.ShadesSurface,{elevate:"ACTIVE"===t&&"elevated"===o&&"2x",align:"center",justify:"center",className:iE.default.stepNumber,style:{visibility:"hidden_keep_space"===o?"hidden":"unset"},children:(0,P.jsx)(eg.Text,{variant:"small",color:"ACTIVE"===t?"dimmer":"dimmest",children:n})}),(0,P.jsxs)(ev.View,{align:"start",shrink:1,gap:4,children:[(0,P.jsx)(eg.Text,{className:iE.default.title,color:"ACTIVE"===t?"default":"dimmest",children:r}),s||void 0===s&&"ACTIVE"===t?i:null]})]})}))}let iA=function(e){return(0,P.jsx)("svg",(0,H._)((0,$._)({width:20,height:18,viewBox:"0 0 14 18",fill:e.color},e),{children:(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 2h2a2 2 0 012 2v2c0 .364-.097.706-.268 1H4.268A1.99 1.99 0 014 6V4a2 2 0 012-2zM2.126 7A4.007 4.007 0 012 6V4a4 4 0 014-4h2a4 4 0 014 4v2c0 .345-.044.68-.126 1H12a2 2 0 012 2v7a2 2 0 01-2 2H2a2 2 0 01-2-2V9a2 2 0 012-2h.126z"})}))};var iP=e.i(245329),iD=e.i(852819),iO=e.i(209065);function iN(){var e=(0,ik.useSecretsService)().watch,t=(0,z._)((0,L.useState)(new Map),2),n=t[0],r=t[1];return(0,L.useEffect)(function(){return e(r)},[e]),null==n?void 0:n.get(iC)}function iM(e){var t=e.deployDisabled,n=(0,ik.useSecretsService)(),r=iN();return(0,P.jsx)(iL,{deployDisabled:null!=t&&t,addEntries:n.addEntries,removeEntries:n.removeEntries,existingBotToken:r})}function iL(e){var t=e.deployDisabled,n=e.addEntries,r=e.removeEntries,i=e.existingBotToken,a=(0,iD.useValue)(iS),o=(0,iD.useSet)(iS),s=(0,z._)((0,L.useState)(""),2),l=s[0],u=s[1],c=(0,z._)((0,L.useState)(!0),2),d=c[0],f=c[1],p=!!(0,ik.useDeploymentCurrentBuild)();(0,L.useEffect)(function(){u(function(e){return e||(null!=i?i:"")})},[i]);var h=l.length>0,m=t||"PUBLISH"!==a,g="BOT_TOKEN"===a?iR.ACTIVE:iR.COMPLETE,x=p?"PUBLISH"===a?"Press publish to apply your changes":null:m?"Set up Telegram to enable publishing":"Press publish to share your Telegram agent with the world";return(0,P.jsxs)(P.Fragment,{children:[p?(0,P.jsx)(eg.Text,{variant:"subheadDefault",children:"Telegram connection setup"}):null,(0,P.jsxs)(ev.View,{clsx:[iO.default.stepsContainer,(0,ey._)({},iO.default.inactiveContainer,"PUBLISH"===a)],children:[(0,P.jsx)(iI,{number:1,title:'In Telegram, search for BotFather and click "open"',state:g}),(0,P.jsx)(iI,{number:2,title:'Click "Create a new bot"',state:g}),(0,P.jsx)(iI,{number:3,title:"Follow the prompts to fill out a name, description, and username",state:g}),(0,P.jsx)(iI,{number:4,title:"PUBLISH"===a?"You provided your Telegram bot token":"BotFather will provide you a token. Copy and paste it below",state:g,showChildren:"PUBLISH"===a||void 0,children:"BOT_TOKEN"===a?(0,P.jsxs)(ev.View,{gap:8,py:16,children:[(0,P.jsxs)(ev.View,{row:!0,gap:8,align:"center",children:[(0,P.jsx)(iP.SecretItem,{keyName:"TELEGRAM_BOT_TOKEN",value:l,onChange:function(e){u(e)},readOnly:!1,accountSecrets:[],isSensitive:d,selectedKey:null,onSelectedKeyChange:function(){}}),(0,P.jsx)(tg.IconButton,{alt:d?"Reveal value":"Hide value",onClick:function(){return f(!d)},children:d?(0,P.jsx)(iw.default,{}):(0,P.jsx)(i_.default,{})})]}),(0,P.jsx)(rJ.Button,{text:"Continue",colorway:"primary",disabled:!h,onClick:function(){n([{key:iC,value:l}]),o("PUBLISH")}})]}):(0,P.jsx)(tg.IconButton,{className:iO.default.editBotTokenButton,onClick:function(){o("BOT_TOKEN"),r(iC)},alt:"Edit bot token",children:(0,P.jsxs)(ev.View,{row:!0,align:"center",gap:8,children:[(0,P.jsx)(im.Pill,{variant:"muted",text:"TELEGRAM_BOT_TOKEN",iconLeft:(0,P.jsx)(iA,{width:10,height:10,color:e0.tokens.foregroundDimmest})}),(0,P.jsx)(ib.default,{className:iO.default.hidden,color:e0.tokens.foregroundDimmest})]})})})]}),x?(0,P.jsx)(eg.Text,{color:"PUBLISH"===a?"default":"dimmest",children:x}):null]})}e.s(["TelegramConnectionSection",()=>iM,"useTelegramBotTokenSecret",()=>iN],197486);var iB=e.i(629536),iV=e.i(418725),iF=e.i(443394);function iU(e){var t=e.isEnabled;return e.showUpsell?(0,P.jsx)(iG,{}):(0,P.jsx)(i$,{isEnabled:t})}function iG(){var e=(0,iF.getCurrentUrl)({deploymentPane:"true"});return(0,P.jsxs)(ev.View,{row:!0,justify:"space-between",align:"center",gap:16,children:[(0,P.jsxs)(ev.View,{gap:4,shrink:!0,children:[(0,P.jsx)(eg.Text,{children:"Enable feedback widget"}),(0,P.jsxs)(eg.Text,{variant:"small",color:"dimmer",children:["Add a feedback widget to the corner of your published app. Review submissions in your inbox and send to ",iB.AGENT_NAME," for fixes."]})]}),(0,P.jsx)(iV.default,{context:"agent_inbox_upsell",text:"Upgrade",size:"small",variant:"default",redirectPath:e})]})}function i$(e){var t=e.isEnabled,n=(0,ik.useAgentInboxState)(),r=n.enabled,i=n.setAgentInboxEnabled;return(0,P.jsxs)(ev.View,{row:!0,justify:"space-between",align:"start",gap:16,children:[(0,P.jsxs)(ev.View,{gap:4,shrink:!0,children:[(0,P.jsx)(eg.Text,{children:"Enable feedback widget"}),(0,P.jsxs)(eg.Text,{style:{maxWidth:"90%"},variant:"small",color:"dimmer",children:["Add a feedback widget to the corner of your published app. Review submissions in your inbox and send to ",iB.AGENT_NAME," for fixes."]})]}),(0,P.jsx)(ig.Switch,{"aria-label":"Allow user feedback",isSelected:r,onChange:i,isDisabled:!t})]})}e.s(["default",()=>iU],552780);var iH=e.i(138716),iz=e.i(957789),iW=e.i(522029),iq=e.i(936239),iK=e.i(589910),iY=e.i(990929);function iQ(e){var t=e.isAzureDeployment,n=e.isFreeUser,r=e.onError,i=e.onConfirm,a=e.onCancel,o=(0,V.useAtomValue)(iz.cpuValueAtom),s=(0,V.useAtomValue)(iz.ramValueAtom),l=(0,V.useAtomValue)(iW.maxInstancesValueAtom),u=(0,V.useSetAtom)(iz.cpuIndexAtom),c=(0,V.useSetAtom)(iz.ramIndexAtom),d=(0,V.useSetAtom)(iW.maxInstancesIndexAtom),f=(0,z._)((0,L.useState)(iz.CPUValues.indexOf(o)>=0?iz.CPUValues.indexOf(o):0),1)[0],p=(0,z._)((0,L.useState)(iz.RAMValues.indexOf(s)>=0?iz.RAMValues.indexOf(s):0),1)[0],h=(0,z._)((0,L.useState)(iW.maxInstancesValues.indexOf(l)>=0?iW.maxInstancesValues.indexOf(l):0),1)[0],m=(0,iK.useAutoscaleConfigurations)({isAzureDeployment:t,isFreeUser:n,onError:r}),g=m.selectedMachineConfiguration,x=m.machineConfigurations,y=m.loading,b=(0,L.useCallback)(function(){y||!x?r("Cannot confirm while configurations are loading"):g?i(g):r("An error occurred trying to validate selected machine configuration")},[y,i,x,g,r]);return(0,P.jsx)(rO.PaneSection,{className:iY.default.container,children:(0,P.jsxs)(ev.View,{gap:16,children:[(0,P.jsx)(iq.AutoscaleConfigurationBuilder,{machineConfiguration:null,maxMachineInstances:null,disabled:y,toggleEditable:!1,onError:r}),(0,P.jsxs)(ev.View,{row:!0,justify:"space-between",pt:8,children:[(0,P.jsx)(rJ.Button,{variant:"outlined",text:"Cancel",iconLeft:(0,P.jsx)(iH.default,{}),onClick:function(){u(f),c(p),d(h),a()}}),(0,P.jsx)(rJ.Button,{colorway:"primary",text:"Confirm",iconLeft:(0,P.jsx)(iT.default,{}),onClick:b,loading:y})]})]})})}e.s(["AutoscaleConfigEditor",()=>iQ],878284);var iX=e.i(137737);function iZ(e){var t=e.value,n=e.onChange,r=e.loading,i=e.disabled,a=e.error;return(0,P.jsxs)(ev.View,{gap:8,children:[(0,P.jsxs)(ev.View,{gap:4,children:[(0,P.jsxs)(ev.View,{row:!0,gap:8,align:"center",children:[(0,P.jsx)(eg.Text,{children:"Build command"}),(0,P.jsx)(eg.Text,{variant:"small",color:"dimmest",children:"Optional"})]}),(0,P.jsx)(eg.Text,{color:"dimmer",variant:"small",multiline:!0,children:"Compiles your app before it deploys"})]}),(0,P.jsx)(iX.CommandInput,{id:"buildCommand",value:t,onChange:n,loading:void 0!==r&&r,disabled:void 0!==i&&i,error:a})]})}e.s(["BuildCommandSection",()=>iZ],942859);var iJ=e.i(368964),i0=e.i(429662),i1=e.i(490262),i2=e.i(917736),i3=e.i(155119),i5=e.i(85742),i4=e.i(12034);function i8(e){var t=e.provider,n=e.setProvider,r=e.recommendedProvider,i=e.excludedProviders,a=(0,ik.useAvailableDeploymentProviders)().deploymentProviders,o=(0,ik.useFreeTierCloudServices)(),s=[iJ.HostingBuildProvider.CloudRun,iJ.HostingBuildProvider.Static],l=a.filter(function(e){return!(o&&!s.includes(e)||(null==i?void 0:i.includes(e)))}).map(function(e){switch(e){case iJ.HostingBuildProvider.Gce:return{id:iJ.HostingBuildProvider.Gce,title:"Reserved VM",subtitle:"Always On Servers",description:"Ensures high uptime, minimizing disruptions for apps requiring persistent session data.",icon:(0,P.jsx)(i2.default,{size:16})};case iJ.HostingBuildProvider.AzureVm:return{id:iJ.HostingBuildProvider.AzureVm,title:"Reserved VM",subtitle:"Always On Servers (Azure)",description:"Ensures high uptime, minimizing disruptions for apps requiring persistent session data.",icon:(0,P.jsx)(i2.default,{size:16})};case iJ.HostingBuildProvider.CloudRun:return{id:iJ.HostingBuildProvider.CloudRun,title:"Autoscale",subtitle:"Meet demand exactly",description:"Automatically scales from zero to any level of demand.",icon:(0,P.jsx)(i1.default,{size:16})};case iJ.HostingBuildProvider.AzureContainerApp:return{id:iJ.HostingBuildProvider.AzureContainerApp,title:"Autoscale",subtitle:"Meet demand exactly (Azure)",description:"Automatically scales from zero to any level of demand.",icon:(0,P.jsx)(i1.default,{size:16})};case iJ.HostingBuildProvider.Static:return{id:iJ.HostingBuildProvider.Static,title:"Static pages",subtitle:"Simple HTML websites",description:"Basic websites with no backend server.",icon:(0,P.jsx)(i3.default,{size:16})};case iJ.HostingBuildProvider.Cron:return{id:iJ.HostingBuildProvider.Cron,title:"Scheduled",subtitle:"Time-based job scheduler",description:"The easiest way to schedule for your apps to run.",icon:(0,P.jsx)(i0.default,{size:16})};default:return null}}).filter(Boolean),u=l.find(function(e){return e.id===t})||l[0];return(0,P.jsxs)(ev.View,{gap:8,children:[(0,P.jsx)(eg.Text,{children:"Deployment type"}),(0,P.jsx)(ev.View,{style:{maxWidth:"100%"},children:(0,P.jsxs)(eg.Text,{color:"dimmer",variant:"small",multiline:!0,children:["Technology used to publish your app."," ",(0,P.jsx)("a",{target:"_blank",href:"https://docs.replit.com/category/replit-deployments",children:"Learn more"})," "]})}),(0,P.jsx)(i4.Select,{"aria-label":"Deployment type selection",items:l,selectedKey:t,onSelectionChange:function(e){n(e)},children:function(e){var t=r===e.id;return(0,P.jsx)(i5.BaseListBoxItem,{id:e.id,textValue:e.title,children:(0,P.jsx)(ev.View,{gap:8,row:!0,align:"center",justify:"space-between",width:"100%",children:(0,P.jsxs)(ev.View,{row:!0,align:"center",gap:8,children:[e.icon,(0,P.jsx)(eg.Text,{children:e.title}),t?(0,P.jsx)(im.Pill,{colorway:"primary",text:"Recommended"}):null]})})})}}),(0,P.jsx)(ev.View,{style:{maxWidth:"100%"},children:(0,P.jsx)(eg.Text,{color:"dimmer",variant:"small",multiline:!0,children:u.description})})]})}e.s(["default",()=>i8],487517);var i6=e.i(416298),i7=e.i(546284);e.i(32967);var i9=e.i(837605),ae=e.i(965153),at=e.i(93699);function an(e){var t=e.secrets,n=e.otherSecrets,r=new Map,i=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=(0,z._)(s.value,2),c=u[0],d=u[1];t.has(c)||r.set(c,d)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return{missing:r}}function ar(e){var t=e.secrets,n=e.otherSecrets,r=e.otherEnvName,i=e.onAddSecret,a=e.initialExpanded,o=an({secrets:t,otherSecrets:n}).missing,s=(0,z._)((0,L.useState)(a),2),l=s[0],u=s[1],c=0===o.size;if((0,L.useEffect)(function(){c&&u(!1)},[c]),c)return null;var d="".concat(o.size," ").concat((0,i7.default)("secret",o.size)," out of sync"),f=1===o.size?"A ".concat(r," secret is missing from this environment"):"".concat(o.size," ").concat(r," secrets are missing from this environment");return(0,P.jsx)(ev.View,{clsx:at.default.root,br:4,children:(0,P.jsx)(ae.AccordionItem,{expanded:l,onClick:function(){return u(function(e){return!e})},headerContent:(0,P.jsxs)(ev.View,{row:!0,gap:8,align:"center",children:[(0,P.jsx)(i6.default,{color:e0.tokens.orangeDefault}),(0,P.jsx)(eg.Text,{multiline:!1,children:d})]}),chevron:"end",toggleOn:"header",children:(0,P.jsxs)(ev.View,{px:8,py:8,gap:8,children:[(0,P.jsx)(eg.Text,{clsx:at.default.subtitle,color:"dimmer",children:f}),(0,P.jsx)(ev.View,{gap:8,children:(0,e_._)(o.entries()).map(function(e){var t=(0,z._)(e,2),n=t[0],r=t[1];return(0,P.jsxs)(ev.View,{row:!0,gap:8,children:[(0,P.jsxs)(ev.View,{grow:!0,shrink:!0,row:!0,gap:8,children:[(0,P.jsx)(i9.SecretKey,{value:n}),(0,P.jsx)(i9.SecretValue,{value:r})]}),r?(0,P.jsx)(rJ.Button,{iconLeft:(0,P.jsx)(ew.default,{}),variant:"outlined",text:"Add secret",onClick:function(){return i({key:n,value:r})}}):null]},n)})})]})})})}e.s(["EnvSync",()=>ar,"compareSecrets",()=>an],521439);var ai=e.i(751273);function aa(e){var t=e.envVars,n=e.envVarKeys,r=e.updateEnvVarName,i=e.updateEnvVarValue,a=e.removeEnvVar,o=e.addAnEnvVar,s=e.baseDisableState,l=e.devSecrets,u=e.ignoredSecrets,c=e.editReplSecretsAuthorization,d=e.editDeploySecretAuthorization,f=e.optOut,p=e.optIn,h=e.syncToWorkspace,m=e.queryLoading,g=e.replId,x=e.initialSecretsSyncExpanded;return(0,P.jsxs)(ev.View,{gap:12,children:[t.length>0?t.map(function(e,t){var o=e.name,m=e.value;return(0,P.jsx)(iX.EnvVarInput,{index:t,name:o,value:m,updateEnvVarName:function(e){return r(t,e)},updateEnvVarValue:function(e){return i(t,e)},removeEnvVar:function(){return a(t)},disabled:s,otherKeys:n.filter(function(e,n){return n!==t}),devSecrets:l||null,ignoredSecrets:u,canEditDevSecretsDisabledMessage:(null==c?void 0:c.isAuthorized)===!1?c.message:void 0,canEditDeploySecretsDisabledMessage:(null==d?void 0:d.isAuthorized)===!1?d.message:void 0,optOutSyncing:f,optInSyncing:p,syncToWorkspace:h},t)}):null,l&&(null==c?void 0:c.isAuthorized)&&(null==d?void 0:d.isAuthorized)?(0,P.jsx)(ar,{secrets:new Map(t.map(function(e){return[e.name,e.value]})),otherSecrets:l,otherEnvName:"workspace",onAddSecret:function(e){return o({name:e.key,value:e.value})},initialExpanded:x}):null,(0,P.jsx)(ai.Tooltip,{tooltip:null==d?void 0:d.message,isDisabled:null==d?void 0:d.isAuthorized,children:(0,P.jsx)(rJ.Button,{onClick:function(){(0,rP.trackDeploymentAddSecretClicked)({replId:g}),o()},text:"Add deployment secret",iconLeft:(0,P.jsx)(ew.default,{}),disabled:m||!(null==d?void 0:d.isAuthorized)})})]})}function ao(){var e=(0,ik.useDeploymentSecurityScanState)(),t=e.enabled,n=e.userCanControl,r=e.isOrgEnforced,i=e.enforcementReason,a=e.setDeploymentSecurityScanEnabled;return(0,P.jsxs)(ev.View,{row:!0,justify:"space-between",align:"start",gap:16,children:[(0,P.jsxs)(ev.View,{gap:4,shrink:!0,children:[(0,P.jsxs)(ev.View,{row:!0,gap:8,align:"center",children:[(0,P.jsx)(eg.Text,{children:"Security scan before publishing"}),(0,P.jsx)(im.Pill,{text:"Beta",colorway:"primary",compact:!0})]}),(0,P.jsxs)(eg.Text,{style:{maxWidth:"90%"},variant:"small",color:"dimmer",children:["We always run a security scan before publishing. This setting controls whether publishing is blocked when critical vulnerabilities are found. Some high-risk issues may still block publishing."," ",(0,P.jsx)("a",{target:"_blank",href:"https://docs.replit.com/replit-workspace/workspace-features/security-scanner",children:"Learn more"})]})]}),(0,P.jsx)(ai.Tooltip,{isDisabled:!r,tooltip:r?"required"===i?"Blocking publishing when critical vulnerabilities are found is required for this organization.":"Only admins can allow publishing when critical vulnerabilities are found.":"",children:(0,P.jsx)(ig.Switch,{"aria-label":"Block publishing when critical vulnerabilities are found",isSelected:t,onChange:a,isDisabled:!n})})]})}e.s(["DeploymentSecretsSection",()=>aa],648518),e.s(["default",()=>ao],62279);var as=e.i(552144),al=(0,rM.cssRecord)({bannerButton:{span:[t$.rcss.textAlign.left]}});function au(e){var t=e.deployability,n=e.isRedeploy,r=t.deploy,i=t.redeploy,a=n?i:r;return a.isAuthorized?null:a.code===iJ.ReplAuthorizationCode.RequiresActiveTeamsSubscription?(0,P.jsx)(as.StatusBannerButton,{href:"/teams/new",target:"_blank",text:"".concat(a.message," Click here to get started by creating a new organization."),colorway:"warning",iconLeft:(0,P.jsx)(i6.default,{}),iconRight:(0,P.jsx)(ir.default,{}),css:al.bannerButton}):(0,P.jsx)(tq.StatusBanner,{text:a.message,colorway:"warning",icon:(0,P.jsx)(i6.default,{})})}e.s(["EligibilityStatusBanner",()=>au],302454);var ac=e.i(691302),ad=e.i(697859),af=e.i(823166);function ap(e){var t,n=e.provider,r=e.machineConfig,i=e.setMachineConfig,a=e.onError,o=e.onEditAutoscaleConfig,s=n===iJ.HostingBuildProvider.AzureContainerApp||n===iJ.HostingBuildProvider.AzureVm,l=(0,ik.useFreeTierCloudServices)(),u=(0,af.useReservedVmConfigurations)({provider:n,onError:a}),c=u.defaultMachineConfiguration,d=u.machineConfigurations,f=u.loading,p=(0,iK.useAutoscaleConfigurations)({isAzureDeployment:s,isFreeUser:l,onError:a}),h=p.defaultMachineConfiguration,m=p.selectedMachineConfiguration,g=p.machineConfigurations;return(0,L.useEffect)(function(){var e;switch(n){case iJ.HostingBuildProvider.Gce:case iJ.HostingBuildProvider.AzureVm:case iJ.HostingBuildProvider.AzureContainerApp:c&&(e=c);break;case iJ.HostingBuildProvider.CloudRun:e=m}e&&i(e)},[n,m,c,i]),(0,L.useEffect)(function(){if(null===r)switch(n){case iJ.HostingBuildProvider.Gce:case iJ.HostingBuildProvider.AzureVm:case iJ.HostingBuildProvider.AzureContainerApp:c&&i(c);break;case iJ.HostingBuildProvider.CloudRun:g&&m&&i(m)}},[r,n,g,m,c,i]),(0,P.jsxs)(ev.View,{gap:4,children:[(0,P.jsx)(eg.Text,{children:"Machine configuration"}),(0,P.jsx)(ev.View,{style:{maxWidth:"100%"},children:(0,P.jsx)(eg.Text,{color:"dimmer",variant:"small",multiline:!0,children:"The power of the servers running your app"})}),n===iJ.HostingBuildProvider.Gce||n===iJ.HostingBuildProvider.AzureVm||n===iJ.HostingBuildProvider.AzureContainerApp?(0,P.jsx)(ad.MachineConfigurationSelector,{selectedItem:r?(0,H._)((0,$._)({},r),{maxInstances:null!=(t=r.maxInstances)?t:1}):void 0,machineConfigurations:d,disabled:f,onError:a,onChange:i,provider:n,loading:f}):null,n===iJ.HostingBuildProvider.CloudRun?(0,P.jsx)(ac.AutoscaleMachineConfiguration2,{onEditAutoscaleConfig:o,defaultMachineConfiguration:h,selectedMachineConfiguration:m,machineConfigurations:null!=g?g:[],isAzureDeployment:s,isFreeUser:l}):null]})}e.s(["default",()=>ap],546345);var ah=e.i(1470),am=e.i(803304),ag=e.i(198992),av=e.i(761732),ax=e.i(282094),ay=(0,rM.cssRecord)({self:[t$.rcss.mt(8)],textButton:[t$.rcss.cursor.pointer,t$.rcss.reset.button,t$.rcss.color.accentPrimaryStronger,t$.rcss.focusRing,t$.rcss.hover(t$.rcss.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],tableHeader:[t$.rcss.color.foregroundDimmer,t$.rcss.m(4),t$.rcss.textAlign.left],tableWrapper:[t$.rcss.mb(8),t$.rcss.colWithGap(8),(0,ey._)({},ag.mobileWidthContainerQuery,t$.rcss.rowWithGap(0))],table:[t$.rcss.flex.column,t$.rcss.width("100%"),(0,ey._)({},ag.mobileWidthContainerQuery,[t$.rcss.width("50%"),t$.rcss.colWithGap(6),{"&:first-child":{table:{borderRight:"1px solid "+e0.tokens.outlineDimmer}}}])],ghostRow:[t$.rcss.display.none,(0,ey._)({},ag.mobileWidthContainerQuery,t$.rcss.display.flex)]}),ab=function(e){var t=e.text,n=e.onClick;return(0,P.jsx)("button",{css:ay.textButton,onClick:n,children:t})};function aw(e){var t=e.hasPortsConfigured,n=e.hasPort80Configured,r=e.hasConflictingPorts,i=e.hasLocalhostPort80,a=e.openNetworkingPane;return t?n?r?(0,P.jsx)(tq.StatusBanner,{text:(0,P.jsxs)(P.Fragment,{children:["Potential port conflict. Make sure no External Ports have conflicts in your configuration and that you only have one External Port configured on port :80. Open the"," ",(0,P.jsx)(ab,{text:"Networking pane to resolve.",onClick:a})]}),colorway:"warning"}):i?(0,P.jsx)(tq.StatusBanner,{text:(0,P.jsxs)(P.Fragment,{children:["Hosting your deployment on localhost can cause security or performance issues in some cases. Open the"," ",(0,P.jsx)(ab,{text:"Networking pane to configure.",onClick:a})]}),colorway:"primary"}):(0,P.jsx)(tq.StatusBanner,{text:(0,P.jsxs)(P.Fragment,{children:["Deployment forwarding to External Port :80. Open the"," ",(0,P.jsx)(ab,{text:"Networking pane to configure.",onClick:a})]}),colorway:"primary"}):(0,P.jsx)(tq.StatusBanner,{text:(0,P.jsxs)(P.Fragment,{children:["Potential port issue. Deployments require an External Port configured on port :80. Open the"," ",(0,P.jsx)(ab,{text:"Networking pane to configure.",onClick:a})]}),colorway:"warning"}):(0,P.jsx)(tq.StatusBanner,{text:(0,P.jsxs)(P.Fragment,{children:["No ports configured. Deployments will automatically forward the first Internal Port that opens. Open the"," ",(0,P.jsx)(ab,{text:"Networking pane to configure.",onClick:a})]})})}var a_=function(e){return 80===(0,el.getExternalPort)(e.configuration)};function ak(e){var t=e.portState,n=(0,el.getIsLocalhost)(t.configuration),r=(0,el.getExternalPort)(t.configuration),i=a_(t);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(ax.Column,{width:"50%",children:[(0,P.jsx)(eg.Text,{children:n?"localhost":"0.0.0.0"}),i&&n?(0,P.jsx)(am.default,{size:16,color:e0.colormap.primary.default}):null]}),(0,P.jsxs)(ax.Column,{width:"50%",children:[(0,P.jsxs)(eg.Text,{children:[":",r]}),i?(0,P.jsx)(iT.default,{size:16,color:e0.colormap.positive.default}):(0,P.jsx)(eb.default,{size:16,color:e0.colormap.negative.default})]})]})}function aS(e){var t=e.ports,n=e.openNetworkingPane,r=e.onWarningChange,i=(0,av.default)(t.portsState),a=(null==i?void 0:i.filter(function(e){return(0,el.getExternalPort)(e.configuration)}).sort(function(e,t){var n,r;return(null!=(n=(0,el.getExternalPort)(e.configuration))?n:0)-(null!=(r=(0,el.getExternalPort)(t.configuration))?r:0)}))||null,o=null==a?void 0:a.find(a_),s=!!o,l=!!(a&&a.length>0),u=!!a&&!!o&&!!(a.filter(a_).length>1||a.some(function(e){return(0,el.getExternalPort)(e.configuration)===o.configuration.localPort})),c=!!(o&&(0,el.getIsLocalhost)(o.configuration)),d=l&&!s||u;(0,L.useEffect)(function(){null==r||r(d)},[d,r]);var f=(0,z._)((0,L.useState)(!1),2),p=f[0],h=f[1];return(0,P.jsx)(ae.AccordionItem,{headerContent:(0,P.jsxs)(ev.View,{gap:4,style:{flex:1,minWidth:0},children:[(0,P.jsxs)(ev.View,{row:!0,gap:8,align:"center",children:[(0,P.jsx)(eg.Text,{children:"Port configuration"}),d?(0,P.jsx)(i6.default,{size:16,color:e0.colormap.warning.strongest}):null]}),(0,P.jsx)(ev.View,{style:{maxWidth:"100%"},children:(0,P.jsx)(eg.Text,{color:"dimmer",variant:"small",multiline:!0,children:"Configure which port your app uses for incoming requests"})})]}),expanded:p,onClick:function(){return h(!p)},children:(0,P.jsxs)(ev.View,{css:ay.self,gap:8,children:[(0,P.jsx)(aw,{hasPortsConfigured:l,hasPort80Configured:s,hasConflictingPorts:u,hasLocalhostPort80:c,openNetworkingPane:n}),(0,P.jsx)(ev.View,{children:(0,P.jsxs)(ev.View,{css:ay.tableWrapper,children:[(0,P.jsxs)(ev.View,{css:ay.table,children:[(0,P.jsx)(eg.Text,{css:ay.tableHeader,children:"Deployment expects:"}),(0,P.jsxs)(ax.Table,{children:[(0,P.jsxs)(ax.Row,{children:[(0,P.jsx)(ax.Column,{header:!0,width:"50%",children:"Host"}),(0,P.jsx)(ax.Column,{header:!0,width:"50%",children:"External Port"})]}),(0,P.jsxs)(ax.Row,{children:[(0,P.jsx)(ax.Column,{width:"50%",children:(0,P.jsx)(eg.Text,{children:"0.0.0.0"})}),(0,P.jsxs)(ax.Column,{width:"50%",children:[(0,P.jsx)(eg.Text,{children:":80"}),(0,P.jsx)(iT.default,{size:16,color:e0.colormap.positive.default})]})]}),l&&a?(0,ah.default)((null==a?void 0:a.length)-1).map(function(e){return(0,P.jsx)(ax.Row,{css:ay.ghostRow,children:(0,P.jsx)(ax.Column,{children:(0,P.jsx)(eg.Text,{children:""})})},e)}):null]})]}),(0,P.jsxs)(ev.View,{css:ay.table,children:[(0,P.jsx)(eg.Text,{css:ay.tableHeader,children:"Your External Port configuration(s):"}),(0,P.jsxs)(ax.Table,{children:[(0,P.jsxs)(ax.Row,{children:[(0,P.jsx)(ax.Column,{header:!0,width:"50%",children:"Host"}),(0,P.jsx)(ax.Column,{header:!0,width:"50%",children:"External Port"})]}),l?null==a?void 0:a.map(function(e){return(0,P.jsx)(ax.Row,{children:(0,P.jsx)(ak,{portState:e})},e.configuration.localPort)}):(0,P.jsxs)(ax.Row,{children:[(0,P.jsx)(ax.Column,{width:"50%",children:(0,P.jsx)(eg.Text,{children:"-"})}),(0,P.jsx)(ax.Column,{width:"50%",children:(0,P.jsx)(eg.Text,{children:"-"})})]})]})]})]})})]})})}e.s(["PortConfiguration",()=>aS],304484);var aC=e.i(995691),aj=e.i(357253),aT=e.i(257982),aE=e.i(596139),aR=e.i(968783),aI=e.i(574203),aA=e.i(76430),aP=e.i(428596),aD=e.i(721321),aO=e.i(947108),aN=(0,rM.cssRecord)({titleRow:[t$.rcss.gap(8),t$.rcss.align.center]});function aM(e){var t=e.privacyMode,n=e.setPrivacyMode,r=e.privatePassword,i=e.setPrivatePassword,a=e.privatePasswordError,o=e.hasExistingPrivatePassword,s=e.isRedeploy,l=(0,aR.useCurrentUserStoredOrgContext)(),u=l.loading,c=l.orgId,d=(0,aR.useIsCurrentOrgEnterprise)(),f=(0,aI.default)(c),p=f.requirePrivateDeployments,h=f.adminOnlyPublicDeployments,m=f.disablePasswordProtectedDeployments,g=f.adminOnlyPasswordProtectedDeploymentsBypass,x=f.isAdmin,y=(0,aA.useIsExpoStackWithLaunchEnabled)()&&t!==iJ.DeployHostingBuildPrivacyMode.Public,b=!u&&!c,w=p||!x&&h,_=!d||m||!x&&g,k=(0,aP.useIdSeed)(),S=k("deployment-privacy-mode"),C=(0,z._)((0,L.useState)(!1),2),j=C[0],T=C[1],E=(0,L.useCallback)(function(e){switch(e){case iJ.DeployHostingBuildPrivacyMode.Public:if(w)return;n(e),i(void 0),T(!1);break;case iJ.DeployHostingBuildPrivacyMode.Private:n(e),i(void 0),T(!1);break;case iJ.DeployHostingBuildPrivacyMode.Password:n(e);break;default:(0,aT.default)(e)}},[i,n,w]),R=(0,L.useCallback)(function(){var e=!j;T(e),e?i(""):i(void 0)},[i,j]);return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(id.Section,{id:"privateDeployments",variant:"vertical",title:(0,P.jsxs)(ev.View,{gap:4,children:[(0,P.jsx)(ev.View,{css:aN.titleRow,row:!0,children:(0,P.jsx)(eg.Text,{children:"Published App access"})}),(0,P.jsxs)(eg.Text,{variant:"small",color:"dimmer",children:[b?(0,P.jsx)(P.Fragment,{children:"Limit published app access to team members."}):(0,P.jsxs)(P.Fragment,{children:["Limit published app access to team members who have viewer access.",s?" Visibility changes apply after you publish. ":" "]})," ",(0,P.jsx)("a",{target:"_blank",href:"https://docs.replit.com/cloud-services/deployments/private-deployments",children:"Learn more"})]})]}),children:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(ev.View,{children:(0,P.jsxs)(aD.ButtonGroup,{id:S,name:S,value:t,onChange:E,row:!0,stretch:!0,children:[(0,P.jsx)(aD.ButtonGroupItem,{id:k("public"),value:iJ.DeployHostingBuildPrivacyMode.Public,text:(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(ai.Tooltip,{isDisabled:!w,tooltip:p?"Private publishing is required for this organization.":"Only admins can publish public apps.",children:"Public"})}),icon:(0,P.jsx)(eH.default,{}),disabled:!!w}),c?(0,P.jsx)(aD.ButtonGroupItem,{id:k("password"),value:iJ.DeployHostingBuildPrivacyMode.Password,text:(0,P.jsx)(ai.Tooltip,{isDisabled:!_,tooltip:d?m?"Password-protected deployments are disabled for this organization.":"Only admins can create password-protected deployments.":"Password-protected Published Apps are only available on Replit Enterprise.",children:(0,P.jsxs)(ev.View,{row:!0,gap:4,align:"center",justify:"center",children:["Password",u||d?null:(0,P.jsx)(aO.default,{plan:aE.enterprisePlanName,size:"small",variant:"text"})]})}),icon:(0,P.jsx)(aC.default,{}),disabled:_}):null,(0,P.jsx)(aD.ButtonGroupItem,{id:k("private"),value:iJ.DeployHostingBuildPrivacyMode.Private,text:(0,P.jsx)(ai.Tooltip,{isDisabled:!b,tooltip:"Private Published Apps are only available on Replit ".concat(aE.replitTeamsPlanName,"."),children:(0,P.jsxs)(ev.View,{row:!0,gap:4,align:"center",justify:"center",children:["Private"," ",b?(0,P.jsx)(aO.default,{plan:aE.replitTeamsPlanName,size:"small",variant:"text"}):null]})}),icon:(0,P.jsx)(aj.default,{})})]})}),t===iJ.DeployHostingBuildPrivacyMode.Password?(0,P.jsx)(ev.View,{grow:!0,children:!o||j?(0,P.jsx)(iX.DeploymentPrivatePasswordInput,{value:null!=r?r:"",onChange:i,error:a}):(0,P.jsx)(rJ.Button,{text:"Change password",onClick:R,size:"small"})}):null,y?(0,P.jsx)(tq.StatusBanner,{colorway:"warning",icon:(0,P.jsx)(i6.default,{}),text:"Private deployments will prevent mobile apps from loading in Expo Go and may break server-side functionality."}):null]})})})}function aL(e){var t=e.value,n=e.onChange,r=e.loading,i=e.disabled,a=e.error;return(0,P.jsxs)(ev.View,{gap:8,children:[(0,P.jsx)(eg.Text,{children:"Public directory"}),(0,P.jsx)(eg.Text,{color:"dimmer",variant:"small",multiline:!0,children:"Public directory is the folder where the browser should start when serving your static site"}),(0,P.jsx)(iX.CommandInput,{id:"publicDir",value:t,onChange:n,loading:void 0!==r&&r,disabled:void 0!==i&&i,error:a})]})}function aB(e){var t=e.value,n=e.onChange,r=e.loading,i=e.disabled,a=e.error;return(0,P.jsxs)(ev.View,{gap:8,children:[(0,P.jsxs)(ev.View,{gap:4,children:[(0,P.jsx)(eg.Text,{children:"Run command"}),(0,P.jsx)(eg.Text,{color:"dimmer",variant:"small",multiline:!0,children:"Starts your app after it deploys"})]}),(0,P.jsx)(iX.CommandInput,{id:"runCommand",value:t,onChange:n,loading:void 0!==r&&r,disabled:void 0!==i&&i,error:a})]})}e.s(["default",()=>aM],264646),e.s(["PublicDirectorySection",()=>aL],802436),e.s(["RunCommandSection",()=>aB],620365);var aV=e.i(507491),aF=e.i(90319),aU=e.i(452412);function aG(){var e=(0,tD._)(["\n  mutation CreateDeployedSlackAgentInstallUrl(\n    $input: CreateDeployedSlackAgentInstallUrlInput!\n  ) {\n    createDeployedSlackAgentInstallUrl(input: $input) {\n      __typename\n      ... on CreateDeployedSlackAgentInstallUrl {\n        installUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return aG=function(){return e},e}var a$={},aH=(0,tO.gql)(aG());function az(){var e=(0,tD._)(["\n  query GetSlackAgentBuilderDeploymentStatus(\n    $connectionId: String!\n    $orgId: String\n  ) {\n    getSlackAgentBuilderDeploymentStatus(\n      connectionId: $connectionId\n      orgId: $orgId\n    ) {\n      __typename\n      ... on SlackAgentBuilderDeploymentStatus {\n        connectionId\n        status\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return az=function(){return e},e}var aW={},aq=(0,tO.gql)(az()),aK=e.i(118797),aY=e.i(379846),aQ=(0,L.memo)(function(e){var t=e.isOpen,n=e.setIsOpen,r=e.token,i=e.selectedConnector,a=e.onEvent,o=(0,L.useCallback)(function(){n(!1)},[n]),s=(0,L.useMemo)(function(){return{view:"add",hideNavigation:!0,autoConnect:i?i.toLowerCase().replace(/_/g,"-"):void 0}},[i]),l=(0,L.useCallback)(function(e,t){return(0,G._)(function(){return(0,W._)(this,function(n){switch(n.label){case 0:return[4,a(e,t)];case 1:return n.sent(),[2]}})})()},[a]);return(0,P.jsx)(aY.EmbedModal,{isOpen:t,onRequestClose:o,maxWidth:400,maxHeight:600,centered:!0,children:(0,P.jsx)(aK.ConnectEmbed,{token:r,connectOptions:s,onEvent:l,height:600,baseURL:"https://replit.openint.dev/connect"})})});aQ.displayName="AddIntegrationModal";var aX=e.i(627950),aZ={incomplete:"Grant Replit Agent Builder access to your Slack workspace",complete:"Replit Agent Builder installed"},aJ={incomplete:"Add your agent to Slack",complete:"Agent added to Slack workspace"},a0={incomplete:"Invite to your Slack channels",complete:"Invited agent to Slack channels"};function a1(e){var t=e.isConnected,n=e.connectionStatusLoading,r=e.state,i=e.onPreconnectClick,a=e.onInstallClick,o=(0,z._)((0,L.useState)(!1),2),s=o[0],l=o[1],u=(0,z._)((0,L.useState)(!1),2),c=u[0],d=u[1],f=(0,z._)((0,L.useState)(!1),2),p=f[0],h=f[1],m=(0,L.useCallback)(function(){i(),l(!0)},[i]),g=(0,L.useCallback)(function(){a(),d(!0)},[a]),x=function(){switch(r){case"PRECONNECT":return{preconnectStepState:iR.ACTIVE,installStepState:iR.INACTIVE,inviteStepState:iR.INACTIVE,publishStepState:iR.INACTIVE};case"INSTALL":return{preconnectStepState:iR.COMPLETE,installStepState:iR.ACTIVE,inviteStepState:iR.INACTIVE,publishStepState:iR.INACTIVE};case"DONE":if(p)return{preconnectStepState:iR.COMPLETE,installStepState:iR.COMPLETE,inviteStepState:iR.COMPLETE,publishStepState:iR.ACTIVE};return{preconnectStepState:iR.COMPLETE,installStepState:iR.COMPLETE,inviteStepState:iR.ACTIVE,publishStepState:iR.COMPLETE}}}(),y=x.preconnectStepState,b=x.installStepState,w=x.inviteStepState,_=x.publishStepState,k=aZ[y===iR.COMPLETE?"complete":"incomplete"],S=aJ[b===iR.COMPLETE?"complete":"incomplete"],C=a0[w===iR.COMPLETE?"complete":"incomplete"];return(0,P.jsx)(ev.View,{gap:8,children:(0,P.jsxs)(e8.ShadesSurface,{className:aX.default.connectionContainer,elevate:!1,children:[(0,P.jsxs)(ev.View,{className:aX.default.statusContainer,row:!0,justify:"space-between",align:"center",py:8,px:16,children:[(0,P.jsx)(eg.Text,{children:"Slack connection status"}),(0,P.jsx)(ev.View,{row:!0,gap:8,align:"center",children:n?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(ia.default,{}),(0,P.jsx)(eg.Text,{color:"dimmer",children:"Loading..."})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(it.default,{size:8,color:t?e0.tokens.greenStronger:e0.tokens.greyStronger}),(0,P.jsx)(eg.Text,{color:"dimmer",children:t?"Connected":"Not connected"})]})})]}),(0,P.jsx)(iI,{state:y,number:1,title:k,p:8,pb:"ACTIVE"===y?16:8,children:(0,P.jsxs)(ev.View,{row:!0,gap:12,children:[(0,P.jsx)(rJ.Button,{colorway:"primary",size:"small",iconRight:(0,P.jsx)(ir.default,{}),text:"Add to Slack",onClick:m}),s?(0,P.jsxs)(ev.View,{row:!0,gap:4,align:"center",children:[(0,P.jsx)(ia.default,{color:e0.tokens.foregroundDimmest}),(0,P.jsx)(eg.Text,{color:"dimmest",variant:"small",children:"Waiting for access"})]}):null]})}),(0,P.jsx)(iI,{state:b,number:2,title:S,p:8,pb:"ACTIVE"===b?16:8,children:(0,P.jsxs)(ev.View,{row:!0,gap:12,children:[(0,P.jsx)(rJ.Button,{colorway:"primary",size:"small",iconRight:(0,P.jsx)(ir.default,{}),text:"Install agent",onClick:g}),c?(0,P.jsxs)(ev.View,{row:!0,gap:4,align:"center",children:[(0,P.jsx)(ia.default,{color:e0.tokens.foregroundDimmest}),(0,P.jsx)(eg.Text,{color:"dimmest",variant:"small",children:"Waiting for installation"})]}):null]})}),(0,P.jsx)(iI,{state:w,number:3,title:C,p:8,pb:"ACTIVE"===w?16:8,children:(0,P.jsxs)(ev.View,{gap:8,children:[(0,P.jsxs)(eg.Text,{color:"dimmest",children:["Type",(0,P.jsx)(eg.Text,{variant:"code",color:"dimmest",className:aX.default.inlineCode,children:"/invite"})," ","to invite your agent into the channels you want to use it in."]}),(0,P.jsx)(ev.View,{row:!0,children:(0,P.jsx)(rJ.Button,{colorway:"primary",size:"small",text:"Continue",onClick:function(){return h(!0)}})})]})}),(0,P.jsx)(iI,{state:_,number:4,title:"Publish",p:8,pb:16,showChildren:!0,children:(0,P.jsx)(eg.Text,{color:"dimmest",multiline:!0,children:t?"Press publish to start using your agent":"Connect to your Slack workspace to enable publishing"})})]})})}function a2(){var e=(0,iu.useConnectorContext)(),t=e.connections,n=e.loading,r=(0,ic.default)();return{connection:t.find(function(e){var t;return(null==(t=e.repls)?void 0:t.find(function(e){return e.id===r}))&&(e.connectorName===iJ.ConnectorName.SlackAgent||e.connectorName===iJ.ConnectorName.SlackAgentBuilder)}),loading:n}}e.s(["useIsSlackConnected",()=>a2],912467);var a3=e.i(57613);function a5(){return(0,P.jsx)(a3.default,{bsod:!1,fallback:function(e){return(0,P.jsx)(ev.View,{p:16,children:(0,P.jsx)(tq.StatusBanner,{colorway:"red",text:"An unexpected error occurred while setting up the Slack connection: ".concat(e.message)})})},reportToSentry:!0,origin:"ErrorBoundary: SlackConnectorSetup",children:(0,P.jsx)(a4,{})})}function a4(){var e,t,n,r,i,a,o,s,l,u=a2(),c=u.connection,d=u.loading,f=(0,iu.useConnectorContext)(),p=f.connections,h=f.refetch,m=f.error,g=f.token,x=f.loading,y=(0,ic.default)(),b=(0,aR.useCurrentUserStoredOrgContext)().orgId,w=(0,z._)((0,L.useState)(!1),2),_=w[0],k=w[1],S=(0,z._)((0,L.useState)(null),2),C=S[0],j=S[1],T=(0,z._)((0,L.useState)(!1),2),E=T[0],R=T[1],I=(0,L.useRef)(null),A=(0,z._)((e=(0,$._)({},a$,void 0),r3.useMutation(aH,e)),1)[0],D=(n=(t={replId:y,orgId:b||null,onConnectionCreated:function(){h()}}).replId,r=t.orgId,i=t.onConnectionCreated,a=(0,z._)((0,aV.useCreateConnectionMutation)(),1)[0],{handleConnectionEvent:function(e){return(0,G._)(function(){return(0,W._)(this,function(t){switch(t.label){case 0:if("connect.connection-connected"!==e.name)return[3,2];return[4,a({variables:{input:{connectionId:e.data.connection_id,orgId:r||null,replId:n}},update:function(t,n){var r=n.data;if((null==r||null==(i=r.createConnection)?void 0:i.__typename)==="CreateConnection")try{var i,a,o=t.readQuery({query:aV.UserConnectorsPageDocument});if((null==o||null==(a=o.currentUser)?void 0:a.__typename)==="CurrentUser"){var s={__typename:"OintConnection",connectionId:e.data.connection_id,connectionName:e.data.connection_id.split("_")[1],connectionType:e.data.connection_id.split("_")[1],iconPath:null,status:"connected",scopes:[],repls:[]};t.writeQuery({query:aV.UserConnectorsPageDocument,data:{currentUser:(0,H._)((0,$._)({},o.currentUser),{connectorContext:(0,H._)((0,$._)({},o.currentUser.connectorContext),{connections:(0,e_._)(o.currentUser.connectorContext.connections).concat([s])})})}})}}catch(e){}}})];case 1:t.sent(),null==i||i(),t.label=2;case 2:return[2]}})})()}}).handleConnectionEvent;(0,L.useEffect)(function(){if(p.length>0){var e=p.find(function(e){var t;return e.connectorName===iJ.ConnectorName.SlackAgentBuilder&&(null==(t=e.repls)?void 0:t.some(function(e){return e.id===y}))});e&&j(e)}},[p,y]);var O=(o={variables:{connectionId:(null==C?void 0:C.connectionId)||"",orgId:b||void 0},skip:!C,pollInterval:2e3*!!E},s=(0,$._)({},aW,o),tN.useQuery(aq,s)).data,N=(null==O||null==(l=O.getSlackAgentBuilderDeploymentStatus)?void 0:l.__typename)==="SlackAgentBuilderDeploymentStatus"?O.getSlackAgentBuilderDeploymentStatus.status:null,M=C?"connected"===N?"DONE":"INSTALL":"PRECONNECT";if(m)throw Error("Failed to load connector context");var B=(0,L.useCallback)(function(e,t){return(0,G._)(function(){return(0,W._)(this,function(n){switch(n.label){case 0:return I.current=t,[4,D(e)];case 1:return n.sent(),"connect.connection-connected"===e.name&&(k(!1),t(),I.current=null),[2]}})})()},[D]);return((0,L.useEffect)(function(){"connected"===N&&E&&R(!1)},[N,E]),(0,L.useEffect)(function(){return function(){I.current&&I.current()}},[]),x)?(0,P.jsx)(ia.default,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(a1,{isConnected:!!c,connectionStatusLoading:d,state:M,onPreconnectClick:function(){return k(!0)},onInstallClick:function(){return(0,G._)(function(){var e,t,n,r,i;return(0,W._)(this,function(a){switch(a.label){case 0:if(!C)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,A({variables:{input:{connectionId:C.connectionId,replId:y,appName:"Replit Agent",appDescription:"A Replit agent for Slack",orgId:b||void 0}}})];case 2:return(null==(t=(n=a.sent()).data)||null==(e=t.createDeployedSlackAgentInstallUrl)?void 0:e.__typename)==="CreateDeployedSlackAgentInstallUrl"&&(r=n.data.createDeployedSlackAgentInstallUrl.installUrl,window.open(r,"_blank"),R(!0)),[3,4];case 3:throw i=a.sent(),R(!1),i;case 4:return[2]}})})()}}),(0,P.jsx)(aQ,{isOpen:_,setIsOpen:k,token:g||"",selectedConnector:"slack-agent-builder",onEvent:B})]})}var a8=e.i(993796);e.i(653863);var a6=e.i(973519),a7=e.i(860302);function a9(e){var t=e.onDeleteDeployment,n=a2(),r=n.connection,i=n.loading,a=(0,iu.useConnectorContext)().refetch,o=!!r,s=(0,ic.default)(),l=(0,a6.useGlobalModal)().show,u=(0,a8.useFlag)({controlName:"flag-new-slack-connector",default:!1}),c=!!(0,ik.useDeploymentCurrentBuild)(),d=(0,L.useCallback)(function(){u||l("SlackConnectorSetupModalDeprecated",{replId:s})},[s,l,u]),f=(0,z._)((0,aV.useDeleteConnectionMutation)(),2),p=f[0],h=f[1].loading,m=(0,z._)((0,L.useState)(!1),2),g=m[0],x=m[1],y=(0,z._)((0,L.useState)(!1),2),b=y[0],w=y[1],_=(0,L.useCallback)(function(){c?l("AgentStackDisconnectModal",{onDeleteDeployment:t}):x(!0)},[c,l,t]),k=(0,L.useCallback)(function(){return(0,G._)(function(){return(0,W._)(this,function(e){switch(e.label){case 0:if(!r)throw Error("No connection to delete");return w(!0),x(!1),[4,p({variables:{input:{connectionId:r.connectionId}}})];case 1:return e.sent(),[4,a()];case 2:return e.sent(),[2]}})})()},[p,r,a]);if(u&&(!o||b))return(0,P.jsx)(a5,{});var S=h||i?(0,P.jsx)(ev.View,{clsx:(0,ey._)({},a7.default.hidden,i),children:(0,P.jsx)(rJ.Button,{variant:"outlined",text:i?"Loading":"Disconnecting",size:"small",iconLeft:(0,P.jsx)(ia.default,{}),disabled:!0})}):o?(0,P.jsx)(ev.View,{children:(0,P.jsx)(rJ.Button,{text:"Disconnect",size:"small",variant:"outlined",onClick:_})}):(0,P.jsx)(rJ.Button,{text:"Connect to Slack",size:"small",iconLeft:(0,P.jsx)(aF.default,{}),colorway:"primary",onClick:d});return(0,P.jsxs)(ev.View,{gap:8,children:[(0,P.jsx)(eg.Text,{children:"Slack connection status"}),(0,P.jsx)(e8.ShadesSurface,{className:a7.default.radiusDefault,children:(0,P.jsxs)(ev.View,{row:!0,justify:"space-between",align:"center",p:8,children:[(0,P.jsx)(ev.View,{row:!0,gap:8,align:"center",children:i?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(ia.default,{}),(0,P.jsx)(eg.Text,{color:"dimmer",children:"Loading"})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(it.default,{size:8,color:o?e0.tokens.greenStronger:e0.tokens.greyStronger}),(0,P.jsx)(eg.Text,{color:"dimmer",children:o?"Connected":"Not connected"})]})}),S]})}),o||i?null:(0,P.jsx)(eg.Text,{variant:"small",color:"dimmer",children:"Connect to your Slack workspace to enable publishing."}),(0,P.jsx)(tr.Modal,{isOpen:g,onRequestClose:function(){return x(!1)},children:(0,P.jsx)(aU.default,{title:"Disconnect from Slack",confirmLabel:"Yes, disconnect from Slack",isDestructive:!0,onConfirm:k,onCancel:function(){return x(!1)},children:"Are you sure you want to disconnect from Slack? You can reconnect at any time but you may need to request permission from your admin."})})]})}e.s(["default",()=>a9],147255);var oe=e.i(611159),ot=e.i(32144),on="SCHEDULE_CRON_EXPRESSION",or="SCHEDULE_CRON_TIMEZONE";function oi(e){return e.some(function(e){return e.name===on&&null!==e.value&&(0,oe.isValidCron)(e.value)})}var oa=function(e){var t,n,r,i,a=e.envVars,o=e.updateEnvVarValue,s=e.addAnEnvVar,l=e.initialized,u=void 0===(0,ik.useDeploymentCurrentBuild)(),c=(0,L.useRef)(null),d=(0,L.useRef)(null),f=(0,L.useCallback)(function(e){if(null===c.current){var t=a.findIndex(function(e){return e.name===on});if(-1===t){c.current=a.length,s({name:on,value:null!=e?e:""});return}c.current=t}o(c.current,null!=e?e:"")},[s,a,o,c]),p=(0,L.useCallback)(function(e){if(null===d.current){var t=a.findIndex(function(e){return e.name===or});if(-1===t){d.current=a.length,s({name:or,value:null!=e?e:""});return}d.current=t}o(d.current,null!=e?e:"")},[s,a,o]),h=null!=(r=null==(t=a.find(function(e){return e.name===on}))?void 0:t.value)?r:null,m=null!=(i=null==(n=a.find(function(e){return e.name===or}))?void 0:n.value)?i:null,g=(0,ot.useCronExpressionWithTranslation)({initialCrontab:h,initialTimezone:m,onCrontabChange:f,onTimezoneChange:p}),x=g.describeSchedule,y=g.crontab,b=g.timezone,w=g.error,_=g.loading,k=g.scheduleToCronExpression,S=g.cronExpressionToSchedule,C=g.setCrontab,j=g.setTimezone,T=g.handleOnInputChanged,E=g.setTranslationType;return(0,P.jsxs)(ev.View,{gap:8,children:[w?(0,P.jsx)(ot.CronExpressionErrorFallback,{crontab:y,timezone:b,cronLoading:!1,error:w,onCronExpressionChange:C,onTimezoneChange:j}):(0,P.jsx)(ot.CronExpressionInterface,{describeSchedule:x,crontab:y,timezone:b,loading:_,cronLoading:!l,scheduleToCronExpression:k,cronExpressionToSchedule:S,onScheduleDescriptionChange:function(e){return T(e,"scheduleToCronExpression")},onCronExpressionChange:function(e){return T(e,"cronExpressionToSchedule")},onTimezoneChange:j,onScheduleDescriptionFocus:function(){return E("scheduleToCronExpression")},onCronExpressionFocus:function(){return E("cronExpressionToSchedule")}}),u?(0,P.jsx)(eg.Text,{variant:"small",color:"dimmer",children:"Set a schedule to deploy your agent."}):null]})};e.s(["TimeBasedAgentScheduleSection",()=>oa,"hasValidCronExpression",()=>oi],475868)},977424,847630,397837,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(276385),a=e.i(389959),o=e.i(814167),s=e.i(368964),l=e.i(182409),u=e.i(178496),c=e.i(220743),d=e.i(416298),f=e.i(315479),p=e.i(399344),h=e.i(914279),m=e.i(68893),g=e.i(241703),x=e.i(754898),y=e.i(729678),b=e.i(331820),w=e.i(686631),_=e.i(882848),k=e.i(269848),S=e.i(379334),C=e.i(988105),j=e.i(479373),T=e.i(197486),E=e.i(137737),R=e.i(500179),I=e.i(552780),A=e.i(878284),P=e.i(942859),D=e.i(487517),O=e.i(332822),N=e.i(648518),M=e.i(62279),L=e.i(302454),B=e.i(546345),V=e.i(304484),F=e.i(264646),U=e.i(802436),G=e.i(620365),$=e.i(398594),H=e.i(147255),z=e.i(475868),W=e.i(976191),q=e.i(702868),K=e.i(315315),Y=e.i(492267),Q=e.i(293265),X=e.i(446530),Z=e.i(613355),J=e.i(140487),ee=e.i(739521),et=e.i(396776),en=e.i(960178),er=e.i(625484),ei=(0,X.cssRecord)({self:Z.rcss.colWithGap(16),footer:Z.rcss.colWithGap(0),deployButton:Z.rcss.flex.grow(1),statusBanner:[Z.rcss.textBalance,Z.rcss.flex.shrink(1)]}),ea=function(e){var t=e.deploymentId,r=e.replId,o=e.initialSubdomain,u=e.initialProvider,c=e.initialMachineConfig,d=e.secrets,f=e.fs,h=e.ports,x=e.dotReplit,y=e.onDeploy,b=e.onCancel,w=e.onError,X=e.initialSecretsSyncExpanded,Z=e.openNetworkingPane,ea=e.hasAgentSession,eo=e.onViewAction,es=(0,W.useDeploymentOptionsState)({deploymentId:t,replId:r,initialSubdomain:o,initialProvider:u,initialMachineConfig:c,secrets:d,fs:f,dotReplit:x,onDeploy:y,onError:w,hasAgentSession:ea}),el=es.mode,eu=es.deployment,ec=es.queryLoading,ed=es.optionsLoading,ef=es.currentBuild,ep=es.isRedeploy,eh=es.editDeploySecretAuthorization,em=es.editReplSecretsAuthorization,eg=es.appType,ev=es.subdomain,ex=es.validSubdomain,ey=es.buildCommand,eb=es.runCommand,ew=es.runCommandError,e_=es.timezone,ek=es.timezoneError,eS=es.crontab,eC=es.crontabError,ej=es.envVars,eT=es.publicDir,eE=es.publicDirError,eR=es.timeoutValue,eI=es.timeoutUnits,eA=es.isPrivate,eP=es.privacyMode,eD=es.privatePassword,eO=es.privatePasswordError,eN=es.hasExistingPrivatePassword,eM=es.ignoredSecrets,eL=es.isOverwritingSecrets,eB=es.isOverwriteSecretsModalOpen,eV=es.devSecrets,eF=es.orgId,eU=es.timeoutValueError,eG=es.syncSandboxWithLive,e$=es.canCreateNeonProductionDatabaseStateLoading,eH=es.provider,ez=es.machineConfig,eW=es.setSubdomain,eq=es.setValidSubdomain,eK=es.setBuildCommand,eY=es.setRunCommand,eQ=es.setTimezone,eX=es.setCrontab,eZ=es.setPublicDir,eJ=es.setPrivacyMode,e0=es.setPrivatePassword,e1=es.setTimeoutValue,e2=es.setTimeoutUnits,e3=es.setTimeoutValueError,e5=es.setSyncSandboxWithLive,e4=es.setIsOverwriteSecretsModalOpen,e8=es.setProvider,e6=es.setMachineConfig,e7=es.createNeonProductionDatabaseState,e9=es.onAppTypeChanged,te=es.onSubdomainBlur,tt=es.addAnEnvVar,tn=es.updateEnvVarName,tr=es.updateEnvVarValue,ti=es.removeEnvVar,ta=es.handleDeployClick,to=es.optOut,ts=es.optIn,tl=es.syncToWorkspace,tu=es.overwriteSecrets,tc=eH!==s.HostingBuildProvider.Cron&&!(null==eu?void 0:eu.replitAppSubdomain),td=(0,(0,p.useDeploymentDeployability)().getDeployabilityByProvider)(eH,eA),tf=ep?td.redeploy.isAuthorized:td.deploy.isAuthorized,tp=(0,p.useFreeTierCloudServices)(),th=(0,p.useDeploymentProvider)({onError:w,dotReplitService:x}),tm=th.recommendedProvider,tg=th.loading,tv=ed||tg||e$,tx=ec||tv||el===m.DeploymentMode.Preparing||eU,ty=(0,Y.useIsAgentStackRepl)().isAgentStackRepl,tb=(0,Q.useAgentStackPlatformType)().agentStackPlatformType,tw=(0,j.useStripeConnection)().hasStripeSandboxConnection,t_=(0,q.useShowAgentInbox)(r),tk=tx||!tf||tc&&!ex,tS=function(){eo({type:g.ViewActionType.SendDeploymentLifecycleCommand,payload:{command:s.SendDeploymentLifecycleCommandType.Destroy}})},tC=ej.map(function(e){return e.name}),tj=(0,i.jsx)(O.CreateNeonProductionDatabaseToggleSection,{state:e7}),tT=(0,i.jsxs)(R.LabeledSectionWithHover,{id:"envVars",title:"Production app secrets",information:"Secrets, or environment variables, are private keys you can use to access APIs and services",children:[eF?(0,i.jsx)(et.StatusBanner,{icon:(0,i.jsx)(_.default,{}),css:ei.statusBanner,colorway:"primary",text:"Secrets now sync automatically with your team's published apps. "+"Production app secrets added before ".concat((0,K.formatDateTime)(S.SYNCING_SECRETS_ROLLOUT_DATE.toISOString())," ")+"remain unchanged to avoid disrupting existing workflows. Manage syncing below."}):null,(0,i.jsx)(N.DeploymentSecretsSection,{envVars:ej,envVarKeys:tC,updateEnvVarName:tn,updateEnvVarValue:tr,removeEnvVar:ti,addAnEnvVar:tt,baseDisableState:tx,devSecrets:eV,ignoredSecrets:eM,editReplSecretsAuthorization:em,editDeploySecretAuthorization:eh,optOut:to,optIn:ts,syncToWorkspace:tl,queryLoading:ec,replId:r,initialSecretsSyncExpanded:X})]}),tE=u===s.HostingBuildProvider.Static,tR=(0,n._)((0,a.useState)(!1),2),tI=tR[0],tA=tR[1];if(tI)return(0,i.jsx)(A.AutoscaleConfigEditor,{isAzureDeployment:eH===s.HostingBuildProvider.AzureContainerApp||eH===s.HostingBuildProvider.AzureVm,isFreeUser:tp,onError:w,onConfirm:function(e){e6(e),tA(!1)},onCancel:function(){return tA(!1)}});var tP=function(){if(tv)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.LabeledSectionWithHoverLoading,{}),(0,i.jsx)(R.LabeledSectionWithHoverLoading,{}),(0,i.jsx)(R.LabeledSectionWithHoverLoading,{})]});if(ty)switch(tb){case s.AgentStackPlatformType.Slack:return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(H.default,{onDeleteDeployment:tS}),tj,tT]});case s.AgentStackPlatformType.Telegram:return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T.TelegramConnectionSection,{}),tj,tT]});case s.AgentStackPlatformType.TimeBased:return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z.TimeBasedAgentScheduleSection,{envVars:ej,updateEnvVarValue:tr,addAnEnvVar:tt,removeEnvVar:ti,initialized:!tv}),tj,tT]})}var e=eH!==s.HostingBuildProvider.Static,n=eH===s.HostingBuildProvider.Gce,r=eH===s.HostingBuildProvider.Static,a=eH===s.HostingBuildProvider.Cron,o=eH===s.HostingBuildProvider.Gce&&eg===s.DeployHostingBuildAppType.Server||eH===s.HostingBuildProvider.CloudRun,l=eH!==s.HostingBuildProvider.Cron&&!tp,u=tE&&[s.HostingBuildProvider.Gce,s.HostingBuildProvider.AzureVm,s.HostingBuildProvider.CloudRun,s.HostingBuildProvider.AzureContainerApp].includes(eH);return(0,i.jsxs)(i.Fragment,{children:[a?(0,i.jsx)($.ScheduledMachineConfiguration,{crontab:eS,setCrontab:eX,crontabError:eC,timezone:e_,setTimezone:eQ,timezoneError:ek,loading:ec,timeoutValue:eR,setTimeoutValue:e1,timeoutUnits:eI,setTimeoutUnits:e2,setTimeoutValueError:e3}):null,tc?(0,i.jsx)(R.LabeledSectionWithHover,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after publishing",children:(0,i.jsx)(E.PrimaryDomainInput,{id:"primaryDomain",subdomain:ev,provider:eH,deploymentId:t||void 0,onChange:eW,onBlur:te,updateValidity:eq})}):null,l?(0,i.jsx)(F.default,{privacyMode:eP,setPrivacyMode:eJ,privatePassword:eD,setPrivatePassword:e0,privatePasswordError:eO,hasExistingPrivatePassword:eN,isRedeploy:ep}):null,tE?(0,i.jsx)(D.default,{provider:eH,setProvider:function(e){e6(null),e8(e)},recommendedProvider:tm,excludedProviders:[s.HostingBuildProvider.Cron]}):null,u?(0,i.jsx)(B.default,{provider:eH,machineConfig:ez,setMachineConfig:e6,onError:w,onEditAutoscaleConfig:function(){return tA(!0)}}):null,r?(0,i.jsx)(U.PublicDirectorySection,{value:eT,onChange:eZ,loading:tv,disabled:tx,error:eE}):null,(0,i.jsx)(P.BuildCommandSection,{value:ey,onChange:eK,loading:tv,disabled:tx}),e?(0,i.jsx)(G.RunCommandSection,{value:eb,onChange:eY,loading:tv,disabled:tx,error:ew}):null,tj,tT,n?(0,i.jsx)(R.LabeledSectionWithHover,{id:"deploymentAppType",title:"App type",information:"Configure your app based on whether it needs to serve traffic from the web.",children:(0,i.jsx)(E.DeploymentTargetSelector,{appType:eg,onChange:e9})}):null,o?(0,i.jsx)(V.PortConfiguration,{ports:h,openNetworkingPane:Z}):null,(0,i.jsx)(M.default,{}),t_.showToggle?(0,i.jsx)(I.default,{isEnabled:t_.isEnabled,showUpsell:t_.showUpsell}):null,tw?(0,i.jsx)(C.SyncToggleSection,{syncSandboxWithLive:eG,setSyncSandboxWithLive:e5,hideRecommendedPill:!0}):null]})}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(er.View,{css:ei.self,children:[tP,(0,i.jsxs)(er.View,{css:ei.footer,children:[(0,i.jsx)(L.EligibilityStatusBanner,{deployability:td,isRedeploy:ep}),(0,i.jsxs)(er.View,{pt:12,row:!0,gap:8,children:[ef?(0,i.jsx)(J.Button,{text:"Cancel",onClick:b}):null,(0,i.jsx)(er.View,{css:ei.deployButton,children:(0,i.jsx)(J.Button,{colorway:"primary",onClick:function(){ta(tc)},text:el===m.DeploymentMode.Preparing&&"Preparing..."||tv&&"Fetching options..."||"Publish",iconLeft:tv||el===m.DeploymentMode.Preparing?(0,i.jsx)(k.default,{}):(0,i.jsx)(l.default,{}),disabled:tk})})]})]})]}),(0,i.jsx)(ee.Modal,{isOpen:eB,onRequestClose:function(){eL||e4(!1)},children:(0,i.jsxs)(er.View,{gap:8,children:[(0,i.jsx)(en.Text,{variant:"subheadBig",children:"Copy secrets from Published app to Development?"}),(0,i.jsx)(en.Text,{children:"Are you sure you want to copy all of your secrets from Published app to Development? Secrets already present in Development will be overwritten and lost permanently."}),(0,i.jsxs)(er.View,{pt:8,row:!0,gap:8,justify:"end",children:[(0,i.jsx)(J.Button,{text:"Cancel",disabled:eL,onClick:function(){e4(!1)}}),(0,i.jsx)(J.Button,{text:"Yes, copy secrets",colorway:"negative",disabled:eL,loading:eL,onClick:tu})]})]})})]})},eo=e.i(187505),es=e.i(521439),el=e.i(135596),eu=e.i(480028),ec=(0,X.cssRecord)({self:Z.rcss.colWithGap(8),ctaGroup:{flexDirection:"row",gap:8,flexWrap:"wrap"},deployOptions:[Z.rcss.borderRadius(8),Z.rcss.border({color:eu.tokens.outlineDimmest})]}),ed=function(e){var _,k,S,C,j,T,E,R,I,A,P,D,O,N,M,B,V,F,U=e.deploymentId,G=e.replId,$=e.dotReplit,H=e.fs,z=e.ports,W=e.secrets,q=e.onError,K=e.expanded,Y=e.setExpanded,Q=e.shouldShowMobileTour,X=e.onDismissMobileTour,Z=e.openNetworkingPane,ee=e.onResume,en=e.hasAgentSession,ei=e.onViewAction;e.view,e.hasCurrentBuild;var eu=(0,eo.useTrackClick)().trackClick,ed=(0,p.useDeployBuild)().redeployWithNoNewOptions,ef=(0,p.useSetDeploymentTriggerSource)(),ep=(0,h.useDeploymentMode)(),eh=(C=(_={deploymentId:U,dotReplit:$}).deploymentId,j=_.dotReplit,E=(T=(0,n._)((0,a.useState)(null),2))[0],R=T[1],(0,a.useEffect)(function(){var e=!1;return(0,t._)(function(){var t;return(0,r._)(this,function(n){switch(n.label){case 0:return[4,(0,y.getDotReplitDeploymentConfig)(j)];case 1:if(t=n.sent(),e)return[2];return R(t),[2]}})})(),function(){e=!0}},[j]),I=E,P=(A=(0,o.useHostingDeploymentConfigRedeployQuery)({variables:{id:C},ssr:!1,fetchPolicy:"cache-and-network"})).data,D=A.loading,O=A.error,N=(null==P||null==(k=P.hostingDeployment)?void 0:k.__typename)==="HostingDeployment"?P.hostingDeployment:null,(null==P||null==(S=P.hostingDeployment)?void 0:S.__typename)==="NotFoundError"?{deployment:null,config:null,error:"Published app not found",loading:!1}:null===I||!N&&D?{data:null,erorr:null,loading:!0}:O||!N?{deployment:null,config:null,error:"Something went wrong",loading:!1}:{deployment:N,config:I,error:null,loading:!1}),em=(0,p.useDeploymentDeployability)().deployability,eg=null==(M=eh.deployment)?void 0:M.currentBuild,ev=(0,b.useDevSecrets)({secrets:W,replId:G}).devSecrets,ex=null==(B=eh.deployment)?void 0:B.currentBuild.envVars,ey=null==(V=eh.deployment)?void 0:V.repl.authorizations.editSecrets.isAuthorized,eb=null==(F=eh.deployment)?void 0:F.repl.authorizations.editDeploymentSecrets.isAuthorized,ew=(0,a.useMemo)(function(){return ev&&ex&&ey&&eb?(0,es.compareSecrets)({secrets:new Map(null==ex?void 0:ex.map(function(e){return[e.name,e.value]})),otherSecrets:ev}).missing.size:0},[ev,ex,ey,eb]);if(eh.loading)return null;if(eh.error)return(0,i.jsx)(w.ViewError,{text:eh.error});if(K){var e_=null==eg?void 0:eg.provider;if(!eg||!e_||e_===s.HostingBuildProvider.Extension)return(0,i.jsx)(et.StatusBanner,{colorway:"warning",icon:(0,i.jsx)(d.default,{}),text:"Provider not found"});var ek=eg.machineConfiguration?{configurationId:eg.machineConfiguration.id,configurationLabel:eg.machineConfiguration.label,configurationSlug:eg.machineConfiguration.slug,maxInstances:eg.maxMachineInstances}:null;return(0,i.jsx)(er.View,{css:ec.deployOptions,p:16,pt:12,children:(0,i.jsx)(ea,{initialSubdomain:"",initialProvider:e_,initialMachineConfig:ek,deploymentId:U,replId:G,fs:H,secrets:W,dotReplit:$,ports:z,onCancel:function(){return Y(!1)},onDeploy:function(){return Y(!1)},onError:q,initialSecretsSyncExpanded:ew>0,openNetworkingPane:Z,hasAgentSession:en,onViewAction:ei})})}var eS=eh.loading||!em.redeploy.isAuthorized||ep!==m.DeploymentMode.Ready&&ep!==m.DeploymentMode.Suspended;return(0,i.jsxs)(er.View,{css:ec.self,children:[(0,i.jsx)(L.EligibilityStatusBanner,{deployability:em,isRedeploy:!0}),(0,i.jsxs)(er.View,{css:ec.ctaGroup,children:[(0,i.jsx)(J.Button,{disabled:eS,onClick:function(){return(0,t._)(function(){return(0,r._)(this,function(e){switch(e.label){case 0:if(eu({productArea:"publishing",target:"republish_button"}),eh.loading)return[2];if(ep===m.DeploymentMode.Suspended)return ee(),[2];return ef("deployments_pane_republish_button"),[4,ed({hasAgentSession:en})];case 1:return e.sent(),[2]}})})()},text:ep===m.DeploymentMode.Suspended?"Resume":"Republish",iconLeft:(0,i.jsx)(l.default,{})}),(0,i.jsx)(J.Button,{disabled:eS,text:"Adjust settings",onClick:function(){eu({productArea:"publishing",target:"advanced_settings_button"}),Y(!0)},iconLeft:(0,i.jsx)(u.default,{})}),(0,i.jsx)(J.Button,{text:"Run security scan",iconLeft:(0,i.jsx)(c.default,{}),onClick:function(){eu({productArea:"publishing",target:"run_security_scan_button"}),ei({type:g.ViewActionType.OpenPane,payload:{type:"securityScan"}}),(0,el.trackRunScanClickEvent)(f.RunScanContext.REDEPLOY_PANE)}}),(0,i.jsx)(x.default,{shouldShow:Q,onDismissTour:X})]})]})};e.s(["ConfigRedeploy",()=>ed],977424);var ef=(0,X.cssRecord)({line:{width:1,position:"absolute",left:3},circlePast:{position:"absolute",top:10,left:1,width:5,height:5,borderRadius:"100%",opacity:.5}}),ep=(0,X.cssRecord)({container:{width:7,position:"relative"},linePast:[ef.line,{backgroundColor:eu.tokens.outlineDimmest,top:15,bottom:-10}],linePresent:[ef.line,{backgroundImage:"linear-gradient(to top, ".concat(eu.tokens.outlineDimmest,", ").concat(eu.tokens.outlineDimmer,")"),top:27,bottom:-10}],lineFuture:[ef.line,{borderRight:"1px dashed "+eu.tokens.outlineDimmer,top:23,bottom:-20}],lineFutureFailClosed:[ef.line,{backgroundColor:eu.tokens.outlineDimmest,top:19,bottom:-20}],lineFutureFailOpen:[ef.line,{borderRight:"1px dashed "+eu.tokens.outlineDimmer,top:22,bottom:-18}],circlePastGreen:[ef.circlePast,Z.rcss.backgroundColor.accentPositiveDefault],circlePastRed:[ef.circlePast,Z.rcss.backgroundColor.accentNegativeDefault],circlePastGray:[ef.circlePast,Z.rcss.backgroundColor.outlineDimmer],circlePresent:[Z.rcss.backgroundColor.accentPrimaryStronger,{position:"absolute",top:20,left:0,width:7,height:7,borderRadius:"100%"}],circleFuture:{position:"absolute",top:12,left:-1,width:9,height:9},circleFutureFailClosed:[Z.rcss.backgroundColor.accentNegativeDefault,{position:"absolute",top:14,left:1,width:5,height:5,borderRadius:"100%",opacity:.6}]});function eh(e){var t,n,r=e.type,a=e.hideLine;switch(r){case"pastSuccess":t=ep.linePast,n=(0,i.jsx)(er.View,{css:ep.circlePastGreen});break;case"pastFail":t=ep.linePast,n=(0,i.jsx)(er.View,{css:ep.circlePastRed});break;case"pastNeutral":t=ep.linePast,n=(0,i.jsx)(er.View,{css:ep.circlePastGray});break;case"present":t=ep.linePresent,n=(0,i.jsx)(er.View,{css:ep.circlePresent});break;case"future":t=ep.lineFuture,n=(0,i.jsx)("svg",{viewBox:"0 0 9 9",css:ep.circleFuture,children:(0,i.jsx)("circle",{cx:4.5,cy:4.5,r:4,fill:"none",stroke:eu.tokens.outlineStrongest,strokeDasharray:"2 1"})});break;case"futureFailClosed":t=ep.lineFutureFailClosed,n=(0,i.jsx)(er.View,{css:ep.circleFutureFailClosed});break;case"futureFailOpen":t=ep.lineFutureFailOpen,n=null}return(0,i.jsxs)(er.View,{css:ep.container,children:[!(void 0!==a&&a)&&(0,i.jsx)(er.View,{css:t,"data-timeline-line":!0}),n]})}e.s(["TimelinePoint",()=>eh],847630);var em=e.i(878420),eg=e.i(569384),ev=e.i(973245),ex=e.i(304277);function ey(){var e=(0,eg._)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return ey=function(){return e},e}e.i(566901);var eb={},ew=(0,ev.gql)(ey());function e_(e){var t=(0,em._)({},eb,e);return ex.useQuery(ew,t)}e.s(["useHostingDeployActionHistoryQuery",()=>e_],397837)},704726,e=>{e.v({footerMessage:"GeneratingDiffStatementsCompleted-module__A1VvTW__footerMessage",footerMessageHeader:"GeneratingDiffStatementsCompleted-module__A1VvTW__footerMessageHeader",isExpanded:"GeneratingDiffStatementsCompleted-module__A1VvTW__isExpanded",learnMoreLink:"GeneratingDiffStatementsCompleted-module__A1VvTW__learnMoreLink",stageCode:"GeneratingDiffStatementsCompleted-module__A1VvTW__stageCode",stageCodeHeader:"GeneratingDiffStatementsCompleted-module__A1VvTW__stageCodeHeader",warning:"GeneratingDiffStatementsCompleted-module__A1VvTW__warning"})},31200,e=>{e.v({conflictPromptOption:"GeneratingDiffStatementsPaused-module__agBH5a__conflictPromptOption",conflictPromptOptionHighlight:"GeneratingDiffStatementsPaused-module__agBH5a__conflictPromptOptionHighlight",conflictPromptOptionLabel:"GeneratingDiffStatementsPaused-module__agBH5a__conflictPromptOptionLabel"})},257391,e=>{e.v({isExpanded:"PrepareDatabaseStageMessage-module__E7_2DW__isExpanded",message:"PrepareDatabaseStageMessage-module__E7_2DW__message",messageHeader:"PrepareDatabaseStageMessage-module__E7_2DW__messageHeader"})},779213,e=>{e.v({option:"ValidatingDiffStatementsPaused-module__djmC4a__option",optionLabel:"ValidatingDiffStatementsPaused-module__djmC4a__optionLabel",stageCode:"ValidatingDiffStatementsPaused-module__djmC4a__stageCode"})},253711,e=>{e.v({stageIcon:"StageIcon-module__El_uUq__stageIcon"})},859158,e=>{e.v({isExpanded:"PrepareDatabaseStage-module__M0Jleq__isExpanded",stage:"PrepareDatabaseStage-module__M0Jleq__stage",stageHeader:"PrepareDatabaseStage-module__M0Jleq__stageHeader"})},137205,e=>{e.v({disabledLog:"HistoryListItem-module__mdIjFq__disabledLog",item:"HistoryListItem-module__mdIjFq__item",itemLine:"HistoryListItem-module__mdIjFq__itemLine",itemMainText:"HistoryListItem-module__mdIjFq__itemMainText",itemRight:"HistoryListItem-module__mdIjFq__itemRight",itemRightVisible:"HistoryListItem-module__mdIjFq__itemRightVisible"})},684340,413655,340766,e=>{"use strict";var t,n=e.i(530658),r=e.i(276385),i=e.i(389959),a=e.i(368964),o=e.i(399344),s=e.i(914279),l=e.i(68893),u=e.i(107129),c=e.i(241703),d=e.i(977424),f=e.i(32995),p=e.i(847630),h=e.i(589910),m=e.i(297083),g=e.i(346715),x=e.i(817556),y=e.i(397837),b=e.i(379334),w=e.i(899869),_=e.i(878420),k=e.i(178496),S=e.i(887964),C=e.i(416298),j=e.i(210481),T=e.i(818976),E=e.i(569384),R=e.i(801562),I=e.i(82259),A=e.i(629536),P=e.i(784147),D=e.i(167392),O=e.i(568430),N=e.i(252204),M=e.i(269848),L=e.i(167626),B=e.i(960933),V=e.i(862927),F=e.i(986194);e.i(877212);var U=e.i(924908);e.i(925218);var G=e.i(267103),$=e.i(802088),H=B.Type.Object({description:B.Type.String(),name:B.Type.Optional(B.Type.String()),type:B.Type.Optional(B.Type.String()),before:B.Type.Optional(B.Type.String()),after:B.Type.Optional(B.Type.String()),file:B.Type.Optional(B.Type.Union([B.Type.String(),B.Type.Null()])),File:B.Type.Optional(B.Type.Object({$kind:B.Type.String(),file:B.Type.String()}))}),z=B.Type.Object({errors:I.HostingDebugSummaryResultSchema.properties.errors,suggestions:B.Type.Array(H)}),W={direction:"forward",state:{result:void 0,completed:!1},debug:{name:"DebugSummaryReducer"},reducer:function(e,t){if((0,F.isKind)(e.contents.contents,"hostingDebugSummaryEventContents")&&e.state===I.EventState.COMPLETE&&e.sender.type===I.UserType.AI){var n=(0,F.unkind)(e.contents.contents).result;if(V.Value.Check(z,n))return t.result=n,t.completed=e.state===I.EventState.COMPLETE,!1}}},q=e.i(311106),K=e.i(207237),Y=e.i(417120),Q=e.i(765890),X=e.i(468095),Z=e.i(480028),J=e.i(446530),ee=e.i(613355),et=e.i(140487),en=(0,J.cssRecord)({link:{color:Z.tokens.foregroundDefault,textDecoration:"underline",":hover":{color:Z.tokens.accentPrimaryStronger}},list:[{listStyle:"inside"}]});function er(e){var t=e.provider,n=e.onViewApplicationLogs,i=(0,o.useIsMaybeVncRepl)();return(0,r.jsxs)(r.Fragment,{children:["Common issues for promote stage errors can be an error occurring while trying to run your run command, your application exiting unexpectedly, an error on your app server or a provisioning issue.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"Ways to debug:",(0,r.jsxs)("ul",{css:en.list,children:[i?(0,r.jsx)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,r.jsx)("li",{children:"Make sure your repl runs in the Workspace."}),(0,r.jsxs)("li",{children:["View our"," ",(0,r.jsx)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:en.link,onClick:function(){return(0,u.trackDeploymentSectionViewed)({context:"troubleshooting_doc"})},children:"troubleshooting tips."})]}),t!==a.HostingBuildProvider.Static&&n?(0,r.jsxs)("li",{children:["Look for errors in your application's server logs.",(0,r.jsx)(et.Button,{text:"Logs",size:"small",iconLeft:(0,r.jsx)(S.default,{}),onClick:n,css:ee.rcss.display.inlineFlex})," "]}):null,(0,r.jsx)("li",{children:"Look for errors in your deploy logs."})]})]})}function ei(){var e=(0,o.useIsMaybeVncRepl)();return(0,r.jsxs)(r.Fragment,{children:["Common issues for build stage errors can be an error occurring while trying to run your build command or an compilation issue with your application code.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"Ways to debug:",(0,r.jsxs)("ul",{css:en.list,children:[e?(0,r.jsx)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,r.jsx)("li",{children:"Make sure your repl runs in the Workspace."}),(0,r.jsxs)("li",{children:["View our"," ",(0,r.jsx)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:en.link,onClick:function(){return(0,u.trackDeploymentSectionViewed)({context:"troubleshooting_doc"})},children:"troubleshooting tips."})]}),(0,r.jsx)("li",{children:"Look for errors in your deploy logs."})]})]})}var ea=e.i(173703),eo=e.i(965153),es=e.i(136540),el=e.i(960178),eu=e.i(751273),ec=e.i(625484);function ed(){var e=(0,E._)(["\n      The deployment failed with the following error:\n\n\n      ```\n      ","\n      ```\n      Suggested fixes include:\n\n\n      ```\n      ","\n      ```\n      Can you apply the suggested fixes?\n    "],["\n      The deployment failed with the following error:\\n\\n\n      \\`\\`\\`\n      ","\n      \\`\\`\\`\n      Suggested fixes include:\\n\\n\n      \\`\\`\\`\n      ","\n      \\`\\`\\`\n      Can you apply the suggested fixes?\n    "]);return ed=function(){return e},e}var ef=[ee.rcss.cursor.pointer,ee.rcss.reset.button,ee.rcss.color.foregroundDimmest,ee.rcss.focusRing,ee.rcss.hover(ee.rcss.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],ep=(0,J.cssRecord)({errorsSection:[ee.rcss.colorMixBg(Z.tokens.accentNegativeDimmest,"transparent",.3),ee.rcss.color.accentNegativeStrongest],errorsSectionTitleText:[ee.rcss.color.foregroundDefault],errorsList:[ee.rcss.display.flex,ee.rcss.colWithGap(4),ee.rcss.pt(6),ee.rcss.pl(24),{listStyleType:"disc"}],suggestionsSectionAgent:[ee.rcss.colorMixBg(Z.tokens.blurpleDimmest,"transparent",.15),ee.rcss.border({direction:"top",color:Z.tokens.outlineDimmer})],aiSuggestionsTitle:[ee.rcss.color.blurpleStrongest,ee.rcss.align.center],aiSuggestionsList:ee.rcss.pl(24),textButton:[ef]});function eh(e){var t,a,s,l,c,d,f,p,h,g,y,b,w,_,k,S=e.title,C=e.debugSummary,j=e.view,T=e.provider,E=e.onViewBuildLogs,I=e.viewingBuildLogs,A=e.viewBuildLogsIcon,P=e.openFile,D=e.openPane,O=(0,K.default)(),N=(0,o.useDeploymentId)(),M=(0,i.useCallback)(function(e){(0,q.sendSentryError)({error:e,context:"useHostingDebugSummary",extras:{replId:O,deploymentId:N,debugSummary:C,view:j,provider:T}})},[C,N,T,O,j]),B=(t=C.sessionId,a=(0,U.useChatter)(),l=(s=(0,n._)((0,i.useState)(),2))[0],c=s[1],f=(d=(0,n._)((0,i.useState)(!0),2))[0],p=d[1],g=(h=(0,n._)((0,i.useState)(!1),2))[0],y=h[1],b=(0,i.useRef)(null),w=(0,i.useCallback)(function(e){p(!1),M(e),y(!0)},[M]),_=(0,G.useObservable)(t?a.sessions.get(t):null),k=(0,i.useMemo)(function(){return null==_?void 0:_.reduce(W,"global").result},[_]),(0,$.useObserver)(k,{next:function(e){e.result&&e.completed&&(c(e.result),b.current&&(clearTimeout(b.current),b.current=null),p(!1))},error:function(e){w((0,L._)(e,Error)?e:Error(String(e)))}}),(0,i.useEffect)(function(){if(f&&_)return b.current=setTimeout(function(){w(Error("Debug summary event timed out while loading."))},3e4),function(){b.current&&(clearTimeout(b.current),b.current=null)}},[f,_,w]),{loading:f,error:g,debugResult:l}),V=B.loading,F=B.debugResult,H=B.error,z=(0,o.useFsService)().listFiles,Y=(0,n._)((0,i.useState)([]),2),Q=Y[0],Z=Y[1],J=(0,X.useSendAgentMessage)({openPane:D}),ee=(0,i.useRef)(!1);return(0,i.useEffect)(function(){N&&F&&!ee.current&&(ee.current=!0,(0,u.trackDebugSummaryUsed)("viewed",{view:j,debugSummary:C,debugResult:F,replId:O,deploymentId:N}),F.suggestions.some(function(e){return!!ev(e)})&&z().then(function(e){e.files&&Z(e.files)}))},[F,j,C,O,N,z]),(0,r.jsx)(em,{title:S,debugSummary:C,debugResult:F,provider:T,viewingBuildLogs:I,viewBuildLogsIcon:A,loading:V,files:Q,error:H,onViewBuildLogs:E,openFile:P,onDebugWithAgent:function(e){return(0,m._)(function(){return(0,x._)(this,function(t){return F&&J((0,R.default)(ed(),null==F?void 0:F.errors.join("\n"),null==F?void 0:F.suggestions.map(function(e){return"".concat(e.description,"\n")}).join("\n")),e),[2]})})()}})}function em(e){var t=e.title,n=e.debugSummary,i=e.debugResult,o=e.provider,s=e.viewingBuildLogs,l=e.viewBuildLogsIcon,u=e.loading,c=e.files,d=e.error,f=e.onViewBuildLogs,p=e.openFile,h=e.onDebugWithAgent;return(0,r.jsxs)(ea.ShadesSurface,{children:[(0,r.jsxs)(ec.View,{css:ep.errorsSection,p:8,gap:4,children:[(0,r.jsxs)(ec.View,{row:!0,gap:12,align:"center",justify:"space-between",children:[(0,r.jsxs)(ec.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(C.default,{color:Z.tokens.accentNegativeStronger}),(0,r.jsx)(el.Text,{css:ep.errorsSectionTitleText,multiline:!1,children:t})]}),(0,r.jsx)(ec.View,{row:!0,gap:0,children:"function"==typeof f?(0,r.jsx)(ec.View,{children:(0,r.jsxs)("button",{css:ep.textButton,onClick:f,children:[s?"Hide":"View"," logs"," ",(0,r.jsx)(ex,{viewingBuildLogs:s,viewBuildLogsIcon:l})]})}):null})]}),(0,r.jsxs)(el.Text,{children:[u?(0,r.jsxs)(ec.View,{row:!0,gap:4,align:"center",children:[(0,r.jsx)(M.default,{}),(0,r.jsx)(el.Text,{children:"Analyzing error, generating suggestions"})]}):(0,r.jsx)(r.Fragment,{children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(el.Text,{children:"Your deployment attempt had the following errors:"}),(0,r.jsx)("ul",{css:ep.errorsList,children:i.errors.map(function(e){return(0,r.jsx)("li",{children:e},e)})})]}):null}),d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(el.Text,{children:["An error occurred while loading AI generated suggestions. Please try deploying again or follow the common debugging steps."," "]}),n.type===a.HostingDebugSummaryType.DeploymentBuildError?(0,r.jsx)(ei,{}):null,n.type===a.HostingDebugSummaryType.DeploymentPromotionError?(0,r.jsx)(er,{provider:o}):null]}):null]})]}),!u&&i?(0,r.jsx)(ec.View,{css:ep.suggestionsSectionAgent,children:(0,r.jsxs)(ec.View,{p:8,gap:8,children:[(0,r.jsx)(eg,{onDebugWithAgent:h}),(0,r.jsx)("ol",{css:ep.aiSuggestionsList,children:i.suggestions.map(function(e,t){return(0,r.jsx)(eb,{suggestion:e,files:c,openFile:p},"".concat(n.id,"-").concat(t))})})]})}):null]})}function eg(e){var t=e.onDebugWithAgent,n=(0,Y.useAgentRunState)()===I.AgentRunState.AGENT_STATE_RUNNING;return(0,r.jsxs)(ec.View,{css:ep.aiSuggestionsTitle,row:!0,gap:8,children:[(0,r.jsx)(P.default,{}),(0,r.jsxs)(el.Text,{multiline:!1,style:{flex:"1 1 auto",color:Z.tokens.blurpleStrongest},children:[A.AGENT_NAME," suggestions"]}),(0,r.jsx)(eu.Tooltip,{tooltip:"".concat(A.AGENT_NAME," is running, please wait until it finishes its current work"),isDisabled:!n,children:(0,r.jsx)(Q.SendAgentMessageButtonGroup,{onSendAgentMessage:t,disabled:n,buttonText:"Debug with ".concat(A.AGENT_NAME),menuPrefix:"Debug",colorway:"blurple"})})]})}function ev(e){var t,n,r,i;return"File"in e&&(null==(t=e.File)?void 0:t.file)!=="null"&&(null==(n=e.File)?void 0:n.file)!==""?(null==(r=e.File)?void 0:r.file.replace("./",""))||void 0:"file"in e&&"null"!==e.file&&""!==e.file&&(null==(i=e.file)?void 0:i.replace("./",""))||void 0}function ex(e){var t=e.viewingBuildLogs,n=e.viewBuildLogsIcon;return n||(t?(0,r.jsx)(O.default,{}):(0,r.jsx)(D.default,{}))}var ey=(0,J.cssRecord)({self:{"[data-accordion-header]":[ee.rcss.align.start,ee.rcss.flex.growAndShrink(1),ee.rcss.rowWithGap(4)]},headerInner:[ee.rcss.flex.growAndShrink(1),ee.rcss.align.baseline,ee.rcss.rowWithGap(4)],description:[ee.rcss.textAlign.left,ee.rcss.color.foregroundDimmer,ee.rcss.rowWithGap(8),ee.rcss.flex.growAndShrink(1),ee.rcss.justify.spaceBetween],interactiveDescription:[ef,ee.rcss.textAlign.left,ee.rcss.color.foregroundDimmer,ee.rcss.rowWithGap(8),ee.rcss.flex.growAndShrink(1),ee.rcss.justify.spaceBetween],body:[ee.rcss.border(),ee.rcss.borderRadius(),ee.rcss.mt(4),ee.rcss.mb(8),ee.rcss.overflow("hidden"),ee.rcss.font.code,ee.rcss.fontSize("small"),{lineHeight:Z.tokens.lineHeightSmall}],before:[ee.rcss.color.accentNegativeStrongest,ee.rcss.colorMixBg(Z.tokens.accentNegativeDimmest,"transparent",.3),ee.rcss.px(6),ee.rcss.py(2)],after:[ee.rcss.color.accentPositiveStrongest,ee.rcss.colorMixBg(Z.tokens.accentPositiveDimmest,"transparent",.3),ee.rcss.px(6)],fileLinkButton:[ef,ee.rcss.fontSize("small"),ee.rcss.cursor.pointer]});function eb(e){var t=e.suggestion,a=e.files,o=e.openFile,s=(0,i.useRef)(ev(t)),l=(0,n._)((0,i.useState)(),2),u=l[0],c=l[1];(0,i.useEffect)(function(){if(s.current&&!u){var e=!0,t=!1,n=void 0;try{for(var r,i=a[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)if(r.value===s.current)return void c(s.current)}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},[a,u]);var d=(null==t?void 0:t.after)&&(null==t?void 0:t.after)!=="",f=(null==t?void 0:t.before)&&(null==t?void 0:t.before)!=="";return d||f?(0,r.jsx)("li",{css:ey.self,children:(0,r.jsx)(eo.AccordionItem,{toggleOn:"chevron",chevron:"none",headerContent:function(e){var n=e.isExpanded,i=e.toggle;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(ec.View,{css:ey.headerInner,children:[(0,r.jsxs)("button",{css:ey.interactiveDescription,onClick:i,children:[(0,r.jsx)(el.Text,{maxLines:n?void 0:1,style:{color:"inherit"},children:t.description})," "]}),u?(0,r.jsx)("button",{css:ey.fileLinkButton,onClick:function(e){e.stopPropagation(),o({path:u})},children:(0,r.jsxs)(ec.View,{row:!0,gap:4,align:"center",css:ee.rcss.cursor.pointer,children:[u,(0,r.jsx)(N.default,{size:12})]})}):null]}),(0,r.jsx)(es.IconButton,{alt:"Show suggestion",onClick:i,children:n?(0,r.jsx)(O.default,{}):(0,r.jsx)(D.default,{})})]})},headerProps:{"data-accordion-header":""},children:(0,r.jsxs)(ec.View,{css:ey.body,children:[f?(0,r.jsx)(ec.View,{css:ey.before,children:(0,r.jsx)("pre",{children:t.before})}):null,d?(0,r.jsx)(ec.View,{css:ey.after,children:(0,r.jsx)("pre",{children:t.after})}):null]})})}):(0,r.jsx)("li",{css:ey.self,children:(0,r.jsxs)(ec.View,{css:ey.headerInner,children:[(0,r.jsxs)(ec.View,{css:ey.description,children:[(0,r.jsx)(el.Text,{style:{color:"inherit"},children:t.description})," "]}),u?(0,r.jsx)("button",{css:ey.fileLinkButton,onClick:function(e){e.stopPropagation(),o({path:u})},children:(0,r.jsxs)(ec.View,{row:!0,gap:4,align:"center",children:[u,(0,r.jsx)(N.default,{size:12})]})}):null]})})}function ew(e){var t=e.currentStatus,n=e.provider,i=e.logs,s=e.viewBuildLogs,l=e.debugSummary,u=e.openFile,d=e.openPane,f=e.onViewBuildLogs,p=e.onViewApplicationLogs;if((0,o.useDeploymentDeployability)().hasDebugSummariesAuthorization&&l){var h=t===a.HostingBuildStatus.Building?"Build failed":"Promotion failed";return(0,r.jsx)(eh,{title:h,debugSummary:l,view:c.Views.DeploymentInProgress,provider:n,openFile:u,openPane:d})}return t===a.HostingBuildStatus.Building?(0,r.jsx)(eE,{provider:n,logs:i,openFile:u,viewBuildLogs:s,onViewBuildLogs:f}):t===a.HostingBuildStatus.Promoting?(0,r.jsx)(eT,{provider:n,logs:i,openFile:u,viewBuildLogs:s,onViewBuildLogs:f,onViewApplicationLogs:p}):null}function e_(e){var t=e.currentStatus,n=e.provider,i=e.debugSummary,s=e.openFile,l=e.openPane,u=e.onViewApplicationLogs;return(0,o.useDeploymentDeployability)().hasDebugSummariesAuthorization&&i?(0,r.jsx)(eh,{title:"Publishing failed",debugSummary:i,view:"deploy_history_logs",provider:n,openFile:s,openPane:l}):t===a.HostingBuildStatus.Building?(0,r.jsx)(eE,{provider:n,openFile:s}):t===a.HostingBuildStatus.Promoting?(0,r.jsx)(eT,{provider:n,openFile:s,onViewApplicationLogs:u}):null}var ek=(0,J.cssRecord)({self:[ee.rcss.borderRadius(4),ee.rcss.overflow("hidden"),ee.rcss.border({color:Z.tokens.outlineDimmer}),ee.rcss.mb(6)]});function eS(e){var t=e.title,n=e.debugSummary,i=e.provider,a=e.openFile,o=e.openPane,s=e.onViewBuildLogs;return(0,r.jsx)(ec.View,{css:ek.self,children:(0,r.jsx)(eh,{title:t,debugSummary:n,view:c.Views.Deployment,provider:i,onViewBuildLogs:s,viewBuildLogsIcon:(0,r.jsx)(S.default,{}),openFile:a,openPane:o})})}var eC=(0,J.cssRecord)({xtermContainer:[ee.rcss.display.flex,ee.rcss.pt(12),ee.rcss.pl(16),ee.rcss.overflow("hidden"),ee.rcss.borderRadius(4,4,0,0)],xterm:[ee.rcss.width("100%"),ee.rcss.maxWidth("100%"),ee.rcss.height(200)],xtermButton:ee.rcss.borderRadius(0,0,4,4)});function ej(e){var t=e.title,a=e.description,s=e.logs,l=e.viewBuildLogs,u=e.onViewBuildLogs,c=e.openFile,d=(0,T.useTerminalTheme)(),f=(0,o.useFsService)(),p=(0,n._)((0,j.default)({openFile:c,listFiles:f.listFiles}),2),h=p[0],m=p[1],g=(0,i.useRef)(s?s.slice(-5):[]);return(0,i.useEffect)(function(){g.current.length&&g.current.forEach(function(e){null==h||h.write(e)})},[h]),(0,r.jsxs)(ea.ShadesSurface,{p:12,gap:12,children:[(0,r.jsxs)(ec.View,{gap:8,children:[(0,r.jsxs)(ec.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(C.default,{color:Z.tokens.accentNegativeStronger}),(0,r.jsx)(el.Text,{multiline:!1,children:t})]}),(0,r.jsx)(el.Text,{children:a})]}),void 0===l||l?null:(0,r.jsxs)(ec.View,{children:[(0,r.jsx)(ec.View,{css:eC.xtermContainer,style:{backgroundColor:null==d?void 0:d.background},children:(0,r.jsx)(ec.SpecializedView.div,{css:eC.xterm,ref:m})}),(0,r.jsx)(et.Button,{text:"View all",iconLeft:(0,r.jsx)(k.default,{}),onClick:function(){return null==u?void 0:u()},css:eC.xtermButton})]})]})}function eT(e){return(0,r.jsx)(ej,(0,_._)({title:"Your app failed to promote",description:(0,r.jsx)(er,{provider:e.provider,onViewApplicationLogs:e.onViewApplicationLogs})},e))}function eE(e){return(0,r.jsx)(ej,(0,_._)({title:"Your app failed to build",description:(0,r.jsx)(ei,{})},e))}function eR(e){return(0,r.jsx)(ej,(0,_._)({title:"This build's publish logs have expired",description:(0,r.jsx)(r.Fragment,{children:"No information was found for this build. Publish logs expire after 30 days."})},e))}var eI=e.i(182492),eA=e.i(358637),eP=e.i(721281),eD=e.i(183035),eO=e.i(429662),eN=e.i(961970),eM=e.i(6338),eL=e.i(624782),eB=function(e){var t=e.stage,n=e.activeStage,i=e.erroredStage,a=e.pausedStage;return t===i?(0,r.jsx)(C.default,{alt:"error"}):t<n?(0,r.jsx)(eD.default,{alt:"success"}):t===a?(0,r.jsx)(eN.default,{alt:"paused"}):t===n?(0,r.jsx)(M.default,{alt:"current"}):(0,r.jsx)(eO.default,{alt:"waiting"})},eV=function(e){var t=e.stage,n=e.activeStage,r=e.erroredStage,i=e.pausedStage;return void 0===n?null:t===r?"negative":t<n?"positive":t===i?"orange":t===n?"primary":null},eF=function(e){var t,n=e.stage,a=e.totalStagesWithTitle,o=e.activeStage,s=e.text,l=e.erroredStage,u=e.pausedStage,c=void 0!==o;return(0,r.jsx)(i.Fragment,{children:(0,r.jsx)(eL.Pill,{text:s,colorway:null!=(t=eV({stage:n,activeStage:o,erroredStage:l,pausedStage:u}))?t:void 0,variant:"filled",css:[c&&o<n&&!l?eM.loadingStyle.foregroundPulse():{},ee.rcss.border({color:Z.tokens.backgroundHigher}),ee.rcss.overflow("hidden"),(0,eP._)({position:"relative",flex:1,height:26,zIndex:a-n,":first-of-type":{paddingLeft:6,paddingRight:6},":not(:first-of-type)":{paddingLeft:24},":not(:last-of-type)":{marginRight:-24}," span":ee.rcss.display.none},ee.container.min(400),{" span":ee.rcss.display.flex,":first-of-type":{paddingLeft:16,paddingRight:0}})],iconRight:c?(0,r.jsx)(eB,{stage:n,activeStage:o,erroredStage:l,pausedStage:u}):void 0})},c&&o<=n&&!l?1:0)},eU=[{id:0,title:"Provision",statusType:a.HostingBuildStatus.Pending},{id:1,title:"Security Scan",statusType:a.HostingBuildStatus.SecurityScanning},{id:2,title:"Build",statusType:a.HostingBuildStatus.Building},{id:3,title:"Bundle",statusType:a.HostingBuildStatus.Running},{id:4,title:"Promote",statusType:a.HostingBuildStatus.Promoting},{id:5,statusType:a.HostingBuildStatus.Success}],eG=eU.filter(function(e){return"title"in e}),e$=function(e,t){return e.find(function(e){return e.statusType===t})},eH=(0,J.cssRecord)({base:{borderRadius:Z.tokens.borderRadiusDefault,paddingLeft:6,paddingRight:6,height:24}}),ez=(0,J.cssRecord)({header:[ee.rcss.width("100%")],headerLeft:[ee.rcss.align.baseline,ee.rcss.flex.shrink(1)],started:[ee.rcss.rowWithGap(6),ee.rcss.flex.growAndShrink(1),ee.rcss.justify.end,ee.rcss.color.foregroundDimmest],cancel:[eH.base,{'&[data-cancelable="true"]':{opacity:1,width:"auto"},'&[data-cancelable="false"]':{opacity:0,width:0}}],stages:[{zIndex:0}],textButton:[ee.rcss.cursor.pointer,ee.rcss.reset.button,ee.rcss.color.foregroundDimmest,ee.rcss.focusRing,ee.rcss.hover(ee.rcss.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}]});function eW(e){var t,n=e.onCancel,i=e.isCanceling,o=e.provider,s=(0,K.default)(),l="azure_container_app"===o||"azure_vm"===o,u=o&&!l,c=(0,eA.useHostingDeploymentSettingsAuthzQuery)({variables:{replId:s,provider:null!=o?o:a.HostingBuildProvider.CloudRun},skip:!u}).data,d=(null==c?void 0:c.getRepl.__typename)==="Repl"?c.getRepl.authorizations.editDeploymentStatus:void 0,f=null!=(t=null==d?void 0:d.isAuthorized)&&t;return u?(0,r.jsx)(eu.Tooltip,{isDisabled:f,tooltip:null==d?void 0:d.message,children:(0,r.jsx)(et.Button,{size:"small",text:"Cancel",css:ez.cancel,onClick:n,iconRight:i?(0,r.jsx)(M.default,{}):void 0,disabled:i||!f,"data-cancelable":n?"true":"false"})}):null}var eq=function(e){var t,n,i=e.buildToDisplay,a=null==i?void 0:i.provider,o=null==i?void 0:i.timeCreated,s=null!=(n=null==i||null==(t=i.user)?void 0:t.displayName)?n:b.DELETED_USER_DISPLAY_NAME;return(0,r.jsxs)(ec.View,{p:16,pt:12,gap:12,children:[(0,r.jsxs)(ec.View,{css:ez.header,row:!0,gap:8,justify:"space-between",children:[(0,r.jsxs)(ec.View,{css:ez.headerLeft,row:!0,gap:8,children:[(0,r.jsx)(el.Text,{variant:"subheadDefault",multiline:!1,children:"Publishing"}),o&&i?(0,r.jsxs)(el.Text,{css:ez.started,multiline:!1,maxLines:1,children:["Started ".concat((0,eI.formatDistance)(new Date(o),Date.now(),{addSuffix:!0})," by "),(0,r.jsx)("span",{children:s})]}):null,e.onCancel?(0,r.jsx)(eW,{onCancel:e.onCancel,isCanceling:e.isCanceling,provider:a}):null]}),(0,r.jsx)(ec.View,{row:!0,gap:6,justify:"end",children:e.onViewBuildLogs?(0,r.jsxs)("button",{css:ez.textButton,onClick:e.onViewBuildLogs,children:[e.viewBuildLogs?"Hide":"View"," logs"," ",e.viewBuildLogs?(0,r.jsx)(O.default,{}):(0,r.jsx)(D.default,{})]}):null})]}),(0,r.jsx)(ea.ShadesSurface,{css:ez.stages,grow:!0,row:!0,children:eG.map(function(t){var n=t.id,i=t.title;return(0,r.jsx)(eF,{stage:n,totalStagesWithTitle:eG.length,text:i,activeStage:e.activeStage,pausedStage:e.pausedStage,erroredStage:e.erroredStage},n)})})]})},eK=e.i(257982),eY=e.i(265957),eQ=e.i(409146),eX=e.i(712771),eZ=e.i(302905),eJ=e.i(416746),e0=e.i(844941),e1=e.i(822142),e2=e.i(509128),e3=e.i(357253),e5=e.i(182409);function e4(e){var t,n=e.onCreatePreviewDeploy,i=e.preview;if(!n)return null;var a="Create preview deploy",o=(0,r.jsx)(eX.default,{}),s=!1,l="grey",u=!1;switch(null==i?void 0:i.status){case eY.PrepareDatabasePreviewDeployStatus.Building:a="Building...",o=(0,r.jsx)(M.default,{}),s=!0;break;case eY.PrepareDatabasePreviewDeployStatus.Ready:(null==i?void 0:i.url)?(a="View preview",o=(0,r.jsx)(N.default,{}),l="positive",t=i.url):(a="Something went wrong",o=(0,r.jsx)(C.default,{}),l="negative",u=!0);break;case eY.PrepareDatabasePreviewDeployStatus.Failed:a="Preview failed",o=(0,r.jsx)(C.default,{}),l="negative",u=!0}return(0,r.jsx)(et.Button,{text:a,iconRight:o,colorway:l,size:"small",onClick:function(){t?window.open(t,"_blank","noopener"):null==n||n()},loading:s,disabled:u})}function e8(e){var t=e.onClick,n=e.loading;return t?(0,r.jsx)(et.Button,{text:"Approve and publish",iconRight:(0,r.jsx)(e5.default,{}),colorway:"primary",size:"small",onClick:t,loading:n}):null}function e6(e){var t=e.open,n=e.onClick;return(0,r.jsx)(es.IconButton,{alt:t?"Hide details":"Show details",onClick:n,children:t?(0,r.jsx)(O.default,{}):(0,r.jsx)(D.default,{})})}function e7(e){var t=e.state,n=e.canExpand,i=e.expandedToggle,a=e.setExpandedToggle,o=e.onApproveAndDeploy,s=e.onCreatePreviewDeploy,l=t.type===eY.PrepareDatabaseStageType.GeneratingDiffStatements&&"completed"===t.status&&(t.maybeNonBackwardsCompatible||t.infoToPrint.length>0);return(0,r.jsxs)(ec.View,{row:!0,grow:!0,align:"center",justify:"end",gap:8,children:[l?(0,r.jsx)(C.default,{color:"orange"}):null,t.type===eY.PrepareDatabaseStageType.ValidatingDiffStatements&&"completed"===t.status?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e4,{onCreatePreviewDeploy:function(){return null==s?void 0:s(t.previewId)},preview:t.preview}),(0,r.jsx)(e8,{onClick:o,loading:t.approved})]}):null,n?(0,r.jsx)(e6,{open:i,onClick:function(){return a(!i)}}):null]})}var e9=e.i(704726);function te(e){var t=e.infoToPrint.toLowerCase();return t.includes("materialized view")?(0,r.jsx)(eX.default,{size:16}):t.includes("primary key")?(0,r.jsx)(e0.default,{size:16}):t.includes("schema")?(0,r.jsx)(eZ.default,{size:16}):t.includes("column")?(0,r.jsx)(S.default,{size:16}):t.includes("table")?(0,r.jsx)(e1.default,{size:16}):(0,r.jsx)(C.default,{size:16})}function tt(e){var t=e.infoToPrint,n=t.startsWith(" ")?t.substring(2):t;return(0,r.jsxs)(ec.View,{row:!0,gap:8,align:"center",shrink:!0,children:[(0,r.jsx)(te,{infoToPrint:t}),(0,r.jsx)(el.Text,{shrink:!0,variant:"small",children:n})]})}function tn(e){var t=e.infoToPrint,n=t.length>0;return(0,r.jsx)(ec.View,{clsx:[e9.default.stageCodeHeader,n&&e9.default.warning],row:!0,align:"center",children:t.length>0?(0,r.jsxs)(ec.View,{gap:6,shrink:!0,children:[(0,r.jsxs)(el.Text,{variant:"small",color:"default",children:["Warning, this migration may permanently remove some data from your production database,"," ",(0,r.jsx)("a",{target:"_blank",href:"https://docs.replit.com/cloud-services/storage-and-databases/production-databases#understanding-database-changes-and-deployments",clsx:e9.default.learnMoreLink,children:"learn more"}),":"]}),(0,r.jsx)(ec.View,{px:8,gap:6,children:t.map(function(e,t){return(0,r.jsx)(tt,{infoToPrint:e},t)})})]}):(0,r.jsxs)(el.Text,{variant:"small",color:"default",children:["Migrations are generated based on changes made by the agent in your app,"," ",(0,r.jsx)("a",{target:"_blank",href:"https://docs.replit.com/cloud-services/storage-and-databases/production-databases#understanding-database-changes-and-deployments",clsx:e9.default.learnMoreLink,children:"learn more."})]})})}function tr(){var e=(0,n._)((0,i.useState)(!1),2),t=e[0],a=e[1];return(0,r.jsxs)(ec.View,{clsx:e9.default.footerMessage,p:8,children:[(0,r.jsxs)(ec.View,{clsx:[e9.default.footerMessageHeader,t&&e9.default.isExpanded],row:!0,gap:8,align:"center",justify:"space-between",children:[(0,r.jsx)(eJ.default,{}),(0,r.jsx)(el.Text,{variant:"small",shrink:!0,children:"You may notice a temporary downtime of your deployment. What's happening?"}),(0,r.jsx)(ec.View,{row:!0,grow:!0,align:"center",justify:"end",children:(0,r.jsx)(e6,{open:t,onClick:function(){return a(!t)}})})]}),t?(0,r.jsxs)(ec.View,{px:8,gap:6,children:[(0,r.jsxs)(ec.View,{row:!0,gap:8,align:"center",shrink:!0,children:[(0,r.jsx)(e2.default,{}),(0,r.jsx)(el.Text,{shrink:!0,variant:"small",children:"Database changes sometimes require stopping your app temporarily to avoid conflicts during the update process"})]}),(0,r.jsxs)(ec.View,{row:!0,gap:8,align:"center",shrink:!0,children:[(0,r.jsx)(e3.default,{}),(0,r.jsx)(el.Text,{shrink:!0,variant:"small",children:"This prevents data loss or corruption that could happen if users were still using the app during the change"})]})]}):null]})}function ti(e){var t=e.infoToPrint,n=e.statementsToExecute,i=e.maybeNonBackwardsCompatible;return(0,r.jsxs)(ec.View,{gap:8,children:[(0,r.jsxs)(ec.View,{clsx:e9.default.stageCode,gap:4,children:[(0,r.jsx)(tn,{infoToPrint:t}),(0,r.jsx)(ec.View,{p:8,children:(0,r.jsx)(eQ.default,{code:n.join("\n"),fontSize:12,lineNumbers:!0})})]}),i?(0,r.jsx)(tr,{}):null]})}var ta=e.i(40916),to=e.i(541792),ts=e.i(546284),tl=e.i(818503),tu=e.i(734882),tc=e.i(31200);function td(e){var t=e.conflictPrompt;if("selectPrompt"===t.$kind){var n=t.result.entity,i=n.name,a=n.count,o=n.tableName;return"createUniqueConstraint"===t.result.entity.type?(0,r.jsxs)(r.Fragment,{children:["You're about to add"," ",(0,r.jsx)("span",{clsx:tc.default.conflictPromptOptionHighlight,children:i})," unique constraint to the"," ",(0,r.jsx)("span",{clsx:tc.default.conflictPromptOptionHighlight,children:o})," ","table, which contains"," ",(0,r.jsx)("span",{clsx:tc.default.conflictPromptOptionHighlight,children:a})," ",(0,ts.default)("item",a),". If this statement fails due to any existing data not matching the new constraint, you will receive an error from the database. Do you want to delete all data from"," ",(0,r.jsx)("span",{clsx:tc.default.conflictPromptOptionHighlight,children:o})," ","table first?"]}):null}return(0,r.jsxs)(r.Fragment,{children:["Is"," ",(0,r.jsx)("span",{clsx:tc.default.conflictPromptOptionHighlight,children:function(e){switch(e.$kind){case"columnConflictPrompt":return e.result.column.name;case"namedConflictPrompt":return e.result.item.name;case"namedWithSchemaConflictPrompt":var t=e.result.item;return"public"!==t.schema&&t.schema?"".concat(t.schema,".").concat(t.name):t.name;case"schemaConflictPrompt":return e.result.schema.name;default:return""}}(t)})," ",function(e){switch(e.$kind){case"columnConflictPrompt":return"column in ".concat(e.result.tableName," table created or renamed from another column?");case"namedConflictPrompt":case"namedWithSchemaConflictPrompt":return"".concat(e.result.entity," created or renamed from another ").concat(e.result.entity,"?");case"schemaConflictPrompt":return"schema created or renamed from another schema?";default:return""}}(t)]})}function tf(e){var t=e.label,n=e.$kind,i=e.isRename,a=e.entityType;return"selectPrompt"===n?(0,r.jsx)(el.Text,{multiline:!0,shrink:!0,children:function(e,t){if("createUniqueConstraint"===t)switch(e){case"no":return"No, add the constraint without deleting data";case"yes":return"Yes, delete all data from the table"}return e}(t,a)}):(0,r.jsxs)(r.Fragment,{children:[i?(0,r.jsx)(to.default,{}):(0,r.jsx)(ta.default,{}),(0,r.jsx)(el.Text,{multiline:!0,shrink:!0,children:t})]})}function tp(e){var t=e.conflictPrompt,a=e.onSelectConflictPromptOption,o=(0,n._)((0,i.useState)(t.result.options[0]),2),s=o[0],l=o[1],u=(0,n._)((0,i.useState)(!1),2),c=u[0],d=u[1];(0,i.useEffect)(function(){var e=t.result.options;0!==e.length&&(e.find(function(e){return e.id===(null==s?void 0:s.id)})||(l(e[0]),d(!1)))},[t.result.options,null==s?void 0:s.id]);var f=(0,i.useCallback)(function(){return(0,m._)(function(){return(0,x._)(this,function(e){return s&&a&&(d(!0),a({$kind:t.$kind,selectedId:s.id})),[2]})})()},[s,a,t.$kind]);return(0,r.jsxs)(ec.View,{gap:12,children:[(0,r.jsx)(el.Text,{color:"dimmer",children:(0,r.jsx)(td,{conflictPrompt:t})}),(0,r.jsx)(tu.RadioGroup,{name:"conflictPrompt",value:s.id,onChange:function(e){var n=e.target.value,r=t.result.options.find(function(e){return e.id===n});r&&l(r)},children:(0,r.jsx)(ec.View,{row:!0,gap:8,align:"stretch",wrap:!0,children:t.result.options.map(function(e){return(0,r.jsxs)(ec.View,{row:!0,align:"start",clsx:tc.default.conflictPromptOption,children:[(0,r.jsx)(tu.Radio,{id:e.id,value:e.id}),(0,r.jsx)(tl.Label,{htmlFor:e.id,clsx:tc.default.conflictPromptOptionLabel,children:(0,r.jsx)(ec.View,{row:!0,gap:4,align:"start",children:(0,r.jsx)(tf,{$kind:t.$kind,entityType:"selectPrompt"===t.$kind?t.result.entity.type:void 0,isRename:"isRename"in e?e.isRename:void 0,label:e.label})})})]},e.id)})})}),(0,r.jsx)(et.Button,{text:"Submit",colorway:"primary",size:"small",onClick:f,loading:c,disabled:c||0===t.result.options.length})]})}var th=e.i(257391);function tm(e){var t=e.text,a=e.items,o=e.collapsible,s=void 0!==o&&o,l=(0,n._)((0,i.useState)(!s),2),u=l[0],c=l[1];return(0,r.jsxs)(ec.View,{clsx:th.default.message,p:8,children:[(0,r.jsxs)(ec.View,{clsx:[th.default.messageHeader,u&&th.default.isExpanded],row:!0,gap:8,align:"center",justify:"space-between",children:[(0,r.jsx)(eJ.default,{}),(0,r.jsx)(el.Text,{variant:"small",shrink:!0,children:t}),(0,r.jsx)(ec.View,{row:!0,grow:!0,align:"center",justify:"end",children:s?(0,r.jsx)(e6,{open:u,onClick:function(){return c(!u)}}):null})]}),u?(0,r.jsx)(ec.View,{px:8,gap:6,children:a.map(function(e,t){return(0,r.jsxs)(ec.View,{row:!0,gap:8,align:"center",shrink:!0,children:[e.icon?e.icon:(0,r.jsx)(eD.default,{}),(0,r.jsx)(el.Text,{shrink:!0,variant:"small",children:e.text})]},t)})}):null]})}function tg(){return(0,r.jsx)(ec.View,{gap:8,children:(0,r.jsx)(tm,{text:"How do I test my deployment database?",items:[{text:"Create a deployment preview environment and test your app's functionality with the database changes applied"},{text:"Check that your app still works properly and displays data correctly after the changes"}]})})}var tv=e.i(779213);function tx(e){var t,a=e.statementError,o=e.onOverwriteDataAndDeploy,s=e.onCancel,l=[{id:"overwrite",text:"Copy your development database schema & data to production."},{id:"cancel",text:"Cancel deployment and retry once your schema conflicts are resolved."}],u=(0,n._)((0,i.useState)(l[1]),2),c=u[0],d=u[1],f=(0,n._)((0,i.useState)(!1),2),p=f[0],h=f[1],g=(0,i.useCallback)(function(){return(0,m._)(function(){return(0,x._)(this,function(e){if(!c)return[2];switch(h(!0),c.id){case"cancel":null==s||s();break;case"overwrite":null==o||o()}return[2]})})()},[o,s,c]);return(0,r.jsxs)(ec.View,{gap:8,children:[(0,r.jsxs)(ec.View,{gap:8,children:[(0,r.jsxs)(el.Text,{color:"dimmer",variant:"small",children:["Your database schema changes conflict with existing production data and could not be applied,"," ",(0,r.jsx)("a",{target:"_blank",href:"https://docs.replit.com/cloud-services/storage-and-databases/production-databases#understanding-database-changes-and-deployments",clsx:tv.default.learnMoreLink,children:"learn more."})," ","To resolve this, you can:"]}),(0,r.jsx)(tu.RadioGroup,{name:"validatingDiffStatementConflictOptions",value:null!=(t=null==c?void 0:c.id)?t:"",onChange:function(e){var t=e.target.value,n=l.find(function(e){return e.id===t});n&&d(n)},children:(0,r.jsx)(ec.View,{row:!0,gap:8,align:"stretch",wrap:!0,children:l.map(function(e){return(0,r.jsxs)(ec.View,{row:!0,align:"start",clsx:tv.default.option,children:[(0,r.jsx)(tu.Radio,{id:e.id,value:e.id}),(0,r.jsx)(tl.Label,{htmlFor:e.id,clsx:tv.default.optionLabel,children:(0,r.jsx)(ec.View,{row:!0,gap:4,align:"start",children:(0,r.jsx)(el.Text,{multiline:!0,shrink:!0,variant:"small",children:e.text})})})]},e.id)})})}),(null==c?void 0:c.id)==="overwrite"?(0,r.jsx)(tm,{text:"What does copying your development schema & data to production actually do?",items:[{text:"Replaces your production database with your development database, overwriting any existing production data."},{text:"Useful during early development when iterating on database schema changes with no sensitive production data."},{text:(0,r.jsxs)(r.Fragment,{children:["This action cannot be undone, but you can always restore your database,"," ",(0,r.jsx)("a",{href:"https://docs.replit.com/cloud-services/storage-and-databases/sql-database#restore-tool",target:"_blank",children:"learn more."})]})}]}):null,(0,r.jsx)(et.Button,{text:(null==c?void 0:c.id)==="overwrite"?"Copy development database and deploy":"Cancel deployment",colorway:"primary",size:"small",onClick:g,loading:p,disabled:p})]}),(0,r.jsx)(ec.View,{clsx:tv.default.stageCode,gap:4,children:(0,r.jsx)(ec.View,{p:8,children:(0,r.jsx)(eQ.default,{code:a,fontSize:12,lineNumbers:!0})})})]})}var ty=e.i(396776);function tb(e){var t=e.state,n=e.onSelectConflictPromptOption,i=e.onOverwriteDataAndDeploy,a=e.onCancel;switch(t.type){case eY.PrepareDatabaseStageType.FoundDiff:break;case eY.PrepareDatabaseStageType.GeneratingDiffStatements:switch(t.status){case"paused":var o=t.conflictPrompt;return(0,r.jsx)(tp,{conflictPrompt:o,onSelectConflictPromptOption:n});case"completed":var s=t.infoToPrint,l=t.maybeNonBackwardsCompatible,u=t.statementsToExecute;return(0,r.jsx)(ti,{infoToPrint:s,statementsToExecute:u,maybeNonBackwardsCompatible:l});default:return null}case eY.PrepareDatabaseStageType.ValidatingDiffStatements:switch(t.status){case"paused":var c=t.statementError;return(0,r.jsx)(tx,{statementError:c,onOverwriteDataAndDeploy:i,onCancel:a});case"completed":return(0,r.jsx)(tg,{});default:return null}}}function tw(e){var t=e.state,n=e.onSelectConflictPromptOption,i=e.onOverwriteDataAndDeploy,a=e.onCancel;return(0,r.jsxs)(r.Fragment,{children:[t.errorMessage?(0,r.jsx)(ec.View,{pb:6,children:(0,r.jsx)(ty.StatusBanner,{text:t.errorMessage,colorway:"warning",icon:(0,r.jsx)(C.default,{})})}):null,(0,r.jsx)(tb,{state:t,onSelectConflictPromptOption:n,onOverwriteDataAndDeploy:i,onCancel:a})]})}var t_=e.i(64386),tk=e.i(116235);function tS(e){return(0,r.jsx)(tk.default,(0,t_._)((0,_._)({},e),{children:(0,r.jsx)("path",{d:"M9 2.25c.966 0 1.75.784 1.75 1.75v16A1.75 1.75 0 0 1 9 21.75H6A1.75 1.75 0 0 1 4.25 20V4c0-.966.784-1.75 1.75-1.75h3ZM18 2.25c.966 0 1.75.784 1.75 1.75v16A1.75 1.75 0 0 1 18 21.75h-3A1.75 1.75 0 0 1 13.25 20V4c0-.966.784-1.75 1.75-1.75h3Z"})}))}var tC=e.i(585225),tj=e.i(253711);function tT(e){var t=e.status,n="",i="",a=null,o=(0,tC.useIsShadesSupported)();switch(t){case"completed":n=Z.tokens.accentPositiveDimmest,i=o?Z.tokens.white:Z.tokens.accentPositiveStrongest,a=(0,r.jsx)(eD.default,{});break;case"running":n=Z.tokens.accentPrimaryDimmest,i=o?Z.tokens.white:Z.tokens.accentPrimaryStrongest,a=(0,r.jsx)(M.default,{});break;case"paused":n=Z.tokens.orangeDimmest,i=Z.tokens.orangeStrongest,a=(0,r.jsx)(tS,{});break;case"failed":n=Z.tokens.accentNegativeDimmest,i=o?Z.tokens.white:Z.tokens.accentNegativeStrongest,a=(0,r.jsx)(C.default,{})}return(0,r.jsx)("div",{clsx:tj.default.stageIcon,style:{background:n,color:i},children:a})}var tE=e.i(859158);function tR(e){var t,a=e.state,o=e.focusedStage,s=e.onApproveAndDeploy,l=e.onCreatePreviewDeploy,u=e.onSelectConflictPromptOption,c=e.onOverwriteDataAndDeploy,d=e.onCancel,f=(a.type===eY.PrepareDatabaseStageType.GeneratingDiffStatements||a.type===eY.PrepareDatabaseStageType.ValidatingDiffStatements)&&o===a.type,p=(0,n._)((0,i.useState)(f),2),h=p[0],m=p[1];(0,i.useEffect)(function(){m(f)},[f]);var g=(a.type===eY.PrepareDatabaseStageType.GeneratingDiffStatements||a.type===eY.PrepareDatabaseStageType.ValidatingDiffStatements)&&"running"!==a.status,x=g&&h,y="completed"===a.status;return(0,r.jsxs)(ea.ShadesSurface,{clsx:tE.default.stage,p:8,children:[(0,r.jsxs)(ec.View,{clsx:(t={},(0,eP._)(t,tE.default.stageHeader,x),(0,eP._)(t,tE.default.isExpanded,!y||x),t),row:!0,gap:8,align:"center",justify:"space-between",wrap:!y,shrink:!0,children:[(0,r.jsxs)(ec.View,{row:!0,gap:8,align:"center",shrink:!0,children:[(0,r.jsx)(tT,{status:a.status}),(0,r.jsx)(el.Text,{color:y?"dimmer":"default",shrink:!0,children:function(e){var t=e.type,n=e.status;switch(t){case eY.PrepareDatabaseStageType.FoundDiff:return"Development database changes detected";case eY.PrepareDatabaseStageType.GeneratingDiffStatements:switch(n){case eY.PrepareDatabaseBaseStageStateStatus.Running:return"Generating database migrations...";case eY.PrepareDatabaseBaseStageStateStatus.Completed:return"Generated migrations to apply to production database";case eY.PrepareDatabaseBaseStageStateStatus.Paused:return"Detected potential conflicts, please review";case eY.PrepareDatabaseBaseStageStateStatus.Failed:return"Failed to generate database migrations";default:return(0,eK.default)(n)}case eY.PrepareDatabaseStageType.ValidatingDiffStatements:switch(n){case eY.PrepareDatabaseBaseStageStateStatus.Running:return"Validating database migrations...";case eY.PrepareDatabaseBaseStageStateStatus.Completed:return"Database migrations validated successfully";case eY.PrepareDatabaseBaseStageStateStatus.Paused:return"Migrations failed validation, please review";case eY.PrepareDatabaseBaseStageStateStatus.Failed:return"Failed to validate database migrations";default:return(0,eK.default)(n)}default:return(0,eK.default)(t)}}({type:a.type,status:a.status})})]}),(0,r.jsx)(e7,{state:a,canExpand:g,expandedToggle:h,onApproveAndDeploy:s,onCreatePreviewDeploy:l,setExpandedToggle:m})]}),x?(0,r.jsx)(tw,{state:a,onSelectConflictPromptOption:u,onOverwriteDataAndDeploy:c,onCancel:d}):null]})}var tI=e.i(394212),tA=e.i(262664),tP=e.i(424746),tD=e.i(442121),tO=e.i(973245),tN=e.i(951262);function tM(){var e=(0,E._)(["\n  mutation ValidateDiffStatementsAndPreparePreviewDeploy(\n    $input: CreateHostingPreviewDeployInput!\n  ) {\n    createHostingPreviewDeploy(input: $input) {\n      ... on CreateHostingPreviewDeployResult {\n        preview {\n          id\n          url\n          expiresAt\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return tM=function(){return e},e}function tL(){var e=(0,E._)(["\n  mutation ContinueHostingPreviewDeploy(\n    $input: ContinueHostingPreviewDeployInput!\n  ) {\n    continueHostingPreviewDeploy(input: $input) {\n      ... on ContinueHostingPreviewDeployResult {\n        success\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return tL=function(){return e},e}var tB={},tV=(0,tO.gql)(tM()),tF=(0,tO.gql)(tL()),tU=e.i(613007),tG=e.i(729678),t$=e.i(299798),tH=e.i(988676),tz=(0,J.cssRecord)({self:[ee.rcss.borderRadius(0,0,4,4),ee.rcss.overflow("hidden")],text:[ee.rcss.display.flex,ee.rcss.py(12),ee.rcss.px(16)],bottom:[ee.rcss.borderRadius(0,0,4,4),ee.rcss.overflow("hidden")]});function tW(e){var t,a,u,c,d,f,p,h,y,w,k,S,C,j,T,E,R,I,A,P,D,O,N,M,B,V,F,U,G,$,H,z,W,q,Y,Q=e.buildToDisplay,X=e.activeStage,Z=e.pausedStage,J=e.onCancel,ee=(a=(t=(0,eY.usePrepareDatabaseState)()).state,u=t.dispatch,c=t.getState,d=(0,tA.useHeliumDevelopmentDatabase)().database,f=(0,tP.useNeonDevelopmentDatabase)().database,p=(0,tP.useNeonProductionDatabase)().database,F=(h=(0,K.default)(),y=(0,tD.useApolloClient)(),w=(0,o.useSecretsService)(),k=(0,o.useDeploymentTimeCreated)(),S=(0,o.useDeploymentCurrentBuild)(),C=(0,tG.useGetSecretsAsDeploymentEntries)({secrets:w,replId:h}),j=(0,tP.useNeonProductionDatabase)().database,E=(T=(0,eY.usePrepareDatabaseState)()).state,R=T.dispatch,I=T.getState,P=(0,n._)((A=(0,_._)({},tB,void 0),tN.useMutation(tV,A)),1)[0],O=(0,n._)((D=(0,_._)({},tB,void 0),tN.useMutation(tF,D)),1)[0],M=(N=(0,eY.getStageByType)(E.stages,eY.PrepareDatabaseStageType.ValidatingDiffStatements))&&N.status===eY.PrepareDatabaseBaseStageStateStatus.Running&&N.previewId,B=N&&N.status===eY.PrepareDatabaseBaseStageStateStatus.Completed&&N.previewId&&N.preview&&"building"===N.preview.status,(0,tU.useGetAgentRollbackPreviewStatusSubscription)({variables:{input:{previewID:N&&N.previewId?N.previewId:null}},skip:!M&&!B,onData:function(e){var t=e.data.data;if(null==t?void 0:t.getAgentRollbackPreviewStatus){var n=t.getAgentRollbackPreviewStatus;"RollbackPreviewOutput"===n.__typename?"success"===n.status&&n.host?R({type:"SET_PREVIEW_DEPLOY",preview:{status:eY.PrepareDatabasePreviewDeployStatus.Ready,url:"https://".concat(n.host),expiresAt:new Date(Date.now()+72e5).toISOString()}}):"fail"===n.status?R({type:"STAGE_ERROR",stage:eY.PrepareDatabaseStageType.ValidatingDiffStatements,errorMessage:"Preview build failed"}):"database-ready"===n.status?N&&"running"===N.status&&N.previewId&&R({type:"COMPLETED",stage:eY.PrepareDatabaseStageType.ValidatingDiffStatements}):"migration-error"===n.status?R({type:"MIGRATION_VALIDATION_ERROR",statementError:n.errorMessage||"Statement error occurred"}):"pending"===n.status&&R({type:"SET_PREVIEW_DEPLOY",preview:{status:eY.PrepareDatabasePreviewDeployStatus.Building}}):("NotFoundError"===n.__typename||"UnauthorizedError"===n.__typename||"UserError"===n.__typename||"ServiceUnavailable"===n.__typename)&&R({type:"STAGE_ERROR",stage:eY.PrepareDatabaseStageType.ValidatingDiffStatements,errorMessage:n.message||"Failed to build preview"})}},onError:function(){R({type:"STAGE_ERROR",stage:eY.PrepareDatabaseStageType.ValidatingDiffStatements,errorMessage:"Failed to monitor preview status"})}}),V={validateDiffStatements:(0,i.useCallback)(function(e){return(0,m._)(function(){var t,n,r,i,a,s,l,u;return(0,x._)(this,function(c){switch(c.label){case 0:if(t=I().stages,!(n=(0,eY.getStageByType)(t,eY.PrepareDatabaseStageType.GeneratingDiffStatements)))return R({type:"STAGE_ERROR",stage:eY.PrepareDatabaseStageType.ValidatingDiffStatements,errorMessage:"Cannot validate statements without generating diff statements stage"}),[2];if("completed"!==n.status)return R({type:"STAGE_ERROR",stage:eY.PrepareDatabaseStageType.ValidatingDiffStatements,errorMessage:"Cannot validate statements when diff statements stage is not completed"}),[2];if((r=(0,eY.getStageByType)(t,eY.PrepareDatabaseStageType.ValidatingDiffStatements))&&r.previewId)return[2];R({type:"SET_STAGE",stageState:{type:eY.PrepareDatabaseStageType.ValidatingDiffStatements,status:eY.PrepareDatabaseBaseStageStateStatus.Running}}),c.label=1;case 1:return c.trys.push([1,5,,6]),[4,C()];case 2:return i=c.sent(),[4,(0,o.determineIgnoredSecretKeys)({deploymentTimeCreated:k,buildTimeCreated:null==S?void 0:S.timeCreated,ignoreSecretsUntil:b.SYNCING_SECRETS_ROLLOUT_DATE,replId:h,apolloClient:y})];case 3:return a=c.sent(),[4,P({variables:{input:{replId:h,envVars:(0,o.mergeEnvironmentVariables)({currentBuildVars:null==S?void 0:S.envVars,workspaceSecrets:i,ignoredSecretKeys:a})||[],neonProjectId:(null==j?void 0:j.projectId)||void 0,sqlStatementsToExecute:e}}})];case 4:return(null==(s=c.sent().data)?void 0:s.createHostingPreviewDeploy)&&("CreateHostingPreviewDeployResult"===s.createHostingPreviewDeploy.__typename?(l=s.createHostingPreviewDeploy.preview,R({type:"SET_STAGE",stageState:{type:eY.PrepareDatabaseStageType.ValidatingDiffStatements,status:eY.PrepareDatabaseBaseStageStateStatus.Running,previewId:l.id}})):R({type:"STAGE_ERROR",stage:eY.PrepareDatabaseStageType.ValidatingDiffStatements,errorMessage:s.createHostingPreviewDeploy.message||"Failed to create preview"})),[3,6];case 5:return u=c.sent(),R({type:"STAGE_ERROR",stage:eY.PrepareDatabaseStageType.ValidatingDiffStatements,errorMessage:(0,L._)(u,Error)?u.message:"Failed to create preview deploy"}),[3,6];case 6:return[2]}})})()},[h,y,k,S,j,I,C,R,P]),createPreviewDeploy:(0,i.useCallback)(function(e){return(0,m._)(function(){var t,n;return(0,x._)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),R({type:"SET_PREVIEW_DEPLOY",preview:{status:eY.PrepareDatabasePreviewDeployStatus.Building}}),[4,O({variables:{input:{previewId:e}}})];case 1:if((null==(t=r.sent().data)?void 0:t.continueHostingPreviewDeploy)&&"ContinueHostingPreviewDeployResult"!==t.continueHostingPreviewDeploy.__typename)return R({type:"SET_PREVIEW_DEPLOY",preview:{status:eY.PrepareDatabasePreviewDeployStatus.Failed}}),R({type:"STAGE_ERROR",stage:eY.PrepareDatabaseStageType.ValidatingDiffStatements,errorMessage:t.continueHostingPreviewDeploy.message||"Failed to create preview"}),[2];return[3,3];case 2:return n=r.sent(),R({type:"SET_PREVIEW_DEPLOY",preview:{status:eY.PrepareDatabasePreviewDeployStatus.Failed}}),R({type:"STAGE_ERROR",stage:eY.PrepareDatabaseStageType.ValidatingDiffStatements,errorMessage:(0,L._)(n,Error)?n.message:"Failed to create preview deploy"}),[3,3];case 3:return[2]}})})()},[O,R])}).validateDiffStatements,U=V.createPreviewDeploy,G=(0,o.useDeployBuild)().approveAndDeployDatabaseChanges,$=(0,s.useSetDeploymentMode)(),H=(0,i.useRef)(null),z=(0,i.useCallback)(function(e){H.current&&H.current.write(e)},[]),(0,t$.usePid2)(function(e,t){var n=t.signal;return(0,m._)(function(){var t,r,i,a,o,s,l,c,h,m,g;return(0,x._)(this,function(x){switch(x.label){case 0:if(!f&&!d)return[2];if(u({type:"SET_STAGE",stageState:{type:eY.PrepareDatabaseStageType.GeneratingDiffStatements,status:eY.PrepareDatabaseBaseStageStateStatus.Running}}),!(t=d?d.connectionString:null==f?void 0:f.connectionString))throw Error("Development database connection string not found.");i=(r=e.prepareDatabaseMigrations.generateDiffStatements.stream({sourceConnectionString:t,targetConnectionString:null==p?void 0:p.connectionString},{signal:n})).resReadable,H.current=a=r.reqWritable,o=!1,s=!1,x.label=1;case 1:x.trys.push([1,6,7,12]),c=(0,tI._)(i),x.label=2;case 2:return[4,c.next()];case 3:if(!(o=!(h=x.sent()).done))return[3,5];if(!(m=h.value).ok){if("UNEXPECTED_DISCONNECT"===m.payload.code||"CANCEL"===m.payload.code)return[2];throw Error("[".concat(m.payload.code,"] ").concat(m.payload.message))}switch(m.payload.$kind){case"none":u({type:"COMPLETED",stage:eY.PrepareDatabaseStageType.GeneratingDiffStatements});break;case"diff":u((0,t_._)((0,_._)({},m.payload.result),{type:"COMPLETED",stage:eY.PrepareDatabaseStageType.GeneratingDiffStatements})),F(m.payload.result.statementsToExecute);break;case"columnConflictPrompt":case"namedConflictPrompt":case"namedWithSchemaConflictPrompt":case"schemaConflictPrompt":case"selectPrompt":u({type:"CONFLICT_PROMPT",conflictPrompt:m.payload});break;default:(0,eK.default)(m.payload)}x.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return g=x.sent(),s=!0,l=g,[3,12];case 7:if(x.trys.push([7,,10,11]),!(o&&null!=c.return))return[3,9];return[4,c.return()];case 8:x.sent(),x.label=9;case 9:return[3,11];case 10:if(s)throw l;return[7];case 11:return[7];case 12:return a.close(),[2]}})})()},[u,d,f,p,F]),W=(0,i.useCallback)(function(){var e=c(),t=e.id,n=e.stages,r=(0,eY.getStageByType)(n,eY.PrepareDatabaseStageType.GeneratingDiffStatements);if(!r||r.status!==eY.PrepareDatabaseBaseStageStateStatus.Completed)throw Error("Cannot approve and deploy database changes, stage is not completed");var i=r.statementsToExecute;if(!i||0===i.length)throw Error("Could not approve and deploy, no statements to execute");G({prepareDatabaseStateId:t,sqlStatementsToExecute:i})},[G,c]),q=(0,i.useCallback)(function(){return(0,m._)(function(){return(0,x._)(this,function(e){return G({prepareDatabaseStateId:c().id,pushDevelopmentDatabaseObjects:"overwriteData"}),[2]})})()},[G,c]),Y=(0,i.useCallback)(function(){var e;c().id&&(u({type:"CANCEL"}),$(l.DeploymentMode.Ready),null==(e=H.current)||e.close())},[u,c,$]),{state:a,getState:c,selectConflictPromptOption:z,createPreviewDeploy:U,approveAndDeploy:W,overwriteDataAndDeploy:q,cancelPreparingDatabase:Y}),et=ee.state,en=ee.selectConflictPromptOption,er=ee.createPreviewDeploy,ei=ee.approveAndDeploy,ea=ee.overwriteDataAndDeploy,eo=ee.cancelPreparingDatabase;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eq,{buildToDisplay:Q,activeStage:X.id,pausedStage:Z,onCancel:function(){eo(),null==J||J()}}),(0,r.jsxs)(ec.View,{css:tz.bottom,children:[(0,r.jsx)(tH.DividerH,{}),(0,r.jsx)(ec.View,{css:tz.self,children:(0,r.jsx)(ec.View,{css:tz.text,children:(0,r.jsx)(ec.View,{gap:8,wrap:!0,children:(0,g._)(et.stages).map(function(e,t){var i=(0,n._)(e,2),a=(i[0],i[1]);return(0,r.jsx)(tR,{state:a,focusedStage:et.focusedStage,onSelectConflictPromptOption:en,onCreatePreviewDeploy:er,onApproveAndDeploy:ei,onOverwriteDataAndDeploy:ea,onCancel:eo},t)})})})})]})]})}var tq=[ee.rcss.borderRadius(),{border:"1px solid ".concat(Z.tokens.outlineDimmer)}],tK=(0,J.cssRecord)({container:tq,bottom:[ee.rcss.borderRadius(0,0,4,4),ee.rcss.overflow("hidden")],logsOpen:[ee.rcss.overflow("hidden"),ee.rcss.height("auto")],logsClosed:[ee.rcss.overflow("hidden"),ee.rcss.height(0)],xtermContainer:[ee.rcss.display.flex,ee.rcss.pt(12),ee.rcss.pl(16),ee.rcss.overflow("hidden")],xterm:[ee.rcss.width("100%"),ee.rcss.maxWidth("100%"),ee.rcss.height(340)],divider:ee.rcss.backgroundColor.outlineDimmer}),tY=function(e){var t,n,i,a,u,c=(0,s.useDeploymentMode)(),d=(n=(t={mode:c,inProgressBuild:(0,o.useDeploymentInProgressBuild)(),failedBuild:(0,o.useDeploymentFailedBuild)(),completedBuild:(0,o.useDeploymentCurrentBuild)()}).mode,i=t.inProgressBuild,a=t.failedBuild,u=t.completedBuild,n===l.DeploymentMode.PreparingDatabase?u:i||a||void 0);return c===l.DeploymentMode.Preparing?(0,r.jsx)(ec.View,{css:tK.container,children:(0,r.jsx)(eq,{buildToDisplay:d})}):c===l.DeploymentMode.PreparingDatabase?(0,r.jsx)(tQ,{buildToDisplay:d,onCancel:e.onCanceled}):(0,r.jsx)(tX,{initialBuild:e.initialBuild,viewBuildLogsOnLoad:e.viewBuildLogsOnLoad,openPane:e.openPane,onViewLogs:e.onViewLogs,onCanceled:e.onCanceled,onError:e.onError,openFile:e.openFile,buildToDisplay:d})};function tQ(e){var t=e.buildToDisplay,n=e.onCancel,i=e$(eG,a.HostingBuildStatus.Pending),o=(0,w.usePauseProvisionStage)()?null==i?void 0:i.id:void 0;return i?(0,r.jsx)(ec.View,{css:tK.container,children:(0,r.jsx)(tW,{buildToDisplay:t,activeStage:i,pausedStage:o,onCancel:n})}):null}var tX=function(e){var t,s,l,c,d,f,p,h,w,_,k,S,C,E=e.initialBuild,R=e.viewBuildLogsOnLoad,I=e.onViewLogs,A=e.onCanceled,P=e.onError,D=e.openFile,O=e.openPane,N=e.buildToDisplay,M=(0,o.useCancelInProgressDeploymentsBuild)(),L=N?{id:N.id,status:N.status,provider:N.provider,timeStarted:N.timeCreated,userDisplayName:null!=(S=null==(t=N.user)?void 0:t.displayName)?S:b.DELETED_USER_DISPLAY_NAME,debugSummary:N.debugSummary}:void 0,B=(0,i.useRef)(E||L),V=(0,y.useHostingDeployActionHistoryQuery)({skip:!(null==(s=B.current)?void 0:s.id),variables:{input:{buildId:null!=(C=null==(l=B.current)?void 0:l.id)?C:""}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null==e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":P(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var t=e.hostingBuildDeployActionHistory.results;if(t&&t.length>0){var n=[],r=[],i=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;switch(u.__typename){case"HostingBuildDeployLogAction":n.push(u.log);break;case"HostingBuildDeployStatusAction":r.push(u)}}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}es({type:"setHistory",payload:n});var c=!0,d=!1,f=void 0;try{for(var p,h=r[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var m=p.value;el(m.status,m.debugSummary)}}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}}break;default:P("Unexpected typename.")}},onError:function(e){P(e.message)}}),F=V.loading,U=V.refetch;(0,o.useLatestBuildActionUpdate)(function(e){switch(e.__typename){case"HostingBuildDeployLogAction":es({type:"addLog",payload:e.log});break;case"HostingBuildDeployStatusAction":el(e.status,e.debugSummary)}});var G=(0,n._)((0,i.useState)(B.current?null==(c=e$(eG,B.current.status))?void 0:c.id:void 0),2),$=G[0],H=G[1],z=(0,n._)((0,i.useState)((null==(d=B.current)?void 0:d.status)==="failed"?null==(f=e$(eG,null==(p=B.current)?void 0:p.status))?void 0:f.id:void 0),2),W=z[0],q=z[1],K=(0,n._)((0,i.useState)((null==(h=B.current)?void 0:h.debugSummary)||void 0),2),Y=K[0],Q=K[1],X=(0,n._)((0,i.useState)(!1),2),Z=X[0],J=X[1],ee=(0,o.useFsService)(),et=(0,n._)((0,j.default)({openFile:D,listFiles:ee.listFiles}),2),en=et[0],er=et[1],ei=(0,T.useTerminalTheme)(),ea=(0,n._)((0,i.useReducer)(function(e,t){switch(t.type){case"setHistory":return en&&en.clear(),{allLogs:(0,g._)(t.payload).concat((0,g._)(e.allLogs))};case"addLog":return{allLogs:(0,g._)(e.allLogs).concat([t.payload]),recentLogs:[t.payload]};case"refetchLogs":return en&&en.clear(),F||U(),{allLogs:[]}}},{allLogs:[]}),2),eo=ea[0],es=ea[1],el=function(e,t){if(e===a.HostingBuildStatus.Failed)q($),t&&Q(t);else{var n=e$(eG,e);if(!n)return;H(n.id)}},eu=(0,n._)((0,i.useState)(R||!1),2),ed=eu[0],ef=eu[1],ep=function(){ef(!ed),ed||(0,u.trackDeploymentSectionViewed)({context:"deploy_progress_logs"})};(0,i.useEffect)(function(){(0,u.trackDeploymentSectionViewed)({context:"deploy_progress"})},[]),(0,i.useEffect)(function(){var e,t,n;(null==(e=B.current)?void 0:e.id)&&N&&N.id!==B.current.id&&(B.current={id:N.id,status:N.status,provider:N.provider,timeStarted:N.timeCreated,userDisplayName:null!=(n=null==(t=N.user)?void 0:t.displayName)?n:b.DELETED_USER_DISPLAY_NAME,debugSummary:N.debugSummary},H(void 0),q(void 0),es({type:"refetchLogs"}))},[N,null==(w=B.current)?void 0:w.id,U]),(0,i.useEffect)(function(){var e;void 0!==$&&(null==(e=B.current)?void 0:e.status)==="failed"&&q($)},[$,null==(_=B.current)?void 0:_.status]),(0,i.useEffect)(function(){if(en){if(eo.recentLogs)return void eo.recentLogs.forEach(function(e){return en.write(e)});eo.allLogs.forEach(function(e){return en.write(e)})}},[eo,en]);var eh=null===(k=eG.find(function(e){return e.id===$}))||void 0===k?void 0:k.statusType,em=eh===a.HostingBuildStatus.Success,eg=null!=W;return N?(0,r.jsxs)(ec.View,{css:tK.container,children:[(0,r.jsx)(eq,{buildToDisplay:N,onCancel:em||eg?void 0:function(){return(0,m._)(function(){return(0,x._)(this,function(e){switch(e.label){case 0:return J(!0),[4,M()];case 1:return e.sent(),A(),[2]}})})()},isCanceling:Z,onViewBuildLogs:ep,viewBuildLogs:ed,activeStage:$,erroredStage:W}),(0,r.jsxs)(ec.View,{css:tK.bottom,children:[(0,r.jsxs)(ec.View,{css:ed?tK.logsOpen:tK.logsClosed,children:[(0,r.jsx)(tH.DividerH,{css:tK.divider}),(0,r.jsx)(ec.View,{css:tK.xtermContainer,style:{backgroundColor:null==ei?void 0:ei.background},children:(0,r.jsx)(ec.SpecializedView.div,{css:tK.xterm,ref:er})})]}),W&&eh&&N?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tH.DividerH,{css:tK.divider}),(0,r.jsx)(ew,{currentStatus:eh,provider:N.provider,debugSummary:Y,logs:eo.allLogs,viewBuildLogs:ed,openFile:D,openPane:O,onViewBuildLogs:ep,onViewApplicationLogs:I})]}):null]})]}):null},tZ=e.i(165349),tJ=e.i(138716),t0=e.i(752539),t1=e.i(657929),t2=e.i(806685),t3=e.i(536262),t5=e.i(928838),t4=e.i(198992),t8=e.i(863753),t6=((t=t6||{}).Current="current",t),t7=(0,eP._)({},"current",{icon:(0,r.jsx)(function(e){var t=e.color;return(0,r.jsx)(ec.View,{css:[{textTransform:"capitalize"}],align:"center",row:!0,gap:8,children:(0,r.jsx)(ec.View,{tag:"span",css:[ee.rcss.width("8px"),ee.rcss.height("8px"),ee.rcss.borderRadius("full"),{backgroundColor:t}]})})},{color:Z.tokens.blueStronger}),text:"Current deployment"}),t9=function(e){var t=e.activityLogItem.type,n=t in t7&&t7[t];if(!n)return null;var i=n.icon,a=n.text;return(0,r.jsx)(eu.Tooltip,{tooltip:a,children:(0,r.jsx)(ec.View,{p:8,children:i})})},ne=e.i(187505),nt=e.i(76430),nn=e.i(137205);function nr(e){var t=e.onClickRollback,n=e.rollbackTooltip;if(e.isMobile&&!t)return null;var i=void 0===t;return(0,r.jsx)(es.IconButton,{alt:n,onClick:t,disabled:i,clsx:i&&nn.default.disabledLog,children:(0,r.jsx)(t3.default,{})})}function ni(e){var t=e.expoLaunchInfo,n=(0,ne.useTrackClick)().trackClick,i=t.status,o=t.isFinished,s=t.appId,l=t.authedDashboardUrl,u=i===a.ExpoLaunchStatus.Failure||i===a.ExpoLaunchStatus.Canceled;return o?(0,r.jsxs)(r.Fragment,{children:[u&&l?(0,r.jsx)(es.IconButton,{alt:"View logs",onClick:function(){n({productArea:"publishing",target:"expo_launch_history_view_expo_logs"}),window.open(l,"_blank")},children:(0,r.jsx)(N.default,{})}):null,s?(0,r.jsx)(es.IconButton,{alt:"Manage App Store settings",onClick:function(){n({productArea:"publishing",target:"expo_launch_history_app_store_settings"}),window.open((0,nt.getAppStoreConnectUrl)(s),"_blank")},children:(0,r.jsx)(N.default,{})}):null]}):(0,r.jsx)(M.default,{color:Z.tokens.foregroundDimmer,size:16})}function na(e){var t=e.item,n=e.onClick,i=e.onClickRollback,o=e.isMobile,s=e.deploymentMode,u=e.isAgentStack,c=e.isLast,d=t.build.hasDeployLogs,f=!d,h="Rollback";i||(h="Cannot roll back, the image for this build is no longer available"),u?h="Rollback is not supported for Agents and Automations":t.build.provider===a.HostingBuildProvider.Static?h="Rollback is not supported for Static deployments":s!==l.DeploymentMode.Ready?h="Cannot roll back while a deployment is in progress":t.build.status!==a.HostingBuildStatus.Success?h="Cannot roll back to a failed build":t.build.rollbackSourceBuildId&&(h="Cannot roll back, already rolled back to this deployment");var m=(0,r.jsxs)(ec.View,{clsx:nn.default.item,grow:!0,shrink:!0,pl:8,pr:4,pb:12,align:"center",row:!0,gap:8,style:o?{alignItems:"start"}:{},children:[(0,r.jsx)(ec.View,{clsx:nn.default.itemMainText,grow:!0,shrink:!0,children:(0,r.jsx)(t8.ActivityLogText,{activityLogItem:t,isMobile:o})}),(0,r.jsx)(ec.View,{clsx:nn.default.itemLine}),(0,r.jsx)(ec.View,{clsx:t.expoLaunchInfo&&!t.expoLaunchInfo.isFinished?nn.default.itemRightVisible:nn.default.itemRight,row:!0,shrink:!0,gap:0,justify:"end",style:o?{visibility:"visible"}:{},children:t.expoLaunchInfo?(0,r.jsx)(ni,{expoLaunchInfo:t.expoLaunchInfo}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t9,{activityLogItem:t}),(0,r.jsx)(nr,{onClickRollback:i,rollbackTooltip:h,isMobile:o}),(0,r.jsx)(es.IconButton,{alt:d?"View deploy logs":"Deploy logs expire after 30 days",onClick:n,disabled:f,clsx:f&&nn.default.disabledLog,children:(0,r.jsx)(S.default,{})})]})})]}),g=t.expoLaunchInfo?t.expoLaunchInfo.status===a.ExpoLaunchStatus.Failure||t.expoLaunchInfo.status===a.ExpoLaunchStatus.Canceled:t.type===a.HostingActivityLogType.Fail;return(0,r.jsxs)(ec.View,{row:!0,gap:12,children:[(0,r.jsx)(p.TimelinePoint,{type:g?"pastFail":"pastSuccess",hideLine:c}),m]})}var no=e.i(979530),ns=(0,J.cssRecord)({title:[ee.rcss.fontSize(24),ee.rcss.pt(32)],subtitle:[ee.rcss.pt(6)],accordionContainer:[ee.rcss.pt(24)],accordion:[ee.rcss.backgroundColor.backgroundHigher,ee.rcss.borderRadius(6)],accordionItem:[ee.rcss.px(8),ee.rcss.py(2),ee.rcss.rowWithGap(8),ee.rcss.align.center],tableContainer:[ee.rcss.backgroundColor.backgroundDefault,ee.rcss.border({color:Z.tokens.backgroundHigher}),ee.rcss.borderRadius(0,0,6,6),ee.rcss.px(12),ee.rcss.pb(6)],changedSecretsDisclaimer:[ee.rcss.py(8)],table:[ee.rcss.width("100%"),{".tr":{display:"flex",width:"100%",flexDirection:"row"},".th":{flexDirection:"row",borderBottom:"1px solid ".concat(Z.tokens.outlineDimmest),color:Z.tokens.foregroundDimmer},".td":{flexDirection:"row"}}],cell:[ee.rcss.fontWeight.normal,ee.rcss.fontSize(Z.tokens.fontSizeDefault),ee.rcss.py(8),ee.rcss.display.flex,ee.rcss.flex.row,ee.rcss.align.center,ee.rcss.justify.spaceBetween],secretValue:[ee.rcss.pl(4),ee.rcss.color.foregroundDefault],noValue:[ee.rcss.pl(4),ee.rcss.color.foregroundDimmest]}),nl=function(e){var t=e.buildSecret,n=e.shortSecretLength,i=t.slice(0,void 0===n?8:n);return i.length===t.length?(0,r.jsx)(el.Text,{children:i}):(0,r.jsx)(eu.Tooltip,{tooltip:t,children:(0,r.jsxs)(el.Text,{children:[i,"..."]})})};function nu(e){var t=e.secretKey,a=e.build1Secret,o=e.build2Secret,s=e.hideSecret,l=e.selectedSecretsMap,u=e.updateSecretsMap,c=(0,n._)((0,i.useState)(l.get(t)),2),d=c[0],f=c[1],p=function(e){var n=e.buildSecret;return(0,r.jsx)("td",{className:"td",children:(0,r.jsxs)(ec.View,{css:ns.cell,style:{justifyContent:"start"},children:[(0,r.jsx)(tu.Radio,{id:t,value:null!=n?n:"",checked:d===n,onChange:function(){f(n),u({key:t,value:n})}}),n?(0,r.jsx)("span",{css:ns.secretValue,children:s?"":(0,r.jsx)(nl,{buildSecret:n})}):(0,r.jsx)("span",{css:ns.noValue,children:"No Value"})]})})};return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"td",children:(0,r.jsx)(ec.View,{css:ns.cell,className:"cell",children:t})}),(0,r.jsx)(p,{buildSecret:a}),(0,r.jsx)(p,{buildSecret:o})]})}var nc=function(e){var t=e.secretKey,n=e.secretValue,i=e.hideSecret;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"td",children:(0,r.jsx)(ec.View,{css:ns.cell,className:"cell",children:t})}),(0,r.jsx)("td",{className:"td",children:(0,r.jsx)("span",{css:ns.cell,className:"cell",children:i?"":(0,r.jsx)(nl,{buildSecret:n,shortSecretLength:20})})})]})};let nd=function(e){var t=e.currentBuild,a=e.build,o=e.selectedSecretsMap,s=e.updateSecretsMap,l=(0,n._)((0,i.useState)(!1),2),u=l[0],c=l[1],d=(0,n._)((0,i.useState)(!1),2),f=d[0],p=d[1],h=(0,n._)((0,i.useState)(!0),2),m=h[0],g=h[1],x=(0,n._)((0,i.useState)(!0),2),y=x[0],b=x[1],w=(0,n._)((0,i.useState)(),2),_=w[0],k=w[1];return((0,i.useEffect)(function(){var e,n,r,i,o,l,u,c,d,f=(n=(e={build1Secrets:t.envVars,build2Secrets:a.envVars}).build1Secrets,r=e.build2Secrets,i=new Map,o=new Map,l=new Map,u=new Map,c=new Set,d=new Map,n.forEach(function(e){l.set(e.name,e.value),c.add(e.name)}),r.forEach(function(e){u.set(e.name,e.value),c.add(e.name)}),c.forEach(function(e){var t=l.get(e)||void 0,n=u.get(e)||void 0;t===n?t&&(i.set(e,t),d.set(e,t)):(o.set(e,{build1Value:t,build2Value:n}),d.set(e,t))}),{unchangedSecrets:i,changedSecrets:o,defaultSelectedMap:d});f.defaultSelectedMap.forEach(function(e,t){s({key:t,value:e})}),k(f)},[a.envVars,t.envVars,s]),_&&(0!==_.unchangedSecrets.size||0!==_.changedSecrets.size))?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ec.View,{css:ns.title,children:"Review Secrets"}),(0,r.jsx)(el.Text,{css:ns.subtitle,children:"Manage which secrets you would like to preserve from your production deployment or from your rollback target."}),_.changedSecrets.size>0?(0,r.jsx)(ec.View,{css:ns.accordionContainer,children:(0,r.jsx)(eo.AccordionItem,{headerContent:(0,r.jsxs)(ec.View,{css:ns.accordionItem,children:[(0,r.jsx)(C.default,{color:Z.tokens.yellowStronger}),_.changedSecrets.size,1===_.changedSecrets.size?" secret is ":" secrets are ","different across deployments"]}),expanded:f,onClick:function(){return p(!f)},css:ns.accordion,children:(0,r.jsxs)(ec.View,{css:ns.tableContainer,children:[(0,r.jsx)(el.Text,{css:ns.changedSecretsDisclaimer,children:"Select secret values from either your production environment or rollback environment to copy over in your rollback."}),(0,r.jsxs)("table",{css:ns.table,children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"th",style:{width:"40%"},children:(0,r.jsx)(ec.View,{css:ns.cell,children:"Key"})}),(0,r.jsx)("th",{className:"th",style:{width:"30%"},children:(0,r.jsx)(ec.View,{css:ns.cell,children:"Production"})}),(0,r.jsx)("th",{className:"th",style:{width:"30%"},children:(0,r.jsxs)(ec.View,{css:ns.cell,children:["Rollback Build",(0,r.jsx)(es.IconButton,{alt:y?"Reveal Values":"Hide Values",onClick:function(){b(!y)},children:y?(0,r.jsx)(no.default,{}):(0,r.jsx)(eX.default,{})})]})})]}),Array.from(_.changedSecrets.entries()).map(function(e){var t=(0,n._)(e,2),i=t[0],a=t[1];return(0,r.jsx)(nu,{secretKey:i,build1Secret:a.build1Value,build2Secret:a.build2Value,hideSecret:y,selectedSecretsMap:o,updateSecretsMap:s},i)})]})]})})}):null,_.unchangedSecrets.size>0?(0,r.jsx)(ec.View,{css:ns.accordionContainer,children:(0,r.jsx)(eo.AccordionItem,{headerContent:(0,r.jsxs)(ec.View,{css:ns.accordionItem,children:[(0,r.jsx)(eD.default,{color:Z.tokens.accentPositiveStronger}),_.unchangedSecrets.size,1===_.unchangedSecrets.size?" secret is ":" secrets are ","shared across deployments"]}),expanded:u,onClick:function(){return c(!u)},css:ns.accordion,children:(0,r.jsx)(ec.View,{css:ns.tableContainer,children:(0,r.jsxs)("table",{css:ns.table,children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"th",style:{width:"40%"},children:(0,r.jsx)(ec.View,{css:ns.cell,children:"Key"})}),(0,r.jsx)("th",{className:"th",style:{width:"60%"},children:(0,r.jsxs)(ec.View,{css:ns.cell,children:["Rollback Build",(0,r.jsx)(es.IconButton,{alt:m?"Reveal Values":"Hide Values",onClick:function(){g(!m)},children:m?(0,r.jsx)(no.default,{}):(0,r.jsx)(eX.default,{})})]})})]}),Array.from(_.unchangedSecrets.entries()).map(function(e,t){var i=(0,n._)(e,2),a=i[0],o=i[1];return(0,r.jsx)(nc,{secretKey:a,secretValue:o,hideSecret:m},t)})]})})})}):null]}):null};var nf=e.i(391222),np=e.i(650587),nh=e.i(820734),nm=e.i(492267),ng=e.i(714165);function nv(e){var t=e.type,n=e.view,i=e.provider,a=e.onViewBuildLogs,o=e.openFile,s=e.openPane,l=e.onClickRollback,u=e.onDataLoaded,c=(0,K.default)();return(0,r.jsx)(nI,{replId:c,type:void 0===t?"default":t,view:n,provider:i,onSelect:a,openFile:o,openPane:s,onClickRollback:l,onDataLoaded:u})}var nx=eU.filter(function(e){return"title"in e}),ny=(0,J.cssRecord)({root:[{zIndex:0}]});function nb(e){var t=e.activeStage,n=e.erroredStage;return(0,r.jsx)(ec.View,{css:ny.root,px:8,pb:8,row:!0,children:nx.map(function(e){return(0,r.jsx)(eF,{stage:e.id,text:e.title,totalStagesWithTitle:nx.length,activeStage:t,erroredStage:n},e.id)})})}var nw=(0,J.cssRecord)({root:[ee.rcss.height("100%")],divider:[{marginLeft:8,marginRight:8,borderBottom:"1px solid "+Z.tokens.outlineDimmest}],name:[ee.rcss.color.foregroundDefault,ee.rcss.fontWeight.medium],content:[ee.rcss.position.relative],loading:[ee.rcss.coverContainer,ee.rcss.center],error:[ee.rcss.m(8),ee.rcss.borderRadius(8),ee.rcss.overflow("hidden")],xterm:[ee.rcss.coverContainer,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,"& > div":[ee.rcss.coverContainer,ee.rcss.p(8)]}]}),n_=(0,J.cssRecord)({root:[t4.sharedCss.maxWidth],title:[ee.rcss.fontSize(24),ee.rcss.pt(8)],subheader:[ee.rcss.fontSize(14)],content:[ee.rcss.position.relative],prodToTargetContainer:[{b:{display:"contents",fontWeight:500}}],prodStatusDot:[ee.rcss.width(12),ee.rcss.align.center],buildContainer:[ee.rcss.borderRadius(),{outline:"1px solid ".concat(Z.tokens.outlineDimmer)},ee.rcss.backgroundColor.outlineDimmest,ee.rcss.width("45%"),ee.rcss.height("100%")],buildContainerTitle:[ee.rcss.fontSize(16),ee.rcss.align.center],buildContainerSubTitle:[ee.rcss.color.foregroundDimmer]});function nk(e){var t,n,i,a,o,s=e.build,l=e.isCurrentBuild,u=Date.now(),c=(0,eI.formatDistance)(new Date(s.timeCreated),u,{addSuffix:!0}),d=l?(0,r.jsx)(ec.View,{css:n_.prodStatusDot,children:(0,r.jsx)(nf.DeploymentStatusDot,{status:s.status})}):(0,r.jsx)(t2.default,{color:Z.tokens.outlineStrongest,size:12});return(0,r.jsxs)(ec.View,{css:n_.buildContainer,py:12,px:16,gap:8,children:[(0,r.jsxs)(ec.View,{css:n_.buildContainerTitle,row:!0,gap:6,children:[d,l?"Production":s.id.slice(0,8)]}),(0,r.jsxs)(ec.View,{css:n_.buildContainerSubTitle,row:!0,gap:6,align:"center",children:[(0,r.jsx)(ng.Avatar,{src:(null==(t=s.user)?void 0:t.image)||null,size:12,username:(null==(n=s.user)?void 0:n.username)||"",fullName:(null==(i=s.user)?void 0:i.fullName)||""}),(0,r.jsx)("b",{children:" "+(null!=(o=null==(a=s.user)?void 0:a.displayName)?o:b.DELETED_USER_DISPLAY_NAME)})," ","deployed"," "+c]})]})}function nS(e){var t=e.build,a=e.onBack,s=e.onClickRollback,l=e.onError,u=(0,o.useDeploymentCurrentBuild)(),c=(0,n._)((0,i.useState)(new Map),2),d=c[0],f=c[1],p=(0,np.useIsMobile)();return u?(0,r.jsxs)(ec.View,{css:n_.root,pt:12,pb:16,children:[(0,r.jsx)(ec.View,{pt:8,pl:8,row:!0,gap:8,align:"center",children:(0,r.jsx)(es.IconButton,{alt:"Back to timeline",onClick:function(){return a()},children:(0,r.jsx)(tJ.default,{})})}),(0,r.jsxs)(ec.View,{css:n_.content,grow:!0,shrink:!0,px:8,children:[(0,r.jsx)(ec.View,{css:n_.title,children:"Instant Rollback"}),(0,r.jsx)(ec.View,{css:n_.subheader,pt:12,children:"Replace your current production with a previously successful deployment."}),(0,r.jsxs)(ec.View,{css:n_.prodToTargetContainer,pt:32,children:["Rolling back from ",(0,r.jsx)("b",{children:"production"})," to the following"," ",(0,r.jsx)("b",{children:"rollback target"}),":",(0,r.jsxs)(ec.View,{grow:!0,shrink:!0,align:"center",justify:"space-between",pt:16,row:!0,gap:8,children:[(0,r.jsx)(nk,{build:u,isCurrentBuild:!0}),(0,r.jsx)(t0.default,{}),(0,r.jsx)(nk,{build:t,isCurrentBuild:!1})]})]}),p?null:(0,r.jsx)(nd,{build:t,currentBuild:u,updateSecretsMap:function(e){var t=e.key,n=e.value;f(d.set(t,n))},selectedSecretsMap:d}),(0,r.jsx)(ec.View,{pt:24,children:(0,r.jsx)(et.Button,{text:"Confirm Rollback",iconLeft:(0,r.jsx)(t3.default,{}),onClick:function(){var e=[];d.forEach(function(t,n){t&&e.push({name:n,value:t})}),s(e),a()},colorway:"primary"})})]})]}):(l("This deployment does not have a current build to rollback from"),null)}function nC(e){var t,o,s=e.build,l=e.onBack,u=e.fs,c=e.openFile,d=e.openPane,f=e.onViewAppLogs,p=(0,n._)((0,j.default)({openFile:c,listFiles:u.listFiles}),2),h=p[0],m=p[1],g=(0,tZ.useHostingActivityLogBuildHistoryQuery)({variables:{input:{buildId:s.id}},ssr:!1,fetchPolicy:"cache-and-network"}),x=g.data,y=g.loading,w=(0,i.useMemo)(function(){var e=[],t=x&&"HostingBuildDeployActionHistoryResults"===x.hostingBuildDeployActionHistory.__typename?x.hostingBuildDeployActionHistory.results:null;if(t){var n=void 0,r=void 0,i=void 0,o=!0,s=!1,l=void 0;try{for(var u,c,d=t[Symbol.iterator]();!(o=(c=d.next()).done);o=!0)!function(){var t=c.value;if("HostingBuildDeployLogAction"===t.__typename)return e.push(t.log);eU.some(function(e){return e.statusType===t.status})&&(n=t.status),t.status===a.HostingBuildStatus.Failed&&(r=n)}()}catch(e){s=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(s)throw l}}var f=n?null==(u=e$(eU,n))?void 0:u.id:void 0;return r&&(i=f),{logs:e,activeStage:f,erroredStage:i,erroredStatus:r}}},[x]);return(0,i.useEffect)(function(){h&&w&&h.write(w.logs.join(""))},[h,w]),(0,r.jsxs)(ec.View,{css:nw.root,gap:8,children:[(0,r.jsxs)(ec.View,{pt:8,px:8,row:!0,gap:8,align:"center",children:[(0,r.jsx)(es.IconButton,{alt:"Back to timeline",onClick:function(){return l()},children:(0,r.jsx)(tJ.default,{})}),(0,r.jsx)(ec.View,{children:(0,r.jsxs)(el.Text,{color:"dimmer",multiline:!1,children:[(0,r.jsx)("span",{css:nw.name,children:(null!=(o=null==(t=s.user)?void 0:t.displayName)?o:b.DELETED_USER_DISPLAY_NAME)+" "}),(0,t5.getStatusSentenceText)(s.status)]})}),(0,r.jsx)(t8.ActivityLogTextBuildPill,{build:s})]}),w||y?(0,r.jsxs)(r.Fragment,{children:[(null==w?void 0:w.erroredStatus)?(0,r.jsx)(ec.View,{css:nw.error,children:(0,r.jsx)(e_,{currentStatus:w.erroredStatus,provider:s.provider,debugSummary:s.debugSummary,openFile:c,openPane:d,onViewApplicationLogs:f})}):null,(0,r.jsx)(nb,{activeStage:null==w?void 0:w.activeStage,erroredStage:null==w?void 0:w.erroredStage}),(0,r.jsx)(ec.View,{css:nw.divider}),(0,r.jsxs)(ea.ShadesSurface,{css:nw.content,grow:!0,shrink:!0,p:8,elevate:!1,children:[(0,r.jsx)(ec.View,{css:nw.xterm,innerRef:m}),y||!h?(0,r.jsx)(ec.View,{css:nw.loading,children:(0,r.jsx)(M.default,{color:Z.tokens.white,size:24})}):null]})]}):(0,r.jsx)(eR,{provider:s.provider,openFile:c})]})}var nj=(0,J.cssRecord)({empty:[ee.rcss.center,ee.rcss.align.stretch],loadMore:[ee.rcss.center]}),nT=(0,J.cssRecord)({top:ee.rcss.rowWithGap(12),button:[ee.rcss.reset.button,ee.rcss.cursor.pointer,ee.rcss.borderRadius(8),ee.rcss.display.flex,ee.rcss.rowWithGap(6),ee.rcss.align.center,ee.rcss.px(8),ee.rcss.color.foregroundDimmer,ee.rcss.height(32),ee.rcss.hover(ee.rcss.color.foregroundDefault),{'&[data-highlight="true"]':[ee.rcss.color.accentNegativeStrongest,ee.rcss.backgroundColor.accentNegativeDimmest,ee.rcss.border({color:Z.tokens.accentNegativeDimmer})]}],info:[ee.rcss.flex.growAndShrink(1),{'&[data-open="false"]':ee.rcss.pb(6)}],failedBuildList:ee.rcss.pt(8),failedBuildTimeText:[{fontWeight:300,fontStyle:"italic"}]});function nE(e){var t=e.items,a=e.upcomingBuildStatus,o=e.view,u=e.provider,d=e.onClick,f=e.openFile,h=e.openPane,m=(0,n._)((0,i.useState)(!1),2),g=m[0],x=m[1],y=(0,s.useDeploymentMode)(),b=(0,np.useIsMobile)(),w=(0,nm.useIsAgentStackRepl)().isAgentStackRepl,_=t[0],S=_.build.debugSummary,C=y===l.DeploymentMode.Ready&&!a&&o!==c.Views.DeploymentInProgress&&S;return(0,r.jsxs)(ec.View,{children:[(0,r.jsxs)(ec.View,{css:nT.top,children:[(0,r.jsx)(p.TimelinePoint,{type:g?"futureFailOpen":"futureFailClosed"}),(0,r.jsxs)(ec.View,{css:nT.info,"data-open":g,children:[C?(0,r.jsx)(eS,{title:"".concat(t.length," ").concat((0,ts.default)("build",t.length)," failed"),debugSummary:S,onViewBuildLogs:function(){return d(_.build)},openFile:f,provider:u,openPane:h}):null,(0,r.jsxs)("button",{onClick:function(){return x(!g)},css:nT.button,children:[(0,r.jsxs)(ec.View,{grow:!0,shrink:!0,row:!0,gap:8,align:"center",children:[(0,r.jsx)(k.default,{}),(0,r.jsx)(el.Text,{children:"View all failed builds"}),g?null:(0,r.jsxs)(el.Text,{color:"dimmest",variant:"small",children:[t.length>1?"Most recent: ":null,(0,eI.formatDistance)(new Date(t[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),g?(0,r.jsx)(O.default,{color:Z.tokens.foregroundDimmer}):(0,r.jsx)(D.default,{color:Z.tokens.foregroundDimmer})]})]})]}),g?(0,r.jsx)(ec.View,{css:nT.failedBuildList,children:t.map(function(e,n){return(0,r.jsx)(na,{item:e,onClick:function(){return d(e.build)},isMobile:b,deploymentMode:y,isAgentStack:w,isLast:n===t.length-1},e.id)})}):null]})}function nR(e){var t=e.items,l=e.view,u=e.provider,c=e.onClick,d=e.openFile,f=e.openPane,h=(0,n._)((0,i.useState)(!1),2),m=h[0],g=h[1],x=(0,o.useDeploymentDeployability)().hasDebugSummariesAuthorization,y=(0,np.useIsMobile)(),b=(0,s.useDeploymentMode)(),w=(0,nm.useIsAgentStackRepl)().isAgentStackRepl,_=(0,o.useDeploymentInProgressBuild)(),k=(0,i.useRef)(void 0);(0,i.useEffect)(function(){(null==_?void 0:_.status)!==void 0&&(k.current=null==_?void 0:_.status)},[_,null==_?void 0:_.status]);var S=!_&&k.current!==a.HostingBuildStatus.Building&&k.current!==a.HostingBuildStatus.Success;if(0===t.length)return null;var j=t[0];if(x&&j.build.debugSummary)return(0,r.jsx)(nE,{items:t,upcomingBuildStatus:k.current,view:l,provider:u,onClick:c,openFile:d,openPane:f});var T="".concat(t.length," ").concat((0,ts.default)("build",t.length)," failed"),E=m?void 0:"".concat(t.length>1?"Most recent: ":"").concat((0,eI.formatDistance)(new Date(t[0].timeCreated),Date.now(),{addSuffix:!0}));return(0,r.jsxs)(ec.View,{children:[(0,r.jsxs)(ec.View,{css:nT.top,children:[(0,r.jsx)(p.TimelinePoint,{type:m?"futureFailOpen":"futureFailClosed"}),(0,r.jsx)(ec.View,{css:nT.info,"data-open":m,children:(0,r.jsx)(ty.StatusBanner,{colorway:S?"negative":"grey",icon:S?(0,r.jsx)(C.default,{}):void 0,title:(0,r.jsxs)(ec.View,{row:!0,gap:4,children:[T,(0,r.jsx)(el.Text,{color:"dimmer",css:nT.failedBuildTimeText,children:E?(0,r.jsxs)(r.Fragment,{children:[" ",E]}):null})]}),text:"",action:(0,r.jsx)(es.IconButton,{alt:m?"Collapse":"Expand",tooltipBehavior:"hidden",onClick:function(){return g(!m)},children:m?(0,r.jsx)(O.default,{}):(0,r.jsx)(D.default,{})})})})]}),m?(0,r.jsx)(ec.View,{css:nT.failedBuildList,children:t.map(function(e,n){return(0,r.jsx)(na,{item:e,onClick:function(){return c(e.build)},isMobile:y,deploymentMode:b,isAgentStack:w,isLast:n===t.length-1},e.id)})}):null]})}function nI(e){var t,n,u,c,d=e.replId,f=e.type,p=void 0===f?"default":f,h=e.view,g=e.provider,y=e.onSelect,b=e.openFile,w=e.openPane,k=e.onClickRollback,S=e.onDataLoaded,j=(0,tZ.useHostingDeploymentActivityLogs2Query)({variables:{replId:d,count:20},fetchPolicy:"cache-and-network",ssr:!1}),T=j.data,E=j.previousData,R=j.loading,I=j.error,A=j.fetchMore,P=(0,o.useDeploymentCurrentBuild)(),D=(0,tZ.useExpoLaunchHistoryForTimelineQuery)({variables:{replId:d,count:20},fetchPolicy:"cache-and-network",ssr:!1}),O=D.data,N=D.refetch;(0,tZ.useExpoLaunchStatusForHistorySubscription)({variables:{replId:d,hostingBuildId:null!=(c=null==P?void 0:P.id)?c:""},skip:!(null==P?void 0:P.id),onData:function(e){var t,n=e.data,r=null==n||null==(t=n.data)?void 0:t.expoLaunchStatus.status;("IOS_LAUNCH_COMPLETED"===r||"ERROR"===r)&&N()}});var L=null!=T?T:E,B=(0,s.useDeploymentMode)(),V=(0,np.useIsMobile)(),F=(null==L?void 0:L.getRepl.__typename)==="Repl"?L.getRepl:null,U=(null==F||null==(t=F.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"?F.hostingDeployment:null,G=(0,nm.useIsAgentStackRepl)().isAgentStackRepl,$=function(){return(0,m._)(function(){var e;return(0,x._)(this,function(t){switch(t.label){case 0:if(!(e=null==U?void 0:U.activityLogs.pageInfo.nextCursor))return[2];return[4,A({variables:{after:e,count:20}})];case 1:return t.sent(),[2]}})})()},H=(0,nh.default)({onLoadMore:$,rootMargin:"0px 0px 300px 0px"}).targetRef;(0,i.useEffect)(function(){!R&&(null==U?void 0:U.activityLogs)&&S&&S(!!((null==P?void 0:P.id)&&0===U.activityLogs.items.filter(function(e){return e.build.id!==P.id}).length))},[null==P?void 0:P.id,R,null==U?void 0:U.activityLogs,S]);var z=(0,i.useMemo)(function(){var e=new Map,t=(null==O?void 0:O.getRepl.__typename)==="Repl"&&(null==(a=O.getRepl.expoLaunchHistory)?void 0:a.__typename)==="ExpoLaunchHistoryConnectionV2"&&null!=O.getRepl.expoLaunchHistory?O.getRepl.expoLaunchHistory:null;if(!t)return e;var n=!0,r=!1,i=void 0;try{for(var a,o,s=t.sessions[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value,u=l.hostingBuildId,c=l.launches;if(u){var d=c.ios;d&&e.set(u,d)}}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e},[O]),W=(0,i.useMemo)(function(){var e=null!=(o=null==U||null==(a=U.activityLogs)?void 0:a.items)?o:[],t=[],n=!0,r=!1,i=void 0;try{for(var a,o,s,l=e[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value;t.push(u);var c=z.get(u.build.id);if(c){var d,f=null!=(d=c.finishedAt)?d:c.startedAt;t.push((0,t_._)((0,_._)({},u),{timeCreated:f,expoLaunchInfo:c}))}}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return t.sort(function(e,t){var n=new Date(e.timeCreated).getTime();return new Date(t.timeCreated).getTime()-n})},[null==U||null==(n=U.activityLogs)?void 0:n.items,z]),q=null==U||null==(u=U.activityLogs)?void 0:u.pageInfo,K=(0,i.useMemo)(function(){return(null==P?void 0:P.id)?W.filter(function(e){return e.build.id!==P.id}):W},[W,null==P?void 0:P.id]),Y=function(e,t){var n=[],r=(null==t?void 0:t.timeCreated)?new Date(t.timeCreated):null,i=!0,o=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;if(c.type!==a.HostingActivityLogType.Fail||r&&c.build.timeCreated&&r.getTime()>new Date(c.build.timeCreated).getTime())break;n.push(c)}}catch(e){o=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}return n}(W.filter(function(e){return!e.expoLaunchInfo}),P),Q=(0,i.useMemo)(function(){return(null==P?void 0:P.id)?Y.filter(function(e){return e.build.id!==P.id}):Y},[Y,null==P?void 0:P.id]),X=(0,i.useMemo)(function(){var e=new Set(Q.map(function(e){return e.id}));return K.filter(function(t){return!e.has(t.id)})},[K,Q]);if(R&&!U)return"failureQueue"===p?null:(0,r.jsx)(nP,{});if(!(null==U?void 0:U.activityLogs)||0===W.length)return null;if(I)return(0,r.jsx)(ec.View,{css:nj.empty,pb:8,children:(0,r.jsx)(ty.StatusBanner,{colorway:"warning",icon:(0,r.jsx)(C.default,{}),text:"Something went wrong"})});if("failureQueue"===p)return(0,r.jsx)(t4.TimelineTransition,{render:Q.length>0,initialHeight:44,children:(0,r.jsx)(nR,{items:Q,view:h,provider:g,onClick:y,openFile:b,openPane:w})});var Z=W.length>0?W[0].build.provider:null;return(0,r.jsxs)(ec.View,{gap:8,"data-history-timeline-items":X.length,children:[(0,r.jsx)(ec.View,{children:X.map(function(e,t){var n=!1;e.isRollbackCandidate&&e.build.status===a.HostingBuildStatus.Success&&!e.build.rollbackSourceBuildId&&k&&B===l.DeploymentMode.Ready&&!G&&e.build.provider===Z&&e.build.provider!==a.HostingBuildProvider.Static&&(n=!0);var i=t===X.length-1;return(0,r.jsx)(na,{item:e,onClick:function(){return y(e.build)},onClickRollback:n&&k?function(){return k(e.build)}:void 0,isMobile:V,deploymentMode:B,isAgentStack:G,isLast:i},"".concat(e.id,"-").concat(!!e.expoLaunchInfo))})}),(null==q?void 0:q.nextCursor)?(0,r.jsx)(ec.View,{css:nj.loadMore,children:(0,r.jsx)(es.IconButton,{disabled:R,tooltipBehavior:"hidden",alt:"Show more",onClick:$,ref:H,children:R?(0,r.jsx)(M.default,{}):(0,r.jsx)(t1.default,{})})}):null]})}var nA=(0,J.cssRecord)({loading:[{":last-of-type":{"[data-timeline-line]":{display:"none"}}}],loadingItem:[eM.loadingStyle.backgroundPulse(),ee.rcss.height(20.4),ee.rcss.mt(2),ee.rcss.ml(4),ee.rcss.flex.growAndShrink(1),ee.rcss.borderRadius(6),{opacity:.5,marginBottom:14}]});function nP(){return(0,r.jsx)(ec.View,{children:[,,,].fill(0).map(function(e,t){return(0,r.jsxs)(ec.View,{css:nA.loading,row:!0,gap:12,children:[(0,r.jsx)(p.TimelinePoint,{type:"pastNeutral"}),(0,r.jsx)(ea.ShadesSurface,{css:nA.loadingItem})]},t)})})}var nD=e.i(823166),nO=e.i(635528),nN=e.i(98816),nM=e.i(441329),nL=e.i(806804),nB=e.i(485273),nV=e.i(179104),nF=e.i(134628),nU=e.i(479407),nG=(0,J.cssRecord)({deploymentInfoWrapper:[{':has( + [data-history-timeline-items="0"])':{"[data-timeline-line]":{display:"none"}}}]}),n$=function(e){var t,m,g,x=e.view,y=e.onLifecycleCommand,b=e.onViewAction,w=e.onError,_=e.openFile,k=e.openPane,S=e.hasAgentSession,C=e.expoLaunchStateObservable,j=e.performExpoLaunchAction,T=(0,s.useDeploymentMode)(),E=(0,o.useDeploymentId)(),R=(0,o.useDeploymentCurrentBuild)(),I=(0,o.useDeploymentInProgressBuild)(),A=(0,o.useFsService)(),P=(0,o.useSecretsService)(),D=(0,nM.useIsInBonsaiWebview)(),O=(0,o.useDeployBuild)().rollbackToPreviousBuild,N=(t=(0,nB.useRouter)(),m=(0,nM.doesBonsaiWebviewSupportFeature)(t,"storeReviewPrompt")&&(0,nM.isInBonsaiWebview)(t),g=(0,i.useCallback)(function(e){var t=e.source;m&&(0,nU.sendMessage)({messageType:nF.BridgeMessageType.REQUEST_STORE_REVIEW_PROMPT,source:t},(0,nV.nanoid)())},[m]),(0,i.useMemo)(function(){return{isSupported:m,requestPrompt:g}},[m,g])),M=(0,nt.useIsExpoStack)(),L=void 0!==R,B=(0,K.default)(),V=null==R?void 0:R.provider,F=L&&R.machineConfiguration?{configurationId:R.machineConfiguration.id,configurationLabel:R.machineConfiguration.label,configurationSlug:R.machineConfiguration.slug,maxInstances:null==R?void 0:R.maxMachineInstances}:void 0,U=(0,nL.default)("deployments-pane","deployments-mobile-download"),G=U.shouldDisplay,$=U.dismiss,H=U.register;(0,i.useEffect)(function(){H()},[H]),(0,i.useEffect)(function(){L&&T===l.DeploymentMode.Deploying&&N.requestPrompt({source:"deployProgress"})},[N,L,T]);var z=(null==R?void 0:R.status)&&R.status===a.HostingBuildStatus.Success&&G&&!D&&!M,W=(0,n._)((0,i.useState)(!1),2),q=W[0],Y=W[1],Q=(0,n._)((0,i.useState)(null),2),X=Q[0],Z=Q[1],J=(0,n._)((0,i.useState)(null),2),ee=J[0],et=J[1],en=(0,n._)((0,i.useState)(null),2),er=en[0],ei=en[1];(0,i.useEffect)(function(){(0,u.trackDeploymentSectionViewed)({context:c.Views.Deployment})},[]),(0,i.useEffect)(function(){(T===l.DeploymentMode.Preparing||T===l.DeploymentMode.PreparingDatabase||T===l.DeploymentMode.Deploying)&&(x===c.Views.DeploymentInProgress||ee||b({type:c.ViewActionType.ChangeView,payload:{view:c.Views.DeploymentInProgress}}))},[T,x,b,ee]);var ea=(0,nN.default)(null==I?void 0:I.id),eo=(null==R?void 0:R.status)===a.HostingBuildStatus.Success,es=(null==R?void 0:R.id)===ea.current,el=(0,i.useRef)(void 0),eu=(0,n._)((0,i.useState)(!1),2),ed=eu[0],ef=eu[1];(0,i.useEffect)(function(){eo&&es&&(null==R?void 0:R.id)&&el.current!==R.id&&(el.current=R.id,b({type:c.ViewActionType.ChangeView,payload:{view:c.Views.Deployment}}))},[eo,null==R?void 0:R.id,es,b]);var ep=null==I?void 0:I.status,eh=(0,i.useRef)(ep);(0,i.useEffect)(function(){ep&&(eh.current=ep)},[ep]);var em=(0,o.useDotReplitService)(),eg=(0,o.usePortsService)();if(ee)return(0,r.jsx)(nC,{build:ee,fs:A,openFile:_,openPane:k,onBack:function(){et(null)},onViewAppLogs:function(){b({type:c.ViewActionType.ChangeView,payload:{view:c.Views.Logs}})}});if(X)return(0,r.jsx)(nS,{build:X,onBack:function(){Z(null)},onClickRollback:function(e){O({rollbackCandidateBuildId:X.id,envVars:e})},onError:function(e){Z(null),w(e)}});if(er===a.HostingBuildProvider.CloudRun)return(0,r.jsx)(h.AutoscaleMachineConfiguration,{type:a.HostingBuildProvider.CloudRun,onError:w,onConfirm:function(e){b({type:c.ViewActionType.SendDeploymentLifecycleCommand,payload:{command:a.SendDeploymentLifecycleCommandType.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return ei(null)}});if(er===a.HostingBuildProvider.Gce)return(0,r.jsx)(nD.ReservedVMMachineConfiguration,{type:a.HostingBuildProvider.Gce,initialMachineConfiguration:F,onConfirm:function(e){b({type:c.ViewActionType.SendDeploymentLifecycleCommand,payload:{command:a.SendDeploymentLifecycleCommandType.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return ei(null)},onError:w,provider:null!=V?V:a.HostingBuildProvider.Gce});var ev=T===l.DeploymentMode.Deploying||T===l.DeploymentMode.Preparing||T===l.DeploymentMode.PreparingDatabase,ex=L&&null!=E,ey=T===l.DeploymentMode.Ready||T===l.DeploymentMode.Suspended||T===l.DeploymentMode.ProcessingLifecycleCommand||ev;return(0,r.jsxs)(f.PaneSection,{children:[(0,r.jsxs)(ec.View,{row:!0,gap:12,children:[L?(0,r.jsx)(p.TimelinePoint,{type:"future"}):null,(0,r.jsxs)(ec.View,{grow:!0,shrink:!0,gap:12,pb:12,children:[ex&&ey&&E?(0,r.jsx)(d.ConfigRedeploy,{dotReplit:em,fs:A,secrets:P,ports:eg,deploymentId:E,replId:B,onError:w,expanded:q,setExpanded:Y,shouldShowMobileTour:null!=z&&z,onDismissMobileTour:$,openNetworkingPane:function(){b({type:c.ViewActionType.OpenPane,payload:{type:"developer",data:{tab:["networking"]}}})},onResume:function(){y({command:a.SendDeploymentLifecycleCommandType.Resume})},hasAgentSession:S,onViewAction:b,view:x,openFile:_,openPane:k,hasCurrentBuild:L,onViewLogs:function(){b({type:c.ViewActionType.ChangeView,payload:{view:c.Views.Logs}})},onCanceled:function(){b({type:c.ViewActionType.ChangeView,payload:{view:c.Views.Deployment}}),w("Build cancelled")}}):null,x===c.Views.DeploymentInProgress?(0,r.jsx)(tY,{openFile:_,openPane:k,viewBuildLogsOnLoad:!L,onViewLogs:function(){b({type:c.ViewActionType.ChangeView,payload:{view:c.Views.Logs}})},onCanceled:function(){b({type:c.ViewActionType.ChangeView,payload:{view:c.Views.Deployment}}),w("Build cancelled")},onError:w}):null]})]}),L&&V?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nv,{type:"failureQueue",onViewBuildLogs:et,openFile:_,openPane:k,view:x,provider:V}),(0,r.jsxs)(ec.View,{css:nG.deploymentInfoWrapper,row:!0,gap:12,children:[(0,r.jsx)(p.TimelinePoint,{type:"present",hideLine:ed}),(0,r.jsx)(ec.View,{grow:!0,shrink:!0,gap:12,pb:16,children:(0,r.jsx)(nO.DeploymentInfo,{provider:V,machine:F,onViewBuildLogs:et,onManageClick:function(){V===a.HostingBuildProvider.CloudRun||V===a.HostingBuildProvider.Gce?ei(V):V===a.HostingBuildProvider.Static&&b({type:c.ViewActionType.ChangeView,payload:{view:c.Views.Settings}})},onViewAction:b,expoLaunchStateObservable:C,performExpoLaunchAction:j})})]}),(0,r.jsx)(nv,{onViewBuildLogs:et,openFile:_,openPane:k,view:x,provider:V,onClickRollback:function(e){Z(e)},onDataLoaded:ef})]}):null]})};e.s(["Deployment",()=>n$],684340);var nH=e.i(304277);function nz(){var e=(0,E._)(["\n  query LinkablePurchasedDomains {\n    currentUser {\n      id\n      domains(managed: true, onlyUnlinked: true) {\n        items {\n          id\n          domain\n        }\n      }\n    }\n  }\n"]);return nz=function(){return e},e}function nW(){var e=(0,E._)(["\n  mutation LinkPurchasedDomain(\n    $replId: String!\n    $domainName: String!\n    $deploymentId: String!\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      deploymentId: $deploymentId\n      domain: $domainName\n    ) {\n      __typename\n      ... on Repl {\n        id\n      }\n    }\n  }\n"]);return nW=function(){return e},e}e.i(566901);var nq={},nK=(0,tO.gql)(nz());function nY(e){var t=(0,_._)({},nq,e);return nH.useQuery(nK,t)}var nQ=(0,tO.gql)(nW());function nX(e){var t=(0,_._)({},nq,e);return tN.useMutation(nQ,t)}function nZ(){var e=(0,E._)(["\n  mutation BuyDomain($input: BuyDomainInput!) {\n    buyDomain(input: $input) {\n      ... on BuyDomainOutput {\n        scheduled\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return nZ=function(){return e},e}function nJ(){var e=(0,E._)(["\n  query GetPaymentMethod {\n    currentUser {\n      id\n      paymentMethod {\n        ... on Error {\n          message\n        }\n        ... on PaymentMethod {\n          id\n          last4\n        }\n      }\n    }\n  }\n"]);return nJ=function(){return e},e}e.s(["LinkablePurchasedDomainsDocument",()=>nK,"useLinkPurchasedDomainMutation",()=>nX,"useLinkablePurchasedDomainsQuery",()=>nY],413655);var n0={},n1=(0,tO.gql)(nZ());function n2(e){var t=(0,_._)({},n0,e);return tN.useMutation(n1,t)}var n3=(0,tO.gql)(nJ());function n5(e){var t=(0,_._)({},n0,e);return nH.useQuery(n3,t)}e.s(["useBuyDomainMutation",()=>n2,"useGetPaymentMethodQuery",()=>n5],340766)},224119,e=>{e.v({screenReaderOnly:"StaticTable-module__XQhYrW__screenReaderOnly",table:"StaticTable-module__XQhYrW__table",tableCell:"StaticTable-module__XQhYrW__tableCell",tableHeader:"StaticTable-module__XQhYrW__tableHeader",tableRow:"StaticTable-module__XQhYrW__tableRow",tableWrapper:"StaticTable-module__XQhYrW__tableWrapper",tableWrapperBorderless:"StaticTable-module__XQhYrW__tableWrapperBorderless"})},448451,e=>{e.v({buttonsContainer:"ConnectDomain-module__5q3fXq__buttonsContainer",listBoxHeader:"ConnectDomain-module__5q3fXq__listBoxHeader"})},312984,e=>{e.v({dnsTable:"DnsChecker-module__wH6YzW__dnsTable",strikeThrough:"DnsChecker-module__wH6YzW__strikeThrough"})},898861,e=>{e.v({tooltipIcon:"DomainEmailVerificationStatus-module__lifyaq__tooltipIcon"})},604425,e=>{e.v({pill:"DomainLinkingProgressBanner-module__WfXoEW__pill"})},869212,e=>{e.v({domainStatusDot:"DomainVerificationStatus-module__bjcnYG__domainStatusDot",statusDotWrapper:"DomainVerificationStatus-module__bjcnYG__statusDotWrapper",statusText:"DomainVerificationStatus-module__bjcnYG__statusText"})},674478,e=>{e.v({accordionCard:"DomainManagement-module__vE8JyW__accordionCard",accordionFooter:"DomainManagement-module__vE8JyW__accordionFooter",addRow:"DomainManagement-module__vE8JyW__addRow",addRowHasMx:"DomainManagement-module__vE8JyW__addRowHasMx",dnsRecordsAccordionHeader:"DomainManagement-module__vE8JyW__dnsRecordsAccordionHeader",dnsRecordsStaticHeader:"DomainManagement-module__vE8JyW__dnsRecordsStaticHeader",key:"DomainManagement-module__vE8JyW__key",sectionRow:"DomainManagement-module__vE8JyW__sectionRow"})},124489,e=>{e.v({hideOnTablet:"DomainRow-module__tHjzwq__hideOnTablet"})},609141,e=>{e.v({buyWrapper:"index-module__wyk3-W__buyWrapper",scrollContainer:"index-module__wyk3-W__scrollContainer"})},855312,(e,t,n)=>{"use strict";var r=/["'&<>]/;t.exports=function(e){var t,n=""+e,i=r.exec(n);if(!i)return n;var a="",o=0,s=0;for(o=i.index;o<n.length;o++){switch(n.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}s!==o&&(a+=n.substring(s,o)),s=o+1,a+=t}return s!==o?a+n.substring(s,o):a}},652742,e=>{e.v({clickable:"AdvancedSettings-module__Uy3UFW__clickable",container:"AdvancedSettings-module__Uy3UFW__container",contentBorder:"AdvancedSettings-module__Uy3UFW__contentBorder",hiddenContent:"AdvancedSettings-module__Uy3UFW__hiddenContent",sectionDivider:"AdvancedSettings-module__Uy3UFW__sectionDivider",statusBanner:"AdvancedSettings-module__Uy3UFW__statusBanner"})},721697,e=>{e.v({editBadge:"AppIconEditor-module__ggSsLq__editBadge",editBadgeVisible:"AppIconEditor-module__ggSsLq__editBadgeVisible",hiddenInput:"AppIconEditor-module__ggSsLq__hiddenInput",iconTrigger:"AppIconEditor-module__ggSsLq__iconTrigger",iconWrapper:"AppIconEditor-module__ggSsLq__iconWrapper"})},343446,e=>{e.v({cancelButton:"PublishAppInfo-module__oUfyxG__cancelButton",editable:"PublishAppInfo-module__oUfyxG__editable",errorText:"PublishAppInfo-module__oUfyxG__errorText",titleInput:"PublishAppInfo-module__oUfyxG__titleInput",titleRow:"PublishAppInfo-module__oUfyxG__titleRow",titleText:"PublishAppInfo-module__oUfyxG__titleText"})},517681,e=>{e.v({container:"PublishIntroText-module__-IEJRa__container",surfaceBgColor:"PublishIntroText-module__-IEJRa__surfaceBgColor",title:"PublishIntroText-module__-IEJRa__title"})},694772,e=>{e.v({clickable:"SimpleIntro-module__pzm8kq__clickable",cloudBudgetUpsell:"SimpleIntro-module__pzm8kq__cloudBudgetUpsell",cloudBudgetUpsellHeader:"SimpleIntro-module__pzm8kq__cloudBudgetUpsellHeader",container:"SimpleIntro-module__pzm8kq__container",payment:"SimpleIntro-module__pzm8kq__payment",roundedSurface:"SimpleIntro-module__pzm8kq__roundedSurface"})},918560,100287,985845,969084,104571,150281,251299,12732,e=>{"use strict";var t,n,r,i,a,o,s,l,u,c,d,f,p,h,m,g,x=e.i(530658),y=e.i(276385),b=e.i(389959),w=e.i(358637),_=e.i(368964),k=e.i(416298),S=e.i(107129),C=e.i(241703),j=e.i(32995),T=e.i(686631),E=e.i(346715),R=e.i(199674),I=e.i(636567),A=e.i(413655),P=e.i(416746),D=e.i(995691),O=e.i(40916),N=e.i(379334),M=e.i(399344),L=e.i(297083),B=e.i(167626),V=e.i(817556),F=e.i(340766),U=e.i(257982),G=e.i(87995),$=e.i(138716),H=e.i(204977),z=e.i(269848),W=e.i(828454),q=e.i(406802),K=e.i(480028),Y=e.i(446530),Q=e.i(173703),X=e.i(613355),Z=e.i(140487),J=e.i(136540),ee=e.i(624782),et=e.i(11235),en=e.i(960178),er=e.i(751273),ei=e.i(625484),ea=(0,Y.cssRecord)({scrollArea:[{overflowY:"auto",minHeight:0,maxHeight:"100%"}],primaryActionButton:[X.rcss.width("100%"),X.rcss.py(12),{fontSize:K.tokens.fontSizeDefault}],confirmDetails:[X.rcss.borderRadius(4)],detailRow:[X.rcss.rowWithGap(8),X.rcss.justify.spaceBetween],errorMessage:[X.rcss.borderRadius(4),X.rcss.backgroundColor.accentNegativeDimmest],root:[X.rcss.overflow("hidden")],relativeContainer:[{position:"relative",minHeight:0,maxHeight:"100%"}]});function eo(e){var t,n,r,i=e.isBillingInfoLoading,a=e.selectedDomain,o=e.contactInfo,s=e.purchaseErrorMessage,l=e.handleBuyDomain,u=e.isPurchasing,c=e.lastFour,d=e.onGoBack,f=e.onEditContact,p=(n=(t=(0,x._)((0,b.useState)(!1),2))[0],r=t[1],(0,q.useTimeout)(function(){r(!0)},1e3),n);return i?(0,y.jsxs)(ei.View,{align:"center",p:8,children:[(0,y.jsx)(z.default,{size:16}),(0,y.jsx)(en.Text,{children:"Loading your billing information..."})]}):c?(0,y.jsxs)(ei.View,{p:8,gap:16,css:ea.root,shrink:!0,children:[(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",children:[(0,y.jsx)(J.IconButton,{alt:"Go back",onClick:d,children:(0,y.jsx)($.default,{})}),(0,y.jsx)(en.Header,{level:2,children:"Confirm Domain Purchase"}),(0,y.jsx)(ee.Pill,{colorway:"primary",text:"Beta"})]}),(0,y.jsx)(ei.View,{css:ea.relativeContainer,shrink:!0,children:(0,y.jsxs)(ei.View,{gap:16,css:ea.scrollArea,shrink:!0,children:[(0,y.jsxs)(Q.ShadesSurface,{gap:8,css:ea.confirmDetails,p:12,children:[(0,y.jsxs)(ei.View,{css:ea.detailRow,children:[(0,y.jsx)(en.Text,{color:"dimmer",children:"Domain:"}),(0,y.jsx)(en.Text,{children:a.domainName})]}),(0,y.jsxs)(ei.View,{css:ea.detailRow,children:[(0,y.jsx)(en.Text,{color:"dimmer",children:"Price:"}),a.years>1?(0,y.jsx)(er.Tooltip,{tooltip:"Some domains such as .ai must be purchased and renewed in multi-year increments. You will be charged for ".concat(a.years," years up front."),children:(0,y.jsxs)("span",{children:[(0,W.formatPrice)(a.purchasePrice)," for"," ",a.years," years"]})}):(0,y.jsx)(en.Text,{children:(0,W.formatPrice)(a.purchasePrice)})]}),a.renewalPrice?(0,y.jsx)(er.Tooltip,{tooltip:a.years>1?"Some domains such as .ai must be purchased and renewed in multi-year increments. Your domain will renew every ".concat(a.years," years for the displayed price."):"You can always cancel the renewal later",children:(0,y.jsxs)(ei.View,{css:ea.detailRow,children:[(0,y.jsx)(en.Text,{color:"dimmer",children:a.years>1?"Renewal:":"Annual renewal:"}),(0,y.jsxs)(en.Text,{children:[(0,W.formatPrice)(a.renewalPrice)," ",a.years>1?"every ".concat(a.years," years"):"/year"]})]})}):null,(0,y.jsxs)(ei.View,{css:ea.detailRow,children:[(0,y.jsx)(en.Text,{color:"dimmer",children:"Payment method:"}),(0,y.jsxs)(en.Text,{children:["Your card ending in"," ",(0,y.jsx)(en.Text,{variant:"code",children:c.toString()})]})]})]}),(0,y.jsxs)(Q.ShadesSurface,{gap:8,css:ea.confirmDetails,p:12,children:[(0,y.jsxs)(ei.View,{row:!0,justify:"space-between",align:"center",children:[(0,y.jsx)(en.Text,{color:"dimmer",children:"Contact Information"}),(0,y.jsx)(J.IconButton,{alt:"Edit contact",onClick:f,children:(0,y.jsx)(H.default,{size:16})})]}),(0,y.jsxs)(ei.View,{css:ea.detailRow,children:[(0,y.jsx)(en.Text,{color:"dimmer",children:"Name:"}),(0,y.jsxs)(en.Text,{children:[o.firstName," ",o.lastName]})]}),o.companyName?(0,y.jsxs)(ei.View,{css:ea.detailRow,children:[(0,y.jsx)(en.Text,{color:"dimmer",children:"Company:"}),(0,y.jsx)(en.Text,{children:o.companyName})]}):null,(0,y.jsxs)(ei.View,{css:ea.detailRow,children:[(0,y.jsx)(en.Text,{color:"dimmer",children:"Email:"}),(0,y.jsx)(en.Text,{children:o.email})]}),(0,y.jsxs)(ei.View,{css:ea.detailRow,children:[(0,y.jsx)(en.Text,{color:"dimmer",children:"Phone:"}),(0,y.jsx)(en.Text,{children:o.phone})]}),(0,y.jsxs)(ei.View,{css:ea.detailRow,children:[(0,y.jsx)(en.Text,{color:"dimmer",children:"Address:"}),(0,y.jsxs)(ei.View,{gap:4,children:[(0,y.jsx)(en.Text,{children:o.address1}),o.address2?(0,y.jsx)(en.Text,{children:o.address2}):null,(0,y.jsxs)(en.Text,{children:[o.city,", ",o.state," ",o.zip]}),(0,y.jsx)(en.Text,{children:o.country})]})]})]}),s?(0,y.jsxs)(ei.View,{css:ea.errorMessage,gap:4,p:12,children:[(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",children:[(0,y.jsx)(k.default,{size:16,color:K.tokens.accentNegativeDefault}),(0,y.jsx)(en.Text,{color:"dimmer",children:"Purchase failed"})]}),(0,y.jsx)(en.Text,{color:"dimmer",children:s})]}):null,(0,y.jsx)(ei.View,{justify:"center",children:(0,y.jsx)(Z.Button,{variant:"default",colorway:"positive",onClick:l,loading:u,text:"Confirm Purchase",disabled:!p,css:ea.primaryActionButton})}),(0,y.jsxs)(et.Prose,{color:"dimmer",variant:"small",children:["Domain purchases are non-refundable. You will be charged immediately for the registration price of"," ",(0,W.formatPrice)(a.purchasePrice)," and every"," ",1===a.years?" year":" ".concat(a.years," years")," ","for the renewal price of ",(0,W.formatPrice)(a.renewalPrice),". Your domain will be available to use immediately. Domain Purchasing on Replit is currently in Beta, and some features may be unavailable. For more information, see our"," ",(0,y.jsx)(G.default,{href:"https://docs.replit.com/cloud-services/deployments/domain-purchasing",target:"_blank",children:"Documentation"}),". For additional help, contact Replit Support."]})]})})]}):(0,y.jsxs)(ei.View,{p:8,children:[(0,y.jsx)(en.Text,{children:"No payment method found"}),(0,y.jsx)(en.Text,{children:"Please add a payment method to your account and return to this screen."})]})}var es=e.i(793203);function el(){return(0,y.jsx)(ei.View,{gap:16,pt:16,children:(0,y.jsxs)(ei.View,{align:"center",gap:16,children:[(0,y.jsx)(z.default,{size:32}),(0,y.jsx)(en.Text,{variant:"subheadDefault",children:(0,y.jsx)("strong",{children:"Processing your domain purchase"})})]})})}var eu=e.i(341734),ec=e.i(183035),ed=e.i(232949),ef=e.i(162914),ep=e.i(858248),eh=e.i(709485),em=e.i(85742),eg=e.i(698043),ev=e.i(498540),ex=(0,Y.cssRecord)({scrollArea:[{display:"flex",flexDirection:"column",overflowY:"auto",minHeight:0,paddingBottom:8,flexShrink:1}],domainResult:[X.rcss.borderRadius(8),X.rcss.border({color:K.tokens.outlineDimmer}),X.rcss.hover([X.rcss.border({color:K.tokens.outlineDefault}),X.rcss.backgroundColor.accentPrimaryDimmest]),X.rcss.mb(8)],noResults:[X.rcss.borderRadius(8),X.rcss.border({color:K.tokens.outlineDimmer}),X.rcss.mb(8)],root:[X.rcss.overflow("hidden")]});function ey(e){var t,n,r,i,a,o,s,l,u,c=e.suggestedDomain,d=e.onDomainSelect,f=e.onGoBack,p=(n=(t=(0,x._)((0,b.useState)(c||""),2))[0],r=t[1],i=(0,ef.default)(n,500),o=(a=(0,eu.useSearchForDomainQuery)({variables:{input:{keyword:i}}})).data,s=a.loading,l=a.error,u=(null==o?void 0:o.searchDomains)&&"DomainSearchOutput"===o.searchDomains.__typename?o.searchDomains.results.filter(Boolean):[],(0,b.useEffect)(function(){i&&i.length>0&&(0,ep.track)(eh.events.DOMAIN_PURCHASE,{action:"search_performed",searchTerm:i,resultsCount:u.length})},[i,u.length]),{searchTerm:n,setSearchTerm:r,searchResults:u,debouncedSearchTerm:i,loading:s||n!==i,error:l}),h=p.searchTerm,m=p.setSearchTerm,g=p.searchResults,w=p.loading,_=p.error,S=p.debouncedSearchTerm;return(0,y.jsxs)(ei.View,{css:ex.root,gap:8,grow:!0,shrink:!0,px:8,pt:8,children:[(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",children:[(0,y.jsx)(J.IconButton,{onClick:f,alt:"Back to domains",children:(0,y.jsx)($.default,{})}),(0,y.jsx)(en.Header,{level:2,variant:"subheadDefault",children:"Buy a new domain"}),(0,y.jsx)(ee.Pill,{colorway:"primary",text:"Beta"})]}),(0,y.jsx)(ei.View,{tag:"label",row:!0,gap:8,align:"center",children:(0,y.jsx)(en.Text,{color:"dimmer",children:"Search for a domain to buy"})}),(0,y.jsxs)(eg.SearchableListBox,{children:[(0,y.jsx)(ev.SearchField,{autoFocus:!0,placeholder:"Search for a domain...",value:h,onChange:function(e){return m(e)}}),(0,y.jsx)(em.ListBox,{css:ex.scrollArea,onAction:function(e){var t=g.find(function(t){return t.domainName===e});t&&d(t)},items:g,isLoading:w,renderEmptyState:function(){return(0,y.jsxs)(ei.View,{gap:8,align:"stretch",children:[(0,y.jsx)(ei.View,{css:ex.noResults,align:"center",justify:"center",p:16,children:(0,y.jsx)(en.Text,{color:"dimmer",children:S?'No domains found matching "'.concat(S,'"'):"Enter a domain name to search"})}),_?(0,y.jsxs)(ei.View,{row:!0,gap:4,align:"center",justify:"center",children:[(0,y.jsx)(k.default,{size:12,color:K.tokens.orangeDefault}),(0,y.jsx)(en.Text,{variant:"small",color:"dimmer",children:_.message})]}):null]})},children:function(e){return(0,y.jsxs)(em.BaseListBoxItem,{textValue:"".concat(e.domainName," - ").concat(e.purchasable?"available":"unavailable"," ").concat(e.years>1?"".concat((0,W.formatPrice)(e.purchasePrice)," for ").concat(e.years," years"):(0,W.formatPrice)(e.purchasePrice)),id:e.domainName,css:ex.domainResult,children:[(0,y.jsxs)(ei.View,{gap:4,grow:!0,children:[(0,y.jsxs)(ei.View,{row:!0,gap:4,align:"center",children:[(0,y.jsx)(en.Text,{children:e.domainName}),e.purchasable?(0,y.jsx)(ei.View,{row:!0,gap:2,align:"center",children:(0,y.jsx)(ec.default,{size:12,color:K.tokens.accentPositiveDefault})}):null,e.premium?(0,y.jsx)(ed.default,{size:12,color:K.tokens.accentPrimaryDefault}):null]}),null!=e.renewalPrice&&(0,y.jsx)(en.Text,{variant:"small",color:"dimmer",children:e.years>1?(0,y.jsx)(er.Tooltip,{tooltip:"Some domains such as .ai must be purchased and renewed in multi-year increments. Your domain will renew every ".concat(e.years," years for the displayed price."),children:(0,y.jsxs)("span",{children:["Renews at ",(0,W.formatPrice)(e.renewalPrice)," every"," ",e.years," years"]})}):(0,y.jsxs)(y.Fragment,{children:["Renews at ",(0,W.formatPrice)(e.renewalPrice),"/yr"]})})]}),(0,y.jsx)(en.Text,{children:e.years>1?(0,y.jsx)(er.Tooltip,{tooltip:"Some domains such as .ai must be purchased and renewed in multi-year increments. You will be charged for ".concat(e.years," years up front."),children:(0,y.jsxs)("span",{children:[(0,W.formatPrice)(e.purchasePrice)," for ",e.years," ","years"]})}):(0,W.formatPrice)(e.purchasePrice)})]},e.domainName)}})]}),(0,y.jsx)(ei.View,{})]})}var eb=e.i(993796);function ew(e){var t,n,r=(0,F.useGetPaymentMethodQuery)(),i=r.data,a=r.loading,o=(0,W.useDomainState)(),s=o.state,l=o.dispatch,u=(0,eb.useFlag)({controlName:"flag-domains-glowup",default:!1}),c=(0,x._)((0,F.useBuyDomainMutation)({refetchQueries:[{query:I.HostingDeploymentDomainsDocument,variables:{id:e.deploymentId,isGlowup:u}}],awaitRefetchQueries:!0,onCompleted:function(t){"BuyDomainOutput"===t.buyDomain.__typename&&t.buyDomain.scheduled&&e.onRequestClose()}}),2),d=c[0],f=c[1].loading;switch(s.step){case"search":return(0,y.jsx)(ey,{suggestedDomain:e.suggestedDomain,onDomainSelect:function(e){(0,ep.track)(eh.events.DOMAIN_PURCHASE,{action:"selected",domainName:e.domainName,tld:e.tld,sld:e.sld,purchasePrice:e.purchasePrice,renewalPrice:e.renewalPrice,years:e.years,premium:e.premium}),l({type:"select_domain",payload:e})},onGoBack:e.onRequestClose});case"contact":return(0,y.jsx)(es.ContactStep,{selectedDomain:s.selectedDomain,preservedContactInfo:s.contactInfo,onSubmit:function(e){l({type:"contact_submitted",payload:e})},onBack:function(){return l({type:"search"})},isSubmitting:!1});case"confirm":return(0,y.jsx)(eo,{lastFour:(null==i||null==(n=i.currentUser)||null==(t=n.paymentMethod)?void 0:t.__typename)==="PaymentMethod"?i.currentUser.paymentMethod.last4:null,isBillingInfoLoading:a,onGoBack:function(){return l({type:"edit_contact"})},onEditContact:function(){return l({type:"edit_contact"})},selectedDomain:s.selectedDomain,contactInfo:s.contactInfo,purchaseErrorMessage:s.purchaseErrorMessage,handleBuyDomain:function(){return(0,L._)(function(){var t,n,r,i;return(0,V._)(this,function(a){switch(a.label){case 0:if("confirm"!==s.step||null==s.selectedDomain||null==s.contactInfo)return[2];(0,ep.track)(eh.events.DOMAIN_PURCHASE,{action:"confirmed",sld:s.selectedDomain.sld,tld:s.selectedDomain.tld,domainName:s.selectedDomain.domainName,purchasePrice:s.selectedDomain.purchasePrice,years:s.selectedDomain.years}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,d({variables:{input:{years:s.selectedDomain.years,domainName:s.selectedDomain.domainName,contact:s.contactInfo,hostingDeploymentId:e.deploymentId,expectedChargeAmountCents:null!=s.selectedDomain.purchasePrice?Math.round(100*s.selectedDomain.purchasePrice):0}}})];case 2:return(null==(t=(n=a.sent()).data)?void 0:t.buyDomain)?"BuyDomainOutput"===n.data.buyDomain.__typename&&n.data.buyDomain.scheduled?(l({type:"processing"}),(0,ep.track)(eh.events.DOMAIN_PURCHASE,{action:"completed",deploymentId:e.deploymentId,domainName:s.selectedDomain.domainName,purchasePrice:s.selectedDomain.purchasePrice,years:s.selectedDomain.years})):"UserError"===n.data.buyDomain.__typename?((0,ep.track)(eh.events.DOMAIN_PURCHASE,{action:"failed",domainName:s.selectedDomain.domainName,sld:s.selectedDomain.sld,tld:s.selectedDomain.tld,error:n.data.buyDomain.message}),l({type:"purchase_failed",payload:n.data.buyDomain.message})):"UnauthorizedError"===n.data.buyDomain.__typename&&((0,ep.track)(eh.events.DOMAIN_PURCHASE,{action:"failed",domainName:s.selectedDomain.domainName,sld:s.selectedDomain.sld,tld:s.selectedDomain.tld,error:n.data.buyDomain.message}),l({type:"purchase_failed",payload:n.data.buyDomain.message})):((0,ep.track)(eh.events.DOMAIN_PURCHASE,{action:"failed",domainName:s.selectedDomain.domainName,sld:s.selectedDomain.sld,tld:s.selectedDomain.tld,error:"Network error or unexpected response"}),l({type:"purchase_failed",payload:"An unexpected error occurred. Please try again."})),[3,4];case 3:return r=a.sent(),i=(0,B._)(r,Error)?r.message:"An unexpected error occurred",(0,ep.track)(eh.events.DOMAIN_PURCHASE,{action:"failed",domainName:s.selectedDomain.domainName,sld:s.selectedDomain.sld,tld:s.selectedDomain.tld,error:i}),l({type:"purchase_failed",payload:i}),[3,4];case 4:return[2]}})})()},isPurchasing:f});case"processing":return(0,y.jsx)(el,{});default:(0,U.default)(s)}}var e_=e.i(721281),ek=e.i(713547),eS=e.i(568430),eC=e.i(820228),ej=e.i(491194),eT=e.i(205158),eE=e.i(878420),eR=e.i(64386),eI=e.i(402099),eA=function(e,t){for(var n=e.slice(),r=[],i=t;0!==n.length;){var a=n.pop(),o=a.toLowerCase();if(i.children.has("*")){if(i.children.has("!"+o))break;i=i.children.get("*")}else{if(!1===i.children.has(o))break;i=i.children.get(o)}r.unshift(a)}return r},eP="[a-fA-F\\d:]",eD=function(e){return e&&e.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(eP,")|(?<=").concat(eP,")(?=\\s|$))"):""},eO="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",eN="[a-fA-F\\d]{1,4}",eM="\n(?:\n(?:".concat(eN,":){7}(?:").concat(eN,"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:").concat(eN,":){6}(?:").concat(eO,"|:").concat(eN,"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:").concat(eN,":){5}(?::").concat(eO,"|(?::").concat(eN,"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:").concat(eN,":){4}(?:(?::").concat(eN,"){0,1}:").concat(eO,"|(?::").concat(eN,"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:").concat(eN,":){3}(?:(?::").concat(eN,"){0,2}:").concat(eO,"|(?::").concat(eN,"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:").concat(eN,":){2}(?:(?::").concat(eN,"){0,3}:").concat(eO,"|(?::").concat(eN,"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:").concat(eN,":){1}(?:(?::").concat(eN,"){0,4}:").concat(eO,"|(?::").concat(eN,"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::").concat(eN,"){0,5}:").concat(eO,"|(?::").concat(eN,"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),eL=new RegExp("(?:^".concat(eO,"$)|(?:^").concat(eM,"$)")),eB=new RegExp("^".concat(eO,"$")),eV=new RegExp("^".concat(eM,"$")),eF=function(e){return e&&e.exact?eL:RegExp("(?:".concat(eD(e)).concat(eO).concat(eD(e),")|(?:").concat(eD(e)).concat(eM).concat(eD(e),")"),"g")};eF.v4=function(e){return e&&e.exact?eB:RegExp("".concat(eD(e)).concat(eO).concat(eD(e)),"g")},eF.v6=function(e){return e&&e.exact?eV:RegExp("".concat(eD(e)).concat(eM).concat(eD(e)),"g")};var eU=Object.prototype.toString,eG={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function e$(e,t){var n,r;(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).timeout;try{return(n=function(){return(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("[object RegExp]"!==eU.call(e))throw TypeError("Expected a RegExp instance");var n=Object.keys(eG).map(function(n){return("boolean"==typeof t[n]?t[n]:e[n])?eG[n]:""}).join(""),r=new RegExp(t.source||e.source,n);return r.lastIndex="number"==typeof t.lastIndex?t.lastIndex:e.lastIndex,r})(e).test(t)},r=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,(0,E._)(t))},Object.defineProperty(r,"name",{value:"functionTimeout(".concat(n.name||"<anonymous>",")"),configurable:!0}),r)()}catch(e){throw e}}var eH={timeout:400},ez=new TextEncoder;(t=s||(s={})).Lax="LAX",t.Strict="STRICT",(n=l||(l={})).NoHostname="NO_HOSTNAME",n.DomainMaxLength="DOMAIN_MAX_LENGTH",n.LabelMinLength="LABEL_MIN_LENGTH",n.LabelMaxLength="LABEL_MAX_LENGTH",n.LabelInvalidCharacter="LABEL_INVALID_CHARACTER",n.LastLabelInvalid="LAST_LABEL_INVALID",(r=u||(u={})).ValidIp="VALID_IP",r.ValidDomain="VALID_DOMAIN",r.Error="ERROR";var eW=function(e,t){var n=e.length;return{type:l.LabelMinLength,message:'Label "'.concat(e,'" is too short. Label is ').concat(n," octets long but should be at least ").concat(1,"."),column:t}},eq=function(e,t){var n=e.length;return{type:l.LabelMaxLength,message:'Label "'.concat(e,'" is too long. Label is ').concat(n," octets long but should not be longer than ").concat(63,"."),column:t}},eK=function(e,t,n){return{type:l.LabelInvalidCharacter,message:'Label "'.concat(e,'" contains invalid character "').concat(t,'" at column ').concat(n,"."),column:n}},eY=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)return{type:u.Error,errors:[{type:l.NoHostname,message:"The given input ".concat(String(e)," does not look like a hostname."),column:1}]};if(""===e)return{type:u.ValidDomain,domain:e,labels:[]};var r=e.replace(/^\[|]$/g,""),i=function(e){return!(e.length>45)&&e$(eF.v6({exact:!0}),e,eH)?6:!(e.length>15)&&e$(eF.v4({exact:!0}),e,eH)?4:void 0}(r);if(void 0!==i)return{type:u.ValidIp,ip:r,ipVersion:i};var a="."===e.charAt(e.length-1)?e.slice(0,-1):e,o=new TextEncoder().encode(a);if(o.length>253)return{type:u.Error,errors:[(t=o.length,{type:l.DomainMaxLength,message:'Domain "'.concat(e,'" is too long. Domain is ').concat(t," octets long but should not be longer than ").concat(253,"."),column:t})]};var c=a.split("."),d=n.validation,f=eQ[void 0===d?s.Strict:d](c);return f.length>0?{type:u.Error,errors:f}:{type:u.ValidDomain,domain:e,labels:c}},eQ=(c={},(0,e_._)(c,s.Lax,function(e){var t=[],n=1,r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value,u=ez.encode(l);u.length<1?t.push(eW(l,n)):u.length>63&&t.push(eq(l,n)),n+=l.length+1}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t}),(0,e_._)(c,s.Strict,function(e){var t,n,r=[],i=1,a=!0,o=!1,s=void 0;try{for(var u,c,d=e[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var f=c.value,p=/[^\da-z-]/i.exec(f);p&&r.push(eK(f,p[0],p.index+1)),f.startsWith("-")?r.push(eK(f,"-",i)):f.endsWith("-")&&r.push(eK(f,"-",i+f.length-1)),f.length<1?r.push(eW(f,i)):f.length>63&&r.push(eq(f,i)),i+=f.length+1,u=f}}catch(e){o=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(o)throw s}}return void 0!==u&&!1===RegExp("[a-z-]","iu").test(u)&&r.push((t=u,n=i-u.length-1,{type:l.LabelInvalidCharacter,message:'Last label "'.concat(t,'" must not be all-numeric.'),column:n})),r}),c),eX=Symbol("ROOT"),eZ=Symbol("CHILD"),eJ=function(e,t){var n=e.children.get(t);return void 0===n&&(n={type:eZ,label:t,children:new Map,parent:e},e.children.set(t,n)),n},e0=function(e){for(var t={type:eX,children:new Map},n="",r=t,i=t,a=function(){i=eJ(r,n),n=""},o=0;o<e.length;o++){var s=e.charAt(o);switch(s){case",":a();continue;case">":a(),r=i;continue;case"|":a(),r=t;continue;case"<":if(r.type===eX)throw Error("Error in serialized trie at position ".concat(o,": Cannot go up, current parent node is already root"));a(),r=r.parent;continue}n+=s}return""!==n&&a(),t},e1=["localhost","local","example","invalid","test"];(i=d||(d={})).Invalid="INVALID",i.Ip="IP",i.Reserved="RESERVED",i.NotListed="NOT_LISTED",i.Listed="LISTED";var e2=function(e,t){return{subDomains:e.slice(0,Math.max(0,t)),domain:t>=0&&t<e.length?e[t]:void 0,topLevelDomains:e.slice(t+1)}},e3=function(e,t){var n=eY(e,t);if(n.type===u.Error)return{type:d.Invalid,hostname:e,errors:n.errors};if(n.type===u.ValidIp)return{type:d.Ip,hostname:n.ip,ipVersion:n.ipVersion};var r=n.labels,i=n.domain;if(""===e||e1.includes(r[r.length-1]))return{type:d.Reserved,hostname:i,labels:r};f=null!=f?f:e0("ac>com,edu,gov,net,mil,org<ad>nom<ae>co,net,org,sch,ac,gov,mil<aero>airline,airport,accident-investigation,accident-prevention,aerobatic,aeroclub,aerodrome,agents,air-surveillance,air-traffic-control,aircraft,airtraffic,ambulance,association,author,ballooning,broker,caa,cargo,catering,certification,championship,charter,civilaviation,club,conference,consultant,consulting,control,council,crew,design,dgca,educator,emergency,engine,engineer,entertainment,equipment,exchange,express,federation,flight,freight,fuel,gliding,government,groundhandling,group,hanggliding,homebuilt,insurance,journal,journalist,leasing,logistics,magazine,maintenance,marketplace,media,microlight,modelling,navigation,parachuting,paragliding,passenger-association,pilot,press,production,recreation,repbody,res,research,rotorcraft,safety,scientist,services,show,skydiving,software,student,taxi,trader,trading,trainer,union,workinggroup,works<af>gov,com,org,net,edu<ag>com,org,net,co,nom<ai>off,com,net,org<al>com,edu,gov,mil,net,org<am>co,com,commune,net,org<ao>ed,gv,og,co,pb,it<aq,ar>bet,com,coop,edu,gob,gov,int,mil,musica,mutual,net,org,senasa,tur<arpa>e164,in-addr,ip6,iris,uri,urn<as>gov<asia,at>ac>sth<co,gv,or<au>com,net,org,edu>act,catholic,nsw>schools<nt,qld,sa,tas,vic,wa<gov>qld,sa,tas,vic,wa<asn,id,info,conf,oz,act,nsw,nt,qld,sa,tas,vic,wa<aw>com<ax,az>com,net,int,gov,org,edu,info,pp,mil,name,pro,biz<ba>com,edu,gov,mil,net,org<bb>biz,co,com,edu,gov,info,net,org,store,tv<bd>*<be>ac<bf>gov<bg>a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,0,1,2,3,4,5,6,7,8,9<bh>com,edu,net,org,gov<bi>co,com,edu,or,org<biz,bj>africa,agro,architectes,assur,avocats,co,com,eco,econo,edu,info,loisirs,money,net,org,ote,resto,restaurant,tourism,univ<bm>com,edu,gov,net,org<bn>com,edu,gov,net,org<bo>com,edu,gob,int,org,net,mil,tv,web,academia,agro,arte,blog,bolivia,ciencia,cooperativa,democracia,deporte,ecologia,economia,empresa,indigena,industria,info,medicina,movimiento,musica,natural,nombre,noticias,patria,politica,profesional,plurinacional,pueblo,revista,salud,tecnologia,tksat,transporte,wiki<br>9guacu,abc,adm,adv,agr,aju,am,anani,aparecida,app,arq,art,ato,b,barueri,belem,bhz,bib,bio,blog,bmd,boavista,bsb,campinagrande,campinas,caxias,cim,cng,cnt,com,contagem,coop,coz,cri,cuiaba,curitiba,def,des,det,dev,ecn,eco,edu,emp,enf,eng,esp,etc,eti,far,feira,flog,floripa,fm,fnd,fortal,fot,foz,fst,g12,geo,ggf,goiania,gov>ac,al,am,ap,ba,ce,df,es,go,ma,mg,ms,mt,pa,pb,pe,pi,pr,rj,rn,ro,rr,rs,sc,se,sp,to<gru,imb,ind,inf,jab,jampa,jdf,joinville,jor,jus,leg,lel,log,londrina,macapa,maceio,manaus,maringa,mat,med,mil,morena,mp,mus,natal,net,niteroi,nom>*<not,ntr,odo,ong,org,osasco,palmas,poa,ppg,pro,psc,psi,pvh,qsl,radio,rec,recife,rep,ribeirao,rio,riobranco,riopreto,salvador,sampa,santamaria,santoandre,saobernardo,saogonca,seg,sjc,slg,slz,sorocaba,srv,taxi,tc,tec,teo,the,tmp,trd,tur,tv,udi,vet,vix,vlog,wiki,zlg<bs>com,net,org,edu,gov<bt>com,edu,gov,net,org<bv,bw>co,org<by>gov,mil,com,of<bz>com,net,org,edu,gov<ca>ab,bc,mb,nb,nf,nl,ns,nt,nu,on,pe,qc,sk,yk,gc<cat,cc,cd>gov<cf,cg,ch,ci>org,or,com,co,edu,ed,ac,net,go,asso,xn--aroport-bya,int,presse,md,gouv<ck>*,!www<cl>co,gob,gov,mil<cm>co,com,gov,net<cn>ac,com,edu,gov,net,org,mil,xn--55qx5d,xn--io0a7i,xn--od0alg,ah,bj,cq,fj,gd,gs,gz,gx,ha,hb,he,hi,hl,hn,jl,js,jx,ln,nm,nx,qh,sc,sd,sh,sn,sx,tj,xj,xz,yn,zj,hk,mo,tw<co>arts,com,edu,firm,gov,info,int,mil,net,nom,org,rec,web<com,coop,cr>ac,co,ed,fi,go,or,sa<cu>com,edu,org,net,gov,inf<cv>com,edu,int,nome,org<cw>com,edu,net,org<cx>gov<cy>ac,biz,com,ekloges,gov,ltd,mil,net,org,press,pro,tm<cz,de,dj,dk,dm>com,net,org,edu,gov<do>art,com,edu,gob,gov,mil,net,org,sld,web<dz>art,asso,com,edu,gov,org,net,pol,soc,tm<ec>com,info,net,fin,k12,med,pro,org,edu,gov,gob,mil<edu,ee>edu,gov,riik,lib,med,com,pri,aip,org,fie<eg>com,edu,eun,gov,mil,name,net,org,sci<er>*<es>com,nom,org,gob,edu<et>com,gov,org,edu,biz,name,info,net<eu,fi>aland<fj>ac,biz,com,gov,info,mil,name,net,org,pro<fk>*<fm>com,edu,net,org<fo,fr>asso,com,gouv,nom,prd,tm,avoues,cci,greta,huissier-justice<ga,gb,gd>edu,gov<ge>com,edu,gov,org,mil,net,pvt<gf,gg>co,net,org<gh>com,edu,gov,org,mil<gi>com,ltd,gov,mod,edu,org<gl>co,com,edu,net,org<gm,gn>ac,com,edu,gov,org,net<gov,gp>com,net,mobi,edu,org,asso<gq,gr>com,edu,net,org,gov<gs,gt>com,edu,gob,ind,mil,net,org<gu>com,edu,gov,guam,info,net,org,web<gw,gy>co,com,edu,gov,net,org<hk>com,edu,gov,idv,net,org,xn--55qx5d,xn--wcvs22d,xn--lcvr32d,xn--mxtq1m,xn--gmqw5a,xn--ciqpn,xn--gmq050i,xn--zf0avx,xn--io0a7i,xn--mk0axi,xn--od0alg,xn--od0aq3b,xn--tn0ag,xn--uc0atv,xn--uc0ay4a<hm,hn>com,edu,org,net,mil,gob<hr>iz,from,name,com<ht>com,shop,firm,info,adult,net,pro,org,med,art,coop,pol,asso,edu,rel,gouv,perso<hu>co,info,org,priv,sport,tm,2000,agrar,bolt,casino,city,erotica,erotika,film,forum,games,hotel,ingatlan,jogasz,konyvelo,lakas,media,news,reklam,sex,shop,suli,szex,tozsde,utazas,video<id>ac,biz,co,desa,go,mil,my,net,or,ponpes,sch,web<ie>gov<il>ac,co,gov,idf,k12,muni,net,org<xn--4dbrk0ce>xn--4dbgdty6c,xn--5dbhl8d,xn--8dbq2a,xn--hebda8b<im>ac,co>ltd,plc<com,net,org,tt,tv<in>5g,6g,ac,ai,am,bihar,biz,business,ca,cn,co,com,coop,cs,delhi,dr,edu,er,firm,gen,gov,gujarat,ind,info,int,internet,io,me,mil,net,nic,org,pg,post,pro,res,travel,tv,uk,up,us<info,int>eu<io>com<iq>gov,edu,mil,com,org,net<ir>ac,co,gov,id,net,org,sch,xn--mgba3a4f16a,xn--mgba3a4fra<is>net,com,edu,gov,org,int<it>gov,edu,abr,abruzzo,aosta-valley,aostavalley,bas,basilicata,cal,calabria,cam,campania,emilia-romagna,emiliaromagna,emr,friuli-v-giulia,friuli-ve-giulia,friuli-vegiulia,friuli-venezia-giulia,friuli-veneziagiulia,friuli-vgiulia,friuliv-giulia,friulive-giulia,friulivegiulia,friulivenezia-giulia,friuliveneziagiulia,friulivgiulia,fvg,laz,lazio,lig,liguria,lom,lombardia,lombardy,lucania,mar,marche,mol,molise,piedmont,piemonte,pmn,pug,puglia,sar,sardegna,sardinia,sic,sicilia,sicily,taa,tos,toscana,trentin-sud-tirol,xn--trentin-sd-tirol-rzb,trentin-sudtirol,xn--trentin-sdtirol-7vb,trentin-sued-tirol,trentin-suedtirol,trentino-a-adige,trentino-aadige,trentino-alto-adige,trentino-altoadige,trentino-s-tirol,trentino-stirol,trentino-sud-tirol,xn--trentino-sd-tirol-c3b,trentino-sudtirol,xn--trentino-sdtirol-szb,trentino-sued-tirol,trentino-suedtirol,trentino,trentinoa-adige,trentinoaadige,trentinoalto-adige,trentinoaltoadige,trentinos-tirol,trentinostirol,trentinosud-tirol,xn--trentinosd-tirol-rzb,trentinosudtirol,xn--trentinosdtirol-7vb,trentinosued-tirol,trentinosuedtirol,trentinsud-tirol,xn--trentinsd-tirol-6vb,trentinsudtirol,xn--trentinsdtirol-nsb,trentinsued-tirol,trentinsuedtirol,tuscany,umb,umbria,val-d-aosta,val-daosta,vald-aosta,valdaosta,valle-aosta,valle-d-aosta,valle-daosta,valleaosta,valled-aosta,valledaosta,vallee-aoste,xn--valle-aoste-ebb,vallee-d-aoste,xn--valle-d-aoste-ehb,valleeaoste,xn--valleaoste-e7a,valleedaoste,xn--valledaoste-ebb,vao,vda,ven,veneto,ag,agrigento,al,alessandria,alto-adige,altoadige,an,ancona,andria-barletta-trani,andria-trani-barletta,andriabarlettatrani,andriatranibarletta,ao,aosta,aoste,ap,aq,aquila,ar,arezzo,ascoli-piceno,ascolipiceno,asti,at,av,avellino,ba,balsan-sudtirol,xn--balsan-sdtirol-nsb,balsan-suedtirol,balsan,bari,barletta-trani-andria,barlettatraniandria,belluno,benevento,bergamo,bg,bi,biella,bl,bn,bo,bologna,bolzano-altoadige,bolzano,bozen-sudtirol,xn--bozen-sdtirol-2ob,bozen-suedtirol,bozen,br,brescia,brindisi,bs,bt,bulsan-sudtirol,xn--bulsan-sdtirol-nsb,bulsan-suedtirol,bulsan,bz,ca,cagliari,caltanissetta,campidano-medio,campidanomedio,campobasso,carbonia-iglesias,carboniaiglesias,carrara-massa,carraramassa,caserta,catania,catanzaro,cb,ce,cesena-forli,xn--cesena-forl-mcb,cesenaforli,xn--cesenaforl-i8a,ch,chieti,ci,cl,cn,co,como,cosenza,cr,cremona,crotone,cs,ct,cuneo,cz,dell-ogliastra,dellogliastra,en,enna,fc,fe,fermo,ferrara,fg,fi,firenze,florence,fm,foggia,forli-cesena,xn--forl-cesena-fcb,forlicesena,xn--forlcesena-c8a,fr,frosinone,ge,genoa,genova,go,gorizia,gr,grosseto,iglesias-carbonia,iglesiascarbonia,im,imperia,is,isernia,kr,la-spezia,laquila,laspezia,latina,lc,le,lecce,lecco,li,livorno,lo,lodi,lt,lu,lucca,macerata,mantova,massa-carrara,massacarrara,matera,mb,mc,me,medio-campidano,mediocampidano,messina,mi,milan,milano,mn,mo,modena,monza-brianza,monza-e-della-brianza,monza,monzabrianza,monzaebrianza,monzaedellabrianza,ms,mt,na,naples,napoli,no,novara,nu,nuoro,og,ogliastra,olbia-tempio,olbiatempio,or,oristano,ot,pa,padova,padua,palermo,parma,pavia,pc,pd,pe,perugia,pesaro-urbino,pesarourbino,pescara,pg,pi,piacenza,pisa,pistoia,pn,po,pordenone,potenza,pr,prato,pt,pu,pv,pz,ra,ragusa,ravenna,rc,re,reggio-calabria,reggio-emilia,reggiocalabria,reggioemilia,rg,ri,rieti,rimini,rm,rn,ro,roma,rome,rovigo,sa,salerno,sassari,savona,si,siena,siracusa,so,sondrio,sp,sr,ss,suedtirol,xn--sdtirol-n2a,sv,ta,taranto,te,tempio-olbia,tempioolbia,teramo,terni,tn,to,torino,tp,tr,trani-andria-barletta,trani-barletta-andria,traniandriabarletta,tranibarlettaandria,trapani,trento,treviso,trieste,ts,turin,tv,ud,udine,urbino-pesaro,urbinopesaro,va,varese,vb,vc,ve,venezia,venice,verbania,vercelli,verona,vi,vibo-valentia,vibovalentia,vicenza,viterbo,vr,vs,vt,vv<je>co,net,org<jm>*<jo>com,org,net,edu,sch,gov,mil,name<jobs,jp>ac,ad,co,ed,go,gr,lg,ne,or,aichi>aisai,ama,anjo,asuke,chiryu,chita,fuso,gamagori,handa,hazu,hekinan,higashiura,ichinomiya,inazawa,inuyama,isshiki,iwakura,kanie,kariya,kasugai,kira,kiyosu,komaki,konan,kota,mihama,miyoshi,nishio,nisshin,obu,oguchi,oharu,okazaki,owariasahi,seto,shikatsu,shinshiro,shitara,tahara,takahama,tobishima,toei,togo,tokai,tokoname,toyoake,toyohashi,toyokawa,toyone,toyota,tsushima,yatomi<akita>akita,daisen,fujisato,gojome,hachirogata,happou,higashinaruse,honjo,honjyo,ikawa,kamikoani,kamioka,katagami,kazuno,kitaakita,kosaka,kyowa,misato,mitane,moriyoshi,nikaho,noshiro,odate,oga,ogata,semboku,yokote,yurihonjo<aomori>aomori,gonohe,hachinohe,hashikami,hiranai,hirosaki,itayanagi,kuroishi,misawa,mutsu,nakadomari,noheji,oirase,owani,rokunohe,sannohe,shichinohe,shingo,takko,towada,tsugaru,tsuruta<chiba>abiko,asahi,chonan,chosei,choshi,chuo,funabashi,futtsu,hanamigawa,ichihara,ichikawa,ichinomiya,inzai,isumi,kamagaya,kamogawa,kashiwa,katori,katsuura,kimitsu,kisarazu,kozaki,kujukuri,kyonan,matsudo,midori,mihama,minamiboso,mobara,mutsuzawa,nagara,nagareyama,narashino,narita,noda,oamishirasato,omigawa,onjuku,otaki,sakae,sakura,shimofusa,shirako,shiroi,shisui,sodegaura,sosa,tako,tateyama,togane,tohnosho,tomisato,urayasu,yachimata,yachiyo,yokaichiba,yokoshibahikari,yotsukaido<ehime>ainan,honai,ikata,imabari,iyo,kamijima,kihoku,kumakogen,masaki,matsuno,matsuyama,namikata,niihama,ozu,saijo,seiyo,shikokuchuo,tobe,toon,uchiko,uwajima,yawatahama<fukui>echizen,eiheiji,fukui,ikeda,katsuyama,mihama,minamiechizen,obama,ohi,ono,sabae,sakai,takahama,tsuruga,wakasa<fukuoka>ashiya,buzen,chikugo,chikuho,chikujo,chikushino,chikuzen,chuo,dazaifu,fukuchi,hakata,higashi,hirokawa,hisayama,iizuka,inatsuki,kaho,kasuga,kasuya,kawara,keisen,koga,kurate,kurogi,kurume,minami,miyako,miyama,miyawaka,mizumaki,munakata,nakagawa,nakama,nishi,nogata,ogori,okagaki,okawa,oki,omuta,onga,onojo,oto,saigawa,sasaguri,shingu,shinyoshitomi,shonai,soeda,sue,tachiarai,tagawa,takata,toho,toyotsu,tsuiki,ukiha,umi,usui,yamada,yame,yanagawa,yukuhashi<fukushima>aizubange,aizumisato,aizuwakamatsu,asakawa,bandai,date,fukushima,furudono,futaba,hanawa,higashi,hirata,hirono,iitate,inawashiro,ishikawa,iwaki,izumizaki,kagamiishi,kaneyama,kawamata,kitakata,kitashiobara,koori,koriyama,kunimi,miharu,mishima,namie,nango,nishiaizu,nishigo,okuma,omotego,ono,otama,samegawa,shimogo,shirakawa,showa,soma,sukagawa,taishin,tamakawa,tanagura,tenei,yabuki,yamato,yamatsuri,yanaizu,yugawa<gifu>anpachi,ena,gifu,ginan,godo,gujo,hashima,hichiso,hida,higashishirakawa,ibigawa,ikeda,kakamigahara,kani,kasahara,kasamatsu,kawaue,kitagata,mino,minokamo,mitake,mizunami,motosu,nakatsugawa,ogaki,sakahogi,seki,sekigahara,shirakawa,tajimi,takayama,tarui,toki,tomika,wanouchi,yamagata,yaotsu,yoro<gunma>annaka,chiyoda,fujioka,higashiagatsuma,isesaki,itakura,kanna,kanra,katashina,kawaba,kiryu,kusatsu,maebashi,meiwa,midori,minakami,naganohara,nakanojo,nanmoku,numata,oizumi,ora,ota,shibukawa,shimonita,shinto,showa,takasaki,takayama,tamamura,tatebayashi,tomioka,tsukiyono,tsumagoi,ueno,yoshioka<hiroshima>asaminami,daiwa,etajima,fuchu,fukuyama,hatsukaichi,higashihiroshima,hongo,jinsekikogen,kaita,kui,kumano,kure,mihara,miyoshi,naka,onomichi,osakikamijima,otake,saka,sera,seranishi,shinichi,shobara,takehara<hokkaido>abashiri,abira,aibetsu,akabira,akkeshi,asahikawa,ashibetsu,ashoro,assabu,atsuma,bibai,biei,bifuka,bihoro,biratori,chippubetsu,chitose,date,ebetsu,embetsu,eniwa,erimo,esan,esashi,fukagawa,fukushima,furano,furubira,haboro,hakodate,hamatonbetsu,hidaka,higashikagura,higashikawa,hiroo,hokuryu,hokuto,honbetsu,horokanai,horonobe,ikeda,imakane,ishikari,iwamizawa,iwanai,kamifurano,kamikawa,kamishihoro,kamisunagawa,kamoenai,kayabe,kembuchi,kikonai,kimobetsu,kitahiroshima,kitami,kiyosato,koshimizu,kunneppu,kuriyama,kuromatsunai,kushiro,kutchan,kyowa,mashike,matsumae,mikasa,minamifurano,mombetsu,moseushi,mukawa,muroran,naie,nakagawa,nakasatsunai,nakatombetsu,nanae,nanporo,nayoro,nemuro,niikappu,niki,nishiokoppe,noboribetsu,numata,obihiro,obira,oketo,okoppe,otaru,otobe,otofuke,otoineppu,oumu,ozora,pippu,rankoshi,rebun,rikubetsu,rishiri,rishirifuji,saroma,sarufutsu,shakotan,shari,shibecha,shibetsu,shikabe,shikaoi,shimamaki,shimizu,shimokawa,shinshinotsu,shintoku,shiranuka,shiraoi,shiriuchi,sobetsu,sunagawa,taiki,takasu,takikawa,takinoue,teshikaga,tobetsu,tohma,tomakomai,tomari,toya,toyako,toyotomi,toyoura,tsubetsu,tsukigata,urakawa,urausu,uryu,utashinai,wakkanai,wassamu,yakumo,yoichi<hyogo>aioi,akashi,ako,amagasaki,aogaki,asago,ashiya,awaji,fukusaki,goshiki,harima,himeji,ichikawa,inagawa,itami,kakogawa,kamigori,kamikawa,kasai,kasuga,kawanishi,miki,minamiawaji,nishinomiya,nishiwaki,ono,sanda,sannan,sasayama,sayo,shingu,shinonsen,shiso,sumoto,taishi,taka,takarazuka,takasago,takino,tamba,tatsuno,toyooka,yabu,yashiro,yoka,yokawa<ibaraki>ami,asahi,bando,chikusei,daigo,fujishiro,hitachi,hitachinaka,hitachiomiya,hitachiota,ibaraki,ina,inashiki,itako,iwama,joso,kamisu,kasama,kashima,kasumigaura,koga,miho,mito,moriya,naka,namegata,oarai,ogawa,omitama,ryugasaki,sakai,sakuragawa,shimodate,shimotsuma,shirosato,sowa,suifu,takahagi,tamatsukuri,tokai,tomobe,tone,toride,tsuchiura,tsukuba,uchihara,ushiku,yachiyo,yamagata,yawara,yuki<ishikawa>anamizu,hakui,hakusan,kaga,kahoku,kanazawa,kawakita,komatsu,nakanoto,nanao,nomi,nonoichi,noto,shika,suzu,tsubata,tsurugi,uchinada,wajima<iwate>fudai,fujisawa,hanamaki,hiraizumi,hirono,ichinohe,ichinoseki,iwaizumi,iwate,joboji,kamaishi,kanegasaki,karumai,kawai,kitakami,kuji,kunohe,kuzumaki,miyako,mizusawa,morioka,ninohe,noda,ofunato,oshu,otsuchi,rikuzentakata,shiwa,shizukuishi,sumita,tanohata,tono,yahaba,yamada<kagawa>ayagawa,higashikagawa,kanonji,kotohira,manno,marugame,mitoyo,naoshima,sanuki,tadotsu,takamatsu,tonosho,uchinomi,utazu,zentsuji<kagoshima>akune,amami,hioki,isa,isen,izumi,kagoshima,kanoya,kawanabe,kinko,kouyama,makurazaki,matsumoto,minamitane,nakatane,nishinoomote,satsumasendai,soo,tarumizu,yusui<kanagawa>aikawa,atsugi,ayase,chigasaki,ebina,fujisawa,hadano,hakone,hiratsuka,isehara,kaisei,kamakura,kiyokawa,matsuda,minamiashigara,miura,nakai,ninomiya,odawara,oi,oiso,sagamihara,samukawa,tsukui,yamakita,yamato,yokosuka,yugawara,zama,zushi<kochi>aki,geisei,hidaka,higashitsuno,ino,kagami,kami,kitagawa,kochi,mihara,motoyama,muroto,nahari,nakamura,nankoku,nishitosa,niyodogawa,ochi,okawa,otoyo,otsuki,sakawa,sukumo,susaki,tosa,tosashimizu,toyo,tsuno,umaji,yasuda,yusuhara<kumamoto>amakusa,arao,aso,choyo,gyokuto,kamiamakusa,kikuchi,kumamoto,mashiki,mifune,minamata,minamioguni,nagasu,nishihara,oguni,ozu,sumoto,takamori,uki,uto,yamaga,yamato,yatsushiro<kyoto>ayabe,fukuchiyama,higashiyama,ide,ine,joyo,kameoka,kamo,kita,kizu,kumiyama,kyotamba,kyotanabe,kyotango,maizuru,minami,minamiyamashiro,miyazu,muko,nagaokakyo,nakagyo,nantan,oyamazaki,sakyo,seika,tanabe,uji,ujitawara,wazuka,yamashina,yawata<mie>asahi,inabe,ise,kameyama,kawagoe,kiho,kisosaki,kiwa,komono,kumano,kuwana,matsusaka,meiwa,mihama,minamiise,misugi,miyama,nabari,shima,suzuka,tado,taiki,taki,tamaki,toba,tsu,udono,ureshino,watarai,yokkaichi<miyagi>furukawa,higashimatsushima,ishinomaki,iwanuma,kakuda,kami,kawasaki,marumori,matsushima,minamisanriku,misato,murata,natori,ogawara,ohira,onagawa,osaki,rifu,semine,shibata,shichikashuku,shikama,shiogama,shiroishi,tagajo,taiwa,tome,tomiya,wakuya,watari,yamamoto,zao<miyazaki>aya,ebino,gokase,hyuga,kadogawa,kawaminami,kijo,kitagawa,kitakata,kitaura,kobayashi,kunitomi,kushima,mimata,miyakonojo,miyazaki,morotsuka,nichinan,nishimera,nobeoka,saito,shiiba,shintomi,takaharu,takanabe,takazaki,tsuno<nagano>achi,agematsu,anan,aoki,asahi,azumino,chikuhoku,chikuma,chino,fujimi,hakuba,hara,hiraya,iida,iijima,iiyama,iizuna,ikeda,ikusaka,ina,karuizawa,kawakami,kiso,kisofukushima,kitaaiki,komagane,komoro,matsukawa,matsumoto,miasa,minamiaiki,minamimaki,minamiminowa,minowa,miyada,miyota,mochizuki,nagano,nagawa,nagiso,nakagawa,nakano,nozawaonsen,obuse,ogawa,okaya,omachi,omi,ookuwa,ooshika,otaki,otari,sakae,sakaki,saku,sakuho,shimosuwa,shinanomachi,shiojiri,suwa,suzaka,takagi,takamori,takayama,tateshina,tatsuno,togakushi,togura,tomi,ueda,wada,yamagata,yamanouchi,yasaka,yasuoka<nagasaki>chijiwa,futsu,goto,hasami,hirado,iki,isahaya,kawatana,kuchinotsu,matsuura,nagasaki,obama,omura,oseto,saikai,sasebo,seihi,shimabara,shinkamigoto,togitsu,tsushima,unzen<nara>ando,gose,heguri,higashiyoshino,ikaruga,ikoma,kamikitayama,kanmaki,kashiba,kashihara,katsuragi,kawai,kawakami,kawanishi,koryo,kurotaki,mitsue,miyake,nara,nosegawa,oji,ouda,oyodo,sakurai,sango,shimoichi,shimokitayama,shinjo,soni,takatori,tawaramoto,tenkawa,tenri,uda,yamatokoriyama,yamatotakada,yamazoe,yoshino<niigata>aga,agano,gosen,itoigawa,izumozaki,joetsu,kamo,kariwa,kashiwazaki,minamiuonuma,mitsuke,muika,murakami,myoko,nagaoka,niigata,ojiya,omi,sado,sanjo,seiro,seirou,sekikawa,shibata,tagami,tainai,tochio,tokamachi,tsubame,tsunan,uonuma,yahiko,yoita,yuzawa<oita>beppu,bungoono,bungotakada,hasama,hiji,himeshima,hita,kamitsue,kokonoe,kuju,kunisaki,kusu,oita,saiki,taketa,tsukumi,usa,usuki,yufu<okayama>akaiwa,asakuchi,bizen,hayashima,ibara,kagamino,kasaoka,kibichuo,kumenan,kurashiki,maniwa,misaki,nagi,niimi,nishiawakura,okayama,satosho,setouchi,shinjo,shoo,soja,takahashi,tamano,tsuyama,wake,yakage<okinawa>aguni,ginowan,ginoza,gushikami,haebaru,higashi,hirara,iheya,ishigaki,ishikawa,itoman,izena,kadena,kin,kitadaito,kitanakagusuku,kumejima,kunigami,minamidaito,motobu,nago,naha,nakagusuku,nakijin,nanjo,nishihara,ogimi,okinawa,onna,shimoji,taketomi,tarama,tokashiki,tomigusuku,tonaki,urasoe,uruma,yaese,yomitan,yonabaru,yonaguni,zamami<osaka>abeno,chihayaakasaka,chuo,daito,fujiidera,habikino,hannan,higashiosaka,higashisumiyoshi,higashiyodogawa,hirakata,ibaraki,ikeda,izumi,izumiotsu,izumisano,kadoma,kaizuka,kanan,kashiwara,katano,kawachinagano,kishiwada,kita,kumatori,matsubara,minato,minoh,misaki,moriguchi,neyagawa,nishi,nose,osakasayama,sakai,sayama,sennan,settsu,shijonawate,shimamoto,suita,tadaoka,taishi,tajiri,takaishi,takatsuki,tondabayashi,toyonaka,toyono,yao<saga>ariake,arita,fukudomi,genkai,hamatama,hizen,imari,kamimine,kanzaki,karatsu,kashima,kitagata,kitahata,kiyama,kouhoku,kyuragi,nishiarita,ogi,omachi,ouchi,saga,shiroishi,taku,tara,tosu,yoshinogari<saitama>arakawa,asaka,chichibu,fujimi,fujimino,fukaya,hanno,hanyu,hasuda,hatogaya,hatoyama,hidaka,higashichichibu,higashimatsuyama,honjo,ina,iruma,iwatsuki,kamiizumi,kamikawa,kamisato,kasukabe,kawagoe,kawaguchi,kawajima,kazo,kitamoto,koshigaya,kounosu,kuki,kumagaya,matsubushi,minano,misato,miyashiro,miyoshi,moroyama,nagatoro,namegawa,niiza,ogano,ogawa,ogose,okegawa,omiya,otaki,ranzan,ryokami,saitama,sakado,satte,sayama,shiki,shiraoka,soka,sugito,toda,tokigawa,tokorozawa,tsurugashima,urawa,warabi,yashio,yokoze,yono,yorii,yoshida,yoshikawa,yoshimi<shiga>aisho,gamo,higashiomi,hikone,koka,konan,kosei,koto,kusatsu,maibara,moriyama,nagahama,nishiazai,notogawa,omihachiman,otsu,ritto,ryuoh,takashima,takatsuki,torahime,toyosato,yasu<shimane>akagi,ama,gotsu,hamada,higashiizumo,hikawa,hikimi,izumo,kakinoki,masuda,matsue,misato,nishinoshima,ohda,okinoshima,okuizumo,shimane,tamayu,tsuwano,unnan,yakumo,yasugi,yatsuka<shizuoka>arai,atami,fuji,fujieda,fujikawa,fujinomiya,fukuroi,gotemba,haibara,hamamatsu,higashiizu,ito,iwata,izu,izunokuni,kakegawa,kannami,kawanehon,kawazu,kikugawa,kosai,makinohara,matsuzaki,minamiizu,mishima,morimachi,nishiizu,numazu,omaezaki,shimada,shimizu,shimoda,shizuoka,susono,yaizu,yoshida<tochigi>ashikaga,bato,haga,ichikai,iwafune,kaminokawa,kanuma,karasuyama,kuroiso,mashiko,mibu,moka,motegi,nasu,nasushiobara,nikko,nishikata,nogi,ohira,ohtawara,oyama,sakura,sano,shimotsuke,shioya,takanezawa,tochigi,tsuga,ujiie,utsunomiya,yaita<tokushima>aizumi,anan,ichiba,itano,kainan,komatsushima,matsushige,mima,minami,miyoshi,mugi,nakagawa,naruto,sanagochi,shishikui,tokushima,wajiki<tokyo>adachi,akiruno,akishima,aogashima,arakawa,bunkyo,chiyoda,chofu,chuo,edogawa,fuchu,fussa,hachijo,hachioji,hamura,higashikurume,higashimurayama,higashiyamato,hino,hinode,hinohara,inagi,itabashi,katsushika,kita,kiyose,kodaira,koganei,kokubunji,komae,koto,kouzushima,kunitachi,machida,meguro,minato,mitaka,mizuho,musashimurayama,musashino,nakano,nerima,ogasawara,okutama,ome,oshima,ota,setagaya,shibuya,shinagawa,shinjuku,suginami,sumida,tachikawa,taito,tama,toshima<tottori>chizu,hino,kawahara,koge,kotoura,misasa,nanbu,nichinan,sakaiminato,tottori,wakasa,yazu,yonago<toyama>asahi,fuchu,fukumitsu,funahashi,himi,imizu,inami,johana,kamiichi,kurobe,nakaniikawa,namerikawa,nanto,nyuzen,oyabe,taira,takaoka,tateyama,toga,tonami,toyama,unazuki,uozu,yamada<wakayama>arida,aridagawa,gobo,hashimoto,hidaka,hirogawa,inami,iwade,kainan,kamitonda,katsuragi,kimino,kinokawa,kitayama,koya,koza,kozagawa,kudoyama,kushimoto,mihama,misato,nachikatsuura,shingu,shirahama,taiji,tanabe,wakayama,yuasa,yura<yamagata>asahi,funagata,higashine,iide,kahoku,kaminoyama,kaneyama,kawanishi,mamurogawa,mikawa,murayama,nagai,nakayama,nanyo,nishikawa,obanazawa,oe,oguni,ohkura,oishida,sagae,sakata,sakegawa,shinjo,shirataka,shonai,takahata,tendo,tozawa,tsuruoka,yamagata,yamanobe,yonezawa,yuza<yamaguchi>abu,hagi,hikari,hofu,iwakuni,kudamatsu,mitou,nagato,oshima,shimonoseki,shunan,tabuse,tokuyama,toyota,ube,yuu<yamanashi>chuo,doshi,fuefuki,fujikawa,fujikawaguchiko,fujiyoshida,hayakawa,hokuto,ichikawamisato,kai,kofu,koshu,kosuge,minami-alps,minobu,nakamichi,nanbu,narusawa,nirasaki,nishikatsura,oshino,otsuki,showa,tabayama,tsuru,uenohara,yamanakako,yamanashi<xn--4pvxs,xn--vgu402c,xn--c3s14m,xn--f6qx53a,xn--8pvr4u,xn--uist22h,xn--djrs72d6uy,xn--mkru45i,xn--0trq7p7nn,xn--8ltr62k,xn--2m4a15e,xn--efvn9s,xn--32vp30h,xn--4it797k,xn--1lqs71d,xn--5rtp49c,xn--5js045d,xn--ehqz56n,xn--1lqs03n,xn--qqqt11m,xn--kbrq7o,xn--pssu33l,xn--ntsq17g,xn--uisz3g,xn--6btw5a,xn--1ctwo,xn--6orx2r,xn--rht61e,xn--rht27z,xn--djty4k,xn--nit225k,xn--rht3d,xn--klty5x,xn--kltx9a,xn--kltp7d,xn--uuwu58a,xn--zbx025d,xn--ntso0iqx3a,xn--elqq16h,xn--4it168d,xn--klt787d,xn--rny31h,xn--7t0a264c,xn--5rtq34k,xn--k7yn95e,xn--tor131o,xn--d5qv7z876c,kawasaki>*,!city<kitakyushu>*,!city<kobe>*,!city<nagoya>*,!city<sapporo>*,!city<sendai>*,!city<yokohama>*,!city<<ke>ac,co,go,info,me,mobi,ne,or,sc<kg>org,net,com,edu,gov,mil<kh>*<ki>edu,biz,net,org,gov,info,com<km>org,nom,gov,prd,tm,edu,mil,ass,com,coop,asso,presse,medecin,notaires,pharmaciens,veterinaire,gouv<kn>net,org,edu,gov<kp>com,edu,gov,org,rep,tra<kr>ac,co,es,go,hs,kg,mil,ms,ne,or,pe,re,sc,busan,chungbuk,chungnam,daegu,daejeon,gangwon,gwangju,gyeongbuk,gyeonggi,gyeongnam,incheon,jeju,jeonbuk,jeonnam,seoul,ulsan<kw>com,edu,emb,gov,ind,net,org<ky>com,edu,net,org<kz>org,edu,net,gov,mil,com<la>int,net,info,edu,gov,per,com,org<lb>com,edu,gov,net,org<lc>com,net,co,org,edu,gov<li,lk>gov,sch,net,int,com,org,edu,ngo,soc,web,ltd,assn,grp,hotel,ac<lr>com,edu,gov,org,net<ls>ac,biz,co,edu,gov,info,net,org,sc<lt>gov<lu,lv>com,edu,gov,org,mil,id,net,asn,conf<ly>com,net,gov,plc,edu,sch,med,org,id<ma>co,net,gov,org,ac,press<mc>tm,asso<md,me>co,net,org,edu,ac,gov,its,priv<mg>org,nom,gov,prd,tm,edu,mil,com,co<mh,mil,mk>com,org,net,edu,gov,inf,name<ml>com,edu,gouv,gov,net,org,presse<mm>*<mn>gov,edu,org<mo>com,net,org,edu,gov<mobi,mp,mq,mr>gov<ms>com,edu,gov,net,org<mt>com,edu,net,org<mu>com,net,org,gov,ac,co,or<museum,mv>aero,biz,com,coop,edu,gov,info,int,mil,museum,name,net,org,pro<mw>ac,biz,co,com,coop,edu,gov,int,museum,net,org<mx>com,org,gob,edu,net<my>biz,com,edu,gov,mil,name,net,org<mz>ac,adv,co,edu,gov,mil,net,org<na>info,pro,name,school,or,dr,us,mx,ca,in,cc,tv,ws,mobi,co,com,org<name,nc>asso,nom<ne,net,nf>com,net,per,rec,web,arts,firm,info,other,store<ng>com,edu,gov,i,mil,mobi,name,net,org,sch<ni>ac,biz,co,com,edu,gob,in,info,int,mil,net,nom,org,web<nl,no>fhs,vgs,fylkesbibl,folkebibl,museum,idrett,priv,mil,stat,dep,kommune,herad,aa>gs<ah>gs<bu>gs<fm>gs<hl>gs<hm>gs<jan-mayen>gs<mr>gs<nl>gs<nt>gs<of>gs<ol>gs<oslo>gs<rl>gs<sf>gs<st>gs<svalbard>gs<tm>gs<tr>gs<va>gs<vf>gs<akrehamn,xn--krehamn-dxa,algard,xn--lgrd-poac,arna,brumunddal,bryne,bronnoysund,xn--brnnysund-m8ac,drobak,xn--drbak-wua,egersund,fetsund,floro,xn--flor-jra,fredrikstad,hokksund,honefoss,xn--hnefoss-q1a,jessheim,jorpeland,xn--jrpeland-54a,kirkenes,kopervik,krokstadelva,langevag,xn--langevg-jxa,leirvik,mjondalen,xn--mjndalen-64a,mo-i-rana,mosjoen,xn--mosjen-eya,nesoddtangen,orkanger,osoyro,xn--osyro-wua,raholt,xn--rholt-mra,sandnessjoen,xn--sandnessjen-ogb,skedsmokorset,slattum,spjelkavik,stathelle,stavern,stjordalshalsen,xn--stjrdalshalsen-sqb,tananger,tranby,vossevangen,afjord,xn--fjord-lra,agdenes,al,xn--l-1fa,alesund,xn--lesund-hua,alstahaug,alta,xn--lt-liac,alaheadju,xn--laheadju-7ya,alvdal,amli,xn--mli-tla,amot,xn--mot-tla,andebu,andoy,xn--andy-ira,andasuolo,ardal,xn--rdal-poa,aremark,arendal,xn--s-1fa,aseral,xn--seral-lra,asker,askim,askvoll,askoy,xn--asky-ira,asnes,xn--snes-poa,audnedaln,aukra,aure,aurland,aurskog-holand,xn--aurskog-hland-jnb,austevoll,austrheim,averoy,xn--avery-yua,balestrand,ballangen,balat,xn--blt-elab,balsfjord,bahccavuotna,xn--bhccavuotna-k7a,bamble,bardu,beardu,beiarn,bajddar,xn--bjddar-pta,baidar,xn--bidr-5nac,berg,bergen,berlevag,xn--berlevg-jxa,bearalvahki,xn--bearalvhki-y4a,bindal,birkenes,bjarkoy,xn--bjarky-fya,bjerkreim,bjugn,bodo,xn--bod-2na,badaddja,xn--bdddj-mrabd,budejju,bokn,bremanger,bronnoy,xn--brnny-wuac,bygland,bykle,barum,xn--brum-voa,telemark>bo,xn--b-5ga<nordland>bo,xn--b-5ga,heroy,xn--hery-ira<bievat,xn--bievt-0qa,bomlo,xn--bmlo-gra,batsfjord,xn--btsfjord-9za,bahcavuotna,xn--bhcavuotna-s4a,dovre,drammen,drangedal,dyroy,xn--dyry-ira,donna,xn--dnna-gra,eid,eidfjord,eidsberg,eidskog,eidsvoll,eigersund,elverum,enebakk,engerdal,etne,etnedal,evenes,evenassi,xn--eveni-0qa01ga,evje-og-hornnes,farsund,fauske,fuossko,fuoisku,fedje,fet,finnoy,xn--finny-yua,fitjar,fjaler,fjell,flakstad,flatanger,flekkefjord,flesberg,flora,fla,xn--fl-zia,folldal,forsand,fosnes,frei,frogn,froland,frosta,frana,xn--frna-woa,froya,xn--frya-hra,fusa,fyresdal,forde,xn--frde-gra,gamvik,gangaviika,xn--ggaviika-8ya47h,gaular,gausdal,gildeskal,xn--gildeskl-g0a,giske,gjemnes,gjerdrum,gjerstad,gjesdal,gjovik,xn--gjvik-wua,gloppen,gol,gran,grane,granvin,gratangen,grimstad,grong,kraanghke,xn--kranghke-b0a,grue,gulen,hadsel,halden,halsa,hamar,hamaroy,habmer,xn--hbmer-xqa,hapmir,xn--hpmir-xqa,hammerfest,hammarfeasta,xn--hmmrfeasta-s4ac,haram,hareid,harstad,hasvik,aknoluokta,xn--koluokta-7ya57h,hattfjelldal,aarborte,haugesund,hemne,hemnes,hemsedal,more-og-romsdal>heroy,sande<xn--mre-og-romsdal-qqb>xn--hery-ira,sande<hitra,hjartdal,hjelmeland,hobol,xn--hobl-ira,hof,hol,hole,holmestrand,holtalen,xn--holtlen-hxa,hornindal,horten,hurdal,hurum,hvaler,hyllestad,hagebostad,xn--hgebostad-g3a,hoyanger,xn--hyanger-q1a,hoylandet,xn--hylandet-54a,ha,xn--h-2fa,ibestad,inderoy,xn--indery-fya,iveland,jevnaker,jondal,jolster,xn--jlster-bya,karasjok,karasjohka,xn--krjohka-hwab49j,karlsoy,galsa,xn--gls-elac,karmoy,xn--karmy-yua,kautokeino,guovdageaidnu,klepp,klabu,xn--klbu-woa,kongsberg,kongsvinger,kragero,xn--krager-gya,kristiansand,kristiansund,krodsherad,xn--krdsherad-m8a,kvalsund,rahkkeravju,xn--rhkkervju-01af,kvam,kvinesdal,kvinnherad,kviteseid,kvitsoy,xn--kvitsy-fya,kvafjord,xn--kvfjord-nxa,giehtavuoatna,kvanangen,xn--kvnangen-k0a,navuotna,xn--nvuotna-hwa,kafjord,xn--kfjord-iua,gaivuotna,xn--givuotna-8ya,larvik,lavangen,lavagis,loabat,xn--loabt-0qa,lebesby,davvesiida,leikanger,leirfjord,leka,leksvik,lenvik,leangaviika,xn--leagaviika-52b,lesja,levanger,lier,lierne,lillehammer,lillesand,lindesnes,lindas,xn--linds-pra,lom,loppa,lahppi,xn--lhppi-xqa,lund,lunner,luroy,xn--lury-ira,luster,lyngdal,lyngen,ivgu,lardal,lerdal,xn--lrdal-sra,lodingen,xn--ldingen-q1a,lorenskog,xn--lrenskog-54a,loten,xn--lten-gra,malvik,masoy,xn--msy-ula0h,muosat,xn--muost-0qa,mandal,marker,marnardal,masfjorden,meland,meldal,melhus,meloy,xn--mely-ira,meraker,xn--merker-kua,moareke,xn--moreke-jua,midsund,midtre-gauldal,modalen,modum,molde,moskenes,moss,mosvik,malselv,xn--mlselv-iua,malatvuopmi,xn--mlatvuopmi-s4a,namdalseid,aejrie,namsos,namsskogan,naamesjevuemie,xn--nmesjevuemie-tcba,laakesvuemie,nannestad,narvik,narviika,naustdal,nedre-eiker,akershus>nes<buskerud>nes<nesna,nesodden,nesseby,unjarga,xn--unjrga-rta,nesset,nissedal,nittedal,nord-aurdal,nord-fron,nord-odal,norddal,nordkapp,davvenjarga,xn--davvenjrga-y4a,nordre-land,nordreisa,raisa,xn--risa-5na,nore-og-uvdal,notodden,naroy,xn--nry-yla5g,notteroy,xn--nttery-byae,odda,oksnes,xn--ksnes-uua,oppdal,oppegard,xn--oppegrd-ixa,orkdal,orland,xn--rland-uua,orskog,xn--rskog-uua,orsta,xn--rsta-fra,hedmark>os,valer,xn--vler-qoa<hordaland>os<osen,osteroy,xn--ostery-fya,ostre-toten,xn--stre-toten-zcb,overhalla,ovre-eiker,xn--vre-eiker-k8a,oyer,xn--yer-zna,oygarden,xn--ygarden-p1a,oystre-slidre,xn--ystre-slidre-ujb,porsanger,porsangu,xn--porsgu-sta26f,porsgrunn,radoy,xn--rady-ira,rakkestad,rana,ruovat,randaberg,rauma,rendalen,rennebu,rennesoy,xn--rennesy-v1a,rindal,ringebu,ringerike,ringsaker,rissa,risor,xn--risr-ira,roan,rollag,rygge,ralingen,xn--rlingen-mxa,rodoy,xn--rdy-0nab,romskog,xn--rmskog-bya,roros,xn--rros-gra,rost,xn--rst-0na,royken,xn--ryken-vua,royrvik,xn--ryrvik-bya,rade,xn--rde-ula,salangen,siellak,saltdal,salat,xn--slt-elab,xn--slat-5na,samnanger,vestfold>sande<sandefjord,sandnes,sandoy,xn--sandy-yua,sarpsborg,sauda,sauherad,sel,selbu,selje,seljord,sigdal,siljan,sirdal,skaun,skedsmo,ski,skien,skiptvet,skjervoy,xn--skjervy-v1a,skierva,xn--skierv-uta,skjak,xn--skjk-soa,skodje,skanland,xn--sknland-fxa,skanit,xn--sknit-yqa,smola,xn--smla-hra,snillfjord,snasa,xn--snsa-roa,snoasa,snaase,xn--snase-nra,sogndal,sokndal,sola,solund,songdalen,sortland,spydeberg,stange,stavanger,steigen,steinkjer,stjordal,xn--stjrdal-s1a,stokke,stor-elvdal,stord,stordal,storfjord,omasvuotna,strand,stranda,stryn,sula,suldal,sund,sunndal,surnadal,sveio,svelvik,sykkylven,sogne,xn--sgne-gra,somna,xn--smna-gra,sondre-land,xn--sndre-land-0cb,sor-aurdal,xn--sr-aurdal-l8a,sor-fron,xn--sr-fron-q1a,sor-odal,xn--sr-odal-q1a,sor-varanger,xn--sr-varanger-ggb,matta-varjjat,xn--mtta-vrjjat-k7af,sorfold,xn--srfold-bya,sorreisa,xn--srreisa-q1a,sorum,xn--srum-gra,tana,deatnu,time,tingvoll,tinn,tjeldsund,dielddanuorri,tjome,xn--tjme-hra,tokke,tolga,torsken,tranoy,xn--trany-yua,tromso,xn--troms-zua,tromsa,romsa,trondheim,troandin,trysil,trana,xn--trna-woa,trogstad,xn--trgstad-r1a,tvedestrand,tydal,tynset,tysfjord,divtasvuodna,divttasvuotna,tysnes,tysvar,xn--tysvr-vra,tonsberg,xn--tnsberg-q1a,ullensaker,ullensvang,ulvik,utsira,vadso,xn--vads-jra,cahcesuolo,xn--hcesuolo-7ya35b,vaksdal,valle,vang,vanylven,vardo,xn--vard-jra,varggat,xn--vrggt-xqad,vefsn,vaapste,vega,vegarshei,xn--vegrshei-c0a,vennesla,verdal,verran,vestby,vestnes,vestre-slidre,vestre-toten,vestvagoy,xn--vestvgy-ixa6o,vevelstad,vik,vikna,vindafjord,volda,voss,varoy,xn--vry-yla5g,vagan,xn--vgan-qoa,voagat,vagsoy,xn--vgsy-qoa0j,vaga,xn--vg-yiab,ostfold>valer<xn--stfold-9xa>xn--vler-qoa<<np>*<nr>biz,info,gov,edu,org,net,com<nu,nz>ac,co,cri,geek,gen,govt,health,iwi,kiwi,maori,mil,xn--mori-qsa,net,org,parliament,school<om>co,com,edu,gov,med,museum,net,org,pro<onion,org,pa>ac,gob,com,org,sld,edu,net,ing,abo,med,nom<pe>edu,gob,nom,mil,org,com,net<pf>com,org,edu<pg>*<ph>com,net,org,gov,edu,ngo,mil,i<pk>ac,biz,com,edu,fam,gkp,gob,gog,gok,gon,gop,gos,gov,net,org,web<pl>com,net,org,aid,agro,atm,auto,biz,edu,gmina,gsm,info,mail,miasta,media,mil,nieruchomosci,nom,pc,powiat,priv,realestate,rel,sex,shop,sklep,sos,szkola,targi,tm,tourism,travel,turystyka,gov>ap,griw,ic,is,kmpsp,konsulat,kppsp,kwp,kwpsp,mup,mw,oia,oirm,oke,oow,oschr,oum,pa,pinb,piw,po,pr,psp,psse,pup,rzgw,sa,sdn,sko,so,sr,starostwo,ug,ugim,um,umig,upow,uppo,us,uw,uzs,wif,wiih,winb,wios,witd,wiw,wkz,wsa,wskr,wsse,wuoz,wzmiuw,zp,zpisdn<augustow,babia-gora,bedzin,beskidy,bialowieza,bialystok,bielawa,bieszczady,boleslawiec,bydgoszcz,bytom,cieszyn,czeladz,czest,dlugoleka,elblag,elk,glogow,gniezno,gorlice,grajewo,ilawa,jaworzno,jelenia-gora,jgora,kalisz,kazimierz-dolny,karpacz,kartuzy,kaszuby,katowice,kepno,ketrzyn,klodzko,kobierzyce,kolobrzeg,konin,konskowola,kutno,lapy,lebork,legnica,lezajsk,limanowa,lomza,lowicz,lubin,lukow,malbork,malopolska,mazowsze,mazury,mielec,mielno,mragowo,naklo,nowaruda,nysa,olawa,olecko,olkusz,olsztyn,opoczno,opole,ostroda,ostroleka,ostrowiec,ostrowwlkp,pila,pisz,podhale,podlasie,polkowice,pomorze,pomorskie,prochowice,pruszkow,przeworsk,pulawy,radom,rawa-maz,rybnik,rzeszow,sanok,sejny,slask,slupsk,sosnowiec,stalowa-wola,skoczow,starachowice,stargard,suwalki,swidnica,swiebodzin,swinoujscie,szczecin,szczytno,tarnobrzeg,tgory,turek,tychy,ustka,walbrzych,warmia,warszawa,waw,wegrow,wielun,wlocl,wloclawek,wodzislaw,wolomin,wroclaw,zachpomor,zagan,zarow,zgora,zgorzelec<pm,pn>gov,co,org,edu,net<post,pr>com,net,org,gov,edu,isla,pro,biz,info,name,est,prof,ac<pro>aaa,aca,acct,avocat,bar,cpa,eng,jur,law,med,recht<ps>edu,gov,sec,plo,com,org,net<pt>net,gov,org,edu,int,publ,com,nome<pw>co,ne,or,ed,go,belau<py>com,coop,edu,gov,mil,net,org<qa>com,edu,gov,mil,name,net,org,sch<re>asso,com,nom<ro>arts,com,firm,info,nom,nt,org,rec,store,tm,www<rs>ac,co,edu,gov,in,org<ru,rw>ac,co,coop,gov,mil,net,org<sa>com,net,org,gov,med,pub,edu,sch<sb>com,edu,gov,net,org<sc>com,gov,net,org,edu<sd>com,net,org,edu,med,tv,gov,info<se>a,ac,b,bd,brand,c,d,e,f,fh,fhsk,fhv,g,h,i,k,komforb,kommunalforbund,komvux,l,lanbib,m,n,naturbruksgymn,o,org,p,parti,pp,press,r,s,t,tm,u,w,x,y,z<sg>com,net,org,gov,edu,per<sh>com,net,gov,org,mil<si,sj,sk,sl>com,net,edu,gov,org<sm,sn>art,com,edu,gouv,org,perso,univ<so>com,edu,gov,me,net,org<sr,ss>biz,com,edu,gov,me,net,org,sch<st>co,com,consulado,edu,embaixada,mil,net,org,principe,saotome,store<su,sv>com,edu,gob,org,red<sx>gov<sy>edu,gov,net,mil,com,org<sz>co,ac,org<tc,td,tel,tf,tg,th>ac,co,go,in,mi,net,or<tj>ac,biz,co,com,edu,go,gov,int,mil,name,net,nic,org,test,web<tk,tl>gov<tm>com,co,org,net,nom,gov,mil,edu<tn>com,ens,fin,gov,ind,info,intl,mincom,nat,net,org,perso,tourism<to>com,gov,net,org,edu,mil<tr>av,bbs,bel,biz,com,dr,edu,gen,gov,info,mil,k12,kep,name,net,org,pol,tel,tsk,tv,web,nc>gov<<tt>co,com,org,net,biz,info,pro,int,coop,jobs,mobi,travel,museum,aero,name,gov,edu<tv,tw>edu,gov,mil,com,net,org,idv,game,ebiz,club,xn--zf0ao64a,xn--uc0atv,xn--czrw28b<tz>ac,co,go,hotel,info,me,mil,mobi,ne,or,sc,tv<ua>com,edu,gov,in,net,org,cherkassy,cherkasy,chernigov,chernihiv,chernivtsi,chernovtsy,ck,cn,cr,crimea,cv,dn,dnepropetrovsk,dnipropetrovsk,donetsk,dp,if,ivano-frankivsk,kh,kharkiv,kharkov,kherson,khmelnitskiy,khmelnytskyi,kiev,kirovograd,km,kr,kropyvnytskyi,krym,ks,kv,kyiv,lg,lt,lugansk,luhansk,lutsk,lv,lviv,mk,mykolaiv,nikolaev,od,odesa,odessa,pl,poltava,rivne,rovno,rv,sb,sebastopol,sevastopol,sm,sumy,te,ternopil,uz,uzhgorod,uzhhorod,vinnica,vinnytsia,vn,volyn,yalta,zakarpattia,zaporizhzhe,zaporizhzhia,zhitomir,zhytomyr,zp,zt<ug>co,or,ac,sc,go,ne,com,org<uk>ac,co,gov,ltd,me,net,nhs,org,plc,police,sch>*<<us>dni,fed,isa,kids,nsn,ak>k12,cc,lib<al>k12,cc,lib<ar>k12,cc,lib<as>k12,cc,lib<az>k12,cc,lib<ca>k12,cc,lib<co>k12,cc,lib<ct>k12,cc,lib<dc>k12,cc,lib<de>cc<fl>k12,cc,lib<ga>k12,cc,lib<gu>k12,cc,lib<hi>cc,lib<ia>k12,cc,lib<id>k12,cc,lib<il>k12,cc,lib<in>k12,cc,lib<ks>k12,cc,lib<ky>k12,cc,lib<la>k12,cc,lib<ma>k12>pvt,chtr,paroch<cc,lib<md>k12,cc,lib<me>k12,cc,lib<mi>k12,cc,lib,ann-arbor,cog,dst,eaton,gen,mus,tec,washtenaw<mn>k12,cc,lib<mo>k12,cc,lib<ms>k12,cc,lib<mt>k12,cc,lib<nc>k12,cc,lib<nd>cc,lib<ne>k12,cc,lib<nh>k12,cc,lib<nj>k12,cc,lib<nm>k12,cc,lib<nv>k12,cc,lib<ny>k12,cc,lib<oh>k12,cc,lib<ok>k12,cc,lib<or>k12,cc,lib<pa>k12,cc,lib<pr>k12,cc,lib<ri>cc,lib<sc>k12,cc,lib<sd>cc,lib<tn>k12,cc,lib<tx>k12,cc,lib<ut>k12,cc,lib<vi>k12,cc,lib<vt>k12,cc,lib<va>k12,cc,lib<wa>k12,cc,lib<wi>k12,cc,lib<wv>cc<wy>k12,cc,lib<<uy>com,edu,gub,mil,net,org<uz>co,com,net,org<va,vc>com,net,org,gov,mil,edu<ve>arts,bib,co,com,e12,edu,firm,gob,gov,info,int,mil,net,nom,org,rar,rec,store,tec,web<vg,vi>co,com,k12,net,org<vn>ac,ai,biz,com,edu,gov,health,id,info,int,io,name,net,org,pro,angiang,bacgiang,backan,baclieu,bacninh,baria-vungtau,bentre,binhdinh,binhduong,binhphuoc,binhthuan,camau,cantho,caobang,daklak,daknong,danang,dienbien,dongnai,dongthap,gialai,hagiang,haiduong,haiphong,hanam,hanoi,hatinh,haugiang,hoabinh,hungyen,khanhhoa,kiengiang,kontum,laichau,lamdong,langson,laocai,longan,namdinh,nghean,ninhbinh,ninhthuan,phutho,phuyen,quangbinh,quangnam,quangngai,quangninh,quangtri,soctrang,sonla,tayninh,thaibinh,thainguyen,thanhhoa,thanhphohochiminh,thuathienhue,tiengiang,travinh,tuyenquang,vinhlong,vinhphuc,yenbai<vu>com,edu,net,org<wf,ws>com,net,org,gov,edu<yt,xn--mgbaam7a8h,xn--y9a3aq,xn--54b7fta0cc,xn--90ae,xn--mgbcpq6gpa1a,xn--90ais,xn--fiqs8s,xn--fiqz9s,xn--lgbbat1ad8j,xn--wgbh1c,xn--e1a4c,xn--qxa6a,xn--mgbah1a3hjkrd,xn--node,xn--qxam,xn--j6w193g>xn--55qx5d,xn--wcvs22d,xn--mxtq1m,xn--gmqw5a,xn--od0alg,xn--uc0atv<xn--2scrj9c,xn--3hcrj9c,xn--45br5cyl,xn--h2breg3eve,xn--h2brj9c8c,xn--mgbgu82a,xn--rvc1e0am3e,xn--h2brj9c,xn--mgbbh1a,xn--mgbbh1a71e,xn--fpcrj9c3d,xn--gecrj9c,xn--s9brj9c,xn--45brj9c,xn--xkc2dl3a5ee0h,xn--mgba3a4f16a,xn--mgba3a4fra,xn--mgbtx2b,xn--mgbayh7gpa,xn--3e0b707e,xn--80ao21a,xn--q7ce6a,xn--fzc2c9e2c,xn--xkc2al3hye2a,xn--mgbc0a9azcg,xn--d1alf,xn--l1acc,xn--mix891f,xn--mix082f,xn--mgbx4cd0ab,xn--mgb9awbf,xn--mgbai9azgqp6j,xn--mgbai9a5eva00b,xn--ygbi2ammx,xn--90a3ac>xn--o1ac,xn--c1avg,xn--90azh,xn--d1at,xn--o1ach,xn--80au<xn--p1ai,xn--wgbl6a,xn--mgberp4a5d4ar,xn--mgberp4a5d4a87g,xn--mgbqly7c0a67fbc,xn--mgbqly7cvafr,xn--mgbpl2fh,xn--yfro4i67o,xn--clchc0ea0b2g2a9gcd,xn--ogbpf8fl,xn--mgbtf8fl,xn--o3cw4h>xn--12c1fe0br,xn--12co0c3b4eva,xn--h3cuzk1di,xn--o3cyx2a,xn--m3ch0j3a,xn--12cfi8ixb8l<xn--pgbs0dh,xn--kpry57d,xn--kprw13d,xn--nnx388a,xn--j1amh,xn--mgb2ddes,xxx,ye>com,edu,gov,net,mil,org<za>ac,agric,alt,co,edu,gov,grondar,law,mil,net,ngo,nic,nis,nom,org,school,tm,web<zm>ac,biz,co,com,edu,gov,info,mil,net,org,sch<zw>ac,co,gov,mil,org<aaa,aarp,abb,abbott,abbvie,abc,able,abogado,abudhabi,academy,accenture,accountant,accountants,aco,actor,ads,adult,aeg,aetna,afl,africa,agakhan,agency,aig,airbus,airforce,airtel,akdn,alibaba,alipay,allfinanz,allstate,ally,alsace,alstom,amazon,americanexpress,americanfamily,amex,amfam,amica,amsterdam,analytics,android,anquan,anz,aol,apartments,app,apple,aquarelle,arab,aramco,archi,army,art,arte,asda,associates,athleta,attorney,auction,audi,audible,audio,auspost,author,auto,autos,aws,axa,azure,baby,baidu,banamex,band,bank,bar,barcelona,barclaycard,barclays,barefoot,bargains,baseball,basketball,bauhaus,bayern,bbc,bbt,bbva,bcg,bcn,beats,beauty,beer,bentley,berlin,best,bestbuy,bet,bharti,bible,bid,bike,bing,bingo,bio,black,blackfriday,blockbuster,blog,bloomberg,blue,bms,bmw,bnpparibas,boats,boehringer,bofa,bom,bond,boo,book,booking,bosch,bostik,boston,bot,boutique,box,bradesco,bridgestone,broadway,broker,brother,brussels,build,builders,business,buy,buzz,bzh,cab,cafe,cal,call,calvinklein,cam,camera,camp,canon,capetown,capital,capitalone,car,caravan,cards,care,career,careers,cars,casa,case,cash,casino,catering,catholic,cba,cbn,cbre,center,ceo,cern,cfa,cfd,chanel,channel,charity,chase,chat,cheap,chintai,christmas,chrome,church,cipriani,circle,cisco,citadel,citi,citic,city,claims,cleaning,click,clinic,clinique,clothing,cloud,club,clubmed,coach,codes,coffee,college,cologne,commbank,community,company,compare,computer,comsec,condos,construction,consulting,contact,contractors,cooking,cool,corsica,country,coupon,coupons,courses,cpa,credit,creditcard,creditunion,cricket,crown,crs,cruise,cruises,cuisinella,cymru,cyou,dabur,dad,dance,data,date,dating,datsun,day,dclk,dds,deal,dealer,deals,degree,delivery,dell,deloitte,delta,democrat,dental,dentist,desi,design,dev,dhl,diamonds,diet,digital,direct,directory,discount,discover,dish,diy,dnp,docs,doctor,dog,domains,dot,download,drive,dtv,dubai,dunlop,dupont,durban,dvag,dvr,earth,eat,eco,edeka,education,email,emerck,energy,engineer,engineering,enterprises,epson,equipment,ericsson,erni,esq,estate,eurovision,eus,events,exchange,expert,exposed,express,extraspace,fage,fail,fairwinds,faith,family,fan,fans,farm,farmers,fashion,fast,fedex,feedback,ferrari,ferrero,fidelity,fido,film,final,finance,financial,fire,firestone,firmdale,fish,fishing,fit,fitness,flickr,flights,flir,florist,flowers,fly,foo,food,football,ford,forex,forsale,forum,foundation,fox,free,fresenius,frl,frogans,frontier,ftr,fujitsu,fun,fund,furniture,futbol,fyi,gal,gallery,gallo,gallup,game,games,gap,garden,gay,gbiz,gdn,gea,gent,genting,george,ggee,gift,gifts,gives,giving,glass,gle,global,globo,gmail,gmbh,gmo,gmx,godaddy,gold,goldpoint,golf,goo,goodyear,goog,google,gop,got,grainger,graphics,gratis,green,gripe,grocery,group,gucci,guge,guide,guitars,guru,hair,hamburg,hangout,haus,hbo,hdfc,hdfcbank,health,healthcare,help,helsinki,here,hermes,hiphop,hisamitsu,hitachi,hiv,hkt,hockey,holdings,holiday,homedepot,homegoods,homes,homesense,honda,horse,hospital,host,hosting,hot,hotels,hotmail,house,how,hsbc,hughes,hyatt,hyundai,ibm,icbc,ice,icu,ieee,ifm,ikano,imamat,imdb,immo,immobilien,inc,industries,infiniti,ing,ink,institute,insurance,insure,international,intuit,investments,ipiranga,irish,ismaili,ist,istanbul,itau,itv,jaguar,java,jcb,jeep,jetzt,jewelry,jio,jll,jmp,jnj,joburg,jot,joy,jpmorgan,jprs,juegos,juniper,kaufen,kddi,kerryhotels,kerrylogistics,kerryproperties,kfh,kia,kids,kim,kindle,kitchen,kiwi,koeln,komatsu,kosher,kpmg,kpn,krd,kred,kuokgroup,kyoto,lacaixa,lamborghini,lamer,lancaster,land,landrover,lanxess,lasalle,lat,latino,latrobe,law,lawyer,lds,lease,leclerc,lefrak,legal,lego,lexus,lgbt,lidl,life,lifeinsurance,lifestyle,lighting,like,lilly,limited,limo,lincoln,link,lipsy,live,living,llc,llp,loan,loans,locker,locus,lol,london,lotte,lotto,love,lpl,lplfinancial,ltd,ltda,lundbeck,luxe,luxury,madrid,maif,maison,makeup,man,management,mango,map,market,marketing,markets,marriott,marshalls,mattel,mba,mckinsey,med,media,meet,melbourne,meme,memorial,men,menu,merckmsd,miami,microsoft,mini,mint,mit,mitsubishi,mlb,mls,mma,mobile,moda,moe,moi,mom,monash,money,monster,mormon,mortgage,moscow,moto,motorcycles,mov,movie,msd,mtn,mtr,music,nab,nagoya,navy,nba,nec,netbank,netflix,network,neustar,new,news,next,nextdirect,nexus,nfl,ngo,nhk,nico,nike,nikon,ninja,nissan,nissay,nokia,norton,now,nowruz,nowtv,nra,nrw,ntt,nyc,obi,observer,office,okinawa,olayan,olayangroup,ollo,omega,one,ong,onl,online,ooo,open,oracle,orange,organic,origins,osaka,otsuka,ott,ovh,page,panasonic,paris,pars,partners,parts,party,pay,pccw,pet,pfizer,pharmacy,phd,philips,phone,photo,photography,photos,physio,pics,pictet,pictures,pid,pin,ping,pink,pioneer,pizza,place,play,playstation,plumbing,plus,pnc,pohl,poker,politie,porn,pramerica,praxi,press,prime,prod,productions,prof,progressive,promo,properties,property,protection,pru,prudential,pub,pwc,qpon,quebec,quest,racing,radio,read,realestate,realtor,realty,recipes,red,redstone,redumbrella,rehab,reise,reisen,reit,reliance,ren,rent,rentals,repair,report,republican,rest,restaurant,review,reviews,rexroth,rich,richardli,ricoh,ril,rio,rip,rocks,rodeo,rogers,room,rsvp,rugby,ruhr,run,rwe,ryukyu,saarland,safe,safety,sakura,sale,salon,samsclub,samsung,sandvik,sandvikcoromant,sanofi,sap,sarl,sas,save,saxo,sbi,sbs,scb,schaeffler,schmidt,scholarships,school,schule,schwarz,science,scot,search,seat,secure,security,seek,select,sener,services,seven,sew,sex,sexy,sfr,shangrila,sharp,shell,shia,shiksha,shoes,shop,shopping,shouji,show,silk,sina,singles,site,ski,skin,sky,skype,sling,smart,smile,sncf,soccer,social,softbank,software,sohu,solar,solutions,song,sony,soy,spa,space,sport,spot,srl,stada,staples,star,statebank,statefarm,stc,stcgroup,stockholm,storage,store,stream,studio,study,style,sucks,supplies,supply,support,surf,surgery,suzuki,swatch,swiss,sydney,systems,tab,taipei,talk,taobao,target,tatamotors,tatar,tattoo,tax,taxi,tci,tdk,team,tech,technology,temasek,tennis,teva,thd,theater,theatre,tiaa,tickets,tienda,tips,tires,tirol,tjmaxx,tjx,tkmaxx,tmall,today,tokyo,tools,top,toray,toshiba,total,tours,town,toyota,toys,trade,trading,training,travel,travelers,travelersinsurance,trust,trv,tube,tui,tunes,tushu,tvs,ubank,ubs,unicom,university,uno,uol,ups,vacations,vana,vanguard,vegas,ventures,verisign,versicherung,vet,viajes,video,vig,viking,villas,vin,vip,virgin,visa,vision,viva,vivo,vlaanderen,vodka,volvo,vote,voting,voto,voyage,wales,walmart,walter,wang,wanggou,watch,watches,weather,weatherchannel,webcam,weber,website,wed,wedding,weibo,weir,whoswho,wien,wiki,williamhill,win,windows,wine,winners,wme,wolterskluwer,woodside,work,works,world,wow,wtc,wtf,xbox,xerox,xihuan,xin,xn--11b4c3d,xn--1ck2e1b,xn--1qqw23a,xn--30rr7y,xn--3bst00m,xn--3ds443g,xn--3pxu8k,xn--42c2d9a,xn--45q11c,xn--4gbrim,xn--55qw42g,xn--55qx5d,xn--5su34j936bgsg,xn--5tzm5g,xn--6frz82g,xn--6qq986b3xl,xn--80adxhks,xn--80aqecdr1a,xn--80asehdb,xn--80aswg,xn--8y0a063a,xn--9dbq2a,xn--9et52u,xn--9krt00a,xn--b4w605ferd,xn--bck1b9a5dre4c,xn--c1avg,xn--c2br7g,xn--cck2b3b,xn--cckwcxetd,xn--cg4bki,xn--czr694b,xn--czrs0t,xn--czru2d,xn--d1acj3b,xn--eckvdtc9d,xn--efvy88h,xn--fct429k,xn--fhbei,xn--fiq228c5hs,xn--fiq64b,xn--fjq720a,xn--flw351e,xn--fzys8d69uvgm,xn--g2xx48c,xn--gckr3f0f,xn--gk3at1e,xn--hxt814e,xn--i1b6b1a6a2e,xn--imr513n,xn--io0a7i,xn--j1aef,xn--jlq480n2rg,xn--jvr189m,xn--kcrx77d1x4a,xn--kput3i,xn--mgba3a3ejt,xn--mgba7c0bbn0a,xn--mgbab2bd,xn--mgbca7dzdo,xn--mgbi4ecexp,xn--mgbt3dhd,xn--mk1bu44c,xn--mxtq1m,xn--ngbc5azd,xn--ngbe9e0a,xn--ngbrx,xn--nqv7f,xn--nqv7fs00ema,xn--nyqy26a,xn--otu796d,xn--p1acf,xn--pssy2u,xn--q9jyb4c,xn--qcka1pmc,xn--rhqv96g,xn--rovu88b,xn--ses554g,xn--t60b56a,xn--tckwe,xn--tiq49xqyj,xn--unup4y,xn--vermgensberater-ctb,xn--vermgensberatung-pwb,xn--vhquv,xn--vuq861b,xn--w4r85el8fhu5dnra,xn--w4rs40l,xn--xhq521b,xn--zfr164b,xyz,yachts,yahoo,yamaxun,yandex,yodobashi,yoga,yokohama,you,youtube,yun,zappos,zara,zero,zip,zone,zuerich"),p=null!=p?p:e0("krd>co,edu<pl>art,gliwice,krakow,poznan,wroc,zakopane,beep,ecommerce-shop,cfolks,dfirma,dkonto,you2,shoparena,homesklep,sdscloud,unicloud,krasnik,leczna,lubartow,lublin,poniatowa,swidnik,co,torun,simplesite,myspreadshop,gda,gdansk,gdynia,med,sopot,bielsko<us>de>lib<cloudns,drud,is-by,land-4-sale,stuff-4-sale,heliohost,enscaled>phx<mircloud,ngo,golffan,noip,pointto,freeddns,srv>gh,gl<platterp,servername<dev>12chars,panel,autocode,lcl>*<lclstage>*<stg>*<stgstage>*<pages,r2,workers,curv,deno,deno-staging,deta,evervault>relay<fly,githubpreview,gateway>*<is-a,iserv,runcontainers,localcert>user>*<<loginline,barsy,mediatech,modx,ngrok,ngrok-free,is-cool,is-not-a,localplayer,xmit,platter-app,replit>archer,bones,canary,global,hacker,id,janeway,kim,kira,kirk,odo,paris,picard,pike,prerelease,reed,riker,sisko,spock,staging,sulu,tarpit,teams,tucker,wesley,worf<crm>d>*<w>*<wa>*<wb>*<wc>*<wd>*<we>*<wf>*<<vercel,webhare>*<<it>12chars,blogspot,ibxos,iliadboxos,neen>jc<tim>open>jelastic>cloud<<<16-b,32-b,64-b,123homepage,myspreadshop,syncloud<pro>12chars,cloudns,dnstrace>bci<barsy,ngrok<ua>cc,inf,ltd,cx,ie,biz,co,pp,v<to>611,oya,x0,quickconnect>direct<vpnplus<com>a2hosted,cpserver,adobeaemcloud>dev>*<<africa,airkitapps,airkitapps-au,aivencloud,kasserver,amazonaws>af-south-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-website<s3,s3-accesspoint,s3-object-lambda,s3-website,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<ap-east-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint<s3,s3-accesspoint,s3-object-lambda,s3-website,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<ap-northeast-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-website<s3,s3-accesspoint,s3-object-lambda,s3-website,analytics-gateway,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<ap-northeast-2>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-website<s3,s3-accesspoint,s3-object-lambda,s3-website,analytics-gateway,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<ap-northeast-3>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-website<s3,s3-accesspoint,s3-object-lambda,s3-website,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<ap-south-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-website<s3,s3-accesspoint,s3-object-lambda,s3-website,analytics-gateway,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<ap-south-2>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint<s3,s3-accesspoint,s3-object-lambda,s3-website<ap-southeast-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-website<s3,s3-accesspoint,s3-object-lambda,s3-website,analytics-gateway,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<ap-southeast-2>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-website<s3,s3-accesspoint,s3-object-lambda,s3-website,analytics-gateway,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<ap-southeast-3>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint<s3,s3-accesspoint,s3-object-lambda,s3-website<ap-southeast-4>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint<s3,s3-accesspoint,s3-object-lambda,s3-website<ca-central-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-accesspoint-fips,s3-fips,s3-website<s3,s3-accesspoint,s3-accesspoint-fips,s3-fips,s3-object-lambda,s3-website,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<ca-west-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-accesspoint-fips,s3-fips,s3-website<s3,s3-accesspoint,s3-accesspoint-fips,s3-fips,s3-website<eu-central-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-website<s3,s3-accesspoint,s3-object-lambda,s3-website,analytics-gateway,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<eu-central-2>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint<s3,s3-accesspoint,s3-object-lambda,s3-website<eu-north-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint<s3,s3-accesspoint,s3-object-lambda,s3-website,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<eu-south-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-website<s3,s3-accesspoint,s3-object-lambda,s3-website,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<eu-south-2>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint<s3,s3-accesspoint,s3-object-lambda,s3-website<eu-west-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-website<s3,s3-accesspoint,s3-deprecated,s3-object-lambda,s3-website,analytics-gateway,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<eu-west-2>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint<s3,s3-accesspoint,s3-object-lambda,s3-website,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<eu-west-3>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-website<s3,s3-accesspoint,s3-object-lambda,s3-website,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<il-central-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint<s3,s3-accesspoint,s3-object-lambda,s3-website,aws-cloud9>webview-assets<cloud9>vfs<<me-central-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint<s3,s3-accesspoint,s3-object-lambda,s3-website<me-south-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint<s3,s3-accesspoint,s3-object-lambda,s3-website,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<sa-east-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-website<s3,s3-accesspoint,s3-object-lambda,s3-website,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<us-east-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-accesspoint-fips,s3-fips,s3-website<s3,s3-accesspoint,s3-accesspoint-fips,s3-deprecated,s3-fips,s3-object-lambda,s3-website,analytics-gateway,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<us-east-2>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-accesspoint-fips,s3-fips<s3,s3-accesspoint,s3-accesspoint-fips,s3-deprecated,s3-fips,s3-object-lambda,s3-website,analytics-gateway,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<us-gov-east-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-accesspoint-fips,s3-fips<s3,s3-accesspoint,s3-accesspoint-fips,s3-fips,s3-object-lambda,s3-website<us-gov-west-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-accesspoint-fips,s3-fips<s3,s3-accesspoint,s3-accesspoint-fips,s3-fips,s3-object-lambda,s3-website<us-west-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-accesspoint-fips,s3-fips,s3-website<s3,s3-accesspoint,s3-accesspoint-fips,s3-fips,s3-object-lambda,s3-website,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<us-west-2>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-accesspoint-fips,s3-fips,s3-website<s3,s3-accesspoint,s3-accesspoint-fips,s3-deprecated,s3-fips,s3-object-lambda,s3-website,analytics-gateway,aws-cloud9>webview-assets<cloud9>vfs,webview-assets<<compute>*<compute-1>*<airflow>af-south-1>*<ap-east-1>*<ap-northeast-1>*<ap-northeast-2>*<ap-northeast-3>*<ap-south-1>*<ap-south-2>*<ap-southeast-1>*<ap-southeast-2>*<ap-southeast-3>*<ap-southeast-4>*<ca-central-1>*<ca-west-1>*<eu-central-1>*<eu-central-2>*<eu-north-1>*<eu-south-1>*<eu-south-2>*<eu-west-1>*<eu-west-2>*<eu-west-3>*<il-central-1>*<me-central-1>*<me-south-1>*<sa-east-1>*<us-east-1>*<us-east-2>*<us-west-1>*<us-west-2>*<<s3,s3-1,s3-ap-east-1,s3-ap-northeast-1,s3-ap-northeast-2,s3-ap-northeast-3,s3-ap-south-1,s3-ap-southeast-1,s3-ap-southeast-2,s3-ca-central-1,s3-eu-central-1,s3-eu-north-1,s3-eu-west-1,s3-eu-west-2,s3-eu-west-3,s3-external-1,s3-fips-us-gov-east-1,s3-fips-us-gov-west-1,s3-global>accesspoint>mrap<<s3-me-south-1,s3-sa-east-1,s3-us-east-2,s3-us-gov-east-1,s3-us-gov-west-1,s3-us-west-1,s3-us-west-2,s3-website-ap-northeast-1,s3-website-ap-southeast-1,s3-website-ap-southeast-2,s3-website-eu-west-1,s3-website-sa-east-1,s3-website-us-east-1,s3-website-us-gov-west-1,s3-website-us-west-1,s3-website-us-west-2,elb>*<<amazoncognito>af-south-1>auth<ap-east-1>auth<ap-northeast-1>auth<ap-northeast-2>auth<ap-northeast-3>auth<ap-south-1>auth<ap-south-2>auth<ap-southeast-1>auth<ap-southeast-2>auth<ap-southeast-3>auth<ap-southeast-4>auth<ca-central-1>auth<ca-west-1>auth<eu-central-1>auth<eu-central-2>auth<eu-north-1>auth<eu-south-1>auth<eu-south-2>auth<eu-west-1>auth<eu-west-2>auth<eu-west-3>auth<il-central-1>auth<me-central-1>auth<me-south-1>auth<sa-east-1>auth<us-east-1>auth,auth-fips<us-east-2>auth,auth-fips<us-gov-west-1>auth-fips<us-west-1>auth,auth-fips<us-west-2>auth,auth-fips<<amplifyapp,awsapprunner>*<awsapps,elasticbeanstalk>af-south-1,ap-east-1,ap-northeast-1,ap-northeast-2,ap-northeast-3,ap-south-1,ap-southeast-1,ap-southeast-2,ap-southeast-3,ca-central-1,eu-central-1,eu-north-1,eu-south-1,eu-west-1,eu-west-2,eu-west-3,il-central-1,me-south-1,sa-east-1,us-east-1,us-east-2,us-gov-east-1,us-gov-west-1,us-west-1,us-west-2<awsglobalaccelerator,siiites,appspacehosted,appspaceusercontent,on-aptible,myasustor,balena-devices,betainabox,boutir,bplaced,cafjs,canva-apps,cdn77-storage,br,cn,de,eu,jpn,mex,ru,sa,uk,us,za,clever-cloud>services>*<<dnsabr,jdevcloud,wpdevcloud,cf-ipfs,cloudflare-ipfs,trycloudflare,co,customer-oci>*,oci>*<ocp>*<ocs>*<<builtwithdark,datadetect>demo,instance<dattolocal,dattorelay,dattoweb,mydatto,ddns5,digitaloceanspaces>*<discordsays,discordsez,drayddns,dreamhosters,durumis,mydrobo,blogdns,cechire,dnsalias,dnsdojo,doesntexist,dontexist,doomdns,dyn-o-saur,dynalias,dyndns-at-home,dyndns-at-work,dyndns-blog,dyndns-free,dyndns-home,dyndns-ip,dyndns-mail,dyndns-office,dyndns-pics,dyndns-remote,dyndns-server,dyndns-web,dyndns-wiki,dyndns-work,est-a-la-maison,est-a-la-masion,est-le-patron,est-mon-blogueur,from-ak,from-al,from-ar,from-ca,from-ct,from-dc,from-de,from-fl,from-ga,from-hi,from-ia,from-id,from-il,from-in,from-ks,from-ky,from-ma,from-md,from-mi,from-mn,from-mo,from-ms,from-mt,from-nc,from-nd,from-ne,from-nh,from-nj,from-nm,from-nv,from-oh,from-ok,from-or,from-pa,from-pr,from-ri,from-sc,from-sd,from-tn,from-tx,from-ut,from-va,from-vt,from-wa,from-wi,from-wv,from-wy,getmyip,gotdns,hobby-site,homelinux,homeunix,iamallama,is-a-anarchist,is-a-blogger,is-a-bookkeeper,is-a-bulls-fan,is-a-caterer,is-a-chef,is-a-conservative,is-a-cpa,is-a-cubicle-slave,is-a-democrat,is-a-designer,is-a-doctor,is-a-financialadvisor,is-a-geek,is-a-green,is-a-guru,is-a-hard-worker,is-a-hunter,is-a-landscaper,is-a-lawyer,is-a-liberal,is-a-libertarian,is-a-llama,is-a-musician,is-a-nascarfan,is-a-nurse,is-a-painter,is-a-personaltrainer,is-a-photographer,is-a-player,is-a-republican,is-a-rockstar,is-a-socialist,is-a-student,is-a-teacher,is-a-techie,is-a-therapist,is-an-accountant,is-an-actor,is-an-actress,is-an-anarchist,is-an-artist,is-an-engineer,is-an-entertainer,is-certified,is-gone,is-into-anime,is-into-cars,is-into-cartoons,is-into-games,is-leet,is-not-certified,is-slick,is-uberleet,is-with-theband,isa-geek,isa-hockeynut,issmarterthanyou,likes-pie,likescandy,neat-url,saves-the-whales,selfip,sells-for-less,sells-for-u,servebbs,simple-url,space-to-rent,teaches-yoga,writesthisblog,ddnsfree,ddnsgeek,giize,gleeze,kozow,loseyourip,ooguy,theworkpc,mytuleap,tuleap-partners,encoreapi,evennode>eu-1,eu-2,eu-3,eu-4,us-1,us-2,us-3,us-4<onfabrica,fastly-edge,fastly-terrarium,fastvps-server,mydobiss,firebaseapp,fldrv,forgeblocks,framercanvas,freebox-os,freeboxos,freemyip,aliases121,gentapps,gentlentapis,githubusercontent,0emm>*<appspot>r>*<<blogspot,codespot,googleapis,googlecode,pagespeedmobilizer,publishproxy,withgoogle,withyoutube,grayjayleagues,hatenablog,hatenadiary,herokuapp,herokussl,gr,smushcdn,wphostedmail,wpmucdn,pixolino,apps-1and1,live-website,amscompute,dopaas,hosted-by-previder>paas<hosteur>rag-cloud,rag-cloud-ch<ik-server>jcloud,jcloud-ver-jpc<jelastic>demo<kilatiron,massivegrid>paas<wafaicloud>jed,lon,ryd<webadorsite,joyent>cns>*<<ktistory,lpusercontent,linode>members,nodebalancer>*<<linodeobjects>*<linodeusercontent>ip<barsycenter,barsyonline,mazeplay,miniserver,atmeta,fbsbx>apps<meteorapp>eu<hostedpi,mythic-beasts>caracal,customer,fentiger,lynx,ocelot,oncilla,onza,sphinx,vs,x,yali<nospamproxy>cloud<4u,nfshost,ar,hu,kr,no,qc,uy,3utilities,blogsyte,ciscofreak,damnserver,ddnsking,ditchyourip,dnsiskinky,dynns,geekgalaxy,health-carereform,homesecuritymac,homesecuritypc,myactivedirectory,mysecuritycamera,myvnc,net-freaks,onthewifi,point2this,quicksytes,securitytactics,servebeer,servecounterstrike,serveexchange,serveftp,servegame,servehalflife,servehttp,servehumour,serveirc,servemp3,servep2p,servepics,servequake,servesarcasm,stufftoread,unusualperson,workisboring,001www,ddnslive,myiphost,observableusercontent>static<simplesite,orsites,operaunite,authgear-staging,authgearapps,skygearapp,outsystemscloud,ownprovider,pgfog,pagexl,gotpantheon,paywhirl>*<upsunapp,platter-app,postman-echo,prgmr>xen<pythonanywhere>eu<qa2,alpha-myqnapcloud,dev-myqnapcloud,mycloudnas,mynascloud,myqnapcloud,qualifioapp,ladesk,qbuser,quipelements>*<rackmaze,rhcloud,onrender,render>app<180r,dojin,sakuratan,sakuraweb,x0,code>builder>*<dev-builder>*<stg-builder>*<<salesforce>platform>code-builder-stg>test>001>*<<<<<logoip,scrysec,firewall-gateway,myshopblocks,myshopify,shopitsite,1kapp,appchizi,applinzi,sinaapp,vipsinaapp,bounty-full>alpha,beta<streamlitapp,try-snowplow,playstation-cloud,myspreadshop,w-corp-staticblitz,w-credentialless-staticblitz,w-staticblitz,stackhero-network,stdlib>api<strapiapp>media<streak-link,streaklinks,streakusercontent,temp-dns,dsmynas,familyds,mytabit,tb-hosting>site<reservd,thingdustdata,bloxcms,townnews-staging,typeform>pro<hk,it,vultrobjects>*<wafflecell,hotelwithflight,reserve-online,cprapid,pleskns,remotewd,wiardweb>pages<wixsite,wixstudio,messwithdns,woltlab-demo,wpenginepowered>js<xnbay>u2,u2-local<yolasite<vodka>aaa<io>on-acorn>*<apigee,b-data,banzaicloud>app,backyards>*<<beagleboard,bitbucket,bluebite,boxfuse,brave>s>*<<browsersafetymark,bigv>uk0<cleverapps,dappnode>dyndns<darklang,definima,dedyn,drud,fh-muenster,shw,forgerock>id<github,gitlab,lolipop,hasura-app,hostyhosting,hypernode,moonscale>*<beebyte>paas<beebyteapp>sekd1<jele,unispace>cloud-fr1<webthings,loginline,barsy,azurecontainer>*<ngrok>ap,au,eu,in,jp,sa,us<nodeart>stage<pantheonsite,dyn53,pstmn>mock<protonet,qcx>sys>*<<qoto,vaporcloud,myrdbx,rb-hosting>site<on-k3s>*<on-rio>*<readthedocs,resindevice,resinstaging>devices<hzc,sandcats,scrypted>client<shiftedit,mo-siemens,lair>apps<stolos>*<spacekit,musician,utwente,s5y>*<edugit,telebit,thingdust>dev>cust,reservd<disrec>cust,reservd<prod>cust<testing>cust,reservd<<tickets,upli,2038,webflow,webflowtest,editorx,wixstudio,basicserver,virtualserver<biz>activetrail,cloudns,jozi,dyndns,for-better,for-more,for-some,for-the,selfip,webhop,orx,mmafan,myftp,no-ip,dscloud<app>adaptable,beget>*<clerk,clerkstage,wnext,csb>preview<platform0,deta,ondigitalocean,easypanel,encr,evervault>relay<expo>staging<edgecompute,fireweb,flutterflow,framer,hosted>*<run>*<web,hasura,loginline,messerli,netfy,netlify,ngrok,ngrok-free,developer>*<noop,northflank>*<upsun>*<replit>id<snowflake>*,privatelink>*<<streamlit,storipress,telebit,typedream,vercel,bookonline,wdh>preview<zeabur<live>aem,hlx,ewp>*<<net>adobeaemcloud,adobeio-static,adobeioruntime,akadns,akamai,akamai-staging,akamaiedge,akamaiedge-staging,akamaihd,akamaihd-staging,akamaiorigin,akamaiorigin-staging,akamaized,akamaized-staging,edgekey,edgekey-staging,edgesuite,edgesuite-staging,alwaysdata,myamaze,cloudfront,appudo,atlassian-dev>prod>cdn<<myfritz,onavstack,shopselect,blackbaudcdn,boomla,bplaced,square7,cdn77>r<cdn77-ssl,gb,hu,jp,se,uk,clickrising,dns-cloud,dns-dynamic,cloudaccess,cloudflare>cdn<cloudflareanycast>cdn<cloudflarecn>cdn<cloudflareglobal>cdn<feste-ip,knx-server,static-access,cryptonomic>*<dattolocal,mydatto,debian,definima,at-band-camp,blogdns,broke-it,buyshouses,dnsalias,dnsdojo,does-it,dontexist,dynalias,dynathome,endofinternet,from-az,from-co,from-la,from-ny,gets-it,ham-radio-op,homeftp,homeip,homelinux,homeunix,in-the-band,is-a-chef,is-a-geek,isa-geek,kicks-ass,office-on-the,podzone,scrapper-site,selfip,sells-it,servebbs,serveftp,thruhere,webhop,casacam,dynu,dynv6,twmail,ru,channelsdvr>u<fastly>freetls,map,prod>a,global<ssl>a,b,global<<fastlylb>map<edgeapp,keyword-on,live-on,server-on,cdn-edges,localcert,localhostcert,heteml,cloudfunctions,iobb,moonscale,in-dsl,in-vpn,apps-1and1,ipifony,cloudjiffy>fra1-de,west1-us<elastx>jls-sto1,jls-sto2,jls-sto3<faststacks,massivegrid>paas>fr-1,lon-1,lon-2,ny-1,ny-2,sg-1<<saveincloud>jelastic,nordeste-idc<scaleforce>j<tsukaeru>jelastic<kinghost,uni5,krellian,ggff,barsy,memset,azure-api,azure-mobile,azureedge,azurefd,azurestaticapps>1,2,3,4,5,6,7,centralus,eastasia,eastus2,westeurope,westus2<azurewebsites,cloudapp,trafficmanager,windows>core>blob<servicebus<mynetname>sn<bounceme,ddns,eating-organic,mydissent,myeffect,mymediapc,mypsx,mysecuritycamera,nhlfan,no-ip,pgafan,privatizehealthinsurance,redirectme,serveblog,serveminecraft,sytes,dnsup,hicam,now-dns,ownip,vpndns,cloudycluster,ovh>hosting>*<webpaas>*<<rackmaze,myradweb,in,squares,schokokeks,firewall-gateway,seidat,senseering,siteleaf,mafelo,myspreadshop,vps-host>jelastic>atl,njs,ric<<srcf>soc,user<supabase,dsmynas,familyds,tailscale>beta<ts>c>*<<torproject>pages<reserve-online,community-pro,meinforum,yandexcloud>storage,website<za<page>aem,hlx,hlx3,translated,codeberg,prvcy,rocky,magnet,pdns,plesk<eu>airkitapps,mycd,cloudns,dogado>jelastic<barsy,wellbeingzone,spdns,transurl>*<diskstation<ca>barsy,awdev>*<co,blogspot,no-ip,myspreadshop,box<estate>compute>*<<network>alces>*<co,arvo,azimuth,tlon<org>altervista,pimienta,poivron,potager,sweetpepper,cdn77>c,rsc<cdn77-secure>origin>ssl<<ae,certmgr,cloudns,ddnss,duckdns,tunk,blogdns,blogsite,boldlygoingnowhere,dnsalias,dnsdojo,doesntexist,dontexist,doomdns,dvrdns,dynalias,dyndns>go,home<endofinternet,endoftheinternet,from-me,game-host,gotdns,hobby-site,homedns,homeftp,homelinux,homeunix,is-a-bruinsfan,is-a-candidate,is-a-celticsfan,is-a-chef,is-a-geek,is-a-knight,is-a-linux-user,is-a-patsfan,is-a-soxfan,is-found,is-lost,is-saved,is-very-bad,is-very-evil,is-very-good,is-very-nice,is-very-sweet,isa-geek,kicks-ass,misconfused,podzone,readmyblog,selfip,sellsyourhome,servebbs,serveftp,servegame,stuff-4-sale,webhop,accesscam,camdvr,freeddns,mywire,webredirect,twmail,eu>al,asso,at,au,be,bg,ca,cd,ch,cn,cy,cz,de,dk,edu,ee,es,fi,fr,gr,hr,hu,ie,il,in,int,is,it,jp,kr,lt,lu,lv,mc,me,mk,mt,my,net,ng,nl,no,nz,paris,pl,pt,q-a,ro,ru,se,si,sk,tr,uk,us<fedorainfracloud,fedorapeople,fedoraproject>cloud,os>app<stg>os>app<<<freedesktop,hatenadiary,hepforge,in-dsl,in-vpn,js,barsy,mayfirst,bmoattachments,cable-modem,collegefan,couchpotatofries,hopto,mlbfan,myftp,mysecuritycamera,nflfan,no-ip,read-books,ufcfan,zapto,dynserv,now-dns,is-local,httpbin,pubtls,jpn,my-firewall,myfirewall,spdns,small-web,dsmynas,familyds,teckids>s3<tuxfamily,diskstation,hk,us,toolforge,wmcloud,wmflabs,za<cn>com>amazonaws>cn-north-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint,s3-website<s3,s3-accesspoint,s3-deprecated,s3-object-lambda,s3-website<cn-northwest-1>execute-api,emrappui-prod,emrnotebooks-prod,emrstudio-prod,dualstack>s3,s3-accesspoint<s3,s3-accesspoint,s3-object-lambda,s3-website<compute>*<airflow>cn-north-1>*<cn-northwest-1>*<<eb>cn-north-1,cn-northwest-1<elb>*<<sagemaker>cn-north-1>notebook,studio<cn-northwest-1>notebook,studio<<<canva-apps,canvasite>my>*<<myqnapcloud,sh>as<quickconnect>direct<<aws>sagemaker>ap-northeast-1>labeling,notebook,studio<ap-northeast-2>labeling,notebook,studio<ap-south-1>labeling,notebook,studio<ap-southeast-1>labeling,notebook,studio<ap-southeast-2>labeling,notebook,studio<ca-central-1>labeling,notebook,notebook-fips,studio<eu-central-1>labeling,notebook,studio<eu-west-1>labeling,notebook,studio<eu-west-2>labeling,notebook,studio<us-east-1>labeling,notebook,notebook-fips,studio<us-east-2>labeling,notebook,notebook-fips,studio<us-west-2>labeling,notebook,notebook-fips,studio<af-south-1>notebook,studio<ap-east-1>notebook,studio<ap-northeast-3>notebook,studio<ap-south-2>notebook<ap-southeast-3>notebook,studio<ap-southeast-4>notebook<ca-west-1>notebook,notebook-fips<eu-central-2>notebook<eu-north-1>notebook,studio<eu-south-1>notebook,studio<eu-south-2>notebook,studio<eu-west-3>notebook,studio<il-central-1>notebook,studio<me-central-1>notebook,studio<me-south-1>notebook,studio<sa-east-1>notebook,studio<us-gov-east-1>notebook,notebook-fips,studio,studio-fips<us-gov-west-1>notebook,notebook-fips,studio,studio-fips<us-west-1>notebook,notebook-fips,studio<experiments>*<<repost>private>*<<<online>eero,eero-stage,websitebuilder,barsy<si>f5,gitapp,gitpage,blogspot<jp>ne>aseinet>user<gehirn,ivory,mail-box,mints,mokuren,opal,sakura,sumomo,topaz<buyshop,fashionstore,handcrafted,kawaiishop,supersale,theshop,0am,0g0,0j0,0t0,mydns,pgw,wjg,usercontent,angry,babyblue,babymilk,backdrop,bambina,bitter,blush,boo,boy,boyfriend,but,candypop,capoo,catfood,cheap,chicappa,chillout,chips,chowder,chu,ciao,cocotte,coolblog,cranky,cutegirl,daa,deca,deci,digick,egoism,fakefur,fem,flier,floppy,fool,frenchkiss,girlfriend,girly,gloomy,gonna,greater,hacca,heavy,her,hiho,hippy,holy,hungry,icurus,itigo,jellybean,kikirara,kill,kilo,kuron,littlestar,lolipopmc,lolitapunk,lomo,lovepop,lovesick,main,mods,mond,mongolian,moo,namaste,nikita,nobushi,noor,oops,parallel,parasite,pecori,peewee,penne,pepper,perma,pigboat,pinoko,punyu,pupu,pussycat,pya,raindrop,readymade,sadist,schoolbus,secret,staba,stripper,sub,sunnyday,thick,tonkotsu,under,upper,velvet,verse,versus,vivian,watson,weblike,whitesnow,zombie,blogspot,hateblo,hatenablog,hatenadiary,2-d,bona,crap,daynight,eek,flop,halfmoon,jeez,matrix,mimoza,netgamers,nyanta,o0o0,rdy,rgr,rulez,sakurastorage>isk01>s3<isk02>s3<<saloon,sblo,skr,tank,uh-oh,undo,webaccel>rs,user<websozai,xii<vc>gv>d<0e,mydns<eus>party>user<<link>myfritz,cyon,nftstorage>ipfs<mypep,dweb>*<<ws>advisor>*<cloud66,dyndns,mypets<cloud>banzai>*<elementor,encoway>eu<statics>*<ravendb,axarnet>es-1<diadem,jelastic>vip<jele,jenv-aruba>aruba>eur>it1<<it1<keliweb>cs<oxa>tn,uk<primetel>uk<reclaim>ca,uk,us<trendhosting>ch,de<jotelulu,kuleuven,linkyard,magentosite>*<observablehq,perspecta,vapor,on-rancher>*<scw>baremetal>fr-par-1,fr-par-2,nl-ams-1<fr-par>cockpit,fnc>functions<k8s>nodes<s3,s3-website,whm<instances>priv,pub<k8s,nl-ams>cockpit,k8s>nodes<s3,s3-website,whm<pl-waw>cockpit,k8s>nodes<s3,s3-website<scalebook,smartlabeling<servebolt,onstackit>runs<sensiosite>*<trafficplex,unison-services,urown,voorloper,zap<ec>base,official<shop>base,hoplix,barsy,barsyonline<gay>pages<la>bnr<sh>bip,hashbang,platform>ent,eu,us<now<je>of<ch>square7,cloudns,cloudscale>cust,lpg>objects<rma>objects<<blogspot,flow>ae>alp1<appengine<linkyard-cloud,gotdns,dnsking,123website,myspreadshop,firenet>*,svc>*<<12hp,2ix,4lima,lima-city<de>bplaced,square7,com,cosidns>dyn<dnsupdater,dynamisches-dns,internet-dns,l-o-g-i-n,ddnss>dyn,dyndns<dyn-ip24,dyndns1,home-webserver>dyn<myhome-server,dnshome,fuettertdasnetz,isteingeek,istmein,lebtimnetz,leitungsen,traeumtgerade,frusky>*<goip,blogspot,xn--gnstigbestellen-zvb,xn--gnstigliefern-wob,hs-heilbronn>it>pages<<dyn-berlin,in-berlin,in-brb,in-butter,in-dsl,in-vpn,iservschule,mein-iserv,schulplattform,schulserver,test-iserv,keymachine,git-repos,lcube-server,svn-repos,barsy,123webseite,logoip,firewall-gateway,my-gateway,my-router,spdns,speedpartner>customer<myspreadshop,taifun-dns,12hp,2ix,4lima,lima-city,dd-dns,dray-dns,draydns,dyn-vpn,dynvpn,mein-vigor,my-vigor,my-wan,syno-ds,synology-diskstation,synology-ds,uberspace>*<virtual-user,virtualuser,community-pro,diskussionsbereich<hr>brendly>shop<blogspot,free<rs>brendly>shop<blogspot,ua,barsy,ox<am>radio,blogspot<fm>radio,user>*<<uk>co>bytemark>dh,vm<blogspot,layershift>j<barsy,barsyonline,retrosnub>cust<nh-serv,no-ip,wellbeingzone,adimo,myspreadshop<gov>api,campaign,service<conn,copro,hosp,independent-commission,independent-inquest,independent-inquiry,independent-panel,independent-review,public-inquiry,royal-commission,pymnt,org>glug,lug,lugs,affinitylottery,raffleentry,weeklylottery<barsy,nimsite<site>canva>my>*<<cloudera>*<convex,cyon,fnwk,folionetwork,fastvps,jele,jouwweb,lelux,loginline,barsy,notion,omniwe,opensocial,madethis,platformsh>*<tst>*<byen,srht,novecore,wpsquared<ac>drr,feedback,forms<ai>uwu,framer<co>carrd,crd,otap>*<com>blogspot<leadpages,lpages,mypi,n4t,xmit>*<firewalledreplit>id<repl>id<supabase<mp>ju<cz>contentproxy9>rsc<realm,e4,blogspot,co,metacentrum>cloud>*<custom<muni>cloud>flt,usr<<<bz>za,mydns,gsj<se>com,blogspot,conf,iopsys,123minsida,itcouldbewor,myspreadshop<group>discourse<team>discourse,jelastic<cc>cleverapps,cloudns,ftpaccess,game-server,myphotos,scrapping,twmail,csx,fantasyleague,spawn>instances<<tech>cleverapps<asia>cloudns,daemon,dix<be>cloudns,webhosting,blogspot,interhostsolutions>cloud<kuleuven>ezproxy<123website,myspreadshop,transurl>*<<cl>cloudns,blogspot<club>cloudns,jele,barsy<cx>cloudns,ath,info,assessments,calculators,funnels,paynow,quizzes,researched,tests<in>cloudns,blogspot,barsy,web,supabase<info>cloudns,dynamic-dns,barrel-of-knowledge,barrell-of-knowledge,dyndns,for-our,groks-the,groks-this,here-for-more,knowsitall,selfip,webhop,barsy,mayfirst,dvrcam,ilovecollege,no-ip,forumz,nsupdate,dnsupdate,v-info<nz>cloudns,co>blogspot<<ph>cloudns<pw>cloudns,x443<me>c66,craft,daplie>localhost<edgestack,filegear,glitch,filegear-sg,lohmus,barsy,mcdir,mcpe,brasilia,ddns,dnsfor,hopto,loginto,noip,webhop,soundcast,tcp4,vp4,diskstation,dscloud,i234,myds,synology,transip>site<yombo,nohost<zone>cloud66,hs,triton>*<stackit,lima<host>cloudaccess,freesite,easypanel,fastvps,myfast,tempurl,wpmudev,jele,mircloud,wp2,half<gdn>cnpy<nl>co,hosting-cluster,blogspot,gov,khplay,123website,myspreadshop,transurl>*<cistron,demon<no>co,blogspot,123hjemmeside,myspreadshop<ru>ac,edu,gov,int,mil,test,eurodir,adygeya,bashkiria,bir,cbg,com,dagestan,grozny,kalmykia,kustanai,marine,mordovia,msk,mytis,nalchik,nov,pyatigorsk,spb,vladikavkaz,vladimir,blogspot,na4u,mircloud,regruhosting>jelastic<myjino>hosting>*<landing>*<spectrum>*<vps>*<<cldmail>hb<mcdir>vps<mcpre,net,org,pp,lk3,ras<email>crisp>on<tawk>p<tawkto>p<<dk>biz,co,firm,reg,store,blogspot,123hjemmeside,myspreadshop<earth>dapps>*,bzz>*<<<kg>us<id>my>rss>*<<flap,co>blogspot<forte<solutions>diher>*<<th>online,shop<fi>dy,blogspot,xn--hkkinen-5wa,iki,cloudplatform>fi<datacenter>demo,paas<kapsi,123kotisivu,myspreadshop<name>her>forgot<his>forgot<<nu>merseine,mine,shacknet,enterprisecloud<tv>better-than,dyndns,on-the-web,worse-than,from,sakura<rocks>myddns,stackit,lima-city,webspace<xyz>blogsite,localzone,crafting,zapto,telebit>*<<one>onred>staging<kin>*<service,homelink<tw>com>mymailer<url,mydns,blogspot<camp>emf>at<<ht>rt<cool>elementor,de<fr>en-root,fbx-os,fbxos,freebox-os,freeboxos,blogspot,goupile,123siteweb,on-web,chirurgiens-dentistes-en-france,dedibox,aeroport,avocat,chambagri,chirurgiens-dentistes,experts-comptables,medecin,notaires,pharmacien,port,veterinaire,myspreadshop,ynh<su>abkhazia,adygeya,aktyubinsk,arkhangelsk,armenia,ashgabad,azerbaijan,balashov,bashkiria,bryansk,bukhara,chimkent,dagestan,east-kazakhstan,exnet,georgia,grozny,ivanovo,jambyl,kalmykia,kaluga,karacol,karaganda,karelia,khakassia,krasnodar,kurgan,kustanai,lenug,mangyshlak,mordovia,msk,murmansk,nalchik,navoi,north-kazakhstan,nov,obninsk,penza,pokrovsk,sochi,spb,tashkent,termez,togliatti,troitsk,tselinograd,tula,tuva,vladikavkaz,vladimir,vologda<space>myfast,heiyu,app-ionos,uber,xs4all<media>framer<photos>framer<website>framer<wiki>framer<at>funkfeuer>wien<futurecms>*,ex>*<in>*<<futurehosting,futuremailing,ortsinfo>ex>*<kunden>*<<co>blogspot<biz,info,123webseite,priv,myspreadshop,12hp,2ix,4lima,lima-city<ms>lab,minisite<work>corpnet<community>nog,ravendb,myforum<ro>co,shop,blogspot,barsy<design>graphic,bss<ae>blogspot<al>blogspot<ar>com>blogspot<<au>com>blogspot,cloudlets>mel<myspreadshop<<ba>blogspot,rs<bg>blogspot,barsy<bj>blogspot<br>com>blogspot,simplesite<leg>ac,al,am,ap,ba,ce,df,es,go,ma,mg,ms,mt,pa,pb,pe,pi,pr,rj,rn,ro,rr,rs,sc,se,sp,to<<by>com>blogspot<mycloud,mediatech<cf>blogspot<cv>blogspot<cy>com>blogspot,scaleforce>j<<<ee>com>blogspot<<eg>com>blogspot<<es>com>blogspot<123miweb,myspreadshop<goog>cloud,translate,usercontent>*<<gr>blogspot,barsy,simplesite<hk>blogspot,secaas,inc,ltd<hu>blogspot<ie>blogspot,myspreadshop<il>co>blogspot,ravpage,mytabit,tabitorder<<is>blogspot<ke>co>blogspot<<kr>blogspot<li>blogspot,caa<lt>blogspot<lu>blogspot,123website<md>blogspot,ir<mk>blogspot<mr>blogspot<mt>com>blogspot<<mx>blogspot<my>blogspot<ng>com>blogspot<col,firm,gen,ltd,ngo<pe>blogspot<pt>blogspot,123paginaweb<qa>blogspot<re>blogspot,can<sg>blogspot,enscaled<sk>blogspot<sn>blogspot<td>blogspot<tr>com>blogspot<<ug>blogspot<uy>com>blogspot<<vn>blogspot<za>co>blogspot<<digital>cloudapps>london<<ci>fin<run>hs,development,ravendb,servers,build>*<code>*<database>*<migration>*<onporter,repl,stackit,val>express,web<wix<st>helioho,kirara,noho<pub>id>*<kin>*<barsy<gl>biz<scot>edu,gov>service<<so>sch,surveys<kz>jcloud,kazteleport>upaas<<tn>orangecloud<gg>kaas,stackit,panel>daemon<<systems>knightpoint<events>koobin,co<direct>libp2p<business>co<education>co<financial>co<place>co<technology>co<bs>we<services>loginline<menu>barsy,barsyonline<mobi>barsy,dscloud<store>barsy,sellfy,shopware,storebase<support>barsy<health>hra<casa>nabu>ui<<pizza>ngrok<news>noticeable<top>now-dns,ntdll,wadl>*<<ovh>nerdpol<mn>nyc<ong>obl<lol>omg<hosting>opencraft<orange>tech<pm>own,name<codes>owo>*<<lc>oy<games>pley,sheezy<bn>co<today>prequalifyme<builders>cloudsite<basketball>aus,nz<edu>rit>git-pages<<xn--p1acf>xn--90amc,xn--j1aef,xn--j1ael8b,xn--h1ahn,xn--j1adp,xn--c1avg,xn--80aaa0cvac,xn--h1aliz,xn--90a1af,xn--41a<mom>ind<farm>storj<pictures>1337<rip>clan<tf>sch<wf>biz,sch<yt>org<management>router<academy>official<faith>ybo<party>ybo<review>ybo<science>ybo<trade>ybo");var a=eA(r,f),o=eA(r,p);if(0===a.length&&0===o.length)return{type:d.NotListed,hostname:i,labels:r};var s=r.length-Math.max(o.length,a.length)-1,l=r.length-a.length-1;return Object.assign({type:d.Listed,hostname:i,labels:r,icann:e2(r,l)},e2(r,s))},e5=["","@"];function e4(e){var t=e3(e);if(t.type===d.Listed){var n=t.icann.subDomains;return n.length>0?n.join("."):"@"}var r=e.split(".").slice(0,-2).join(".");return""===r?"@":r}var e8=e.i(610357),e6=e.i(123850),e7=e.i(607278),e9=e.i(929872),te=(0,e6.createCssVarTokens)(["paddingRight"]),tt=te.cssVars,tn=te.styleTokens,tr=(0,Y.cssRecord)({inputWrapper:[X.rcss.position.relative,X.rcss.flex.growAndShrink(1),{input:[{paddingRight:tn.paddingRight}]}],copyButton:[X.rcss.position.absolute,X.rcss.top("50%"),X.rcss.right(4),{transform:"translateY(-50%)"}]});function ti(e){var t=(0,x._)((0,b.useState)(!1),2),n=t[0],r=t[1];return(0,b.useEffect)(function(){if(n){var e=setTimeout(function(){r(!1)},1e3);return function(){return clearTimeout(e)}}},[n]),(0,y.jsxs)(ei.View,{css:tr.inputWrapper,style:(0,e_._)({},tt.paddingRight,e.value?"36px":"8px"),children:[(0,y.jsx)(e7.Input,(0,eR._)((0,eE._)({},e),{onClick:function(e){return e.currentTarget.select()}})),e.value?(0,y.jsx)(J.IconButton,{css:tr.copyButton,alt:"Copy",tooltipBehavior:"hidden",onClick:function(){e.value&&((0,e8.default)(e.value),r(!0))},children:n?(0,y.jsx)(ec.default,{}):(0,y.jsx)(eI.default,{})}):null]})}var ta=(0,Y.cssRecord)({root:[X.rcss.flex.column,(h={gap:8},(0,e_._)(h,X.container.min("mobileMax"),[X.rcss.flex.row,{"& > div:nth-of-type(1)":{maxWidth:50},"& > div:nth-of-type(2)":{width:"30%"}}]),(0,e_._)(h,"label",[X.rcss.color.foregroundDimmer,{fontSize:K.tokens.fontSizeSmall}]),h)],col:[X.rcss.colWithGap(4),X.rcss.flex.growAndShrink(1)],records:[X.rcss.borderRadius(12),(0,e_._)({},X.container.min("mobileMax"),X.rcss.colWithGap(12))],divider:(0,e_._)({display:"flex",height:1,backgroundColor:K.tokens.outlineDimmest},X.container.min("mobileMax"),X.rcss.display.none)});function to(e){var t=e4(e.hostname);return(0,y.jsxs)(ei.View,{css:ta.root,children:[(0,y.jsxs)(ei.View,{css:ta.col,children:[(0,y.jsx)(ei.View,{tag:"label",children:"Type"}),(0,y.jsx)(e7.Input,{value:e.type,readOnly:!0})]}),(0,y.jsxs)(ei.View,{css:ta.col,children:[(0,y.jsx)(ei.View,{tag:"label",children:"Hostname"}),(0,y.jsx)(ti,{value:t,readOnly:!0})]}),(0,y.jsxs)(ei.View,{css:ta.col,children:[(0,y.jsx)(ei.View,{tag:"label",children:"Record"}),(0,y.jsx)(ti,{value:e.record,readOnly:!0})]})]})}function ts(e){var t="replit-verify=".concat(e.replId);return(0,y.jsxs)(e9.Surface,{background:"default",css:ta.records,px:12,pt:8,pb:16,gap:16,children:[(0,y.jsx)(to,{hostname:e.hostname,type:"A",record:e.apexProxy}),(0,y.jsx)(ei.View,{css:ta.divider}),(0,y.jsx)(to,{hostname:e.hostname,type:"TXT",record:t})]})}var tl="https://docs.replit.com/cloud-services/deployments/custom-domains",tu=e.i(222342),tc=e.i(88619),td=e.i(939562),tf=e.i(887877),tp=e.i(818503),th=e.i(604963),tm=e.i(12034),tg=e.i(112767),tv=e.i(795581),tx=(0,Y.cssRecord)({root:[X.rcss.colWithGap(8),X.rcss.borderRadius(8),X.rcss.pl(8),X.rcss.pr(4),X.rcss.height(32),X.rcss.justify.center]}),ty=(0,Y.cssRecord)({root:tx.root,rootExpanded:[tx.root,X.rcss.height("auto"),X.rcss.pt(4),X.rcss.pb(12),X.rcss.justify.start],domainRow:[X.rcss.reset.button,X.rcss.rowWithGap(8),X.rcss.align.center,X.rcss.justify.spaceBetween],domainWrapper:[X.rcss.color.accentPrimaryStronger,{a:X.rcss.hover(X.rcss.color.accentPrimaryStrongest)}],statusDot:[X.rcss.borderRadius("full"),X.rcss.width(6),X.rcss.height(6)],buttons:[X.rcss.flex.column,X.rcss.justify.spaceBetween,(m={gap:8},(0,e_._)(m,X.container.min("mobileMax"),X.rcss.flex.row),(0,e_._)(m,"button",[X.rcss.flex.growAndShrink(1)]),m)],deleteButton:[X.rcss.mt(16)]}),tb={verified:{color:K.tokens.accentPositiveDefault,text:"Verified"},verifying:{color:K.tokens.orangeDefault,text:"Verifying"},temporal_verification:{color:K.tokens.orangeDefault,text:"Verifying"},pushed_to_goval:{color:K.tokens.orangeDefault,text:"Verifying"},failed:{color:K.tokens.accentNegativeDefault,text:"Failed"},expired:{color:K.tokens.accentNegativeDefault,text:"Expired"},purchased:{color:K.tokens.accentPositiveDefault,text:"Purchased"}};function tw(e){var t=e.domain,n=(0,x._)((0,ek.useSetShouldDomainAutoRenewMutation)({onCompleted:function(e){"SetShouldDomainAutoRenewResult"!==e.setShouldDomainAutoRenew.__typename&&a(e.setShouldDomainAutoRenew.message)}}),2),r=n[0],i=n[1].loading,a=(0,tu.default)().showError;return(0,y.jsx)(tg.Switch,{isSelected:t.autorenew,onChange:function(e){r({variables:{input:{domainId:t.id,shouldAutoRenew:e}}})},isReadOnly:i,children:(0,y.jsx)(en.Text,{children:"Auto renew before expiration"})})}function t_(e){var t,n,r,i=e.domain,a=e.deploymentId,o=e.authorizations,s=(0,x._)((0,ek.useHostingDeploymentsUnlinkDomainMutation)(),2),l=s[0],u=s[1].loading,c=(0,x._)((0,ek.useCreateDnsRecordMutation)(),2),d=c[0],f=c[1].loading,p=(0,x._)((0,ek.useDeleteDnsRecordMutation)(),2),h=p[0],m=p[1].loading,g=(0,tu.default)().showError,w=(0,x._)((0,b.useState)("collapsed"),2),_=w[0],k=w[1],S=(0,x._)((0,b.useState)(!1),2),C=S[0],j=S[1],T=(null!=(n=o.deleteCustomDomain)?n:{isAuthorized:!0,message:""}).isAuthorized;return(0,y.jsxs)(Q.ShadesSurface,{css:"collapsed"!==_?ty.rootExpanded:ty.root,children:[(0,y.jsxs)(ei.View,{css:ty.domainRow,style:{borderBottomLeftRadius:"collapsed"!==_?0:void 0,borderBottomRightRadius:"collapsed"!==_?0:void 0},children:[(0,y.jsxs)(ei.View,{css:ty.domainWrapper,shrink:!0,row:!0,gap:8,align:"center",children:[(0,y.jsx)(en.Text,{multiline:!1,children:(0,y.jsx)("a",{target:"_blank",href:"".concat(i.domain.startsWith("http://")||i.domain.startsWith("https://")?"":"https://").concat(i.domain),children:i.domain})}),(0,y.jsxs)(ei.View,{row:!0,gap:4,align:"center",children:[(0,y.jsx)(ei.View,{css:ty.statusDot,style:{backgroundColor:tb[i.state].color}}),(0,y.jsx)(en.Text,{color:"dimmer",variant:"small",children:tb[i.state].text})]})]}),(0,y.jsxs)(ei.View,{row:!0,children:[(0,y.jsx)(tc.CopyIconButton,{textToCopy:i.domain,tooltipSuccessText:"Copy link"}),(0,y.jsx)(J.IconButton,{alt:"Edit",onClick:function(){j(!1),k(function(e){return"collapsed"===e?"dns":"collapsed"})},disabled:f||m,children:"collapsed"===_?(0,y.jsx)(H.default,{}):(0,y.jsx)(eS.default,{})})]})]}),"dns"===_?(0,y.jsxs)(ei.View,{pl:4,pr:8,gap:12,children:[(0,y.jsx)(tj,{domain:i,items:null!=(r=null==(t=i.dnsRecords)?void 0:t.filter(Boolean))?r:[],hostingDeploymentId:a,handleDelete:function(e){h({variables:{input:{domainId:i.id,recordId:e}}})}}),(0,y.jsx)(Z.Button,{text:"Add DNS record",onClick:function(){k("add")}}),(0,y.jsxs)(th.PopoverTrigger,{elevated:!0,label:"Disconnect domain",isOpen:C,onOpenChange:j,children:[(0,y.jsx)(Z.Button,{iconLeft:(0,y.jsx)(eT.default,{}),size:"small",disabled:!T||u,variant:"outlined",colorway:"negative",text:"Disconnect ".concat(i.domain," from this app"),css:ty.deleteButton,onClick:function(){return j(!0)}}),(0,y.jsxs)(ei.View,{gap:4,p:8,children:[(0,y.jsx)(en.Text,{children:"When you disconnect this domain, it will be available to link to your other apps."}),(0,y.jsxs)(en.Text,{children:["Would you like to disconnect ",i.domain," from this app?"]}),(0,y.jsx)(Z.Button,{iconLeft:(0,y.jsx)(eT.default,{}),text:"Yes, disconnect",disabled:u,colorway:"negative",onClick:function(){return(0,L._)(function(){var e;return(0,V._)(this,function(t){switch(t.label){case 0:return[4,l({variables:{input:{hostingDeploymentDomainId:i.id}},refetchQueries:[{query:A.LinkablePurchasedDomainsDocument}]})];case 1:if((e=t.sent()).errors)return g("Something went wrong"),[2];if(!e.data)return[2];if("HostingDeployment"!==e.data.unlinkHostingDeploymentDomain.__typename)return g(e.data.unlinkHostingDeploymentDomain.message),[2];return j(!1),[2]}})})()}})]})]}),(0,y.jsx)(tw,{domain:i})]}):null,"add"===_?(0,y.jsx)(ei.View,{pl:4,pr:8,gap:12,children:(0,y.jsx)(tC,{domain:i.domain,loading:f||m,handleSubmit:function(e){return(0,L._)(function(){var t;return(0,V._)(this,function(n){switch(n.label){case 0:return[4,d({variables:{input:{domainId:i.id,host:e.host,type:e.type,answer:e.answer,priority:"MX"===e.type?e.priority:void 0}}})];case 1:if((t=n.sent()).errors)return g("Something went wrong"),[2];if(!t.data)return[2];return"CreateDnsRecordOutput"===t.data.createDnsRecord.__typename?k("dns"):g(t.data.createDnsRecord.message),[2]}})})()},handleBack:function(){k("dns")}})}):null]})}var tk=[{label:"A",value:"A"},{label:"TXT",value:"TXT"},{label:"MX",value:"MX"},{label:"CNAME",value:"CNAME"}],tS=(0,Y.cssRecord)({hostField:[X.rcss.flex.growAndShrink(1)],select:[X.rcss.minWidth(120)]});function tC(e){var t=e.handleSubmit,n=e.handleBack,r=e.loading,i=e.domain,a=(0,x._)((0,b.useState)(""),2),o=a[0],s=a[1],l=(0,x._)((0,b.useState)("@"),2),u=l[0],c=l[1],d=(0,x._)((0,b.useState)(""),2),f=d[0],p=d[1],h=(0,x._)((0,b.useState)("10"),2),m=h[0],g=h[1],w="MX"===o?"mail.".concat(i):"CNAME"===o?"target.example.com":"Your value here";return(0,y.jsxs)(tf.Form,{gap:8,onSubmit:function(e){e.preventDefault(),t({type:o,host:u,answer:f,priority:"MX"===o?Number(m):void 0})},children:[(0,y.jsxs)(ei.View,{row:!0,gap:4,align:"start",children:[(0,y.jsx)(tm.Select,{isRequired:!0,label:"Type",items:tk,css:tS.select,placeholder:"Select type",selectedKey:o,onSelectionChange:function(e){return s(e)},children:function(e){return(0,y.jsx)(em.ListBoxItem,{id:e.value,label:e.label},e.value)}}),(0,y.jsxs)(tv.TextField,{css:tS.hostField,isRequired:!0,children:[(0,y.jsx)(tp.Label,{children:"Hostname"}),(0,y.jsx)(e7.Input,{placeholder:"@",value:u,onChange:function(e){return c(e.target.value)}}),(0,y.jsx)(td.FieldError,{})]}),"MX"===o?(0,y.jsxs)(tv.TextField,{isRequired:!0,css:tS.select,children:[(0,y.jsx)(tp.Label,{children:"Priority"}),(0,y.jsx)(e7.Input,{type:"number",min:0,max:65535,placeholder:"10",value:m,onChange:function(e){return g(e.target.value)}}),(0,y.jsx)(td.FieldError,{})]}):null]}),(0,y.jsxs)(tv.TextField,{isRequired:!0,children:[(0,y.jsx)(tp.Label,{children:"Record"}),(0,y.jsx)(e7.Input,{placeholder:w,value:f,onChange:function(e){return p(e.target.value)}}),(0,y.jsx)(td.FieldError,{})]}),(0,y.jsx)(Z.Button,{text:"Add",type:"submit",loading:r}),(0,y.jsx)(Z.Button,{text:"Back",onClick:n,loading:r})]})}function tj(e){var t=e.domain,n=e.items,r=e.hostingDeploymentId,i=e.handleDelete;return(0,y.jsx)(ei.View,{gap:4,css:ty.rootExpanded,children:n.map(function(e){return(0,y.jsx)(tT,{item:e,domain:t,hostingDeploymentId:r,handleDelete:i},e.id)})})}function tT(e){var t,n,r,i,a,o=e.item,s=e.domain,l=e.hostingDeploymentId,u=e.handleDelete,c=(0,x._)((0,b.useState)(!1),2),d=c[0],f=c[1],p=(n=null!=(t=o.host)?t:"",!!("TXT"===o.type&&l&&e5.includes(n)&&o.answer==="replit-verify=".concat(l)||"A"===o.type&&l&&e5.includes(n))),h=null!=(r=o.host)?r:"",m=h?"".concat(h,".").concat(s.domain):s.domain;return(0,y.jsxs)(ei.View,{row:!0,gap:4,align:"center",children:[(0,y.jsx)(ei.View,{grow:!0,children:(0,y.jsx)(to,{type:null!=(i=o.type)?i:"",record:null!=(a=o.answer)?a:"",hostname:m})}),(0,y.jsxs)(th.PopoverTrigger,{elevated:!0,placement:"bottom right",label:"Delete DNS record",isOpen:d,onOpenChange:f,children:[(0,y.jsx)(J.IconButton,{css:ty.deleteButton,alt:"Delete",onClick:function(){return f(!0)},children:(0,y.jsx)(ej.default,{})}),(0,y.jsxs)(ei.View,{gap:4,p:8,children:[(0,y.jsx)(en.Text,{children:p?"Deleting Replit managed DNS records may cause your domain to stop working properly. Are you sure you want to continue?":"Are you sure you want to delete this DNS record?"}),(0,y.jsx)(Z.Button,{text:"Delete",onClick:function(){u(o.id),f(!1)},iconLeft:(0,y.jsx)(ej.default,{})})]})]})]},o.id)}function tE(e){var t=e.domain,n=e.deploymentId,r=e.replId,i=e.apexProxy,a=e.authorizations,o=(0,x._)((0,b.useState)(!1),2),s=o[0],l=o[1],u=(0,x._)((0,b.useState)(!1),2),c=u[0],d=u[1],f=(0,eb.useFlag)({controlName:"flag-domains-glowup",default:!1}),p=(0,x._)((0,I.useHostingDeploymentDomainsLazyQuery)({variables:{id:n,isGlowup:f},fetchPolicy:"network-only",ssr:!1}),2),h=p[0],m=p[1].loading,g=(0,x._)((0,ek.useHostingDeploymentsUnlinkDomainMutation)(),2),w=g[0],S=g[1].loading,C=(0,x._)((0,ek.useVerifyDomainMutation)(),2),j=C[0],T=C[1].loading,E=t.state===_.HostingDeploymentDomainState.Failed,R=a.addCustomDomain,A=R.isAuthorized,P=R.message,D=a.deleteCustomDomain,O=D.isAuthorized,N=D.message;return(0,y.jsxs)(Q.ShadesSurface,{css:s?ty.rootExpanded:ty.root,children:[(0,y.jsxs)(ei.View,{css:ty.domainRow,style:{borderBottomLeftRadius:s?0:void 0,borderBottomRightRadius:s?0:void 0},children:[(0,y.jsxs)(ei.View,{css:ty.domainWrapper,shrink:!0,row:!0,gap:8,align:"center",children:[(0,y.jsx)(en.Text,{multiline:!1,children:(0,y.jsx)("a",{target:"_blank",href:"".concat(t.domain.startsWith("http://")||t.domain.startsWith("https://")?"":"https://").concat(t.domain),children:t.domain})}),(0,y.jsxs)(ei.View,{row:!0,gap:4,align:"center",children:[(0,y.jsx)(ei.View,{css:ty.statusDot,style:{backgroundColor:tb[t.state].color}}),(0,y.jsx)(en.Text,{color:"dimmer",variant:"small",children:tb[t.state].text})]})]}),(0,y.jsxs)(ei.View,{row:!0,children:[(0,y.jsx)(tc.CopyIconButton,{textToCopy:t.domain,tooltipSuccessText:"Copy link"}),(0,y.jsx)(er.Tooltip,{tooltip:P,isDisabled:A,children:(0,y.jsx)(J.IconButton,{alt:"Edit",disabled:!A,tooltipBehavior:"hidden",onClick:function(){d(!1),l(function(e){return!e})},css:X.rcss.color.foregroundDimmer,children:s?(0,y.jsx)(eS.default,{}):(0,y.jsx)(H.default,{})})})]})]}),s?(0,y.jsx)(ei.View,{pl:4,pr:8,gap:12,children:c?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(en.Text,{children:"Are you sure you want to unlink this domain?"}),(0,y.jsxs)(ei.View,{css:ty.buttons,children:[(0,y.jsx)(Z.Button,{size:"small",variant:"outlined",text:"Cancel",onClick:function(){d(!1)}}),(0,y.jsx)(Z.Button,{size:"small",disabled:S,text:"Yes, unlink "+t.domain,colorway:"negative",onClick:function(){w({variables:{input:{hostingDeploymentDomainId:t.id}}})}})]})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(ei.View,{gap:6,children:[E?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(ei.View,{row:!0,gap:6,align:"center",children:[(0,y.jsx)(k.default,{}),(0,y.jsx)(en.Text,{children:"DNS Error"})]}),(0,y.jsxs)(en.Text,{children:["Failed to link domain",t.status?": ".concat(t.status.endsWith(".")?t.status.slice(0,-1):t.status):null,". Make sure your domain's DNS settings have these records."," ",(0,y.jsx)("a",{target:"_blank",href:tl,children:"Learn more"})]})]}):(0,y.jsxs)(en.Text,{color:"dimmer",children:["Add these records to your domain's"," ",(0,y.jsx)("strong",{css:X.rcss.color.foregroundDefault,children:"DNS settings"}),". This may take up to 48 hours to fully apply."," ",(0,y.jsx)("a",{target:"_blank",href:tl,children:"Learn more"})]}),(0,y.jsx)(ts,{hostname:t.domain,apexProxy:i,replId:r})]}),(0,y.jsxs)(ei.View,{css:ty.buttons,children:[(0,y.jsx)(Z.Button,{iconLeft:m||T?(0,y.jsx)(z.default,{}):(0,y.jsx)(eC.default,{}),size:"small",text:E?"Retry linking":"Check status",onClick:function(){E?j({variables:{input:{hostingDeploymentDomainId:t.id}}}):h()}}),(0,y.jsx)(er.Tooltip,{isDisabled:O,tooltip:N,children:(0,y.jsx)(Z.Button,{iconLeft:(0,y.jsx)(ej.default,{}),size:"small",disabled:S||!O,text:E?"Remove domain":"Unlink domain",colorway:"negative",onClick:function(){d(!0)}})})]})]})}):null]})}function tR(e){var t=e.domain,n=e.deploymentId,r=e.replId,i=e.apexProxy,a=e.authorizations;return t.managed?(0,y.jsx)(t_,{domain:t,deploymentId:n,authorizations:a}):(0,y.jsx)(tE,{domain:t,deploymentId:n,replId:r,apexProxy:i,authorizations:a})}var tI=e.i(207237),tA=(0,Y.cssRecord)({item:[X.rcss.borderRadius(8)]});function tP(e){var t,n,r=e.deploymentId,i=e.refetchDomainsQuery,a=(0,tI.default)(),o=(0,A.useLinkablePurchasedDomainsQuery)({fetchPolicy:"cache-and-network",ssr:!1}),s=o.data,l=o.refetch,u=null==s||null==(n=s.currentUser)||null==(t=n.domains)?void 0:t.items,c=(0,x._)((0,A.useLinkPurchasedDomainMutation)(),2),d=c[0],f=c[1].loading;if(!(null==u?void 0:u.length))return null;var p=function(e){return(0,L._)(function(){return(0,V._)(this,function(t){switch(t.label){case 0:return[4,d({variables:{replId:a,domainName:e,deploymentId:r}})];case 1:return t.sent(),i(),l(),[2]}})})()};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(ei.View,{row:!0,align:"center",gap:8,children:[(0,y.jsx)(en.Text,{variant:"subheadDefault",children:"Available to link:"}),f?(0,y.jsx)(z.default,{}):null]}),(0,y.jsx)(ei.View,{gap:8,tag:"ul",children:u.map(function(e){return(0,y.jsx)(tD,{loading:f,domain:e.domain,handleLink:p},e.id)})}),(0,y.jsxs)(en.Text,{variant:"small",color:"dimmer",children:["View all your purchased domains on your"," ",(0,y.jsx)(G.default,{href:"/account#domains",target:"_blank",children:"account"})," ","page."]})]})}function tD(e){var t=e.domain,n=e.handleLink,r=e.loading,i=(0,x._)((0,b.useState)(!1),2),a=i[0],o=i[1];return(0,y.jsxs)(Q.ShadesSurface,{tag:"li",css:tA.item,row:!0,px:8,py:4,align:"center",justify:"space-between",children:[(0,y.jsx)(en.Text,{children:t}),(0,y.jsxs)(th.PopoverTrigger,{placement:"bottom right",isOpen:a&&!r,onOpenChange:o,label:"Link domain",children:[(0,y.jsx)(J.IconButton,{onClick:function(){return o(!0)},alt:"Link",children:(0,y.jsx)(O.default,{})}),(0,y.jsxs)(ei.View,{gap:8,p:8,children:[(0,y.jsxs)(en.Text,{children:["Point ",t," to this deployment?"]}),(0,y.jsx)(Z.Button,{onClick:function(){n(t),o(!1)},text:"Yes",loading:r})]})]})]})}var tO=e.i(919872),tN=e.i(752539),tM=e.i(555896),tL=e.i(882848),tB=(0,Y.cssRecord)({root:[X.rcss.borderRadius(8),X.rcss.border({color:K.tokens.outlineDimmer})],labelRow:[X.rcss.rowWithGap(8),X.rcss.align.center],labelText:[X.rcss.flex.growAndShrink(1)],controls:[{"& > button":[X.rcss.flex.growAndShrink(1)]}]}),tV=function(e){try{return new URL(e.startsWith("http")?e:"https://".concat(e)).hostname.toLowerCase()}catch(t){return e.trim().toLowerCase()}};function tF(e){var t=(0,x._)((0,b.useState)([]),2),n=t[0],r=t[1],i=(0,x._)((0,I.useLinkHostingDeploymentDomainMutation)({onCompleted:function(){e.onAdd()}}),2),a=i[0],o=i[1].loading;return(0,y.jsx)(ei.View,{css:tB.root,p:8,children:0===n.length?(0,y.jsx)(tU,{onCancel:e.onCancel,onSubmit:function(e){r(e)}}):(0,y.jsx)(tG,{onCancel:e.onCancel,onSubmit:function(){a({variables:{input:{hostingDeploymentId:e.deploymentId,domain:n[0]}}})},domains:n,apexProxy:e.apexProxy,deploymentId:e.deploymentId,isLinkingDomains:o,replId:e.replId})})}function tU(e){var t=e.onSubmit,n=e.onCancel,r=(0,b.useId)(),i=(0,x._)((0,b.useState)(!0),2),a=i[0],o=i[1],s=(0,x._)((0,b.useState)(void 0),2),l=s[0],u=s[1];return(0,y.jsxs)(ei.View,{tag:"form",gap:16,onSubmit:function(e){e.preventDefault();var n=new FormData(e.currentTarget).get("domain");(n=tV(n),(0,tO.default)(n))?t([n]):u("Enter a valid domain")},children:[(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsx)(ei.View,{tag:"label",htmlFor:r+"input",css:tB.labelRow,children:(0,y.jsx)(en.Text,{color:"dimmer",children:"First, enter your domain"})}),(0,y.jsx)(e7.Input,{name:"domain",id:r+"input",autoFocus:!0,placeholder:"example.com",onChange:function(e){o(""===e.currentTarget.value.trim()),u(void 0)}}),l?(0,y.jsxs)(ei.View,{row:!0,gap:4,align:"center",children:[(0,y.jsx)(k.default,{size:12,color:K.tokens.orangeDefault}),(0,y.jsx)(en.Text,{variant:"small",children:l})]}):null]}),(0,y.jsxs)(ei.View,{css:tB.controls,row:!0,gap:8,justify:"space-between",children:[(0,y.jsx)(Z.Button,{type:"button",text:"Cancel",onClick:n}),(0,y.jsx)(Z.Button,{iconRight:(0,y.jsx)(tN.default,{}),colorway:"primary",type:"submit",disabled:a||void 0!==l,text:"Next"})]})]})}function tG(e){var t=e.onSubmit,n=e.onCancel,r=e.domains,i=e.apexProxy,a=e.deploymentId,o=e.isLinkingDomains,s=e.replId,l=(0,b.useRef)(null);return(0,b.useEffect)(function(){l.current&&l.current.focus()},[]),(0,y.jsx)(ei.View,{gap:16,children:(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsx)(t$,{replId:s,apexProxy:i,deploymentId:a,domains:r}),(0,y.jsxs)(ei.View,{css:tB.controls,row:!0,gap:8,justify:"space-between",children:[(0,y.jsx)(Z.Button,{type:"button",text:"Cancel",onClick:n,disabled:o}),(0,y.jsx)(Z.Button,{iconRight:o?(0,y.jsx)(z.default,{}):(0,y.jsx)(tL.default,{}),colorway:"primary",type:"submit",text:r.length>1?"Link domains":"Link domain",ref:l,onClick:function(){return t()},disabled:o})]})]})})}function t$(e){var t=e.domains.map(function(t){return{A:{hostname:t,record:e.apexProxy},TXT:{hostname:t,record:"replit-verify=".concat(e.replId)}}});return(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsxs)(ei.View,{css:tB.labelRow,children:[(0,y.jsx)(tM.default,{color:K.tokens.foregroundDimmest}),(0,y.jsxs)(en.Text,{multiline:!0,css:tB.labelText,children:["Next, add the following records to your domain's DNS settings."," ",(0,y.jsx)("a",{target:"_blank",href:tl,children:"Learn more"})]}),(0,y.jsx)(tc.CopyButton,{textToCopy:JSON.stringify(t,null,2),text:"JSON",showIcon:!0,size:"small"})]}),(0,y.jsx)(ei.View,{gap:8,children:e.domains.map(function(t){return(0,y.jsx)(ts,{apexProxy:e.apexProxy,hostname:t,replId:e.replId},t)})})]})}var tH=e.i(680250),tz=e.i(429662),tW=e.i(602686),tq=(0,Y.cssRecord)({root:[X.rcss.borderRadius(8),X.rcss.minHeight(32)],domainMessage:[X.rcss.color.foregroundDimmer]});function tK(e){var t=e.domainName,n=e.status,r=e.message;return(0,y.jsxs)(Q.ShadesSurface,{css:tq.root,pl:8,pr:4,py:4,children:[(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",justify:"start",children:[(0,y.jsx)(en.Text,{multiline:!1,children:t}),(0,y.jsxs)(ei.View,{row:!0,align:"center",gap:4,children:[function(e){switch(e){case"pending":default:return(0,y.jsx)(tz.default,{color:K.tokens.foregroundDimmer});case"success":return(0,y.jsx)(ec.default,{color:K.tokens.accentPositiveDefault});case"fail":return(0,y.jsx)(tW.default,{color:K.tokens.accentNegativeDefault})}}(n),(0,y.jsx)(en.Text,{color:"dimmer",variant:"small",children:function(e){switch(e){case"pending":return"Processing...";case"dns-verifying":return"Verifying DNS...";case"success":return"Domain purchased successfully";case"fail":return"Purchase failed";default:return e}}(n)})]})]}),r?(0,y.jsx)(en.Text,{variant:"small",css:tq.domainMessage,children:r}):null]})}function tY(e){var t=e.refetchDomainsQuery,n=e.omitDomains,r=(0,x._)((0,b.useState)(new Set),2),i=r[0],a=r[1],o=(0,tI.default)(),s=(0,tH.usePendingDomainsQueryQuery)({variables:{replId:o},fetchPolicy:"cache-and-network",ssr:!1}).data;(0,tH.usePendingDomainsUpdatesSubscription)({variables:{replId:o},onData:function(e){var n,r,o=e.data;if(o&&(null==(r=o.data)||null==(n=r.pendingDomainsUpdates)?void 0:n.pendingDomains)){var s=o.data.pendingDomainsUpdates.pendingDomains.filter(function(e){return"success"===e.status}).map(function(e){return e.domainName}),l=new Set((0,E._)(i).concat((0,E._)(s)));l.size>i.size&&t(),a(l)}}});var l=(0,b.useMemo)(function(){var e;return(null==s||null==(e=s.getRepl)?void 0:e.__typename)!=="Repl"?null:s.getRepl.pendingDomains.filter(function(e){return!n.has(e.domainName)&&"fail"!==e.status})},[s,n]);return l&&0!==l.length?(0,y.jsx)(ei.View,{gap:8,children:l.map(function(e){var t;return n.has(e.domainName)?null:(0,y.jsx)(tK,{domainName:e.domainName,status:e.status,message:null!=(t=e.message)?t:void 0},e.domainName)})}):null}var tQ=e.i(396776),tX=(0,Y.cssRecord)({primaryDomain:[X.rcss.borderRadius(8),X.rcss.height(32)],primaryDomainLink:[X.rcss.flex.shrink(1),X.rcss.color.accentPrimaryStronger,{a:X.rcss.hover(X.rcss.color.accentPrimaryStrongest)}],domainPostPurchaseInfo:[X.rcss.borderRadius(8),X.rcss.border()],buyWrapper:[X.rcss.height("100%"),X.rcss.overflow("hidden")],scrollContainer:[X.rcss.overflow("auto")]});function tZ(e){var t,n,r,i,a,o,s=e.deployment,l=e.authorizations,u=e.viewData,c=(0,tI.default)(),d=(0,I.useDomains2ReplQuery)({variables:{id:c}}),f=d.data,p=d.loading,h=(null==f||null==(t=f.getRepl)?void 0:t.__typename)==="Repl"&&!!(null==(n=f.getRepl.org)?void 0:n.id),m=(0,x._)((0,b.useState)(!1),2),g=m[0],w=m[1],S=(0,x._)((0,b.useState)(!!(null==u?void 0:u.buyDomain)),2),C=S[0],j=S[1],T=(0,x._)((0,b.useState)(void 0),2),L=T[0],B=T[1],V=(0,A.useLinkablePurchasedDomainsQuery)({fetchPolicy:"cache-and-network",ssr:!1}).data,F=null==V||null==(i=V.currentUser)||null==(r=i.domains)?void 0:r.items,U=(0,I.useHostingDeploymentDomainsQuery)({variables:{id:s.id,isGlowup:!1},fetchPolicy:"cache-and-network",ssr:!1,pollInterval:L,onCompleted:function(e){var t,n;B((null==(t=e.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"&&(null==(n=e.hostingDeployment.domains2)?void 0:n.some(function(e){return e.state===_.HostingDeploymentDomainState.Verifying}))?3e4:void 0)}}).refetch,G=(null==s||null==(a=s.domains2)?void 0:a.length)?s.domains2:null,$=(0,b.useMemo)(function(){return new Set((0,E._)((null!=G?G:[]).map(function(e){return e.domain})).concat((0,E._)((null!=F?F:[]).map(function(e){return e.domain}))).map(function(e){return e}))},[G,F]),H=(null==s?void 0:s.currentBuild.status)===_.HostingBuildStatus.Success,z=null==s?void 0:s.repl.apexProxy,W=(0,M.useDeploymentCurrentBuild)();if(C&&z)return(0,y.jsx)(ei.View,{css:tX.buyWrapper,gap:8,children:(0,y.jsx)(ew,{suggestedDomain:null==s?void 0:s.repl.title,deploymentId:s.id,onRequestClose:function(){return j(!1)}})});var q=function(){var e,t,n,r,i,a=(null==W||null==(e=W.repl.hostingDeployment)?void 0:e.__typename)==="HostingDeployment"?null==(t=W.repl.hostingDeployment)?void 0:t.replitAppSubdomain:void 0;if(!a&&(null==W||null==(n=W.repl.owner)?void 0:n.username)&&(a="".concat(W.repl.slug,"-").concat(W.repl.owner.username)),a)return"".concat(a).concat((null==(i=window)||null==(r=i.location)?void 0:r.hostname)!=="replit.com"?".staging":"",".").concat(N.DEPLOYMENTS_DEFAULT_DOMAIN)}(),Y=l.addCustomDomain,J=Y.isAuthorized,et=Y.message;return(0,y.jsx)(ei.View,{css:tX.buyWrapper,gap:8,children:(0,y.jsxs)(ei.View,{css:tX.scrollContainer,shrink:!0,children:[(0,y.jsx)(ei.View,{py:12,children:(0,y.jsx)(en.Text,{variant:"subheadDefault",children:"Domains"})}),(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsxs)(Q.ShadesSurface,{css:tX.primaryDomain,justify:"space-between",align:"center",pl:8,pr:4,row:!0,gap:4,children:[(0,y.jsx)(en.Text,{multiline:!1,css:tX.primaryDomainLink,children:(0,y.jsx)("a",{href:"https://".concat(q),target:"_blank",rel:"noreferrer noopener",children:q})}),(0,y.jsxs)(ei.View,{row:!0,align:"center",children:[(0,y.jsx)(tc.CopyIconButton,{textToCopy:null!=q?q:""}),(0,y.jsx)(er.Tooltip,{tooltip:tJ,children:(0,y.jsx)(D.default,{"aria-label":tJ,color:K.tokens.foregroundDimmer,css:X.rcss.m(4)})})]})]}),G&&s?(0,y.jsx)(ei.View,{gap:8,children:G.map(function(e){return(0,y.jsx)(ei.View,{children:(0,y.jsx)(tR,{apexProxy:s.repl.apexProxy,deploymentId:s.id,domain:e,authorizations:l,replId:s.repl.id})},e.domain)})}):null,(0,y.jsx)(tY,{refetchDomainsQuery:function(){U()},omitDomains:$}),(0,y.jsx)(tP,{deploymentId:s.id,refetchDomainsQuery:U}),(null==(o=s.domains2)?void 0:o.some(function(e){return e.managed&&5>(0,R.differenceInDays)(new Date,new Date(e.timeCreated))}))?(0,y.jsxs)(Q.ShadesSurface,{px:8,py:8,css:tX.domainPostPurchaseInfo,children:[(0,y.jsxs)(ei.View,{row:!0,align:"center",gap:8,children:[(0,y.jsx)(P.default,{}),(0,y.jsx)(en.Text,{children:"Congratulations on your new domain!"})]}),(0,y.jsx)(ei.View,{pl:24,children:(0,y.jsx)(en.Text,{variant:"small",children:"You may see a temporary error when accessing your domain that usually resolves within a few minutes after purchasing. If the problem persists longer than 48 hours, please contact Replit Support."})})]}):null,g&&z?(0,y.jsx)(tF,{apexProxy:z,deploymentId:s.id,onAdd:function(){return w(!1)},onCancel:function(){return w(!1)},replId:s.repl.id}):null,H?null:(0,y.jsx)(tQ.StatusBanner,{colorway:"warning",icon:(0,y.jsx)(k.default,{}),text:"You must successfully publish your project before linking a domain"}),!1===g?(0,y.jsxs)(ei.View,{row:!0,gap:8,children:[(0,y.jsx)(er.Tooltip,{tooltip:h?"Custom domain purchasing is coming soon to org-owned Apps.":et,isDisabled:J&&!h,children:(0,y.jsx)(Z.Button,{disabled:!H||!J||h||p,iconLeft:(0,y.jsx)(O.default,{}),text:"Buy a new domain",onClick:function(){(0,ep.track)(eh.events.DOMAIN_PURCHASE,{action:"flow_opened",suggestedDomain:null==s?void 0:s.repl.title}),j(!0)},variant:"outlined",size:"small",iconRight:(0,y.jsx)(ee.Pill,{compact:!0,colorway:"primary",text:"Beta"})})}),(0,y.jsx)(er.Tooltip,{tooltip:et,isDisabled:J,children:(0,y.jsx)(Z.Button,{disabled:!H||!J,iconLeft:(0,y.jsx)(O.default,{}),text:"Manually connect from another registrar",onClick:function(){w(!0)},variant:"outlined",size:"small"})})]}):null]})]})})}var tJ="The primary domain always ends in replit.app. To change, you must unpublish your app and publish again.",t0=e.i(569384),t1=e.i(973245),t2=e.i(304277);e.i(566901);var t3=e.i(951262),t5=e.i(613141);function t4(){var e=(0,t0._)(["\n  fragment DomainsGlowupRepl on Repl {\n    id\n    org {\n      id\n    }\n  }\n"]);return t4=function(){return e},e}function t8(){var e=(0,t0._)(["\n  fragment DomainVerificationStatus on Domain {\n    state\n  }\n"]);return t8=function(){return e},e}function t6(){var e=(0,t0._)(["\n  fragment DomainsGlowupDomain on Domain {\n    id\n    state\n    domain\n    managed\n    ...DomainVerificationStatus\n    dnsRecords {\n      id\n      answer\n      type\n      host\n    }\n    whois {\n      registrar\n      creationDate\n      expiryDate\n    }\n    currentDnsRecords {\n      A\n      TXT\n    }\n    renewalPriceCents\n    autorenew\n    timeCreated\n    purchaseDate\n    registrantEmailVerified\n    user {\n      id\n    }\n  }\n  ","\n"]);return t6=function(){return e},e}function t7(){var e=(0,t0._)(["\n  fragment DomainsGlowupHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      title\n      apexProxy\n    }\n    domains2 {\n      ...DomainsGlowupDomain\n    }\n  }\n  ","\n"]);return t7=function(){return e},e}function t9(){var e=(0,t0._)(["\n  query DomainsGlowupRepl($id: String!) {\n    getRepl(id: $id) {\n      ...DomainsGlowupRepl\n    }\n  }\n  ","\n"]);return t9=function(){return e},e}function ne(){var e=(0,t0._)(["\n  query DomainsGlowupHostingDeploymentDomains(\n    $id: String!\n    $isGlowup: Boolean!\n  ) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return ne=function(){return e},e}function nt(){var e=(0,t0._)(["\n  query DomainsGlowupPrefetchLinkablePurchasedDomains {\n    currentUser {\n      id\n      domains(managed: true, onlyUnlinked: true) {\n        items {\n          id\n          domain\n        }\n      }\n    }\n  }\n"]);return nt=function(){return e},e}var nn={},nr=(0,t1.gql)(t4()),ni=(0,t1.gql)(t8()),na=(0,t1.gql)(t6(),ni);(0,t1.gql)(t7(),na);var no=(0,t1.gql)(t9(),nr),ns=(0,t1.gql)(ne(),I.HostingDeploymentDomainsHostingDeploymentFragmentDoc),nl=(0,t1.gql)(nt());function nu(){var e=(0,t0._)(["\n  fragment DomainLinkingStatus on DomainLinkingStatus {\n    domainId\n    domainName\n    currentPhase\n    currentStatus\n    message\n    steps {\n      phase\n      status\n      message\n      timestamp\n    }\n    updatedAt\n  }\n"]);return nu=function(){return e},e}function nc(){var e=(0,t0._)(["\n  fragment DomainLinkingStatusesRepl on Repl {\n    id\n    domainLinkingStatuses {\n      ...DomainLinkingStatus\n    }\n  }\n  ","\n"]);return nc=function(){return e},e}function nd(){var e=(0,t0._)(["\n  fragment DomainsGlowupLinkablePurchasedDomains on CurrentUser {\n    domains(managed: true, onlyUnlinked: true) {\n      items {\n        id\n        domain\n      }\n    }\n  }\n"]);return nd=function(){return e},e}function nf(){var e=(0,t0._)(["\n  fragment DomainsGlowupMinimalHostingDeploymentDomains on HostingDeployment {\n    id\n    domains2 {\n      id\n      domain\n    }\n  }\n"]);return nf=function(){return e},e}function np(){var e=(0,t0._)(["\n  query DomainsGlowupDomainManagementLinkablePurchasedDomains {\n    currentUser {\n      id\n      ...DomainsGlowupLinkablePurchasedDomains\n    }\n  }\n  ","\n"]);return np=function(){return e},e}function nh(){var e=(0,t0._)(["\n  mutation DomainsGlowupUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        ...DomainsGlowupMinimalHostingDeploymentDomains\n        repl {\n          ...PendingDomainsRepl\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return nh=function(){return e},e}function nm(){var e=(0,t0._)(["\n  mutation DomainsGlowupDeleteDnsRecord($input: DeleteDnsRecordInput!) {\n    deleteDnsRecord(input: $input) {\n      ... on Error {\n        message\n      }\n      ... on DeleteDnsRecordOutput {\n        domain {\n          id\n          dnsRecords {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return nm=function(){return e},e}function ng(){var e=(0,t0._)(["\n  mutation DomainsGlowupSetShouldAutoRenew(\n    $input: SetShouldDomainAutoRenewInput!\n  ) {\n    setShouldDomainAutoRenew(input: $input) {\n      ... on Error {\n        message\n      }\n      ... on SetShouldDomainAutoRenewResult {\n        domain {\n          id\n          autorenew\n        }\n      }\n    }\n  }\n"]);return ng=function(){return e},e}function nv(){var e=(0,t0._)(["\n  mutation DomainsGlowupVerifyDomain($input: VerifyDomainInput!) {\n    verifyDomain(input: $input) {\n      ... on Domain {\n        ...DomainsGlowupDomain\n      }\n    }\n  }\n  ","\n"]);return nv=function(){return e},e}function nx(){var e=(0,t0._)(["\n  mutation DomainsGlowupCreateDnsRecord($input: CreateDnsRecordInput!) {\n    createDnsRecord(input: $input) {\n      ... on Error {\n        message\n      }\n      ... on CreateDnsRecordOutput {\n        domain {\n          id\n          ...DomainsGlowupDomain\n        }\n      }\n    }\n  }\n  ","\n"]);return nx=function(){return e},e}function ny(){var e=(0,t0._)(["\n  query DomainsGlowupReplLinkingStatuses($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...DomainLinkingStatusesRepl\n      }\n    }\n  }\n  ","\n"]);return ny=function(){return e},e}function nb(){var e=(0,t0._)(["\n  subscription DomainsGlowupDomainLinkingStatusUpdates($replId: String!) {\n    domainLinkingStatusUpdates(replId: $replId) {\n      ...DomainLinkingStatusesRepl\n    }\n  }\n  ","\n"]);return nb=function(){return e},e}var nw={},n_=(0,t1.gql)(nu()),nk=(0,t1.gql)(nc(),n_),nS=(0,t1.gql)(nd()),nC=(0,t1.gql)(nf()),nj=(0,t1.gql)(np(),nS),nT=(0,t1.gql)(nh(),nC,tH.PendingDomainsReplFragmentDoc),nE=(0,t1.gql)(nm()),nR=(0,t1.gql)(ng());(0,t1.gql)(nv(),na);var nI=(0,t1.gql)(nx(),na),nA=(0,t1.gql)(ny(),nk),nP=(0,t1.gql)(nb(),nk),nD=e.i(886513),nO=e.i(341190),nN=e.i(654647);function nM(){var e=(0,t0._)(["\n  query DomainsGlowupConnectDomainLinkablePurchasedDomains {\n    currentUser {\n      id\n      ...DomainsGlowupLinkablePurchasedDomains\n    }\n  }\n  ","\n"]);return nM=function(){return e},e}function nL(){var e=(0,t0._)(["\n  mutation DomainsGlowupLinkExternalDomain(\n    $input: LinkHostingDeploymentDomainInput!\n    $isGlowup: Boolean = true\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return nL=function(){return e},e}function nB(){var e=(0,t0._)(["\n  mutation DomainsGlowupLinkPurchasedDomain(\n    $replId: String!\n    $domainName: String!\n    $deploymentId: String!\n    $isGlowup: Boolean = true\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      deploymentId: $deploymentId\n      domain: $domainName\n    ) {\n      __typename\n      ... on Repl {\n        id\n        hostingDeployment {\n          ...HostingDeploymentDomainsHostingDeployment\n        }\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return nB=function(){return e},e}var nV={},nF=(0,t1.gql)(nM(),nS),nU=(0,t1.gql)(nL(),I.HostingDeploymentDomainsHostingDeploymentFragmentDoc),nG=(0,t1.gql)(nB(),I.HostingDeploymentDomainsHostingDeploymentFragmentDoc),n$=e.i(399245),nH=e.i(224119);function nz(e){var t;return(0,y.jsx)(ei.View,{clsx:(t={},(0,e_._)(t,nH.default.tableWrapper,!e.noBorder),(0,e_._)(t,nH.default.tableWrapperBorderless,e.noBorder),t),children:(0,y.jsx)("table",{className:nH.default.table,children:e.children})})}function nW(e){var t=e.children;return(0,y.jsx)(Q.ShadesSurface,{tag:"tr",clsx:nH.default.tableHeader,children:t})}function nq(e){var t=e.children,n=(0,nD._)(e,["children"]);return(0,y.jsx)("tr",(0,eR._)((0,eE._)({},n),{clsx:[nH.default.tableRow,n.className],children:t}))}function nK(e){var t=e.children,n=(0,nD._)(e,["children"]);return(0,y.jsx)("td",(0,eR._)((0,eE._)({},n),{clsx:[nH.default.tableCell,n.className],children:t}))}function nY(e){var t=e.children,n=(0,nD._)(e,["children"]);return(0,y.jsx)("span",(0,eR._)((0,eE._)({},n),{clsx:[nH.default.screenReaderOnly,n.className],children:t}))}function nQ(e){var t=(0,x._)((0,b.useState)(!1),2),n=t[0],r=t[1];return(0,b.useEffect)(function(){if(n){var e=setTimeout(function(){r(!1)},1e3);return function(){return clearTimeout(e)}}},[n]),(0,y.jsxs)(ei.View,{row:!0,align:"center",justify:"space-between",gap:8,children:[(0,y.jsx)(en.Text,{variant:"small",children:e.value}),(0,y.jsx)(J.IconButton,{alt:"Copy",tooltipBehavior:"hidden",onClick:function(){(0,e8.default)(e.value),r(!0)},children:n?(0,y.jsx)(ec.default,{}):(0,y.jsx)(eI.default,{})})]})}function nX(e){var t;return(0,y.jsxs)(nz,{noBorder:null!=(t=e.noBorder)&&t,children:[(0,y.jsxs)(nW,{children:[(0,y.jsx)("th",{children:(0,y.jsx)(en.Text,{variant:"small",color:"dimmer",children:"Type"})}),(0,y.jsx)("th",{children:(0,y.jsx)(en.Text,{variant:"small",color:"dimmer",children:"Hostname"})}),(0,y.jsx)("th",{children:(0,y.jsx)(en.Text,{variant:"small",color:"dimmer",children:"Record"})}),e.actions?(0,y.jsx)("th",{children:(0,y.jsx)(nY,{children:"Actions"})}):null]}),e.dnsRecords.map(function(t){return(0,y.jsxs)(nq,{children:[(0,y.jsx)(nK,{children:t.type}),(0,y.jsx)(nK,{children:e.showCopyButton?(0,y.jsx)(nQ,{value:t.hostname}):t.hostname}),(0,y.jsx)(nK,{width:"100%",children:e.showCopyButton?(0,y.jsx)(nQ,{value:t.record}):t.record}),e.actions?(0,y.jsx)(nK,{children:e.actions(t)}):null]},t.id)})]})}function nZ(e){var t="replit-verify=".concat(e.replId),n=e4(e.hostname);return[{id:"A-".concat(n),type:"A",hostname:n,record:e.apexProxy},{id:"TXT-".concat(n),type:"TXT",hostname:n,record:t}]}var nJ=e.i(922463),n0=e.i(880321),n1=e.i(448451);function n2(e){var t=e.trim().toLowerCase();if(""===t)return t;t.startsWith("http://")||t.startsWith("https://")||(t="https://".concat(t));try{return new URL(t).hostname.toLowerCase()}catch(e){return t}}function n3(e){var t,n,r=(0,x._)((0,b.useState)(null),2),i=r[0],a=r[1],o=(0,tu.default)().showError,s=(0,x._)((t={awaitRefetchQueries:!0,refetchQueries:[{query:ns,variables:{id:e.deploymentId,isGlowup:!0}}],onCompleted:function(t){return(0,L._)(function(){var n;return(0,V._)(this,function(r){return(null==t?void 0:t.linkHostingDeploymentDomain.__typename)!=="HostingDeployment"?o(null!=(n=null==t?void 0:t.linkHostingDeploymentDomain.message)?n:"Something went wrong when linking your purchased domain"):e.onAdd(),[2]})})()},onError:function(e){o(e.message)}},n=(0,eE._)({},nV,t),t3.useMutation(nU,n)),2),l=s[0],u=s[1].loading;function c(){i&&l({variables:{input:{hostingDeploymentId:e.deploymentId,domain:i.domain}}})}return(0,y.jsxs)(ei.View,{gap:8,grow:!0,shrink:!0,children:[(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",children:[(0,y.jsx)(J.IconButton,{onClick:e.onBack,alt:"Back to domains",disabled:u,children:(0,y.jsx)($.default,{})}),(0,y.jsx)(en.Header,{level:2,variant:"subheadDefault",children:"Connect your own domain"})]}),(0,y.jsxs)(ei.View,{py:12,px:16,gap:24,children:[(0,y.jsx)(n5,(0,eR._)((0,eE._)({},e),{enteredDomainDetails:i,setEnteredDomainDetails:a,linkExternalDomainToDeployment:c,isLinkingExternalDomain:u})),i?(0,y.jsx)(n4,(0,eR._)((0,eE._)({},e),{enteredDomainDetails:i,setEnteredDomainDetails:a,linkExternalDomainToDeployment:c,isLinkingExternalDomain:u})):null]})]})}function n5(e){var t,n,r,i,a,o,s=e.enteredDomainDetails,l=e.setEnteredDomainDetails,u=(0,nD._)(e,["enteredDomainDetails","setEnteredDomainDetails"]),c=(0,b.useId)(),d=(0,x._)((0,b.useState)(void 0),2),f=d[0],p=d[1],h=(0,b.useRef)(null),m=(0,x._)((0,b.useState)(null!=(a=null==s?void 0:s.domain)?a:""),2),g=m[0],w=m[1],_=(0,x._)((t=(0,eE._)({},nV,void 0),t3.useMutation(nG,t)),2),S=_[0],C=_[1].loading,j=(n=(0,eE._)({},nV,void 0),t2.useQuery(nF,n)).data,T=(0,tu.default)().showError,E=(null!=(o=null==j||null==(i=j.currentUser)||null==(r=i.domains)?void 0:r.items)?o:[]).map(function(e){return e.domain}),R=""===g,I=E.includes(n2(g)),A=R||void 0!==f||C,P=function(){l(null)},D=(0,nJ.usePrevious)(s);return(0,b.useEffect)(function(){if(D&&null===s){var e;null==(e=h.current)||e.focus()}},[s,D]),(0,y.jsxs)(tf.Form,{gap:24,onSubmit:function(e){if(e.preventDefault(),!C){var t,n=g;if("string"!=typeof n||(n=n2(n),!(0,tO.default)(n)))return void p("Enter a valid domain");(w(n),I)?(t=n,(0,L._)(function(){var e,n,r,i;return(0,V._)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,S({variables:{domainName:t,deploymentId:u.deploymentId,replId:u.replId},awaitRefetchQueries:!0,refetchQueries:[{query:nF}]})];case 1:if((null==(e=(n=a.sent()).data)?void 0:e.linkReplDomain2.__typename)!=="Repl")return T(null!=(i=null==(r=n.data)?void 0:r.linkReplDomain2.message)?i:"Something went wrong when linking your purchased domain"),[2];return u.onAdd(),[3,3];case 2:return a.sent(),T("Something went wrong when linking your purchased domain"),[3,3];case 3:return[2]}})})()):l({domain:n})}},children:[(0,y.jsxs)(ei.View,{gap:10,children:[(0,y.jsx)(ei.View,{htmlFor:c+"domain-input",tag:"label",row:!0,gap:8,align:"center",children:(0,y.jsx)(en.Text,{color:"dimmer",children:"Enter the domain you want to connect to your project"})}),(0,y.jsx)(n0.ComboBox,(0,eR._)((0,eE._)({ref:h,"aria-label":"Select a domain",allowsCustomValue:!0,id:c+"domain-input",placeholder:"example.com",inputValue:g,icon:null===s?(0,y.jsx)(n$.default,{}):void 0,menuTrigger:"focus",onInputChange:function(e){w(e),p(void 0)},name:"domain",allowsEmptyCollection:!1},null!==s?{isDisabled:!0,triggerIcon:(0,y.jsx)(H.default,{}),triggerButtonProps:{onClick:function(){P()}}}:0===E.length?{triggerButtonProps:{style:{display:"none"}}}:{}),{children:E.length>0?(0,y.jsxs)(nN.ListBoxSection,{children:[(0,y.jsx)(nO.Header,{clsx:n1.default.listBoxHeader,children:"Or choose from domains you own on Replit"}),E.map(function(e){return(0,y.jsx)(em.ListBoxItem,{label:e,id:e},e)})]}):null})),f?(0,y.jsxs)(ei.View,{row:!0,gap:4,align:"center",children:[(0,y.jsx)(k.default,{size:12,color:K.tokens.orangeDefault}),(0,y.jsx)(en.Text,{variant:"small",children:f})]}):null]}),s?null:(0,y.jsxs)(ei.View,{row:!0,gap:12,clsx:n1.default.buttonsContainer,children:[(0,y.jsx)(Z.Button,{type:"button",text:"Cancel",onClick:u.onBack}),(0,y.jsx)(Z.Button,{disabled:A,text:C?"Linking":I?"Connect Domain":"Next",iconRight:C?void 0:(0,y.jsx)(tN.default,{}),loading:C,colorway:"primary",type:"submit"})]})]},s?"entered":"not-entered")}function n4(e){var t=e.enteredDomainDetails,n=e.setEnteredDomainDetails,r=(0,nD._)(e,["enteredDomainDetails","setEnteredDomainDetails"]),i=(0,b.useRef)(null);return(0,b.useEffect)(function(){i.current&&i.current.focus()},[]),(0,y.jsxs)(ei.View,{gap:24,children:[(0,y.jsxs)(ei.View,{gap:12,children:[(0,y.jsxs)(ei.View,{gap:8,py:8,children:[(0,y.jsx)(en.Text,{variant:"subheadDefault",children:"DNS Records"}),(0,y.jsxs)(en.Text,{children:["Next, add the following records to your domain's DNS settings."," ",(0,y.jsx)(G.default,{href:"https://docs.replit.com/cloud-services/deployments/custom-domains",target:"_blank",rel:"noopener",children:"Learn more"})]})]}),(0,y.jsx)(nX,{dnsRecords:nZ({replId:r.replId,apexProxy:r.apexProxy,hostname:t.domain}),showCopyButton:!0},t.domain)]}),(0,y.jsxs)(ei.View,{row:!0,gap:12,clsx:n1.default.buttonsContainer,children:[(0,y.jsx)(Z.Button,{text:"Cancel",onClick:function(){n(null)},disabled:r.isLinkingExternalDomain}),(0,y.jsx)(Z.Button,{text:"Link",iconRight:(0,y.jsx)(tN.default,{}),colorway:"primary",ref:i,disabled:r.isLinkingExternalDomain,onClick:r.linkExternalDomainToDeployment,loading:r.isLinkingExternalDomain})]})]})}var n8=e.i(656077),n6=e.i(526017),n7=e.i(178496),n9=e.i(927225),re=e.i(585092),rt=e.i(116235);function rn(e){return(0,y.jsx)(rt.default,(0,eR._)((0,eE._)({},e),{children:(0,y.jsx)("path",{fillRule:"evenodd",d:"M11.47 18.53a.75.75 0 0 0 1.06 0l5-5a.75.75 0 1 0-1.06-1.06L12 16.94l-4.47-4.47a.75.75 0 0 0-1.06 1.06l5 5Zm-5-12 5 5a.75.75 0 0 0 1.06 0l5-5a.75.75 0 0 0-1.06-1.06L12 9.94 7.53 5.47a.75.75 0 0 0-1.06 1.06Z",clipRule:"evenodd"})}))}var rr=e.i(904210),ri=e.i(312984),ra=function(e){return e.replace(/^["']|["']$/g,"")};function ro(e){var t,n,r,i,a=(0,x._)((0,b.useState)(!1),2),o=a[0],s=a[1],l=(0,x._)(nZ({replId:e.dns.replId,apexProxy:e.dns.apexProxy,hostname:e.dns.hostname}),2),u=l[0],c=l[1],d=u.record,f=c.record,p="replit-verify=".concat(e.deploymentId),h=e4(e.dns.hostname),m=null!=(r=null==(t=e.dns.currentDnsRecords)?void 0:t.A)?r:[],g=null!=(i=null==(n=e.dns.currentDnsRecords)?void 0:n.TXT)?i:[],w=[];if(m.length>1)return null;var _=m.includes(d);if(!_&&m.length>0?m.forEach(function(e){e!==d&&w.push({type:"A",hostname:h,record:e})}):_||w.push({type:"A",hostname:h,record:"(missing)"}),!g.some(function(e){var t=ra(e);return t===f||t===p})){var k=!1;g.length>0&&g.forEach(function(e){var t=ra(e);(function(e){var t,n=e.toLowerCase(),r="replit-verify";if(n.startsWith("replit-verify="))return!0;var i=n.indexOf("=");if((t=-1!==i?n.substring(0,i):n.substring(0,r.length+5)).length<5||t.length>25)return!1;var a=re.default.get(t,r),o=Math.max(t.length,r.length),s=Math.abs(t.length-r.length);return 1-a/o>=.7&&s<=5})(t)&&t!==f&&t!==p&&(w.push({type:"TXT",hostname:h,record:t}),k=!0)}),k||w.push({type:"TXT",hostname:h,record:"(missing)"})}return 0===w.length?null:(0,y.jsx)(Q.ShadesSurface,{colorShade:"destructive",border:"subtle",gap:12,p:8,children:(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsx)(en.Text,{variant:"small",children:"The DNS settings for your custom domain do not match the DNS records listed above. Please verify your domain's configuration on the DNS provider website."}),o?(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsx)(en.Text,{variant:"small",children:"Below are the incorrect records that need to be updated. Note that DNS records can take up to 48 hours to update."}),(0,y.jsxs)("table",{clsx:ri.default.dnsTable,children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"Type"}),(0,y.jsx)("th",{children:"Hostname"}),(0,y.jsx)("th",{children:"Record"})]})}),(0,y.jsx)("tbody",{children:w.map(function(e,t){return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:e.type}),(0,y.jsx)("td",{children:e.hostname}),(0,y.jsx)("td",{clsx:ri.default.strikeThrough,children:e.record})]},"".concat(e.type,"-").concat(t))})})]})]}):null,(0,y.jsx)(ei.View,{align:"start",children:(0,y.jsx)(Z.Button,{size:"small",shrink:!0,onClick:function(){(0,ep.track)(eh.events.DOMAIN_MANAGEMENT,{action:"dns_checker_viewed",domainName:e.dns.hostname,domainId:e.domainId,isInitiative:"glowup"}),s(!o)},"aria-label":o?"Show less":"Show more",iconLeft:o?(0,y.jsx)(rr.default,{}):(0,y.jsx)(rn,{}),text:o?"Show less":"Show more",colorway:"negative"})})]})})}var rs=e.i(546284),rl=e.i(898861);function ru(e){var t=e.isVerified,n=e.purchaseDate;if(null===t||!0===t)return null;var r=n?Math.max(0,15-(0,R.differenceInDays)(new Date,new Date(n))):15;return(0,y.jsx)(tQ.StatusBanner,{colorway:"warning",icon:(0,y.jsx)(k.default,{}),title:"Email Verification Required",text:(0,y.jsxs)(en.Text,{variant:"small",children:["A verification email was sent to your domain registration contact email. Please verify within ",(0,rs.default)("day",r,!0)," to avoid service disruptions."," ",(0,y.jsx)("span",{clsx:rl.default.tooltipIcon,children:(0,y.jsx)(er.Tooltip,{tooltip:"After verifying your email, it may take up to 15 minutes for your verification status to update.",children:(0,y.jsx)(P.default,{size:16})})})]})})}var rc=e.i(6338),rd=e.i(604425),rf={"checking-dns":{label:"DNS Record Checks",step:0},"configuring-routing":{label:"Routing Update",step:1},"issuing-cert":{label:"SSL Certificate",step:2}},rp=["checking-dns","configuring-routing","issuing-cert"],rh=function(e){var t=e.stepIndex,n=e.activeStep,r=e.erroredStep,i=e.warningStep;return t===r?(0,y.jsx)(k.default,{alt:"error"}):t===i?(0,y.jsx)(k.default,{alt:"warning"}):void 0!==n&&t<n?(0,y.jsx)(ec.default,{alt:"success"}):t===n?(0,y.jsx)(z.default,{alt:"current"}):(0,y.jsx)(tz.default,{alt:"waiting"})},rm=function(e){var t=e.stepIndex,n=e.activeStep,r=e.erroredStep,i=e.warningStep;return void 0===n?null:t===r?"negative":t===i?"warning":t<n?"positive":t===n?"primary":null},rg=function(e,t){return{zIndex:t-e}},rv=rc.loadingStyle.foregroundPulse(),rx=["checking-dns","configuring-routing","issuing-cert"];function ry(){return(0,y.jsx)(e9.Surface,{background:"default",children:(0,y.jsx)(ei.View,{row:!0,children:rx.map(function(e,t){return(0,y.jsx)(b.Fragment,{children:(0,y.jsx)(ee.Pill,{text:"",variant:"filled",clsx:rd.default.pill,style:rg(t,rx.length),css:rv})},e)})})})}function rb(e){var t=e.status,n=t.steps,r=t.currentPhase,i=t.currentStatus;if(n&&n.length>0)c=n;else{if(!r||!i||!rf[r])return null;var a=rf[r].step,o=new Date;c=[];var s=!0,l=!1,u=void 0;try{for(var c,d,f=rp[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var p=d.value,h=rf[p].step;if(h<a){var m=new Date(o.getTime()-(a-h)*1e3);c.push({phase:p,status:"completed",timestamp:m.toISOString()})}else h===a&&c.push({phase:p,status:i,timestamp:o.toISOString()})}}catch(e){l=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(l)throw u}}}var g=new Map,x=(0,E._)(c).sort(function(e,t){return e.timestamp.localeCompare(t.timestamp)}),b=!0,w=!1,_=void 0;try{for(var k,S=x[Symbol.iterator]();!(b=(k=S.next()).done);b=!0){var C=k.value,j=C.phase,T=C.status;rf[j]&&g.set(j,T)}}catch(e){w=!0,_=e}finally{try{b||null==S.return||S.return()}finally{if(w)throw _}}if(0===g.size)return null;var R=new Map,I=!0,A=!1,P=void 0;try{for(var D,O,N,M,L=rp[Symbol.iterator]();!(I=(M=L.next()).done);I=!0){var B=function(){var e=M.value,t=g.get(e),r=rf[e].step;if("failed"===t)return O=r,D=r,"break";if("warning"===t){if(n&&n.length>0){N=r;var i=n.find(function(t){return t.phase===e});(null==i?void 0:i.message)&&R.set(r,i.message)}D=r+1}else{if("in-progress"===t||"pending"===t)return D=r,"break";"completed"===t&&(D=r+1)}}();if("break"===B)break}}catch(e){A=!0,P=e}finally{try{I||null==L.return||L.return()}finally{if(A)throw P}}var V=void 0!==D;return(0,y.jsx)(e9.Surface,{background:"default",children:(0,y.jsx)(ei.View,{row:!0,children:rp.map(function(e){var t,n=rf[e],r=n.step;return(0,y.jsx)(ee.Pill,{text:V?n.label:"",colorway:null!=(t=rm({stepIndex:r,activeStep:D,erroredStep:O,warningStep:N}))?t:void 0,variant:"filled",clsx:rd.default.pill,style:rg(r,rp.length),iconRight:V?(0,y.jsx)(rh,{stepIndex:r,activeStep:D,erroredStep:O,warningStep:N}):void 0},e)})})})}var rw=e.i(869212);function r_(e){var t=e.state,n=e.customMessage,r={verified:{color:K.tokens.accentPositiveDefault,text:"Verified"},verifying:{color:K.tokens.orangeDefault,text:"Verifying"},temporal_verification:{color:K.tokens.orangeDefault,text:"Verifying"},pushed_to_goval:{color:K.tokens.orangeDefault,text:"Verifying"},failed:{color:K.tokens.accentNegativeDefault,text:"Failed"},expired:{color:K.tokens.accentNegativeDefault,text:"Expired"},purchased:{color:K.tokens.accentPositiveDefault,text:"Purchased"}};return(0,y.jsxs)(ei.View,{align:"center",gap:6,row:!0,children:[(0,y.jsx)("span",{clsx:rw.default.statusDotWrapper,children:(0,y.jsx)(ei.View,{clsx:rw.default.domainStatusDot,style:{backgroundColor:r[t].color}})}),(0,y.jsx)(ei.View,{clsx:rw.default.statusText,children:(0,y.jsx)(en.Text,{variant:"small",color:"dimmest",multiline:!0,children:null!=n?n:r[t].text})})]})}function rk(){var e=(0,t0._)(["\n  query GetDomainRegistrantContact($domainName: String!) {\n    getDomainRegistrantContact(domainName: $domainName) {\n      ... on DomainRegistrantContactInfo {\n        firstName\n        lastName\n        companyName\n        address1\n        address2\n        city\n        state\n        zip\n        country\n        phone\n        email\n        isVerified\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return rk=function(){return e},e}function rS(){var e=(0,t0._)(["\n  mutation UpdateDomainContacts($input: UpdateDomainContactsInput!) {\n    updateDomainContacts(input: $input) {\n      ... on UpdateDomainContactsResult {\n        success\n        domain {\n          id\n          registrantEmailVerified\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return rS=function(){return e},e}var rC={},rj=(0,t1.gql)(rk()),rT=(0,t1.gql)(rS()),rE=e.i(739521);function rR(e){var t,n,r,i,a,o=e.isOpen,s=e.onRequestClose,l=e.domainId,u=e.domainName,c=(0,tu.default)(),d=c.showError,f=c.showConfirm,p=(t={variables:{domainName:u},skip:!o,fetchPolicy:"network-only",ssr:!1},n=(0,eE._)({},rC,t),t2.useQuery(rj,n)),h=p.data,m=p.loading,g=p.error,w=(0,x._)((r=(0,eE._)({},rC,void 0),t3.useMutation(rT,r)),2),_=w[0],k=w[1].loading,S=(null==h||null==(i=h.getDomainRegistrantContact)?void 0:i.__typename)==="DomainRegistrantContactInfo"?h.getDomainRegistrantContact:null,C=null!=(a=null==S?void 0:S.email)?a:null,j=(0,b.useMemo)(function(){return S?{firstName:S.firstName,lastName:S.lastName,companyName:S.companyName||"",address1:S.address1,address2:S.address2||"",city:S.city,state:S.state,zip:S.zip,country:S.country,phone:S.phone,email:S.email}:null},[S]),T=function(e){return(0,L._)(function(){var t,n;return(0,V._)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,_({variables:{input:{domainId:l,contact:e}}})];case 1:if(!(n=null==(t=r.sent().data)?void 0:t.updateDomainContacts))return d("Something went wrong. Please try again."),[2];if("UpdateDomainContactsResult"!==n.__typename)return d(n.message),[2];return f(C!==e.email?"Contact information updated. A verification email will be sent to the new email address.":"Contact information updated."),s(),[3,3];case 2:return r.sent(),d("Something went wrong. Please try again."),[3,3];case 3:return[2]}})})()};return(0,y.jsx)(rE.Modal,{isOpen:o,onRequestClose:s,centered:!0,maxWidth:520,children:function(){if(m)return(0,y.jsxs)(ei.View,{align:"center",p:24,gap:8,children:[(0,y.jsx)(z.default,{size:24}),(0,y.jsx)(en.Text,{children:"Loading contact information..."})]});if(g)return(0,y.jsxs)(ei.View,{align:"center",p:24,gap:8,children:[(0,y.jsx)(Q.ShadesSurface,{colorShade:"error",p:12,br:"default",children:(0,y.jsx)(en.Text,{children:"Failed to load contact information."})}),(0,y.jsx)(Z.Button,{variant:"outlined",text:"Close",onClick:s})]});var e=null==h?void 0:h.getDomainRegistrantContact;return e&&"DomainRegistrantContactInfo"!==e.__typename?(0,y.jsxs)(ei.View,{align:"center",p:24,gap:8,children:[(0,y.jsx)(Q.ShadesSurface,{colorShade:"error",p:12,br:"default",children:(0,y.jsx)(en.Text,{children:e.message})}),(0,y.jsx)(Z.Button,{variant:"outlined",text:"Close",onClick:s})]}):(0,y.jsx)(es.ContactStep,{selectedDomain:{domainName:u},onSubmit:T,onBack:s,isSubmitting:k,preservedContactInfo:j,title:"Update domain contact",description:"Update WHOIS contact information for ".concat(u,". If you change the email address, a verification email will be sent."),submitButtonText:"Update contact",showBackButton:!1})}()})}var rI=e.i(311106),rA=e.i(965153),rP=e.i(258941),rD=e.i(988676),rO=e.i(119274),rN=e.i(257811),rM=e.i(674478),rL=(0,y.jsx)(y.Fragment,{children:""}),rB=[{label:"A",value:"A"},{label:"TXT",value:"TXT"},{label:"MX",value:"MX"},{label:"CNAME",value:"CNAME"}];function rV(e){var t,n,r,i,a,o,s,l,u=(0,x._)((0,b.useState)(!1),2),c=u[0],d=u[1],f=(0,x._)((0,b.useState)(!1),2),p=f[0],h=f[1],m=(0,eb.useFlag)({controlName:"flag-domain-email-verification",default:!1}),g=(t={variables:{replId:(null==(r=e.dns)?void 0:r.replId)||""},skip:!(null==(i=e.dns)?void 0:i.replId),fetchPolicy:"cache-and-network",ssr:!1},n=(0,eE._)({},nw,t),t2.useQuery(nA,n)),w=g.data,_=g.loading,S=(null==w?void 0:w.getRepl)&&"domainLinkingStatuses"in w.getRepl?null==(a=w.getRepl.domainLinkingStatuses)?void 0:a.find(function(t){return t.domainId===e.domain.id}):void 0,C=!S,j=_&&(null==(o=e.dns)?void 0:o.replId)&&!S;return(0,y.jsxs)(ei.View,{gap:32,p:24,children:[(0,y.jsx)(ei.View,{row:!0,gap:8,align:"center",children:(0,y.jsx)(Z.Button,{size:"small",variant:"outlined",iconLeft:(0,y.jsx)(n8.default,{}),text:"Back",onClick:e.onBack})}),(0,y.jsxs)(ei.View,{gap:16,children:[(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",justify:"space-between",py:8,children:[(0,y.jsxs)(ei.View,{gap:6,grow:!0,children:[(0,y.jsx)(en.Text,{variant:"headerDefault",children:e.domain.domain}),C?(0,y.jsx)(r_,{state:e.domain.state}):null]}),(0,y.jsxs)(rO.PopupMenu,{"aria-label":"Domain options",trigger:(0,y.jsx)(J.IconButton,{alt:"More options",children:(0,y.jsx)(n9.default,{})}),children:[e.domain.managed?(0,y.jsx)(rO.MenuItem,{label:"Update contact info",icon:(0,y.jsx)(H.default,{}),onAction:function(){return h(!0)}}):null,(0,y.jsx)(rF,(0,eR._)((0,eE._)({},e),{onOpen:function(){return d(!0)}}))]})]}),j?(0,y.jsx)(ry,{}):null,j||!S||C?null:(0,y.jsx)(rb,{status:S}),m&&e.domain.managed?(0,y.jsx)(ru,{isVerified:null!=(s=e.domain.registrantEmailVerified)?s:null,purchaseDate:null!=(l=e.domain.purchaseDate)?l:null}):null,(0,y.jsx)(rD.DividerH,{}),(0,y.jsxs)(ei.View,{gap:12,children:[(0,y.jsxs)(ei.View,{gap:32,children:[(0,y.jsx)(e9.Surface,{background:"default",gap:16,children:e.domain.managed?(0,y.jsx)(rG,(0,eE._)({},e)):(0,y.jsx)(r$,(0,eE._)({},e))}),e.domain.managed?(0,y.jsx)(rH,(0,eE._)({},e)):(0,y.jsx)(rW,(0,eE._)({},e))]}),e.dns&&!e.domain.managed&&"verified"!==e.domain.state?(0,y.jsx)(ro,{deploymentId:e.deploymentId,dns:e.dns,domainId:e.domain.id}):null,S&&"verified"!==e.domain.state&&function(e){var t=e.steps;if(!t||0===t.length)return null;var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if("warning"===s.status&&s.message){var l=s.phase;if(rf[l])return{message:s.message,step:rf[l].step}}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}(S)?(0,y.jsx)(tQ.StatusBanner,{colorway:"warning",icon:(0,y.jsx)(k.default,{}),text:"Non-matching A and AAAA records were found. Turning on IP proxying (e.g. Cloudflare orange cloud) can trigger this warning. If you have added your A record and have not added any AAAA records, domain verification should still complete."}):null]})]}),(0,y.jsx)(rU,(0,eR._)((0,eE._)({},e),{isOpen:c,onRequestClose:function(){return d(!1)}})),e.domain.managed?(0,y.jsx)(rR,{isOpen:p,onRequestClose:function(){return h(!1)},domainId:e.domain.id,domainName:e.domain.domain}):null]})}function rF(e){return(0,y.jsx)(rO.MenuItem,{label:"Disconnect this domain",isDestructive:!0,icon:(0,y.jsx)(eT.default,{}),onAction:e.onOpen})}function rU(e){var t,n,r=(0,tu.default)().showError,i=(0,x._)((t={awaitRefetchQueries:!0,refetchQueries:[{query:nj}],onCompleted:function(t){var n,i=t.unlinkHostingDeploymentDomain;(null==i?void 0:i.__typename)==="UnauthorizedError"||(null==i?void 0:i.__typename)==="NotFoundError"||(null==i?void 0:i.__typename)==="ServiceUnavailable"?r(i.message):(e.onRequestClose(),null==(n=e.onBack)||n.call(e))}},n=(0,eE._)({},nw,t),t3.useMutation(nT,n)),2),a=i[0],o=i[1].loading;return(0,y.jsx)(rE.Modal,{isOpen:e.isOpen,onRequestClose:e.onRequestClose,centered:!0,maxWidth:480,children:(0,y.jsx)(rP.default,{prompt:"Disconnect this domain?",desc:(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsxs)(en.Text,{children:["You are about to disconnect ",(0,y.jsx)("b",{children:e.domain.domain})," from this deployment. Your site will no longer be accessible at this domain."]}),e.domain.managed?(0,y.jsx)(en.Text,{children:"It will still be available to link to your other apps."}):null]}),confirmText:"Disconnect",danger:!0,icon:(0,y.jsx)(eT.default,{}),loading:o,onCancel:e.onRequestClose,onConfirm:function(){a({variables:{input:{hostingDeploymentDomainId:e.domain.id}}})}})})}function rG(e){var t,n,r,i,a=(0,tu.default)().showError,o=(0,x._)((t={onCompleted:function(e){"SetShouldDomainAutoRenewResult"!==e.setShouldDomainAutoRenew.__typename&&a(e.setShouldDomainAutoRenew.message)}},n=(0,eE._)({},nw,t),t3.useMutation(nR,n)),2),s=o[0],l=o[1].loading;return(0,y.jsxs)(ei.View,{clsx:rM.default.sectionRow,row:!0,gap:70,py:8,children:[(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,y.jsx)(en.Text,{variant:"text",clsx:rM.default.key,children:"Provider"}),(0,y.jsx)(en.Text,{children:"Replit"})]}),(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,y.jsx)(en.Text,{variant:"text",clsx:rM.default.key,children:"Age"}),(null==(r=e.domain.whois)?void 0:r.creationDate)?(0,y.jsx)(rN.Timestamp,{date:new Date(e.domain.whois.creationDate),dateFormat:"relative"}):(0,y.jsx)(y.Fragment,{children:rL})]})]}),(0,y.jsxs)(ei.View,{gap:8,grow:!0,shrink:!0,children:[(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,y.jsx)(en.Text,{variant:"text",clsx:rM.default.key,children:e.domain.autorenew?"Renewal date":"Expiration date"}),(null==(i=e.domain.whois)?void 0:i.expiryDate)?(0,y.jsx)(rN.Timestamp,{date:new Date(e.domain.whois.expiryDate),dateFormat:"absolute",absoluteFormat:{year:"numeric",month:"short",day:"numeric"}}):(0,y.jsx)(en.Text,{children:rL})]}),(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,y.jsx)(en.Text,{variant:"text",clsx:rM.default.key,children:"Renewal price"}),(0,y.jsx)(en.Text,{children:"number"==typeof e.domain.renewalPriceCents?"$".concat((e.domain.renewalPriceCents/100).toFixed(2)):rL})]}),(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,y.jsx)(en.Text,{variant:"text",clsx:rM.default.key,children:"Auto renewal"}),(0,y.jsx)(tg.Switch,{size:"small",isSelected:e.domain.autorenew,onChange:function(t){s({variables:{input:{domainId:e.domain.id,shouldAutoRenew:t}}})},isReadOnly:l,"aria-label":"Toggle auto renewal"})]})]})]})}function r$(e){var t,n,r,i,a,o,s,l=(null==(n=e.domain.whois)||null==(t=n.registrar)?void 0:t.trim())||null;return l&&(null!=(s=null==(a=e.dns)||null==(i=a.currentDnsRecords)||null==(r=i.A)?void 0:r.length)?s:0)>1&&(l+=" (Proxy)"),(0,y.jsxs)(ei.View,{clsx:rM.default.sectionRow,row:!0,gap:70,py:8,children:[(0,y.jsx)(ei.View,{gap:8,children:(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,y.jsx)(en.Text,{variant:"text",clsx:rM.default.key,children:"Provider"}),(0,y.jsx)(en.Text,{children:null!=l?l:"Unknown"})]})}),(0,y.jsx)(ei.View,{gap:8,children:(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,y.jsx)(en.Text,{variant:"text",clsx:rM.default.key,children:"Age"}),(null==(o=e.domain.whois)?void 0:o.creationDate)?(0,y.jsx)(rN.Timestamp,{date:new Date(e.domain.whois.creationDate),dateFormat:"relative"}):(0,y.jsx)(en.Text,{children:rL})]})})]})}function rH(e){var t=(0,x._)((0,b.useState)(null),2),n=t[0],r=t[1];return(0,y.jsxs)(ei.View,{clsx:rM.default.accordionCard,children:[(0,y.jsx)(rA.AccordionItem,{chevron:"none",round:!1,headerContent:function(e){var t=e.isExpanded;return(0,y.jsxs)(ei.View,{clsx:rM.default.dnsRecordsAccordionHeader,grow:!0,children:[(0,y.jsxs)(ei.View,{gap:2,grow:!0,children:[(0,y.jsx)(en.Text,{children:"DNS Records"}),(0,y.jsx)(en.Text,{variant:"small",color:"dimmer",children:"Manually configure your domains DNS records"})]}),t?(0,y.jsx)(n6.default,{}):(0,y.jsx)(n7.default,{})]})},defaultExpanded:!1,variant:"compact",children:e.dns?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(nX,{dnsRecords:e.domain.dnsRecords.map(function(t){var n,r=null!=(n=t.host)?n:"",i=e4(r?"".concat(r,".").concat(e.domain.domain):e.domain.domain);return{id:String(t.id),type:t.type,hostname:i,record:t.answer}}),noBorder:!0,actions:function(e){return(0,y.jsx)(J.IconButton,{alt:"Delete this record",onClick:function(){return r(e)},children:(0,y.jsx)(ej.default,{})})}}),(0,y.jsx)(rK,(0,eE._)({},e))]}):null}),(0,y.jsx)(rz,(0,eR._)((0,eE._)({},e),{record:n,isOpen:!!n,onRequestClose:function(){return r(null)}}))]})}function rz(e){var t,n=(0,x._)((t=(0,eE._)({},nw,void 0),t3.useMutation(nE,t)),2),r=n[0],i=n[1].loading,a=(0,tu.default)().showError;return e.record?(0,y.jsx)(rE.Modal,{isOpen:e.isOpen,onRequestClose:e.onRequestClose,centered:!0,maxWidth:480,children:(0,y.jsx)(rP.default,{prompt:"Delete this record?",desc:(0,y.jsxs)(en.Text,{children:["You are about to delete the ",e.record.type," record for"," ",(0,y.jsx)("b",{children:e.record.hostname}),". This action cannot be undone."]}),confirmText:"Delete",danger:!0,icon:(0,y.jsx)(ej.default,{}),loading:i,onCancel:e.onRequestClose,onConfirm:function(){return(0,L._)(function(){var t;return(0,V._)(this,function(n){switch(n.label){case 0:if(!e.record)return[2];n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,r({variables:{input:{domainId:e.domain.id,recordId:Number(e.record.id)}}})];case 2:if((t=n.sent()).errors||!t.data)return a("Something went wrong"),[2];if("DeleteDnsRecordOutput"!==t.data.deleteDnsRecord.__typename)return a(t.data.deleteDnsRecord.message),[2];return[3,5];case 3:return n.sent(),a("Something went wrong"),[2];case 4:return e.onRequestClose(),[7];case 5:return[2]}})})()}})}):null}function rW(e){if(!e.dns)return null;var t=nZ(e.dns);return(0,y.jsx)(ei.View,{clsx:rM.default.accordionCard,children:(0,y.jsxs)(ei.View,{children:[(0,y.jsx)(ei.View,{clsx:rM.default.dnsRecordsStaticHeader,grow:!0,children:(0,y.jsxs)(ei.View,{gap:2,grow:!0,children:[(0,y.jsx)(en.Text,{children:"DNS Records"}),(0,y.jsxs)(en.Text,{variant:"small",color:"dimmer",children:["Add the following records to your domain's DNS settings."," ",(0,y.jsx)(G.default,{href:"https://docs.replit.com/cloud-services/deployments/custom-domains",target:"_blank",rel:"noopener",children:"Learn more"})]})]})}),e.dns?(0,y.jsx)(nX,{dnsRecords:t,showCopyButton:!0,noBorder:!0}):null]})})}function rq(e,t){var n=e.trim();if(n===t)return{error:'Use "@" instead of "'.concat(t,'" for the root domain'),userMessage:'You cannot use "'.concat(t,'" as the hostname. Use "@" instead if you want to configure the root domain.')};if(n.endsWith(".".concat(t))){var r=n.slice(0,-(t.length+1));return{error:'Use just "'.concat(r,'" without "').concat(t,'"'),userMessage:'Do not include "'.concat(t,'" in the hostname. Use just "').concat(r,'" instead of "').concat(n,'".')}}return{error:null}}function rK(e){var t,n=(0,x._)((0,b.useState)(!1),2),r=n[0],i=n[1],a=(0,x._)((0,b.useState)(null),2),o=a[0],s=a[1],l=(0,x._)((0,b.useState)(null),2),u=l[0],c=l[1],d="MX"===o,f=(0,tu.default)().showError,p=(0,x._)((t=(0,eE._)({},nw,void 0),t3.useMutation(nI,t)),2),h=p[0],m=p[1].loading;return r?(0,y.jsxs)(tf.Form,{onSubmit:function(t){return(0,L._)(function(){var n,r,a,o,l,u,p,m,g;return(0,V._)(this,function(x){switch(x.label){case 0:if(t.preventDefault(),r=(n=new FormData(t.target)).get("type"),a=n.get("hostname"),o=n.get("priority"),l=n.get("record"),"string"!=typeof r||""===r.trim())return f("Type is required"),[2];if("string"!=typeof a||""===a.trim())return f("Hostname is required"),[2];if((u=rq(a,e.domain.domain)).error)return u.userMessage&&f(u.userMessage),c(u.error),[2];if("string"!=typeof l||""===l.trim())return f("Record is required"),[2];if(p=d?Number(o):void 0,d){if(void 0===p||isNaN(p))return f("Priority must be provided as a number"),[2];if(p<0||p>65535)return f("Priority must be between 0 and 65535"),[2]}x.label=1;case 1:return x.trys.push([1,3,,4]),[4,h({variables:{input:{domainId:e.domain.id,host:a,type:r,answer:l,priority:p}}})];case 2:if((m=x.sent()).errors)return f("Something went wrong"),[2];if(!m.data)return[2];if("CreateDnsRecordOutput"!==m.data.createDnsRecord.__typename)return f(m.data.createDnsRecord.message),[2];return i(!1),s(null),c(null),[3,4];case 3:return g=x.sent(),(0,rI.sendSentryError)({error:(0,B._)(g,Error)?g:Error(String(g)),context:"createDnsRecord",extras:{domainId:e.domain.id,hostname:a,type:r,record:l,priority:p}}),f("An unexpected error occurred. Please try again."),[3,4];case 4:return[2]}})})()},p:8,clsx:rM.default.accordionFooter,gap:12,children:[(0,y.jsxs)(ei.View,{clsx:[rM.default.addRow,(0,e_._)({},rM.default.addRowHasMx,d)],gap:12,align:"start",children:[(0,y.jsx)(ei.View,{children:(0,y.jsx)(tm.Select,{label:"Type",items:rB,placeholder:"Select type",onSelectionChange:function(e){s(e?String(e):null)},name:"type",isInvalid:!1,children:function(e){return(0,y.jsx)(em.ListBoxItem,{id:e.value,label:e.label},e.value)}})}),(0,y.jsx)(ei.View,{children:(0,y.jsxs)(tv.TextField,{isInvalid:!!u,children:[(0,y.jsx)(tp.Label,{children:"Hostname"}),(0,y.jsx)(e7.Input,{placeholder:"@",name:"hostname",autoComplete:"off",required:!0,onChange:function(t){c(rq(t.target.value,e.domain.domain).error)}}),(0,y.jsx)(td.FieldError,{children:u})]})}),d?(0,y.jsx)(ei.View,{children:(0,y.jsxs)(tv.TextField,{children:[(0,y.jsx)(tp.Label,{children:"Priority"}),(0,y.jsx)(e7.Input,{placeholder:"10",type:"number",min:0,max:65535,name:"priority",autoComplete:"off",required:!0})]})}):null,(0,y.jsx)(ei.View,{grow:!0,children:(0,y.jsxs)(tv.TextField,{children:[(0,y.jsx)(tp.Label,{children:"Record"}),(0,y.jsx)(e7.Input,{name:"record",autoComplete:"off",required:!0})]})})]}),(0,y.jsxs)(ei.View,{row:!0,justify:"end",align:"center",gap:8,children:[(0,y.jsx)(Z.Button,{variant:"nofill",text:"Cancel",onClick:function(){i(!1),s(null),c(null)},type:"button",disabled:m}),(0,y.jsx)(Z.Button,{text:m?"Adding...":"Add record",type:"submit",loading:m,disabled:m})]})]}):(0,y.jsx)(ei.View,{p:8,align:"end",clsx:rM.default.accordionFooter,children:(0,y.jsx)(Z.Button,{text:"Add DNS record",variant:"nofill",iconLeft:(0,y.jsx)(O.default,{}),onClick:function(){s(null),i(!0),c(null)}})})}var rY=e.i(255701),rQ=e.i(124489);function rX(){return(0,y.jsxs)(nW,{children:[(0,y.jsx)("th",{children:(0,y.jsx)(en.Text,{variant:"small",color:"dimmer",children:"Name"})}),(0,y.jsx)("th",{className:rQ.default.hideOnTablet,children:(0,y.jsx)(en.Text,{variant:"small",color:"dimmer",children:"Registered With"})}),(0,y.jsx)("th",{children:(0,y.jsx)(nY,{children:"Actions"})})]})}function rZ(e){var t=e.name,n=e.registrar,r=e.registrarTruncate,i=e.status,a=e.customMessage,o=e.managementDisabled,s=void 0!==o&&o,l=e.managementDisabledTooltip,u=e.onManage,c=e.registrantEmailVerified;return(0,y.jsxs)(nq,{children:[(0,y.jsx)(nK,{children:(0,y.jsxs)(ei.View,{gap:4,children:[(0,y.jsxs)(ei.View,{row:!0,gap:4,align:"center",children:[(0,y.jsx)(en.Text,{children:t}),!1===c?(0,y.jsx)(er.Tooltip,{tooltip:"Email verification required",children:(0,y.jsx)(k.default,{size:16,color:K.tokens.orangeDefault})}):null]}),i?(0,y.jsx)(r_,{state:i,customMessage:a}):null]})}),(0,y.jsx)(nK,{clsx:rQ.default.hideOnTablet,children:(0,y.jsx)(en.Text,{color:"dimmest",variant:"small",multiline:!r,showTooltipOnTruncate:!!r,children:null!=n?n:"N/A"})}),(0,y.jsx)(nK,{children:(0,y.jsx)(ei.View,{align:"center",justify:"center",p:12,children:(0,y.jsx)(er.Tooltip,{tooltip:l,isDisabled:!s,children:(0,y.jsx)(Z.Button,{text:"Manage",iconLeft:(0,y.jsx)(rY.default,{}),disabled:s,onClick:u,size:"small"})})})})]})}function rJ(){var e=(0,t0._)(["\n  query DomainsGlowupPendingDomains($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...PendingDomainsRepl\n      }\n    }\n  }\n  ","\n"]);return rJ=function(){return e},e}function r0(){var e=(0,t0._)(["\n  subscription DomainsGlowupPendingDomainsUpdates($replId: String!) {\n    pendingDomainsUpdates(replId: $replId) {\n      id\n      ...PendingDomainsRepl\n    }\n  }\n  ","\n"]);return r0=function(){return e},e}var r1={},r2=(0,t1.gql)(rJ(),tH.PendingDomainsReplFragmentDoc),r3=(0,t1.gql)(r0(),tH.PendingDomainsReplFragmentDoc);function r5(e){var t,n,r,i=e.refetchDomainsQuery,a=e.omitDomains,o=(0,x._)((0,b.useState)(new Set),2)[1],s=(0,tI.default)(),l=(t={variables:{replId:s},fetchPolicy:"cache-and-network",ssr:!1},n=(0,eE._)({},r1,t),t2.useQuery(r2,n)).data;r=(0,eE._)({},r1,{variables:{replId:s},onData:function(e){var t,n,r=e.data;if(r&&(null==(n=r.data)||null==(t=n.pendingDomainsUpdates)?void 0:t.pendingDomains)){var a=r.data.pendingDomainsUpdates.pendingDomains.filter(function(e){return"success"===e.status}).map(function(e){return e.domainName});o(function(e){var t=new Set((0,E._)(e).concat((0,E._)(a)));return t.size>e.size&&i(),t})}}}),t5.useSubscription(r3,r);var u=(0,b.useMemo)(function(){var e;return(null==l||null==(e=l.getRepl)?void 0:e.__typename)!=="Repl"?null:l.getRepl.pendingDomains.filter(function(e){return!a.has(e.domainName)&&"fail"!==e.status})},[l,a]);return u&&0!==u.length?(0,y.jsx)(y.Fragment,{children:u.map(function(e){var t;return(0,y.jsx)(rZ,{name:e.domainName,status:"verifying",customMessage:null!=(t=e.message)?t:"Processing request",managementDisabled:!0,managementDisabledTooltip:"This domain is currently being configured."},e.domainName)})}):null}var r4=e.i(47503),r8=e.i(142365),r6=e.i(609141);function r7(e){var t,n,r,i,a,o,s,l,u,c,d,f,p,h,m=e.deployment,g=e.authorizations,w=e.viewData,_=(0,tI.default)(),S=(0,r4.useCurrentUserId)(),C=(t={variables:{id:_}},n=(0,eE._)({},nn,t),t2.useQuery(no,n)),j=C.data,T=C.loading,I=(null==j||null==(l=j.getRepl)?void 0:l.__typename)==="Repl"&&!!(null==(u=j.getRepl.org)?void 0:u.id),A=(0,x._)((0,b.useState)(!!(null==w?void 0:w.buyDomain)),2),P=A[0],D=A[1],O=(0,x._)((0,b.useState)(!1),2),L=O[0],B=O[1],V=(0,x._)((0,b.useState)(new Set),2),F=V[0],U=V[1],G=(r={variables:{id:m.id,isGlowup:!0},fetchPolicy:"cache-and-network",ssr:!1},i=(0,eE._)({},nn,r),t2.useQuery(ns,i)).refetch;a=(0,eE._)({},nw,{variables:{replId:_},onData:function(e){var t,n,r=e.data,i=e.client;if(null==r||null==(n=r.data)||null==(t=n.domainLinkingStatusUpdates)?void 0:t.domainLinkingStatuses){var a=r.data.domainLinkingStatusUpdates.domainLinkingStatuses,o=new Set(a.map(function(e){return e.domainId}));F.forEach(function(e){if(!o.has(e)){var t=null==z?void 0:z.find(function(t){return t.id===e}),n=(null==t?void 0:t.state)==="verifying"||(null==t?void 0:t.state)==="temporal_verification"||(null==t?void 0:t.state)==="pushed_to_goval";t&&n&&i.cache.modify({id:i.cache.identify({__typename:"Domain",id:e}),fields:{state:function(){return"verified"}}})}}),U(o),a.some(function(e){if(e.steps&&e.steps.length>0){var t=e.steps[e.steps.length-1];return(null==t?void 0:t.status)==="completed"||(null==t?void 0:t.status)==="failed"}return!!e.currentStatus&&("completed"===e.currentStatus||"failed"===e.currentStatus)})&&G()}}}),t5.useSubscription(nP,a);var $=(o={fetchPolicy:"cache-and-network",ssr:!1},s=(0,eE._)({},nn,o),t2.useQuery(nl,s)).data,H=null==$||null==(d=$.currentUser)||null==(c=d.domains)?void 0:c.items,z=(null==m?void 0:m.__typename)==="HostingDeployment"?m.domains2:void 0,W=(0,b.useMemo)(function(){return new Set((0,E._)((null!=z?z:[]).map(function(e){return e.domain})).concat((0,E._)((null!=H?H:[]).map(function(e){return e.domain}))).map(function(e){return e}))},[z,H]),q=(null==m?void 0:m.currentBuild.status)==="success",K=null==m?void 0:m.repl.apexProxy,Y=null==z?void 0:z.some(function(e){return e.managed&&5>(0,R.differenceInDays)(new Date,new Date(e.timeCreated))}),Q=(0,x._)((0,b.useState)(null),2),X=Q[0],J=Q[1],ee=X&&null!=(f=null==z?void 0:z.find(function(e){return e.id===X}))?f:null,et=(0,M.useDeploymentCurrentBuild)(),ea=et?function(e){var t=(null==(n=e.repl.hostingDeployment)?void 0:n.__typename)==="HostingDeployment"?null==(r=e.repl.hostingDeployment)?void 0:r.replitAppSubdomain:void 0;if(!t&&(null==(i=e.repl.owner)?void 0:i.username)&&(t="".concat(e.repl.slug,"-").concat(e.repl.owner.username)),t){var n,r,i,a,o,s=(null==(o=window)||null==(a=o.location)?void 0:a.hostname)!=="replit.com";return"".concat(t).concat(s?".staging":"",".").concat(N.DEPLOYMENTS_DEFAULT_DOMAIN)}}(et):void 0,eo=g.addCustomDomain,es=eo.isAuthorized,el=eo.message;return((0,r8.useTrackEffect)(eh.events.DOMAIN_MANAGEMENT,{action:"page_landing",deploymentId:m.id,domainCount:null!=(p=null==z?void 0:z.length)?p:0,hasCustomDomains:null!=(h=null==z?void 0:z.some(function(e){return!e.managed}))&&h,isInitiative:"glowup"}),P&&K)?(0,y.jsx)(ei.View,{clsx:r6.default.buyWrapper,gap:8,children:(0,y.jsx)(ew,{suggestedDomain:null==m?void 0:m.repl.title,deploymentId:m.id,onRequestClose:function(){D(!1)}})}):ee?(0,y.jsx)(ei.View,{css:r6.default.scrollContainer,gap:8,children:(0,y.jsx)(rV,{domain:ee,onBack:function(){return J(null)},deploymentId:m.id,dns:K?{replId:_,apexProxy:K,hostname:ee.domain,currentDnsRecords:ee.currentDnsRecords}:void 0})}):L&&K?(0,y.jsx)(ei.View,{clsx:r6.default.buyWrapper,gap:8,px:4,pt:8,children:(0,y.jsx)(n3,{apexProxy:K,deploymentId:m.id,replId:_,onAdd:function(){return B(!1)},onBack:function(){return B(!1)}})}):(0,y.jsxs)(ei.View,{gap:16,clsx:r6.default.scrollContainer,shrink:!0,px:8,children:[(0,y.jsxs)(ei.View,{justify:"space-between",py:12,row:!0,align:"center",children:[(0,y.jsx)(en.Text,{variant:"subheadDefault",children:"Domains"}),(0,y.jsxs)(ei.View,{shrink:!0,gap:8,row:!0,children:[(0,y.jsx)(er.Tooltip,{tooltip:I?"Custom domain purchasing is coming soon to org-owned Apps.":el,isDisabled:es&&!I,children:(0,y.jsx)(Z.Button,{text:"Buy a new domain",variant:"outlined",size:"small",onClick:function(){(0,ep.track)(eh.events.DOMAIN_MANAGEMENT,{action:"buy_domain_clicked",deploymentId:m.id,suggestedDomain:null==m?void 0:m.repl.title,isInitiative:"glowup"}),D(!0)},disabled:!q||!es||I||T})}),(0,y.jsx)(er.Tooltip,{tooltip:el,isDisabled:es,children:(0,y.jsx)(Z.Button,{disabled:!q||!es,text:"Connect your own domain",variant:"outlined",size:"small",onClick:function(){(0,ep.track)(eh.events.DOMAIN_MANAGEMENT,{action:"link_domain_clicked",deploymentId:m.id,suggestedDomain:null==m?void 0:m.repl.title,isInitiative:"glowup"}),B(!0)}})})]})]}),q?null:(0,y.jsx)(tQ.StatusBanner,{colorway:"warning",icon:(0,y.jsx)(k.default,{}),text:"You must successfully publish your project before linking a domain"}),(0,y.jsxs)(nz,{children:[(0,y.jsx)(rX,{}),ea?(0,y.jsx)(rZ,{name:ea,managementDisabled:!0,managementDisabledTooltip:"The primary domain cannot be modified unless you unpublish the app and publish again."}):null,null==z?void 0:z.map(function(e){var t,n,r,i,a,o,s=null!=(a=null==(t=e.whois)?void 0:t.registrar)?a:null;s&&(null!=(o=null==(r=e.currentDnsRecords)||null==(n=r.A)?void 0:n.length)?o:0)>1&&(s+=" (Proxy)");var l=null!==S&&(null==(i=e.user)?void 0:i.id)!==void 0&&e.user.id!==S;return(0,y.jsx)(rZ,{name:e.domain,registrar:e.managed?"Replit":null!=s?s:"Unknown",status:e.state,managementDisabled:l,managementDisabledTooltip:l?"Only the owner of this domain can manage it.":void 0,registrantEmailVerified:e.registrantEmailVerified,onManage:function(){(0,ep.track)(eh.events.DOMAIN_MANAGEMENT,{action:"manage_clicked",domainName:e.domain,domainId:e.id,domainState:e.state,managed:!!e.managed,isInitiative:"glowup"}),J(e.id)}},e.id)}),(0,y.jsx)(r5,{refetchDomainsQuery:G,omitDomains:W})]}),Y?(0,y.jsx)(r9,{}):null]})}function r9(){return(0,y.jsx)(tQ.StatusBanner,{icon:(0,y.jsx)(P.default,{}),title:"Congratulations on your new domain!",text:"You may see a temporary error when accessing your domain that usually resolves within a few minutes after purchasing. Contact Replit Support if this persists longer than 48 hours."})}var ie=(0,Y.cssRecord)({domains2Container:[X.rcss.height("100%"),X.rcss.overflowY("hidden")]}),it={addCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:_.ReplAuthorizationCode.InsufficientPermissions,message:"Loading"},deleteCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:_.ReplAuthorizationCode.InsufficientPermissions,message:"Loading"}};function ir(e){var t=e.deploymentId,n=e.viewData;return t?(0,y.jsx)(ii,{deploymentId:t,viewData:n}):(0,y.jsx)(j.PaneSection,{children:(0,y.jsx)(tQ.StatusBanner,{colorway:"warning",icon:(0,y.jsx)(k.default,{}),text:"Deployment not found"})})}function ii(e){var t,n,r=e.deploymentId,i=e.viewData;(0,b.useEffect)(function(){(0,S.trackDeploymentSectionViewed)({context:C.Views.Domains})},[]);var a=(0,x._)((0,w.useHostingDeploymentSettingsAuthzLazyQuery)(),2),o=a[0],s=a[1],l=s.data,u=s.error,c=(0,eb.useFlag)({controlName:"flag-domains-glowup",default:!1}),d=(0,w.useHostingDeploymentSettingsQuery)({variables:{id:r,isGlowup:c},ssr:!1,fetchPolicy:"cache-and-network",onCompleted:function(e){var t;(null==e||null==(t=e.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"&&o({variables:{replId:e.hostingDeployment.repl.id,provider:e.hostingDeployment.currentBuild.provider}})}}),f=d.data,p=d.loading,h=d.error,m=(null==f||null==(t=f.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"?f.hostingDeployment:void 0;if(h)return(0,y.jsx)(T.ViewError,{text:h.message});if(p||!m)return(0,y.jsx)(j.PaneSection,{centered:!0,children:(0,y.jsx)(T.ViewLoading,{})});if(m.currentBuild.provider===_.HostingBuildProvider.Cron)return(0,y.jsx)(j.PaneSection,{children:(0,y.jsx)(tQ.StatusBanner,{colorway:"warning",text:"Domains are not supported for scheduled jobs"})});var g=(null==l||null==(n=l.getRepl)?void 0:n.__typename)==="Repl"?l.getRepl.authorizations:it;return(0,y.jsxs)(j.PaneSection,{maxWidth:!0,clsx:c?void 0:ie.domains2Container,children:[u?(0,y.jsx)(tQ.StatusBanner,{colorway:"negative",text:u.message}):null,(0,y.jsx)(c?r7:tZ,{deployment:m,authorizations:g,viewData:i})]})}e.s(["Domains",()=>ir],918560);var ia=e.i(394212),io=e.i(830675),is=e.i(992785),il=e.i(15053),iu=e.i(723117);function ic(){var e=(0,t0._)(["\n  fragment ExpoLaunch on ExpoLaunchDetails {\n    id\n    platform\n    status\n    isFinished\n    startedAt\n    finishedAt\n    appId\n    authedDashboardUrl\n  }\n"]);return ic=function(){return e},e}function id(){var e=(0,t0._)(["\n  mutation PrepareExpoLaunch($input: PrepareExpoLaunchInput!) {\n    prepareExpoLaunch(input: $input) {\n      ... on PendingExpoLaunchSession {\n        failed\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return id=function(){return e},e}function ip(){var e=(0,t0._)(["\n  query ExpoLaunchSession($replId: String!, $hostingBuildId: String) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        expoLaunch(hostingBuildId: $hostingBuildId) {\n          ... on ExpoLaunchSession {\n            id\n            authedLaunchUrl\n            expiresAt\n            hostingBuildId\n            hostingDeploymentId\n            framework\n            launches {\n              ios {\n                ...ExpoLaunch\n              }\n            }\n          }\n          ... on PendingExpoLaunchSession {\n            failed\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return ip=function(){return e},e}function ih(){var e=(0,t0._)(["\n  subscription ExpoLaunchStatus($replId: String!, $hostingBuildId: String!) {\n    expoLaunchStatus(replId: $replId, hostingBuildId: $hostingBuildId) {\n      status\n      hostingBuildId\n      errorMessage\n    }\n  }\n"]);return ih=function(){return e},e}var im={},ig=(0,t1.gql)(ic()),iv=(0,t1.gql)(id()),ix=(0,t1.gql)(ip(),ig),iy=(0,t1.gql)(ih());e.i(877212);var ib=e.i(924908);e.i(925218);var iw=e.i(112077),i_=e.i(641555),ik=e.i(134628),iS=e.i(441329),iC=e.i(927158),ij=e.i(479407),iT=e.i(417120),iE=e.i(287999),iR=e.i(468095),iI=e.i(76430),iA="Something unexpected happened. Context support@replit.com if the issue persists.";function iP(e){var t,n;return(null==e?void 0:e.getRepl.__typename)==="Repl"&&e.getRepl.expoLaunch&&((null==(t=e.getRepl.expoLaunch)?void 0:t.__typename)==="ExpoLaunchSession"||(null==(n=e.getRepl.expoLaunch)?void 0:n.__typename)==="PendingExpoLaunchSession")?e.getRepl.expoLaunch:null}function iD(e){var t=e.mutationResult,n=e.error,r=null==t?void 0:t.prepareExpoLaunch;switch(null==r?void 0:r.__typename){case"NotFoundError":case"UnauthorizedError":case"UserError":return r.message}if(n&&(0,iu.isApolloError)(n)){var i,a=null==(i=n.graphQLErrors[0])?void 0:i.message;if(a)return a;if(n.networkError)return"Network error. Check your connection and try again"}return(null==n?void 0:n.message)||iA}function iO(e){var t,n,r,i,a,o,s,l=e.openPane,u=(0,tI.default)(),c=null==(o=(0,M.useDeploymentCurrentBuild)())?void 0:o.id,d=void 0!==(0,M.useDeploymentInProgressBuild)(),f=(0,iI.useIsExpoStackWithLaunchEnabled)(),p=(0,iS.useIsInBonsaiWebview)(),h=(0,iS.useDoesBonsaiSupportFeature)("expoLaunch"),m=(0,x._)((t=(0,eE._)({},im,void 0),t3.useMutation(iv,t)),1)[0],g=(0,iC.usePid2Callback)(function(e){return function(t){return(0,L._)(function(){var n,r,i,a,o,s,l,u,c,d;return(0,V._)(this,function(f){switch(f.label){case 0:n=e.git.checkpoints.subscribe({}).resReadable,r=!1,i=!1,a=!1,f.label=1;case 1:f.trys.push([1,6,7,12]),s=(0,ia._)(n),f.label=2;case 2:return[4,s.next()];case 3:if(!(i=!(l=f.sent()).done))return[3,5];if(!(u=l.value).ok){if("UNEXPECTED_DISCONNECT"===u.payload.code)return[3,5];return[2,{type:"error"}]}if(r=!0,(c=u.payload).trailers[iE.trailers.deploymentBuildId]===t)return[2,{type:"found",gitSha:c.hash}];f.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return d=f.sent(),a=!0,o=d,[3,12];case 7:if(f.trys.push([7,,10,11]),!(i&&null!=s.return))return[3,9];return[4,s.return()];case 8:f.sent(),f.label=9;case 9:return[3,11];case 10:if(a)throw o;return[7];case 11:return[7];case 12:return[2,{type:"notFound",hasAnyCheckpoints:r}]}})})()}},[]),y=(0,b.useRef)(0),w=(0,ib.useChatter)(),_=(0,M.useDeployBuild)().redeployWithNoNewOptions,k=(0,iR.useSendAgentMessage)({openPane:l}),S=(0,b.useRef)(),C=(0,b.useRef)(),j=(0,b.useRef)(),T=(0,iT.useIsAgentWorking)(),E=(0,b.useRef)(!1),R=(0,M.useDeploymentSessionUser)(),I=null!=(s=null==R?void 0:R.isSubscribed)&&s,A=(0,eb.useFlag)({controlName:"flag-exponential-amplifier-eager",type:"string",default:"none"}),P="free"===A||I&&"paid"===A,D=!f||!c,O=(0,i_.useObservableMemo)(function(){return w.sessions.agent.all.list.select(function(e){return e.length>0})},[w.sessions]),N=(0,iw.useCreateObservable)({state:"disabled"}),F=(0,x._)((0,b.useState)(),2),G=F[0],$=F[1],H=(n={variables:{replId:u,hostingBuildId:c},fetchPolicy:"network-only",skip:D,pollInterval:G,ssr:!1},r=(0,eE._)({},im,n),t2.useQuery(ix,r)),z=H.data,W=H.refetch,q=(i={variables:{replId:u,hostingBuildId:null!=c?c:""},skip:D,onData:function(){$(void 0)},onError:function(){$(3e4)}},a=(0,eE._)({},im,i),t5.useSubscription(iy,a)).data,K=(0,b.useCallback)(function(e){var t=e.buildId,n=e.refetch,r=e.lazy;return(0,L._)(function(){var e,i,a,o,s,l,c,f,h,x,b,w,_,k,S;return(0,V._)(this,function(C){switch(C.label){case 0:if(!n)return[3,5];C.label=1;case 1:return C.trys.push([1,3,,4]),[4,W({replId:u,hostingBuildId:t})];case 2:return e=iP(C.sent().data),[3,4];case 3:return i=C.sent(),N.set({state:"error",message:iD({error:i})}),[2];case 4:return[3,6];case 5:e=iP(z),C.label=6;case 6:if((null==e?void 0:e.__typename)==="PendingExpoLaunchSession")return e.failed?N.set({state:"error",message:iA}):N.set({state:"creatingLaunch"}),[2];if(a=null==e?void 0:e.expiresAt,o=null==e?void 0:e.authedLaunchUrl,!(s=!a||!o||new Date(a)<new Date(Date.now()+216e5))&&E.current)return E.current=!1,N.set({state:p?"bonsai":"modal",url:o,expiresAt:a}),p&&(0,ij.sendMessage)({messageType:ik.BridgeMessageType.OPEN_EXPO_LAUNCH,url:o},(0,il.v4)()),[2];if(!s)return N.set({state:"ready",url:o,expiresAt:a}),[2];if(c="disabled"===(l=N.current.state)||"deployingReplitApp"===l||"waitingForCommit"===l&&!n&&0===y.current,r&&c)return N.set({state:"idle"}),[2];if(!g)return N.set({state:"error",message:"Loading Please wait a moment and try again"}),[2];return[4,g(t)];case 7:if("notFound"===(f=C.sent()).type&&!f.hasAnyCheckpoints)return N.set({state:"agentSessionRequired"}),[2];if("notFound"===f.type){if(y.current++,h=y.current,T)return N.set({state:"waitingForCommit"}),[2];if(h<=5)return N.set({state:"waitingForCommit"}),clearTimeout(j.current),j.current=setTimeout(function(){return K({buildId:t,refetch:n,lazy:r})},500*h),[2];return N.set({state:d?"deployingReplitApp":"deployRequired",republish:!0}),[2]}if("error"===f.type)return N.set({state:"error",message:iA}),io.captureException(Error(iA),{tags:{feature:"expo-launch"},extra:{replId:u,currentBuildId:t,errorType:"fetch_deployment_sha_error"}}),[2];y.current=0,x=f.gitSha,N.set({state:"creatingLaunch"}),C.label=8;case 8:return C.trys.push([8,10,,11]),[4,m({variables:{input:{replId:u,gitSha:x,hostingBuildId:t}}})];case 9:if((null==(w=(_=C.sent()).data)||null==(b=w.prepareExpoLaunch)?void 0:b.__typename)!=="PendingExpoLaunchSession")return N.set({state:"error",message:iD({mutationResult:_.data})}),[2];return[3,11];case 10:return k=C.sent(),S=(0,B._)(k,Error)?k:Error(String(k)),io.captureException(S,{tags:{feature:"expo-launch"},extra:{replId:u,buildId:t}}),N.set({state:"error",message:iD({error:S})}),[3,11];case 11:return[2]}})})()},[N,g,W,u,z,p,T,d,m]),Y=(0,b.useCallback)(function(){return(0,L._)(function(){var e,t,n;return(0,V._)(this,function(r){switch(r.label){case 0:if(!c)return N.set({state:d?"deployingReplitApp":"deployRequired"}),[2];return[4,K({buildId:c,refetch:!0})];case 1:if(r.sent(),"ready"!==(e=N.current).state)return[2];if(E.current=!1,t=e.url,n=e.expiresAt,p)return(0,ij.sendMessage)({messageType:ik.BridgeMessageType.OPEN_EXPO_LAUNCH,url:e.url},(0,il.v4)()),N.set({state:"bonsai",url:t,expiresAt:n}),[2];return N.set({state:"modal",url:t,expiresAt:n}),[2]}})})()},[c,K,N,p,d]),Q=(0,b.useCallback)(function(){var e=N.current;("modal"===e.state||"bonsai"===e.state)&&N.set({state:"ready",url:e.url,expiresAt:e.expiresAt})},[N]),X=(0,b.useCallback)(function(){return(0,L._)(function(){return(0,V._)(this,function(e){switch(e.label){case 0:return[4,_({hasAgentSession:!0})];case 1:return e.sent(),[2]}})})()},[_]),Z=(0,b.useCallback)(function(){return(0,L._)(function(){return(0,V._)(this,function(e){switch(e.label){case 0:return[4,k("What should I consider when publishing my app to the App Store? Check Replit docs for the most accurate information.",{createNewSession:!0})];case 1:return e.sent(),[2]}})})()},[k]),J=(0,b.useCallback)(function(e){var t=e.action;switch(t){case"presentLaunch":E.current=!0,Y();break;case"hideLaunch":Q();break;case"deploy":X();break;case"createAgentSession":Z();break;default:(0,U.default)(t)}},[Y,Q,X,Z]);return(0,b.useEffect)(function(){var e=N.subscribe(function(e){"creatingLaunch"!==e.state?clearTimeout(C.current):(clearTimeout(C.current),C.current=setTimeout(function(){N.set({state:"error",message:iA})},45e3))});return function(){e(),clearTimeout(C.current),clearTimeout(j.current)}},[N]),(0,b.useEffect)(function(){if(c&&f){var e=function(){"visible"===document.visibilityState&&W()};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}},[c,f,W]),(0,b.useEffect)(function(){if(!f)return void N.set({state:"disabled"});if(!h&&p)return void N.set({state:"bonsaiUpgradeRequired"});if(!1===O)return void N.set({state:"agentSessionRequired"});if(!c)return void N.set({state:d?"deployingReplitApp":"deployRequired"});if(g&&z){if("deployingReplitApp"===N.current.state&&!d){y.current=0,K({buildId:c,lazy:!P});return}var e,t=(null==z?void 0:z.getRepl.__typename)==="Repl"&&(null==(e=z.getRepl.expoLaunch)?void 0:e.__typename)==="ExpoLaunchSession"&&z.getRepl.expoLaunch.launches.ios?z.getRepl.expoLaunch.launches.ios:void 0;if(q&&!(0,is.default)(S.current,q))switch(S.current=q,q.expoLaunchStatus.status){case"SESSION_CREATED":if(t)break;K({buildId:c,refetch:!0});return;case"IOS_LAUNCH_COMPLETED":W();return;case"IOS_LAUNCH_STARTED":if(t)break;W();return;case"ERROR":N.set({state:"error",message:q.expoLaunchStatus.errorMessage?q.expoLaunchStatus.errorMessage:iA});return}if(t){var n=t.finishedAt,r=t.status,i=t.appId,a=t.isFinished,o=t.authedDashboardUrl;if(!a){(0,ij.sendMessage)({messageType:ik.BridgeMessageType.CLOSE_EXPO_LAUNCH},(0,il.v4)()),N.set({state:"launchingApp",launch:t});return}if(n&&i){N.set({state:"success",finishedAt:n,status:r,appId:i,authedDashboardUrl:null!=o?o:null}),(0,ij.sendMessage)({messageType:ik.BridgeMessageType.CLOSE_EXPO_LAUNCH},(0,il.v4)());return}}var s=N.current.state;"modal"!==s&&"bonsai"!==s&&("idle"!==s||P)&&K({buildId:c,lazy:!P})}},[c,h,N,g,O,d,f,p,z,K,W,u,q,P,T]),(0,b.useMemo)(function(){return{expoLaunchStateObservable:N,performExpoLaunchAction:J}},[N,J])}e.s(["useExpoLaunch",()=>iO],100287);var iN=e.i(302973),iM=e.i(131141);function iL(){var e=(0,t0._)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n    level\n    isFromReplit\n    deploymentId\n    executionId\n    buildId\n  }\n"]);return iL=function(){return e},e}function iB(){var e=(0,t0._)(["\n  query HostingDeploymentLogs2(\n    $replId: String!\n    $deploymentId: String!\n    $executionId: String\n    $start: DateTime\n    $end: DateTime\n    $message: String\n    $level: LogLevel\n    $limit: Int\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(\n          deploymentId: $deploymentId\n          executionId: $executionId\n          start: $start\n          end: $end\n          message: $message\n          level: $level\n          limit: $limit\n        ) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return iB=function(){return e},e}function iV(){var e=(0,t0._)(["\n  subscription HostingDeploymentLogUpdates(\n    $input: HostingDeploymentLogUpdatesInput!\n  ) {\n    hostingDeploymentLogUpdates(input: $input) {\n      ...ReplLogLine2\n    }\n  }\n  ","\n"]);return iV=function(){return e},e}var iF={},iU=(0,t1.gql)(iL()),iG=(0,t1.gql)(iB(),iU),i$=(0,t1.gql)(iV(),iU),iH=e.i(180703),iz=e.i(649960),iW=(0,b.createContext)(null),iq=function(){var e=(0,b.useContext)(iW);if(!e)throw Error("Expected log context in context");return e},iK=function(e){var t,n,r,i,a=e.deploymentId,o=e.replId,s=e.executionId,l=e.openFile,u=(0,x._)((0,b.useState)(null),2),c=u[0],d=u[1],f=(0,x._)((0,b.useState)([]),2),p=f[0],h=f[1],m=(0,x._)((0,b.useState)(),2),g=m[0],y=m[1],w=(0,x._)((0,b.useState)({message:"",executionId:s,start:null,end:null,level:null}),2),_=w[0],k=w[1],S=(0,b.useCallback)(function(){return k({message:"",executionId:s,start:null,end:null,level:null})},[s]),C=(0,x._)((0,b.useState)(!0),2),j=C[0],T=C[1],R=(0,x._)((0,b.useState)(!1),2),I=R[0],A=R[1],P=(0,x._)((0,b.useState)(!1),2),D=P[0],O=P[1],N=(0,x._)((0,b.useState)(!1),2),M=N[0],B=N[1],F=(0,x._)((0,iH.default)("deployments-logs-color",!0),2),U=F[0],G=F[1],$=(0,b.useRef)(!1),H=(0,iz.default)(function(e){var t=e.width;if(void 0!==t){var n=t>500;O(n),$.current||($.current=!0,A(n))}}),z=(0,iN.getLocalTimeZone)(),W=(t={ssr:!1,fetchPolicy:"network-only",variables:{deploymentId:a,replId:o,executionId:_.executionId?"d-scheduled-".concat(a,"-").concat(_.executionId):void 0,limit:_.start||_.end?1e3:100,level:_.level,message:_.message,start:null==(r=_.start)?void 0:r.toDate(z).toISOString(),end:null==(i=_.end)?void 0:i.toDate(z).toISOString()},onError:function(){y("Something went wrong"),h([])},onCompleted:function(e){if("hostingDeploymentLogs"in e.getRepl)if("ReplLogs"===e.getRepl.hostingDeploymentLogs.__typename){y(void 0);var t=e.getRepl.hostingDeploymentLogs.result,n=(0,E._)(t).reverse();if(!c)if(t.length>0){var r=new Date(t[0].timestamp);r.setSeconds(r.getSeconds()+1),d(r.toISOString())}else d(new Date().toISOString());h(n)}else y(e.getRepl.hostingDeploymentLogs.message),h([])}},n=(0,eE._)({},iF,t),t2.useQuery(iG,n)),q=W.loading,K=W.fetchMore,Y=W.subscribeToMore,Q=W.variables;(0,b.useEffect)(function(){q&&d(null)},[q]),(0,b.useEffect)(function(){d(null),J.current=!1,X.current=null},[_,a,o,s]),(0,b.useEffect)(function(){if(c&&!_.end&&!_.start&&j)return Y({document:i$,variables:{input:{deploymentId:a,executionId:s,message:_.message,start:c,level:_.level||void 0}},updateQuery:function(e,t){var n=t.subscriptionData;return(0,iM.produce)(e,function(e){if(!("hostingDeploymentLogs"in e.getRepl))return e;if("ReplLogs"===e.getRepl.hostingDeploymentLogs.__typename){var t=n.data.hostingDeploymentLogUpdates;(0===e.getRepl.hostingDeploymentLogs.result.length||t.timestamp>=e.getRepl.hostingDeploymentLogs.result[0].timestamp)&&e.getRepl.hostingDeploymentLogs.result.unshift(t)}return e})}})},[Y,a,s,q,_,c,z,j]);var X=(0,b.useRef)(null),Z=(0,b.useRef)(!1),J=(0,b.useRef)(!1),ee=(0,b.useCallback)(function(){return(0,L._)(function(){var e,t,n,r,i;return(0,V._)(this,function(a){switch(a.label){case 0:if(e=X.current?Math.abs(X.current.getTime()-Date.now()):0,_.start||_.end||q||X.current&&e<500||J.current||Z.current||0===p.length)return[2];return(t=new Date(p[0].timestamp)).setSeconds(t.getSeconds()-1),n=t.toISOString(),Z.current=!0,[4,K({variables:(0,eR._)((0,eE._)({},Q),{end:n})})];case 1:return r=a.sent().data,Z.current=!1,"hostingDeploymentLogs"in r.getRepl&&"ReplLogs"===r.getRepl.hostingDeploymentLogs.__typename&&(X.current=new Date,0===r.getRepl.hostingDeploymentLogs.result.length?J.current=!0:(i=r.getRepl.hostingDeploymentLogs.result,h(function(e){for(var t=[],n=i.length-1;n>=0;n--)(0===e.length||i[n].timestamp<e[0].timestamp)&&t.push(i[n]);return(0,E._)(t).concat((0,E._)(e))}))),[2]}})})()},[K,q,p,Q,_.start,_.end]);return(0,b.useMemo)(function(){return{logs:p,loading:q,error:g,fetchPage:ee,isLive:j,setIsLive:T,isExpanded:I,setIsExpanded:A,filter:_,setFilter:k,clearFilter:S,deploymentId:a,containerRef:H,isWide:D,isWrapped:M,setIsWrapped:B,openFile:l,isColorful:U,setIsColorful:G}},[S,H,a,g,ee,_,U,I,j,D,M,q,p,l,G])},iY=e.i(143003),iQ=e.i(790486),iX=e.i(417751),iZ=e.i(760129),iJ=e.i(933572),i0=e.i(301141),i1=(0,Y.cssRecord)({root:[X.rcss.transition.none,X.rcss.reset.button,X.rcss.flex.row,X.rcss.align.center,X.rcss.font.code,X.rcss.fontSize(12),X.rcss.textAlign.left,X.rcss.position.absolute,X.rcss.top(0),X.rcss.left(0),X.rcss.width("100%"),X.rcss.color.foregroundDefault,X.rcss.border({color:K.tokens.outlineDimmest,direction:"bottom"}),X.rcss.highRes({borderWidth:.5}),{outline:"none",userSelect:"auto","--cell-background":"".concat(K.tokens.backgroundDefault),"&:hover":{backgroundColor:K.tokens.interactiveBackground,"--cell-background":"".concat(K.tokens.interactiveBackground),".copy":{display:"block"}},'&[data-error="true"]':[X.rcss.colorMixBg(K.tokens.accentNegativeDimmest,"transparent"),{borderBottomColor:K.tokens.accentNegativeDimmest,boxShadow:"0 -1px 0 0 "+K.tokens.accentNegativeDimmest,"&:hover":{"--cell-background":"".concat(K.tokens.accentNegativeDimmest),backgroundColor:"var(--cell-background) !important"},"&:active":{boxShadow:"0 -1px 0 0 "+K.tokens.accentPrimaryDefault}},X.rcss.highRes({boxShadow:"0 -0.5px 0 0 "+K.tokens.accentNegativeDimmest,"&:active":{boxShadow:"0 -0.5px 0 0 "+K.tokens.accentPrimaryDefault}})]}],primaryCell:[X.rcss.display.block,X.rcss.pl(6),X.rcss.py(6),X.rcss.pr(4),X.rcss.flex.growAndShrink(1),X.rcss.minHeight(26),{whiteSpace:"nowrap",'&[data-wrapped="true"]':{whiteSpace:"normal"},'&[data-new-flag="false"]':{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",'&[data-wrapped="true"]':{whiteSpace:"normal"}},a:{color:"inherit","&:hover":{textDecoration:"underline"}}}],secondaryCell:[X.rcss.p(6),X.rcss.color.foregroundDimmest,X.rcss.truncate,{'&[data-error="true"]':X.rcss.color.accentNegativeStrongest}],copyColumn:[{display:"none",position:"absolute",top:"50%",zIndex:1,left:"calc(var(--width) + var(--scroll-left-offset))",transform:"translate(-100%, -50%)"}],copyButton:[{backgroundColor:"var(--cell-background) !important",color:"inherit"}]}),i2=(0,b.memo)(function(e){var t=e.log,n=e.y,r=e.height,i=e.resizeRef,a=e.index,o=e.isScrolling,s=e.columns,l=iq(),u=l.isWrapped,c=l.isColorful&&t.level===_.LogLevel.Error&&["INFO","DEBUG","TRACE"].every(function(e){return!t.line.includes(e)}),d=(0,b.useMemo)(function(){return(0,i0.default)(t.line)},[t.line]);return(0,y.jsxs)("div",{tabIndex:0,role:"button",title:d,css:i1.root,style:{height:r,transform:"translateY(".concat(n,"px)")},"data-error":c,children:[s.map(function(e,n){var r=n===s.length-1,o=e.renderCell(t);return(0,y.jsx)(ei.View,{css:r?i1.primaryCell:i1.secondaryCell,style:{width:e.width},innerRef:r?i:void 0,"data-index":a,"data-error":c,"data-wrapped":u,children:o},e.key)}),(0,y.jsx)("span",{css:i1.copyColumn,className:"copy",children:!o&&(0,y.jsx)(tc.CopyIconButton,{textToCopy:d,tooltipDisable:!0,css:i1.copyButton})})]})}),i3=e.i(904851),i5=e.i(90659),i4=e.i(367024),i8=e.i(855312),i6={black:"#2e3436",red:"#cc0000",green:"#4e9a06",yellow:"#c4a000",blue:"#3465a4",magenta:"#75507b",cyan:"#06989a",white:"#d3d7cf","bright-black":"#555753","bright-red":"#ef2929","bright-green":"#8ae234","bright-yellow":"#fce94f","bright-blue":"#729fcf","bright-magenta":"#ad7fa8","bright-cyan":"#34e2e2","bright-white":"#eeeeec"},i7=/^(?:\x1b\[([\x3c-\x3f]?)([\d;]*)([\x20-\x2f]?[\x40-\x7e]))|(?:\x1b\[[\x20-\x7e]*([\x00-\x1f:]))/,i9=/^\x1b\]8;[\x20-\x3a\x3c-\x7e]*;([\x21-\x7e]{0,512})(?:(?:\x1b\\)|(?:\x07))([\x20-\x7e]+)\x1b\]8;;(?:(?:\x1b\\)|(?:\x07))/,ae=/(?:(\x1b\\)|(\x07))|([\x00-\x06]|[\x08-\x1a]|[\x1c-\x1f])/g,at=function(){function e(t){(0,i3._)(this,e),this.lastIndex=0,this.input=t}return(0,i5._)(e,[{key:"next",value:function(){var e=this.input.substring(this.lastIndex),t=e.length;if(0===t)return{value:null,done:!0};var n={kind:0,text:"",url:""},r=e.indexOf("\x1b");if(-1===r)return n.kind=1,n.text=e,this.lastIndex+=t,{value:n,done:!1};if(r>0)return n.kind=1,n.text=e.slice(0,r),this.lastIndex+=r,{value:n,done:!1};if(t<3)return{value:null,done:!0};var i=e.charAt(1);if("["!==i&&"]"!==i&&"("!==i)return n.kind=2,n.text=e[0],this.lastIndex+=1,{value:n,done:!1};if("["===i){var a=e.match(i7);return null===a?{value:null,done:!0}:(a[4]?(n.kind=2,n.text=e[0],this.lastIndex+=1):(""!==a[1]||"m"!==a[3]?n.kind=3:n.kind=4,n.text=a[2],this.lastIndex+=a[0].length),{value:n,done:!1})}if("]"===i){if(t<4)return{value:null,done:!0};if("8"!==e.charAt(2)||";"!==e.charAt(3))return n.kind=2,n.text=e[0],this.lastIndex+=1,{value:n,done:!1};var o=new RegExp(ae),s=o.exec(e);if(null===s)return{value:null,done:!0};if(s[3])return n.kind=2,n.text=e[0],this.lastIndex+=1,{value:n,done:!1};var l=o.exec(e);if(null===l)return{value:null,done:!0};if(l[3])return n.kind=2,n.text=e[0],this.lastIndex+=1,{value:n,done:!1};var u=e.match(i9);return null===u?(n.kind=2,n.text=e[0],this.lastIndex+=1):(n.kind=5,n.url=u[1],n.text=u[2],this.lastIndex+=u[0].length),{value:n,done:!1}}return"("===i?(n.kind=3,this.lastIndex+=3,{value:n,done:!1}):{value:null,done:!0}}},{key:Symbol.iterator,value:function(){return this}}]),e}(),an=Array(14);an[0]="background-color",an[1]="color",an[2]="font-family",an[3]="font-size",an[4]="font-style",an[5]="font-weight",an[6]="opacity",an[7]="outline",an[8]="text-decoration",an[9]="text-decoration-color",an[10]="text-decoration-line",an[11]="text-decoration-style",an[12]="vertical-align",an[13]="visibility";var ar=function(){function e(){(0,i3._)(this,e),this.attrArray=Array(14),this._size=0}return(0,i5._)(e,[{key:"get",value:function(e){return this.attrArray[e]}},{key:"set",value:function(e,t){var n=this.attrArray[e];this.attrArray[e]=t,void 0===n&&void 0!==t&&(this._size+=1)}},{key:"delete",value:function(e){var t=this.attrArray[e];this.attrArray[e]=void 0,void 0!==t&&(this._size-=1)}},{key:"update",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];this.attrArray[t]=n,void 0!==n&&(this._size+=1)}}},{key:"clear",value:function(){this.attrArray.fill(void 0),this._size=0}},{key:"size",get:function(){return this._size}},{key:"toString",value:function(){var e="";return this.attrArray.forEach(function(t,n){void 0!==t&&(e+="".concat(an[n],":").concat(t,";"))}),e}}],[{key:"delete",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach(function(t){e.delete(t)})}}},{key:"appendVal",value:function(e,t){return function(n){var r=n.get(e),i=r?r.split(" "):[];i.includes(t)||i.push(t),n.set(e,i.join(" "))}}},{key:"removeVal",value:function(e,t){return function(n){var r=n.get(e),i=r?r.split(" "):[];(i=i.filter(function(e){return e!==t})).length?n.set(e,i.join(" ")):n.delete(e)}}}]),e}();(0,i4.default)(),(0,i4.default)({onlyFirst:!0});var ai=Array(108);ai[0]={5:"var(--ansi-bold-font-weight, 600)"},ai[1]={5:"var(--ansi-bold-font-weight, 600)"},ai[2]={6:"var(--ansi-dim-opacity, 0.7)"},ai[3]={4:"italic"},ai[4]=ar.appendVal(8,"underline"),ai[8]={13:"hidden"},ai[9]=ar.appendVal(8,"line-through"),ai[10]=ar.delete(2),ai[11]={2:"var(--ansi-font-1)"},ai[12]={2:"var(--ansi-font-2)"},ai[13]={2:"var(--ansi-font-3)"},ai[14]={2:"var(--ansi-font-4)"},ai[15]={2:"var(--ansi-font-5)"},ai[16]={2:"var(--ansi-font-6)"},ai[17]={2:"var(--ansi-font-7)"},ai[18]={2:"var(--ansi-font-8)"},ai[19]={2:"var(--ansi-font-9)"},ai[21]={10:"underline",11:"double"},ai[22]=ar.delete(5),ai[23]=ar.delete(4),ai[24]=ar.removeVal(8,"underline"),ai[28]=ar.delete(13),ai[29]=ar.removeVal(8,"line-through"),ai[30]={1:"var(--ansi-black, ".concat(i6.black,")")},ai[31]={1:"var(--ansi-red, ".concat(i6.red,")")},ai[32]={1:"var(--ansi-green, ".concat(i6.green,")")},ai[33]={1:"var(--ansi-yellow, ".concat(i6.yellow,")")},ai[34]={1:"var(--ansi-blue, ".concat(i6.blue,")")},ai[35]={1:"var(--ansi-magenta, ".concat(i6.magenta,")")},ai[36]={1:"var(--ansi-cyan, ".concat(i6.cyan,")")},ai[37]={1:"var(--ansi-white, ".concat(i6.white,")")},ai[39]=ar.delete(1),ai[40]={0:"var(--ansi-black, ".concat(i6.black,")")},ai[41]={0:"var(--ansi-red, ".concat(i6.red,")")},ai[42]={0:"var(--ansi-green, ".concat(i6.green,")")},ai[43]={0:"var(--ansi-yellow, ".concat(i6.yellow,")")},ai[44]={0:"var(--ansi-blue, ".concat(i6.blue,")")},ai[45]={0:"var(--ansi-magenta, ".concat(i6.magenta,")")},ai[46]={0:"var(--ansi-cyan, ".concat(i6.cyan,")")},ai[47]={0:"var(--ansi-white, ".concat(i6.white,")")},ai[49]=ar.delete(0),ai[51]={7:"var(--ansi-frame-outline, 1px solid)"},ai[53]=ar.appendVal(8,"overline"),ai[54]=ar.delete(7),ai[55]=ar.removeVal(8,"overline"),ai[59]=ar.delete(9),ai[73]={12:"super",3:"var(--ansi-superscript-font-size, 80%)"},ai[74]={12:"sub",3:"var(--ansi-subscript-font-size, 80%)"},ai[75]=ar.delete(12,3),ai[90]={1:"var(--ansi-bright-black, ".concat(i6["bright-black"],")")},ai[91]={1:"var(--ansi-bright-red, ".concat(i6["bright-red"],")")},ai[92]={1:"var(--ansi-bright-green, ".concat(i6["bright-green"],")")},ai[93]={1:"var(--ansi-bright-yellow, ".concat(i6["bright-yellow"],")")},ai[94]={1:"var(--ansi-bright-blue, ".concat(i6["bright-blue"],")")},ai[95]={1:"var(--ansi-bright-magenta, ".concat(i6["bright-magenta"],")")},ai[96]={1:"var(--ansi-bright-cyan, ".concat(i6["bright-cyan"],")")},ai[97]={1:"var(--ansi-bright-white, ".concat(i6["bright-white"],")")},ai[100]={0:"var(--ansi-bright-black, ".concat(i6["bright-black"],")")},ai[101]={0:"var(--ansi-bright-red, ".concat(i6["bright-red"],")")},ai[102]={0:"var(--ansi-bright-green, ".concat(i6["bright-green"],")")},ai[103]={0:"var(--ansi-bright-yellow, ".concat(i6["bright-yellow"],")")},ai[104]={0:"var(--ansi-bright-blue, ".concat(i6["bright-blue"],")")},ai[105]={0:"var(--ansi-bright-magenta, ".concat(i6["bright-magenta"],")")},ai[106]={0:"var(--ansi-bright-cyan, ".concat(i6["bright-cyan"],")")},ai[107]={0:"var(--ansi-bright-white, ".concat(i6["bright-white"],")")};var aa=Array(16);function ao(e){switch(e){case"38":return 1;case"48":return 0;case"58":return 9;default:throw Error("not implemented")}}aa[0]="black",aa[1]="red",aa[2]="green",aa[3]="yellow",aa[4]="blue",aa[5]="magenta",aa[6]="cyan",aa[7]="white",aa[8]="bright-black",aa[9]="bright-red",aa[10]="bright-green",aa[11]="bright-yellow",aa[12]="bright-blue",aa[13]="bright-magenta",aa[14]="bright-cyan",aa[15]="bright-white";var as=function(){function e(){(0,i3._)(this,e)}return(0,i5._)(e,[{key:"toHtml",value:function(e){var t=new ar,n="",r=!1;return Array.from(new at(e)).forEach(function(e){switch(e.kind){case 1:n+=(0,i8.default)(e.text);break;case 4:r&&(n+="</span>",r=!1),/^(38|48|58);(2|5);/.test(e.text)?"2"===e.text[3]?function(e,t){var n=e.text.split(";");if(5===n.length){var r=ao(n[0]),i=(0,x._)(n,5),a=i[2],o=i[3],s=i[4];t.set(r,"rgb(".concat(a,",").concat(o,",").concat(s,")"))}}(e,t):function(e,t){var n=e.text.split(";");if(3===n.length){var r=ao(n[0]),i=parseInt(n[2],10);if(0<=i&&i<=15){var a=aa[i];t.set(r,"var(--ansi-".concat(a,", ").concat(i6[a],")"))}else if(16<=i&&i<=231){var o=i-16,s=[0,95,135,175,215,255],l=s[o/36%6|0],u=s[o/6%6|0],c=s[o%6];t.set(r,"rgb(".concat(l,",").concat(u,",").concat(c,")"))}else if(232<=i&&i<=255){var d=8+(i-232)*10;t.set(r,"var(--ansi-gray-".concat(256-i,", rgb(").concat(d,",").concat(d,",").concat(d,"))"))}}}(e,t):e.text.split(";").forEach(function(e){var n=parseInt(e||"0",10);if(0===n)return void t.clear();var r=ai[n];r&&("function"==typeof r?r(t):t.update(r))}),t.size&&(n+='<span style="'.concat(t.toString(),'">'),r=!0)}}),r&&(n+="</span>"),n}}]),e}(),al=e.i(432869),au=new as,ac=function(e){var t,n,r,i=e.log,a=e.files,o=iq().openFile,s=i.line;s=i.level===_.LogLevel.Error?(0,i0.default)(i.line):au.toHtml(i.line);var l=(0,x._)((0,b.useState)([]),2),u=l[0],c=l[1];(0,b.useEffect)(function(){(0,al.getLinks)(s,function(){return Promise.resolve(a)}).then(function(e){return c(e)})},[a,s]);var d=(0,b.useCallback)(function(e){e.preventDefault();var t=e.target;t.dataset.file&&o({path:t.dataset.file})},[o]);return(0,y.jsx)("div",{dangerouslySetInnerHTML:{__html:(t=s,u.sort(function(e,t){return e.from-t.from}),n="",r=0,u.forEach(function(e){n+=t.slice(r,e.from);var i=t.slice(e.from,e.to);n+='<a href="#" data-file="'.concat(e.file,'">').concat(i,"</a>"),r=e.to}),n+=t.slice(r))},onKeyDown:d,onClick:d})},ad=e.i(673920),af=e.i(376363),ap=e.i(818976),ah=function(e){var t=e.scrollRef,n=e.scrollBottomRef,r=(0,b.useRef)(!1);return(0,ad.useEffectOnce)(function(){t.current&&setTimeout(function(){n.current&&((0,af.default)(n.current),r.current=!0)},0)}),{didInitialScroll:r}},am=function(e){var t=e.didInitialScroll,n=e.itemHeight,r=e.scrollRef,i=iq(),a=i.fetchPage,o=i.setIsLive,s=(0,x._)((0,b.useState)(!1),2),l=s[0],u=s[1],c=(0,x._)((0,b.useState)(0),2),d=c[0],f=c[1],p=(0,x._)((0,b.useState)(0),2),h=p[0],m=p[1],g=(0,b.useRef)(),y=(0,b.useRef)(!1);(0,b.useEffect)(function(){r.current&&f(r.current.offsetWidth-r.current.clientWidth)},[r]);var w=(0,b.useCallback)(function(e){(g.current||l)&&clearTimeout(g.current),u(!0),g.current=setTimeout(function(){u(!1),m(e.scrollLeft)},100)},[l]);return{scrollHandler:(0,b.useCallback)(function(e){return(0,L._)(function(){var r,i,s,l,u,c,d;return(0,V._)(this,function(f){switch(f.label){case 0:if(!(r=e.currentTarget)||y.current)return[2];if(w(r),i=r.scrollHeight,s=r.scrollTop,o(u=i-(l=r.clientHeight)===s),c=20*n,!(!u&&s<c&&i>l&&t.current))return[3,5];y.current=!0,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,a()];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),io.captureException(d),[3,4];case 4:y.current=!1,f.label=5;case 5:return[2]}})})()},[w,o,n,t,a]),isScrolling:l,scrollLeftOffset:h-d}},ag=function(e){var t=e.scrollRef,n=e.scrollBottomRef,r=iq(),i=r.loading,a=r.logs,o=r.isLive,s=r.isWrapped,l=(0,b.useRef)(0),u=(0,b.useRef)(a[0]),c=(0,b.useCallback)(function(){n.current&&(0,af.default)(n.current)},[n]);(0,b.useEffect)(function(){var e=t.current;if(e&&!i&&0!==a.length){if(o)e.scrollHeight>e.clientHeight&&c();else if(u.current&&u.current.timestamp>a[0].timestamp){var n=e.scrollHeight;if(n!==l.current){var r=n-l.current,s=e.scrollTop;e.scrollTo({top:s+r,behavior:"instant"})}}u.current=a[0],l.current=e.scrollHeight}},[o,i,a,t,c]);var d=(0,b.useRef)(s);(0,b.useEffect)(function(){o&&d.current!==s&&(c(),d.current=s)},[o,s,c])},av=(0,Y.cssRecord)({root:[{overflow:"auto"},X.rcss.flex.growAndShrink(1)],virtualTable:[X.rcss.width("100%"),X.rcss.position.relative],tableHeader:[X.rcss.display.flex,X.rcss.flex.row,X.rcss.backgroundColor.backgroundDefault,X.rcss.position.sticky,X.rcss.zIndex(1),X.rcss.top(0),X.rcss.border({color:K.tokens.outlineDimmest,direction:"bottom"})],columnHeader:[X.rcss.color.foregroundDimmer,X.rcss.fontSize(12),{lineHeight:"18px"},X.rcss.px(6),X.rcss.justify.center],infoTooltip:[X.rcss.display.flex,X.rcss.align.center,X.rcss.gap(4),{lineHeight:0}],bottomAnchor:[X.rcss.position.absolute,X.rcss.bottom(0),X.rcss.left(0),X.rcss.right(0)]}),ax=function(){var e=iq().isColorful,t=(0,ap.useTerminalTheme)();return(0,b.useMemo)(function(){var n={};if(t){var r=!0,i=!1,a=void 0;try{for(var o,s=Object.entries(t)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=(0,x._)(o.value,2),u=l[0],c=l[1];n["--ansi-".concat((0,iJ.default)(u))]=e?c:"currentColor"}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}return n},[e,t])};function ay(){var e=iq(),t=e.loading,n=e.error,r=e.logs,i=e.isExpanded,a=e.isWrapped,o=e.isWide,s=!!(t||n),l=(0,b.useRef)(null),u=(0,b.useRef)(null),c=(0,iS.useIsInBonsaiWebview)(),d=ax(),f=c?44:26,p=(0,iQ.useVirtualizer)({count:(null==r?void 0:r.length)||0,getScrollElement:function(){return l.current},estimateSize:function(){return f},overscan:10,measureElement:function(e){return e.getBoundingClientRect().height},rangeExtractor:function(e){var t=new Set([0].concat((0,E._)((0,iY.defaultRangeExtractor)(e))));return(0,E._)(t)}});ag({scrollRef:l,scrollBottomRef:u});var h=am({didInitialScroll:ah({scrollRef:l,scrollBottomRef:u}).didInitialScroll,itemHeight:f,scrollRef:l}),m=h.scrollHandler,g=h.isScrolling,w=h.scrollLeftOffset,k=(0,M.useDeploymentCurrentBuild)(),S=(null==k?void 0:k.provider)===_.HostingBuildProvider.Cron,C=(0,b.useMemo)(function(){var e;return 8*(e=Math).max.apply(e,(0,E._)((null==r?void 0:r.map(function(e){return e.line.length}))||[]))},[r]),j=(0,M.useFsService)().listFiles,T=(0,x._)((0,b.useState)([]),2),R=T[0],I=T[1];(0,b.useEffect)(function(){j().then(function(e){e.files&&I(e.files)})},[j]);var A=(0,iS.useIsInBonsaiWebview)(),D=(0,b.useMemo)(function(){return[{key:"time",title:(0,y.jsxs)("span",{css:av.infoTooltip,children:["Time",!A&&(0,y.jsx)(er.Tooltip,{tooltip:"Logs persist for up to 30 days",css:av.infoTooltip,children:(0,y.jsx)(P.default,{size:12})})]}),width:o?173:115,renderCell:function(e){var t=(0,iZ.parseISO)(e.timestamp);return(0,iX.format)(t,o?"yyyy-MM-dd HH:mm:ss.SS":"MM-dd HH:mm:ss")}},i&&{key:"build",title:"Deployment",width:75,renderCell:function(e){var t=e.buildId.split("-");return t?t[0]:e.buildId}},S&&{key:"run",title:"Run",width:50,renderCell:function(e){var t,n=null==(t=e.executionId)?void 0:t.split("-");return n?n[n.length-1]:""}},i&&{key:"source",title:"Source",width:57,renderCell:function(e){return e.isFromReplit?"System":"User"}},{width:a?void 0:C,key:"log",title:"Log",renderCell:function(e){return(0,y.jsx)(ac,{files:R,log:e})}}].filter(Boolean)},[R,S,i,A,o,a,C]),O=(0,b.useMemo)(function(){return D.reduce(function(e,t){return e+(t.width||0)},0)},[D]);return(0,y.jsx)(ei.View,{innerRef:l,css:av.root,onScroll:m,children:(0,y.jsxs)(ei.View,{style:(0,eE._)({height:p.getTotalSize(),minWidth:O,"--scroll-left-offset":"".concat(w,"px")},d),css:av.virtualTable,children:[(0,y.jsx)(ei.View,{css:av.tableHeader,children:D.map(function(e){return(0,y.jsx)(ei.View,{tag:"div",css:av.columnHeader,style:{width:e.width,flex:e.width?void 0:1,height:f},children:e.title},e.key)})}),p.getVirtualItems().map(function(e){var t=r[e.index];return t?(0,y.jsx)(i2,{log:t,height:e.size,y:e.start,resizeRef:p.measureElement,index:e.index,disabled:s,isScrolling:g,columns:D},e.key.toString()):null}),(0,y.jsx)("div",{ref:u,css:av.bottomAnchor})]})})}var ab=(0,Y.cssRecord)({root:[X.rcss.flex.grow(1)],noLogsText:[X.rcss.textAlign.center],viewError:[X.rcss.pt(0)]});function aw(){var e=iq(),t=e.logs,n=e.error;return e.loading?(0,y.jsx)(j.PaneSection,{css:ab.root,centered:!0,children:(0,y.jsx)(T.ViewLoading,{})}):0===t.length?(0,y.jsxs)(y.Fragment,{children:[n?(0,y.jsx)(T.ViewError,{css:ab.viewError,text:n}):null,(0,y.jsx)(j.PaneSection,{css:ab.root,children:(0,y.jsxs)(ei.View,{pt:4,gap:8,children:[(0,y.jsx)(en.Text,{css:ab.noLogsText,children:"No logs are available."}),(0,y.jsxs)(en.Text,{color:"dimmer",css:ab.noLogsText,children:["Having trouble?"," ",(0,y.jsx)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return(0,S.trackDeploymentSectionViewed)({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})})]}):(0,y.jsx)(ay,{})}function a_(e){return(0,y.jsx)(rt.default,(0,eR._)((0,eE._)({},e),{children:(0,y.jsx)("path",{d:"M15 18.25a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h6ZM18 11.25a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1 0-1.5h12ZM22 4.25a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1 0-1.5h20Z"})}))}var ak=e.i(167392),aS=e.i(17036),aC=e.i(54819),aj=(0,Y.cssRecord)({buttonGroup:[X.rcss.flex.row,X.rcss.rowWithGap(1),{button:{"&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}}]});function aT(e){var t=e.onClear,n=e.label,r=e.buttonProps,i=e.children,a=t?"primary":void 0,o=(0,x._)((0,b.useState)(!1),2),s=o[0],l=o[1];return(0,y.jsxs)(aC.Group,{css:aj.buttonGroup,children:[(0,y.jsxs)(th.PopoverTrigger,{label:n,isOpen:s,onOpenChange:l,background:"higher",children:[(0,y.jsx)(Z.Button,(0,eE._)({colorway:a},r)),i]}),t?(0,y.jsx)(Z.Button,{colorway:a,text:"",iconLeft:(0,y.jsx)(tW.default,{}),onClick:t}):null]})}var aE=(0,Y.cssRecord)({section:[X.rcss.gap(8)],dateRangeInputs:[X.rcss.display.grid,X.rcss.gap(8),X.rcss.align.center,{gridTemplateColumns:"min-content 200px",gridAutoFlow:"row",gridAutoRows:"1fr"}]}),aR=function(){var e=iq(),t=e.filter,n=e.setFilter,r=e.setIsLive;return(0,y.jsxs)(ei.View,{css:aE.dateRangeInputs,children:[(0,y.jsx)(tp.Label,{variant:"text",children:"Start"}),(0,y.jsx)(aS.default,{granularity:"minute",hourCycle:24,value:t.start,onChange:function(e){n(function(t){var n=(0,eR._)((0,eE._)({},t),{start:e});return e&&t.end&&e.compare(t.end)>0&&(n.end=null),n}),e&&r(!1)}}),(0,y.jsx)(tp.Label,{variant:"text",children:"End"}),(0,y.jsx)(aS.default,{granularity:"minute",hourCycle:24,value:t.end,onChange:function(e){n(function(t){var n=(0,eR._)((0,eE._)({},t),{end:e});return e&&t.start&&0>e.compare(t.start)&&(n.start=null),n}),e&&r(!1)}})]})},aI=function(){var e=iq(),t=e.filter,n=e.setFilter,r=(0,iN.getLocalTimeZone)(),i=t.start||t.end,a="Date",o=t.start&&(0,iX.format)(t.start.toDate(r),"M/d/yy"),s=t.end&&(0,iX.format)(t.end.toDate(r),"M/d/yy");return o&&s?a="".concat(o," to ").concat(s):o?a="Start ".concat(o):s&&(a="End ".concat(s)),(0,y.jsx)(aT,{label:"Date range",onClear:i?function(){return n(function(e){return(0,eR._)((0,eE._)({},e),{start:null,end:null})})}:void 0,buttonProps:{text:a,iconRight:i?void 0:(0,y.jsx)(ak.default,{})},children:(0,y.jsx)(ei.View,{css:aE.section,p:8,children:(0,y.jsx)(aR,{})})})},aA=function(){var e=iq(),t=e.filter,n=e.setFilter,r=(0,x._)((0,b.useState)(t.executionId),2),i=r[0],a=r[1];return(0,b.useEffect)(function(){a(t.executionId)},[t.executionId]),(0,y.jsx)(e7.Input,{placeholder:"*****",value:i||"",onChange:function(e){var t=e.target.value;a(t),t&&5!==t.length||n(function(e){return(0,eR._)((0,eE._)({},e),{executionId:t})})},onBlur:function(){return n(function(e){return(0,eR._)((0,eE._)({},e),{executionId:i})})},onKeyDown:function(e){"Enter"===e.key&&n(function(e){return(0,eR._)((0,eE._)({},e),{executionId:i})})}})},aP=function(){var e=iq(),t=e.filter,n=e.setFilter;return(0,y.jsx)(aT,{onClear:t.executionId?function(){return n(function(e){return(0,eR._)((0,eE._)({},e),{executionId:null})})}:void 0,label:"Run ID",buttonProps:{text:t.executionId?"Run: ".concat(t.executionId):"Run ID",iconRight:t.executionId?void 0:(0,y.jsx)(ak.default,{})},children:(0,y.jsx)(ei.View,{p:8,children:(0,y.jsx)(tv.TextField,{children:(0,y.jsx)(aA,{})})})})},aD=e.i(428596),aO=e.i(127227),aN=e.i(51054),aM=function(){var e=(0,M.useDeploymentCurrentBuild)();return(null==e?void 0:e.provider)===_.HostingBuildProvider.Cron},aL=(0,Y.cssRecord)({root:[{"> *:first-child":X.rcss.flex.grow(1)}],divider:X.rcss.backgroundColor.outlineDimmer,section:[X.rcss.p(8),X.rcss.gap(8)],clearFilterButton:[X.rcss.borderRadius(0),X.rcss.width("fit-content")]}),aB=function(){var e=iq(),t=e.filter,n=e.setFilter,r=function(){n(function(e){return(0,eR._)((0,eE._)({},e),{level:e.level===_.LogLevel.Error?null:_.LogLevel.Error})})};return(0,y.jsx)(Z.Button,{colorway:t.level===_.LogLevel.Error?"primary":void 0,text:"Errors only",iconLeft:(0,y.jsx)(aO.Checkbox,{onChange:r,checked:t.level===_.LogLevel.Error}),onClick:r})},aV=function(){var e=aM();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(aB,{}),(0,y.jsx)(aI,{}),e&&(0,y.jsx)(aP,{})]})},aF=function(){var e=iq(),t=e.filter,n=e.setFilter,r=e.clearFilter,i=aM(),a=!!(t.message||t.level||t.start||t.end||t.executionId),o=(0,aD.useIdSeed)();return(0,y.jsx)(aT,{label:"Filter",buttonProps:{text:"",iconLeft:(0,y.jsx)(a_,{})},onClear:a?r:void 0,children:(0,y.jsxs)(ei.View,{children:[(0,y.jsxs)(ei.View,{p:8,row:!0,gap:8,children:[(0,y.jsx)(aO.Checkbox,{name:"Filter by errors only",id:o("errors-only"),checked:t.level===_.LogLevel.Error,onChange:function(e){return n(function(t){return(0,eR._)((0,eE._)({},t),{level:e?_.LogLevel.Error:null})})}}),(0,y.jsx)("label",{htmlFor:o("errors-only"),children:"Errors only"})]}),i?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(rD.DividerH,{css:aL.divider}),(0,y.jsx)(ei.View,{css:aL.section,children:(0,y.jsxs)(tv.TextField,{children:[(0,y.jsx)(tp.Label,{color:"dimmer",children:"Run ID"}),(0,y.jsx)(aA,{})]})})]}):null,(0,y.jsx)(rD.DividerH,{css:aL.divider}),(0,y.jsxs)(ei.View,{css:aL.section,children:[(0,y.jsx)(tp.Label,{color:"dimmer",children:"Date range"}),(0,y.jsx)(aR,{})]}),(0,y.jsx)(rD.DividerH,{css:aL.divider}),(0,y.jsx)(Z.Button,{variant:"nofill",onClick:function(){return r()},text:"Clear all filters",alignment:"start",css:aL.clearFilterButton})]})})};function aU(){var e=iq(),t=e.filter,n=e.setFilter,r=e.isWide,i=(0,x._)((0,b.useState)(t.message),2),a=i[0],o=i[1];return(0,b.useEffect)(function(){o(t.message)},[t.message]),(0,y.jsxs)(ei.View,{css:aL.root,p:8,row:!0,gap:8,children:[(0,y.jsx)(aN.SearchBar,{placeholder:"Search",value:a,onChange:function(e){o(e.target.value),""===e.target.value&&n(function(e){return(0,eR._)((0,eE._)({},e),{message:""})})},onBlur:function(){return n(function(e){return(0,eR._)((0,eE._)({},e),{message:a})})},onClear:function(){n(function(e){return(0,eR._)((0,eE._)({},e),{message:""})})},onKeyDown:function(e){"Enter"===e.key&&n(function(e){return(0,eR._)((0,eE._)({},e),{message:a})})}}),r?(0,y.jsx)(aV,{}):(0,y.jsx)(aF,{})]})}var aG=e.i(682205),a$=e.i(393428);function aH(e){return(0,y.jsx)(rt.default,(0,eR._)((0,eE._)({},e),{viewBox:"0 0 16 16",fill:"none",children:(0,y.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 11.5H10A3.5 3.5 0 0013.5 8v0A3.5 3.5 0 0010 4.5H2.5m2 7L7 9m-2.5 2.5L7 14"})}))}var az=(0,Y.cssRecord)({root:[X.rcss.border({color:K.tokens.outlineDimmest,direction:"top"}),X.rcss.height(29)],group:[X.rcss.display.flex,X.rcss.rowWithGap(8)],button:[X.rcss.color.foregroundDefault,X.rcss.borderRadius(0),X.rcss.height("100%")],liveIndicatorWrapper:[X.rcss.width(16),X.rcss.height(16),X.rcss.display.flex,X.rcss.align.center,X.rcss.justify.center],liveIndicator:[X.rcss.width(6),X.rcss.height(6),X.rcss.borderRadius("full"),X.rcss.backgroundColor.accentPositiveStronger],checkboxWrapper:[X.rcss.display.flex,X.rcss.align.center,X.rcss.rowWithGap(4),X.rcss.cursor.pointer],checkbox:[{input:[X.rcss.width(16),X.rcss.height(16)]}]});function aW(){var e=iq(),t=e.filter,n=e.isLive,r=e.setIsLive,i=e.isExpanded,a=e.setIsExpanded,o=e.isWrapped,s=e.setIsWrapped,l=e.isColorful,u=e.setIsColorful,c=(0,aD.useIdSeed)(),d=!!(t.start||t.end);return(0,y.jsxs)(ei.View,{css:az.root,row:!0,gap:8,justify:"space-between",children:[(0,y.jsxs)(ei.View,{css:az.group,children:[(0,y.jsx)(Z.Button,{iconLeft:i?(0,y.jsx)(n6.default,{rotate:90}):(0,y.jsx)(n7.default,{rotate:90}),onClick:function(){return a(function(e){return!e})},variant:"nofill",text:i?"Collapse":"Expand",css:az.button}),(0,y.jsxs)("label",{css:az.checkboxWrapper,htmlFor:c("wrap"),children:[(0,y.jsx)(aO.Checkbox,{id:c("wrap"),checked:o,onChange:function(){return s(function(e){return!e})},css:az.checkbox}),(0,y.jsx)(aH,{}),(0,y.jsx)("span",{children:"Wrap"})]}),(0,y.jsxs)("label",{css:az.checkboxWrapper,htmlFor:c("colorful"),children:[(0,y.jsx)(aO.Checkbox,{id:c("colorful"),checked:l,onChange:function(){return u(function(e){return!e})},css:az.checkbox}),(0,y.jsx)(a$.default,{}),(0,y.jsx)("span",{children:"Colors"})]})]}),(0,y.jsx)(ei.View,{css:az.group,children:(0,y.jsx)(Z.Button,{iconLeft:n&&!d?(0,y.jsx)(ei.View,{css:az.liveIndicatorWrapper,children:(0,y.jsx)(ei.View,{css:az.liveIndicator})}):(0,y.jsx)(aG.default,{}),onClick:function(){return r(function(e){return!e})},variant:"nofill",text:"Live",css:az.button,disabled:d})})]})}var aq=(0,Y.cssRecord)({root:[X.rcss.overflow("hidden")],header:[{borderBottom:"1px solid ".concat(K.tokens.outlineDimmest)}]}),aK=function(e){var t=e.deploymentId,n=e.replId,r=e.executionId,i=e.onBack,a=e.openFile;return t?(0,y.jsx)(aY,{deploymentId:t,replId:n,executionId:r,onBack:i,openFile:a}):(0,y.jsx)(j.PaneSection,{children:(0,y.jsx)(tQ.StatusBanner,{colorway:"warning",icon:(0,y.jsx)(k.default,{}),text:"Deployment not found"})})};function aY(e){var t=e.deploymentId,n=e.replId,r=e.executionId,i=e.onBack,a=iK({deploymentId:t,replId:n,executionId:r,openFile:e.openFile});return(0,ad.useEffectOnce)(function(){(0,S.trackDeploymentSectionViewed)({context:C.Views.Logs})}),(0,y.jsx)(iW.Provider,{value:a,children:(0,y.jsxs)(ei.View,{css:aq.root,grow:!0,shrink:!0,innerRef:a.containerRef,children:[i?(0,y.jsx)(ei.View,{css:aq.header,p:6,gap:8,children:(0,y.jsx)(ei.View,{row:!0,gap:8,align:"center",justify:"space-between",children:(0,y.jsx)(J.IconButton,{alt:"Back",onClick:i,children:(0,y.jsx)($.default,{})})})}):null,(0,y.jsx)(aU,{}),(0,y.jsx)(aw,{}),(0,y.jsx)(aW,{})]})})}e.s(["Logs",()=>aK],985845),e.s([],969084);var aQ=e.i(491637),aX=e.i(571926),aZ=e.i(342424),aJ=e.i(703774),a0=[{label:"one hour",key:1},{label:"six hours",key:6},{label:"one day",key:24},{label:"three days",key:72},{label:"one week",key:168}],a1={label:"one hour",key:1},a2=X.container.min(600),a3=(0,Y.cssRecord)({fullWidth:(0,e_._)({},a2,{gridColumn:"span 2"})}),a5=(0,Y.cssRecord)({container:(0,e_._)({display:"grid",gap:32},a2,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"}),fullWidth:a3.fullWidth}),a4=function(e){var t=e.replId,n=(0,x._)((0,b.useState)(a1),2),r=n[0],i=r.key,a=r.label,o=n[1],s=(0,aQ.subHours)(new Date,i),l=(0,aJ.useTheme)().values,u=a6(s,a8(i));return(0,y.jsx)(j.PaneSection,{children:(0,y.jsxs)(ei.View,{css:a5.container,children:[(0,y.jsx)(ei.View,{css:a5.fullWidth,children:(0,y.jsx)(rO.PopupMenu,{items:a0,label:"Past ".concat(a),onAction:function(e){var t,n="string"==typeof e?parseInt(e,10):e;o(null!=(t=a0.find(function(e){return e.key===n}))?t:a1)},children:function(e){return(0,y.jsx)(rO.MenuItem,{label:e.label,id:e.key},e.key)}})}),(0,y.jsx)(ei.View,{css:a5.fullWidth,children:(0,y.jsx)(aZ.default,{replId:t,title:"CPU Utilization",metric:aX.TimeSeriesMetrics.CPU,start:u,hours:i,colorFn:function(){return l.global.redDefault}})}),(0,y.jsx)(ei.View,{css:a5.fullWidth,children:(0,y.jsx)(aZ.default,{replId:t,title:"Memory Utilization",metric:aX.TimeSeriesMetrics.Memory,start:u,hours:i,colorFn:function(){return l.global.redDefault}})})]})})},a8=function(e){return e<=1?6e5:e<=6?18e5:e<=24?72e5:216e5},a6=function(e,t){var n=e.getTime()%t;return new Date(e.getTime()-n)};e.s(["ResourceMonitoring",()=>a4],104571);var a7=e.i(682070),a7=a7;function a9(){var e=(0,t0._)(["\n  query ScheduledJobListExecution($deploymentId: String!) {\n    scheduledJobListExecutions(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ScheduledJobListExecutionsResults {\n        results {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return a9=function(){return e},e}function oe(){var e=(0,t0._)(["\n  mutation CancelScheduledJobExecution(\n    $deploymentId: String!\n    $executionId: String!\n  ) {\n    cancelScheduledJobExecution(\n      input: { deploymentId: $deploymentId, executionId: $executionId }\n    ) {\n      __typename\n      ... on CancelScheduledJobExecutionResult {\n        execution {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return oe=function(){return e},e}var ot={},on=(0,t1.gql)(a9()),or=(0,t1.gql)(oe()),oi=e.i(619542),oa=e.i(887964),oo=e.i(791134),os=(0,Y.cssRecord)({root:[X.rcss.overflow("hidden")],executionListHeader:[{borderBottom:"1px solid ".concat(K.tokens.outlineDimmest)}],executionList:[{overflow:"auto"},X.rcss.flex.growAndShrink(1)],executionListRows:{width:"100%",position:"relative"},executionItem:[X.rcss.rowWithGap(8),X.rcss.align.center,X.rcss.fontSize(12),X.rcss.px(8),{position:"absolute",top:0,left:0,width:"100%",borderBottom:"1px solid ".concat(K.tokens.outlineDimmest),color:K.tokens.foregroundDimmer}],executionItemStatusDot:[X.rcss.width("6px"),X.rcss.height("6px"),X.rcss.borderRadius("full"),X.rcss.flex.shrink(0),X.rcss.pr(4)],executionItemDistance:[X.rcss.minWidth(100)],executionItemTimestamp:[X.rcss.minWidth(90)],executionItemRunTime:[X.rcss.minWidth(60)],executionItemStatus:[X.rcss.minWidth(100),{textTransform:"capitalize"}],executionItemActions:[{marginLeft:"auto"}],noExecutionsText:[X.rcss.textAlign.center],maxResultsMessage:[X.rcss.fontSize(12),X.rcss.color.foregroundDimmest]});function ol(e){var t=e.deploymentId,n=e.replId,r=e.openFile,i=(0,x._)((0,b.useState)(),2),a=i[0],o=i[1];return t?a?(0,y.jsx)(aK,{replId:n,deploymentId:t,executionId:a,onBack:function(){return o(void 0)},openFile:r}):(0,y.jsx)(ou,{deploymentId:t,onViewExecutionLogs:function(e){var t=e.split("-");o(t[t.length-1])}}):(0,y.jsx)(j.PaneSection,{children:(0,y.jsx)(tQ.StatusBanner,{colorway:"warning",icon:(0,y.jsx)(k.default,{}),text:"Deployment not found"})})}function ou(e){var t,n,r,i,a,o=e.deploymentId,s=e.onViewExecutionLogs,l=(0,x._)((0,b.useState)([]),2),u=l[0],c=l[1],d=(0,x._)((0,b.useState)(!1),2),f=d[0],p=d[1],h=(0,x._)((0,b.useState)(),2),m=h[0],g=h[1],w=(t={variables:{deploymentId:o},onError:function(e){g(e)},onCompleted:function(e){(null==e?void 0:e.scheduledJobListExecutions.__typename)==="ScheduledJobListExecutionsResults"&&c(e.scheduledJobListExecutions.results)}},n=(0,eE._)({},ot,t),t2.useQuery(on,n)),_=w.loading,j=w.refetch,T=(0,x._)((r={onError:function(e){g(e)},onCompleted:function(e){var t=e.cancelScheduledJobExecution;"CancelScheduledJobExecutionResult"===t.__typename&&c(function(e){return e.map(function(e){return e.id===t.execution.id?t.execution:e})})}},i=(0,eE._)({},ot,r),t3.useMutation(or,i)),2),R=T[0],I=T[1].loading,A=!!(_||I||f||m);return(0,ad.useEffectOnce)(function(){_||j(),(0,S.trackDeploymentSectionViewed)({context:C.Views.Schedule})}),(0,y.jsxs)(ei.View,{css:os.root,grow:!0,shrink:!0,children:[(0,y.jsxs)(ei.View,{css:os.executionListHeader,p:6,gap:8,children:[m?(0,y.jsx)(tQ.StatusBanner,{colorway:"warning",icon:(0,y.jsx)(k.default,{}),text:null!=(a=m.message)?a:"Something went wrong"}):null,(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,y.jsx)(oo.ExecuteScheduledJobButton,{disabled:A,onSuccessfulExecution:function(e){c(function(t){return[e].concat((0,E._)(t)).slice(0,50)})}}),(0,y.jsx)(J.IconButton,{alt:"Refresh",disabled:A,onClick:function(){A||(p(!0),j().finally(function(){p(!1)}))},children:f?(0,y.jsx)(z.default,{}):(0,y.jsx)(eC.default,{})})]})]}),(0,y.jsx)(oc,{executions:u,loading:_,disabled:A,onExecutionItemAction:function(e){switch(e.type){case"cancel":R({variables:{deploymentId:o,executionId:e.payload.id}});break;case"logs":s(e.payload.id)}}})]})}function oc(e){var t=e.executions,n=e.loading,r=e.disabled,i=e.onExecutionItemAction,a=(0,b.useRef)(null),o=(0,iS.useIsInBonsaiWebview)()?44:28,s=(0,iQ.useVirtualizer)({count:t.length,getScrollElement:function(){return a.current},estimateSize:function(){return o},overscan:10});return n?(0,y.jsx)(j.PaneSection,{centered:!0,children:(0,y.jsx)(T.ViewLoading,{})}):0===t.length?(0,y.jsx)(j.PaneSection,{children:(0,y.jsxs)(ei.View,{pt:4,gap:8,children:[(0,y.jsx)(en.Text,{css:os.noExecutionsText,children:"No runs yet..."}),(0,y.jsxs)(en.Text,{color:"dimmer",css:os.noExecutionsText,children:["Having trouble?"," ",(0,y.jsx)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return(0,S.trackDeploymentSectionViewed)({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})}):(0,y.jsx)(ei.View,{innerRef:a,css:os.executionList,children:(0,y.jsx)(ei.View,{style:{height:s.getTotalSize()},css:os.executionListRows,children:s.getVirtualItems().map(function(e){var n=t[e.index];return(0,y.jsx)(oh,{execution:n,height:e.size,y:e.start,index:e.index,onAction:i,disabled:r},e.key.toString())})})})}var od=(g={},(0,e_._)(g,_.ScheduledJobExecutionStatus.Done,K.tokens.accentPositiveDefault),(0,e_._)(g,_.ScheduledJobExecutionStatus.Running,K.tokens.orangeStronger),(0,e_._)(g,_.ScheduledJobExecutionStatus.Failed,K.tokens.accentNegativeDefault),(0,e_._)(g,_.ScheduledJobExecutionStatus.Cancelled,K.tokens.greyDefault),(0,e_._)(g,_.ScheduledJobExecutionStatus.Unrecognized,K.tokens.greyDefault),g);function of(e){var t=e.status,n=t in od?od[t]:K.tokens.greyDefault;return(0,y.jsx)(ei.View,{tag:"span",css:os.executionItemStatusDot,style:{backgroundColor:n}})}var op=((a=op||{}).Cancel="cancel",a.Logs="logs",a);function oh(e){var t=e.execution,n=e.y,r=e.height,i=e.index,a=e.onAction,o=e.disabled,s=(null==t?void 0:t.endedAt)?(new Date(t.endedAt).valueOf()-new Date(t.startedAt).valueOf())/1e3:null;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(ei.View,{title:t.id,css:os.executionItem,style:{height:r,transform:"translateY(".concat(n,"px)")},children:[(0,y.jsx)(of,{status:t.status}),(0,y.jsx)(ei.View,{css:os.executionItemDistance,children:(0,a7.default)(new Date(t.startedAt),Date.now(),{addSuffix:!0})}),(0,y.jsxs)(ei.View,{css:os.executionItemTimestamp,children:[new Date(t.startedAt).toLocaleString("en-US",{month:"short",day:"2-digit"}),", ",new Date(t.startedAt).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"})]}),(0,y.jsx)(ei.View,{css:os.executionItemRunTime,children:s?"".concat(s,"s"):"-"}),(0,y.jsx)(ei.View,{css:os.executionItemStatus,children:t.status}),(0,y.jsxs)(ei.View,{css:os.executionItemActions,row:!0,gap:8,align:"center",children:[t.status===_.ScheduledJobExecutionStatus.Running?(0,y.jsx)(J.IconButton,{alt:"Cancel",size:12,disabled:o,onClick:function(){return a({type:"cancel",payload:{id:t.id}})},children:(0,y.jsx)(oi.default,{})}):null,(0,y.jsx)(J.IconButton,{alt:"Logs",size:18,disabled:o,onClick:function(){return a({type:"logs",payload:{id:t.id}})},children:(0,y.jsx)(oa.default,{})})]})]}),49===i?(0,y.jsx)(ei.View,{title:t.id,css:os.executionItem,style:{height:r,transform:"translateY(".concat(n+r,"px)")},children:(0,y.jsx)(en.Text,{css:os.maxResultsMessage,children:"Only the most recent 50 runs are displayed currently"})}):null]})}e.s(["Schedule",()=>ol],150281);var om=e.i(198992),og=e.i(961970),ov=e.i(803640),ox=e.i(590432),oy=e.i(452412),ob=e.i(914279),ow=e.i(68893),o_=e.i(187505),ok=e.i(492267),oS=(0,Y.cssRecord)({container:X.rcss.colWithGap(24),pauseAndResumeButtons:X.rcss.colWithGap(8),sectionContainer:X.rcss.colWithGap(8),sectionButton:[X.rcss.color.accentNegativeStrongest,X.rcss.transition.snappy,(0,e_._)({backgroundColor:K.tokens.interactiveBackground,borderColor:"transparent"},X.selectors.hover,{borderColor:"transparent"})]}),oC=function(e){var t=e.hideResume,n=e.hideSuspend,r=e.onLifecycleCommand,i=e.authorizations,a=(0,o_.useTrackClick)().trackClick,o=(0,ob.useDeploymentMode)(),s=(0,M.useDeploymentCurrentBuild)(),l=(0,x._)((0,b.useState)(!1),2),u=l[0],c=l[1],d=i.editDeploymentStatus,f=d.isAuthorized,p=d.message,h=(null==s?void 0:s.provider)==="azure_container_app"||(null==s?void 0:s.provider)==="azure_vm",m=(null==s?void 0:s.status)===_.HostingBuildStatus.Resuming,g=(null==s?void 0:s.status)===_.HostingBuildStatus.Suspending,w=(null==s?void 0:s.status)===_.HostingBuildStatus.Suspended,k=m||g||o===ow.DeploymentMode.ProcessingLifecycleCommand||o===ow.DeploymentMode.Deploying,S=!h&&!(void 0!==t&&t)&&(w||m)&&(null==s?void 0:s.hasImageTag),C=!h&&!(void 0!==n&&n)&&!w&&!m&&(g||o===ow.DeploymentMode.Deploying||o===ow.DeploymentMode.Ready)&&(null==s?void 0:s.hasImageTag);return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(ei.View,{css:oS.container,children:[S||C?(0,y.jsxs)(ei.View,{css:oS.pauseAndResumeButtons,children:[S?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(er.Tooltip,{tooltip:p,isDisabled:f,children:(0,y.jsx)(Z.Button,{text:m?"Resuming":"Resume",onClick:function(){a({productArea:"publishing",target:"resume_button"}),r({command:_.SendDeploymentLifecycleCommandType.Resume})},loading:m,disabled:k||!f,iconLeft:m?(0,y.jsx)(z.default,{}):(0,y.jsx)(ov.default,{})})}),(0,y.jsx)(en.Text,{color:"dimmer",children:"Your app will become accessible to users again"})]}):null,C?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(er.Tooltip,{tooltip:p,isDisabled:f,children:(0,y.jsx)(Z.Button,{text:"Pause",onClick:function(){a({productArea:"publishing",target:"pause_button"}),r({command:_.SendDeploymentLifecycleCommandType.Suspend})},loading:g,disabled:k||!f,iconLeft:g?(0,y.jsx)(z.default,{}):(0,y.jsx)(og.default,{})})}),(0,y.jsx)(en.Text,{color:"dimmer",children:"Your billing will continue, but all users will lose access to your app"})]}):null]}):null,(0,y.jsx)(oj,{setIsDestroying:c,onLifecycleCommand:r,authorizations:i}),(0,y.jsx)(oT,{isDestroying:u,setIsDestroying:c,onLifecycleCommand:r,authorizations:i})]})})};function oj(e){var t=e.setIsDestroying,n=e.onLifecycleCommand,r=e.authorizations,i=(0,o_.useTrackClick)().trackClick,a=(0,x._)((0,b.useState)(!1),2),o=a[0],s=a[1],l=r.deleteDeployment,u=l.isAuthorized,c=l.message;return(0,ok.useIsAgentStackRepl)().isAgentStackRepl?null:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(ei.View,{css:oS.sectionContainer,children:[(0,y.jsx)(er.Tooltip,{tooltip:c,isDisabled:u,children:(0,y.jsx)(Z.Button,{text:"Change deployment type",onClick:function(){i({productArea:"publishing",target:"change_deployment_type_button"}),s(!0)},disabled:!u,iconLeft:(0,y.jsx)(ox.default,{})})}),(0,y.jsx)(en.Text,{color:"dimmer",children:"To change your deployment type, you will need to unpublish and publish again."})]}),(0,y.jsx)(rE.Modal,{isOpen:o,onRequestClose:function(){return s(!1)},children:(0,y.jsx)(oy.default,{confirmLabel:"Yes, unpublish my app",title:"Change Deployment Type",isDestructive:!0,onConfirm:function(){t(!0),s(!1),n({command:_.SendDeploymentLifecycleCommandType.Destroy})},onCancel:function(){return s(!1)},children:"To change your deployment type, you will need to unpublish and publish again. This will destroy your published app and any associated published app tiers, saved replit.app domain and published app history. You can always come back and republish your App again."})})]})}function oT(e){var t=e.isDestroying,n=e.setIsDestroying,r=e.onLifecycleCommand,i=e.authorizations,a=(0,o_.useTrackClick)().trackClick,o=(0,x._)((0,b.useState)(!1),2),s=o[0],l=o[1],u=i.deleteDeployment,c=u.isAuthorized,d=u.message;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(ei.View,{css:oS.sectionContainer,children:[(0,y.jsx)(er.Tooltip,{tooltip:d,isDisabled:c,children:(0,y.jsx)(Z.Button,{text:"Shut down",colorway:"negative",variant:"outlined",css:oS.sectionButton,onClick:function(){a({productArea:"publishing",target:"shut_down_button"}),l(!0)},disabled:t||!c,iconLeft:(0,y.jsx)(ej.default,{})})}),(0,y.jsx)(en.Text,{color:"dimmer",children:"Your published app billing will be canceled, and it will cease to exist"})]}),(0,y.jsx)(rE.Modal,{isOpen:s,onRequestClose:function(){return l(!1)},children:(0,y.jsx)(oy.default,{confirmLabel:"Yes, unpublish my app",title:"Delete Published App",isDestructive:!0,onConfirm:function(){n(!0),l(!1),r({command:_.SendDeploymentLifecycleCommandType.Destroy})},onCancel:function(){return l(!1)},children:"This will destroy your published app and any associated published app tiers, saved replit.app domain and published app history. You can always come back and republish your repl again."})})]})}var oE=e.i(256758),oR=e.i(259421);function oI(e){var t=e.shouldShowDownloadQR,n=(0,o_.useTrackClick)().trackClick,r=(0,x._)((0,b.useState)(t),2),i=r[0],a=r[1];return(0,y.jsx)(ei.View,{children:(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsx)(Z.Button,{iconLeft:(0,y.jsx)(oE.default,{}),text:"Install the Replit App",onClick:function(){n({productArea:"publishing",target:"install_replit_app_button"}),a(function(e){var t=!e;return t&&(0,ep.track)(eh.events.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),t})}}),i?(0,y.jsx)(oR.default,{source:"deployment_settings"}):null]})})}var oA=e.i(589910);function oP(){var e=(0,t0._)(["\n  query AutoscaleUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            autoscaleComputeUnits {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return oP=function(){return e},e}var oD={},oO=(0,t1.gql)(oP()),oN=e.i(912790),oM=(0,Y.cssRecord)({root:[X.rcss.borderRadius(8),{outline:"1px solid transparent"}],outerRow:[X.rcss.rowWithGap(12),X.rcss.align.center]}),oL=function(e){var t,n=e.machineConfiguration,r=(t=(0,eE._)({},oD,void 0),t2.useQuery(oO,t)).data,i=(0,b.useMemo)(function(){return function(e){var t,n,r=e.data;if((null==r||null==(t=r.currentUser)?void 0:t.__typename)==="CurrentUser"){var i=null==r||null==(n=r.currentUser)?void 0:n.usageInterval;if(i&&"UsageInterval"===i.__typename){var a=i.resources.autoscaleComputeUnits.usage,o=(0,oN.toDisplaySize)(a,{resourceUsageType:"ComputeUnits"}),s=new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"});return{description:"".concat(o," used this billing period"),renewalInfo:"Renews ".concat(s," ")}}}}({data:r})},[r]),a=(0,ok.useIsAgentStackRepl)().isAgentStackRepl,o=(0,b.useMemo)(function(){if(null!=n)return"Autoscale (".concat(n.label,")")},[n]);if(!o||!i)return(0,y.jsx)(ei.View,{justify:"center",row:!0,children:(0,y.jsx)(z.default,{})});var s=e.authorizations.editDeploymentTier,l=s.isAuthorized,u=s.message;return(0,y.jsxs)(Q.ShadesSurface,{css:oM.root,p:8,pt:12,gap:4,children:[(0,y.jsxs)(ei.View,{css:oM.outerRow,children:[(0,y.jsx)(ei.View,{grow:!0,shrink:!0,gap:4,children:o?(0,y.jsx)(en.Text,{multiline:!1,children:o}):null}),a?null:(0,y.jsx)(J.IconButton,{alt:l?"Edit":u,disabled:!l,onClick:e.onEditAutoscaleMachineConfiguration,children:(0,y.jsx)(H.default,{})})]}),i?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(ei.View,{css:oM.outerRow,children:[(0,y.jsx)(en.Text,{multiline:!1,children:i.description}),(0,y.jsx)(en.Text,{color:"dimmer",multiline:!1,children:i.renewalInfo})]}),(0,y.jsx)(ei.View,{css:oM.outerRow,children:(0,y.jsx)(G.default,{href:"/usage",prefetch:!1,role:"button",children:"View account resource limits"})})]}):null]})},oB=e.i(368487),oV=e.i(596139),oF=e.i(418725),oU=e.i(443394),oG=e.i(293242);function o$(e){var t=e.isFreeUser,n=e.updateExistingDeployment;return t?(0,y.jsx)(oH,{}):(0,y.jsxs)(ei.View,{row:!0,justify:"space-between",align:"start",gap:16,children:[(0,y.jsxs)(ei.View,{gap:4,shrink:!0,children:[(0,y.jsx)(en.Text,{children:'"Made with Replit" badge'}),(0,y.jsxs)(en.Text,{style:{maxWidth:"90%"},variant:"small",color:"dimmer",children:['Display a "Made with Replit" referral badge on your published app, when someone signs up using your referral link, you earn credits.'," ",(0,y.jsx)(G.default,{href:"https://replit.com/refer",target:"_blank",rel:"noopener noreferrer",children:"Learn more."})]})]}),(0,y.jsx)(oz,{updateExistingDeployment:void 0!==n&&n})]})}function oH(){var e=(0,oU.getCurrentUrl)({deploymentPane:"true"});return(0,y.jsxs)(ei.View,{row:!0,justify:"space-between",align:"center",gap:16,children:[(0,y.jsxs)(ei.View,{gap:4,shrink:!0,children:[(0,y.jsx)(en.Text,{children:'Remove "Made with Replit" badge'}),(0,y.jsxs)(en.Text,{variant:"small",color:"dimmer",children:['Your Starter apps include a "Made with Replit" referral badge. When someone signs up using your referral link, you earn credits that you can use once you\'ve upgraded to ',oV.corePlanName,"."]})]}),(0,y.jsx)(oF.default,{context:"replit_badge_upsell",text:"Upgrade",size:"small",variant:"default",redirectPath:e})]})}function oz(e){var t=e.updateExistingDeployment,n=(0,M.useReplitBadgeState)(),r=n.enabled,i=n.setReplitBadgeEnabled,a=(0,M.useSendDeploymentLifecycleCommand)(),o=(0,M.useDeploymentErrorGetter)(),s=(0,tu.default)(),l=s.showConfirm,u=s.showError,c=(0,x._)((0,b.useState)(!1),2),d=c[0],f=c[1];return(0,y.jsx)(tg.Switch,{"aria-label":"Made with Replit badge",isSelected:null!=r&&r,onChange:function(e){return(0,L._)(function(){var n,s;return(0,V._)(this,function(c){switch(c.label){case 0:if(n=null!=r?r:null,i(e),(0,oG.updateReplitBadgeInAllWebviewIframes)(e),!t)return[3,2];return f(!0),[4,a({command:_.SendDeploymentLifecycleCommandType.UpdateDeploymentFeatureConfig,replitBadgeEnabled:e})];case 1:c.sent(),(s=o())?(i(n),(0,oG.updateReplitBadgeInAllWebviewIframes)(null!=n&&n),u(s)):l("Badge settings updated"),f(!1),c.label=2;case 2:return[2]}})})()},isDisabled:d})}function oW(){var e=(0,t0._)(["\n  mutation NotificationsSectionUpdateFailureNotifications(\n    $input: UpdateMachineJobFailureNotificationInput!\n  ) {\n    updateMachineJobFailureNotification(input: $input) {\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UpdateMachineJobFailureNotificationResult {\n        failureNotifications\n      }\n    }\n  }\n"]);return oW=function(){return e},e}var oq={},oK=(0,t1.gql)(oW()),oY=e.i(648880);function oQ(e){return(0,y.jsxs)(rt.default,(0,eR._)((0,eE._)({},e),{children:[(0,y.jsx)("path",{d:"M13.083 20.625a.75.75 0 0 1 1.299.75A2.752 2.752 0 0 1 12 22.75a2.753 2.753 0 0 1-2.382-1.375.75.75 0 0 1 1.299-.75 1.25 1.25 0 0 0 2.165 0Z"}),(0,y.jsx)("path",{fillRule:"evenodd",d:"M1.47 1.47a.75.75 0 0 1 1.06 0l20 20a.75.75 0 0 1-1.06 1.06l-4.78-4.78H4a1.753 1.753 0 0 1-1.6-1.041 1.752 1.752 0 0 1 .306-1.886l.016-.018c.665-.686 1.269-1.315 1.73-2.289.458-.972.798-2.345.798-4.515 0-.512.058-1.02.173-1.518L1.47 2.53a.75.75 0 0 1 0-1.06ZM6.75 8c0 2.328-.364 3.933-.942 5.157-.573 1.212-1.333 1.994-1.994 2.675a.252.252 0 0 0 .05.377c.04.027.088.041.136.041h11.19L6.756 7.817c-.002.061-.006.123-.006.185Z",clipRule:"evenodd"}),(0,y.jsx)("path",{d:"M11.67 1.257A6.752 6.752 0 0 1 18.75 8c0 2.533.724 4.355 1.58 5.632a.75.75 0 0 1-1.246.835C18.067 12.95 17.25 10.84 17.25 8a5.251 5.251 0 0 0-8.166-4.367.75.75 0 1 1-.832-1.247 6.75 6.75 0 0 1 3.418-1.129Z"})]}))}var oX=e.i(721321),oZ=(0,Y.cssRecord)({container:[X.rcss.colWithGap(8)]});function oJ(e){var t,n,r=e.replId,i=e.isCurrentBuildSuccess,a=e.areFailureNotificationsEnabled,o=(0,x._)((0,b.useState)(a),2),s=o[0],l=o[1],u=(0,x._)((0,b.useState)(void 0),2),c=u[0],d=u[1],f=(0,x._)((t={onCompleted:function(e){var t=e.updateMachineJobFailureNotification;((null==t?void 0:t.__typename)==="NotFoundError"||(null==t?void 0:t.__typename)==="UnauthorizedError"||(null==t?void 0:t.__typename)==="UserError")&&(d(t.message),l(function(e){return!e}))}},n=(0,eE._)({},oq,t),t3.useMutation(oK,n)),1)[0],p=function(e){d(void 0),f({variables:{input:{replId:r,failureNotifications:e}}}),l(e)};return(0,y.jsxs)(ei.View,{children:[c?(0,y.jsx)(tQ.StatusBanner,{text:c,colorway:"warning"}):null,(0,y.jsxs)(er.Tooltip,{isDisabled:i,tooltip:"Most recent build failed. Republish successfully before enabling notifications",placement:"top-end",css:oZ.container,children:[(0,y.jsxs)(oX.ButtonGroup,{disabled:!i,tag:"fieldset",name:"notification-switch",value:s?"enabled":"disabled",onChange:function(e){p("enabled"===e)},row:!0,primary:!0,stretch:!0,children:[(0,y.jsx)(oX.ButtonGroupItem,{id:"failure-notifications-disabled",value:"disabled",text:"Disabled",icon:(0,y.jsx)(oQ,{})}),(0,y.jsx)(oX.ButtonGroupItem,{id:"failure-notifications-enabled",value:"enabled",text:"Enabled",icon:(0,y.jsx)(oY.default,{})})]}),(0,y.jsx)(en.Text,{color:"dimmer",children:"Send email and push notifications when a scheduled job fails"})]})]})}var o0=(0,Y.cssRecord)({container:[om.sharedCss.maxWidth,X.rcss.py(8)],usageContainer:X.rcss.colWithGap(16),header:X.rcss.pb(8),paddedHeader:X.rcss.pb(12)}),o1=function(e){var t=e.deploymentId,n=e.onLifecycleCommand,r=e.onError;return t?(0,y.jsx)(o3,{deploymentId:t,onLifecycleCommand:n,onError:r}):(0,y.jsx)(j.PaneSection,{children:(0,y.jsx)(tQ.StatusBanner,{colorway:"warning",icon:(0,y.jsx)(k.default,{}),text:"Published app not found"})})},o2={__typename:"ReplAuthorizations",addCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:_.ReplAuthorizationCode.InsufficientPermissions,message:"Loading"},deleteCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:_.ReplAuthorizationCode.InsufficientPermissions,message:"Loading"},deleteDeployment:{__typename:"ReplAuthorization",isAuthorized:!1,code:_.ReplAuthorizationCode.InsufficientPermissions,message:"Loading"},editDeploymentStatus:{__typename:"ReplAuthorization",isAuthorized:!1,code:_.ReplAuthorizationCode.InsufficientPermissions,message:"Loading"},editDeploymentTier:{__typename:"ReplAuthorization",isAuthorized:!1,code:_.ReplAuthorizationCode.InsufficientPermissions,message:"Loading"}};function o3(e){var t,n,r,i,a,o,s,l=(0,iS.useIsInBonsaiWebview)(),u=(0,x._)((0,b.useState)(!1),2),c=u[0],d=u[1];(0,b.useEffect)(function(){(0,S.trackDeploymentSectionViewed)({context:C.Views.Settings})},[]);var f=(0,x._)((0,w.useHostingDeploymentSettingsAuthzLazyQuery)(),2),p=f[0],h=f[1],m=h.data,g=h.error,k=(0,eb.useFlag)({controlName:"flag-domains-glowup",default:!1}),E=(0,eb.useFlag)({controlName:"flag-replit-badge-pill",default:!1}),R=(0,M.useFreeTierCloudServices)(),I=(0,w.useHostingDeploymentSettingsQuery)({variables:{id:e.deploymentId,isGlowup:k},ssr:!1,fetchPolicy:"cache-and-network",onCompleted:function(e){var t;(null==e||null==(t=e.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"&&p({variables:{replId:e.hostingDeployment.repl.id,provider:e.hostingDeployment.currentBuild.provider}})}}),A=I.data,P=I.loading,D=I.error,O=(null==A||null==(t=A.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"?A.hostingDeployment:void 0;if(c&&(null==O?void 0:O.currentBuild.provider)===_.HostingBuildProvider.CloudRun)return(0,y.jsx)(oA.AutoscaleMachineConfiguration,{type:_.HostingBuildProvider.CloudRun,onError:e.onError,onConfirm:function(t){e.onLifecycleCommand({command:_.SendDeploymentLifecycleCommandType.UpdateMachineConfiguration,machineConfigurationId:t.configurationId,maxMachineInstances:t.maxInstances})},onBack:function(){return d(!1)}});if(D)return(0,y.jsx)(T.ViewError,{text:D.message});if(P||!O)return(0,y.jsx)(j.PaneSection,{centered:!0,children:(0,y.jsx)(T.ViewLoading,{})});var N=O.currentBuild,L=null!=(o=null==N?void 0:N.machineConfiguration)?o:void 0,B=(null==m||null==(n=m.getRepl)?void 0:n.__typename)==="Repl"?m.getRepl.authorizations:o2;return(0,y.jsx)(j.PaneSection,{children:(0,y.jsxs)(ei.View,{css:o0.container,gap:32,children:[g?(0,y.jsx)(tQ.StatusBanner,{colorway:"negative",text:g.message}):void 0,N.provider===_.HostingBuildProvider.CloudRun?(0,y.jsxs)(ei.View,{children:[(0,y.jsx)(en.Text,{variant:"subheadDefault",css:o0.header,children:"Resource usage"}),(0,y.jsx)(ei.View,{css:o0.usageContainer,children:(0,y.jsx)(oL,{machineConfiguration:L,onEditAutoscaleMachineConfiguration:function(){return d(!0)},authorizations:B})})]}):null,(0,y.jsxs)(ei.View,{children:[(0,y.jsx)(en.Text,{variant:"subheadDefault",css:o0.paddedHeader,children:"Manage published app"}),(0,y.jsx)(oB.DeploymentSuspendedReason,{}),(0,y.jsx)(oC,{onLifecycleCommand:e.onLifecycleCommand,authorizations:B})]}),N.provider===_.HostingBuildProvider.Cron?(0,y.jsxs)(ei.View,{children:[(0,y.jsx)(en.Text,{variant:"subheadDefault",css:o0.paddedHeader,children:"Scheduled Job Notifications"}),(0,y.jsx)(oJ,{replId:O.repl.id,isCurrentBuildSuccess:O.currentBuild.status===_.HostingBuildStatus.Success,areFailureNotificationsEnabled:null!=(s=null==(r=O.currentBuild.machineJob)?void 0:r.failureNotifications)&&s})]}):null,!E||(null==(a=O.repl)||null==(i=a.org)?void 0:i.id)?null:(0,y.jsxs)(ei.View,{children:[(0,y.jsx)(en.Text,{variant:"subheadDefault",css:o0.paddedHeader,children:"Display settings"}),(0,y.jsx)(o$,{isFreeUser:R,updateExistingDeployment:!0})]}),l?null:(0,y.jsxs)(ei.View,{children:[(0,y.jsx)(en.Text,{variant:"subheadDefault",css:o0.paddedHeader,children:"Publish on the go"}),(0,y.jsx)(oI,{shouldShowDownloadQR:!1})]})]})})}function o5(){var e=(0,t0._)(["\n  fragment DeploymentsNewDeploymentRepl on Repl {\n    id\n    slug\n    lastUsedSubdomain\n    suggestedUniqueSubdomain\n    title\n    iconUrl\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    org {\n      __typename\n      id\n      slug\n      type\n    }\n  }\n"]);return o5=function(){return e},e}function o4(){var e=(0,t0._)(["\n  query DeploymentsNewDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentsNewDeploymentRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return o4=function(){return e},e}function o8(){var e=(0,t0._)(["\n  query DeploymentsPaneIntro($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n        }\n        ...DeploymentsNewDeploymentRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return o8=function(){return e},e}function o6(){var e=(0,t0._)(["\n  query UserDeploymentCount {\n    currentUser {\n      id\n      hostingDeployments(input: { count: 3 }) {\n        items {\n          id\n        }\n      }\n    }\n  }\n"]);return o6=function(){return e},e}e.s(["Settings",()=>o1],251299);var o7={},o9=(0,t1.gql)(o5()),se=(0,t1.gql)(o4(),o9);(0,t1.gql)(o8(),o9);var st=(0,t1.gql)(o6()),sn=e.i(917255),sr=e.i(965097),si=e.i(706323),sa=e.i(95136),so=e.i(947820),ss=e.i(597865),sl=((o={}).NO_REMOTE="NO_REMOTE",o.UNPUSHED_BRANCH="UNPUSHED_BRANCH",o.UNCOMMITTED_CHANGES="UNCOMMITTED_CHANGES",o.UNPUSHED_COMMITS="UNPUSHED_COMMITS",o),su=e.i(988105),sc=e.i(479373),sd=e.i(197486),sf=e.i(365692),sp=e.i(137737),sh=e.i(342008),sm=e.i(942859),sg=e.i(487517),sv=e.i(648518),sx=e.i(62279),sy=e.i(546345),sb=e.i(802436),sw=e.i(620365),s_=e.i(398594),sk=e.i(315315),sS=e.i(304484),sC=e.i(652742);function sj(e){var t=e.isOpen,n=e.onToggle,r=e.ports,i=e.openNetworkingPane,a=e.openSecretsPane,o=e.replId,s=e.provider,l=e.setProvider,u=e.onError,c=e.initialSecretsSyncExpanded,d=e.machineConfig,f=e.setMachineConfig,p=e.onEditAutoscaleConfig,h=e.appType,m=e.onAppTypeChanged,g=e.recommendedProvider,w=e.runCommandError,S=e.publicDirError,C=e.crontabError,j=e.timezoneError,T=e.setTimeoutValueError,E=e.buildCommand,R=e.setBuildCommand,I=e.runCommand,A=e.setRunCommand,P=e.publicDir,D=e.setPublicDir,O=e.timezone,M=e.setTimezone,L=e.crontab,B=e.setCrontab,V=e.timeoutValue,F=e.setTimeoutValue,U=e.timeoutUnits,G=e.setTimeoutUnits,$=e.envVars,H=e.ignoredSecrets,z=e.addAnEnvVar,W=e.updateEnvVarName,q=e.updateEnvVarValue,Y=e.removeEnvVar,Q=e.optOut,X=e.optIn,Z=e.syncToWorkspace,ee=e.optionsLoading,et=e.queryLoading,er=e.baseDisableState,ea=e.envVarKeys,eo=e.editReplSecretsAuthorization,es=e.editDeploySecretAuthorization,el=e.devSecrets,eu=e.orgId,ec=(0,x._)((0,b.useState)(!1),2),ed=ec[0],ef=ec[1],ep=(0,x._)((0,b.useState)(!1),2),eh=ep[0],em=ep[1],eg=(0,x._)((0,b.useState)(!1),2),ev=eg[0],ex=eg[1],ey=(0,x._)((0,b.useState)(!1),2),eb=ey[0],ew=ey[1],e_=(0,ok.useIsAgentStackRepl)().isAgentStackRepl,ek=[_.HostingBuildProvider.Gce,_.HostingBuildProvider.AzureVm,_.HostingBuildProvider.CloudRun,_.HostingBuildProvider.AzureContainerApp].includes(s),eS=!e_&&h!==_.DeployHostingBuildAppType.Static,eC=!e_&&(s===_.HostingBuildProvider.Gce||s===_.HostingBuildProvider.AzureVm),ej=!e_&&h===_.DeployHostingBuildAppType.Static,eT=s===_.HostingBuildProvider.Cron,eE=h===_.DeployHostingBuildAppType.Server||h===_.DeployHostingBuildAppType.CloudRun;(0,b.useEffect)(function(){var e=!!(w||S||C||j);em(ed),ex(e),(ed||e)&&!eb&&!t&&n(),ew(ed||e)},[s,ed,t,n,eb,w,S,C,j]);var eR=(0,x._)((0,b.useState)(!1),2),eI=eR[0],eA=eR[1];return(0,y.jsxs)(ei.View,{className:sC.default.container,children:[(0,y.jsxs)(ei.View,{row:!0,justify:"space-between",align:"center",p:8,className:sC.default.clickable,onClick:n,children:[(0,y.jsxs)(ei.View,{gap:4,style:{flex:1,minWidth:0},children:[(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",children:[(0,y.jsx)(en.Text,{children:"Adjust settings"}),ev?(0,y.jsx)(sh.default,{size:16,color:K.colormap.negative.default}):null,eh?(0,y.jsx)(k.default,{size:16,color:K.colormap.warning.strongest}):null]}),(0,y.jsx)(en.Text,{color:"dimmer",variant:"small",multiline:!0,children:"Manually configure machine settings, secrets, build commands, ports, and more."})]}),(0,y.jsx)(J.IconButton,{alt:t?"Hide settings":"Show settings",onClick:n,children:t?(0,y.jsx)(n6.default,{color:K.tokens.foregroundDimmer}):(0,y.jsx)(n7.default,{color:K.tokens.foregroundDimmer})})]}),(0,y.jsxs)(ei.View,{p:8,gap:4,className:t?sC.default.contentBorder:sC.default.hiddenContent,children:[e_?null:(0,y.jsx)(sg.default,{provider:s,setProvider:l,recommendedProvider:g}),ek?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ei.View,{className:sC.default.sectionDivider}),(0,y.jsx)(sy.default,{provider:s,machineConfig:d,setMachineConfig:f,onError:u,onEditAutoscaleConfig:p})]}):null,eT?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ei.View,{className:sC.default.sectionDivider}),(0,y.jsx)(ei.View,{gap:4,children:(0,y.jsx)(s_.ScheduledMachineConfiguration,{crontab:L,setCrontab:B,crontabError:C,timezone:O,setTimezone:M,timezoneError:j,timeoutValue:V,setTimeoutValue:F,timeoutUnits:U,setTimeoutUnits:G,setTimeoutValueError:T,loading:ee})})]}):null,ej?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ei.View,{className:sC.default.sectionDivider}),(0,y.jsx)(sb.PublicDirectorySection,{value:P,onChange:D,error:S})]}):null,e_?null:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ei.View,{className:sC.default.sectionDivider}),(0,y.jsx)(sm.BuildCommandSection,{value:E,onChange:R})]}),eS?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ei.View,{className:sC.default.sectionDivider}),(0,y.jsx)(sw.RunCommandSection,{value:I,onChange:A,error:w})]}):null,(0,y.jsx)(function(){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ei.View,{className:sC.default.sectionDivider}),(0,y.jsx)(rA.AccordionItem,{headerContent:(0,y.jsxs)(ei.View,{style:{flex:1,minWidth:0},gap:4,children:[(0,y.jsx)(en.Text,{children:"Deployment secrets"}),(0,y.jsxs)(en.Text,{color:"dimmer",variant:"small",multiline:!0,children:["Private keys your apps use to access APIs and services."," ",a?(0,y.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),a()},style:{color:"var(--color-primary-default)"},children:"Manage your development secrets"}):null]}),eu?(0,y.jsx)(tQ.StatusBanner,{icon:(0,y.jsx)(tL.default,{}),css:sC.default.statusBanner,colorway:"primary",text:"Secrets now sync automatically with your team's deployments. "+"Deployment secrets added before ".concat((0,sk.formatDateTime)(N.SYNCING_SECRETS_ROLLOUT_DATE.toISOString())," ")+"remain unchanged to avoid disrupting existing workflows. Manage syncing below."}):null]}),expanded:eI,onClick:function(){eA(!eI)},children:(0,y.jsx)(ei.View,{pt:8,children:(0,y.jsx)(sv.DeploymentSecretsSection,{envVars:$,envVarKeys:ea,updateEnvVarName:W,updateEnvVarValue:q,removeEnvVar:Y,addAnEnvVar:z,baseDisableState:er,devSecrets:el,ignoredSecrets:H,editReplSecretsAuthorization:eo,editDeploySecretAuthorization:es,optOut:Q,optIn:X,syncToWorkspace:Z,queryLoading:et,replId:o,initialSecretsSyncExpanded:c})})})]})},{}),eE?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ei.View,{className:sC.default.sectionDivider}),r&&i?(0,y.jsx)(sS.PortConfiguration,{ports:r,openNetworkingPane:i,onWarningChange:ef}):null]}):null,eC?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ei.View,{className:sC.default.sectionDivider}),(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsxs)(ei.View,{gap:4,children:[(0,y.jsx)(en.Text,{children:"App type"}),(0,y.jsx)(en.Text,{variant:"small",color:"dimmer",children:"Configure your app based on whether it needs to serve traffic from the web."})]}),(0,y.jsx)(sp.DeploymentTargetSelector,{appType:h,onChange:m})]})]}):null,(0,y.jsx)(ei.View,{className:sC.default.sectionDivider}),(0,y.jsx)(sx.default,{})]})]})}var sT=e.i(332822),sE=e.i(255615),sR=e.i(96250);function sI(e){return(0,y.jsx)(rt.default,(0,eR._)((0,eE._)({},e),{children:(0,y.jsx)("path",{fillRule:"evenodd",d:"M5 3.75c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h14c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25H5ZM2.25 5A2.75 2.75 0 0 1 5 2.25h14A2.75 2.75 0 0 1 21.75 5v14A2.75 2.75 0 0 1 19 21.75H5A2.75 2.75 0 0 1 2.25 19V5ZM12 7.25a.75.75 0 0 1 .75.75v3.25H16a.75.75 0 0 1 0 1.5h-3.25V16a.75.75 0 0 1-1.5 0v-3.25H8a.75.75 0 0 1 0-1.5h3.25V8a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}var sA=e.i(591936),sP=e.i(995683),sD=e.i(54073),sO=e.i(228108),sN=e.i(721697),sM=["./assets/images/icon.png","./assets/images/favicon.png","./assets/images/splash-icon.png"],sL=["image/png"];function sB(e){var t=e.iconPath,n=e.onIconSaved,r=e.onAskAgent,i=e.onError,a=e.isEditing,o=(0,M.useFsService)(),s=(0,b.useRef)(null),l=(0,x._)((0,b.useState)(!1),2),u=l[0],c=l[1],d=(0,x._)((0,b.useState)(0),2),f=d[0],p=d[1],h=(0,b.useCallback)(function(){var e;null==(e=s.current)||e.click()},[]),m=(0,b.useCallback)(function(e){return(0,L._)(function(){var t,r,a,l,u,d,f,h,m,g,x;return(0,V._)(this,function(y){switch(y.label){case 0:if(r=null==(t=e.target.files)?void 0:t[0],s.current&&(s.current.value=""),!r)return[2];if(!sL.includes(r.type))return i("Please upload a PNG image"),[2];if(r.size>1048576)return i("Image must be under 1MB"),[2];c(!0),y.label=1;case 1:var b;return y.trys.push([1,12,13,14]),[4,(b=r,new Promise(function(e,t){var n=new Image,r=URL.createObjectURL(b);n.onload=function(){URL.revokeObjectURL(r),e()},n.onerror=function(){URL.revokeObjectURL(r),t(Error("Failed to load image"))},n.src=r}))];case 2:return y.sent(),l=sP.default.from,[4,r.arrayBuffer()];case 3:a=l.apply(sP.default,[y.sent()]),u=!0,d=!1,f=void 0,y.label=4;case 4:y.trys.push([4,9,10,11]),h=sM[Symbol.iterator](),y.label=5;case 5:if(u=(m=h.next()).done)return[3,8];return g=m.value,[4,o.writeFile(g,a)];case 6:if(y.sent().error)return i("Failed to save icon. Please try again."),[2];y.label=7;case 7:return u=!0,[3,5];case 8:return[3,11];case 9:return x=y.sent(),d=!0,f=x,[3,11];case 10:try{u||null==h.return||h.return()}finally{if(d)throw f}return[7];case 11:return n({icon:sM[0],favicon:sM[1],splash:sM[2]}),p(function(e){return e+1}),[3,14];case 12:return y.sent(),i("Failed to save icon. Please try again."),[3,14];case 13:return c(!1),[7];case 14:return[2]}})})()},[o,i,n]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("input",{ref:s,type:"file",accept:sL.join(","),onChange:m,className:sN.default.hiddenInput,"aria-label":"Upload app icon"}),(0,y.jsxs)(rO.PopupMenu,{trigger:(0,y.jsx)(sE.Button,{"aria-label":"Edit app icon",isDisabled:u,clsx:sN.default.iconTrigger,style:{opacity:u?.5:1},children:(0,y.jsxs)(ei.View,{clsx:sN.default.iconWrapper,children:[(0,y.jsx)(sV,{fs:o,iconPath:t},f),(0,y.jsx)(ei.View,{br:"full",justify:"center",align:"center",clsx:[sN.default.editBadge,void 0!==a&&a&&sN.default.editBadgeVisible],children:(0,y.jsx)(H.default,{size:12})})]})}),children:[(0,y.jsx)(rO.MenuItem,{label:"Upload your own",icon:(0,y.jsx)(sA.default,{}),onAction:h,isDisabled:u}),r?(0,y.jsx)(rO.MenuItem,{label:"Ask Agent to edit",icon:(0,y.jsx)(sR.default,{}),onAction:r,isDisabled:u}):null]})]})}function sV(e){var t=e.fs,n=e.iconPath,r=(0,sD.useFileAsDataUrl)(t,n),i=r.dataSrc,a=r.isLoading;return a||i?(0,y.jsx)(sO.ReplIconWithPlaceholder,{isLoading:a,iconUrl:null!=i?i:void 0,alt:"App icon",size:64}):(0,y.jsx)(Q.ShadesSurface,{style:{width:64,height:64,borderRadius:8},children:(0,y.jsx)(ei.View,{grow:!0,justify:"center",align:"center",children:(0,y.jsx)(sI,{size:20,color:K.tokens.accentPrimaryDefault})})})}var sF=e.i(252204),sU=e.i(155119),sG=e.i(902379),s$=e.i(813675),sH=e.i(909478);function sz(){var e=(0,M.usePortsService)(),t=(0,sH.useOpenedAndForwardedPorts)(e);return(0,b.useMemo)(function(){var e,n=t.find(function(e){return 5e3===e.configuration.localPort});return null!=(e=null==n?void 0:n.configuration.externalPort)?e:null},[t])}var sW=e.i(91720);function sq(e){var t,n,r=e.onViewAction,i=(t=(0,sG.useDevUrl)().url,n=sz(),(0,b.useMemo)(function(){return t&&n?(0,s$.addPortToUrl)(t,n).toString():null},[t,n])),a=sz(),o=(0,iS.useIsInBonsaiWebview)();return i&&a?(0,y.jsxs)(ei.View,{gap:4,children:[(0,y.jsx)(en.Text,{children:"Landing page preview"}),(0,y.jsx)(en.Text,{variant:"small",color:"dimmer",children:"Your landing page will be accessible at the primary URL."}),(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",children:[(0,y.jsx)(Z.Button,{size:"small",variant:"outlined",iconLeft:(0,y.jsx)(sU.default,{}),text:"Open Preview",onClick:function(){r({type:C.ViewActionType.OpenPane,payload:{type:"webview",data:{ports:{type:"external",port:a}}}})}}),(0,y.jsx)(sW.ButtonLink,{size:"small",variant:"outlined",href:i,target:"_blank",iconLeft:(0,y.jsx)(sF.default,{}),text:o?"Open in browser":"Open in new tab",noNextLink:!0,tabIndex:0})]})]}):(0,y.jsxs)(ei.View,{gap:4,children:[(0,y.jsx)(en.Text,{children:"Landing page preview"}),(0,y.jsx)(en.Text,{variant:"small",color:"dimmer",children:"Preview unavailable. Make sure your app is running and has an open web server port."})]})}var sK=e.i(477074),sY=e.i(343446);function sQ(e){var t=e.repl,n=e.onViewAction;return e.isExpoStackWithLaunchEnabled&&t?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(sX,{repl:t,onViewAction:n}),(0,y.jsx)(sq,{onViewAction:n})]}):null}function sX(e){var t,n,r,i=e.repl,a=(0,sK.useAppJson)(),o=a.appName,s=a.iconPath,l=a.loading,u=a.saveAppName,c=a.saveAppIcon,d=(0,x._)((0,b.useState)(!1),2),f=d[0],p=d[1],h=(0,x._)((0,b.useState)(""),2),m=h[0],g=h[1],w=(0,x._)((0,b.useState)(null),2),_=w[0],k=w[1],S=(0,b.useRef)(null),C=(0,b.useRef)(!1),j=null!=o?o:i.title,T=function(){g(j),p(!0),k(null)},E=(0,b.useCallback)(function(){p(!1),k(null)},[]),R=(0,b.useCallback)(function(){return(0,L._)(function(){var e;return(0,V._)(this,function(t){switch(t.label){case 0:if(k(null),!(m.trim()&&m!==j))return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,u(m.trim())];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),k((0,B._)(e,Error)&&e.message.includes("App name must contain at least one letter")?e.message:"Failed to save app name. Please try again."),[2];case 4:return p(!1),[2]}})})()},[m,j,u]),I=(0,b.useCallback)(function(){return(0,L._)(function(){return(0,V._)(this,function(e){switch(e.label){case 0:if(!f||C.current)return[2];C.current=!0,e.label=1;case 1:return e.trys.push([1,,3,4]),[4,R()];case 2:return e.sent(),[3,4];case 3:return C.current=!1,[7];case 4:return[2]}})})()},[R,f]),A=(t=(0,b.useCallback)(function(){f&&I()},[f,I]),n=(0,b.useRef)(null),r=(0,b.useRef)(t),(0,b.useEffect)(function(){r.current=t},[t]),(0,b.useEffect)(function(){var e=function(e){if(e.isPrimary){var t=n.current,i=e.target;!t||t.contains(i)||r.current(e)}};return document.addEventListener("pointerdown",e,!0),function(){document.removeEventListener("pointerdown",e,!0)}},[]),n),P=(0,b.useCallback)(function(e){if(f){var t=A.current,n=e.relatedTarget;t&&n&&t.contains(n)||I()}},[A,f,I]),D=(0,b.useCallback)(function(e){return(0,L._)(function(){return(0,V._)(this,function(t){switch(t.label){case 0:k(null),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,c(e)];case 2:return t.sent(),[3,4];case 3:return t.sent(),k("Failed to update app icon. Please try again."),[3,4];case 4:return[2]}})})()},[c]),O=(0,b.useCallback)(function(e){k(e)},[]);return((0,b.useEffect)(function(){f&&S.current&&(S.current.focus(),S.current.select())},[f]),l)?null:(0,y.jsxs)(ei.View,{gap:4,children:[(0,y.jsx)(en.Text,{children:"App icon and name"}),(0,y.jsxs)(ei.View,{innerRef:A,row:!0,gap:16,align:"center",onBlurCapture:P,children:[(0,y.jsx)(sB,{iconPath:s,onIconSaved:D,onError:O,isEditing:f}),(0,y.jsx)(ei.View,{row:!0,gap:8,align:"center",justify:"space-between",onClick:f?void 0:T,clsx:[sY.default.titleRow,!f&&sY.default.editable],children:f?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(e7.Input,{ref:S,value:m,onChange:function(e){return g(e.target.value)},onKeyDown:function(e){"Enter"===e.key?I():"Escape"===e.key&&E()},"aria-label":"Edit app name",clsx:sY.default.titleInput}),(0,y.jsx)(Z.Button,{size:"xsmall",colorway:"red",onClick:E,text:"Cancel",clsx:sY.default.cancelButton})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ei.View,{clsx:sY.default.titleText,children:(0,y.jsx)(en.Text,{variant:"subheadDefault",multiline:!1,showTooltipOnTruncate:!0,children:j})}),(0,y.jsx)(Z.Button,{size:"xsmall",onClick:T,iconLeft:(0,y.jsx)(H.default,{}),text:"Edit"})]})})]}),_?(0,y.jsx)(en.Text,{variant:"small",clsx:sY.default.errorText,children:_}):null]})}var sZ=e.i(585225),sJ=e.i(517681);function s0(){var e=(0,sZ.useIsShadesSupported)(),t=(0,y.jsxs)(ei.View,{row:!0,gap:12,align:"start",children:[(0,y.jsx)(ei.View,{pt:3,children:(0,y.jsx)(P.default,{})}),(0,y.jsxs)(ei.View,{grow:!0,shrink:!0,gap:2,pr:6,children:[(0,y.jsx)(en.Text,{clsx:sJ.default.title,children:"What happens when you publish?"}),(0,y.jsx)(en.Text,{multiline:!0,children:"Your mobile app and landing page goes live. The landing page has a QR to test your app on Expo Go. You can submit to the App Store afterwards."})]})]});return e?(0,y.jsx)(Q.ShadesSurface,{elevate:"1x",px:16,py:12,colorShade:"notice",clsx:sJ.default.container,children:t}):(0,y.jsx)(Q.ShadesSurface,{px:16,py:12,clsx:[sJ.default.container,sJ.default.surfaceBgColor],children:t})}var s1=e.i(823166),s2=e.i(147255),s3=e.i(912467),s5=e.i(475868),s4=e.i(976191),s8=e.i(968783),s6=e.i(574203),s7=e.i(702868),s9=e.i(845228),le=e.i(293265),lt=e.i(552780),ln=e.i(878284),lr=e.i(485273),li=e.i(481682),la=e.i(182409),lo=e.i(220743),ls=e.i(827305),ll=e.i(341126),lu=e.i(549645),lc=e.i(334028),ld=e.i(552144);function lf(e){var t=e.onClick,n=(0,s8.useCurrentUserStoredOrgContext)(),r=n.orgRole,i=n.orgId,a=n.orgSlug;switch(r){case _.SystemOrgGroupType.SystemAdmins:return(0,y.jsx)(ei.View,{p:8,children:(0,y.jsx)(ld.StatusBannerButton,(0,eE._)({iconLeft:(0,y.jsx)(lu.default,{}),text:"Your team has a failed payment. Please update your team's payment method to continue using AI services.",colorway:"negative",onClick:null!=t?t:function(){}},!t&&{href:"/orb-customer-portal/org/".concat(i),target:"_blank"}))});case _.SystemOrgGroupType.SystemMembers:case _.SystemOrgGroupType.SystemGuests:case _.SystemOrgGroupType.SystemViewers:return(0,y.jsx)(ei.View,{p:8,children:(0,y.jsx)(ld.StatusBannerButton,(0,eE._)({iconLeft:(0,y.jsx)(lc.default,{}),text:"Your team has a failed payment. Please contact your team admins to address outstanding invoices to continue using AI services.",colorway:"negative",onClick:null!=t?t:function(){}},!t&&{href:"/t/".concat(a,"/members"),target:"_blank"}))});default:return(0,y.jsx)(ei.View,{p:8,children:(0,y.jsx)(ld.StatusBannerButton,(0,eE._)({iconLeft:(0,y.jsx)(lu.default,{}),text:"You have a failed payment. Please update your payment method to continue using AI services.",colorway:"negative",onClick:null!=t?t:function(){}},!t&&{href:"/account#billing",target:"_blank"}))})}}var lp=e.i(702069),lh=(0,Y.cssRecord)({cta:[X.rcss.width("100%"),X.rcss.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[X.rcss.colWithGap(8),X.rcss.align.center],ctaStatusBanner:[X.rcss.textAlign.left],disabledBanner:[X.rcss.py(6),{alignSelf:"center"}]});function lm(e){var t=e.provider,n=e.isDeployable,r=e.isDeployableCode,i=e.isDeployableExplanation,a=e.loading,o=e.refetchDeployabilityQueryData,s=e.setShowPaymentMethodForm,l=e.isPaymentMethodFormShown,u=e.setShowSupportForm,c=e.replId,d=e.org,f=e.onViewAction,p=(0,lr.useRouter)(),h=(0,iS.isInBonsaiWebview)(p),m=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOrg:!1}).isOrg,t=(0,lr.useRouter)(),n=(0,iS.doesBonsaiWebviewSupportFeature)(t,"stripePayment");return(0,b.useMemo)(function(){return n&&!e?[_.ReplAuthorizationCode.RequiresUnbanning]:[_.ReplAuthorizationCode.RequiresUnbanning,_.ReplAuthorizationCode.RequiresPaymentMethod,_.ReplAuthorizationCode.PaymentDelinquent,_.ReplAuthorizationCode.InsufficientBudget]},[n,e])}({isOrg:null!=d}),g=(0,oU.getCurrentUrl)({deploymentPane:"true"}),x=function(){f({type:C.ViewActionType.OpenPane,payload:{type:"git"}})};if(e.blockDeploymentForMissingGitRemote)if(e.blockDeploymentForMissingGitRemote===sl.NO_REMOTE)return(0,y.jsx)(Z.Button,{text:"Git remote required. Add a remote repository to publish your app",colorway:"warning",iconRight:(0,y.jsx)(lo.default,{}),css:lh.ctaStatusBanner,onClick:x});else{if(e.blockDeploymentForMissingGitRemote===sl.UNPUSHED_BRANCH)return(0,y.jsx)(Z.Button,{text:"Your branch is not pushed. Push your branch to publish your app",colorway:"warning",iconRight:(0,y.jsx)(lo.default,{}),css:lh.ctaStatusBanner,onClick:x});if(e.blockDeploymentForMissingGitRemote===sl.UNCOMMITTED_CHANGES)return(0,y.jsx)(Z.Button,{colorway:"warning",text:"You have uncommitted changes. Commit and push your changes to publish",iconRight:(0,y.jsx)(lo.default,{}),css:lh.ctaStatusBanner,onClick:x});if(e.blockDeploymentForMissingGitRemote===sl.UNPUSHED_COMMITS)return(0,y.jsx)(Z.Button,{text:"You have unpushed commits. Push your commits to publish your app",colorway:"warning",iconRight:(0,y.jsx)(lo.default,{}),css:lh.ctaStatusBanner,onClick:x});(0,U.default)(e.blockDeploymentForMissingGitRemote)}if(!n&&h&&m.includes(r))return(0,y.jsx)(tQ.StatusBanner,{text:i,colorway:"grey",css:lh.disabledBanner});var w=function(){if(d){var e=(0,ll.orgLinks)(d).settings.href.toString()+"/billing";window.open(e,"_blank");return}s()};switch(r){case _.ReplAuthorizationCode.RequiresActiveSubscription:return(0,y.jsx)(ei.View,{css:lh.ctaContainer,children:(0,y.jsx)(oF.default,{context:"workspace_hosting_pane",text:"Upgrade your plan to publish",css:lh.cta,colorway:"primary",variant:"default",disabled:l,onPlanCheckoutComplete:o,modalHeadingText:"Upgrade your plan to publish",redirectPath:g})});case _.ReplAuthorizationCode.RequiresPaymentMethodOrSubscription:return(0,y.jsxs)(ei.View,{css:lh.ctaContainer,children:[(0,y.jsx)(oF.default,{context:"workspace_hosting_pane",text:"Upgrade your plan to publish",css:lh.cta,colorway:"primary",variant:"default",disabled:l,onPlanCheckoutComplete:o,modalHeadingText:"Upgrade your plan to publish",redirectPath:g}),(0,y.jsx)(Z.Button,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:lh.cta,disabled:l,loading:a,iconLeft:(0,y.jsx)(li.default,{}),onClick:w})]});case _.ReplAuthorizationCode.RequiresSmsVerification:return(0,y.jsx)(ls.default,{context:_.SmsVerificationContext.Deployments,onSuccess:o});case _.ReplAuthorizationCode.RequiresPaymentMethod:return(0,y.jsx)(Z.Button,{colorway:"primary",text:"Add a payment method",css:lh.cta,disabled:l,loading:a,iconLeft:(0,y.jsx)(li.default,{}),onClick:w});case _.ReplAuthorizationCode.PaymentDelinquent:return(0,y.jsx)(lf,{onClick:w});case _.ReplAuthorizationCode.RequiresUnbanning:case _.ReplAuthorizationCode.RequiresUnbanningFreeTierQuota:return(0,y.jsx)(ld.StatusBannerButton,{text:"Your account currently has restrictions on publishing. We're here to help! Please reach out to support@replit.com for assistance.",colorway:"warning",iconLeft:(0,y.jsx)(k.default,{}),css:lh.ctaStatusBanner,onClick:function(){return u()}});case _.ReplAuthorizationCode.InsufficientBudget:return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(tQ.StatusBanner,{text:"You've reached your monthly usage budget. Increase your budget to continue publishing.",colorway:"warning",icon:(0,y.jsx)(k.default,{}),css:lh.ctaStatusBanner}),(0,y.jsx)(lp.UsageBudget,{onUpdateSuccess:o,replId:c})]});case _.ReplAuthorizationCode.FeatureDisabled:case _.ReplAuthorizationCode.FeatureUnsupportedForReplitTeams:case _.ReplAuthorizationCode.FeatureUnsupportedForTeamsEdu:case _.ReplAuthorizationCode.FeatureUnsupportedForTeamsFree:case _.ReplAuthorizationCode.FeatureUnsupportedForTeamsPro:case _.ReplAuthorizationCode.InsufficientPermissions:case _.ReplAuthorizationCode.InsufficientQuota:case _.ReplAuthorizationCode.RequiresActiveTeamsSubscription:case _.ReplAuthorizationCode.RequiresEmailVerification:if(r===_.ReplAuthorizationCode.InsufficientQuota&&"static"===t)return(0,y.jsxs)(ei.View,{css:lh.ctaContainer,children:[(0,y.jsx)(tQ.StatusBanner,{text:"You have reached the maximum number of Static published apps available on your plan.",colorway:"grey",css:lh.disabledBanner}),(0,y.jsx)(oF.default,{context:"workspace_hosting_pane",text:"Upgrade your plan to publish",css:lh.cta,colorway:"primary",variant:"default",disabled:l,onPlanCheckoutComplete:o,modalHeadingText:"Upgrade your plan to publish"})]});return(0,y.jsx)(tQ.StatusBanner,{text:i,colorway:"grey",css:lh.disabledBanner});case _.ReplAuthorizationCode.Authorized:case _.ReplAuthorizationCode.AuthorizedQuota:return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(Z.Button,{colorway:"primary",onClick:e.handleDeployClick,iconLeft:e.optionsLoading||e.mode===ow.DeploymentMode.Preparing?(0,y.jsx)(z.default,{}):(0,y.jsx)(la.default,{}),text:e.mode===ow.DeploymentMode.Preparing&&"Preparing..."||e.optionsLoading&&"Fetching options..."||"Publish",disabled:e.disabled})});case _.ReplAuthorizationCode.RequiresEnterprisePlan:return;default:(0,U.default)(r)}}var lg=e.i(295745),lv=e.i(870078),lx=e.i(57354),ly=e.i(264646),lb=e.i(531603),lw=e.i(694772);function l_(e){var t=(0,M.useDotReplitService)(),n=(0,M.useDeploymentProvider)({onError:e.onError,dotReplitService:t}),r=n.recommendedProvider,i=n.loading,a=e.initialView===C.Views.ReservedVMTierSelection?_.HostingBuildProvider.Gce:null!=r?r:_.HostingBuildProvider.CloudRun,o=a===_.HostingBuildProvider.AzureContainerApp||a===_.HostingBuildProvider.AzureVm,s=(0,M.useFreeTierCloudServices)(),l=(0,oA.useAutoscaleConfigurations)({isAzureDeployment:o,isFreeUser:s,onError:e.onError}),u=l.defaultMachineConfiguration,c=l.loading,d=(0,s1.useReservedVmConfigurations)({provider:a,skip:i,onError:e.onError}),f=d.defaultMachineConfiguration,p=d.loading,h=(0,sf.getRecommendedProviderMachineConfiguration)({recommendedProvider:r,defaultAutoscaleConfiguration:u,defaultRvmMachineConfiguration:f});return!e.initialView&&i||c||p?(0,y.jsx)(j.PaneSection,{centered:!0,children:(0,y.jsx)(T.ViewLoading,{})}):(0,y.jsx)(lk,(0,eR._)((0,eE._)({},e),{initialSelectedProvider:a,recommendedProvider:r,defaultMachine:null!=h?h:null,isAzureDeployment:o,isFreeUser:s}))}function lk(e){var t,n,r,i,a,o,s,l,u,c=e.deploymentId,d=e.replId,f=e.onError,p=e.onDeploy,h=e.onViewAction,m=e.initialSelectedProvider,g=e.recommendedProvider,w=e.hasAgentSession,k=e.defaultMachine,S=e.isAzureDeployment,E=e.isFreeUser,R=e.isExpoStackWithLaunchEnabled,I=(0,M.useFsService)(),A=(0,M.useSecretsService)(),P=(0,M.useDotReplitService)(),D=(0,M.usePortsService)(),O=(0,eb.useFlag)({controlName:"flag-make-more-money",default:!1}),N=(0,x._)((0,b.useState)(!1),2),B=N[0],F=N[1],U=(0,x._)((0,b.useState)(!1),2),G=U[0],$=U[1],H=(t={variables:{replId:d},fetchPolicy:"no-cache",onError:function(e){return f(e.message)}},n=(0,eE._)({},o7,t),t2.useQuery(se,n)),z=H.data,W=H.loading,q=(r=(0,eE._)({},o7,void 0),t2.useQuery(st,r)),K=q.data,Y=q.loading,X=(null==z?void 0:z.getRepl.__typename)==="Repl"?z.getRepl:null,ee=(null==X?void 0:X.suggestedUniqueSubdomain)||"",et=(0,sc.useStripeConnection)(),er=et.hasStripeSandboxConnection,ea=et.hasStripeConnection,eo=(0,x._)((0,b.useState)(null),2),es=eo[0],el=eo[1],eu=(0,s4.useDeploymentOptionsState)({deploymentId:c,replId:d,initialSubdomain:ee,initialProvider:m,initialMachineConfig:k,secrets:A,fs:I,dotReplit:P,onDeploy:p,onError:f,hasAgentSession:w,selectedFreeDomain:es}),ec=eu.mode,ed=eu.deployment,ef=eu.queryLoading,ep=eu.optionsLoading,eh=eu.isRedeploy,em=eu.editDeploySecretAuthorization,eg=eu.editReplSecretsAuthorization,ev=eu.editDeploymentSubdomainAuthorization,ex=eu.appType,ey=eu.subdomain,ew=eu.validSubdomain,e_=eu.buildCommand,ek=eu.runCommand,eC=eu.runCommandError,ej=eu.timezoneError,eT=eu.crontabError,eR=eu.envVars,eI=eu.timezone,eA=eu.crontab,eP=eu.timeoutValue,eD=eu.timeoutUnits,eO=eu.devSecrets,eN=eu.privatePassword,eM=eu.privatePasswordError,eL=eu.hasExistingPrivatePassword,eB=eu.orgId,eV=eu.publicDir,eF=eu.publicDirError,eU=eu.isPrivate,eG=eu.privacyMode,e$=eu.syncSandboxWithLive,eH=eu.ignoredSecrets,ez=eu.isOverwriteSecretsModalOpen,eW=eu.timeoutValueError,eq=eu.canCreateNeonProductionDatabaseStateLoading,eK=eu.isOverwritingSecrets,eY=eu.provider,eQ=eu.machineConfig,eX=eu.setAppType,eZ=eu.setSubdomain,eJ=eu.setValidSubdomain,e0=eu.setBuildCommand,e1=eu.setRunCommand,e2=eu.setRunCommandError,e3=eu.setTimezone,e5=eu.setTimezoneError,e4=eu.setCrontab,e8=eu.setCrontabError,e6=eu.setEnvVars,e7=eu.setPublicDir,e9=eu.setPublicDirError,te=eu.setTimeoutValue,tt=eu.setTimeoutUnits,tn=eu.setTimeoutValueError,tr=eu.setPrivacyMode,ti=eu.setPrivatePassword,ta=eu.setSyncSandboxWithLive,to=eu.setIgnoredSecrets,ts=eu.setIsOverwriteSecretsModalOpen,tl=eu.setProvider,tu=eu.setMachineConfig,tc=eu.createNeonProductionDatabaseState,td=eu.showDomainContactModal,tf=eu.setShowDomainContactModal,tp=eu.onAppTypeChanged,th=eu.onSubdomainBlur,tm=eu.addAnEnvVar,tg=eu.updateEnvVarName,tv=eu.updateEnvVarValue,tx=eu.removeEnvVar,ty=eu.handleDeployClick,tb=eu.handleDomainContactSubmit,tw=eu.optOut,t_=eu.optIn,tk=eu.syncToWorkspace,tS=eu.overwriteSecrets;(0,b.useEffect)(function(){e2(void 0),e9(void 0),e8(void 0),e5(void 0),tn(!1),eY===_.HostingBuildProvider.CloudRun||eY===_.HostingBuildProvider.AzureContainerApp?eX(_.DeployHostingBuildAppType.CloudRun):eY===_.HostingBuildProvider.Gce||eY===_.HostingBuildProvider.AzureVm?eX(_.DeployHostingBuildAppType.Server):eY===_.HostingBuildProvider.Static?eX(_.DeployHostingBuildAppType.Static):eY===_.HostingBuildProvider.Cron&&eX(_.DeployHostingBuildAppType.Cron)},[eY,eX,tu,e2,e9,e8,e5,tn]);var tC=(0,x._)((0,b.useState)(!1),2),tj=tC[0],tT=tC[1],tE=(0,x._)((0,b.useState)(!1),2),tR=tE[0],tI=tE[1],tA=(0,M.useDeploymentDeployability)(),tP=tA.getDeployabilityByProvider,tD=tA.refetch,tO=tP(eY,eU),tN=eh?tO.redeploy:tO.deploy,tM=tN.isAuthorized,tB=tN.code,tV=tN.message,tF=(0,s6.default)(eB),tU=(0,s8.useCurrentUserStoredOrgContext)().orgRole,tG=(0,ss.default)(function(e){return(0,L._)(function(){var t,n,r,i;return(0,V._)(this,function(a){switch(a.label){case 0:return[4,e.getRemotes()];case 1:if((n=a.sent()).error)return[2,{error:n.error}];if(!(n.remotes.size>0))return[2,{reason:"NO_REMOTE",error:null}];return[4,e.status()];case 2:if((r=a.sent()).error)return[2,{error:r.error}];if(!r.upstream)return[2,{reason:"UNPUSHED_BRANCH",error:null}];if(r.changes.length>0)return[2,{reason:"UNCOMMITTED_CHANGES",error:null}];if((null!=(i=null==(t=r.upstream)?void 0:t.ahead)?i:0)>0)return[2,{reason:"UNPUSHED_COMMITS",error:null}];return[2,{reason:null,error:null}]}})})()}),t$=(0,b.useMemo)(function(){return eB&&tF.requireGitRemoteBeforeDeployment&&tG&&!tG.error&&(!tF.adminOnlyGitRemoteBeforeDeploymentBypass||tU!==_.SystemOrgGroupType.SystemAdmins)?tG.reason:null},[eB,tF.requireGitRemoteBeforeDeployment,tF.adminOnlyGitRemoteBeforeDeploymentBypass,tU,tG]),tH=(0,ok.useIsAgentStackRepl)().isAgentStackRepl,tz=(0,le.useAgentStackPlatformType)().agentStackPlatformType,tW=tB!==_.ReplAuthorizationCode.RequiresActiveSubscription,tq=(0,x._)((0,b.useState)(!tW),2),tK=tq[0],tY=tq[1],tQ=!!(X&&(null==(i=X.owner)?void 0:i.__typename)==="Team"),tX=(0,lx.useFreeDomainClaimSection)({isAzureDeployment:S,isOrgRepl:tQ}),tZ=tX.showClaimSection,tJ=tX.loading,t0=tX.refetchFreeDomainCredit,t1=tX.hideClaimSection,t3=E&&!tM&&tB===_.ReplAuthorizationCode.InsufficientQuota,t5=E&&!tM&&tB===_.ReplAuthorizationCode.RequiresUnbanningFreeTierQuota,t4=eY!==_.HostingBuildProvider.Cron&&!(null==ed?void 0:ed.replitAppSubdomain)&&!tH,t8=eY!==_.HostingBuildProvider.Cron&&!tH&&tW&&!E,t6=null!=(u=null==K||null==(s=K.currentUser)||null==(o=s.hostingDeployments)||null==(a=o.items)?void 0:a.length)?u:0,t7=!tH&&!R&&!Y&&t6<2,t9=(0,s7.useShowAgentInbox)(d),ne=(0,eb.useFlag)({controlName:"flag-replit-badge-pill",default:!1}),nt=!!(0,s3.useIsSlackConnected)().connection,nn=tH&&tz===_.AgentStackPlatformType.Slack,nr=tH&&tz===_.AgentStackPlatformType.Telegram,ni=tH&&tz===_.AgentStackPlatformType.TimeBased,na=ef||ep||ec===ow.DeploymentMode.Preparing||eW,no=na||!tM||eq,ns=(0,s5.hasValidCronExpression)(eR),nl=(0,eb.useFlag)({controlName:"flag-deploy-without-agent-stack-connection",default:!1}),nu=!!(0,sd.useTelegramBotTokenSecret)(),nc=!!no||!!t4&&!ew||!!tH&&tz===_.AgentStackPlatformType.Slack&&!nt&&!nl||!!tH&&tz===_.AgentStackPlatformType.TimeBased&&!ns&&!nl||!!tH&&tz===_.AgentStackPlatformType.Telegram&&!nu&&!nl||!!O&&!!er&&!ea||!1,nd=eR.map(function(e){return e.name}),nf=(0,b.useCallback)(function(){return(0,L._)(function(){return(0,V._)(this,function(e){switch(e.label){case 0:return[4,tD()];case 1:return e.sent(),[2]}})})()},[tD]),np=X&&(null==(l=X.owner)?void 0:l.__typename)==="Team"?{id:X.owner.id.toString(),slug:X.owner.username}:void 0,nh=function(){if(!tH)return"Publish your app";switch(tz){case _.AgentStackPlatformType.Slack:return"Publish to Slack";case _.AgentStackPlatformType.Telegram:return"Publish to Telegram";case _.AgentStackPlatformType.TimeBased:return"Publish Automation";default:return"Publish your app"}}(),nm=function(){if(!tH)return null;switch(tz){case _.AgentStackPlatformType.Slack:return"Ready to put your agent to work? Publish it to your Slack workspace in just a few steps.";case _.AgentStackPlatformType.Telegram:return"Ready to put your agent to work? Publish it to your Telegram chat in just a few steps.";case _.AgentStackPlatformType.TimeBased:return"Ready to put your agent to work? Set a time-based trigger to automate your agent.";default:return null}}();if(W)return(0,y.jsx)(T.ViewLoading,{});if(t3){var ng="".concat(window.location.pathname,"?deploymentPane=true");return(0,y.jsx)(j.PaneSection,{children:(0,y.jsxs)(ei.View,{gap:24,className:lw.default.container,children:[(0,y.jsx)(en.Text,{variant:"headerDefault",children:nh}),t4?(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsxs)(ei.View,{gap:4,children:[(0,y.jsxs)(ei.View,{row:!0,gap:4,align:"center",children:[(0,y.jsx)(tL.default,{size:16}),(0,y.jsx)(en.Text,{children:"Primary URL"})]}),(0,y.jsx)(en.Text,{color:"dimmer",variant:"small",children:"You can add your own custom domain after publishing your app."})]}),(0,y.jsx)(sp.PrimaryDomainInput,{id:"primaryDomain",subdomain:ey,provider:eY,deploymentId:c||void 0,onChange:eZ,onBlur:th,updateValidity:eJ,disabled:na})]})}):null,(0,y.jsx)(oF.default,{context:"free_tier_publish_upsell",variant:"default",colorway:"primary",text:"Upgrade to publish",disabled:na,onPlanCheckoutComplete:function(){t0(),nf()},redirectPath:ng})]})})}if(t5){var nv="".concat(window.location.pathname,"?deploymentPane=true");return(0,y.jsx)(j.PaneSection,{children:(0,y.jsxs)(ei.View,{gap:24,className:lw.default.container,children:[(0,y.jsx)(en.Text,{variant:"headerDefault",children:nh}),(0,y.jsx)(Q.ShadesSurface,{p:16,className:lw.default.cloudBudgetUpsell,elevate:!1,children:(0,y.jsxs)(ei.View,{gap:16,children:[(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsx)(en.Text,{className:lw.default.cloudBudgetUpsellHeader,children:"You've used up your free Cloud credits"}),(0,y.jsx)(en.Text,{children:"Upgrade for unlimited publishing, powerful models, and more."})]}),(0,y.jsxs)(ei.View,{gap:12,children:[(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",children:[(0,y.jsx)(si.default,{size:16}),(0,y.jsx)(en.Text,{children:"Monthly credits for Replit Agent"})]}),(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",children:[(0,y.jsx)(sa.default,{size:16}),(0,y.jsx)(en.Text,{children:'Remove the "Made with Replit" badge'})]}),(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",children:[(0,y.jsx)(rr.default,{size:16}),(0,y.jsx)(en.Text,{children:"Access powerful models and more"})]})]})]})}),(0,y.jsx)(oF.default,{context:"free_tier_cloud_budget_publish_upsell",text:"Upgrade to ".concat(oV.corePlanName),variant:"default",colorway:"primary",redirectPath:nv,onPlanCheckoutComplete:function(){t0(),nf()}})]})})}return B?(0,y.jsx)(ln.AutoscaleConfigEditor,{isAzureDeployment:S,isFreeUser:E,onError:f,onConfirm:function(e){tu(e),F(!1)},onCancel:function(){return F(!1)}}):(0,y.jsxs)(j.PaneSection,{children:[(0,y.jsx)(rE.Modal,{isOpen:tR,onRequestClose:function(){return tI(!1)},children:(0,y.jsx)(lb.default,{onRequestClose:function(){return tI(!1)}})}),es&&td?(0,y.jsx)(lg.DomainContactModal,{isOpen:td,selectedDomain:es,onSubmit:function(e){return(0,L._)(function(){return(0,V._)(this,function(t){switch(t.label){case 0:return[4,tb(e)];case 1:return t.sent()&&t1(es.domainName),[2]}})})()},onClose:function(){return tf(!1)},isSubmitting:ec===ow.DeploymentMode.Preparing||ec===ow.DeploymentMode.Deploying||W||ep}):null,(0,y.jsxs)(ei.View,{gap:24,className:lw.default.container,children:[(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsx)(en.Text,{variant:"headerDefault",children:nh}),nm?(0,y.jsx)(en.Text,{children:nm}):null]}),R?(0,y.jsx)(s0,{}):null,(0,y.jsx)(sQ,{repl:X,onViewAction:h,isExpoStackWithLaunchEnabled:R}),t4?(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsxs)(ei.View,{gap:2,children:[(0,y.jsx)(en.Text,{children:"Primary URL"}),(0,y.jsx)(en.Text,{color:"dimmer",variant:"small",children:"You can add your own custom domain after publishing your app."})]}),(0,y.jsx)(sp.PrimaryDomainInput,{id:"primaryDomain",subdomain:ey,provider:eY,deploymentId:c||void 0,onChange:eZ,onBlur:th,updateValidity:eJ,disabled:!(null==ev?void 0:ev.isAuthorized),canEditDisabledMessage:null==ev?void 0:ev.message})]}):null,t8?(0,y.jsx)(ly.default,{privacyMode:eG,setPrivacyMode:tr,privatePassword:eN,setPrivatePassword:ti,privatePasswordError:eM,hasExistingPrivatePassword:eL,isRedeploy:eh}):null,nn?(0,y.jsx)(s2.default,{onDeleteDeployment:function(){h({type:C.ViewActionType.SendDeploymentLifecycleCommand,payload:{command:_.SendDeploymentLifecycleCommandType.Destroy}})}}):null,nr?(0,y.jsx)(sd.TelegramConnectionSection,{deployDisabled:nc}):null,ni?(0,y.jsx)(s5.TimeBasedAgentScheduleSection,{envVars:eR,updateEnvVarValue:tv,addAnEnvVar:tm,removeEnvVar:tx,initialized:!ep}):null,O&&er?(0,y.jsx)(su.default,{syncSandboxWithLive:e$,setSyncSandboxWithLive:ta}):null,t9.showToggle?(0,y.jsx)(lt.default,{isEnabled:t9.isEnabled,showUpsell:t9.showUpsell}):null,ne&&!eB?(0,y.jsx)(o$,{isFreeUser:E}):null,tZ?(0,y.jsx)(lv.FreeDomainClaimSection,{onClaimAndPublish:function(e){return(0,L._)(function(){return(0,V._)(this,function(t){switch(t.label){case 0:if(el(e),!e)return[3,1];return tf(!0),[3,3];case 1:return[4,ty(t4)];case 2:t.sent()&&t1(),t.label=3;case 3:return[2]}})})()},disabled:nc,isPublishing:ec===ow.DeploymentMode.Preparing||ec===ow.DeploymentMode.Deploying,isRepublish:!1}):null,t3||tJ||tZ?null:(0,y.jsx)(lm,{provider:eY,isDeployable:tM,isDeployableCode:tB,isDeployableExplanation:tV,loading:W||ep,handleDeployClick:function(){return(0,L._)(function(){return(0,V._)(this,function(e){switch(e.label){case 0:return[4,ty(t4)];case 1:return e.sent()&&t1(),[2]}})})()},refetchDeployabilityQueryData:nf,setShowPaymentMethodForm:function(){return tT(!0)},isPaymentMethodFormShown:tj,setShowSupportForm:function(){return tI(!0)},org:np,replId:d,optionsLoading:ep,mode:ec,disabled:nc,blockDeploymentForMissingGitRemote:t$,onViewAction:h}),tW?(0,y.jsx)(sj,{isOpen:G,onToggle:function(){return $(!G)},ports:D,openNetworkingPane:function(){h({type:C.ViewActionType.OpenPane,payload:{type:"developer",data:{tab:["networking"]}}})},openSecretsPane:function(){h({type:C.ViewActionType.OpenPane,payload:{type:"envEditor"}})},replId:d,provider:eY,setProvider:tl,onError:f,initialSecretsSyncExpanded:!1,machineConfig:eQ,setMachineConfig:tu,onEditAutoscaleConfig:function(){return F(!0)},appType:ex,onAppTypeChanged:tp,onViewAction:h,recommendedProvider:g,runCommandError:eC,publicDirError:eF,crontabError:eT,timezoneError:ej,setTimeoutValueError:tn,buildCommand:e_,setBuildCommand:e0,runCommand:ek,setRunCommand:e1,publicDir:eV,setPublicDir:e7,envVars:eR,setEnvVars:e6,ignoredSecrets:eH,setIgnoredSecrets:to,addAnEnvVar:tm,updateEnvVarName:tg,updateEnvVarValue:tv,removeEnvVar:tx,optOut:tw,optIn:t_,syncToWorkspace:tk,optionsLoading:ep,queryLoading:ef,baseDisableState:na,envVarKeys:nd,editReplSecretsAuthorization:eg,editDeploySecretAuthorization:em,timezone:eI,setTimezone:e3,crontab:eA,setCrontab:e4,timeoutValue:eP,setTimeoutValue:te,timeoutUnits:eD,setTimeoutUnits:tt,devSecrets:eO,orgId:eB},eY):null,tW?(0,y.jsx)(sT.CreateNeonProductionDatabaseToggleSection,{state:tc}):null,t7?(0,y.jsxs)(Q.ShadesSurface,{px:8,py:4,className:lw.default.roundedSurface,children:[(0,y.jsxs)(ei.View,{row:!0,justify:"space-between",align:"center",py:8,className:lw.default.clickable,onClick:function(){return tY(!tK)},children:[(0,y.jsxs)(ei.View,{row:!0,gap:8,align:"center",children:[(0,y.jsx)(sr.default,{}),(0,y.jsx)(en.Text,{children:"What does publishing do?"})]}),(0,y.jsx)(J.IconButton,{alt:tK?"Hide info":"Show info",onClick:function(){return tY(!tK)},children:tK?(0,y.jsx)(eS.default,{}):(0,y.jsx)(ak.default,{})})]}),tK?(0,y.jsxs)(ei.View,{gap:16,p:16,children:[(0,y.jsxs)(ei.View,{row:!0,gap:12,children:[(0,y.jsx)(ei.View,{pt:2,children:(0,y.jsx)(n$.default,{})}),(0,y.jsxs)(ei.View,{style:{flex:1,minWidth:0},children:[(0,y.jsx)(en.Text,{multiline:!0,children:"Publishing your app makes it available for anyone to use"}),(0,y.jsx)(en.Text,{color:"dimmer",variant:"small",multiline:!0,children:"Your friends and users around the world can visit your app through your primary URL."})]})]}),(0,y.jsxs)(ei.View,{row:!0,gap:12,children:[(0,y.jsx)(ei.View,{pt:2,children:(0,y.jsx)(si.default,{})}),(0,y.jsxs)(ei.View,{style:{flex:1,minWidth:0},children:[(0,y.jsxs)(en.Text,{multiline:!0,children:["Costs are included in ",oV.corePlanName," subscriptions"]}),(0,y.jsx)(en.Text,{color:"dimmer",variant:"small",multiline:!0,children:"Costs vary depending on the type of technology used to publish your app."})]})]}),(0,y.jsxs)(ei.View,{gap:8,row:!0,justify:"end",children:[(0,y.jsx)(sW.ButtonLink,{iconLeft:(0,y.jsx)(so.default,{}),text:"Watch video",size:"small",href:"https://www.youtube.com/watch?v=OqSbgBMoTm0",target:"_blank"}),(0,y.jsx)(sW.ButtonLink,{iconLeft:(0,y.jsx)(sn.default,{}),text:"Learn more",size:"small",href:"https://docs.replit.com/category/replit-deployments",target:"_blank"})]})]}):null]}):null]}),tj?(0,y.jsx)(Q.ShadesSurface,{className:lw.default.payment,p:16,children:(0,y.jsx)(s9.NewPaymentMethodForm,{onClose:function(){return(0,L._)(function(){return(0,V._)(this,function(e){switch(e.label){case 0:return tT(!1),[4,nf()];case 1:return e.sent(),[2]}})})()},context:"workspace_hosting_pane",returnUrl:"".concat(window.location.origin).concat(window.location.pathname,"?deploymentPane=true")})}):null,(0,y.jsx)(rE.Modal,{isOpen:ez,onRequestClose:function(){eK||ts(!1)},children:(0,y.jsxs)(ei.View,{gap:8,children:[(0,y.jsx)(en.Text,{variant:"subheadBig",children:"Copy secrets from Deployment to Development?"}),(0,y.jsx)(en.Text,{children:"Are you sure you want to copy all of your secrets from Deployment to Development? Secrets already present in Development will be overwritten and lost permanently."}),(0,y.jsxs)(ei.View,{pt:8,row:!0,gap:8,justify:"end",children:[(0,y.jsx)(Z.Button,{text:"Cancel",disabled:eK,onClick:function(){ts(!1)}}),(0,y.jsx)(Z.Button,{text:"Yes, copy secrets",colorway:"negative",disabled:eK,loading:eK,onClick:tS})]})]})})]})}e.s(["SimpleIntroLoader",()=>l_],12732)},544880,410270,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(530658),i=e.i(276385),a=e.i(389959),o=e.i(960933),s=e.i(862927),l=e.i(182409),u=e.i(116235),c=e.i(399344),d=e.i(914279),f=e.i(68893),p=e.i(297083),h=e.i(346715),m=e.i(817556),g=e.i(368964);e.i(925218);var x=e.i(641555),y=e.i(923242),b=e.i(429662),w=e.i(399245),_=e.i(887964),k=e.i(255701),S=e.i(76112),C=e.i(416298),j=e.i(241703),T=e.i(32995),E=e.i(379790),R=e.i(684340),I=e.i(918560),A=e.i(100287);e.i(969084);var P=e.i(985845),D=e.i(104571),O=e.i(150281),N=e.i(251299),M=e.i(12732),L=e.i(207237),B=e.i(952521),V=e.i(522821),F=e.i(492267),U=e.i(509908),G=e.i(480028),$=e.i(446530),H=e.i(754873),z=e.i(173703),W=e.i(613355),q=e.i(140487),K=e.i(624782),Y=e.i(625484),Q=(0,$.cssRecord)({root:[{borderBottom:"1px solid ".concat(G.tokens.outlineDimmest)}],inner:[W.rcss.position.relative],tabs:[W.rcss.overflowX("auto"),W.rcss.pl(8)],tab:[H.interactive.nofill,W.rcss.borderRadius(0),W.rcss.px(12),W.rcss.position.relative,{transition:"none",height:38,marginRight:1,"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:G.tokens.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}],dot:[W.rcss.position.absolute,W.rcss.borderRadius(16),W.rcss.width(8),W.rcss.height(8),W.rcss.backgroundColor.accentPrimaryStronger,{top:8,right:8}]}),X=function(e){var t=e.tabs,n=e.value,r=e.onClick;return(0,i.jsx)(z.ShadesSurface,{css:Q.root,elevate:!1,children:(0,i.jsx)(Y.View,{css:Q.inner,children:(0,i.jsx)(Y.View,{css:Q.tabs,row:!0,align:"center",children:t.map(function(e){return(0,i.jsxs)(Y.View,{css:W.rcss.position.relative,children:[(0,i.jsx)(q.Button,{style:{borderBottom:"1px solid "+(n===e.value?G.tokens.foregroundDefault:"transparent")},css:Q.tab,text:e.label,iconLeft:e.icon,iconRight:e.beta?(0,i.jsx)(K.Pill,{text:"Beta",colorway:"grey"}):void 0,onClick:function(){return r(e)}}),e.showDot?(0,i.jsx)(Y.View,{css:Q.dot}):null]},e.value)})})})})};e.s(["PaneTabs",()=>X],410270);var Z=e.i(396776),J=e.i(782514),ee=[g.HostingBuildProvider.Gce,g.HostingBuildProvider.CloudRun,g.HostingBuildProvider.Cron],et=(0,$.cssRecord)({root:[{height:"100%"},W.rcss.overflow("hidden"),W.rcss.position.relative],content:[W.rcss.overflow("auto"),W.rcss.flex.growAndShrink(1),W.rcss.position.relative]}),en=function(e){var t,n,o,s,u=e.onViewUpdate,G=e.onError,$=e.refetch,H=e.openFile,z=e.openPane,W=e.initialView,K=e.error,Q=function(e){eS({type:j.ViewActionType.SendDeploymentLifecycleCommand,payload:e})},en=(0,L.default)(),er=(0,c.useDeploymentId)(),ei=(0,c.useDeploymentInProgressBuild)(),ea=(0,c.useDeploymentCurrentBuild)(),eo=(0,c.useFsService)(),es=(0,d.useDeploymentMode)()===f.DeploymentMode.PreparingDatabase,el=(0,A.useExpoLaunch)({openPane:z}),eu=el.expoLaunchStateObservable,ec=el.performExpoLaunchAction,ed=(0,x.useObservableMemo)(function(){return eu.map(function(e){return"disabled"!==e.state})},[eu],{default:!1}),ef="string"==typeof er,ep=void 0===ei&&!ef,eh=(0,V.useActiveAgentSessionId)(),em=!!eh,eg=(0,F.useIsAgentStackRepl)().isAgentStackRepl,ev=(0,r._)((0,a.useState)(function(){return ei?j.Views.DeploymentInProgress:W||(ep?j.Views.Intro:j.Views.Deployment)}),2),ex=ev[0],ey=ev[1],eb=(0,r._)((0,a.useState)(void 0),2),ew=eb[0],e_=eb[1];(0,a.useEffect)(function(){W?ey(W):(ei||es)&&ey(j.Views.DeploymentInProgress)},[W,ei,es]);var ek=(0,c.useSendDeploymentLifecycleCommand)(),eS=function(e){return(0,p._)(function(){var t;return(0,m._)(this,function(n){switch(n.label){case 0:switch(u(),e.type){case j.ViewActionType.SendDeploymentLifecycleCommand:return[3,1];case j.ViewActionType.ChangeView:return[3,3];case j.ViewActionType.OpenPane:return[3,4]}return[3,7];case 1:return[4,ek(e.payload)];case 2:if(n.sent(),e.payload.command===g.SendDeploymentLifecycleCommandType.Destroy)return ey(j.Views.Intro),$(),[2];return e.payload.command===g.SendDeploymentLifecycleCommandType.UpdateMachineConfiguration&&$(),ey(j.Views.Deployment),[3,8];case 3:return ey(e.payload.view),e_(e.payload.data),[3,8];case 4:if("codeEditor"!==(t=e.payload).type||".replit"!==t.data.path)return[3,6];return[4,eo.stat(".replit")];case 5:if(!n.sent().exists)return G("Could not find .replit configuration file."),[2];n.label=6;case 6:return z(t),[3,8];case 7:return[3,8];case 8:return[2]}})})()},eC=(t=null==ea?void 0:ea.provider,o=(n=(0,B.useDismissibleElement)("deployment-analytics-dot")).isLoading,s=n.isDone,(0,a.useMemo)(function(){return[{value:j.Views.Deployment,label:"Overview",icon:(0,i.jsx)(l.default,{})}].concat((0,h._)(t&&t===g.HostingBuildProvider.Cron&&!eg?[{value:j.Views.Schedule,label:"Schedule",icon:(0,i.jsx)(b.default,{})}]:[]),(0,h._)(t!==g.HostingBuildProvider.Static?[{value:j.Views.Logs,label:"Logs",icon:(0,i.jsx)(_.default,{})}]:[]),(0,h._)(t&&t!==g.HostingBuildProvider.Cron&&!eg?[{value:j.Views.Analytics,label:"Analytics",icon:(0,i.jsx)(y.default,{}),showDot:!o&&!s}]:[]),(0,h._)(t&&ee.includes(t)&&!eg?[{value:j.Views.ResourceMonitoring,label:"Resources",icon:(0,i.jsx)(S.default,{}),beta:!1}]:[]),(0,h._)(t&&t!==g.HostingBuildProvider.Cron&&!eg?[{value:j.Views.Domains,label:"Domains",icon:(0,i.jsx)(w.default,{})}]:[]),[{value:j.Views.Settings,label:"Manage",icon:(0,i.jsx)(k.default,{})}])},[s,o,t,eg]));return ex===j.Views.Intro?(0,i.jsxs)(Y.View,{css:et.content,children:[K?(0,i.jsx)(T.PaneSection,{children:(0,i.jsx)(Z.StatusBanner,{colorway:"warning",icon:(0,i.jsx)(C.default,{}),text:K})}):null,(0,i.jsx)(M.SimpleIntroLoader,{deploymentId:null,initialView:W,onViewAction:eS,onError:G,onDeploy:function(){eS({type:j.ViewActionType.ChangeView,payload:{view:j.Views.DeploymentInProgress}}),eh&&(0,U.trackAgentAnalyticsEvent)({action:"deploying_app",sessionId:eh})},replId:en,hasAgentSession:em,isExpoStackWithLaunchEnabled:ed})]}):(0,i.jsxs)(Y.View,{css:et.root,children:[eC?(0,i.jsx)(X,{onClick:function(e){eS({type:j.ViewActionType.ChangeView,payload:{view:e.value}})},tabs:eC,value:ex===j.Views.DeploymentInProgress?j.Views.Deployment:ex}):null,(0,i.jsxs)(Y.View,{css:et.content,children:[K?(0,i.jsx)(T.PaneSection,{children:(0,i.jsx)(Z.StatusBanner,{colorway:"warning",icon:(0,i.jsx)(C.default,{}),text:K,action:K.includes("Security Scanner")?(0,i.jsx)(q.Button,{text:"Open",onClick:function(){return z({type:"securityScan"})}}):void 0})}):null,(0,i.jsxs)(J.TrackingHierarchyProvider,{hierarchy:{view:ex},children:[ex===j.Views.Analytics?(0,i.jsx)(E.Analytics,{replId:en}):null,ex===j.Views.Logs?(0,i.jsx)(P.Logs,{replId:en,deploymentId:er,openFile:H}):null,ex===j.Views.ResourceMonitoring?(0,i.jsx)(D.ResourceMonitoring,{replId:en}):null,ex===j.Views.Settings?(0,i.jsx)(N.Settings,{onError:G,deploymentId:er,onLifecycleCommand:Q}):null,ex===j.Views.Deployment||ex===j.Views.DeploymentInProgress?(0,i.jsx)(R.Deployment,{view:ex,refetch:$,onViewAction:eS,onError:G,openFile:H,openPane:z,onLifecycleCommand:Q,hasAgentSession:em,expoLaunchStateObservable:eu,performExpoLaunchAction:ec}):null,ex===j.Views.Schedule?(0,i.jsx)(O.Schedule,{replId:en,deploymentId:er,openFile:H}):null,ex===j.Views.Domains?(0,i.jsx)(I.Domains,{deploymentId:er,viewData:ew}):null]})]})]})},er=e.i(712516);function ei(e){var t=e.initialView,n=e.flow,o=e.onViewUpdate,s=e.openFile,l=e.openPane,u=e.tabsNavRef,p=(0,c.useRefetchDeployment)(),h=(0,d.useDeploymentMode)(),m=(0,c.useDeploymentError)(),g=(0,r._)((0,a.useState)(null),2),x=g[0],y=g[1];return h===f.DeploymentMode.Loading?(0,i.jsx)(er.default,{pane:{type:"deployments"},headerText:"Publish to production",loading:!0}):(0,i.jsx)(en,{tabsNavRef:u,initialView:t,onViewUpdate:function(){x&&y(null),o()},onError:y,refetch:p,openFile:s,openPane:l,error:x||m,flow:n})}e.i(282890);var ea=e.i(66718),eo=e.i(716636),es=e.i(548364),el=e.i(259493),eu=o.Type.Object({skipIntro:o.Type.Optional(o.Type.Boolean()),isAgentDeployment:o.Type.Optional(o.Type.Boolean())}),ec=o.Type.Object({type:o.Type.Literal("deployments"),data:o.Type.Optional(o.Type.Object({view:o.Type.Enum(j.Views)})),flow:o.Type.Optional(eu)}),ed={Content:function(e){var o=e.pane,s=o.data,l=o.flow,u=e.options.performPaneOperation,c=(0,a.useCallback)(function(e){return u({operation:"open",secondary:!0,pane:{type:(0,ea.getPaneTypeForFile)(e),data:e}})},[u]),d=(0,r._)((0,a.useState)(null),2),f=d[0],p=d[1],h=(0,es.useDeploymentCommands)().getDeploymentCommand;(0,el.useSetPaneBindings)(function(){var e={type:"deployments",getTabs:f?f.getTabs:function(){return null},setTab:f?f.setTab:function(){}},r=h();return r?(0,n._)((0,t._)({},e),{commands:[{commands:[r]}]}):e},[f,h]);var m=(0,a.useCallback)(function(e){u({operation:"open",pane:e,secondary:!0})},[u]);return(0,i.jsx)(ei,{tabsNavRef:p,initialView:null==s?void 0:s.view,onViewUpdate:function(){(null==s?void 0:s.view)&&u({operation:"replace",pane:{type:"deployments"}})},openFile:c,openPane:m,flow:l})},Icon:function(e){var t=e.size;return(0,i.jsx)(u.IconContext.Provider,{value:{color:G.tokens.greenStrongest,size:t},children:(0,i.jsx)(l.default,{})})},getTitle:function(){return"Publishing"},description:"Publish a live, stable, public version of your App, unaffected by the changes you make in the workspace",category:eo.PaneCategory.CloudServices,decode:function(e){return s.Value.Decode(ec,e)}};e.s(["deploymentsUI",()=>ed],544880)},643041,e=>{"use strict";var t=e.i(276385),n=e.i(416298);e.i(282890);var r=e.i(716636),i=e.i(960178),a=e.i(625484),o={Content:function(){return(0,t.jsx)(a.View,{style:{padding:32},children:(0,t.jsx)(i.Text,{variant:"text",multiline:!1,children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,t.jsx)(n.default,{})},getTitle:function(){return"Unsupported"},category:r.PaneCategory.Other,decode:function(){return{type:"commands",data:{autoFocus:!1}}}};e.s(["unsupportedUI",()=>o])},387948,94366,924748,825606,e=>{"use strict";var t=e.i(346715),n=e.i(389959),r=e.i(642049),i=e.i(729122);function a(e){var a=e.handleOpenPane,o=(0,i.useWorkflowsRunState)(),s=(0,n.useRef)(new Set);(0,n.useEffect)(function(){if(o){Object.values(o).forEach(function(e){var t;if(e.step===r.WorkflowStateStep.RUNNING&&(null==(t=e.workflow.metadata)?void 0:t.outputType)!==void 0&&!s.current.has(e.runId)){var n=e.workflow.metadata.outputType;switch(s.current.add(e.runId),n){case"webview":a("webview");break;case"console":a("runnerOutput");break;case"vnc":a("vnc");break;case"automations":a("automations")}}});var e,n=new Set(Object.keys(o));e=s.current,s.current=new Set((0,t._)(e).filter(function(e){return n.has(e)}))}},[a,o])}e.s(["default",()=>a],387948);var o=e.i(530658),s=e.i(878420),l=e.i(569384),u=e.i(973245),c=e.i(951262);function d(){var e=(0,l._)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return d=function(){return e},e}var f={},p=(0,u.gql)(d()),h=e.i(644920);e.i(792e3);var m=e.i(8808),g=e.i(529810);function x(){var e,t,r,i,a,l,u,d=(0,o._)((e=(0,s._)({},f,void 0),c.useMutation(p,e)),1)[0],x=(0,g.default)().fs,y=(i=(0,g.default)().container,l=(a=(0,o._)((0,n.useState)(null!=(r=null==(t=i.getContext())?void 0:t.repl)?r:null),2))[0],u=a[1],(0,n.useEffect)(function(){return i.onConnectionStateChanged(function(e){var t,n;e===m.ConnectionState.CONNECTED&&u(null!=(n=null==(t=i.getContext())?void 0:t.repl)?n:null)})},[u,i]),l),b=null==y?void 0:y.authorizations.editFileContents.isAuthorized,w=null==y?void 0:y.id;(0,n.useEffect)(function(){if(b&&w){var e=(0,h.default)(function(){return d({variables:{replId:w}})},{wait:6e4,maxWait:6e5}),t=x.onStatusChange(function(){e()});return function(){e.isScheduled()&&e.flush(),t()}}},[x,w,b,d])}e.s(["default",()=>x],94366);var y=e.i(924004),b=e.i(664152);function w(e){var t,r,i,a,s,l=(t=(0,g.default)().container,i=(r=(0,o._)((0,n.useState)(null),2))[0],a=r[1],(0,n.useEffect)(function(){if(t)return t.onConnectionStateChanged(function(){a(t.getConnectionMetadata())})},[t]),s=i,(0,n.useMemo)(function(){return s?(0,y.parseToken)(s.token):null},[s]));(0,n.useEffect)(function(){if(e){var t,n,r,i=(null==(t=e.origin)?void 0:t.__typename)==="Repl"?e.origin.id:null,a={id:e.id,slug:e.slug,originId:i,rootOriginReplUrl:e.rootOriginReplUrl,rootOriginReplReleaseId:null==(r=e.source)||null==(n=r.release)?void 0:n.id,tokenCluster:null==l?void 0:l.cluster};return(0,b.updateReplContext)(a),function(){(0,b.removeReplContext)()}}},[e,l])}e.s(["default",()=>w],924748);var _=e.i(15053),k=e.i(613141);function S(){var e=(0,l._)(["\n  subscription StartOrgReplPresenceSession(\n    $input: StartOrgReplPresenceSessionInput!\n  ) {\n    startOrgReplPresenceSession(input: $input)\n  }\n"]);return S=function(){return e},e}function C(){var e=(0,l._)(["\n  mutation PingOrgReplPresenceSession(\n    $input: PingOrgReplPresenceSessionInput!\n  ) {\n    pingOrgReplPresenceSession(input: $input)\n  }\n"]);return C=function(){return e},e}var j={},T=(0,u.gql)(S()),E=(0,u.gql)(C()),R=e.i(207237),I=e.i(873379);function A(){var e,t,r,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=(0,R.default)(),l=(0,n.useRef)((0,_.v4)()),u=(0,g.default)().container,d=(0,I.default)(u),f=(0,o._)((e=(0,s._)({},j,void 0),c.useMutation(E,e)),1)[0],p=d!==m.ConnectionState.CONNECTED||i;(0,n.useEffect)(function(){var e=!1;if(!p&&d===m.ConnectionState.CONNECTED){var t=null;return function n(){f({variables:{input:{sessionId:l.current}},onCompleted:function(){e||(t=setTimeout(n,1e4))}})}(),function(){e=!0,t&&clearTimeout(t)}}},[d,l,f,p]),t={variables:{input:{replId:a,sessionId:l.current}},skip:p},r=(0,s._)({},j,t),k.useSubscription(T,r)}e.s(["useOrgReplPresenceSession",()=>A],825606)},391542,e=>{"use strict";var t=e.i(389959),n=e.i(170784),r=e.i(122965);function i(e){var i=e.repl,a=e.currentUser,o=e.container,s=(0,r.useFlaggedRetrier)(),l=(0,n.useMemoizedConnectContext)(i&&a?{repl:i,currentUser:a}:null);(0,t.useEffect)(function(){if(o&&l)return o.connect({context:l,getMinimumRetryDelayMs:s}),function(){o.close()}},[l,o,s])}e.s(["default",()=>i])},984826,563209,708648,596378,143480,905890,681850,349467,402434,326333,8812,239296,829960,387524,416406,440560,985430,752310,741740,927938,551544,136780,604026,e=>{"use strict";var t=e.i(485273),n=e.i(389959),r=e.i(15053),i=e.i(529810),a=e.i(302861);function o(){var e=(0,t.useRouter)(),o=(0,i.default)().container,s=(0,a.useIsLogging)(),l=(0,a.useSetIsLogging)(),u=(0,a.useAddLog)();(0,n.useEffect)(function(){e.query.debug&&"undefined"!==e.query.debug&&l(!0)},[l,e.query.debug]),(0,n.useEffect)(function(){if(s)return o.client().onDebugLog(function(e){if("log"===e.type){var t={name:e.log.channel.name,service:null};if("string"==typeof e.log.channel.service)t.service=e.log.channel.service;else if(e.log.channel.service){var n=o.getContext();n&&(t.service=e.log.channel.service(n))}u({id:(0,r.v4)(),channel:t,dir:e.log.direction,cmd:e.log.cmd,stringifiedCmd:JSON.stringify(e.log.cmd),timestamp:window.performance.now()})}})},[s,o,u])}e.s(["default",()=>o],984826);var s=e.i(530658),l=e.i(368964),u=e.i(82259),c=e.i(986194);e.i(877212);var d=e.i(165680),f=e.i(924908);e.i(925218);var p=e.i(267103),h=e.i(641555),m=e.i(993796),g=e.i(98816),x=e.i(215969),y=e.i(782672),b=e.i(45442),w=e.i(913811),_=e.i(417120),k=e.i(297083),S=e.i(817556),C=e.i(509908),j={direction:"reverse",state:{latestUserResponseEventId:void 0},reducer:function(e,t){if(e.sender.type===u.UserType.AI){var n=e.contents.contents;if((0,c.isKind)(n,"agentTimelineEventContents")){var r=n.agentTimelineEventContents,i=r.toolData;if("user_response"===r.toolName&&(null==i?void 0:i.$kind)==="messageData")return t.latestUserResponseEventId=e.id,!1}}}};function T(){var e,t,r,i=(0,f.useChatter)(),a=(0,p.useObservable)(i.sessions.agent.current),o=(0,p.useObservable)(null==a?void 0:a.agent.state),c=(0,d.useAgentPausedByUser)(),T=(0,b.useAgentSettings)().settings,E=(null==T?void 0:T.chatMode)===l.AgentChatMode.Discussion,R=(0,y.default)(),I=(0,h.useObservableMemo)(function(){return null==a?void 0:a.reduce(j,100)},[a],{default:{latestUserResponseEventId:void 0}}),A=(0,x.useIsUserMessageMostRecentEvent)({sessionId:null==a?void 0:a.id}),P=(0,h.useObservableMemo)(function(){return i.queue.state.select(function(e){return e[0]})},[i]),D=(0,g.default)(P),O=(0,n.useRef)(void 0),N=(0,w.useIsEditingQueueItem)(),M=(null==o?void 0:o.state)===u.AgentRunState.AGENT_STATE_PAUSED||(null==o?void 0:o.state)===u.AgentRunState.AGENT_STATE_NOT_STARTED||(null==o?void 0:o.state)===u.AgentRunState.AGENT_STATE_UNKNOWN,L=(e=(0,f.useChatter)(),r=null==(t=(0,p.useObservable)(e.sessions.agent.current))?void 0:t.id,(0,n.useCallback)(function(t){return(0,k._)(function(){return(0,S._)(this,function(n){switch(n.label){case 0:if(!r)return[2];return(0,C.trackAgentQueueAnalyticsEvent)({action:"queue_message_sent_automatically",messageText:t.contents.content,sessionId:r}),[4,e.queue.flush({ids:[t.id],session:r})];case 1:return n.sent(),[2]}})})()},[r,e])),B=(0,_.useIsAgentWorking)(),V=(0,s._)((0,n.useState)(!1),2),F=V[0],U=V[1],G=(0,m.useFlag)({controlName:"flag-server-side-queue-autoplay",default:!1});(0,n.useEffect)(function(){B&&U(!0)},[B]),(0,n.useEffect)(function(){(null==R?void 0:R.status)!=="ok"||E||!F||!M||c||N||!I||void 0===I.latestUserResponseEventId||I.latestUserResponseEventId===O.current||A||G||!D.current||L(D.current)},[M,c,N,I,A,F,L,D,R,E,G])}e.s(["useQueueAutoPlay",()=>T],563209);var E=e.i(374106),R=e.i(968783),I=e.i(664152),A=e.i(634759);function P(e){return!!e&&e===A.StackBlueprint.STACK_BLUEPRINT_FULLSTACK_JS}var D=e.i(330069);function O(){var e,t,r,i=(e=(0,n.useRef)(new Map),t=(0,n.useRef)(new Map),r=(0,n.useRef)(null),{addMessage:function(n,i){if(e.current.set(i,n),I.logger.info("user message received",{eventId:i,sessionId:n.sessionId,sender:n.sender,created:n.created,agentRunning:(null==(a=r.current)?void 0:a.state)===u.AgentRunState.AGENT_STATE_RUNNING}),r.current&&(null==(o=r.current.reason)?void 0:o.$kind)!=="waitingOnPlanApproval"){var a,o,s=setTimeout(function(){var a;e.current.delete(i),I.logger.info("user message ghosted",{eventId:i,sessionId:n.sessionId,sender:n.sender,created:n.created,duration:Date.now()-n.created.getTime(),agentRunning:(null==(a=r.current)?void 0:a.state)===u.AgentRunState.AGENT_STATE_RUNNING}),t.current.delete(i)},r.current.state===u.AgentRunState.AGENT_STATE_PAUSED?3e4:6e4);t.current.set(i,s)}},acknowledgeMessage:function(n){var r=n.eventId,i=n.acknowledged,a=e.current.get(r);if(a){var o=i.getTime()-a.created.getTime();I.logger.info("user message acknowledged",{eventId:r,timeToAcknowledge:o,sessionId:a.sessionId,sender:a.sender,created:a.created,acknowledged:i});var s=t.current.get(r);s&&(clearTimeout(s),t.current.delete(r)),e.current.delete(r)}},agentStateChanged:function(e){if((null==(i=r.current)||null==(n=i.reason)?void 0:n.$kind)!=="waitingOnPlanApproval"||e.state!==u.AgentRunState.AGENT_STATE_RUNNING){var n,i,a,o=null==(a=e.reason)?void 0:a.$kind;if("userPaused"===o||"waitingOnPlanApproval"===o){(function(){var e=!0,n=!1,r=void 0;try{for(var i,a=t.current.entries()[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=(0,s._)(i.value,2),l=o[0],u=o[1];clearTimeout(u),t.current.delete(l)}}catch(e){n=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}})(),r.current=e;return}r.current=e}}}),a=i.addMessage,o=i.acknowledgeMessage,l=i.agentStateChanged,d=(0,R.useIsCurrentOrgEnterprise)();(0,f.useChatHook)("agent-state-changed",function(e){l(e.state);var t,n=null==(t=e.state.reason)?void 0:t.$kind;if(n){var r=new Map([["userPaused","user_paused"],["waitingOnPlanApproval","waiting_on_plan_approval"],["waitingOnUserResponse","waiting_on_user_input"],["rateLimited","quota_reached"],["error","agent_error_encountered"],["stepLimitExceeded","step_limit_exceeded"]]).get(n);r&&(0,C.trackAgentAnalyticsEvent)({action:r,sessionId:e.sessionId,isEnterprise:d})}});var p=(0,D.useShouldSeeFreemiumExperience)().shouldSeeFreemiumExperience?"starter":void 0;(0,f.useChatHook)("received-event",function(e){var t=e.event,n=t.sessionId;if((0,E.isEventContentsKind)(t,"agentPlanEventContents")&&t.state===u.EventState.IN_PROGRESS){var r=t.contents.contents,i=(0,c.unkind)(r);t.sender.type===u.UserType.AI&&i.requiresApproval&&(0,C.trackAgentPlanningAnalyticsEvent)({action:"plan_proposal_started",sessionId:n,planId:i.planId,planSupportsVisualPreview:P(i.stackBlueprint),stackBlueprint:i.stackBlueprint,isEnterprise:d})}}),(0,f.useChatHook)("received-completed-event",function(e){var t=e.event,n=t.sessionId;if((0,E.isEventContentsKind)(t,"messageEventContents")&&a({sender:t.sender.id,sessionId:n,created:t.created},t.id),(0,E.isEventContentsKind)(t,"agentPlanEventContents")){var r=t.contents.contents,i=(0,c.unkind)(r);t.sender.type===u.UserType.AI&&i.requiresApproval&&(0,C.trackAgentPlanningAnalyticsEvent)({action:"plan_proposal_completed",sessionId:n,planId:i.planId,planSupportsVisualPreview:P(i.stackBlueprint),stackBlueprint:i.stackBlueprint,isEnterprise:d})}if((0,E.isEventContentsKind)(t,"rapidBuildStarted")?(0,C.trackAgentAnalyticsEvent)({action:"rapid_build_started",sessionId:n,isEnterprise:d}):(0,E.isEventContentsKind)(t,"rapidBuildConcluded")&&(0,C.trackAgentAnalyticsEvent)({action:"rapid_build_concluded",sessionId:n,isEnterprise:d}),(0,E.isEventContentsKind)(t,"agentTimelineEventContents")){var s=(0,c.unkind)(t.contents.contents),l=s.toolData;switch(s.toolName){case"mark_current_step_as_succeeded":return(0,C.trackAgentAnalyticsEvent)({action:"step_completed",sessionId:n,replOwnerPlanName:p,isEnterprise:d});case"mark_current_step_as_failed":return(0,C.trackAgentAnalyticsEvent)({action:"step_failed",sessionId:n,replOwnerPlanName:p,isEnterprise:d})}if(l)switch(l.$kind){case"commitData":return(0,C.trackAgentAnalyticsEvent)({action:"checkpoint_created",sessionId:n,freeCheckpoint:l.commitData.billingRate===u.CommitBillingRate.ZERO_RATED,replOwnerPlanName:p,hasUbbV2:!0,checkpointPrice:l.commitData.usageCents,isEnterprise:d});case"agentPlanStepBegin":var f=l.agentPlanStepBegin.planStep,h=f.id,m=f.name,g=f.blueprints;return(0,C.trackAgentPlanningAnalyticsEvent)({action:"plan_step_started",stepId:h,stepName:m,stepBlueprints:g,sessionId:n,isEnterprise:d});case"blueprintsSetup":var x=l.blueprintsSetup.blueprintData;return(0,C.trackAgentAnalyticsEvent)({action:"blueprints_setup",blueprints:x.map(function(e){return e.name}),sessionId:n,replOwnerPlanName:p,isEnterprise:d});case"searchIntegrationsData":var y=l.searchIntegrationsData,b=y.query,w=y.numResults;return(0,C.trackAgentAnalyticsEvent)({action:"integration_searched",sessionId:n,integrationSearchQuery:b,integrationSearchNumResults:w,replOwnerPlanName:p,isEnterprise:d});case"acknowledgeUserMessage":var _=l.acknowledgeUserMessage.eventIds,k=!0,S=!1,j=void 0;try{for(var T,R=_[Symbol.iterator]();!(k=(T=R.next()).done);k=!0){var I=T.value;o({eventId:I,acknowledged:new Date})}}catch(e){S=!0,j=e}finally{try{k||null==R.return||R.return()}finally{if(S)throw j}}}}})}e.s(["useAgentTracking",()=>O],708648);var N=e.i(441329),M=e.i(299798),L=e.i(982829),B=e.i(729122),V=e.i(727894);function F(){var e=(0,_.useIsAgentWorking)(),t=(0,B.useRunInfo)(),r=t.isRunning,i=t.isWorkflowsLoading,a=(0,B.useRunButton)(),o=(0,N.useIsInMobileWorkspace)(),s=(0,B.useWorkflows)(),l=(0,B.useTriggerLocalRun)(),u=(0,f.useChatter)(),c=(0,h.useObservableMemo)(function(){return u.sessions.agent.current},[u.sessions],{default:void 0}),d=(0,V.useInitialBuildState)(c),p=(0,V.isInitialBuildStarted)(null==d?void 0:d.phase),m=(0,n.useMemo)(function(){return s.length>0&&!i},[i,s.length]),g=(0,n.useMemo)(function(){var e=s.find(function(e){return e.name===a});if(!e)return!1;var t="agent"===e.author,n=(0,B.workflowOpensPort)(e,s);return t&&n},[a,s]),x=(0,n.useRef)(null);(0,M.usePid2)(function(t,n){var i=n.session;m&&a&&void 0!==c&&!0!==p&&!r&&g&&!e&&i.id!==x.current&&(o||l(L.RunReason.AUTO_RUN),x.current=i.id,t.workflows.agentStartRunWorkflow.rpc({name:a}))},[c,p,o,l,r,g,m,a,e])}e.s(["default",()=>F],596378);var U=e.i(927158),G=e.i(759967);function $(e){var t=e.isAgentReplInConfig,r=e.isExpertModeInConfig,i=(0,G.useIsExpertMode)(),a=(0,g.default)(i),o=(0,G.useSetIsExpertMode)(),l=(0,s._)((0,n.useState)(!1),2),u=l[0],c=l[1],d=(0,m.useFlag)({controlName:"flag-agent-everywhere"});(0,n.useEffect)(function(){if(d&&u){if((r||!t)&&void 0===a.current)return void o(!0);if(t&&void 0===a.current)return void o(!1)}},[a,o,d,t,r,u]);var f=(0,U.usePid2Callback)(function(e){return function(){return e.agentReplConfig.getReplConfig.rpc({})}},[]),p=(0,U.usePid2Callback)(function(e){return function(t){return(0,k._)(function(){return(0,S._)(this,function(n){return[2,e.agentReplConfig.updateReplConfig.rpc({expertMode:t})]})})()}},[]);(0,n.useEffect)(function(){d&&void 0===a.current&&f&&(u||(0,k._)(function(){var e;return(0,S._)(this,function(t){switch(t.label){case 0:return[4,f()];case 1:if(!1===(e=t.sent()).ok&&"NOT_FOUND"===e.payload.code)return c(!0),[2];if(!1===e.ok)return[2];return c(!0),void 0!==e.payload.expertMode&&o(e.payload.expertMode),[2]}})})())},[f,d,o,a,u]),(0,n.useEffect)(function(){(0,k._)(function(){return(0,S._)(this,function(e){switch(e.label){case 0:if(!d||!p||void 0===i||!u||t&&!1===i)return[2];return[4,p(i)];case 1:return e.sent(),[2]}})})()},[d,u,t,i,p])}e.s(["useAutoSetExpertMode",()=>$],143480);var H=e.i(830675);function z(){(0,f.useChatHook)("agent-state-changed",function(e){var t,n,r,i;H.addBreadcrumb({category:"chatter",message:"Agent state changed to ".concat((r=function(e){switch(e){case u.AgentRunState.AGENT_STATE_NOT_STARTED:return"Not started";case u.AgentRunState.AGENT_STATE_PAUSED:return"Paused";case u.AgentRunState.AGENT_STATE_PAUSING:return"Pausing";case u.AgentRunState.AGENT_STATE_RUNNING:return"Running";case u.AgentRunState.AGENT_STATE_UNKNOWN:default:return"Unknown"}}((t=e.state).state),i=null==(n=t.reason)?void 0:n.$kind,"".concat(r," (reason: ").concat(i,")"))),level:"info"})}),(0,f.useChatHook)("client-created-session",function(e){H.addBreadcrumb({category:"chatter",message:"Client created ".concat(function(e){switch(e){case u.SessionType.CHAT:return"Assistant";case u.SessionType.INLINE_CHAT:return"Assistant (inline)";case u.SessionType.AGENT_SESSION:return"Agent";default:return"Unknown"}}(e.request.sessionType)," session ").concat(e.session.id),data:e.request,level:"info"})}),(0,f.useChatHook)("client-updated-session",function(e){H.addBreadcrumb({category:"chatter",message:"Client updated session ".concat(e.session.id),data:e.request,level:"info"})}),(0,f.useChatHook)("session-graph-fetched",function(e){H.addBreadcrumb({category:"chatter",message:"Session graph fetched for session ".concat(e.session.id," (size: ").concat(e.size,")"),level:"info"})}),(0,f.useChatHook)("unexpected-disconnect",function(e){H.addBreadcrumb({category:"chatter",message:"Unexpected disconnect: ".concat(e.error.message),level:"error"})}),(0,f.useChatHook)("unhandled-exception",function(e){H.addBreadcrumb({category:"chatter",message:"Unhandled exception: ".concat(e.error.message),data:e.error,level:"error"})})}e.s(["useChatterSentryBreadcrumbs",()=>z],905890);var W=e.i(612651),q=e.i(909478),K=e.i(134405),Y=e.i(345863);function Q(){var e=(0,K.useVisualPreviewStateInputs)(),t=(0,K.useVisualPreviewState)(),n=(0,K.useAgentAwareWebviewStateInputs)(),r=(0,K.useAgentAwareWebviewState)(),a=(0,B.useRunInfo)(),o=(0,i.default)().ports,s=(0,q.useOpenedAndForwardedPorts)(o).map(function(e){return(0,W.default)(e,["processInfo"])});(0,Y.usePreviewStateTracker)({agentAwareWebviewState:r,agentAwareWebviewStateInputs:n,visualPreviewState:t,visualPreviewStateInputs:e,runInfo:a,openedAndForwardedPorts:s})}e.s(["useDebugPreviewStateTracking",()=>Q],681850);var X=e.i(316699),Z=e.i(878420),J=e.i(569384),ee=e.i(973245),et=e.i(951262);function en(){var e=(0,J._)(["\n  mutation EndLiveActivity($input: EndLiveActivityInput!) {\n    endLiveActivity(input: $input) {\n      ... on EndLiveActivityResult {\n        activitiesEnded\n      }\n      ... on LiveActivitiesNotSupported {\n        message\n      }\n    }\n  }\n"]);return en=function(){return e},e}var er={},ei=(0,ee.gql)(en()),ea=e.i(207237);function eo(){var e,t=(0,ea.default)(),r=(0,s._)((e=(0,Z._)({},er,void 0),et.useMutation(ei,e)),1)[0],i=(0,n.useRef)(!1),a=(0,n.useCallback)(function(){return(0,k._)(function(){var e;return(0,S._)(this,function(n){switch(n.label){case 0:if(i.current||"visible"!==document.visibilityState)return[2];return[4,r({variables:{input:{replId:t,step:l.AgentLiveActivityStep.AppReady}}})];case 1:return i.current=(null==(e=n.sent().data)?void 0:e.endLiveActivity.__typename)==="LiveActivitiesNotSupported",[2]}})})()},[r,t]);(0,n.useEffect)(function(){var e=(0,X.default)(a,6e4,{trailing:!0});return e(),document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e),e.cancel()}},[a,t])}e.s(["default",()=>eo],349467),e.i(792e3);var es=e.i(8808);function el(){var e=(0,i.default)().container;(0,n.useEffect)(function(){var t=function(){e.getConnectionState()===es.ConnectionState.CONNECTED&&e.focus()};return window.addEventListener("focus",t),function(){window.removeEventListener("focus",t)}},[e])}e.s(["default",()=>el],402434);var eu=e.i(613141);function ec(){var e=(0,J._)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return ec=function(){return e},e}var ed={},ef=(0,ee.gql)(ec()),ep=e.i(873379);function eh(){var e,t,n=(0,ea.default)(),r=(0,i.default)().container;e={variables:{replId:n},skip:(0,ep.default)(r)!==es.ConnectionState.CONNECTED},t=(0,Z._)({},ed,e),eu.useSubscription(ef,t)}e.s(["useLiveViewReplConnection",()=>eh],326333);var em=e.i(276385),eg=e.i(844941),ev=e.i(222342),ex=e.i(389320),ey=e.i(967629),eb=e.i(613355),ew=e.i(140487),e_=(0,ey.css)([eb.rcss.mt(8)]);function ek(e){var t=e.onOpenEnvEditor,r=(0,ex.default)(),i=(0,ev.default)(),a=(0,n.useRef)(!1);(0,n.useEffect)(function(){if(r&&!a.current){var e=i.showNotice((0,em.jsxs)(em.Fragment,{children:[(0,em.jsx)("div",{children:"This App contains secrets that are missing values."}),(0,em.jsx)("div",{children:"Add values to ensure the App runs as expected."}),(0,em.jsx)("div",{children:(0,em.jsx)(ew.Button,{size:"small",iconLeft:(0,em.jsx)(eg.default,{}),css:e_,colorway:"primary",onClick:function(){t(),i.hideMessage(e)},text:"Manage secrets"})})]}),1e4);a.current=!0}},[r])}e.s(["useMissingSecretToast",()=>ek],8812),e.i(242933);var eS=e.i(279606),eC=e.i(802088),ej=e.i(424746);function eT(){var e=(0,ej.useRefetchDatabasesLazy)("development").refetch,t=(0,f.useChatter)(),r=(0,p.useObservable)(t.sessions.agent.current),i=(0,n.useMemo)(function(){return null==r?void 0:r.reduce(eE,1)},[r]),a=null==r?void 0:r.agent.state,o=(0,n.useMemo)(function(){return a&&i?eS.Observable.combine(a,i):null},[a,i]),l=(0,n.useCallback)(function(t){var n=(0,s._)(t,2),r=n[0];n[1].createdDatabase&&(null==r?void 0:r.state)===u.AgentRunState.AGENT_STATE_RUNNING&&e()},[e]);(0,eC.useObserver)(o,{next:l})}var eE={direction:"reverse",state:{createdDatabase:!1},reducer:function(e,t){if(e.sender.type!==u.UserType.AI)return!1;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return!1;var r=n.agentTimelineEventContents.toolData;return(null==r?void 0:r.$kind)==="createPostgresqlDatabaseData"&&(t.lastCreationEventId!==e.id&&(t.createdDatabase=!0,t.lastCreationEventId=e.id),!1)}};e.s(["default",()=>eT],239296),e.i(148382);var eR=e.i(400081);function eI(){var e=(0,eR.usePid2InternalsContextDoNotUseOrYouWillBeFired)();(0,n.useEffect)(function(){},[e])}e.s(["default",()=>eI],829960);var eA=e.i(394212),eP=e.i(167626),eD=e.i(752394);function eO(){(0,eP._)(document.activeElement,HTMLElement)&&document.activeElement.blur()}function eN(e){var t=e.fs,r=e.openMultipleFiles,i=e.openMultipleURLs,a=e.waitForFileClose,o=e.isMobileWorkspace,s=void 0!==o&&o,l=(0,g.default)(a),u=(0,n.useCallback)(function(e){var n=e.filename,i=e.waitForClose;return(0,k._)(function(){var e;return(0,S._)(this,function(a){switch(a.label){case 0:if(!s)return[3,2];if(!n.endsWith(".git/COMMIT_EDITMSG"))return r({paths:[n]}),[2];return e=window.prompt("Enter a commit message"),[4,t.writeFile(n,null!=e?e:"")];case 1:case 4:return a.sent(),[2];case 2:if(eO(),r({paths:[n]}),!i||!l.current)return[2];return[4,l.current(n)];case 3:return a.sent(),[4,t.flush()]}})})()},[t,s,r,l]);(0,M.usePid2)(function(e,t){var n=t.session,a=t.signal;return(0,k._)(function(){var t,o,s,l,c,d,f,p,h,m,g,x,y,b;return(0,S._)(this,function(w){switch(w.label){case 0:o=(t=e.replspaceApi.init.stream({session:n.from},{signal:a})).reqWritable,s=t.resReadable,l=!1,c=!1,w.label=1;case 1:w.trys.push([1,12,13,18]),f=(0,eA._)(s),w.label=2;case 2:return[4,f.next()];case 3:if(!(l=!(p=w.sent()).done))return[3,11];if(!(h=p.value).ok)return[3,10];switch(h.payload.$kind){case"openFile":return[3,4];case"openMultipleFiles":return[3,6];case"openMultipleURLs":return[3,7];case"getSSHToken":return[3,8]}return[3,10];case 4:return[4,u(h.payload)];case 5:return w.sent(),h.payload.waitForClose&&o.write({$kind:"closeFile",filename:h.payload.filename,nonce:h.payload.nonce}),[3,10];case 6:return h.payload.files.length>0&&(eO(),r({paths:h.payload.files})),[3,10];case 7:return h.payload.urls.length>0&&(eO(),i({urls:h.payload.urls})),[3,10];case 8:return g=(m=h.payload).nonce,x=m.replId,[4,(0,eD.fetchReplSshToken)({replId:x})];case 9:return"success"!==(y=w.sent()).type?o.write({$kind:"sshToken",nonce:g,error:y.message}):o.write({$kind:"sshToken",nonce:g,token:y.data.token,SSHHostname:y.data.ssh_hostname}),[3,10];case 10:return l=!1,[3,2];case 11:return[3,18];case 12:return b=w.sent(),c=!0,d=b,[3,18];case 13:if(w.trys.push([13,,16,17]),!(l&&null!=f.return))return[3,15];return[4,f.return()];case 14:w.sent(),w.label=15;case 15:return[3,17];case 16:if(c)throw d;return[7];case 17:return[7];case 18:return[2]}})})()},[i,r,u])}e.s(["default",()=>eN],387524);var eM=e.i(402880);function eL(){var e=(0,n.useRef)(null),t=(0,m.useFlag)({controlName:"flag-free-plan",default:!1}),r=(0,m.useFlag)({controlName:"flag-agent-freemium-sync-throttle-ms",type:"number",default:1e7}),i=(0,s._)((0,eM.useGetAgentFreeUsageV1LazyQuery)({fetchPolicy:"network-only",ssr:!1}),1)[0],a=(0,s._)((0,eM.useGetAgentFreeUsageV2LazyQuery)({fetchPolicy:"network-only",ssr:!1}),1)[0];(0,f.useChatHook)("received-event",function(){if(t){var n=Date.now();e.current&&n-e.current.getTime()<r||(e.current=new Date,a({variables:{incremental:!0}}))}}),(0,f.useChatHook)("received-completed-event",function(e){var n,r=e.event.contents.contents;(0,c.isKind)(r,"agentTimelineEventContents")&&(null==(n=r.agentTimelineEventContents.toolData)?void 0:n.$kind)==="commitData"&&(t?a({variables:{incremental:!1}}):i())})}e.s(["useSyncAgentFreemiumUsage",()=>eL],416406);var eB=e.i(64386),eV=e.i(886513),eF=e.i(145864);function eU(){var e=(0,f.useChatter)(),t=(0,h.useObservableMemo)(function(){return e.sessions.agent.all.list.select(function(e){return e.length<=1?e[0]:null})},[e.sessions]),r=(0,eF.useSetAgentPlanApprovalState)(),i=(0,eF.useAgentPlanApprovalState)(),a=(0,eF.useSetProposedPlan)(),o=(0,eF.useSetApprovedPlan)(),s=(0,_.useAgentRunState)(),l=(0,h.useObservableMemo)(function(){return null==t?void 0:t.reduce(eG,"global")},[t]);(0,n.useEffect)(function(){if(void 0!==t&&"approved"!==i){if(null===t)return void r("approved");if("revising"!==i){if(null==l?void 0:l.approvedPlan){r("approved"),o(l.approvedPlan),a(l.proposedPlan);return}(null==l?void 0:l.proposedPlan)&&(l.proposedPlan.eventState===u.EventState.IN_PROGRESS?l.lastEventWasPlan?r("generating"):r("iterating"):l.lastEventWasPlan?r("awaiting-approval"):r("iterating"),a(l.proposedPlan))}}},[t,i,s,l,r,a,o])}var eG={direction:"forward",state:{proposedPlan:void 0,approvedPlan:void 0,foundFirstMessage:!1,lastEventWasPlan:!1},debug:{name:"AgentPlanReducer"},reducer:function(e,t){if(!t.foundFirstMessage&&(0,E.isEventContentsKind)(e,"messageEventContents")&&e.sender.type===u.UserType.USER){t.foundFirstMessage=!0;var n=e.contents.contents,r=(0,c.unkind)(n).agentConfig;if(r&&(null==r?void 0:r.agentMode)!==u.AgentMode.AGENT_MODE_INITIAL_PLANNING)return!1}if((0,E.isEventContentsKind)(e,"approvePlanEventContents")){var i=e.contents.contents,a=(0,c.unkind)(i);return(t.lastEventWasPlan=!1,t.proposedPlan&&t.proposedPlan.eventId===a.planEventId)?(t.approvedPlan=(0,eB._)((0,Z._)({},t.proposedPlan),{requiresApproval:!1}),!1):void 0}if((0,E.isEventContentsKind)(e,"agentPlanEventContents")){var o=(0,c.unkind)(e.contents.contents),s=o.objective,l=o.stackBlueprint,d=o.planId,f=(0,eV._)(o,["objective","stackBlueprint","planId"]),p=(0,eB._)((0,Z._)({},f),{planId:d,stackBlueprint:l,eventCreatedAt:e.created,eventState:e.state,objective:s.description,supportsVisualPreview:P(l),eventId:e.id});if(t.lastEventWasPlan=!0,p.requiresApproval)t.proposedPlan=p;else if(t.approvedPlan=p,t.approvedPlan.eventState===u.EventState.COMPLETE)return!1;return}(0,E.isEventAgentToolNamed)(e,"end_of_run_summary")||(t.lastEventWasPlan=!1)}};e.s(["useSyncAgentInitialPlanningState",()=>eU],440560);var e$=e.i(304277);function eH(){var e=(0,J._)(["\n  query isWebDesignMockup($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isWebDesignMockup\n        }\n      }\n    }\n  }\n"]);return eH=function(){return e},e}function ez(){var e=(0,J._)(["\n  mutation updateIsWebDesignMockup($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isWebDesignMockup\n        }\n      }\n    }\n  }\n"]);return ez=function(){return e},e}e.i(566901);var eW={},eq=(0,ee.gql)(eH()),eK=(0,ee.gql)(ez()),eY=e.i(423111);function eQ(){var e,t,r,a,o,l,u,c,d,f,p,h,m,g,x=(0,ea.default)(),y=(0,s._)((t=(e=(0,s._)((0,n.useState)(!0),2))[0],r=e[1],o=(a=(0,s._)((0,n.useState)(null),2))[0],l=a[1],u=(0,i.default)().dotReplit,c=(0,U.usePid2Callback)(function(e){return function(){return e.agentReplConfig.getReplConfig.rpc({})}},[]),(0,n.useEffect)(function(){return u.watch(function(){return(0,k._)(function(){var e;return(0,S._)(this,function(t){switch(t.label){case 0:if(!c)return[2];return[4,c()];case 1:if(!(e=t.sent()).ok||void 0===e.payload.mockupState||"PENDING"===e.payload.mockupState)return r(!1),l(null),[2];return r(!1),l(e.payload.mockupState),[2]}})})()})},[u,c]),[t,o]),2),b=y[0],w=y[1],_="MOCKUP"===w,C=(d={variables:{replId:x}},f=(0,Z._)({},eW,d),e$.useQuery(eq,f)),j=C.data,T=C.loading,E=(null==j||null==(h=j.getRepl)?void 0:h.__typename)==="Repl"&&null!=(g=null==(m=j.getRepl.config)?void 0:m.isWebDesignMockup)&&g,R=(0,s._)((p=(0,Z._)({},eW,void 0),et.useMutation(eK,p)),1)[0],I=(0,eY.useSetInProgressMockupToAppGraduation)();(0,n.useEffect)(function(){b||T||null===w||_!==E&&R({variables:{input:{id:x,isWebDesignMockup:_}}})},[b,w,_,T,E,x,R]),(0,n.useEffect)(function(){T||E||I(!1)},[T,E,I])}e.s(["useSyncAgentWebDesignMockupState",()=>eQ],985430);var eX=e.i(400082);function eZ(){var e=(0,i.default)().git,t=(0,eX.usePid2Session)();(0,n.useEffect)(function(){e.setSession(null==t?void 0:t.from)},[e,null==t?void 0:t.from])}function eJ(){(0,n.useEffect)(function(){var e=null;return!function t(){if(window.performance.memory){var n=window.performance.memory,r=n.jsHeapSizeLimit,i=n.totalJSHeapSize,a=n.usedJSHeapSize,o=window.performance.now();I.logger.info("perf:browser_memory",{jsHeapSizeLimit:r,totalJSHeapSize:i,usedJSHeapSize:a,timeElapsed:o}),e=setTimeout(t,-(5*Math.log(Math.random())*6e4))}}(),function(){e&&clearTimeout(e)}},[])}e.s(["default",()=>eZ],752310),e.s(["default",()=>eJ],741740);var e0=e.i(61524),e1=e.i(858248),e2=e.i(709485),e3=new Set([3e3,3001,3002,3003,3306,4e3,4200,5e3,5432,5173,6e3,6800,7e3,7001,8e3,8008,8080,8081,8888,9e3,9001,1e4,25565,25577,8887,27017,27018]);function e5(){var e=(0,i.default)().container,t=(0,e0.usePreferences)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,r=(0,ea.default)();(0,n.useEffect)(function(){return e.onPortOpened(function(e){var n=e.port,i=e.address,a=e.isForwarded,o=e.isVnc,s=e.externalPort;a?(0,e1.track)(e2.events.WORKSPACE,{action:"port_opened",type:o?"vnc":"webview",replId:r,port:n,externalPort:s,address:i,webviewAutoOpenOnPortOpened:t}):(0,e1.track)(e2.events.WORKSPACE,{action:"unforwarded_port_opened",port:n,isCommon:e3.has(n),address:i,type:o?"vnc":"webview",replId:r,externalPort:s})})},[e,r,t])}e.s(["default",()=>e5],927938);var e4=e.i(561979),e8=e.i(827444),e6=e.i(641326),e7=e.i(924004),e9=new Set;function te(e){var t=e.workspaceType,r=(0,ea.default)(),a=(0,i.default)(),o=a.dotReplit,s=a.container;(0,n.useEffect)(function(){if(!e9.has(r)){e9.add(r);var e=o.watch(function(n){if(!n.error||n.error!==e6.DotReplitErrors.Disconnected){try{var r=s.getConnectionMetadata();if(!r||!r.token)throw Error("Expected token in measure call.");!function(e){var t=e.workspaceType,n=e.parsedToken,r=!!window.performance.getEntriesByName(e8.performanceMarks.pageNavStart,"mark").length,i={ssr:!r,workspaceType:t,tokenCluster:n.cluster},a="time to code";window.performance.measure(a,r?e8.performanceMarks.pageNavStart:void 0);var o=window.performance.getEntriesByName(a,"measure")[0];if(!o)return I.logger.info("Could not obtain measure for time to code",i);var s="page invisible fetch connection metadata",l=o.duration;window.performance.getEntriesByName(e8.performanceMarks.fetchConnectionMetadataPageInvisibleStart,"mark").length&&(window.performance.measure(s,e8.performanceMarks.fetchConnectionMetadataPageInvisibleStart,e8.performanceMarks.fetchConnectionMetadataPageInvisibleEnd),l-=window.performance.getEntriesByName(s,"measure")[0].duration,window.performance.clearMeasures(s),window.performance.clearMarks(e8.performanceMarks.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(e8.performanceMarks.fetchConnectionMetadataPageInvisibleEnd)),I.logger.time("time to code minus page invisible",l,i),I.logger.time("time to code with page invisible",o.duration,i),window.performance.clearMeasures(a),e4.datadogRum.addTiming("time_to_code_minus_page_invisible",l),e4.datadogRum.addTiming("time_to_code_with_page_invisible",o.duration)}({workspaceType:t,parsedToken:(0,e7.parseToken)(r.token)})}catch(e){I.logger.info("Could not measure time to code",{workspaceType:t,e:e,dotReplitResult:n.error?n.error:"success"})}e()}});return e}},[r,t,o,s])}function tt(){var e=(0,J._)(["\n  subscription WorkspaceUserCanWrite($replId: String!) {\n    currentUserCanWrite(replId: $replId)\n  }\n"]);return tt=function(){return e},e}function tn(){var e=(0,J._)(["\n  query HeliumMigrationStatus($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        heliumMigrationStatus {\n          isUsingHelium\n          shouldMigrateToHelium\n        }\n      }\n    }\n  }\n"]);return tn=function(){return e},e}e.s(["default",()=>te],551544);var tr={},ti=(0,ee.gql)(tt()),ta=(0,ee.gql)(tn()),to=e.i(903381),ts=e.i(33740),tl=e.i(956111);function tu(){var e,r,a,o,s,l,u=(0,t.useRouter)(),c=(0,i.default)().fs,d=(0,ea.default)(),f=(e={variables:{replId:d}},r=(0,Z._)({},tr,e),eu.useSubscription(ti,r)).data,p=(0,tl.parseQueryParam)(u.query.skipHeliumMigration,"boolean"),h=(null==f?void 0:f.currentUserCanWrite)===!1,m=(a={variables:{replId:d},fetchPolicy:"no-cache"},o=(0,Z._)({},tr,a),e$.useQuery(ta,o)),g=m.data,x=m.loading,y=(null==g?void 0:g.getRepl.__typename)==="Repl"?g.getRepl.heliumMigrationStatus:null,b=null!=(s=null==y?void 0:y.shouldMigrateToHelium)&&s,w=null==(l=null==y?void 0:y.isUsingHelium)||l,_=x||b&&!w;(0,n.useEffect)(function(){h&&window.location.reload()},[h]);var k=(0,n.useCallback)(function(){return!p&&_||h||c.getStatus()===to.FsStatus.Clean?ts.PreventNavigationOptions.NavigateAnyway:ts.PreventNavigationOptions.PromptUser},[c,h,p,_]);(0,ts.default)({shouldPreventNavCb:k})}e.s(["default",()=>tu],136780);var tc=e.i(223808);function td(e){!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;(0,n.useEffect)(function(){if(null!=t)return t.portsState.subscribe((0,tc.default)(function(t){if(null!=t){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.isOpen&&!s.configuration.isVnc)return void e.set(!0)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}e.set(!1)}},r))},[t,e,r])}((0,eY.useWebviewPortOpenedObservable)(),e)}e.i(545082),e.s(["default",()=>td],604026)},425188,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(389959),i=e.i(161322),a=e.i(969664),o=e.i(98816),s=e.i(441329),l=e.i(316699),u=e.i(649960),c=e.i(86159);e.i(545082);var d=e.i(423111),f=e.i(878420),p=e.i(971131),h=e.i(967629),m=e.i(480028),g=e.i(613355),x=g.DefaultModalZIndex-1;function y(e){var i,a,o,s,c=e.targetElement,d=e.transparent,g=e.disableAnimation,y=(a=(i=(0,t._)((0,r.useState)(null),2))[0],o=i[1],s=(0,u.default)(function(){c&&o({rect:c.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},{type:"throttle",wait:100}),(0,r.useEffect)(function(){c&&s(c)},[c,s]),(0,r.useEffect)(function(){if(c){var e=(0,l.default)(function(){o({rect:c.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e),e.cancel()}}},[c]),a);if(null==y||null==c)return null;var w=(0,h.css)({backgroundColor:d?"transparent":m.tokens.backgroundOverlay,zIndex:x,position:"fixed",transition:g?"all":"all 0.5s ease-out"});return(0,p.createPortal)((0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{id:"wat",css:[b((0,f._)({side:"left-top"},y)),w]}),(0,n.jsx)("div",{css:[b((0,f._)({side:"top-right"},y)),w]}),(0,n.jsx)("div",{css:[b((0,f._)({side:"right-bottom"},y)),w]}),(0,n.jsx)("div",{css:[b((0,f._)({side:"bottom-left"},y)),w]})]}),document.body)}function b(e){var t=e.side,n=e.rect,r=e.docWidth,i=e.docHeight;switch(t){case"left-top":return(0,h.css)({top:0,left:0,width:Math.max(0,n.left),height:Math.max(0,n.bottom)});case"top-right":return(0,h.css)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.left),"px)"),height:Math.max(0,n.top)});case"right-bottom":return(0,h.css)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.top),"px)")});case"bottom-left":return(0,h.css)({bottom:0,left:0,width:Math.max(0,n.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.bottom),"px)")})}}var w=e.i(109858),_=e.i(739521),k=e.i(690821);function S(){var e,t,r=(0,c.useTourModal)(),i=r.activeStep,a=r.goto,o=r.totalSteps,s=r.currentStepIndex,l=r.done;if(null==i)return null;var u=null!=(t=null==(e=i.modalConfig)?void 0:e.width)?t:320;return(0,n.jsx)(_.Modal,{preventClose:!0,isOpen:!0,onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,transparent:!0,children:(0,n.jsx)(k.Tour,{title:i.hideTitle?void 0:i.title,"aria-label":i.title,subtitle:i.subtitle,icon:i.icon,content:function(){return(0,n.jsx)(n.Fragment,{children:"function"==typeof i.content?(0,n.jsx)(i.content,{}):i.content})},hideCloseButton:i.hideCloseButton,hideNavigation:i.hideNavigation,onDismiss:function(){return l()},currentStepIndex:s,onCurrentStepChange:a,totalSteps:o,cypressCloseData:"tour-popover-close-button",compact:!0,colorway:i.colorway,containerStyle:{width:u}})})}var C=e.i(64386),j=e.i(32988),T=e.i(672963),E=e.i(446530);e.i(399144);var R=x+1;(0,E.cssRecord)({inlinePlaceholder:[g.rcss.visibility.hidden,{pointerEvents:"none"}],portal:[g.rcss.position.absolute,g.rcss.zIndex(R)]});var I=e.i(751273);function A(e){var i,a=e.targetElement,o=e.activeStep,s=e.goto,l=e.currentStepIndex,c=e.totalSteps,d=e.done,h=e.disableAnimation,g=e.placement,x=e.offset,y=e.cypressCloseData,b=e.onClickOutside,w=e.innerRef,_=e.width,S=e.colorway,E=void 0===S?"primary":S,A=e.doneText,P=e.hideIfPopperReferenceHidden,D=(0,t._)((0,r.useState)(null),2),O=D[0],N=D[1],M=(0,t._)((0,r.useState)(null),2),L=M[0],B=M[1],V=(0,j.usePopper)(a,O,{placement:void 0===g?"right":g,modifiers:[{name:"arrow",options:{element:L,padding:8}},{name:"offset",options:{offset:void 0===x?[0,16]:x}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),F=(0,r.useCallback)(function(){var e;null==(e=V.update)||e.call(V)},[V]),U=(0,u.default)(F,{type:"throttle",wait:100});(0,r.useEffect)(function(){U(a)},[a,U]),(0,r.useImperativeHandle)(w,function(){return{updatePosition:function(){F()}}});var G=(0,T.default)(function(){b&&b()},[b]);return(0,p.createPortal)((0,n.jsxs)("div",(0,C._)((0,f._)({ref:function(e){G.current=e,N(e)},style:V.styles.popper,css:(0,f._)({transition:h?"all":"all 0.5s ease-out",zIndex:R+1,width:null!=_?_:320},void 0===P||P?{'&[data-popper-reference-hidden="true"]':{visibility:"hidden",pointerEvents:"none"}}:{})},V.attributes.popper),{children:[(0,n.jsx)(k.Tour,{title:o.title,subtitle:o.subtitle,icon:o.icon,content:o.content,onDismiss:d,currentStepIndex:l,onCurrentStepChange:s,totalSteps:c,cypressCloseData:void 0===y?"tour-popover-close-button":y,hideCloseButton:o.hideCloseButton,hideNavigation:o.hideNavigation,colorway:null!=(i=o.colorway)?i:E,doneText:A}),(0,n.jsx)("span",{style:V.styles.arrow,css:[I.arrowCss,{"&::after":E&&!1!==o.colorway?{backgroundColor:m.colormap[E].dimmest,border:"1px solid "+m.colormap[E].dimmer}:{backgroundColor:m.tokens.backgroundDefault,border:"1px solid "+m.tokens.backgroundHighest}}],ref:B})]})),document.body)}var P=w.tourContext.Provider;function D(e){var l,u,c,f,p,h,m,g,x,b,_=e.children,k=e.tour,C=e.onStep,j=e.onDone,T=e.colorway,E=(0,s.useIsInMobileWorkspace)(),R=(0,t._)((0,r.useState)(function(){return(0,w.createTourStore)({tour:k})}),1)[0],I=(0,i.useAtomValue)(w.activeStepAtom,{store:R}),D=(0,i.useAtomValue)(w.currentStepIndexAtom,{store:R});if(-1===D)throw Error("Current tour step is not in tour steps");var O=(0,t._)((0,a.useTourServiceDismissTourMutation)({variables:{name:k.id},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen2:{__typename:"TourSeen",id:k.id,seen:!0}}}),1)[0],N=(0,i.useSetAtom)(w.isDoneAtom,{store:R}),M=(0,r.useRef)();(0,r.useEffect)(function(){M.current=I},[I]);var L=(0,i.useSetAtom)(w.gotoAtom,{store:R}),B=(0,i.useAtomValue)(w.currentStepElementAtom,{store:R}),V=(0,i.useAtomValue)(w.showStepAtom,{store:R}),F=(0,i.useSetAtom)(w.restartAtom,{store:R});window.startTour=function(){console.log("starting tour:",k.id,"from",k.steps[0].id),F()};var U=(0,i.useAtomValue)(w.filteredCurrentStepIndexAtom,{store:R}),G=(0,i.useAtomValue)(w.totalStepsAtom,{store:R}),$=(0,o.default)(C),H=(0,o.default)(j);(0,r.useEffect)(function(){return R.sub(w.activeStepIdAtom,function(){var e,t=R.get(w.activeStepIdAtom);t&&(null==(e=$.current)||e.call($,t))})},[R,$,H]);var z=(0,r.useRef)(!1);(0,r.useEffect)(function(){var e;z.current||!I||I.id===k.steps[0].id&&(null==(e=$.current)||e.call($,I.id),z.current=!0)},[I,$,k]),(0,r.useEffect)(function(){return R.sub(w.isDoneAtom,function(){var e,t=R.get(w.isDoneAtom),n=R.get(w.activeStepIdAtom);t&&(n&&(null==(e=H.current)||e.call(H,n)),O())})},[R,O,H]);var W=(0,a.useTourServiceToursSeenQuery)({variables:{tours:k.id},onCompleted:function(e){var t;R.set(w.isDoneAtom,!!(null==e||null==(t=e.currentUser)?void 0:t.toursSeen[0].seen))}}).loading,q=(0,i.useSetAtom)(w.isLoadingAtom,{store:R});(0,r.useEffect)(function(){q(W)},[q,W]);var K=(0,i.useAtomValue)(w.activeStepAtom,{store:R}),Y=(0,i.useSetAtom)(w.nextAtom,{store:R}),Q=(0,i.useAtomValue)(w.tourPausedReasonAtom,{store:R});if(u=(l={targetElement:B,activeTourStep:K,goToNextStep:Y,setTourPausedReason:(0,i.useSetAtom)(w.tourPausedReasonAtom,{store:R})}).targetElement,c=l.activeTourStep,f=l.goToNextStep,p=l.setTourPausedReason,h=(0,d.useWebviewPortOpenedObservable)(),m=(0,r.useRef)(void 0),g=(0,r.useCallback)(function(){(null==c?void 0:c.waitToAdvanceOn)==="webviewPortOpened"?(p("async"),m.current=h.subscribe(function(e){e&&p("user")})):f()},[null==c?void 0:c.waitToAdvanceOn,f,p,h]),(0,r.useEffect)(function(){if(null!=u&&null!=c&&c.advanceOnTargetClick)return u.addEventListener("click",g),function(){var e;u.removeEventListener("click",g),null==(e=m.current)||e.call(m),m.current=void 0}},[u,c,g]),!V||!I)return(0,n.jsx)(P,{value:R,children:_});if(I.isModal)return(0,n.jsxs)(P,{value:R,children:[(0,n.jsx)(S,{}),_]});var X=0===D||!!(null==(x=M.current)?void 0:x.isModal)||!!(null==(b=k.options)?void 0:b.disableAnimation);return(0,n.jsxs)(P,{value:R,children:[B?(0,n.jsxs)(n.Fragment,{children:["user"===Q?null:(0,n.jsx)(y,{targetElement:B,transparent:I.hideOverlay||"async"===Q,disableAnimation:X}),!I.hideTooltip&&(0,n.jsx)(A,{targetElement:B,activeStep:I,currentStepIndex:U,done:function(){return N(!0)},goto:function(e){L(e+D-U)},totalSteps:G,disableAnimation:X,colorway:T,doneText:k.doneText,hideIfPopperReferenceHidden:!E})]}):null,_]})}e.s(["TourRoot",()=>D],425188)},61200,e=>{"use strict";var t,n=e.i(297083),r=e.i(817556),i=e.i(992785),a=e.i(866408),o=e.i(205104),s=e.i(346715),l=e.i(671901),u=((t={}).USER_JOIN="USER_JOIN",t.USER_LEAVE="USER_LEAVE",t.USERS_UPDATE="USERS_UPDATE",t.USER_OPENED_FILE="USER_OPENED_FILE",t.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",t.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED",t),c=e.i(520839);function d(e){var t=e.container,d=e.onCommand,f=e.getColorForUser,p=(0,a.default)();p.setMaxListeners(1/0);var h=[],m=null,g=[],x={},y=null;function b(){return(0,n._)(function(){return(0,r._)(this,function(e){return y?[2,y]:[2,new Promise(function(e){p.once(u.USERS_UPDATE,function(){if(!y)throw Error("Expected presenceChannel to be set");e(y)})})]})})()}function w(e){(0,i.default)(m,e)||(m=e,p.emit(u.FOLLOWED_USER_CHANGED,e))}function _(){return(0,n._)(function(){var e,t;return(0,r._)(this,function(n){switch(n.label){case 0:if(!m)throw Error("No user to unfollow");return e=m,w(null),[4,b()];case 1:return t=n.sent(),e.sessions.forEach(function(e){t.send({unfollowUser:{session:e.id}})}),[2]}})})()}return t.openChannel({service:"presence",name:"presencer"},function(e){var t=e.channel;return t.onCommand(function(e){null==d||d(e);var t={cmd:e,emitter:p,activeUsers:h,userIdToFile:x,followedUser:m,setFollowedUser:w,followingUsers:g,getColorForUser:f};switch(e.body){case"roster":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,a=e.followedUser,o=e.followingUsers,l=e.setFollowedUser,d=e.getColorForUser,f=t.roster;if(f){var p=f.user,h=f.files;if(p&&h){var m=new Set;if(r.splice(0,r.length),p.forEach(function(e){if(e.id&&e.name&&e.roles&&!m.has(e.id)){var t=h.filter(function(t){return t.userId===e.id}).map(function(e){if(!e.session||!e.timestamp)throw Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:(0,c.convertTimestampToNumber)(e.timestamp)}}),n=null==d?void 0:d({userId:e.id});r.push({id:e.id,username:e.name,roles:e.roles,color:null!=n?n:(0,c.getLeastUsedColor)(r),sessions:t}),m.add(e.id)}}),r.forEach(function(e){i[e.id]=(0,c.getActiveFileForUser)(e)}),n.emit(u.USERS_UPDATE,(0,s._)(r)),o.filter(function(e){return!r.some(function(t){return t.id===e.id})}).forEach(function(e){var t=o.indexOf(e);-1!==t&&(o.splice(t,1),n.emit(u.FOLLOWING_USERS_CHANGED,{followingUsers:(0,s._)(o),user:e,type:"unfollow"}))}),a){if(!r.some(function(e){return e.id===a.id}))return l(null);var g=i[a.id];n.emit(u.USER_OPENED_FILE,{user:a,file:g})}}}}(t);break;case"join":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,a=e.getColorForUser,o=t.join;if(o.id&&o.name&&o.roles&&o.session){var d=r.find(function(e){return e.id===o.id}),f=Math.floor(Date.now()/1e3),p=l.google.protobuf.Timestamp.create({seconds:f}),h=(0,c.convertTimestampToNumber)(p);if(d)d.sessions.push({id:o.session,activeFile:null,timestamp:h});else{var m=null==a?void 0:a({userId:o.id}),g={id:o.id,username:o.name,roles:o.roles,color:null!=m?m:(0,c.getLeastUsedColor)(r),sessions:[{id:o.session,activeFile:null,timestamp:h}]};i[o.id]=null,r.push(g),n.emit(u.USER_JOIN,g),n.emit(u.USERS_UPDATE,(0,s._)(r))}}}(t);break;case"part":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,a=e.followedUser,o=e.followingUsers,l=e.setFollowedUser;if(t.part&&t.part.id&&t.part.session){var d=t.part,f=d.id,p=d.session,h=r.findIndex(function(e){return e.id===f}),m=r[h];if(1===m.sessions.length){r.splice(h,1),delete i[m.id],n.emit(u.USER_LEAVE,m),n.emit(u.USERS_UPDATE,(0,s._)(r)),a&&l(null);var g=o.findIndex(function(e){return e.id===m.id});-1!==g&&(o.splice(g,1),n.emit(u.FOLLOWING_USERS_CHANGED,{followingUsers:(0,s._)(o),user:m,type:"unfollow"}))}else{m.sessions=m.sessions.filter(function(e){return e.id!==p});var x=(0,c.getActiveFileForUser)(m);i[m.id]!==x&&(i[m.id]=x,n.emit(u.USER_OPENED_FILE,{user:m,file:x}))}}}(t);break;case"fileOpened":!function(e){var t=e.emitter,n=e.cmd,r=e.activeUsers,i=e.userIdToFile;if(n.fileOpened){var a=n.fileOpened,o=a.userId,s=a.file,l=a.timestamp,d=a.session,f=s||null;if(!o||!l)throw Error("Expected userId and timestamp associated with file opened command");var p=r.find(function(e){return e.id===o});if(!p)throw Error("Expected user with ID ".concat(o));var h=p.sessions.find(function(e){return e.id===d});if(!h)throw Error("Expected session with ID ".concat(h));h.activeFile=f,h.timestamp=(0,c.convertTimestampToNumber)(l),i[o]=f,t.emit(u.USER_OPENED_FILE,{user:p,file:f})}}(t);break;case"followUser":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.followingUsers,a=t.followUser;if(!a.session)throw Error("Expected session associated with follow user");var o=a.session,l=(0,c.getUserForSession)(o,r);i.some(function(e){return e.id===l.id})||(i.push(l),n.emit(u.FOLLOWING_USERS_CHANGED,{followingUsers:(0,s._)(i),user:l,type:"follow"}))}(t);break;case"unfollowUser":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.followingUsers,a=t.unfollowUser;if(!a.session)throw Error("Expected session associated with follow user");var o=a.session,l=(0,c.getUserForSession)(o,r),d=i.findIndex(function(e){return e.id===l.id});-1!==d&&(i.splice(d,1),n.emit(u.FOLLOWING_USERS_CHANGED,{followingUsers:(0,s._)(i),user:l,type:"unfollow"}))}(t);break;case"sessionTimestampUpdated":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,a=t.sessionTimestampUpdated;if(!a.session||!a.timestamp)throw Error("Expected session and tiemstamp associated with update");var o=a.session,s=(0,c.getUserForSession)(o,r),l=i[s.id],d=s.sessions.find(function(e){return e.id===o});if(!d)throw Error("Expected user ".concat(s.id," to have a session with ID ").concat(o));d.timestamp=(0,c.convertTimestampToNumber)(a.timestamp);var f=d.activeFile;f!==l&&(i[s.id]=f,n.emit(u.USER_OPENED_FILE,{user:s,file:f}))}(t)}}),y=t,function(){y=null}}),{onUserLeave:function(e){return p.on(u.USER_LEAVE,e),function(){p.removeListener(u.USER_LEAVE,e)}},onUserJoin:function(e){return p.on(u.USER_JOIN,e),function(){p.removeListener(u.USER_LEAVE,e)}},onActiveUsersChange:function(e){return p.on(u.USERS_UPDATE,e),function(){p.removeListener(u.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return p.on(u.USER_OPENED_FILE,e),function(){p.removeListener(u.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return p.on(u.FOLLOWED_USER_CHANGED,e),function(){p.removeListener(u.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return p.on(u.FOLLOWING_USERS_CHANGED,e),function(){p.removeListener(u.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var t=x[e];if(void 0===t)throw Error("Expected file for user with ID ".concat(e," to be defined"));return t},updateOpenFile:function(e){return(0,n._)(function(){return(0,r._)(this,function(t){switch(t.label){case 0:return[4,b()];case 1:return t.sent().send({openFile:{file:e}}),[2]}})})()},updateSessionTimestamp:function(){return(0,n._)(function(){return(0,r._)(this,function(e){switch(e.label){case 0:return[4,b()];case 1:return e.sent().send({updateSessionTimestamp:{}}),[2]}})})()},followUser:function(e){return(0,n._)(function(){var t,n;return(0,r._)(this,function(r){switch(r.label){case 0:if((null==m?void 0:m.username)===e)throw Error("Already following user with username ".concat(e));if(!m)return[3,2];return[4,_()];case 1:r.sent(),r.label=2;case 2:return[4,b()];case 3:if(t=r.sent(),!(n=h.find(function(t){return t.username===e})))return[2];return w(n),n.sessions.forEach(function(e){t.send({followUser:{session:e.id}})}),[2]}})})()},unfollowUser:_,getActiveUsers:function(){return h},getFollowedUser:function(){return m},getFollowingUsers:function(){return g},getUserIdToFile:function(){return x},getPathToUserIds:function(){var e=new Map;return h.forEach(function(t){var n=t.id,r=x[n];r&&function t(n,r){if(""!==n){e.has(n)||e.set(n,[]);var i,a=e.get(n);if(!a)throw Error("Expected user Ids");a.some(function(e){return e===r})||(null==(i=e.get(n))||i.push(r),t((0,o.getParentPath)(n),r))}}(r,n)}),e}}}e.s(["default",()=>d],61200)},508545,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(530658),i=e.i(389959),a=e.i(231693),o=e.i(464458),s=e.i(19004),l=e.i(416558),u=e.i(17609),c=e.i(748855),d=e.i(858248),f=e.i(792e3),p=e.i(534518),h=e.i(354507),m=e.i(886383),g=e.i(801127),x=e.i(61200),y=e.i(752394),b=e.i(86774);function w(e){var w=(0,r._)((0,i.useState)(null),2),_=w[0],k=w[1];return(0,i.useEffect)(function(){var r,i,w,_,S,C,j,T,E,R,I,A,P,D,O,N,M,L,B,V,F,U,G=function(e){var t=a.context.active();if(e.openTelemetryTracing)return(0,o.createSpanFromContext)(t,"workspace.useCreateServices")}(e),$=(i=(r=(0,n._)((0,t._)({},e),{ctx:null==G?void 0:G.childCtx})).onUnrecoverableError,w=r.openMultipleFiles,_=r.openMultipleURLs,S=r.enableMultipleLSPClientsPerFile,C=r.enableReplspaceSshTokenPassthrough,j=r.onPresenceCommand,T=r.getColorForUser,E=r.openTelemetryTracing,R=r.ctx,I=(0,f.default)({onUnrecoverableError:i,ctx:R}),A=(0,p.default)({container:I}),P=(0,x.default)({container:I,onCommand:j,getColorForUser:T}),D=(0,s.default)({container:I,fs:A,ctx:R}),O=(0,l.default)({container:I}),N=(0,c.default)({container:I,dotReplit:D}),M=(0,u.default)({container:I,forceTrace:E,track:d.track}),L=(0,y.default)({container:I,fs:A,openMultipleFiles:w,openMultipleURLs:_,enableReplspaceSshTokenPassthrough:C}),B=(0,g.createPortsService)({container:I,dotReplit:D}),V=(0,m.createLSPNixService)({container:I,toolchain:N,fs:A,enableMultipleLSPClientsPerFile:void 0!==S&&S}),F=(0,h.default)({container:I,fs:A}),U=(0,b.default)({container:I}),{presence:P,packager:M,container:I,fs:A,dotReplit:D,nixService:O,lspnix:V,git:F,replspaceApi:L,toolchain:N,ports:B,secrets:U});return null==G||G.span.end(),k($),function(){k(null),setTimeout(function(){$.container.destroy()},500)}},[e]),_}e.s(["useCreateServices",()=>w])},468448,e=>{"use strict";var t=e.i(276385),n=e.i(87995),r=e.i(485273),i=e.i(761201),a=e.i(956111),o=e.i(613355),s=e.i(739521),l=e.i(960178),u=e.i(625484);function c(){var e=(0,r.useRouter)(),c=(0,a.useQueryParam)("didMigrateToNix","boolean");return(0,t.jsx)(s.Modal,{isOpen:c,onRequestClose:function(){(0,a.updatePathWithQueryParams)({router:e,params:[{mode:"delete",key:"didMigrateToNix"}]})},centered:!0,children:(0,t.jsxs)(u.View,{gap:16,children:[(0,t.jsx)(l.Header,{level:1,variant:"headerDefault",children:"We've upgraded your App!"}),(0,t.jsxs)(l.Text,{children:["Your App is now using"," ",(0,t.jsx)(n.default,{href:"https://blog.replit.com/nix",children:"the latest infrastructure"})," ","which unlocks powerful new features."]}),(0,t.jsxs)(u.SpecializedView.ul,{css:o.rcss.colWithGap(4),children:[(0,t.jsx)(u.SpecializedView.li,{children:(0,t.jsxs)(l.Text,{children:[""," ",(0,t.jsx)(n.default,{href:i.LINKS_DOCS.DEPENDENCY_MANAGEMENT,children:"Use 80,000+ system dependencies"})," ","(linux packages) out of the box."]})}),(0,t.jsx)(u.SpecializedView.li,{children:(0,t.jsxs)(l.Text,{children:[""," ",(0,t.jsx)(n.default,{href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"Configure your App"})," ","with more capabilities."]})}),(0,t.jsx)(u.SpecializedView.li,{children:(0,t.jsxs)(l.Text,{children:[""," ",(0,t.jsx)(n.default,{href:i.LINKS_DOCS.DEPENDENCY_MANAGEMENT,children:"Check out this doc"})," ","for a deep dive."]})})]}),(0,t.jsxs)(l.Text,{variant:"small",css:{fontStyle:"italic"},children:["Any overwritten files have been backed up to the same file name with a .backup suffix. If you have any questions, please visit"," ",(0,t.jsx)(n.default,{href:"https://replit.com/community",children:"replit.com/community"})," ","to get help."]}),(0,t.jsx)(l.Text,{multiline:!1,children:"Thank you for your patience"})]})})}e.s(["default",()=>c])},748965,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(389959),i=e.i(62820),a=e.i(19379),o=e.i(873379),s=e.i(529810),l=e.i(446530),u=e.i(613355),c=e.i(140487),d=e.i(739521),f=e.i(960178),p=e.i(625484),h=(0,l.cssRecord)({splitContainer:[u.rcss.mt(8)],text:[u.rcss.mt(8)]}),m=function(){var e=(0,t._)((0,r.useState)(navigator.onLine),2),n=e[0],i=e[1];return(0,r.useEffect)(function(){var e=function(){i(navigator.onLine)};return window.addEventListener("online",e),window.addEventListener("offline",e),function(){window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),n},g=function(){var e=(0,s.default)().container,l=(0,t._)((0,r.useState)(!1),2),u=l[0],g=l[1],x=(0,r.useRef)(!1),y=(0,o.default)(e),b=(0,r.useMemo)(function(){return y===i.ConnectionState.CONNECTED},[y]),w=(0,a.usePageVisibility)(),_=m(),k=(0,r.useCallback)(function(){g(!1)},[]),S=(0,r.useCallback)(function(){location.reload()},[]);return(0,r.useEffect)(function(){if(!x.current&&!b&&w&&_){var e=setTimeout(function(){g(!0),x.current=!0},6e4);return function(){return clearTimeout(e)}}},[b,w,_]),(0,n.jsx)(d.Modal,{isOpen:u,onRequestClose:k,maxWidth:360,centered:!0,children:(0,n.jsxs)(p.View,{gap:8,children:[(0,n.jsx)(f.Header,{level:2,variant:"subheadBig",children:"You are disconnected"}),(0,n.jsx)(f.Text,{css:h.text,children:"Your connection to the server has been lost and reconnection attempts have failed. Please refresh the page to continue."}),(0,n.jsxs)(p.View,{css:h.splitContainer,row:!0,gap:8,justify:"space-between",children:[(0,n.jsx)(c.Button,{text:"Cancel",onClick:k}),(0,n.jsx)(p.View,{row:!0,gap:8,children:(0,n.jsx)(c.Button,{text:"Refresh",onClick:S,colorway:"blue"})})]})]})})};e.s(["DisconnectedModal",()=>g])},982243,e=>{"use strict";e.i(148382);var t=e.i(276385),n=e.i(87995),r=e.i(485273),i=e.i(878420),a=e.i(569384),o=e.i(973245),s=e.i(304277);function l(){var e=(0,a._)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return l=function(){return e},e}e.i(566901);var u={},c=(0,o.gql)(l()),d=e.i(295652),f=e.i(761201),p=e.i(207237),h=e.i(480028),m=e.i(446530),g=e.i(613355),x=e.i(140487),y=e.i(739521),b=e.i(960178),w=e.i(751273),_=e.i(625484),k=(0,m.cssRecord)({staffHelpers:[g.rcss.border({color:h.tokens.accentNegativeDefault,width:1,style:"solid"}),g.rcss.overflow("hidden")]});e.s(["default",0,function(e){var a,o,l,h=e.isOpen,m=(0,r.useRouter)(),g=(a={skip:!h},o=(0,i._)({},u,a),s.useQuery(c,o)).data,S=(0,p.default)(),C=null==g||null==(l=g.currentUser)?void 0:l.isStaff;return(0,t.jsx)(y.Modal,{preventClose:!0,isOpen:h,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,t.jsxs)(_.View,{gap:32,children:[(0,t.jsx)(_.View,{row:!0,gap:16,align:"center",children:(0,t.jsx)(b.Header,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"You cant run this Repl right now."})}),(0,t.jsxs)(_.View,{gap:16,children:[(0,t.jsxs)(b.Text,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,t.jsx)(n.default,{href:f.LINKS_LEGAL.TERMS_OF_SERVICE,children:"Terms of Service"}),"."]}),(0,t.jsx)(b.Text,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),C?(0,t.jsxs)(_.View,{css:k.staffHelpers,gap:8,children:[(0,t.jsxs)(_.View,{row:!0,gap:8,children:[(0,t.jsx)(w.Tooltip,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,t.jsx)(d.default,{})}),(0,t.jsx)(b.Header,{level:3,children:"Debug Info"})]}),(0,t.jsx)(_.View,{children:(0,t.jsxs)(b.Text,{children:["Repl ID ",S," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,t.jsx)(_.View,{children:(0,t.jsxs)(b.Text,{multiline:!1,children:[(0,t.jsx)(n.default,{href:"https://us5.datadoghq.com/logs?query=%40replid%3A".concat(S),children:"All datadog logs"})," ",""," ",(0,t.jsx)(n.default,{href:"https://us5.datadoghq.com/logs?query=%40replid%3A".concat(S,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,t.jsxs)(_.View,{row:!0,gap:16,justify:"end",children:[(0,t.jsx)(x.Button,{text:"Reload",onClick:function(){window.location.reload()}}),(0,t.jsx)(x.Button,{text:"Leave",onClick:function(){m.push("/home","~/")}})]})]})})}],982243)},678814,268999,e=>{"use strict";var t=e.i(346715),n=e.i(276385),r=e.i(909244),i=e.i(965863);function a(e){var a,o=e.repl,s=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,t._)(n.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,i.useActiveFile)(),null==o||null==(a=o.project)?void 0:a.title,o.title);return(0,n.jsx)(r.default,{children:(0,n.jsx)("title",{children:s},"title")})}e.s(["default",()=>a],678814);var o=e.i(721281),s=e.i(878420),l=e.i(64386),u=e.i(530658),c=e.i(87995),d=e.i(389959),f=e.i(269990),p=e.i(222342),h=e.i(207237),m=e.i(341126),g=e.i(700582),x=e.i(446530),y=e.i(613355),b=e.i(140487),w=e.i(91720),_=e.i(739521),k=e.i(960178),S=e.i(625484),C=(0,x.cssRecord)({self:[y.rcss.container("root")],actions:[(0,o._)({},y.container.max(475,"root"),[y.rcss.colWithGap(8),y.rcss.align.end])],buttons:[(0,o._)({},y.container.max(350,"root"),[y.rcss.colWithGap(8),y.rcss.align.end])]}),j=function(){var e=(0,h.default)(),t=(0,f.useConvertedToProjectModalQuery)({variables:{id:e},ssr:!1,context:{noBatch:!0},pollInterval:6e4}),r=t.data,i=t.previousData,a=(0,p.default)(),o=a.showConfirm,x=a.showError,y=(0,u._)((0,g.useCreateProjectFork)({onFork:function(){o("Repl forked, redirecting...")},onError:function(){x("Error creating fork - please try again")}}),2),j=y[0],T=y[1].loading,E=(null==r?void 0:r.getRepl.__typename)==="Repl"?r.getRepl:null,R=(null==i?void 0:i.getRepl.__typename)==="Repl"?i.getRepl:null,I=(null==E?void 0:E.org)?E.org:null,A=(null==E?void 0:E.project)?E.project:null,P=(0,u._)((0,d.useState)(!1),2),D=P[0],O=P[1];return((0,d.useEffect)(function(){var t,n,r,i;if((null==E||null==(t=E.project)?void 0:t.mainRepl)&&R&&E.project.mainRepl.id===e)return(null==(r=R.project)||null==(n=r.mainRepl)?void 0:n.id)&&R.project.mainRepl.id===e||(i=setTimeout(function(){O(!0)},6e3)),function(){i&&clearTimeout(i)}},[e,E,R]),E&&I&&A)?(0,n.jsx)(_.Modal,{isOpen:D,onRequestClose:function(){return O(!1)},centered:!0,children:(0,n.jsxs)(S.View,{css:C.self,gap:16,children:[(0,n.jsx)(k.Header,{level:2,variant:"subheadBig",children:"This Repl is now part of a Project"}),(0,n.jsxs)(k.Text,{children:["This Repl is now the source of truth for a Project called"," ",A.title,". Continued development in this Repl may lead to unexpected changes."]}),(0,n.jsxs)(S.View,{css:C.actions,row:!0,gap:8,justify:"space-between",align:"center",children:[(0,n.jsx)(c.default,{href:"https://docs.replit.com/teams/projects/overview",target:"_blank",children:(0,n.jsx)(k.Text,{children:"Learn more"})}),(0,n.jsxs)(S.View,{css:C.buttons,row:!0,gap:8,children:[(0,n.jsx)(b.Button,{text:"Work in a new fork",onClick:function(){T||j({orgId:I.id,repl:E,forkSource:"convertedToProjectModal"})},disabled:T,loading:T}),(0,n.jsx)(w.ButtonLink,(0,l._)((0,s._)({colorway:"primary"},(0,m.orgProjectLink)({org:I,projectId:A.id})),{text:"Visit Project dashboard"}))]})]})]})}):null},T=function(e){return e.repl.org?(0,n.jsx)(j,{}):null};e.s(["ConvertedToProjectModal",()=>T],268999)},732964,718632,e=>{"use strict";var t=e.i(394212),n=e.i(297083),r=e.i(530658),i=e.i(817556),a=e.i(276385),o=e.i(389959),s=e.i(960933),l=e.i(862927),u=e.i(183035),c=e.i(207237),d=e.i(344188),f=e.i(858248),p=e.i(709485),h=e.i(299798),m=e.i(262962),g=e.i(140487),x=e.i(739521),y=e.i(960178),b=e.i(625484),w=s.Type.Object({targetReplId:s.Type.String(),sourceReplId:s.Type.String(),bucketId:s.Type.String()});function _(){var e=(0,r._)((0,o.useState)(null),2),s=e[0],_=e[1],k=(0,c.default)(),S=(0,m.useCurrentUser)();return(0,h.usePid2)(function(e,r){var a=r.session,o=r.signal;return(0,n._)(function(){var n,r,s,u,c,h,m,g,x,y;return(0,i._)(this,function(i){switch(i.label){case 0:if(!k||!S)return[2];r=(n=e.replspaceApi.init.stream({session:a.from},{signal:o})).resReadable,s=n.reqWritable,u=!1,c=!1,i.label=1;case 1:i.trys.push([1,6,7,12]),m=function(){var e=x.value;if(!e.ok||"requestDefaultBucketAccess"!==e.payload.$kind)return"continue";var t=e.payload.nonce;(0,f.track)(p.events.MODAL_VIEWED,{modalName:"default_bucket_access_modal"}),_(function(){return function(e){if(!e){_(null),s.write({$kind:"allowDefaultBucketAccess",nonce:t,result:{status:"error",message:"user canceled"}});return}(0,d.postJson)("/object-storage/replit/allowDefaultBucketAccess/targetRepl/".concat(encodeURIComponent(k),"/sourceRepl/Dotfiles.").concat(encodeURIComponent(S.username)),{}).then(function(e){l.Value.Check(w,e)?s.write({$kind:"allowDefaultBucketAccess",nonce:t,result:{status:"ok",targetReplId:e.targetReplId,sourceReplId:e.sourceReplId,bucketId:e.bucketId}}):s.write({$kind:"allowDefaultBucketAccess",nonce:t,result:{status:"error",message:JSON.stringify(l.Value.Errors(w,e))}})}).catch(function(e){s.write({$kind:"allowDefaultBucketAccess",nonce:t,result:{status:"error",message:"".concat(e)}})}).finally(function(){_(null)})}})},g=(0,t._)(r),i.label=2;case 2:return[4,g.next()];case 3:if(!(u=!(x=i.sent()).done))return[3,5];m(),i.label=4;case 4:return u=!1,[3,2];case 5:return[3,12];case 6:return y=i.sent(),c=!0,h=y,[3,12];case 7:if(i.trys.push([7,,10,11]),!(u&&null!=g.return))return[3,9];return[4,g.return()];case 8:i.sent(),i.label=9;case 9:return[3,11];case 10:if(c)throw h;return[7];case 11:return[7];case 12:return s.close(),[2]}})})()},[k,S]),(0,a.jsx)(x.Modal,{isOpen:"function"==typeof s,onRequestClose:function(){null==s||s(!1),(0,f.track)(p.events.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"close"}),_(null)},children:(0,a.jsxs)(b.View,{gap:16,children:[(0,a.jsx)(y.Header,{variant:"headerDefault",level:3,children:"Allow Dotfiles App Storage Bucket access"}),(0,a.jsx)(y.Text,{children:"Do you want the App Storage bucket associated with your Dotfiles Repl to be accessible in this Repl? If your Dotfiles Repl has any secrets, they will be accessible to this Repl too."}),(0,a.jsx)(y.Text,{children:"If you did not install the Replit dotfiles support, you should deny this."}),(0,a.jsxs)(b.View,{justify:"end",row:!0,gap:16,children:[(0,a.jsx)(g.Button,{onClick:function(){null==s||s(!1),(0,f.track)(p.events.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"deny"}),_(null)},text:"Deny"}),(0,a.jsx)(g.Button,{onClick:function(){null==s||s(!0),(0,f.track)(p.events.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"confirm"}),_(null)},iconLeft:(0,a.jsx)(u.default,{}),text:"Allow for this Repl",colorway:"primary"})]})]})})}e.s(["DefaultBucketAccessConfirmModal",()=>_],732964);var k=e.i(686356),S=e.i(791675),C=e.i(993796),j=e.i(836102),T=e.i(529810),E=e.i(195680);function R(){var e=(0,T.default)().replspaceApi,s=(0,r._)((0,o.useState)(null),2),l=s[0],c=s[1],d=(0,r._)((0,o.useState)(null),2),m=d[0],w=d[1],_=(0,r._)((0,o.useState)(!1),2),R=_[0],I=_[1],A=(0,k.useGitServiceCurrentUserQuery)().data,P=(null==A?void 0:A.currentUser)||void 0,D=(0,E.useGitProviderImportMode)(),O=(0,C.useFlag)({controlName:"flag-github-connection-migration",default:!1});return(0,o.useEffect)(function(){return e.onConfirmSendToken(function(e){e&&(0,f.track)(p.events.MODAL_VIEWED,{modalName:"git_token_modal"}),w(function(){return e})})},[e]),(0,h.usePid2)(function(e,r){var a=r.session,o=r.signal;return(0,n._)(function(){var n,r,s,l,u,d,h,m,g,x;return(0,i._)(this,function(i){switch(i.label){case 0:r=(n=e.replspaceApi.init.stream({session:a.from},{signal:o})).reqWritable,s=n.resReadable,l=!1,u=!1,i.label=1;case 1:i.trys.push([1,6,7,12]),h=function(){var e=g.value;if(e.ok&&"getGithubToken"===e.payload.$kind){var t,n,i,a,o=e.payload.nonce,s=void 0;if(!(s=O?null!=(n=null==P||null==(t=P.gitHubInfoV2)?void 0:t.accessToken)?n:void 0:null!=(a=null==P||null==(i=P.gitHubInfo)?void 0:i.accessToken)?a:void 0))return r.write({$kind:"githubToken",nonce:o}),"continue";if(R||"github"===D)return r.write({$kind:"githubToken",token:s,nonce:o}),"continue";(0,f.track)(p.events.MODAL_VIEWED,{modalName:"git_token_modal"}),c(S.GitProfileProvider.GITHUB),w(function(){return function(e){if(!e){w(null),c(null),r.isWritable()&&r.write({$kind:"githubToken",nonce:o});return}r.isWritable()&&r.write({$kind:"githubToken",token:s,nonce:o}),w(null),c(null),I(!0)}})}if(e.ok&&"getBitbucketToken"===e.payload.$kind){var l,u,d=e.payload.nonce,h=null!=(u=null==P||null==(l=P.bitbucketInfo)?void 0:l.accessToken)?u:void 0;if(!h)return r.write({$kind:"bitbucketToken",nonce:d}),"continue";if(R||"bitbucket"===D)return r.write({$kind:"bitbucketToken",token:h,nonce:d}),"continue";(0,f.track)(p.events.MODAL_VIEWED,{modalName:"git_token_modal"}),c(S.GitProfileProvider.BITBUCKET),w(function(){return function(e){if(!e){w(null),c(null),r.isWritable()&&r.write({$kind:"bitbucketToken",nonce:d});return}r.isWritable()&&r.write({$kind:"bitbucketToken",token:h,nonce:d}),w(null),c(null),I(!0)}})}if(e.ok&&"getGitlabToken"===e.payload.$kind){var m,x,y=e.payload.nonce,b=null!=(x=null==P||null==(m=P.gitLabInfo)?void 0:m.accessToken)?x:void 0;if(!b)return r.write({$kind:"gitlabToken",nonce:y}),"continue";if(R||"gitlab"===D)return r.write({$kind:"gitlabToken",token:b,nonce:y}),"continue";(0,f.track)(p.events.MODAL_VIEWED,{modalName:"git_token_modal"}),c(S.GitProfileProvider.GITLAB),w(function(){return function(e){if(!e){w(null),c(null),r.isWritable()&&r.write({$kind:"gitlabToken",nonce:y});return}r.isWritable()&&r.write({$kind:"gitlabToken",token:b,nonce:y}),w(null),c(null),I(!0)}})}},m=(0,t._)(s),i.label=2;case 2:return[4,m.next()];case 3:if(!(l=!(g=i.sent()).done))return[3,5];h(),i.label=4;case 4:return l=!1,[3,2];case 5:return[3,12];case 6:return x=i.sent(),u=!0,d=x,[3,12];case 7:if(i.trys.push([7,,10,11]),!(l&&null!=m.return))return[3,9];return[4,m.return()];case 8:i.sent(),i.label=9;case 9:return[3,11];case 10:if(u)throw d;return[7];case 11:return[7];case 12:return[2]}})})()},[P,R,D,O]),(0,a.jsx)(x.Modal,{isOpen:"function"==typeof m,onRequestClose:function(){(0,f.track)(p.events.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),null==m||m(!1)},children:(0,a.jsxs)(b.View,{gap:16,children:[(0,a.jsxs)(y.Header,{variant:"headerDefault",level:3,children:["Pass"," ",l?(0,j.providerEnumToDisplayName)(l):"Git"," ","Credentials"]}),(0,a.jsxs)(y.Text,{children:["It looks like you're trying to connect to your"," ",l?(0,j.providerEnumToDisplayName)(l):"remote Git"," ","repository. Authorize this session to use your credentials?"]}),(0,a.jsx)(y.Text,{children:"If you did not initiate a git command, you should deny this."}),(0,a.jsxs)(b.View,{justify:"end",row:!0,gap:16,children:[(0,a.jsx)(g.Button,{onClick:function(){(0,f.track)(p.events.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),null==m||m(!1)},text:"Deny"}),(0,a.jsx)(g.Button,{onClick:function(){(0,f.track)(p.events.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),null==m||m(!0)},iconLeft:(0,a.jsx)(u.default,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}e.s(["GitInShellConfirmModal",()=>R],718632)},745844,e=>{"use strict";var t=e.i(276385),n=e.i(967629);function r(){return(0,t.jsx)(n.Global,{styles:[{body:{overflow:"hidden"}}]})}e.s(["HideBodyOverflow",()=>r])},80366,e=>{"use strict";var t=e.i(276385),n=e.i(485273),r=e.i(389959),i=e.i(265140),a=e.i(871203),o=e.i(956111),s=e.i(119322),l=e.i(185591);function u(e,t,n){if(!e)return!1;if("ReplRedirect"===e.__typename||"ReplSubscriptionExpired"===e.__typename||!e.authorizations.editFileContents.isAuthorized)return!0;var r=(0,o.parseQueryParam)(t.query.skipNixMigration,"boolean"),i=(0,o.parseQueryParam)(t.query.skipHeliumMigration,"boolean");return!r&&(0,a.shouldMigrateReplToNix)(e)||!i&&n}function c(e){var a,o,c=(0,n.useRouter)(),d=(0,i.useHandleReplRedirectionQuery)({variables:{replId:e.replId},fetchPolicy:"no-cache",ssr:!1}).data,f=(null==d?void 0:d.getRepl)&&("Repl"===d.getRepl.__typename||"ReplRedirect"===d.getRepl.__typename||"ReplSubscriptionExpired"===d.getRepl.__typename)?d.getRepl:null,p=(null==f?void 0:f.__typename)==="Repl"?f.heliumMigrationStatus:null,h=null!=(a=null==p?void 0:p.shouldMigrateToHelium)&&a,m=null==(o=null==p?void 0:p.isUsingHelium)||o,g=h&&!m;if((0,r.useEffect)(function(){if(f&&u(f,c,g)){if("ReplSubscriptionExpired"===f.__typename){var e,t,n=f.replId,r=f.isOwner,i=null==(e=c.query.replUrl)?void 0:e.toString(),a=null!=(t=null==i?void 0:i.split("/")[1].slice(1))?t:"",o=c.asPath.indexOf("#"),s=o<0?c.asPath:c.asPath.slice(0,o);c.replace({pathname:"/expiredPrivateRepl",query:{isOwner:r,ownerUsername:a,replId:n}},s);return}if("ReplRedirect"===f.__typename){window.location.href=f.replUrl;return}if(!f.authorizations.editFileContents.isAuthorized){var d=(0,l.replViewLinkProps)(f),p=d.href,h=d.as;c.replace(p,h);return}window.location.reload()}},[g,f,c]),u(f,c,g)){var x="";return"ReplRedirect"===f.__typename?x="Repl moved, redirecting":"ReplSubscriptionExpired"===f.__typename?x="Subscription expired, redirecting":f.authorizations.editFileContents.isAuthorized&&(x="Your Repl requires an upgrade, please wait"),(0,t.jsx)(s.default,{reason:x})}return null}e.s(["default",()=>c])}]);

//# debugId=835cc82e-1213-810a-c97d-6a260580282a
//# sourceMappingURL=eddbb4e40e8ff433.js.map