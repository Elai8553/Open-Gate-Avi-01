;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="6c91e5a1-4c32-f963-d718-34263eb304dc")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,795903,e=>{"use strict";var t=e.i(276385),n=e.i(96250),r=e.i(40916),o=e.i(119274);function i(e){var i=e.prefix,a=void 0===i?"Send message":i,u=e.onClick;return(0,t.jsxs)(o.Menu,{children:[(0,t.jsx)(o.MenuItem,{icon:(0,t.jsx)(n.default,{}),label:"".concat(a," in current chat"),onAction:function(){return u({createNewSession:!1})}}),(0,t.jsx)(o.MenuItem,{icon:(0,t.jsx)(r.default,{}),label:"".concat(a," in new chat"),onAction:function(){return u({createNewSession:!0})}})]})}e.s(["SendAgentMessageMenu",()=>i])},63762,e=>{"use strict";var t=e.i(530658),n=e.i(389959),r=e.i(82259);e.i(877212);var o=e.i(924908);e.i(242933);var i=e.i(279606);e.i(925218);var a=e.i(267103),u=new Set(["planProgressData","agentPlanStepBegin","acknowledgeUserMessage","workflowsGetOutputToolData","presentResultsToolData","deployConfigData"]),s=new Set(["generate_plan","modify_step","verification","scroll_file","open_file"]);function l(){var e=(0,o.useChatter)(),u=(0,a.useObservable)(e.sessions.agent.current),s=null==u?void 0:u.agent.state,l=(0,n.useMemo)(function(){var e;return null!=(e=null==u?void 0:u.reduce(c,100))?e:null},[u]);return(0,n.useMemo)(function(){return s&&l?i.Observable.combine(s,l).map(function(e){var n=(0,t._)(e,2),o=n[0],i=n[1];return((null==o?void 0:o.state)===r.AgentRunState.AGENT_STATE_PAUSED||(null==o?void 0:o.state)===r.AgentRunState.AGENT_STATE_UNKNOWN||(null==o?void 0:o.state)===r.AgentRunState.AGENT_STATE_NOT_STARTED)&&i}):null},[s,l])}var c={direction:"reverse",state:{value:!1},map:function(e){return e.value},reducer:function(e,t){if(e.sender.type===r.UserType.USER||e.sender.type!==r.UserType.AI)return t.value=!1,!1;var n=e.contents.contents;switch(null==n?void 0:n.$kind){case"rapidBuildConcluded":return;case"agentPlanEventContents":t.value=n.agentPlanEventContents.requiresApproval;break;case"agentAskUserForActionRequest":t.value=!0;break;case"agentTimelineEventContents":var o=n.agentTimelineEventContents.toolData;if(o&&u.has(o.$kind))return;var i=n.agentTimelineEventContents.toolName;s.has(i);return;default:t.value=!1}return!1}};e.s(["useAgentIsWaitingOnUserInput",()=>l])},800561,e=>{e.v({buttonGroup:"SendAgentMessageButtonGroup-module__Rv1ZBG__buttonGroup",buttonGroupDivider:"SendAgentMessageButtonGroup-module__Rv1ZBG__buttonGroupDivider",buttonGroupLeft:"SendAgentMessageButtonGroup-module__Rv1ZBG__buttonGroupLeft",buttonGroupRight:"SendAgentMessageButtonGroup-module__Rv1ZBG__buttonGroupRight"})},765890,e=>{"use strict";var t=e.i(721281),n=e.i(530658),r=e.i(276385),o=e.i(389959),i=e.i(103490),a=e.i(167392),u=e.i(269848),s=e.i(795903),l=e.i(480028),c=e.i(140487),d=e.i(764848),h=e.i(604963),f=e.i(751273),p=e.i(625484),v=e.i(800561),g=(0,l.cvarsFrom)("SendAgentMessageButtonGroup.module.css",["--divider-color"]);function y(e){var y=e.className,m=e.onSendAgentMessage,_=e.loading,x=void 0!==_&&_,w=e.disabled,b=void 0!==w&&w,E=e.buttonText,T=e.menuPrefix,S=e.colorway,k=void 0===S?"primary":S,O=(0,n._)((0,o.useState)(!1),2),M=O[0],N=O[1];return(0,r.jsxs)(p.View,{row:!0,clsx:[v.default.buttonGroup,v.default.cta,y],style:(0,t._)({},g.dividerColor,l.colormap[k].dimmest),children:[(0,r.jsx)(f.Tooltip,{tooltip:"".concat(T||E," in current chat"),children:(0,r.jsx)(c.Button,{clsx:v.default.buttonGroupLeft,colorway:k,text:E,iconLeft:x?(0,r.jsx)(u.default,{}):(0,r.jsx)(i.default,{}),loading:x,disabled:b,onClick:function(){return m({createNewSession:!1})}})}),(0,r.jsx)(d.DividerV,{clsx:v.default.buttonGroupDivider}),(0,r.jsxs)(h.PopoverTrigger,{isOpen:M,onOpenChange:N,label:"Message options",placement:"bottom end",children:[(0,r.jsx)(c.Button,{clsx:v.default.buttonGroupRight,colorway:k,disabled:b,text:"",iconLeft:x?(0,r.jsx)(u.default,{}):(0,r.jsx)(a.default,{})}),(0,r.jsx)(s.SendAgentMessageMenu,{onClick:m,prefix:T})]})]})}e.s(["SendAgentMessageButtonGroup",()=>y])},563390,e=>{"use strict";var t=e.i(960933),n=t.Type.Object({id:t.Type.String(),name:t.Type.String(),instructions:t.Type.String(),tools:t.Type.Array(t.Type.Object({id:t.Type.String(),name:t.Type.String(),description:t.Type.String(),inputSchema:t.Type.String(),outputSchema:t.Type.String()})),workflows:t.Type.Record(t.Type.String(),t.Type.Object({name:t.Type.String(),description:t.Type.Optional(t.Type.String()),inputSchema:t.Type.String(),outputSchema:t.Type.String()})),provider:t.Type.String(),modelId:t.Type.String(),modelVersion:t.Type.String()}),r=t.Type.Object({id:t.Type.String(),name:t.Type.String(),description:t.Type.String(),inputSchema:t.Type.String(),outputSchema:t.Type.String()}),o=t.Type.Object({id:t.Type.String(),description:t.Type.String(),inputSchema:t.Type.String(),outputSchema:t.Type.String()}),i=t.Type.Object({id:t.Type.String(),name:t.Type.String(),description:t.Type.Optional(t.Type.String()),steps:t.Type.Record(t.Type.String(),o),inputSchema:t.Type.String(),outputSchema:t.Type.String()}),a=t.Type.Object({id:t.Type.String(),description:t.Type.Optional(t.Type.String())}),u=t.Type.Object({id:t.Type.String(),fn:t.Type.String()}),s=t.Type.Recursive(function(e){return t.Type.Union([t.Type.Object({type:t.Type.Literal("step"),step:a}),t.Type.Object({type:t.Type.Literal("sleep"),id:t.Type.String(),duration:t.Type.Optional(t.Type.Number()),fn:t.Type.Optional(t.Type.String())}),t.Type.Object({type:t.Type.Literal("sleepUntil"),id:t.Type.String(),date:t.Type.Optional(t.Type.Union([t.Type.String(),t.Type.Date()])),fn:t.Type.Optional(t.Type.String())}),t.Type.Object({type:t.Type.Literal("waitForEvent"),event:t.Type.String(),step:a,timeout:t.Type.Optional(t.Type.Number())}),t.Type.Object({type:t.Type.Literal("parallel"),steps:t.Type.Array(e)}),t.Type.Object({type:t.Type.Literal("conditional"),steps:t.Type.Array(e),serializedConditions:t.Type.Array(u)}),t.Type.Object({type:t.Type.Literal("loop"),step:a,serializedCondition:u,loopType:t.Type.Union([t.Type.Literal("dowhile"),t.Type.Literal("dountil")])}),t.Type.Object({type:t.Type.Literal("foreach"),step:a,opts:t.Type.Object({concurrency:t.Type.Number()})})])});t.Type.Object({id:t.Type.String(),name:t.Type.String(),description:t.Type.Optional(t.Type.String()),steps:t.Type.Record(t.Type.String(),o),stepGraph:t.Type.Array(s),inputSchema:t.Type.String(),outputSchema:t.Type.String()});var l=t.Type.Object({toolName:t.Type.String(),toolCallId:t.Type.String(),args:t.Type.Any(),result:t.Type.Unknown()});t.Type.Object({content:t.Type.String(),toolCalls:t.Type.Array(l)}),t.Type.Array(n),t.Type.Array(r),t.Type.Array(i),t.Type.Union([t.Type.Object({code:t.Type.Literal("MASTRA_API_NOT_READY"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("MASTRA_WORKFLOW_NOT_FOUND"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("MASTRA_AGENT_NOT_FOUND"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("MASTRA_AGENT_INSUFFICIENT_QUOTA"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("WORKFLOW_STREAM_TERMINATED"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("API_ERROR"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("INCOMPATIBLE_VERSION_ERROR"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("NETWORK_ERROR"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("INNGEST_API_NOT_READY"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("SCHEMA_VALIDATION_FAILED"),message:t.Type.String()}),t.Type.Object({code:t.Type.Literal("DOT_REPLIT_ERROR"),message:t.Type.String()})]);var c=t.Type.Union([t.Type.Literal("running"),t.Type.Literal("success"),t.Type.Literal("failed"),t.Type.Literal("suspended"),t.Type.Literal("waiting"),t.Type.Literal("pending"),t.Type.Literal("canceled")]),d=t.Type.Object({code:t.Type.Literal("TOOL_EXECUTION_FAILED"),message:t.Type.String(),details:t.Type.Optional(t.Type.Unknown())}),h=t.Type.Object({error:t.Type.Literal(!0),message:t.Type.String(),validationErrors:t.Type.Optional(t.Type.Unknown())}),f=t.Type.Record(t.Type.String(),t.Type.Unknown()),p=t.Type.Union([d,h,f]),v=t.Type.Object({status:c,startedAt:t.Type.Optional(t.Type.Number()),endedAt:t.Type.Optional(t.Type.Number()),error:t.Type.Optional(t.Type.String()),output:t.Type.Optional(t.Type.String())});t.Type.Object({status:c,stepsRunData:t.Type.Optional(t.Type.Record(t.Type.String(),v))}),e.s(["RawToolCallResultSchema",()=>p,"SerializedStepFlowEntrySchema",()=>s,"ToolExecutionFailedSchema",()=>d,"ValidationErrorSchema",()=>h])},391038,e=>{"use strict";var t,n=e.i(960933),r=e.i(862927),o=e.i(563390),i=e.i(374106);e.i(877212);var a=e.i(924908);e.i(925218);var u=e.i(267103),s=e.i(641555),l=e.i(63762),c=e.i(417120),d=((t={}).Building="Building",t.WaitingForInput="WaitingForInput",t.Stopped="Stopped",t.Completed="Completed",t),h=n.Type.Array(o.SerializedStepFlowEntrySchema),f={direction:"forward",state:{stepGraph:null},debug:{name:"AutomationPreviewReducer"},map:function(e){return e.stepGraph},reducer:function(e,t){if((0,i.isEventContentsKind)(e,"agentTimelineEventContents")&&"generate_mastra_preview"===e.contents.contents.agentTimelineEventContents.toolName&&(0,i.isEventAgentToolDataKind)(e,"createAutomationPreviewData")){var n=e.contents.contents.agentTimelineEventContents.toolData.createAutomationPreviewData;try{var o,a=n.result,u=a.match(/```json\n([\s\S]*?)\n```/);o=u&&u[1]?JSON.parse(u[1]):JSON.parse(a),r.Value.Check(h,o)&&(t.stepGraph=o)}catch(e){}}}},p={direction:"forward",state:{hasDeployData:!1},debug:{name:"DeployDataReducer"},map:function(e){return e.hasDeployData},reducer:function(e,t){(0,i.isEventAgentToolDataKind)(e,"deployData")&&(t.hasDeployData=!0)}};function v(){var e=(0,a.useChatter)(),t=(0,u.useObservable)(e.sessions.agent.current),n=(0,l.useAgentIsWaitingOnUserInput)(),r=(0,u.useObservable)(n),o=(0,c.useIsAgentWorking)(),i=(0,s.useObservableMemo)(function(){var e;return null!=(e=null==t?void 0:t.reduce(f,"global"))?e:null},[t]),d=(0,s.useObservableMemo)(function(){return null==t?void 0:t.reduce(p,"global")},[t]);return d||!i?{stepGraph:null,initialBuildState:d?"Completed":void 0}:{stepGraph:i,initialBuildState:!0===r?"WaitingForInput":o?"Building":"Stopped"}}e.s(["InitialBuildState",()=>d,"useAutomationPreview",()=>v])},820219,e=>{"use strict";var t=e.i(276385),n=e.i(389959);e.i(925218);var r=e.i(112077),o=(0,n.createContext)(null);function i(){var e=(0,n.useContext)(o);if(!e)throw Error("useAutomationContext must be used within AutomationProvider");return e}function a(e){var i=e.children,a=e.workflowDetail,u=e.triggerType,s=e.workflowExecutionState,l=e.executeWorkflow,c=e.resetWorkflow,d=e.openPane,h=e.initialBuildState,f=e.automationPreview,p=e.connectorInfo,v=e.openConnectorFlow,g=(0,r.useCreateObservable)({selectedNodeId:null,view:"default"}),y=(0,r.useCreateObservable)(null),m=(0,n.useMemo)(function(){return{workflowDetail:a,triggerType:u,executeWorkflow:l,resetWorkflow:c,openPane:d,workflowExecutionState:s,sidebarState:g,selectedTriggerEvent:y,connectorInfo:p,openConnectorFlow:v,initialBuildState:h,automationPreview:f}},[a,u,l,c,d,s,g,y,p,v,h,f]);return(0,t.jsx)(o.Provider,{value:m,children:i})}e.s(["AutomationProvider",()=>a,"useAutomationContext",()=>i])},250464,e=>{"use strict";e.i(148382);var t,n,r,o,i,a,u,s,l,c,d,h,f,p,v,g,y,m=e.i(297083),_=e.i(721281),x=e.i(878420),w=e.i(64386),b=e.i(886513),E=e.i(530658),T=e.i(346715),S=e.i(119468),k=e.i(817556),O={value:function(){}};function M(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw Error("illegal type: "+e);r[e]=[]}return new N(r)}function N(e){this._=e}function P(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=O,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function A(){}function C(e){return null==e?A:function(){return this.querySelector(e)}}function I(){return[]}function z(e){return null==e?I:function(){return this.querySelectorAll(e)}}function L(e){return function(){return this.matches(e)}}function j(e){return function(t){return t.matches(e)}}N.prototype=M.prototype={constructor:N,on:function(e,t){var n,r=this._,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((n=(e=o[i]).type)&&(n=function(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}(r[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++i<a;)if(n=(e=o[i]).type)r[n]=P(r[n],e.name,t);else if(null==t)for(n in r)r[n]=P(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new N(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(r=this._[e],i=0,n=r.length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};var R=Array.prototype.find;function D(){return this.firstElementChild}var B=Array.prototype.filter;function G(){return Array.from(this.children)}function H(e){return Array(e.length)}function X(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Y(e,t,n,r,o,i){for(var a,u=0,s=t.length,l=i.length;u<l;++u)(a=t[u])?(a.__data__=i[u],r[u]=a):n[u]=new X(e,i[u]);for(;u<s;++u)(a=t[u])&&(o[u]=a)}function V(e,t,n,r,o,i,a){var u,s,l,c=new Map,d=t.length,h=i.length,f=Array(d);for(u=0;u<d;++u)(s=t[u])&&(f[u]=l=a.call(s,s.__data__,u,t)+"",c.has(l)?o[u]=s:c.set(l,s));for(u=0;u<h;++u)l=a.call(e,i[u],u,i)+"",(s=c.get(l))?(r[u]=s,s.__data__=i[u],c.delete(l)):n[u]=new X(e,i[u]);for(u=0;u<d;++u)(s=t[u])&&c.get(f[u])===s&&(o[u]=s)}function F(e){return e.__data__}function W(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}X.prototype={constructor:X,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var U="http://www.w3.org/1999/xhtml";let q={svg:"http://www.w3.org/2000/svg",xhtml:U,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Z(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),q.hasOwnProperty(t)?{space:q[t],local:e}:e}function K(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Q(e,t){return e.style.getPropertyValue(t)||K(e).getComputedStyle(e,null).getPropertyValue(t)}function $(e){return e.trim().split(/^|\s+/)}function J(e){return e.classList||new ee(e)}function ee(e){this._node=e,this._names=$(e.getAttribute("class")||"")}function et(e,t){for(var n=J(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function en(e,t){for(var n=J(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function er(){this.textContent=""}function eo(){this.innerHTML=""}function ei(){this.nextSibling&&this.parentNode.appendChild(this)}function ea(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function eu(e){var t=Z(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===U&&t.documentElement.namespaceURI===U?t.createElement(e):t.createElementNS(n,e)}})(t)}function es(){return null}function el(){var e=this.parentNode;e&&e.removeChild(this)}function ec(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ed(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eh(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)(n=t[r],e.type&&n.type!==e.type||n.name!==e.name)?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function ef(e,t,n){return function(){var r,o=this.__on,i=function(e){t.call(this,e,this.__data__)};if(o){for(var a=0,u=o.length;a<u;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function ep(e,t,n){var r=K(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}ee.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var ev=[null];function eg(e,t){this._groups=e,this._parents=t}function ey(){return new eg([[document.documentElement]],ev)}function em(e){return"string"==typeof e?new eg([[document.querySelector(e)]],[document.documentElement]):new eg([[e]],ev)}function e_(e,t){if(e=function(e){for(var t;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}eg.prototype=ey.prototype=(0,_._)({constructor:eg,select:function(e){"function"!=typeof e&&(e=C(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var i,a,u=t[o],s=u.length,l=r[o]=Array(s),c=0;c<s;++c)(i=u[c])&&(a=e.call(i,i.__data__,c,u))&&("__data__"in i&&(a.__data__=i.__data__),l[c]=a);return new eg(r,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){var e;return e=t.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=z(e);for(var n=this._groups,r=n.length,o=[],i=[],a=0;a<r;++a)for(var u,s=n[a],l=s.length,c=0;c<l;++c)(u=s[c])&&(o.push(e.call(u,u.__data__,c,s)),i.push(u));return new eg(o,i)},selectChild:function(e){var t;return this.select(null==e?D:(t="function"==typeof e?e:j(e),function(){return R.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?G:(t="function"==typeof e?e:j(e),function(){return B.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=L(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var i,a=t[o],u=a.length,s=r[o]=[],l=0;l<u;++l)(i=a[l])&&e.call(i,i.__data__,l,a)&&s.push(i);return new eg(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,F);var n=t?V:Y,r=this._parents,o=this._groups;"function"!=typeof e&&(m=e,e=function(){return m});for(var i=o.length,a=Array(i),u=Array(i),s=Array(i),l=0;l<i;++l){var c=r[l],d=o[l],h=d.length,f=(void 0===(y=e.call(c,c&&c.__data__,l,r))?"undefined":(0,S._)(y))==="object"&&"length"in y?y:Array.from(y),p=f.length,v=u[l]=Array(p),g=a[l]=Array(p);n(c,d,v,g,s[l]=Array(h),f,t);for(var y,m,_,x,w=0,b=0;w<p;++w)if(_=v[w]){for(w>=b&&(b=w+1);!(x=g[b])&&++b<p;);_._next=x||null}}return(a=new eg(a,r))._enter=u,a._exit=s,a},enter:function(){return new eg(this._enter||this._groups.map(H),this._parents)},exit:function(){return new eg(this._exit||this._groups.map(H),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,a=Math.min(o,i),u=Array(o),s=0;s<a;++s)for(var l,c=n[s],d=r[s],h=c.length,f=u[s]=Array(h),p=0;p<h;++p)(l=c[p]||d[p])&&(f[p]=l);for(;s<o;++s)u[s]=n[s];return new eg(u,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=W);for(var n=this._groups,r=n.length,o=Array(r),i=0;i<r;++i){for(var a,u=n[i],s=u.length,l=o[i]=Array(s),c=0;c<s;++c)(a=u[c])&&(l[c]=a);l.sort(t)}return new eg(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){var e=0,t=!0,n=!1,r=void 0;try{for(var o,i=this[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)o.value,++e}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],a=0,u=i.length;a<u;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this},attr:function(e,t){var n=Z(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):Q(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=$(e+"");if(arguments.length<2){for(var r=J(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?et:en)(this,e)}}:t?function(e){return function(){et(this,e)}}:function(e){return function(){en(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?er:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?eo:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(ei)},lower:function(){return this.each(ea)},append:function(e){var t="function"==typeof e?e:eu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:eu(e),r=null==t?es:"function"==typeof t?t:C(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(el)},clone:function(e){return this.select(e?ed:ec)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),a=i.length;if(arguments.length<2){var u=this.node().__on;if(u){for(var s,l=0,c=u.length;l<c;++l)for(r=0,s=u[l];r<a;++r)if((o=i[r]).type===s.type&&o.name===s.name)return s.value}return}for(r=0,u=t?ef:eh;r<a;++r)this.each(u(i[r],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return ep(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return ep(this,e,t)}})(e,t))}},Symbol.iterator,function(){var e,t,n,r,o,i,a;return(0,k._)(this,function(u){switch(u.label){case 0:e=this._groups,t=0,n=e.length,u.label=1;case 1:if(!(t<n))return[3,6];r=e[t],o=0,i=r.length,u.label=2;case 2:if(!(o<i))return[3,5];if(!(a=r[o]))return[3,4];return[4,a];case 3:u.sent(),u.label=4;case 4:return++o,[3,2];case 5:return++t,[3,1];case 6:return[2]}})});var ex={passive:!1},ew={capture:!0,passive:!1};function eb(e){e.stopImmediatePropagation()}function eE(e){e.preventDefault(),e.stopImmediatePropagation()}function eT(e){var t=e.document.documentElement,n=em(e).on("dragstart.drag",eE,ew);"onselectstart"in t?n.on("selectstart.drag",eE,ew):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function eS(e,t){var n=e.document.documentElement,r=em(e).on("dragstart.drag",null);t&&(r.on("click.drag",eE,ew),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}let ek=function(e){return function(){return e}};function eO(e,t){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t.sourceEvent,enumerable:!0,configurable:!0},subject:{value:t.subject,enumerable:!0,configurable:!0},target:{value:t.target,enumerable:!0,configurable:!0},identifier:{value:t.identifier,enumerable:!0,configurable:!0},active:{value:t.active,enumerable:!0,configurable:!0},x:{value:t.x,enumerable:!0,configurable:!0},y:{value:t.y,enumerable:!0,configurable:!0},dx:{value:t.dx,enumerable:!0,configurable:!0},dy:{value:t.dy,enumerable:!0,configurable:!0},_:{value:t.dispatch}})}function eM(e){return!e.ctrlKey&&!e.button}function eN(){return this.parentNode}function eP(e,t){return null==t?{x:e.x,y:e.y}:t}function eA(){return navigator.maxTouchPoints||"ontouchstart"in this}function eC(){var e,t,n,r,o=eM,i=eN,a=eP,u=eA,s={},l=M("start","drag","end"),c=0,d=0;function h(e){e.on("mousedown.drag",f).filter(u).on("touchstart.drag",g).on("touchmove.drag",y,ex).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,u){if(!r&&o.call(this,a,u)){var s=_(this,i.call(this,a,u),a,u,"mouse");s&&(em(a.view).on("mousemove.drag",p,ew).on("mouseup.drag",v,ew),eT(a.view),eb(a),n=!1,e=a.clientX,t=a.clientY,s("start",a))}}function p(r){if(eE(r),!n){var o=r.clientX-e,i=r.clientY-t;n=o*o+i*i>d}s.mouse("drag",r)}function v(e){em(e.view).on("mousemove.drag mouseup.drag",null),eS(e.view,n),eE(e),s.mouse("end",e)}function g(e,t){if(o.call(this,e,t)){var n,r,a=e.changedTouches,u=i.call(this,e,t),s=a.length;for(n=0;n<s;++n)(r=_(this,u,e,t,a[n].identifier,a[n]))&&(eb(e),r("start",e,a[n]))}}function y(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=s[r[t].identifier])&&(eE(e),n("drag",e,r[t]))}function m(e){var t,n,o=e.changedTouches,i=o.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<i;++t)(n=s[o[t].identifier])&&(eb(e),n("end",e,o[t]))}function _(e,t,n,r,o,i){var u,d,f,p=l.copy(),v=e_(i||n,t);if(null!=(f=a.call(e,new eO("beforestart",{sourceEvent:n,target:h,identifier:o,active:c,x:v[0],y:v[1],dx:0,dy:0,dispatch:p}),r)))return u=f.x-v[0]||0,d=f.y-v[1]||0,function n(i,a,l){var g,y=v;switch(i){case"start":s[o]=n,g=c++;break;case"end":delete s[o],--c;case"drag":v=e_(l||a,t),g=c}p.call(i,e,new eO(i,{sourceEvent:a,subject:f,target:h,identifier:o,active:g,x:v[0]+u,y:v[1]+d,dx:v[0]-y[0],dy:v[1]-y[1],dispatch:p}),r)}}return h.filter=function(e){return arguments.length?(o="function"==typeof e?e:ek(!!e),h):o},h.container=function(e){return arguments.length?(i="function"==typeof e?e:ek(e),h):i},h.subject=function(e){return arguments.length?(a="function"==typeof e?e:ek(e),h):a},h.touchable=function(e){return arguments.length?(u="function"==typeof e?e:ek(!!e),h):u},h.on=function(){var e=l.on.apply(l,arguments);return e===l?h:e},h.clickDistance=function(e){return arguments.length?(d=(e*=1)*e,h):Math.sqrt(d)},h}eO.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var eI=e.i(167626);function ez(e){return((e=Math.exp(e))+1/e)/2}let eL=function e(t,n,r){function o(e,o){var i,a,u=e[0],s=e[1],l=e[2],c=o[0],d=o[1],h=o[2],f=c-u,p=d-s,v=f*f+p*p;if(v<1e-12)a=Math.log(h/l)/t,i=function(e){return[u+e*f,s+e*p,l*Math.exp(t*e*a)]};else{var g=Math.sqrt(v),y=(h*h-l*l+r*v)/(2*l*n*g),m=(h*h-l*l-r*v)/(2*h*n*g),_=Math.log(Math.sqrt(y*y+1)-y);a=(Math.log(Math.sqrt(m*m+1)-m)-_)/t,i=function(e){var r,o,i=e*a,c=ez(_),d=l/(n*g)*(c*(((r=Math.exp(2*(r=t*i+_)))-1)/(r+1))-((o=Math.exp(o=_))-1/o)/2);return[u+d*f,s+d*p,l*c/ez(t*i+_)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4);var ej,eR,eD=0,eB=0,eG=0,eH=0,eX=0,eY=0,eV=("undefined"==typeof performance?"undefined":(0,S._)(performance))==="object"&&performance.now?performance:Date,eF=("undefined"==typeof window?"undefined":(0,S._)(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function eW(){return eX||(eF(eU),eX=eV.now()+eY)}function eU(){eX=0}function eq(){this._call=this._time=this._next=null}function eZ(e,t,n){var r=new eq;return r.restart(e,t,n),r}function eK(){eX=(eH=eV.now())+eY,eD=eB=0;try{eW(),++eD;for(var e,t=ej;t;)(e=eX-t._time)>=0&&t._call.call(void 0,e),t=t._next;--eD}finally{eD=0,function(){for(var e,t,n=ej,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:ej=t);eR=e,e$(r)}(),eX=0}}function eQ(){var e=eV.now(),t=e-eH;t>1e3&&(eY-=t,eH=e)}function e$(e){!eD&&(eB&&(eB=clearTimeout(eB)),e-eX>24?(e<1/0&&(eB=setTimeout(eK,e-eV.now()-eY)),eG&&(eG=clearInterval(eG))):(eG||(eH=eV.now(),eG=setInterval(eQ,1e3)),eD=1,eF(eK)))}function eJ(e,t,n){var r=new eq;return t=null==t?0:+t,r.restart(function(n){r.stop(),e(n+t)},t,n),r}eq.prototype=eZ.prototype={constructor:eq,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?eW():+n)+(null==t?0:+t),this._next||eR===this||(eR?eR._next=this:ej=this,eR=this),this._call=e,this._time=n,e$()},stop:function(){this._call&&(this._call=null,this._time=1/0,e$())}};var e0=M("start","end","cancel","interrupt"),e1=[];function e2(e,t,n,r,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(s){var l,c,d,h;if(1!==n.state)return u();for(l in o)if((h=o[l]).name===n.name){if(3===h.state)return eJ(i);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[l]):+l<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[l])}if(eJ(function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(s))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(l=0,n.state=3,r=Array(d=n.tween.length),c=-1;l<d;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function a(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),i=-1,a=r.length;++i<a;)r[i].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=eZ(function(e){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:o,on:e0,tween:e1,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function e3(e,t){var n=e6(e,t);if(n.state>0)throw Error("too late; already scheduled");return n}function e5(e,t){var n=e6(e,t);if(n.state>3)throw Error("too late; already running");return n}function e6(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}function e9(e,t){var n,r,o,i=e.__transition,a=!0;if(i){for(o in t=null==t?null:t+"",i){if((n=i[o]).name!==t){a=!1;continue}r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]}a&&delete e.__transition}}var e4=e.i(438603),e8=180/Math.PI,e7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function te(e,t,n,r,o,i){var a,u,s;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*e8,skewX:Math.atan(s)*e8,scaleX:a,scaleY:u}}function tt(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,a){var u,s,l,c,d=[],h=[];return i=e(i),a=e(a),!function(e,r,o,i,a,u){if(e!==o||r!==i){var s=a.push("translate(",null,t,null,n);u.push({i:s-4,x:(0,e4.default)(e,o)},{i:s-2,x:(0,e4.default)(r,i)})}else(o||i)&&a.push("translate("+o+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,d,h),u=i.rotate,s=a.rotate,u!==s?(u-s>180?s+=360:s-u>180&&(u+=360),h.push({i:d.push(o(d)+"rotate(",null,r)-2,x:(0,e4.default)(u,s)})):s&&d.push(o(d)+"rotate("+s+r),l=i.skewX,c=a.skewX,l!==c?h.push({i:d.push(o(d)+"skewX(",null,r)-2,x:(0,e4.default)(l,c)}):c&&d.push(o(d)+"skewX("+c+r),!function(e,t,n,r,i,a){if(e!==n||t!==r){var u=i.push(o(i)+"scale(",null,",",null,")");a.push({i:u-4,x:(0,e4.default)(e,n)},{i:u-2,x:(0,e4.default)(t,r)})}else(1!==n||1!==r)&&i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,d,h),i=a=null,function(e){for(var t,n=-1,r=h.length;++n<r;)d[(t=h[n]).i]=t.x(e);return d.join("")}}}var tn=tt(function(e){var t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?e7:te(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),tr=tt(function(e){return null==e?e7:(s||(s=document.createElementNS("http://www.w3.org/2000/svg","g")),s.setAttribute("transform",e),e=s.transform.baseVal.consolidate())?te((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):e7},", ",")",")");function to(e,t,n){var r=e._id;return e.each(function(){var e=e5(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return e6(e,r).value[t]}}var ti=e.i(202246),ta=e.i(341013),tu=e.i(805513),tu=tu,ts=e.i(644663),ts=ts;function tl(e,t){var n;return("number"==typeof t?ta.interpolateNumber:(0,eI._)(t,ti.color)?tu.default:(n=(0,ti.color)(t))?(t=n,tu.default):ts.default)(e,t)}var tc=ey.prototype.constructor;function td(e){return function(){this.style.removeProperty(e)}}var th=0;function tf(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}var tp=ey.prototype;tf.prototype=(function(e){return ey().transition(e)}).prototype=(0,_._)({constructor:tf,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=C(e));for(var r=this._groups,o=r.length,i=Array(o),a=0;a<o;++a)for(var u,s,l=r[a],c=l.length,d=i[a]=Array(c),h=0;h<c;++h)(u=l[h])&&(s=e.call(u,u.__data__,h,l))&&("__data__"in u&&(s.__data__=u.__data__),d[h]=s,e2(d[h],t,n,h,d,e6(u,n)));return new tf(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=z(e));for(var r=this._groups,o=r.length,i=[],a=[],u=0;u<o;++u)for(var s,l=r[u],c=l.length,d=0;d<c;++d)if(s=l[d]){for(var h,f=e.call(s,s.__data__,d,l),p=e6(s,n),v=0,g=f.length;v<g;++v)(h=f[v])&&e2(h,t,n,v,f,p);i.push(f),a.push(s)}return new tf(i,a,t,n)},selectChild:tp.selectChild,selectChildren:tp.selectChildren,filter:function(e){"function"!=typeof e&&(e=L(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var i,a=t[o],u=a.length,s=r[o]=[],l=0;l<u;++l)(i=a[l])&&e.call(i,i.__data__,l,a)&&s.push(i);return new tf(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=Array(r),u=0;u<i;++u)for(var s,l=t[u],c=n[u],d=l.length,h=a[u]=Array(d),f=0;f<d;++f)(s=l[f]||c[f])&&(h[f]=s);for(;u<r;++u)a[u]=t[u];return new tf(a,this._parents,this._name,this._id)},selection:function(){return new tc(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++th,r=this._groups,o=r.length,i=0;i<o;++i)for(var a,u=r[i],s=u.length,l=0;l<s;++l)if(a=u[l]){var c=e6(a,t);e2(a,e,n,l,u,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new tf(r,this._parents,e,n)},call:tp.call,nodes:tp.nodes,node:tp.node,size:tp.size,empty:tp.empty,each:tp.each,on:function(e,t){var n,r,o,i,a,u,s=this._id;return arguments.length<2?e6(this.node(),s).on.on(e):this.each((n=s,r=e,o=t,u=(r+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?e3:e5,function(){var e=u(this,n),t=e.on;t!==i&&(a=(i=t).copy()).on(r,o),e.on=a}))},attr:function(e,t){var n=Z(e),r="transform"===n?tr:tl;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,o,i;return function(){var a,u,s=n(this);return null==s?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local))===(u=s+"")?null:a===r&&u===o?i:(o=u,i=t(r=a,s))}}:function(e,t,n){var r,o,i;return function(){var a,u,s=n(this);return null==s?void this.removeAttribute(e):(a=this.getAttribute(e))===(u=s+"")?null:a===r&&u===o?i:(o=u,i=t(r=a,s))}})(n,r,to(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}:function(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var r=Z(e);return this.tween(n,(r.local?function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(t){this.setAttributeNS(e.space,e.local,o.call(this,t))}),n}return o._value=t,o}:function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(t){this.setAttribute(e,o.call(this,t))}),n}return o._value=t,o})(r,t))},style:function(e,t,n){var r,o,i,a,u,s,l,c,d,h,f,p,v,g,y,m,_,x,w,b,E,T="transform"==(e+="")?tn:tl;return null==t?this.styleTween(e,(r=e,function(){var e=Q(this,r),t=(this.style.removeProperty(r),Q(this,r));return e===t?null:e===o&&t===i?a:a=T(o=e,i=t)})).on("end.style."+e,td(e)):"function"==typeof t?this.styleTween(e,(u=e,s=to(this,"style."+e,t),function(){var e=Q(this,u),t=s(this),n=t+"";return null==t&&(this.style.removeProperty(u),n=t=Q(this,u)),e===n?null:e===l&&n===c?d:(c=n,d=T(l=e,t))})).each((h=this._id,_="end."+(m="style."+(f=e)),function(){var e=e5(this,h),t=e.on,n=null==e.value[m]?y||(y=td(f)):void 0;(t!==p||g!==n)&&(v=(p=t).copy()).on(_,g=n),e.on=v})):this.styleTween(e,(x=e,E=t+"",function(){var e=Q(this,x);return e===E?null:e===w?b:b=T(w=e,t)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw Error();return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(t){this.style.setProperty(e,i.call(this,t),n)}),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){var t,n;return this.tween("text","function"==typeof e?(t=to(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(n=null==e?"":e+"",function(){this.textContent=n}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){this.textContent=r.call(this,e)}),t}return r._value=e,r}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=e6(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var o=e5(this,e),i=o.tween;if(i!==n){r=n=i;for(var a=0,u=r.length;a<u;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}}o.tween=r}}:function(e,t,n){var r,o;if("function"!=typeof n)throw Error();return function(){var i=e5(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var u={name:t,value:n},s=0,l=o.length;s<l;++s)if(o[s].name===t){o[s]=u;break}s===l&&o.push(u)}i.tween=o}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){e3(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){e3(this,e).delay=t}})(t,e)):e6(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){e5(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){e5(this,e).duration=t}})(t,e)):e6(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){e5(this,e).ease=t}}(t,e)):e6(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw Error();e5(this,t).ease=n}))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var u={value:a},s={value:function(){0==--o&&i()}};n.each(function(){var n=e5(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),n.on=t}),0===o&&i()})}},Symbol.iterator,tp[Symbol.iterator]);var tv={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};ey.prototype.interrupt=function(e){return this.each(function(){e9(this,e)})},ey.prototype.transition=function(e){var t,n;(0,eI._)(e,tf)?(t=e._id,e=e._name):(t=++th,(n=tv).time=eW(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,u=r[i],s=u.length,l=0;l<s;++l)(a=u[l])&&e2(a,e,t,l,u,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error("transition ".concat(t," not found"));return n}(a,t));return new tf(r,this._parents,e,t)};let tg=function(e){return function(){return e}};function ty(e,t){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t.sourceEvent,enumerable:!0,configurable:!0},target:{value:t.target,enumerable:!0,configurable:!0},transform:{value:t.transform,enumerable:!0,configurable:!0},_:{value:t.dispatch}})}function tm(e,t,n){this.k=e,this.x=t,this.y=n}tm.prototype={constructor:tm,scale:function(e){return 1===e?this:new tm(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new tm(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var t_=new tm(1,0,0);function tx(e){for(;!e.__zoom;)if(!(e=e.parentNode))return t_;return e.__zoom}function tw(e){e.stopImmediatePropagation()}function tb(e){e.preventDefault(),e.stopImmediatePropagation()}function tE(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function tT(){var e=this;return(0,eI._)(e,SVGElement)?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function tS(){return this.__zoom||t_}function tk(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function tO(){return navigator.maxTouchPoints||"ontouchstart"in this}function tM(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function tN(){var e,t,n,r=tE,o=tT,i=tM,a=tk,u=tO,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,d=eL,h=M("start","zoom","end"),f=0,p=10;function v(e){e.property("__zoom",tS).on("wheel.zoom",b,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",T).filter(u).on("touchstart.zoom",S).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(s[0],Math.min(s[1],t)))===e.k?e:new tm(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new tm(e.k,r,o)}function m(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function _(e,t,n,r){e.on("start.zoom",function(){x(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).event(r).end()}).tween("zoom",function(){var e=arguments,i=x(this,e).event(r),a=o.apply(this,e),u=null==n?m(a):"function"==typeof n?n.apply(this,e):n,s=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),l=this.__zoom,c="function"==typeof t?t.apply(this,e):t,h=d(l.invert(u).concat(s/l.k),c.invert(u).concat(s/c.k));return function(e){if(1===e)e=c;else{var t=h(e),n=s/t[2];e=new tm(n,u[0]-t[0]*n,u[1]-t[1]*n)}i.zoom(null,e)}})}function x(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function b(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(r.apply(this,arguments)){var u=x(this,n).event(e),c=this.__zoom,d=Math.max(s[0],Math.min(s[1],c.k*Math.pow(2,a.apply(this,arguments)))),h=e_(e);if(u.wheel)(u.mouse[0][0]!==h[0]||u.mouse[0][1]!==h[1])&&(u.mouse[1]=c.invert(u.mouse[0]=h)),clearTimeout(u.wheel);else{if(c.k===d)return;u.mouse=[h,c.invert(h)],e9(this),u.start()}tb(e),u.wheel=setTimeout(function(){u.wheel=null,u.end()},150),u.zoom("mouse",i(y(g(c,d),u.mouse[0],u.mouse[1]),u.extent,l))}}function E(e){for(var t=arguments.length,o=Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];if(!n&&r.apply(this,arguments)){var u=e.currentTarget,s=x(this,o,!0).event(e),c=em(e.view).on("mousemove.zoom",function(e){if(tb(e),!s.moved){var t=e.clientX-h,n=e.clientY-p;s.moved=t*t+n*n>f}s.event(e).zoom("mouse",i(y(s.that.__zoom,s.mouse[0]=e_(e,u),s.mouse[1]),s.extent,l))},!0).on("mouseup.zoom",function(e){c.on("mousemove.zoom mouseup.zoom",null),eS(e.view,s.moved),tb(e),s.event(e).end()},!0),d=e_(e,u),h=e.clientX,p=e.clientY;eT(e.view),tw(e),s.mouse=[d,this.__zoom.invert(d)],e9(this),s.start()}}function T(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(r.apply(this,arguments)){var u=this.__zoom,s=e_(e.changedTouches?e.changedTouches[0]:e,this),d=u.invert(s),h=u.k*(e.shiftKey?.5:2),f=i(y(g(u,h),s,d),o.apply(this,n),l);tb(e),c>0?em(this).transition().duration(c).call(_,f,s,e):em(this).call(v.transform,f,s,e)}}function S(n){for(var o=arguments.length,i=Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];if(r.apply(this,arguments)){var u,s,l,c,d=n.touches,h=d.length,f=x(this,i,n.changedTouches.length===h).event(n);for(tw(n),s=0;s<h;++s)c=[c=e_(l=d[s],this),this.__zoom.invert(c),l.identifier],f.touch0?f.touch1||f.touch0[2]===c[2]||(f.touch1=c,f.taps=0):(f.touch0=c,u=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),u&&(f.taps<2&&(t=c[0],e=setTimeout(function(){e=null},500)),e9(this),f.start())}}function k(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.__zooming){var o,a,u,s,c=x(this,n).event(e),d=e.changedTouches,h=d.length;for(tb(e),o=0;o<h;++o)u=e_(a=d[o],this),c.touch0&&c.touch0[2]===a.identifier?c.touch0[0]=u:c.touch1&&c.touch1[2]===a.identifier&&(c.touch1[0]=u);if(a=c.that.__zoom,c.touch1){var f=c.touch0[0],p=c.touch0[1],v=c.touch1[0],m=c.touch1[1],_=(_=v[0]-f[0])*_+(_=v[1]-f[1])*_,w=(w=m[0]-p[0])*w+(w=m[1]-p[1])*w;a=g(a,Math.sqrt(_/w)),u=[(f[0]+v[0])/2,(f[1]+v[1])/2],s=[(p[0]+m[0])/2,(p[1]+m[1])/2]}else{if(!c.touch0)return;u=c.touch0[0],s=c.touch0[1]}c.zoom("touch",i(y(a,u,s),c.extent,l))}}function O(e){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if(this.__zooming){var a,u,s=x(this,o).event(e),l=e.changedTouches,c=l.length;for(tw(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),a=0;a<c;++a)u=l[a],s.touch0&&s.touch0[2]===u.identifier?delete s.touch0:s.touch1&&s.touch1[2]===u.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(u=e_(u,this),Math.hypot(t[0]-u[0],t[1]-u[1])<p)){var d=em(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return v.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",tS),e!==o?_(e,t,n,r):o.interrupt().each(function(){x(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},v.scaleBy=function(e,t,n,r){v.scaleTo(e,function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n},n,r)},v.scaleTo=function(e,t,n,r){v.transform(e,function(){var e=o.apply(this,arguments),r=this.__zoom,a=null==n?m(e):"function"==typeof n?n.apply(this,arguments):n,u=r.invert(a),s="function"==typeof t?t.apply(this,arguments):t;return i(y(g(r,s),a,u),e,l)},n,r)},v.translateBy=function(e,t,n,r){v.transform(e,function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),l)},null,r)},v.translateTo=function(e,t,n,r,a){v.transform(e,function(){var e=o.apply(this,arguments),a=this.__zoom,u=null==r?m(e):"function"==typeof r?r.apply(this,arguments):r;return i(t_.translate(u[0],u[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,l)},r,a)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=em(this.that).datum();h.call(e,this.that,new ty(e,{sourceEvent:this.sourceEvent,target:v,type:e,transform:this.that.__zoom,dispatch:h}),t)}},v.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:tg(+e),v):a},v.filter=function(e){return arguments.length?(r="function"==typeof e?e:tg(!!e),v):r},v.touchable=function(e){return arguments.length?(u="function"==typeof e?e:tg(!!e),v):u},v.extent=function(e){return arguments.length?(o="function"==typeof e?e:tg([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),v):o},v.scaleExtent=function(e){return arguments.length?(s[0]=+e[0],s[1]=+e[1],v):[s[0],s[1]]},v.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],v):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},v.constrain=function(e){return arguments.length?(i=e,v):i},v.duration=function(e){return arguments.length?(c=+e,v):c},v.interpolate=function(e){return arguments.length?(d=e,v):d},v.on=function(){var e=h.on.apply(h,arguments);return e===h?v:e},v.clickDistance=function(e){return arguments.length?(f=(e*=1)*e,v):Math.sqrt(f)},v.tapDistance=function(e){return arguments.length?(p=+e,v):p},v}tx.prototype=tm.prototype;var tP=e.i(906857),tA={error001:function(){return"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001"},error002:function(){return"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them."},error003:function(e){return'Node type "'.concat(e,'" not found. Using fallback type "default".')},error004:function(){return"The React Flow parent container needs a width and a height to render the graph."},error005:function(){return"Only child nodes can use a parent extent."},error006:function(){return"Can't create edge. An edge needs a source and a target."},error007:function(e){return"The old edge with id=".concat(e," does not exist.")},error009:function(e){return'Marker type "'.concat(e,"\" doesn't exist.")},error008:function(e,t){var n=t.id,r=t.sourceHandle,o=t.targetHandle;return"Couldn't create edge for ".concat(e,' handle id: "').concat("source"===e?r:o,'", edge id: ').concat(n,".")},error010:function(){return"Handle: No node id found. Make sure to only use a Handle inside a custom Node."},error011:function(e){return'Edge type "'.concat(e,'" not found. Using fallback type "default".')},error012:function(e){return'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.')},error013:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"react";return"It seems that you haven't loaded the styles. Please import '@xyflow/".concat(e,"/dist/style.css' or base.css to make sure everything is working properly.")},error014:function(){return"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},error015:function(){return"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."}},tC=[[-1/0,-1/0],[1/0,1/0]],tI=["Enter"," ","Escape"],tz={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":function(e){var t=e.direction,n=e.x,r=e.y;return"Moved selected node ".concat(t,". New position, x: ").concat(n,", y: ").concat(r)},"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};(t=l||(l={})).Strict="strict",t.Loose="loose",(n=c||(c={})).Free="free",n.Vertical="vertical",n.Horizontal="horizontal",(r=d||(d={})).Partial="partial",r.Full="full";var tL={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};(o=h||(h={})).Bezier="default",o.Straight="straight",o.Step="step",o.SmoothStep="smoothstep",o.SimpleBezier="simplebezier",(i=f||(f={})).Arrow="arrow",i.ArrowClosed="arrowclosed",(a=p||(p={})).Left="left",a.Top="top",a.Right="right",a.Bottom="bottom";var tj=(v={},(0,_._)(v,p.Left,p.Right),(0,_._)(v,p.Right,p.Left),(0,_._)(v,p.Top,p.Bottom),(0,_._)(v,p.Bottom,p.Top),v);function tR(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;var n=!0,r=!1,o=void 0;try{for(var i,a=e.keys()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;if(!t.has(u))return!1}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return!0}function tD(e,t,n){if(n){var r=[];e.forEach(function(e,n){(null==t?void 0:t.has(n))||r.push(e)}),r.length&&n(r)}}function tB(e){return null===e?null:e?"valid":"invalid"}var tG=function(e){return"id"in e&&"source"in e&&"target"in e},tH=function(e){return"id"in e&&"position"in e&&!("source"in e)&&!("target"in e)},tX=function(e){return"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e)},tY=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],r=nl(e),o=r.width,i=r.height,a=null!=(t=e.origin)?t:n,u=o*a[0],s=i*a[1];return{x:e.position.x-u,y:e.position.y-s}},tV=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{nodeOrigin:[0,0]};return 0===e.length?{x:0,y:0,width:0,height:0}:t5(e.reduce(function(e,n){var r="string"==typeof n,o=t.nodeLookup||r?void 0:n;return t.nodeLookup&&(o=r?t.nodeLookup.get(n):tX(n)?n:t.nodeLookup.get(n.id)),t2(e,o?t9(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0})},{x:1/0,y:1/0,x2:-1/0,y2:-1/0}))},tF=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===e.size)return{x:0,y:0,width:0,height:0};var n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(function(e){if(void 0===t.filter||t.filter(e)){var r=t9(e);n=t2(n,r)}}),t5(n)},tW=function(e,t){var n=(0,E._)(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],3),r=n[0],o=n[1],i=n[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=(0,w._)((0,x._)({},nr(t,[r,o,i])),{width:t.width/i,height:t.height/i}),l=[],c=!0,d=!1,h=void 0;try{for(var f,p=e.values()[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var v,g,y,m,_,b,T=f.value,S=T.measured,k=T.selectable,O=void 0===k||k,M=T.hidden,N=void 0!==M&&M;if((!u||O)&&!N){var P=null!=(y=null!=(g=null!=(v=S.width)?v:T.width)?g:T.initialWidth)?y:null,A=null!=(b=null!=(_=null!=(m=S.height)?m:T.height)?_:T.initialHeight)?b:null,C=t8(s,t6(T)),I=(null!=P?P:0)*(null!=A?A:0),z=a&&C>0;(!T.internals.handleBounds||z||C>=I||T.dragging)&&l.push(T)}}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}return l},tU=function(e,t){var n=new Set;return e.forEach(function(e){n.add(e.id)}),t.filter(function(e){return n.has(e.source)||n.has(e.target)})};function tq(e,t){return(0,m._)(function(e,t){var n,r,o,i,a,u,s,l,c,d;return(0,k._)(this,function(h){switch(h.label){case 0:var f,p;if(n=e.nodes,r=e.width,o=e.height,i=e.panZoom,a=e.minZoom,u=e.maxZoom,0===n.size)return[2,Promise.resolve(!0)];return f=new Map,p=(null==t?void 0:t.nodes)?new Set(t.nodes.map(function(e){return e.id})):null,n.forEach(function(e){e.measured.width&&e.measured.height&&((null==t?void 0:t.includeHiddenNodes)||!e.hidden)&&(!p||p.has(e.id))&&f.set(e.id,e)}),d=na(tF(f),r,o,null!=(s=null==t?void 0:t.minZoom)?s:a,null!=(l=null==t?void 0:t.maxZoom)?l:u,null!=(c=null==t?void 0:t.padding)?c:.1),[4,i.setViewport(d,{duration:null==t?void 0:t.duration,ease:null==t?void 0:t.ease,interpolate:null==t?void 0:t.interpolate})];case 1:return h.sent(),[2,Promise.resolve(!0)]}})}).apply(this,arguments)}function tZ(e){var t,n,r,o=e.nodeId,i=e.nextPosition,a=e.nodeLookup,u=e.nodeOrigin,s=e.nodeExtent,l=e.onError,c=a.get(o),d=c.parentId?a.get(c.parentId):void 0,h=d?d.internals.positionAbsolute:{x:0,y:0},f=h.x,p=h.y,v=null!=(t=c.origin)?t:void 0===u?[0,0]:u,g=c.extent||s;if("parent"!==c.extent||c.expandParent)d&&ns(c.extent)&&(g=[[c.extent[0][0]+f,c.extent[0][1]+p],[c.extent[1][0]+f,c.extent[1][1]+p]]);else if(d){var y=d.measured.width,m=d.measured.height;y&&m&&(g=[[f,p],[f+y,p+m]])}else null==l||l("005",tA.error005());var _=ns(g)?t$(i,g,c.measured):i;return(void 0===c.measured.width||void 0===c.measured.height)&&(null==l||l("015",tA.error015())),{position:{x:_.x-f+(null!=(n=c.measured.width)?n:0)*v[0],y:_.y-p+(null!=(r=c.measured.height)?r:0)*v[1]},positionAbsolute:_}}function tK(e){return(0,m._)(function(e){var t,n,r,o,i,a,u,s,l,c,d,h,f,p,v,g,y,m,_,x,w,b,E,T,S;return(0,k._)(this,function(k){switch(k.label){case 0:n=void 0===(t=e.nodesToRemove)?[]:t,o=void 0===(r=e.edgesToRemove)?[]:r,i=e.nodes,a=e.edges,u=e.onBeforeDelete,s=new Set(n.map(function(e){return e.id})),l=[],c=!0,d=!1,h=void 0;try{for(f=function(){var e=v.value;if(!1===e.deletable)return"continue";var t=s.has(e.id),n=!t&&e.parentId&&l.find(function(t){return t.id===e.parentId});(t||n)&&l.push(e)},p=i[Symbol.iterator]();!(c=(v=p.next()).done);c=!0)f()}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}g=new Set(o.map(function(e){return e.id})),y=a.filter(function(e){return!1!==e.deletable}),m=tU(l,y),_=!0,x=!1,w=void 0;try{for(b=function(){var e=T.value;g.has(e.id)&&!m.find(function(t){return t.id===e.id})&&m.push(e)},E=y[Symbol.iterator]();!(_=(T=E.next()).done);_=!0)b()}catch(e){x=!0,w=e}finally{try{_||null==E.return||E.return()}finally{if(x)throw w}}if(!u)return[2,{edges:m,nodes:l}];return[4,u({nodes:l,edges:m})];case 1:if("boolean"==typeof(S=k.sent()))return[2,S?{edges:m,nodes:l}:{edges:[],nodes:[]}];return[2,S]}})}).apply(this,arguments)}var tQ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},t$=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return{x:tQ(n.x,r[0][0],r[1][0]-(null!=(e=null==o?void 0:o.width)?e:0)),y:tQ(n.y,r[0][1],r[1][1]-(null!=(t=null==o?void 0:o.height)?t:0))}};function tJ(e,t,n){var r=nl(n),o=r.width,i=r.height,a=n.internals.positionAbsolute,u=a.x,s=a.y;return t$(e,[[u,s],[u+o,s+i]],t)}var t0=function(e,t,n){return e<t?tQ(Math.abs(e-t),1,t)/t:e>n?-tQ(Math.abs(e-n),1,t)/t:0},t1=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40;return[t0(e.x,r,t.width-r)*n,t0(e.y,r,t.height-r)*n]},t2=function(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}},t3=function(e){var t=e.x,n=e.y;return{x:t,y:n,x2:t+e.width,y2:n+e.height}},t5=function(e){var t=e.x,n=e.y;return{x:t,y:n,width:e.x2-t,height:e.y2-n}},t6=function(e){var t,n,r,o,i,a,u,s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],c=tX(e)?e.internals.positionAbsolute:tY(e,l);return{x:c.x,y:c.y,width:null!=(i=null!=(o=null!=(r=null==(t=e.measured)?void 0:t.width)?r:e.width)?o:e.initialWidth)?i:0,height:null!=(s=null!=(u=null!=(a=null==(n=e.measured)?void 0:n.height)?a:e.height)?u:e.initialHeight)?s:0}},t9=function(e){var t,n,r,o,i,a,u,s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],c=tX(e)?e.internals.positionAbsolute:tY(e,l),d=c.x,h=c.y;return{x:d,y:h,x2:d+(null!=(i=null!=(o=null!=(r=null==(t=e.measured)?void 0:t.width)?r:e.width)?o:e.initialWidth)?i:0),y2:h+(null!=(s=null!=(u=null!=(a=null==(n=e.measured)?void 0:n.height)?a:e.height)?u:e.initialHeight)?s:0)}},t4=function(e,t){return t5(t2(t3(e),t3(t)))},t8=function(e,t){return Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y)))},t7=function(e){return ne(e.width)&&ne(e.height)&&ne(e.x)&&ne(e.y)},ne=function(e){return!isNaN(e)&&isFinite(e)},nt=function(e,t){},nn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1];return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}},nr=function(e,t){var n=e.x,r=e.y,o=(0,E._)(t,3),i=o[0],a=o[1],u=o[2],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],c={x:(n-i)/u,y:(r-a)/u};return s?nn(c,l):c},no=function(e,t){var n=e.x,r=e.y,o=(0,E._)(t,3),i=o[0],a=o[1],u=o[2];return{x:n*u+i,y:r*u+a}};function ni(e,t){if("number"==typeof e)return Math.floor((t-t/(1+e))*.5);if("string"==typeof e&&e.endsWith("px")){var n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if("string"==typeof e&&e.endsWith("%")){var r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(t*r*.01)}return console.error('[React Flow] The padding value "'.concat(e,'" is invalid. Please provide a number or a string with a valid unit (px or %).')),0}var na=function(e,t,n,r,o,i){var a,u,s,l,c=function(e,t,n){if("string"==typeof e||"number"==typeof e){var r=ni(e,n),o=ni(e,t);return{top:r,right:o,bottom:r,left:o,x:2*o,y:2*r}}if((void 0===e?"undefined":(0,S._)(e))==="object"){var i,a,u,s,l,c,d,h,f=ni(null!=(a=null!=(i=e.top)?i:e.y)?a:0,n),p=ni(null!=(s=null!=(u=e.bottom)?u:e.y)?s:0,n),v=ni(null!=(c=null!=(l=e.left)?l:e.x)?c:0,t),g=ni(null!=(h=null!=(d=e.right)?d:e.x)?h:0,t);return{top:f,right:g,bottom:p,left:v,x:v+g,y:f+p}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),d=tQ(Math.min((t-c.x)/e.width,(n-c.y)/e.height),r,o),h=e.x+e.width/2,f=e.y+e.height/2,p=t/2-h*d,v=n/2-f*d,g=(u=(a=no(e,[p,v,d])).x,s=a.y,{left:Math.floor(u),top:Math.floor(s),right:Math.floor(t-(l=no({x:e.x+e.width,y:e.y+e.height},[p,v,d])).x),bottom:Math.floor(n-l.y)}),y={left:Math.min(g.left-c.left,0),top:Math.min(g.top-c.top,0),right:Math.min(g.right-c.right,0),bottom:Math.min(g.bottom-c.bottom,0)};return{x:p-y.left+y.right,y:v-y.top+y.bottom,zoom:d}},nu=function(){var e,t;return"undefined"!=typeof navigator&&(null==(t=navigator)||null==(e=t.userAgent)?void 0:e.indexOf("Mac"))>=0};function ns(e){return null!=e&&"parent"!==e}function nl(e){var t,n,r,o,i,a,u,s;return{width:null!=(i=null!=(o=null!=(r=null==(t=e.measured)?void 0:t.width)?r:e.width)?o:e.initialWidth)?i:0,height:null!=(s=null!=(u=null!=(a=null==(n=e.measured)?void 0:n.height)?a:e.height)?u:e.initialHeight)?s:0}}function nc(e){var t,n,r,o,i,a;return(null!=(o=null!=(r=null==(t=e.measured)?void 0:t.width)?r:e.width)?o:e.initialWidth)!==void 0&&(null!=(a=null!=(i=null==(n=e.measured)?void 0:n.height)?i:e.height)?a:e.initialHeight)!==void 0}function nd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:0,height:0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=(0,x._)({},e),a=r.get(n);if(a){var u,s,l=a.origin||o;i.x+=a.internals.positionAbsolute.x-(null!=(u=t.width)?u:0)*l[0],i.y+=a.internals.positionAbsolute.y-(null!=(s=t.height)?s:0)*l[1]}return i}function nh(e,t){if(e.size!==t.size)return!1;var n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;if(!t.has(u))return!1}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return!0}function nf(){var e,t;return{promise:new Promise(function(n,r){e=n,t=r}),resolve:e,reject:t}}function np(e){return(0,x._)({},tz,e||{})}function nv(e,t){var n,r,o=t.snapGrid,i=t.snapToGrid,a=t.transform,u=t.containerBounds,s=nw(e),l=s.x,c=s.y,d=nr({x:l-(null!=(n=null==u?void 0:u.left)?n:0),y:c-(null!=(r=null==u?void 0:u.top)?r:0)},a),h=void 0!==i&&i?nn(d,void 0===o?[0,0]:o):d,f=h.x,p=h.y;return(0,x._)({xSnapped:f,ySnapped:p},d)}var ng=function(e){return{width:e.offsetWidth,height:e.offsetHeight}},ny=function(e){var t,n;return(null==e||null==(t=e.getRootNode)?void 0:t.call(e))||(null==(n=window)?void 0:n.document)},nm=["INPUT","SELECT","TEXTAREA"];function n_(e){var t,n,r=(null==(n=e.composedPath)||null==(t=n.call(e))?void 0:t[0])||e.target;return(null==r?void 0:r.nodeType)===1&&(nm.includes(r.nodeName)||r.hasAttribute("contenteditable")||!!r.closest(".nokey"))}var nx=function(e){return"clientX"in e},nw=function(e,t){var n,r,o,i,a=nx(e),u=a?e.clientX:null==(n=e.touches)?void 0:n[0].clientX,s=a?e.clientY:null==(r=e.touches)?void 0:r[0].clientY;return{x:u-(null!=(o=null==t?void 0:t.left)?o:0),y:s-(null!=(i=null==t?void 0:t.top)?i:0)}},nb=function(e,t,n,r,o){var i=t.querySelectorAll(".".concat(e));return i&&i.length?Array.from(i).map(function(t){var i=t.getBoundingClientRect();return(0,x._)({id:t.getAttribute("data-handleid"),type:e,nodeId:o,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/r,y:(i.top-n.top)/r},ng(t))}):null};function nE(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.sourceControlX,a=e.sourceControlY,u=e.targetControlX,s=e.targetControlY,l=.125*t+.375*i+.375*u+.125*r,c=.125*n+.375*a+.375*s+.125*o,d=Math.abs(l-t),h=Math.abs(c-n);return[l,c,d,h]}function nT(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function nS(e){var t=e.pos,n=e.x1,r=e.y1,o=e.x2,i=e.y2,a=e.c;switch(t){case p.Left:return[n-nT(n-o,a),r];case p.Right:return[n+nT(o-n,a),r];case p.Top:return[n,r-nT(r-i,a)];case p.Bottom:return[n,r+nT(i-r,a)]}}function nk(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=void 0===r?p.Bottom:r,i=e.targetX,a=e.targetY,u=e.targetPosition,s=void 0===u?p.Top:u,l=e.curvature,c=void 0===l?.25:l,d=(0,E._)(nS({pos:o,x1:t,y1:n,x2:i,y2:a,c:c}),2),h=d[0],f=d[1],v=(0,E._)(nS({pos:s,x1:i,y1:a,x2:t,y2:n,c:c}),2),g=v[0],y=v[1],m=(0,E._)(nE({sourceX:t,sourceY:n,targetX:i,targetY:a,sourceControlX:h,sourceControlY:f,targetControlX:g,targetControlY:y}),4),_=m[0],x=m[1],w=m[2],b=m[3];return["M".concat(t,",").concat(n," C").concat(h,",").concat(f," ").concat(g,",").concat(y," ").concat(i,",").concat(a),_,x,w,b]}function nO(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=Math.abs(r-t)/2,a=Math.abs(o-n)/2;return[r<t?r+i:r-i,o<n?o+a:o-a,i,a]}function nM(e){var t=e.sourceNode,n=e.targetNode,r=e.selected,o=e.zIndex,i=e.elevateOnSelect;return void 0!==o?o:(void 0!==i&&i&&void 0!==r&&r?1e3:0)+Math.max(t.parentId?t.internals.z:0,n.parentId?n.internals.z:0)}function nN(e){var t=e.sourceNode,n=e.targetNode,r=e.width,o=e.height,i=e.transform,a=t2(t9(t),t9(n));return a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1),t8({x:-i[0]/i[2],y:-i[1]/i[2],width:r/i[2],height:o/i[2]},t5(a))>0}var nP=function(e){var t=e.source,n=e.sourceHandle,r=e.target,o=e.targetHandle;return"xy-edge__".concat(t).concat(n||"","-").concat(r).concat(o||"")},nA=function(e,t){var n,r;return e.source&&e.target?(r=n=tG(e)?(0,x._)({},e):(0,w._)((0,x._)({},e),{id:nP(e)}),t.some(function(e){return e.source===r.source&&e.target===r.target&&(e.sourceHandle===r.sourceHandle||!e.sourceHandle&&!r.sourceHandle)&&(e.targetHandle===r.targetHandle||!e.targetHandle&&!r.targetHandle)}))?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n)):(nt("006",tA.error006()),t)};function nC(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=(0,E._)(nO({sourceX:t,sourceY:n,targetX:r,targetY:o}),4),a=i[0],u=i[1],s=i[2],l=i[3];return["M ".concat(t,",").concat(n,"L ").concat(r,",").concat(o),a,u,s,l]}var nI=(g={},(0,_._)(g,p.Left,{x:-1,y:0}),(0,_._)(g,p.Right,{x:1,y:0}),(0,_._)(g,p.Top,{x:0,y:-1}),(0,_._)(g,p.Bottom,{x:0,y:1}),g),nz=function(e){var t=e.source,n=e.sourcePosition,r=void 0===n?p.Bottom:n,o=e.target;return r===p.Left||r===p.Right?t.x<o.x?{x:1,y:0}:{x:-1,y:0}:t.y<o.y?{x:0,y:1}:{x:0,y:-1}},nL=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function nj(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=void 0===r?p.Bottom:r,i=e.targetX,a=e.targetY,u=e.targetPosition,s=void 0===u?p.Top:u,l=e.borderRadius,c=void 0===l?5:l,d=e.centerX,h=e.centerY,f=e.offset,v=e.stepPosition,g=(0,E._)(function(e){var t=e.source,n=e.sourcePosition,r=void 0===n?p.Bottom:n,o=e.target,i=e.targetPosition,a=void 0===i?p.Top:i,u=e.center,s=e.offset,l=e.stepPosition,c=nI[r],d=nI[a],h={x:t.x+c.x*s,y:t.y+c.y*s},f={x:o.x+d.x*s,y:o.y+d.y*s},v=nz({source:h,sourcePosition:r,target:f}),g=0!==v.x?"x":"y",y=v[g],m=[],_={x:0,y:0},x={x:0,y:0},w=(0,E._)(nO({sourceX:t.x,sourceY:t.y,targetX:o.x,targetY:o.y}),4),b=w[2],S=w[3];if(c[g]*d[g]==-1){"x"===g?(k=null!=(M=u.x)?M:h.x+(f.x-h.x)*l,O=null!=(N=u.y)?N:(h.y+f.y)/2):(k=null!=(P=u.x)?P:(h.x+f.x)/2,O=null!=(A=u.y)?A:h.y+(f.y-h.y)*l);var k,O,M,N,P,A,C=[{x:k,y:h.y},{x:k,y:f.y}],I=[{x:h.x,y:O},{x:f.x,y:O}];m=c[g]===y?"x"===g?C:I:"x"===g?I:C}else{var z=[{x:h.x,y:f.y}],L=[{x:f.x,y:h.y}];if(m="x"===g?c.x===y?L:z:c.y===y?z:L,r===a){var j=Math.abs(t[g]-o[g]);if(j<=s){var R=Math.min(s-1,s-j);c[g]===y?_[g]=(h[g]>t[g]?-1:1)*R:x[g]=(f[g]>o[g]?-1:1)*R}}if(r!==a){var D="x"===g?"y":"x",B=c[g]===d[D],G=h[D]>f[D],H=h[D]<f[D];(1===c[g]&&(!B&&G||B&&H)||1!==c[g]&&(!B&&H||B&&G))&&(m="x"===g?z:L)}var X={x:h.x+_.x,y:h.y+_.y},Y={x:f.x+x.x,y:f.y+x.y};Math.max(Math.abs(X.x-m[0].x),Math.abs(Y.x-m[0].x))>=Math.max(Math.abs(X.y-m[0].y),Math.abs(Y.y-m[0].y))?(k=(X.x+Y.x)/2,O=m[0].y):(k=m[0].x,O=(X.y+Y.y)/2)}return[[t,{x:h.x+_.x,y:h.y+_.y}].concat((0,T._)(m),[{x:f.x+x.x,y:f.y+x.y},o]),k,O,b,S]}({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:a},targetPosition:s,center:{x:d,y:h},offset:void 0===f?20:f,stepPosition:void 0===v?.5:v}),5),y=g[0],m=g[1],_=g[2],x=g[3],w=g[4];return[y.reduce(function(e,t,n){return e+(n>0&&n<y.length-1?function(e,t,n,r){var o=Math.min(nL(e,t)/2,nL(t,n)/2,r),i=t.x,a=t.y;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return"L".concat(i," ").concat(a);if(e.y===a){var u=e.x<n.x?-1:1,s=e.y<n.y?1:-1;return"L ".concat(i+o*u,",").concat(a,"Q ").concat(i,",").concat(a," ").concat(i,",").concat(a+o*s)}var l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return"L ".concat(i,",").concat(a+o*c,"Q ").concat(i,",").concat(a," ").concat(i+o*l,",").concat(a)}(y[n-1],t,y[n+1],c):"".concat(0===n?"M":"L").concat(t.x," ").concat(t.y))},""),m,_,x,w]}function nR(e){var t;return e&&!!(e.internals.handleBounds||(null==(t=e.handles)?void 0:t.length))&&!!(e.measured.width||e.width||e.initialWidth)}function nD(e){var t,n,r,o,i,a=e.sourceNode,u=e.targetNode;if(!nR(a)||!nR(u))return null;var s=a.internals.handleBounds||nB(a.handles),c=u.internals.handleBounds||nB(u.handles),d=nH(null!=(t=null==s?void 0:s.source)?t:[],e.sourceHandle),h=nH(e.connectionMode===l.Strict?null!=(n=null==c?void 0:c.target)?n:[]:(null!=(r=null==c?void 0:c.target)?r:[]).concat(null!=(o=null==c?void 0:c.source)?o:[]),e.targetHandle);if(!d||!h)return null==(i=e.onError)||i.call(e,"008",tA.error008(d?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;var f=(null==d?void 0:d.position)||p.Bottom,v=(null==h?void 0:h.position)||p.Top,g=nG(a,d,f),y=nG(u,h,v);return{sourceX:g.x,sourceY:g.y,targetX:y.x,targetY:y.y,sourcePosition:f,targetPosition:v}}function nB(e){if(!e)return null;var t=[],n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s,l,c=a.value;c.width=null!=(s=c.width)?s:1,c.height=null!=(l=c.height)?l:1,"source"===c.type?t.push(c):"target"===c.type&&n.push(c)}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return{source:t,target:n}}function nG(e,t){var n,r,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.Left,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=(null!=(n=null==t?void 0:t.x)?n:0)+e.internals.positionAbsolute.x,s=(null!=(r=null==t?void 0:t.y)?r:0)+e.internals.positionAbsolute.y,l=null!=t?t:nl(e),c=l.width,d=l.height;if(a)return{x:u+c/2,y:s+d/2};switch(null!=(o=null==t?void 0:t.position)?o:i){case p.Top:return{x:u+c/2,y:s};case p.Right:return{x:u+c,y:s+d/2};case p.Bottom:return{x:u+c/2,y:s+d};case p.Left:return{x:u,y:s+d/2}}}function nH(e,t){return e&&(t?e.find(function(e){return e.id===t}):e[0])||null}function nX(e,t){return e?"string"==typeof e?e:"".concat(t?"".concat(t,"__"):"").concat(Object.keys(e).sort().map(function(t){return"".concat(t,"=").concat(e[t])}).join("&")):""}function nY(e,t){var n=t.id,r=t.defaultColor,o=t.defaultMarkerStart,i=t.defaultMarkerEnd,a=new Set;return e.reduce(function(e,t){return[t.markerStart||o,t.markerEnd||i].forEach(function(t){if(t&&(void 0===t?"undefined":(0,S._)(t))==="object"){var o=nX(t,n);a.has(o)||(e.push((0,x._)({id:o,color:t.color||r},t)),a.add(o))}}),e},[]).sort(function(e,t){return e.id.localeCompare(t.id)})}function nV(e,t,n,r,o){var i=.5;"start"===o?i=0:"end"===o&&(i=1);var a=[(e.x+e.width*i)*t.zoom+t.x,e.y*t.zoom+t.y-r],u=[-100*i,-100];switch(n){case p.Right:a=[(e.x+e.width)*t.zoom+t.x+r,(e.y+e.height*i)*t.zoom+t.y],u=[0,-100*i];break;case p.Bottom:a[1]=(e.y+e.height)*t.zoom+t.y+r,u[1]=0;break;case p.Left:a=[e.x*t.zoom+t.x-r,(e.y+e.height*i)*t.zoom+t.y],u=[-100,-100*i]}return"translate(".concat(a[0],"px, ").concat(a[1],"px) translate(").concat(u[0],"%, ").concat(u[1],"%)")}var nF={nodeOrigin:[0,0],nodeExtent:tC,elevateNodesOnSelect:!0,defaults:{}},nW=(0,w._)((0,x._)({},nF),{checkEquality:!0});function nU(e,t){var n=(0,x._)({},e);for(var r in t)void 0!==t[r]&&(n[r]=t[r]);return n}function nq(e,t,n){var r=nU(nF,n),o=!0,i=!1,a=void 0;try{for(var u,s=e.values()[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var l=u.value;if(l.parentId)nK(l,e,t,r);else{var c=tY(l,r.nodeOrigin),d=ns(l.extent)?l.extent:r.nodeExtent,h=t$(c,d,nl(l));l.internals.positionAbsolute=h}}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}}function nZ(e,t,n,r){var o=nU(nW,r),i=e.length>0,a=new Map(t),u=1e3*(null!=o&&!!o.elevateNodesOnSelect);t.clear(),n.clear();var s=!0,l=!1,c=void 0;try{for(var d,h=e[Symbol.iterator]();!(s=(d=h.next()).done);s=!0){var f=d.value,p=a.get(f.id);if(o.checkEquality&&f===(null==p?void 0:p.internals.userNode))t.set(f.id,p);else{var v,g,y=tY(f,o.nodeOrigin),m=ns(f.extent)?f.extent:o.nodeExtent,_=t$(y,m,nl(f));p=(0,w._)((0,x._)({},o.defaults,f),{measured:{width:null==(v=f.measured)?void 0:v.width,height:null==(g=f.measured)?void 0:g.height},internals:{positionAbsolute:_,handleBounds:f.measured?null==p?void 0:p.internals.handleBounds:void 0,z:nQ(f,u),userNode:f}}),t.set(f.id,p)}void 0!==p.measured&&void 0!==p.measured.width&&void 0!==p.measured.height||p.hidden||(i=!1),f.parentId&&nK(p,t,n,r)}}catch(e){l=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}return i}function nK(e,t,n,r){var o,i,a,u,s,l,c,d,h,f,p,v,g,y,m,_=nU(nF,r),b=_.elevateNodesOnSelect,E=_.nodeOrigin,T=_.nodeExtent,S=e.parentId,k=t.get(S);if(!k)return void console.warn("Parent node ".concat(S," not found. Please make sure that parent nodes are in front of their child nodes in the nodes array."));if(e.parentId){var O=n.get(e.parentId);O?O.set(e.id,e):n.set(e.parentId,new Map([[e.id,e]]))}var M=(o=e,i=k,a=E,u=T,s=1e3*!!b,d=(c=i.internals.positionAbsolute).x,h=c.y,f=nl(o),p=tY(o,a),v=ns(o.extent)?t$(p,o.extent,f):p,g=t$({x:d+v.x,y:h+v.y},u,f),"parent"===o.extent&&(g=tJ(g,f,i)),y=nQ(o,s),m=null!=(l=i.internals.z)?l:0,{x:g.x,y:g.y,z:m>=y?m+1:y}),N=M.x,P=M.y,A=M.z,C=e.internals.positionAbsolute,I=N!==C.x||P!==C.y;(I||A!==e.internals.z)&&t.set(e.id,(0,w._)((0,x._)({},e),{internals:(0,w._)((0,x._)({},e.internals),{positionAbsolute:I?{x:N,y:P}:C,z:A})}))}function nQ(e,t){return(ne(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function n$(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],o=[],i=new Map,a=!0,u=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var d,h,f=l.value,p=t.get(f.parentId);if(p){var v=null!=(h=null==(d=i.get(f.parentId))?void 0:d.expandedRect)?h:t6(p),g=t4(v,f.rect);i.set(f.parentId,{expandedRect:g,parent:p})}}}catch(e){u=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(u)throw s}}return i.size>0&&i.forEach(function(t,i){var a,u,s=t.expandedRect,l=t.parent,c=l.internals.positionAbsolute,d=nl(l),h=null!=(a=l.origin)?a:r,f=s.x<c.x?Math.round(Math.abs(c.x-s.x)):0,p=s.y<c.y?Math.round(Math.abs(c.y-s.y)):0,v=Math.max(d.width,Math.round(s.width)),g=Math.max(d.height,Math.round(s.height)),y=(v-d.width)*h[0],m=(g-d.height)*h[1];(f>0||p>0||y||m)&&(o.push({id:i,type:"position",position:{x:l.position.x-f+y,y:l.position.y-p+m}}),null==(u=n.get(i))||u.forEach(function(t){e.some(function(e){return e.id===t.id})||o.push({id:t.id,type:"position",position:{x:t.position.x+f,y:t.position.y+p}})})),(d.width<s.width||d.height<s.height||f||p)&&o.push({id:i,type:"dimensions",setAttributes:!0,dimensions:{width:v+(f?h[0]*f-y:0),height:g+(p?h[1]*p-m:0)}})}),o}function nJ(e,t,n,r,o,i){var a=null==r?void 0:r.querySelector(".xyflow__viewport"),u=!1;if(!a)return{changes:[],updatedInternals:u};var s=[],l=window.getComputedStyle(a),c=new window.DOMMatrixReadOnly(l.transform).m22,d=[],h=!0,f=!1,p=void 0;try{for(var v,g=e.values()[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value,m=t.get(y.id);if(m){if(m.hidden){t.set(m.id,(0,w._)((0,x._)({},m),{internals:(0,w._)((0,x._)({},m.internals),{handleBounds:void 0})})),u=!0;continue}var _=ng(y.nodeElement),b=m.measured.width!==_.width||m.measured.height!==_.height;if(_.width&&_.height&&(b||!m.internals.handleBounds||y.force)){var E=y.nodeElement.getBoundingClientRect(),S=ns(m.extent)?m.extent:i,k=m.internals.positionAbsolute;m.parentId&&"parent"===m.extent?k=tJ(k,_,t.get(m.parentId)):S&&(k=t$(k,S,_));var O=(0,w._)((0,x._)({},m),{measured:_,internals:(0,w._)((0,x._)({},m.internals),{positionAbsolute:k,handleBounds:{source:nb("source",y.nodeElement,E,c,m.id),target:nb("target",y.nodeElement,E,c,m.id)}})});t.set(m.id,O),m.parentId&&nK(O,t,n,{nodeOrigin:o}),u=!0,b&&(s.push({id:m.id,type:"dimensions",dimensions:_}),m.expandParent&&m.parentId&&d.push({id:m.id,parentId:m.parentId,rect:t6(O,o)}))}}}}catch(e){f=!0,p=e}finally{try{h||null==g.return||g.return()}finally{if(f)throw p}}if(d.length>0){var M=n$(d,t,n,o);s.push.apply(s,(0,T._)(M))}return{changes:s,updatedInternals:u}}function n0(e){return(0,m._)(function(e){var t,n,r,o,i,a,u;return(0,k._)(this,function(s){switch(s.label){case 0:if(t=e.delta,n=e.panZoom,r=e.transform,o=e.translateExtent,i=e.width,a=e.height,!n||!t.x&&!t.y)return[2,Promise.resolve(!1)];return[4,n.setViewportConstrained({x:r[0]+t.x,y:r[1]+t.y,zoom:r[2]},[[0,0],[i,a]],o)];case 1:return[2,Promise.resolve(!!(u=s.sent())&&(u.x!==r[0]||u.y!==r[1]||u.k!==r[2]))]}})}).apply(this,arguments)}function n1(e,t,n,r,o,i){var a=o,u=r.get(a)||new Map;r.set(a,u.set(n,t)),a="".concat(o,"-").concat(e);var s=r.get(a)||new Map;if(r.set(a,s.set(n,t)),i){a="".concat(o,"-").concat(e,"-").concat(i);var l=r.get(a)||new Map;r.set(a,l.set(n,t))}}function n2(e,t,n){e.clear(),t.clear();var r=!0,o=!1,i=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value,l=s.source,c=s.target,d=s.sourceHandle,h=void 0===d?null:d,f=s.targetHandle,p=void 0===f?null:f,v={edgeId:s.id,source:l,target:c,sourceHandle:h,targetHandle:p},g="".concat(l,"-").concat(h,"--").concat(c,"-").concat(p),y="".concat(c,"-").concat(p,"--").concat(l,"-").concat(h);n1("source",v,y,e,l,h),n1("target",v,g,e,c,p),t.set(s.id,s)}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}}function n3(e,t){if(null===e||null===t)return!1;var n=Array.isArray(e)?e:[e],r=Array.isArray(t)?t:[t];if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(n[o].id!==r[o].id||n[o].type!==r[o].type||!Object.is(n[o].data,r[o].data))return!1;return!0}function n5(e,t,n){var r,o=e;do{if(null==o||null==(r=o.matches)?void 0:r.call(o,t))return!0;if(o===n)break;o=null==o?void 0:o.parentElement}while(o)return!1}function n6(e){var t=e.nodeId,n=e.dragItems,r=e.nodeLookup,o=e.dragging,i=void 0===o||o,a=[],u=!0,s=!1,l=void 0;try{for(var c,d,h,f=n[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p,v=(0,E._)(h.value,2),g=v[0],y=v[1],m=null==(p=r.get(g))?void 0:p.internals.userNode;m&&a.push((0,w._)((0,x._)({},m),{position:y.position,dragging:i}))}}catch(e){s=!0,l=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw l}}if(!t)return[a[0],a];var _=null==(c=r.get(t))?void 0:c.internals.userNode;return[_?(0,w._)((0,x._)({},_),{position:(null==(d=n.get(t))?void 0:d.position)||_.position,dragging:i}):a[0],a]}function n9(e){var t=e.onNodeMouseDown,n=e.getStoreItems,r=e.onDragStart,o=e.onDrag,i=e.onDragStop,a={x:null,y:null},u=0,s=new Map,l=!1,c={x:0,y:0},d=null,h=!1,f=null,p=!1,v=!1,g=null;return{update:function(e){var y=e.noDragClassName,_=e.handleSelector,x=e.domNode,w=e.isSelectable,b=e.nodeId,T=e.nodeClickDistance;function S(e){var t=e.x,r=e.y,i=n(),u=i.nodeLookup,l=i.nodeExtent,c=i.snapGrid,d=i.snapToGrid,h=i.nodeOrigin,f=i.onNodeDrag,p=i.onSelectionDrag,y=i.onError,m=i.updateNodePositions;a={x:t,y:r};var _=!1,x=s.size>1,w=x&&l?t3(tF(s)):null,T=x&&d?function(e){var t=e.dragItems,n=e.snapGrid,r=e.x,o=e.y,i=t.values().next().value;if(!i)return null;var a={x:r-i.distance.x,y:o-i.distance.y},u=nn(a,n);return{x:u.x-a.x,y:u.y-a.y}}({dragItems:s,snapGrid:c,x:t,y:r}):null,S=!0,k=!1,O=void 0;try{for(var M,N=s[Symbol.iterator]();!(S=(M=N.next()).done);S=!0){var P=(0,E._)(M.value,2),A=P[0],C=P[1];if(u.has(A)){var I={x:t-C.distance.x,y:r-C.distance.y};d&&(I=T?{x:Math.round(I.x+T.x),y:Math.round(I.y+T.y)}:nn(I,c));var z=null;if(x&&l&&!C.extent&&w){var L=C.internals.positionAbsolute,j=L.x-w.x+l[0][0],R=L.x+C.measured.width-w.x2+l[1][0],D=L.y-w.y+l[0][1],B=L.y+C.measured.height-w.y2+l[1][1];z=[[j,D],[R,B]]}var G=tZ({nodeId:A,nextPosition:I,nodeLookup:u,nodeExtent:z||l,nodeOrigin:h,onError:y}),H=G.position,X=G.positionAbsolute;_=_||C.position.x!==H.x||C.position.y!==H.y,C.position=H,C.internals.positionAbsolute=X}}}catch(e){k=!0,O=e}finally{try{S||null==N.return||N.return()}finally{if(k)throw O}}if(v=v||_,_&&(m(s,!0),g&&(o||f||!b&&p))){var Y=(0,E._)(n6({nodeId:b,dragItems:s,nodeLookup:u}),2),V=Y[0],F=Y[1];null==o||o(g,s,V,F),null==f||f(g,V,F),b||null==p||p(g,F)}}function O(e){var o,i=n(),u=i.nodeLookup,l=i.multiSelectionActive,c=i.nodesDraggable,f=i.transform,p=i.snapGrid,v=i.snapToGrid,g=i.selectNodesOnDrag,y=i.onNodeDragStart,m=i.onSelectionDragStart,_=i.unselectNodesAndEdges;h=!0,(!g||!w)&&!l&&b&&((null==(o=u.get(b))?void 0:o.selected)||_()),w&&g&&b&&(null==t||t(b));var x=nv(e.sourceEvent,{transform:f,snapGrid:p,snapToGrid:v,containerBounds:d});if(a=x,(s=function(e,t,n,r){var o=new Map,i=!0,a=!1,u=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=(0,E._)(s.value,2),d=c[0],h=c[1];if((h.selected||h.id===r)&&(!h.parentId||!function e(t,n){if(!t.parentId)return!1;var r=n.get(t.parentId);return!!r&&(!!r.selected||e(r,n))}(h,e))&&(h.draggable||t&&void 0===h.draggable)){var f,p,v=e.get(d);v&&o.set(d,{id:d,position:v.position||{x:0,y:0},distance:{x:n.x-v.internals.positionAbsolute.x,y:n.y-v.internals.positionAbsolute.y},extent:v.extent,parentId:v.parentId,origin:v.origin,expandParent:v.expandParent,internals:{positionAbsolute:v.internals.positionAbsolute||{x:0,y:0}},measured:{width:null!=(f=v.measured.width)?f:0,height:null!=(p=v.measured.height)?p:0}})}}}catch(e){a=!0,u=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw u}}return o}(u,c,x,b)).size>0&&(r||y||!b&&m)){var T=(0,E._)(n6({nodeId:b,dragItems:s,nodeLookup:u}),2),S=T[0],k=T[1];null==r||r(e.sourceEvent,s,S,k),null==y||y(e.sourceEvent,S,k),b||null==m||m(e.sourceEvent,k)}}f=em(x);var M=eC().clickDistance(void 0===T?0:T).on("start",function(e){var t=n(),r=t.domNode,o=t.nodeDragThreshold,i=t.transform,u=t.snapGrid,s=t.snapToGrid;d=(null==r?void 0:r.getBoundingClientRect())||null,p=!1,v=!1,g=e.sourceEvent,0===o&&O(e),a=nv(e.sourceEvent,{transform:i,snapGrid:u,snapToGrid:s,containerBounds:d}),c=nw(e.sourceEvent,d)}).on("drag",function(e){var t=n(),r=t.autoPanOnNodeDrag,o=t.transform,i=t.snapGrid,f=t.snapToGrid,v=t.nodeDragThreshold,y=t.nodeLookup,_=nv(e.sourceEvent,{transform:o,snapGrid:i,snapToGrid:f,containerBounds:d});if(g=e.sourceEvent,("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||b&&!y.has(b))&&(p=!0),!p){if(!l&&r&&h&&(l=!0,!function e(){return(0,m._)(function(){var t,r,o,i,s,h,f,p,v;return(0,k._)(this,function(g){switch(g.label){case 0:if(!d)return[2];if(r=(t=n()).transform,o=t.panBy,i=t.autoPanSpeed,!t.autoPanOnNodeDrag)return l=!1,cancelAnimationFrame(u),[2];if(h=(s=(0,E._)(t1(c,d,i),2))[0],f=s[1],0===h&&0===f)return[3,2];return a.x=(null!=(p=a.x)?p:0)-h/r[2],a.y=(null!=(v=a.y)?v:0)-f/r[2],[4,o({x:h,y:f})];case 1:g.sent()&&S(a),g.label=2;case 2:return u=requestAnimationFrame(e),[2]}})})()}()),!h){var x,w,T=_.xSnapped-(null!=(x=a.x)?x:0),M=_.ySnapped-(null!=(w=a.y)?w:0);Math.sqrt(T*T+M*M)>v&&O(e)}(a.x!==_.xSnapped||a.y!==_.ySnapped)&&s&&h&&(c=nw(e.sourceEvent,d),S(_))}}).on("end",function(e){if(h&&!p&&(l=!1,h=!1,cancelAnimationFrame(u),s.size>0)){var t=n(),r=t.nodeLookup,o=t.updateNodePositions,a=t.onNodeDragStop,c=t.onSelectionDragStop;if(v&&(o(s,!1),v=!1),i||a||!b&&c){var d=(0,E._)(n6({nodeId:b,dragItems:s,nodeLookup:r,dragging:!1}),2),f=d[0],g=d[1];null==i||i(e.sourceEvent,s,f,g),null==a||a(e.sourceEvent,f,g),b||null==c||c(e.sourceEvent,g)}}}).filter(function(e){var t=e.target;return!e.button&&(!y||!n5(t,".".concat(y),x))&&(!_||n5(t,_,x))});f.call(M)},destroy:function(){null==f||f.on(".drag",null)}}}function n4(e,t,n,r,o){var i,a,u,s,l,c,d=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=r.get(e);if(!h)return null;var f="strict"===o?null==(i=h.internals.handleBounds)?void 0:i[t]:(0,T._)(null!=(s=null==(a=h.internals.handleBounds)?void 0:a.source)?s:[]).concat((0,T._)(null!=(l=null==(u=h.internals.handleBounds)?void 0:u.target)?l:[])),p=null!=(c=n?null==f?void 0:f.find(function(e){return e.id===n}):null==f?void 0:f[0])?c:null;return p&&d?(0,x._)({},p,nG(h,p,p.position,!0)):p}function n8(e,t){return e?e:(null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null}var n7=function(){return!0};function re(e,t){var n=t.handle,r=t.connectionMode,o=t.fromNodeId,i=t.fromHandleId,a=t.fromType,u=t.doc,s=t.lib,c=t.flowId,d=t.isValidConnection,h=t.nodeLookup,f="target"===a,p=n?u.querySelector(".".concat(s,'-flow__handle[data-id="').concat(c,"-").concat(null==n?void 0:n.nodeId,"-").concat(null==n?void 0:n.id,"-").concat(null==n?void 0:n.type,'"]')):null,v=nw(e),g=v.x,y=v.y,m=u.elementFromPoint(g,y),_=(null==m?void 0:m.classList.contains("".concat(s,"-flow__handle")))?m:p,x={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){var w=n8(void 0,_),b=_.getAttribute("data-nodeid"),E=_.getAttribute("data-handleid"),T=_.classList.contains("connectable"),S=_.classList.contains("connectableend");if(!b||!w)return x;var k={source:f?b:o,sourceHandle:f?E:i,target:f?o:b,targetHandle:f?i:E};x.connection=k,x.isValid=T&&S&&(r===l.Strict?f&&"source"===w||!f&&"target"===w:b!==o||E!==i)&&(void 0===d?n7:d)(k),x.toHandle=n4(b,w,E,h,r,!0)}return x}var rt={onPointerDown:function(e,t){var n,r=t.connectionMode,o=t.connectionRadius,i=t.handleId,a=t.nodeId,u=t.edgeUpdaterType,s=t.isTarget,l=t.domNode,c=t.nodeLookup,d=t.lib,h=t.autoPanOnConnect,f=t.flowId,v=t.panBy,g=t.cancelConnection,y=t.onConnectStart,m=t.onConnect,_=t.onConnectEnd,S=t.isValidConnection,k=void 0===S?n7:S,O=t.onReconnectEnd,M=t.updateConnection,N=t.getTransform,P=t.getFromHandle,A=t.autoPanSpeed,C=t.dragThreshold,I=void 0===C?1:C,z=t.handleDomNode,L=ny(e.target),j=0,R=nw(e),D=R.x,B=R.y,G=n8(u,z),H=null==l?void 0:l.getBoundingClientRect(),X=!1;if(H&&G){var Y=n4(a,G,i,c,r);if(Y){var V=nw(e,H),F=!1,W=null,U=!1,q=null,Z=(0,w._)((0,x._)({},Y),{nodeId:a,type:G,position:Y.position}),K=c.get(a),Q={inProgress:!0,isValid:null,from:nG(K,Z,p.Left,!0),fromHandle:Z,fromPosition:Z.position,fromNode:K,to:V,toHandle:null,toPosition:tj[Z.position],toNode:null};0===I&&$(),L.addEventListener("mousemove",J),L.addEventListener("mouseup",ee),L.addEventListener("touchmove",J),L.addEventListener("touchend",ee)}}function $(){X=!0,M(Q),null==y||y(e,{nodeId:a,handleId:i,handleType:G})}function J(e){if(!X){var t,u,l,p=nw(e),g=p.x,y=p.y,m=g-D,_=y-B;if(!(m*m+_*_>I*I))return;$()}if(!P()||!Z)return void ee(e);var b=N();n=function(e,t,n,r){var o=[],i=1/0,a=function(e,t,n){var r=[],o={x:e.x-n,y:e.y-n,width:2*n,height:2*n},i=!0,a=!1,u=void 0;try{for(var s,l=t.values()[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;t8(o,t6(c))>0&&r.push(c)}}catch(e){a=!0,u=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw u}}return r}(e,n,t+250),u=!0,s=!1,l=void 0;try{for(var c,d=a[Symbol.iterator]();!(u=(c=d.next()).done);u=!0){var h=c.value,f=(0,T._)(null!=(_=null==(y=h.internals.handleBounds)?void 0:y.source)?_:[]).concat((0,T._)(null!=(b=null==(m=h.internals.handleBounds)?void 0:m.target)?b:[])),p=!0,v=!1,g=void 0;try{for(var y,m,_,b,E,S=f[Symbol.iterator]();!(p=(E=S.next()).done);p=!0){var k=E.value;if(r.nodeId!==k.nodeId||r.type!==k.type||r.id!==k.id){var O=nG(h,k,k.position,!0),M=O.x,N=O.y,P=Math.sqrt(Math.pow(M-e.x,2)+Math.pow(N-e.y,2));P>t||(P<i?(o=[(0,w._)((0,x._)({},k),{x:M,y:N})],i=P):P===i&&o.push((0,w._)((0,x._)({},k),{x:M,y:N})))}}}catch(e){v=!0,g=e}finally{try{p||null==S.return||S.return()}finally{if(v)throw g}}}}catch(e){s=!0,l=e}finally{try{u||null==d.return||d.return()}finally{if(s)throw l}}if(!o.length)return null;if(o.length>1){var A,C="source"===r.type?"target":"source";return null!=(A=o.find(function(e){return e.type===C}))?A:o[0]}return o[0]}(nr(V=nw(e,H),b,!1,[1,1]),o,c,Z),F||(!function e(){if(h&&H){var t=(0,E._)(t1(V,H,A),2);v({x:t[0],y:t[1]}),j=requestAnimationFrame(e)}}(),F=!0);var S=re(e,{handle:n,connectionMode:r,fromNodeId:a,fromHandleId:i,fromType:s?"target":"source",isValidConnection:k,doc:L,lib:d,flowId:f,nodeLookup:c});q=S.handleDomNode,W=S.connection,t=!!n,u=S.isValid,l=null,u?l=!0:t&&!u&&(l=!1),U=l;var O=(0,w._)((0,x._)({},Q),{isValid:U,to:S.toHandle&&U?no({x:S.toHandle.x,y:S.toHandle.y},b):V,toHandle:S.toHandle,toPosition:U&&S.toHandle?S.toHandle.position:tj[Z.position],toNode:S.toHandle?c.get(S.toHandle.nodeId):null});U&&n&&Q.toHandle&&O.toHandle&&Q.toHandle.type===O.toHandle.type&&Q.toHandle.nodeId===O.toHandle.nodeId&&Q.toHandle.id===O.toHandle.id&&Q.to.x===O.to.x&&Q.to.y===O.to.y||(M(O),Q=O)}function ee(e){if(X){(n||q)&&W&&U&&(null==m||m(W)),Q.inProgress;var t=(0,b._)(Q,["inProgress"]),r=(0,w._)((0,x._)({},t),{toPosition:Q.toHandle?Q.toPosition:null});null==_||_(e,r),u&&(null==O||O(e,r))}g(),cancelAnimationFrame(j),F=!1,U=!1,W=null,q=null,L.removeEventListener("mousemove",J),L.removeEventListener("mouseup",ee),L.removeEventListener("touchmove",J),L.removeEventListener("touchend",ee)}},isValid:re};function rn(e){var t=e.domNode,n=e.panZoom,r=e.getTransform,o=e.getViewScale,i=em(t);return{update:function(e){var t=e.translateExtent,a=e.width,u=e.height,s=e.zoomStep,l=void 0===s?1:s,c=e.pannable,d=e.zoomable,h=e.inversePan,f=void 0!==h&&h,p=[0,0],v=tN().on("start",function(e){if("mousedown"===e.sourceEvent.type||"touchstart"===e.sourceEvent.type){var t,n;p=[null!=(t=e.sourceEvent.clientX)?t:e.sourceEvent.touches[0].clientX,null!=(n=e.sourceEvent.clientY)?n:e.sourceEvent.touches[0].clientY]}}).on("zoom",void 0===c||c?function(e){var i,s,l=r();if(("mousemove"===e.sourceEvent.type||"touchmove"===e.sourceEvent.type)&&n){var c=[null!=(i=e.sourceEvent.clientX)?i:e.sourceEvent.touches[0].clientX,null!=(s=e.sourceEvent.clientY)?s:e.sourceEvent.touches[0].clientY],d=[c[0]-p[0],c[1]-p[1]];p=c;var h=o()*Math.max(l[2],Math.log(l[2]))*(f?-1:1),v={x:l[0]-d[0]*h,y:l[1]-d[1]*h};n.setViewportConstrained({x:v.x,y:v.y,zoom:l[2]},[[0,0],[a,u]],t)}}:null).on("zoom.wheel",void 0===d||d?function(e){if("wheel"===e.sourceEvent.type&&n){var t=r(),o=e.sourceEvent.ctrlKey&&nu()?10:1,i=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*l,a=t[2]*Math.pow(2,i*o);n.scaleTo(a)}}:null);i.call(v,{})},destroy:function(){i.on("zoom",null)},pointer:e_}}var rr=function(e){return{x:e.x,y:e.y,zoom:e.k}},ro=function(e){var t=e.x,n=e.y,r=e.zoom;return t_.translate(t,n).scale(r)},ri=function(e,t){return e.target.closest(".".concat(t))},ra=function(e,t){return 2===t&&Array.isArray(e)&&e.includes(2)},ru=function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2},rs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ru,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o="number"==typeof t&&t>0;return o||r(),o?e.transition().duration(t).ease(n).on("end",r):e},rl=function(e){var t=e.ctrlKey&&nu()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function rc(e){var t=e.domNode,n=e.minZoom,r=e.maxZoom,o=e.paneClickDistance,i=e.translateExtent,a=e.viewport,u=e.onPanZoom,s=e.onPanZoomStart,l=e.onPanZoomEnd,d=e.onDraggingChange,h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=t.getBoundingClientRect(),p=tN().clickDistance(!ne(o)||o<0?0:o).scaleExtent([n,r]).translateExtent(i),v=em(t).call(p);w({x:a.x,y:a.y,zoom:tQ(a.zoom,n,r)},[[0,0],[f.width,f.height]],i);var g=v.on("wheel.zoom"),y=v.on("dblclick.zoom");function _(e,t){return v?new Promise(function(n){null==p||p.interpolate((null==t?void 0:t.interpolate)==="linear"?tP.interpolate:eL).transform(rs(v,null==t?void 0:t.duration,null==t?void 0:t.ease,function(){return n(!0)}),e)}):Promise.resolve(!1)}function x(){p.on("zoom",null)}function w(e,t,n){return(0,m._)(function(){var r,o;return(0,k._)(this,function(i){switch(i.label){case 0:if(r=ro(e),!(o=null==p?void 0:p.constrain()(r,t,n)))return[3,2];return[4,_(o)];case 1:i.sent(),i.label=2;case 2:return[2,new Promise(function(e){return e(o)})]}})})()}return p.wheelDelta(rl),{update:function(e){var t,n,r,o,i,a,f,m,_,w,b,E=e.noWheelClassName,T=e.noPanClassName,S=e.onPaneContextMenu,k=e.userSelectionActive,O=e.panOnScroll,M=e.panOnDrag,N=e.panOnScrollMode,P=e.panOnScrollSpeed,A=e.preventScrolling,C=e.zoomOnPinch,I=e.zoomOnScroll,z=e.zoomOnDoubleClick,L=e.zoomActivationKeyPressed,j=e.lib,R=e.onTransformChange;k&&!h.isZoomingOrPanning&&x();var D=!O||L||k?(Q=(K={noWheelClassName:E,preventScrolling:A,d3ZoomHandler:g}).noWheelClassName,$=K.preventScrolling,J=K.d3ZoomHandler,function(e,t){var n="wheel"===e.type,r=!$&&n&&!e.ctrlKey,o=ri(e,Q);if(e.ctrlKey&&n&&o&&e.preventDefault(),r||o)return null;e.preventDefault(),J.call(this,e,t)}):(G=(B={zoomPanValues:h,noWheelClassName:E,d3Selection:v,d3Zoom:p,panOnScrollMode:N,panOnScrollSpeed:P,zoomOnPinch:C,onPanZoomStart:s,onPanZoom:u,onPanZoomEnd:l}).zoomPanValues,H=B.noWheelClassName,X=B.d3Selection,Y=B.d3Zoom,V=B.panOnScrollMode,F=B.panOnScrollSpeed,W=B.zoomOnPinch,U=B.onPanZoomStart,q=B.onPanZoom,Z=B.onPanZoomEnd,function(e){if(ri(e,H))return!1;e.preventDefault(),e.stopImmediatePropagation();var t=X.property("__zoom").k||1;if(e.ctrlKey&&W){var n=e_(e),r=t*Math.pow(2,rl(e));Y.scaleTo(X,r,n,e);return}var o=1===e.deltaMode?20:1,i=V===c.Vertical?0:e.deltaX*o,a=V===c.Horizontal?0:e.deltaY*o;!nu()&&e.shiftKey&&V!==c.Vertical&&(i=e.deltaY*o,a=0),Y.translateBy(X,-(i/t)*F,-(a/t)*F,{internal:!0});var u=rr(X.property("__zoom"));clearTimeout(G.panScrollTimeout),G.isPanScrolling||(G.isPanScrolling=!0,null==U||U(e,u)),G.isPanScrolling&&(null==q||q(e,u),G.panScrollTimeout=setTimeout(function(){null==Z||Z(e,u),G.isPanScrolling=!1},150))});if(v.on("wheel.zoom",D,{passive:!1}),!k){var B,G,H,X,Y,V,F,W,U,q,Z,K,Q,$,J,ee,et,en,er,eo,ei,ea,eu,es,el,ec,ed,eh,ef,ep,ev,eg,ey=(et=(ee={zoomPanValues:h,onDraggingChange:d,onPanZoomStart:s}).zoomPanValues,en=ee.onDraggingChange,er=ee.onPanZoomStart,function(e){if(null==(t=e.sourceEvent)||!t.internal){var t,n,r,o=rr(e.transform);et.mouseButton=(null==(n=e.sourceEvent)?void 0:n.button)||0,et.isZoomingOrPanning=!0,et.prevViewport=o,(null==(r=e.sourceEvent)?void 0:r.type)==="mousedown"&&en(!0),er&&(null==er||er(e.sourceEvent,o))}});p.on("start",ey);var em=(ei=(eo={zoomPanValues:h,panOnDrag:M,onPaneContextMenu:!!S,onPanZoom:u,onTransformChange:R}).zoomPanValues,ea=eo.panOnDrag,eu=eo.onPaneContextMenu,es=eo.onTransformChange,el=eo.onPanZoom,function(e){var t,n,r;ei.usedRightMouseButton=!!(eu&&ra(ea,null!=(r=ei.mouseButton)?r:0)),(null==(t=e.sourceEvent)?void 0:t.sync)||es([e.transform.x,e.transform.y,e.transform.k]),!el||(null==(n=e.sourceEvent)?void 0:n.internal)||null==el||el(e.sourceEvent,rr(e.transform))});p.on("zoom",em);var ex=(ed=(ec={zoomPanValues:h,panOnDrag:M,panOnScroll:O,onPaneContextMenu:S,onPanZoomEnd:l,onDraggingChange:d}).zoomPanValues,eh=ec.panOnDrag,ef=ec.panOnScroll,ep=ec.onDraggingChange,ev=ec.onPanZoomEnd,eg=ec.onPaneContextMenu,function(e){if(null==(r=e.sourceEvent)||!r.internal){var t,n;if(ed.isZoomingOrPanning=!1,eg&&ra(eh,null!=(o=ed.mouseButton)?o:0)&&!ed.usedRightMouseButton&&e.sourceEvent&&eg(e.sourceEvent),ed.usedRightMouseButton=!1,ep(!1),ev&&(t=ed.prevViewport,n=e.transform,t.x!==n.x||t.y!==n.y||t.zoom!==n.k)){var r,o,i=rr(e.transform);ed.prevViewport=i,clearTimeout(ed.timerId),ed.timerId=setTimeout(function(){null==ev||ev(e.sourceEvent,i)},150*!!ef)}}});p.on("end",ex)}var ew=(n=(t={zoomActivationKeyPressed:L,panOnDrag:M,zoomOnScroll:I,panOnScroll:O,zoomOnDoubleClick:z,zoomOnPinch:C,userSelectionActive:k,noPanClassName:T,noWheelClassName:E,lib:j}).zoomActivationKeyPressed,r=t.zoomOnScroll,o=t.zoomOnPinch,i=t.panOnDrag,a=t.panOnScroll,f=t.zoomOnDoubleClick,m=t.userSelectionActive,_=t.noWheelClassName,w=t.noPanClassName,b=t.lib,function(e){var t,u=n||r,s=o&&e.ctrlKey;if(1===e.button&&"mousedown"===e.type&&(ri(e,"".concat(b,"-flow__node"))||ri(e,"".concat(b,"-flow__edge"))))return!0;if(!i&&!u&&!a&&!f&&!o||m||ri(e,_)&&"wheel"===e.type||ri(e,w)&&("wheel"!==e.type||a&&"wheel"===e.type&&!n)||!o&&e.ctrlKey&&"wheel"===e.type)return!1;if(!o&&"touchstart"===e.type&&(null==(t=e.touches)?void 0:t.length)>1)return e.preventDefault(),!1;if(!u&&!a&&!s&&"wheel"===e.type||!i&&("mousedown"===e.type||"touchstart"===e.type)||Array.isArray(i)&&!i.includes(e.button)&&"mousedown"===e.type)return!1;var l=Array.isArray(i)&&i.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&l});p.filter(ew),z?v.on("dblclick.zoom",y):v.on("dblclick.zoom",null)},destroy:x,setViewport:function(e,t){return(0,m._)(function(){var n;return(0,k._)(this,function(r){switch(r.label){case 0:return[4,_(n=ro(e),t)];case 1:return r.sent(),[2,new Promise(function(e){return e(n)})]}})})()},setViewportConstrained:w,getViewport:function(){var e=v?tx(v.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return v?new Promise(function(n){null==p||p.interpolate((null==t?void 0:t.interpolate)==="linear"?tP.interpolate:eL).scaleTo(rs(v,null==t?void 0:t.duration,null==t?void 0:t.ease,function(){return n(!0)}),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return v?new Promise(function(n){null==p||p.interpolate((null==t?void 0:t.interpolate)==="linear"?tP.interpolate:eL).scaleBy(rs(v,null==t?void 0:t.duration,null==t?void 0:t.ease,function(){return n(!0)}),e)}):Promise.resolve(!1)},setScaleExtent:function(e){null==p||p.scaleExtent(e)},setTranslateExtent:function(e){null==p||p.translateExtent(e)},syncViewport:function(e){if(v){var t=ro(e),n=v.property("__zoom");(n.k!==e.zoom||n.x!==e.x||n.y!==e.y)&&(null==p||p.transform(v,t,null,{sync:!0}))}},setClickDistance:function(e){var t=!ne(e)||e<0?0:e;null==p||p.clickDistance(t)}}}(u=y||(y={})).Line="line",u.Handle="handle";var rd=["top-left","top-right","bottom-left","bottom-right"],rh=["top","right","bottom","left"];function rf(e,t){return Math.max(0,t-e)}function rp(e,t){return Math.max(0,e-t)}function rv(e,t,n){return Math.max(0,t-e,e-n)}var rg={width:0,height:0,x:0,y:0},ry=(0,w._)((0,x._)({},rg),{pointerX:0,pointerY:0,aspectRatio:1});function rm(e){var t=e.domNode,n=e.nodeId,r=e.getStoreItems,o=e.onChange,i=e.onEnd,a=em(t);return{update:function(e){var t=e.controlPosition,u=e.boundaries,s=e.keepAspectRatio,l=e.resizeDirection,c=e.onResizeStart,d=e.onResize,h=e.onResizeEnd,f=e.shouldResize,p=(0,x._)({},rg),v=(0,x._)({},ry),g={isHorizontal:t.includes("right")||t.includes("left"),isVertical:t.includes("bottom")||t.includes("top"),affectsX:t.includes("left"),affectsY:t.includes("top")},y=void 0,m=null,_=[],b=void 0,T=void 0,S=void 0,k=eC().on("start",function(e){var t=r(),o=t.nodeLookup,i=t.transform,a=t.snapGrid,u=t.snapToGrid,s=t.nodeOrigin,l=t.paneDomNode;if(y=o.get(n)){m=null!=(N=null==l?void 0:l.getBoundingClientRect())?N:null;var d=nv(e.sourceEvent,{transform:i,snapGrid:a,snapToGrid:u,containerBounds:m}),h=d.xSnapped,f=d.ySnapped;p={width:null!=(P=y.measured.width)?P:0,height:null!=(A=y.measured.height)?A:0,x:null!=(C=y.position.x)?C:0,y:null!=(I=y.position.y)?I:0},v=(0,w._)((0,x._)({},p),{pointerX:h,pointerY:f,aspectRatio:p.width/p.height}),b=void 0,y.parentId&&("parent"===y.extent||y.expandParent)&&(T=(b=o.get(y.parentId))&&"parent"===y.extent?[[0,0],[(M=b).measured.width,M.measured.height]]:void 0),_=[],S=void 0;var g=!0,k=!1,O=void 0;try{for(var M,N,P,A,C,I,z,L=o[Symbol.iterator]();!(g=(z=L.next()).done);g=!0){var j=(0,E._)(z.value,2),R=j[0],D=j[1];if(D.parentId===n&&(_.push({id:R,position:(0,x._)({},D.position),extent:D.extent}),"parent"===D.extent||D.expandParent)){var B,G=function(e,t,n){var r,o,i=t.position.x+e.position.x,a=t.position.y+e.position.y,u=null!=(r=e.measured.width)?r:0,s=null!=(o=e.measured.height)?o:0,l=n[0]*u,c=n[1]*s;return[[i-l,a-c],[i+u-l,a+s-c]]}(D,y,null!=(B=D.origin)?B:s);S=S?[[Math.min(G[0][0],S[0][0]),Math.min(G[0][1],S[0][1])],[Math.max(G[1][0],S[1][0]),Math.max(G[1][1],S[1][1])]]:G}}}catch(e){k=!0,O=e}finally{try{g||null==L.return||L.return()}finally{if(k)throw O}}null==c||c(e,(0,x._)({},p))}}).on("drag",function(e){var t,n,i,a,c,h,E,k,O,M,N=r(),P=N.transform,A=N.snapGrid,C=N.snapToGrid,I=N.nodeOrigin,z=nv(e.sourceEvent,{transform:P,snapGrid:A,snapToGrid:C,containerBounds:m}),L=[];if(y){var j=p.x,R=p.y,D=p.width,B=p.height,G={},H=null!=(en=y.origin)?en:I,X=function(e,t,n,r,o,i,a,u){var s,l,c,d,h=t.affectsX,f=t.affectsY,p=t.isHorizontal,v=t.isVertical,g=p&&v,y=n.xSnapped,m=n.ySnapped,_=r.minWidth,x=r.maxWidth,w=r.minHeight,b=r.maxHeight,E=e.x,T=e.y,S=e.width,k=e.height,O=e.aspectRatio,M=Math.floor(p?y-e.pointerX:0),N=Math.floor(v?m-e.pointerY:0),P=S+(h?-M:M),A=k+(f?-N:N),C=-i[0]*S,I=-i[1]*k,z=rv(P,_,x),L=rv(A,w,b);if(a){var j=0,R=0;h&&M<0?j=rf(E+M+C,a[0][0]):!h&&M>0&&(j=rp(E+P+C,a[1][0])),f&&N<0?R=rf(T+N+I,a[0][1]):!f&&N>0&&(R=rp(T+A+I,a[1][1])),z=Math.max(z,j),L=Math.max(L,R)}if(u){var D=0,B=0;h&&M>0?D=rp(E+M,u[0][0]):!h&&M<0&&(D=rf(E+P,u[1][0])),f&&N>0?B=rp(T+N,u[0][1]):!f&&N<0&&(B=rf(T+A,u[1][1])),z=Math.max(z,D),L=Math.max(L,B)}if(o){if(p){(z=Math.max(z,rv(P/O,w,b)*O),a)&&(z=Math.max(z,(h||f)&&(!h||f||!g)?rf(T+I+(h?M:-M)/O,a[0][1])*O:rp(T+I+P/O,a[1][1])*O));u&&(z=Math.max(z,(h||f)&&(!h||f||!g)?rp(T+(h?M:-M)/O,u[0][1])*O:rf(T+P/O,u[1][1])*O))}if(v){(L=Math.max(L,rv(A*O,_,x)/O),a)&&(L=Math.max(L,(h||f)&&(!f||h||!g)?rf(E+(f?N:-N)*O+C,a[0][0])/O:rp(E+A*O+C,a[1][0])/O));u&&(L=Math.max(L,(h||f)&&(!f||h||!g)?rp(E+(f?N:-N)*O,u[0][0])/O:rf(E+A*O,u[1][0])/O))}}N+=N<0?L:-L,M+=M<0?z:-z,o&&(g?P>A*O?N=((s=h,l=f,s?!l:l)?-M:M)/O:M=((c=h,d=f,c?!d:d)?-N:N)*O:p?(N=M/O,f=h):(M=N*O,h=f));var G=h?E+M:E,H=f?T+N:T;return{width:S+(h?-M:M),height:k+(f?-N:N),x:i[0]*M*(h?-1:1)+G,y:i[1]*N*(f?-1:1)+H}}(v,g,z,u,s,H,T,S),Y=X.width,V=X.height,F=X.x,W=X.y,U=Y!==D,q=V!==B,Z=F!==j&&U,K=W!==R&&q;if(Z||K||U||q){if((Z||K||1===H[0]||1===H[1])&&(G.x=Z?F:p.x,G.y=K?W:p.y,p.x=G.x,p.y=G.y,_.length>0)){var Q=F-j,$=W-R,J=!0,ee=!1,et=void 0;try{for(var en,er,eo=_[Symbol.iterator]();!(J=(er=eo.next()).done);J=!0){var ei=er.value;ei.position={x:ei.position.x-Q+H[0]*(Y-D),y:ei.position.y-$+H[1]*(V-B)},L.push(ei)}}catch(e){ee=!0,et=e}finally{try{J||null==eo.return||eo.return()}finally{if(ee)throw et}}}if((U||q)&&(G.width=U&&(!l||"horizontal"===l)?Y:p.width,G.height=q&&(!l||"vertical"===l)?V:p.height,p.width=G.width,p.height=G.height),b&&y.expandParent){var ea,eu,es=H[0]*(null!=(ea=G.width)?ea:0);G.x&&G.x<es&&(p.x=es,v.x=v.x-(G.x-es));var el=H[1]*(null!=(eu=G.height)?eu:0);G.y&&G.y<el&&(p.y=el,v.y=v.y-(G.y-el))}var ec=(n=(t={width:p.width,prevWidth:D,height:p.height,prevHeight:B,affectsX:g.affectsX,affectsY:g.affectsY}).width,i=t.prevWidth,a=t.height,c=t.prevHeight,h=t.affectsX,E=t.affectsY,M=[(k=n-i)>0?1:k<0?-1:0,(O=a-c)>0?1:O<0?-1:0],k&&h&&(M[0]=-1*M[0]),O&&E&&(M[1]=-1*M[1]),M),ed=(0,w._)((0,x._)({},p),{direction:ec});!1!==(null==f?void 0:f(e,ed))&&(null==d||d(e,ed),o(G,L))}}}).on("end",function(e){null==h||h(e,(0,x._)({},p)),null==i||i((0,x._)({},p))});a.call(k)},destroy:function(){a.on(".drag",null)}}}e.s(["ConnectionLineType",()=>h,"ConnectionMode",()=>l,"MarkerType",()=>f,"PanOnScrollMode",()=>c,"Position",()=>p,"ResizeControlVariant",()=>y,"SelectionMode",()=>d,"XYDrag",()=>n9,"XYHandle",()=>rt,"XYMinimap",()=>rn,"XYPanZoom",()=>rc,"XYResizer",()=>rm,"XY_RESIZER_HANDLE_POSITIONS",()=>rd,"XY_RESIZER_LINE_POSITIONS",()=>rh,"addEdge",()=>nA,"adoptUserNodes",()=>nZ,"areConnectionMapsEqual",()=>tR,"areSetsEqual",()=>nh,"calculateNodePosition",()=>tZ,"createMarkerIds",()=>nY,"defaultAriaLabelConfig",()=>tz,"devWarn",()=>nt,"elementSelectionKeys",()=>tI,"errorMessages",()=>tA,"evaluateAbsolutePosition",()=>nd,"fitViewport",()=>tq,"getBezierEdgeCenter",()=>nE,"getBezierPath",()=>nk,"getBoundsOfRects",()=>t4,"getConnectionStatus",()=>tB,"getDimensions",()=>ng,"getEdgePosition",()=>nD,"getElementsToRemove",()=>tK,"getElevatedEdgeZIndex",()=>nM,"getEventPosition",()=>nw,"getHostForElement",()=>ny,"getInternalNodesBounds",()=>tF,"getMarkerId",()=>nX,"getNodeDimensions",()=>nl,"getNodeToolbarTransform",()=>nV,"getNodesBounds",()=>tV,"getNodesInside",()=>tW,"getOverlappingArea",()=>t8,"getSmoothStepPath",()=>nj,"getStraightPath",()=>nC,"getViewportForBounds",()=>na,"handleConnectionChange",()=>tD,"handleExpandParent",()=>n$,"infiniteExtent",()=>tC,"initialConnection",()=>tL,"isEdgeBase",()=>tG,"isEdgeVisible",()=>nN,"isInputDOMNode",()=>n_,"isMacOs",()=>nu,"isMouseEvent",()=>nx,"isNodeBase",()=>tH,"isNumeric",()=>ne,"isRectObject",()=>t7,"mergeAriaLabelConfig",()=>np,"nodeHasDimensions",()=>nc,"nodeToRect",()=>t6,"panBy",()=>n0,"pointToRendererPoint",()=>nr,"rendererPointToPoint",()=>no,"shallowNodeData",()=>n3,"snapPosition",()=>nn,"updateAbsolutePositions",()=>nq,"updateConnectionLookup",()=>n2,"updateNodeInternals",()=>nJ,"withResolvers",()=>nf],250464)},781900,(e,t,n)=>{"use strict";var r=e.r(883735),o=e.r(619314),i=e.r(109133),a=e.r(316330),u=e.r(365738);function s(e,t){e[t]?e[t]++:e[t]=1}function l(e,t){--e[t]||delete e[t]}function c(e,t,n,r){var o=""+t,i=""+n;if(!e&&o>i){var a=o;o=i,i=a}return o+"\x01"+i+"\x01"+(void 0===r?"\0":r)}function d(e,t){return c(e,t.v,t.w,t.name)}t.exports=function(){function e(t){r._(this,e),i._(this,"_isDirected",!0),i._(this,"_isMultigraph",!1),i._(this,"_isCompound",!1),i._(this,"_label",void 0),i._(this,"_defaultNodeLabelFn",function(){}),i._(this,"_defaultEdgeLabelFn",function(){}),i._(this,"_nodes",{}),i._(this,"_in",{}),i._(this,"_preds",{}),i._(this,"_out",{}),i._(this,"_sucs",{}),i._(this,"_edgeObjs",{}),i._(this,"_edgeLabels",{}),i._(this,"_nodeCount",0),i._(this,"_edgeCount",0),i._(this,"_parent",void 0),i._(this,"_children",void 0),t&&(this._isDirected=!Object.hasOwn(t,"directed")||t.directed,this._isMultigraph=!!Object.hasOwn(t,"multigraph")&&t.multigraph,this._isCompound=!!Object.hasOwn(t,"compound")&&t.compound),this._isCompound&&(this._parent={},this._children={},this._children["\0"]={})}return o._(e,[{key:"isDirected",value:function(){return this._isDirected}},{key:"isMultigraph",value:function(){return this._isMultigraph}},{key:"isCompound",value:function(){return this._isCompound}},{key:"setGraph",value:function(e){return this._label=e,this}},{key:"graph",value:function(){return this._label}},{key:"setDefaultNodeLabel",value:function(e){return this._defaultNodeLabelFn=e,"function"!=typeof e&&(this._defaultNodeLabelFn=function(){return e}),this}},{key:"nodeCount",value:function(){return this._nodeCount}},{key:"nodes",value:function(){return Object.keys(this._nodes)}},{key:"sources",value:function(){var e=this;return this.nodes().filter(function(t){return 0===Object.keys(e._in[t]).length})}},{key:"sinks",value:function(){var e=this;return this.nodes().filter(function(t){return 0===Object.keys(e._out[t]).length})}},{key:"setNodes",value:function(e,t){var n=arguments,r=this;return e.forEach(function(e){n.length>1?r.setNode(e,t):r.setNode(e)}),this}},{key:"setNode",value:function(e,t){return Object.hasOwn(this._nodes,e)?arguments.length>1&&(this._nodes[e]=t):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount),this}},{key:"node",value:function(e){return this._nodes[e]}},{key:"hasNode",value:function(e){return Object.hasOwn(this._nodes,e)}},{key:"removeNode",value:function(e){var t=this;if(Object.hasOwn(this._nodes,e)){var n=function(e){return t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach(function(e){t.setParent(e)}),delete this._children[e]),Object.keys(this._in[e]).forEach(n),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}},{key:"setParent",value:function(e,t){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(void 0===t)t="\0";else{t+="";for(var n=t;void 0!==n;n=this.parent(n))if(n===e)throw Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this}},{key:"_removeFromParentsChildList",value:function(e){delete this._children[this._parent[e]][e]}},{key:"parent",value:function(e){if(this._isCompound){var t=this._parent[e];if("\0"!==t)return t}}},{key:"children",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\0";if(this._isCompound){var t=this._children[e];if(t)return Object.keys(t)}else if("\0"===e)return this.nodes();else if(this.hasNode(e))return[]}},{key:"predecessors",value:function(e){var t=this._preds[e];if(t)return Object.keys(t)}},{key:"successors",value:function(e){var t=this._sucs[e];if(t)return Object.keys(t)}},{key:"neighbors",value:function(e){var t=this.predecessors(e);if(t){var n=new Set(t),r=!0,o=!1,i=void 0;try{for(var a,u=this.successors(e)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;n.add(s)}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return Array.from(n.values())}}},{key:"isLeaf",value:function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}},{key:"filterNodes",value:function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;Object.entries(this._nodes).forEach(function(n){var r=a._(n,2),o=r[0],i=r[1];e(o)&&t.setNode(o,i)}),Object.values(this._edgeObjs).forEach(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))});var r={};return this._isCompound&&t.nodes().forEach(function(e){return t.setParent(e,function e(o){var i=n.parent(o);return void 0===i||t.hasNode(i)?(r[o]=i,i):i in r?r[i]:e(i)}(e))}),t}},{key:"setDefaultEdgeLabel",value:function(e){return this._defaultEdgeLabelFn=e,"function"!=typeof e&&(this._defaultEdgeLabelFn=function(){return e}),this}},{key:"edgeCount",value:function(){return this._edgeCount}},{key:"edges",value:function(){return Object.values(this._edgeObjs)}},{key:"setPath",value:function(e,t){var n=this,r=arguments;return e.reduce(function(e,o){return r.length>1?n.setEdge(e,o,t):n.setEdge(e,o),o}),this}},{key:"setEdge",value:function(){var e,t,n,r,o=!1,i=arguments[0];(void 0===i?"undefined":u._(i))==="object"&&null!==i&&"v"in i?(e=i.v,t=i.w,n=i.name,2==arguments.length&&(r=arguments[1],o=!0)):(e=i,t=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],o=!0)),e=""+e,t=""+t,void 0!==n&&(n=""+n);var a=c(this._isDirected,e,t,n);if(Object.hasOwn(this._edgeLabels,a))return o&&(this._edgeLabels[a]=r),this;if(void 0!==n&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[a]=o?r:this._defaultEdgeLabelFn(e,t,n);var l=function(e,t,n,r){var o=""+t,i=""+n;if(!e&&o>i){var a=o;o=i,i=a}var u={v:o,w:i};return r&&(u.name=r),u}(this._isDirected,e,t,n);return e=l.v,t=l.w,Object.freeze(l),this._edgeObjs[a]=l,s(this._preds[t],e),s(this._sucs[e],t),this._in[t][a]=l,this._out[e][a]=l,this._edgeCount++,this}},{key:"edge",value:function(e,t,n){var r=1==arguments.length?d(this._isDirected,arguments[0]):c(this._isDirected,e,t,n);return this._edgeLabels[r]}},{key:"edgeAsObj",value:function(){var e=this.edge.apply(this,arguments);return(void 0===e?"undefined":u._(e))!=="object"?{label:e}:e}},{key:"hasEdge",value:function(e,t,n){var r=1==arguments.length?d(this._isDirected,arguments[0]):c(this._isDirected,e,t,n);return Object.hasOwn(this._edgeLabels,r)}},{key:"removeEdge",value:function(e,t,n){var r=1==arguments.length?d(this._isDirected,arguments[0]):c(this._isDirected,e,t,n),o=this._edgeObjs[r];return o&&(e=o.v,t=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],l(this._preds[t],e),l(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this}},{key:"inEdges",value:function(e,t){var n=this._in[e];if(n){var r=Object.values(n);return t?r.filter(function(e){return e.v===t}):r}}},{key:"outEdges",value:function(e,t){var n=this._out[e];if(n){var r=Object.values(n);return t?r.filter(function(e){return e.w===t}):r}}},{key:"nodeEdges",value:function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}}]),e}()},778040,(e,t,n)=>{t.exports="2.2.4"},991360,(e,t,n)=>{t.exports={Graph:e.r(781900),version:e.r(778040)}},303727,(e,t,n)=>{var r=e.r(781900);t.exports={write:function(e){var t,n,r={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:(t=e).nodes().map(function(e){var n=t.node(e),r=t.parent(e),o={v:e};return void 0!==n&&(o.value=n),void 0!==r&&(o.parent=r),o}),edges:(n=e).edges().map(function(e){var t=n.edge(e),r={v:e.v,w:e.w};return void 0!==e.name&&(r.name=e.name),void 0!==t&&(r.value=t),r})};return void 0!==e.graph()&&(r.value=structuredClone(e.graph())),r},read:function(e){var t=new r(e.options).setGraph(e.value);return e.nodes.forEach(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),e.edges.forEach(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}}},610143,(e,t,n)=>{t.exports=function(e){var t,n={},r=[];return e.nodes().forEach(function(o){t=[],function r(o){Object.hasOwn(n,o)||(n[o]=!0,t.push(o),e.successors(o).forEach(r),e.predecessors(o).forEach(r))}(o),t.length&&r.push(t)}),r}},565803,(e,t,n)=>{var r=e.r(883735),o=e.r(619314),i=e.r(109133);t.exports=function(){"use strict";function e(){r._(this,e),i._(this,"_arr",[]),i._(this,"_keyIndices",{})}return o._(e,[{key:"size",value:function(){return this._arr.length}},{key:"keys",value:function(){return this._arr.map(function(e){return e.key})}},{key:"has",value:function(e){return Object.hasOwn(this._keyIndices,e)}},{key:"priority",value:function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority}},{key:"min",value:function(){if(0===this.size())throw Error("Queue underflow");return this._arr[0].key}},{key:"add",value:function(e,t){var n=this._keyIndices;if(!Object.hasOwn(n,e=String(e))){var r=this._arr,o=r.length;return n[e]=o,r.push({key:e,priority:t}),this._decrease(o),!0}return!1}},{key:"removeMin",value:function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}},{key:"decrease",value:function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)}},{key:"_heapify",value:function(e){var t=this._arr,n=2*e,r=n+1,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,r<t.length&&(o=t[r].priority<t[o].priority?r:o),o!==e&&(this._swap(e,o),this._heapify(o)))}},{key:"_decrease",value:function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t}},{key:"_swap",value:function(e,t){var n=this._arr,r=this._keyIndices,o=n[e],i=n[t];n[e]=i,n[t]=o,r[i.key]=e,r[o.key]=t}}]),e}()},808751,(e,t,n)=>{var r=e.r(565803);t.exports=function(e,t,n,i){return function(e,t,n,o){var i,a,u={},s=new r,l=function(e){var t=e.v!==i?e.v:e.w,r=u[t],o=n(e),l=a.distance+o;if(o<0)throw Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+o);l<r.distance&&(r.distance=l,r.predecessor=i,s.decrease(t,l))};for(e.nodes().forEach(function(e){var n=e===t?0:1/0;u[e]={distance:n},s.add(e,n)});s.size()>0&&(a=u[i=s.removeMin()]).distance!==1/0;)o(i).forEach(l);return u}(e,String(t),n||o,i||function(t){return e.outEdges(t)})};var o=function(){return 1}},920169,(e,t,n)=>{var r=e.r(808751);t.exports=function(e,t,n){return e.nodes().reduce(function(o,i){return o[i]=r(e,i,t,n),o},{})}},771495,(e,t,n)=>{t.exports=function(e){var t=0,n=[],r={},o=[];return e.nodes().forEach(function(i){Object.hasOwn(r,i)||function i(a){var u=r[a]={onStack:!0,lowlink:t,index:t++};if(n.push(a),e.successors(a).forEach(function(e){Object.hasOwn(r,e)?r[e].onStack&&(u.lowlink=Math.min(u.lowlink,r[e].index)):(i(e),u.lowlink=Math.min(u.lowlink,r[e].lowlink))}),u.lowlink===u.index){var s,l=[];do r[s=n.pop()].onStack=!1,l.push(s);while(a!==s)o.push(l)}}(i)}),o}},80080,(e,t,n)=>{var r=e.r(771495);t.exports=function(e){return r(e).filter(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}},511844,(e,t,n)=>{t.exports=function(e,t,n){var o,i,a,u,s;return o=e,i=t||r,a=n||function(t){return e.outEdges(t)},u={},(s=o.nodes()).forEach(function(e){u[e]={},u[e][e]={distance:0},s.forEach(function(t){e!==t&&(u[e][t]={distance:1/0})}),a(e).forEach(function(t){var n=t.v===e?t.w:t.v,r=i(t);u[e][n]={distance:r,predecessor:e}})}),s.forEach(function(e){var t=u[e];s.forEach(function(n){var r=u[n];s.forEach(function(n){var o=r[e],i=t[n],a=r[n],u=o.distance+i.distance;u<a.distance&&(a.distance=u,a.predecessor=i.predecessor)})})}),u};var r=function(){return 1}},512908,(e,t,n)=>{var r=e.r(772929),o=e.r(883735),i=e.r(559542);function a(e){var t={},n={},r=[];if(e.sinks().forEach(function o(i){if(Object.hasOwn(n,i))throw new u;Object.hasOwn(t,i)||(n[i]=!0,t[i]=!0,e.predecessors(i).forEach(o),delete n[i],r.push(i))}),Object.keys(t).length!==e.nodeCount())throw new u;return r}var u=function(e){"use strict";function t(){return o._(this,t),r._(this,t,arguments)}return i._(t,e),t}(e.r(873719)._(Error));t.exports=a,a.CycleException=u},256090,(e,t,n)=>{var r=e.r(954546),o=e.r(512908);t.exports=function(e){try{o(e)}catch(e){if(r._(e,o.CycleException))return!1;throw e}return!0}},744294,(e,t,n)=>{function r(e,t,n,r){for(var o=[[e,!1]];o.length>0;){var a=o.pop();a[1]?r.push(a[0]):Object.hasOwn(n,a[0])||(n[a[0]]=!0,o.push([a[0],!0]),i(t(a[0]),function(e){return o.push([e,!1])}))}}function o(e,t,n,r){for(var o=[e];o.length>0;){var a=o.pop();Object.hasOwn(n,a)||(n[a]=!0,r.push(a),i(t(a),function(e){return o.push(e)}))}}function i(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}t.exports=function(e,t,n){Array.isArray(t)||(t=[t]);var i=e.isDirected()?function(t){return e.successors(t)}:function(t){return e.neighbors(t)},a="post"===n?r:o,u=[],s={};return t.forEach(function(t){if(!e.hasNode(t))throw Error("Graph does not have node: "+t);a(t,i,s,u)}),u}},275974,(e,t,n)=>{var r=e.r(744294);t.exports=function(e,t){return r(e,t,"post")}},988712,(e,t,n)=>{var r=e.r(744294);t.exports=function(e,t){return r(e,t,"pre")}},960253,(e,t,n)=>{var r=e.r(781900),o=e.r(565803);t.exports=function(e,t){var n,i=new r,a={},u=new o;function s(e){var r=e.v===n?e.w:e.v,o=u.priority(r);if(void 0!==o){var i=t(e);i<o&&(a[r]=n,u.decrease(r,i))}}if(0===e.nodeCount())return i;e.nodes().forEach(function(e){u.add(e,1/0),i.setNode(e)}),u.decrease(e.nodes()[0],0);for(var l=!1;u.size()>0;){if(Object.hasOwn(a,n=u.removeMin()))i.setEdge(n,a[n]);else if(l)throw Error("Input graph is not connected: "+e);else l=!0;e.nodeEdges(n).forEach(s)}return i}},966703,(e,t,n)=>{t.exports={components:e.r(610143),dijkstra:e.r(808751),dijkstraAll:e.r(920169),findCycles:e.r(80080),floydWarshall:e.r(511844),isAcyclic:e.r(256090),postorder:e.r(275974),preorder:e.r(988712),prim:e.r(960253),tarjan:e.r(771495),topsort:e.r(512908)}},703710,(e,t,n)=>{var r=e.r(991360);t.exports={Graph:r.Graph,json:e.r(303727),alg:e.r(966703),version:r.version}},284851,(e,t,n)=>{var r=e.r(883735),o=e.r(619314);function i(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function a(e,t){if("_next"!==e&&"_prev"!==e)return t}t.exports=function(){"use strict";function e(){r._(this,e);var t={};t._next=t._prev=t,this._sentinel=t}return o._(e,[{key:"dequeue",value:function(){var e=this._sentinel,t=e._prev;if(t!==e)return i(t),t}},{key:"enqueue",value:function(e){var t=this._sentinel;e._prev&&e._next&&i(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}},{key:"toString",value:function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,a)),n=n._prev;return"["+e.join(", ")+"]"}}]),e}()},848184,(e,t,n)=>{var r=e.r(703710).Graph,o=e.r(284851);t.exports=function(e,t){if(1>=e.nodeCount())return[];var n,s,l,c,d,h,f,p=(n=e,s=t||i,l=new r,c=0,d=0,n.nodes().forEach(function(e){l.setNode(e,{v:e,in:0,out:0})}),n.edges().forEach(function(e){var t=l.edge(e.v,e.w)||0,n=s(e);l.setEdge(e.v,e.w,t+n),d=Math.max(d,l.node(e.v).out+=n),c=Math.max(c,l.node(e.w).in+=n)}),h=(function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t})(d+c+3).map(function(){return new o}),f=c+1,l.nodes().forEach(function(e){u(h,f,l.node(e))}),{graph:l,buckets:h,zeroIdx:f});return(function(e,t,n){for(var r,o=[],i=t[t.length-1],u=t[0];e.nodeCount();){for(;r=u.dequeue();)a(e,t,n,r);for(;r=i.dequeue();)a(e,t,n,r);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(r=t[s].dequeue()){o=o.concat(a(e,t,n,r,!0));break}}}return o})(p.graph,p.buckets,p.zeroIdx).flatMap(function(t){return e.outEdges(t.v,t.w)})};var i=function(){return 1};function a(e,t,n,r,o){var i=o?[]:void 0;return e.inEdges(r.v).forEach(function(r){var a=e.edge(r),s=e.node(r.v);o&&i.push({v:r.v,w:r.w}),s.out-=a,u(t,n,s)}),e.outEdges(r.v).forEach(function(r){var o=e.edge(r),i=r.w,a=e.node(i);a.in-=o,u(t,n,a)}),e.removeNode(r.v),i}function u(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},193625,(e,t,n)=>{"use strict";var r=e.r(316330),o=e.r(703710).Graph;function i(e,t,n,r){for(var o=r;e.hasNode(o);)o=l(r);return n.dummy=t,e.setNode(o,n),o}t.exports={addBorderNode:function(e,t,n,r){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),i(e,"border",o,t)},addDummyNode:i,applyWithChunking:a,asNonCompoundGraph:function(e){var t=new o({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(function(n){e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(function(n){t.setEdge(n,e.edge(n))}),t},buildLayerMatrix:function(e){var t=c(u(e)+1).map(function(){return[]});return e.nodes().forEach(function(n){var r=e.node(n),o=r.rank;void 0!==o&&(t[o][r.order]=n)}),t},intersectRect:function(e,t){var n,r,o=e.x,i=e.y,a=t.x-o,u=t.y-i,s=e.width/2,l=e.height/2;if(!a&&!u)throw Error("Not possible to find intersection inside of the rectangle");return Math.abs(u)*s>Math.abs(a)*l?(u<0&&(l=-l),n=l*a/u,r=l):(a<0&&(s=-s),n=s,r=s*u/a),{x:o+n,y:i+r}},mapValues:function(e,t){var n=t;return"string"==typeof t&&(n=function(e){return e[t]}),Object.entries(e).reduce(function(e,t){var o=r._(t,2),i=o[0],a=o[1];return e[i]=n(a,i),e},{})},maxRank:u,normalizeRanks:function(e){var t=a(Math.min,e.nodes().map(function(t){var n=e.node(t).rank;return void 0===n?Number.MAX_VALUE:n}));e.nodes().forEach(function(n){var r=e.node(n);Object.hasOwn(r,"rank")&&(r.rank-=t)})},notime:function(e,t){return t()},partition:function(e,t){var n={lhs:[],rhs:[]};return e.forEach(function(e){t(e)?n.lhs.push(e):n.rhs.push(e)}),n},pick:function(e,t){var n={},r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;void 0!==e[s]&&(n[s]=e[s])}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n},predecessorWeights:function(e){var t=e.nodes().map(function(t){var n={};return e.inEdges(t).forEach(function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight}),n});return d(e.nodes(),t)},range:c,removeEmptyRanks:function(e){var t=a(Math.min,e.nodes().map(function(t){return e.node(t).rank})),n=[];e.nodes().forEach(function(r){var o=e.node(r).rank-t;n[o]||(n[o]=[]),n[o].push(r)});var r=0,o=e.graph().nodeRankFactor;Array.from(n).forEach(function(t,n){void 0===t&&n%o!=0?--r:void 0!==t&&r&&t.forEach(function(t){return e.node(t).rank+=r})})},simplify:function(e){var t=new o().setGraph(e.graph());return e.nodes().forEach(function(n){return t.setNode(n,e.node(n))}),e.edges().forEach(function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t},successorWeights:function(e){var t=e.nodes().map(function(t){var n={};return e.outEdges(t).forEach(function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight}),n});return d(e.nodes(),t)},time:function(e,t){var n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}},uniqueId:l,zipObject:d};function a(e,t){if(!(t.length>65535))return e.apply(null,t);var n=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:65535,n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n}(t);return e.apply(null,n.map(function(t){return e.apply(null,t)}))}function u(e){return a(Math.max,e.nodes().map(function(t){var n=e.node(t).rank;return void 0===n?5e-324:n}))}var s=0;function l(e){return e+""+ ++s}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;null==t&&(t=e,e=0);var r=function(e){return e<t};n<0&&(r=function(e){return t<e});for(var o=[],i=e;r(i);i+=n)o.push(i);return o}function d(e,t){return e.reduce(function(e,n,r){return e[n]=t[r],e},{})}},875518,(e,t,n)=>{"use strict";var r=e.r(848184),o=e.r(193625).uniqueId;t.exports={run:function(e){var t,n,i,a,u;("greedy"===e.graph().acyclicer?r(e,(t=e,function(e){return t.edge(e).weight})):(i=[],a={},u={},(n=e).nodes().forEach(function e(t){Object.hasOwn(u,t)||(u[t]=!0,a[t]=!0,n.outEdges(t).forEach(function(t){Object.hasOwn(a,t.w)?i.push(t):e(t.w)}),delete a[t])}),i)).forEach(function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,o("rev"))})},undo:function(e){e.edges().forEach(function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}}},812163,(e,t,n)=>{"use strict";var r=e.r(193625);t.exports={run:function(e){e.graph().dummyChains=[],e.edges().forEach(function(t){return function(e,t){var n,o,i,a=t.v,u=e.node(a).rank,s=t.w,l=e.node(s).rank,c=t.name,d=e.edge(t),h=d.labelRank;if(l!==u+1){for(e.removeEdge(t),i=0,++u;u<l;++i,++u)d.points=[],o={width:0,height:0,edgeLabel:d,edgeObj:t,rank:u},n=r.addDummyNode(e,"edge",o,"_d"),u===h&&(o.width=d.width,o.height=d.height,o.dummy="edge-label",o.labelpos=d.labelpos),e.setEdge(a,n,{weight:d.weight},c),0===i&&e.graph().dummyChains.push(n),a=n;e.setEdge(a,s,{weight:d.weight},c)}}(e,t)})},undo:function(e){e.graph().dummyChains.forEach(function(t){var n,r=e.node(t),o=r.edgeLabel;for(e.setEdge(r.edgeObj,o);r.dummy;)n=e.successors(t)[0],e.removeNode(t),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),t=n,r=e.node(t)})}}},876553,(e,t,n)=>{"use strict";var r=e.r(193625).applyWithChunking;t.exports={longestPath:function(e){var t={};e.sources().forEach(function n(o){var i=e.node(o);if(Object.hasOwn(t,o))return i.rank;t[o]=!0;var a=r(Math.min,e.outEdges(o).map(function(t){return null==t?1/0:n(t.w)-e.edge(t).minlen}));return a===1/0&&(a=0),i.rank=a})},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},466166,(e,t,n)=>{"use strict";var r=e.r(703710).Graph,o=e.r(876553).slack;t.exports=function(e){var t,n,i,a,u=new r({directed:!1}),s=e.nodes()[0],l=e.nodeCount();for(u.setNode(s,{});t=u,n=e,t.nodes().forEach(function e(r){n.nodeEdges(r).forEach(function(i){var a=i.v,u=r===a?i.w:a;t.hasNode(u)||o(n,i)||(t.setNode(u,{}),t.setEdge(r,u,{}),e(u))})}),t.nodeCount()<l;)i=function(e,t){return t.edges().reduce(function(n,r){var i=1/0;return(e.hasNode(r.v)!==e.hasNode(r.w)&&(i=o(t,r)),i<n[0])?[i,r]:n},[1/0,null])[1]}(u,e),a=u.hasNode(i.v)?o(e,i):-o(e,i),function(e,t,n){e.nodes().forEach(function(e){return t.node(e).rank+=n})}(u,e,a);return u}},498529,(e,t,n)=>{"use strict";var r=e.r(466166),o=e.r(876553).slack,i=e.r(876553).longestPath,a=e.r(703710).alg.preorder,u=e.r(703710).alg.postorder,s=e.r(193625).simplify;function l(e){i(e=s(e));var t,n,o=r(e);for(h(o),c(o,e);t=f(o);)n=p(o,e,t),v(o,e,t,n)}function c(e,t){var n=u(e,e.nodes());(n=n.slice(0,n.length-1)).forEach(function(n){var r,o,i,a;return r=e,o=t,i=n,a=r.node(i).parent,void(r.edge(i,a).cutvalue=d(r,o,i))})}function d(e,t,n){var r=e.node(n).parent,o=!0,i=t.edge(n,r),a=0;return i||(o=!1,i=t.edge(r,n)),a=i.weight,t.nodeEdges(n).forEach(function(i){var u=i.v===n,s=u?i.w:i.v;if(s!==r){var l,c,d,h=u===o,f=t.edge(i).weight;if(a+=h?f:-f,l=e,c=n,d=s,l.hasEdge(c,d)){var p=e.edge(n,s).cutvalue;a+=h?-p:p}}}),a}function h(e,t){arguments.length<2&&(t=e.nodes()[0]),function e(t,n,r,o,i){var a=r,u=t.node(o);return n[o]=!0,t.neighbors(o).forEach(function(i){Object.hasOwn(n,i)||(r=e(t,n,r,i,o))}),u.low=a,u.lim=r++,i?u.parent=i:delete u.parent,r}(e,{},1,t)}function f(e){return e.edges().find(function(t){return e.edge(t).cutvalue<0})}function p(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var a=e.node(r),u=e.node(i),s=a,l=!1;return a.lim>u.lim&&(s=u,l=!0),t.edges().filter(function(t){return l===g(e,e.node(t.v),s)&&l!==g(e,e.node(t.w),s)}).reduce(function(e,n){return o(t,n)<o(t,e)?n:e})}function v(e,t,n,r){var o,i,u,s,l=n.v,d=n.w;e.removeEdge(l,d),e.setEdge(r.v,r.w,{}),h(e),c(e,t),o=e,i=t,u=o.nodes().find(function(e){return!i.node(e).parent}),(s=(s=a(o,u)).slice(1)).forEach(function(e){var t=o.node(e).parent,n=i.edge(e,t),r=!1;n||(n=i.edge(t,e),r=!0),i.node(e).rank=i.node(t).rank+(r?n.minlen:-n.minlen)})}function g(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}t.exports=l,l.initLowLimValues=h,l.initCutValues=c,l.calcCutValue=d,l.leaveEdge=f,l.enterEdge=p,l.exchangeEdges=v},804347,(e,t,n)=>{"use strict";var r=e.r(954546),o=e.r(876553).longestPath,i=e.r(466166),a=e.r(498529);t.exports=function(e){var t,n=e.graph().ranker;if(r._(n,Function))return n(e);switch(e.graph().ranker){case"network-simplex":default:a(e);break;case"tight-tree":o(t=e),i(t);break;case"longest-path":u(e);case"none":}};var u=o},452637,(e,t,n)=>{t.exports=function(e){var t,n,r,o=(n={},r=0,(t=e).children().forEach(function e(o){var i=r;t.children(o).forEach(e),n[o]={low:i,lim:r++}}),n);e.graph().dummyChains.forEach(function(t){for(var n=e.node(t),r=n.edgeObj,i=function(e,t,n,r){var o,i,a=[],u=[],s=Math.min(t[n].low,t[r].low),l=Math.max(t[n].lim,t[r].lim);o=n;do a.push(o=e.parent(o));while(o&&(t[o].low>s||l>t[o].lim))for(i=o,o=r;(o=e.parent(o))!==i;)u.push(o);return{path:a.concat(u.reverse()),lca:i}}(e,o,r.v,r.w),a=i.path,u=i.lca,s=0,l=a[0],c=!0;t!==r.w;){if(n=e.node(t),c){for(;(l=a[s])!==u&&e.node(l).maxRank<n.rank;)s++;l===u&&(c=!1)}if(!c){for(;s<a.length-1&&e.node(l=a[s+1]).minRank<=n.rank;)s++;l=a[s]}e.setParent(t,l),t=e.successors(t)[0]}})}},841909,(e,t,n)=>{var r=e.r(193625);t.exports={run:function(e){var t,n,o,i=r.addDummyNode(e,"root",{},"_root"),a=(n={},(t=e).children().forEach(function(e){return function e(r,o){var i=t.children(r);i&&i.length&&i.forEach(function(t){return e(t,o+1)}),n[r]=o}(e,1)}),n),u=Object.values(a),s=r.applyWithChunking(Math.max,u)-1,l=2*s+1;e.graph().nestingRoot=i,e.edges().forEach(function(t){return e.edge(t).minlen*=l});var c=(o=e).edges().reduce(function(e,t){return e+o.edge(t).weight},0)+1;e.children().forEach(function(t){return function e(t,n,o,i,a,u,s){var l=t.children(s);if(!l.length){s!==n&&t.setEdge(n,s,{weight:0,minlen:o});return}var c=r.addBorderNode(t,"_bt"),d=r.addBorderNode(t,"_bb"),h=t.node(s);t.setParent(c,s),h.borderTop=c,t.setParent(d,s),h.borderBottom=d,l.forEach(function(r){e(t,n,o,i,a,u,r);var l=t.node(r),h=l.borderTop?l.borderTop:r,f=l.borderBottom?l.borderBottom:r,p=l.borderTop?i:2*i,v=h!==f?1:a-u[s]+1;t.setEdge(c,h,{weight:p,minlen:v,nestingEdge:!0}),t.setEdge(f,d,{weight:p,minlen:v,nestingEdge:!0})}),t.parent(s)||t.setEdge(n,c,{weight:0,minlen:a+u[s]})}(e,i,l,c,s,a,t)}),e.graph().nodeRankFactor=l},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}}},211237,(e,t,n)=>{var r=e.r(193625);function o(e,t,n,o,i,a){var u=i[t][a-1],s=r.addDummyNode(e,"border",{width:0,height:0,rank:a,borderType:t},n);i[t][a]=s,e.setParent(s,o),u&&e.setEdge(u,s,{weight:1})}t.exports=function(e){e.children().forEach(function t(n){var r=e.children(n),i=e.node(n);if(r.length&&r.forEach(t),Object.hasOwn(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,u=i.maxRank+1;a<u;++a)o(e,"borderLeft","_bl",n,i,a),o(e,"borderRight","_br",n,i,a)}})}},642354,(e,t,n)=>{"use strict";function r(e){e.nodes().forEach(function(t){return o(e.node(t))}),e.edges().forEach(function(t){return o(e.edge(t))})}function o(e){var t=e.width;e.width=e.height,e.height=t}function i(e){e.y=-e.y}function a(e){var t=e.x;e.x=e.y,e.y=t}t.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();("lr"===t||"rl"===t)&&r(e)},undo:function(e){var t,n,o=e.graph().rankdir.toLowerCase();("bt"===o||"rl"===o)&&((t=e).nodes().forEach(function(e){return i(t.node(e))}),t.edges().forEach(function(e){var n=t.edge(e);n.points.forEach(i),Object.hasOwn(n,"y")&&i(n)})),("lr"===o||"rl"===o)&&((n=e).nodes().forEach(function(e){return a(n.node(e))}),n.edges().forEach(function(e){var t=n.edge(e);t.points.forEach(a),Object.hasOwn(t,"x")&&a(t)}),r(e))}}},96511,(e,t,n)=>{"use strict";var r=e.r(193625);t.exports=function(e){var t={},n=e.nodes().filter(function(t){return!e.children(t).length}),o=n.map(function(t){return e.node(t).rank}),i=r.applyWithChunking(Math.max,o),a=r.range(i+1).map(function(){return[]});return n.sort(function(t,n){return e.node(t).rank-e.node(n).rank}).forEach(function n(r){t[r]||(t[r]=!0,a[e.node(r).rank].push(r),e.successors(r).forEach(n))}),a}},239037,(e,t,n)=>{"use strict";var r=e.r(193625).zipObject;t.exports=function(e,t){for(var n=0,o=1;o<t.length;++o)n+=function(e,t,n){for(var o=r(n,n.map(function(e,t){return t})),i=t.flatMap(function(t){return e.outEdges(t).map(function(t){return{pos:o[t.w],weight:e.edge(t).weight}}).sort(function(e,t){return e.pos-t.pos})}),a=1;a<n.length;)a<<=1;var u=2*a-1;a-=1;var s=Array(u).fill(0),l=0;return i.forEach(function(e){var t=e.pos+a;s[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=s[t+1]),t=t-1>>1,s[t]+=e.weight;l+=e.weight*n}),l}(e,t[o-1],t[o]);return n}},543507,(e,t,n)=>{t.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.map(function(t){var n=e.inEdges(t);if(!n.length)return{v:t};var r=n.reduce(function(t,n){var r=e.edge(n),o=e.node(n.v);return{sum:t.sum+r.weight*o.order,weight:t.weight+r.weight}},{sum:0,weight:0});return{v:t,barycenter:r.sum/r.weight,weight:r.weight}})}},990002,(e,t,n)=>{"use strict";var r=e.r(193625);t.exports=function(e,t){var n={};return e.forEach(function(e,t){var r=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};void 0!==e.barycenter&&(r.barycenter=e.barycenter,r.weight=e.weight)}),t.edges().forEach(function(e){var t=n[e.v],r=n[e.w];void 0!==t&&void 0!==r&&(r.indegree++,t.out.push(n[e.w]))}),function(e){for(var t=[];e.length;){var n=e.pop();t.push(n),n.in.reverse().forEach(function(e){return function(t){!t.merged&&(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&function(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}(n)),n.out.forEach(function(t){return function(n){n.in.push(t),0==--n.indegree&&e.push(n)}}(n))}return t.filter(function(e){return!e.merged}).map(function(e){return r.pick(e,["vs","i","barycenter","weight"])})}(Object.values(n).filter(function(e){return!e.indegree}))}},667441,(e,t,n)=>{var r=e.r(193625);function o(e,t,n){for(var r;t.length&&(r=t[t.length-1]).i<=n;)t.pop(),e.push(r.vs),n++;return n}t.exports=function(e,t){var n,i=r.partition(e,function(e){return Object.hasOwn(e,"barycenter")}),a=i.lhs,u=i.rhs.sort(function(e,t){return t.i-e.i}),s=[],l=0,c=0,d=0;a.sort((n=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:n?t.i-e.i:e.i-t.i})),d=o(s,u,d),a.forEach(function(e){d+=e.vs.length,s.push(e.vs),l+=e.barycenter*e.weight,c+=e.weight,d=o(s,u,d)});var h={vs:s.flat(!0)};return c&&(h.barycenter=l/c,h.weight=c),h}},12646,(e,t,n)=>{var r=e.r(543507),o=e.r(990002),i=e.r(667441);t.exports=function e(t,n,a,u){var s,l,c=t.children(n),d=t.node(n),h=d?d.borderLeft:void 0,f=d?d.borderRight:void 0,p={};h&&(c=c.filter(function(e){return e!==h&&e!==f}));var v=r(t,c);v.forEach(function(n){if(t.children(n.v).length){var r,o,i=e(t,n.v,a,u);p[n.v]=i,Object.hasOwn(i,"barycenter")&&(r=n,o=i,void 0!==r.barycenter?(r.barycenter=(r.barycenter*r.weight+o.barycenter*o.weight)/(r.weight+o.weight),r.weight+=o.weight):(r.barycenter=o.barycenter,r.weight=o.weight))}});var g=o(v,a);s=g,l=p,s.forEach(function(e){e.vs=e.vs.flatMap(function(e){return l[e]?l[e].vs:e})});var y=i(g,u);if(h&&(y.vs=[h,y.vs,f].flat(!0),t.predecessors(h).length)){var m=t.node(t.predecessors(h)[0]),_=t.node(t.predecessors(f)[0]);Object.hasOwn(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+m.order+_.order)/(y.weight+2),y.weight+=2}return y}},16693,(e,t,n)=>{var r=e.r(703710).Graph,o=e.r(193625);t.exports=function(e,t,n){var i=function(e){for(var t;e.hasNode(t=o.uniqueId("_root")););return t}(e),a=new r({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(t){return e.node(t)});return e.nodes().forEach(function(r){var o=e.node(r),u=e.parent(r);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(a.setNode(r),a.setParent(r,u||i),e[n](r).forEach(function(t){var n=t.v===r?t.w:t.v,o=a.edge(n,r),i=void 0!==o?o.weight:0;a.setEdge(n,r,{weight:e.edge(t).weight+i})}),Object.hasOwn(o,"minRank")&&a.setNode(r,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),a}},655882,(e,t,n)=>{t.exports=function(e,t,n){var r,o={};n.forEach(function(n){for(var i,a,u=e.parent(n);u;){if((i=e.parent(u))?(a=o[i],o[i]=u):(a=r,r=u),a&&a!==u)return void t.setEdge(a,u);u=i}})}},792149,(e,t,n)=>{"use strict";var r=e.r(96511),o=e.r(239037),i=e.r(12646),a=e.r(16693),u=e.r(655882),s=e.r(703710).Graph,l=e.r(193625);function c(e,t,n){return t.map(function(t){return a(e,t,n)})}function d(e,t){Object.values(t).forEach(function(t){return t.forEach(function(t,n){return e.node(t).order=n})})}t.exports=function e(t,n){if(n&&"function"==typeof n.customOrder)return void n.customOrder(t,e);var a=l.maxRank(t),h=c(t,l.range(1,a+1),"inEdges"),f=c(t,l.range(a-1,-1,-1),"outEdges"),p=r(t);if(d(t,p),!n||!n.disableOptimalOrderHeuristic){for(var v,g=1/0,y=0,m=0;m<4;++y,++m){(function(e,t){var n=new s;e.forEach(function(e){var r=e.graph().root,o=i(e,r,n,t);o.vs.forEach(function(t,n){return e.node(t).order=n}),u(e,n,o.vs)})})(y%2?h:f,y%4>=2),p=l.buildLayerMatrix(t);var _=o(t,p);_<g&&(m=0,v=Object.assign({},p),g=_)}d(t,v)}}},543391,(e,t,n)=>{"use strict";var r=e.r(316330),o=e.r(703710).Graph,i=e.r(193625);function a(e,t){var n={};return t.length&&t.reduce(function(t,r){var o=0,i=0,a=t.length,u=r[r.length-1];return r.forEach(function(t,l){var c=function(e,t){if(e.node(t).dummy)return e.predecessors(t).find(function(t){return e.node(t).dummy})}(e,t),d=c?e.node(c).order:a;(c||t===u)&&(r.slice(i,l+1).forEach(function(t){e.predecessors(t).forEach(function(r){var i=e.node(r),a=i.order;(a<o||d<a)&&!(i.dummy&&e.node(t).dummy)&&s(n,r,t)})}),i=l+1,o=d)}),r}),n}function u(e,t){var n={};function r(t,r,o,a,u){var l;i.range(r,o).forEach(function(r){l=t[r],e.node(l).dummy&&e.predecessors(l).forEach(function(t){var r=e.node(t);r.dummy&&(r.order<a||r.order>u)&&s(n,t,l)})})}return t.length&&t.reduce(function(t,n){var o,i=-1,a=0;return n.forEach(function(u,s){if("border"===e.node(u).dummy){var l=e.predecessors(u);l.length&&(o=e.node(l[0]).order,r(n,a,s,i,o),a=s,i=o)}r(n,a,n.length,o,t.length)}),n}),n}function s(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function l(e,t,n){if(t>n){var r=t;t=n,n=r}return!!e[t]&&Object.hasOwn(e[t],n)}function c(e,t,n,r){var o={},i={},a={};return t.forEach(function(e){e.forEach(function(e,t){o[e]=e,i[e]=e,a[e]=t})}),t.forEach(function(e){var t=-1;e.forEach(function(e){var u=r(e);if(u.length)for(var s=((u=u.sort(function(e,t){return a[e]-a[t]})).length-1)/2,c=Math.floor(s),d=Math.ceil(s);c<=d;++c){var h=u[c];i[e]===e&&t<a[h]&&!l(n,e,h)&&(i[h]=e,i[e]=o[e]=o[h],t=a[h])}})}),{root:o,align:i}}function d(e,t,n,r,i){var a,u,s,l,c,d,h,f,p,v,g={},y=(a=e,u=t,s=n,l=i,f=new o,v=(c=(p=a.graph()).nodesep,d=p.edgesep,h=l,function(e,t,n){var r,o,i=e.node(t),a=e.node(n);if(r=0+i.width/2,Object.hasOwn(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":o=-i.width/2;break;case"r":o=i.width/2}if(o&&(r+=h?o:-o),o=0,r+=(i.dummy?d:c)/2,r+=(a.dummy?d:c)/2,r+=a.width/2,Object.hasOwn(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":o=a.width/2;break;case"r":o=-a.width/2}return o&&(r+=h?o:-o),o=0,r}),u.forEach(function(e){var t;e.forEach(function(e){var n=s[e];if(f.setNode(n),t){var r=s[t],o=f.edge(r,n);f.setEdge(r,n,Math.max(v(a,e,t),o||0))}t=e})}),f),m=i?"borderLeft":"borderRight";function _(e,t){for(var n=y.nodes(),r=n.pop(),o={};r;)o[r]?e(r):(o[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return _(function(e){g[e]=y.inEdges(e).reduce(function(e,t){return Math.max(e,g[t.v]+y.edge(t))},0)},y.predecessors.bind(y)),_(function(t){var n=y.outEdges(t).reduce(function(e,t){return Math.min(e,g[t.w]-y.edge(t))},1/0),r=e.node(t);n!==1/0&&r.borderType!==m&&(g[t]=Math.max(g[t],n))},y.successors.bind(y)),Object.keys(r).forEach(function(e){return g[e]=g[n[e]]}),g}function h(e,t){return Object.values(t).reduce(function(t,n){var o=-1/0,i=1/0;Object.entries(n).forEach(function(t){var n,a,u=r._(t,2),s=u[0],l=u[1],c=(n=e,a=s,n.node(a).width/2);o=Math.max(l+c,o),i=Math.min(l-c,i)});var a=o-i;return a<t[0]&&(t=[a,n]),t},[1/0,null])[1]}function f(e,t){var n=Object.values(t),r=i.applyWithChunking(Math.min,n),o=i.applyWithChunking(Math.max,n);["u","d"].forEach(function(n){["l","r"].forEach(function(a){var u=n+a,s=e[u];if(s!==t){var l=Object.values(s),c=r-i.applyWithChunking(Math.min,l);"l"!==a&&(c=o-i.applyWithChunking(Math.max,l)),c&&(e[u]=i.mapValues(s,function(e){return e+c}))}})})}function p(e,t){return i.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var o=Object.values(e).map(function(e){return e[r]}).sort(function(e,t){return e-t});return(o[1]+o[2])/2})}t.exports={positionX:function(e){var t,n=i.buildLayerMatrix(e),r=Object.assign(a(e,n),u(e,n)),o={};["u","d"].forEach(function(a){t="u"===a?n:Object.values(n).reverse(),["l","r"].forEach(function(n){"r"===n&&(t=t.map(function(e){return Object.values(e).reverse()}));var u=("u"===a?e.predecessors:e.successors).bind(e),s=c(e,t,r,u),l=d(e,t,s.root,s.align,"r"===n);"r"===n&&(l=i.mapValues(l,function(e){return-e})),o[a+n]=l})});var s=h(e,o);return f(o,s),p(o,e.graph().align)},findType1Conflicts:a,findType2Conflicts:u,addConflict:s,hasConflict:l,verticalAlignment:c,horizontalCompaction:d,alignCoordinates:f,findSmallestWidthAlignment:h,balance:p}},212521,(e,t,n)=>{"use strict";var r=e.r(316330),o=e.r(193625),i=e.r(543391).positionX;t.exports=function(e){var t,n,a,u;t=e=o.asNonCompoundGraph(e),n=o.buildLayerMatrix(t),a=t.graph().ranksep,u=0,n.forEach(function(e){var n=e.reduce(function(e,n){var r=t.node(n).height;return e>r?e:r},0);e.forEach(function(e){return t.node(e).y=u+n/2}),u+=n+a}),Object.entries(i(e)).forEach(function(t){var n=r._(t,2),o=n[0],i=n[1];return e.node(o).x=i})}},343825,(e,t,n)=>{"use strict";var r=e.r(316330),o=e.r(875518),i=e.r(812163),a=e.r(804347),u=e.r(193625).normalizeRanks,s=e.r(452637),l=e.r(193625).removeEmptyRanks,c=e.r(841909),d=e.r(211237),h=e.r(642354),f=e.r(792149),p=e.r(212521),v=e.r(193625),g=e.r(703710).Graph;t.exports=function(e,t){var n=t&&t.debugTiming?v.time:v.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){var t,n,r;return t=e,n=new g({multigraph:!0,compound:!0}),r=k(t.graph()),n.setGraph(Object.assign({},m,S(r,y),v.pick(r,_))),t.nodes().forEach(function(e){var r=S(k(t.node(e)),x);Object.keys(w).forEach(function(e){void 0===r[e]&&(r[e]=w[e])}),n.setNode(e,r),n.setParent(e,t.parent(e))}),t.edges().forEach(function(e){var r=k(t.edge(e));n.setEdge(e,Object.assign({},E,S(r,b),v.pick(r,T)))}),n});n("  runLayout",function(){var e,g,y;return e=r,g=n,y=t,void(g("    makeSpaceForEdgeLabels",function(){var t,n;return n=(t=e).graph(),void(n.ranksep/=2,t.edges().forEach(function(e){var r=t.edge(e);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===n.rankdir||"BT"===n.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}),g("    removeSelfEdges",function(){var t;(t=e).edges().forEach(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}),g("    acyclic",function(){return o.run(e)}),g("    nestingGraph.run",function(){return c.run(e)}),g("    rank",function(){return a(v.asNonCompoundGraph(e))}),g("    injectEdgeLabelProxies",function(){var t;(t=e).edges().forEach(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),o={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};v.addDummyNode(t,"edge-proxy",o,"_ep")}})}),g("    removeEmptyRanks",function(){return l(e)}),g("    nestingGraph.cleanup",function(){return c.cleanup(e)}),g("    normalizeRanks",function(){return u(e)}),g("    assignRankMinMax",function(){var t,n;return n=0,void((t=e).nodes().forEach(function(e){var r=t.node(e);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,n=Math.max(n,r.maxRank))}),t.graph().maxRank=n)}),g("    removeEdgeLabelProxies",function(){var t;(t=e).nodes().forEach(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}),g("    normalize.run",function(){return i.run(e)}),g("    parentDummyChains",function(){return s(e)}),g("    addBorderSegments",function(){return d(e)}),g("    order",function(){return f(e,y)}),g("    insertSelfEdges",function(){var t;return t=e,void v.buildLayerMatrix(t).forEach(function(e){var n=0;e.forEach(function(e,r){var o=t.node(e);o.order=r+n,(o.selfEdges||[]).forEach(function(e){v.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:r+ ++n,e:e.e,label:e.label},"_se")}),delete o.selfEdges})})}),g("    adjustCoordinateSystem",function(){return h.adjust(e)}),g("    position",function(){return p(e)}),g("    positionSelfEdges",function(){var t;(t=e).nodes().forEach(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),o=r.x+r.width/2,i=r.y,a=n.x-o,u=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:o+2*a/3,y:i-u},{x:o+5*a/6,y:i-u},{x:o+a,y:i},{x:o+5*a/6,y:i+u},{x:o+2*a/3,y:i+u}],n.label.x=n.x,n.label.y=n.y}})}),g("    removeBorderNodes",function(){var t;(t=e).nodes().forEach(function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),o=t.node(n.borderBottom),i=t.node(n.borderLeft[n.borderLeft.length-1]),a=t.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(a.x-i.x),n.height=Math.abs(o.y-r.y),n.x=i.x+n.width/2,n.y=r.y+n.height/2}}),t.nodes().forEach(function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}),g("    normalize.undo",function(){return i.undo(e)}),g("    fixupEdgeLabelCoords",function(){var t;(t=e).edges().forEach(function(e){var n=t.edge(e);if(Object.hasOwn(n,"x"))switch(("l"===n.labelpos||"r"===n.labelpos)&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}),g("    undoCoordinateSystem",function(){return h.undo(e)}),g("    translateGraph",function(){return function(e){var t=1/0,n=0,r=1/0,o=0,i=e.graph(),a=i.marginx||0,u=i.marginy||0;function s(e){var i=e.x,a=e.y,u=e.width,s=e.height;t=Math.min(t,i-u/2),n=Math.max(n,i+u/2),r=Math.min(r,a-s/2),o=Math.max(o,a+s/2)}e.nodes().forEach(function(t){return s(e.node(t))}),e.edges().forEach(function(t){var n=e.edge(t);Object.hasOwn(n,"x")&&s(n)}),t-=a,r-=u,e.nodes().forEach(function(n){var o=e.node(n);o.x-=t,o.y-=r}),e.edges().forEach(function(n){var o=e.edge(n);o.points.forEach(function(e){e.x-=t,e.y-=r}),Object.hasOwn(o,"x")&&(o.x-=t),Object.hasOwn(o,"y")&&(o.y-=r)}),i.width=n-t+a,i.height=o-r+u}(e)}),g("    assignNodeIntersects",function(){var t;(t=e).edges().forEach(function(e){var n,r,o=t.edge(e),i=t.node(e.v),a=t.node(e.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=a,r=i),o.points.unshift(v.intersectRect(i,n)),o.points.push(v.intersectRect(a,r))})}),g("    reversePoints",function(){var t;(t=e).edges().forEach(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}),g("    acyclic.undo",function(){return o.undo(e)}))}),n("  updateInputGraph",function(){var t,n;return t=e,n=r,void(t.nodes().forEach(function(e){var r=t.node(e),o=n.node(e);r&&(r.x=o.x,r.y=o.y,r.rank=o.rank,n.children(e).length&&(r.width=o.width,r.height=o.height))}),t.edges().forEach(function(e){var r=t.edge(e),o=n.edge(e);r.points=o.points,Object.hasOwn(o,"x")&&(r.x=o.x,r.y=o.y)}),t.graph().width=n.graph().width,t.graph().height=n.graph().height)})})};var y=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},_=["acyclicer","ranker","rankdir","align"],x=["width","height","rank"],w={width:0,height:0},b=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},T=["labelpos"];function S(e,t){return v.mapValues(v.pick(e,t),Number)}function k(e){var t={};return e&&Object.entries(e).forEach(function(e){var n=r._(e,2),o=n[0],i=n[1];"string"==typeof o&&(o=o.toLowerCase()),t[o]=i}),t}},980902,(e,t,n)=>{var r=e.r(193625),o=e.r(703710).Graph;t.exports={debugOrdering:function(e){var t=r.buildLayerMatrix(e),n=new o({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)}),e.edges().forEach(function(e){return n.setEdge(e.v,e.w,{},e.name)}),t.forEach(function(e,t){n.setNode("layer"+t,{rank:"same"}),e.reduce(function(e,t){return n.setEdge(e,t,{style:"invis"}),t})}),n}}},627939,(e,t,n)=>{t.exports="1.1.5"},543385,(e,t,n)=>{t.exports={graphlib:e.r(703710),layout:e.r(343825),debug:e.r(980902),util:{time:e.r(193625).time,notime:e.r(193625).notime},version:e.r(627939)}},99264,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(346715),o=e.i(250464),i=e.i(543385),a=e.i(830675),u=e.i(368964),s=function(e){return(0,t._)({markerEnd:{type:o.MarkerType.ArrowClosed,width:20,height:20,color:"#8e8e8e"},selectable:!1},e?{style:{strokeDasharray:"2 2",opacity:.5}}:{})},l="missing-step-id",c="trigger";function d(e){return e===l&&a.captureException(Error("No string provided for step node in Agent Stack Playground")),e.replace(/[-_]/g," ").split(" ").filter(function(e){return e.length>0}).map(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" ")}var h=function(e,r){var o=new i.graphlib.Graph().setDefaultEdgeLabel(function(){return{}});return o.setGraph({rankdir:"TB"}),r.forEach(function(e){return o.setEdge(e.source,e.target)}),e.forEach(function(e){return o.setNode(e.id,(0,n._)((0,t._)({},e),{width:360,height:100}))}),i.layout(o),{nodes:e.map(function(e){var r=o.node(e.id),i=r.x-180,a=r.y-50;return(0,n._)((0,t._)({},e),{position:{x:i,y:a}})}),edges:r,fullWidth:0,fullHeight:0}},f=function(e){var n=e.stepFlow,o=e.xIndex,i=e.yIndex,a=e.prevNodeIds,c=e.prevStepIds,h=e.nextStepFlow,p=e.condition,v=e.allPrevNodeIds,g=e.triggerType,y=e.isFirstStep,m=e.isPreview,_=[],x=[];if(((null==h?void 0:h.type)==="step"||(null==h?void 0:h.type)==="foreach"||(null==h?void 0:h.type)==="loop"||(null==h?void 0:h.type)==="waitForEvent")&&(_=[(null==v?void 0:v.includes(h.step.id))?"".concat(h.step.id,"-").concat(i+1):h.step.id],x=[h.step.id]),((null==h?void 0:h.type)==="sleep"||(null==h?void 0:h.type)==="sleepUntil")&&(_=[(null==v?void 0:v.includes(h.id))?"".concat(h.id,"-").concat(i+1):h.id],x=[h.id]),(null==h?void 0:h.type)==="parallel"&&(_=(null==h?void 0:h.steps.map(function(e){var t=e.step.id;return(null==v?void 0:v.includes(t))?"".concat(t,"-").concat(i+1):t}))||[],x=(null==h?void 0:h.steps.map(function(e){return e.step.id}))||[]),(null==h?void 0:h.type)==="conditional"&&(_=(null==h?void 0:h.serializedConditions.map(function(e){return e.id}))||[],x=(null==h||null==(w=h.steps)?void 0:w.map(function(e){return e.step.id}))||[]),"step"===n.type||"foreach"===n.type||"waitForEvent"===n.type){var w,b,E=(null==v?void 0:v.includes(n.step.id))?"".concat(n.step.id,"-").concat(i):n.step.id;return{nodes:(0,r._)(p?[{id:p.id,position:{x:300*o,y:100*i},type:"conditionalNode",data:{stepId:p.id,label:d(p.id),description:"Condition: ".concat(p.fn),previousStepId:c[c.length-1],nextStepId:n.step.id}}]:[]).concat([{id:E,position:{x:300*o,y:(i+ +!!p)*100},type:"stepNode",data:{label:d(null!=(b=n.step.id)?b:l),description:n.step.description||("waitForEvent"===n.type?"Wait for event: ".concat(n.event):void 0),stepId:n.step.id,isAgentStep:y&&(g===u.AgentStackPlatformType.Slack||g===u.AgentStackPlatformType.Telegram)}}]),edges:(0,r._)(!a.length?[]:p?(0,r._)(a.map(function(e,r){return(0,t._)({id:"e".concat(e,"-").concat(p.id),source:e,data:{previousStepId:c[r],nextStepId:n.step.id},target:p.id},s(m))})).concat([(0,t._)({id:"e".concat(p.id,"-").concat(E),source:p.id,data:{previousStepId:c[c.length-1],nextStepId:n.step.id},target:E},s(m))]):a.map(function(e,r){return(0,t._)({id:"e".concat(e,"-").concat(E),source:e,data:{previousStepId:c[r],nextStepId:n.step.id},target:E},s(m))})).concat((0,r._)(_.length?_.map(function(e,r){return(0,t._)({id:"e".concat(E,"-").concat(e),source:E,data:{previousStepId:n.step.id,nextStepId:x[r]},target:e},s(m))}):[])),nextPrevNodeIds:[E],nextPrevStepIds:[n.step.id]}}if("sleep"===n.type||"sleepUntil"===n.type){var T=(null==v?void 0:v.includes(n.id))?"".concat(n.id,"-").concat(i):n.id;return{nodes:(0,r._)(p?[{id:p.id,position:{x:300*o,y:100*i},type:"conditionalNode",data:{stepId:p.id,label:d(p.id),description:"Condition: ".concat(p.fn)}}]:[]).concat([{id:T,position:{x:300*o,y:(i+ +!!p)*100},type:"sleepNode",data:{label:d(n.id),description:"sleepUntil"===n.type?"Sleep until: ".concat(n.date||"date"):"Sleep for: ".concat(n.duration||"duration"),stepId:T}}]),edges:(0,r._)(!a.length?[]:p?(0,r._)(a.map(function(e,r){return(0,t._)({id:"e".concat(e,"-").concat(p.id),source:e,data:{previousStepId:c[r],nextStepId:n.id},target:p.id},s(m))})).concat([(0,t._)({id:"e".concat(p.id,"-").concat(T),source:p.id,data:{previousStepId:c[c.length-1],nextStepId:n.id},target:T},s(m))]):a.map(function(e,r){return(0,t._)({id:"e".concat(e,"-").concat(T),source:e,data:{previousStepId:c[r],nextStepId:n.id},target:T},s(m))})).concat((0,r._)(_.length?_.map(function(e,r){return(0,t._)({id:"e".concat(T,"-").concat(e),source:T,data:{previousStepId:n.id,nextStepId:x[r]},target:e},s(m))}):[])),nextPrevNodeIds:[T],nextPrevStepIds:[n.id]}}if("loop"===n.type){var S=n.step,k=n.serializedCondition,O=n.loopType;return{nodes:[{id:S.id,position:{x:300*o,y:100*i},type:"loopNode",data:{label:d(S.id),description:S.description||"Loop iteration",stepId:S.id}},{id:k.id,position:{x:300*o,y:(i+1)*100},type:"conditionalNode",data:{stepId:S.id,label:d(k.id),description:"".concat(O," condition: ").concat(k.fn)}}],edges:(0,r._)(!a.length?[]:a.map(function(e,n){return(0,t._)({id:"e".concat(e,"-").concat(S.id),source:e,data:{previousStepId:c[n],nextStepId:S.id},target:S.id},s(m))})).concat([(0,t._)({id:"e".concat(S.id,"-").concat(k.id),source:S.id,data:{previousStepId:S.id,nextStepId:x[0]},target:k.id},s(m))],(0,r._)(_.length?_.map(function(e,n){return(0,t._)({id:"e".concat(k.id,"-").concat(e),source:k.id,data:{previousStepId:S.id,nextStepId:x[n]},target:e},s(m))}):[])),nextPrevNodeIds:[k.id],nextPrevStepIds:[S.id]}}if("parallel"===n.type){var M=[],N=[],P=[];return n.steps.forEach(function(e,t){var n=f({stepFlow:e,xIndex:t,yIndex:i,prevNodeIds:a,prevStepIds:c,nextStepFlow:h,allPrevNodeIds:v,triggerType:g,isFirstStep:!1,isPreview:m}),o=n.nodes,u=n.edges,s=n.nextPrevStepIds;M.push.apply(M,(0,r._)(o)),N.push.apply(N,(0,r._)(u)),P.push.apply(P,(0,r._)(s))}),{nodes:M,edges:N,nextPrevNodeIds:M.map(function(e){return e.id}),nextPrevStepIds:P}}if("conditional"===n.type){var A=[],C=[],I=[];return n.steps.forEach(function(e,t){var o=f({stepFlow:e,xIndex:t,yIndex:i,prevNodeIds:a,prevStepIds:c,nextStepFlow:h,condition:n.serializedConditions[t],allPrevNodeIds:v,triggerType:g,isFirstStep:!1,isPreview:m}),u=o.nodes,s=o.edges,l=o.nextPrevStepIds;A.push.apply(A,(0,r._)(u)),C.push.apply(C,(0,r._)(s)),I.push.apply(I,(0,r._)(l))}),{nodes:A,edges:C,nextPrevNodeIds:A.map(function(e){return e.id}),nextPrevStepIds:I}}return{nodes:[],edges:[],nextPrevNodeIds:[],nextPrevStepIds:[]}},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.AgentStackPlatformType.TimeBased,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return{nodes:[],edges:[]};if(0===e.length)return{nodes:[{id:c,position:{x:0,y:0},type:"triggerNode",data:{}}],edges:[]};var o=[],i=[];o.push({id:c,position:{x:0,y:0},type:"triggerNode",data:{}});for(var a=[c],s=[c],l=[c],d=0;d<e.length;d++){var p=f({stepFlow:e[d],xIndex:d,yIndex:d,prevNodeIds:a,prevStepIds:s,nextStepFlow:d===e.length-1?void 0:e[d+1],allPrevNodeIds:l,triggerType:t,isFirstStep:0===d,isPreview:n}),v=p.nodes,g=p.edges,y=p.nextPrevNodeIds,m=p.nextPrevStepIds;o.push.apply(o,(0,r._)(v)),i.push.apply(i,(0,r._)(g)),a=y,s=m,l.push.apply(l,(0,r._)(a))}var _=h(o,i);return{nodes:_.nodes,edges:_.edges}};e.s(["TRIGGER_NODE_ID",()=>c,"constructNodesAndEdges",()=>p,"kebabCaseToSentenceCase",()=>d])},854760,e=>{"use strict";function t(e){return e.replace(/([a-z])([A-Z])/g,"$1_$2").split(/[_.]/g).map(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" ")}function n(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function r(e){return e.toLowerCase().replaceAll("_","-")}e.s(["formatConnectorName",()=>n,"formatOpenIntWebhookEventName",()=>t,"normalizeConnectorName",()=>r])}]);

//# debugId=6c91e5a1-4c32-f963-d718-34263eb304dc
//# sourceMappingURL=3efe9252dc224b13.js.map