;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="713701ec-d31b-814e-0fa8-9651fdf713da")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,74032,e=>{e.v({"fade-in":"LoadingState-module___WZova__fade-in",header:"LoadingState-module___WZova__header",loadingAnimation:"LoadingState-module___WZova__loadingAnimation",root:"LoadingState-module___WZova__root"})},916121,e=>{e.v({link:"AssistantDeprecationWarning-module__elh5rq__link",wrapper:"AssistantDeprecationWarning-module__elh5rq__wrapper"})},695337,e=>{e.v({surface:"KeyboardShortcutsModal-module__Tz_71q__surface"})},918218,e=>{e.v({right:"ExpandAgentButton-module__Sr5bZG__right",root:"ExpandAgentButton-module__Sr5bZG__root",show:"ExpandAgentButton-module__Sr5bZG__show"})},576779,e=>{e.v({animationWrapper:"FigmaImport-module__p8csWa__animationWrapper",overlay:"FigmaImport-module__p8csWa__overlay",progressBarContainer:"FigmaImport-module__p8csWa__progressBarContainer",progressBarFill:"FigmaImport-module__p8csWa__progressBarFill",progressBarTrack:"FigmaImport-module__p8csWa__progressBarTrack"})},963786,e=>{e.v({validationIcon:"EditReplForm-module__DnkOSa__validationIcon",validationText:"EditReplForm-module__DnkOSa__validationText"})},111724,e=>{e.v({measureBar:"FreemiumUsagePopover-module___B9tOa__measureBar",usageCard:"FreemiumUsagePopover-module___B9tOa__usageCard"})},680189,e=>{e.v({flippedIcon:"workspaceTour-module__-kv3kW__flippedIcon",iconSurface:"workspaceTour-module__-kv3kW__iconSurface"})},823931,e=>{e.v({exportButton:"ExportVideoMenu-module__Gud0Iq__exportButton",menu:"ExportVideoMenu-module__Gud0Iq__menu"})},980713,e=>{e.v({baseButton:"Deploy-module__8ZcrnG__baseButton",baseButtonLoading:"Deploy-module__8ZcrnG__baseButtonLoading",deployIconDot:"Deploy-module__8ZcrnG__deployIconDot",deployIconDotWrapper:"Deploy-module__8ZcrnG__deployIconDotWrapper",deployIconWithStatus:"Deploy-module__8ZcrnG__deployIconWithStatus",openPaneButton:"Deploy-module__8ZcrnG__openPaneButton",pulse:"Deploy-module__8ZcrnG__pulse",roundedButton:"Deploy-module__8ZcrnG__roundedButton",roundedButtonLoading:"Deploy-module__8ZcrnG__roundedButtonLoading"})},60166,e=>{e.v({root:"RunStatusButton-module__27k_5G__root"})},700283,e=>{e.v({flipped:"FiletreeButton-module__3d0q-a__flipped"})},787108,e=>{e.v({container:"InboxButton-module__ExH6bq__container",indicator:"InboxButton-module__ExH6bq__indicator"})},317941,e=>{e.v({avatar:"index-module__PnN-4a__avatar",inviteDialog:"index-module__PnN-4a__inviteDialog",remainingCountButton:"index-module__PnN-4a__remainingCountButton",stacked:"index-module__PnN-4a__stacked"})},384132,e=>{e.v({emptySpacer:"NavMenu-module__rNmZaG__emptySpacer",menu:"NavMenu-module__rNmZaG__menu",repl:"NavMenu-module__rNmZaG__repl",usage:"NavMenu-module__rNmZaG__usage"})},342571,e=>{e.v({desktopAppWindowsOs:"index-module__IZzwWa__desktopAppWindowsOs",desktopDragRegion:"index-module__IZzwWa__desktopDragRegion",left:"index-module__IZzwWa__left",planningHeader:"index-module__IZzwWa__planningHeader",planningHeaderLeft:"index-module__IZzwWa__planningHeaderLeft",planningTimeline:"index-module__IZzwWa__planningTimeline",right:"index-module__IZzwWa__right"})},375032,e=>{e.v({"fade-out":"Border-module__AS8LXG__fade-out",pulse:"Border-module__AS8LXG__pulse",root:"Border-module__AS8LXG__root"})},231927,e=>{e.v({container:"index-module__4PIZ9q__container",interactionBlanket:"index-module__4PIZ9q__interactionBlanket",root:"index-module__4PIZ9q__root"})},33171,e=>{e.v({closeButton:"Tab-module__U4WksG__closeButton",tab:"Tab-module__U4WksG__tab",tabButton:"Tab-module__U4WksG__tabButton",title:"Tab-module__U4WksG__title"})},13891,e=>{e.v({desktopAppWindowsOs:"index-module__QGsN1W__desktopAppWindowsOs",dragArea:"index-module__QGsN1W__dragArea",dropPreview:"index-module__QGsN1W__dropPreview",newTab:"index-module__QGsN1W__newTab",newTabIconButton:"index-module__QGsN1W__newTabIconButton",newTabTextButton:"index-module__QGsN1W__newTabTextButton",tabBar:"index-module__QGsN1W__tabBar",tabs:"index-module__QGsN1W__tabs"})},248611,e=>{e.v({surface:"index-module__3SVBeW__surface"})},357210,e=>{e.v({grip:"ResizeHandle-module__D5nG1G__grip",root:"ResizeHandle-module__D5nG1G__root",stacked:"ResizeHandle-module__D5nG1G__stacked"})},224373,e=>{e.v({grip:"ResizeHandle-module__nCKbhG__grip",left:"ResizeHandle-module__nCKbhG__left",right:"ResizeHandle-module__nCKbhG__right",root:"ResizeHandle-module__nCKbhG__root"})},861781,e=>{e.v({root:"index-module__mWTpga__root"})},798406,e=>{e.v({feedbackText:"FeedbackCard-module__aqvHNW__feedbackText",feedbackTextCollapsed:"FeedbackCard-module__aqvHNW__feedbackTextCollapsed",feedbackTextFaded:"FeedbackCard-module__aqvHNW__feedbackTextFaded",showButton:"FeedbackCard-module__aqvHNW__showButton"})},124803,e=>{e.v({emptyState:"InboxContent-module__Ms4b9G__emptyState","filter-enter":"InboxContent-module__Ms4b9G__filter-enter",filterContainer:"InboxContent-module__Ms4b9G__filterContainer",itemsContainer:"InboxContent-module__Ms4b9G__itemsContainer",loadingShimmer:"InboxContent-module__Ms4b9G__loadingShimmer",modalImage:"InboxContent-module__Ms4b9G__modalImage",screenshotThumbnail:"InboxContent-module__Ms4b9G__screenshotThumbnail",screenshotThumbnailButton:"InboxContent-module__Ms4b9G__screenshotThumbnailButton",scrollableContent:"InboxContent-module__Ms4b9G__scrollableContent",shimmer:"InboxContent-module__Ms4b9G__shimmer",thumbnailShimmer:"InboxContent-module__Ms4b9G__thumbnailShimmer"})},491694,e=>{e.v({root:"Search-module__fSv4Tq__root"})},943124,e=>{e.v({root:"index-module__0C7YZG__root"})},755181,e=>{e.v({contentContainer:"Workspace-module__bV5fda__contentContainer",desktopApp:"Workspace-module__bV5fda__desktopApp"})},838720,e=>{e.v({emailVerificationWrapper:"replEnvironmentDesktop-module__rxGmJG__emailVerificationWrapper",surface:"replEnvironmentDesktop-module__rxGmJG__surface"})},453926,e=>{"use strict";var t,n,r,i,o,a,s,l,u,c,d,p,f,h,m,v,g,x=e.i(276385),y=e.i(485273),b=e.i(878420),w=e.i(569384),_=e.i(973245),j=e.i(304277),S=e.i(566901),k=e.i(552207);function C(){var e=(0,w._)(["\n  query ReplEnvironmentDesktop(\n    $replId: String!\n    $environment: KeybindingsEnvironmentEnum!\n    $platform: KeybindingsPlatformEnum!\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentDesktopRepl\n      }\n      ... on ReplOrgPermissionDeniedError {\n        replId\n        orgId\n        ownerUsername\n        ownerImage\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      id\n      isVerified\n      ...ReplEnvironmentDesktopCurrentUser\n      keybindings(environment: $environment, platform: $platform) {\n        keybindings\n      }\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}var T={},I=(0,_.gql)(C(),k.ReplEnvironmentDesktopReplFragmentDoc,k.ReplEnvironmentDesktopCurrentUserFragmentDoc),P=e.i(82464),E=e.i(911185),R=e.i(721281),A=e.i(872734),D=e.i(480028),V=e.i(173703),M=e.i(660614),F=e.i(625484),O=e.i(219577),L=e.i(751299),B=e.i(74032),U=(0,D.cvarsFrom)("LoadingState.module.css",["--header-height"]);function N(e){return(0,x.jsxs)(V.ShadesSurface,{style:(0,R._)({},U.headerHeight,O.APP_HEADER_HEIGHT+"px"),clsx:B.default.root,elevate:!1,children:[(0,x.jsx)(V.ShadesSurface,{row:!0,clsx:B.default.header,justify:"space-between",px:6,elevate:!1,children:(0,x.jsxs)(F.View,{row:!0,align:"center",children:[(0,x.jsx)(A.default,{}),(0,x.jsx)(L.NavMenu,{children:(0,x.jsx)(x.Fragment,{})})]})}),(0,x.jsx)(F.View,{grow:!0,shrink:!0,align:"center",justify:"center",clsx:B.default.loadingAnimation,children:e.animation?(0,x.jsx)(M.default,{height:100}):null})]})}var G=e.i(952914),z=e.i(530658),W=e.i(389959),H=e.i(133320);e.i(877212);var q=e.i(204203),K=e.i(787182),$=e.i(921521),Y=e.i(993796),Q=e.i(125674),X=e.i(207873),Z=e.i(441329),J=e.i(956111),ee=e.i(400081),et=e.i(42783),en=e.i(346715),er=e.i(297083),ei=e.i(817556),eo=e.i(541793),ea=e.i(161322),es=e.i(871579),el=e.i(813707),eu=e.i(858248),ec=e.i(709485),ed=e.i(821472),ep=e.i(979931),ef=e.i(106020),eh=e.i(292849);e.i(282890);var em=e.i(66718),ev=e.i(827456),eg=e.i(259493),ex=e.i(965863);function ey(e){var t=e.currentPaneId,n=e.type,r=(0,ev.usePaneUIContext)(),i=(0,ep.useReplacePane)(),o=(0,ep.useSelectTab)(),a=(0,ex.useGetPanes)(),s=(0,eg.useGetPaneBindings)(),l=t?"Move existing tab here":"Jump to existing tab";return(0,W.useCallback)(function(e){var u=e.searchQuery;return(0,er._)(function(){var e,c,d,p,f,h,m,v,g,y,b,w,_,j,S,k,C,T,I,P,E,R,A,D,V;return(0,ei._)(this,function(M){switch(M.label){case 0:if(e=a(),!(c=t?e.filter(function(e){return(0,z._)(e,1)[0]!==t}):e).length||!u&&"files"===n)return[2,[]];d=new Map,p=[],f=!0,h=!1,m=void 0;try{for(v=c[Symbol.iterator]();!(f=(g=v.next()).done);f=!0)(y=(0,z._)(g.value,2))[0],b=y[1],(0,em.isFilePane)(b)&&b.data.path&&p.push(b.data.path)}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}return[4,(0,eh.filterFiles)(u,p)];case 1:w=M.sent(),_=!0,j=!1,S=void 0;try{for(k=w[Symbol.iterator]();!(_=(C=k.next()).done);_=!0)T=C.value,d.set(T.path,{score:T.score,ranges:T.ranges})}catch(e){j=!0,S=e}finally{try{_||null==k.return||k.return()}finally{if(j)throw S}}I=[],P=!0,E=!1,R=void 0;try{for(A=function(){var e=(0,z._)(V.value,2),a=e[0],u=e[1],c=(0,em.isToolPane)(u);if("tools"===n&&!c||"tools"===n&&"commands"===u.type||"files"===n&&c)return"continue";var p=(0,em.isFilePane)(u)?u.data.path:null,f=p?d.get(p):null;if("deployments"===u.type){var h=s(a);if((null==h?void 0:h.type)==="deployments"){var m=h.getTabs();if(m)return I.push({match:ef.fzfMatchLabel,data:{type:"context",label:r.getTitle(u),icon:(0,x.jsx)(r.Icon,{pane:u})},commands:function(){return m.map(function(e){return{match:ef.fzfMatchLabel,data:{key:a+e.id,type:"action",label:e.label,icon:(0,x.jsx)(e.Icon,{size:16}),run:function(){o(a),h.setTab(e.id)}}}})}}),"continue"}}var v=p&&f?function(){return{score:f.score,render:(0,eh.createFileMatchRender)({path:p,ranges:f.ranges,description:l})}}:ef.fzfMatchLabel,g=r.getTitle(u),y=r.Icon({pane:u});I.push({match:v,data:{key:a,type:"action",label:g,icon:y,run:function(){return t?i({a:t,b:a}):o(a)},description:l}})},D=c[Symbol.iterator]();!(P=(V=D.next()).done);P=!0)A()}catch(e){E=!0,R=e}finally{try{P||null==D.return||D.return()}finally{if(E)throw R}}return[2,I]}})})()},[t,a,r,o,i,s,l,n])}var eb=e.i(333980),ew=e.i(927989),e_=e.i(794633),ej=e.i(368964);function eS(){var e=(0,w._)(["\n  query AssistantDeprecationWarningUser {\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n"]);return eS=function(){return e},e}(0,_.gql)(eS()),e.i(925218);var ek=e.i(267103),eC=e.i(784147),eT=e.i(744809),eI=e.i(890963);e.i(387457);var eP=e.i(45442),eE=e.i(140487),eR=e.i(396776),eA=e.i(960178);function eD(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).currentPaneId,t=(0,eP.useAgentSettings)().updateSettings,n=(0,ep.useAgentLayout)(),r=(0,ek.useObservable)(n.isCollapsed),i=n.toggle,o=(0,ep.useRemovePane)(),a=(0,W.useCallback)(function(){t({chatMode:ej.AgentChatMode.QuickEdit}),r&&i(!0),e&&o(e)},[t,r,i,e,o]);return(0,W.useMemo)(function(){return{data:{type:"action",label:"Assistant",icon:(0,x.jsx)(eC.default,{}),run:a},match:function(e){var t,n,r=e.searchQuery,i=(0,eI.fzfMatch)(r,"Assistant",{casing:"case-insensitive"}),o=null!=(t=null==i?void 0:i.score)?t:1;return r.length<3||o<60?null:{score:null!=(n=null==i?void 0:i.score)?n:1,render:{content:(0,x.jsx)(eV,{}),height:59}}}}},[a])}function eV(){return(0,x.jsx)(F.View,{p:8,grow:!0,children:(0,x.jsx)(eR.StatusBanner,{icon:(0,x.jsx)(eT.default,{}),title:"Looking for Assistant?",text:"Assistant is no longer available. Use Fast in Agent for quick changes."})})}e.i(916121);var eM=e.i(32109),eF=e.i(384401),eO=e.i(888330),eL="Searchâ€¦";function eB(){var e=(0,ea.useSetAtom)(ed.toggleCommandBarAtom);return(0,W.useCallback)(function(t){e(t)},[e])}var eU=e.i(262206),eN=e.i(446530),eG=e.i(613355),ez=e.i(739521),eW=e.i(980338),eH={id:"toggleGlobalCommandBarCommand",name:"Toggle Commandbar",description:"Opens or closes the command bar",default:(0,eU.defaultKeyCombo)({cmdOrCtrl:!0,key:"k"})};function eq(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,n=(0,ea.useSetAtom)(ed.commandsAtom);(0,W.useEffect)(function(){if(t&&null!==e)return n(function(t){return(0,en._)(t).concat([e])}),function(){n(function(t){return t.filter(function(t){return t!==e})})}},[n,e,t])}var eK=(0,eN.cssRecord)({surface:[eG.rcss.maxHeight("70vh"),eG.rcss.borderRadius(8),eG.rcss.overflowY("auto")]});let e$=(0,W.memo)(function(){var e,t,n,r,i,o,a,s,l,u,c,d,p=(0,ea.useAtomValue)(ed.commandBarIsOpenAtom),f=eB(),h=(e=(0,ep.useOpenTool)(),t=(0,W.useCallback)(function(t){(0,eu.track)(ec.events.TOOL_OPENED,{source:"Command Bar",tool:t.pane.type}),e(t)},[e]),n=(0,ev.usePaneUIContext)(),r=(0,e_.useToolPanes)(),i=(0,ex.useGetPanes)(),o=(0,W.useCallback)(function(){var e=i().map(function(e){var t=(0,z._)(e,2);return(t[0],t[1]).type}),o=[],a=!0,s=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)!function(){var r=u.value;if(!((0,em.isSingleton)(r.type)&&e.includes(r.type))){var i=n.getTitle(r),a=n.Icon({pane:r});o.push({match:(0,eb.matchToolPane)({pane:r,aliases:ew.paneAliases.get(r.type)}),data:{key:"extension"===r.type?"extension-".concat(r.data.installationId,"-").concat(r.data.path):void 0,type:"action",label:i,description:n.getDescription(r,{short:!0}),icon:a,run:function(){t({pane:r})}}})}}()}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return o},[r,t,i,n]),a=ey({type:"tools"}),s=(0,eF.useKeyCombo)("toggleGlobalCommandBarCommand"),l=(0,Q.default)(function(){return{type:"context",icon:(0,x.jsx)(es.default,{}),label:"",description:eL,keyboardShortcut:s}},[s]),u=eD(),c=(0,Q.default)(function(){return(0,eo.atom)(function(e){var t=e(ed.commandsAtom),n={data:{type:"context",label:eO.toolsCommandLabel,icon:(0,x.jsx)(el.default,{})},commands:function(e){var t=e.searchQuery;return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return[4,a({searchQuery:t})];case 1:return[2,en._.apply(void 0,[e.sent()]).concat((0,en._)(o()))]}})})()}};return{data:l,commands:function(){return[u].concat((0,en._)(t),[n])}}})},[o,l,a,u]),d=(0,Q.default)(function(){return(0,eo.atom)(function(e){var t=e(c),n=e(ed.initialSubCommandAtom);return n?[t,n]:t})},[c]),(0,ea.useAtomValue)(d)),m=(0,eF.useKeyCombo)(eH.id);return(0,x.jsx)(ez.Modal,{hideCloseButton:!0,isOpen:p,onRequestClose:f,noPadding:!0,skipTransition:!0,topPadding:8,children:(0,x.jsx)(V.ShadesSurface,{css:eK.surface,elevate:!1,children:(0,x.jsx)(eW.CommandBar,{keyboardShortcut:m,onAction:function(){return f()},command:h,autoFocus:!0})})})});var eY=e.i(692043);function eQ(){var e=(0,w._)(["\n  query ExtensionStore($replId: String!, $userId: Int) {\n    extensionList(includeNonBlessed: true, userId: $userId) {\n      ...TopLevelExtension\n      installation(replId: $replId) {\n        ...TopLevelExtensionInstallation\n      }\n    }\n  }\n  ","\n  ","\n"]);return eQ=function(){return e},e}var eX=(0,_.gql)(eQ(),eY.TopLevelExtensionFragmentDoc,eY.TopLevelExtensionInstallationFragmentDoc),eZ=e.i(787527),eJ=e.i(40916),e0=e.i(123515),e1=e.i(761201),e2=e.i(253344),e4=e.i(47503),e3=e.i(207237),e5=e.i(173738),e8=e.i(902379),e6=(0,eN.cssRecord)({container:eG.rcss.colWithGap(24)});function e9(e){var t=e.fileExtension,n=e.onCancel,r=e.onConfirm;return(0,x.jsxs)(F.View,{css:e6.container,children:[(0,x.jsx)(eA.Header,{level:1,variant:"headerDefault",children:"Make this extension default?"}),(0,x.jsxs)(eA.Text,{children:["Do you want to use this extension to open ",t," files by default? You can always use another file opener by right clicking on the file and opening it with something else"]}),(0,x.jsxs)(F.View,{row:!0,gap:12,justify:"end",children:[(0,x.jsx)(eE.Button,{onClick:function(){return n()},text:"Cancel"}),(0,x.jsx)(eE.Button,{colorway:"positive",onClick:function(){return r()},text:"Yes, use this extension by default"})]})]})}var e7=e.i(98816),te=e.i(222342),tt=e.i(992785);e.i(290625);var tn=e.i(949874);function tr(){var e=(0,ex.useGetActivePaneId)(),t=(0,ep.useGetVisiblePanes)(),n=(0,ep.useGetHiddenPanes)(),r=(0,ep.useGetLayoutState)(),i=(0,ep.useInsertPane)(),o=(0,ep.useRevealPane)(),a=(0,ep.useUpdatePane)(),s=(0,ep.useGetUncommittedFilePaneId)(),l=(0,ep.useGetUncommittedToolPaneId)(),u=(0,ep.useGetIsMaximized)();return(0,W.useCallback)(function(c){var d=c.pane,p=c.activate,f=c.updateOnReveal,h=e(),m=(0,em.isFilePane)(d)?s():l();m||(m=function(e){var t,n,r=e.panes,i=e.pane;if((0,em.isFilePane)(i)){var o,a,s=i.data.path;return null!=(a=null==(o=r.find(function(e){var t=(0,z._)(e,2)[1];return(0,em.isFilePane)(t)&&t.data.path===s}))?void 0:o[0])?a:null}if((0,em.isExtensionPane)(i))return null!=(u=null==(l=r.find(function(e){var t=(0,z._)(e,2)[1];return!!(0,em.isExtensionPane)(t)&&t.data.installationId===i.data.installationId&&t.data.path===i.data.path&&t.data.filePath===i.data.filePath}))?void 0:l[0])?u:null;if("diff"===i.type){var l,u,c,d=r.find(function(e){var t=(0,z._)(e,2),n=(t[0],t[1]);return"diff"===n.type&&(0,tt.default)(n.data,i.data)});return null!=(c=null==d?void 0:d[0])?c:null}return(0,em.isSingleton)(i.type)&&null!=(n=null==(t=r.find(function(e){return(0,z._)(e,2)[1].type===i.type}))?void 0:t[0])?n:null}({panes:(0,en._)(t()).concat((0,en._)(n())),pane:d}));var v=u();if(m&&h){var g,x,y=r().layout,b=null==(g=(0,tn.findPaneById)(y,h))?void 0:g.paneGroup,w=null==(x=(0,tn.findPaneById)(y,m))?void 0:x.paneGroup;if(!v||(null==b?void 0:b.id)===(null==w?void 0:w.id))return(void 0===f||f)&&a({paneId:m,pane:d}),o({paneId:m,activate:p}),m}var _=c.placement;return v&&null!=h?_={type:"after",paneId:h}:(null==_?void 0:_.type)!=="secondary"||_.relativeTo||(_={type:"secondary",relativeTo:h}),i({pane:d,activate:p,placement:_})},[e,s,l,i,t,n,r,u,o,a])}var ti=e.i(778203);function to(){var e,t=(0,ep.useOpenFile)(),n=(0,ex.useActivatePane)(),r=(e=(0,ex.useObservableActiveFile)(),(0,Q.default)(function(){return function(t){return e.subscribe(t)}},[e])),i=(0,ex.useGetActiveFile)(),o=(0,te.default)(),a=tr(),s=(0,ex.useGetActivePaneId)(),l=(0,ep.useGetLayoutState)(),u=(0,ep.useSetLayoutState)(),c=(0,ti.default)(),d=(0,e7.default)(c),p=(0,W.useCallback)(function(e){a({pane:{type:"extension",data:{extensionId:e.extensionId,installationId:e.installationId,baseUrl:e.baseUrl,path:e.path,name:e.name}},activate:!0,placement:{type:"secondary",relativeTo:s()}})},[a,s]);return(0,Q.default)(function(){return{openFile:t,watchActiveFile:r,getActiveFile:i,activatePane:n,toasts:o,revealOrInsertTool:p,getLayoutState:l,setLayoutState:u,getSshConfig:function(){return d.current}}},[t,r,i,n,o,p,l,u,d])}var ta=e.i(142903);e.i(244719);var ts=e.i(667279),tl=e.i(196380),tu=e.i(100811),tc=e.i(9293),td=e.i(64386),tp=e.i(62820),tf=e.i(409792),th=e.i(343252),tm=e.i(873379),tv=e.i(529810),tg=e.i(557964),tx=e.i(167626),ty=e.i(119468),tb=((t={}).RAW="RAW",t.PROXY="PROXY",t.THROW="THROW",t.HANDLER="HANDLER",t),tw=((n={}).GET="GET",n.SET="SET",n.APPLY="APPLY",n.CONSTRUCT="CONSTRUCT",n.ENDPOINT="ENDPOINT",n.RELEASE="RELEASE",n),t_=Symbol("Comlink.proxy"),tj=Symbol("Comlink.endpoint"),tS=Symbol("Comlink.releaseProxy"),tk=Symbol("Comlink.thrown"),tC=function(e){return(void 0===e?"undefined":(0,ty._)(e))==="object"&&null!==e||"function"==typeof e},tT=new Map([["proxy",{canHandle:function(e){return tC(e)&&e[t_]},serialize:function(e){var t=new MessageChannel,n=t.port1,r=t.port2;return tI(e,n),[r,[r]]},deserialize:function(e){var t;return e.start(),function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,o=new Proxy(r,{get:function(r,a){if(tE(i),a===tS)return function(){return tF(t,{type:tw.RELEASE,path:n.map(function(e){return e.toString()})}).then(function(){tP(t),i=!0})};if("then"===a){if(0===n.length)return{then:function(){return o}};var s=tF(t,{type:tw.GET,path:n.map(function(e){return e.toString()})}).then(tM);return s.then.bind(s)}return e(t,(0,en._)(n).concat([a]))},set:function(e,r,o){tE(i);var a=(0,z._)(tV(o),2),s=a[0],l=a[1];return tF(t,{type:tw.SET,path:(0,en._)(n).concat([r]).map(function(e){return e.toString()}),value:s},l).then(tM)},apply:function(r,o,a){tE(i);var s=n[n.length-1];if(s===tj)return tF(t,{type:tw.ENDPOINT}).then(tM);if("bind"===s)return e(t,n.slice(0,-1));var l=(0,z._)(tR(a),2),u=l[0],c=l[1];return tF(t,{type:tw.APPLY,path:n.map(function(e){return e.toString()}),argumentList:u},c).then(tM)},construct:function(e,r){tE(i);var o=(0,z._)(tR(r),2),a=o[0],s=o[1];return tF(t,{type:tw.CONSTRUCT,path:n.map(function(e){return e.toString()}),argumentList:a},s).then(tM)}});return o}(e,[],t)}}],["throw",{canHandle:function(e){return tC(e)&&tk in e},serialize:function(e){var t=e.value;return[(0,tx._)(t,Error)?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function tI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,n=arguments.length>2?arguments[2]:void 0;function r(i){if(i&&i.data&&(!n||i.origin===n.origin&&i.source===n.source)){var o,a=(0,b._)({path:[]},i.data),s=a.id,l=a.type,u=a.path,c=(i.data.argumentList||[]).map(tM);try{var d=u.slice(0,-1).reduce(function(e,t){return e[t]},e),p=u.reduce(function(e,t){return e[t]},e);switch(l){case tw.GET:o=p;break;case tw.SET:d[u.slice(-1)[0]]=tM(i.data.value),o=!0;break;case tw.APPLY:o=p.apply(d,c);break;case tw.CONSTRUCT:var f=(0,tg._)(p,(0,en._)(c));o=tD(f);break;case tw.ENDPOINT:var h,m,v=new MessageChannel,g=v.port1,x=v.port2;tI(e,x),h=g,m=[g],tA.set(h,m),o=h;break;case tw.RELEASE:o=void 0;break;default:return}}catch(e){o=(0,R._)({value:e},tk,0)}Promise.resolve(o).catch(function(e){return(0,R._)({value:e},tk,0)}).then(function(e){var n=(0,z._)(tV(e),2),i=n[0],o=n[1];t.postMessage((0,td._)((0,b._)({},i),{id:s}),o),l===tw.RELEASE&&(t.removeEventListener("message",r),tP(t))})}}return t.addEventListener("message",r),t.start&&t.start(),function(){t.removeEventListener("message",r),tP(t)}}function tP(e){"MessagePort"===e.constructor.name&&e.close()}function tE(e){if(e)throw Error("Proxy has been released and is not useable")}function tR(e){var t,n=e.map(tV);return[n.map(function(e){return e[0]}),(t=n.map(function(e){return e[1]}),Array.prototype.concat.apply([],t))]}var tA=new WeakMap;function tD(e){return Object.assign(e,(0,R._)({},t_,!0))}function tV(e){var t=!0,n=!1,r=void 0;try{for(var i,o=tT[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,z._)(i.value,2),s=a[0],l=a[1];if(l.canHandle(e)){var u=(0,z._)(l.serialize(e),2),c=u[0],d=u[1];return[{type:tb.HANDLER,name:s,value:c},d]}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return[{type:tb.RAW,value:e},tA.get(e)||[]]}function tM(e){switch(e.type){case tb.HANDLER:return tT.get(e.name).deserialize(e.value);case tb.RAW:return e.value}}function tF(e,t,n){return new Promise(function(r){var i=[,,,,].fill(0).map(function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}).join("-");e.addEventListener("message",function t(n){n.data&&n.data.id&&n.data.id===i&&(e.removeEventListener("message",t),r(n.data))}),e.start&&e.start(),e.postMessage((0,b._)({id:i},t),n)})}var tO=e.i(623059),tL=Symbol("timeout"),tB=e.i(881476);function tU(){var e=(0,w._)(["\n  fragment InitialCurrentUserData on CurrentUser {\n    id\n    username\n    image\n    bio\n  }\n"]);return tU=function(){return e},e}function tN(){var e=(0,w._)(["\n  fragment SocialCurrentUserData on CurrentUser {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return tN=function(){return e},e}function tG(){var e=(0,w._)(["\n  fragment RolesCurrentUserData on CurrentUser {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return tG=function(){return e},e}function tz(){var e=(0,w._)(["\n  fragment PlanCurrentUserData on CurrentUser {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    ...CoreSubscriptionPlanStatus\n  }\n  ","\n"]);return tz=function(){return e},e}function tW(){var e=(0,w._)(["\n  fragment SocialUserData on User {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return tW=function(){return e},e}function tH(){var e=(0,w._)(["\n  fragment RolesUserData on User {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return tH=function(){return e},e}function tq(){var e=(0,w._)(["\n  fragment PlanUserData on User {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return tq=function(){return e},e}function tK(){var e=(0,w._)(["\n  fragment InitialReplData on Repl {\n    id\n    url\n    title\n    description\n    timeCreated\n    slug\n    isPrivate\n  }\n"]);return tK=function(){return e},e}function t$(){var e=(0,w._)(["\n  fragment SocialReplData on Repl {\n    likeCount\n    publicForkCount\n    iconUrl\n    imageUrl\n  }\n"]);return t$=function(){return e},e}function tY(){var e=(0,w._)(["\n  fragment InitialUserData on User {\n    id\n    username\n    image\n    bio\n  }\n"]);return tY=function(){return e},e}function tQ(){var e=(0,w._)(["\n  fragment OwnerData on Repl {\n    owner {\n      __typename\n      ... on User {\n        ...InitialUserData\n      }\n      ... on Team {\n        id\n        username\n        image\n        description\n      }\n    }\n  }\n  ","\n"]);return tQ=function(){return e},e}function tX(){var e=(0,w._)(["\n  fragment MultiplayersData on Repl {\n    multiplayers {\n      ...InitialUserData\n    }\n  }\n  ","\n"]);return tX=function(){return e},e}function tZ(){var e=(0,w._)(["\n  query extensionPortCurrentUser(\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user: currentUser {\n      ...InitialCurrentUserData\n      ...SocialCurrentUserData @include(if: $includeSocialData)\n      ...RolesCurrentUserData @include(if: $includeRoles)\n      ...PlanCurrentUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return tZ=function(){return e},e}function tJ(){var e=(0,w._)(["\n  query extensionPortUserByUsername(\n    $username: String!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    userByUsername(username: $username) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return tJ=function(){return e},e}function t0(){var e=(0,w._)(["\n  query extensionPortUserById(\n    $id: Int!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user(id: $id) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return t0=function(){return e},e}function t1(){var e=(0,w._)(["\n  query currentUserEditorPreferences {\n    currentUser {\n      id\n      workspacePreferences\n    }\n  }\n"]);return t1=function(){return e},e}function t2(){var e=(0,w._)(["\n  query extensionPortReplById(\n    $id: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return t2=function(){return e},e}function t4(){var e=(0,w._)(["\n  query extensionPortReplByUrl(\n    $url: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    getRepl(url: $url) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return t4=function(){return e},e}var t3=(0,_.gql)(tU()),t5=(0,_.gql)(tN()),t8=(0,_.gql)(tG()),t6=(0,_.gql)(tz(),tB.CoreSubscriptionPlanStatusFragmentDoc),t9=(0,_.gql)(tW()),t7=(0,_.gql)(tH()),ne=(0,_.gql)(tq()),nt=(0,_.gql)(tK()),nn=(0,_.gql)(t$()),nr=(0,_.gql)(tY()),ni=(0,_.gql)(tQ(),nr),no=(0,_.gql)(tX(),nr),na=(0,_.gql)(tZ(),t3,t5,t8,t6),ns=(0,_.gql)(tJ(),nr,t9,t7,ne),nl=(0,_.gql)(t0(),nr,t9,t7,ne),nu=(0,_.gql)(t1()),nc=(0,_.gql)(t2(),nt,nn,ni,no),nd=(0,_.gql)(t4(),nt,nn,ni,no);function np(e){return function(t){return(0,er._)(function(){var n,r;return(0,ei._)(this,function(i){switch(i.label){case 0:return[4,null===e5.apolloClient||void 0===e5.apolloClient?void 0:e5.apolloClient.query({query:e,variables:t||void 0})];case 1:if(null==(n=i.sent())?void 0:n.data)return[2,n.data];throw Error(null==n||null==(r=n.error)?void 0:r.message)}})})()}}var nf=e.i(960933),nh=e.i(862927);function nm(e,t){var n={};for(var r in t)"function"==typeof t[r]&&(n[r]=function(e,t){return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)(0,l.value)()}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return t.apply(void 0,(0,en._)(r))}}(e,t[r]));return n}function nv(e,t){return function(){var n=e.store.get(e.extensionStateAtom),r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(!n.scopes.has(l)){var u="Scope not declared in extension.json: ".concat(l);e.logger.warn("".concat(u,". In the future this will throw an error"))}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}}var ng=nf.Type.Record(nf.Type.String(),nf.Type.String({minLength:1})),nx=e.i(336106),ny=e.i(148382);function nb(){var e=(0,w._)(["\n  query ExtensionApiAuthToken($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      ... on ExtensionInstallation {\n        id\n        token\n      }\n    }\n  }\n"]);return nb=function(){return e},e}var nw=(0,_.gql)(nb());function n_(e){return{registerCommand:function(t,n){return(0,er._)(function(){var r,i,o;return(0,ei._)(this,function(a){switch(a.label){case 0:if(n)return[3,2];return e.logger.warn("registerCommand: calling registerCommand with a single argument is deprecated. Pass a {commandId, contributions} object as the first command."),r=t,[4,(0,tu.parseCommandProxyToExtensionCommand)(r,e)];case 1:if(!(o=a.sent()).data.id)throw Error("Command: expected id to be defined");if(!("contributions"in o.data))throw Error("Command: In ".concat(o.data.id,", contributions should be an array"));return 0===o.data.contributions.length&&e.logger.warn("Command: ".concat(o.data.id," has no contributions")),(i={commandId:o.data.id,contributions:o.data.contributions}).contributions||(e.logger.warn("Command: '".concat(o.data.id,"' has no contributions")),i.contributions=[]),[3,4];case 2:return i=t,r=n,[4,(0,tu.parseCommandProxyToExtensionCommand)(r,e)];case 3:o=a.sent(),a.label=4;case 4:return e.store.set(ts.registerExtensionCreateCommandAtom,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:(0,e2.asExtensionCommandId)(i.commandId),contributions:i.contributions,create:function(){return(0,er._)(function(){return(0,ei._)(this,function(e){return[2,o]})})()}}}),[2]}})})()},registerCreateCommand:function(t,n){return(0,er._)(function(){var r,i;return(0,ei._)(this,function(o){if(!t.commandId||""===t.commandId)throw Error("Attempted to register command without id");if(!t.contributions||!Array.isArray(t.contributions))throw Error("Command: In ".concat(t.commandId,", contributions should be an array"));return 0===t.contributions.length&&e.logger.warn("Command: ".concat(t.commandId," has no contributions")),(r=t.contributions.filter(function(e){return!(e in tO.ContributionType)})).length>0&&e.logger.warn("Command: ".concat(t.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(tO.ContributionType))),i={id:(0,e2.asExtensionCommandId)(t.commandId),contributions:t.contributions,create:function(t){var r=t.path;return(0,er._)(function(){var t;return(0,ei._)(this,function(i){switch(i.label){case 0:return[4,Promise.race([n({path:r}),new Promise(function(e){return setTimeout(function(){return e(null)},50)})])];case 1:if(null===(t=i.sent()))return[2,null];return[2,(0,tu.parseCommandProxyToExtensionCommand)(t,e)]}})})()}},e.store.set(ts.registerExtensionCreateCommandAtom,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})})()}}}function nj(e){return function(){if(!e.store.get(e.extensionStateAtom).enableExperimentalApi)throw Error("Experimental APIs are not enabled. (If you are the developer, please add the `experimental-api` scope to your extension.json)")}}var nS=e.i(995683),nk=e.i(205104),nC=e.i(703631),nT=e.i(903381);function nI(e){return e.error?{error:e.error,success:!1}:{success:!0,error:null}}var nP=e.i(968323),nE=e.i(12291),nR=e.i(664152),nA=function(e,t){var n=e.extension,r=t.showMessage,i=t.hideMessage,o=t.hideAllMessages,a=function(e){return function(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,a=arguments.length>2?arguments[2]:void 0,u=Date.now();u-l>=6e4&&(l=u,s=0);var c=null!=(i=n.manifest.name.trim())?i:"Unknown Extension";s<10?(r({content:(0,x.jsxs)(x.Fragment,{children:[t,(0,x.jsx)("div",{children:(0,x.jsx)(eA.Text,{variant:"small",children:c})})]}),type:e,time:o>1e4?1e4:o,style:a}),s++):nR.logger.error("Extension reached showMessage throttle limit",{extensionId:n.extensionId,extensionName:n.manifest.name,content:t})}},s=0,l=Date.now();return{showConfirm:a("confirm"),showError:a("error"),showNotice:a("notice"),showWarning:a("warning"),hideMessage:i,hideAllMessages:o}},nD=e.i(412284),nV=e.i(703774);function nM(e){var t=e.extension,n=e.sandboxUrl,r=e.sandboxTitle,i=e.paneId,o=e.environmentAPIs,a=e.filePath,s=(0,W.useRef)(null),l=(0,e3.default)(),u=(0,e4.useCurrentUserId)(),c=(0,tv.default)(),d=(0,W.useRef)(),p=(0,nD.useExtensionsStore)(),f=(0,ts.useExtensionStateAtom)(null==t?void 0:t.installationId),h=(0,nV.useTheme)(),m=(0,W.useRef)(h),v=(0,W.useRef)([]);m.current=h;var g=(0,Q.default)(function(){return{}},[]),x=(0,tm.default)(c.container),y=(0,z._)((0,W.useState)(!1),2),w=y[0],_=y[1];(0,W.useEffect)(function(){x===tp.ConnectionState.CONNECTED&&_(!0)},[x]),(0,W.useEffect)(function(){v.current.forEach(function(e){return e(h.theme)})},[h.theme]),(0,W.useEffect)(function(){return function(){d.current&&d.current()}},[]);var j=(0,W.useCallback)(function(){try{var e=new URL(n);if("https:"===e.protocol)return!0;return!1}catch(e){return!1}},[n]),S=(0,W.useCallback)(function(){!s.current||!j()||t&&f&&u&&(d.current&&d.current(),d.current=function(e){var t=e.extensionIframe,n=new URL(t.src).origin,r=function(e){var t,n,r,i,o,a,s,l,u,c,d,p=e.filePath,f=e.replId,h=e.environmentAPIs,m=e.logger.createLogger({api:"debug"});return(0,td._)((0,b._)({filePath:p},(t=e.services.fs,n=e.logger.createLogger({api:"fs"}),nm([nv(e,["read"])],(0,b._)({readFile:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return(0,er._)(function(){var r,i;return(0,ei._)(this,function(o){switch(o.label){case 0:return r=(0,nC.normalizePath)(e),[4,t.readFile(r)];case 1:var a;if((i=o.sent()).error)return[2,{error:i.error,content:null}];return[2,{error:null,content:(a=i.content,"utf8"===n?a.toString():"binary"===n?a.toBuffer():a)}]}})})()},readDir:function(e){return(0,er._)(function(){var n,r;return(0,ei._)(this,function(i){switch(i.label){case 0:return n=(0,nC.normalizePath)(e),[4,t.readDir(n)];case 1:if((r=i.sent()).error)return[2,{error:r.error,children:null}];return[2,{error:null,children:r.children}]}})})()},watchFile:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"binary",o=(0,nC.normalizePath)(e);(0,nk.isOTFile)(o)&&n.warn("Extension used watchFile on a text file. This works, but watchTextFile is preferred.");var a=t.watchFile(o,{onChange:function(e){"utf8"===i?r.onChange(e.toString("utf8")):r.onChange(e.asBuffer)},onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return tD(function(){a()})},watchDir:function(e,n){var r=(0,nC.normalizePath)(e),i=t.watchDir(r,{onChange:function(t){n.onChange(t.map(function(t){return{path:(0,nC.asDir)(e)+t.filename,type:t.type}}))},onError:function(e){n.onError(e)},onMoveOrDelete:function(e){n.onMoveOrDelete(e)}});return tD(function(){i()})}},nm([nv(e,["write-exec"])],{createDir:function(e){return(0,er._)(function(){var n;return(0,ei._)(this,function(r){switch(r.label){case 0:return n=(0,nC.normalizePath)(e),[4,t.createDir(n)];case 1:return[2,nI(r.sent())]}})})()},deleteDir:function(e){return(0,er._)(function(){var n;return(0,ei._)(this,function(r){switch(r.label){case 0:return n=(0,nC.normalizePath)(e),[4,t.deleteDir(n)];case 1:return[2,nI(r.sent())]}})})()},writeFile:function(e,n){return(0,er._)(function(){var r,i,o;return(0,ei._)(this,function(a){switch(a.label){case 0:if(r=(0,nC.normalizePath)(e),"string"!=typeof n)return[3,1];return i=n,[3,4];case 1:if(!(0,tx._)(n,Blob))return[3,3];return o=nS.default.from,[4,n.arrayBuffer()];case 2:return i=o.apply(nS.default,[a.sent()]),[3,4];case 3:i=nS.default.from(n),a.label=4;case 4:return[4,t.writeFile(r,i)];case 5:return[2,nI(a.sent())]}})})()},deleteFile:function(e){return(0,er._)(function(){var n;return(0,ei._)(this,function(r){switch(r.label){case 0:return n=(0,nC.normalizePath)(e),[4,t.deleteFile(n)];case 1:return[2,nI(r.sent())]}})})()},copyFile:function(e,n){return(0,er._)(function(){var r;return(0,ei._)(this,function(i){switch(i.label){case 0:return r=(0,nC.normalizePath)(e),[4,t.copyFile(r,n)];case 1:return[2,nI(i.sent())]}})})()},move:function(e,n){return(0,er._)(function(){var r,i,o;return(0,ei._)(this,function(a){switch(a.label){case 0:return r=(0,nC.normalizePath)(e),[4,t.stat(r)];case 1:if(!(i=a.sent()).exists)return[2,{error:"File or directory does not exist",success:!1}];if(i.type!==nT.FileType.File)return[3,3];return[4,t.moveFile(r,n)];case 2:return o=a.sent(),[3,5];case 3:return[4,t.moveDir(r,n)];case 4:o=a.sent(),a.label=5;case 5:return[2,nI(o)]}})})()},watchTextFile:function(e,r){(0,nk.isOTFile)(e)||n.warn("It appears that you are trying to use watchTextFile on a non-OT file. Please use fs.watchFile instead");var i=t.watchTextFile(e,{onReady:function(e){var t=e.fetchChanges,n=e.initialContent,i=e.transformSelection,o=e.updateSelections,a=e.version,s=e.writeChange;r.onReady(tD({writeChange:s,fetchChanges:t,initialContent:n,version:a,transformSelection:i,updateSelections:o}))},onChange:function(e){var t=e.latestContent,n=e.changeSource,i=e.changes,o=e.version;return(0,er._)(function(){return(0,ei._)(this,function(e){return r.onChange({latestContent:t.toString(),version:o,changeSource:n,changes:i.toJSON()}),[2]})})()},onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return tD(function(){i()})}})))),function(e){var t=e.services.container,n=null;function r(){return(0,er._)(function(){var e;return(0,ei._)(this,function(r){switch(r.label){case 0:if(n)return[2];return[4,t.exec("bash","-c","echo $REPLIT_DB_URL")];case 1:if((e=r.sent()).error||!e.output)throw Error("unable to find REPLIT_DB_URL");return n=e.output.trim(),[2]}})})()}return nm([nv(e,["repldb:read"])],(0,b._)({getReplDbValue:function(e){return(0,er._)(function(){return(0,ei._)(this,function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),[4,t.exec("curl","-s","".concat(n,"/").concat(e))];case 2:return[2,i.sent().output]}})})()},listReplDbKeys:function(e){return(0,er._)(function(){var i;return(0,ei._)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,t.exec("curl","-s","".concat(n,"?prefix=").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})()}},nm([nv(e,["repldb:write"])],{setReplDbValue:function(e,i){return(0,er._)(function(){return(0,ei._)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,t.exec("curl",n,"-s","-d","".concat(e,"=").concat(i))];case 2:return o.sent(),[2]}})})()},deleteReplDbKey:function(e){return(0,er._)(function(){var i;return(0,ei._)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,t.exec("curl","-s","-XDELETE","".concat(n,"/").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})()}})))}(e),{watchActiveFile:function(e){return tD(r.environmentAPIs.watchActiveFile(e))},openFile:(r=e).environmentAPIs.openFile,getActiveFile:function(){return r.environmentAPIs.getActiveFile()}},(i=e.getThemeContext,o=e.onThemeChange,{getCurrentTheme:function(){return i().theme},getCurrentThemeValues:function(){return i().theme.values.global},onThemeChange:function(e){var t=o(e);return tD(function(){t()})},onThemeChangeValues:function(e){var t=o(function(t){return e(t.values.global)});return tD(function(){t()})}}),nA(e,h.toasts),{currentUser:np(na),userById:np(nl),userByUsername:np(ns),currentRepl:function(e){return np(nc)((0,b._)({id:f},e))},replById:np(nc),replByUrl:np(nd)},(a=e.services.container.client(),s=e.logger.createLogger({api:"exec"}),(0,b._)({},nm([nv(e,["write-exec"])],{exec:function(e){return(0,er._)(function(){var t,n,r,i;return(0,ei._)(this,function(o){switch(o.label){case 0:return[4,e.args];case 1:return t=o.sent(),[4,e.env];case 2:if(n=o.sent(),s.info("exec: [".concat(t.join(", "),"]"),{environmentVariables:n}),!nh.Value.Check(ng,n))throw Error("Invalid environment variables");return[4,e.splitStderr];case 3:return r=o.sent(),i=function(){},[2,tD({dispose:function(){i()},promise:new Promise(function(o){i=a.openChannel({service:"exec"},function(a){var l=a.channel;l.onCommand(function(t){r?t.output?e.onOutput(t.output):t.stderr&&e.onStdErr(t.stderr):t.output&&e.onOutput(t.output)}),l.request({exec:{args:t,env:n,splitStderr:!!r}}).then(function(t){if(t.ok)return void o({exitCode:0,error:null});if(t.channelClosed){var n="Channel closed before command's execution finished";e.onError(n),o({exitCode:null,error:n});return}if("open"===l.status&&i(),t.error){var r,a,s=Number(null==(a=t.error)||null==(r=a.match(/-?[0-9]+/g))?void 0:r[0]);o({exitCode:"number"==typeof s?s:null,error:t.error});return}throw Error("Unknown error")}).catch(function(t){s.error("exec: threw crosis error:\n".concat(String(t||"")));var n="exec() failed due to internal error. See console for details.";e.onError(n),o({error:n,exitCode:null})})})})})]}})})()}}))),(l=e.extension,u=e.paneId,c=e.environmentAPIs,d=!1,{activatePane:function(){u&&(c.activatePane(u),d||(d=!0,(0,eu.track)(ec.events.EXTENSION_USED,{action:"used",extensionId:l.extensionId,extensionName:l.manifest.name})))}})),{commands:{registerCommand:function(t,n){return(0,er._)(function(){var r;return(0,ei._)(this,function(i){switch(i.label){case 0:if(!t.commandId||""===t.commandId)throw Error("Attempted to register command without id");if(!t.contributions||!Array.isArray(t.contributions))throw Error("Command: In ".concat(t.commandId,", contributions should be an array"));return 0===t.contributions.length&&e.logger.warn("Command: ".concat(t.commandId," has no contributions")),[4,(0,tu.parseCommandProxyToExtensionCommand)(n,e)];case 1:return r=i.sent(),e.store.set(ts.registerExtensionCreateCommandAtom,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:t.commandId,contributions:t.contributions,create:function(){return(0,er._)(function(){return(0,ei._)(this,function(e){return[2,r]})})()}}}),[2]}})})()},registerCreateCommand:function(t,n){return(0,er._)(function(){var r,i;return(0,ei._)(this,function(o){if(!t.commandId||""===t.commandId)throw Error("Attempted to register command without id");if(!t.contributions||!Array.isArray(t.contributions))throw Error("Command: In ".concat(t.commandId,", contributions should be an array"));return 0===t.contributions.length&&e.logger.warn("Command: ".concat(t.commandId," has no contributions")),(r=t.contributions.filter(function(e){return!(e in tO.ContributionType)})).length>0&&e.logger.warn("Command: ".concat(t.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(tO.ContributionType))),i={id:t.commandId,contributions:t.contributions,create:function(t){var r=t.path;return(0,er._)(function(){var t;return(0,ei._)(this,function(i){switch(i.label){case 0:return[4,Promise.race([n({path:r}),new Promise(function(e){return setTimeout(function(){return e(tL)},50)})])];case 1:if(null===(t=i.sent()))return[2,null];if(t===tL)return e.logger.warn("Command took too long to create. When using registerCreateCommand, you must return a command within ".concat(50,"ms")),[2,null];return[2,(0,tu.parseCommandProxyToExtensionCommand)(t,e)]}})})()}},e.store.set(ts.registerExtensionCreateCommandAtom,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})})()}},experimental:(0,td._)((0,b._)({},nm([nj(e)],{hasExperimentalApi:function(){return!0}})),{editor:nm([nj(e)],(0,b._)({},{getPreferences:function(){return(0,er._)(function(){var e,t,n,r;return(0,ei._)(this,function(i){switch(i.label){case 0:return[4,null===e5.apolloClient||void 0===e5.apolloClient?void 0:e5.apolloClient.query({query:nu})];case 1:if(null==(n=i.sent())||null==(t=n.data)||null==(e=t.currentUser)?void 0:e.workspacePreferences)return[2,(0,nx.getUserPreferences)(n.data.currentUser.workspacePreferences)];throw Error(null==n||null==(r=n.error)?void 0:r.message)}})})()}})),commands:nm([nj(e)],(0,b._)({},n_(e))),auth:nm([nj(e)],(0,b._)({},{getAuthToken:function(){return(0,er._)(function(){var t,n;return(0,ei._)(this,function(r){switch(r.label){case 0:if(e.extension.isLocal)return[2,[btoa(JSON.stringify({alg:"none",typ:"JWT",local:!0,key:"there-is-no-key-for-local-extensions"})),btoa(JSON.stringify({installationId:e.extension.installationId,extensionId:e.extension.extensionId,userId:e.userId,origin:"https://staging.replit.com"})),"this-is-a-locally-generated-jwt-that-will-fail-verification-to-avoid-being-used-accidentally-in-prod-so-please-check-the-header-for-whether-this-is-a-local-extension"].join(".")];return[4,null===e5.apolloClient||void 0===e5.apolloClient?void 0:e5.apolloClient.query({query:nw,variables:{installationId:e.extension.installationId}})];case 1:if(!(null==(t=r.sent())?void 0:t.data))throw Error("Failed to authenticate: something went wrong");if("NotFoundError"===(n=t.data.extensionInstallationById).__typename)throw Error("Failed to authenticate: invalid installation ID");if("ExtensionInstallation"!==n.__typename||!n.token)throw Error("Failed to authenticate: something went wrong");return[2,n.token]}})})()}})),internal:nm([nj(e)],(0,b._)({},n_(e)))}),internal:function(e){var t,n,r;return e.store.get(e.extensionStateAtom).enableInternalApi?{hasInternalApi:function(){return!0},ghostwriter:{},container:(t=e.services.container,{getConnectionState:function(){return t.getConnectionState()},onConnectionStateChanged:function(e){var n=t.onConnectionStateChanged(e);return tD(function(){n()})}}),layout:{revealOrInsertTool:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=e.logger.createLogger({api:"revealOrInsertTool"});if(!e.extension.manifest.tools)return void n.warn("No tools defined in extension manifest");if(e.extension.manifest.tools.length<t+1)return void n.warn("Tool index out of bounds");var r=e.extension.manifest.tools[t],i=r.name||e.extension.manifest.name,o=r.handler;e.environmentAPIs.revealOrInsertTool({extensionId:e.extension.extensionId,installationId:e.extension.installationId,baseUrl:e.extension.baseUrl,path:o,name:i})},getLayoutState:function(){return e.environmentAPIs.getLayoutState()},setLayoutState:function(t){return e.environmentAPIs.setLayoutState(t)}},secrets:(n=e.services.secrets,{setSecret:function(e){return(0,er._)(function(e){var t,r;return(0,ei._)(this,function(i){switch(i.label){case 0:return t=e.key,r=e.value,[4,n.addEntries([{key:t,value:r}])];case 1:return i.sent(),[2,(0,nP.Ok)(!0)]}})}).apply(this,arguments)},getSecret:function(e){return(0,er._)(function(){var t;return(0,ei._)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,n.read()];case 1:return[2,nP.Ok.apply(void 0,[r.sent().get(e.key)])];case 2:return t=r.sent(),[2,(0,nP.Err)(t)];case 3:return[2]}})})()},getReferenceCode:function(e){return(0,er._)(function(){return(0,ei._)(this,function(t){return[2,(0,nE.getEnvCodeForLanguage)(e.filePath,e.key)]})})()}}),dotReplit:{getConfig:(r=e.services.dotReplit).getConfig,update:r.updateDotReplit},ssh:{getSshConfig:function(){return(0,er._)(function(){return(0,ei._)(this,function(t){return[2,e.environmentAPIs.getSshConfig()]})})()}},commands:n_(e)}:null}(e),debug:{info:function(e,t){return m.info(e,t)},warn:function(e,t){return m.warn(e,t)},error:function(e,t){return m.error(e,t)}},handshake:function(t){return(0,er._)(function(){var n,r,i,o;return(0,ei._)(this,function(a){switch(a.label){case 0:return[4,null==t?void 0:t.clientName];case 1:return r=null!=(n=a.sent())?n:"(unset)",[4,null==t?void 0:t.clientVersion];case 2:return o=null!=(i=a.sent())?i:"(unset)",(0,eu.track)(ec.events.EXTENSION_USED,{action:"sandbox_initialized",clientName:r,clientVersion:o,extensionId:e.extension.extensionId,extensionName:e.extension.manifest.name,installationId:e.extension.installationId}),(0,er._)(function(){var t,n,i;return(0,ei._)(this,function(a){switch(a.label){case 0:if(!e.extension.isLocal||"@replit/extensions"!==r)return[2];return[4,e.services.container.exec("sh","-c","npm view @replit/extensions --json version 2>/dev/null")];case 1:if((n=a.sent()).error)throw n.error;if(!n.output)throw Error("No output from npm");if((i=JSON.parse(null==(t=n.output)?void 0:t.trim()))===o)return[2];return e.logger.warn("There is a new version of @replit/extensions available. You are using ".concat(o,", but the latest version is ").concat(i),{clientVersion:o,latestVersion:i}),[2]}})})(),[2,{success:!0}]}})})()}})}(e);if(!t.contentWindow)throw Error("No contentWindow");var i=tI(r,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return{postMessage:function(t,r){e.postMessage(t,n,r)},addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}(t.contentWindow,self,n),{origin:n,source:t.contentWindow}),o=function(r){if(r.origin===n&&t.contentWindow===r.source){var i=r.data;i.payload&&e.logger.warn("Extension sent deprecated postMessage",i)}};return window.addEventListener("message",o),function(){i(),window.removeEventListener("message",o)}}({extension:t,extensionIframe:s.current,services:c,paneId:i,replId:l,getThemeContext:function(){return m.current},onThemeChange:function(e){return v.current.push(e),function(){v.current.splice(v.current.indexOf(e),1)}},store:p,extensionStateAtom:f,environmentAPIs:o,filePath:a,logger:t.logger.createLogger({sandboxUrl:n,sandboxTitle:r}),userId:u,ghostwriter:g}))},[u,m,c,j,i,p,f,o,l,a,t,n,r,g]);return{isValidExtensionPaneUrl:j,didConnectOnce:w,getIframeProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,td._)((0,b._)({title:r,src:n},tf.default,e),{ref:(0,th.mergeRefs)([s,e.ref],{breadcrumb:"client/workspace/extensions/sandbox/useExtensionSandbox.tsx:191"}),onLoad:function(t){S(),e.onLoad&&e.onLoad(t)}})},reloadSandbox:(0,W.useCallback)(function(){if(s.current){var e=s.current.src;s.current.src=e}},[])}}function nF(e){var t=e.extension,n=e.environmentAPIs;if(!t.manifest.background)throw Error("ExtensionBackground loaded without a background script defined in manifest");var r=(0,ts.useExtensionStateAtom)(t.installationId),i=nM({extension:t,sandboxUrl:(0,tc.getAssetUrl)(t.baseUrl,t.manifest.background.page),sandboxTitle:"Extension Background: "+t.manifest.name,environmentAPIs:n,paneId:null,filePath:null}),o=i.didConnectOnce,a=i.isValidExtensionPaneUrl,s=i.getIframeProps;return a()&&o&&r?(0,x.jsx)("iframe",(0,b._)({},s({css:{width:"0px",height:"0px",border:"none"}}))):null}var nO=e.i(838124),nL=e.i(557154);function nB(){var e=(0,e3.default)(),t=(0,e4.useCurrentUserId)(),n=(0,e8.useDevUrl)().url,r=(0,nO.useIsExtensionRepl)(),i=(0,tl.useInstallExtension)(),o=(0,ep.useOpenTool)(),a=(0,tl.useInstallExtensionLocallyByURL)(),s=(0,tl.useLoadExtension)(),l=(0,tl.useInitializeExtensionSystem)();(0,nO.useSyncReplConfigIsExtension)();var u=(0,ts.useExtensions)(),c=to(),d=(0,z._)((0,W.useState)(!1),2),p=d[0],f=d[1];(0,W.useEffect)(function(){e&&t&&l({replId:e,userId:t})},[e,t,l]);var h=(0,ts.useFileHandlers)(),m=(0,ep.useSetExtensionFileHandlers)();(0,W.useEffect)(function(){m(h)},[h,m]);var v=(0,ep.useAssociateFiletype)();(0,ta.useInitializeFiletypeAssociations)();var g=(0,ep.useFiletypeAssociationRequest)(),y=(0,ep.useSetFiletypeAssociationRequest)(),b=function(n){var r=n.filterUser;return function(n){var o=n.active;return(0,er._)(function(){var n,a;return(0,ei._)(this,function(l){switch(l.label){case 0:if(!o)return[2,[]];return[4,null===e5.apolloClient||void 0===e5.apolloClient?void 0:e5.apolloClient.query({query:eX,variables:{replId:e,userId:r?t:void 0}})];case 1:if(!(n=l.sent())||n.error||!(a=n.data.extensionList))return[2,[]];return[2,a.map(function(t){var n;return{match:ef.matchLabel,data:{type:"action",label:t.name,icon:(0,x.jsx)(e0.default,{}),description:null!=(n=t.description)?n:"",run:function(){t.url&&(t.installation?s({installationId:(0,e2.asInstallationId)(t.installation.id)}):i({replId:e,extensionId:(0,e2.asExtensionId)(t.id)}))}}}})]}})})()}},w=(0,ts.useExtensionCommands)(tO.ContributionType.CommandBar);return eq({data:{type:"group",key:"Extensions",description:"Commands from Extensions"},commands:function(){return(0,er._)(function(){var e;return(0,ei._)(this,function(t){switch(t.label){case 0:return e=[{data:{}}],[4,Promise.all(w.map(function(t){return(0,er._)(function(){var n;return(0,ei._)(this,function(r){switch(r.label){case 0:return[4,t.create({path:e})];case 1:if(!(n=r.sent()))return[2,null];return[2,(0,tu.wrapExtensionCommand)(n,{path:e})]}})})()}))];case 1:return[2,t.sent().filter(Boolean)]}})})()}},{enabled:!0}),eq({match:ef.matchLabel,commands:function(e){return e.active||""!==e.searchQuery?[{match:ef.matchLabel,data:{type:"action",label:"Extension Devtools",icon:(0,x.jsx)(eJ.default,{}),description:"Manage and deploy this Repl as an extension",run:function(){o({pane:{type:"extensionDevtools"}})}}},{match:ef.matchLabel,data:{type:"action",label:"URL",icon:(0,x.jsx)(eJ.default,{}),description:"Add an extension by URL",run:function(){f(!0)}}},{match:ef.matchLabel,data:{type:"action",label:"From this Repl",icon:(0,x.jsx)(eJ.default,{}),description:"Load this Repl as an extension",run:function(){n&&a(n)}}},{match:ef.matchLabel,data:{type:"context",label:"My Extensions",icon:(0,x.jsx)(e0.default,{}),description:"Browse extensions you have created"},commands:b({filterUser:!0})},{match:ef.matchLabel,data:{type:"action",label:"Docs",icon:(0,x.jsx)(eZ.default,{}),description:"Read the Extensions docs",run:function(){window.open(e1.LINKS_DOCS.EXTENSIONS,"_blank","noopener")}}}]:[]},data:{type:"context",label:"Extensions",icon:(0,x.jsx)(e0.default,{}),description:"Manage extensions"}},{enabled:r}),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(ez.Modal,{isOpen:p,onRequestClose:function(){return f(!1)},children:(0,x.jsx)(nL.default,{prompt:"Add an extension by URL",desc:"Insert extension url",placeholder:"https://example-extension.replit.app",type:"text",onCancel:function(){return f(!1)},onConfirm:function(e){a(e)}})}),(0,x.jsx)(ez.Modal,{isOpen:!!g,onRequestClose:function(){return y(null)},children:g?(0,x.jsx)(e9,{fileExtension:g.fileExtension,extensionId:g.extensionId,fileHandlerId:g.fileHandlerId,onCancel:function(){return y(null)},onConfirm:function(){return(0,er._)(function(){var e;return(0,ei._)(this,function(t){switch(t.label){case 0:return e=g.fileExtension,[4,v({fileExtension:e,newAssociation:{extensionId:g.extensionId,fileHandlerId:g.fileHandlerId}})];case 1:return t.sent(),y(null),[2]}})})()}}):null}),u.map(function(e){return e.manifest.background?(0,x.jsx)(nF,{environmentAPIs:c,extension:e},e.installationId):null})]})}var nU=e.i(917736),nN=e.i(873169),nG=e.i(127227);function nz(){var e=(0,tv.default)().fs,t=(0,z._)((0,W.useState)(!1),2),n=t[0],r=t[1],i=(0,z._)((0,W.useState)(!1),2),o=i[0],a=i[1],s=(0,W.useId)();(0,W.useEffect)(function(){if(!o)return e.onDiskQuotaExceeded(function(){r(!0)})},[e,o]);var l=(0,W.useCallback)(function(){r(!1)},[r]);return(0,x.jsx)(ez.Modal,{isOpen:n,onRequestClose:l,children:(0,x.jsx)(F.View,{gap:24,children:(0,x.jsxs)(F.View,{gap:24,children:[(0,x.jsxs)(eA.Header,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,x.jsx)(nU.default,{color:D.tokens.accentNegativeDefault,size:20})]}),(0,x.jsxs)(eA.Text,{variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,x.jsx)(nN.default,{})," icon on the left."]}),(0,x.jsx)(eA.Text,{children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,x.jsxs)(F.View,{row:!0,gap:8,tag:"label",children:[(0,x.jsx)(nG.Checkbox,{id:s,checked:o,onChange:a}),(0,x.jsx)(eA.Text,{variant:"small",children:"Do not show this message again for this session."})]}),(0,x.jsx)(eE.Button,{onClick:l,text:"Close"})]})})})}var nW=e.i(816639),nH=e.i(852037),nq=e.i(989740),nK=e.i(679668);function n$(){var e=(0,ep.useMoveOrDeleteFile)(),t=(0,nq.default)({moveOrDeleteFile:e}),n=t.isConverging,r=t.didContentsDiverge,i=t.showMoreDetail,o=t.failedFiles,a=t.failedFilesOptions,s=t.selectedFile,l=t.setSelectedFile,u=t.reviewingPrompt,c=t.onChoice,d=t.local,p=t.remote,f=[eG.rcss.minHeight("7em"),eG.rcss.maxHeight("50vh"),eG.rcss.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,x.jsx)(ez.Modal,{css:[{maxHeight:"90%"}],preventClose:!0,maxWidth:"90%",isOpen:r,onRequestClose:function(){},children:(0,x.jsxs)(F.View,{gap:24,children:[(0,x.jsx)(eA.Header,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,x.jsxs)(eA.Text,{children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",o.length>1?"these files":"this file"," you'd like to keep."," ",o.length>1?(0,x.jsxs)("strong",{children:["There are ",o.length," files impacted by this."]}):""]}),n?(0,x.jsx)(nH.default,{}):(0,x.jsxs)(x.Fragment,{children:[a.length?(0,x.jsx)(nK.Select,{"aria-label":"Select file with diverged contents",initialSelectedItem:a[0],selectedItem:a.find(function(e){return e.path===s}),items:a,onChange:function(e){l(e.path)}}):null,i?(0,x.jsxs)(F.View,{css:[eG.rcss.backgroundColor.redDimmest,eG.rcss.font.code],pt:16,p:8,row:!0,gap:16,justify:"start",align:"center",children:[(0,x.jsx)(eA.Text,{variant:"subheadDefault",multiline:!1,children:"Debug View"}),(0,x.jsxs)(eA.Text,{multiline:!1,children:["Divergence type: ",null==u?void 0:u.case]})]}):null,(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsxs)(F.View,{css:[{flexBasis:0}],grow:!0,shrink:!0,children:[(0,x.jsx)(eA.Text,{variant:"subheadDefault",multiline:!1,children:"My changes"}),(0,x.jsx)(V.ShadesSurface,{grow:!0,shrink:!0,py:8,children:(0,x.jsx)(F.View,{css:f,children:(0,x.jsx)(nW.DiffComponent,{diffViewer:d})})}),(0,x.jsxs)(F.View,{pt:16,children:[(0,x.jsx)(eA.Text,{css:[eG.rcss.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,x.jsx)(eE.Button,{onClick:function(){c("local")},text:"Reset to Mine"})]})]}),(0,x.jsxs)(F.View,{css:[{flexBasis:0}],grow:!0,shrink:!0,children:[(0,x.jsx)(eA.Text,{variant:"subheadDefault",multiline:!1,children:"Shared changes"}),(0,x.jsx)(V.ShadesSurface,{grow:!0,shrink:!0,py:8,children:(0,x.jsx)(F.View,{css:f,children:(0,x.jsx)(nW.DiffComponent,{diffViewer:p})})}),(0,x.jsxs)(F.View,{pt:16,justify:"end",children:[(0,x.jsx)(eA.Text,{css:[eG.rcss.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,x.jsx)(eE.Button,{onClick:function(){c("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}var nY=e.i(260924),nQ=e.i(317919),nX=e.i(399344),nZ=e.i(282453),nJ=e.i(703916),n0=e.i(316699),n1=e.i(402099),n2=e.i(252204),n4=e.i(612633),n3=e.i(819906),n5=e.i(820228),n8=e.i(898039),n6=e.i(82130),n9=e.i(602389),n7=e.i(142685),re=e.i(610357),rt=e.i(659042),rn=e.i(835);e.i(653863);var rr=e.i(973519),ri=e.i(519979),ro=e.i(591936),ra=e.i(41e4),rs=e.i(927158),rl=["ðŸ”„","â³","ðŸ”ƒ","âš¡","ðŸš€","âœ¨"];function ru(e){return new Promise(function(t){return setTimeout(t,e)})}var rc=e.i(346781),rd=e.i(989481),rp=e.i(87995),rf=e.i(279042);function rh(){var e=(0,w._)(["\n  fragment ReplEnvironmentDesktopMyReplsSearchRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    iconUrl\n    ...ReplLinkRepl\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n  }\n  ","\n"]);return rh=function(){return e},e}function rm(){var e=(0,w._)(["\n  query ReplEnvironmentDesktopMyReplsSearch($query: String, $count: Int) {\n    currentUser {\n      id\n      search {\n        repls(query: $query, count: $count) {\n          id\n          ...ReplEnvironmentDesktopMyReplsSearchRepl\n        }\n      }\n    }\n  }\n  ","\n"]);return rm=function(){return e},e}var rv=(0,_.gql)(rh(),rf.ReplLinkReplFragmentDoc),rg=(0,_.gql)(rm(),rv),rx=e.i(302905),ry=e.i(314531),rb=e.i(46654),rw=e.i(228108),r_=e.i(290446),rj=(0,eN.cssRecord)({root:[eG.rcss.viewStyle,eG.rcss.rowWithGap(8),eG.rcss.align.center,eG.rcss.px(8),{textDecoration:"none"}],meta:{fontSize:10}});function rS(e){var t=e.repl,n=e.height,r=e.isActive,i=e.searchQuery,o=t.title,a=(0,W.useMemo)(function(){return i?ry.default.match(i,o):null},[i,o]);return(0,x.jsxs)(rp.default,{href:t.url,passHref:!0,style:{height:n},css:rj.root,children:[(0,x.jsx)(rw.default,{alt:t.title,size:32,iconUrl:t.iconUrl}),(0,x.jsxs)(F.View,{grow:!0,shrink:!0,gap:2,children:[(0,x.jsx)(r_.HighlightMatches,{text:t.title,highlight:null==a?void 0:a.ranges,dimmed:!r}),(0,x.jsxs)(eA.Text,{css:rj.meta,color:"dimmest",multiline:!1,children:[t.owner.username," â€¢ edited ",(0,rb.ago)(t.timeUpdated)]})]})]})}var rk=e.i(799634);function rC(){var e=(0,ep.useOpenFile)(),t=(0,ep.useOpenTool)();return(0,W.useCallback)(function(n){return(0,em.isFilePane)(n)&&n.data.path?e((0,td._)((0,b._)({},n.data),{path:n.data.path})):t({pane:n})},[t,e])}var rT=e.i(926118),rI=e.i(971131),rP=(0,eo.atom)(!1),rE=(0,eo.atom)(null,function(e,t){e(rP)?(0,rI.flushSync)(function(){t(rP,!1)}):t(rP,!0)});function rR(){return(0,ea.useSetAtom)(rE)}var rA=e.i(695337),rD={id:"toggleKeyboardShortcuts",name:"Keyboard shortcuts Help",description:"Opens the keyboard shortcuts modal",default:"Shift-/"};let rV=function(){var e=(0,ea.useAtomValue)(rP),t=rR();return(0,x.jsx)(ez.Modal,{isOpen:e,onRequestClose:t,maxWidth:1200,centered:!0,children:(0,x.jsx)(F.View,{gap:12,children:(0,x.jsx)(rF,{})})})};var rM=["toggleGlobalCommandBarCommand","agent.switchMode","agent.toggle","webviewpane.reload","toggleKeyboardShortcuts","sidebar.toggle","paneMenu.toggle","files.searchContents","files.searchFiles","repl.showShell"];function rF(){var e=(0,eF.useKeyBindings)(),t=rC(),n=rR(),r=(0,en._)(e.values()).filter(function(e){return e.shortcut}).filter(function(e){return void 0===e.scope}).sort(function(e,t){var n=rM.indexOf(e.id),r=rM.indexOf(t.id);return -1!==n&&-1!==r?n-r:e.description&&!t.description?-1:!e.description&&t.description?1:e.name.localeCompare(t.name)}),i=(0,W.useCallback)(function(){t({type:"preferences",data:{tab:1}}),n()},[t,n]);return(0,x.jsxs)(F.View,{p:0,gap:12,children:[(0,x.jsx)(eA.Header,{level:2,variant:"subheadBig",children:"Keyboard shortcuts"}),r.length>0?(0,x.jsx)(V.ShadesSurface,{className:rA.default.surface,elevate:!1,children:r.map(function(e){return(0,x.jsxs)(F.View,{row:!0,align:"start",justify:"space-between",gap:8,"data-testid":e.id,children:[(0,x.jsxs)(F.View,{grow:0,shrink:!0,gap:2,children:[(0,x.jsx)(eA.Text,{multiline:!1,children:e.name}),e.description?(0,x.jsx)(eA.Text,{color:"dimmest",multiline:!1,children:e.description}):null]}),e.shortcut?(0,x.jsx)(rT.KeyComboBlocks,{small:!0,keyCombo:e.shortcut}):null]},e.id)})}):(0,x.jsx)(F.View,{children:(0,x.jsx)(eA.Text,{color:"dimmest",children:"No keyboard shortcuts found."})}),(0,x.jsx)(F.View,{align:"start",children:(0,x.jsx)(eE.Button,{variant:"outlined",onClick:i,iconLeft:(0,x.jsx)(rk.default,{}),text:"Customize keyboard shortcuts"})})]})}var rO=e.i(752539),rL=e.i(393428),rB=e.i(255701),rU=e.i(556088),rN=e.i(61524),rG=e.i(171362),rz=["fontSize","wrapping","minimapDisplay","indentDetection","indentFormatPastes","indentIsSpaces","keyboardHandler","showFileTreeGitStatus","codeIntelligence","shellBellAudio","accessibleTerminal","webviewAutoOpenOnPortOpened","forwardPortsAutomatically","multiselectModifierKey","codeSuggestion","chatEngine","ghostwriterModelSelection"],rW=e.i(982829),rH=e.i(211733),rq=e.i(133783),rK=e.i(959407),r$=e.i(6560),rY=e.i(578166),rQ=e.i(806930),rX=e.i(77164);function rZ(e){return(0,W.useMemo)(function(){var t=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];return Object.entries(n).forEach(function(n){var o,a=(0,z._)(n,2),s=a[0],l=a[1],u=(0,en._)(r).concat([s]);if(l.children){var c,d=t(l.children,u);i.push({match:ef.matchLabel,data:{type:"context",label:l.label,icon:null!=(c=l.icon)?c:(0,x.jsx)(x.Fragment,{})},commands:function(){return d}})}else l.component&&i.push({match:ef.matchLabel,data:{type:"action",label:l.label,icon:null!=(o=l.icon)?o:(0,x.jsx)(x.Fragment,{}),run:function(){return e(u)}}})}),i},n=t(rX.developerTabs);return{data:{type:"context",label:"Developer",icon:(0,x.jsx)(rQ.default,{})},commands:function(e){return e.active||""!==e.searchQuery?n:[]}}},[e])}var rJ=e.i(1736),r0=e.i(729122),r1=e.i(589721),r2=e.i(103490),r4=e.i(116235);function r3(e){return(0,x.jsx)(r4.default,(0,td._)((0,b._)({},e),{children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M7.24 3.25h9.52a2.751 2.751 0 0 1 2.462 1.526l3.449 6.888a.75.75 0 0 1 .079.336v6A2.75 2.75 0 0 1 20 20.75H4A2.75 2.75 0 0 1 1.25 18v-6a.75.75 0 0 1 .08-.336l3.448-6.888A2.75 2.75 0 0 1 7.24 3.25Zm0 1.5a1.25 1.25 0 0 0-1.118.694l-.001.002-2.907 5.804H8a.75.75 0 0 1 .624.334l1.777 2.666H13.6l1.777-2.666A.75.75 0 0 1 16 11.25h4.786l-2.907-5.804v-.002a1.25 1.25 0 0 0-1.119-.694m4.49 8h-4.849l-1.777 2.666a.75.75 0 0 1-.624.334h-4a.75.75 0 0 1-.624-.334L7.599 12.75H2.75V18A1.25 1.25 0 0 0 4 19.25h16A1.25 1.25 0 0 0 21.25 18v-5.25Zm-4.49-8H7.24h9.52Z",clipRule:"evenodd"})}))}var r5=e.i(131141),r8=e.i(814563),r6=e.i(613141),r9=e.i(951262);function r7(){var e=(0,w._)(["\n  fragment AgentFeedbackItem on AgentFeedback {\n    id\n    topic\n    feedbackText\n    currentPage\n    status\n    timeCreated\n    timeUpdated\n    screenshots\n    user {\n      id\n      username\n      fullName\n      displayName\n      image\n    }\n    deployment {\n      id\n    }\n    build {\n      id\n    }\n  }\n"]);return r7=function(){return e},e}function ie(){var e=(0,w._)(["\n  query InboxContentAgentFeedback($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        agentFeedback {\n          ... on ReplAgentFeedback {\n            isEnabled\n            pendingCount\n            items {\n              ...AgentFeedbackItem\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return ie=function(){return e},e}function it(){var e=(0,w._)(["\n  subscription AgentFeedbackUpdates($replId: String!) {\n    agentFeedback(replId: $replId) {\n      ...AgentFeedbackItem\n    }\n  }\n  ","\n"]);return it=function(){return e},e}function ir(){var e=(0,w._)(["\n  mutation UpdateAgentFeedbackStatus($input: UpdateAgentFeedbackStatusInput!) {\n    updateAgentFeedbackStatus(input: $input) {\n      ... on AgentFeedback {\n        ...AgentFeedbackItem\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return ir=function(){return e},e}var ii={},io=(0,_.gql)(r7()),ia=(0,_.gql)(ie(),io);function is(e){var t=(0,b._)({},ii,e);return j.useQuery(ia,t)}var il=(0,_.gql)(it(),io),iu=(0,_.gql)(ir(),io),ic=e.i(702868),id=e.i(225500),ip=e.i(852819),ih={new:"New",resolved:"Resolved",current_deployment:"Current deployment",recently_deleted:"Recently deleted"},im=(0,r8.createJSONStorage)(function(){return{getItem:function(e){return nZ.default.get(e,"string")},setItem:function(e,t){return nZ.default.set(e,t)},removeItem:function(e){return nZ.default.remove(e)}}}),iv=(0,r8.atomWithStorage)("agentInboxFilter","new",im);function ig(){var e,t=(0,e3.default)(),n=is({variables:{replId:t}}),r=n.data,i=n.refetch,o=(0,ic.useShowAgentInbox)(t).isEnabled,a=(0,id.useAgentAuthorization)(),s=a.authorizations,l=a.loading,u=(null==r||null==(e=r.getRepl)?void 0:e.__typename)==="Repl"?r.getRepl.agentFeedback:null,c=(null==u?void 0:u.__typename)==="ReplAgentFeedback"&&u.isEnabled,d=(null==u?void 0:u.__typename)==="ReplAgentFeedback"?u.pendingCount:0,p=l||!!(null==s?void 0:s.paidAgent.isAuthorized);return{isEnabled:c,pendingCount:d,isAvailable:o&&p&&(c||d>0),refetchFeedbackQuery:i}}function ix(){var e=(0,w._)(["\n  query ConfiguredTools($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hasAuthUsers\n        defaultBucket {\n          ... on Bucket {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return ix=function(){return e},e}var iy={},ib=(0,_.gql)(ix()),iw=e.i(424746),i_=e.i(630818);function ij(e){var t,n,r,i,o,a,s,l,u,c,d,p,f,h,m,v,g,y,w,_=e.openPane,S=e.currentPaneId,k=(0,tv.default)().fs,C=(0,ev.usePaneUIContext)(),T=(0,W.useCallback)(function(e){var t=e.path,n=(0,em.getPaneTypeForFile)({path:t});(0,eu.track)(ec.events.TOOL_OPENED,{source:"New Tab",tool:n}),_({pane:{type:n,data:{path:t}}})},[_]),I=(0,ep.useMoveAndReplacePane)(),P=(0,ep.useGetPanes)(),E=(0,W.useCallback)(function(e){if((0,eu.track)(ec.events.TOOL_OPENED,{source:"New Tab",tool:e.type}),S&&(0,em.isSingleton)(e.type)){var t=P().find(function(t){var n=(0,z._)(t,2);return n[0],n[1].type===e.type});if(t)return I({from:t[0],to:S})}_({pane:e})},[_,P,S,I]),R=rZ((0,W.useCallback)(function(e){E({type:"developer",data:{tab:e}})},[E])),A=(0,rJ.useShouldHideFileInWorkspace)(),D=(0,ex.useGetRecentFiles)(),V=iC(S),M=eD({currentPaneId:S}),F=(v=(t=(0,e3.default)(),o=(i=(null==(r=(null==(n=(0,r1.useNewPanePrimaryOutputQuery)({variables:{replId:t}}).data)?void 0:n.getRepl.__typename)==="Repl"?n.getRepl:null)?void 0:r.config)||{}).isServer,a=i.isAgentStack,s=i.isExpertMode,(0,W.useMemo)(function(){return a?[{type:"automations"}]:s?(0,en._)(o?[{type:"webview"}]:[]).concat([{type:"runnerOutput"}]):[{type:"webview"}]},[o,a,s])),g=(p=(null==(d=(u={variables:{replId:(0,e3.default)()}},c=(0,b._)({},iy,u),j.useQuery(ib,c)).data)?void 0:d.getRepl.__typename)==="Repl"?d.getRepl:null,f=void 0!==(0,iw.useNeonDevelopmentDatabase)().database,h=!!(null==p?void 0:p.hasAuthUsers),m=(null==p||null==(l=p.defaultBucket)?void 0:l.__typename)==="Bucket",(0,W.useMemo)(function(){var e=[];return h&&e.push({type:"replitAuth"}),f&&e.push({type:"neon"}),m&&e.push({type:"objectStorage"}),e},[f,h,m])),y=(0,e_.useToolPanes)(),w=(0,ep.usePanes)(),(0,W.useMemo)(function(){var e=new Map,t=new Set,n=[],r=function(r,i){if((0,em.isExtensionPane)(i))return void n.push(i);if(!t.has(i.type)){t.add(i.type);var o=e.get(r);o?o.push(i):e.set(r,[i])}},i=!0,o=!1,a=void 0;try{for(var s,l=v[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;r("output",u)}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}var c=!0,d=!1,p=void 0;try{for(var f,h=g[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var m=f.value;r("configured",m)}}catch(e){d=!0,p=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw p}}var x=!0,b=!1,_=void 0;try{for(var j,S=iS[Symbol.iterator]();!(x=(j=S.next()).done);x=!0){var k=j.value;r("suggested",k)}}catch(e){b=!0,_=e}finally{try{x||null==S.return||S.return()}finally{if(b)throw _}}var C=!0,T=!1,I=void 0;try{for(var P,E=y[Symbol.iterator]();!(C=(P=E.next()).done);C=!0){var R=P.value;r("rest",R)}}catch(e){T=!0,I=e}finally{try{C||null==E.return||E.return()}finally{if(T)throw I}}var A=[],D=!0,V=!1,M=void 0;try{for(var F,O=e.values()[Symbol.iterator]();!(D=(F=O.next()).done);D=!0){var L=F.value,B=!0,U=!1,N=void 0;try{for(var G,W=L[Symbol.iterator]();!(B=(G=W.next()).done);B=!0)!function(){var e=G.value,t=!(0,em.isSingleton)(e.type)&&!(0,em.isFilePane)(e)&&w.find(function(t){var n=(0,z._)(t,2);return(n[0],n[1]).type===e.type});t&&A.push(t)}()}catch(e){U=!0,N=e}finally{try{B||null==W.return||W.return()}finally{if(U)throw N}}}}catch(e){V=!0,M=e}finally{try{D||null==O.return||O.return()}finally{if(V)throw M}}return{groupedPanes:e,existingNonSingletonTools:A,extensions:n}},[v,g,y,w])),O=F.groupedPanes,L=F.existingNonSingletonTools,B=F.extensions;return(0,W.useMemo)(function(){var e,t,n,r=(0,r$.createFindOrCreateFileCommand)({openFile:T,fs:k,shouldHideFile:A,getRecentFiles:D}),i=(t=(e={fs:k,openFile:T}).openFile,n=e.fs,{match:ef.fzfMatchLabel,data:{type:"context",label:"New file",description:"Create a new file",icon:(0,x.jsx)(eJ.default,{})},commands:function(e){var r=e.searchQuery,i=e.active;return r&&i?[{match:ef.matchLabel,data:{type:"action",description:"Create a new file",label:r,icon:(0,x.jsx)(i_.default,{path:r}),run:function(){return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return[4,n.stat(r)];case 1:if(e.sent().exists)return[2,{type:"error",message:'"'.concat(r,'" already exists')}];return[4,n.writeFile(r,nS.default.from(""))];case 2:if(e.sent().error)return[2,{type:"error",message:'Could not create "'+r+'"'}];return t({path:r}),[2]}})})()}}}]:[]}}),o=[M];V&&o.push(V);var a=function(e,t){if(t.panes&&0!==t.panes.length){var n=[],r=!0,i=!1,a=void 0;try{for(var s,l=t.panes[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)!function(){var e=s.value;L.some(function(t){var n=(0,z._)(t,2);return(n[0],n[1]).type===e.type})||n.push(ik(e,E,C,t.large))}()}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}o.push({data:"context"===e.type?(0,td._)((0,b._)({},e),{icon:(0,x.jsx)(x.Fragment,{})}):e,commands:function(){return n}})}};return a({type:"context",label:"Your App"},{panes:O.get("output"),large:!0}),a({type:"group",key:"configured"},{panes:O.get("configured")}),L.length>0&&S&&o.push({data:{label:"Jump to existing tab",type:"context",icon:(0,x.jsx)(x.Fragment,{})},commands:function(){return L.map(function(e){var t=(0,z._)(e,2),n=t[0];return ik(t[1],function(){I({from:n,to:S})},C)})}}),a({type:"context",label:"Suggested"},{panes:O.get("suggested")}),a({type:"group",key:"Other tools"},{panes:O.get("rest")}),o.push({data:{type:"context",label:"Extensions",icon:(0,x.jsx)(x.Fragment,{})},commands:function(){return B.map(function(e){return ik(e,E,C)})}}),L.length>0&&o.push({data:{key:"existing-non-singleton-tools",type:"group"},commands:function(){return L.map(function(e){var t=(0,z._)(e,2);return ik((t[0],t[1]),E,C)})}}),o.push(R),o.push({data:{type:"context",label:"Files",icon:(0,x.jsx)(x.Fragment,{})},commands:function(){return[r,i]}}),{data:{type:"group",key:"root",description:"Search for tools & filesâ€¦"},commands:function(){return o}}},[k,D,A,T,R,O,B,L,S,I,E,C,V,M])}var iS=[{type:"deployments"},{type:"integrations"},{type:"neon"},{type:"objectStorage"},{type:"replitAuth"},{type:"securityScan"},{type:"envEditor"}];function ik(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r?24:void 0,o=n.getTitle(e),a=n.Icon({pane:e,size:i});return{match:(0,eb.matchToolPane)({pane:e,aliases:ew.paneAliases.get(e.type),iconSize:i}),data:{key:"extension"===e.type?"extension-".concat(e.data.installationId,"-").concat(e.data.path):void 0,type:"action",label:o,icon:a,run:function(){return t(e)}}}}function iC(e){var t=(0,ep.useRemovePane)(),n=(0,ep.useAgentLayout)(),r=(0,ek.useObservable)(n.isCollapsed),i=n.toggle;return(0,W.useMemo)(function(){return r?{match:ef.matchLabel,data:{type:"action",label:"Open Agent",icon:(0,x.jsx)(r2.default,{}),run:function(){e&&t(e),i(!0)}}}:null},[r,i,t,e])}var iT={nextTab:{id:"tabs.next",name:"Switch to next tab",default:(0,R._)({},ej.KeybindingsEnvironmentEnum.DesktopApp,(0,eU.defaultKeyCombo)({cmdOrCtrl:!0,shift:!0,key:"]"}))},previousTab:{id:"tabs.previous",name:"Switch to previous tab",default:(0,R._)({},ej.KeybindingsEnvironmentEnum.DesktopApp,(0,eU.defaultKeyCombo)({cmdOrCtrl:!0,shift:!0,key:"["}))},newTab:{id:"tabs.new",name:"New tab",description:"Opens a tab in the current active group",default:(0,R._)({},ej.KeybindingsEnvironmentEnum.DesktopApp,(0,eU.defaultKeyCombo)({cmdOrCtrl:!0,key:"t"}))},closeTab:{id:"tabs.close",name:"Close tab",description:"Close the current active tab",default:(0,R._)({},ej.KeybindingsEnvironmentEnum.DesktopApp,(0,eU.defaultKeyCombo)({cmdOrCtrl:!0,key:"w"}))},reopenClosedTab:{id:"tabs.reopenClosed",name:"Reopen closed tab",default:(0,R._)({},ej.KeybindingsEnvironmentEnum.DesktopApp,(0,eU.defaultKeyCombo)({cmdOrCtrl:!0,shift:!0,key:"t"}))},findFile:{id:"files.find",name:"Find file",default:(0,eU.defaultKeyCombo)({cmdOrCtrl:!0,key:"p"})},searchFileContents:{id:"files.searchContents",name:"Search file contents",default:rY.keyboardShortcut},run:{id:"repl.run",name:"Run Repl",default:(0,eU.defaultKeyCombo)({cmdOrCtrl:!0,key:"Enter"})},toggleInviteDialog:{id:"repl.multiplayers",name:"See multiplayers",default:(0,eU.defaultKeyCombo)({cmdOrCtrl:!0,key:"m"})},showShell:{id:"repl.showShell",name:"Show shell",default:(0,eU.defaultKeyCombo)({ctrl:!0,key:"`"}),description:"Opens or reveals a Shell in a tab"},showConsole:{id:"repl.showConsole",name:"Show console",description:"Opens or reveals the Console in a tab",default:void 0},showSettings:{id:"repl.showSettings",name:"Show settings",description:"Opens or reveals the Settings tab",default:(0,R._)({},ej.KeybindingsEnvironmentEnum.DesktopApp,(0,eU.defaultKeyCombo)({cmdOrCtrl:!0,key:","}))},saveAllFiles:{id:"repl.saveAllFiles",name:"Save all files",description:"Forces all changes to be flushed to disk",default:void 0},showGit:{id:"repl.showGit",name:"Show git",description:"Opens or reveals the Git tool in a tab",default:void 0},toggleFloatPaneGroup:{id:"paneGroup.toggleFloat",name:"Toggle float group",description:"Floats or un-floats the current active group",default:void 0},toggleMaximizePaneGroup:{id:"paneGroup.toggleMaximize",name:"Toggle maximize group",description:"Maximizes or restores the current active group",default:void 0},removePaneGroup:{id:"paneGroup.close",name:"Close group",description:"Closes all tabs in the current active group",default:void 0},removeOthersInPaneGroup:{id:"paneGroup.closeOthers",name:"Close other tabs in group",description:"Closes all tabs except the visible one in the current active group",default:void 0},insertPaneGroupUp:{id:"paneGroup.insertUp",name:"Insert group above",description:"Adds a new group above the current active group",default:void 0},insertPaneGroupRight:{id:"paneGroup.insertRight",name:"Insert group right",description:"Adds a new group to the right of the current active group",default:void 0},insertPaneGroupLeft:{id:"paneGroup.insertLeft",name:"Insert group left",description:"Adds a new group to the left of the current active group",default:void 0},insertPaneGroupDown:{id:"paneGroup.insertDown",name:"Insert group below",description:"Adds a new group below the current active group",default:void 0},moveTabUpGroup:{id:"tabs.move.groupUp",name:"Move tab into group above",description:"Moves the current active tab into the group above",default:void 0},moveTabRightGroup:{id:"tabs.move.groupRight",name:"Move tab into group right",description:"Moves the current active tab into the group to the right",default:void 0},moveTabLeftGroup:{id:"tabs.move.groupLeft",name:"Move tab into group left",description:"Moves the current active tab into the group to the left",default:void 0},moveTabDownGroup:{id:"tabs.move.groupDown",name:"Move tab into group below",description:"Moves the current active tab into the group below",default:void 0},moveFocusUp:{id:"paneGroup.focusUp",name:"Move focus to group above",description:"Move focus to the group above the current active group",default:void 0},moveFocusRight:{id:"paneGroup.focusRight",name:"Move focus to group right",description:"Move focus to the group to the right of the current active group",default:void 0},moveFocusLeft:{id:"paneGroup.focusLeft",name:"Move focus to group left",description:"Move focus to the group to the left of the current active group",default:void 0},moveFocusDown:{id:"paneGroup.focusDown",name:"Move focus to group below",description:"Move focus to the group below the current active group",default:void 0},webviewRefresh:{id:"webviewpane.reload",name:"Refresh preview",description:"Reload the preview pane",default:(0,eU.defaultKeyCombo)({alt:!0,key:"r"})},keepTab:{id:"tab.keep",name:"Keep tab",description:"Converts a preview tab to a persisted tab",default:void 0}},iI=e.i(464092),iP=Object.values(iT);let iE=(0,W.memo)(function(e){var t,n,r,i,o,a,s,l,u,c,d,p,f,h,m,v,g,y,b,w,_,j,S=e.isAdmin,k=e.isSubscribed,C=eB(),T=(0,ex.useGetRecentFiles)(),I=(0,tv.default)(),P=I.fs,E=I.container,A=(0,iI.useForkContext)(),D=A.fork,V=A.isForking,M=(0,r0.useRunInfo)(),F=M.isOffline,O=M.isWorkflowsLoading,L=M.isRunning,B=(0,r0.useOnToggleRun)(),U=(0,rJ.useShouldHideFileInWorkspace)(),N=(0,ep.useOpenFile)(),G=(0,ep.useNewTab)(),H=(0,ep.useCloseTab)(),q=(0,ep.useRelativeMoveTab)(),K=(0,ep.useReopenClosedTab)(),Y=(0,ep.useMoveFocus)(),X=(0,ep.useSwitchTab)(),ee=(0,ep.useCommitPane)(),et=(0,ep.useActivePaneId)(),eo=(0,ep.useActivePaneGroupId)(),ea=(0,ep.useToggleFloating)(),es=(0,ep.useMaximizedPane)().toggleMaximizePane,el=(0,ep.useRemovePaneGroup)(),ed=(0,ep.useRemoveOtherPanesInGroup)(),eh=(0,ep.useCancelQuickJump)(),eb=(0,ep.useSplitPane)(),ew=(0,eg.usePaneBindings)(et),e_=(0,e3.default)(),ej=(0,$.default)(),eS=(0,ep.usePanesCount)(),ek=(0,ep.useOpenTool)(),eC=(0,ti.default)(),eT=(0,rq.default)(),eI=(0,e8.useDevUrl)().url,eP=(0,te.default)().showNotice,eE=S||!1,eR=(0,J.useQueryParam)("debug","boolean"),eA=(0,rK.default)("vscode"),eD=eA.openEditor,eV=eA.onConfirmConfig,eM=eA.isConfigModalOpen,eO=eA.closeConfigModal,eL=(0,n0.default)(function(e){return(0,eu.track)(ec.events.PROJECT_RAN,{replId:e_,placement:e})},500);(0,eF.useCommandBinding)(function(){return[iT.saveAllFiles.id,function(){P.flush(void 0,nT.FlushSource.MANUAL_SAVE)}]},[P]),(0,eF.useCommandBinding)(function(){return[iT.newTab.id,function(){return G()}]},[G]),(0,eF.useCommandBinding)(function(){return[iT.nextTab.id,function(){return X("next")}]},[X]),(0,eF.useCommandBinding)(function(){return[iT.previousTab.id,function(){return X("previous")}]},[X]),(0,eF.useCommandBinding)(function(){return[iT.closeTab.id,function(){var e=H();return e||eS()>0}]},[H,eS]),(0,eF.useCommandBinding)(function(){return[iT.reopenClosedTab.id,function(){return K()}]},[K]),(0,eF.useCommandBinding)(function(){return[iT.moveTabUpGroup.id,function(){return q("above")}]},[q]),(0,eF.useCommandBinding)(function(){return[iT.moveTabRightGroup.id,function(){return q("rightOf")}]},[q]),(0,eF.useCommandBinding)(function(){return[iT.moveTabLeftGroup.id,function(){return q("leftOf")}]},[q]),(0,eF.useCommandBinding)(function(){return[iT.moveTabDownGroup.id,function(){return q("below")}]},[q]),(0,eF.useCommandBinding)(function(){return et?[iT.keepTab.id,function(){return ee(et)}]:void 0},[et,ee]),(0,eF.useCommandBinding)(function(){return et?[iT.insertPaneGroupUp.id,function(){return eb({paneId:et,placement:"above",autoFocus:!0})}]:void 0},[et]),(0,eF.useCommandBinding)(function(){return et?[iT.insertPaneGroupRight.id,function(){return eb({paneId:et,placement:"rightOf",autoFocus:!0})}]:void 0},[et]),(0,eF.useCommandBinding)(function(){return et?[iT.insertPaneGroupLeft.id,function(){return eb({paneId:et,placement:"leftOf",autoFocus:!0})}]:void 0},[et]),(0,eF.useCommandBinding)(function(){return et?[iT.insertPaneGroupDown.id,function(){return eb({paneId:et,placement:"below",autoFocus:!0})}]:void 0},[et]),(0,eF.useCommandBinding)(function(){return[eH.id,function(){return C()}]},[C]);var eU=rR(),eN=(0,Z.useIsInMobileWorkspace)();(0,eF.useCommandBinding)(function(){return[rD.id,function(){if(function(){var e=document.activeElement;if(!e)return!1;var t=e.tagName.toLowerCase();return"textarea"===t||("input"===t?["text","password","email","search","tel","url","number","date","datetime-local","month","time","week"].includes(e.type.toLowerCase()):!!e.isContentEditable||"true"===e.getAttribute("contenteditable"))}()||eN)return!1;eU()}]},[eU]);var eG=(0,eF.useKeyCombo)(iT.findFile.id);(0,eF.useCommandBinding)(function(){return[iT.findFile.id,function(){return C(r$.createFindOrCreateFileCommand({openFile:N,fs:P,shouldHideFile:U,getRecentFiles:T,keyboardShortcut:eG}))}]},[C]);var eW=ey({type:"files"});eq(r$.createFindOrCreateFileCommand({openFile:N,fs:P,shouldHideFile:U,getRecentFiles:T,getCurrentlyOpenFilePanesCommands:eW,keyboardShortcut:eG}));var eK=(0,eF.useKeyCombo)(iT.searchFileContents.id),e$=(0,ep.useOpenTool)(),eY=(0,W.useCallback)(function(e){(0,em.isFilePane)(e.pane)||(0,eu.track)(ec.events.TOOL_OPENED,{source:"Command Bar",tool:e.pane.type}),e$(e)},[e$]);(0,eF.useCommandBinding)(function(){return[iT.searchFileContents.id,function(){if((null==ew?void 0:ew.type)==="searchReplace"){null==(e=ew.focusSearchInput)||e.call(ew);return}(0,eu.track)(ec.events.SEARCH_PANE_USED,{action:"opened_via_shortcut"});var e,t,n=void 0;(null==ew?void 0:ew.type)==="codeEditor"&&(n=null==(t=ew.getCurrentSelectionText)?void 0:t.call(ew)),eY({pane:{type:"searchReplace",data:{initialQuery:n}}})}]},[ew,eY]),(0,eF.useCommandBinding)(function(){return et?[iT.toggleFloatPaneGroup.id,function(){return ea(et)}]:void 0},[et]),(0,eF.useCommandBinding)(function(){return et?[iT.toggleMaximizePaneGroup.id,function(){return es(et)}]:void 0},[et]),(0,eF.useCommandBinding)(function(){return eo?[iT.removePaneGroup.id,function(){el({paneGroupId:eo}),eh()}]:void 0},[eo]),(0,eF.useCommandBinding)(function(){return et?[iT.removeOthersInPaneGroup.id,function(){ed(et)}]:void 0},[et]),(0,eF.useCommandBinding)(function(){return[iT.moveFocusUp.id,function(){return Y("above")}]},[]),(0,eF.useCommandBinding)(function(){return[iT.moveFocusDown.id,function(){return Y("below")}]},[]),(0,eF.useCommandBinding)(function(){return[iT.moveFocusRight.id,function(){return Y("rightOf")}]},[]),(0,eF.useCommandBinding)(function(){return[iT.moveFocusLeft.id,function(){return Y("leftOf")}]},[]),eq((t=(0,ev.usePaneUIContext)(),(0,Q.default)(function(){return{data:{type:"context",label:"Open with Code Search",icon:(0,x.jsx)(rc.default,{}),key:"codeSearch"},commands:function(e){var n=e.searchQuery;if(!n)return[];var r={type:"searchReplace",data:{initialQuery:n}};return[{match:(0,ef.createFzfMatchLabel)({defaultScore:rd.commandDefaultScores.codeSearch,matchScoreMultiplier:rd.commandMatchScoreMultipliers.codeSearch,filterLowMatchScores:!1}),data:{type:"action",label:t.getTitle(r),icon:t.Icon({pane:r}),run:function(){ek({pane:r})}}}]}}},[t,ek]))),eq(iC()),eq(rY.createSearchFileContentsCommand({container:E,activeOnly:!0,keyboardShortcut:eK,openFile:N})),(0,eF.useCommandBinding)(function(){if(!F&&!O)return[iT.run.id,function(){B(rW.RunReason.KEYBOARD_SHORTCUT),eL("shortcut_cmd_enter")}]},[B]);var eQ=(0,eF.useKeyCombo)(iT.run.id);eq({match:ef.fzfMatchLabel,data:{type:"action",icon:(0,x.jsx)(n4.default,{}),label:"New window",keyboardShortcut:"Cmd-Shift-n",description:"Open a new window",run:function(){n7.desktopAppApi.openNewWindow()}}},{enabled:ej}),eq({match:ef.fzfMatchLabel,data:{type:"action",icon:(0,x.jsx)(n3.default,{}),label:"Run",description:"Run Repl",run:function(){B(rW.RunReason.KEYBOARD_SHORTCUT)},keyboardShortcut:eQ}},{enabled:!L}),eq({match:ef.fzfMatchLabel,data:{type:"action",icon:(0,x.jsx)(n6.default,{}),label:"Stop",description:"Stop Repl",run:function(){B(rW.RunReason.KEYBOARD_SHORTCUT)}}},{enabled:L}),eq((n=(0,ep.useSidebar)(),r=ig().isAvailable,i=(0,Z.useIsInMobileWorkspace)(),(0,W.useMemo)(function(){return r&&!i?{match:ef.matchLabel,data:{type:"action",label:"Inbox",description:"Review feedback from your app's users",icon:(0,x.jsx)(r3,{}),run:function(){n.toggleContent("inbox")}}}:null},[r,i,n]))),eq({match:ef.fzfMatchLabel,data:{type:"action",icon:(0,x.jsx)(n5.default,{}),label:"Kill 1",description:"Kill the Repl pid1 process if it's in a bad state (admin only)",run:function(){E.exec("kill","1")}}},{enabled:eE}),eq({match:ef.fzfMatchLabel,data:{type:"action",icon:(0,x.jsx)(n2.default,{}),label:"Open development URL",run:function(){if(!eI)throw Error("Expected dotdevUrl");window.open(eI,"_blank","noopener")}}}),eq({match:ef.fzfMatchLabel,data:{type:"action",icon:(0,x.jsx)(n9.default,{}),label:"Open in VS Code",description:"Connect to this Repl in VS Code via SSH",run:function(){(0,eu.track)(ec.events.WORKSPACE,{action:"open_in_vscode_clicked",source:"command_bar",editor:"vscode"}),eD()}}},{enabled:!!eC&&k}),eq({match:ef.fzfMatchLabel,data:{type:"action",icon:(0,x.jsx)(n1.default,{}),label:"Copy SSH Command",description:"Copy a shell command to connect to this Repl via SSH",run:function(){if(!eC)throw Error("Expected sshConfig");var e=eC.sshPort,t=eC.sshUser,n=eC.sshHostname,r="ssh -i ".concat(eT,"/.ssh/replit -p ").concat(e," ").concat(t,"@").concat(n);(0,eu.track)(ec.events.WORKSPACE,{action:"ssh_key_copied",source:"command_bar"}),(0,re.default)(r),eP("Copied SSH command")}}},{enabled:!!eC&&k}),eq((a=(o={description:"Jump to another Repl",onRun:function(e){window.location.href=e.url}}).description,s=o.onRun,l=(0,e7.default)(s),(0,Q.default)(function(){return{match:(0,ef.createFzfMatchLabel)({defaultScore:rd.commandDefaultScores.myRepls}),data:{type:"context",label:"My Apps",icon:(0,x.jsx)(rx.default,{}),description:a},commands:function(e){return(0,er._)(function(e){var t;return(0,ei._)(this,function(n){switch(n.label){case 0:var r;if(t=e.searchQuery,!e.active)return[2,[]];return[4,(r={query:t,count:50},(0,er._)(function(){var e;return(0,ei._)(this,function(t){switch(t.label){case 0:if(!e5.apolloClient)throw Error("Expected apolloClient");return[4,e5.apolloClient.query({query:rg,variables:r})];case 1:return[2,(null==(e=t.sent().data.currentUser)?void 0:e.search.repls.filter(function(e){return!!e.owner}))||[]]}})})())];case 1:return[2,n.sent().map(function(e){var n,r,i,o;return r=(n={repl:e,searchQuery:t,run:function(){return l.current(e)}}).repl,i=n.searchQuery,o=n.run,{match:function(){return{score:1,render:{height:44,content:(0,x.jsx)(rS,{repl:r,height:44,searchQuery:i})}}},data:{type:"action",label:r.title,icon:(0,x.jsx)(rw.default,{alt:r.title,size:16,iconUrl:r.iconUrl}),run:function(){return o(r)}}}})]}})}).apply(this,arguments)}}},[a,l]))),eq({match:(0,ef.createFzfMatchLabel)({defaultScore:rd.commandDefaultScores.fork}),data:{type:"action",label:"Remix",icon:(0,x.jsx)(n8.default,{}),description:"Remix App",run:function(){V||D()}}}),c=(u=rN.usePreferences.apply(void 0,(0,en._)(rz))).preferences,d=u.update,p=function(e){Object.keys(e).forEach(function(t){var n=e[t];(0,eu.track)(ec.events.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n,isCommandBar:!0})}),d(e)},h=(f=(0,nV.useTheme)()).setActiveTheme,m=f.theme,eq({match:(0,ef.createFzfMatchLabel)({defaultScore:rd.commandDefaultScores.settings,matchScoreMultiplier:rd.commandMatchScoreMultipliers.settings}),data:{type:"context",label:"Settings",description:"Change Replit Settings",icon:(0,x.jsx)(rB.default,{})},commands:function(e){var t=e.active,n=e.searchQuery;if(!t&&!n)return[];var r={match:(0,ef.createFzfMatchLabel)({defaultScore:rd.commandDefaultScores.settings,matchScoreMultiplier:rd.commandMatchScoreMultipliers.settings}),data:{type:"context",label:"Theme",icon:(0,x.jsx)(rL.default,{}),description:"Change Replit Theme"},commands:function(){return rG.officialThemes.map(function(e){return{match:(0,ef.createFzfMatchLabel)({defaultScore:rd.commandDefaultScores.settings,matchScoreMultiplier:rd.commandMatchScoreMultipliers.settings}),data:{type:"action",label:e.title,icon:m.id===e.id?(0,x.jsx)(rO.default,{}):(0,x.jsx)(rB.default,{opacity:0}),description:"Use "+e.title+" theme "+(m.id===e.id?" (current)":""),run:function(){h(e.id)}}}})}},i=Object.values(rU.userPreferences).filter(function(e){return -1!==rz.indexOf(e.editorPreferencesKey)}).map(function(e){return{match:(0,ef.createFzfMatchLabel)({defaultScore:rd.commandDefaultScores.settings,matchScoreMultiplier:rd.commandMatchScoreMultipliers.settings}),data:{type:"context",label:e.name,icon:(0,x.jsx)(rB.default,{}),description:e.description},commands:function(){return e.options.map(function(t){var n=c[e.editorPreferencesKey],r=!!e.editorPreferencesKey&&t.editorPreferencesValue===n;return{match:(0,ef.createFzfMatchLabel)({defaultScore:rd.commandDefaultScores.settings,matchScoreMultiplier:rd.commandMatchScoreMultipliers.settings}),data:{type:"action",label:t.title,icon:r?(0,x.jsx)(rO.default,{}):(0,x.jsx)(rB.default,{opacity:0}),description:t.description,run:function(){return(0,er._)(function(){return(0,ei._)(this,function(n){switch(n.label){case 0:if(!e.editorPreferencesKey)throw Error("editorPreferencesKey is not defined");return[4,p((0,R._)({},e.editorPreferencesKey,t.editorPreferencesValue))];case 1:return n.sent(),[2]}})})()}}}})}}});return(0,en._)(i).concat([r])}},{enabled:!0}),eq(rZ((0,W.useCallback)(function(e){eY({pane:{type:"developer",data:{tab:e}}})},[eY])));var eX=(v=(0,e3.default)(),g=(0,rr.useGlobalModal)().show,(0,W.useMemo)(function(){var e=[];return e.push({match:ef.matchLabel,data:{type:"action",label:"[Admin] Show Slack Agent Stack Connector Modal [DEPRECATED]",icon:(0,x.jsx)(rn.default,{}),run:function(){g("SlackConnectorSetupModalDeprecated",{replId:v})}}}),{match:ef.matchLabel,data:{icon:(0,x.jsx)(rt.default,{}),label:"Admin",type:"context",description:"Manage internal only settings"},commands:function(){return e},numCommands:e.length}},[g,v]));eq(eX,{enabled:eE&&eX.numCommands>0});var eZ=(y=(0,ra.useUploadPid2)(),b=(0,z._)((0,ra.usePid2UploadState)(),1)[0],w=(0,te.default)().showNotice,_=(0,rs.usePid2Callback)(function(e){return function(){return(0,er._)(function(){var t;return(0,ei._)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.healthCheck.ping.rpc({})];case 1:if((t=n.sent()).ok)return[2,{ok:!0,payload:t.payload}];return[2,{ok:!1}];case 2:return n.sent(),[2,{ok:!1}];case 3:return[2]}})})()}}),j=(0,rs.usePid2Callback)(function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return(0,er._)(function(){var r,i,o;return(0,ei._)(this,function(a){switch(a.label){case 0:r=0,a.label=1;case 1:if(!(r<t))return[3,8];i=rl[r%rl.length],w("".concat(i," Pinging PID2... (attempt ").concat(r+1,"/").concat(t,")")),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,e.healthCheck.ping.rpc({})];case 3:if((o=a.sent()).ok)return w("âœ… PID2 is ready! ".concat(JSON.stringify(o.payload))),[2,!0];return[3,5];case 4:return a.sent(),[3,5];case 5:if(!(r<t-1))return[3,7];return[4,ru(n)];case 6:a.sent(),a.label=7;case 7:return r++,[3,1];case 8:return w("âŒ PID2 not responding after ".concat(t," attempts")),[2,!1]}})})()}}),(0,W.useMemo)(function(){var e=[];return e.push({match:ef.matchLabel,data:{type:"action",icon:(0,x.jsx)(ri.default,{}),label:"Ping PID2",description:"Check if PID2 is healthy and responding",run:function(){return(0,er._)(function(){var e;return(0,ei._)(this,function(t){switch(t.label){case 0:if(!_)return w("PID2 client not available"),[2];return[4,_()];case 1:return(null==(e=t.sent())?void 0:e.ok)?w("âœ… PID2 is healthy: ".concat(JSON.stringify(e.payload))):w("âŒ PID2 ping failed"),[2]}})})()}}}),e.push({match:ef.matchLabel,data:{type:"action",icon:(0,x.jsx)(ro.default,{}),label:b===ra.Pid2UploadState.IDLE?"Upload PID2 bundle":"Upload PID2 bundle (".concat(b.toLowerCase(),")"),description:b===ra.Pid2UploadState.IDLE?"Upload and install the latest PID2 bundle to the container":"Current status: ".concat(b.toLowerCase()),run:function(){return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:if(b!==ra.Pid2UploadState.IDLE&&b!==ra.Pid2UploadState.ERROR)return[3,5];return[4,y()];case 1:return e.sent(),[4,ru(2e3)];case 2:if(e.sent(),!j)return[3,4];return[4,j(5,1e3)];case 3:e.sent(),e.label=4;case 4:return[3,6];case 5:w("PID2 upload already in progress: ".concat(b)),e.label=6;case 6:return[2]}})})()}}}),{match:ef.matchLabel,data:{icon:(0,x.jsx)(rt.default,{}),label:"PID2",type:"context",description:"PID2 debug commands"},commands:function(){return e},numCommands:e.length}},[y,b,w,_,j]));return eq(eZ,{enabled:(eE||eR)&&eZ.numCommands>0}),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(ez.Modal,{isOpen:eM,onRequestClose:eO,centered:!0,children:(0,x.jsx)(rH.default,{onConfirm:eV})})})});var iR=e.i(921211),iA=e.i(672963),iD=e.i(670413),iV=e.i(337761),iM=e.i(323049),iF=e.i(682205),iO=e.i(138716),iL=e.i(597853),iB=e.i(967629),iU=(0,iB.keyframes)({"0%":{transform:"translate(0, 0)"},"8.33%, 25%":{transform:"translate(-50%, 0)"},"33.33%, 50%":{transform:"translate(-50%, -50%)"},"58.33%, 75%":{transform:"translate(0, -50%)"},"83.33%, 100%":{transform:"translate(0, 0)"}}),iN=(0,eN.cssRecord)({root:[eG.rcss.color.foregroundDimmest,eG.rcss.position.relative,eG.rcss.width("100%"),eG.rcss.height("100%"),{overflow:"hidden"}],arrows:[eG.rcss.position.absolute,eG.rcss.top(0),eG.rcss.left(0),eG.rcss.flex.row,eG.rcss.flex.wrap,eG.rcss.width("200%"),eG.rcss.height("200%"),{animationName:iU,animationDirection:"normal",animationTimingFunction:"ease-out",animationIterationCount:"infinite"}],arrow:[eG.rcss.width("50%"),eG.rcss.height("50%"),eG.rcss.center]});function iG(e){var t=e.delay,n=e.duration;return(0,x.jsx)(F.View,{css:iN.root,children:(0,x.jsxs)(F.View,{css:iN.arrows,style:{animationDelay:t?t+"ms":void 0,animationDuration:n?n+"ms":"8000ms"},children:[(0,x.jsx)(F.View,{css:iN.arrow,children:(0,x.jsx)(iF.default,{size:12})}),(0,x.jsx)(F.View,{css:iN.arrow,children:(0,x.jsx)(iO.default,{size:12})}),(0,x.jsx)(F.View,{css:iN.arrow,children:(0,x.jsx)(rO.default,{size:12})}),(0,x.jsx)(F.View,{css:iN.arrow,children:(0,x.jsx)(iL.default,{size:12})})]})})}var iz=e.i(886513),iW=e.i(602686),iH=(0,eN.cssRecord)({root:[eG.rcss.position.relative],circle:[eG.rcss.top(-6),eG.rcss.right(-6),eG.rcss.minWidth(12),eG.rcss.borderRadius(8),eG.rcss.position.absolute,eG.rcss.backgroundColor.backgroundHighest,eG.rcss.shadow(3),{textAlign:"center",fontSize:10,border:"1px solid",borderColor:D.tokens.outlineDefault}],count:[{textAlign:"center",fontSize:10}]});function iq(e){var t=e.count,n=(0,iz._)(e,["count"]);return(0,x.jsxs)(F.View,{css:iH.root,children:[(0,x.jsx)(iW.default,(0,b._)({},n)),(0,x.jsx)(F.View,{css:[iH.circle,iH.count],children:t})]})}function iK(){return(0,x.jsxs)(F.View,{css:iH.root,children:[(0,x.jsx)(iW.default,{}),(0,x.jsx)(F.View,{css:iH.circle,children:(0,x.jsx)(rO.default,{size:6})})]})}function i$(e){var t=e.paneId,n=e.paneGroupId,r=(0,ev.usePaneUIContext)(),i=(0,ep.usePane)(t),o=(0,ep.useRemovePane)(),a=(0,ep.useRemovePanesToRightInGroup)(),s=(0,ep.useRemoveOtherPanesInGroup)(),l=(0,ep.usePaneGroupIndex)({paneId:t}),u=(0,ep.usePaneGroupCount)({paneGroupId:n});return(0,Q.default)(function(){var e=r.getTitle(i),n=[{match:ef.matchLabel,data:{type:"action",label:"Close "+e,icon:(0,x.jsx)(iW.default,{}),run:function(){o(t)}}}];return u&&u>1&&(null!==l&&l<u-1&&n.push({match:ef.matchLabel,data:{type:"action",label:"Close to the right",icon:(0,x.jsx)(iK,{}),run:function(){a(t)}}}),n.push({match:ef.matchLabel,data:{type:"action",label:"Close all other tabs",icon:(0,x.jsx)(iq,{count:u-1}),run:function(){s(t)}}})),n},[r,i,u,l,o,t,a,s])}function iY(){var e=(0,ep.useGetPane)(),t=(0,ep.useCommitPane)();return(0,W.useCallback)(function(n){var r=e(n),i=r.isCommitted,o=r.pane;return!i&&(0,em.isFilePane)(o)?{match:ef.matchLabel,data:{type:"action",label:"Keep open",icon:(0,x.jsx)(nN.default,{}),run:function(){return t(n)}}}:null},[e,t])}var iQ=e.i(15053),iX=e.i(558666),iZ=e.i(800908);function iJ(e){return(0,x.jsx)(r4.default,(0,td._)((0,b._)({},e),{children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M18.667 1.25c1.328 0 2.458.148 3.196.887.739.738.887 1.868.887 3.196v6c0 1.042-.164 1.975-.803 2.614-.552.553-1.325.749-2.197.792v2.705c0 1.375-.22 2.531-.997 3.309-.778.778-1.934.997-3.309.997H6.556c-1.375 0-2.531-.22-3.309-.997-.778-.778-.997-1.934-.997-3.309V8.556c0-1.375.22-2.53.997-3.309.778-.778 1.934-.997 3.309-.997H9.26c.043-.872.24-1.645.793-2.197.639-.64 1.572-.803 2.614-.803h6ZM6.556 5.75c-1.292 0-1.914.225-2.247.559-.334.333-.559.955-.559 2.247v8.888c0 1.292.225 1.914.559 2.247.333.334.955.559 2.247.559h8.888c1.292 0 1.914-.226 2.247-.559.334-.333.559-.955.559-2.247V14.75h-5.583c-1.042 0-1.975-.164-2.614-.803-.64-.639-.803-1.572-.803-2.614V5.75H6.556Zm9.444-2a.75.75 0 0 0-.75.75v2.75H12.5a.75.75 0 0 0 0 1.5h2.75v2.75a.75.75 0 0 0 1.5 0V8.75h2.75a.75.75 0 0 0 0-1.5h-2.75V4.5a.75.75 0 0 0-.75-.75Z",clipRule:"evenodd"})}))}var i0=e.i(886753),i1=e.i(761732),i2=e.i(943172),i4=new Map([["left",{label:"Move Left",icon:(0,x.jsx)(iO.default,{})}],["right",{label:"Move Right",icon:(0,x.jsx)(rO.default,{})}],["up",{label:"Move Up",icon:(0,x.jsx)(iL.default,{})}],["down",{label:"Move Down",icon:(0,x.jsx)(iF.default,{})}]]),i3=e.i(822142),i5=new Map([["leftOf",{label:"Move Left",icon:(0,x.jsx)(iO.default,{})}],["rightOf",{label:"Move Right",icon:(0,x.jsx)(rO.default,{})}],["above",{label:"Move Up",icon:(0,x.jsx)(iL.default,{})}],["below",{label:"Move Down",icon:(0,x.jsx)(iF.default,{})}]]);function i8(e){return(0,x.jsx)(r4.default,(0,td._)((0,b._)({},e),{children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M16 2.25c1.995 0 3.542.231 4.53 1.22.989.988 1.22 2.535 1.22 4.53v9c0 1.541-.247 2.808-1.095 3.655-.847.848-2.114 1.095-3.655 1.095H7c-1.542 0-2.808-.247-3.655-1.095C2.497 19.808 2.25 18.541 2.25 17V7c0-1.542.247-2.808 1.095-3.655C4.192 2.497 5.458 2.25 7 2.25h9Zm-9 1.5c-1.458 0-2.192.253-2.595.655C4.003 4.808 3.75 5.542 3.75 7v10c0 1.459.253 2.192.655 2.595.403.402 1.137.655 2.595.655h4.25V3.75H7Zm5.75 16.5H17c1.459 0 2.192-.253 2.595-.655.402-.403.655-1.136.655-2.595V8c0-2.005-.269-2.958-.78-3.47-.512-.511-1.465-.78-3.47-.78h-3.25v16.5Z",clipRule:"evenodd"})}))}var i6=e.i(122129),i9=e.i(596608),i7=e.i(834903),oe=e.i(67647),ot=new Map([["leftOf",{commandId:iT.insertPaneGroupUp.id,label:"Insert Left",icon:(0,x.jsx)(i9.default,{})}],["rightOf",{commandId:iT.insertPaneGroupRight.id,label:"Insert Right",icon:(0,x.jsx)(i7.default,{})}],["above",{commandId:iT.insertPaneGroupLeft.id,label:"Insert Up",icon:(0,x.jsx)(oe.default,{})}],["below",{commandId:iT.insertPaneGroupDown.id,label:"Insert Down",icon:(0,x.jsx)(i6.default,{})}]]);function on(e){var t,n,r,i,o,a,s,l,u,c,d,p,f,h,m,v,g,y,w,_,j,S,k,C,T,I,P,E,A,D,V,M,F,O,L,B,U=e.paneGroupId,N=e.paneId,G=function(e){var t,n,r=e.paneId,i=e.paneGroupId,o=(0,ep.useHeaderView)(i),a=(0,i1.default)(o.isMaximized),s=(0,i1.default)(o.isFloating),l=!a&&!s,u=(t=(0,eF.useKeyBindings)(),n=(0,ep.useSplitPane)(),(0,Q.default)(function(){return(0,en._)(ot.entries()).map(function(e){var i,o,a=(0,z._)(e,2),s=a[0],l=a[1],u=l.commandId,c=l.label,d=l.icon;return{match:ef.matchLabel,data:{label:c,icon:d,type:"action",keyboardShortcut:null!=(o=null==(i=t.get(u))?void 0:i.shortcut)?o:void 0,run:function(){n({placement:s,paneId:r,autoFocus:!0}),(0,eu.track)(ec.events.WORKSPACE,{action:"split_used",placement:s})}}}})},[t,n,r]));return(0,Q.default)(function(){return l?[{match:ef.matchLabel,data:{type:"context",label:"Add pane",icon:(0,x.jsx)(i8,{})},commands:function(e){var t=e.active,n=e.searchQuery;return t||n?u:[]}}]:[]},[l,u])}({paneId:N,paneGroupId:U}),W=(t=(0,ep.usePaneView)(N),n=(0,ep.useIsMaximized)(),r=(0,i1.default)(t.isFloating),i=!n&&!r,o=(0,ep.useRelativeMoveTab)(),(0,Q.default)(function(){var e=(0,en._)(i5.entries()).map(function(e){var t=(0,z._)(e,2),n=t[0],r=t[1],i=r.label,a=r.icon;return{match:ef.matchLabel,data:{label:i,icon:a,type:"action",run:function(){o(n)}}}});return i?[{match:ef.matchLabel,data:{type:"context",label:"Move tab",icon:(0,x.jsx)(i3.default,{})},commands:function(t){var n=t.active,r=t.searchQuery;return n||r?e:[]}}]:[]},[i,o])),H=(a=(0,ep.useHeaderView)(U),s=(0,i1.default)(a.isMaximized),l=(0,i1.default)(a.isFloating),u=!s&&!l,c=(0,ep.useMovePaneGroup)(),(0,Q.default)(function(){var e=(0,en._)(i4.entries()).map(function(e){var t=(0,z._)(e,2),n=t[0],r=t[1],i=r.label,o=r.icon;return{match:ef.matchLabel,data:{label:i,icon:o,type:"action",run:function(){c({direction:n})}}}});return u?[{match:ef.matchLabel,data:{type:"context",label:"Move group",icon:(0,x.jsx)(i2.default,{})},commands:function(t){var n=t.active,r=t.searchQuery;return n||r?e:[]}}]:[]},[u,c])),q=(p=(d=(0,ep.useMaximizedPane)()).maximizePaneGroup,f=d.restoreMaximizedPaneGroup,h=(0,ep.useHeaderView)(U),m=(0,i1.default)(h.isMaximized),v=(0,ep.useIsInPopup)(),g=(0,eF.useKeyCombo)(iT.toggleMaximizePaneGroup.id),(0,Q.default)(function(){return m?v?[]:[{match:ef.matchLabel,data:{type:"action",label:"Restore",icon:(0,x.jsx)(iZ.default,{}),run:function(){return f()},keyboardShortcut:g}}]:[{match:ef.matchLabel,data:{type:"action",label:"Maximize",icon:(0,x.jsx)(iX.default,{}),run:function(){return p({paneGroupId:U})},keyboardShortcut:g}}]},[m,g,v,f,p,U])),K=(y=(0,ep.useRemovePaneGroup)(),w=(0,ep.useCancelQuickJump)(),_=(0,ep.useIsInPopup)(),j=(0,eF.useKeyCombo)(iT.removePaneGroup.id),(0,Q.default)(function(){return _?[]:[{match:ef.matchLabel,data:{type:"action",label:"Close",icon:(0,x.jsx)(iW.default,{}),run:function(){w(),y({paneGroupId:U})},keyboardShortcut:j}}]},[w,y,_,j,U])),$=(k=(S={paneId:N,paneGroupId:U}).paneId,C=S.paneGroupId,T=(0,ep.useToggleFloating)(),I=(0,ep.useHeaderView)(C),P=(0,i1.default)(I.isMaximized),E=(0,i1.default)(I.isFloating),A=(0,eF.useKeyCombo)(iT.toggleFloatPaneGroup.id),(0,Q.default)(function(){return P?[]:[{match:ef.matchLabel,data:{type:"action",label:E?"Unfloat":"Float",icon:E?(0,x.jsx)(i0.default,{}):(0,x.jsx)(n4.default,{}),keyboardShortcut:A,run:function(){T(k)}}}]},[k,T,A,E,P])),Y=(D={paneId:N,paneGroupId:U},V=(0,ep.useHeaderView)(D.paneGroupId),M=(0,ep.usePaneView)(D.paneId),F=(0,ep.usePaneGroup)(D.paneGroupId),O=(0,ep.useGetPanes)(),L=(0,ep.useStorePopupLayoutState)(),B=(0,i1.default)(V.isMaximized),(0,Q.default)(function(){return B?[]:[{match:ef.matchLabel,data:{type:"action",label:"New window",icon:(0,x.jsx)(iJ,{}),run:function(){var e=(0,iQ.v4)(),t=O().filter(function(e){var t=(0,z._)(e,1)[0];return F.panes.current.includes(t)});L({popupId:e,state:{type:"saved",layout:{floating:[],tiling:{id:(0,iQ.v4)(),type:"paneGroup",percent:100,activeIndex:F.activeIndex.current,panes:F.panes.current}},data:t.reduce(function(e,t){var n=(0,z._)(t,2),r=n[0],i=n[1];return(0,td._)((0,b._)({},e),(0,R._)({},r,i))},{})}}),window.open("".concat(window.location.origin+window.location.pathname,"?popupId=").concat(e),"_blank","popup=1,height=".concat(M.size.current.height,"px,width=").concat(M.size.current.width,"px")),(0,eu.track)(ec.events.WORKSPACE,{action:"workspace_popout_opened",console:t.some(function(e){var t=(0,z._)(e,2);return"runnerOutput"===(t[0],t[1]).type}),editor:t.some(function(e){var t=(0,z._)(e,2);return"codeEditor"===(t[0],t[1]).type}),shell:t.some(function(e){var t=(0,z._)(e,2);return"shell"===(t[0],t[1]).type}),paneData:t})}}}]},[B,F.activeIndex,F.panes,O,L,M.size]));return(0,Q.default)(function(){return[{data:{type:"group",key:"pane-group"},commands:function(){return(0,en._)(G).concat((0,en._)(W),(0,en._)(H),(0,en._)(q),(0,en._)($),(0,en._)(Y),(0,en._)(K))}}]},[G,W,H,q,$,Y,K])}var or=e.i(546284),oi=e.i(429662),oo=e.i(605469);function oa(e){var t,n,r,i,o,a,s,l,u=e.paneId,c=(t=(0,ev.usePaneUIContext)(),n=(0,e_.useGetToolPanes)(),r=(0,ep.useChangePane)(),(0,W.useCallback)(function(){return{data:{type:"context",label:eO.toolsCommandLabel,icon:(0,x.jsx)(el.default,{})},commands:function(){return n().map(function(e){return{match:ef.matchLabel,data:{type:"action",label:t.getTitle(e),icon:t.Icon({pane:e}),run:function(){(0,eu.track)(ec.events.TOOL_OPENED,{source:"Tab Menu",tool:e.type}),r({paneId:u,pane:e})}}}})}}},[n,t,r,u])),d=(i=(0,ex.useGetRecentFiles)(),o=(0,ex.useGetOpenFiles)(),a=(0,ep.useChangePane)(),(0,W.useCallback)(function(){var e=o(),t=i().filter(function(t){return!e.includes(t)});return{data:{type:"context",label:"Recent",icon:(0,x.jsx)(oi.default,{})},commands:function(e){var n=e.searchQuery;return(0,r$.createFileCommands)({paths:t,searchQuery:n,run:function(e){a({paneId:u,pane:{type:(0,em.getPaneTypeForFile)({path:e}),data:{path:e}}})}})}}},[i,a,u,o])),p=(s=(0,tv.default)().fs,l=(0,ep.useChangePane)(),(0,Q.default)(function(){return{match:ef.matchLabel,data:{type:"context",label:"Files",icon:(0,x.jsx)(nN.default,{})},commands:function(e){return(0,er._)(function(e){var t,n,r;return(0,ei._)(this,function(i){switch(i.label){case 0:if(t=e.searchQuery,n=e.active,!t&&!n)return[2,[]];return[4,s.listFiles()];case 1:if((r=i.sent()).error)return[2,[]];if(!r.files)throw Error("Expected files");return[2,(0,r$.createFileCommands)({paths:r.files,searchQuery:t,run:function(e){l({paneId:u,pane:{type:(0,em.getPaneTypeForFile)({path:e}),data:{path:e}}})}})]}})}).apply(this,arguments)}}},[s,l,u]));return(0,Q.default)(function(){return{match:ef.matchLabel,data:{type:"context",label:"Change tab",icon:(0,x.jsx)(oo.default,{})},commands:function(e){var t=e.searchQuery,n=e.active;return t||n?[d(),p,c()]:[]}}},[d,c,p])}var os=(0,iB.css)(eG.rcss.center,{fontSize:D.tokens.fontSizeSmall,border:"1px solid",borderColor:D.tokens.outlineDefault,width:20,height:20,marginTop:-2,marginLeft:-2},eG.rcss.borderRadius(8));function ol(e){return(0,x.jsx)(F.View,{css:os,children:(0,x.jsx)(F.View,{css:{lineHeight:1},children:e.count})})}var ou=(0,eo.atom)([]);function oc(e,t){var n=t.run,r=t.enabled,i=void 0===r||r,o=(0,ea.useSetAtom)(ou);(0,W.useEffect)(function(){if(i){var t=(Array.isArray(e)?e:[e]).map(function(e){return{shortcut:e,run:n}});return o(function(e){return(0,en._)(e).concat((0,en._)(t))}),function(){o(function(e){return e.filter(function(e){return!t.includes(e)})})}}},[e,n,o,i])}function od(){var e=(0,ea.useAtomValue)(ou);return(0,W.useEffect)(function(){var t=function(t){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s,l=o.value,u=l.shortcut,c=l.run;!!u.cmdOrCtrlKey==!!(0,iD.getCmdOrCtrl)(t)&&!!u.altKey==!!t.altKey&&!!u.shiftKey==!!t.shiftKey&&(null==(s=u.key)?void 0:s.toLowerCase())===t.key.toLowerCase()&&(t.preventDefault(),c(u))}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}},[e]),null}var op=e.i(877249),of=(0,eN.cssRecord)({overlay:[eG.rcss.position.absolute,eG.rcss.overflow("hidden"),eG.rcss.zIndex(iM.zIndexLevels.overlay)],surface:[eG.rcss.position.relative,eG.rcss.borderRadius(8),eG.rcss.flex.shrink(1),{maxHeight:"100%",maxWidth:"100%",border:"1px solid",borderColor:D.tokens.outlineDefault,opacity:0},eG.rcss.shadow(3)],innerSurface:[eG.rcss.borderRadius(8)]}),oh=(0,eN.cssRecord)({root:[{borderTop:"1px solid",borderColor:D.tokens.outlineDimmer}],row:[eG.rcss.rowWithGap(2),eG.rcss.align.center,eG.rcss.justify.spaceBetween]});function om(){var e=(0,eU.useCmdOrCtrl)();return(0,x.jsxs)(F.View,{css:oh.root,p:8,gap:8,children:[(0,x.jsxs)(F.View,{css:oh.row,children:[(0,x.jsx)(eA.Text,{color:"dimmest",variant:"small",multiline:!1,children:"Move focus"}),(0,x.jsxs)(F.View,{row:!0,gap:4,children:[(0,x.jsx)(rT.KeyComboBlocks,{keyCombo:"".concat(e),small:!0}),(0,x.jsx)(rT.KeyBlock,{text:(0,x.jsx)(iG,{duration:6e3,delay:6e3})})]})]}),(0,x.jsxs)(F.View,{css:oh.row,children:[(0,x.jsx)(eA.Text,{color:"dimmest",variant:"small",multiline:!1,children:"Move pane"}),(0,x.jsxs)(F.View,{row:!0,gap:4,children:[(0,x.jsx)(rT.KeyComboBlocks,{keyCombo:"".concat(e,"Shift-"),small:!0}),(0,x.jsx)(rT.KeyBlock,{text:(0,x.jsx)(iG,{duration:6e3,delay:1500})})]})]})]})}var ov=(0,W.memo)(function(){var e=function(){var e=(0,ep.useIsMaximized)(),t=(0,ep.useQuickJumpFocusRect)();if(t){var n={width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")},r=n.width,i=n.height,o=n.transform,a={border:"1px solid",borderColor:D.tokens.accentPrimaryStronger,borderRadius:D.tokens.borderRadius6,boxShadow:D.tokens.shadow3,transitionProperty:"transform, height, width",transitionDuration:op.TRANSITIONS.duration,transitionTimingFunction:op.TRANSITIONS.timingFunction};return(0,b._)({width:r,height:i,transform:o},e?void 0:a)}}(),t=(0,ep.useCancelQuickJump)(),n=(0,iA.default)(t,[]);return(0,W.useEffect)(function(){var e=setTimeout(function(){(0,iV.styleSet)(n,"opacity","1")});return function(){clearTimeout(e)}},[n]),(0,x.jsx)(iR.FocusScope,{restoreFocus:!0,autoFocus:!0,contain:!0,children:(0,x.jsx)(F.View,{style:e,css:of.overlay,p:16,align:"end",children:(0,x.jsx)(V.ShadesSurface,{innerRef:n,css:of.surface,children:(0,x.jsx)(V.ShadesSurface,{css:of.innerSurface,grow:!0,shrink:!0,elevate:"2x",children:(0,x.jsx)(ob,{})})})})})}),og={ArrowUp:"above",ArrowDown:"below",ArrowRight:"rightOf",ArrowLeft:"leftOf"},ox={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left"},oy=Object.keys(og),ob=(0,W.memo)(function(){var e=(0,ep.useMoveFocus)(),t=(0,ep.useMovePaneGroup)(),n=(0,ep.useQuickJumpTo)(),r=(0,ep.useIsMaximized)();oc({key:"Escape"},{run:function(){n()}}),oc(oy.map(function(e){return{key:e,cmdOrCtrlKey:!0}}),{run:function(t){e(og[t.key])},enabled:!r}),oc(oy.map(function(e){return{key:e,cmdOrCtrlKey:!0,shiftKey:!0}}),{run:function(e){t({direction:ox[e.key]})},enabled:!r});var i=(0,ep.useQuickJumpMenuState)();return i&&"sidebar"!==i.target?(0,x.jsx)(ow,{paneGroupId:i.paneGroupId,paneId:i.paneId}):null});function ow(e){var t,n,r,i,o,a,s,l,u,c,d,p,f,h,m,v,g,y,b,w,_,j=(0,ep.useIsMaximized)(),S=(0,ep.useCancelQuickJump)(),k=(0,ep.useQuickJumpTo)(),C=(t=e.paneGroupId,i=(r={paneId:n=e.paneId,paneGroupId:t}).paneId,o=r.paneGroupId,a=(0,ev.usePaneUIContext)(),s=(0,ep.usePane)(i),l=(0,eg.usePaneBindings)(i),u=iY(),c=i$({paneId:i,paneGroupId:o}),d=(0,Q.default)(function(){var e=a.getTitle(s),t=function(e){return!!e&&(void 0===e?"undefined":(0,ty._)(e))==="object"&&"data"in e},n=[{data:{type:"group",key:"pane-actions"},commands:function(){var e,n;return(null!=(n=null==l||null==(e=l.commands)?void 0:e.flatMap(function(e){return e.commands}))?n:[]).filter(t)}},{data:{type:"group",key:"pane-close"},commands:function(){return[u(i)].concat((0,en._)(c)).filter(t)}}];return{match:ef.matchLabel,data:{type:"context",label:e,icon:(0,x.jsx)(a.Icon,{pane:s})},commands:function(e){var t=e.active,r=e.searchQuery;return t||r?n:[]}}},[s,l,a,i,c,u]),f=(p={paneId:n,paneGroupId:t}).paneGroupId,h=p.paneId,m=(0,ep.usePaneGroups)(),v=(0,ev.usePaneUIContext)(),g=(0,ep.useRevealPane)(),y=(0,ep.useInsertTab)(),b=oa({paneId:h}),w=(0,Q.default)(function(){var e=m.tiling,t=m.floating,n=e.reduce(function(e,t){return e+t.panes.length},0)+t.reduce(function(e,t){return e+t.panes.length},0),r={match:ef.matchLabel,data:{type:"action",label:"New tab",icon:(0,x.jsx)(eJ.default,{}),run:function(){y({paneGroupId:f,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}}};return n?[b,{match:ef.matchLabel,data:{type:"context",label:(0,or.default)("Tab",n),icon:(0,x.jsx)(ol,{count:n})},commands:function(n){var i=n.active,o=n.searchQuery;if(!(i||o))return[];var a=(0,en._)(e).concat((0,en._)(t)).map(function(e,t){return{data:{type:"group",key:"paneGroups"+t},commands:function(){return e.panes.map(function(e){var t=(0,z._)(e,2),n=t[0],r=t[1];return{match:ef.matchLabel,data:{type:"action",label:v.getTitle(r),icon:(0,x.jsx)(v.Icon,{pane:r}),run:function(){g({paneId:n,activate:!0})}}}})}}});return a.unshift(r),a}}]:[b,r]},[m,v,g,y,f,b]),_=on({paneGroupId:t,paneId:n}),(0,Q.default)(function(){return{data:{type:"group",key:"root",description:"Search"},commands:function(){return[d].concat((0,en._)(w),(0,en._)(_))}}},[d,w,_]));return(0,x.jsx)(eW.CommandBar,{iconBreadcrumbs:!0,command:C,onAction:function(){return S()},onKeyDown:function(e,t){var n=t.inputValue,r=t.hasHighlightedItem;if("Enter"===e.key&&!n&&!r){e.preventDefault(),k();return}(0,iD.getCmdOrCtrl)(e)&&e.preventDefault()},footer:j?null:(0,x.jsx)(om,{}),compact:!0})}var o_={id:"paneMenu.toggle",name:"Toggle pane context menu",default:(0,eU.defaultKeyCombo)({cmdOrCtrl:!0,key:"j"})};function oj(){var e=(0,ep.useToggleQuickJump)(),t=(0,ep.useIsQuickJumpActive)();return((0,eF.useCommandBinding)(function(){return[o_.id,function(){return e()}]},[e]),t)?(0,x.jsx)(ov,{}):null}var oS={id:"sidebar.toggle",name:"Toggle sidebar",description:"Opens or closes the sidebar",default:(0,eU.defaultKeyCombo)({cmdOrCtrl:!0,shift:!0,key:"b"})},ok=e.i(971465),oC=e.i(933101),oT=e.i(159667),oI=e.i(759025),oP=e.i(782370),oE=e.i(128068),oR=e.i(682986),oA=e.i(63762),oD=e.i(200119);function oV(e){var t=e.isInLayout,n=(0,iz._)(e,["isInLayout"]),r=(0,ek.useObservable)((0,oD.useAgentIsWorking)()),i=(0,ek.useObservable)((0,oA.useAgentIsWaitingOnUserInput)()),o=(0,z._)((0,W.useState)(!1),2),a=o[0],s=o[1];(0,W.useEffect)(function(){if(!i||r||t)return void s(!1);var e=setTimeout(function(){return s(!a)},a?1e3:5e3);return function(){clearTimeout(e)}},[a,i,r,t]);var l=!t&&r||a;return(0,x.jsx)(oR.AgentAvatar,(0,b._)({loading:l},n))}var oM=e.i(136540),oF=e.i(918218),oO={id:"agent.toggle",name:"Toggle Agent",description:"Opens or closes the Agent",default:(0,eU.defaultKeyCombo)({cmdOrCtrl:!0,shift:!0,key:"i"})};function oL(){var e,t=(0,ep.useAgentLayout)(),n=(0,ek.useObservable)(t.displayState),r=(0,ek.useObservable)(t.agentFiletreeOrder),i=(0,oE.useObservableRef)(t.isCollapsed),o=(0,eF.useKeyCombo)(oO.id),a=t.toggle;return(0,eF.useCommandBinding)(function(){return[oO.id,function(){return a(!!i.current)}]},[a,i]),(0,x.jsx)(F.View,{clsx:[oF.default.root,(e={},(0,R._)(e,oF.default.show,"collapsed"===n),(0,R._)(e,oF.default.right,"filetree-agent"===r),e)],children:(0,x.jsx)(oM.IconButton,{tooltipContents:o?(0,x.jsx)(rT.KeyComboBlocks,{fontSize:10,keyCombo:o}):null,alt:"Expand Agent",onClick:function(){t.toggle(!0)},children:(0,x.jsx)(oV,{size:16,isInLayout:!1})})})}var oB=[oO,ok.switchAgentModeCommand,oS,eH,o_,rD].concat((0,en._)(iP),(0,en._)(nJ.editorCommands),(0,en._)(oT.gitCommands),[oP.clearOutputsHistoryCommand,oC.generateOrModifyWithAICommand,oI.generateWithAIInShellCommand]),oU=e.i(202266);function oN(e){var t=(0,oU.useSaveKeybindings)();return(0,x.jsx)(eM.KeybindingsProvider,{commands:oB,onChange:t,keybindings:e.keybindings,children:e.children})}var oG=e.i(574831),oz=e.i(135211);function oW(e){var t=e.children,n=(0,Q.default)(function(){return new nY.StateCache(nZ.default.get("stateCache",nf.Type.Any()))},[]);return(0,x.jsx)(nY.StateCacheContext.Provider,{value:n,children:t})}function oH(){return(0,nX.usePostDeployModal)(),null}function oq(e){var t,n=e.ui,r=e.repl,i=e.services,o=e.userKeybindings,a=e.children;return(0,x.jsx)(oN,{keybindings:o,children:(0,x.jsx)(ev.PaneUIContextProvider,{value:n,children:(0,x.jsx)(oW,{children:(0,x.jsx)(oG.default.Provider,{value:i,children:(0,x.jsxs)(nQ.DeploymentProvider,{replId:r.id,orgId:null==(t=r.org)?void 0:t.id,container:i.container,fs:i.fs,dotReplit:i.dotReplit,ports:i.ports,secrets:i.secrets,children:[(0,x.jsx)(oH,{}),(0,x.jsx)(iI.ForkContextProvider,{repl:r,forkParams:{trackingData:{forkSource:"replEnvironmentDesktop"}},children:(0,x.jsx)(nD.ExtensionStoreProvider,{children:(0,x.jsx)(oz.default,{children:a})})})]})})})})})}var oK=e.i(736318);function o$(){var e,t,n,r,i,o;return e=(0,tv.default)().fs,t=(0,ep.useActiveFile)(),n=(0,ep.useOpenFile)(),r=(0,W.useCallback)(function(e){var t;(0,nk.isMarkdownFile)(e.path.toLowerCase())?t={paneType:"markdown"}:(0,nk.isCsvFile)(e.path.toLowerCase())&&(t={paneType:"csvPreview"}),n((0,td._)((0,b._)({},e),{opener:t}))},[n]),i=(0,ep.useLayoutInitType)(),o=(0,W.useRef)(!1),(0,W.useEffect)(function(){if(i&&!o.current){if(!t){if(!window.location.hash)return;var e=new URL(window.location.href);history.pushState((0,td._)((0,b._)({},history.state),{as:e.pathname}),document.title,window.location.origin+window.location.pathname+window.location.search);return}var n=(0,oK.deeplinkToHash)({path:t}),r=window.location.hash;if(!(r.slice(1)===t||r.startsWith(n+":"))){var a=new URL(window.location.href);a.hash=n,window.history.pushState((0,td._)((0,b._)({},history.state),{as:a.pathname+a.hash}),"",a)}}},[t,i]),(0,W.useEffect)(function(){if(i){var t=function(){return(0,er._)(function(){var t;return(0,ei._)(this,function(n){switch(n.label){case 0:return o.current=!0,[4,(0,er._)(function(){var t,n,r,i;return(0,ei._)(this,function(o){switch(o.label){case 0:if(!(0,oK.hasHash)())return[2,null];return[4,(0,oK.parseHash)(e)];case 1:if(n=(t=o.sent()).path,r=t.line,i=t.col,!n)return[2,null];return[2,{path:n,line:r,col:i}]}})})()];case 1:return(t=n.sent())&&r(t),o.current=!1,[2]}})})()};return t(),window.addEventListener("hashchange",t),function(){window.removeEventListener("hashchange",t)}}},[i,e,r]),null}var oY=e.i(545082),oQ=e.i(375310),oX=e.i(557862);function oZ(){var e=(0,oQ.usePendingDeleteFile)(),t=(0,oQ.useSetPendingDeleteFile)(),n=(0,tv.default)().fs,r=function(){t(null)};return(0,x.jsx)(ez.Modal,{isOpen:!!e,onRequestClose:r,children:e?(0,x.jsx)(oX.default,{name:e,description:e,entityType:"file",hideModal:r,delete:function(){e&&(n.deleteFile(e),t(null))}}):null})}var oJ=e.i(257982),o0=e.i(134628),o1=e.i(479407),o2=e.i(203594),o4=e.i(16499);function o3(){var e,t,n=(0,y.useRouter)(),r=(0,Z.doesBonsaiWebviewSupportFeature)(n,"mobileBridge"),i=(0,ep.useSidebar)(),o=(0,o2.default)(),a=o.isSaving,s=o.isOffline,l=(0,W.useRef)(null),u=(0,o4.useSetAppKeyboardState)(),c=(0,ep.useOpenTool)(),d=eB(),p=(e=(0,r0.useWorkflowsRunner)(),t=(0,r0.useOnToggleRun)(),{runState:(0,W.useMemo)(function(){return e?e.step:rW.RunState.OFFLINE},[e]),toggleRunState:(0,W.useCallback)(function(){t()},[t])}),f=p.runState,h=p.toggleRunState,m=(0,W.useCallback)(function(e){var t=function(e){switch(e){case o0.BridgeWorkspaceAction.OPEN_FILETREE:i.toggleContent("filetree");break;case o0.BridgeWorkspaceAction.TOGGLE_RUN_STATE:h();break;case o0.BridgeWorkspaceAction.TOGGLE_ALLPANES:d();break;case o0.BridgeWorkspaceAction.OPEN_NEW_PANE:case o0.BridgeWorkspaceAction.TOGGLE_DRAWER:break;default:(0,oJ.default)(e)}},n=function(e){u(e)},r=function(e){var t=e.type,n=e.messageId;try{"ghostwriterChat"===t?c({pane:{type:"agentChat"}}):c({pane:{type:t}})}catch(e){(0,o1.sendErrorMessage)(n)}};(0,o1.workspaceBridgeMessageHandler)(e,function(e){var i=e.type;switch(i){case o0.BridgeMessageType.SET_KEYBOARD_STATE:n(e.keyboardState);break;case o0.BridgeMessageType.WORKSPACE_REQUEST_ACTION:t(e.action);break;case o0.BridgeMessageType.WORKSPACE_REQUEST_OPEN_PANE:r({messageId:e.id,type:e.paneType});break;default:(0,oJ.default)(i)}})},[h,u,c,d,i]);return(0,W.useEffect)(function(){if(r){var e={messageType:o0.BridgeMessageType.WORKSPACE_STATE,isDrawerOpen:!1,isShowingAllPanes:!0,isSaving:a,isOffline:s,runState:f,activePaneType:null,activePaneFilePath:null,isInAgentMode:!1,insets:{top:0,bottom:0}},t=l.current;return(null==t||JSON.stringify(e)!==JSON.stringify(t))&&((0,o1.sendMessage)(e,(0,iQ.v4)()),l.current=e),window.addEventListener("message",m),function(){window.removeEventListener("message",m)}}},[r,m,f,a,s,l]),null}var o5=e.i(545150),o8=e.i(269848),o6=e.i(394212),o9=e.i(830675),o7=e.i(718398),ae=e.i(82259),at=e.i(924908),an=e.i(852155),ar=e.i(299798),ai=e.i(112942),ao=e.i(399144),aa=e.i(28432),as=e.i(576779);function al(e){var t=e.text,n=Math.floor(100*e.progress);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(F.View,{row:!0,align:"center",justify:"center",gap:8,style:{cursor:"not-allowed"},children:[(0,x.jsx)(o8.default,{}),(0,x.jsx)(eA.Text,{children:t})]}),(0,x.jsx)(F.View,{clsx:as.default.progressBarContainer,children:(0,x.jsx)(F.View,{clsx:as.default.progressBarTrack,children:(0,x.jsx)(F.View,{clsx:as.default.progressBarFill,style:{width:"".concat(n,"%")}})})}),(0,x.jsx)(F.View,{justify:"center",align:"center",children:(0,x.jsxs)(eA.Text,{variant:"small",color:"dimmer",children:[n,"%"]})})]})}function au(e){var t=e.errorMessage;return(0,x.jsxs)(F.View,{align:"center",gap:8,children:[(0,x.jsx)(eA.Text,{children:t}),(0,x.jsx)(eA.Text,{children:"Please try again or contact support"}),(0,x.jsx)(rp.default,{href:"/~",children:(0,x.jsx)(eA.Text,{children:"Return to Home"})})]})}function ac(e){var t=e.onClick;return(0,x.jsxs)(F.View,{align:"center",gap:16,children:[(0,x.jsx)(eA.Text,{children:"You must login again to continue importing"}),(0,x.jsx)(eE.Button,{text:"Reconnect to Figma",onClick:t,colorway:"primary",iconRight:(0,x.jsx)(rO.default,{})})]})}function ad(){var e,t,n,r,i,o,a,s,l,u,c,d,p,f,h,m,v,g,b,w,_,j,S=(0,y.useRouter)(),k=(e=(0,e3.default)(),t=(0,z._)((0,o7.useUpdateReplForFigmaImportMutation)(),1)[0],n=(0,z._)((0,o7.useGetFigmaIntermediateTokenMutation)(),1)[0],i=(r=(0,z._)((0,W.useState)({status:"not_started"}),2))[0],o=r[1],s=(a=(0,z._)((0,W.useState)(0),2))[0],l=a[1],c=(u=(0,o7.useFigmaImportFlowQuery)({variables:{replId:e}})).data,p=null!=(d=!u.loading&&c&&"Repl"===c.getRepl.__typename&&c.getRepl.config.figmaImportStatus===ej.FigmaImportStatus.Started?c.getRepl.config.figmaUrl:null)?d:null,f=rC(),h=(0,at.useChatter)(),m=(0,W.useRef)(!1),v=(0,eP.useAgentSettings)().settings,g=(0,J.useQueryParam)("initialQueuedPromptKey","string"),b=(0,e7.default)(p),w=(0,W.useCallback)(function(){return(0,er._)(function(){var e,t,n,r,i,o;return(0,ei._)(this,function(a){switch(a.label){case 0:if(m.current)return[2];return m.current=!0,[4,h.sessions.create({sessionType:ae.SessionType.AGENT_SESSION})];case 1:if(!(e=a.sent()).ok)throw Error("Failed to create Agent session");return f({type:"agentChat",data:{sessionId:e.payload.id}}),[4,(t=e.payload).appendEvent({kind:"setupImportedProject",importSource:ae.ProjectImportSource.PROJECT_IMPORT_SOURCE_FIGMA,agentConfig:(0,ai.convertAgentSettingsFromGQLToAiChat)(v)})];case 2:if(a.sent(),n="initial_queued_prompt_".concat(g),!(r=nZ.default.get(n,"string")))return[2];return nZ.default.remove(n),i=r,(o=b.current)&&(i=i.replaceAll(o,"")+"\n\n(Figma URL: ".concat(o," has already been imported.)")),[4,t.appendEvent({kind:"message",intent:ae.MessageAction.AGENT,message:i})];case 3:return a.sent(),[2]}})})()},[h,f,g,b,v]),_=(0,W.useCallback)(function(n){var r=n.errorMessage;return(0,er._)(function(){return(0,ei._)(this,function(n){switch(n.label){case 0:return o({status:"error",errorMessage:r}),[4,t({variables:{input:{id:e,figmaImportStatus:ej.FigmaImportStatus.Failed}}})];case 1:return n.sent(),[2]}})})()},[e,t]),((0,ar.usePid2)(function(r,i){var a=i.signal;return(0,er._)(function(){var i,s,u,c,p,f,h,m,v,g,x,y,b,j,S,k;return(0,ei._)(this,function(C){switch(C.label){case 0:if(!d)return[2];return[4,n({variables:{input:{figmaUrl:d}}})];case 1:if((null==(i=C.sent().data)?void 0:i.getFigmaIntermediateToken.__typename)==="NoOAuthFoundError")return o({status:"needs_auth",retryAuth:function(){return l(function(e){return e+1})}}),[2];if((null==i?void 0:i.getFigmaIntermediateToken.__typename)==="InvalidFigmaUrlError"||(null==i?void 0:i.getFigmaIntermediateToken.__typename)==="FigmaRateLimitError")return o9.captureException(i.getFigmaIntermediateToken,{extra:{replId:e,figmaUrl:d}}),nR.logger.error("Failed to get Figma intermediate token",{repl:e,figmaUrl:d,payload:i.getFigmaIntermediateToken}),_({errorMessage:i.getFigmaIntermediateToken.message}),[2];if(!(s=null==i?void 0:i.getFigmaIntermediateToken)||"FigmaImportIntermediateToken"!==s.__typename)return nR.logger.error("Failed to get Figma intermediate token",{repl:e,figmaUrl:d,payload:i}),_({errorMessage:"Something went wrong while authenticating. Please try again."}),[2];return u=s.token,o(function(e){return"in_progress"===e.status?e:{status:"in_progress",progress:0,text:"Preparing Figma import..."}}),[4,r.figmaImport.startImport.rpc({intermediateToken:u},{signal:a})];case 2:if(!(c=C.sent()).ok)switch(p=c.payload.code){case"INVALID_REQUEST":case"UNCAUGHT_ERROR":return _({errorMessage:c.payload.message||"Something went wrong while importing. Please try again."}),[2];case"UNEXPECTED_DISCONNECT":case"CANCEL":return[2];default:(0,oJ.default)(p)}f=r.figmaImport.status.subscribe({},{signal:a}).resReadable,h=void 0,m=!1,v=!1,C.label=3;case 3:C.trys.push([3,8,9,14]),x=function(){var t=b.value;if(!t.ok){var n=t.payload.code;switch(n){case"FIGMA_TOKEN_EXPIRED":case"FIGMA_INVALID_TOKEN":return o({status:"needs_auth",retryAuth:function(){return l(function(e){return e+1})}}),{v:void 0};case"FIGMA_NODE_NOT_FOUND":return _({errorMessage:"The selected Figma component could not be found, please ensure you have selected a frame and copied the link to the frame."}),{v:void 0};case"FIGMA_FILE_NOT_FOUND":return _({errorMessage:"The Figma file could not be accessed, please ensure the linked account has permissions to access the frame."}),{v:void 0};case"FIGMA_SELECTION_TOO_LARGE":return _({errorMessage:"Your Figma selection is too large to process, please make sure you have selected a single frame."}),{v:void 0};case"FIGMA_RATE_LIMIT_EXCEEDED":return _({errorMessage:"Too many requests. Please wait a moment and try again."}),{v:void 0};case"NO_CODE_GENERATED":return _({errorMessage:"No code could be generated from your frame. Please try a different link."}),{v:void 0};case"TIMEOUT":return _({errorMessage:"The import took too long. Please try again, or try a smaller component."}),{v:void 0};case"FIGMA_NODE_NOT_SUPPORTED":return _({errorMessage:"The selected Figma component is not supported. Please make sure you have selected a frame and copied the link to the frame."}),{v:void 0};case"FIGMA_PAGE_WITH_MULTIPLE_CHILDREN":return _({errorMessage:"The selected Figma page has multiple children. Please make sure you have selected a single frame."}),{v:void 0};case"FIGMA_PAGE_WITH_NO_VALID_CHILDREN":return _({errorMessage:"The selected Figma page doesn't have any content we can convert to code. Please make sure you've selected a page with visible designs then try again."}),{v:void 0};case"INVALID_REQUEST":case"UNKNOWN":case"UNCAUGHT_ERROR":return _({errorMessage:t.payload.message||"Something went wrong while importing. Please try again."}),{v:void 0};case"NOT_STARTED":return nR.logger.error("Figma Import: Failed to import from Figma",{repl:e,figmaUrl:d,payload:t.payload}),o9.captureException(Error("Figma import: not started"),{extra:{replId:e,figmaUrl:d,payload:t.payload}}),_({errorMessage:t.payload.message||"Something went wrong while importing. Please try again."}),{v:void 0};case"READABLE_BROKEN":case"CANCEL":case"UNEXPECTED_DISCONNECT":return{v:void 0};default:(0,oJ.default)(n)}}var r=t.payload;"progress"===r.kind?o(function(e){return"in_progress"===e.status&&e.progress>=r.number?e:{status:"in_progress",progress:r.number,text:r.statusText}}):"success"===r.kind&&(h=function(e){var t=e.file,n=e.frame,r="".concat(t," (").concat(n,")");if(r.length<=an.maxTitleLength)return r;var i=an.maxTitleLength-3;if(t.length<=i-1){var o=i-t.length,a=n.length>o?n.substring(0,o-1)+"â€¦":n;return"".concat(t," (").concat(a,")")}var s=i-Math.min(n.length,10),l=t,u=n;t.length>s&&(l=t.substring(0,s-1)+"â€¦");var c=i-l.length;return n.length>c&&(u=n.substring(0,c-1)+"â€¦"),"".concat(l," (").concat(u,")")}({file:r.figmaFileName,frame:r.figmaSelectedFrameName}))},y=(0,o6._)(f),C.label=4;case 4:return[4,y.next()];case 5:if(!(m=!(b=C.sent()).done))return[3,7];if(j=x(),"object"===(0,ty._)(j))return[2,j.v];C.label=6;case 6:return m=!1,[3,4];case 7:return[3,14];case 8:return S=C.sent(),v=!0,g=S,[3,14];case 9:if(C.trys.push([9,,12,13]),!(m&&null!=y.return))return[3,11];return[4,y.return()];case 10:C.sent(),C.label=11;case 11:return[3,13];case 12:if(v)throw g;return[7];case 13:return[7];case 14:return o({status:"in_progress",progress:1,text:"Creating checkpoint"}),[4,r.git.init.rpc({initialCommit:!0,includeAllInitialFiles:!0},{signal:a})];case 15:if(!(k=C.sent()).ok)switch(k.payload.code){case"CANCEL":case"UNEXPECTED_DISCONNECT":return[2];default:o9.withScope(function(e){e.setExtra("gitInitError",k.payload),o9.captureException(Error("figma import: git init failed"))})}return o({status:"in_progress",progress:1,text:"Handing off to Agent"}),[4,w()];case 16:return C.sent(),[4,t({variables:{input:{id:e,title:h,makeTitleUnique:!0,figmaImportStatus:ej.FigmaImportStatus.Completed}}})];case 17:return C.sent(),(0,eu.track)(ec.events.FIGMA_IMPORT_USED,{action:"completed"}),(0,eu.track)(ec.events.IMPORT,{action:"import_success",import_type:"figma"}),o({status:"success"}),[2]}})})()},[d,e,t,w,s,n,_]),c&&"Repl"===c.getRepl.__typename&&c.getRepl.config.figmaImportStatus===ej.FigmaImportStatus.Failed&&"not_started"===i.status)?{status:"error",errorMessage:"Something went wrong"}:i);return"not_started"===k.status||"success"===k.status?null:("in_progress"===k.status?j=(0,x.jsx)(al,{text:k.text,progress:k.progress}):"error"===k.status?j=(0,x.jsx)(au,{errorMessage:k.errorMessage}):"needs_auth"===k.status&&(j=(0,x.jsx)(ac,{onClick:function(){S.push("/integrations")}})),(0,x.jsx)(ao.Portal,{children:(0,x.jsx)(F.View,{clsx:as.default.overlay,style:{cursor:"in_progress"===k.status?"wait":"default"},children:(0,x.jsx)(o5.default,{children:(0,x.jsxs)(F.View,{clsx:as.default.animationWrapper,tabIndex:-1,children:[(0,x.jsxs)(F.View,{align:"center",gap:16,children:[(0,x.jsx)(aa.Figma2ReplitIcons,{}),(0,x.jsx)(eA.Text,{multiline:!1,variant:"subheadBig",dataCy:"figma-lock-screen",children:"Importing from Figma..."})]}),(0,x.jsx)(F.View,{pt:16,px:16,gap:4,children:j})]})})})}))}var ap=e.i(368242),af=e.i(195680),ah=e.i(119322);function am(){var e=(0,z._)((0,W.useState)(!1),2),t=e[0],n=e[1],r=(0,z._)((0,W.useState)({status:"not_started"}),2),i=r[0],o=r[1],a=rC(),s=(0,af.useSetGitProviderImportMode)(),l=(0,ap.useDoGitProviderImportFlow)({setConfigScreenLockIsOpen:n,openPane:a,onStatusChange:o}).detectedGitProvider;if((0,W.useEffect)(function(){return t?(s(l),function(){s(null)}):void s(null)},[t,s,l]),!t)return null;var u="Importingâ€¦";return"in_progress"===i.status?u=i.text:"error"===i.status&&(u="Import failed: ".concat(i.errorMessage)),(0,x.jsx)(ah.default,{reason:u})}var av=e.i(882848),ag=e.i(600962),ax=e.i(649960),ay=e.i(332441),ab=e.i(418725),aw=e.i(188019),a_=e.i(492267),aj=e.i(12558),aS=e.i(659790),ak=e.i(179104),aC=e.i(740616),aT=e.i(828322),aI=e.i(381010),aP=e.i(629756),aE=e.i(6338),aR=(0,eN.cssRecord)({container:[eG.rcss.position.relative],loadingGeneratedIcon:[aE.loadingStyle.foregroundPulse(D.tokens.blurpleDimmest,D.tokens.blurpleDefault),eG.rcss.borderRadius()]});function aA(e){var t=e.replId,n=e.replIconUrl,r=e.size,i=e.alt,o=(0,aP.usePollForGeneratedReplIcon)({replId:t,replIconUrl:n}),a=o.loading,s=o.generatedIconUrl;return(0,x.jsx)(F.View,{css:aR.container,children:(0,x.jsx)(F.View,{css:a&&aR.loadingGeneratedIcon,children:(0,x.jsx)(rw.default,{iconUrl:s||n,size:void 0===r?20:r,alt:void 0===i?"":i})})})}var aD=e.i(341727),aV=e.i(751273),aM=(0,eN.cssRecord)({metadata:[],iconWrapper:[eG.rcss.position.relative],dimIcon:[{opacity:.2}],diconnectedIcon:[eG.rcss.position.absolute,{left:0,right:0,top:0,bottom:0,margin:"auto"}],title:[eG.rcss.flex.shrink(1),eG.rcss.truncate],placeholderTitle:[eG.rcss.width(100),eG.rcss.borderRadius("default"),{alignSelf:"stretch"},aE.loadingStyle.foregroundPulse(D.tokens.backgroundDefault,D.tokens.backgroundHigher)]});function aF(e){var t,n=e.repl,r=e.hideTitle,i=(0,aD.default)().didDisconnect;return(0,x.jsxs)(F.View,{grow:!0,shrink:!0,row:!0,gap:6,align:"center",children:[(0,x.jsxs)(F.View,{css:aM.iconWrapper,children:[(null==(t=n.project)?void 0:t.id)?(0,x.jsx)(x.Fragment,{children:r?(0,x.jsx)(aT.default,{}):null}):(0,x.jsx)(F.View,{css:i&&aM.dimIcon,children:(0,x.jsx)(aA,{replId:n.id,replIconUrl:n.iconUrl,size:16})}),i?(0,x.jsx)(aV.Tooltip,{tooltip:"Reconnecting",children:(0,x.jsx)(aI.default,{size:16,css:aM.diconnectedIcon})}):null]}),r?null:(0,x.jsx)(eA.Text,{multiline:!1,css:aM.title,"data-cy":"header-repl-title",color:i?"dimmer":"default",translate:"no",children:n.title})]})}var aO=e.i(754873),aL=e.i(604963),aB=(0,eN.cssRecord)({popover:[eG.rcss.maxWidth(460),eG.rcss.width("100%")],button:[aO.interactive.nofill,eG.rcss.height(28),eG.rcss.flex.growAndShrink(1),eG.rcss.align.center,eG.rcss.rowWithGap(4),eG.rcss.px(6),eG.rcss.borderRadius(),eG.rcss.color.foregroundDefault,{'&[aria-expanded="true"]':{backgroundColor:D.tokens.interactiveBackgroundActive}}]});function aU(e){var t=e.repl,n=e.getDesktopLayoutState,r=e.hideTitle,i=(0,z._)((0,W.useState)(!1),2),o=i[0],a=i[1],s=function(){var e=(0,Z.useDoesBonsaiSupportFeature)("simplifiedTabletUI"),t=(0,W.useCallback)(function(){e&&(0,o1.sendMessage)({messageType:o0.BridgeMessageType.SHOW_REPL_INFO},(0,ak.nanoid)())},[e]);if(e)return t}();return(0,Z.useIsInBonsaiWebview)()?(0,x.jsx)(F.View,{css:aB.button,onClick:s,children:(0,x.jsx)(aF,{repl:t,hideTitle:r})}):(0,x.jsxs)(aL.PopoverTrigger,{isOpen:o,onOpenChange:function(e){a(e),e&&(0,eu.track)(ec.events.MODAL_VIEWED,{modal_name:"repl_metadata_popover"})},placement:"bottom start",label:"Repl info",css:aB.popover,children:[(0,x.jsx)(F.SpecializedView.button,{dataCy:"ws-repl-info-container",css:aB.button,onClick:function(){(0,eu.track)(ec.events.WORKSPACE,{action:"repl_metadata_opened"})},"aria-expanded":o,children:(0,x.jsx)(aF,{repl:t,hideTitle:r})}),(0,x.jsx)(aC.default,{getDesktopLayoutState:n,setIsEditing:a})]})}var aN=e.i(429190),aG=e.i(549194),az=e.i(781621),aW=e.i(397747),aH=e.i(312087);function aq(){var e=(0,w._)(["\n  fragment ReplInfoEditFormRepl on Repl {\n    ...EditReplFormRepl\n    id\n    title\n    description\n    isPrivate\n    iconUrl\n    publishedAs\n    templateLabel\n    org {\n      id\n      type\n    }\n    templateInfo {\n      iconUrl\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n        message\n      }\n      editVisibility {\n        isAuthorized\n        code\n        message\n      }\n      editTemplateMetadata {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return aq=function(){return e},e}function aK(){var e=(0,w._)(["\n  mutation ReplInfoEditFormUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplInfoEditFormRepl\n      }\n    }\n  }\n  ","\n"]);return aK=function(){return e},e}var a$={},aY=(0,_.gql)(aq(),aH.EditReplFormReplFragmentDoc),aQ=(0,_.gql)(aK(),aY);function aX(){var e=(0,w._)(["\n  fragment ReplInfoDropdownMenuOrgFragment on Org {\n    id\n    name\n    image\n    slug\n    type\n  }\n"]);return aX=function(){return e},e}function aZ(){var e=(0,w._)(["\n  fragment ReplInfoDropdownMenuUserFragment on User {\n    id\n    username\n    image\n    url\n  }\n"]);return aZ=function(){return e},e}function aJ(){var e=(0,w._)(["\n  fragment ReplInfoMenuItemsRepl on Repl {\n    id\n    isPrivate\n    isRenamed\n    isFeaturedRepl\n    publishedAs\n    org {\n      id\n      type\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n      fork {\n        isAuthorized\n      }\n      publish {\n        isAuthorized\n      }\n      deleteRepl {\n        isAuthorized\n      }\n    }\n  }\n"]);return aJ=function(){return e},e}function a0(){var e=(0,w._)(["\n  fragment ReplInfoDropdownMenuItemsRepl on Repl {\n    id\n    url\n    slug\n    config {\n      isServer\n    }\n    org {\n      ...ReplInfoDropdownMenuOrgFragment\n    }\n    user {\n      ...ReplInfoDropdownMenuUserFragment\n    }\n    owner {\n      __typename\n      ... on Team {\n        id\n        username\n      }\n      ... on User {\n        id\n        username\n        isSubscribed\n      }\n    }\n    ...ReplInfoMenuItemsRepl\n    ...HandleRemixRepl\n    ...ReplInfoEditFormRepl\n    ...FeaturedReplPreviewRepl\n    ...BulkDeleteConfirmationModalRepl\n    ...PublishReleaseFormRepl\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return a0=function(){return e},e}function a1(){var e=(0,w._)(["\n  fragment ReplInfoDropdownMenuRepl on Repl {\n    id\n    title\n    iconUrl\n    project {\n      id\n    }\n  }\n"]);return a1=function(){return e},e}function a2(){var e=(0,w._)(["\n  query ReplInfoDropdownMenuQuery($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...ReplInfoDropdownMenuItemsRepl\n      }\n    }\n  }\n  ","\n"]);return a2=function(){return e},e}function a4(){var e=(0,w._)(["\n  mutation ReplInfoDropdownMenuDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return a4=function(){return e},e}function a3(){var e=(0,w._)(["\n  mutation ReplInfoDropdownMenuUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        publishedAs\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return a3=function(){return e},e}var a5={},a8=(0,_.gql)(aX()),a6=(0,_.gql)(aZ()),a9=(0,_.gql)(aJ()),a7=(0,_.gql)(a0(),a8,a6,a9,aW.HandleRemixReplFragmentDoc,aY,aN.FeaturedReplPreviewReplFragmentDoc,az.BulkDeleteConfirmationModalReplFragmentDoc,aG.PublishReleaseFormReplFragmentDoc);(0,_.gql)(a1());var se=(0,_.gql)(a2(),a7),st=(0,_.gql)(a4()),sn=(0,_.gql)(a3()),sr=e.i(204977),si=e.i(979530),so=e.i(113388),sa=e.i(908628),ss=e.i(541792),sl=e.i(173993),su=e.i(491194),sc=e.i(220578),sd=e.i(213733),sp=e.i(341126),sf=e.i(773240),sh=e.i(598801),sm=e.i(701366),sv=e.i(157584),sg=e.i(905282),sx=e.i(674918),sy=e.i(761655),sb=e.i(416298),sw=e.i(322823),s_=e.i(236379),sj=e.i(420802);function sS(){var e=(0,w._)(["\n  mutation ReplInfoReplIconUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        iconUrl\n      }\n    }\n  }\n"]);return sS=function(){return e},e}var sk={},sC=(0,_.gql)(sS()),sT=e.i(349597),sI=e.i(422025),sP=e.i(971072),sE=e.i(965710),sR=e.i(418944);function sA(e){var t,n,r=e.replId,i=e.authz,o=e.initialIconUrl,a=e.originIconUrl,s=(0,te.default)(),l=s.showError,u=s.showConfirm,c=(0,z._)((0,W.useState)(o),2),d=c[0],p=c[1],f=(0,W.useRef)(null),h=(0,z._)((t={onError:function(){l("Something unexpected happened")},onCompleted:function(e){e.updateRepl.repl&&u("App icon updated successfully")}},n=(0,b._)({},sk,t),r9.useMutation(sC,n)),2),m=h[0],v=h[1].loading,g=d!==a,y=(0,sI.default)({onUpload:function(e){var t=e.url;return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return[4,m({variables:{input:{id:r,iconUrl:t}}})];case 1:return e.sent(),p(t),f.current&&(URL.revokeObjectURL(f.current),f.current=null),[2]}})})()},onUploadPreview:function(){u("Uploading App icon")},onError:function(e){return l(e.message)}});(0,W.useEffect)(function(){p(o)},[o]),(0,W.useEffect)(function(){return function(){f.current&&URL.revokeObjectURL(f.current)}},[]);var w=function(e){f.current&&URL.revokeObjectURL(f.current);var t=URL.createObjectURL(e);f.current=t,p(t),y.uploadImage(e,sT.ImageUploadContexts.ReplIcon)};return i.isAuthorized?(0,x.jsxs)(F.View,{gap:4,children:[(0,x.jsx)(eA.Text,{variant:"small",color:"dimmer",multiline:!1,children:"Icon"}),(0,x.jsx)(sE.FileUploadInput,{onSelect:function(e){if(e&&e.length>0){var t=e[0];if(!sP.ACCEPTABLE_IMAGE_UPLOAD_TYPES.includes(t.type))return void l("Only PNG, JPEG, GIF, and WebP images are supported");w(t)}},onDrop:function(e){return(0,er._)(function(){var t,n;return(0,ei._)(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.items.filter(function(e){return"file"===e.kind}).map(function(e){return e.getFile()}))];case 1:if((t=r.sent().filter(function(e){return null!==e})).length>0){if(n=t[0],!sP.ACCEPTABLE_IMAGE_UPLOAD_TYPES.includes(n.type))return l("Only PNG, JPEG, GIF, and WebP images are supported"),[2];w(n)}return[2]}})})()},acceptedFileTypes:sP.ACCEPTABLE_IMAGE_UPLOAD_TYPES,children:(0,x.jsxs)(F.View,{row:!0,gap:12,align:"start",children:[(0,x.jsx)(sR.default,{alt:"",size:48,iconUrl:null!=d?d:""}),(0,x.jsxs)(F.View,{gap:4,align:"start",children:[(0,x.jsx)(eE.Button,{text:g?"Upload new":"Upload icon",size:"small",loading:v}),(0,x.jsx)(eA.Text,{variant:"small",color:"dimmer",children:"Icon should be square"})]})]})})]}):(0,x.jsxs)(F.View,{gap:4,children:[(0,x.jsx)(eA.Text,{variant:"small",color:"dimmer",multiline:!1,children:"Icon"}),(0,x.jsxs)(F.View,{row:!0,gap:12,align:"start",children:[(0,x.jsx)(sR.default,{alt:"",size:48,iconUrl:null!=d?d:""}),(0,x.jsxs)(F.View,{gap:4,align:"start",children:[(0,x.jsx)(aV.Tooltip,{tooltip:"Not allowed to update icon",children:(0,x.jsx)(eE.Button,{text:g?"Upload new":"Upload icon",disabled:!0,size:"small"})}),(0,x.jsx)(eA.Text,{variant:"small",color:"dimmer",children:"Icon should be square"})]})]})]})}var sD=e.i(607278),sV=e.i(963786),sM=function(e){var t=e.trim();return 0===t.length?{message:"Please enter a name"}:t.length>60?{message:"Name must be ".concat(60," characters or less")}:void 0},sF=function(e){if(e.length>sj.REPL_DESCRIPTION_MAX_LENGTH)return{message:"Description must be ".concat(sj.REPL_DESCRIPTION_MAX_LENGTH," characters or less")}};function sO(e){var t=e.message,n=e.id;return(0,x.jsxs)(F.View,{id:n,row:!0,gap:4,align:"center",children:[(0,x.jsx)(sb.default,{clsx:sV.default.validationIcon}),(0,x.jsx)(F.View,{grow:!0,shrink:!0,children:(0,x.jsx)(eA.Text,{variant:"small",clsx:sV.default.validationText,children:t})})]})}function sL(e){var t,n,r,i,o,a,s,l,u=e.repl,c=(0,te.default)(),d=c.showConfirm,p=c.showError,f=(0,rr.useGlobalModal)().show,h=(0,z._)((t={onCompleted:function(){d("App details updated")},onError:function(e){p(e.message)}},n=(0,b._)({},a$,t),r9.useMutation(aQ,n)),2),m=h[0],v=h[1].loading,g=(0,sw.useFormField)(u.title,sM),y=(0,sw.useFormField)(null!=(a=u.description)?a:"",sF),w=(0,z._)((0,W.useState)(u.templateLabel),2),_=w[0],j=w[1],S=(0,z._)((0,W.useState)(!1),2),k=S[0],C=S[1],T=u.title,I=null!=(s=u.description)?s:"",P=u.templateLabel,E=u.publishedAs===ej.PublishedReplKind.Template,R=(0,W.useId)(),A=(0,W.useId)(),D=(0,W.useId)(),V=(0,W.useId)(),M=(0,W.useId)(),O=!!g.error||!!y.error,L=g.value!==T||y.value!==I||_!==P,B=(null==(r=u.org)?void 0:r.type)!=="team"&&(u.authorizations.editVisibility.isAuthorized||u.authorizations.editVisibility.code===ej.ReplAuthorizationCode.RequiresActiveSubscription),U=(null==(i=u.org)?void 0:i.type)==="team";return(0,x.jsxs)(F.View,{gap:16,children:[(0,x.jsx)(sA,{replId:u.id,authz:u.authorizations.editMetadata,initialIconUrl:u.iconUrl,originIconUrl:null!=(l=null==(o=u.templateInfo)?void 0:o.iconUrl)?l:u.iconUrl}),(0,x.jsxs)(F.View,{gap:4,children:[(0,x.jsx)("label",{htmlFor:R,children:(0,x.jsx)(eA.Text,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,x.jsx)(sD.Input,{disabled:!u.authorizations.editMetadata.isAuthorized,maxLength:60,value:g.value,onChange:function(e){return g.setValue(e.target.value)},onFocus:function(){return C(!0)},spellCheck:!1,id:R,"aria-describedby":A,dataCy:"ws-repl-info-title-input"}),g.value.length>=60?(0,x.jsx)(sO,{message:"You've reached the ".concat(60," character limit")}):null,g.error?(0,x.jsx)(sO,{message:g.error.message,id:A}):null]}),(0,x.jsxs)(F.View,{gap:4,children:[(0,x.jsx)("label",{htmlFor:D,children:(0,x.jsx)(eA.Text,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,x.jsx)(sD.MultiLineInput,{disabled:!u.authorizations.editMetadata.isAuthorized,maxLength:sj.REPL_DESCRIPTION_MAX_LENGTH,value:y.value,onChange:function(e){return y.setValue(e.target.value)},onFocus:function(){return C(!0)},placeholder:"What does this App do?",autoSize:!0,id:D,"aria-describedby":V}),y.value.length>=sj.REPL_DESCRIPTION_MAX_LENGTH?(0,x.jsx)(sO,{message:"You've reached the ".concat(sj.REPL_DESCRIPTION_MAX_LENGTH," character limit")}):null,y.error?(0,x.jsx)(sO,{message:y.error.message,id:V}):null]}),E&&u.authorizations.editTemplateMetadata.isAuthorized?(0,x.jsxs)(F.View,{gap:4,children:[(0,x.jsx)("label",{htmlFor:M,children:(0,x.jsx)(eA.Text,{variant:"small",color:"dimmer",multiline:!1,children:"Template label"})}),(0,x.jsx)(sD.Input,{value:_,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return j(e.target.value)},onFocus:function(){return C(!0)},id:M})]}):null,k?(0,x.jsx)(F.View,{row:!0,gap:8,justify:"end",children:(0,x.jsx)(eE.Button,{text:"Save changes",colorway:"primary",onClick:function(){v||null==g.validate()&&null==y.validate()&&m({variables:{input:{id:u.id,title:g.value.trim(),description:y.value,templateLabel:u.authorizations.editTemplateMetadata.isAuthorized?_:void 0}}})},disabled:v||O||!L||!u.authorizations.editMetadata.isAuthorized,iconLeft:v?(0,x.jsx)(o8.default,{}):void 0})}):null,B?(0,x.jsxs)(F.View,{gap:4,align:"start",children:[(0,x.jsx)(eA.Text,{variant:"small",color:"dimmer",multiline:!1,children:"Visibility"}),(0,x.jsx)(s_.PrivacyToggle,{isPrivate:u.isPrivate,onChange:function(e){return(0,er._)(function(){var t;return(0,ei._)(this,function(n){switch(n.label){case 0:if(v)return[2];if(u.authorizations.editVisibility.isAuthorized||!1===e)return[2,m({variables:{input:{id:u.id,isPrivate:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,td._)((0,b._)({},u),{isPrivate:e})}}})];if(u.authorizations.editVisibility.code!==ej.ReplAuthorizationCode.RequiresActiveSubscription||(null==(t=u.org)?void 0:t.__typename)==="Org")return[3,2];return[4,f("MembershipPurchaseModal",{analyticsContext:{upgrade:{context:"workspace_info_modal"}}})];case 1:return n.sent(),[3,3];case 2:p(u.authorizations.editVisibility.message),n.label=3;case 3:return[2]}})})()},isTeam:U})]}):null]})}var sB=e.i(714165),sU=e.i(119274),sN=e.i(624782),sG=e.i(185591),sz=e.i(355778);function sW(e){var t,n,r,i,o,a,s,l=e.user,u=e.org,c=e.isInDesktopApp;if(!l&&!u)return null;if(u)t=(0,sp.orgLinks)(u).repls;else{if(!l)return null;t=(0,sx.userLinkProps)(l)}var d=function(){var e="";"string"==typeof t.as?e=t.as:"string"==typeof t.href?e=t.href:(null==l?void 0:l.url)&&(e=l.url),n7.desktopAppApi.openExternalUrl(e)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(sU.Separator,{}),(0,x.jsx)(sU.MenuItem,{label:"Created by",isDisabled:!0,labelProps:{variant:"small"}}),l&&u?(0,x.jsxs)(sU.BaseMenuItem,(0,td._)((0,b._)({textValue:"".concat(l.username," â€¢ ").concat(u.name)},!c&&{href:t.href,as:t.as}),{onAction:c?d:void 0,children:[(0,x.jsx)(F.View,{gap:4,grow:!0,children:(0,x.jsx)(eA.Text,{children:l.username})}),(0,x.jsx)(sN.Pill,{iconLeft:(0,x.jsx)(sB.Avatar,{src:null!=(n=u.image)?n:null,username:u.name,fullName:u.name,size:16}),text:u.name})]})):(0,x.jsx)(sU.MenuItem,(0,td._)((0,b._)({label:l?l.username:null!=(r=null==u?void 0:u.name)?r:"",icon:(0,x.jsx)(sB.Avatar,{src:null!=(o=null!=(i=null==l?void 0:l.image)?i:null==u?void 0:u.image)?o:null,username:null!=(s=null!=(a=null==l?void 0:l.username)?a:null==u?void 0:u.name)?s:"",fullName:null==u?void 0:u.name,size:24})},!c&&{href:t.href,as:t.as}),{onAction:c?d:void 0}))]})}function sH(e){var t=e.repl,n=e.loading,r=e.onDialogOpen,i=(0,$.default)(),o=(0,sy.useHandleRemix)({repl:t}),a=o.handleRemix,s=function(e){var t,n=e.repl,r=e.isCreatingProjectFork,i=e.loading,o=(0,$.default)(),a=(0,Y.useFlag)({controlName:sc.flagTransferRepl,logFlagToAnalytics:!1}),s=[],l=[],u=[];if(!n)return[];var c=(null==(t=n.org)?void 0:t.type)===ej.OrgstypeEnumType.Team,d=n.publishedAs===ej.PublishedReplKind.Template,p=!!n.publishedAs;s.push({value:"EditAppDetails",label:"Edit app details",icon:(0,x.jsx)(sr.default,{}),isDisabled:i||!n.authorizations.editMetadata.isAuthorized,description:n.isPrivate?"Only you can see and edit this App":void 0,dataCy:"repl-info-edit-app-details"}),n.authorizations.fork.isAuthorized&&s.push({value:"Remix",label:"Remix",icon:r?(0,x.jsx)(o8.default,{}):(0,x.jsx)(so.default,{}),isDisabled:r}),o||s.push({value:"CoverPage",label:"Cover page",icon:(0,x.jsx)(n2.default,{}),isDisabled:i}),d||o||c||s.push({value:"Share",label:"Share",icon:(0,x.jsx)(ro.default,{}),isDisabled:i||n.isPrivate,description:n.isPrivate?"Make App public to share":void 0});var f=n.authorizations.publish.isAuthorized;if(!o&&!c&&f){var h=n.isPrivate||!n.isRenamed,m="";n.isPrivate?m="Make App public to publish":n.isRenamed||(m="Rename App to publish"),null==n.publishedAs&&l.push({value:"PublishTemplate",label:"Publish as Template",icon:(0,x.jsx)(sl.default,{}),isDisabled:h,description:m,dataCy:"repl-info-header-settings-publish"}),d&&!h&&(l.push({value:"UpdatePublishedTemplate",label:"Publish template changes",icon:(0,x.jsx)(ro.default,{})}),l.push({value:"UnpublishTemplate",label:"Unpublish Template",icon:(0,x.jsx)(si.default,{})})),p&&!h&&l.push({value:"EditPublishedTemplateSettings",label:"Edit Template publish settings",icon:(0,x.jsx)(sr.default,{})})}return c&&l.push({value:"FeatureRepl",label:n.isFeaturedRepl?"Remove from Featured Apps":"Feature on Profile",icon:(0,x.jsx)(sa.default,{}),description:n.isPrivate?"Make App public to feature":void 0,isDisabled:n.isPrivate}),n.authorizations.deleteRepl.isAuthorized&&(a&&l.push({value:"TransferRepl",label:"Transfer",icon:(0,x.jsx)(ss.default,{})}),u.push({isDestructive:!0,value:"DeleteRepl",label:"Delete",icon:(0,x.jsx)(su.default,{})})),[s,l,u].filter(function(e){return e.length>0})}({repl:t,loading:n,isCreatingProjectFork:o.isCreatingProjectFork}),l=t.user,u=t.org,c=function(e){switch(e){case"Remix":a();break;case"CoverPage":var n=(0,sG.replViewFullUrl)(t);i?n7.desktopAppApi.openExternalUrl(n):window.open(n,"_blank");break;default:r(e)}};return(0,x.jsxs)(x.Fragment,{children:[s.map(function(e,t){return(0,x.jsxs)(W.Fragment,{children:[t>0?(0,x.jsx)(sU.Separator,{}):null,e.map(function(e){return(0,x.jsx)(sU.MenuItem,{label:e.label,icon:e.icon,onAction:function(){return c(e.value)},isDisabled:e.isDisabled,isDestructive:e.isDestructive,description:e.description,dataCy:e.dataCy},e.value)})]},t)}),(0,x.jsx)(sW,{user:null!=l?l:void 0,org:null!=u?u:void 0,isInDesktopApp:i})]})}function sq(e){var t,n=e.repl,r=e.hideTitle,i=!!(null==(t=n.project)?void 0:t.id);if((0,aD.default)().didDisconnect)return r?(0,x.jsx)(oM.IconButton,{alt:"Reconnecting",size:28,children:(0,x.jsx)(aI.default,{})}):(0,x.jsx)(aV.Tooltip,{tooltip:"Reconnecting",children:(0,x.jsx)(eE.Button,{variant:"nofill",iconLeft:(0,x.jsx)(aI.default,{size:16}),text:n.title})});if(i)return r?(0,x.jsx)(oM.IconButton,{size:28,alt:"Open menu",children:(0,x.jsx)(aT.default,{})}):(0,x.jsx)(eE.Button,{variant:"nofill",size:"small",text:n.title});var o=(0,x.jsx)(aA,{replId:n.id,replIconUrl:n.iconUrl,size:16,alt:"App icon"});return r?(0,x.jsx)(oM.IconButton,{size:28,alt:"Open menu",children:o}):(0,x.jsx)(eE.Button,{variant:"nofill",iconLeft:o,text:n.title})}function sK(e){var t,n,r,i,o,a,s,l,u=e.repl,c=e.hideTitle,d=e.getDesktopLayoutState,p=(0,z._)((0,W.useState)(null),2),f=p[0],h=p[1],m=(0,y.useRouter)(),v=(0,$.default)(),g=(0,te.default)().showError,w=(t={variables:{replId:u.id}},n=(0,b._)({},a5,t),j.useQuery(se,n)),_=w.data,S=w.loading,k=(null==_||null==(s=_.getRepl)?void 0:s.__typename)==="Repl"?_.getRepl:void 0,C=(0,z._)((r={onCompleted:function(){var e;if(v)return void m.push("/desktopApp/home");if((null==k||null==(e=k.org)?void 0:e.type)==="team"){var t=(0,sp.orgLinks)(k.org);m.push(t.home.href);return}m.push("/home","/~")},update:function(e,t){var n;(null==(n=t.data)?void 0:n.deleteRepl)&&(e.evict({id:e.identify(t.data.deleteRepl)}),e.gc())},onError:function(e){return g((0,sd.default)(e.message))}},i=(0,b._)({},a5,r),r9.useMutation(st,i)),2),T=C[0],I=C[1].loading,P=(0,z._)((o={variables:{input:{replId:u.id}},onCompleted:function(e){"Repl"===e.deleteReplDeployment.__typename?h(null):("NotFoundError"===e.deleteReplDeployment.__typename||"UserError"===e.deleteReplDeployment.__typename)&&g(e.deleteReplDeployment.message)},onError:function(e){return g((0,sd.default)(e.message))}},a=(0,b._)({},a5,o),r9.useMutation(sn,a)),2),E=P[0],R=P[1].loading;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(sU.PopupMenu,{placement:"bottom start",dataCy:"repl-info-header-settings",trigger:(0,x.jsx)(sq,{repl:u,hideTitle:c}),children:k?(0,x.jsx)(sH,{repl:k,loading:S,onDialogOpen:h}):null}),k?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(ez.Modal,{isOpen:"EditAppDetails"===f,onRequestClose:function(){return h(null)},maxWidth:512,children:(0,x.jsx)(sL,{repl:k})}),(0,x.jsx)(sg.default,{isOpen:"DeleteRepl"===f,onClose:function(){return h(null)},selectedRepls:[k],deleting:I,onDelete:function(){T({variables:{id:k.id}})}}),(0,x.jsx)(ez.Modal,{isOpen:"TransferRepl"===f,onRequestClose:function(){return h(null)},children:(0,x.jsx)(sz.TransferReplDialog,{repl:k,onDone:function(){return h(null)},onCancel:function(){return h(null)}})}),(0,x.jsx)(ez.Modal,{isOpen:"FeatureRepl"===f,onRequestClose:function(){return h(null)},centered:!0,maxWidth:650,children:(0,x.jsx)(sf.default,{isFeatured:k.isFeaturedRepl,repl:k,orgId:null==(l=k.org)?void 0:l.id,onCompleted:function(){return h(null)}})}),(0,x.jsx)(ez.Modal,{isOpen:"Share"===f,onRequestClose:function(){return h(null)},noPadding:!0,children:(0,x.jsx)(sm.PublishedReplShareInfo,{repl:k})}),(0,x.jsx)(ez.Modal,{isOpen:"UnpublishTemplate"===f,onRequestClose:function(){return h(null)},children:(0,x.jsxs)(F.View,{gap:24,children:[(0,x.jsxs)(F.View,{gap:8,children:[(0,x.jsx)(eA.Text,{variant:"headerBig",children:"Unpublish Template?"}),(0,x.jsx)(eA.Text,{children:"Unpublishing will remove this Template from community discovery. You can republish anytime."})]}),(0,x.jsxs)(F.View,{row:!0,gap:8,justify:"end",children:[(0,x.jsx)(eE.Button,{text:"Cancel",onClick:function(){return h(null)},disabled:R}),(0,x.jsx)(eE.Button,{text:R?"Unpublishing...":"Yes, unpublish this Template",colorway:"negative",iconLeft:(0,x.jsx)(si.default,{}),onClick:function(){return E()},disabled:R})]})]})}),("PublishTemplate"===f||"EditPublishedTemplateSettings"===f)&&(0,x.jsx)(ez.Modal,{isOpen:!0,onRequestClose:function(){return h(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,x.jsx)(sh.default,{source:"replEnvironment",replId:k.id,getDesktopLayoutState:d})}),(0,x.jsx)(ez.Modal,{isOpen:"UpdatePublishedTemplate"===f,onRequestClose:function(){return h(null)},noPadding:!0,children:(0,x.jsx)(sv.default,{repl:k,getDesktopLayoutState:d})})]}):null]})}var s$=e.i(76961),sY=e.i(663762),sQ=e.i(57527),sX=e.i(490262),sZ=e.i(596139),sJ=e.i(443394),s0=e.i(27820),s1=e.i(929872),s2=e.i(257811),s4=e.i(672685),s3=e.i(111724);function s5(e){var t=e.icon,n=e.title,r=e.subtitle,i=e.current,o=e.max,a=e.nextCreditsAt,s=e.isMonthly,l=Math.min(i,o),u=Math.min(l/o,1),c=(0,s4.getPercentageFillColor)({decimal:u}),d=i>=o,p=null!=a&&"countdown"===(0,s2.toCountdownDate)({date:a}).type;return(0,x.jsxs)(s1.Surface,{clsx:s3.default.usageCard,p:8,gap:8,background:"higher",children:[(0,x.jsxs)(F.View,{children:[(0,x.jsxs)(F.View,{row:!0,align:"baseline",justify:"space-between",grow:!0,children:[(0,x.jsxs)(F.View,{row:!0,align:"end",gap:6,children:[t,(0,x.jsx)(eA.Text,{height:"singleLine",style:{fontWeight:D.tokens.fontWeightMedium},children:n}),d?(0,x.jsx)(sb.default,{size:16,color:D.tokens.accentNegativeDefault}):null]}),(0,x.jsxs)(eA.Text,{color:"dimmer",children:[Math.floor(100*u),"%"]})]}),(0,x.jsx)(eA.Text,{variant:"small",color:"dimmer",children:r})]}),(0,x.jsx)(s0.MeasureBar,{css:s3.default.measureBar,total:o,current:l,color:c,tooltipHidden:!0}),a&&p&&d?(0,x.jsxs)(F.View,{row:!0,gap:3,children:[(0,x.jsxs)(eA.Text,{color:"dimmer",children:[s?"Monthly":"Daily"," credits will reset in"," "]}),(0,x.jsx)(s2.Timestamp,{date:a,dateFormat:"countdown",live:!0,textColor:"dimmer"})]}):null]})}function s8(e){var t=e.agentLimit,n=e.agentUsage,r=e.cloudUsage,i=e.cloudLimit,o=e.agentNextCreditsAt,a=e.cloudNextCreditsAt,s=e.isUnderMonthlyQuota,l=(0,sJ.getCurrentUrl)(),u=(0,Y.useFlag)({controlName:"flag-free-plan",default:!1});if(void 0===t||void 0===n)return(0,x.jsx)(o8.default,{});var c=void 0!==r&&void 0!==i&&r/i>=.25;return(0,x.jsxs)(F.View,{gap:16,children:[(0,x.jsxs)(F.View,{gap:8,children:[(0,x.jsx)(eA.Text,{variant:"subheadDefault",height:"singleLine",children:"Free usage limits"}),(0,x.jsx)(s5,{icon:(0,x.jsx)(r2.default,{size:16}),title:u?!1===s?"Monthly Agent credits":"Daily Agent credits":"Agent usage",subtitle:"Build, test, and iterate in fast mode",current:n,max:t,nextCreditsAt:o,isMonthly:!1===s}),u&&c?(0,x.jsx)(s5,{icon:(0,x.jsx)(sX.default,{size:16}),title:"Monthly Cloud credits",subtitle:"AI integrations, publishing, and storing assets",current:r,max:i,nextCreditsAt:a,isMonthly:!0}):null]}),(0,x.jsx)(ab.default,{text:"Upgrade to Replit ".concat(sZ.corePlanName),colorway:"primary",variant:"default",context:"agent_freemium_quota_v2",redirectPath:l,modalHeadingText:"Upgrade for more Agent usage",modalSubHeadingText:"Get more credits and build faster with Replit ".concat(sZ.corePlanName)})]})}var s6=e.i(573605),s9=e.i(176843),s7=2/3*100;function le(e){var t=e.usage,n=e.limit,r=e.percentThreshold,i=e.onHitThreshold,o=(0,W.useRef)(void 0);(0,W.useEffect)(function(){if(void 0!==t&&void 0!==n){var e=t/n*100;void 0!==o.current&&o.current/n*100<r&&e>=r&&i(),o.current=t}},[t,n,r,i])}var lt=(0,eN.cssRecord)({root:[eG.rcss.px(8),aO.interactive.nofill,eG.rcss.height(32),eG.rcss.align.center,eG.rcss.rowWithGap(4),eG.rcss.px(6),eG.rcss.borderRadius(),eG.rcss.color.foregroundDefault],measureBar:[eG.rcss.width(50),eG.rcss.height(8),{pointerEvents:"none"}],popoverWrapper:[eG.rcss.width(300)]});function ln(){var e,t,n,r,i,o,a,s=(0,z._)((0,W.useState)(!1),2),l=s[0],u=s[1],c=(0,s6.useGetAgentFreeUsage)(),d=c.agentUsage,p=c.agentUsageV2,f=c.refetch,h=(0,s9.useGetCloudFreeUsage)(),m=h.cloudUsage,v=h.refetch;(0,sQ.useOnPresentToUser)((0,W.useCallback)(function(e){"cloudBudgetExceeded"===e.$kind&&u(!0)},[])),p?(e=p.usage,t=p.limit,n=p.nextCreditsAt,a=p.isUnderMonthlyQuota):(e=null==d?void 0:d.usage,t=null==d?void 0:d.limit),m&&"FreemiumCloudUsageLimits"===m.__typename&&(r=null==m?void 0:m.usage,i=null==m?void 0:m.limit,o=null==m?void 0:m.nextCreditsAt),le({usage:e,limit:t,percentThreshold:s7,onHitThreshold:function(){u(!0)}}),le({usage:e,limit:t,percentThreshold:85,onHitThreshold:function(){u(!0)}}),le({usage:e,limit:t,percentThreshold:100,onHitThreshold:function(){u(!0),(0,eu.track)(ec.events.AGENT_USED,{action:"hit_freemium_quota"})}});var g=t&&e?e/t:0,y=i&&r?r/i:0;g=Math.min(g,1);var b=(0,s4.getPercentageFillColor)({decimal:g}),w=g>=1||y>=1;return g<.25&&y<.25?null:(0,x.jsxs)(aL.PopoverTrigger,{isOpen:l,onOpenChange:function(e){u(e),e&&(f(),v())},label:"Agent usage",placement:"bottom start",children:[(0,x.jsx)(eE.BaseButton,{css:lt.root,children:(0,x.jsxs)(F.View,{row:!0,align:"center",gap:8,children:[(0,x.jsx)(s0.MeasureBar,{css:lt.measureBar,total:null!=t?t:0,current:null!=e?e:0,color:b,tooltipHidden:!0}),(0,x.jsxs)(eA.Text,{variant:"small",color:"dimmer",children:[Math.floor(100*g),"%"]}),w?(0,x.jsx)(sb.default,{size:16,color:D.tokens.accentNegativeDefault}):null]})}),(0,x.jsx)(F.View,{css:lt.popoverWrapper,p:10,children:(0,x.jsx)(s8,{agentLimit:t,agentUsage:e,cloudUsage:r,cloudLimit:i,agentNextCreditsAt:n,cloudNextCreditsAt:o,isUnderMonthlyQuota:a})})]})}function lr(){var e=eB(),t=(0,eF.useKeyCombo)(eH.id),n=t?"".concat(eL," (").concat(t,")"):eL;return(0,x.jsx)(oM.IconButton,{alt:n,onClick:function(){return e()},size:28,dataCy:"command-bar-btn",children:(0,x.jsx)(rc.default,{})})}var li=e.i(182409),lo=e.i(961970),la=e.i(899869),ls=e.i(914279),ll=e.i(68893),lu=e.i(241703),lc=e.i(729678),ld=e.i(187505),lp=e.i(86159),lf=e.i(522821),lh=e.i(293265),lm=e.i(469429),lv=e.i(76430),lg=e.i(629536);e.i(442966);var lx=e.i(495891);e.i(581554);var ly=e.i(409570),lb=e.i(133522);e.i(11541),e.i(709867),e.i(680189);var lw=((r={}).Welcome="Welcome",r.AiFirstWorkspace="AiFirstWorkspace",r.Assistant="Assistant",r.Agent="Agent",r.SidebarDock="SidebarDock",r.Run="Run",r.Deploy="Deploy",r.NewTab="NewTab",r.Filetree="Filetree",r);(0,eN.cssRecord)({tooltipContainer:[eG.rcss.width("100%"),eG.rcss.maxWidth(300),eG.rcss.position.relative,eG.rcss.colWithGap(8),eG.rcss.pb(8)],textContent:[eG.rcss.width("100%"),{wordBreak:"break-word",overflowWrap:"anywhere"}]}),lg.AGENT_NAME;var l_="workspace-desktop-tour-2025",lj=e.i(795570),lS=e.i(183035),lk=e.i(36654),lC=e.i(823931);function lT(){var e=new Date().toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});return"video-".concat(e)}function lI(e){var t=e.onExport,n=e.isRecording,r=(0,z._)((0,W.useState)(lT),2),i=r[0],o=r[1],a=(0,z._)((0,W.useState)("idle"),2),s=a[0],l=a[1],u=(0,W.useRef)(null),c=(0,W.useCallback)(function(){o(lT())},[]);(0,W.useEffect)(function(){return function(){u.current&&clearTimeout(u.current)}},[]);var d=function(e){switch(e){case"exporting":return{text:"Exporting...",iconLeft:(0,x.jsx)(o8.default,{}),loading:!0,colorway:"primary"};case"success":return{text:"Exported",iconLeft:(0,x.jsx)(lS.default,{}),loading:!1,colorway:"positive"};case"idle":return{text:"Export",iconLeft:(0,x.jsx)(lk.default,{}),loading:!1,colorway:"primary"};default:return(0,oJ.default)(e)}}(s),p=n||!i.trim()||"idle"!==s;return(0,x.jsx)(F.View,{gap:12,p:20,clsx:lC.default.menu,children:(0,x.jsxs)(F.View,{gap:12,children:[(0,x.jsx)(eA.Text,{variant:"text",children:"Export video"}),(0,x.jsxs)(F.View,{gap:16,children:[(0,x.jsxs)(F.View,{gap:16,children:[(0,x.jsxs)(F.View,{gap:8,children:[(0,x.jsx)(eA.Text,{variant:"small",children:"Name"}),(0,x.jsx)(sD.Input,{value:i,onChange:function(e){return o(e.target.value)},disabled:n||"idle"!==s,placeholder:"Enter video name"})]}),(0,x.jsxs)(F.View,{gap:8,children:[(0,x.jsx)(eA.Text,{variant:"small",children:"Format"}),(0,x.jsx)(eA.Text,{variant:"small",children:"MP4 (1080p 16:9)"})]})]}),(0,x.jsx)(F.View,{children:(0,x.jsx)(eE.Button,{size:"small",colorway:d.colorway,text:d.text,iconLeft:d.iconLeft,onClick:function(){return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:l("exporting"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t({name:i,format:"mp4"})];case 2:return e.sent(),l("success"),u.current=setTimeout(function(){l("idle"),c()},2e3),[3,4];case 3:return e.sent(),l("idle"),[3,4];case 4:return[2]}})})()},disabled:p,loading:d.loading,clsx:lC.default.exportButton})})]})]})})}var lP=e.i(813675);function lE(){var e,t,n,r,i,o,a,s,l,u,c,d,p=(t=(e=(0,te.default)()).showConfirm,n=e.showError,i=(r=(0,z._)((0,W.useState)(!1),2))[0],o=r[1],s=(a=(0,z._)((0,W.useState)(!1),2))[0],l=a[1],u=(0,lP.useUrls)({addDevToolsSuffix:!1}),c=(0,rs.usePid2Callback)(function(e){return function(t){return(0,er._)(function(){var n,r;return(0,ei._)(this,function(i){switch(i.label){case 0:if(!(null==u?void 0:u.presentationUrl))throw Error("Unable to get preview URL for recording");return n="".concat((0,nk.sanitizeFilename)(t.name),".").concat(t.format),[4,e.browserVideoRecording.record.rpc({pageUrl:u.presentationUrl,localFilePath:n,video:{frameRate:60,resolution:{width:1920,height:1080},format:"mp4"}})];case 1:if((r=i.sent()).ok)return[2,{success:!0,filename:n}];throw Error(r.payload.message)}})})()}},[null==u?void 0:u.presentationUrl]),d=(0,W.useCallback)(function(e){return(0,er._)(function(){var r,i;return(0,ei._)(this,function(a){switch(a.label){case 0:if(!c)throw Error("Failed to connect");o(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,c(e)];case 2:return r=a.sent(),t("Video exported successfully to ".concat(r.filename)),l(!1),[3,5];case 3:throw i=a.sent(),n("Failed to export video: ".concat((0,tx._)(i,Error)?i.message:"Unknown error")),i;case 4:return o(!1),[7];case 5:return[2]}})})()},[c,t,n]),{isRecording:i,isOpen:s,setIsOpen:l,handleExportVideo:d}),f=p.isRecording,h=p.isOpen,m=p.setIsOpen,v=p.handleExportVideo,g=f?"Recording video...":"Export video with custom settings";return(0,x.jsx)(aV.Tooltip,{tooltip:h?void 0:g,children:(0,x.jsxs)(aL.PopoverTrigger,{isOpen:h,onOpenChange:m,label:"Export video",placement:"bottom start",children:[(0,x.jsx)(eE.Button,{size:"small",disabled:f,loading:f,iconLeft:f?(0,x.jsx)(o8.default,{}):(0,x.jsx)(lj.default,{}),text:f?"Recording...":"Export video"}),(0,x.jsx)(lI,{onExport:v,isRecording:f})]})})}var lR=e.i(980713);function lA(e){var t=e.color;return(0,x.jsxs)(F.View,{clsx:lR.default.deployIconWithStatus,children:[(0,x.jsx)(li.default,{}),(0,x.jsx)(F.View,{tag:"span",clsx:lR.default.deployIconDotWrapper,children:(0,x.jsx)(F.View,{tag:"span",clsx:lR.default.deployIconDot,style:{backgroundColor:t}})})]})}function lD(e){var t=e.text,n=e.icon,r=e.disabled,i=e.rounded,o=e.onClick,a=e.tooltip,s=e.loading,l=e.iconOnly,u=e.tourStepRef,c=e.colorway,d=(0,x.jsx)(eE.Button,{ref:u,loading:s,size:"small",text:t,iconLeft:n,colorway:c,clsx:i?s?lR.default.roundedButtonLoading:lR.default.roundedButton:s?lR.default.baseButtonLoading:lR.default.baseButton,disabled:r,onClick:o,"data-icon-only":l});return a?(0,x.jsx)(aV.Tooltip,{tooltip:a,children:d}):d}function lV(e){var t,n,r,i,o,a,s,l,u,c,d,p,f,h,m=e.iconOnly,v=e.shouldSkipOpeningPane,g=void 0!==v&&v,y=(0,ls.useDeploymentMode)(),b=(0,la.usePauseProvisionStage)(),w=(0,a_.useIsAgentStackRepl)().isAgentStackRepl,_=(0,lh.useAgentStackPlatformType)().agentStackPlatformType,j=function(e,t,n){switch(e){case ll.DeploymentMode.Ready:case ll.DeploymentMode.Suspended:case ll.DeploymentMode.ProcessingLifecycleCommand:case ll.DeploymentMode.Loading:switch(t){case ej.AgentStackPlatformType.Slack:return"Publish to Slack";case ej.AgentStackPlatformType.Telegram:return"Publish to Telegram";case ej.AgentStackPlatformType.TimeBased:return"Publish Automation";default:return"Publish"}case ll.DeploymentMode.Preparing:return"Preparing";case ll.DeploymentMode.PreparingDatabase:switch(n){case!0:return"Approve";case!1:return"Preparing"}break;case ll.DeploymentMode.Deploying:switch(t){case ej.AgentStackPlatformType.Slack:return"Publishing to Slack";case ej.AgentStackPlatformType.Telegram:return"Publishing to Telegram";case ej.AgentStackPlatformType.TimeBased:return"Publishing Automation";default:return"Publishing"}default:(0,oJ.default)(e)}}(y,w&&_||null,!!b),S=!1,k=!1;switch(y){case ll.DeploymentMode.Ready:case ll.DeploymentMode.Suspended:case ll.DeploymentMode.ProcessingLifecycleCommand:h=(0,x.jsx)(li.default,{});break;case ll.DeploymentMode.Loading:h=(0,x.jsx)(li.default,{}),S=!0;break;case ll.DeploymentMode.Preparing:h=(0,x.jsx)(li.default,{}),S=!0,k=!0;break;case ll.DeploymentMode.PreparingDatabase:b?(h=(0,x.jsx)(lo.default,{color:D.tokens.orangeStronger}),k=!0,S=!1):(h=(0,x.jsx)(o8.default,{}),k=!0,S=!0);break;case ll.DeploymentMode.Deploying:h=(0,x.jsx)(o8.default,{}),k=!0;break;default:(0,oJ.default)(y)}var C=(0,ep.useOpenTool)(),T=(0,nX.useSetDeploymentTriggerSource)(),I=!!(0,lf.useActiveAgentSessionId)(),P=(t=(0,tv.default)().dotReplit,r=(n=(0,z._)((0,W.useState)(null),2))[0],i=n[1],(0,W.useEffect)(function(){return t.watch(function(e){var t;if(e.error)return i(null);i((null==(t=e.config.deployment)?void 0:t.target)||null)})},[t]),r),E=(o=(0,nX.useDeployBuild)().deployBuild,a=(0,e3.default)(),s=(0,nX.useDotReplitService)(),l=(0,te.default)().showError,u=(0,nX.useSecretsService)(),c=(0,nX.useDeploymentSubdomain)(),d=(0,nX.useDeploymentSecurityScanState)().enabled,p=(0,lc.useGetSecretsAsDeploymentEntries)({secrets:u,replId:a}),f=!!(0,lf.useActiveAgentSessionId)(),(0,W.useCallback)(function(){return(0,er._)(function(){var e,t,n;return(0,ei._)(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,(0,lc.getDotReplitDeploymentConfig)(s)];case 1:return e=r.sent(),[4,p()];case 2:if(t=r.sent(),!(n=c)||!e.publicDir)return[2,!1];return[4,o({provider:ej.HostingBuildProvider.Static,subdomain:n,config:{buildCommand:e.buildCommand,publicDir:e.publicDir,appType:ej.DeployHostingBuildAppType.Static,ignorePorts:!1,runCommand:null},envVars:t,privacyMode:ej.DeployHostingBuildPrivacyMode.Public,ignoredSecrets:[],hasAgentSession:f,enableSecurityScan:d,createNeonProductionDatabase:!1,pushDevelopmentDatabaseObjects:null})];case 3:return r.sent(),[2,!0];case 4:return l(r.sent().message||"Failed to deploy"),[2,!1];case 5:return[2]}})})()},[o,l,s,p,c,d,f])),R=(0,lp.useSetTourStepTarget)(l_,lw.Deploy);return(0,x.jsx)(lD,{text:j,icon:h,onClick:function(){return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:if(y===ll.DeploymentMode.Ready&&(0,eu.track)(ec.events.DEPLOY_PROJECT_SELECTED,{source:"deploy_button",has_agent_session:I}),T("workspace_header_publish_button"),!g)return[3,2];return[4,E()];case 1:if(e.sent())return[2];e.label=2;case 2:return C({pane:{type:"deployments",flow:{skipIntro:null!==P&&I,isAgentDeployment:null!==P&&I}}}),[2]}})})()},disabled:S,loading:k,rounded:!0,iconOnly:void 0!==m&&m,tourStepRef:R,colorway:y===ll.DeploymentMode.Ready?"primary":void 0})}function lM(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.hideOpenPaneButton,i=n.forcePrimaryColorway,o=(0,ld.useTrackClick)().trackClick,a=(0,ls.useDeploymentMode)(),s=(0,nX.useDeploymentError)(),l=(0,nX.useActiveBuildAction)(),u=(0,nX.useSetDeploymentTriggerSource)(),c=(0,ep.useOpenTool)(),d=(0,nX.useDeployBuild)({openDeploymentsPane:function(){c({pane:{type:"deployments"}})}}).redeployWithNoNewOptions,p=(0,te.default)().showError,f=(0,la.usePauseProvisionStage)(),h=(0,lh.useAgentStackPlatformType)().agentStackPlatformType,m=(0,lv.useIsExpoStackWithLaunchEnabled)(),v=(0,z._)((0,W.useState)(void 0),2),g=v[0],y=v[1];(0,W.useEffect)(function(){if(l&&"HostingBuildDeployStatusAction"===l.__typename)switch(l.status){case ej.HostingBuildStatus.Success:case ej.HostingBuildStatus.Failed:y(l.status)}},[l]),(0,W.useEffect)(function(){a===ll.DeploymentMode.Deploying&&y(void 0)},[a]);var b=function(){switch(h){case ej.AgentStackPlatformType.Slack:return"Republish to Slack";case ej.AgentStackPlatformType.Telegram:return"Republish to Telegram";case ej.AgentStackPlatformType.TimeBased:return"Republish Automation";default:return"Republish"}}(),w=function(){switch(h){case ej.AgentStackPlatformType.Slack:return"Publishing to Slack";case ej.AgentStackPlatformType.Telegram:return"Publishing to Telegram";case ej.AgentStackPlatformType.TimeBased:return"Publishing Automation";default:return"Publishing"}}(),_=void 0,j=!1,S=!1;switch(a){case ll.DeploymentMode.Ready:e="Republish",t=(0,x.jsx)(li.default,{}),g&&(g===ej.HostingBuildStatus.Success?(t=(0,x.jsx)(lA,{color:D.tokens.accentPositiveDefault}),_="Success"):(t=(0,x.jsx)(lA,{color:D.tokens.accentNegativeDefault}),_="An error occurred"));break;case ll.DeploymentMode.Suspended:e=b,t=(0,x.jsx)(lA,{color:D.tokens.greyDefault}),_="Published app suspended";break;case ll.DeploymentMode.Loading:e=b,t=(0,x.jsx)(li.default,{}),j=!0,S=!0;break;case ll.DeploymentMode.ProcessingLifecycleCommand:e=b,t=(0,x.jsx)(lA,{color:D.tokens.orangeStronger}),S=!0,_="Updating published app";break;case ll.DeploymentMode.Preparing:e="Preparing",t=(0,x.jsx)(o8.default,{}),S=!0,j=!0;break;case ll.DeploymentMode.PreparingDatabase:f?(e="Approve",t=(0,x.jsx)(lo.default,{color:D.tokens.orangeStronger}),S=!0,j=!1):(e="Preparing",t=(0,x.jsx)(o8.default,{}),S=!0,j=!0);break;case ll.DeploymentMode.Deploying:e=w,t=(0,x.jsx)(o8.default,{}),S=!0;break;default:(0,oJ.default)(a)}return s&&(e="Error",t=(0,x.jsx)(lA,{color:D.tokens.accentNegativeDefault}),_=s),(0,x.jsxs)(F.View,{row:!0,gap:2,children:[(0,x.jsx)(lD,{text:e,icon:t,tooltip:_,onClick:function(){o({productArea:"publishing",target:"redeploy_button"}),(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:if(m||a===ll.DeploymentMode.Deploying||a===ll.DeploymentMode.Suspended||a===ll.DeploymentMode.ProcessingLifecycleCommand||a===ll.DeploymentMode.Preparing||a===ll.DeploymentMode.PreparingDatabase||g&&(y(void 0),g===ej.HostingBuildStatus.Failed)||s)return c({pane:{type:"deployments",data:{view:lu.Views.Deployment}}}),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),u("workspace_header_republish_button"),[4,d({hasAgentSession:!0})];case 2:return e.sent(),[3,4];case 3:return p(e.sent().message),[3,4];case 4:return[2]}})})()},disabled:j,loading:S,colorway:i?"primary":void 0}),r?null:(0,x.jsx)(oM.IconButton,{filled:!0,size:28,alt:"Open Publishing pane",onClick:function(){c({pane:{type:"deployments"}})},clsx:lR.default.openPaneButton,children:(0,x.jsx)(n4.default,{})})]})}var lF=function(){var e=(0,ep.useOpenTool)();return(0,x.jsx)(eE.Button,{size:"small",text:"Republish",iconLeft:(0,x.jsx)(li.default,{}),onClick:function(){e({pane:{type:"deployments"}})}})};function lO(e){var t,n,r,i,o,a=e.iconOnly,s=e.isDesignMode,l=e.hideOpenPaneButton,u=e.forcePrimaryColorway,c=(0,nX.useDeploymentId)(),d=(0,nX.useDeploymentCurrentBuild)(),p=(0,nX.useDeploymentDeployability)().deployability,f=(0,nX.useDeploymentSessionOrg)(),h=(n=(t=(0,z._)((0,W.useState)(null),2))[0],r=t[1],i=(0,W.useRef)(!1),(0,ar.usePid2)(function(e){return(0,er._)(function(){var t,n;return(0,ei._)(this,function(o){switch(o.label){case 0:if(i.current)return[2];return[4,e.agentReplConfig.getReplConfig.rpc({})];case 1:if(!1===(t=o.sent()).ok)return[2];return i.current=!0,r(null!=(n=t.payload.stack)?n:null),[2]}})})()},[]),n),m=!!(null==f?void 0:f.id),v=(0,lm.useHasAgentCheckpoint)();return(o=c&&d?p.redeploy.isAuthorized?(0,x.jsx)(lM,{hideOpenPaneButton:l,forcePrimaryColorway:u}):(0,x.jsx)(lF,{}):(0,x.jsx)(lV,{iconOnly:a,shouldSkipOpeningPane:s&&!m&&v}),"VIDEO_JS"===h)?(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",children:[(0,x.jsx)(lE,{}),o]}):o}var lL=e.i(927600),lB=e.i(239612);function lU(){var e=(0,w._)(["\n  fragment ProjectHeaderMenuOrg on Org {\n    id\n    slug\n  }\n"]);return lU=function(){return e},e}function lN(){var e=(0,w._)(["\n  query ProjectHeaderMenu($id: String!, $input: ProjectReplsInput!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        title\n        ...CreateProjectForkRepl\n        project {\n          id\n          mainRepl {\n            id\n            title\n            ...CreateProjectForkRepl\n          }\n          repls(input: $input) {\n            items {\n              id\n              title\n              ...ReplLinkRepl\n            }\n            pageInfo {\n              hasNextPage\n              nextCursor\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return lN=function(){return e},e}var lG={};(0,_.gql)(lU());var lz=(0,_.gql)(lN(),lB.CreateProjectForkReplFragmentDoc,rf.ReplLinkReplFragmentDoc),lW=e.i(691056),lH=e.i(611361),lq=e.i(700582),lK=e.i(537548),l$=e.i(91720),lY=e.i(988676),lQ=e.i(85742),lX=e.i(458496),lX=lX,lZ=e.i(698043),lJ=e.i(498540),l0=e.i(690821),l1=(0,eN.cssRecord)({self:[eG.rcss.display.grid,eG.rcss.p(4),{gap:4,alignItems:"stretch"}],list:[eG.rcss.maxHeight(640)],listItem:[lX.default.item,eG.rcss.px(8),eG.rcss.height(28),{span:eG.rcss.color.foregroundDefault}],listItemLabel:{flex:1},listButtonLink:[eG.rcss.height(28),eG.rcss.px(6),eG.rcss.transition.none],currentReplIcon:[eG.rcss.color.foregroundDimmer],tourWrapper:[eG.rcss.p(8)]});function l2(e){var t=e.label,n=e.icon,r=(0,iz._)(e,["label","icon"]);return(0,x.jsxs)(lQ.BaseListBoxItem,(0,td._)((0,b._)({css:l1.listItem},r),{textValue:t,children:[(0,x.jsx)(lQ.ListBoxItemLabel,{css:l1.listItemLabel,children:t}),(0,x.jsx)(r4.IconProvider,{size:16,children:n})]}))}var l4=(0,W.forwardRef)(function(e,t){var n,r,i,o,a,s,l,u,c,d,p,f,h=(0,e3.default)(),m=(0,z._)((0,W.useState)(""),2),v=m[0],g=m[1],y=(0,lp.useTourStep)(lK.projectsTour.id,lK.StepIds.Forks),w=(n={variables:{id:h,input:{}},notifyOnNetworkStatusChange:!0},r=(0,b._)({},lG,n),j.useQuery(lz,r)),_=w.refetch,S=(0,te.default)(),k=S.showConfirm,C=S.showError,T=(0,z._)((0,lq.useCreateProjectFork)({onFork:function(){k("App forked, redirecting...")},onError:function(){C("Error creating fork - please try again")}}),2),I=T[0],P=T[1].loading;(0,lW.default)(function(){_({input:{filters:{title:{search:v}}},id:h})},[v],300);var E=(null==(i=w.data)?void 0:i.getRepl.__typename)==="Repl"?w.data.getRepl.project:null,R=(null==(o=w.previousData)?void 0:o.getRepl.__typename)==="Repl"?null==(a=w.previousData.getRepl.project)?void 0:a.repls.items:null,A=null!=(d=null==E?void 0:E.mainRepl)?d:(null==(s=w.previousData)?void 0:s.getRepl.__typename)==="Repl"&&null!=(c=null==(l=w.previousData.getRepl.project)?void 0:l.mainRepl)?c:null,D=(null==(u=w.data)?void 0:u.getRepl.__typename)==="Repl"?w.data.getRepl:null,V=(0,lH.useProjectPresenceUsersByRepl)({orgId:e.org.id,projectId:e.projectId}),M=(0,lp.useActiveTourStep)();return(0,x.jsxs)("div",{css:l1.self,ref:t,children:[(0,x.jsxs)(lZ.SearchableListBox,{children:[(0,x.jsx)(lJ.SearchField,{"aria-label":"Search Apps in Project",placeholder:"Search by App title...",onChange:g,isLoading:w.loading,autoFocus:!0}),(0,x.jsx)(lQ.ListBox,{isLoading:w.loading,items:null!=(f=null!=(p=null==E?void 0:E.repls.items)?p:R)?f:[],css:l1.list,children:function(e){var t;return(0,x.jsx)(l2,(0,td._)((0,b._)({icon:e.id===h?(0,x.jsx)(aV.Tooltip,{tooltip:"You are here",placement:"right",children:(0,x.jsx)(lS.default,{css:l1.currentReplIcon})}):void 0,isDisabled:e.id===h,id:e.id,label:e.title},(0,sG.replLinkProps)(e)),{sessions:null!=(t=V[e.id])?t:[]}),e.id)}})]}),(0,x.jsx)(lY.DividerH,{}),(0,x.jsxs)(F.View,{children:[(0,x.jsx)(l$.ButtonLink,(0,td._)((0,b._)({alignment:"start"},(0,sp.orgProjectLink)({org:e.org,projectId:e.projectId})),{target:"_blank",iconLeft:(0,x.jsx)(n2.default,{}),text:"Project dashboard",variant:"nofill",css:l1.listButtonLink})),(0,x.jsxs)(sU.PopupMenu,{elevated:!1,placement:"right top",trigger:(0,x.jsx)(eE.Button,{alignment:"start",variant:"nofill",text:"New fork",iconLeft:P?(0,x.jsx)(o8.default,{}):(0,x.jsx)(eJ.default,{}),loading:P,css:l1.listButtonLink}),children:[D?(0,x.jsx)(sU.MenuItem,{label:"From here (".concat(D.title,")"),isDisabled:P,onAction:function(){I({forkSource:"projectHeaderMenu",orgId:e.org.id,repl:D})}}):null,D&&A&&D.id!==A.id?(0,x.jsx)(sU.MenuItem,{label:"From main App (".concat(A.title,")"),isDisabled:!A||P,onAction:function(){A&&I({orgId:e.org.id,repl:A,forkSource:"projectHeaderMenu"})}}):null]}),y.isActive&&M?(0,x.jsx)("div",{css:l1.tourWrapper,children:(0,x.jsx)(l0.Tour,{content:M.content,title:M.title,onDismiss:y.next,onCurrentStepChange:y.goto,currentStepIndex:lK.projectsTour.steps.findIndex(function(e){return e.id===lK.StepIds.Forks}),totalSteps:lK.projectsTour.steps.length})}):null]})]})}),l3=(0,eN.cssRecord)({projectLinkTooltip:[eG.rcss.maxWidth(400),eG.rcss.flex.shrink(2)],projectLink:[eG.rcss.px(6),eG.rcss.noDragRegion,eG.rcss.flex.growAndShrink(1)],inheritanceChevron:[eG.rcss.color.outlineStrongest,{marginInline:-1}]});function l5(e){var t=e.repl,n=e.hideTitle,r=(0,z._)((0,W.useState)(!1),2),i=r[0],o=r[1];return t.project&&t.org?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(aV.Tooltip,{tooltip:"Project forks",css:l3.projectLinkTooltip,isOpen:!i&&void 0,children:(0,x.jsxs)(aL.PopoverTrigger,{label:"Project Menu",isOpen:i,onOpenChange:o,placement:"bottom start",children:[(0,x.jsx)(eE.Button,{iconLeft:(0,x.jsx)(aA,{replId:t.id,replIconUrl:t.iconUrl}),text:n?"":t.project.title,variant:"nofill",css:l3.projectLink}),(0,x.jsx)(l4,{org:t.org,projectId:t.project.id})]})}),(0,x.jsx)(lL.default,{size:12,css:l3.inheritanceChevron})]}):null}var l8=e.i(952521);function l6(e){var t=e.onDismiss,n=e.targetRef,r=(0,W.useMemo)(function(){return function(){return(0,x.jsxs)(F.View,{gap:12,style:{width:300},children:[(0,x.jsxs)(F.View,{gap:4,children:[(0,x.jsxs)(F.View,{row:!0,align:"center",gap:8,children:[(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:"Feedback inbox"}),(0,x.jsx)(sN.Pill,{text:"New",colorway:"primary",variant:"muted",compact:!0})]}),(0,x.jsx)(eA.Text,{children:"Enable the feedback widget to collect real-time feedback from viewers of your published app"})]}),(0,x.jsx)(eE.Button,{variant:"outlined",text:"Got it",iconRight:(0,x.jsx)(lS.default,{}),onClick:t,stretch:!0})]})}},[t]);return(0,x.jsx)(aL.RawPopover,{triggerRef:n,placement:"bottom",isOpen:!0,isNonModal:!0,arrow:!0,children:(0,x.jsx)(l0.Tour,{content:r,onDismiss:t,colorway:!1,hideCloseButton:!0,hideNavigation:!0,compact:!0,hideBorder:!0})})}var l9=e.i(803640),l7=e.i(561873),ue=e.i(782672),ut=e.i(550801);function un(e){var t=e.nixError,n=(0,z._)((0,W.useState)(!1),2),r=n[0],i=n[1],o=rC(),a=(0,W.useCallback)(function(e){o({type:"codeEditor",data:{path:e}})},[o]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(oM.IconButton,{alt:"App is in recovery mode",onClick:function(){i(!0)},children:["error"===t.status?(0,x.jsx)(sb.default,{color:D.tokens.orangeStronger}):null,"rebuilding-after-error"===t.status?(0,x.jsx)(o8.default,{}):null]}),(0,x.jsx)(ut.NixIsBrokenModal,{isOpen:r,setIsOpen:i,nixError:t,openFile:a})]})}function ur(){var e=(0,w._)(["\n  query WorkspaceRunButton($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return ur=function(){return e},e}var ui={},uo=(0,_.gql)(ur()),ua=e.i(353583),us=(h={},(0,R._)(h,rW.RunState.IDLE,"Run"),(0,R._)(h,rW.RunState.RUNNING,"Stop"),(0,R._)(h,rW.RunState.STOPPING,"Stopping"),(0,R._)(h,rW.RunState.OFFLINE,"Working"),(0,R._)(h,rW.RunState.BEFORE_RUN,"Working"),h);function ul(e){var t=e.stop,n=e.cancel;return(0,x.jsxs)(F.View,{children:[(0,x.jsx)(eA.Text,{children:"Stopping your project while the agent is working can lead to unexpected interruptions that incur additional costs. Are you sure you want to stop?"}),(0,x.jsxs)(F.View,{pt:12,row:!0,gap:12,justify:"end",children:[(0,x.jsx)(eE.Button,{text:"Cancel",onClick:n}),(0,x.jsx)(eE.Button,{iconLeft:(0,x.jsx)(l7.default,{}),text:"Stop",onClick:function(){t(),n()},colorway:"negative"})]})]})}var uu=e.i(60166);function uc(e){var t={running:(0,x.jsx)(l7.default,{color:D.tokens.foregroundDimmest}),stopped:(0,x.jsx)(l9.default,{color:e.disabled?D.tokens.foregroundDimmest:D.tokens.accentPositiveStronger}),loading:(0,x.jsx)(o8.default,{color:D.tokens.foregroundDimmest})}[e.status];return(0,x.jsx)(V.ShadesSurface,{elevate:!!e.elevated&&"1x",clsx:uu.default.root,children:(0,x.jsx)(oM.IconButton,{disabled:e.disabled,dataCy:"ws-run-btn",alt:"Run or stop the app",tooltipContents:e.tooltip,onClick:e.onClick,size:28,children:t})})}function ud(){var e,t,n,r,i,o,a,s,l,u,c,d,p,f,h,m,v,g,y,w,_,S,k,C=(a=(null==(o=(r={variables:{id:(0,e3.default)()}},i=(0,b._)({},ui,r),j.useQuery(uo,i)).data)?void 0:o.getRepl.__typename)==="Repl"?o.getRepl:null,s=(t=null==(e=(0,lp.useTourStep)("workspace-desktop-tour-2024",lw.Run))?void 0:e.isActive,{tourRefs:e.tourRef,isAnyTourStepActive:t}).tourRefs,l=(0,eF.useKeyCombo)(iT.run.id),c=(u=(0,z._)((0,W.useState)(!1),2))[0],d=u[1],f=null!=(n=null==(p=(0,r0.useWorkflowsRunner)())?void 0:p.workflowId)?n:rW.PID1_RUNNER_NAME,m=(h=(0,r0.useRunInfo)()).isRunning,v=h.isAgentRunningWorkflow,g=h.isOffline,y=h.isWorkflowsLoading,w=h.isDisabled,_=(0,W.useMemo)(function(){return g||y},[g,y]),S=(0,ua.useIsAgentRunButtonNotConfigured)(),k=(0,r0.useOnToggleRun)(),(0,W.useEffect)(function(){v&&c&&d(!1)},[v,c]),{tourRefs:s,isAgentRunningWorkflow:v,isOffline:g,isOfflineOrLoading:_,isWorkflowsLoading:y,runButtonName:f,runShortcut:l,isRunning:m,isDisabled:w,handleRunButtonClick:(0,W.useCallback)(function(){if(a){var e,t,n,r,i,o,s;(0,eu.track)(ec.events.PROJECT_RAN,{placement:"primary_btn",replId:a.id,replTitle:a.title,rootOriginReplUrl:a.rootOriginReplUrl,templateTitle:null==(n=a.source)||null==(t=n.release)||null==(e=t.repl)?void 0:e.title,templateOwner:null==(s=a.source)||null==(o=s.release)||null==(i=o.repl)||null==(r=i.owner)?void 0:r.username})}(0,eu.track)(ec.events.WORKSPACE,{action:"run_button_used",usage:"clicked",source:"header",runner:"workflows"}),k()},[a,k]),dropdownEnabled:!_&&!S,isAgentRunButtonNotConfigured:S}),T=C.isOfflineOrLoading,I=C.isRunning,P=C.handleRunButtonClick,E=C.isAgentRunningWorkflow,R=C.isDisabled,A=C.runButtonName,D=C.runShortcut,V=C.isAgentRunButtonNotConfigured,M=(0,ue.useNixError)(),O=(0,z._)((0,W.useState)(!1),2),L=O[0],B=O[1],U=I?"running":"stopped";T&&(U="loading");var N=E?function(){return B(!0)}:P;return M?(0,x.jsx)(un,{nixError:M}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(uc,{disabled:R||V,status:U,isAgentRunningWorkflow:E,onClick:N,tooltip:function(e){var t=e.isOffline,n=e.isAgentRunningWorkflow,r=e.isDisabled,i=e.isRunning,o=e.runButtonName,a=e.shortcut,s=e.isAgentRunButtonNotConfigured,l=e.isStatusButton;if(t)return"Connecting to the workspace";if(n)return l?"Stop App (Agent is running it)":"Agent is running your App";if(s)return"Agent hasn't configured the run button yet";if(r)return"Run button is not configured";var u=(0,rW.removeRunPrefix)(o);return(0,x.jsxs)(F.View,{px:4,gap:4,justify:"center",align:"center",children:[o?(0,x.jsx)(eA.Text,{color:"dimmer",variant:"small",children:i?us[rW.RunState.RUNNING]+" all workflows":us[rW.RunState.IDLE]+" ".concat(u)}):null,a?(0,x.jsx)(rT.KeyComboBlocks,{keyCombo:a,fontSize:12}):null]})}({isRunning:I,isAgentRunningWorkflow:E,isDisabled:R,isOffline:T,runButtonName:A,shortcut:D,isAgentRunButtonNotConfigured:V,isStatusButton:!0})}),(0,x.jsx)(ez.Modal,{isOpen:L,onRequestClose:function(){return B(!1)},children:(0,x.jsx)(ul,{stop:P,cancel:function(){return B(!1)}})})]})}var up=e.i(652830);function uf(e){var t=e.shortcut,n=e.content;return(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",children:[(0,x.jsxs)(eA.Text,{multiline:!1,variant:"small",children:["Toggle ",n]}),t?(0,x.jsx)(rT.KeyComboBlocks,{fontSize:10,keyCombo:t}):null]})}var uh=e.i(700283);function um(e){var t=e.flipped,n=(0,ep.useSidebar)(),r=(0,i1.default)(n.activeContent),i=(0,i1.default)(n.isOpen)&&"filetree"===r,o=(0,eF.useKeyCombo)(oS.id);(0,eF.useCommandBinding)(function(){return[oS.id,function(){return n.toggle()}]},[n]);var a=i?lb.default:up.default;return(0,x.jsx)(oM.IconButton,{onClick:function(){return n.toggleContent("filetree")},alt:"Toggle files",dataCy:"toggle-files-sidebar",tooltipContents:(0,x.jsx)(uf,{shortcut:o,content:"files"}),size:28,children:(0,x.jsx)(a,{clsx:(0,R._)({},uh.default.flipped,t)})})}var uv=e.i(11029),ug=e.i(360118);function ux(e){var t=e.icon,n=e.title,r=e.description;return(0,x.jsxs)(F.View,{row:!0,gap:8,grow:!0,shrink:!0,children:[(0,x.jsx)(F.View,{p:2,align:"center",justify:"center",children:t}),(0,x.jsxs)(F.View,{children:[(0,x.jsx)(eA.Text,{children:n}),r?(0,x.jsx)(eA.Text,{variant:"small",children:r}):null]})]})}function uy(e){var t=e.onDismiss,n=e.targetRef,r=(0,W.useMemo)(function(){return function(){return(0,x.jsxs)(F.View,{gap:12,style:{width:300},children:[(0,x.jsxs)(F.View,{gap:4,children:[(0,x.jsxs)(F.View,{row:!0,align:"center",gap:8,children:[(0,x.jsx)(r3,{size:16}),(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:"Inbox"})]}),(0,x.jsxs)(F.View,{gap:8,children:[(0,x.jsx)(eA.Text,{children:"Access all incoming feedback in one place"}),(0,x.jsx)(lY.DividerH,{}),(0,x.jsxs)(F.View,{gap:8,children:[(0,x.jsx)(ux,{icon:(0,x.jsx)(ug.default,{size:16}),title:"Share",description:"Send the published app link"}),(0,x.jsx)(ux,{icon:(0,x.jsx)(uv.default,{size:16}),title:"Review feedback",description:"Review targeted feedback from viewers"}),(0,x.jsx)(ux,{icon:(0,x.jsx)(iL.default,{size:16}),title:"Send to agent",description:"Send feedback to agent for fixes"})]})]})]}),(0,x.jsx)(eE.Button,{variant:"outlined",text:"Got it",iconRight:(0,x.jsx)(lS.default,{}),onClick:t,stretch:!0})]})}},[t]);return(0,x.jsx)(aL.RawPopover,{triggerRef:n,placement:"bottom",isOpen:!0,isNonModal:!0,arrow:!0,children:(0,x.jsx)(l0.Tour,{content:r,onDismiss:t,colorway:!1,hideCloseButton:!0,hideNavigation:!0,compact:!0,hideBorder:!0})})}var ub=e.i(787108);function uw(){var e,t,n,r=(0,ep.useSidebar)(),i=(0,eF.useKeyCombo)(oS.id),o=ig(),a=o.isAvailable,s=o.pendingCount,l=o.refetchFeedbackQuery,u=(0,z._)((0,ag.default)("inbox-button"),2),c=u[0],d=u[1],p=(t=(e=(0,l8.useMemoedDismissibleElement)("inbox-onboarding-tour")).isLoading,n=e.isDone,{shouldDisplay:!t&&a&&!n,dismiss:e.setAsDone,isLoading:t}),f=p.shouldDisplay,h=p.dismiss;return((0,nX.useLatestBuildActionUpdate)(function(e){"HostingBuildDeployStatusAction"===e.__typename&&e.status===ej.HostingBuildStatus.Success&&l()}),a)?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(F.View,{clsx:ub.default.container,children:[(0,x.jsx)(oM.IconButton,{onClick:function(){return r.toggleContent("inbox")},alt:"Toggle inbox",dataCy:"toggle-inbox-sidebar",tooltipContents:(0,x.jsx)(uf,{shortcut:i,content:"inbox"}),size:28,ref:d,children:(0,x.jsx)(r3,{})}),s>0?(0,x.jsx)(F.View,{clsx:ub.default.indicator}):null]}),f&&c.current?(0,x.jsx)(uy,{targetRef:c,onDismiss:h}):null]}):null}var u_=e.i(749556),uj=e.i(923893),uS=e.i(433788),uk=e.i(915598),uC=e.i(732947);function uT(){var e=(0,w._)(["\n  fragment ReplMultiplayerOrg on Org {\n    ...OrgMetadata\n    membersCount\n  }\n  ","\n"]);return uT=function(){return e},e}function uI(){var e=(0,w._)(["\n  fragment ReplMultiplayerOrgGroup on OrgGroup {\n    ...OrgGroupsOrgGroup\n  }\n  ","\n"]);return uI=function(){return e},e}function uP(){var e=(0,w._)(["\n  fragment ReplMultiplayerGroup on ReplMultiplayerGroupScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return uP=function(){return e},e}function uE(){var e=(0,w._)(["\n  fragment ReplMultiplayerIndividual on ReplMultiplayerIndividualScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    user {\n      __typename\n      id\n      displayName\n      image\n      username\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return uE=function(){return e},e}function uR(){var e=(0,w._)(["\n  fragment ReplMultiplayerStatus on Repl {\n    id\n    title\n    isPrivate\n    url\n    org {\n      ...ReplMultiplayerOrg\n    }\n    multiplayerStatus {\n      __typename\n      groups {\n        __typename\n        ...ReplMultiplayerGroup\n      }\n      individuals {\n        __typename\n        ...ReplMultiplayerIndividual\n      }\n    }\n    authorizations {\n      editPermissions {\n        isAuthorized\n        message\n      }\n      editVisibility {\n        isAuthorized\n        message\n      }\n      removeSelf {\n        isAuthorized\n        message\n      }\n      viewPermissions {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return uR=function(){return e},e}function uA(){var e=(0,w._)(["\n  query ReplMultiplayerStatus($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        __typename\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return uA=function(){return e},e}function uD(){var e=(0,w._)(["\n  mutation UpdateOrgReplVisibility($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return uD=function(){return e},e}var uV={},uM=(0,_.gql)(uT(),uC.OrgMetadataFragmentDoc),uF=(0,_.gql)(uI(),uk.OrgGroupsOrgGroupFragmentDoc),uO=(0,_.gql)(uP(),uF),uL=(0,_.gql)(uE(),uF),uB=(0,_.gql)(uR(),uM,uO,uL),uU=(0,_.gql)(uA(),uB),uN=(0,_.gql)(uD(),uB),uG=e.i(766774),uz=e.i(167392),uW=e.i(399245),uH=e.i(953436),uq=e.i(813479),uK=e.i(306694),u$=e.i(967667),uY=e.i(479420),uQ=(0,eN.cssRecord)({section:[eG.rcss.colWithGap(12),eG.rcss.px(12)],sectionWithBorders:[eG.rcss.colWithGap(12),eG.rcss.p(12),eG.rcss.border({direction:"top"}),eG.rcss.border({direction:"bottom"}),{"&:last-of-type":{borderBottom:0,paddingBottom:0}}],sectionTitle:[eG.rcss.fontWeight.medium],subtitle:[eG.rcss.fontWeight.medium],item:[eG.rcss.rowWithGap(16),eG.rcss.align.center,eG.rcss.justify.spaceBetween],groupName:[eG.rcss.colWithGap(6),eG.rcss.justify.center],visibilitySelector:[eG.rcss.position.relative,eG.rcss.justify.start,eG.rcss.align.center]}),uX=function(e){var t,n,r,i,o,a,s,l,u,c,d,p=e.replId,f=(0,e4.useCurrentUserId)(),h=(0,$.default)(),m=(t={variables:{replId:p}},n=(0,b._)({},uV,t),j.useQuery(uU,n)),v=m.data,g=m.loading,y=m.error,w=m.refetch,_=(null==v||null==(r=v.getRepl)?void 0:r.__typename)==="Repl"?v.getRepl:void 0,S=(null!=(u=null==_||null==(i=_.multiplayerStatus)?void 0:i.groups)?u:[]).filter(function(e){return"custom"!==e.group.type}),k=(null!=(c=null==_||null==(o=_.multiplayerStatus)?void 0:o.groups)?c:[]).filter(function(e){return"custom"===e.group.type}),C=null!=(d=null==_||null==(a=_.multiplayerStatus)?void 0:a.individuals)?d:[],T=S.map(function(e){return e.group}).concat(k.map(function(e){return e.group})).concat(C.map(function(e){return e.group})),I=function(){return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return[4,w()];case 1:return e.sent(),[2]}})})()};return(null==y?void 0:y.message)?(0,x.jsx)(F.View,{gap:12,children:(0,x.jsx)(eR.StatusBanner,{colorway:"negative",text:y.message})}):g||!_?(0,x.jsx)(F.View,{px:12,align:"center",justify:"center",children:(0,x.jsx)(o8.default,{})}):(0,x.jsxs)(F.View,{gap:12,children:[(0,x.jsxs)(F.View,{tag:"header",px:12,gap:2,children:[(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:"Share App"}),(0,x.jsxs)(F.View,{css:uQ.subtitle,row:!0,gap:4,children:[_.org?(0,x.jsxs)(eA.Text,{variant:"small",color:"dimmer",children:[_.org.name," /"]}):null,(0,x.jsx)(eA.Text,{variant:"small",children:_.title})]})]}),(null==(s=_.org)?void 0:s.id)&&_.authorizations.editPermissions.isAuthorized?(0,x.jsx)(F.View,{css:uQ.sectionWithBorders,children:(0,x.jsx)(u0,{orgId:_.org.id,selectedGroups:T,repl:_,onScopeChange:I})}):null,(0,x.jsxs)(F.View,{css:uQ.section,children:[(0,x.jsx)(eA.Text,{variant:"small",css:uQ.sectionTitle,children:"Roles with access"}),(0,x.jsx)(F.View,{gap:12,children:S.map(function(e){var t=e.group,n=e.options;return(0,x.jsx)(uJ,{repl:_,group:t,options:n,onScopeChange:I},t.id)})}),k.length>0?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(eA.Text,{variant:"small",css:uQ.sectionTitle,children:"Groups with access"}),(0,x.jsx)(F.View,{gap:12,children:k.map(function(e){var t=e.group,n=e.options;return(0,x.jsx)(uJ,{repl:_,group:t,options:n,onScopeChange:I},t.id)})})]}):null]}),C.length>0?(0,x.jsxs)(F.View,{css:uQ.section,children:[(0,x.jsx)(eA.Text,{variant:"small",css:uQ.sectionTitle,children:"People with access"}),C.map(function(e){var t=e.group,n=e.user,r=e.options;return(0,x.jsx)(uZ,{currentUserId:f,repl:_,group:t,user:n,options:r,onScopeChange:I},n.id)})]}):null,(0,x.jsx)(F.View,{css:uQ.section,children:(0,x.jsx)(u$.OrgPermissionsInfoBanner,{type:"repl"})}),(null==(l=_.org)?void 0:l.id)?(0,x.jsx)(F.View,{css:uQ.sectionWithBorders,children:(0,x.jsxs)(F.View,{row:!0,justify:"space-between",children:[(0,x.jsx)(u1,{repl:_,org:_.org}),h?null:(0,x.jsx)(l$.ButtonLink,(0,td._)((0,b._)({prefetch:!1},(0,sG.replViewLinkProps)(_)),{iconRight:(0,x.jsx)(n2.default,{}),variant:"outlined",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}}))]})}):null]})},uZ=function(e){var t=e.user,n=e.currentUserId,r=e.repl,i=e.group,o=e.options,a=e.onScopeChange,s=n===t.id;return(0,x.jsxs)(F.View,{css:uQ.item,children:[(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsx)(sB.Avatar,{src:t.image,username:t.username,fullName:t.displayName,size:24}),(0,x.jsxs)(F.View,{css:uQ.groupName,children:[(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsx)(eA.Text,{height:"singleLine",children:t.username}),s?(0,x.jsx)(eA.Text,{height:"singleLine",color:"dimmest",children:"(You)"}):null]}),t.username!==t.displayName?(0,x.jsx)(eA.Text,{variant:"small",color:"dimmest",height:"singleLine",children:t.displayName}):null]})]}),(0,x.jsx)(F.View,{children:(0,x.jsx)(uY.default,{repl:r,group:i,options:o,onScopeChange:a})})]})},uJ=function(e){var t=e.repl,n=e.group,r=e.options,i=e.onScopeChange;return(0,x.jsxs)(F.View,{css:uQ.item,children:[(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsx)(uq.default,{group:n}),(0,x.jsxs)(F.View,{css:uQ.groupName,children:[(0,x.jsx)(eA.Text,{height:"singleLine",children:n.name}),(0,x.jsxs)(F.View,{row:!0,gap:8,children:[n.isMember?(0,x.jsx)(eA.Text,{variant:"small",color:"dimmest",height:"singleLine",children:"(you)"}):null,null!=n.memberCount?(0,x.jsx)(eA.Text,{variant:"small",color:"dimmest",height:"singleLine",children:(0,or.default)("member",n.memberCount,!0)}):null]})]})]}),(0,x.jsx)(F.View,{children:(0,x.jsx)(uY.default,{repl:t,group:n,options:r,onScopeChange:i})})]})},u0=function(e){var t,n,r,i,o,a,s,l=e.orgId,u=e.selectedGroups,c=e.repl,d=e.onScopeChange,p="group-search-".concat((0,W.useId)()),f=(0,z._)((0,W.useState)(),2),h=f[0],m=f[1],v=(0,z._)((0,W.useState)(""),2),g=v[0],y=v[1],b=(0,z._)((0,uG.useOrgGroupReplScopeOptionsLazyQuery)(),2),w=b[0],_=b[1],j=_.data,S=_.error,k=_.loading,C=j&&(null==(n=j.currentUser)||null==(t=n.org)?void 0:t.__typename)==="Org"&&"OrgGroup"===j.currentUser.org.group.__typename&&(null==(r=j.currentUser.org.group.replScopeOptions)?void 0:r.__typename)==="OrgGroupReplScopeOptions"?j.currentUser.org.group.replScopeOptions.items[0].options:void 0,T=(null==j?void 0:j.currentUser)&&"Org"!==j.currentUser.org.__typename?j.currentUser.org.message:void 0,I=(null==j?void 0:j.currentUser)&&"Org"===j.currentUser.org.__typename&&"OrgGroup"!==j.currentUser.org.group.__typename?j.currentUser.org.group.message:void 0,P=(null==j?void 0:j.currentUser)&&"Org"===j.currentUser.org.__typename&&"OrgGroup"===j.currentUser.org.group.__typename&&(null==(i=j.currentUser.org.group.replScopeOptions)?void 0:i.__typename)!=="OrgGroupReplScopeOptions"?null==(o=j.currentUser.org.group.replScopeOptions)?void 0:o.message:void 0,E=null!=(s=null!=(a=null!=T?T:I)?a:P)?s:null==S?void 0:S.message;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsx)(F.View,{grow:!0,shrink:!0,children:(0,x.jsx)(uK.default,{inputId:p,orgId:l,types:[ej.OrgGroupType.Custom,ej.OrgGroupType.SystemIndividual],selectedGroups:u,value:g,setValue:y,onSelect:function(e){m(e),y(e.name),w({variables:{orgId:l,groupId:e.id,input:{replIds:[c.id]}}})},onClear:function(){return m(void 0)},placeholder:"Share with groups or other members"})}),h&&C||k?(0,x.jsxs)(F.View,{pl:24,row:!0,align:"center",children:[h&&C&&!k?(0,x.jsx)(uY.default,{group:h,repl:c,options:C,onScopeChange:function(){return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return[4,d()];case 1:return e.sent(),y(""),m(void 0),[2]}})})()}}):null,k?(0,x.jsx)(o8.default,{size:24}):null]}):null]}),E?(0,x.jsx)(eR.StatusBanner,{colorway:"negative",text:E}):null]})},u1=function(e){var t,n,r,i=e.repl,o=e.org,a=(0,z._)((0,W.useState)(),2),s=a[0],l=a[1],u=(0,z._)((0,W.useState)(),2),c=u[0],d=u[1],p=(0,z._)((t={variables:{input:{id:i.id}},onError:function(e){d(e.message)}},n=(0,b._)({},uV,t),r9.useMutation(uN,n)),2),f=p[0],h=p[1].loading,m="repl-visibility-".concat((0,W.useId)()),v=i.authorizations.editVisibility.isAuthorized,g=i.authorizations.editVisibility.message,y=[{id:"private",icon:(0,x.jsx)(uH.default,{}),name:"Internal to ".concat(o.name),selected:i.isPrivate,description:"Only selected organization members can view or edit."},{id:"public",icon:(0,x.jsx)(uW.default,{}),name:"Public on Replit",selected:!i.isPrivate,description:"Anyone on Replit can see or fork. You choose who can edit."}],w=y.find(function(e){return e.selected}),_=w?(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",children:[w.icon," ",w.name]}):void 0;return r=c?(0,x.jsx)(aV.Tooltip,{tooltip:c,children:(0,x.jsx)(sb.default,{size:24,color:D.tokens.accentNegativeDefault})}):h?(0,x.jsx)(o8.default,{size:24}):s?(0,x.jsx)(lS.default,{size:24,color:D.tokens.accentPositiveDefault}):null,(0,x.jsxs)(F.View,{css:uQ.visibilitySelector,grow:!0,shrink:!0,row:!0,gap:4,children:[(0,x.jsx)(aV.Tooltip,{tooltip:g,isDisabled:v,children:(0,x.jsx)(sU.PopupMenu,{id:m,trigger:(0,x.jsx)(eE.Button,{iconRight:(0,x.jsx)(uz.default,{}),text:null!=_?_:"Control Repl visibility",disabled:!v}),"aria-label":"Control ".concat(i.title," visibility"),onAction:function(e){var t="private"===e;t!==i.isPrivate&&(d(void 0),f({variables:{input:{id:i.id,isPrivate:t}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,td._)((0,b._)({},i),{isPrivate:t})}},onCompleted:function(e){"UpdateReplPayload"===e.updateRepl.__typename&&(l(!0),setTimeout(function(){return l(!1)},2e3))}}))},items:y,disallowEmptySelection:!0,isDisabled:!v,children:function(e){return(0,x.jsx)(sU.MenuItem,{id:e.id,label:e.name,description:e.description,icon:e.icon},e.id)}})}),r?(0,x.jsx)(F.View,{children:r}):null]})},u2=e.i(84466),u4=e.i(635925);function u3(){var e=(0,w._)(["\n  query TeamMultiplayerManagerMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          type\n          permission\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n          inviteGuests {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            username\n            displayName\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n              availableSeats\n            }\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return u3=function(){return e},e}var u5={},u8=(0,_.gql)(u3(),u4.MultiplayerUserFragmentDoc),u6=e.i(612343),u9=e.i(204070),u7=(0,eN.cssRecord)({root:[eG.rcss.color.foregroundDefault,eG.rcss.p(24),eG.rcss.display.grid,{gap:D.tokens.space24}],controls:[eG.rcss.display.grid,{gap:D.tokens.space8,gridAutoFlow:"column"}],message:[eG.rcss.pb(16)],textContainer:[eG.rcss.textAlign.center]});function ce(e){var t=e.email,n=e.onInvite,r=e.onCancel;return(0,x.jsxs)("div",{css:u7.root,children:[(0,x.jsx)(eA.Header,{level:3,textAlign:"center",variant:"subheadBig",children:"Are you sure?"}),(0,x.jsx)("div",{css:u7.textContainer,children:(0,x.jsxs)(eA.Text,{variant:"text",children:[(0,x.jsx)("p",{css:u7.message,children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,x.jsx)("p",{children:t})]})}),(0,x.jsxs)("div",{css:u7.controls,children:[(0,x.jsx)(eE.Button,{onClick:r,text:"Cancel"}),(0,x.jsx)(eE.Button,{colorway:"primary",onClick:n,text:"Invite"})]})]})}var ct=e.i(802482),cn=e.i(613349),cr=e.i(552144);function ci(e){var t,n,r,i,o,a,s,l,u,c,d,p,f=e.replId,h=(0,y.useRouter)(),m=(0,Z.isInBonsaiWebview)(h),v=(0,sY.useActiveUsers)(),g=(0,z._)((0,W.useState)(null),2),w=g[0],_=g[1],S=(t={variables:{replId:f}},n=(0,b._)({},u5,t),j.useQuery(u8,n)),k=S.data,C=S.loading,T=(null==k||null==(r=k.currentUser)?void 0:r.id)||null,I=(null==k?void 0:k.getRepl.__typename)==="Repl"?k.getRepl:null,P=(0,u9.default)({isMobileApp:m,isTeam:!0,replId:f}),E=P.addOrInviteReplMultiplayer,R=P.loadingAddMutation;if(I&&!I.owner)throw Error("Cannot manage members on anon repls");if((null==I?void 0:I.owner)&&(null==I?void 0:I.owner.__typename)!=="Team")throw Error("Expect repl owned by a team");var A=(null==I||null==(i=I.owner)?void 0:i.__typename)==="Team"?I.owner:null,M=!(null==A||null==(o=A.capabilities)?void 0:o.hasValidSubscription)&&!(null==A||null==(a=A.capabilities)?void 0:a.isBusinessPlan),O=(null!=(s=null==I?void 0:I.collaborators)?s:[]).reduce(function(e,t){var n=t.user.username;return -1===e.indexOf(n)&&e.push(),e},[]),L=null==I?void 0:I.multiplayerInvites,B=(null!=(l=null==I?void 0:I.collaborators)?l:[]).filter(function(e){return"guest"===e.type}).map(function(e){return e.user}),U=B.length,N=(null!=(u=null==I?void 0:I.collaborators)?u:[]).filter(function(e){return"member"===e.type}).map(function(e){return e.user}),G=(null!=(c=null==I?void 0:I.collaborators)?c:[]).filter(function(e){return"admin"===e.type}).map(function(e){return e.user}),H=G.some(function(e){return e.id===T}),q=N.filter(function(e){return v.some(function(t){return t.id===e.id})}),K=N.filter(function(e){return!v.some(function(t){return t.id===e.id})}),$=null!=(d=null==I?void 0:I.authorizations.editPermissions.isAuthorized)&&d,Y=null!=(p=null==I?void 0:I.authorizations.inviteGuests.isAuthorized)&&p;return C?(0,x.jsx)(s1.Surface,{css:[uS.MultiplayerControlCSS.root],background:"default",children:(0,x.jsxs)(F.View,{css:uS.MultiplayerControlCSS.loading,children:[(0,x.jsx)(o8.default,{color:D.tokens.foregroundDimmer}),(0,x.jsx)(eA.Text,{color:"dimmer",multiline:!1,children:"Loading..."})]})}):(0,x.jsxs)(s1.Surface,{css:uS.MultiplayerControlCSS.root,background:"default",children:[(0,x.jsx)(F.View,{css:[uS.MultiplayerControlCSS.header,m&&uS.MultiplayerControlCSS.header_mobile],children:(0,x.jsx)(F.View,{css:uS.MultiplayerControlCSS.titleContainer,children:(0,x.jsx)(eA.Text,{variant:"subheadDefault",multiline:!1,children:"Team Multiplayers"})})}),Y?(0,x.jsx)(F.View,{css:uS.MultiplayerControlCSS.searchContainer,children:(0,x.jsx)(cn.default,{existingUsernames:O,onSubmit:function(e){if(!R){if((0,u2.default)(e))return void _(e);E({variables:{input:{replId:f,target:{method:ej.MultiplayerInviteMethod.Username,value:e},level:ej.ReplPermissionLevel.Rw}}})}},isDisabled:C})}):null,!Y&&M?(0,x.jsx)(F.View,{px:16,children:(0,x.jsx)(cr.StatusBannerButton,{iconLeft:(0,x.jsx)(u6.default,{}),text:'You can add people to this App by inviting them to the "'.concat(null==A?void 0:A.displayName,'" Friends Team.'),href:"/teams/".concat(null==A?void 0:A.username),target:"_blank"})}):null,(0,x.jsx)(ez.Modal,{isOpen:!!w,onRequestClose:function(){return _(null)},children:w?(0,x.jsx)(ce,{email:w,onInvite:function(){E({variables:{input:{replId:f,target:{method:ej.MultiplayerInviteMethod.Email,value:w},level:ej.ReplPermissionLevel.Rw}}}),_(null)},onCancel:function(){return _(null)}}):null}),(0,x.jsxs)(V.ShadesSurface,{css:uS.MultiplayerControlCSS.userList,elevate:!1,children:[(null==L?void 0:L.length)?(0,x.jsxs)(F.View,{css:uS.MultiplayerControlCSS.userGroup.root,children:[(0,x.jsx)(uS.UserGroupTitle,{title:"Pending Invitations",color:D.tokens.outlineStrongest,count:U}),null==L?void 0:L.map(function(e){return(0,x.jsx)(ct.default,{canEditMultiplayers:H||!1,email:e.email,isPendingInvitation:!0,replId:f},e.email)})]}):null,B.length?(0,x.jsxs)(F.View,{css:uS.MultiplayerControlCSS.userGroup.root,children:[(0,x.jsx)(uS.UserGroupTitle,{title:"External Guests",color:D.tokens.outlineStrongest,count:null==B?void 0:B.length,tooltip:"External Guests are not members of your team and were invited via a Join Link or by username."}),B.map(function(e){return(0,x.jsx)(ct.default,{canEditMultiplayers:H||!1,isPendingInvitation:!1,replId:f,user:e},e.id)})]}):null,q.length?(0,x.jsxs)(F.View,{css:uS.MultiplayerControlCSS.userGroup.root,children:[(0,x.jsx)(uS.UserGroupTitle,{title:"Online Members",color:D.tokens.greenStrongest,count:null==q?void 0:q.length}),q.map(function(e){return(0,x.jsx)(ct.default,{isPendingInvitation:!1,canEditMultiplayers:!!H,replId:f,user:e},e.id)})]}):null,K.length?(0,x.jsxs)(F.View,{css:uS.MultiplayerControlCSS.userGroup.root,children:[(0,x.jsx)(uS.UserGroupTitle,{title:"Offline Members",color:D.tokens.outlineStrongest,count:null==K?void 0:K.length}),K.map(function(e){return(0,x.jsx)(ct.default,{isPendingInvitation:!1,canEditMultiplayers:!!H,replId:f,user:e},e.id)})]}):null,G.length?(0,x.jsxs)(F.View,{css:uS.MultiplayerControlCSS.userGroup.root,children:[(0,x.jsx)(uS.UserGroupTitle,{title:"Admins",color:D.tokens.accentPrimaryStronger,count:G.length}),G.map(function(e){return(0,x.jsx)(ct.default,{canEditMultiplayers:!1,isPendingInvitation:!1,user:e,replId:f},e.id)})]}):null,$||C?null:(0,x.jsx)(eA.Text,{color:"dimmer",variant:"small",multiline:!1,children:"Only admins can add and remove members to multiplayer"})]})]})}var co=(0,eN.cssRecord)({self:[eG.rcss.borderRadius(8),eG.rcss.align.stretch,eG.rcss.flex.growAndShrink(1),eG.rcss.maxHeight("calc(100vh - ".concat(O.HEADER_HEIGHT+12,"px)")),eG.rcss.backgroundColor.backgroundDefault]});let ca=function(e){var t,n=e.replId,r=e.handleUpgradeTriggered,i=e.isTeamRepl,o=e.org;return t=o?(0,x.jsx)(uX,{replId:n}):i?(0,x.jsx)(ci,{replId:n}):(0,x.jsx)(uS.default,{replId:n,handleUpgradeTriggered:r}),(0,x.jsxs)(F.View,{css:co.self,py:12,gap:12,children:[t,o?null:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(lY.DividerH,{}),(0,x.jsx)(uj.default,{replId:n})]})]})};var cs=e.i(317941);function cl(e){var t,n,r,i=e.users,o=void 0===i?[]:i,a=e.onAvatarClick,s=e.repl,l=(null==(t=s.owner)?void 0:t.__typename)==="Team",u=(0,z._)((0,W.useState)(!1),2),c=u[0],d=u[1];return(0,x.jsxs)(F.View,{row:!0,align:"center",gap:4,children:[o.length?(0,x.jsx)(cu,{users:o,onAvatarClick:a}):null,(0,x.jsxs)(aL.PopoverTrigger,{isOpen:c,onOpenChange:d,label:"Home",placement:"bottom start",children:[(null==(n=s.org)?void 0:n.type)==="team"?(0,x.jsx)(eE.Button,{size:"small",iconLeft:(0,x.jsx)(u_.default,{}),text:"Access"}):(0,x.jsx)(oM.IconButton,{alt:"Invite collaborator",size:28,children:(0,x.jsx)(u_.default,{})}),(0,x.jsx)(F.View,{clsx:cs.default.inviteDialog,children:(0,x.jsx)(ca,{replId:s.id,isTeamRepl:l,org:null!=(r=s.org)?r:void 0,handleUpgradeTriggered:function(){}})})]})]})}function cu(e){var t=e.users,n=e.onAvatarClick,r=t.slice(0,2),i=t.length-2,o=(0,z._)((0,W.useState)(!1),2),a=o[0],s=o[1];return(0,x.jsxs)(F.View,{row:!0,gap:4,children:[r.map(function(e,t){return(0,x.jsx)(cc,{onClick:function(){return n(e)},user:e,stacked:t>0},e.username)}),i>0?(0,x.jsxs)(aL.PopoverTrigger,{isOpen:a,onOpenChange:s,label:"Home",placement:"bottom start",children:[(0,x.jsx)(eE.Button,{size:"small",text:"+".concat(i),clsx:[cs.default.stacked,cs.default.remainingCountButton]}),(0,x.jsxs)(sU.Menu,{children:[(0,x.jsx)(sU.MenuHeader,{text:"Observe..."}),t.slice(2).map(function(e){return(0,x.jsx)(sU.MenuItem,{onAction:function(){return n(e)},icon:(0,x.jsx)(sB.Avatar,{size:24,src:e.image||null,username:e.username,ringColor:e.color}),label:e.username},e.username)})]})]}):null]})}function cc(e){var t=e.user,n=e.stacked,r=e.onClick;return(0,x.jsx)(oM.IconButton,{alt:"Observe ".concat(t.username),onClick:r,clsx:[cs.default.avatar,(0,R._)({},cs.default.stacked,n)],children:(0,x.jsx)(sB.Avatar,{size:24,src:t.image||null,username:t.username,ringColor:t.color})})}var cd=e.i(625251),cp=e.i(183462),cf=e.i(987143),ch=e.i(825516);function cm(){var e=(0,w._)(["\n  fragment WorkspaceHeaderNavMenuRepl on Repl {\n    id\n    org {\n      id\n      slug\n    }\n    ...ReplEnvironmentHeaderInviteButtonRepl\n  }\n  ","\n"]);return cm=function(){return e},e}function cv(){var e=(0,w._)(["\n  fragment WorkspaceHeaderNavMenuCurrentUser on CurrentUser {\n    id\n    isMemberOfAnyOrg\n    image\n    username\n    ...UserLinkCurrentUser\n    ...OrgSwitcherCurrentUser\n  }\n  ","\n  ","\n"]);return cv=function(){return e},e}function cg(){var e=(0,w._)(["\n  query WorkspaceHeaderNavMenu($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...WorkspaceHeaderNavMenuRepl\n      }\n    }\n    currentUser {\n      ...WorkspaceHeaderNavMenuCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return cg=function(){return e},e}var cx={},cy=(0,_.gql)(cm(),ch.ReplEnvironmentHeaderInviteButtonReplFragmentDoc),cb=(0,_.gql)(cv(),cf.UserLinkCurrentUserFragmentDoc,cp.OrgSwitcherCurrentUserFragmentDoc),cw=(0,_.gql)(cg(),cy,cb),c_=e.i(641555),cj=e.i(769822),cS=e.i(548733),ck=e.i(927196),cC=e.i(845411),cT=e.i(805518),cI=e.i(935267),cP=e.i(429878),cE=e.i(330069),cR=e.i(266899),cA=e.i(273929),cD=e.i(495764),cV=e.i(531603),cM=e.i(371816),cF=e.i(995045),cO=e.i(344718),cL=e.i(841412),cB=e.i(988072),cU=e.i(346606),cN=e.i(384132);function cG(e){var t,n,r,i=(0,z._)((0,W.useState)(null),2),o=i[0],a=i[1],s=(0,cI.default)().count,l=(0,s6.useGetAgentFreeUsage)({skip:!e.showUpsell}).refetch,u=(0,s9.useGetCloudFreeUsage)({skip:!e.showUpsell}).refetch,c=(0,Z.useIsInBonsaiWebview)(),d=(0,Z.useDoesBonsaiSupportFeature)("simplifiedTabletUI"),p=c&&d,f=(t={variables:{replId:e.replId},skip:p},n=(0,b._)({},cx,t),j.useQuery(cw,n)).data,h=(null==f?void 0:f.getRepl.__typename)==="Repl"?f.getRepl:null,m=null==f?void 0:f.currentUser,v=function(e){var t,n,r,i,o,a,s,l={ssr:!1,fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"},u=cD.RECENT_REPLS_SIDEBAR_MENU_COUNT,c=(0,cR.useSidebarRecentReplsQuery)((0,b._)({variables:{count:u},skip:null===e||!!(null==(t=e.org)?void 0:t.id)},l)),d=(0,cR.useSidebarRecentOrgReplsQuery)((0,b._)({variables:{count:u,orgId:null==e||null==(n=e.org)?void 0:n.id},skip:null==e||!(null==e||null==(r=e.org)?void 0:r.id)},l));if(!e)return null;var p=[];return((null==(a=d.data)||null==(o=a.currentUser)||null==(i=o.org)?void 0:i.__typename)==="Org"?p=d.data.currentUser.org.recentRepls.items:(null==(s=c.data)?void 0:s.allRecentRepls)&&(p=c.data.allRecentRepls),(p=p.filter(function(t){return t.id!==e.id}).slice(0,cA.RECENT_REPLS_DISPLAY_COUNT)).length)?p:null}(h);if(p)return(0,x.jsx)(F.View,{clsx:cN.default.emptySpacer});var g=null==h||null==(r=h.org)?void 0:r.slug,y=g?(0,sp.orgLinks)({slug:g}).home:{href:"/home",as:"/~"};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(ck.AgentStatusProvider,{children:(0,x.jsx)(L.NavMenu,{onOpenChange:function(t){t&&e.showUpsell&&(l(),u())},children:m&&h?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(sU.Menu,{"aria-label":"Navigation menu",clsx:cN.default.menu,children:[(0,x.jsx)(sU.MenuItem,{icon:(0,x.jsx)(uH.default,{}),label:"Home",href:y.href,as:y.as}),v?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(cH,{repls:v}),(0,x.jsx)(sU.Separator,{})]}):null,m?(0,x.jsx)(cM.AccountItems,{setActiveModal:function(e){return a({type:e})},currentUser:m,notificationCount:s}):null,(null==m?void 0:m.isMemberOfAnyOrg)?(0,x.jsx)(cB.TeamsItem,{currentUser:m}):null,(0,x.jsx)(cU.ThemeItem,{}),(0,x.jsx)(cO.HelpItem,{setActiveModal:function(e){return a({type:e})},children:(0,x.jsx)(cK,{setActiveModal:a})}),m?(0,x.jsx)(cF.DevCopyUsernameItem,{currentUser:m}):null,(0,x.jsx)(sU.Separator,{}),(0,x.jsx)(cL.LogoutItem,{})]}),e.showUpsell?(0,x.jsx)(F.View,{pb:10,children:(0,x.jsx)(cW,{})}):null]}):(0,x.jsx)(o8.default,{})})}),(0,x.jsxs)(ez.Modal,{isOpen:null!==o,onRequestClose:function(){return a(null)},children:[(null==o?void 0:o.type)==="support"?(0,x.jsx)(cV.default,{onRequestClose:function(){return a(null)}}):null,(null==o?void 0:o.type)==="notifications"?(0,x.jsx)(cz,{}):null,(null==o?void 0:o.type)==="referral"?(0,x.jsx)(cS.ReferralLinkModalContent,{trackingContext:"workspace-nav-menu"}):null,(null==o?void 0:o.type)==="feedback"?(0,x.jsx)(cP.AIFeedback,{session:o.session,onClose:function(){return a(null)}}):null]})]})}function cz(){return(0,x.jsxs)(F.View,{gap:12,children:[(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:"Notifications"}),(0,x.jsx)(cT.default,{count:10,loadMore:!0,markAsSeen:!0})]})}function cW(){var e=(0,s6.useGetAgentFreeUsage)(),t=e.agentUsage,n=e.agentUsageV2,r=(0,s9.useGetCloudFreeUsage)().cloudUsage;return(0,x.jsx)(F.View,{gap:8,px:8,pt:12,clsx:cN.default.usage,children:(0,x.jsx)(s8,{agentLimit:n?n.limit:null==t?void 0:t.limit,agentUsage:n?n.usage:null==t?void 0:t.usage,cloudLimit:null==r?void 0:r.limit,cloudUsage:null==r?void 0:r.usage,agentNextCreditsAt:null==n?void 0:n.nextCreditsAt,cloudNextCreditsAt:null==r?void 0:r.nextCreditsAt,isUnderMonthlyQuota:null==n?void 0:n.isUnderMonthlyQuota})})}function cH(e){var t=e.repls;return(0,x.jsxs)(cd.MenuSection,{children:[(0,x.jsx)(sU.MenuHeader,{text:"Recent"}),t.map(function(e){return(0,x.jsx)(cq,{repl:e},e.id)})]})}function cq(e){var t=e.repl,n=(0,ek.useObservable)((0,cC.useReplAgentStatus)(t));return(0,x.jsxs)(sU.BaseMenuItem,(0,td._)((0,b._)({textValue:t.title,clsx:cN.default.repl},(0,sG.replLinkProps)(t)),{children:[(0,x.jsxs)(F.View,{align:"center",row:!0,gap:6,grow:!0,shrink:!0,pl:0,children:[(0,x.jsx)(rw.default,{size:20,alt:t.title,iconUrl:t.iconUrl}),(0,x.jsx)(eA.Text,{translate:"no",children:t.title})]}),n&&"Paused"!==n.label?(0,x.jsx)(eA.Text,{variant:"small",color:"dimmer",children:n.label}):null]}),t.id)}function cK(e){var t=(0,cE.useShouldSeeFreemiumExperience)().shouldSeeFreemiumExperience,n=(0,at.useChatter)(),r=(0,c_.useObservableMemo)(function(){return n.sessions.agent.current},[n]);return!r||t?null:(0,x.jsx)(sU.MenuItem,{icon:(0,x.jsx)(cj.default,{}),label:"Submit feedback",onAction:function(){return e.setActiveModal({type:"feedback",session:r})}})}e.i(242933);var c$=e.i(424360),cY=e.i(279606);function cQ(e){var t=(0,ep.useCornerPaneHeaderWidths)(),n=(0,ep.useHeaderInset)(),r=(0,ep.useSidebarWidths)();return(0,W.useMemo)(function(){var i,o,a;return i={headerWidth:cY.Observable.from(n).select(function(t){return t[e]}),tabHeaderWidth:t.select(function(t){return t[e]}),sidebarWidth:cY.Observable.from(r).select(function(t){return t[e]})},o=null,a=null,new c$.Multicast(function(e){return cY.Observable.combine(i.headerWidth,i.tabHeaderWidth,i.sidebarWidth).subscribe(function(t){var n=(0,z._)(t,3),r=n[0],i=n[1],s=n[2];if(null!==r){var l=null===a?null:a-r+10;if(null!==a&&s>a){"large"!==o&&(o="large",e.next("large"));return}if(i<=200&&"small"!==o){o="small",a=r,e.next("small");return}i>200&&"large"!==o&&(null===l||i>200+l)&&(o="large",e.next("large"))}})})},[t,n,r,e])}var cX=e.i(782514),cZ=e.i(342571),cJ=(0,D.cvarsFrom)("index.module.css",["--z-index","--height"]);function c0(e){var t=(0,ep.useSetHeaderInset)(),n=(0,$.default)();return(0,ax.default)(function(r){n||t(e,r.width)})}function c1(){var e;return e={},(0,R._)(e,cJ.zIndex,iM.zIndexLevels.tiledPane.toString()),(0,R._)(e,cJ.height,O.APP_HEADER_HEIGHT+"px"),e}function c2(e){var t=e.repl,n=(0,ep.useIsAgentCentered)(),r=(0,$.default)();return(0,x.jsxs)(cX.TrackingHierarchyProvider,{hierarchy:{surface:"workspace_header"},children:[r?(0,x.jsx)(F.View,{clsx:cZ.default.desktopDragRegion}):null,(0,x.jsx)(c4,{repl:t}),(0,x.jsx)(c5,{repl:t}),n?(0,x.jsx)(c8,{repl:t}):null]})}function c4(e){var t=e.repl,n=(0,ep.useAgentLayout)(),r=(0,i1.default)(n.agentFiletreeOrder),i=c1(),o=(0,ep.useGetLayoutState)(),a=c0("left"),s=(0,ek.useObservable)(cQ("left")),l=(0,s$.useIsAgentWebDesignMockup)().isWebDesignMockup,u=(0,at.useChatter)(),c=(0,ek.useObservable)(u.sessions.agent.current),d=(0,Y.useFlag)({controlName:"flag-repl-info-dropdown-menu"});return(0,x.jsx)(F.View,{row:!0,align:"center",innerRef:a,style:i,clsx:cZ.default.left,children:(0,x.jsxs)(F.View,{px:6,row:!0,align:"center",children:[(0,x.jsx)(A.default,{}),"agent-filetree"!==r?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(um,{}),(0,x.jsx)(uw,{})]}):(0,x.jsx)(oL,{}),(0,x.jsx)(cG,{replId:t.id,showUpsell:"small"===s&&t.authorizations.viewFreemiumExperience.isAuthorized}),(0,x.jsx)(l5,{hideTitle:"small"===s,repl:t}),(0,x.jsxs)(F.View,{row:!0,gap:4,align:"center",children:[d?(0,x.jsx)(sK,{repl:t,hideTitle:"small"===s,getDesktopLayoutState:o}):(0,x.jsx)(aU,{repl:t,getDesktopLayoutState:o,hideTitle:"small"===s}),(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",children:[l?(0,x.jsx)(aw.DesignMockupPill,{session:c}):(0,x.jsx)(ud,{}),"small"!==s&&t.authorizations.viewFreemiumExperience.isAuthorized?(0,x.jsx)(c3,{replUrl:t.url}):null]})]})]})})}function c3(e){var t=e.replUrl;return(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",children:[(0,x.jsx)(ln,{}),(0,x.jsx)(ab.default,{text:"Upgrade",context:"agent_freemium_quota_v2",colorway:"primary",variant:"default",size:"small",redirectPath:t,modalHeadingText:"Compare Replit plans",modalSubHeadingText:"Autonomy for all. Choose the best plan for you."})]})}function c5(e){var t,n,r,i,o,a,s,l,u,c,d,p,f,h=e.repl,m=c0("right"),v=c1(),g=(0,ep.useAgentLayout)(),y=(0,i1.default)(g.agentFiletreeOrder),b=(0,ek.useObservable)(cQ("right")),w=h.authorizations.viewPermissions.isAuthorized,_=null==(p=h.authorizations)||null==(d=p.viewDeploymentConfig)?void 0:d.isAuthorized,j=(null==(f=h.hostingDeployment)?void 0:f.__typename)==="HostingDeployment"?h.hostingDeployment:null,S=(0,a_.useIsAgentStackRepl)().isAgentStackRepl,k=(null==j?void 0:j.replitAppSubdomain)?"https://".concat(j.replitAppSubdomain,".replit.app"):null,C=(null==j?void 0:j.latestBuildStatus)==="running"||(null==j?void 0:j.latestBuildStatus)==="success",T=(0,sY.useActiveUsers)(),I=(t=(0,ep.useOpenFile)(),n=(0,tv.default)().presence,r=(0,ex.useGetActiveFile)(),i=(0,e7.default)(t),(0,W.useCallback)(function(e){var t=e.username,o=e.id,a=n.getFollowedUser();if((null==a?void 0:a.username)===t)return void n.unfollowUser();n.followUser(t);var s=n.getActiveFileForUser(o),l=r();s&&s!==l&&i.current({path:s})},[i,r,n])),P=(0,te.default)().showConfirm,E=(0,z._)((0,ag.default)("deploy-button"),2),A=E[0],D=E[1],V=(o=(0,e3.default)(),a=(0,ic.useShowAgentInbox)(o).isEnabled,s=ig().isEnabled,u=(l=(0,l8.useMemoedDismissibleElement)("publish-feedback-tour")).isLoading,c=l.isDone,{shouldDisplay:!u&&a&&!s&&!c,dismiss:l.setAsDone,isLoading:u}),M=V.shouldDisplay,O=V.dismiss,L=(0,$.default)(),B=(0,ay.useIsWindows)();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(F.View,{row:!0,align:"center",style:v,clsx:cZ.default.right,innerRef:m,children:(0,x.jsxs)(F.View,{px:6,row:!0,gap:4,align:"center",clsx:(0,R._)({},cZ.default.desktopAppWindowsOs,B&&L),children:[(0,x.jsx)(lr,{}),w?(0,x.jsx)(cl,{repl:h,users:T,onAvatarClick:I}):null,_&&!S&&k&&C?(0,x.jsx)(eE.Button,{size:"small",text:"Share",iconLeft:(0,x.jsx)(av.default,{}),colorway:"primary",onClick:function(){(0,re.default)(k),P("App link copied to clipboard!")}}):null,_?(0,x.jsx)(F.View,{innerRef:D,children:(0,x.jsx)(lO,{iconOnly:"small"===b,isDesignMode:!!h.config.isWebDesignMockup})}):null,"agent-filetree"===y?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(uw,{}),(0,x.jsx)(um,{flipped:!0})]}):(0,x.jsx)(oL,{})]})}),M&&A.current?(0,x.jsx)(l6,{targetRef:A,onDismiss:O}):null]})}function c8(e){var t=e.repl,n=c1();(0,ep.useTransitionToAgentPresentation)();var r=(0,Y.useFlag)({controlName:"flag-agent-debug-info-button"});return(0,x.jsxs)(V.ShadesSurface,{row:!0,clsx:cZ.default.planningHeader,justify:"space-between",align:"center",px:6,style:n,elevate:!1,children:[(0,x.jsxs)(F.View,{row:!0,align:"center",clsx:cZ.default.planningHeaderLeft,children:[(0,x.jsx)(A.default,{}),(0,x.jsx)(cG,{showUpsell:!1,replId:t.id}),(0,x.jsx)(eA.Text,{translate:"no",children:t.title})]}),(0,x.jsx)(F.View,{align:"center",justify:"center",clsx:cZ.default.planningTimeline,children:(0,x.jsx)(aj.PlanningTimeline,{onBuildClick:void 0})}),r?(0,x.jsx)(c6,{}):null]})}function c6(){var e=(0,at.useChatter)(),t=(0,ek.useObservable)(e.sessions.agent.current);return t?(0,x.jsx)(aS.AiSessionDebugInfoButton,{sessionId:t.id,sessionType:ae.SessionType.AGENT_SESSION}):null}var c9=e.i(14146),c7=e.i(71998),de=e.i(906910),dt=e.i(502108),dn=e.i(848415);e.i(312917);var dr=e.i(675186),di=e.i(387491);function da(e,t){var n=(0,e7.default)(t);return(0,W.useMemo)(function(){var t,r;return t="current"in e?new c$.Multicast(function(t){return t.next(e.current),e.subscribe(function(e){return t.next(e)})}):e,r=function(){return n.current()},new c$.Multicast(function(e){var n=null,i=null,o=null,a=null,s=t.subscribe(function(t){null==n||n.stop(),i&&(clearTimeout(i),i=null);var s=r();if(!s&&a&&(s=a),!1===s){o=t,e.next(t);return}a=s;var l=!0===s?{}:s,u=l.snappiness,c=void 0===u?400:u,d=l.ramp,p=l.delay,f=void 0===p?0:p,h=0,m={};for(var v in t)m[v]=o&&v in o?o[v]:t[v];n=new dr.AnimationLoop(function(n,r){for(var i in h+=n,t){if("number"!=typeof m[i]||"number"!=typeof t[i]){m[i]=t[i];continue}var s=m[i],l=t[i],u=s>=0&&s<=1&&l>=0&&l<=1?.001:void 0;m[i]=(0,di.damp)({current:s,target:l,elapsed:h,delta:n,snappiness:c,ramp:d,minStepSize:u})}e.next((0,b._)({},m)),(0,tt.default)(m,t)&&(a=null,o=t,r())}),f>0?i=setTimeout(function(){i=null,null==n||n.start()},f):n.start()});return function(){null==n||n.stop(),i&&clearTimeout(i),s()}})},[e,n])}var ds=e.i(869226),dl=e.i(696896),du=e.i(802088),dc=e.i(516351),dd=e.i(375032),dp=(0,D.cvarsFrom)("Border.module.css",["--header-height","--border-color","--box-shadow","--y-offset","--border-radius"]);let df=(0,W.memo)(function(e){var t,n=e.paneId,r=(0,iz._)(e,["paneId"]),i=(0,ep.usePaneView)(n),o=(0,i1.default)(i.paneType),a=(0,i1.default)(i.border),s=(0,i1.default)(i.isMaximized),l=(0,dc.default)(),u="var(--surface-border-color-regular)",c="none",d=0,p=0;switch(a){case"dragging":case"floating":u="var(--surface-border-color-regular)",c=D.tokens.shadow2,d=r.headerHeight,p=6}var f=(0,ep.useIsActivePane)({paneId:n});l&&f&&(u=l.color,c="0 0 0 3px ".concat(l.color));var h=(0,z._)((0,W.useState)(!1),2),m=h[0],v=h[1];return((0,du.useObserver)((0,oD.useAgentIsWorking)(),{next:"webview"===o?v:void 0}),s)?null:(0,x.jsx)(F.View,{style:(t={},(0,R._)(t,dp.headerHeight,"".concat(d,"px")),(0,R._)(t,dp.borderColor,u),(0,R._)(t,dp.boxShadow,c),(0,R._)(t,dp.yOffset,p+"px"),(0,R._)(t,dp.borderRadius,"".concat(6,"px")),t),clsx:[dd.default.root,(0,R._)({},dd.default.pulse,m)]})});var dh=e.i(31290),dm=F.SpecializedView.div,dv=(0,iB.css)([eG.rcss.width("100%"),eG.rcss.position.absolute,eG.rcss.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),dg=(0,iB.css)([eG.rcss.height("100%"),eG.rcss.position.absolute,eG.rcss.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),dx=(0,iB.css)([eG.rcss.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function dy(e){return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat("topLeft"===e||"topRight"===e?"bottom":"top")}}var db={topLeft:(0,iB.css)([eG.rcss.top(0),eG.rcss.left(0),dy("topLeft")]),topRight:(0,iB.css)([eG.rcss.top(0),eG.rcss.right(0),dy("topRight")]),bottomLeft:(0,iB.css)([eG.rcss.bottom(0),eG.rcss.left(0),dy("bottomLeft")]),bottomRight:(0,iB.css)([eG.rcss.bottom(0),eG.rcss.right(0),dy("bottomRight")])};function dw(e){var t=e.edge,n=e.size,r=e.onPointerDown;if("top"===t||"bottom"===t)return(0,x.jsx)(dm,{onPointerDown:r,style:(0,R._)({height:n},t,-n),css:dv});if("right"===t||"left"===t)return(0,x.jsx)(dm,{onPointerDown:r,style:(0,R._)({width:n},t,-n),css:dg});var i="topLeft"===t||"bottomRight"===t?"nwse-resize":"nesw-resize";return(0,x.jsx)(dm,{onPointerDown:r,style:{height:n,width:n,cursor:i},css:[dx,db[t]]})}var d_=["bottom","right","left","bottomRight","bottomLeft"],dj=(0,W.memo)(function(e){var t=(0,ep.useResizeFloating)();return(0,x.jsx)(x.Fragment,{children:d_.map(function(n){return(0,x.jsx)(dw,{size:8,edge:n,onPointerDown:function(r){(0,dh.measureMouseMove)(r,{start:function(){t({type:"start",paneId:e.paneId,edge:n})},move:function(e){t({type:"update",moveDelta:e.delta})},end:function(){t({type:"end"})}})}},n)})})}),dS=["top","right","left","topRight","topLeft"],dk=(0,W.memo)(function(e){var t=(0,ep.useResizeFloating)();return(0,x.jsx)(x.Fragment,{children:dS.map(function(n){return(0,x.jsx)(dw,{size:8,edge:n,onPointerDown:function(r){(0,dh.measureMouseMove)(r,{start:function(){t({type:"start",paneId:e.paneId,edge:n})},move:function(e){t({type:"update",moveDelta:e.delta})},end:function(){t({type:"end"})}})}},n)})})}),dC={isConnecting:!0,channel:null,context:null};function dT(e){var t=e.container,n=e.service,r=e.name,i=e.skip,o=void 0!==i&&i,a=(0,z._)((0,W.useState)(dC),2),s=a[0],l=a[1];return(0,W.useEffect)(function(){l(dC);var e=!1,i=t.openChannel({service:n,name:r,skip:function(){return o}},function(t){if(!e)return l({context:t.context,channel:t.channel,isConnecting:!1}),function(t){e||l({isConnecting:t.willReconnect,channel:null,context:null})}});return function(){e=!0,i()}},[t,n,r,o]),s}var dI=e.i(259475),dP=e.i(57613),dE=e.i(231927),dR=(0,D.cvarsFrom)("index.module.css",["--transform-x","--transform-y","--scale","--transform-origin-x","--width","--height","--opacity","--interaction-blanket-display","--pointer-events","--user-select","--border-top-left-radius","--border-top-right-radius","--border-gap","--iframe-pointer-events"]),dA=(0,W.memo)(function(e){var t,n,r,i,o,a,s=e.paneId,l=(0,ev.usePaneUIContext)().Content,u=(0,ep.usePaneView)(s),c=(0,i1.default)(u.isHidden),d=(0,i1.default)(u.data),p=(0,i1.default)(u.isActive),f=(0,i1.default)(u.isCommitted);(0,ex.usePaneSession)(s,d);var h=(t=tr(),n=(0,ep.useInsertFloatingPaneIfNotExists)(),r=(0,ep.useUpdatePane)(),i=(0,ep.useCommitPane)(),o=(0,ep.useRemovePane)(),(0,Q.default)(function(){return function(e){switch(e.operation){case"commit":i(s);return;case"open":if(e.floating)return void n(e.pane,{commit:!0,location:"center"});t({pane:e.pane,activate:!0,placement:{type:"after",paneId:s}});return;case"replace":r({paneId:s,pane:e.pane});return;case"remove":o(e.pane.id);return;case"openPip":return;default:(0,oJ.default)(e)}}},[i,s,r,o,t,n])),m=(a=dT({container:(0,tv.default)().container,service:"panetracker"}).channel,(0,W.useCallback)(function(e,t){a&&a.send({paneMetricsTracker:{pane:e,flow:t}})},[a]));return(0,x.jsx)(l,{pane:d,options:{paneId:s,isHidden:c,performPaneOperation:h,isActive:p,isCommitted:f,emitPaneMetrics:m}})});let dD=(0,W.memo)(function(e){var t,n,r,i,o=e.paneId,a=(0,ep.useActivatePane)(),s=(n=(t=(0,z._)((0,dn.useDrop)({accept:[nT.FileType.File,dI.DragItems.Pane,dI.DragItems.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,t){var n=t.getClientOffset();n&&i.drag({pageX:n.x,pageY:n.y,over:o})},drop:function(e,t){var n=t.getClientOffset();if(n){if(e.type===dI.DragItems.Pane)return void i.drop({type:"pane",paneId:e.paneId,pageX:n.x,pageY:n.y,over:o});if("nodes"===e.type){var r=(0,em.fsNodeToPanes)(e.nodes);r.length>0&&i.drop({type:"newPaneGroup",panes:r,pageX:n.x,pageY:n.y,over:o})}if(e.type===dI.DragItems.NewPane){var a=e.pane;i.drop({type:"newPaneGroup",panes:[a],pageX:n.x,pageY:n.y,over:o})}}}}),2))[0].isOver,r=t[1],i=(0,ep.usePaneDragAndDrop)({isOver:n}),r),l=(0,ep.usePaneView)(o),u=(0,i1.default)(l.isActive),c=(0,i1.default)(l.isFloating),d=(0,i1.default)(l.isModal),p=(0,i1.default)(l.paneType),f=(0,$.default)(),h=(0,ay.useIsMac)(),m=(0,ay.useIsWindows)(),v=(h||m)&&f?O.HEADER_HEIGHT:0,g=(0,W.useRef)(null);(0,ds.useStyleSet)(g,da(l.properties,l.getTransitionEnabled),function(e){var t,n=e.width,r=e.height,i=e.x,o=e.y,a=e.scale,s=e.opacity;return t={},(0,R._)(t,dR.width,n+"px"),(0,R._)(t,dR.height,r+"px"),(0,R._)(t,dR.transformX,i+"px"),(0,R._)(t,dR.transformY,o+"px"),(0,R._)(t,dR.scale,a.toString()),(0,R._)(t,dR.opacity,s.toString()),t}),(0,ds.useStyleSet)(g,l.transformOriginXAtom,function(e){return(0,R._)({},dR.transformOriginX,e)}),(0,ds.useStyleSet)(g,l.viewportInset,function(e){return{"--fixed-position-offset-x":-e.x+"px","--fixed-position-offset-y":-e.y-v+"px"}}),(0,ds.useStyleSet)(g,l.isHidden,function(e){return(0,R._)({},dR.pointerEvents,e?"none":"auto")}),(0,ds.useStyleSet)(g,l.zIndex,function(e){return{"z-index":e.toString()}}),(0,ds.useStyleSet)(g,l.disableInteractions,function(e){var t;return t={},(0,R._)(t,dR.interactionBlanketDisplay,e?"block":"none"),(0,R._)(t,dR.userSelect,e?"none":"auto"),(0,R._)(t,dR.iframePointerEvents,e?"none":"auto"),t});var y=u?void 0:function(){a(o,{commit:"codeEditor"!==p})},b=(0,eg.useSetPaneElement)(),w=(0,R._)({},dR.borderGap,"".concat(4,"px"));c||(w[dR.borderTopLeftRadius]="".concat(6,"px"),w[dR.borderTopRightRadius]="".concat(6,"px"));var _=(0,th.useMergeRefs)([g,c?void 0:s],{breadcrumb:"client/replEnvironmentDesktop/Pane/index.tsx:324"}),j=(0,dl.useSetHoveredPane)(),S=(0,i1.default)(l.headerHeight);return(0,x.jsx)(cX.TrackingHierarchyProvider,{hierarchy:{surface:"".concat(p,"_pane")},children:(0,x.jsx)(eg.PaneIdProvider,{value:o,children:(0,x.jsx)(V.ShadesSurface,{elevate:"1x",role:"tabpanel",id:o,"aria-labelledby":"tab-".concat(o),innerRef:_,clsx:dE.default.root,style:w,onMouseEnter:function(){return j(o)},onMouseLeave:function(){return j(null)},children:(0,x.jsxs)(dP.default,{origin:"ErrorBoundary: PaneContainer",bsod:!0,tags:(0,Q.default)(function(){return{paneType:p}},[p]),children:[(0,x.jsxs)(F.View,{clsx:dE.default.container,onMouseDown:y,onContextMenu:y,innerRef:function(e){return b(o,e)},style:"agentChat"===p?{overflowX:"hidden"}:void 0,children:[(0,x.jsx)(F.View,{tabIndex:-1}),(0,x.jsx)(dA,{paneId:o})]}),(0,x.jsx)(df,{headerHeight:S,paneId:o}),c&&!d?(0,x.jsx)(dj,{paneId:o}):null,(0,x.jsx)(F.View,{clsx:dE.default.interactionBlanket})]},o)})})})});var dV=e.i(822243),dM=e.i(429225),dF=e.i(59380);(0,eN.cssRecord)({handle:[eG.rcss.minWidth(16),eG.rcss.height("100%")]});var dO=e.i(112077),dL=e.i(907371),dB=e.i(33171),dU=(0,D.cvarsFrom)("Tab.module.css",["--width","--x","--color","--bg","--font-style"]);function dN(e){var t;return t={},(0,R._)(t,dU.width,e.width+"px"),(0,R._)(t,dU.x,e.x+"px"),(0,R._)(t,dU.bg,e.active?D.tokens.surfaceBackground:""),(0,R._)(t,dU.color,e.active?D.tokens.foregroundDefault:""),t}function dG(e){var t=e.layout,n=e.paneId,r=e.paneGroupId,i=(0,ep.usePane)(n),o=(0,W.useMemo)(function(){return t.tab(n)},[t,n]),a=(0,W.useRef)(null),s=(0,ep.usePaneView)(e.paneId),l=(0,ek.useObservable)(s.isCommitted),u=(0,ek.useObservable)(s.isActive),c=(0,ex.useUniquePath)((0,em.isFilePane)(i)?i.data.path:null),d=(M=(D={paneId:n,paneGroupId:r}).paneId,O=D.paneGroupId,L=(0,eg.useGetPaneBindings)(),B=(0,ep.useGetPane)(),U=oa({paneId:M}),N=i$({paneId:M,paneGroupId:O}),G=iY(),H=(0,ev.usePaneUIContext)(),(0,W.useCallback)(function(){var e=B(M).pane,t=L(M),n=function(e){return!!e&&(void 0===e?"undefined":(0,ty._)(e))==="object"&&"data"in e};return{data:{type:"context",label:"Search actions",icon:(0,x.jsx)(H.Icon,{pane:e})},commands:function(){return[{data:{type:"group",key:"pane-actions"},commands:function(){var e,r;return(null!=(r=null==t||null==(e=t.commands)?void 0:e.flatMap(function(e){return e.commands}))?r:[]).filter(n)}},{data:{type:"group",key:"secondary"},commands:function(){return[G(M),U].concat((0,en._)(N)).filter(n)}}]}}},[L,H,B,M,U,N,G])),p=(0,dF.useContextMenu)().onContextMenu;(0,ds.useStyleSet)(a,da(o,function(){return!0}),dN);var f=(0,ep.useRemovePane)(),h=(0,ep.useSelectTab)(),m=(0,ev.usePaneUIContext)(),v=m.getTitle(i),g=m.Icon({pane:i,size:16}),y=function(){var e=(0,W.useRef)(null),t=(0,W.useRef)(!1),n=(0,dO.useCreateObservable)(!1);function r(){var r=e.current;if(r){var i=r.scrollWidth>r.clientWidth;n.set(i),t.current=!1}}var i=(0,ax.default)(function(){t.current||(t.current=!0,requestAnimationFrame(r))});return{state:n,ref:(0,th.useMergeRefs)([e,i])}}(),w=(0,ek.useObservable)(y.state),_=void 0;(0,em.isFilePane)(i)&&i.data.path?_=i.data.path:w&&(_=v);var j=!l&&"commands"!==i.type,S=(0,ep.useCommitPane)(),k=(0,oE.useObservableRef)(s.isActive),C=function(){k.current&&!l?S(n):h(n)},T=(0,dL.useCreateInteractive)({variant:"nofill"}),I=(q=e.paneId,K=e.layout,Y=($=(0,z._)((0,dV.useDrag)({type:dI.DragItems.Pane,item:function(){return{type:dI.DragItems.Pane,paneId:q,width:80}},end:function(){K.dragState.set(null)},collect:function(e){var t=e.getItem();return{isActive:(null==t?void 0:t.paneId)===q,isDragging:e.isDragging()}}}),2))[0],Q=$[1],X=(0,ep.useSetIsDraggingTab)(),Z=Y.isDragging,J=Y.isActive,(0,W.useEffect)(function(){X(Z)},[X,Z]),(0,W.useEffect)(function(){K.dragState.set(J?{id:q}:null)},[K,J,q]),{dragRef:Q}).dragRef,P=(0,th.useMergeRefs)([a,e.isOnlyTab?void 0:I]),E=(0,oE.useObservableRef)(t.state),A=(0,W.useRef)(null);if(null===A.current){var D,M,O,L,B,U,N,G,H,q,K,$,Y,Q,X,Z,J,ee,et=null==(ee=E.current)?void 0:ee.tabs.get(n);et&&(A.current=dN((0,td._)((0,b._)({},et),{active:!0})))}return(0,x.jsxs)(V.ShadesSurface,{elevate:!!u&&"2x",style:(0,b._)((0,R._)({},dU.fontStyle,j?"italic":"inherit"),A.current,T.style),onMouseUp:function(e){1===e.button&&(e.preventDefault(),e.stopPropagation(),f(n))},innerRef:P,align:"center",justify:"center",row:!0,clsx:[dB.default.tab,T.clsx],onContextMenu:function(e){return p(e,{command:d()})},children:[(0,x.jsx)(aV.Tooltip,{tooltip:_,delay:"long",placement:"bottom",isDisabled:!_,children:function(e,t){return(0,x.jsxs)(F.View,(0,td._)((0,b._)({},e),{innerRef:t,pl:6,tag:"button",clsx:dB.default.tabButton,row:!0,grow:!0,shrink:!0,align:"center",gap:6,onClick:C,children:[g,(0,x.jsx)(eA.Text,{ref:c?void 0:y.ref,multiline:!1,clsx:dB.default.title,children:v}),c?(0,x.jsx)(eA.Text,{variant:"small",clsx:dB.default.title,color:"dimmest",multiline:!1,children:c}):null]}))}}),(0,x.jsx)(oM.IconButton,{alt:"Close tab",clsx:dB.default.closeButton,size:28,onClick:function(){return f(n)},children:(0,x.jsx)(iW.default,{size:12})})]})}var dz=e.i(904851),dW=e.i(90659),dH=e.i(790164),dq={newTabButtonWidth:28,defaultTabWidth:160,gap:4},dK=function(){function e(t){var n=this;(0,dz._)(this,e),(0,R._)(this,"containerWidth",new dH.ObservableState(0)),(0,R._)(this,"isHovered",new dH.ObservableState(!1)),(0,R._)(this,"dragState",new dH.ObservableState(null)),(0,R._)(this,"dropState",new dH.ObservableState(null)),(0,R._)(this,"activeId",void 0),(0,R._)(this,"paneIds",void 0),(0,R._)(this,"state",new c$.Multicast(function(e){var t=null;return cY.Observable.combine(n.paneIds,n.containerWidth,n.isHovered,n.dragState,n.dropState).subscribe(function(n){var r=(0,z._)(n,5),i=r[0],o=r[1],a=r[2],s=r[3],l=r[4];if(l){var u,c,d=l.item.type===dI.DragItems.Pane?l.item:null,p=d?null==t||null==(c=t.tabs)?void 0:c.get(d.paneId):null;u={xOffset:l.pointer.x,width:p?p.width:dq.defaultTabWidth,id:d?d.paneId:void 0}}var f=function(e){var t,n,r=e.ids,i=e.gap,o=e.containerWidth,a=e.defaultTabWidth,s=e.newTabButtonWidth,l=e.matchWidths,u=e.dropArea,c=e.dragState,d=new Map;if(0===r.length||0===o)return{tabs:d};c?_="own-tab":(null==u?void 0:u.id)&&(_="external");var p=o-s-i,f=r.length;"external"===_&&(f+=1);var h=f-1,m=f*a+h*i<=p?a:(p-h*i)/f,v=l&&r.length<l.size,g=0,x=!0,y=!1,b=void 0;try{for(var w,_,j,S=r[Symbol.iterator]();!(x=(j=S.next()).done);x=!0){var k,C,T=j.value,I=v&&null!=(C=null==l||null==(k=l.get(T))?void 0:k.width)?C:m,P=g+I+i/2;u&&u.xOffset>=g&&u.xOffset<P&&(w={preview:{x:g,width:I},index:d.size},g+=I+i);var E=(null==c?void 0:c.id)===T;d.set(T,{x:g,width:E?0:I}),E||(g+=I+i)}}catch(e){y=!0,b=e}finally{try{x||null==S.return||S.return()}finally{if(y)throw b}}return u&&!w&&(w={preview:{x:g,width:v&&null!=(n=null==l||null==(t=l.get(r[r.length-1]))?void 0:t.width)?n:m},index:d.size}),{tabs:d,dropData:w}}((0,td._)((0,b._)({containerWidth:o,ids:i,matchWidths:a&&t?t.tabs:void 0},dq),{dropArea:u,dragState:s||void 0}));(0,tt.default)(t,f)||(t=f,e.next(f))})})),(0,R._)(this,"dropIndex",new c$.Multicast(function(e){var t=null;return n.state.subscribe(function(n){var r,i,o=null!=(i=null==(r=n.dropData)?void 0:r.index)?i:null;o!==t&&(t=o,e.next(o))})})),(0,R._)(this,"setContainerWidth",function(e){n.containerWidth.set(e)}),(0,R._)(this,"tabs",new c$.Multicast(function(e){return n.state.select(function(e){return e?Array.from(e.tabs.keys()):[]}).subscribe(e)})),(0,R._)(this,"newTab",new c$.Multicast(function(e){var t=null;return n.state.subscribe(function(n){var r,i=Array.from(n.tabs.keys()).pop(),o=i?n.tabs.get(i):null;if(o){var a={x:o.x+o.width+4,width:28,visible:!n.dropData};n.dropData&&(null==(r=n.dropData)?void 0:r.index)>=n.tabs.size&&(a.x+=n.dropData.preview.width+4),(0,tt.default)(t,a)||(t=a,e.next(a))}})})),(0,R._)(this,"dropPreview",new c$.Multicast(function(e){var t=null;return n.state.subscribe(function(n){var r,i,o=null!=(i=null==(r=n.dropData)?void 0:r.preview)?i:null;(0,tt.default)(t,o)||(t=o,e.next(o))})})),(0,R._)(this,"width",new c$.Multicast(function(e){return n.containerWidth.subscribe(e)})),this.paneIds=t.paneIds,this.activeId=t.activeId}return(0,dW._)(e,[{key:"tab",value:function(e){var t=this;return new c$.Multicast(function(n){var r=null;return cY.Observable.combine(t.state,t.activeId,t.dropState).subscribe(function(t){var i,o,a=(0,z._)(t,3),s=a[0],l=a[1],u=a[2],c=s.tabs.get(e);if(c){var d=(0,td._)((0,b._)({},c),{active:l===e,isBeingDragged:(null==u||null==(i=u.item)?void 0:i.type)===dI.DragItems.Pane&&(null==u||null==(o=u.item)?void 0:o.paneId)===e});(0,tt.default)(r,d)||(r=d,n.next(d))}})})}}]),e}(),d$=e.i(13891),dY=(0,D.cvarsFrom)("index.module.css",["--new-tab-width","--new-tab-x","--drop-preview-width","--drop-preview-x","--drop-preview-opacity"]),dQ=(0,W.memo)(function(e){var t,n,r,i,o,a,s,l,u,c,d,p,f,h,m,v,g,y,b,w,_,j=(0,ep.usePaneGroup)(e.headerId),S=(0,W.useMemo)(function(){return new dK({paneIds:cY.Observable.from(j.panes),activeId:cY.Observable.from(j.activeTabPaneId)})},[j.panes,j.activeTabPaneId]),k=(0,ek.useObservable)(S.tabs),C=(0,ax.default)(function(e){return S.setContainerWidth(e.width)},{type:"debounce",wait:100}),T=(0,ep.useInsertTab)(),I=(null==k?void 0:k.length)===1,P=(0,i1.default)(j.activeTabPaneId),E=(n=(t={paneGroupId:e.headerId,activeTabPaneId:P}).paneGroupId,r=t.activeTabPaneId,o=(i=(0,ep.usePaneGroupDragAndDrop)({paneGroupId:n})).isDragging,a=i.dnd,s=(0,ep.useMaximizedPane)().toggleMaximizedPaneGroup,l=(0,ep.useHeaderView)(n),u=(0,i1.default)(l.isMaximized),c=(0,ep.useActivatePane)(),{dnd:a,cursor:o?"grabbing":"grab",onPointerDown:function(e){c(r),!u&&"button"in e&&0===e.button&&(0,dh.measureMouseMove)(e,{start:a.start,move:a.update,end:a.end})},toggleMaximizedPaneGroup:s,isMaximized:u}),D=E.cursor,V=E.onPointerDown,M=E.toggleMaximizedPaneGroup,O=E.isMaximized,L=(0,W.useRef)(null),B=(d=e.headerId,p=(0,W.useRef)(null),f=(0,oE.useObservableRef)(S.dropIndex),h=(0,ep.useInsertTab)(),m=(0,ep.useMoveTab)(),v=(0,ep.usePaneGroup)(d),g=(0,i1.default)(v.panes),y=(0,W.useCallback)(function(e,t){var n=(null==t?void 0:t.index)!==null?null==t?void 0:t.index:g.length;if("nodes"===e.type){var r=(0,em.fsNodeToPanes)(e.nodes);r.length>0&&h({activate:!0,commit:!0,paneGroupId:d,index:n,panes:r});return}if(e.type===dI.DragItems.NewPane)return void h({activate:!0,paneGroupId:d,index:n,panes:[e.pane]});if("paneId"in e){var i=g.includes(e.paneId)?g.length-1:g.length;m({paneId:e.paneId,index:void 0!==n&&n<i?n:i,toPaneGroupId:d})}},[h,m,d,g]),w=(b=(0,z._)((0,dn.useDrop)({accept:[nT.FileType.File,dI.DragItems.Pane,dI.DragItems.NewPane],hover:function(e,t){var n=t.getClientOffset(),r=n&&p.current?{x:n.x-p.current.x,y:n.y-p.current.y}:{x:0,y:0};S.dropState.set({item:e,pointer:r})},collect:function(e){var t,n;return p.current=null!=(n=null==(t=L.current)?void 0:t.getBoundingClientRect())?n:null,{isOver:e.isOver()}},drop:function(e,t){var n,r=null!=(n=f.current)?n:null;S.dropState.set(null),t.didDrop()||y(e,null!==r?{index:r}:null)}}),2))[0].isOver,_=b[1],(0,W.useEffect)(function(){w||S.dropState.set(null)},[w,S]),{dropRef:_}).dropRef,U=(0,th.useMergeRefs)([C,L,B]),N=(0,$.default)(),G=(0,ay.useIsWindows)();return(0,x.jsxs)(F.View,{row:!0,grow:!0,shrink:!0,align:"start",clsx:d$.default.tabBar,children:[O?(0,x.jsx)(A.default,{}):null,(0,x.jsxs)(F.View,{grow:!0,shrink:!0,row:!0,clsx:d$.default.tabs,innerRef:U,onMouseEnter:function(){return S.isHovered.set(!0)},onMouseLeave:function(){return S.isHovered.set(!1)},onPointerDown:I&&!O?V:void 0,children:[(0,x.jsx)(dX,{paneGroupId:e.headerId,activeTabPaneId:P,isMaximized:O,toggleMaximizedPaneGroup:M,cursor:D,onPointerDown:I?void 0:V}),(0,x.jsx)(dJ,{layout:S}),null==k?void 0:k.map(function(t){return(0,x.jsx)(dG,{paneGroupId:e.headerId,paneId:t,layout:S,isOnlyTab:I},t)}),(0,x.jsx)(dZ,{layout:S,onClick:function(){return T({paneGroupId:e.headerId,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}})]}),O?(0,x.jsx)(oM.IconButton,{clsx:(0,R._)({},d$.default.desktopAppWindowsOs,G&&N),size:28,alt:"Minimize",onClick:function(){return M({paneGroupId:e.headerId})},children:(0,x.jsx)(iZ.default,{})}):null]})});function dX(e){var t=e.paneGroupId,n=e.activeTabPaneId,r=e.toggleMaximizedPaneGroup,i=e.isMaximized,o=e.cursor,a=e.onPointerDown,s=on({paneId:n,paneGroupId:t}),l=(0,dF.useContextMenu)().onContextMenu;return(0,x.jsx)(F.View,{onContextMenu:function(e){return l(e,{command:s})},onDoubleClick:function(){r({paneGroupId:t})},title:i?"Double click to restore.":"Double click to maximize. Drag to move.",clsx:d$.default.dragArea,style:{cursor:i?void 0:o},onPointerDown:a})}function dZ(e){var t,n=e.layout,r=(0,W.useRef)(null),i=(0,ep.useHasSingleTiledPane)(),o=(0,lp.useSetTourStepTarget)(l_,lw.NewTab);(0,ds.useStyleSet)(r,n.newTab,function(e){var t;return t={},(0,R._)(t,dY.newTabWidth,e.width+"px"),(0,R._)(t,dY.newTabX,e.x+"px"),(0,R._)(t,"opacity",e.visible?"1":"0"),t});var a={isDragging:(t=(0,z._)((0,dV.useDrag)({type:dI.DragItems.NewPane,item:function(){return{type:dI.DragItems.NewPane,pane:{type:"commands",data:{autoFocus:!0}},width:80}},collect:function(e){return{isDragging:e.isDragging()}}}),2))[0].isDragging,dragRef:t[1]},s=a.dragRef,l=a.isDragging,u=(0,th.useMergeRefs)([r,o,s]),c=(0,c_.useObservableMemo)(function(){return n.width.select(function(e){return e>320})},[n]),d="Tools & files";return(0,x.jsx)(F.View,{innerRef:u,clsx:d$.default.newTab,children:l?null:(0,x.jsx)(x.Fragment,{children:i&&c?(0,x.jsx)(eE.Button,{clsx:d$.default.newTabTextButton,onClick:e.onClick,variant:"nofill",iconLeft:(0,x.jsx)(eJ.default,{}),text:d,style:{width:160}}):(0,x.jsx)(oM.IconButton,{clsx:d$.default.newTabIconButton,size:28,alt:d,onClick:e.onClick,children:(0,x.jsx)(eJ.default,{})})})})}function dJ(e){var t=e.layout,n=(0,W.useRef)(null);return(0,ds.useStyleSet)(n,t.dropPreview,function(e){var t;return t={},(0,R._)(t,dY.dropPreviewWidth,(e?e.width:80)+"px"),(0,R._)(t,dY.dropPreviewX,(e?e.x:"50%")+"px"),(0,R._)(t,dY.dropPreviewOpacity,e?"1":"0"),t}),(0,x.jsx)(F.View,{innerRef:n,clsx:d$.default.dropPreview})}var d0=e.i(248611),d1=(0,D.cvarsFrom)("index.module.css",["--left","--top","--scale","--transform-origin-x","--width","--height","--z-index","--transform-x","--transform-y","--border-radius","--controls-opacity","--opacity","--padding-left","--padding-top"]);let d2=(0,W.memo)(function(e){var t,n=e.headerId,r=(0,ep.usePaneGroup)(n),i=(0,i1.default)(r.activeTabPaneId),o=(0,ep.useHeaderView)(n),a=(0,i1.default)(o.isFloating),s=(0,i1.default)(o.isBeingDragged),l=(0,i1.default)(o.isModal),u=(0,i1.default)(o.isMaximized),c=(0,W.useRef)(null);(0,ds.useStyleSet)(c,da(o.properties,o.getTransitionEnabled),function(e){var t,n,r,i=e.width,o=e.height,a=e.x,s=e.y,l=e.scale,u=e.opacity,c=e.positioning;return(0,b._)((t={},(0,R._)(t,d1.width,i+"px"),(0,R._)(t,d1.height,o+"px"),(0,R._)(t,d1.scale,l.toString()),(0,R._)(t,d1.opacity,u.toString()),t),"transform"===c?(n={},(0,R._)(n,d1.transformX,Math.round(a)+"px"),(0,R._)(n,d1.transformY,Math.round(s)+"px"),(0,R._)(n,d1.top,"0px"),(0,R._)(n,d1.left,"0px"),n):(r={},(0,R._)(r,d1.transformX,"0px"),(0,R._)(r,d1.transformY,"0px"),(0,R._)(r,d1.top,Math.round(s)+"px"),(0,R._)(r,d1.left,Math.round(a)+"px"),r))}),(0,ds.useStyleSet)(c,o.transformOriginX,function(e){return(0,R._)({},d1.transformOriginX,e)}),(0,ds.useStyleSet)(c,o.zIndex,function(e){return{"z-index":e.toString()}});var d=(0,dl.useSetHoveredPane)();return(0,ds.useStyleSet)(c,(0,dl.useIsPaneHovered)(i),function(e){return(0,R._)({},d1.controlsOpacity,e?"1":"0")}),(0,x.jsxs)(V.ShadesSurface,{innerRef:c,clsx:d0.default.surface,row:!0,align:"center",style:(t={},(0,R._)(t,d1.borderRadius,"6px"),(0,R._)(t,d1.paddingTop,(!u&&a?6:0)+"px"),(0,R._)(t,d1.paddingLeft,(u||s||a?6:0)+"px"),t),onMouseEnter:function(){return d(i)},onMouseLeave:function(){return d(null)},elevate:!1,children:[(0,x.jsx)(dQ,{headerId:n}),a&&!l?(0,x.jsx)(dk,{paneId:i}):null]})});function d4(){var e=(0,ep.useOpenTool)(),t=(0,W.useCallback)(function(t){return e({pane:t})},[e]),n=(0,ep.useGetPanes)(),r=(0,ep.useRemovePane)();return(0,W.useCallback)(function(e){var i=em.STACK_TO_OUTPUT_PANE_MAP[e];i&&(t({type:i}),n().forEach(function(e){var t=(0,z._)(e,2),n=t[0],o=t[1];"agentChat"!==o.type&&o.type!==i&&r(n)}))},[t,n,r])}var d3=e.i(391119),d5=e.i(700966),d8=e.i(716636),d6=e.i(398014),d9={Content:function(e){var t,n=(0,z._)((0,W.useState)(null),2),r=n[0],i=n[1];(0,eg.useSetFocusTarget)(function(){return r},[r]),(0,eg.useSetPaneBindings)(function(){return{type:"agentChat",focusInput:function(){return null==r?void 0:r.focus()}}},[r]);var o=e.options.performPaneOperation,a=(0,W.useCallback)(function(e){return o({operation:"open",pane:e,secondary:!0})},[o]),s=d4(),l=(0,W.useCallback)(function(e){o({operation:"openPip",data:e})},[o]),u=(0,d3.useCurrentSession)(null==(t=e.pane.data)?void 0:t.sessionId),c=u.session,d=u.setSession,p=(0,W.useCallback)(function(e){o({operation:"replace",pane:{type:"agentChat",data:{sessionId:e.id}}}),d(e)},[o,d]),f=(0,ep.useIsAgentCentered)(),h=(0,ep.useTransitionToAgentPresentation)(),m=(0,ep.useIsAgentPresentationTransitionInProgress)(),v=(0,tv.default)(),g=v.secrets,y=v.fs;return(0,x.jsx)(d5.AgentMain,{secrets:g,readFile:y.readFile,session:c,setSession:p,inputRef:i,openPane:a,onPlanApproval:function(e){e&&s(e),h("sidebar")},isDesktopOrTabletAgentPresentationCentered:f,isDesktopLayoutAgentPresentationTransitionInProgress:m,openPip:l})},Icon:function(e){var t=e.size;return(0,x.jsx)(oR.AgentAvatar,{size:t})},getTitle:function(){return"Agent"},description:lg.AGENT_DESCRIPTION,category:d8.PaneCategory.WorkspaceFeatures,decode:function(e){return nh.Value.Decode(d6.AgentChatPaneSchema,e)}},d7=e.i(795564),pe={Content:function(e){var t=e.options,n=t.performPaneOperation,r=t.paneId,i=e.pane.data.autoFocus,o=(0,ep.useCommitPane)(),a=(0,W.useRef)(null);(0,eg.useSetFocusTarget)(function(){return{focus:function(){var e;return null==(e=a.current)?void 0:e.call(a)}}},[]);var s=(0,W.useCallback)(function(e){n({operation:"replace",pane:e.pane}),o(r),(0,eu.track)(ec.events.TOOL_OPENED,{source:"New Tab",tool:e.pane.type})},[n,r,o]),l=ij({currentPaneId:r,openPane:s});return(0,x.jsx)(F.View,{grow:!0,shrink:!0,children:(0,x.jsx)(eW.CommandBar,{autoFocus:i,command:l,focusRef:a,showToolDescriptions:!0})})},Icon:function(){return null},getTitle:function(){return"New tab"},category:d8.PaneCategory.Other,decode:d7.decode},pt=e.i(827836),pn=e.i(818283),pr=e.i(999519),pi={Content:function(e){var t=e.options,n=t.paneId,r=t.performPaneOperation,i=e.pane.flow,o=(0,ep.useSidebar)(),a=(0,i1.default)(o.activeContent),s=(0,W.useCallback)(function(){"filetree"!==a&&o.toggleContent("filetree")},[o,a]);return(0,x.jsx)(pn.default,{flow:i,closeConfigPane:function(){return r({operation:"remove",pane:{id:n}})},useReadFile:pt.default,openSidebar:s,onNewPaneSelected:function(e){return r({operation:"open",pane:e})},openConsole:function(){return r({operation:"open",pane:{type:"runnerOutput"}})}})},Icon:function(){return(0,x.jsx)(rB.default,{})},getTitle:function(){return"Configure Repl"},category:d8.PaneCategory.WorkspaceFeatures,decode:pr.decode},po=e.i(746382),pa=(0,iB.css)([eG.rcss.backgroundColor.backgroundDefault,eG.rcss.height("100%"),eG.rcss.borderRadius(4),{overflow:"hidden"}]),ps=(0,iB.css)([eG.rcss.width("100%"),eG.rcss.height("100%"),eG.rcss.justify.center,eG.rcss.align.center,eG.rcss.display.flex]);function pl(e){var t=e.paneId,n=e.extensionPaneData,r=e.environmentAPIs,i=(0,ts.useExtensionByInstallationId)(n.installationId),o=(0,ts.useExtensionStateAtom)(n.installationId),a=nM({extension:i,environmentAPIs:r,sandboxTitle:n.name,sandboxUrl:(0,tc.getAssetUrl)(n.baseUrl,n.path),paneId:t,filePath:n.filePath||null}),s=a.didConnectOnce,l=a.isValidExtensionPaneUrl,u=a.getIframeProps,c=a.reloadSandbox;return(0,eg.useSetPaneBindings)(function(){return{type:"extension",commands:[{name:"Actions",commands:[{match:ef.matchLabel,data:{icon:(0,x.jsx)(n5.default,{}),label:"Refresh",type:"action",description:"Refresh extension",key:"refresh",run:function(){c()}}}]}]}},[c]),(0,x.jsx)(F.View,{className:"extension-pane",css:pa,children:o&&s?(0,x.jsx)(x.Fragment,{children:l()?(0,x.jsx)("iframe",(0,b._)({},u({css:{width:"100%",height:"100%",border:"none"}}))):(0,x.jsx)(F.View,{p:12,children:(0,x.jsxs)(eA.Text,{children:["Invalid url:"," ",(0,x.jsx)(po.InlineCode,{children:n.baseUrl+n.path}),". Please contact the extension author, or Replit support."]})})}):(0,x.jsx)(F.View,{css:ps,children:(0,x.jsx)(o8.default,{})})})}var pu=nf.Type.Object({extensionId:nf.Type.Unsafe(nf.Type.String()),installationId:nf.Type.Unsafe(nf.Type.String()),baseUrl:nf.Type.String(),path:nf.Type.String(),name:nf.Type.String(),filePath:nf.Type.Optional(nf.Type.Union([nf.Type.String(),nf.Type.Null(),nf.Type.Undefined()])),icon:nf.Type.Optional(nf.Type.Union([nf.Type.String(),nf.Type.Null(),nf.Type.Undefined()]))}),pc=nf.Type.Object({type:nf.Type.Literal("extension"),data:pu}),pd=e.i(211397),pp={Content:function(e){var t=e.pane,n=e.options,r=to();return(0,x.jsx)(pl,{extensionPaneData:t.data,paneId:n.paneId,environmentAPIs:r})},Icon:function(e){var t=e.pane,n=e.size;return t.data.icon?(0,x.jsx)(F.View,{style:{width:n,height:n,position:"relative"},children:(0,x.jsx)(pd.default,{src:(0,tc.getAssetUrl)(t.data.baseUrl,t.data.icon),layout:"fill",alt:""})}):(0,x.jsx)(e0.default,{size:n})},getTitle:function(e){return e.data.filePath?e.data.filePath+" â€” "+e.data.name:e.data.name},category:d8.PaneCategory.WorkspaceExtensions,decode:function(e){return nh.Value.Decode(pc,e)}},pf=e.i(917255),ph=e.i(612054),pm=e.i(210796),pv=e.i(144494),pg=e.i(915793),px=e.i(328751),py=e.i(995691),pb=e.i(198769),pw=e.i(904678);function p_(){var e=(0,w._)(["\n  query ExtensionOwnerDetails($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n          username\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return p_=function(){return e},e}function pj(){var e=(0,w._)(["\n  query currentExtensionStatus($id: String!) {\n    extension(id: $id) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return pj=function(){return e},e}var pS={};(0,_.gql)(p_());var pk=(0,_.gql)(pj()),pC=e.i(831787),pT=e.i(416746),pI=e.i(348867),pP=e.i(656077),pE=e.i(493166),pR=e.i(888136),pA=e.i(619319),pD=e.i(428596),pV=(0,eN.cssRecord)({codeBlock:[eG.rcss.borderRadius(8),eG.rcss.position.relative],codeBlockCopyButton:[eG.rcss.position.absolute,eG.rcss.top(4),eG.rcss.right(4)],selectionContainer:[eG.rcss.maxHeight(400),eG.rcss.overflowY("scroll")],fsNode:[eG.rcss.flex.row,eG.rcss.rowWithGap(8),eG.rcss.align.center,eG.rcss.px(4),eG.rcss.py(2),eG.rcss.borderRadius(8),eG.rcss.cursor.pointer],fsNodeActive:[eG.rcss.backgroundColor.backgroundHigher]});function pM(e){var t=e.content,n=(0,te.default)().showConfirm;return(0,x.jsxs)(V.ShadesSurface,{tag:"code",css:pV.codeBlock,p:8,children:[t,(0,x.jsx)(oM.IconButton,{alt:"Copy",tooltipBehavior:"hidden",css:pV.codeBlockCopyButton,onClick:function(){return navigator.clipboard.writeText(t).then(function(){return n("Copied")})},children:(0,x.jsx)(n1.default,{})})]})}function pF(e){var t,n=e.glob,r=e.openFile,i=e.children,o=(0,z._)((0,W.useState)([]),2),a=o[0],s=o[1],l=(0,z._)((0,W.useState)(""),2),u=l[0],c=l[1],d=(0,pD.useIdSeed)(),p=(0,tv.default)().fs,f=(0,nO.useStaticDirectoryPath)(),h=(0,W.useMemo)(function(){return(0,pA.globToRegExp)(n)},[n]);return((0,W.useEffect)(function(){h&&p.listFiles().then(function(e){e.files&&s(e.files.filter(function(e){return e.match(h)}).map(function(e){var t=e.split("/");return{path:e,dir:t.slice(0,t.length-1).join("/"),filename:t[t.length-1]||""}}))})},[h,f]),h)?(0,x.jsxs)(F.View,{css:pV.selectionContainer,gap:16,children:[(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:(0,x.jsxs)(F.View,{gap:12,children:[(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:"Choose an image"}),f?(0,x.jsx)(eR.StatusBanner,{icon:(0,x.jsx)(pT.default,{}),colorway:"primary",text:(0,x.jsxs)(F.View,{gap:2,children:[(0,x.jsxs)(eA.Text,{children:["Images must be served from"," ",(0,x.jsx)("span",{css:[eG.rcss.font.code,eG.rcss.backgroundColor.accentPrimaryDimmer,eG.rcss.borderRadius(4),eG.rcss.px(4),eG.rcss.py(2),eG.rcss.mr(2),eG.rcss.border({color:D.tokens.accentPrimaryDefault})],children:f.path}),"."]}),(0,x.jsx)(eA.Text,{css:[eG.rcss.fontWeight.normal],children:"You can change your extension's static directory in the .replit file."})]})}):null,(0,x.jsxs)(eA.Text,{css:[eG.rcss.fontWeight.normal],color:"dimmer",children:["Supported file types:"," ",(0,x.jsx)("span",{css:[eG.rcss.font.code,eG.rcss.fontSize("small"),eG.rcss.backgroundColor.backgroundHigher,eG.rcss.borderRadius(4),eG.rcss.px(4),eG.rcss.py(2),eG.rcss.mr(2),eG.rcss.border({color:D.tokens.outlineDefault})],children:null==(t=n.match(/\{(.*)\}/))?void 0:t[1].split(",").map(function(e){return e.replace(".","")}).join(", ")})]})]})}),i,(0,x.jsx)(pR.default,{onChange:function(e){return r(e.path)},initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return(null==e?void 0:e.path)||""},children:function(e){var t=e.getInputProps,r=e.getItemProps,i=e.highlightedIndex,o=e.getRootProps,s=e.getMenuProps;return(0,x.jsxs)(F.View,(0,td._)((0,b._)({},o({refKey:"innerRef"})),{gap:16,children:[(0,x.jsx)(F.View,{css:[eG.rcss.position.relative],children:(0,x.jsx)(sD.Input,(0,b._)({id:d("file-search")},t({ref:null,value:u,onChange:function(e){return c(e.currentTarget.value)},placeholder:"Find a file",autoComplete:"off",autoFocus:!0})))}),(0,x.jsx)(F.View,{children:a&&a.length?(0,x.jsx)(F.View,(0,td._)((0,b._)({elevated:!0,tag:"ul",css:(eG.rcss.pt(8),eG.rcss.colWithGap(8))},s({refKey:"innerRef"})),{children:a.filter(function(e){return e.path.includes(u)}).filter(function(e){return!f||e.path.startsWith(f.relativePath)||e.path.startsWith("public")}).map(function(e,t){return(0,x.jsxs)(F.View,(0,td._)((0,b._)({tag:"li",css:[pV.fsNode,t===i&&pV.fsNodeActive]},r({item:e,index:t,disabled:!!f&&!e.path.startsWith(f.relativePath)})),{children:[(0,x.jsx)(i_.default,{path:e.path,size:16}),(0,x.jsx)(eA.Text,{children:e.filename}),(0,x.jsx)(eA.Text,{variant:"small",color:"dimmest",children:e.dir})]}),t)})})):(0,x.jsx)(F.View,{pt:8,children:(0,x.jsx)(eA.Text,{color:"dimmer",children:(0,x.jsxs)("em",{children:["No files found matching ",(0,x.jsx)("code",{children:n})]})})})})]}))}})]}):(0,x.jsxs)(F.View,{css:[eG.rcss.flex.column,eG.rcss.colWithGap(16)],children:[(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:"Invalid Glob Pattern"}),(0,x.jsxs)(eA.Text,{children:["The glob pattern ",(0,x.jsx)("code",{children:n})," could not be parsed."]}),(0,x.jsx)(F.View,{css:eG.rcss.border({direction:"bottom",color:D.tokens.backgroundHigher})}),(0,x.jsxs)(F.View,{gap:8,children:[(0,x.jsx)(eA.Text,{children:(0,x.jsx)("strong",{children:"Match all Javascript Files"})}),(0,x.jsx)(pM,{content:"**/*.js"})]}),(0,x.jsxs)(F.View,{gap:8,children:[(0,x.jsx)(eA.Text,{children:(0,x.jsx)("strong",{children:"Match JSON files at root level"})}),(0,x.jsx)(pM,{content:"*.json"})]}),(0,x.jsxs)(F.View,{gap:8,children:[(0,x.jsx)(eA.Text,{children:(0,x.jsx)("strong",{children:"Match specified file extensions"})}),(0,x.jsx)(pM,{content:"**/*.{js,ts,jsx,tsx}"})]})]})}var pO=((i=pO||{}).Installing="Installing",i.Loading="Loading",i.Failed="Failed",i.Success="Success",i),pL={Installing:"Installing Extension...",Loading:"Loading Asset...",Failed:"Failed to load asset from Extension URL",Success:"Asset loaded successfully"};function pB(e){var t=e.isOpen,n=e.close,r=e.onSubmit,i=(0,tl.useInstallCurrentReplAsExtension)(),o=(0,tl.useCurrentReplExtension)(),a=(0,z._)((0,W.useState)(null),2),s=a[0],l=a[1],u=(0,z._)((0,W.useState)(!0),2),c=u[0],d=u[1],p=(0,z._)((0,W.useState)(null),2),f=p[0],h=p[1],m=(0,z._)((0,W.useState)(null),2),v=m[0],g=m[1],y=(0,W.useRef)(null),b=(0,z._)((0,W.useState)(null),2),w=b[0],_=b[1],j=(0,z._)((0,W.useState)(null),2),S=j[0],k=j[1],C=(v||S||"").startsWith("/")?v||S:"/"+(v||S),T=(0,z._)((0,W.useState)(null),2),I=T[0],P=T[1],E=function(){k(null),l(null),g(null),_(null),P(null),h(null)},R=function(){d(!0),l(null)};(0,W.useEffect)(function(){g(S)},[S]);var A=(0,W.useCallback)(function(e){return(0,er._)(function(){var t,n,r,a;return(0,ei._)(this,function(u){switch(u.label){case 0:if(!C||!c||"Success"===s||"Failed"===s)return[2];if(t=function(e,t){return(0,er._)(function(){var n;return(0,ei._)(this,function(r){switch(r.label){case 0:return l("Loading"),h(n=(0,tc.getAssetUrl)(e.baseUrl,t)),[4,fetch(n)];case 1:if(r.sent().ok)return P(t),l("Success"),d(!1),[2,!0];return[2,!1]}})})()},n=e||o)return[3,8];l("Installing"),u.label=1;case 1:return u.trys.push([1,5,,8]),[4,i()];case 2:if(!(r=u.sent()))return[3,4];return[4,A(r)];case 3:case 6:return u.sent(),[2];case 4:case 7:return[3,8];case 5:if(u.sent(),!o)return[3,7];return[4,A(o)];case 8:if(!n)return[3,11];return a=C.replace(/^(\/public|\/static)/,""),[4,t(n,a.slice(1))];case 9:if(u.sent())return[3,11];return[4,t(n,C)];case 10:u.sent(),u.label=11;case 11:return[2]}})})()},[o,C,i,s,c]);(0,W.useEffect)(function(){if(w){var e=w.split("/"),t=e.pop(),n=e.findIndex(function(e){return["public","static"].includes(e)});k((-1!==n?"/".concat(w):"/".concat(e.slice(n+1).join("/"),"/").concat(t))||w),d(!0),A()}},[A,w]);var D=w?w.split("/"):[],V=D[D.length-1];return(0,x.jsx)(ez.Modal,{isOpen:t,onRequestClose:n,children:w?(0,x.jsxs)(F.View,{css:[eG.rcss.flex.column,eG.rcss.colWithGap(16)],children:[(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",children:[(0,x.jsx)(eE.Button,{text:"Back",size:"small",iconLeft:(0,x.jsx)(pP.default,{}),onClick:function(){_(null),E()}}),(0,x.jsxs)(F.View,{row:!0,gap:4,align:"center",children:[(0,x.jsx)(pE.default,{}),(0,x.jsx)(eA.Text,{color:"dimmer",children:V||""})]})]}),(0,x.jsx)(eA.Text,{multiline:!0,children:"Extension assets should be stored in the public asset directory. Move the image or modify the file path, or try again."}),(0,x.jsxs)(F.View,{gap:4,children:[(0,x.jsx)(sD.Input,{defaultValue:v||"",ref:y,placeholder:"/icon.png",onChange:function(e){return g(e.target.value)},autoFocus:!0,disabled:"Loading"===s||"Installing"===s||"Success"===s}),f&&("Loading"===s||"Success"===s||"Failed"===s)?(0,x.jsx)("a",{href:f,target:"_blank",children:(0,x.jsxs)(eA.Text,{color:"dimmer",variant:"small",css:[eG.rcss.rowWithGap(4),eG.rcss.display.flex,{fontStyle:"italic"}],children:[(0,x.jsxs)("span",{css:[eG.rcss.truncate],children:["Loading"===s?"Checking ":null,"Success"===s?"Found at ":null,"Failed"===s?"Failed to load ":null,f]}),(0,x.jsx)(F.View,{css:[eG.rcss.display.inlineBlock],children:(0,x.jsx)(n2.default,{})})]})}):null]}),(0,x.jsxs)(F.View,{row:!0,justify:"space-between",align:"center",children:[(0,x.jsx)(F.View,{row:!0,gap:4,align:"center",children:s?(0,x.jsx)(x.Fragment,{children:"Loading"===s?(0,x.jsx)(o8.default,{}):(0,x.jsx)(eR.StatusBanner,{text:pL[s],colorway:"Failed"===s?"negative":"positive",icon:"Failed"===s?(0,x.jsx)(sb.default,{}):(0,x.jsx)(lS.default,{})})}):null}),"Failed"===s?(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsx)(eE.Button,{text:"Add Anyways",onClick:function(){var e=S||w;null!==e&&r(e),E(),n()},size:"small"}),(0,x.jsx)(eE.Button,{text:"Try Again",onClick:function(){R()},size:"small"})]}):null,I&&"Success"===s?(0,x.jsx)(eE.Button,{text:"Continue",iconLeft:(0,x.jsx)(lS.default,{}),colorway:"primary",onClick:function(){r(I),E(),n()}}):null]})]}):(0,x.jsx)(pF,{openFile:_,glob:"**/*.{png,jpg,jpeg,webp,svg,gif}"})})}var pU=e.i(887964),pN=(0,eN.cssRecord)({centerRowGap8:[eG.rcss.rowWithGap(8),eG.rcss.align.center],featureContainer:[eG.rcss.flex.column,eG.rcss.borderRadius(8),{overflow:"hidden"}],noFeaturesPlaceholder:[eG.rcss.border({style:"dashed"}),eG.rcss.borderRadius(8),eG.rcss.p(16),eG.rcss.colWithGap(8),eG.rcss.center],featureDetails:[eG.rcss.flex.column,eG.rcss.colWithGap(4),eG.rcss.flex.growAndShrink(1)],newFeatureFieldWrapper:[eG.rcss.border({direction:"bottom",color:D.tokens.backgroundHighest})],inputCounterFlex:[eG.rcss.flex.row,eG.rcss.justify.spaceBetween,eG.rcss.align.center]});function pG(e){var t=e.features,n=e.onCreate,r=e.onUpdate,i=e.onDelete,o=(0,z._)((0,W.useState)([]),2),a=o[0],s=o[1],l=(0,z._)((0,W.useState)(!1),2),u=l[0],c=l[1];return(0,x.jsxs)(F.View,{children:[(0,x.jsxs)(F.View,{pb:12,children:[(0,x.jsxs)(F.View,{css:pN.centerRowGap8,children:[(0,x.jsxs)(F.View,{css:pN.centerRowGap8,children:[(0,x.jsx)(pU.default,{}),(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:"Feature Descriptions"})]}),(0,x.jsx)(oM.IconButton,{onClick:function(){c(!u)},alt:"Add a new Feature",tooltipBehavior:u?"hidden":"default",disabled:u,children:(0,x.jsx)(eJ.default,{})})]}),(0,x.jsx)(eA.Text,{color:"dimmer",variant:"small",multiline:!0,children:"Describe what your extension can do. Descriptions will appear on the store listing page."})]}),(0,x.jsxs)(F.View,{gap:8,children:[u?(0,x.jsx)(pW,{onSubmit:function(e){n(e),c(!1)},onCancel:function(){return c(!1)}}):null,(0,x.jsx)(F.View,{css:pN.featureContainer,children:t.length>0?t.map(function(e,n){return a.includes(n)?(0,x.jsx)(pW,{feature:e,isLast:n===t.length-1,onSubmit:function(e){r(e,n),s(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){return s(function(e){return e.filter(function(e){return e!==n})})}},n):(0,x.jsx)(pz,{isLast:n===t.length-1,feature:e,onEdit:function(){return s(function(e){return(0,en._)(e).concat([n])})},onDelete:function(){i(n)}},n)}):(0,x.jsx)(x.Fragment,{children:u?null:(0,x.jsxs)(F.View,{css:pN.noFeaturesPlaceholder,children:[(0,x.jsx)(eA.Text,{color:"dimmest",multiline:!0,children:"You haven't added any features yet"}),(0,x.jsx)(eE.Button,{variant:"outlined",text:"New Feature",iconLeft:(0,x.jsx)(eJ.default,{}),onClick:function(){return c(!0)}})]})})})]})]})}function pz(e){var t=e.feature,n=e.onEdit,r=e.onDelete,i=e.isLast;return(0,x.jsxs)(V.ShadesSurface,{css:[eG.rcss.flex.row,eG.rcss.rowWithGap(8),eG.rcss.align.center,eG.rcss.p(8),i?null:eG.rcss.border({direction:"bottom",color:D.tokens.backgroundHighest})],children:[(0,x.jsx)(pH,{size:64,icon:t.image}),(0,x.jsxs)(F.View,{css:pN.featureDetails,children:[(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,x.jsx)(eA.Text,{children:t.title}),(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsx)(oM.IconButton,{alt:"Delete",tooltipBehavior:"hidden",onClick:r,children:(0,x.jsx)(su.default,{color:D.tokens.accentNegativeStronger})}),(0,x.jsx)(oM.IconButton,{alt:"Edit",tooltipBehavior:"hidden",onClick:n,children:(0,x.jsx)(sr.default,{})})]})]}),(0,x.jsx)(eA.Text,{color:"dimmest",multiline:!0,maxLines:1,children:t.body})]})]})}function pW(e){var t=e.onSubmit,n=e.onCancel,r=e.feature,i=e.isLast,o=(0,z._)((0,W.useState)((null==r?void 0:r.title)||""),2),a=o[0],s=o[1],l=(0,z._)((0,W.useState)((null==r?void 0:r.body)||""),2),u=l[0],c=l[1],d=(0,z._)((0,W.useState)((null==r?void 0:r.image)||null),2),p=d[0],f=d[1],h=a.length>=3&&u.length>=16;return(0,x.jsxs)(V.ShadesSurface,{css:[eG.rcss.flex.column,i||r?null:eG.rcss.borderRadius(8),r?eG.rcss.border({color:D.tokens.outlineDefault}):[i?null:eG.rcss.border({direction:"bottom",color:D.tokens.backgroundHighest})]],children:[(0,x.jsxs)(F.View,{css:pN.newFeatureFieldWrapper,p:8,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,x.jsx)(eA.Text,{children:a||"New Feature"}),(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsx)(eE.Button,{text:"Cancel",onClick:n}),(0,x.jsx)(eE.Button,{text:r?"Save":"Create",colorway:"primary",onClick:function(){return t({title:a,body:u,image:p})},disabled:!h})]})]}),(0,x.jsxs)(F.View,{p:8,gap:8,children:[(0,x.jsxs)(F.View,{gap:4,children:[(0,x.jsxs)(F.View,{css:pN.inputCounterFlex,children:[(0,x.jsx)(eA.Text,{color:"dimmer",children:"Title"}),(0,x.jsx)(pq,{value:a.length,min:3})]}),(0,x.jsx)(sD.Input,{value:a,onChange:function(e){return s(e.target.value)},placeholder:"Seamless Editing",maxLength:60})]}),(0,x.jsxs)(F.View,{gap:4,children:[(0,x.jsxs)(F.View,{css:pN.inputCounterFlex,children:[(0,x.jsx)(eA.Text,{color:"dimmer",children:"Body"}),(0,x.jsx)(pq,{value:u.length,min:16})]}),(0,x.jsx)(sD.MultiLineInput,{value:u,onChange:function(e){return c(e.target.value)},placeholder:"Describe what this feature does and how to use it (Markdown supported)",autoSize:!0,maxLength:2e3})]}),(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsxs)(F.View,{gap:4,grow:!0,shrink:!0,children:[(0,x.jsx)(eA.Text,{color:"dimmer",children:"Image (Recommended)"}),(0,x.jsx)(eA.Text,{color:"dimmest",multiline:!0,children:"Choose a statically-served image from your App. The Recommended aspect ratio for a cover image is 800x600."})]}),(0,x.jsx)(pH,{size:100,icon:p,editable:!0,onSubmit:function(e){f(e)}})]})]})]})}function pH(e){var t=e.size,n=e.icon,r=e.editable,i=void 0!==r&&r,o=e.onSubmit,a=(0,e8.useDevUrl)().url,s=a&&n?(0,tc.getAssetUrl)(a,n):null,l=(0,z._)((0,W.useState)(!1),2),u=l[0],c=l[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s1.Surface,{background:"default",css:[i?aO.interactive.filledAndOutlined:null,eG.rcss.flex.row,eG.rcss.center,eG.rcss.width(t),eG.rcss.height(.75*t),eG.rcss.maxWidth(t),eG.rcss.maxHeight(.75*t),eG.rcss.borderRadius(4),eG.rcss.border({color:D.tokens.backgroundHighest}),eG.rcss.flex.grow(1),{background:s?"".concat(D.tokens.backgroundDefault," url(").concat(s,") no-repeat center center / cover"):D.tokens.backgroundDefault}],onClick:function(){return c(!0)},children:s?null:(0,x.jsx)(pE.default,{color:D.tokens.foregroundDimmest,size:24})}),i?(0,x.jsx)(pB,{isOpen:u,close:function(){return c(!1)},onSubmit:function(e){null==o||o(e)}}):null]})}function pq(e){var t=e.value,n=e.min;return(0,x.jsxs)(eA.Text,{css:{color:t>=n?D.tokens.accentPositiveStronger:D.tokens.foregroundDimmest},children:[t,"/",n]})}var pK=e.i(316953),p$="Failed to read manifest file, please try again",pY="No extension.json found",pQ=function(){var e=(0,z._)((0,W.useState)(null),2),t=e[0],n=e[1],r=(0,W.useCallback)(function(e){n(function(t){if(!t)throw Error("State should be defined");return(0,td._)((0,b._)({},t),{manifestStr:e})})},[]);return{state:t,setState:n,updateString:r}},pX=function(){var e=(0,tv.default)(),t=e.fs,n=e.dotReplit,r=pQ(),i=r.state,o=r.setState,a=r.updateString,s=(0,z._)((0,W.useState)(0),2),l=s[0],u=s[1],c=(0,z._)((0,W.useState)(!1),2),d=c[0],p=c[1],f=(0,W.useCallback)(function(){return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return[4,(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return[4,t.writeFile("extension.json",JSON.stringify({name:"My Extension",description:"My Extension Description",version:"0"},null,2))];case 1:return e.sent(),[2]}})})()];case 1:return e.sent(),[2]}})})()},[t]);(0,W.useEffect)(function(){o(null);var e=!1,r=function(){};return(0,er._)(function(){var i,s,l,u,c,d,p;return(0,ei._)(this,function(f){switch(f.label){case 0:return[4,Promise.all([t.listFiles(),n.getConfig()])];case 1:var h,m,v,g;if(l=(s=z._.apply(void 0,[f.sent(),2]))[0],u=s[1],e)return[2];if(!l.files||u.error)return o({fileReadError:p$}),[2];if(d=(0,nC.asDir)((m="/"===(h=null!=(c=null==(i=u.config.extension)?void 0:i.outputDirectory)?c:"dist").charAt(0),v="/"===h.slice(-1),(g=(function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;)e.unshift("..");return e})(h.split("/").filter(function(e){return!!e}),!m).join("/"))||m||(g="."),g&&v&&(g+="/"),(m?"/":"")+g)),!(p=function(e){var t,n=e.filePaths,r=e.outputDir,i=[],o=!0,a=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;if("extension.json"===c)return c;c.endsWith("/extension.json")&&i.push(c)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var d=!0,p=!1,f=void 0;try{for(var h,m=i[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var v=h.value;if(!v.startsWith(r))return v}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}return null!=(t=i[0])?t:null}({filePaths:l.files,outputDir:d})))return o({fileReadError:pY}),[2];return r=t.watchTextFile(p,{onReady:function(e){o({fileReadError:null,writeChange:e.writeChange,manifestStr:e.initialContent,manifestPath:p})},onChange:function(e){a(e.latestContent)},onMoveOrDelete:function(){o({fileReadError:"extension.json was moved or deleted, please re-create it in your static directory"})},onError:function(){o({fileReadError:p$})}}),[2]}})})(),function(){r(),e=!0}},[t,a,n,l,o]);var h=(0,W.useMemo)(function(){if(!i||null!==i.fileReadError)return null;try{var e=pg.evaluate(i.manifestStr);return(0,pK.parseManifestOrError)(e)}catch(e){return{error:e,manifest:null}}},[i]),m=(0,W.useCallback)(function(e){if(!i||(null==h?void 0:h.error)||null!==i.fileReadError)throw Error("Failed to parse manifest file");var t=pg.patch(i.manifestStr,e);i.writeChange((0,px.changeSetFromDiff)(i.manifestStr,t)),a(t)},[i,h,a]),v={retry:function(){u(function(e){return e+1})},creatingExtensionJson:d,setCreatingExtensionJson:p,createExtensionJson:f,updateString:a,updateManifest:m};return i?"string"==typeof i.fileReadError?(0,td._)((0,b._)({},v),{__status:"fileReadError",state:{fileReadError:i.fileReadError},parsed:null}):h?h.manifest?(0,td._)((0,b._)({},v),{__status:"success",state:{fileReadError:null,writeChange:i.writeChange,manifestStr:i.manifestStr,manifestPath:i.manifestPath},parsed:h}):(0,td._)((0,b._)({},v),{__status:"fileParseError",state:i,parsed:{manifest:null,error:h.error}}):(0,td._)((0,b._)({},v),{__status:"fileReadError",state:{fileReadError:pY},parsed:null}):(0,td._)((0,b._)({},v),{__status:"loading",state:null,parsed:null})},pZ=((o={}).loading="loading",o.fileReadError="fileReadError",o.fileParseError="fileParseError",o.success="success",o),pJ=function(){return(0,x.jsx)(F.View,{css:[eG.rcss.display.flex,eG.rcss.width("100%"),eG.rcss.height("100%")],justify:"center",align:"center",children:(0,x.jsx)(o8.default,{})})},p0=e.i(837399);function p1(e){var t=e.children;return(0,x.jsx)(F.View,{gap:12,p:16,children:(0,x.jsx)(V.ShadesSurface,{css:[eG.rcss.borderRadius(8),eG.rcss.colWithGap(8)],p:16,children:t})})}var p2=e.i(959406),p4=function(e){var t=e.error,n=e.performPaneOperation,r=e.manifestPath;return(0,x.jsx)(p1,{children:(0,x.jsxs)(F.View,{gap:16,p:8,children:[(0,x.jsxs)(F.View,{row:!0,gap:8,css:[eG.rcss.display.flex,eG.rcss.align.center],children:[(0,x.jsx)(sb.default,{}),(0,x.jsx)(eA.Text,{variant:"headerDefault",children:"Error parsing extension.json"})]}),(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:"Details:"}),(0,x.jsx)(F.View,{gap:8,children:(0,tx._)(t,p0.TypeboxError)?t.issues.map(function(e,t){var n=e.path,r=e.message;return(0,x.jsxs)(F.View,{css:[eG.rcss.display.flex,eG.rcss.flex.row,eG.rcss.rowWithGap(4)],children:[(0,x.jsx)(eA.Text,{css:[eG.rcss.font.code,eG.rcss.color.orangeStrongest,eG.rcss.backgroundColor.orangeDimmest],children:n}),(0,x.jsx)(eA.Text,{children:r})]},t)}):(0,x.jsx)(F.View,{tag:"pre",children:t.message})}),(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsx)(eE.Button,{colorway:"primary",text:"Open extension.json",onClick:function(){n({operation:"open",secondary:!0,pane:(0,p2.getPaneForFile)(r)})}}),(0,x.jsx)(eE.Button,{iconLeft:(0,x.jsx)(pf.default,{}),text:"Read extension.json docs",onClick:function(){window.open("https://docs.replit.com/extensions/api/manifest","_blank")}})]})]})})},p3=function(e){var t=e.message,n=pX(),r=n.createExtensionJson,i=n.creatingExtensionJson,o=n.retry,a=n.setCreatingExtensionJson;return(0,x.jsxs)(p1,{children:[(0,x.jsxs)(F.View,{row:!0,gap:8,css:[eG.rcss.display.flex,eG.rcss.align.center],children:[(0,x.jsx)(sb.default,{}),(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:t})]}),(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsx)(eE.Button,{colorway:"primary",text:"Create extension.json",loading:i,iconLeft:i?(0,x.jsx)(o8.default,{}):(0,x.jsx)(eJ.default,{}),onClick:function(){return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return a(!0),[4,r()];case 1:return e.sent(),o(),a(!1),[2]}})})()}}),(0,x.jsx)(eE.Button,{text:"Retry",iconLeft:(0,x.jsx)(n5.default,{}),onClick:function(){o()}})]})]})},p5=e.i(734882),p8=e.i(818660),p6=e.i(964269),p9=(0,eN.cssRecord)({iconContainer:[eG.rcss.position.relative,eG.rcss.width(64),eG.rcss.height(64),{"&:hover .edit-overlay":{opacity:1}}],iconWrapper:[eG.rcss.flex.column,eG.rcss.position.absolute,eG.rcss.top(0),eG.rcss.left(0)],iconOverlay:[eG.rcss.flex.column,eG.rcss.colWithGap(4),eG.rcss.center,eG.rcss.position.absolute,eG.rcss.top(0),eG.rcss.left(0),eG.rcss.width("100%"),eG.rcss.height("100%"),eG.rcss.backgroundColor.backgroundOverlay,eG.rcss.borderRadius(12),{transition:"0.25s",opacity:0,cursor:"pointer"}]});function p7(e){var t=e.performPaneOperation,n=e.setSelectedTab,r=(0,tl.useCurrentReplExtension)(),i=(0,tl.useInstallCurrentReplAsExtension)(),o=(0,tl.useReloadExtension)(),a=(0,tl.useUnloadExtension)(),s=(0,nO.useReplExtensionId)(),l=(0,z._)((0,W.useState)(!1),2),u=l[0],c=l[1],d=(0,z._)((0,W.useState)(!1),2),p=d[0],f=d[1];return(0,x.jsx)(F.View,{css:[eG.rcss.flex.wrap,{rowGap:8}],row:!0,gap:8,children:(0,x.jsxs)(F.View,{row:!0,gap:8,children:[r||p?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(eE.Button,{size:"small",text:"Reload",iconLeft:p?(0,x.jsx)(o8.default,{}):(0,x.jsx)(n5.default,{}),disabled:p,onClick:function(){return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:if(!r)return[2];return f(!0),[4,o(r.installationId)];case 1:return e.sent(),f(!1),[2]}})})()}}),(0,x.jsx)(eE.Button,{size:"small",text:"Unload",iconLeft:(0,x.jsx)(pI.default,{}),disabled:!r,onClick:function(){r&&a(r.installationId)}})]}):(0,x.jsx)(eE.Button,{size:"small",text:"Load locally",colorway:"primary",iconLeft:u?(0,x.jsx)(o8.default,{}):(0,x.jsx)(lk.default,{}),loading:u,onClick:function(){return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return c(!0),[4,i()];case 1:return e.sent(),c(!1),[2]}})})()}}),s?(0,x.jsx)(eE.Button,{size:"small",text:"View on Store",iconLeft:(0,x.jsx)(sa.default,{}),onClick:function(){return t({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:s}}})}}):null,(0,x.jsx)(eE.Button,{size:"small",text:"Edit Store Listing",onClick:function(){n("releases")},iconLeft:(0,x.jsx)(sr.default,{})})]})})}function fe(e){var t=e.performPaneOperation,n=e.setSelectedTab,r=(0,e8.useDevUrl)().url,i=pX(),o=i.parsed,a=i.state,s=i.__status;if(s===pZ.loading)return(0,x.jsx)(pJ,{});if(s===pZ.fileReadError)return(0,x.jsx)(p3,{message:a.fileReadError});var l=o.manifest,u=o.error;return u?(0,x.jsx)(p4,{performPaneOperation:t,manifestPath:a.manifestPath,error:u}):(0,x.jsx)(F.View,{gap:16,css:[eG.rcss.width("100%")],children:(0,x.jsxs)(V.ShadesSurface,{css:[eG.rcss.borderRadius(8),eG.rcss.colWithGap(8)],p:12,children:[(0,x.jsxs)(F.View,{row:!0,gap:16,align:"center",children:[(0,x.jsx)(F.View,{css:[eG.rcss.display.flex,eG.rcss.flex.row],grow:0,children:(0,x.jsx)(p8.ExtensionIcon,{size:64,baseUrl:null!=r?r:null,icon:l.icon})}),(0,x.jsxs)(F.View,{grow:!0,shrink:!0,children:[(0,x.jsx)(p6.HStack,{align:"center",justify:"space-between",children:(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:l.name})}),(0,x.jsx)(eA.Text,{variant:"text",color:"dimmest",children:l.description})]})]}),(0,x.jsx)(p7,{setSelectedTab:n,performPaneOperation:t})]})})}function ft(e){var t,n,r,i,o,a,s,l,u,c,d=e.manifest,p=e.onSubmit,f=e.updateManifest,h=(0,nO.useReplExtensionId)(),m=(0,e4.useCurrentUserId)(),v=(0,pD.useIdSeed)(),g=(0,z._)((0,W.useState)(null!=(s=d.name)?s:""),2),y=g[0],w=g[1],_=(0,z._)((0,W.useState)(null!=(l=d.description)?l:""),2),S=_[0],k=_[1],C=(0,z._)((0,W.useState)(null!=(u=d.longDescription)?u:void 0),2),T=C[0],I=C[1],P=(0,z._)((0,W.useState)(!1),2),E=P[0],R=P[1],A=(0,e8.useDevUrl)().url,D=(t={variables:{id:h||""},skip:!h},n=(0,b._)({},pS,t),j.useQuery(pk,n)),V=D.data,M=D.loading,O=D.refetch,L=(0,z._)((0,pw.useSetExtensionListedMutation)(),2),B=L[0],U=L[1].loading,N=(null==V||null==(r=V.extension)?void 0:r.__typename)==="Extension"&&(null==V||null==(i=V.extension)?void 0:i.user.id)===m,G=(null==V||null==(o=V.extension)?void 0:o.__typename)==="Extension"&&(null==V||null==(a=V.extension)?void 0:a.isListed);return(0,x.jsxs)(F.View,{tag:"form",gap:16,onSubmit:function(e){e.preventDefault(),p({name:y,description:S,longDescription:T})},children:[(0,x.jsxs)(F.View,{grow:!0,shrink:!0,gap:4,children:[(0,x.jsx)(eA.Text,{css:[eG.rcss.fontWeight.medium],children:"Do you want to publish your extension on the store?"}),M||U?(0,x.jsx)(o8.default,{}):(0,x.jsxs)(p5.RadioGroup,{css:eG.rcss.colWithGap(8),name:"extensionListingStatus",value:G?"listed":"unlisted",disabled:!N,onChange:function(e){B({variables:{extensionId:h||"",isListed:"listed"===e.target.value}}).then(function(){return O()})},children:[N?null:(0,x.jsx)(F.View,{css:[eG.rcss.width("fit-content")],children:(0,x.jsx)(eR.StatusBanner,{text:"You need to release this extension before listing it.",icon:(0,x.jsx)(pT.default,{}),colorway:"yellow"})}),(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsx)(p5.Radio,{id:v("listed"),value:"listed"}),(0,x.jsx)("label",{htmlFor:v("listed"),children:"Yes, list my extension publicly on the Store"})]},"listed"),(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsx)(p5.Radio,{id:v("unlisted"),value:"unlisted"}),(0,x.jsx)("label",{htmlFor:v("unlisted"),children:"No, I want to keep my listing page private"})]},"unlisted")]})]}),(0,x.jsx)(lY.DividerH,{}),(0,x.jsxs)(F.View,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:v("name"),children:[(0,x.jsx)(eA.Text,{children:"Extension Name"}),(0,x.jsx)(sD.Input,{id:v("name"),placeholder:"Give your extension a name",value:y,onChange:function(e){w(e.currentTarget.value)},required:!0})]}),(0,x.jsxs)(F.View,{grow:!0,shrink:!0,gap:4,children:[(0,x.jsx)(eA.Text,{children:"Extension Icon"}),(0,x.jsxs)(F.View,{row:!0,gap:12,align:"center",children:[(0,x.jsxs)(F.View,{css:p9.iconContainer,children:[(0,x.jsx)(F.View,{css:p9.iconWrapper,children:(0,x.jsx)(p8.ExtensionIcon,{size:64,baseUrl:null!=A?A:null,icon:d.icon})}),(0,x.jsxs)(F.View,{css:p9.iconOverlay,className:"edit-overlay",tag:"label",onClick:function(){return R(!0)},children:[(0,x.jsx)(sr.default,{}),(0,x.jsx)(eA.Text,{variant:"small",children:"Edit"})]})]}),(0,x.jsx)(eE.Button,{text:"Choose from file system",iconLeft:(0,x.jsx)(pC.default,{}),onClick:function(){return R(!0)}})]})]}),(0,x.jsxs)(F.View,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:v("tagline"),children:[(0,x.jsxs)(F.View,{gap:0,children:[(0,x.jsx)(eA.Text,{children:"Tagline"}),(0,x.jsx)(eA.Text,{color:"dimmer",variant:"small",multiline:!0,children:"Provide a short description of what your Extension is for."})]}),(0,x.jsx)(sD.Input,{id:v("tagline"),placeholder:"Give your extension a short tagline",value:S,onChange:function(e){k(e.currentTarget.value)},required:!0})]}),(0,x.jsxs)(F.View,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:v("longDescription"),children:[(0,x.jsxs)(F.View,{gap:0,children:[(0,x.jsx)(eA.Text,{children:"Description"}),(0,x.jsx)(eA.Text,{color:"dimmer",variant:"small",multiline:!0,children:"Add more detail about the usage of your extension."})]}),(0,x.jsx)(sD.MultiLineInput,{id:v("longDescription"),placeholder:"Give your extension a long description, markdown formatting is supported",value:null!=T?T:"",onChange:function(e){I(e.currentTarget.value||void 0)},css:{resize:"vertical"},autoSize:!0})]}),(0,x.jsx)(lY.DividerH,{}),(0,x.jsx)(pG,{features:null!=(c=d.features)?c:[],onDelete:function(e){if((null==(t=d.features)?void 0:t.length)===1&&0===e){var t,n,r=(0,b._)({},d);delete r.features,f(r)}else f((0,td._)((0,b._)({},d),{features:null==(n=d.features)?void 0:n.filter(function(t,n){return n!==e})}))},onUpdate:function(e,t){var n,r,i,o;f((0,td._)((0,b._)({},d),{features:(0,en._)(null!=(i=null==(n=d.features)?void 0:n.slice(0,t))?i:[]).concat([e],(0,en._)(null!=(o=null==(r=d.features)?void 0:r.slice(t+1))?o:[]))}))},onCreate:function(e){var t;f((0,td._)((0,b._)({},d),{features:(0,en._)(null!=(t=d.features)?t:[]).concat([e])}))}}),(0,x.jsx)(F.View,{row:!0,gap:12,css:[{alignSelf:"end"},eG.rcss.pt(8)],children:(0,x.jsx)(eE.Button,{text:"Continue",iconRight:(0,x.jsx)(rO.default,{}),colorway:"primary",type:"submit",disabled:!y||!S||!T})}),(0,x.jsx)(pB,{isOpen:E,close:function(){return R(!1)},onSubmit:function(e){f((0,td._)((0,b._)({},d),{icon:e}))}})]})}function fn(e){var t=e.fileHandlers,n=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,z._)((0,W.useState)([]),2),s=a[0],l=a[1],u=(0,z._)((0,W.useState)(!1),2),c=u[0],d=u[1];return(0,x.jsxs)(F.View,{children:[(0,x.jsxs)(F.View,{pb:12,children:[(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",children:[(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",children:[(0,x.jsx)(nN.default,{}),(0,x.jsx)(eA.Text,{variant:"subheadDefault",multiline:!1,children:"File Handlers"})]}),(0,x.jsx)(oM.IconButton,{onClick:function(){return d(!c)},alt:"Add a new File Handler",tooltipBehavior:c?"hidden":"default",disabled:c,children:(0,x.jsx)(eJ.default,{})})]}),(0,x.jsx)(eA.Text,{color:"dimmer",variant:"small",multiline:!1,children:"Custom file viewers and editors"})]}),(0,x.jsxs)(F.View,{gap:8,children:[c?(0,x.jsx)(fr,{onSubmit:function(e){n(e),d(!1)},onCancel:function(){d(!1)}}):null,t.length?t.map(function(e,t){var n;return s.includes(t)?(0,x.jsx)(fr,{initialFileHandler:e,onSubmit:function(e){r(e,t),l(function(e){return e.filter(function(e){return e!==t})})},onCancel:function(){l(function(e){return e.filter(function(e){return e!==t})})}},t):(0,x.jsxs)(V.ShadesSurface,{css:[eG.rcss.borderRadius(8),eG.rcss.flex.wrap,{rowGap:8}],p:8,row:!0,justify:"space-between",align:"center",children:[(0,x.jsx)(eA.Text,{multiline:!1,children:null!=(n=e.name)?n:"Unnamed"}),(0,x.jsxs)(F.View,{row:!0,gap:12,align:"center",children:[(0,x.jsx)(oM.IconButton,{alt:"Remove ".concat(e.name||"this file handler"),colorway:"red",onClick:function(){o(t)},children:(0,x.jsx)(su.default,{})}),(0,x.jsx)(oM.IconButton,{alt:"Edit ".concat(e.name||"this file handler"),onClick:function(){l(function(e){return(0,en._)(e).concat([t])})},children:(0,x.jsx)(sr.default,{})}),(0,x.jsx)(eE.Button,{iconLeft:(0,x.jsx)(pC.default,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},t)}):(0,x.jsx)(x.Fragment,{children:c?null:(0,x.jsxs)(F.View,{css:[eG.rcss.border({style:"dashed"}),eG.rcss.borderRadius(8),eG.rcss.p(16),eG.rcss.colWithGap(8),eG.rcss.center],children:[(0,x.jsx)(eA.Text,{color:"dimmest",children:"You haven't added a file handler yet"}),(0,x.jsx)(eE.Button,{variant:"outlined",text:"New File Handler",iconLeft:(0,x.jsx)(eJ.default,{}),onClick:function(){return d(!0)}})]})})]})]})}function fr(e){var t,n,r,i,o=e.onSubmit,a=e.onCancel,s=e.initialFileHandler,l=(0,z._)((0,W.useState)(null!=(t=null==s?void 0:s.name)?t:""),2),u=l[0],c=l[1],d=(0,z._)((0,W.useState)(null!=(n=null==s?void 0:s.icon)?n:""),2),p=d[0],f=d[1],h=(0,z._)((0,W.useState)(null!=(r=null==s?void 0:s.handler)?r:""),2),m=h[0],v=h[1],g=(0,z._)((0,W.useState)(null!=(i=null==s?void 0:s.glob)?i:""),2),y=g[0],b=g[1],w=(0,pD.useIdSeed)();return(0,x.jsxs)(V.ShadesSurface,{css:[eG.rcss.borderRadius(8),eG.rcss.border({color:D.tokens.outlineDimmest}),eG.rcss.p(8),eG.rcss.colWithGap(8)],tag:"form",onSubmit:function(e){e.preventDefault(),o({name:u,icon:p,handler:m,glob:y})},children:[(0,x.jsxs)(F.View,{css:[eG.rcss.border({color:D.tokens.outlineDimmest,direction:"bottom"}),eG.rcss.align.center,eG.rcss.flex.wrap,{rowGap:8}],row:!0,gap:2,justify:"space-between",children:[(0,x.jsx)(eA.Text,{multiline:!1,children:u||"New File Viewer"}),(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsx)(eE.Button,{text:"Cancel",onClick:function(){a()}}),(0,x.jsx)(eE.Button,{colorway:"primary",iconLeft:(0,x.jsx)(lS.default,{}),text:"Save Changes",type:"submit"})]})]}),(0,x.jsxs)(F.View,{gap:8,children:[(0,x.jsxs)(F.View,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:w("name"),children:[(0,x.jsx)(eA.Text,{color:"dimmer",multiline:!1,children:"Name"}),(0,x.jsx)(sD.Input,{id:w("name"),placeholder:"SVG Editor",value:u,onChange:function(e){c(e.currentTarget.value)},required:!0})]}),(0,x.jsxs)(F.View,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:w("handler"),children:[(0,x.jsx)(eA.Text,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,x.jsx)(sD.Input,{id:w("handler"),placeholder:"/svg-editor",value:m,onChange:function(e){v(e.currentTarget.value)},required:!0})]}),(0,x.jsxs)(F.View,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:w("glob"),children:[(0,x.jsx)(eA.Text,{color:"dimmer",multiline:!1,children:"Glob Pattern"}),(0,x.jsx)(sD.Input,{id:w("glob"),placeholder:"*.svg",value:y,onChange:function(e){b(e.currentTarget.value)},required:!0})]}),(0,x.jsxs)(F.View,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:w("icon"),children:[(0,x.jsx)(eA.Text,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,x.jsx)(sD.Input,{id:w("icon"),placeholder:"/svg-editor-logo.png",value:p,onChange:function(e){f(e.currentTarget.value)},required:!0})]})]})]})}function fi(e){var t=e.tools,n=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,z._)((0,W.useState)([]),2),s=a[0],l=a[1],u=(0,z._)((0,W.useState)(!1),2),c=u[0],d=u[1];return(0,x.jsxs)(F.View,{children:[(0,x.jsxs)(F.View,{pb:12,children:[(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",children:[(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",children:[(0,x.jsx)(el.default,{}),(0,x.jsx)(eA.Text,{variant:"subheadDefault",multiline:!1,children:"Tools"})]}),(0,x.jsx)(oM.IconButton,{onClick:function(){return d(!c)},alt:"Add a new tool",disabled:c,tooltipBehavior:c?"hidden":"default",children:(0,x.jsx)(eJ.default,{})})]}),(0,x.jsx)(eA.Text,{color:"dimmer",variant:"small",multiline:!1,children:"Custom user interfaces as a Pane"})]}),(0,x.jsxs)(F.View,{gap:8,children:[c?(0,x.jsx)(fo,{onSubmit:function(e){n(e),d(!1)},onCancel:function(){d(!1)}}):null,t.length?t.map(function(e,t){var n;return s.includes(t)?(0,x.jsx)(fo,{initialTool:e,onSubmit:function(e){r(e,t),l(function(e){return e.filter(function(e){return e!==t})})},onCancel:function(){l(function(e){return e.filter(function(e){return e!==t})})}},t):(0,x.jsxs)(V.ShadesSurface,{css:[eG.rcss.borderRadius(8),eG.rcss.flex.wrap,{rowGap:8}],p:8,row:!0,justify:"space-between",align:"center",children:[(0,x.jsx)(eA.Text,{multiline:!1,children:null!=(n=e.name)?n:"Unnamed"}),(0,x.jsxs)(F.View,{row:!0,gap:12,align:"center",children:[(0,x.jsx)(oM.IconButton,{alt:"Remove ".concat(e.name||"this tool"),colorway:"red",onClick:function(){o(t)},children:(0,x.jsx)(su.default,{})}),(0,x.jsx)(oM.IconButton,{alt:"Remove ".concat(e.name||"this tool"),onClick:function(){l(function(e){return(0,en._)(e).concat([t])})},children:(0,x.jsx)(sr.default,{})}),(0,x.jsx)(eE.Button,{iconLeft:(0,x.jsx)(i3.default,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},t)}):(0,x.jsx)(x.Fragment,{children:c?null:(0,x.jsxs)(F.View,{css:[eG.rcss.border({style:"dashed"}),eG.rcss.borderRadius(8),eG.rcss.p(16),eG.rcss.colWithGap(8),eG.rcss.center],children:[(0,x.jsx)(eA.Text,{color:"dimmest",children:"You haven't added any tools"}),(0,x.jsx)(eE.Button,{variant:"outlined",text:"New Tool",iconLeft:(0,x.jsx)(eJ.default,{}),onClick:function(){return d(!0)}})]})})]})]})}function fo(e){var t,n,r,i=e.onSubmit,o=e.onCancel,a=e.initialTool,s=(0,z._)((0,W.useState)(null!=(t=null==a?void 0:a.name)?t:""),2),l=s[0],u=s[1],c=(0,z._)((0,W.useState)(null!=(n=null==a?void 0:a.icon)?n:null),2),d=c[0],p=c[1],f=(0,z._)((0,W.useState)(null!=(r=null==a?void 0:a.handler)?r:""),2),h=f[0],m=f[1],v=(0,pD.useIdSeed)();return(0,x.jsxs)(V.ShadesSurface,{tag:"form",css:[eG.rcss.borderRadius(8),eG.rcss.border({color:D.tokens.outlineDimmest}),eG.rcss.p(8)],onSubmit:function(e){e.preventDefault(),i({name:l,icon:d,handler:h})},children:[(0,x.jsxs)(F.View,{css:[eG.rcss.border({color:D.tokens.outlineDimmest,direction:"bottom"}),eG.rcss.align.center,eG.rcss.flex.wrap,{rowGap:8}],row:!0,gap:2,justify:"space-between",children:[(0,x.jsx)(eA.Text,{multiline:!1,children:l||"New Tool"}),(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsx)(eE.Button,{text:"Cancel",onClick:function(){o()}}),(0,x.jsx)(eE.Button,{colorway:"primary",iconLeft:(0,x.jsx)(lS.default,{}),text:"Save Changes",type:"submit"})]})]}),(0,x.jsxs)(F.View,{gap:8,children:[(0,x.jsxs)(F.View,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:v("name"),children:[(0,x.jsx)(eA.Text,{color:"dimmer",multiline:!1,children:"Name"}),(0,x.jsx)(sD.Input,{id:v("name"),placeholder:"SQL Viewer",value:l,onChange:function(e){u(e.currentTarget.value)},required:!0})]}),(0,x.jsxs)(F.View,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:v("handler"),children:[(0,x.jsx)(eA.Text,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,x.jsx)(sD.Input,{id:v("handler"),placeholder:"/sql",value:h,onChange:function(e){m(e.currentTarget.value)},required:!0})]}),(0,x.jsxs)(F.View,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:v("icon"),children:[(0,x.jsx)(eA.Text,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,x.jsx)(sD.Input,{id:v("icon"),placeholder:"/sql-logo.png",value:null!=d?d:"",onChange:function(e){p(e.currentTarget.value||null)},required:!0})]})]})]})}function fa(e){var t,n,r=e.manifest,i=e.performPaneOperation,o=e.update,a=(0,tl.useCurrentReplExtension)(),s=(0,tl.useInstallCurrentReplAsExtension)(),l=(0,z._)((0,W.useState)(null),2),u=l[0],c=l[1];return(0,x.jsxs)(F.View,{gap:24,css:[eG.rcss.width("100%")],children:[(0,x.jsx)(fn,{onOpen:function(e){return(0,er._)(function(){return(0,ei._)(this,function(t){return c(e),[2]})})()},onDelete:function(e){var t;o((0,td._)((0,b._)({},r),{fileHandlers:null==(t=r.fileHandlers)?void 0:t.filter(function(t,n){return n!==e})}))},onUpdate:function(e,t){var n,i,a,s;o((0,td._)((0,b._)({},r),{fileHandlers:(0,en._)(null!=(a=null==(n=r.fileHandlers)?void 0:n.slice(0,t))?a:[]).concat([e],(0,en._)(null!=(s=null==(i=r.fileHandlers)?void 0:i.slice(t+1))?s:[]))}))},onCreate:function(e){var t;o((0,td._)((0,b._)({},r),{fileHandlers:(0,en._)(null!=(t=r.fileHandlers)?t:[]).concat([e])}))},fileHandlers:null!=(t=r.fileHandlers)?t:[]}),(0,x.jsx)(fi,{onOpen:function(e){return(0,er._)(function(){var t,n;return(0,ei._)(this,function(r){switch(r.label){case 0:if(t=a)return[3,2];return[4,s()];case 1:t=r.sent(),r.label=2;case 2:if(!t)throw Error("Expected current repl to be installed as an extension");return i({operation:"open",pane:{type:"extension",data:{extensionId:t.extensionId,installationId:t.installationId,name:null!=(n=e.name)?n:t.manifest.name,baseUrl:t.baseUrl,icon:e.icon,path:e.handler}}}),[2]}})})()},onDelete:function(e){var t;o((0,td._)((0,b._)({},r),{tools:null==(t=r.tools)?void 0:t.filter(function(t,n){return n!==e})}))},onUpdate:function(e,t){var n,i,a,s;o((0,td._)((0,b._)({},r),{tools:(0,en._)(null!=(a=null==(n=r.tools)?void 0:n.slice(0,t))?a:[]).concat([e],(0,en._)(null!=(s=null==(i=r.tools)?void 0:i.slice(t+1))?s:[]))}))},onCreate:function(e){var t;o((0,td._)((0,b._)({},r),{tools:(0,en._)(null!=(t=r.tools)?t:[]).concat([e])}))},tools:null!=(n=r.tools)?n:[]}),(0,x.jsx)(ez.Modal,{isOpen:!!u,onRequestClose:function(){return c(null)},children:u?(0,x.jsx)(pF,{glob:u.glob,openFile:function(e){return(0,er._)(function(){var t,n;return(0,ei._)(this,function(r){switch(r.label){case 0:if(!u)throw Error("Expected pending file handler");if(t=a)return[3,2];return[4,s()];case 1:t=r.sent(),r.label=2;case 2:if(!t)throw Error("Expected current repl to be installed as an extension");return i({operation:"open",pane:{type:"extension",data:{extensionId:t.extensionId,installationId:t.installationId,name:null!=(n=u.name)?n:t.manifest.name,baseUrl:t.baseUrl,path:(0,tc.getAssetUrl)(t.baseUrl,u.handler),filePath:e}}}),c(null),[2]}})})()}}):null})]})}var fs=e.i(965097),fl=e.i(140154),fu=(0,iB.css)(aO.interactive.filled,eG.rcss.position.relative,eG.rcss.p(4),eG.rcss.border({color:D.tokens.outlineDimmer}),eG.rcss.backgroundColor.backgroundHigher,{"&[data-complete]":[eG.rcss.backgroundColor.backgroundDefault,{pointerEvents:"none"}],button:{overflow:"hidden",margin:-1,borderWidth:0,padding:0,width:1,height:1,background:"none",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",cursor:"pointer","&::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",cursor:"pointer",zIndex:1}}}),fc=function(e){var t=e.complete,n=e.onClick,r=e.description,i=e.title,o=e.icon;return(0,x.jsx)(F.View,{tag:"li",css:fu,"data-complete":t,children:(0,x.jsxs)(F.View,{p:4,children:[(0,x.jsxs)(F.View,{row:!0,gap:6,align:"center",children:[t?(0,x.jsx)(lS.default,{color:D.tokens.accentPositiveStrongest,size:16,css:[eG.rcss.mr(4)]}):null!=o?o:null,(0,x.jsx)(eA.Text,{variant:"small",color:t?"dimmer":"default",css:[eG.rcss.fontWeight.medium],children:i})]}),r?(0,x.jsx)(eA.Text,{color:"dimmer",variant:"small",children:r}):null,(0,x.jsx)(F.View,{children:(0,x.jsx)("button",{onClick:function(){n&&"function"==typeof n&&n()},type:"button",children:"Start"})})]})})};let fd=function(e){var t=e.setSelectedTab,n=(0,l8.useDismissibleElement)("extensions-onboarding-checklist"),r=n.isDone,i=n.setAsDone,o=(0,l8.useDismissibleElement)("extensions-onboarding-checklist-create"),a=o.isDone,s=o.setAsDone,l=(0,l8.useDismissibleElement)("extensions-onboarding-checklist-concepts"),u=l.isDone,c=l.setAsDone,d=(0,l8.useDismissibleElement)("extensions-onboarding-checklist-api"),p=d.isDone,f=d.setAsDone,h=(0,l8.useDismissibleElement)("extensions-onboarding-checklist-publish").isDone;if((0,W.useEffect)(function(){s()},[]),void 0===r||!0===r)return null;var m=[a,u,p,h].filter(Boolean).length,v=[{name:"create",title:"Create an Extension",complete:!!a,icon:(0,x.jsx)(e0.default,{})},{name:"concepts",title:"Learn key concepts",complete:!!u,onClick:function(){window.open(e1.LINKS_DOCS.EXTENSIONS,"_blank","noopener"),(0,eu.track)(ec.events.EXTENSION_USED,{action:"developer_onboarding_completed",step:"concepts"}),c()},icon:(0,x.jsx)(fs.default,{})},{name:"learn",title:"Use the API",complete:!!p,onClick:function(){window.open(e1.LINKS_DOCS.EXTENSIONS,"_blank","noopener"),(0,eu.track)(ec.events.EXTENSION_USED,{action:"developer_onboarding_completed",step:"learn"}),f()},icon:(0,x.jsx)(rQ.default,{})},{name:"publish",title:"Publish your Extension",complete:!!h,onClick:function(){t("releases")},icon:(0,x.jsx)(fl.default,{})}];return(0,x.jsx)("section",{css:[eG.rcss.width("100%")],children:(0,x.jsxs)(F.View,{gap:12,children:[(0,x.jsx)(F.View,{gap:2,children:(0,x.jsxs)(F.View,{row:!0,gap:12,css:[eG.rcss.flex.wrap],align:"center",children:[(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:"Get started with Extensions"}),(0,x.jsxs)(F.View,{row:!0,gap:12,align:"center",children:[(0,x.jsx)(F.View,{row:!0,gap:2,align:"center",justify:"center",children:Array.from({length:v.length}).map(function(e,t){return(0,x.jsx)(F.View,{css:[eG.rcss.borderRadius(8),eG.rcss.width(12),eG.rcss.height(4),t<m?eG.rcss.backgroundColor.accentPositiveDefault:eG.rcss.backgroundColor.backgroundHighest]},t)})}),(0,x.jsx)(eA.Text,{multiline:!1,variant:"small",color:"dimmer",children:"".concat(m,"/").concat(v.length)}),(0,x.jsx)(oM.IconButton,{alt:"Hide section",onClick:i,children:(0,x.jsx)(iW.default,{})})]})]})}),(0,x.jsx)(F.View,{tag:"ul",css:[eG.rcss.flex.wrap,{listStyleType:"none",gap:D.tokens.space8}],row:!0,children:v.map(function(e,t){return(0,x.jsx)(fc,(0,b._)({},e),t)})})]})})};function fp(e){var t=e.performPaneOperation,n=e.setSelectedTab,r=pX(),i=r.__status,o=r.parsed,a=r.state,s=r.updateString;if("loading"===i)return(0,x.jsx)(pJ,{});if("fileReadError"===i)return(0,x.jsx)(p3,{message:(null==a?void 0:a.fileReadError)||"Unknown error"});if("fileParseError"===i){var l=o.error;return(0,x.jsx)(p4,{performPaneOperation:t,manifestPath:a.manifestPath,error:l})}var u=o.manifest;return"success"===i&&u?(0,x.jsxs)(F.View,{css:[eG.rcss.width("100%")],pt:12,gap:24,align:"center",children:[(0,x.jsx)(fe,{performPaneOperation:t,setSelectedTab:n}),(0,x.jsx)(fd,{setSelectedTab:n}),(0,x.jsx)(F.View,{css:[eG.rcss.border({direction:"bottom",width:4,color:D.tokens.outlineDimmest}),eG.rcss.width("100%")]}),(0,x.jsxs)(F.View,{gap:8,css:[eG.rcss.width("100%")],children:[(0,x.jsxs)(F.View,{gap:2,children:[(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",children:[(0,x.jsx)(py.default,{}),(0,x.jsx)(eA.Text,{variant:"subheadDefault",multiline:!1,children:"Permission Scopes"})]}),(0,x.jsxs)(eA.Text,{variant:"small",color:"dimmer",children:["Let users know what your Extension can do with their data. For more information,"," ",(0,x.jsx)("a",{href:e1.LINKS_DOCS.EXTENSIONS+"/api/manifest#scopetype",target:"_blank",rel:"noopener",children:"read the docs"}),"."]})]}),(0,x.jsx)(F.View,{css:[eG.rcss.borderRadius(4),eG.rcss.border({color:D.tokens.outlineDimmest,width:1}),eG.rcss.flex.row,eG.rcss.align.center,eG.rcss.p(8),eG.rcss.flex.wrap,{gap:12},eG.rcss.width("fit-content")],children:pb.scopes.map(function(e){var t;return(0,x.jsxs)(F.View,{row:!0,gap:6,align:"center",children:[(0,x.jsx)(nG.Checkbox,{id:e.key,checked:null==(t=u.scopes)?void 0:t.some(function(t){return t.name===e.key}),onChange:function(t){var n,r,i,o=(null==(n=u.scopes)?void 0:n.some(function(t){return t.name===e.key}))&&!t?pg.patch(a.manifestStr,(0,td._)((0,b._)({},u),{scopes:null==(r=u.scopes)?void 0:r.filter(function(t){return t.name!==e.key})})):pg.patch(a.manifestStr,(0,td._)((0,b._)({},u),{scopes:(0,en._)(null!=(i=u.scopes)?i:[]).concat([{name:e.key,reason:e.description}])}));a.writeChange((0,px.changeSetFromDiff)(a.manifestStr,o)),s(o)}}),(0,x.jsx)("label",{htmlFor:e.key,css:[eG.rcss.fontSize(12),eG.rcss.cursor.pointer],children:(0,x.jsx)("abbr",{title:e.description,css:[{textDecorationColor:D.tokens.foregroundDimmest}],children:e.friendlyName})})]},e.key)})})]}),(0,x.jsx)(fa,{performPaneOperation:t,manifest:u,update:function(e){var t=pg.patch(a.manifestStr,e);a.writeChange((0,px.changeSetFromDiff)(a.manifestStr,t)),s(t)}})]}):(0,x.jsx)("div",{children:"unknown state"})}var ff=e.i(221250),fh=e.i(542101),fm=e.i(109853),fv=e.i(410793),fg=(0,eN.cssRecord)({logViewerTopLevel:[eG.rcss.height("100%")],logsContainer:[eG.rcss.scrollbar.thin,eG.rcss.backgroundColor.backgroundDefault,eG.rcss.overflowY("scroll"),eG.rcss.flex.growAndShrink(1)],logViewerHeader:[eG.rcss.border({direction:"bottom",width:D.tokens.borderWidthDefault}),eG.rcss.display.flex,eG.rcss.flex.row,eG.rcss.rowWithGap(8),eG.rcss.align.center],logViewerHeaderControl:[eG.rcss.flex.row,eG.rcss.rowWithGap(4),eG.rcss.align.center],logLine:[eG.rcss.font.code,aO.interactive.listItem,eG.rcss.rowWithGap(2),eG.rcss.align.center],logLineIcon:[{alignSelf:"flex-start"}],logMessage:{flex:"1 1 0"}});function fx(e){var t=e.log,n=e.prevLevel,r=e.isLast,i=e.isFirst,o=(0,z._)((0,W.useState)(!1),2),a=o[0],s=o[1],l=(0,fh.default)().ref;return(0,x.jsxs)(F.View,{css:[eG.rcss.flex.column,function(e){if(e===fv.LogLevel.warn)return{color:D.tokens.yellowStronger,background:"rgba(150, 125, 0, 0.2)",borderTop:i?void 0:"1px solid rgba(150, 125, 0, 0.5)",borderBottom:r?"1px solid rgba(150, 125, 0, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(150, 125, 0, 0.2)"}};if(e===fv.LogLevel.error)return{color:D.tokens.accentNegativeStronger,backgroundColor:"rgba(229, 34, 34, 0.2)",borderTop:i?void 0:"1px solid rgba(229, 34, 34, 0.5)",borderBottom:r?"1px solid rgba(229, 34, 34, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(229, 34, 34, 0.2)"}};var t=D.tokens.backgroundHigher;return n===fv.LogLevel.warn?t="rgba(150, 125, 0, 0.5)":n===fv.LogLevel.error&&(t="rgba(229, 34, 34, 0.5)"),{color:D.tokens.foregroundDefault,borderTop:i?void 0:"1px solid ".concat(t),borderBottom:r?"1px solid ".concat(t):void 0}}(t.logLevel)],children:[(0,x.jsxs)(F.View,{css:fg.logLine,p:2,onClick:function(){return s(function(e){return!e})},children:[(0,x.jsx)(F.View,{css:fg.logLineIcon,p:4,children:(0,x.jsx)(function(){return t.logLevel===fv.LogLevel.warn?(0,x.jsx)(sb.default,{size:16}):t.logLevel===fv.LogLevel.error?(0,x.jsx)(ph.default,{size:16}):(0,x.jsx)(pT.default,{size:16,css:{opacity:0}})},{})}),(0,x.jsx)(eA.Text,{maxLines:10,css:fg.logMessage,variant:"small",children:t.message}),a?(0,x.jsx)(uz.default,{size:16}):(0,x.jsx)(lL.default,{size:16})]}),a?(0,x.jsx)(F.View,{children:(0,x.jsx)(ff.default,{ref:l,css:fm.CodeMirrorEditorStyleEditorContainer,noHistory:!0,readOnly:!0,lineWrapping:!0,language:"json",fontSize:12,initialDoc:JSON.stringify(t,null,2)})}):null]})}let fy=function(){var e=(0,nD.useExtAtomValue)(ts.filteredLogsAtom),t=(0,nD.useSetExtAtom)(ts.clearLogsAtom),n=(0,z._)((0,nD.useExtAtom)(ts.logFilterQueryAtom),2),r=n[0],i=n[1],o=(0,W.useRef)(null);return(0,W.useEffect)(function(){var e,t=o.current;t&&(null==(e=t.children[t.children.length-1])||e.scrollIntoView({behavior:"smooth"}))},[e]),(0,x.jsxs)(F.View,{css:fg.logViewerTopLevel,children:[(0,x.jsxs)(F.View,{className:"log-viewer-header",css:fg.logViewerHeader,p:8,children:[(0,x.jsx)(F.View,{css:fg.logViewerHeaderControl,style:{flexGrow:1},children:(0,x.jsx)(sD.Input,{type:"search",placeholder:"Filter logs",value:null!=r?r:"",onChange:function(e){return i(e.target.value)}})}),(0,x.jsxs)(F.View,{css:fg.logViewerHeaderControl,children:[(0,x.jsx)(oM.IconButton,{alt:"Clear logs",onClick:function(){return t()},children:(0,x.jsx)(iW.default,{id:"clear-logs"})}),(0,x.jsx)("label",{htmlFor:"clear-logs",children:"Clear logs"})]})]}),(0,x.jsx)(F.View,{css:fg.logsContainer,innerRef:o,children:e.map(function(t,n){var r;return(0,x.jsx)(fx,{log:t,prevLevel:null==(r=e[n-1])?void 0:r.logLevel,isFirst:0===n,isLast:n===e.length-1},t.index)})})]})};function fb(){var e=(0,w._)(["\n  subscription ExtensionBuildLogs($extensionId: String!) {\n    extensionBuildDeployActionUpdates(input: { extensionId: $extensionId }) {\n      ... on ExtensionBuildDeployLogAction {\n        log\n      }\n      ... on ExtensionBuildDeployStatusAction {\n        status\n        message\n        build {\n          id\n        }\n      }\n    }\n  }\n"]);return fb=function(){return e},e}function fw(){var e=(0,w._)(["\n  mutation DeployExtension2(\n    $extensionId: String!\n    $replId: String!\n    $outputDirectory: String!\n    $buildCommand: String!\n  ) {\n    deployExtension2(\n      extensionId: $extensionId\n      replId: $replId\n      outputDirectory: $outputDirectory\n      buildCommand: $buildCommand\n    ) {\n      ... on Extension {\n        ...TopLevelExtension\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return fw=function(){return e},e}function f_(){var e=(0,w._)(["\n  query Publish2Extension($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        user {\n          id\n          username\n        }\n        name\n        description\n        canDeployExtension\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return f_=function(){return e},e}function fj(){var e=(0,w._)(["\n  mutation CreateExtension($name: String!, $description: String!) {\n    createExtension(name: $name, description: $description) {\n      ... on Extension {\n        id\n        url\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return fj=function(){return e},e}function fS(){var e=(0,w._)(["\n  mutation UpdateExtension(\n    $extensionId: String!\n    $name: String\n    $description: String\n  ) {\n    updateExtension(\n      extensionId: $extensionId\n      name: $name\n      description: $description\n    ) {\n      ... on Extension {\n        id\n        name\n        description\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return fS=function(){return e},e}var fk={},fC=(0,_.gql)(fb()),fT=(0,_.gql)(fw(),eY.TopLevelExtensionFragmentDoc),fI=(0,_.gql)(f_()),fP=(0,_.gql)(fj()),fE=(0,_.gql)(fS()),fR=e.i(919061);e.i(713984);var fA=e.i(966036),fD=e.i(883021),fV=F.SpecializedView.button,fM=((a={}).Pending="pending",a.Active="active",a.Complete="complete",a.Error="error",a),fF=function(){return(0,x.jsx)(F.View,{css:[eG.rcss.border({color:D.tokens.outlineDimmest,direction:"top"})],grow:!0,row:!0})},fO=function(e){var t=e.text,n=e.size,r=void 0===n?"default":n,i=e.state,o=e.onClick,a=e.disabled,s=e.hideLoadingIcon,l=(0,eE.getTextVariant)(r),u=(0,eE.getIconSize)(r);return(0,x.jsx)(fV,{type:"button",css:[eG.rcss.reset.button,eG.rcss.position.relative,o&&aO.interactive.nofill,eG.rcss.px(8),eG.rcss.py(2),eG.rcss.borderRadius(4),eG.rcss.rowWithGap(4),eG.rcss.align.center,{borderRadius:D.tokens.borderRadiusRound}].concat((0,en._)("error"===i?[eG.rcss.color.accentNegativeStronger]:"active"===i?[eG.rcss.backgroundColor.accentPrimaryDimmer,eG.rcss.color.accentPrimaryStrongest]:"complete"===i?[eG.rcss.color.accentPositiveStronger]:[eG.rcss.color.foregroundDimmest])),onClick:o,disabled:a,children:(0,x.jsx)(eE.ButtonContent,{text:t,iconSize:u,textVariant:l,iconRight:function(){if("error"===i)return(0,x.jsx)(sb.default,{});if("active"===i){if(s)return;return(0,x.jsx)(o8.default,{})}return"complete"===i?(0,x.jsx)(lS.default,{}):(0,x.jsx)(py.default,{})}()})})},fL=e.i(210481),fB=e.i(818976),fU=e.i(972882),fN=((s=fN||{}).Details="Details",s.Init="Init",s.CreatingExtension="CreatingExtension",s.CreatingExtensionError="CreatingExtensionError",s.Queued="Queued",s.Deploying="Deploying",s.DeployError="DeployError",s.Success="Success",s),fG=["CreatingExtension","Deploying"],fz=((l=fz||{}).Details="Details",l.Init="Configure",l.Create="Create",l.Deploy="Deploy",l),fW=["Details","Configure","Deploy"];function fH(e){var t,n,r,i,o,a=e.performPaneOperation,s=(0,tv.default)(),l=s.container,u=s.fs,c=s.dotReplit,d=(0,z._)((t=(0,b._)({},fk,void 0),S.useLazyQuery(fI,t)),1)[0],p=(0,l8.useDismissibleElement)("extensions-onboarding-checklist-".concat("publish")).setAsDone,f=(0,z._)((0,W.useState)(null),2),h=f[0],m=f[1],v=(0,z._)((0,W.useState)("Details"),2),g=v[0],y=v[1],w=(0,z._)((0,W.useState)(null),2),_=w[0],j=w[1],k=pX(),C=k.__status,T=k.parsed,I=k.state,P=k.updateManifest,E=(0,sw.useFormField)("",function(e){return e?e.startsWith("/")?{message:'Folder must be relative to the root of your project (e.g. "extension" or "./extension")',severity:"error"}:null:{message:"Output folder is required",severity:"error"}}),R=E.value,A=E.setValue,M=E.error,O=E.validate,L=(0,z._)((0,W.useState)([]),2),B=L[0],U=L[1],N=(0,W.useCallback)(function(e){return a({operation:"open",secondary:!0,pane:{type:(0,em.getPaneTypeForFile)(e),data:e}})},[a]),G=(0,z._)((0,fL.default)({openFile:N,listFiles:u.listFiles}),2),H=G[0],q=G[1],K=(0,fB.useTerminalTheme)();n=(0,b._)({},fk,{variables:{extensionId:null!=h?h:""},onData:function(e){var t=e.data;if(t.data&&!t.error){var n=t.data.extensionBuildDeployActionUpdates;"ExtensionBuildDeployLogAction"===n.__typename&&U(function(e){return(0,en._)(e).concat((0,en._)(n.log))}),"ExtensionBuildDeployStatusAction"===n.__typename&&(n.status===ej.HostingBuildStatus.Success?y("Success"):n.status===ej.HostingBuildStatus.Failed&&y("DeployError"))}},skip:"Deploying"!==g||!h}),r6.useSubscription(fC,n),(0,W.useEffect)(function(){H&&(H.clear(),B.forEach(function(e){H.write(e.replaceAll("\n","\r\n"))}))},[B,H]);var $=(0,W.useCallback)(function(e){if(null==e?void 0:e.config){var t=e.config.extension;if(!t||!1===t.isExtension){m(null),j(null),A(null);return}t.buildCommand&&j(t.buildCommand),t.outputDirectory&&A(t.outputDirectory),t.extensionID&&m(t.extensionID)}},[A]);(0,W.useEffect)(function(){var e=!1;return(0,er._)(function(){var t;return(0,ei._)(this,function(n){switch(n.label){case 0:return[4,c.getConfig()];case 1:if(t=n.sent(),e)return[2];return $(t),[2]}})})(),function(){e=!0}},[c,$]);var Y=(0,W.useCallback)(function(e){return(0,er._)(function(){return(0,ei._)(this,function(t){switch(t.label){case 0:return m(e),[4,c.updateDotReplit([{op:"add",path:"extension/extensionID",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return t.sent(),[2]}})})()},[c]),Q=(0,W.useCallback)(function(e){return(0,er._)(function(){return(0,ei._)(this,function(t){switch(t.label){case 0:return j(e),[4,c.updateDotReplit([{op:"add",path:"extension/buildCommand",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return t.sent(),[2]}})})()},[c]),X=(0,z._)((0,W.useState)(null),2),Z=X[0],J=X[1],ee=(0,z._)((0,W.useState)(null),2),et=ee[0],eo=ee[1],ea=(0,z._)((0,W.useState)(null),2),es=ea[0],el=ea[1],ed=(0,z._)((0,W.useState)(null),2),ep=ed[0],ef=ed[1],eh=(0,z._)((0,W.useState)(null),2),ev=eh[0],eg=eh[1],ex=(0,z._)((r=(0,b._)({},fk,void 0),r9.useMutation(fT,r)),1)[0],ey=(0,e3.default)(),eb=(0,z._)((i=(0,b._)({},fk,void 0),r9.useMutation(fP,i)),1)[0],ew=(0,z._)((0,W.useState)(null),2),e_=ew[0],eS=ew[1],ek=(0,W.useCallback)(function(e){var t=e.name,n=e.description;return(0,er._)(function(){var e,r,i;return(0,ei._)(this,function(o){switch(o.label){case 0:return[4,eb({variables:{name:t,description:n}})];case 1:if((r=o.sent()).errors)return[2,{error:r.errors.map(function(e){return e.message}).join(", "),result:null}];if(!(i=null==(e=r.data)?void 0:e.createExtension))return[2,{error:"Failed to create extension",result:null}];if("TooManyRequestsError"===i.__typename||"UserError"===i.__typename||"UnauthorizedError"===i.__typename)return[2,{error:"Failed to create extension: "+i.message,result:null}];if("Extension"===i.__typename)return[2,{error:null,result:i}];throw Error("Unexpected response from createExtension mutation")}})})()},[eb]),eC=(0,z._)((o=(0,b._)({},fk,void 0),r9.useMutation(fE,o)),1)[0],eT=(0,W.useCallback)(function(){return(0,er._)(function(){var e,t,n,r,i,o,a,s,c,f,m,v,g,x,b,w,j,S;return(0,ei._)(this,function(k){switch(k.label){case 0:return e=h,[4,O()];case 1:if(null==(t=k.sent())?void 0:t.message)return el(null==t?void 0:t.message),[2];if(!R)throw Error("expected output folder");return n=(0,nC.normalizePath)(R),(r=function(){y("Init"),U([]),eg(null),el(null),eo(null),J(null)})(),[4,u.flush()];case 2:if(k.sent(),!e)return[3,11];return[4,d({variables:{extensionId:e}})];case 3:if((i=k.sent()).error||!i.data)throw Error("Encountered an unknown error. Please contact support.");if((null==(o=i.data.extension)?void 0:o.__typename)!=="NotFoundError")return[3,5];return[4,new Promise(function(t){eS({message:"The extension referenced in .replit (".concat(e,") does not exist. Would you like to create a new extension?"),callback:function(e){eS(null),t(e)}})})];case 4:case 6:if(!k.sent())return r(),[2];return e=null,[3,11];case 5:if(!((null==o?void 0:o.__typename)==="Extension"&&!o.canDeployExtension))return[3,7];return[4,new Promise(function(t){eS({message:"You do not have the permissions to deploy the extension referenced in .replit (".concat(e,"). Would you like to create a new extension?"),callback:function(e){eS(null),t(e)}})})];case 7:if(!((null==o?void 0:o.__typename)==="Extension"&&o.canDeployExtension))return[3,10];if(c=null==T||null==(a=T.manifest)?void 0:a.name,f=null==T||null==(s=T.manifest)?void 0:s.description,!(c&&c!==o.name||f&&f!==o.description))return[3,9];return[4,eC({variables:{extensionId:e,description:null!=f?f:void 0,name:null!=c?c:void 0}})];case 8:k.sent(),k.label=9;case 9:return[3,11];case 10:throw Error("Encountered an unknown error. Please contact support.");case 11:if(e)return[3,13];return y("CreatingExtension"),[4,ek({name:null!=(g=null==T||null==(m=T.manifest)?void 0:m.name)?g:"My extension",description:null!=(x=null==T||null==(v=T.manifest)?void 0:v.description)?x:"My extension's description"})];case 12:if(null!==(b=k.sent()).error)return y("CreatingExtensionError"),ef(b.error),[2];Y(e=b.result.id),k.label=13;case 13:var C;if(!e)throw Error("expected extension id to be set");return[4,(C=n,new Promise(function(e){var t=l.openChannel({service:"gcsfiles"},function(n){return n.channel.request({persistMirror:{path:C}}).then(function(n){n.ok,t(),e()}),function(e){e.willReconnect&&t()}})}))];case 14:k.sent(),y("Queued"),k.label=15;case 15:return k.trys.push([15,17,,18]),[4,ex({variables:{extensionId:e,replId:ey,outputDirectory:n,buildCommand:null!=_?_:""}})];case 16:return w=k.sent(),[3,18];case 17:if(j=k.sent(),y("DeployError"),j.message.includes("received message larger than max"))return eg("Your extension's size is too large. Please compress assets or remove files, and try again."),[2];return eg(j.message),[2];case 18:if(w.errors)return y("DeployError"),eg("Internal error. Please contact support: "+w.errors.map(function(e){return e.message}).join(", ")),[2];if(!w.data)return y("DeployError"),eg("Encountered an unknown error. Please contact support."),[2];if("Extension"===(S=w.data.deployExtension2).__typename)return y("Deploying"),p(),(0,eu.track)(ec.events.EXTENSION_USED,{action:"developer_onboarding_completed",step:"publish"}),J(S),[2];if("message"in S)return y("DeployError"),eg(S.message),[2];return y("DeployError"),eg("Encountered an unknown error. Please contact support."),[2]}})})()},[_,l,R,O,ey,u,y,ex,d,eC,h,ek,Y,p,T]),eI=function(e){switch(e){case"Details":default:return"Details";case"Init":return"Configure";case"CreatingExtension":case"CreatingExtensionError":return"Create";case"Queued":case"Deploying":case"DeployError":return"Deploy"}}(g),eP=fW.indexOf(eI);function eD(){return et?"Build error: ".concat(et):es?"Validation error: ".concat(es):es?"Create extension error: ".concat(ep):ev?"Deploy error: ".concat(ev):void 0}var eV=(0,ts.useExtensions)().find(function(e){return e.extensionId===h}),eM=(0,z._)((0,W.useState)(!1),2),eF=eM[0],eO=eM[1],eL=(0,tl.useInstallExtension)(),eB=(0,W.useMemo)(function(){return eF?(0,x.jsx)(o8.default,{}):eV?(0,x.jsx)(lS.default,{}):(0,x.jsx)(lk.default,{})},[eF,eV]),eU=(0,nV.useTheme)().values.global,eN=(0,fD.useConfetti)().fireBurst,ez=(0,z._)((0,W.useState)(!1),2),eW=ez[0],eH=ez[1],eq=(0,W.useRef)(null);if((0,W.useEffect)(function(){eq.current&&!eW&&"Success"===g&&(eN({x:eq.current.getBoundingClientRect().left,y:eq.current.getBoundingClientRect().top,heading:-45,numParticles:160,lifetime:1,spread:80,velocity:function(){return(0,fA.randNum)(300,5e3)},size:function(){return{width:(0,fA.randNum)(8,16),height:(0,fA.randNum)(8,16)}},color:[eU.tealStronger,eU.blurpleStronger,eU.yellowStronger]}),eN({x:eq.current.getBoundingClientRect().right,y:eq.current.getBoundingClientRect().top,heading:225,numParticles:160,lifetime:1,velocity:function(){return(0,fA.randNum)(300,5e3)},size:function(){return{width:(0,fA.randNum)(8,16),height:(0,fA.randNum)(8,16)}},color:[eU.blueStronger,eU.greenStronger,eU.pinkStronger]}),eH(!0))},[g,eU,eN,eW]),C===pZ.loading)return(0,x.jsx)(pJ,{});if(C===pZ.fileReadError)return(0,x.jsx)(p3,{message:I.fileReadError});var eK=T.manifest,e$=T.error;return e$?(0,x.jsx)(p4,{performPaneOperation:a,manifestPath:I.manifestPath,error:e$}):(0,x.jsxs)(F.View,{css:[eG.rcss.flex.column,eG.rcss.display.flex,eG.rcss.height("100%"),eG.rcss.justify.center,eG.rcss.align.center,eG.rcss.position.relative],children:[(0,x.jsx)(F.View,{css:[eG.rcss.position.absolute,eG.rcss.top(0),eG.rcss.left(0),eG.rcss.right(0)],className:"Confetti",innerRef:eq}),(0,x.jsxs)(F.View,{css:[eG.rcss.width("100%"),eG.rcss.maxWidth(pv.PANE_CONTENT_MAX_WIDTH)],grow:!0,shrink:!0,p:12,pt:16,gap:24,children:["Success"!==g?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(F.View,{gap:16,children:[(0,x.jsx)(eA.Text,{variant:"subheadBig",multiline:!0,children:"Create a new release"}),(0,x.jsx)(F.View,{row:!0,gap:4,align:"center",children:fW.map(function(e,t){var n;return(0,x.jsxs)(W.Fragment,{children:[0!==t&&(0,x.jsx)(fF,{}),(0,x.jsx)(fO,{state:(n=t)<eP?fM.Complete:n!==eP?fM.Pending:["CreatingExtensionError","DeployError"].includes(g)?fM.Error:fM.Active,text:e,hideLoadingIcon:"Configure"===e||"Details"===e})]},e)})})]}),"Details"===g?(0,x.jsx)(F.View,{css:[eG.rcss.flex.column,eG.rcss.colWithGap(8),eG.rcss.width("100%")],children:(0,x.jsx)(ft,{manifest:eK,updateManifest:P,onSubmit:function(e){P((0,b._)({},eK,e)),y("Init")}})}):null,"Details"!==g?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(F.View,{gap:16,children:[(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",children:[(0,x.jsx)(ly.default,{}),(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:"Build settings"}),(0,x.jsx)(F.View,{css:[eG.rcss.border({color:D.tokens.backgroundHighest,direction:"y"})],grow:!0})]}),(0,x.jsxs)(F.View,{gap:4,children:[(0,x.jsxs)("label",{htmlFor:"buildCommand",css:[eG.rcss.display.flex,eG.rcss.rowWithGap(4),eG.rcss.align.center],children:[(0,x.jsx)(eA.Text,{color:"dimmer",variant:"small",children:"Build command (optional)"}),(0,x.jsx)(aV.Tooltip,{tooltip:"This is the command that compiles your app at build time. Leave it blank if you don't need to build your app.",children:(0,x.jsx)(pT.default,{size:12})})]}),(0,x.jsx)(sD.Input,{value:null!=_?_:"",onChange:function(e){return Q(e.target.value)},placeholder:"Example: npm run build",disabled:"Init"!==g&&fG.includes(g)})]}),(0,x.jsxs)(F.View,{gap:4,children:[(0,x.jsxs)("label",{htmlFor:"outputFolder",css:[eG.rcss.display.flex,eG.rcss.rowWithGap(4),eG.rcss.align.center],children:[(0,x.jsx)(eA.Text,{color:"dimmer",variant:"small",children:"Output folder"}),(0,x.jsx)(aV.Tooltip,{tooltip:"This is where your build will live. There must be an extension.json file in this folder.",children:(0,x.jsx)(pT.default,{size:12})})]}),(0,x.jsx)(sD.Input,{id:"outputFolder",value:null!=R?R:"",disabled:"Init"!==g&&fG.includes(g),onChange:function(e){A(e.currentTarget.value),c.updateDotReplit([{op:"add",path:"extension/outputDirectory",value:JSON.stringify(e.currentTarget.value)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])},placeholder:"./extension"}),M?(0,x.jsx)(eA.Text,{css:[eG.rcss.color.accentNegativeStronger],children:M.message}):null]}),(0,x.jsx)(eE.Button,{text:"Init"===g||g.endsWith("Error")?"Deploy and Release":"Deployingâ€¦",iconLeft:"Init"===g||g.endsWith("Error")?(0,x.jsx)(li.default,{}):(0,x.jsx)(o8.default,{}),onClick:eT,disabled:"Init"!==g&&fG.includes(g),colorway:"primary"}),(0,x.jsxs)(eA.Text,{multiline:!0,variant:"small",color:"dimmer",children:["By releasing an Extension, you agree to the"," ",(0,x.jsx)("a",{href:e1.LINKS_LEGAL.EXTENSIONS_DEVELOPER_TERMS,children:"Developer Terms"})]})]}),B.length>0?(0,x.jsxs)(F.View,{gap:8,children:[(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",children:[(0,x.jsx)(fR.default,{}),(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:"Build logs"}),(0,x.jsx)(F.View,{css:[eG.rcss.border({color:D.tokens.backgroundHighest,direction:"y"})],grow:!0})]}),eD()?(0,x.jsx)(eR.StatusBanner,{text:eD(),colorway:"red",icon:(0,x.jsx)(ph.default,{})}):null,(0,x.jsx)(F.View,{css:[eG.rcss.display.flex,eG.rcss.py(12),eG.rcss.pl(16),eG.rcss.borderRadius(8),eG.rcss.overflow("hidden"),{border:"1px solid ".concat(D.tokens.outlineDimmest),backgroundColor:null==K?void 0:K.background}],children:(0,x.jsx)(F.SpecializedView.div,{css:[eG.rcss.width("100%"),eG.rcss.maxWidth("100%")],ref:q})})]}):null,e_?(0,x.jsxs)(V.ShadesSurface,{css:[eG.rcss.borderRadius(8)],p:8,gap:8,children:[(0,x.jsx)(eA.Text,{variant:"text",multiline:!0,maxLines:3,children:e_.message}),(0,x.jsxs)(F.View,{row:!0,gap:4,align:"center",children:[(0,x.jsx)(eE.Button,{text:"No",css:[eG.rcss.flex.grow(1)],onClick:function(){return e_.callback(!1)}}),(0,x.jsx)(eE.Button,{text:"Yes",colorway:"primary",css:[eG.rcss.flex.grow(1)],onClick:function(){return e_.callback(!0)}})]})]}):null]}):null]}):null,Z&&"Success"===g?(0,x.jsxs)(F.View,{gap:16,children:[(0,x.jsxs)(F.View,{gap:4,children:[(0,x.jsx)(eA.Text,{variant:"subheadBig",multiline:!1,children:"Congratulations!"}),(0,x.jsx)(eA.Text,{color:"dimmer",multiline:!1,children:"You just published a new release to the Extensions Store."})]}),(0,x.jsx)(F.View,{py:8,children:(0,x.jsx)(fU.ExtensionCard,{showMetadata:!1,extension:Z,onClick:function(){a({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:(0,e2.asExtensionId)(Z.id)}}})}})}),(0,x.jsxs)(F.View,{row:!0,gap:8,align:"center",children:[(0,x.jsx)(fs.default,{}),(0,x.jsx)(eA.Text,{variant:"subheadDefault",multiline:!1,children:"Next steps"}),(0,x.jsx)(F.View,{css:[eG.rcss.border({color:D.tokens.backgroundHighest,direction:"y"})],grow:!0})]}),(0,x.jsxs)(F.View,{css:[eG.rcss.border({color:D.tokens.outlineDimmest}),eG.rcss.borderRadius(8)],p:12,gap:8,children:[(0,x.jsx)(eA.Text,{variant:"subheadDefault",children:"Install your Extension"}),(0,x.jsx)(eA.Text,{color:"dimmer",children:"Once installed, you can use the extension in any of your Apps."}),(0,x.jsx)(eE.Button,{text:eV?"Already installed":"Install Extension",colorway:eV?"green":"primary",disabled:eF||!!eV,iconLeft:eB,loading:eF,onClick:function(){return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return eO(!0),[4,eL({extensionId:(0,e2.asExtensionId)(Z.id),replId:null})];case 1:return e.sent(),eO(!1),[2]}})})()}})]})]}):null]})]})}var fq=e.i(628796);function fK(e){var t=e.performPaneOperation,n=(0,z._)((0,W.useState)("home"),2),r=n[0],i=n[1];return(0,x.jsx)(F.View,{css:[eG.rcss.flex.column,eG.rcss.height("100%"),eG.rcss.position.relative],children:(0,x.jsx)("div",{css:[eG.rcss.flex.grow(1),eG.rcss.flex.column,eG.rcss.align.center,eG.rcss.display.flex,eG.rcss.overflow("hidden")],children:(0,x.jsxs)(fq.Tabs,{selectedKey:r,onSelectionChange:function(e){return i(e)},children:[(0,x.jsx)(V.ShadesSurface,{css:[eG.rcss.top(0),eG.rcss.width("100%"),eG.rcss.zIndex(1)],align:"center",elevate:!1,children:(0,x.jsxs)(fq.TabList,{css:[eG.rcss.align.center,eG.rcss.width("100%"),eG.rcss.pb(0),eG.rcss.maxWidth(pv.PANE_CONTENT_MAX_WIDTH)],children:[(0,x.jsx)(fq.Tab,{id:"home",css:[eG.rcss.p(12),eG.rcss.height("100%"),eG.rcss.borderRadius(0)],iconLeft:(0,x.jsx)(uH.default,{}),children:"Home"}),(0,x.jsx)(fq.Tab,{id:"releases",css:[eG.rcss.p(12),eG.rcss.height("100%"),eG.rcss.borderRadius(0)],iconLeft:(0,x.jsx)(pm.default,{}),children:"Releases"}),(0,x.jsx)(fq.Tab,{id:"logs",css:[eG.rcss.p(12),eG.rcss.height("100%"),eG.rcss.borderRadius(0)],iconLeft:(0,x.jsx)(ph.default,{}),children:"Logs"}),(0,x.jsx)(F.View,{grow:!0}),(0,x.jsx)(V.ShadesSurface,{css:[{boxShadow:"inset 0 -1px 0 ".concat(D.tokens.outlineDimmest)}],p:8,elevate:!1,children:(0,x.jsx)(l$.ButtonLink,{text:"Docs",href:e1.LINKS_DOCS.EXTENSIONS,target:"_blank",rel:"noopener",variant:"outlined",size:"small",iconLeft:(0,x.jsx)(pf.default,{}),css:[eG.rcss.display.inlineFlex]})})]})}),(0,x.jsx)("div",{css:[eG.rcss.flex.grow(1),eG.rcss.align.center,eG.rcss.justify.center,eG.rcss.width("100%"),eG.rcss.display.flex,eG.rcss.overflow("hidden")],children:(0,x.jsxs)(fq.TabPanels,{children:[(0,x.jsx)(fq.TabPanel,{id:"home",css:[eG.rcss.height("100%"),eG.rcss.p(12),eG.rcss.maxWidth(pv.PANE_CONTENT_MAX_WIDTH),eG.rcss.display.flex,eG.rcss.width("100%"),eG.rcss.justify.center,eG.rcss.overflowY("scroll")],children:(0,x.jsx)(fp,{performPaneOperation:t,setSelectedTab:i})}),(0,x.jsx)(fq.TabPanel,{id:"releases",css:[eG.rcss.height("100%"),eG.rcss.width("100%"),eG.rcss.overflowY("scroll")],children:(0,x.jsx)(fH,{performPaneOperation:t})}),(0,x.jsx)(fq.TabPanel,{id:"logs",css:[eG.rcss.height("100%"),eG.rcss.width("100%")],children:(0,x.jsx)(fy,{})})]})})]})})})}var f$=nf.Type.Object({type:nf.Type.Literal("extensionDevtools")}),fY={Content:function(e){var t=e.options.performPaneOperation;return(0,x.jsx)(fK,{performPaneOperation:t})},Icon:function(e){var t=e.size;return(0,x.jsx)(e0.default,{size:t})},getTitle:function(){return"Extensions Devtools"},description:"Manage and debug workspace extensions",category:d8.PaneCategory.WorkspaceExtensions,decode:function(e){return nh.Value.Decode(f$,e)}},fQ=e.i(678486),fX=e.i(495954);function fZ(e){var t=(0,ep.useUpdatePane)(),n=(0,tl.useInstallExtension)(),r=(0,tl.useUninstallExtension)(),i=(0,ts.useExtensions)(),o=(0,W.useCallback)(function(n,r){if("cover"===n){if(null===r)return void o("store",null);t({paneId:e.paneId,pane:{type:"extensionStore",data:{coverPageExtensionId:null!=r?r:null,page:"cover"}}})}else t({paneId:e.paneId,pane:{type:"extensionStore",data:{page:n}}})},[t,e.paneId]);if("cover"===e.page){var a,s,l=null!=(s=null==(a=i.find(function(t){return t.extensionId===e.coverPageExtensionId}))?void 0:a.installationId)?s:null;return(0,x.jsx)(fQ.ExtensionCoverPage,{existingInstallationId:l,extensionId:e.coverPageExtensionId,goBackToStore:function(){return o("store",null)},installExtension:function(){return(0,er._)(function(){var t;return(0,ei._)(this,function(r){switch(r.label){case 0:return[4,n({extensionId:e.coverPageExtensionId,replId:null})];case 1:if(!(t=r.sent()))throw Error("Failed to install extension");return[2,(0,e2.asInstallationId)(t.id)]}})})()},uninstallExtension:function(e){return(0,er._)(function(){return(0,ei._)(this,function(t){switch(t.label){case 0:return[4,r({installationId:e,replId:null})];case 1:return t.sent(),[2]}})})()}})}return(0,x.jsx)(fX.default,{storeMode:"pane",openExtensionCover:function(e){return o("cover",e)},setPage:function(e){return o(e,null)},page:e.page})}var fJ=nf.Type.Union([nf.Type.Object({page:nf.Type.Union([nf.Type.Literal("store"),nf.Type.Literal("manage")])}),nf.Type.Object({page:nf.Type.Literal("cover"),coverPageExtensionId:nf.Type.Unsafe(nf.Type.String())})]),f0=nf.Type.Object({type:nf.Type.Literal("extensionStore"),data:fJ}),f1={Content:function(e){return(0,x.jsx)(fZ,(0,td._)((0,b._)({},e.pane.data),{paneId:e.options.paneId}))},Icon:function(e){var t=e.size;return(0,x.jsx)(r4.IconContext.Provider,{value:{color:D.tokens.yellowStronger,size:t},children:(0,x.jsx)(e0.default,{})})},getTitle:function(){return"Extension Store"},description:"Find and install workspace extensions",category:d8.PaneCategory.WorkspaceExtensions,decode:function(e){return nh.Value.Decode(f0,e)}},f2=e.i(334028),f4=e.i(257042),f3=nf.Type.Object({type:nf.Type.Literal("replAuth")}),f5={Content:f4.default,Icon:function(e){var t=e.size;return(0,x.jsx)(r4.IconContext.Provider,{value:{color:D.tokens.orangeStrongest,size:t},children:(0,x.jsx)(f2.default,{})})},getTitle:function(){return"Authentication"},description:"Let users log in to your App using a prebuilt login page or customize your own button",category:d8.PaneCategory.CloudServices,decode:function(e){return nh.Value.Decode(f3,e)}},f8=e.i(324975),f6=e.i(86306),f9=e.i(357114),f7=function(e){var t;null==(t=e.focus)||t.call(e)};function he(e){var t=e.isValid,n=e.move,r=e.focus,i=void 0===r?f7:r,o=e.wrap,a=void 0!==o&&o,s=e.selector,l=e.boundary,u=(0,W.useRef)(null);return(0,W.useEffect)(function(){if(u.current){var e=u.current,r=function(r){if(!t(r))return;if(s)p=(0,en._)(e.querySelectorAll(s));else{var o;o=e.querySelectorAll('a[href],button,input,textarea,select,details,[tabindex]:not([tabindex="-1"])'),p=(0,en._)(o)}if(0!==p.length){var u=document.activeElement;if(e.contains(u)){if(s)if(l){var c=null==u?void 0:u.closest(l),d=null==u?void 0:u.closest(s);u=d||(null==c?void 0:c.querySelector(s))}else u=null==u?void 0:u.closest(s);if(s&&(!u||!e.contains(document.activeElement))){r.preventDefault(),r.stopPropagation();var p,f,h=null==(f=document.activeElement)?void 0:f.querySelector(s);h?i(h):i(p[0]);return}if(!u){r.preventDefault(),r.stopPropagation(),i(p[0]);return}var m=p.findIndex(function(e){return e===u});if(-1===m){r.preventDefault(),r.stopPropagation(),i(p[0]);return}var v=n({event:r,children:p,activeIndex:m,activeElement:u});!a&&(v<0||v>p.length-1)||(i(v<0?p[p.length-1]:v>p.length-1?p[0]:p[v]),r.stopPropagation(),r.preventDefault())}}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}},[l,t,n,i,u,s,a]),u}var ht=e.i(712516),hn=e.i(624253),hr=(0,eN.cssRecord)({queryPill:[eG.rcss.display.inline,eG.rcss.fontSize(D.tokens.fontSizeDefault)],popover:[{"& > .popover-control-container":eG.rcss.mr(0)}]});function hi(e){var t=e.text;return(0,x.jsx)(sN.Pill,{css:hr.queryPill,text:0===t.length?"âŽµ":t})}function ho(e){var t=e.query,n=e.replacement,r=e.numMatches,i=e.onCancel,o=e.onConfirm;return(0,x.jsxs)(F.View,{gap:8,p:12,children:[(0,x.jsxs)(F.View,{children:[(0,x.jsxs)(eA.Text,{children:["Replace ",(0,x.jsx)(hi,{text:t})," with"," ",(0,x.jsx)(hi,{text:n})," in"," ",(0,or.default)("match",r,!0),"?"]}),(0,x.jsx)(eA.Text,{children:"This operation cannot be undone!"})]}),(0,x.jsxs)(F.View,{row:!0,gap:12,justify:"end",children:[(0,x.jsx)(eE.Button,{onClick:function(){return i()},text:"Cancel"}),(0,x.jsx)(eE.Button,{colorway:"negative",onClick:function(){return o()},text:"Yes, replace ".concat((0,or.default)("match",r,!0)),iconLeft:(0,x.jsx)(hn.default,{})})]})]})}function ha(e){var t=e.disabled,n=e.loading,r=e.query,i=e.replacement,o=e.results,a=e.replace,s=e.onReplace,l=e.buttonProps,u=(0,z._)((0,W.useState)(!1),2),c=u[0],d=u[1],p=(0,W.useMemo)(function(){return o.reduce(function(e,t){return e+t.lines.reduce(function(e,t){return e+t.matches.length},0)},0)},[o]);return(0,x.jsx)(F.View,{css:hr.popover,children:(0,x.jsxs)(aL.PopoverTrigger,{onOpenChange:d,label:"Confirm replace all",isOpen:c,children:[(0,x.jsx)(eE.Button,(0,td._)((0,b._)({},l),{text:"Replace all",disabled:t||n,onClick:function(){d(function(e){return!e})}})),(0,x.jsx)(ho,{query:r,replacement:i,numMatches:p,onCancel:function(){return d(!1)},onConfirm:function(){return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return d(!1),(0,eu.track)(ec.events.SEARCH_PANE_USED,{action:"replace"}),[4,a()];case 1:return e.sent().success&&s(),[2]}})})()}})]})})}var hs=e.i(551959),hl=(0,eN.cssRecord)({self:[eG.rcss.position.relative,eG.rcss.flex.shrink(1),eG.rcss.width("100%")],iconWrapper:[eG.rcss.position.absolute,eG.rcss.top(0),eG.rcss.right(0),eG.rcss.height("100%"),eG.rcss.p(4)]}),hu=(0,W.forwardRef)(function(e,t){var n,r=e.onClear,i=(0,iz._)(e,["onClear"]);return(0,x.jsxs)(F.View,{css:hl.self,children:[(0,x.jsx)(hs.MultiLineInputWithHistory,(0,b._)({ref:t},i)),((null==(n=i.value)?void 0:n.length)||0)>0?(0,x.jsx)(F.View,{css:hl.iconWrapper,children:(0,x.jsx)(oM.IconButton,{alt:"Clear search query",tooltipBehavior:"hidden",onClick:r,css:{"&:hover":{backgroundColor:"".concat(D.tokens.backgroundHighest," !important")}},children:(0,x.jsx)(iW.default,{})})}):null]})});hu.displayName="SearchInput";var hc=e.i(294751),hd=e.i(163793),hp=e.i(790486),hf=e.i(927225),hh=(0,eN.cssRecord)({self:[eG.rcss.width("fit-content"),eG.rcss.display.inlineBlock,eG.rcss.color.accentNegativeDefault,eG.rcss.fontWeight.bold]});function hm(e){var t=e.content;return(0,x.jsx)(x.Fragment,{children:t.split("\n").reduce(function(e,t,n){return null===e?[t]:(0,en._)(e).concat([(0,x.jsx)(F.SpecializedView.span,{css:hh.self,children:"\\n"},"".concat(t,"-").concat(n)),t])},null)})}var hv=F.SpecializedView.span,hg="SearchMatch",hx=((u=hx||{}).HIGHLIGHT="highlight",u.REMOVE="remove",u.ADD="add",u.TEXT="text",u);function hy(e){return{outlineColor:e,outlineWidth:"1px",outlineStyle:"solid"}}var hb=(0,eN.cssRecord)((m={self:[eG.rcss.width("fit-content"),eG.rcss.display.inline,eG.rcss.cursor.pointer,{"&:focus-visible":[eG.rcss.focusRing]},eG.rcss.mx(1),eG.rcss.px(2),eG.rcss.borderRadius(4)]},(0,R._)(m,"highlight",[eG.rcss.backgroundColor.accentPrimaryDimmest,hy(D.tokens.accentPrimaryDimmer)]),(0,R._)(m,"remove",[eG.rcss.backgroundColor.accentNegativeDimmest,hy(D.tokens.accentNegativeDimmer),{textDecoration:"line-through"}]),(0,R._)(m,"add",[eG.rcss.backgroundColor.accentPositiveDimmest,hy(D.tokens.accentPositiveDimmer)]),(0,R._)(m,"hiddenTextWrapper",[eG.rcss.display.inlineBlock,eG.rcss.mx(2),{"& > div":[eG.rcss.display.inlineBlock],transform:"translateY(12.5%)"}]),(0,R._)(m,"firstHiddenTextWrapper",[eG.rcss.ml(0)]),(0,R._)(m,"lastHiddenTextWrapper",[eG.rcss.mr(0)]),m));function hw(e){var t=e.content,n=e.matches,r=e.dedentBy,i=e.replacement,o=e.isRegex,a=e.query,s=e.onOpenAtPosition;return(0,x.jsx)(x.Fragment,{children:(function(e){for(var t=e.content,n=e.matches,r=e.dedentBy,i=e.replacement,o=[],a=r,s=0;s<n.length;s++){var l=n[s],u=l.start+l.length;o.push({start:a,end:l.start,type:"text"});var c=t.substring(l.start,u);i.length>0&&i!==c?(o.push({start:l.start,end:u,type:"remove"}),o.push({start:-1,end:u,type:"add"})):o.push({start:l.start,end:u,type:"highlight",matchIndex:s}),a=u}return o.push({start:a,end:t.length,type:"text"}),o})({content:t,matches:n,dedentBy:r,replacement:i}).map(function(e,n,r){var l=e.start,u=e.end,c=e.type,d="".concat(l,"-").concat(u),p=u-l;if("text"===c){var f=r[n+1];if(0===n&&p>50)return(0,x.jsxs)(W.Fragment,{children:[(0,x.jsx)(hv,{css:[hb.hiddenTextWrapper,hb.firstHiddenTextWrapper],children:(0,x.jsx)(oM.IconButton,{size:18,alt:"Jump to hidden text",onClick:function(){s(u-50)},children:(0,x.jsx)(hf.default,{})})},d),(0,x.jsx)("span",{children:t.substring(u-50,u)})]},d);if(n===r.length-1&&p>50)return(0,x.jsxs)(W.Fragment,{children:[(0,x.jsx)("span",{children:t.substring(l,l+50)}),(0,x.jsx)(hv,{css:[hb.hiddenTextWrapper,hb.lastHiddenTextWrapper],children:(0,x.jsx)(oM.IconButton,{size:18,alt:"Jump to hidden text",onClick:function(){s(l+50)},children:(0,x.jsx)(hf.default,{})})},d)]},d);if(f&&p>100)return(0,x.jsxs)(W.Fragment,{children:[(0,x.jsx)("span",{children:t.substring(l,l+50)}),(0,x.jsx)(hv,{css:hb.hiddenTextWrapper,children:(0,x.jsx)(oM.IconButton,{size:18,alt:"Jump to hidden text",onClick:function(){s(l+50)},children:(0,x.jsx)(hf.default,{})})},d),(0,x.jsx)("span",{children:t.substring(u-50,u)})]},d)}var h=-1===l?i:t.substring(l,u);if("text"===c)return(0,x.jsx)(W.Fragment,{children:h},d);var m=null,v=r[n-1];return"add"===c&&(null==v?void 0:v.type)==="remove"&&(m=t.substring(v.start,v.end)),(0,x.jsx)(h_,{content:h,type:c,isRegex:o,query:a,replacement:i,removedText:m,onClick:function(e){e.stopPropagation(),s(u)}},d)})})}function h_(e){var t=e.content,n=e.type,r=e.isRegex,i=e.replacement,o=e.query,a=e.removedText,s=(0,iz._)(e,["content","type","isRegex","replacement","query","removedText"]),l=t,u=void 0;switch(n){case"highlight":u="Matched text ".concat(l);break;case"remove":u="Removed text ".concat(l);break;case"add":if(u="Added text ".concat(l),r&&null!==a)try{l=a.replace(new RegExp(o),i.replaceAll(/\$[&`']/g,"$$$&"))}catch(e){}}return(0,x.jsx)(F.SpecializedView.span,(0,td._)((0,b._)({css:[hb.self,hb[n]],tabIndex:0,"aria-label":u,role:"button","data-nav":hg},s),{children:"add"===n?(0,x.jsx)(hm,{content:l}):l}))}var hj=(0,eN.cssRecord)({self:[eG.rcss.width("100%"),eG.rcss.flex.wrap],text:[eG.rcss.display.block,eG.rcss.textAlign.center,{overflow:"visible",whiteSpace:"normal"}]});function hS(e){var t=e.error;return(0,x.jsxs)(F.View,{css:hj.self,pt:8,pb:8,row:!0,gap:4,align:"center",justify:"center",children:[(0,x.jsx)(sb.default,{}),(0,x.jsx)(eA.Text,{css:hj.text,multiline:!1,children:t})]})}var hk=e.i(8412),hC=e.i(717639),hT="SearchLine",hI="--search-line-number-width",hP=(0,eN.cssRecord)({self:[eG.rcss.overflow("hidden"),eG.rcss.cursor.pointer,eG.rcss.borderRadius(4),{"&:focus-visible":[eG.rcss.focusRing],"&:hover, &:focus-visible":[eG.rcss.backgroundColor.backgroundHighest]}],content:[eG.rcss.font.code,eG.rcss.maxWidth("100%"),eG.rcss.width("fit-content"),{whiteSpace:"pre-wrap",overflowWrap:"break-word"}],lineNumberWrapper:[eG.rcss.display.inlineBlock,eG.rcss.color.foregroundDimmest,eG.rcss.mr(8),eG.rcss.pl(8)],lineNumber:[eG.rcss.display.inlineBlock,eG.rcss.textAlign.right,{width:"var(".concat(hI,")")}]});function hE(e){var t=e.lineNumber,n=e.content,r=e.matches,i=e.path,o=e.dedentBy,a=e.onFileLineClicked,s=(0,iz._)(e,["lineNumber","content","matches","path","dedentBy","onFileLineClicked"]),l=(0,Q.default)(function(){return function(e){(0,eu.track)(ec.events.SEARCH_PANE_USED,(0,b._)({action:"result_clicked"},s)),a({path:i,lineNumber:t,columnNumber:e})}},[t,s,i,a]),u=(0,Q.default)(function(){return function(){var e=r.length>0?r[0]:null;l(e?e.start+e.length:0)}},[r,l]);return(0,x.jsxs)(F.View,{tabIndex:0,css:hP.self,row:!0,gap:8,align:"stretch","data-nav":hT,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),u())},onClick:u,children:[(0,x.jsx)(F.View,{css:hP.lineNumberWrapper,children:(0,x.jsx)(F.View,{tag:"span",css:hP.lineNumber,"aria-label":"Line ".concat(t),children:t})}),(0,x.jsx)("pre",{css:hP.content,children:(0,x.jsx)(hw,{isRegex:s.isRegex,content:n,matches:r,dedentBy:o,query:s.query,replacement:s.replacement,onOpenAtPosition:l})})]})}var hR=e.i(965153),hA="SearchFileNav",hD="SearchFileHeaderNav",hV="SearchQueryNav",hM="SearchQueryTogglesNav",hF=parseInt(D.values.space24,10)+10,hO=(0,eN.cssRecord)({header:[eG.rcss.rowWithGap(4),eG.rcss.align.center,eG.rcss.rowWithGap(6),eG.rcss.flex.growAndShrink(1),eG.rcss.overflow("hidden")],headerParentPathText:[eG.rcss.flex.shrink(1e7)],headerFileNameText:[eG.rcss.flex.shrink(1)],headerMatchesCountPill:[eG.rcss.height(20),eG.rcss.flex.shrink(0)],accordionWrapper:[eG.rcss.mx(4),eG.rcss.border({direction:"top",color:D.tokens.outlineDimmest})],accordionChildren:[eG.rcss.p(4)],linesWrapper:[eG.rcss.overflow("hidden"),eG.rcss.borderRadius(4),eG.rcss.font.code]});function hL(e){var t=e.path,n=e.lines,r=e.dedentBy,i=e.isFirst,o=e.expanded,a=e.onClick,s=e.scrollOffset,l=e.onFileLineClicked,u=e.searchResultBackgroundColor,c=(0,iz._)(e,["path","lines","dedentBy","isFirst","expanded","onClick","scrollOffset","onFileLineClicked","searchResultBackgroundColor"]),d=(0,rN.usePreferences)("fontSize").preferences.fontSize,p=(0,W.useRef)(null),f=(0,Q.default)(function(){return n.reduce(function(e,t){return e+t.matches.length},0)},[n]),h=(0,Q.default)(function(){var e=n[n.length-1];if(!e)return{};var t=(0,hC.getDigits)(e.lineNumber),r=(0,hk.lineHeightFromFontSize)(d);return(0,R._)({fontSize:d,lineHeight:r},hI,"".concat(t,"ch"))},[n,d]);return(0,x.jsx)(V.ShadesSurface,{css:hO.accordionWrapper,style:h,"data-nav":hA,innerRef:p,elevate:!1,children:(0,x.jsx)(hR.AccordionItem,{expanded:void 0===o||o,onClick:function(){a(p.current)},headerProps:{"data-nav":"".concat(hD," ").concat(hT," ").concat(i?"".concat(hV," ").concat(hM):""),style:{position:"sticky",zIndex:1,insetBlockStart:"-".concat(void 0===s?0:s,"px"),borderRadius:0,backgroundColor:u}},headerContent:(0,x.jsxs)(F.View,{css:hO.header,children:[(0,x.jsx)(i_.default,{path:t,size:16}),(0,x.jsx)(eA.Text,{css:hO.headerFileNameText,multiline:!1,children:(0,nk.getFileName)(t)}),(0,x.jsx)(eA.Text,{color:"dimmest",css:hO.headerParentPathText,multiline:!1,children:(0,nk.getParentPath)(t).replace(/^\.\//,"")}),(0,x.jsx)(sN.Pill,{variant:"muted",text:"".concat(f," ").concat((0,or.default)("match",f)),css:hO.headerMatchesCountPill})]}),children:(0,x.jsx)(F.View,{css:hO.accordionChildren,children:(0,x.jsx)(F.View,{css:hO.linesWrapper,children:n.map(function(e){return(0,x.jsx)(hE,(0,td._)((0,b._)({},e,c),{path:t,dedentBy:r,onFileLineClicked:l}),e.lineNumber)})})})})})}var hB=e.i(526017),hU=e.i(178496),hN=e.i(564604),hG=(0,eN.cssRecord)({container:[eG.rcss.border({direction:"bottom",color:D.tokens.outlineDimmest})],actions:[eG.rcss.display.flex,eG.rcss.rowWithGap(4)]});function hz(e){var t="collapse"===e.collapseExpandAllState;return(0,x.jsxs)(F.View,{css:hG.container,p:4,row:!0,align:"center",justify:"space-between",children:[(0,x.jsxs)(eA.Text,{color:"dimmer",children:[e.totalCount," results in ",(0,or.default)("file",e.fileCount,!0)]}),(0,x.jsxs)(F.View,{css:hG.actions,children:[(0,x.jsx)(oM.IconButton,{alt:"Open New Search",onClick:e.onStartNewSearch,children:(0,x.jsx)(hN.default,{})}),(0,x.jsx)(oM.IconButton,{alt:t?"Collapse All":"Expand All",onClick:e.onToggleCollapseExpandAll,children:t?(0,x.jsx)(hB.default,{}):(0,x.jsx)(hU.default,{})})]})]})}var hW=e.i(189920),hH=(0,iB.keyframes)({from:{opacity:0},to:{opacity:1}}),hq=(0,eN.cssRecord)({listWrapper:[eG.rcss.overflowY("auto"),eG.rcss.flex.grow(1),{contain:"strict"}],list:[eG.rcss.width("100%"),eG.rcss.position.relative],listItem:[eG.rcss.position.absolute,eG.rcss.top(0),eG.rcss.left(0),eG.rcss.width("100%")],resultRow:[{animation:"".concat(hH," 120ms linear forwards")}]});function hK(e){var t,n,r,i,o,a,s,l,u,c,d=e.results,p=e.error,f=e.paneRef,h=e.onFileLineClicked,m=e.onOpenSearchPane,v=e.searchResultBackgroundColor,g=(0,iz._)(e,["results","error","paneRef","onFileLineClicked","onOpenSearchPane","searchResultBackgroundColor"]),y=(0,Q.default)(function(){return d.filter(function(e){return e.lines.length>0})},[d]),w=(0,Q.default)(function(){return y.reduce(function(e,t){return e+t.lines.reduce(function(e,t){return e+t.matches.length},0)},0)},[y]),_=(0,z._)((0,W.useState)({}),2),j=_[0],S=_[1],k=(0,W.useRef)(null),C=(0,hp.useVirtualizer)({count:y.length,getScrollElement:function(){return k.current},estimateSize:function(e){var t;return function(e,t){var n=e.length;if(t)for(var r=t-24,i=0;i<e.length;i++){var o=e[i],a=9*(0,hC.getDigits)(i)+9*o.content.length+4*o.matches.length;a>r&&(n+=Math.floor(r/a)+1)}return hF+20+24.39*n+2*n}(y[e].lines,null==f||null==(t=f.current)?void 0:t.offsetWidth)},overscan:3}),T=C.getVirtualItems(),I=(0,W.useRef)(null),P=(0,W.useCallback)(function(e){var t=k.current;if(t&&I.current!==e){if(e.matches('[data-nav*="'.concat(hD,'"]')))return void e.focus();var n=e.closest('[data-nav="'.concat(hA,'"]')),r=null==n?void 0:n.querySelector('[data-nav*="'.concat(hD,'"]'));if(!r)return void e.focus();var i=r.getBoundingClientRect();if(r.offsetTop+i.height>e.offsetTop){var o=e.offsetTop-i.height;I.current=e;var a=function(){t.scrollTop===o&&(t.removeEventListener("scroll",a),I.current===e&&(e.focus(),I.current=null))};t.addEventListener("scroll",a),t.scrollTo({top:o})}else e.focus()}},[]),E=(t={selector:'[data-nav*="'.concat(hD,'"]'),boundary:'[data-nav*="'.concat(hA,'"]')},n=(0,W.useCallback)(function(e){return"Tab"===e.key},[]),r=(0,W.useCallback)(function(e){var t=e.event,n=e.activeIndex;return t.shiftKey?n-1:n+1},[]),he((0,td._)((0,b._)({},t),{isValid:n,move:r}))),A=(i={selector:'[data-nav*="'.concat(hT,'"]'),focus:P},o=(0,W.useCallback)(function(e){return"ArrowUp"===e.key||"ArrowDown"===e.key},[]),a=(0,W.useCallback)(function(e){var t=e.event,n=e.activeIndex;return"ArrowUp"===t.key?n-1:n+1},[]),he((0,td._)((0,b._)({},i),{isValid:o,move:a}))),D=(s={selector:'[data-nav*="'.concat(hg,'"]'),focus:P},l=(0,W.useCallback)(function(e){return"ArrowLeft"===e.key||"ArrowRight"===e.key},[]),u=(0,W.useCallback)(function(e){var t=e.event,n=e.activeIndex;return"ArrowLeft"===t.key?n-1:n+1},[]),he((0,td._)((0,b._)({},s),{isValid:l,move:u}))),V=(0,hd.mergeRefs)(E,A,D),M=(0,Q.default)(function(){return y.length===Object.keys(j).length&&Object.values(j).every(Boolean)},[j,y.length]),O=null;return y.length>0?O=(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(hz,{fileCount:y.length,totalCount:w,collapseExpandAllState:M?"expand":"collapse",onToggleCollapseExpandAll:function(){M?S({}):S(y.reduce(function(e,t){return(0,td._)((0,b._)({},e),(0,R._)({},t.path,!0))},{}))},onStartNewSearch:m}),(0,x.jsx)(F.SpecializedView.div,{ref:k,css:hq.listWrapper,children:(0,x.jsx)(F.View,{css:hq.list,style:{height:C.getTotalSize()},children:(0,x.jsx)(F.View,{css:hq.listItem,style:{transform:"translateY(".concat(null==(c=T[0])?void 0:c.start,"px)")},innerRef:V,children:T.map(function(e){var t,n=y[e.index],r=n.path;return(0,x.jsx)(F.SpecializedView.div,{"data-index":e.index,ref:C.measureElement,css:hq.resultRow,children:(0,x.jsx)(hL,(0,td._)((0,b._)({},n,g),{scrollOffset:null==(t=T[0])?void 0:t.start,onFileLineClicked:h,isFirst:0===e.index,expanded:!0!==j[r],searchResultBackgroundColor:v,onClick:function(e){if(S(function(e){return(0,td._)((0,b._)({},e),(0,R._)({},r,!(r in e)||!e[r]))}),k.current&&e){var t,n,i=Math.floor(null!=(n=null==(t=T[0])?void 0:t.start)?n:0),o=Math.floor(k.current.scrollTop),a=e.offsetTop+i;a>o||k.current.scrollTo({top:a-1})}}}))},e.key.toString())})})})})]}):p===hW.SearchError.EMPTY_RESULTS&&(O=(0,x.jsx)(ht.default,{pane:{type:"searchReplace"},headerText:p})),(0,x.jsxs)(x.Fragment,{children:[p&&p!==hW.SearchError.EMPTY_RESULTS?(0,x.jsx)(hS,{error:p}):null,O]})}var h$=e.i(316346);function hY(e){return(0,W.useMemo)(function(){return(0,en._)((0,h$.splitGlobAware)(e,",")).map(function(e){return e.trim()}).filter(function(e){return e.length>0})},[e])}var hQ=((c={}).QUERY_EMPTY="The query is empty",c.QUERY_SAME="The query is the same as replacement",c.NO_MATCHES="No matches were found to replace",c.RG_EMPTY="Ripgrep didn't return a response",c.NOT_MOUNTED="Component wasn't mounted",c),hX=e.i(431544);e.i(694906);var hZ=e.i(55449),hJ=e.i(406393),h0=e.i(606296),h1="SearchQueryControlsNav",h2="SearchQueryExcludeNav",h4="SearchQueryControlsColumnNav",h3=(0,iB.keyframes)({from:{transform:"scaleX(0)"},to:{transform:"scaleX(0.9)"}}),h5=eG.container.min(360),h8=(0,eN.cssRecord)({self:[eG.rcss.height("100%"),eG.rcss.width("100%"),eG.rcss.overflow("hidden"),eG.rcss.px(4),eG.rcss.container()],filesIncludeExcludeWrapper:[eG.rcss.mt(6),eG.rcss.border({direction:"top",color:D.tokens.outlineDimmest}),(0,R._)({},h5,[eG.rcss.rowWithGap(6),eG.rcss.align.start,eG.rcss.mt(0),{border:"none"}])],inputWithLabel:[eG.rcss.flex.growAndShrink(1),eG.rcss.colWithGap(1)],inputLabelText:[{userSelect:"none"},eG.rcss.color.foregroundDimmest,eG.rcss.truncate,{fontSize:D.tokens.fontSizeSmall}],inputLabel:[eG.rcss.flex.shrink(1),eG.rcss.m(0),{lineHeight:1}],input:[eG.rcss.viewStyle,eG.rcss.border(),{blockSize:D.tokens.space32,"::placeholder":{color:D.tokens.foregroundDimmest},"&:hover::placeholder":{color:D.tokens.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:D.tokens.foregroundDimmest},":not([disabled])":{cursor:"text",":focus":{boxShadow:"none"}}}],optionsWrapper:[eG.rcss.rowWithGap(2),eG.rcss.align.center,(0,R._)({order:2},h5,[{order:1," > *":eG.rcss.height("100%")}])],closeWrapper:[(0,R._)({order:1},h5,{order:2," > *":eG.rcss.height("100%")})],results:[eG.rcss.position.relative,{flex:"1 1 auto"}],searchWrapper:[{flex:"0 1 auto"}],expandCollapseButton:[eG.rcss.height(32)],searchInputAndOptionsWrapper:(0,R._)({flex:1,display:"grid",gap:4,gridTemplateColumns:"1fr max-content"},h5,{gridTemplateColumns:"1fr max-content max-content"}),replacementWrapper:[eG.rcss.ml(24),eG.rcss.pl(4),eG.rcss.pb(6)],replaceInputWrapper:[eG.rcss.border({direction:"top",color:D.tokens.outlineDimmest}),(0,R._)({},h5,[eG.rcss.rowWithGap(4),eG.rcss.pt(0),eG.rcss.align.center,{border:"none"}])],loadingBar:[eG.rcss.position.absolute,eG.rcss.mt(2),eG.rcss.height(1),eG.rcss.borderRadius(2),eG.rcss.width("100%"),eG.rcss.backgroundColor.accentPrimaryDimmer,{animation:"".concat(h3," 20s 1s ease forwards"),transformOrigin:"center left",transform:"scaleX(0)"}]});function h6(e){var t=e.updateData,n=e.query,r=e.setQuery,i=e.isRegex,o=e.setIsRegex,a=e.isCaseSensitive,s=e.setIsCaseSensitive,l=e.isMatchingWholeWords,u=e.setIsMatchingWholeWords,c=e.isCollapsed,d=e.setIsCollapsed,p=e.executeSearch,f=e.searchInputRef,h=e.onCloseRequested;return(0,x.jsxs)(F.View,{css:h8.searchWrapper,pb:4,row:!0,gap:4,children:[(0,x.jsx)(oM.IconButton,{onClick:function(){return d(function(e){return!e})},alt:c?"Show replacement options":"Hide replacement options",css:h8.expandCollapseButton,children:c?(0,x.jsx)(lL.default,{}):(0,x.jsx)(uz.default,{})}),(0,x.jsxs)(F.View,{css:h8.searchInputAndOptionsWrapper,children:[(0,x.jsx)(hu,{"data-nav":"".concat(hV," ").concat(h1),ref:f,autoSize:!0,placeholder:"Search",value:n,css:h8.input,onChange:function(e){r(e),t({initialQuery:e})},onClear:function(){r(""),t({initialQuery:""})},onKeyDown:function(e){"Enter"!==e.key||(0,iD.getCmdOrCtrl)(e)||e.shiftKey||(e.preventDefault(),e.stopPropagation(),p())}}),(0,x.jsxs)(F.View,{css:h8.optionsWrapper,children:[(0,x.jsx)(hc.default,{alt:"case sensitive","data-nav":"".concat(h1," ").concat(h4),icon:(0,x.jsx)(f8.default,{}),checked:a,onClick:function(){return s(function(e){return!e})}}),(0,x.jsx)(hc.default,{alt:"regular expressions","data-nav":"".concat(h1," ").concat(h4),icon:(0,x.jsx)(f6.default,{}),checked:i,onClick:function(){return o(function(e){return!e})}}),(0,x.jsx)(hc.default,{alt:"whole words","data-nav":"".concat(h1," ").concat(h4),icon:(0,x.jsx)(f9.default,{}),checked:l,onClick:function(){return u(function(e){return!e})}})]}),(0,x.jsx)(F.View,{css:h8.closeWrapper,row:!0,gap:2,align:"center",children:h?(0,x.jsx)(oM.IconButton,{onClick:h,alt:"Close",children:(0,x.jsx)(iW.default,{})}):null})]})]})}function h9(e){var t=e.updateData,n=e.replacement,r=e.setReplacement,i=e.query,o=e.replaceLoading,a=e.search,s=e.includeGlob,l=e.setIncludeGlob,u=e.excludeGlob,c=e.setExcludeGlob,d=e.replace,p=e.results;return(0,x.jsxs)(F.View,{css:h8.replacementWrapper,children:[(0,x.jsxs)(F.View,{css:h8.replaceInputWrapper,pt:8,gap:6,children:[(0,x.jsx)(hu,{"data-nav":"".concat(hV," ").concat(h1," ").concat(h2),autoSize:!0,placeholder:"Replacement",value:n,css:h8.input,onChange:function(e){r(e),t({initialReplacement:e})},onClear:function(){r(""),t({initialReplacement:""})}}),(0,x.jsx)(F.View,{css:h8.optionsWrapper,children:(0,x.jsx)(ha,{query:i,replacement:n,results:p,disabled:0===i.length,loading:o,replace:d,onReplace:a,buttonProps:{"data-nav":"".concat(h1," ").concat(hM," ").concat(h4)}})})]}),(0,x.jsxs)(F.View,{css:h8.filesIncludeExcludeWrapper,pt:8,gap:8,children:[(0,x.jsxs)(F.View,{css:h8.inputWithLabel,id:"filesToInclude",children:[(0,x.jsx)("label",{htmlFor:"filesToIncludeInput",css:h8.inputLabel,children:(0,x.jsx)(eA.Text,{css:h8.inputLabelText,color:"dimmer",multiline:!1,children:"Files to include"})}),(0,x.jsx)(hu,{id:"filesToIncludeInput","data-nav":"".concat(hV," ").concat(h1),autoSize:!0,value:s,css:h8.input,placeholder:"e.g. **.js, src/**, app/",onChange:function(e){l(e),t({initialIncludeGlob:e})},onClear:function(){l(""),t({initialIncludeGlob:""})}})]}),(0,x.jsxs)(F.View,{css:h8.inputWithLabel,id:"filesToExclude",children:[(0,x.jsx)("label",{htmlFor:"filesToExcludeInput",css:h8.inputLabel,children:(0,x.jsx)(eA.Text,{css:h8.inputLabelText,color:"dimmer",multiline:!1,children:"Files to exclude"})}),(0,x.jsx)(hu,{id:"filesToExcludeInput","data-nav":"".concat(h1," ").concat(h2),autoSize:!0,value:u,css:h8.input,onChange:function(e){c(e),t({initialExcludeGlob:e})},onClear:function(){c(""),t({initialExcludeGlob:""})}})]})]})]})}function h7(e){var t,n,r,i,o,a,s,l,u,c,d,p,f,h,m,v,g,y,w,_,j,S,k,C,T,I,P,E,R,A,D,V,M,O,L,B,U,N,G,H,q,K=e.isActive,$=e.initialQuery,X=void 0===$?"":$,Z=e.initialReplacement,J=void 0===Z?"":Z,ee=e.initialIncludeGlob,et=void 0===ee?"":ee,eo=e.initialExcludeGlob,ea=void 0===eo?"":eo,es=e.searchInputRef,el=e.onDataChanged,ed=e.onFileLineClicked,ep=e.onOpenSearchPane,ef=e.onCloseRequested,eh=e.searchResultBackgroundColor,em=(0,z._)((0,W.useState)(X),2),ev=em[0],eg=em[1],ex=(0,z._)((0,W.useState)(J),2),ey=ex[0],eb=ex[1],ew=(0,z._)((0,W.useState)(!1),2),e_=ew[0],ej=ew[1],eS=(0,z._)((0,W.useState)(!1),2),ek=eS[0],eC=eS[1],eT=(0,z._)((0,W.useState)(!1),2),eI=eT[0],eP=eT[1],eE=(0,z._)((0,W.useState)(!0),2),eR=eE[0],eA=eE[1],eD=(0,z._)((0,W.useState)(ea),2),eV=eD[0],eM=eD[1],eF=(0,z._)((0,W.useState)(et),2),eO=eF[0],eL=eF[1],eB=hY(eV),eU=hY(eO),eN=(0,W.useRef)(null),eG=(n=(t={query:ev,isRegex:e_,isCaseSensitive:ek,isMatchingWholeWords:eI,excludeGlobs:eB,includeGlobs:eU}).query,r=t.isRegex,i=t.isCaseSensitive,o=t.isMatchingWholeWords,s=void 0===(a=t.includeGlobs)?[]:a,u=void 0===(l=t.excludeGlobs)?[]:l,d=(c=(0,tv.default)()).container,p=c.dotReplit,f=(0,hJ.useHiddenFilesGlobPatterns)(p),h=(0,Y.useFlag)({controlName:"flag-code-search-latency-metrics",logFlagToAnalytics:!1}),v=(m=(0,z._)((0,W.useState)([]),2))[0],g=m[1],w=(y=(0,z._)((0,W.useState)(null),2))[0],_=y[1],S=(j=(0,z._)((0,W.useState)(n.length>0),2))[0],k=j[1],C=(0,Q.default)(function(){return(0,en._)(u).concat((0,en._)(f||[]),(0,en._)(hZ.ignoredDirs))},[u,f]),T=d.getConnectionState(),I=(0,W.useMemo)(function(){return(0,h0.default)({container:d,onError:function(e){return _(e)},onUpdate:function(e){return g(e)},onLoadingStateChange:function(e){return k(e)},isStreaming:!0,trackLatency:h})},[]),(0,W.useEffect)(function(){T===tp.ConnectionState.CONNECTED&&I({query:n,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:s,excludeGlobs:C})},[T,I,n,r,i,o,s,C,f]),{loading:S,error:w,data:v,search:function(){return I({query:n,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:s,excludeGlobs:C})}}),ez=eG.loading,eW=eG.error,eH=eG.data,eq=eG.search;(0,lW.default)(function(){""!==ev&&(0,eu.track)(ec.events.SEARCH_PANE_USED,{action:"search",isRegex:e_,isCaseSensitive:ek,hasIncludes:eU.length>0,hasExcludes:eB.length>0})},[ev,eU,eB,e_,ek],1e3);var eK=(E=(P={replacement:ey,query:ev,isRegex:e_,isCaseSensitive:ek,isMatchingWholeWords:eI,excludeGlobs:eB,includeGlobs:eU,fileList:eW?void 0:eH}).query,R=P.replacement,A=P.fileList,D=(0,iz._)(P,["query","replacement","fileList"]),V=(0,tv.default)().container,O=(M=(0,z._)((0,W.useState)(!1),2))[0],L=M[1],U=(B=(0,z._)((0,W.useState)(null),2))[0],N=B[1],H=(G=(0,z._)((0,W.useState)(!1),2))[0],q=G[1],{replace:(0,W.useCallback)(function(){return(0,er._)(function(){var e;return(0,ei._)(this,function(t){switch(t.label){case 0:var n;return q(!0),N(null),[4,(n=(0,b._)({container:V,query:E,replacement:R,fileList:null==A?void 0:A.map(function(e){return e.path})},D),(0,er._)(function(){var e,t,r,i,o,a,s,l,u;return(0,ei._)(this,function(c){switch(c.label){case 0:if(t=n.container,r=n.fileList,0===(i=(0,iz._)(n,["container","fileList"])).query.length)return[2,{success:!1,errorOn:"exit",errorMessage:hQ.QUERY_EMPTY}];if(i.query===i.replacement)return[2,{success:!1,errorOn:"exit",errorMessage:hQ.QUERY_SAME}];if(!(r&&r.length>0))return[3,1];return o=r,[3,3];case 1:return[4,(a=t).exec.apply(a,(0,en._)((0,hX.createSearchCommand)((0,td._)((0,b._)({},i),{context:1,mode:"files"}))))];case 2:if((l=c.sent()).error)return[2,{success:!1,errorOn:"rg",errorMessage:"exit status 1"===l.error?hQ.NO_MATCHES:l.error}];o=(null==(s=l.output)?void 0:s.split("\n").filter(function(e){return e.trim().length>0}))||[],c.label=3;case 3:var d,p,f,h,m,v,g,x;if(0===o.length)return[2,{success:!1,errorOn:"rg",errorMessage:hQ.NO_MATCHES}];return[4,(e=t).exec.apply(e,(0,en._)((p=(d=i).replacement,f=d.query,h=d.isRegex,m=d.isCaseSensitive,v=d.isMatchingWholeWords,g=["sd"],x=[f.indexOf("\n")>=0?"m":"e",m?"c":"i"],v&&x.push("w"),g.push("--flags",x.join("")),!h&&g.push("--string-mode"),f.startsWith("-")&&(f="\\"+f),g.push(f,p),g)).concat((0,en._)(o)))];case 4:if((u=c.sent()).error)return[2,{success:!1,errorOn:"sd",errorMessage:u.error}];return[2,{success:!0}]}})})())];case 1:return(e=t.sent()).success||N(e.errorMessage),q(!1),L(e.success),[2,e]}})})()},[V,E,R,A,D]),loading:H,error:U,data:O}),e$=eK.loading,eY=eK.replace,eQ=(0,W.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null==el||el({initialQuery:ev,initialReplacement:ey,initialIncludeGlob:eO,initialExcludeGlob:eV},e)},[el,ev,ey,eV,eO]);(0,W.useLayoutEffect)(function(){eg(X),eb(J),eL(et),eM(ea)},[X,J,et,ea]);var eX=he({selector:'[data-nav*="'.concat(hV,'"]'),isValid:function(e){var t="ArrowUp"===e.key||"ArrowDown"===e.key,n=e.target.matches('[data-nav*="'.concat(hV,'"]')),r=e.target.matches("[data-nav*=".concat(hD,"]"));return t&&n&&(e.altKey||r)},move:function(e){var t=e.event,n=e.activeIndex;return t.preventDefault(),t.stopPropagation(),"ArrowUp"===t.key?n-1:n+1}}),eZ=he({selector:'[data-nav*="'.concat(hM,'"]'),isValid:function(e){var t="ArrowUp"===e.key||"ArrowDown"===e.key,n=e.target.matches('[data-nav*="'.concat(hM,'"]')),r=e.target.matches("[data-nav*=".concat(hD,"]"));return t&&n&&!r},move:function(e){var t=e.event,n=e.activeIndex;return t.preventDefault(),t.stopPropagation(),"ArrowUp"===t.key?n-1:n+1}}),eJ=he({selector:'[data-nav*="'.concat(h4,'"]'),isValid:function(e){var t="ArrowUp"===e.key||"ArrowDown"===e.key;if(e.target.matches('[data-nav*="'.concat(hM,'"]'))&&"ArrowDown"===e.key)return!1;var n=e.target.matches('[data-nav*="'.concat(h4,'"]'));return t&&n},move:function(e){var t=e.event,n=e.activeIndex,r=e.children,i=t.target.matches('[data-nav*="'.concat(hM,'"]'));return(t.preventDefault(),t.stopPropagation(),i)?0:0===n&&"ArrowUp"===t.key?-1:r.length-1}}),e0=he({selector:'[data-nav*="'.concat(h2,'"]'),isValid:function(e){var t="ArrowUp"===e.key||"ArrowDown"===e.key,n=e.target.matches('[data-nav*="'.concat(h2,'"]')),r=e.target.matches("[data-nav*=".concat(hV,"]"));return t&&e.altKey&&n&&!r},move:function(e){var t=e.event,n=e.activeIndex;return t.preventDefault(),t.stopPropagation(),"ArrowUp"===t.key?n-1:n+1}}),e1=he({selector:'[data-nav*="'.concat(h1,'"]'),isValid:function(e){var t="ArrowLeft"===e.key||"ArrowRight"===e.key,n=e.target.matches('[data-nav*="'.concat(h4,'"]'));return t&&(e.altKey||n)},move:function(e){var t=e.event,n=e.activeIndex;return t.preventDefault(),t.stopPropagation(),"ArrowLeft"===t.key?n-1:n+1}}),e2=(0,th.useMergeRefs)([eX,eZ,eJ,e0,e1],{breadcrumb:"client/workspace/components/SearchReplace/index.tsx:661"}),e4=(0,W.useCallback)(function(e){"Escape"===e.key&&(null==ef||ef())},[ef]);return(0,x.jsxs)(F.View,{css:h8.self,innerRef:e2,onKeyDown:e4,children:[(0,x.jsx)(h6,{isActive:K,query:ev,setQuery:eg,updateData:eQ,isRegex:e_,isCaseSensitive:ek,isMatchingWholeWords:eI,setIsRegex:ej,setIsCaseSensitive:eC,setIsMatchingWholeWords:eP,isCollapsed:eR,setIsCollapsed:eA,executeSearch:eq,searchInputRef:es,onCloseRequested:ef}),eR?null:(0,x.jsx)(h9,{replacement:ey,setReplacement:eb,updateData:eQ,query:ev,replaceLoading:e$,search:eq,includeGlob:eO,setIncludeGlob:eL,excludeGlob:eV,setExcludeGlob:eM,replace:eY,results:eH}),(0,x.jsxs)(F.View,{css:h8.results,children:[ez?(0,x.jsx)(F.View,{css:h8.loadingBar},ev):null,0===ev.length&&0===eH.length?(0,x.jsx)(ht.default,{pane:{type:"searchReplace"},bodyText:"Enter a search query above to see results."}):(0,x.jsx)(hK,{isRegex:e_,query:ev,replacement:ey,include:eO,exclude:eV,results:eH,error:eW,paneRef:eN,onOpenSearchPane:ep,onFileLineClicked:ed,searchResultBackgroundColor:eh})]})]})}var me=nf.Type.Object({type:nf.Type.Literal("searchReplace"),data:nf.Type.Optional(nf.Type.Object({initialQuery:nf.Type.Optional(nf.Type.String()),initialReplacement:nf.Type.Optional(nf.Type.String()),initialIncludeGlob:nf.Type.Optional(nf.Type.String()),initialExcludeGlob:nf.Type.Optional(nf.Type.String())}))}),mt={Content:function(e){var t=e.pane,n=e.options;return(0,x.jsx)(mr,{paneData:(null==t?void 0:t.data)||{},isActive:n.isActive,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.size;return(0,x.jsx)(rc.default,{size:t})},getTitle:function(e){var t,n=null==e||null==(t=e.data)?void 0:t.initialQuery;return n&&n.length>0?"Code Search: ".concat(n):"Code Search"},description:"Search through the text contents of your App",category:d8.PaneCategory.WorkspaceFeatures,decode:function(e){return nh.Value.Decode(me,e)}},mn=(0,eN.cssRecord)({wrapper:[eG.rcss.height("100%"),eG.rcss.width("100%")]});function mr(e){var t=e.paneData,n=e.isActive,r=e.performPaneOperation,i=(0,W.useRef)(null),o=(0,W.useCallback)(function(){var e,t;null==(e=i.current)||e.select(),null==(t=i.current)||t.focus()},[]);(0,eg.useSetPaneBindings)(function(){return{type:"searchReplace",focusSearchInput:o}},[o]),(0,eg.useSetFocusTarget)(function(){return{focus:o}},[o]);var a=(0,W.useCallback)(function(e){r({operation:"open",pane:{type:"codeEditor",data:{path:e.path,line:e.lineNumber,col:e.columnNumber}},secondary:!0})},[r]),s=(0,W.useCallback)(function(){r({operation:"commit"}),r({operation:"open",pane:{type:"searchReplace"}})},[r]),l=(0,W.useCallback)(function(e,t){r({operation:"replace",pane:{type:"searchReplace",data:(0,b._)({},e,t)}})},[r]);return(0,x.jsx)(F.View,{css:mn.wrapper,pt:6,children:(0,x.jsx)(h7,(0,td._)((0,b._)({},t),{isActive:n,searchInputRef:i,onFileLineClicked:a,onOpenSearchPane:s,onDataChanged:l,searchResultBackgroundColor:D.tokens.backgroundDefault}))})}var mi=e.i(446692),mo=e.i(180703),ma=e.i(917375),ms=e.i(411928),ml=e.i(952685),mu=e.i(49416),mc=e.i(91442),md=(0,en._)(["workspace-guided-tour-data-app","workspace-guided-tour-portfolio-website"]).concat(["100-days-of-python","100-days-of-python-promo","add-guest-new-user","agent-banner","agent-disclaimer","ai-image-generation-banner","apps-announcement","appsOnboardingForkRepl","appsOnboardingRunRepl","appsOnboardingSelectRepl","april_2019_hiring","archive-cta","assignment_markdown","boosts-modal","bounties-home-module","bounties-services-tab","changelog-banner","classroom-repl-talk-ask-on-error","cleanup-popover-dismissed","codemirror-explorers-banner","create-model-solution","credit-packs-banner","credit-packs-promo-dec-2025","createWebsite","curriculum-launch-modal","custom-themes-banner","custom-domain-purchase-announcement","cycles-release","cycles-survey","dashboard_new_folder","dashboard_search","dashboard_templates","debugger_start","dec172020maintenance","deployment-analytics-dot","deployments-banner","deployments-mobile-download","deployments-synced-secrets","desktop-app-banner","desktop-app-nav-menu","devtools-intro","discount_hacker_18","discount_holiday_19","discount_newyear_19","downtime-073118","draw-new-user-cta","edfest-announcement","enveditorintro","expo-qr-preview-pane","expo-go-mobile-preview-nudge","file_tree","flexible-spend-announcement","follow-cursor-avatar-click","ghostwriter-banner","ghostwriter-chat-banner","ghostwriter-repl-resources-cta","ghostwriter-trial-repl-resources-cta","ghostwriter-trial-3-day-left-modal","ghostwriter-trial-banner","ghostwriter-trial-expired-modal","ghostwriter-post-purchase-tour","ghostwriter-existing-user-chat-beta-tour","grid_click","hacker_upgrade","hacker-gift","header-layout-tooltip","home","home-feed","home-onboarding-checklist","home-onboarding-checklist-apps","home-onboarding-checklist-learn","home-onboarding-checklist-repl","home-page-modules-tooltip","home-page-demo-repl-tour-suggestion","hosting_url","introduceYourself","js-4-day-challenge-day-1","js-4-day-challenge-day-2","js-4-day-challenge-day-3","js-4-day-challenge-day-4","js-4-day-challenge-day-end","july_2019_music_jam","july18_irl","landing","languagesInterestedIn","launch-modal","learn-onboarding","legacy-cycles-grant-notice","make_website","march_2019_game_jam","migrate-to-deployments-banner","migrated_unnamed_repls","mobile-app-banner","mobile-app-banner-web-update","mobile-announcement","mobile-new-workspace-banner","mobile-survey-banner-11042021","move_unnamed_repls","repricing-announcement","multiplayer","multiplayer_invite","multiplayer_welcome","new_in_repls","new_share","nft-world-2022","onboarding_connection_toast","onboarding_run","onboarding-simplify-experiment","onboarding-upsell-seen","packager-shell-hint","packman","prettier-formatter","product_hunt","profile-refresh-beta","profile2","projects-overview-cta","projects-overview-tests-disclaimer","publish-guidelines","repl_stars","repl-con-2022","repl-talk-update-2021","repl-talk-update-2022","replit-teams-onboarding-tour","resources-upgrade-modal","revisions_history","run_on_replit","saw_unnamed_folders","search","self-grouping-projects-cta","series-b-announcement","share_classroom","share_repl_to_talk","show_packager_about_tooltip","show_packager_import_tooltip","show_test_update_tooltip","stack-create-cta","stack-migration-cta","summer_hacker","summer-2021-pd-survey","teams_pro_module","teams-grading-survey","teams-pro-2022","template-jam-announcement","threads-2-announcement","upgrade_module","usage-migration-reserved-vms","usage-migration-power-ups-free-user","usage-migration-power-ups-core-user","workspace-always-on-user-reserved-deployments-announcement","workspace-assistant-auto-apply-changes","workspace-assistant-auto-restart-repl","workspace-assistant-intro-video","workspace-deployments-webview-banner","workspace-desktop-tour","workspace-desktop-tour19","workspace-experience-task-completion-survey-06022022","workspace-experience-task-completion-survey-nudge-06022022","workspace-guided-tour-data-app","workspace-guided-tour-portfolio-website","workspace-history-announcement","workspace-ssh-connect-to-vscode-config-tour","workspace-tools-databases-postgres-tour","workspace-repo-projects-tour","youtube-in-the-ws","themes-announcement","extensions-onboarding-checklist","extensions-onboarding-checklist-create","extensions-onboarding-checklist-concepts","extensions-onboarding-checklist-api","extensions-onboarding-checklist-publish","extensions-store-info","external-claim-privacy-warning","gcp-docs-landing-screen","trending-home-module","following-home-module","storage-announcement","pro-onboarding-tour","pro-trial-expired","pro-trial-hcaptcha-fail","pro-trial-enrollment","ai-code-completion","replit-ai-chat-onbording-10-2023","workspace-desktop-new-user-tour","workspace-desktop-tour-2024","workspace-desktop-tour-2025","workspace-bonsai-tour-2025","workspace-desktop-sidebar-tour","replit-core-banner","hosting-deployments-announcement-7-2023","teams-for-education-deprecation-12-2023","teams-for-education-verification-prompt","usage-based-billing-announcement-1-2024","port-nudges","mobileApp-themes-announcement","mobileApp-server-change-CTA","mobileApp-purchase-subscription-announcement","mobileApp-onboarding-education-announcement","mobileApp-teams-coming-soon-announcement","incident-20240219-action-required-banner","incident-20250711-refund-banner","scheduled-deployments-banner","quick-start-guides","teams-projects-onboarding-card","onboarding-purchase-seen","replit-teams-banner","integrations-toast","starter-changes-announcement-aug-2024","private-deployments-banner","editors-have-secret-access-warning","workspace-right-sidebar-cta","assistant-now-defaulting-to-claude-3-5","org-roles-and-permissions-info-banner","onboarding-seen","teams-sponsorships-onboarding-card","agent-billing-notification-usage-page","agent-billing-notification-creation-entrypoint","agent-billing-creation-disclaimer","agent-billing-workspace-disclaimer","agent-billing-threshold-reached-warning","agent-billing-workspace-flex-credits-almost-reached","agent-billing-announcement","agent-billing-announcement-banner","drizzle-studio-announcement","freemium-agent-access-announcement","referral-program-banner","referral-pending-banner","post-verification-educational-upsell","invoice-threshold-change-announcement","agent-v2-welcome-modal","agent-v2-homepage-modal","agent-mobile-notification-nudge","visual-editor-callout","deterministic-edits-callout","image-gen-awareness-callout","bonsai-ws-agent-onboarding","queue-drawer-callout","viewer-seats-announcement","apps-private-by-default-announcement","agent-billing-v2-announcement","agent-billing-v2-home-banner","agent-chat-mode-intro-callout","effort-based-pricing-announcement","dynamic-intelligence-modal","expert-mode-acknowledged","agent-3-announcement-banner","workspace-deployment-pane-production-database-banner","workspace-database-pane-toggle-tour","max-autonomy-warning-acknowledged","design-mode-announcement-banner","free-fast-mode-announcement-banner","connectors-announcement-banner","agent-quick-edit-chat-footer-banner","agent-quick-edit-settings-banner","agent-chat-upsell-with-free-quick-edits-option","promo-high-power-model-announcement-tour","fast-promo-ended-tour","agent-high-power-model-toggle-info","agent-home-chat-mode-tour","agent-starter-fast-mode-enabled-banner","expo-launch-jan-2026-announcement-banner","inbox-onboarding-tour","publish-feedback-tour"]),mp=function(e,t){var n,r=JSON.parse(nZ.default.get("".concat(e,"-tutorialChallenge-").concat(t),"string")||"{}");if("string"==typeof r.tourName&&"string"==typeof r.url&&(n=r.tourName,md.includes(n)))return r},mf=function(e){var t=e.challenge,n=md.find(function(e){return e.toString()===t.tourName})||"js-4-day-challenge-day-1",r=(0,l8.useDismissibleElement)(n),i=r.isDone,o=r.isLoading,a=r.setAsDone,s=(0,y.useRouter)();return o?null:(0,x.jsx)(eE.Button,{colorway:i?"primary":"positive",onClick:function(){a(),(0,eu.track)(ec.events.TUTORIAL_DONE_BUTTON_COMPLETED),s.push("/~")},disabled:i,iconLeft:(0,x.jsx)(lS.default,{}),size:"big",text:i?"Challenge completed!":"Complete Challenge"})},mh=((d=mh||{}).Ready="READY",d.Loading="LOADING",d.Error="ERROR",d),mm=function(e){var t=e.progress;return(0,x.jsx)(aV.Tooltip,{tooltip:"Progress: ".concat(Math.round(100*t*10)/10,"%"),children:(0,x.jsx)(F.View,{css:[eG.rcss.width("100%"),eG.rcss.height(4),eG.rcss.backgroundColor.backgroundHigher],children:(0,x.jsx)(F.View,{css:[eG.rcss.width("".concat(100*t,"%")),eG.rcss.height("100%"),eG.rcss.backgroundColor.purpleDefault]})})})},mv=nf.Type.Object({type:nf.Type.Literal("tutorial")}),mg={Content:function(){var e,t=(0,tv.default)().fs,n=(0,ep.useShowTutorialVideo)(),r=(0,lp.useSetTourStepTarget)(ma.newUserTour.id,ma.TourStepIds.Sidepane),i=(0,z._)((0,W.useState)([]),2),o=i[0],a=i[1],s=(0,z._)((0,W.useState)("LOADING"),2),l=s[0],u=s[1],c=(0,e3.default)(),d=(0,z._)((0,mo.default)("tutorialProgress--".concat(c),0),2),p=d[0],f=d[1],h=(0,z._)((0,W.useState)(!1),2),m=h[0],v=h[1],g=(0,W.useRef)(null),y=(0,e4.useCurrentUserId)(),b=y?y.toString():"",w=(0,mc.useGetCursorState)(),_=(0,mc.useCursorFilepath)(),j=(0,ml.default)(_),S=(0,Q.default)(function(){return j?function(e){var t,n;return j({code:e,insertAt:null!=(n=null==(t=w())?void 0:t.position.offset)?n:"end"})}:void 0},[j,w]),k=mp(b,c),C=k?(0,x.jsx)(mf,{challenge:k}):null,T=(0,W.useCallback)(function(){g.current&&(g.current.scrollTop=0)},[g]);return((0,W.useEffect)(function(){var e=!1;return(0,er._)(function(){var n,r,i,o,s,l,c,d,p,f,h,m,v,g;return(0,ei._)(this,function(x){switch(x.label){case 0:return u("LOADING"),[4,t.readDir(mu.TUTORIAL_DIR)];case 1:if(n=x.sent(),e)return[2];if(n.error)return u("ERROR"),[2];return r=[],[4,Promise.all(n.children.filter(function(e){var t;return e.type===nT.FileType.File&&(null==(t=mi.FileTypeRepository.from(e.filename))?void 0:t.id)==="markdown"}).map(function(e){var n="".concat(mu.TUTORIAL_DIR,"/").concat(e.filename);return Promise.all([n,t.readFile(n)])}))];case 2:if(i=x.sent(),e)return[2];o=!0,s=!1,l=void 0;try{for(c=i[Symbol.iterator]();!(o=(d=c.next()).done);o=!0)f=(p=(0,z._)(d.value,2))[0],(h=p[1]).error?u("ERROR"):(v=h.content.toString(),g=RegExp("^#\\s(?<title>.*)").exec(v),r.push({title:null==g||null==(m=g.groups)?void 0:m.title,content:v,path:f}))}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}return a(r),u("READY"),[2]}})})(),function(){e=!0}},[t]),(0,W.useEffect)(function(){o[p]||f(0)},[p,f,o]),"LOADING"===l)?(0,x.jsx)(F.View,{css:[eG.rcss.center],grow:!0,shrink:!0,children:(0,x.jsx)(o8.default,{})}):"ERROR"===l?(0,x.jsx)(F.View,{css:[eG.rcss.center],grow:!0,shrink:!0,children:(0,x.jsxs)(F.View,{css:[eG.rcss.center,eG.rcss.colWithGap(4)],children:[(0,x.jsx)(iW.default,{color:D.tokens.accentNegativeDefault}),(0,x.jsx)(eA.Text,{color:"dimmer",multiline:!1,children:"Failed to load tutorial"})]})}):0===o.length?(0,x.jsx)(F.View,{css:[eG.rcss.center],grow:!0,shrink:!0,children:(0,x.jsxs)(F.View,{css:[eG.rcss.center,eG.rcss.colWithGap(4)],children:[(0,x.jsx)(iW.default,{color:D.tokens.accentNegativeDefault}),(0,x.jsx)(eA.Text,{color:"dimmer",multiline:!1,children:"No tutorials found!"})]})}):m?(0,x.jsxs)(F.View,{css:[eG.rcss.overflowY("scroll"),eG.rcss.flex.growAndShrink(1),eG.rcss.p(8),eG.rcss.colWithGap(16)],children:[(0,x.jsx)(eA.Text,{variant:"headerDefault",multiline:!1,children:"Table of Contents"}),(0,x.jsx)(F.View,{grow:!0,shrink:!0,gap:8,children:o.map(function(e,t){return(0,x.jsxs)(F.View,{css:[p===t?eG.rcss.backgroundColor.backgroundHighest:eG.rcss.backgroundColor.backgroundHigher,eG.rcss.borderRadius(4),eG.rcss.rowWithGap(8),eG.rcss.align.center,eG.rcss.cursor.pointer,p===t?{outline:"solid 2px ".concat(D.tokens.outlineDimmest)}:{},{":hover":{outline:"solid 2px ".concat(D.tokens.outlineDimmest)}}],p:8,onClick:function(){f(t),v(!1)},children:[(0,x.jsx)(F.View,{css:[eG.rcss.backgroundColor.backgroundHighest,eG.rcss.width(20),eG.rcss.height(20),eG.rcss.borderRadius("full"),eG.rcss.center,{outline:"solid 1px ".concat(D.tokens.outlineDimmest)}],children:(0,x.jsx)(eA.Text,{variant:"small",color:"dimmest",multiline:!1,children:t+1})}),(0,x.jsx)(eA.Text,{css:[eG.rcss.maxWidth("80%")],multiline:!1,children:e.title})]},e.title)})})]}):(0,x.jsx)(F.View,{innerRef:r,css:[eG.rcss.height("100%")],children:(0,x.jsxs)(F.View,{dataCy:"tutorial-viewer-content",innerRef:g,css:[eG.rcss.overflowY("scroll"),eG.rcss.flex.growAndShrink(1),eG.rcss.p(16),eG.rcss.pb(48),eG.rcss.colWithGap(16)],children:[n?(0,x.jsx)(eE.Button,{text:"Show tutorial video",iconLeft:(0,x.jsx)(n3.default,{}),onClick:function(){return n()}}):null,C,o.length>1&&(0,x.jsx)(eE.Button,{text:"Table of Contents",iconLeft:(0,x.jsx)(fR.default,{}),onClick:function(){return v(!0)}}),(0,x.jsx)(ms.default,{fs:t,path:o[p].path,source:o[p].content,sourcePos:!1,onCodeInsert:S}),o.length>1&&(0,x.jsxs)(F.View,{css:[eG.rcss.position.absolute,eG.rcss.width("100%"),eG.rcss.left(0),eG.rcss.bottom(0),eG.rcss.overflow("hidden")],children:[(0,x.jsx)(mm,{progress:(p+1)/o.length}),(0,x.jsxs)(F.View,{css:[eG.rcss.width("100%"),eG.rcss.height(40),eG.rcss.align.center,eG.rcss.flex.row],children:[(0,x.jsx)(F.View,{tag:"button",css:[eG.rcss.backgroundColor.backgroundHigher,eG.rcss.cursor.pointer,eG.rcss.width(40),eG.rcss.height("100%")],p:8,justify:"center",onClick:function(){p>0&&(f(function(e){return e-1}),T())},children:p>0&&(0,x.jsx)(pP.default,{size:24})}),(0,x.jsx)(F.View,{tag:"button",css:[eG.rcss.height("100%"),eG.rcss.justify.spaceBetween,eG.rcss.backgroundColor.backgroundHighest,eG.rcss.align.center,eG.rcss.p(8),eG.rcss.cursor.pointer,{userSelect:"none"}],grow:!0,shrink:!0,row:!0,gap:8,onClick:function(){p<o.length-1&&(f(function(e){return e+1}),T())},children:p<o.length-1&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(eA.Text,{multiline:!1,css:[eG.rcss.flex.growAndShrink(1),eG.rcss.textAlign.left,eG.rcss.fontSize(D.tokens.fontSizeSubheadDefault)],children:[(0,x.jsxs)("span",{css:[eG.rcss.color.foregroundDimmer],children:["Next",o[p+1].title?": ":" page"]}),(0,x.jsx)("b",{children:null!=(e=o[p+1].title)?e:""})]}),(0,x.jsx)(lL.default,{size:24})]})})]})]})]})})},Icon:function(e){var t=e.size;return(0,x.jsx)(pf.default,{size:t})},getTitle:function(){return"Tutorial"},category:d8.PaneCategory.Other,decode:function(e){return nh.Value.Decode(mv,e)}},mx=e.i(155119),my=e.i(524283),mb=e.i(561132),mw=e.i(137218),m_=e.i(134405),mj=e.i(417120),mS=e.i(378042),mk=e.i(401135),mC=e.i(813453),mT=e.i(942314),mI=e.i(548364),mP=e.i(236906),mE=e.i(759967),mR=e.i(336563),mA={Content:function(e){var t,n,r=e.pane.data,i=e.options,o=i.performPaneOperation,a=i.paneId,s=(0,W.useRef)(null),l=(0,mE.useIsExpertMode)(),u=(0,a_.useIsAgentStackRepl)().isAgentStackRepl,c=(0,r0.useWorkflowsTaskFlatMap)(),d=(0,lv.useIsExpoStack)(),p=(0,W.useMemo)(function(){return(0,my.getInitialPort)({data:r,tasks:c,isExpoStack:d})},[r,c,d]),f=(0,mk.useShowEmptyState)(p),h=(0,aD.default)(),m=h.didConnectOnce,v=h.didDisconnect,g=(0,W.useCallback)(function(e){o({operation:"open",secondary:!1,pane:e})},[o]),y=(0,W.useCallback)(function(){return g({type:"developer",data:{tab:["networking"]}})},[g]),w=(0,W.useCallback)(function(){return g({type:"deployments"})},[g]),_=null==r?void 0:r.previewScreenSize,j=(0,W.useCallback)(function(e){o({operation:"replace",pane:{type:"webview",data:(0,td._)((0,b._)({},null!=r?r:{}),{previewScreenSize:e})}})},[r,o]),S=null==r||!r.expoPreviewGuide||r.expoPreviewGuide.shown,k=(0,W.useCallback)(function(e){o({operation:"replace",pane:{type:"webview",data:(0,td._)((0,b._)({},null!=r?r:{}),{expoPreviewGuide:{shown:e}})}})},[r,o]),C=(0,mI.useDeploymentCommands)({openDeploymentsPane:w,includeSharing:!0}).getCommandGroups;return((0,eg.useSetPaneBindings)(function(){var e={type:"webview",refresh:function(){var e;null==(e=s.current)||e.refresh()},navigate:function(e,t){var n;null==(n=s.current)||n.navigateTo(e,t)}},t=C();return t.length>0?(0,td._)((0,b._)({},e),{commands:t}):e},[C]),u)?(0,x.jsx)(mC.WebviewDisabledForAgentStack,{openPane:g}):l||u?f||void 0===p?(0,x.jsx)(mT.default,{openNetworkingTool:y,didConnectOnce:m,didDisconnect:v}):(0,x.jsx)(mS.WebviewBrowser,{ref:s,initialPort:p,initialPath:null==r||null==(t=r.ports)?void 0:t.path,openPane:g,previewScreenSize:_,setPreviewScreenSize:j,expoPreviewGuideShown:S,setExpoPreviewGuideShown:k,paneId:a}):(0,x.jsx)(mD,{ref:s,initialPort:p,initialPath:null==r||null==(n=r.ports)?void 0:n.path,openPane:g,previewScreenSize:_,setPreviewScreenSize:j,expoPreviewGuideShown:S,setExpoPreviewGuideShown:k,paneId:a})},Icon:function(e){var t=e.size;return(0,x.jsx)(r4.IconContext.Provider,{value:{size:t},children:(0,x.jsx)(mx.default,{})})},getTitle:function(){return"Preview"},description:"Preview your App",category:d8.PaneCategory.WorkspaceFeatures,decode:mP.decode},mD=(0,W.forwardRef)(function(e,t){var n=e.initialPort,r=e.initialPath,i=e.openPane,o=e.previewScreenSize,a=e.setPreviewScreenSize,s=e.expoPreviewGuideShown,l=e.setExpoPreviewGuideShown,u=e.paneId,c=(0,m_.useAgentAwareWebviewState)(),d=(0,r0.useWorkflowsTaskFlatMap)(),p=(0,mR.getForwardedPortsFromTasks)(d),f=(0,lv.useIsExpoStack)(),h=(0,Y.useFlag)({controlName:"flag-free-plan",default:!1}),m=(0,cE.useShouldSeeFreemiumExperience)().shouldSeeFreemiumExperience,v=(0,s6.useGetAgentFreeUsage)(),g=v.agentUsage,y=v.agentUsageV2,b=v.loading,w=v.error,_=y?y.isUnderQuota:null==g?void 0:g.isUnderQuota,j=h&&!b&&!w&&m&&!1===_,S=c.state===m_.WebviewState.READY||c.state===m_.WebviewState.LAST_RESORT_READY,k=(0,s$.useIsAgentWebDesignMockup)().isWebDesignMockup,C=(0,z._)((0,W.useState)(!1),2),T=C[0],I=C[1],P=(0,mj.useIsAgentOptimisticallyWorking)(),E=T&&(k||j);if(!S)return(0,x.jsx)(mw.AgentAwareWebviewNonReadyStates,{webviewState:c,openPane:i,isFreemiumUserOutOfAgentCredits:j});var R=c.state===m_.WebviewState.READY?c.presentPort:c.externalPort,A=!0===f?(0,lv.filterPortsForExpo)(p):p,D=void 0!==R&&A.some(function(e){return e.externalPort===R})?R:n,V=c.state===m_.WebviewState.READY?c.presentRoute:r;if(void 0===D)return(0,x.jsx)(mw.AgentAwareWebviewNonReadyStates,{webviewState:{state:m_.WebviewState.APP_STARTING_AGENT_IDLE},openPane:i,isFreemiumUserOutOfAgentCredits:j});var M=function(){return I(!1)};return(0,x.jsxs)(x.Fragment,{children:[E&&P&&(0,x.jsx)(mb.AgentAwareWebviewPreviewSoonEmptyStateV2,{canDismiss:!0,onDismiss:M,isFreemiumUserOutOfAgentCredits:j}),E&&!P&&(0,x.jsx)(mb.AgentAwareWebviewRuntimeErrorCrashedEmptyState,{openPane:i,canDismiss:!0,onDismiss:M,isFreemiumUserOutOfAgentCredits:j}),(0,x.jsx)(mS.WebviewBrowser,{ref:t,initialPort:D,initialPath:null!=V?V:r,openPane:i,previewScreenSize:o,setPreviewScreenSize:a,expoPreviewGuideShown:s,setExpoPreviewGuideShown:l,paneId:u,onUnhandledExceptionChange:I})]})}),mV=e.i(835109),mM=e.i(676702),mF=e.i(544880),mO=e.i(637972),mL=e.i(643041);function mB(){var e=(0,w._)(["\n  query NotificationModalCheckMultiplayers($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n      }\n    }\n  }\n"]);return mB=function(){return e},e}var mU={},mN=(0,_.gql)(mB());function mG(){var e=(0,w._)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return mG=function(){return e},e}var mz=(0,_.gql)(mG()),mW=!1;function mH(){return"Notification"in window?"true"===nZ.default.get(mq,"string")?"dismissed":window.Notification.permission:"denied"}var mq="notifications/dismissedModal";function mK(e){nZ.default.set(mq,String(e))}var m$={};function mY(e){return(0,er._)(function(e){var t,n,r,i,o,a,s,l,u,c,d;return(0,ei._)(this,function(p){switch(p.label){case 0:if(t=e.title,n=e.body,r=e.badge,i=e.icon,o=e.iconByUsername,a=e.tag,s=e.onClick,u=void 0===(l=e.cacheDuration)?0:l,!document.hidden&&document.hasFocus()||"granted"!==mH()||(c=Date.now(),a in m$&&m$[a]+u>c))return[2];if(!o)return[3,2];return[4,(0,er._)(function(){var e,t;return(0,ei._)(this,function(n){switch(n.label){case 0:if(null===e5.apolloClient)return[2];return[4,e5.apolloClient.query({query:mz,variables:{username:o}})];case 1:return[2,null==(t=n.sent().data)||null==(e=t.user)?void 0:e.image]}})})()];case 1:i=p.sent(),p.label=2;case 2:return d=new window.Notification(t,{body:n,badge:r||"/public/images/logo-grayscale.png",icon:i||"/public/images/icon-square.png",tag:a}),setTimeout(function(){d.close()},1e4),d.addEventListener("click",function(){window.focus(),d.close()}),s&&d.addEventListener("click",s),m$[a]=c,[2]}})}).apply(this,arguments)}function mQ(e){try{new Audio(e).play().catch(function(){})}catch(e){}}function mX(e){var t,n,r,i=e.replId,o=(0,z._)((0,W.useState)(!1),2),a=o[0],s=o[1],l=(0,lp.useIsTouring)(),u=(t={variables:{replId:i}},n=(0,b._)({},mU,t),j.useQuery(mN,n)).data,c=(null==u||null==(r=u.getRepl)?void 0:r.__typename)==="Repl"&&u.getRepl.multiplayers.length>0;(0,W.useEffect)(function(){l||!c||"default"===mH()&&s(!0)},[c,l]);var d=(0,W.useCallback)(function(){mK(!0),s(!1)},[]),p=(0,W.useCallback)(function(){return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return[4,(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return[4,(0,er._)(function(){return(0,ei._)(this,function(e){try{window.Notification.requestPermission().then()}catch(e){return[2,new Promise(function(e){window.Notification.requestPermission(function(t){e(t)})})]}return[2,window.Notification.requestPermission()]})})()];case 1:return e.sent(),mK(!1),[2]}})})()];case 1:return e.sent(),s(!1),[2]}})})()},[]);return a?(0,x.jsx)(ez.Modal,{preventClose:!0,isOpen:!0,onRequestClose:d,children:(0,x.jsxs)(F.View,{gap:24,children:[(0,x.jsx)(eA.Header,{variant:"headerDefault",level:2,children:"Replit needs your permission to enable notifications."}),(0,x.jsx)(eA.Text,{children:"Never miss messages from your collaborators if you're in another tab or window."}),(0,x.jsxs)(F.View,{row:!0,gap:12,justify:"end",children:[(0,x.jsx)(eE.Button,{onClick:d,text:"Deny",iconLeft:(0,x.jsx)(iW.default,{})}),(0,x.jsx)(eE.Button,{text:"Allow notifications",colorway:"positive",iconLeft:(0,x.jsx)(lS.default,{}),onClick:p})]})]})}):null}var mZ=e.i(657929),mJ=e.i(357210),m0=(0,D.cvarsFrom)("ResizeHandle.module.css",["--width","--height","--transform-x","--transform-y","--rotation","--z-index","--cursor"]),m1=(0,W.memo)(function(e){var t,n=e.handleId,r=(0,ep.useHandleView)(n),i=(t=(0,W.useRef)(null),(0,ds.useStyleSet)(t,r.size,function(e){var t,n=e.width,r=e.height;return t={},(0,R._)(t,m0.width,n+"px"),(0,R._)(t,m0.height,r+"px"),t}),(0,ds.useStyleSet)(t,r.position,function(e){var t,n=e.x,r=e.y;return t={},(0,R._)(t,m0.transformX,Math.round(n)+"px"),(0,R._)(t,m0.transformY,Math.round(r)+"px"),t}),(0,ds.useStyleSet)(t,r.isStacked,function(e){return(0,R._)({},m0.cursor,e?"row-resize":"col-resize")}),(0,ds.useStyleSet)(t,r.isActive,function(e){return(0,R._)({},m0.zIndex,(e?iM.zIndexLevels.gutterActive:iM.zIndexLevels.gutter).toString())}),t),o=(0,ep.useResizeTiling)(),a=(0,ep.useTogglingSnap)(),s=(0,W.useRef)(null),l=(0,i1.default)(r.isSnapped),u=(0,i1.default)(r.isStacked);return(0,x.jsx)(F.View,{align:"center",justify:"center",innerRef:i,clsx:[mJ.default.root,(0,R._)({},mJ.default.stacked,u)],onDoubleClick:function(){a(r.handle.current)},onPointerDown:function(e){(0,dh.measureMouseMove)(e,{start:function(){var e=r.handle.current;s.current=document.activeElement,o({type:"start",leftPath:e.leftPath,stacked:e.stacked})},move:function(e){o({type:"update",moveDelta:e.delta})},end:function(){var e,t;o({type:"end"}),null==(t=s.current)||null==(e=t.focus)||e.call(t)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:l?(0,x.jsx)(mZ.default,{className:"icon"}):(0,x.jsx)(F.View,{clsx:mJ.default.grip})})}),m2=e.i(387948),m4=e.i(123111),m3=e.i(736451),m5=e.i(94366),m8=e.i(924748),m6=e.i(825606),m9=e.i(241939),m7=e.i(145864),ve=e.i(231346),vt=e.i(422183),vn="video.json",vr=(0,vt.join)(mu.TUTORIAL_DIR,vn),vi=e.i(304969);e.i(792e3);var vo=e.i(8808),va=e.i(37292),vs=e.i(374106),vl=e.i(986194),vu=e.i(19379),vc=e.i(584647),vd=e.i(943565),vp="/public/sounds/Achievement_Bell_Replit.wav",vf={direction:"reverse",state:{isExecutingPlan:!1},reducer:function(e,t){if(e.sender.type!==ae.UserType.AI)return!1;var n=e.contents.contents;switch(null==n?void 0:n.$kind){case"agentPlanEventContents":var r=n.agentPlanEventContents;if(!r)break;if(!0===r.requiresApproval)return t.notification={id:r.planId,text:"Plan is waiting for approval"},t.isExecutingPlan=!0,!1;if(t.isExecutingPlan&&r.step.subSteps.every(function(e){return e.status===ae.AgentPlanStepStatus.STEP_COMPLETE}))return t.notification={id:r.planId,text:"Plan has been completed!"},t.isExecutingPlan=!1,!1;break;case"agentAskUserForActionRequest":var i=n.agentAskUserForActionRequest.request;if((null==i?void 0:i.$kind)==="userSecretsRequest")return t.notification={id:e.id,text:"Agent needs secrets to proceed"},!1;return t.notification={id:e.id,text:"Agent has an update for you"},!1;case"agentTimelineEventContents":var o,a=n.agentTimelineEventContents,s=a.toolData,l=a.toolName;if((null==s?void 0:s.$kind)==="messageData"){switch(null==(o=s.messageData.agentAction.optionType)?void 0:o.$kind){case"messageButtonAction":return t.notification={id:e.id,text:"Agent has a question for you"},!1;case"secretRequestAction":return t.notification={id:e.id,text:"Agent needs secrets to proceed"},!1;case"deployRequestAction":return t.notification={id:e.id,text:"Agent needs your permission to publish the application"},!1}if("user_response"===l)return t.notification={id:e.id,text:"Agent has a question for you"},!1}}t.notification=void 0}};function vh(){var e=(0,w._)(["\n  query ReplEnvironmentNotifyUserJoin($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return vh=function(){return e},e}var vm=(0,_.gql)(vh()),vv=e.i(389320),vg=e.i(803542);function vx(){var e=(0,w._)(["\n  query TrackMultiplayer($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return vx=function(){return e},e}var vy={},vb=(0,_.gql)(vx());function vw(){var e=(0,ep.useOpenTool)(),t=(0,nO.useIsExtensionRepl)(),n=(0,ep.useGetPanes)(),r=(0,ep.useRevealPane)();return(0,W.useCallback)(function(i){var o=!!i&&i.reveal;if(t)return void e({pane:{type:"runnerOutput"},activate:!1,commit:!0});var a=n().find(function(e){var t=(0,z._)(e,2);return"runnerOutput"===(t[0],t[1]).type});a||e({pane:{type:"runnerOutput"},activate:!1,reveal:!1}),o&&a&&r({paneId:a[0],activate:!0})},[t,n,e,r])}function v_(e,t,n){var r=(0,ep.useLayoutInitType)(),i=(0,ep.useInsertPane)(),o=(0,ep.useRevealPane)(),a=(0,ep.useGetPanes)();(0,eF.useCommandBinding)(function(){if(r)return[e,function(){var e=a().find(function(e){return(0,z._)(e,2)[1].type===t.type});e?o({paneId:e[0],activate:!0}):i((0,td._)((0,b._)({},n),{pane:t,activate:!0,placement:{type:"secondary"}}))}]},[r,i,o])}var vj=e.i(391542),vS=e.i(984826),vk=e.i(563209),vC=e.i(708648),vT=e.i(596378),vI=e.i(143480),vP=e.i(905890),vE=e.i(681850),vR=e.i(349467),vA=e.i(402434),vD=e.i(326333),vV=e.i(8812),vM=e.i(239296),vF=e.i(829960),vO=e.i(387524),vL=e.i(464458);function vB(){var e=(0,w._)(["\n  query WorkspaceShowHiddenFiles($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        templateInfo {\n          label\n        }\n      }\n    }\n  }\n"]);return vB=function(){return e},e}var vU={},vN=(0,_.gql)(vB()),vG=e.i(423111),vz=e.i(416406),vW=e.i(440560),vH=e.i(985430),vq=e.i(752310),vK=e.i(741740),v$=e.i(927938),vY=e.i(551544),vQ=e.i(136780),vX=e.i(604026),vZ=e.i(154488);function vJ(e){var t,n,r,i,o,a,s,l,u,c,d,p,f,h,m,v,g,y,w,_,S,k,C,T,I,P,R,A,V,M,F,O,L,B,U,N,G,H,q,K,$,Q,X,J,ee,et,en,eo,ea,es,el,ed,ef,eh,em,ev,ey,eb,ew,ej,eS,eC,eT,eI,eP,eE,eR,eA,eD,eV,eM,eO,eL,eB,eU,eN,eG,ez,eW,eH,eq,eK,e$,eY,eQ,eX,eZ,eJ,e0,e1,e2,e4,e8,e6,e9,tt,tn,ti,to,ta,ts,tl,tu,tc,td,tp,tf,th,tm,tg,tx,tb,tw,t_,tj,tS,tk,tC,tT,tI,tP,tE,tR,tA,tD,tV,tM,tF,tO,tL=e.repl,tB=e.currentUser,tU=(0,tv.default)(),tN=tU.replspaceApi,tG=tU.dotReplit,tz=tU.container,tW=tU.ports;t=(0,tv.default)().lspnix,n=(0,rN.usePreferences)("codeIntelligence").preferences.codeIntelligence,r=(0,ex.useOpenFiles)().length>0,(0,W.useEffect)(function(){r&&n?t.enable():t.disable()},[t,n,r]),i=(0,z._)((0,va.useBsod)(),1)[0],o=(0,ep.useSaveLayoutState)(),a=(0,lp.useIsTouring)(),s=(0,e3.default)(),l=a||i,(0,W.useEffect)(function(){var e=function(){o({replId:s,force:!1}),o.flush()};if(!l)return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}},[o,s,l]),(0,W.useEffect)(function(){var e=function(){"hidden"===document.visibilityState&&o({replId:s,force:!1})};if(!l)return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}},[o,s,l]),(0,W.useEffect)(function(){if(!l){var e=null;return function t(){e=setTimeout(function(){o({replId:s,force:!1}),t()},6e4)}(),function(){e&&clearTimeout(e)}}},[o,s,l]),(0,W.useEffect)(function(){if(!l)return function(){o({replId:s,force:!1}),o.flush()}},[o,s,l]),(0,m5.default)(),(0,vK.default)(),(0,vY.default)({workspaceType:"desktop"}),(0,W.useEffect)(function(){var e=function(e){"s"===e.key&&(0,iD.getCmdOrCtrl)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[]),(0,vq.default)(),c=(u=(0,tv.default)()).container,d=u.presence,(0,W.useEffect)(function(){var e=d.onUserJoin(function(t){var n,r=null==(n=c.getContext())?void 0:n.repl;if(r){var i,o=t.username;return(i=r.id,(0,er._)(function(){var e;return(0,ei._)(this,function(t){switch(t.label){case 0:if(!e5.apolloClient)throw Error("Expected Apollo client");return[4,e5.apolloClient.query({query:vm,variables:{id:i}})];case 1:return[2,(null==(e=t.sent().data)?void 0:e.getRepl.__typename)==="Repl"?e.getRepl.title:null]}})})()).then(function(e){e&&mY({title:"",body:"".concat(o," joined ").concat(e),tag:"".concat(r.id,"-").concat(o,"-joined"),iconByUsername:o,cacheDuration:9e5})}),function(){e()}}})},[d,c]),h=(0,rN.usePreferences)("agentAudioNotification").preferences.agentAudioNotification,m=(0,vu.usePageVisibility)(),y="control"!==(g=null!=(p=null==(v=(0,vd.useGetExperiment)("sound-on_v2")())?void 0:v.get("treatmentName"))?p:"control"),w="soundAndNoti"===g,_=(0,e3.default)(),S=(0,Z.useIsInMobileWorkspace)(),k=(0,rN.usePreferences)("agentAudioNotification").preferences.agentAudioNotification,(0,W.useEffect)(function(){var e,t;!S&&k&&(e=["click","keydown","touchstart"],t=function(){if(!mW)try{new Audio("data:audio/mpeg;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV").play().catch(function(){}),mW=!0}catch(e){}e.forEach(function(e){document.removeEventListener(e,t)})},e.forEach(function(e){document.addEventListener(e,t,{once:!0,passive:!0})}))},[S,k]),C=(0,W.useCallback)(function(e,t){k&&document.hidden&&!S&&mQ(vp),w&&mY({title:"Replit",body:t,tag:"".concat(_,"-").concat(e),icon:"/public/icons/icon-maskable-512x512.png",cacheDuration:3e5})},[k,_,S,w]),T=(0,Z.useIsInMobileWorkspace)(),I=(0,at.useChatter)(),P=(0,ek.useObservable)(I.sessions.agent.current),R=(0,W.useMemo)(function(){return null==P?void 0:P.reduce(vf,1)},[P]),A=null==P?void 0:P.agent.state,V=(0,W.useMemo)(function(){return A&&R?cY.Observable.combine(A,R):null},[A,R]),M=(0,W.useRef)(null),F=(0,W.useRef)(0),(0,du.useObserver)(A,{next:function(e){if(e){var t=e.state,n=M.current;if(y&&h&&!m&&n===ae.AgentRunState.AGENT_STATE_RUNNING&&t===ae.AgentRunState.AGENT_STATE_PAUSED&&!T){var r=Date.now();r-F.current>=15e3&&(mQ(vp),C("agent-paused-".concat(r),"Replit Agent finished working. Come back to check your results."),F.current=r)}M.current=t}}}),(0,du.useObserver)(V,{next:function(e){var t=(0,z._)(e,2),n=t[0],r=t[1].notification;r&&(null==n?void 0:n.state)===ae.AgentRunState.AGENT_STATE_PAUSED&&C(r.id,r.text)}}),O=(0,vc.useCurrentAgentTestingTakeover)({sessionId:null!=(f=null==P?void 0:P.id)?f:null}),(0,W.useEffect)(function(){(null==O?void 0:O.request.status)==="pending"&&C(O.request.sessionId,"Agent needs your help with testing")},[O,C]),(0,at.useChatHook)("received-completed-event",function(e){var t=e.event;if(y&&h&&!m&&(0,vs.isEventContentsKind)(t,"agentPlanEventContents")&&!T){var n=t.contents.contents,r=(0,vl.unkind)(n);if(t.sender.type===ae.UserType.AI&&r.requiresApproval){var i=Date.now();i-F.current>=5e3&&(mQ(vp),C("agent-plan-ready-".concat(i),"Your Replit Agent needs your approval to continue."),F.current=i)}}}),(0,vM.default)(),(0,vD.useLiveViewReplConnection)(),L=(0,tv.default)().presence,(0,W.useEffect)(function(){return L.onFollowingUsersChanged(function(e){var t=e.followingUsers,n=e.type,r=t.length;"follow"===n?(0,eu.track)(ec.events.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,eu.track)(ec.events.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})})},[L]),(0,vQ.default)(),B=(0,tv.default)().presence,U=(0,ep.useActiveFile)(),(0,W.useEffect)(function(){B.updateOpenFile(U)},[B,U]),G=(N=(0,te.default)()).showConfirm,H=N.showNotice,q=N.hideMessage,K=N.showError,$=(0,tv.default)().container,Q=(0,W.useRef)(!1),(0,W.useEffect)(function(){var e=$.onToast(function(e){e.startsWith("PANIC")||H(e,Math.max(1e4,e.length/.025+1e3))}),t=null,n=!1,r=$.onConnectionStateChanged(function(e){if(t&&(q(t),t=null),e===vo.ConnectionState.CONNECTED){n&&Q.current&&(t=G("Connected",1500),Q.current=!1),n=!0;return}if(n){if(e===vo.ConnectionState.CONNECTING){t=H("Reconnecting");return}if(e===vo.ConnectionState.DISCONNECTED){t=K("Disconnected"),Q.current=!0;return}}});return function(){t&&q(t),e(),r()}},[$,G,H,K,q]),X=(0,te.default)().showConfirm,J=(0,tv.default)().fs,(0,W.useEffect)(function(){var e=J.registerOnFlushSuccess(function(e,t){if(t===nT.FlushSource.MANUAL_SAVE){var n="Saved ".concat(e);X(n,Math.max(1e4,n.length/.025+1e3))}});return function(){e()}},[J,X]),et=(ee=(0,te.default)()).showNotice,en=ee.showError,(0,ar.usePid2)(function(e,t){var n=t.signal;return(0,er._)(function(){var t,r;return(0,ei._)(this,function(i){switch(i.label){case 0:return[4,e.pythonMigration.detectLegacyPython.rpc({},{signal:n})];case 1:if(!(t=i.sent()).ok||!t.payload.oldVenvDetected)return[2];return[4,e.pythonMigration.migratePython.rpc({},{signal:n})];case 2:if(!(r=i.sent()).ok)return"NOP"!==r.payload.code&&en((0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{children:"Failed to migrate legacy Python configuration."}),(0,x.jsx)("div",{children:"You may need to reinstall your Python packages, or contact support."})]}),1e4),[2];return et((0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{children:"This Repl contained legacy Python configuration"}),(0,x.jsx)("div",{children:"and has been automatically migrated."})]}),1e4),[2]}})})()},[en,et]),eo=(0,ep.useLayoutInitType)(),ea=vw(),es=(0,lp.useTourStep)(ma.newUserTour.id,ma.TourStepIds.Output),(0,W.useEffect)(function(){if(eo&&(null==es?void 0:es.isActive)){var e=setInterval(function(){ea()},200);return function(){clearInterval(e)}}},[null==es?void 0:es.isActive,ea,eo]),v_(iT.showShell.id,{type:"shell"}),v_(iT.showGit.id,{type:"git"}),v_(iT.showSettings.id,{type:"preferences"}),v_(iT.showConsole.id,{type:"runnerOutput"}),(0,vS.default)(),el=(0,tv.default)().presence,ed=(0,ep.useOpenFile)(),(0,W.useEffect)(function(){return el.onUserOpenedFile(function(e){var t=e.user,n=e.file,r=el.getFollowedUser();!r||r.id!==t.id||n&&ed({path:n})})},[el,ed]),eh=(ef=(0,z._)((0,W.useState)(null),2))[0],em=ef[1],(0,W.useEffect)(function(){return el.onFollowedUserChanged(em)},[el]),(0,W.useEffect)(function(){if(eh){var e=setTimeout(function(){document.addEventListener("click",t)},0);return function(){clearTimeout(e),document.removeEventListener("click",t)}}function t(){el.unfollowUser()}},[eh]),ev=(0,vG.useSetAreHiddenFilesVisible)(),ej=(null==(ew=(ey={variables:{replId:(0,e3.default)()}},eb=(0,b._)({},vU,ey),j.useQuery(vN,eb)).data)?void 0:ew.getRepl.__typename)==="Repl"?ew.getRepl:null,(0,W.useEffect)(function(){var e;!ej||(null==(e=ej.templateInfo)?void 0:e.label.includes("Blank Repl"))&&ev(!0)},[ev,ej]),eS=(0,ep.useToggleTutorialVideo)(),eC=(0,tv.default)().fs,eT=(0,mu.default)().isTutorial,eI=(0,e7.default)(eS),(0,W.useEffect)(function(){if(eT){var e=!1,t=eC.watchDir(mu.TUTORIAL_DIR,{onChange:function(t){(0,er._)(function(){var e;return(0,ei._)(this,function(n){switch(n.label){case 0:if(!t.find(function(e){return e.type===nT.FileType.File&&e.filename===vn}))return[2,null];return[4,eC.readFile(vr)];case 1:if((e=n.sent()).error)return[2,null];return[2,e.content.toString()]}})})().then(function(t){if(!e){if(!t)return void eI.current(null);var n=null;try{n=pg.evaluate(t)}catch(e){}var r=(void 0===n?"undefined":(0,ty._)(n))==="object"&&"string"==typeof n.embedUrl?n.embedUrl:null;eI.current(r?{embedUrl:r}:null)}})},onMoveOrDelete:function(){eI.current(null)},onError:function(){eI.current(null)}});return function(){e=!0,t()}}},[eC,eT,eI]),eP=(0,mu.default)().isTutorial,eE=(0,ep.useShowTutorialPane)(),(0,W.useEffect)(function(){eP&&eE()},[eE,eP]),eR=(0,vv.default)(),eA=(0,vg.useSetPaneIndicator)(),(0,W.useEffect)(function(){eA({paneType:"envEditor",indicatorType:eR?D.tokens.redStronger:void 0})},[eR,eA]),(0,vV.useMissingSecretToast)({onOpenEnvEditor:function(){tH({pane:{type:"envEditor"},activate:!0,placement:{type:"secondary"}})}}),eD=(0,ep.useActivePaneId)(),eV=(0,ex.useActivatePane)(),eM=(0,ex.useClearActivePane)(),(0,W.useEffect)(function(){eD?eV(eD):eM()},[eV,eM,eD]),eO=(0,eg.useFocusPane)(),(0,vi.usePaneFocusTrigger)(eO),eL=(0,ep.useIsDraggingTab)(),eB=(0,ep.useClearDragState)(),(0,W.useEffect)(function(){var e=function(){eB()};if(eL)return document.addEventListener("dragend",e),function(){document.removeEventListener("dragend",e)}},[eL,eB]),(0,vA.default)(),eU=(0,ep.useLayoutInitType)(),eN=(0,eg.useGetPaneBindings)(),eG=(0,ep.useGetVisiblePanes)(),(0,eF.useCommandBinding)(function(){if(eU)return[iT.webviewRefresh.id,function(){var e=eG().filter(function(e){return"webview"===(0,z._)(e,2)[1].type}),t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,z._)(i.value,1)[0],s=eN(a);s&&"webview"===s.type&&s.refresh()}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}]},[eU,eN,eG]),(0,vF.default)(),(0,m6.useOrgReplPresenceSession)(!(null==(tM=tL.org)?void 0:tM.id));var tH=tr();(0,W.useEffect)(function(){return o9.setTag("replId",tL.id),function(){o9.setTag("replId",void 0)}},[tL.id]),(0,W.useEffect)(function(){return o9.setTag("agent",!0),(0,nR.addAgentTag)(!0),function(){o9.setTag("agent",void 0),(0,nR.removeAgentTag)()}},[]),(0,vj.default)({repl:tL,currentUser:tB,container:tz}),(0,v$.default)(),ez=(0,Y.useFlag)({controlName:"flag-open-telemetry-tracing"}),e0=(eH=(eW=(0,z._)((0,W.useState)(!1),2))[0],eq=eW[1],e$=(eK=(0,z._)((0,W.useState)(Date.now()),2))[0],eY=eK[1],eX=(eQ=(0,z._)((0,W.useState)(Date.now()),2))[0],eZ=eQ[1],(0,W.useEffect)(function(){var e=function(){eq(!document.hidden),document.hidden?eZ(Date.now()):eY(Date.now())};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),eJ={visibility:eH,visibleTime:e$,hiddenTime:eX}).visibility,e1=eJ.visibleTime,e2=eJ.hiddenTime,(0,W.useEffect)(function(){ez&&e0&&(e1-e2)/1e3>60&&(0,E.pruneSpans)(vL.tracerName)},[ez,e0,e2,e1]),e4=(0,tv.default)().ports,e8=(0,rN.usePreferences)("forwardPortsAutomatically").preferences,(0,W.useEffect)(function(){e4.setForwardPortsAutomatically(e8.forwardPortsAutomatically)},[e8.forwardPortsAutomatically,e4]),(0,m8.default)(tL);var tq=(0,ep.useSetAnimationsEnabled)(),tK=(0,m3.usePrefersReducedMotion)();(0,W.useEffect)(function(){tq(!tK)},[tK,tq]);var t$=(0,ep.useSetIsTouchDeviceLayout)(),tY=(0,m4.default)();(0,W.useEffect)(function(){t$(tY)},[tY,t$]),e9=(0,tv.default)().presence,tt=(0,e3.default)(),tn=(0,W.useRef)(!1),ts=(ti={variables:{replId:tt}},to=(0,b._)({},vy,ti),ta=j.useQuery(vb,to)).data,tl=ta.loading,tu=0,(null==ts?void 0:ts.getRepl.__typename)==="Repl"&&(tu=ts.getRepl.multiplayers.length,(null==(e6=ts.getRepl.owner)?void 0:e6.__typename)==="User"&&(tu+=1)),(0,W.useEffect)(function(){if(!tl&&!tn.current){var e=e9.onActiveUsersChange(function(){tn.current=!0,e(),(0,eu.track)(ec.events.MULTIPLAYER_REPL_OPENED,{replId:tt,participantsCount:tu,usersOnlineCount:e9.getActiveUsers().length})});return e}},[tt,tl,tu,e9]);var tQ=(0,ex.useWaitForFileClose)();(0,W.useEffect)(function(){tN.setWaitForFileClose(tQ)},[tN,tQ]);var tX=(0,va.useThrowBsod)(),tZ=(0,ep.useLayoutBSODArgs)();(0,W.useEffect)(function(){tZ&&tX(tZ)},[tX,tZ]),td=(tc=(0,tv.default)()).packager,tp=tc.toolchain,(0,W.useEffect)(function(){var e=setTimeout(function(){(0,er._)(function(){var e,t,n,r,i,o,a,s,l,u;return(0,ei._)(this,function(c){switch(c.label){case 0:if(!tp.configs.current||!td)return[2];e=tp.configs.current.packagers,t=!0,n=!1,r=void 0,c.label=1;case 1:c.trys.push([1,7,8,9]),i=e[Symbol.iterator](),c.label=2;case 2:if(t=(o=i.next()).done)return[3,6];return a=o.value,[4,td.listSpecfile(a.id)];case 3:var d;return(s=c.sent()).packages&&s.packages.length>0&&(l=s.packages.map(function(e){return e.name||""})||[],nR.logger.info("packager installed packages",{packagerId:a.id,language:a.language,packages:l}),(0,eu.track)(ec.events.PACKAGER_PACKAGES_INSTALLED,{packages:l})),[4,(d=(5+5*Math.random())*1e3,(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e){return setTimeout(function(){return e()},d)})];case 1:return e.sent(),[2]}})})())];case 4:c.sent(),c.label=5;case 5:return t=!0,[3,2];case 6:return[3,9];case 7:return u=c.sent(),n=!0,r=u,[3,9];case 8:try{t||null==i.return||i.return()}finally{if(n)throw r}return[7];case 9:return[2]}})})()},(10+5*Math.random())*1e3);return function(){clearTimeout(e)}},[td,tp.configs.current]),tf=(0,ex.useGetActivePaneId)(),th=(0,eg.useFocusPane)(),(0,W.useEffect)(function(){var e=function(){var e=tf();e&&th(e)},t=function(){"visible"===document.visibilityState&&document.activeElement===document.body&&e()};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",t),function(){window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",t)}},[th,tf]),(0,vT.default)();var tJ=(0,ep.useOpenMultipleFiles)(),t0=(0,ep.useOpenMultipleURLs)(),t1=(0,tv.default)().fs;(0,vO.default)({fs:t1,openMultipleFiles:tJ,openMultipleURLs:t0,waitForFileClose:tQ,isMobileWorkspace:!1}),(0,e_.useSetToolPanes)(),(0,r0.useInitWorkflows)({dotReplit:tG}),(0,vZ.useInitResouceMonitoring)();var t2=(0,ep.useOpenTool)();(0,lp.useTourStep)(lK.projectsTour.id,lK.StepIds.ProjectPane,{onEnter:function(){return t2({pane:{type:"project"},commit:!0,activate:!0})}}),(0,vX.default)(tW),tm=vw(),tg=(0,W.useCallback)(function(){tm({reveal:!1})},[tm]),(0,r0.useOnLocalRun)(tg,[tg]),(0,vC.useAgentTracking)(),(0,vz.useSyncAgentFreemiumUsage)(),(0,vP.useChatterSentryBreadcrumbs)(),(0,vE.useDebugPreviewStateTracking)(),(0,vk.useQueueAutoPlay)(),(0,vI.useAutoSetExpertMode)({isAgentReplInConfig:!!(null==(tF=tL.config)?void 0:tF.isAgentRepl),isExpertModeInConfig:!!(null==(tO=tL.config)?void 0:tO.isExpertMode)});var t4=(0,ep.useOpenTool)(),t3=(0,W.useCallback)(function(e){t4({pane:{type:e},activate:!1,reveal:!1,commit:!0})},[t4]);return(0,m2.default)({handleOpenPane:t3}),(0,vR.default)(),tx=(0,ep.useAgentLayout)().setAgentPosition,tb=(0,rN.usePreferences)("agentPosition").preferences.agentPosition,tw=(0,W.useRef)(tb),(0,W.useEffect)(function(){tb!==tw.current&&(tw.current=tb,tx(tb))},[tx,tb]),(0,vc.useTrackAgentTestingTakeoverRequests)(),t_=(0,ep.useGetLayout)(),tj=(0,ep.useOpenTool)(),tS=function(e){var t,n=t_();(null==(t=n.tiling)?void 0:t.type)==="paneGroup"&&1===n.tiling.panes.length&&tj({pane:e,activate:!1})},(0,at.useChatHook)("received-completed-event",function(e){var t=e.event.contents.contents;if((0,vl.isKind)(t,"agentTimelineEventContents")){var n=t.agentTimelineEventContents.toolData;(null==n?void 0:n.$kind)==="createPostgresqlDatabaseData"&&tS({type:"neon"})}}),tC=(0,e3.default)(),tT=(0,ep.useIsAgentCentered)(),tI=(0,ep.useTransitionToAgentPresentation)(),tP=(0,m7.useAgentPlanApprovalState)(),tE=(0,ve.useIsCurrentSessionInitialAgentSession)(),tR=(0,W.useRef)(!1),tA=(0,z._)((0,m9.useUpdateReplConfigMutation)(),1)[0],tD=tL.config,tV=!!(null==(tk=tL.origin)?void 0:tk.id),(0,W.useEffect)(function(){if(tV){(null==tD?void 0:tD.isInPlanningPhase)!==!1&&tA({variables:{input:{id:tC,isInPlanningPhase:!1}}});return}(null==tD?void 0:tD.isAgentRepl)&&tE&&null!=tP&&!tR.current&&("approved"===tP?(tT&&tI("sidebar"),(null==tD?void 0:tD.isInPlanningPhase)!==!1&&tA({variables:{input:{id:tC,isInPlanningPhase:!1}}})):(tT||tI("centered"),(null==tD?void 0:tD.isInPlanningPhase)!==!0&&tA({variables:{input:{id:tC,isInPlanningPhase:!0}}})),tR.current=!0)},[tT,tC,tI,tA,tP,tE,tD,tV]),(0,vW.useSyncAgentInitialPlanningState)(),(0,vH.useSyncAgentWebDesignMockupState)(),null}var v0=e.i(425188);function v1(e){var t=e.children,n=e.tour,r=e.userId;if(!n)return(0,x.jsx)(x.Fragment,{children:t});var i="workspace-desktop-new-user-tour"===n.id||"workspace-desktop-tour-2024"===n.id;function o(e){i&&n&&(0,eu.identify)({id:r.toString(),workspaceTourId:n.id,workspaceTourStatus:e===n.steps[n.steps.length-1].id?"completed":e.toLowerCase()})}return(0,x.jsx)(v0.TourRoot,{tour:n,onStep:function(e){n&&((0,eu.track)(ec.events.WORKSPACE_TOUR_STEP_VIEWED,{tour:n.id,stepId:e.toLowerCase()}),o(e))},onDone:function(e){(0,eu.track)(ec.events.WORKSPACE_TOUR_DISMISSED,{tour:n.id,stepId:e.toLowerCase(),didComplete:e===n.steps[n.steps.length-1].id}),o(e)},children:t})}var v2=e.i(508545),v4=e.i(911489),v3=e.i(263649),v5=e.i(909244),v8=e.i(384444);function v6(){var e=(0,ek.useObservable)((0,oD.useAgentIsWorking)()),t=(0,ek.useObservable)((0,oA.useAgentIsWaitingOnUserInput)()),n=(0,z._)((0,W.useState)(!0),2),r=n[0],i=n[1],o=(0,vd.useGetExperiment)("sound-on_v2")(),a="control"!==(null==o?void 0:o.get("treatmentName","control")),s=(0,W.useRef)(!1),l=(0,z._)((0,W.useState)(!1),2),u=l[0],c=l[1],d=(0,W.useRef)(null);(0,W.useEffect)(function(){var e=function(){var e=!document.hidden;i(e),e&&(c(!1),d.current&&(document.title=d.current))};return e(),document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}},[]),(0,W.useEffect)(function(){if(a){var n=e||t;n?s.current=!0:s.current&&!n&&(r||c(!0),s.current=!1)}},[e,t,r,a]),(0,W.useEffect)(function(){return u?(null===d.current&&(d.current=document.title),document.title.startsWith("(1) ")||(document.title="(1) ".concat(document.title))):d.current&&(document.title=d.current,d.current=null),function(){d.current&&(document.title=d.current,d.current=null)}},[u]);var p=v8.favicons.prompt;return e?p=v8.favicons.agentWorking:t?p=v8.favicons.agentWaiting:a&&u&&!r&&(p=v8.favicons.agentWaiting),p?(0,x.jsx)(v5.default,{children:(0,x.jsx)("link",{rel:"shortcut icon",href:p,sizes:"192x192",type:"image/png"})}):null}var v9=e.i(169566);function v7(){var e=(0,y.useRouter)(),t=(0,ep.useOpenTool)(),n=(0,J.useQueryParam)("didMigrateToHelium","boolean");return(0,x.jsx)(ez.Modal,{isOpen:n,onRequestClose:function(){(0,J.updatePathWithQueryParams)({router:e,params:[{mode:"delete",key:"didMigrateToHelium"}]})},centered:!0,children:(0,x.jsxs)(F.View,{gap:16,children:[(0,x.jsx)(eA.Header,{level:1,variant:"headerDefault",children:"We've upgraded your database!"}),(0,x.jsx)(eA.Text,{children:"Your data remains secure. No further action is required."}),(0,x.jsxs)(F.View,{row:!0,gap:8,children:[(0,x.jsx)(F.View,{grow:!0,children:(0,x.jsx)(eE.Button,{text:"View database",iconLeft:(0,x.jsx)(nU.default,{}),onClick:function(){t({pane:{type:"neon"}}),(0,J.updatePathWithQueryParams)({router:e,params:[{mode:"delete",key:"didMigrateToHelium"}]})}})}),(0,x.jsx)(F.View,{grow:!0,children:(0,x.jsx)(l$.ButtonLink,{variant:"outlined",text:"Learn more",iconRight:(0,x.jsx)(n2.default,{}),href:"https://docs.replit.com/cloud-services/storage-and-databases/sql-database",target:"_blank",rel:"noopener",noNextLink:!0})})]})]})})}var ge=e.i(468448),gt=e.i(748965),gn=e.i(764586),gr=e.i(968263);function gi(){var e=(0,w._)(["\n  query PublishedAs($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        publishedAs\n      }\n    }\n  }\n"]);return gi=function(){return e},e}var go={},ga=(0,_.gql)(gi()),gs=e.i(671901),gl=".replit-dynamic-template",gu=e.i(169932),gc=e.i(420309),gd=e.i(833387);function gp(){var e,t,n,r,i,o,a,s,l,u,c,d,p,f,h,m,v,g,y,w=(0,z._)((0,W.useState)(!1),2),_=w[0],S=w[1],k=(0,W.useCallback)(function(e){switch(e){case"starting":return void S(!0);case"none":return void S(!1);case"running":if(!_)throw Error("expected repl not to need dynamic template initialization")}},[S,_]),C=(0,z._)((0,W.useState)([]),2),T=C[0],I=C[1],P=(0,pD.useIdSeed)();t=(e={handleRPC:(0,W.useCallback)(function(e){switch(e.type){case"progress":case"failed":return I(function(t){return(0,en._)(t).concat([(0,b._)({key:P(t.length)},e)])}),null;case"query":case"prompt":case"confirm":var t=(0,gr.default)();return I(function(n){return(0,en._)(n).concat([(0,b._)({respond:t,key:P(n.length)},e)])}),t.promise;default:throw Error("unhandled request type: "+JSON.stringify(e))}},[P]),onConnStateChange:k}).handleRPC,n=e.onConnStateChange,r=(0,Y.useFlag)({controlName:"octopus-smokescreen"}),s=(i={variables:{id:(0,e3.default)()}},o=(0,b._)({},go,i),a=j.useQuery(ga,o)).loading,l=a.data,u=(0,Q.default)(function(){if(s)return!1;var e=null==l?void 0:l.getRepl;return(null==e?void 0:e.__typename)==="Repl"&&e.publishedAs===ej.PublishedReplKind.Template},[s,l]),d=(c=(0,tv.default)()).container,p=c.fs,h=(f=(0,z._)((0,W.useState)(!1),2))[0],m=f[1],g=(v=dT({container:d,service:"exec",skip:!h})).channel,y=v.isConnecting,(0,W.useEffect)(function(){!r||u||s||(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return[4,p.stat(gl)];case 1:return m(e.sent().exists),[2]}})})()},[p,r,u,s,m]),(0,W.useEffect)(function(){if(!y){if(!g)throw Error("exec channel is not open");var e=(0,gr.default)();e.promise.then(function(){return(0,er._)(function(){var e;return(0,ei._)(this,function(t){switch(t.label){case 0:return[4,g.request({input:JSON.stringify({type:"start"})+"\n"})];case 1:if(!(e=t.sent()).ok)throw Error(": "+e.error);return[2]}})})()});var r=g.onCommand(function(r){switch(r.body){case"state":r.state===gs.api.State.Running?(n("starting"),e.resolve()):n("none");return;case"output":var i,o,a=r.output;if(!a)return;try{o=JSON.parse(a)}catch(e){throw Error("failed to parse dynamic template output: ".concat(e))}null==(i=t(o))||i.then(function(e){return g.send({input:JSON.stringify(e)+"\n"})});return;case"stderr":console.warn("got dynamic template generator stderr:",r.stderr);return;case"error":console.error("got dynamic template generator error:",r.error);return;case"ok":return;default:throw Error("unhandled exec channel body: ".concat(r.body))}});return g.send({exec:{args:["sh",gl],lifecycle:gs.api.Exec.Lifecycle.STDIN}}),function(){r()}}},[g,t,y,n,h]);var E=T.map(function(e){switch(e.type){case"progress":return(0,x.jsx)(gf,(0,b._)({},e));case"failed":return(0,x.jsx)(gh,(0,b._)({},e));case"query":return(0,x.jsx)(gm,(0,b._)({},e));case"prompt":return(0,x.jsx)(gv,(0,b._)({},e));case"confirm":return(0,x.jsx)(gg,(0,b._)({},e))}});return(0,x.jsx)(ez.Modal,{isOpen:_,onRequestClose:function(){return S(!1)},children:(0,x.jsx)(F.View,{gap:8,children:E})})}function gf(e){var t=e.progress,n=(0,iz._)(e,["progress"]);return(0,x.jsxs)(F.View,(0,td._)((0,b._)({},n),{children:["progress: ",t]}))}function gh(e){var t=e.error,n=(0,iz._)(e,["error"]);return(0,x.jsxs)(F.View,(0,td._)((0,b._)({},n),{children:["error: ",t]}))}function gm(e){var t=e.query,n=e.options,r=e.respond,i=(0,iz._)(e,["query","options","respond"]),o=(0,z._)((0,W.useState)(null),2),a=o[0],s=o[1],l=(0,z._)((0,W.useState)(!1),2),u=l[0],c=l[1],d=(0,pD.useIdSeed)(),p=(0,W.useCallback)(function(){null!==a&&(c(!0),r.resolve({type:"answer",answer:n[a]}))},[a,n,r]);return(0,x.jsxs)(F.View,(0,td._)((0,b._)({},i),{children:["query: ",t,n.map(function(e,n){return(0,x.jsxs)("label",{children:[(0,x.jsx)("input",{type:"radio",name:t,value:n,checked:a===n,onChange:function(){u||s(n)}}),e]},d(n))}),(0,x.jsx)(eE.Button,{text:"submit",onClick:p})]}))}function gv(e){var t=e.prompt,n=e.respond,r=(0,iz._)(e,["prompt","respond"]),i=(0,z._)((0,W.useState)(""),2),o=i[0],a=i[1],s=(0,z._)((0,W.useState)(!1),2),l=s[0],u=s[1],c=(0,W.useCallback)(function(){u(!0),n.resolve({type:"answer",answer:o})},[o,n]);return(0,x.jsxs)(F.View,(0,td._)((0,b._)({},r),{children:["prompt: ",t,(0,x.jsx)(sD.Input,{disabled:l,inputMode:"text",title:t,onChange:function(e){return a(e.currentTarget.value)}}),(0,x.jsx)(eE.Button,{text:"submit",onClick:c})]}))}function gg(e){var t=e.confirm,n=e.dataConfirmation,r=e.respond,i=(0,iz._)(e,["confirm","dataConfirmation","respond"]),o=Object.keys(n),a=Object.values(n);return(0,x.jsxs)(F.View,(0,td._)((0,b._)({},i),{children:["confirm: ",t,(0,x.jsxs)(gu.default,{"aria-label":"the data to be used to generate your App",children:[(0,x.jsx)(gd.TableHeader,{children:o.map(function(e){return(0,x.jsx)(gn.Column,{isRowHeader:!0,children:e},e)})}),(0,x.jsx)(gc.default,{children:(0,x.jsx)(gn.Row,{children:a.map(function(e,t){return(0,x.jsx)(gn.Cell,{children:e},o[t])})})})]}),(0,x.jsx)(eE.Button,{text:"yes",onClick:function(){return r.resolve({type:"answer",answer:"yes"})}}),(0,x.jsx)(eE.Button,{text:"no",onClick:function(){return r.resolve({type:"answer",answer:"no"})}})]}))}var gx=e.i(982243),gy=e.i(376847),gb=e.i(678814),gw=e.i(268999),g_=e.i(660081),gj=e.i(151386),gS={"image/png":"png","image/jpeg":"jpg","image/gif":"gif","image/webp":"webp"};function gk(e){return(0,er._)(function(e){var t,n,r,i;return(0,ei._)(this,function(o){switch(o.label){case 0:return t=e.urls,n=e.sentryContext,r=t.filter(function(e){return null!==e}),i=Date.now(),[4,Promise.all(r.map(function(e,t){return(0,er._)(function(){var r,o,a,s,l,u;return(0,ei._)(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,fetch(e)];case 1:if(!(r=c.sent()).ok)throw Error("Failed to fetch screenshot: ".concat(r.status));return[4,r.blob()];case 2:var d;return a=null!=(d=gS[(o=c.sent()).type])?d:"png",l=new File([o],s="screenshot-".concat(i,"-").concat(t,".").concat(a),{type:o.type}),[2,{fileName:s,file:l}];case 3:return u=c.sent(),o9.captureException(u,{extra:(0,b._)({message:"[AgentInbox] Error downloading screenshot",screenshotUrl:e},n)}),[2,null];case 4:return[2]}})})()}))];case 1:return[2,o.sent().filter(function(e){return null!==e})]}})}).apply(this,arguments)}var gC=e.i(224373),gT=(0,D.cvarsFrom)("ResizeHandle.module.css",["--width"]),gI=(0,W.memo)(function(){var e=(0,W.useRef)(null),t=(0,ep.useAgentLayout)(),n=(0,i1.default)(t.agentFiletreeOrder);return(0,x.jsx)(gP,{gutter:t.gutter,side:"filetree-agent"===n?"left":"right",onDoubleClick:function(){t.toggle("collapsed"===t.displayState.current)},onPointerDown:function(n){(0,dh.measureMouseMove)(n,{start:function(){e.current=document.activeElement,t.resizeSidebar({type:"start"})},move:function(e){var n=e.delta;t.resizeSidebar({type:"update",moveDelta:n})},end:function(){var n,r;t.resizeSidebar({type:"end"}),null==(r=e.current)||null==(n=r.focus)||n.call(r)}})}})});function gP(e){var t=e.gutter,n=e.side,r=(0,iz._)(e,["gutter","side"]),i=(0,W.useRef)(null);return(0,ds.useStyleSet)(i,t,function(e){return(0,R._)({},gT.width,e+"px")}),(0,x.jsx)(F.View,(0,td._)((0,b._)({clsx:[gC.default.root,gC.default[n]],align:"center",justify:"center",innerRef:i},r),{children:(0,x.jsx)(F.View,{clsx:gC.default.grip})}))}var gE=e.i(861781),gR=(0,D.cvarsFrom)("index.module.css",["--x","--y","--width","--height","--z-index"]);function gA(){}function gD(){var e=(0,ep.useIsAgentCentered)(),t=(0,ep.useTransitionToAgentPresentation)(),n=(0,ep.useIsAgentPresentationTransitionInProgress)(),r=(0,tv.default)(),i=r.secrets,o=r.fs,a=(0,ep.useOpenTool)(),s=(0,W.useCallback)(function(e){(0,eu.track)(ec.events.TOOL_OPENED,{source:"Agent Sidebar",tool:e.type}),a({pane:e})},[a]),l=d4(),u=(0,d3.useCurrentSession)(),c=u.session,d=u.setSession,p=u.setSessionId,f=(0,ep.useAgentLayout)(),h=(0,W.useRef)(null);(0,ds.useStyleSet)(h,da(f.rect,f.getTransitionEnabled),function(e){var t;return t={},(0,R._)(t,gR.x,e.x+"px"),(0,R._)(t,gR.y,e.y+"px"),(0,R._)(t,gR.width,e.width+"px"),(0,R._)(t,gR.height,e.height+"px"),t});var m=(0,z._)((0,W.useState)(null),2),v=m[0],g=m[1],y=f.setChatRef,b=f.toggle;(0,W.useEffect)(function(){var e;return v?(y({setSessionId:p,focusInput:function(){return v.focus()},setPromptValue:function(e){return v.setValue(e)},attachments:null!=(e=v.attachments)?e:function(){return(0,er._)(function(){return(0,ei._)(this,function(e){return[2,[]]})})()},openAgent:function(e){b(!0),p(null!=e?e:null),v.focus()},openAgentWithPrompt:function(e){var t=e.promptValue,n=e.attachments;return(0,er._)(function(){var e,r;return(0,ei._)(this,function(i){switch(i.label){case 0:if(b(!0),v.setValue(t),v.focus(),!(n&&n.length>0&&v.attachments))return[3,5];return[4,gk({urls:n})];case 1:if(!((e=i.sent()).length>0))return[3,5];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,v.attachments(e)];case 3:return i.sent(),[3,5];case 4:return r=i.sent(),o9.withScope(function(t){t.setTag("agent-inbox-attachments",!0),o9.captureException(r,{extra:{fileCount:e.length}})}),[3,5];case 5:return[2]}})})()}}),function(){y(null)}):void y({setSessionId:p,focusInput:function(){},setPromptValue:function(){},attachments:function(){return(0,er._)(function(){return(0,ei._)(this,function(e){return[2,[]]})})()},openAgent:function(e){b(!0),p(null!=e?e:null)},openAgentWithPrompt:function(e){e.promptValue,b(!0)}})},[v,y,p,b]);var w=(0,lp.useSetTourStepTarget)(l_,lw.Agent),_=(0,W.useCallback)(function(e){e&&l(e),t("sidebar")},[l,t]);return(0,x.jsxs)(V.ShadesSurface,{innerRef:h,clsx:gE.default.root,style:(0,R._)({},gR.zIndex,iM.zIndexLevels.tiledPane.toString()),elevate:!1,children:[(0,x.jsx)(d5.AgentMain,{secrets:i,readFile:o.readFile,session:c,setSession:d,openPane:s,onPlanApproval:_,isDesktopOrTabletAgentPresentationCentered:e,isDesktopLayoutAgentPresentationTransitionInProgress:n,openPip:gA,inputRef:g,workspaceTourStepRef:w}),(0,x.jsx)(gI,{})]})}var gV=(0,eN.cssRecord)({root:[eG.rcss.position.absolute,eG.rcss.borderRadius(8),eG.rcss.align.center,eG.rcss.overflow("hidden"),{border:"1px solid",borderColor:D.tokens.outlineDimmest}],content:[eG.rcss.width("100%"),eG.rcss.flex.growAndShrink(1)]});function gM(){var e,t,n,r,i=(0,ep.useEmptyLayoutRect)(),o=(0,ep.useIsInPopup)(),a=(0,ep.useInsertPaneToEdge)(),s=(t=(e=(0,z._)((0,dn.useDrop)({accept:[nT.FileType.File,dI.DragItems.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e){r.drag()},drop:function(e){if("nodes"===e.type){var t=(0,em.fsNodeToPanes)(e.nodes);t.length>0&&r.drop({panes:t})}}}),2))[0].isOver,n=e[1],r=(0,ep.useEmptyLayoutDragAndDrop)({isOver:t}),n),l=ij({openPane:(0,W.useCallback)(function(e){(0,eu.track)(ec.events.TOOL_OPENED,{source:"Empty Layout",tool:e.pane.type}),a({pane:e.pane,edge:"left"})},[a])});return(0,x.jsx)(F.View,{style:{width:i.width,height:i.height,transform:"translate(".concat(i.x,"px, ").concat(i.y,"px)"),zIndex:o?100:void 0},css:gV.root,innerRef:s,children:(0,x.jsx)(F.View,{css:gV.content,children:(0,x.jsx)(eW.CommandBar,{autoFocus:!0,command:l,showToolDescriptions:!0})})})}var gF=e.i(810157),gO=e.i(406035),gL=e.i(667183),gB=nf.Type.Object({width:nf.Type.Number({minimum:0})}),gU=nf.Type.Object({width:nf.Type.Number({minimum:0})}),gN=nf.Type.Object({layout:gO.LayoutRootSchema,data:nf.Type.Record(nf.Type.String(),nf.Type.Object({type:nf.Type.String()})),agent:nf.Type.Optional(gU),filetree:nf.Type.Optional(gB)});function gG(e,t){var n=null;try{n=nh.Value.Decode(gN,e)}catch(e){}if(null===n)return null;var r={layout:n.layout,data:{},type:"saved",agent:n.agent,filetree:n.filetree},i=new Set,o=(0,gF.getPaneIds)(r.layout),a=!0,s=!1,l=void 0;try{for(var u,c=Object.entries(n.data)[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=(0,z._)(u.value,2),p=d[0],f=d[1];if(o.has(p)){var h=t(f.type,f);if(!h){i.add(p);continue}r.data[p]=h}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return(0,r5.produce)(r,function(e){var t=function(t){if(o.has(t))return void(0,gL.removePane)(e.layout,t)},n=!0,r=!1,a=void 0;try{for(var s,l=i[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value;t(u)}}catch(e){r=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}var c=!0,d=!1,p=void 0;try{for(var f,h=Object.entries(e.data)[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var m=(0,z._)(f.value,2),v=m[0],g=m[1];"commands"!==g.type&&("codeEditor"!==g.type||g.data.path)&&"agentProgress"!==g.type&&"agentChat"!==g.type||(delete e.data[v],t(v))}}catch(e){d=!0,p=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw p}}})}var gz=e.i(652172),gW=e.i(149818),gH=e.i(529131),gq=e.i(716499),gK=e.i(55721),g$=e.i(478902),gY=(0,W.createContext)({});function gQ(e){var t=(0,W.useRef)(null);return null===t.current&&(t.current=e()),t.current}var gX="undefined"!=typeof window,gZ=gX?W.useLayoutEffect:W.useEffect,gJ=(0,W.createContext)(null),g0=e.i(399119),g1=e.i(445789);function g2(e){return(void 0===e?"undefined":(0,ty._)(e))==="object"&&null!==e}function g4(e){return g2(e)&&"offsetHeight"in e}var g3=(0,W.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"});function g5(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function g8(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=!1,r=t.map(function(t){var r=g5(t,e);return n||"function"!=typeof r||(n=!0),r});if(n)return function(){for(var e=0;e<r.length;e++){var n=r[e];"function"==typeof n?n():g5(t[e],null)}}}}var g6=function(e){function t(){return(0,dz._)(this,t),(0,g0._)(this,t,arguments)}return(0,g1._)(t,e),(0,dW._)(t,[{key:"getSnapshotBeforeUpdate",value:function(e){var t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){var n=t.offsetParent,r=g4(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=r-i.width-i.left}return null}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return this.props.children}}]),t}(W.Component);function g9(e){var t,n,r=e.children,i=e.isPresent,o=e.anchorX,a=e.root,s=(0,W.useId)(),l=(0,W.useRef)(null),u=(0,W.useRef)({width:0,height:0,top:0,left:0,right:0}),c=(0,W.useContext)(g3).nonce,d=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return W.useCallback(g8.apply(void 0,(0,en._)(t)),t)}(l,null!=(n=null==(t=r.props)?void 0:t.ref)?n:null==r?void 0:r.ref);return(0,W.useInsertionEffect)(function(){var e=u.current,t=e.width,n=e.height,r=e.top,d=e.left,p=e.right;if(!i&&l.current&&t&&n){l.current.dataset.motionPopId=s;var f=document.createElement("style");c&&(f.nonce=c);var h=null!=a?a:document.head;return h.appendChild(f),f.sheet&&f.sheet.insertRule('\n          [data-motion-pop-id="'.concat(s,'"] {\n            position: absolute !important;\n            width: ').concat(t,"px !important;\n            height: ").concat(n,"px !important;\n            ").concat("left"===o?"left: ".concat(d):"right: ".concat(p),"px !important;\n            top: ").concat(r,"px !important;\n          }\n        ")),function(){h.contains(f)&&h.removeChild(f)}}},[i]),(0,g$.jsx)(g6,{isPresent:i,childRef:l,sizeRef:u,children:W.cloneElement(r,{ref:d})})}var g7=function(e){var t=e.children,n=e.initial,r=e.isPresent,i=e.onExitComplete,o=e.custom,a=e.presenceAffectsLayout,s=e.mode,l=e.anchorX,u=e.root,c=gQ(xe),d=(0,W.useId)(),p=!0,f=(0,W.useMemo)(function(){return p=!1,{id:d,initial:n,isPresent:r,custom:o,onExitComplete:function(e){c.set(e,!0);var t=!0,n=!1,r=void 0;try{for(var o,a=c.values()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)if(!o.value)return}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}i&&i()},register:function(e){return c.set(e,!1),function(){return c.delete(e)}}}},[r,c,i]);return a&&p&&(f=(0,b._)({},f)),(0,W.useMemo)(function(){c.forEach(function(e,t){return c.set(t,!1)})},[r]),W.useEffect(function(){r||c.size||!i||i()},[r]),"popLayout"===s&&(t=(0,g$.jsx)(g9,{isPresent:r,anchorX:l,root:u,children:t})),(0,g$.jsx)(gJ.Provider,{value:f,children:t})};function xe(){return new Map}function xt(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,W.useContext)(gJ);if(null===t)return[!0,null];var n=t.isPresent,r=t.onExitComplete,i=t.register,o=(0,W.useId)();(0,W.useEffect)(function(){if(e)return i(o)},[e]);var a=(0,W.useCallback)(function(){return e&&r&&r(o)},[o,r,e]);return!n&&r?[!1,a]:[!0]}var xn=function(e){return e.key||""};function xr(e){var t=[];return W.Children.forEach(e,function(e){(0,W.isValidElement)(e)&&t.push(e)}),t}var xi=function(e){var t=e.children,n=e.custom,r=e.initial,i=void 0===r||r,o=e.onExitComplete,a=e.presenceAffectsLayout,s=void 0===a||a,l=e.mode,u=void 0===l?"sync":l,c=e.propagate,d=void 0!==c&&c,p=e.anchorX,f=void 0===p?"left":p,h=e.root,m=(0,z._)(xt(d),2),v=m[0],g=m[1],x=(0,W.useMemo)(function(){return xr(t)},[t]),y=d&&!v?[]:x.map(xn),b=(0,W.useRef)(!0),w=(0,W.useRef)(x),_=gQ(function(){return new Map}),j=(0,W.useRef)(new Set),S=(0,z._)((0,W.useState)(x),2),k=S[0],C=S[1],T=(0,z._)((0,W.useState)(x),2),I=T[0],P=T[1];gZ(function(){b.current=!1,w.current=x;for(var e=0;e<I.length;e++){var t=xn(I[e]);y.includes(t)?(_.delete(t),j.current.delete(t)):!0!==_.get(t)&&_.set(t,!1)}},[I,y.length,y.join("-")]);var E=[];if(x!==k){for(var R=(0,en._)(x),A=0;A<I.length;A++){var D=I[A],V=xn(D);y.includes(V)||(R.splice(A,0,D),E.push(D))}return"wait"===u&&E.length&&(R=E),P(xr(R)),C(x),null}var M=(0,W.useContext)(gY).forceRender;return(0,g$.jsx)(g$.Fragment,{children:I.map(function(e){var t=xn(e),r=(!d||!!v)&&(x===I||y.includes(t));return(0,g$.jsx)(g7,{isPresent:r,initial:(!b.current||!!i)&&void 0,custom:n,presenceAffectsLayout:s,mode:u,root:h,onExitComplete:r?void 0:function(){if(!j.current.has(t)&&(j.current.add(t),_.has(t))){_.set(t,!0);var e=!0;_.forEach(function(t){t||(e=!1)}),e&&(null==M||M(),P(w.current),d&&(null==g||g()),o&&o())}},anchorX:f,children:e},t)})})},xo=function(){function e(t){(0,dz._)(this,e),this.isMounted=!1,this.node=t}return(0,dW._)(e,[{key:"update",value:function(){}}]),e}(),xa=function(e){return e},xs=function(){return{translate:0,scale:1,origin:0,originPoint:0}},xl=function(){return{x:xs(),y:xs()}},xu=function(){return{min:0,max:0}},xc=function(){return{x:xu(),y:xu()}},xd={},xp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function xf(e,t){var n=!1,r=!0,i={delta:0,timestamp:0,isProcessing:!1},o=function(){return n=!0},a=xp.reduce(function(e,n){return e[n]=function(e,t){var n=new Set,r=new Set,i=!1,o=!1,a=new WeakSet,s={delta:0,timestamp:0,isProcessing:!1},l=0;function u(t){a.has(t)&&(c.schedule(t),e()),l++,t(s)}var c={schedule:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=o&&i?n:r;return t&&a.add(e),s.has(e)||s.add(e),e},cancel:function(e){r.delete(e),a.delete(e)},process:function(e){var a;if(s=e,i){o=!0;return}i=!0,n=(a=[r,n])[0],r=a[1],n.forEach(u),t,l=0,n.clear(),i=!1,o&&(o=!1,c.process(e))}};return c}(o,t?n:void 0),e},{}),s=a.setup,l=a.read,u=a.resolveKeyframes,c=a.preUpdate,d=a.update,p=a.preRender,f=a.render,h=a.postRender,m=function(){var o=xd.useManualTiming?i.timestamp:performance.now();n=!1,xd.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(o-i.timestamp,40),1)),i.timestamp=o,i.isProcessing=!0,s.process(i),l.process(i),u.process(i),c.process(i),d.process(i),p.process(i),f.process(i),h.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))},v=function(){n=!0,r=!0,i.isProcessing||e(m)};return{schedule:xp.reduce(function(e,t){var r=a[t];return e[t]=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||v(),r.schedule(e,t,i)},e},{}),cancel:function(e){for(var t=0;t<xp.length;t++)a[xp[t]].cancel(e)},state:i,steps:a}}var xh=xf("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:xa,!0),xm=xh.schedule,xv=xh.cancel,xg=xh.state,xx=xh.steps;function xy(e){return[e("x"),e("y")]}function xb(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}var xw=function(e,t,n){return e+(t-e)*n};function x_(e){return void 0===e||1===e}function xj(e){var t=e.scale,n=e.scaleX,r=e.scaleY;return!x_(t)||!x_(n)||!x_(r)}function xS(e){return xj(e)||xk(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function xk(e){var t,n;return(t=e.x)&&"0%"!==t||(n=e.y)&&"0%"!==n}function xC(e,t,n,r,i){return void 0!==i&&(e=r+i*(e-r)),r+n*(e-r)+t}function xT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=xC(e.min,t,n,r,i),e.max=xC(e.max,t,n,r,i)}function xI(e,t){var n=t.x,r=t.y;xT(e.x,n.translate,n.scale,n.originPoint),xT(e.y,r.translate,r.scale,r.originPoint)}function xP(e,t){e.min=e.min+t,e.max=e.max+t}function xE(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=xw(e.min,e.max,i);xT(e,t,n,o,r)}function xR(e,t){xE(e.x,t.x,t.scaleX,t.scale,t.originX),xE(e.y,t.y,t.scaleY,t.scale,t.originY)}function xA(e,t){return xb(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}var xD=function(e){return!!(e&&e.getVelocity)};function xV(e,t){var n=e.getValue("willChange");if(xD(n)&&n.add)return n.add(t);if(!n&&xd.WillChange){var r=new xd.WillChange("auto");e.addValue("willChange",r),r.add(t)}}var xM=function(e){return 1e3*e},xF=function(e){return e/1e3};function xO(){v=void 0}var xL={now:function(){return void 0===v&&xL.set(xg.isProcessing||xd.useManualTiming?xg.timestamp:performance.now()),v},set:function(e){v=e,queueMicrotask(xO)}},xB=function(e,t){return function(n){return t(e(n))}},xU=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(xB)},xN=function(e,t,n){return n>t?t:n<e?e:n},xG={layout:0,mainThread:0,waapi:0};function xz(e,t){return t?"".concat(e,". For more information and steps for solving, visit https://motion.dev/troubleshooting/").concat(t):e}var xW=function(){},xH=function(){};void 0!==ny.default&&(null==(g=ny.default.env)?void 0:g.NODE_ENV)!=="production"&&(xW=function(e,t,n){e||"undefined"==typeof console||console.warn(xz(t,n))},xH=function(e,t,n){if(!e)throw Error(xz(t,n))});var xq=function(e){return function(t){return"string"==typeof t&&t.startsWith(e)}},xK=xq("--"),x$=xq("var(--"),xY=function(e){return!!x$(e)&&xQ.test(e.split("/*")[0].trim())},xQ=RegExp("var\\(--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)$","iu");function xX(e){return"string"==typeof e&&e.split("/*")[0].includes("var(--")}var xZ={test:function(e){return"number"==typeof e},parse:parseFloat,transform:function(e){return e}},xJ=(0,td._)((0,b._)({},xZ),{transform:function(e){return xN(0,1,e)}}),x0=(0,td._)((0,b._)({},xZ),{default:1}),x1=function(e){return Math.round(1e5*e)/1e5},x2=RegExp("-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)","gu"),x4=RegExp("^(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))$","iu"),x3=function(e,t){return function(n){return!!("string"==typeof n&&x4.test(n)&&n.startsWith(e)||t&&null!=n&&Object.prototype.hasOwnProperty.call(n,t))}},x5=function(e,t,n){return function(r){if("string"!=typeof r)return r;var i,o=(0,z._)(r.match(x2),4),a=o[0],s=o[1],l=o[2],u=o[3];return i={},(0,R._)(i,e,parseFloat(a)),(0,R._)(i,t,parseFloat(s)),(0,R._)(i,n,parseFloat(l)),(0,R._)(i,"alpha",void 0!==u?parseFloat(u):1),i}},x8=(0,td._)((0,b._)({},xZ),{transform:function(e){return Math.round(xN(0,255,e))}}),x6={test:x3("rgb","red"),parse:x5("red","green","blue"),transform:function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha;return"rgba("+x8.transform(t)+", "+x8.transform(n)+", "+x8.transform(r)+", "+x1(xJ.transform(void 0===i?1:i))+")"}},x9={test:x3("#"),parse:function(e){var t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:x6.transform},x7=function(e){return{test:function(t){return"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return"".concat(t).concat(e)}}},ye=x7("deg"),yt=x7("%"),yn=x7("px"),yr=x7("vh"),yi=x7("vw"),yo=(0,td._)((0,b._)({},yt),{parse:function(e){return yt.parse(e)/100},transform:function(e){return yt.transform(100*e)}}),ya={test:x3("hsl","hue"),parse:x5("hue","saturation","lightness"),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha;return"hsla("+Math.round(t)+", "+yt.transform(x1(n))+", "+yt.transform(x1(r))+", "+x1(xJ.transform(void 0===i?1:i))+")"}},ys={test:function(e){return x6.test(e)||x9.test(e)||ya.test(e)},parse:function(e){return x6.test(e)?x6.parse(e):ya.test(e)?ya.parse(e):x9.parse(e)},transform:function(e){return"string"==typeof e?e:e.hasOwnProperty("red")?x6.transform(e):ya.transform(e)},getAnimatableNone:function(e){var t=ys.parse(e);return t.alpha=0,ys.transform(t)}},yl=RegExp("(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))","giu"),yu="number",yc="color",yd=RegExp("var\\s*\\(\\s*--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)|#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\)|-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)","giu");function yp(e){var t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[],o=0,a=t.replace(yd,function(e){return ys.test(e)?(r.color.push(o),i.push(yc),n.push(ys.parse(e))):e.startsWith("var(")?(r.var.push(o),i.push("var"),n.push(e)):(r.number.push(o),i.push(yu),n.push(parseFloat(e))),++o,"${}"}).split("${}");return{values:n,split:a,indexes:r,types:i}}function yf(e){return yp(e).values}function yh(e){var t=yp(e),n=t.split,r=t.types,i=n.length;return function(e){for(var t="",o=0;o<i;o++)if(t+=n[o],void 0!==e[o]){var a=r[o];a===yu?t+=x1(e[o]):a===yc?t+=ys.transform(e[o]):t+=e[o]}return t}}var ym=function(e){return"number"==typeof e?0:ys.test(e)?ys.getAnimatableNone(e):e},yv={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match(x2))?void 0:t.length)||0)+((null==(n=e.match(yl))?void 0:n.length)||0)>0},parse:yf,createTransformer:yh,getAnimatableNone:function(e){var t=yf(e);return yh(e)(t.map(ym))}};function yg(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function yx(e,t){return function(n){return n>0?t:e}}var yy=function(e,t,n){var r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},yb=[x9,x6,ya];function yw(e){var t=yb.find(function(t){return t.test(e)});if(xW(!!t,"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),"color-not-animatable"),!t)return!1;var n=t.parse(e);return t===ya&&(n=function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha;t/=360,r/=100;var o=0,a=0,s=0;if(n/=100){var l=r<.5?r*(1+n):r+n-r*n,u=2*r-l;o=yg(u,l,t+1/3),a=yg(u,l,t),s=yg(u,l,t-1/3)}else o=a=s=r;return{red:Math.round(255*o),green:Math.round(255*a),blue:Math.round(255*s),alpha:i}}(n)),n}var y_=function(e,t){var n=yw(e),r=yw(t);if(!n||!r)return yx(e,t);var i=(0,b._)({},n);return function(e){return i.red=yy(n.red,r.red,e),i.green=yy(n.green,r.green,e),i.blue=yy(n.blue,r.blue,e),i.alpha=xw(n.alpha,r.alpha,e),x6.transform(i)}},yj=new Set(["none","hidden"]);function yS(e,t){return function(n){return xw(e,t,n)}}function yk(e){return"number"==typeof e?yS:"string"==typeof e?xY(e)?yx:ys.test(e)?y_:yI:Array.isArray(e)?yC:(void 0===e?"undefined":(0,ty._)(e))==="object"?ys.test(e)?y_:yT:yx}function yC(e,t){var n=(0,en._)(e),r=n.length,i=e.map(function(e,n){return yk(e)(e,t[n])});return function(e){for(var t=0;t<r;t++)n[t]=i[t](e);return n}}function yT(e,t){var n=(0,b._)({},e,t),r={};for(var i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=yk(e[i])(e[i],t[i]));return function(e){for(var t in r)n[t]=r[t](e);return n}}var yI=function(e,t){var n=yv.createTransformer(t),r=yp(e),i=yp(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?yj.has(e)&&!i.values.length||yj.has(t)&&!r.values.length?yj.has(e)?function(n){return n<=0?e:t}:function(n){return n>=1?t:e}:xU(yC(function(e,t){for(var n=[],r={color:0,var:0,number:0},i=0;i<t.values.length;i++){var o,a=t.types[i],s=e.indexes[a][r[a]],l=null!=(o=e.values[s])?o:0;n[i]=l,r[a]++}return n}(r,i),i.values),n):(xW(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),"complex-values-different"),yx(e,t))};function yP(e,t,n){return"number"==typeof e&&"number"==typeof t&&"number"==typeof n?xw(e,t,n):yk(e)(e,t)}var yE=function(e){var t=function(t){return e(t.timestamp)};return{start:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return xm.update(t,e)},stop:function(){return xv(t)},now:function(){return xg.isProcessing?xg.timestamp:xL.now()}}},yR=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="",i=Math.max(Math.round(t/n),2),o=0;o<i;o++)r+=Math.round(1e4*e(o/(i-1)))/1e4+", ";return"linear(".concat(r.substring(0,r.length-2),")")};function yA(e){for(var t=0,n=e.next(t);!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}function yD(e,t,n){var r,i,o=Math.max(t-5,0);return r=n-e(o),(i=t-o)?1e3/i*r:0}var yV=.01,yM=2,yF=.005,yO=.5;function yL(e,t){return e*Math.sqrt(1-t*t)}var yB=["duration","bounce"],yU=["stiffness","damping","mass"];function yN(e,t){return t.some(function(t){return void 0!==e[t]})}function yG(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,r=(void 0===t?"undefined":(0,ty._)(t))!=="object"?{visualDuration:t,keyframes:[0,1],bounce:n}:t,i=r.restSpeed,o=r.restDelta,a=r.keyframes[0],s=r.keyframes[r.keyframes.length-1],l={done:!1,value:a},u=function(e){var t=(0,b._)({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!yN(e,yU)&&yN(e,yB))if(e.visualDuration){var n=2*Math.PI/(1.2*e.visualDuration),r=n*n,i=2*xN(.05,1,1-(e.bounce||0))*Math.sqrt(r);t=(0,td._)((0,b._)({},t),{mass:1,stiffness:r,damping:i})}else{var o=function(e){var t,n,r=e.duration,i=void 0===r?800:r,o=e.bounce,a=e.velocity,s=void 0===a?0:a,l=e.mass,u=void 0===l?1:l;xW(i<=xM(10),"Spring duration must be 10 seconds or less","spring-duration-limit");var c=1-(void 0===o?.3:o);c=xN(.05,1,c),i=xN(.01,10,xF(i)),c<1?(t=function(e){var t=e*c,n=t*i;return .001-(t-s)/yL(e,c)*Math.exp(-n)},n=function(e){var n=e*c*i,r=Math.pow(c,2)*Math.pow(e,2)*i,o=Math.exp(-n),a=yL(Math.pow(e,2),c);return(n*s+s-r)*o*(-t(e)+.001>0?-1:1)/a}):(t=function(e){return -.001+Math.exp(-e*i)*((e-s)*i+1)},n=function(e){return i*i*(s-e)*Math.exp(-e*i)});var d=function(e,t,n){for(var r=n,i=1;i<12;i++)r-=e(r)/t(r);return r}(t,n,5/i);if(i=xM(i),isNaN(d))return{stiffness:100,damping:10,duration:i};var p=Math.pow(d,2)*u;return{stiffness:p,damping:2*c*Math.sqrt(u*p),duration:i}}(e);(t=(0,td._)((0,b._)({},t,o),{mass:1})).isResolvedFromDuration=!0}return t}((0,td._)((0,b._)({},r),{velocity:-xF(r.velocity||0)})),c=u.stiffness,d=u.damping,p=u.mass,f=u.duration,h=u.velocity,m=u.isResolvedFromDuration,v=h||0,g=d/(2*Math.sqrt(c*p)),x=s-a,y=xF(Math.sqrt(c/p)),w=5>Math.abs(x);if(i||(i=w?yV:yM),o||(o=w?yF:yO),g<1){var _=yL(y,g);e=function(e){return s-Math.exp(-g*y*e)*((v+g*y*x)/_*Math.sin(_*e)+x*Math.cos(_*e))}}else if(1===g)e=function(e){return s-Math.exp(-y*e)*(x+(v+y*x)*e)};else{var j=y*Math.sqrt(g*g-1);e=function(e){var t=Math.exp(-g*y*e),n=Math.min(j*e,300);return s-t*((v+g*y*x)*Math.sinh(n)+j*x*Math.cosh(n))/j}}var S={calculatedDuration:m&&f||null,next:function(t){var n=e(t);if(m)l.done=t>=f;else{var r=0===t?v:0;g<1&&(r=0===t?xM(v):yD(e,t,n));var a=Math.abs(s-n)<=o;l.done=Math.abs(r)<=i&&a}return l.value=l.done?s:n,l},toString:function(){var e=Math.min(yA(S),2e4),t=yR(function(t){return S.next(e*t).value},e,30);return e+"ms "+t},toTransition:function(){}};return S}function yz(e){var t,n,r=e.keyframes,i=e.velocity,o=e.power,a=e.timeConstant,s=void 0===a?325:a,l=e.bounceDamping,u=void 0===l?10:l,c=e.bounceStiffness,d=void 0===c?500:c,p=e.modifyTarget,f=e.min,h=e.max,m=e.restDelta,v=void 0===m?.5:m,g=e.restSpeed,x=r[0],y={done:!1,value:x},b=(void 0===o?.8:o)*(void 0===i?0:i),w=x+b,_=void 0===p?w:p(w);_!==w&&(b=_-x);var j=function(e){return-b*Math.exp(-e/s)},S=function(e){return _+j(e)},k=function(e){var t=j(e),n=S(e);y.done=Math.abs(t)<=v,y.value=y.done?_:n},C=function(e){var r,i;r=y.value,(void 0!==f&&r<f||void 0!==h&&r>h)&&(t=e,n=yG({keyframes:[y.value,(i=y.value,void 0===f?h:void 0===h||Math.abs(f-i)<Math.abs(h-i)?f:h)],velocity:yD(S,e,y.value),damping:u,stiffness:d,restDelta:v,restSpeed:g}))};return C(0),{calculatedDuration:null,next:function(e){var r=!1;return(n||void 0!==t||(r=!0,k(e),C(e)),void 0!==t&&e>=t)?n.next(e-t):(r||k(e),y)}}}yG.applyToOptions=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2?arguments[2]:void 0,r=n((0,td._)((0,b._)({},e),{keyframes:[0,t]})),i=Math.min(yA(r),2e4);return{type:"keyframes",ease:function(e){return r.next(i*e).value/t},duration:xF(i)}}(e,100,yG);return e.ease=t.ease,e.duration=xM(t.duration),e.type="keyframes",e};var yW=function(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e};function yH(e,t,n,r){if(e===t&&n===r)return xa;var i=function(t){var r,i,o=0,a=1,s=0;do(r=yW(i=o+(a-o)/2,e,n)-t)>0?a=i:o=i;while(Math.abs(r)>1e-7&&++s<12)return i};return function(e){return 0===e||1===e?e:yW(i(e),t,r)}}var yq=yH(.42,0,1,1),yK=yH(0,0,.58,1),y$=yH(.42,0,.58,1),yY=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},yQ=function(e){return function(t){return 1-e(1-t)}},yX=yH(.33,1.53,.69,.99),yZ=yQ(yX),yJ=yY(yZ),y0=function(e){return(e*=2)<1?.5*yZ(e):.5*(2-Math.pow(2,-10*(e-1)))},y1=function(e){return 1-Math.sin(Math.acos(e))},y2=yQ(y1),y4=yY(y1),y3=function(e){return Array.isArray(e)&&"number"==typeof e[0]},y5={linear:xa,easeIn:yq,easeInOut:y$,easeOut:yK,circIn:y1,circInOut:y4,circOut:y2,backIn:yZ,backInOut:yJ,backOut:yX,anticipate:y0},y8=function(e){if(y3(e)){xH(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");var t=(0,z._)(e,4);return yH(t[0],t[1],t[2],t[3])}return"string"==typeof e?(xH(void 0!==y5[e],"Invalid easing type '".concat(e,"'"),"invalid-easing-type"),y5[e]):e},y6=function(e,t,n){var r=t-e;return 0===r?1:(n-e)/r};function y9(e){var t,n,r=e.duration,i=void 0===r?300:r,o=e.keyframes,a=e.times,s=e.ease,l=void 0===s?"easeInOut":s,u=Array.isArray(l)&&"number"!=typeof l[0]?l.map(y8):y8(l),c={done:!1,value:o[0]},d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.clamp,i=n.ease,o=n.mixer,a=e.length;if(xH(a===t.length,"Both input and output ranges must be the same length","range-length"),1===a)return function(){return t[0]};if(2===a&&t[0]===t[1])return function(){return t[1]};var s=e[0]===e[1];e[0]>e[a-1]&&(e=(0,en._)(e).reverse(),t=(0,en._)(t).reverse());var l=function(e,t,n){for(var r=[],i=n||xd.mix||yP,o=e.length-1,a=0;a<o;a++){var s=i(e[a],e[a+1]);t&&(s=xU(Array.isArray(t)?t[a]||xa:t,s)),r.push(s)}return r}(t,i,o),u=l.length,c=function(n){if(s&&n<e[0])return t[0];var r=0;if(u>1)for(;r<e.length-2&&!(n<e[r+1]);r++);var i=y6(e[r],e[r+1],n);return l[r](i)};return void 0===r||r?function(t){return c(xN(e[0],e[a-1],t))}:c}((n=a&&a.length===o.length?a:(!function(e,t){for(var n=e[e.length-1],r=1;r<=t;r++){var i=y6(0,t,r);e.push(xw(n,1,i))}}(t=[0],o.length-1),t),n.map(function(e){return e*i})),o,{ease:Array.isArray(u)?u:o.map(function(){return u||y$}).splice(0,o.length-1)});return{calculatedDuration:i,next:function(e){return c.value=d(e),c.done=e>=i,c}}}var y7=function(e){return null!==e};function be(e,t,n){var r=t.repeat,i=t.repeatType,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=e.filter(y7),s=o<0||r&&"loop"!==(void 0===i?"loop":i)&&r%2==1?0:a.length-1;return s&&void 0!==n?n:a[s]}var bt={decay:yz,inertia:yz,tween:y9,keyframes:y9,spring:yG};function bn(e){"string"==typeof e.type&&(e.type=bt[e.type])}var br=function(){function e(){(0,dz._)(this,e),this.updateFinished()}return(0,dW._)(e,[{key:"finished",get:function(){return this._finished}},{key:"updateFinished",value:function(){var e=this;this._finished=new Promise(function(t){e.resolve=t})}},{key:"notifyFinished",value:function(){this.resolve()}},{key:"then",value:function(e,t){return this.finished.then(e,t)}}]),e}(),bi=function(e){return e/100},bo=function(e){function t(e){var n;return(0,dz._)(this,t),(n=(0,g0._)(this,t)).state="idle",n.startTime=null,n.isStopped=!1,n.currentTime=0,n.holdTime=null,n.playbackSpeed=1,n.stop=function(){var e,t,r=n.options.motionValue;r&&r.updatedAt!==xL.now()&&n.tick(xL.now()),n.isStopped=!0,"idle"!==n.state&&(n.teardown(),null==(e=(t=n.options).onStop)||e.call(t))},xG.mainThread++,n.options=e,n.initAnimation(),n.play(),!1===e.autoplay&&n.pause(),n}return(0,g1._)(t,e),(0,dW._)(t,[{key:"initAnimation",value:function(){var e=this.options;bn(e);var t=e.type,n=e.repeat,r=e.repeatDelay,i=void 0===r?0:r,o=e.repeatType,a=e.velocity,s=e.keyframes,l=(void 0===t?y9:t)||y9;l!==y9&&"number"!=typeof s[0]&&(this.mixKeyframes=xU(bi,yP(s[0],s[1])),s=[0,100]);var u=l((0,td._)((0,b._)({},e),{keyframes:s}));"mirror"===o&&(this.mirroredGenerator=l((0,td._)((0,b._)({},e),{keyframes:(0,en._)(s).reverse(),velocity:-(void 0===a?0:a)}))),null===u.calculatedDuration&&(u.calculatedDuration=yA(u));var c=u.calculatedDuration;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*((void 0===n?0:n)+1)-i,this.generator=u}},{key:"updateTime",value:function(e){var t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}},{key:"tick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.generator,r=this.totalDuration,i=this.mixKeyframes,o=this.mirroredGenerator,a=this.resolvedDuration,s=this.calculatedDuration;if(null===this.startTime)return n.next(0);var l=this.options,u=l.delay,c=l.keyframes,d=l.repeat,p=l.repeatType,f=l.repeatDelay,h=l.type,m=l.onUpdate,v=l.finalKeyframe;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);var g=this.currentTime-(void 0===u?0:u)*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);var y=this.currentTime,b=n;if(d){var w=Math.min(this.currentTime,r)/a,_=Math.floor(w),j=w%1;!j&&w>=1&&(j=1),1===j&&_--,(_=Math.min(_,d+1))%2&&("reverse"===p?(j=1-j,f&&(j-=f/a)):"mirror"===p&&(b=o)),y=xN(0,1,j)*a}var S=x?{done:!1,value:c[0]}:b.next(y);i&&(S.value=i(S.value));var k=S.done;x||null===s||(k=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);var C=null===this.holdTime&&("finished"===this.state||"running"===this.state&&k);return C&&h!==yz&&(S.value=be(c,this.options,v,this.speed)),m&&m(S.value),C&&this.finish(),S}},{key:"then",value:function(e,t){return this.finished.then(e,t)}},{key:"duration",get:function(){return xF(this.calculatedDuration)}},{key:"iterationDuration",get:function(){var e=(this.options||{}).delay;return this.duration+xF(void 0===e?0:e)}},{key:"time",get:function(){return xF(this.currentTime)},set:function(e){var t;e=xM(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null==(t=this.driver)||t.start(!1)}},{key:"speed",get:function(){return this.playbackSpeed},set:function(e){this.updateTime(xL.now());var t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=xF(this.currentTime))}},{key:"play",value:function(){var e,t,n=this;if(!this.isStopped){var r=this.options,i=r.driver,o=r.startTime;this.driver||(this.driver=(void 0===i?yE:i)(function(e){return n.tick(e)})),null==(e=(t=this.options).onPlay)||e.call(t);var a=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=a):null!==this.holdTime?this.startTime=a-this.holdTime:this.startTime||(this.startTime=null!=o?o:a),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}}},{key:"pause",value:function(){this.state="paused",this.updateTime(xL.now()),this.holdTime=this.currentTime}},{key:"complete",value:function(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}},{key:"finish",value:function(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null==(e=(t=this.options).onComplete)||e.call(t)}},{key:"cancel",value:function(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null==(e=(t=this.options).onCancel)||e.call(t)}},{key:"teardown",value:function(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,xG.mainThread--}},{key:"stopDriver",value:function(){this.driver&&(this.driver.stop(),this.driver=void 0)}},{key:"sample",value:function(e){return this.startTime=0,this.tick(e,!0)}},{key:"attachTimeline",value:function(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null==(t=this.driver)||t.stop(),e.observe(this)}}]),t}(br),ba=function(e){return 180*e/Math.PI},bs=function(e){return bu(ba(Math.atan2(e[1],e[0])))},bl={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:function(e){return(Math.abs(e[0])+Math.abs(e[3]))/2},rotate:bs,rotateZ:bs,skewX:function(e){return ba(Math.atan(e[1]))},skewY:function(e){return ba(Math.atan(e[2]))},skew:function(e){return(Math.abs(e[1])+Math.abs(e[2]))/2}},bu=function(e){return(e%=360)<0&&(e+=360),e},bc=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},bd=function(e){return Math.sqrt(e[4]*e[4]+e[5]*e[5])},bp={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:bc,scaleY:bd,scale:function(e){return(bc(e)+bd(e))/2},rotateX:function(e){return bu(ba(Math.atan2(e[6],e[5])))},rotateY:function(e){return bu(ba(Math.atan2(-e[2],e[0])))},rotateZ:bs,rotate:bs,skewX:function(e){return ba(Math.atan(e[4]))},skewY:function(e){return ba(Math.atan(e[1]))},skew:function(e){return(Math.abs(e[1])+Math.abs(e[4]))/2}};function bf(e){return+!!e.includes("scale")}function bh(e,t){if(!e||"none"===e)return bf(t);var n,r,i=e.match(RegExp("^matrix3d\\(([-\\d.e\\s,]+)\\)$","u"));if(i)n=bp,r=i;else{var o=e.match(RegExp("^matrix\\(([-\\d.e\\s,]+)\\)$","u"));n=bl,r=o}if(!r)return bf(t);var a=n[t],s=r[1].split(",").map(bv);return"function"==typeof a?a(s):s[a]}var bm=function(e,t){var n=getComputedStyle(e).transform;return bh(void 0===n?"none":n,t)};function bv(e){return parseFloat(e.trim())}var bg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bx=new Set(bg),by=function(e){return e===xZ||e===yn},bb=new Set(["x","y","z"]),bw=bg.filter(function(e){return!bb.has(e)}),b_={width:function(e,t){var n=e.x,r=t.paddingLeft,i=t.paddingRight;return n.max-n.min-parseFloat(void 0===r?"0":r)-parseFloat(void 0===i?"0":i)},height:function(e,t){var n=e.y,r=t.paddingTop,i=t.paddingBottom;return n.max-n.min-parseFloat(void 0===r?"0":r)-parseFloat(void 0===i?"0":i)},top:function(e,t){return parseFloat(t.top)},left:function(e,t){return parseFloat(t.left)},bottom:function(e,t){var n=e.y;return parseFloat(t.top)+(n.max-n.min)},right:function(e,t){var n=e.x;return parseFloat(t.left)+(n.max-n.min)},x:function(e,t){return bh(t.transform,"x")},y:function(e,t){return bh(t.transform,"y")}};b_.translateX=b_.x,b_.translateY=b_.y;var bj=new Set,bS=!1,bk=!1,bC=!1;function bT(){if(bk){var e=Array.from(bj).filter(function(e){return e.needsMeasurement}),t=new Set(e.map(function(e){return e.element})),n=new Map;t.forEach(function(e){var t,r=(t=[],bw.forEach(function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(+!!n.startsWith("scale")))}),t);r.length&&(n.set(e,r),e.render())}),e.forEach(function(e){return e.measureInitialState()}),t.forEach(function(e){e.render();var t=n.get(e);t&&t.forEach(function(t){var n,r=(0,z._)(t,2),i=r[0],o=r[1];null==(n=e.getValue(i))||n.set(o)})}),e.forEach(function(e){return e.measureEndState()}),e.forEach(function(e){void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}bk=!1,bS=!1,bj.forEach(function(e){return e.complete(bC)}),bj.clear()}function bI(){bj.forEach(function(e){e.readKeyframes(),e.needsMeasurement&&(bk=!0)})}var bP=function(){function e(t,n,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];(0,dz._)(this,e),this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=(0,en._)(t),this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=a}return(0,dW._)(e,[{key:"scheduleResolve",value:function(){this.state="scheduled",this.isAsync?(bj.add(this),bS||(bS=!0,xm.read(bI),xm.resolveKeyframes(bT))):(this.readKeyframes(),this.complete())}},{key:"readKeyframes",value:function(){var e=this.unresolvedKeyframes,t=this.name,n=this.element,r=this.motionValue;if(null===e[0]){var i=null==r?void 0:r.get(),o=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){var a=n.readValue(t,o);null!=a&&(e[0]=a)}void 0===e[0]&&(e[0]=o),r&&void 0===i&&r.set(e[0])}for(var s,l=1;l<e.length;l++)null!=e[l]||(e[l]=e[l-1])}},{key:"setFinalKeyframe",value:function(){}},{key:"measureInitialState",value:function(){}},{key:"renderEndStyles",value:function(){}},{key:"measureEndState",value:function(){}},{key:"complete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),bj.delete(this)}},{key:"cancel",value:function(){"scheduled"===this.state&&(bj.delete(this),this.state="pending")}},{key:"resume",value:function(){"pending"===this.state&&this.scheduleResolve()}}]),e}(),bE=e.i(122799);function bR(e){var t;return function(){return void 0===t&&(t=e()),t}}var bA=bR(function(){return void 0!==window.ScrollTimeline}),bD={},bV=(p=bR(function(){try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),function(){var e;return null!=(e=bD.linearEasing)?e:p()}),bM=function(e){var t=(0,z._)(e,4),n=t[0],r=t[1],i=t[2],o=t[3];return"cubic-bezier(".concat(n,", ").concat(r,", ").concat(i,", ").concat(o,")")},bF={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bM([0,.65,.55,1]),circOut:bM([.55,0,1,.45]),backIn:bM([.31,.01,.66,-.59]),backOut:bM([.33,1.53,.69,.99])};function bO(e){return"function"==typeof e&&"applyToOptions"in e}var bL=function(e){function t(e){if((0,dz._)(this,t),(i=(0,g0._)(this,t)).finishedTime=null,i.isStopped=!1,i.manualStartTime=null,!e)return(0,bE._)(i);var n,r,i,o=e.element,a=e.name,s=e.keyframes,l=e.pseudoElement,u=e.allowFlatten,c=e.finalKeyframe,d=e.onComplete;i.isPseudoElement=!!l,i.allowFlatten=void 0!==u&&u,i.options=e,xH("string"!=typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");var p=(n=e.type,r=(0,iz._)(e,["type"]),bO(n)&&bV()?n.applyToOptions(r):(null!=r.duration||(r.duration=300),null!=r.ease||(r.ease="easeOut"),r));return i.animation=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.delay,o=r.duration,a=void 0===o?300:o,s=r.repeat,l=r.repeatType,u=r.ease,c=r.times,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,p=(0,R._)({},t,n);c&&(p.offset=c);var f=function e(t,n){if(t)return"function"==typeof t?bV()?yR(t,n):"ease-out":y3(t)?bM(t):Array.isArray(t)?t.map(function(t){return e(t,n)||bF.easeOut}):bF[t]}(void 0===u?"easeOut":u,a);Array.isArray(f)&&(p.easing=f);var h={delay:void 0===i?0:i,duration:a,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:(void 0===s?0:s)+1,direction:"reverse"===(void 0===l?"loop":l)?"alternate":"normal"};d&&(h.pseudoElement=d);var m=e.animate(p,h);return m}(o,a,s,p,l),!1===p.autoplay&&i.animation.pause(),i.animation.onfinish=function(){if(i.finishedTime=i.time,!l){var e=be(s,i.options,c,i.speed);i.updateMotionValue?i.updateMotionValue(e):a.startsWith("--")?o.style.setProperty(a,e):o.style[a]=e,i.animation.cancel()}null==d||d(),i.notifyFinished()},i}return(0,g1._)(t,e),(0,dW._)(t,[{key:"play",value:function(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}},{key:"pause",value:function(){this.animation.pause()}},{key:"complete",value:function(){var e,t;null==(e=(t=this.animation).finish)||e.call(t)}},{key:"cancel",value:function(){try{this.animation.cancel()}catch(e){}}},{key:"stop",value:function(){if(!this.isStopped){this.isStopped=!0;var e=this.state;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}}},{key:"commitStyles",value:function(){if(!this.isPseudoElement){var e,t;null==(e=(t=this.animation).commitStyles)||e.call(t)}}},{key:"duration",get:function(){var e,t;return xF(Number((null==(t=this.animation.effect)||null==(e=t.getComputedTiming)?void 0:e.call(t).duration)||0))}},{key:"iterationDuration",get:function(){var e=(this.options||{}).delay;return this.duration+xF(void 0===e?0:e)}},{key:"time",get:function(){return xF(Number(this.animation.currentTime)||0)},set:function(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=xM(e)}},{key:"speed",get:function(){return this.animation.playbackRate},set:function(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}},{key:"state",get:function(){return null!==this.finishedTime?"finished":this.animation.playState}},{key:"startTime",get:function(){var e;return null!=(e=this.manualStartTime)?e:Number(this.animation.startTime)},set:function(e){this.manualStartTime=this.animation.startTime=e}},{key:"attachTimeline",value:function(e){var t,n=e.timeline,r=e.observe;return(this.allowFlatten&&(null==(t=this.animation.effect)||t.updateTiming({easing:"linear"})),this.animation.onfinish=null,n&&bA())?(this.animation.timeline=n,xa):r(this)}}]),t}(br),bB={anticipate:y0,backInOut:yJ,circInOut:y4},bU=function(e){function t(e){var n;return(0,dz._)(this,t),"string"==typeof e.ease&&e.ease in bB&&(e.ease=bB[e.ease]),bn(e),n=(0,g0._)(this,t,[e]),void 0!==e.startTime&&(n.startTime=e.startTime),n.options=e,n}return(0,g1._)(t,e),(0,dW._)(t,[{key:"updateMotionValue",value:function(e){var t=this.options,n=t.motionValue,r=(t.onUpdate,t.onComplete,t.element,(0,iz._)(t,["motionValue","onUpdate","onComplete","element"]));if(n){if(void 0!==e)return void n.set(e);var i=new bo((0,td._)((0,b._)({},r),{autoplay:!1})),o=Math.max(10,xL.now()-this.startTime),a=xN(0,10,o-10);n.setWithVelocity(i.sample(Math.max(0,o-a)).value,i.sample(o).value,a),i.stop()}}}]),t}(bL),bN=function(e,t){return"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(yv.test(e)||"0"===e)&&!e.startsWith("url("))};function bG(e){e.duration=0,e.type="keyframes"}var bz=new Set(["opacity","clipPath","filter","transform"]),bW=bR(function(){return Object.hasOwnProperty.call(Element.prototype,"animate")}),bH=function(e){function t(e){(0,dz._)(this,t);var n,r,i=e.autoplay,o=e.delay,a=e.type,s=e.repeat,l=e.repeatDelay,u=e.repeatType,c=e.keyframes,d=e.name,p=e.motionValue,f=e.element,h=(0,iz._)(e,["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"]);(n=(0,g0._)(this,t)).stop=function(){var e,t;n._animation&&(n._animation.stop(),null==(t=n.stopTimeline)||t.call(n)),null==(e=n.keyframeResolver)||e.cancel()},n.createdAt=xL.now();var m=(0,b._)({autoplay:void 0===i||i,delay:void 0===o?0:o,type:void 0===a?"keyframes":a,repeat:void 0===s?0:s,repeatDelay:void 0===l?0:l,repeatType:void 0===u?"loop":u,name:d,motionValue:p,element:f},h);return n.keyframeResolver=new((null==f?void 0:f.KeyframeResolver)||bP)(c,function(e,t,r){return n.onKeyframesResolved(e,t,m,!r)},d,p,f),null==(r=n.keyframeResolver)||r.scheduleResolve(),n}return(0,g1._)(t,e),(0,dW._)(t,[{key:"onKeyframesResolved",value:function(e,t,n,r){var i=this;this.keyframeResolver=void 0;var o=n.name,a=n.type,s=n.velocity,l=n.delay,u=n.isHandoff,c=n.onUpdate;this.resolvedAt=xL.now(),!function(e,t,n,r){var i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;var o=e[e.length-1],a=bN(i,t),s=bN(o,t);return xW(a===s,"You are trying to animate ".concat(t,' from "').concat(i,'" to "').concat(o,'". "').concat(a?o:i,'" is not an animatable value.'),"value-not-animatable"),!!a&&!!s&&(function(e){var t=e[0];if(1===e.length)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||bO(n))&&r)}(e,o,a,s)&&((xd.instantAnimations||!l)&&(null==c||c(be(e,n,t))),e[0]=e[e.length-1],bG(n),n.repeat=0);var d=r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,p=(0,td._)((0,b._)({startTime:d,finalKeyframe:t},n),{keyframes:e}),f=!u&&function(e){var t,n=e.motionValue,r=e.name,i=e.repeatDelay,o=e.repeatType,a=e.damping,s=e.type,l=null==n||null==(t=n.owner)?void 0:t.current;if(!(0,tx._)(l,HTMLElement))return!1;var u=n.owner.getProps(),c=u.onUpdate,d=u.transformTemplate;return bW()&&r&&bz.has(r)&&("transform"!==r||!d)&&!c&&!i&&"mirror"!==o&&0!==a&&"inertia"!==s}(p)?new bU((0,td._)((0,b._)({},p),{element:p.motionValue.owner.current})):new bo(p);f.finished.then(function(){return i.notifyFinished()}).catch(xa),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}},{key:"finished",get:function(){return this._animation?this.animation.finished:this._finished}},{key:"then",value:function(e,t){return this.finished.finally(e).then(function(){})}},{key:"animation",get:function(){if(!this._animation){var e;null==(e=this.keyframeResolver)||e.resume(),bC=!0,bI(),bT(),bC=!1}return this._animation}},{key:"duration",get:function(){return this.animation.duration}},{key:"iterationDuration",get:function(){return this.animation.iterationDuration}},{key:"time",get:function(){return this.animation.time},set:function(e){this.animation.time=e}},{key:"speed",get:function(){return this.animation.speed},set:function(e){this.animation.speed=e}},{key:"state",get:function(){return this.animation.state}},{key:"startTime",get:function(){return this.animation.startTime}},{key:"attachTimeline",value:function(e){var t=this;return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,function(){return t.stop()}}},{key:"play",value:function(){this.animation.play()}},{key:"pause",value:function(){this.animation.pause()}},{key:"complete",value:function(){this.animation.complete()}},{key:"cancel",value:function(){var e;this._animation&&this.animation.cancel(),null==(e=this.keyframeResolver)||e.cancel()}}]),t}(br);function bq(e,t){var n,r;return null!=(r=null!=(n=null==e?void 0:e[t])?n:null==e?void 0:e.default)?r:e}var bK={type:"spring",stiffness:500,damping:25,restSpeed:10},b$={type:"keyframes",duration:.8},bY={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bQ=function(e,t){var n=t.keyframes;return n.length>2?b$:bx.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:bK:bY},bX=function(e){return null!==e},bZ=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return function(a){var s=bq(r,e)||{},l=s.delay||r.delay||0,u=r.elapsed,c=void 0===u?0:u;c-=xM(l);var d=(0,td._)((0,b._)({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},s),{delay:-c,onUpdate:function(e){t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:function(){a(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:o?void 0:i});s.when,s.delay,s.delayChildren,s.staggerChildren,s.staggerDirection,s.repeat,s.repeatType,s.repeatDelay,s.from,s.elapsed,Object.keys((0,iz._)(s,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"])).length||Object.assign(d,bQ(e,d)),d.duration&&(d.duration=xM(d.duration)),d.repeatDelay&&(d.repeatDelay=xM(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);var p=!1;if(!1!==d.type&&(0!==d.duration||d.repeatDelay)||(bG(d),0===d.delay&&(p=!0)),(xd.instantAnimations||xd.skipAnimations)&&(p=!0,bG(d),d.delay=0),d.allowFlatten=!s.type&&!s.ease,p&&!o&&void 0!==t.get()){var f,h,m,v,g,x=(f=d.keyframes,h=s.repeat,m=s.repeatType,v=f.filter(bX),g=h&&"loop"!==(void 0===m?"loop":m)&&h%2==1?0:v.length-1,v[g]);if(void 0!==x)return void xm.update(function(){d.onUpdate(x),d.onComplete()})}return s.isSync?new bo(d):new bH(d)}},bJ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function b0(e){return bJ.has(e.tagName)||!0===e.isContentEditable}function b1(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n)}}var b2={x:!1,y:!1};function b4(e){return e.max-e.min}function b3(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=xw(t.min,t.max,e.origin),e.scale=b4(n)/b4(t),e.translate=xw(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function b5(e,t,n,r){b3(e.x,t.x,n.x,r?r.originX:void 0),b3(e.y,t.y,n.y,r?r.originY:void 0)}function b8(e,t,n){e.min=n.min+t.min,e.max=e.min+b4(t)}function b6(e,t,n){e.min=t.min-n.min,e.max=e.min+b4(t)}function b9(e,t,n){b6(e.x,t.x,n.x),b6(e.y,t.y,n.y)}var b7=function(e){return"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary};function we(e){return{point:{x:e.pageX,y:e.pageY}}}function wt(e,t,n,r){return b1(e,t,function(e){return b7(e)&&n(e,we(e))},r)}var wn=function(e){var t=e.current;return t?t.ownerDocument.defaultView:null};function wr(e){return e&&(void 0===e?"undefined":(0,ty._)(e))==="object"&&Object.prototype.hasOwnProperty.call(e,"current")}var wi=function(e,t){return Math.abs(e-t)},wo=new Set(["auto","scroll"]),wa=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.transformPagePoint,a=i.contextWindow,s=void 0===a?window:a,l=i.dragSnapToOrigin,u=i.distanceThreshold,c=i.element;if((0,dz._)(this,e),this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=function(e){r.handleScroll(e.target)},this.onWindowScroll=function(){r.handleScroll(window)},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e,t,n=wu(r.lastMoveEventInfo,r.history),i=null!==r.startEvent,o=(e=n.offset,t={x:0,y:0},Math.sqrt(Math.pow(wi(e.x,t.x),2)+Math.pow(wi(e.y,t.y),2))>=r.distanceThreshold);if(i||o){var a=n.point,s=xg.timestamp;r.history.push((0,td._)((0,b._)({},a),{timestamp:s}));var l=r.handlers,u=l.onStart,c=l.onMove;i||(u&&u(r.lastMoveEvent,n),r.startEvent=r.lastMoveEvent),c&&c(r.lastMoveEvent,n)}}},this.handlePointerMove=function(e,t){r.lastMoveEvent=e,r.lastMoveEventInfo=ws(t,r.transformPagePoint),xm.update(r.updatePoint,!0)},this.handlePointerUp=function(e,t){r.end();var n=r.handlers,i=n.onEnd,o=n.onSessionEnd,a=n.resumeAnimation;if((r.dragSnapToOrigin||!r.startEvent)&&a&&a(),r.lastMoveEvent&&r.lastMoveEventInfo){var s=wu("pointercancel"===e.type?r.lastMoveEventInfo:ws(t,r.transformPagePoint),r.history);r.startEvent&&i&&i(e,s),o&&o(e,s)}},b7(t)){this.dragSnapToOrigin=void 0!==l&&l,this.handlers=n,this.transformPagePoint=o,this.distanceThreshold=void 0===u?3:u,this.contextWindow=s||window;var d=ws(we(t),this.transformPagePoint),p=d.point,f=xg.timestamp;this.history=[(0,td._)((0,b._)({},p),{timestamp:f})];var h=n.onSessionStart;h&&h(t,wu(d,this.history)),this.removeListeners=xU(wt(this.contextWindow,"pointermove",this.handlePointerMove),wt(this.contextWindow,"pointerup",this.handlePointerUp),wt(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}}return(0,dW._)(e,[{key:"startScrollTracking",value:function(e){for(var t=this,n=e.parentElement;n;){var r=getComputedStyle(n);(wo.has(r.overflowX)||wo.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=function(){window.removeEventListener("scroll",t.onElementScroll,{capture:!0}),window.removeEventListener("scroll",t.onWindowScroll)}}},{key:"handleScroll",value:function(e){var t=this.scrollPositions.get(e);if(t){var n=e===window,r=n?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},i={x:r.x-t.x,y:r.y-t.y};(0!==i.x||0!==i.y)&&(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(e,r),xm.update(this.updatePoint,!0))}}},{key:"updateHandlers",value:function(e){this.handlers=e}},{key:"end",value:function(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),xv(this.updatePoint)}}]),e}();function ws(e,t){return t?{point:t(e.point)}:e}function wl(e,t){return{x:e.x-t.x,y:e.y-t.y}}function wu(e,t){var n=e.point;return{point:n,delta:wl(n,wc(t)),offset:wl(n,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=wc(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>xM(.1)));)n--;if(!r)return{x:0,y:0};var o=xF(i.timestamp-r.timestamp);if(0===o)return{x:0,y:0};var a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}(t,.1)}}function wc(e){return e[e.length-1]}function wd(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function wp(e,t){var n,r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&(r=(n=[i,r])[0],i=n[1]),{min:r,max:i}}function wf(e,t,n){return{min:wh(e,t),max:wh(e,n)}}function wh(e,t){return"number"==typeof e?e:e[t]||0}var wm=new WeakMap,wv=function(){function e(t){(0,dz._)(this,e),this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xc(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}return(0,dW._)(e,[{key:"start",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.snapToCursor,i=void 0!==r&&r,o=n.distanceThreshold,a=this.visualElement.presenceContext;if(!a||!1!==a.isPresent){var s=this.getProps().dragSnapToOrigin;this.panSession=new wa(e,{onSessionStart:function(e){i?(t.stopAnimation(),t.snapToCursor(we(e).point)):t.pauseAnimation()},onStart:function(e,n){t.stopAnimation();var r=t.getProps(),i=r.drag,o=r.dragPropagation,a=r.onDragStart;if(!i||o||(t.openDragLock&&t.openDragLock(),t.openDragLock=function(e){if("x"===e||"y"===e)if(b2[e])return null;else return b2[e]=!0,function(){b2[e]=!1};return b2.x||b2.y?null:(b2.x=b2.y=!0,function(){b2.x=b2.y=!1})}(i),t.openDragLock)){t.latestPointerEvent=e,t.latestPanInfo=n,t.isDragging=!0,t.currentDirection=null,t.resolveConstraints(),t.visualElement.projection&&(t.visualElement.projection.isAnimationBlocked=!0,t.visualElement.projection.target=void 0),xy(function(e){var n=t.getAxisMotionValue(e).get()||0;if(yt.test(n)){var r=t.visualElement.projection;if(r&&r.layout){var i=r.layout.layoutBox[e];i&&(n=b4(i)*(parseFloat(n)/100))}}t.originPoint[e]=n}),a&&xm.postRender(function(){return a(e,n)}),xV(t.visualElement,"transform");var s=t.visualElement.animationState;s&&s.setActive("whileDrag",!0)}},onMove:function(e,n){t.latestPointerEvent=e,t.latestPanInfo=n;var r=t.getProps(),i=r.dragPropagation,o=r.dragDirectionLock,a=r.onDirectionLock,s=r.onDrag;if(i||t.openDragLock){var l=n.offset;if(o&&null===t.currentDirection){t.currentDirection=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}(l),null!==t.currentDirection&&a&&a(t.currentDirection);return}t.updateAxis("x",n.point,l),t.updateAxis("y",n.point,l),t.visualElement.render(),s&&s(e,n)}},onSessionEnd:function(e,n){t.latestPointerEvent=e,t.latestPanInfo=n,t.stop(e,n),t.latestPointerEvent=null,t.latestPanInfo=null},resumeAnimation:function(){return xy(function(e){var n;return"paused"===t.getAnimationState(e)&&(null==(n=t.getAxisMotionValue(e).animation)?void 0:n.play())})}},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,distanceThreshold:o,contextWindow:wn(this.visualElement),element:this.visualElement.current})}}},{key:"stop",value:function(e,t){var n=e||this.latestPointerEvent,r=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),i&&r&&n){var o=r.velocity;this.startAnimation(o);var a=this.getProps().onDragEnd;a&&xm.postRender(function(){return a(n,r)})}}},{key:"cancel",value:function(){this.isDragging=!1;var e=this.visualElement,t=e.projection,n=e.animationState;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}},{key:"updateAxis",value:function(e,t,n){var r=this.getProps().drag;if(n&&wg(e,r,this.currentDirection)){var i,o,a,s,l,u=this.getAxisMotionValue(e),c=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=c,o=this.constraints[e],a=this.elastic[e],s=o.min,l=o.max,void 0!==s&&i<s?i=a?xw(s,i,a.min):Math.max(i,s):void 0!==l&&i>l&&(i=a?xw(l,i,a.max):Math.min(i,l)),c=i),u.set(c)}}},{key:"resolveConstraints",value:function(){var e,t,n,r,i,o,a=this,s=this.getProps(),l=s.dragConstraints,u=s.dragElastic,c=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(o=this.visualElement.projection)?void 0:o.layout,d=this.constraints;l&&wr(l)?this.constraints||(this.constraints=this.resolveRefConstraints()):l&&c?this.constraints=(e=c.layoutBox,t=l.top,n=l.left,r=l.bottom,i=l.right,{x:wd(e.x,n,i),y:wd(e.y,t,r)}):this.constraints=!1,this.elastic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.35;return!1===e?e=0:!0===e&&(e=.35),{x:wf(e,"left","right"),y:wf(e,"top","bottom")}}(u),d!==this.constraints&&c&&this.constraints&&!this.hasMutatedConstraints&&xy(function(e){var t,n,r;!1!==a.constraints&&a.getAxisMotionValue(e)&&(a.constraints[e]=(t=c.layoutBox[e],n=a.constraints[e],r={},void 0!==n.min&&(r.min=n.min-t.min),void 0!==n.max&&(r.max=n.max-t.min),r))})}},{key:"resolveRefConstraints",value:function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!wr(t))return!1;var r=t.current;xH(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");var i=this.visualElement.projection;if(!i||!i.layout)return!1;var o=(s=i.root,l=xA(r,this.visualElement.getTransformPagePoint()),(u=s.scroll)&&(xP(l.x,u.offset.x),xP(l.y,u.offset.y)),l),a=(c=i.layout.layoutBox,{x:wp(c.x,o.x),y:wp(c.y,o.y)});if(n){var s,l,u,c,d,p,f,h=n((p=(d=a).x,{top:(f=d.y).min,right:p.max,bottom:f.max,left:p.min}));this.hasMutatedConstraints=!!h,h&&(a=xb(h))}return a}},{key:"startAnimation",value:function(e){var t=this,n=this.getProps(),r=n.drag,i=n.dragMomentum,o=n.dragElastic,a=n.dragTransition,s=n.dragSnapToOrigin,l=n.onDragTransitionEnd,u=this.constraints||{};return Promise.all(xy(function(n){if(wg(n,r,t.currentDirection)){var l=u&&u[n]||{};s&&(l={min:0,max:0});var c=(0,b._)({type:"inertia",velocity:i?e[n]:0,bounceStiffness:o?200:1e6,bounceDamping:o?40:1e7,timeConstant:750,restDelta:1,restSpeed:10},a,l);return t.startAxisValueAnimation(n,c)}})).then(l)}},{key:"startAxisValueAnimation",value:function(e,t){var n=this.getAxisMotionValue(e);return xV(this.visualElement,e),n.start(bZ(e,n,0,t,this.visualElement,!1))}},{key:"stopAnimation",value:function(){var e=this;xy(function(t){return e.getAxisMotionValue(t).stop()})}},{key:"pauseAnimation",value:function(){var e=this;xy(function(t){var n;return null==(n=e.getAxisMotionValue(t).animation)?void 0:n.pause()})}},{key:"getAnimationState",value:function(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}},{key:"getAxisMotionValue",value:function(e){var t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps();return n[t]||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}},{key:"snapToCursor",value:function(e){var t=this;xy(function(n){if(wg(n,t.getProps().drag,t.currentDirection)){var r=t.visualElement.projection,i=t.getAxisMotionValue(n);if(r&&r.layout){var o=r.layout.layoutBox[n],a=o.min,s=o.max,l=i.get()||0;i.set(e[n]-xw(a,s,.5)+l)}}})}},{key:"scalePositionWithinConstraints",value:function(){var e=this;if(this.visualElement.current){var t=this.getProps(),n=t.drag,r=t.dragConstraints,i=this.visualElement.projection;if(wr(r)&&i&&this.constraints){this.stopAnimation();var o={x:0,y:0};xy(function(t){var n=e.getAxisMotionValue(t);if(n&&!1!==e.constraints){var r,i,a,s,l,u=n.get();o[t]=(r={min:u,max:u},i=e.constraints[t],a=.5,s=b4(r),(l=b4(i))>s?a=y6(i.min,i.max-s,r.min):s>l&&(a=y6(r.min,r.max-l,i.min)),xN(0,1,a))}});var a=this.visualElement.getProps().transformTemplate;this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),xy(function(t){if(wg(t,n,null)){var r=e.getAxisMotionValue(t),i=e.constraints[t],a=i.min,s=i.max;r.set(xw(a,s,o[t]))}})}}}},{key:"addListeners",value:function(){var e=this;if(this.visualElement.current){wm.set(this.visualElement,this);var t=wt(this.visualElement.current,"pointerdown",function(t){var n=e.getProps(),r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&!b0(t.target)&&e.start(t)}),n=function(){var t=e.getProps().dragConstraints;wr(t)&&t.current&&(e.constraints=e.resolveRefConstraints())},r=this.visualElement.projection,i=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),xm.read(n);var o=b1(window,"resize",function(){return e.scalePositionWithinConstraints()}),a=r.addEventListener("didUpdate",function(t){var n=t.delta,r=t.hasLayoutChanged;e.isDragging&&r&&(xy(function(t){var r=e.getAxisMotionValue(t);r&&(e.originPoint[t]+=n[t].translate,r.set(r.get()+n[t].translate))}),e.visualElement.render())});return function(){o(),t(),i(),a&&a()}}}},{key:"getProps",value:function(){var e=this.visualElement.getProps(),t=e.drag,n=e.dragDirectionLock,r=e.dragPropagation,i=e.dragConstraints,o=e.dragElastic,a=e.dragMomentum;return(0,td._)((0,b._)({},e),{drag:void 0!==t&&t,dragDirectionLock:void 0!==n&&n,dragPropagation:void 0!==r&&r,dragConstraints:void 0!==i&&i,dragElastic:void 0===o?.35:o,dragMomentum:void 0===a||a})}}]),e}();function wg(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var wx=function(e){function t(e){var n;return(0,dz._)(this,t),(n=(0,g0._)(this,t,[e])).removeGroupControls=xa,n.removeListeners=xa,n.controls=new wv(e),n}return(0,g1._)(t,e),(0,dW._)(t,[{key:"mount",value:function(){var e=this.node.getProps().dragControls;e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xa}},{key:"update",value:function(){var e=this.node.getProps().dragControls;e!==(this.node.prevProps||{}).dragControls&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}},{key:"unmount",value:function(){this.removeGroupControls(),this.removeListeners()}}]),t}(xo),wy=function(e){return function(t,n){e&&xm.postRender(function(){return e(t,n)})}},wb=function(e){function t(){var e;return(0,dz._)(this,t),e=(0,g0._)(this,t,arguments),e.removePointerDownListener=xa,e}return(0,g1._)(t,e),(0,dW._)(t,[{key:"onPointerDown",value:function(e){this.session=new wa(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wn(this.node)})}},{key:"createPanHandlers",value:function(){var e=this,t=this.node.getProps(),n=t.onPanSessionStart,r=t.onPanStart,i=t.onPan,o=t.onPanEnd;return{onSessionStart:wy(n),onStart:wy(r),onMove:i,onEnd:function(t,n){delete e.session,o&&xm.postRender(function(){return o(t,n)})}}}},{key:"mount",value:function(){var e=this;this.removePointerDownListener=wt(this.node.current,"pointerdown",function(t){return e.onPointerDown(t)})}},{key:"update",value:function(){this.session&&this.session.updateHandlers(this.createPanHandlers())}},{key:"unmount",value:function(){this.removePointerDownListener(),this.session&&this.session.end()}}]),t}(xo),ww={hasAnimatedSinceResize:!0,hasEverUpdated:!1},w_=xf(queueMicrotask,!1),wj=w_.schedule;w_.cancel;var wS=(0,W.createContext)({}),wk=!1,wC=function(e){function t(){return(0,dz._)(this,t),(0,g0._)(this,t,arguments)}return(0,g1._)(t,e),(0,dW._)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.visualElement,r=t.layoutGroup,i=t.switchLayoutGroup,o=t.layoutId,a=n.projection;a&&(r.group&&r.group.add(a),i&&i.register&&o&&i.register(a),wk&&a.root.didUpdate(),a.addEventListener("animationComplete",function(){e.safeToRemove()}),a.setOptions((0,td._)((0,b._)({},a.options),{onExitComplete:function(){return e.safeToRemove()}}))),ww.hasEverUpdated=!0}},{key:"getSnapshotBeforeUpdate",value:function(e){var t=this,n=this.props,r=n.layoutDependency,i=n.visualElement,o=n.drag,a=n.isPresent,s=i.projection;return s&&(s.isPresent=a,wk=!0,o||e.layoutDependency!==r||void 0===r||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||xm.postRender(function(){var e=s.getStack();e&&e.members.length||t.safeToRemove()}))),null}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.visualElement.projection;t&&(t.root.didUpdate(),wj.postRender(function(){!t.currentAnimation&&t.isLead()&&e.safeToRemove()}))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,r=e.switchLayoutGroup,i=t.projection;wk=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}},{key:"safeToRemove",value:function(){var e=this.props.safeToRemove;e&&e()}},{key:"render",value:function(){return null}}]),t}(W.Component);function wT(e){var t=(0,z._)(xt(),2),n=t[0],r=t[1],i=(0,W.useContext)(gY);return(0,g$.jsx)(wC,(0,td._)((0,b._)({},e),{layoutGroup:i,switchLayoutGroup:(0,W.useContext)(wS),isPresent:n,safeToRemove:r}))}function wI(e,t,n,r,i){return e-=t,e=r+1/n*(e-r),void 0!==i&&(e=r+1/i*(e-r)),e}function wP(e,t,n,r,i){var o=(0,z._)(n,3),a=o[0],s=o[1],l=o[2];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;if(yt.test(t)&&(t=parseFloat(t),t=xw(a.min,a.max,t/100)-a.min),"number"==typeof t){var s=xw(o.min,o.max,r);e===o&&(s-=t),e.min=wI(e.min,t,n,s,i),e.max=wI(e.max,t,n,s,i)}}(e,t[a],t[s],t[l],t.scale,r,i)}var wE=["x","scaleX","originX"],wR=["y","scaleY","originY"];function wA(e,t,n,r){wP(e.x,t,wE,n?n.x:void 0,r?r.x:void 0),wP(e.y,t,wR,n?n.y:void 0,r?r.y:void 0)}function wD(e,t){e.min=t.min,e.max=t.max}function wV(e,t){wD(e.x,t.x),wD(e.y,t.y)}function wM(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function wF(e){return 0===e.translate&&1===e.scale}function wO(e){return wF(e.x)&&wF(e.y)}function wL(e,t){return e.min===t.min&&e.max===t.max}function wB(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function wU(e,t){return wB(e.x,t.x)&&wB(e.y,t.y)}function wN(e){return b4(e.x)/b4(e.y)}function wG(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}var wz=["TopLeft","TopRight","BottomLeft","BottomRight"],wW=wz.length,wH=function(e){return"string"==typeof e?parseFloat(e):e},wq=function(e){return"number"==typeof e||yn.test(e)};function wK(e,t){return void 0!==e[t]?e[t]:e.borderRadius}var w$=wQ(0,.5,y2),wY=wQ(.5,.95,xa);function wQ(e,t,n){return function(r){return r<e?0:r>t?1:n(y6(e,t,r))}}function wX(e){return g2(e)&&"ownerSVGElement"in e}var wZ=e.i(633600);function wJ(e,t){-1===e.indexOf(t)&&e.push(t)}function w0(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var w1=function(){function e(){(0,dz._)(this,e),this.subscriptions=[]}return(0,dW._)(e,[{key:"add",value:function(e){var t=this;return wJ(this.subscriptions,e),function(){return w0(t.subscriptions,e)}}},{key:"notify",value:function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var i=0;i<r;i++){var o=this.subscriptions[i];o&&o(e,t,n)}}},{key:"getSize",value:function(){return this.subscriptions.length}},{key:"clear",value:function(){this.subscriptions.length=0}}]),e}(),w2=void 0,w4=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,dz._)(this,e),this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){var t=xL.now();if(n.updatedAt!==t&&n.setPrevFrameValue(),n.prev=n.current,n.setCurrent(e),n.current!==n.prev&&(null==(a=n.events.change)||a.notify(n.current),n.dependents)){var r=!0,i=!1,o=void 0;try{for(var a,s,l=n.dependents[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)s.value.dirty()}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}return(0,dW._)(e,[{key:"setCurrent",value:function(e){this.current=e,this.updatedAt=xL.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}},{key:"setPrevFrameValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}},{key:"onChange",value:function(e){return this.on("change",e)}},{key:"on",value:function(e,t){var n=this;this.events[e]||(this.events[e]=new w1);var r=this.events[e].add(t);return"change"===e?function(){r(),xm.read(function(){n.events.change.getSize()||n.stop()})}:r}},{key:"clearListeners",value:function(){for(var e in this.events)this.events[e].clear()}},{key:"attach",value:function(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}},{key:"set",value:function(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}},{key:"setWithVelocity",value:function(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}},{key:"jump",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}},{key:"dirty",value:function(){var e;null==(e=this.events.change)||e.notify(this.current)}},{key:"addDependent",value:function(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}},{key:"removeDependent",value:function(e){this.dependents&&this.dependents.delete(e)}},{key:"get",value:function(){return w2&&w2.push(this),this.current}},{key:"getPrevious",value:function(){return this.prev}},{key:"getVelocity",value:function(){var e,t=xL.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;var n=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),n?1e3/n*e:0}},{key:"start",value:function(e){var t=this;return this.stop(),new Promise(function(n){t.hasAnimated=!0,t.animation=e(n),t.events.animationStart&&t.events.animationStart.notify()}).then(function(){t.events.animationComplete&&t.events.animationComplete.notify(),t.clearAnimation()})}},{key:"stop",value:function(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}},{key:"isAnimating",value:function(){return!!this.animation}},{key:"clearAnimation",value:function(){delete this.animation}},{key:"destroy",value:function(){var e,t;null==(e=this.dependents)||e.clear(),null==(t=this.events.destroy)||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}]),e}();function w3(e,t){return new w4(e,t)}function w5(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var w8={correct:function(e,t){if(!t.target)return e;if("string"==typeof e)if(!yn.test(e))return e;else e=parseFloat(e);var n=w5(e,t.target.x),r=w5(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},w6={borderRadius:(0,td._)((0,b._)({},w8),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:w8,borderTopRightRadius:w8,borderBottomLeftRadius:w8,borderBottomRightRadius:w8,boxShadow:{correct:function(e,t){var n=t.treeScale,r=t.projectionDelta,i=yv.parse(e);if(i.length>5)return e;var o=yv.createTransformer(e),a=+("number"!=typeof i[0]),s=r.x.scale*n.x,l=r.y.scale*n.y;i[0+a]/=s,i[1+a]/=l;var u=xw(s,l,.5);return"number"==typeof i[2+a]&&(i[2+a]/=u),"number"==typeof i[3+a]&&(i[3+a]/=u),o(i)}}};function w9(e){return e.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())})}var w7="data-"+w9("framerAppearId"),_e=function(e,t){return e.depth-t.depth},_t=function(){function e(){(0,dz._)(this,e),this.children=[],this.isDirty=!1}return(0,dW._)(e,[{key:"add",value:function(e){wJ(this.children,e),this.isDirty=!0}},{key:"remove",value:function(e){w0(this.children,e),this.isDirty=!0}},{key:"forEach",value:function(e){this.isDirty&&this.children.sort(_e),this.isDirty=!1,this.children.forEach(e)}}]),e}();function _n(e){return xD(e)?e.get():e}var _r=function(){function e(){(0,dz._)(this,e),this.members=[]}return(0,dW._)(e,[{key:"add",value:function(e){wJ(this.members,e),e.scheduleRender()}},{key:"remove",value:function(e){if(w0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}}},{key:"relegate",value:function(e){var t,n=this.members.findIndex(function(t){return e===t});if(0===n)return!1;for(var r=n;r>=0;r--){var i=this.members[r];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)}},{key:"promote",value:function(e,t){var n=this.lead;e!==n&&(this.prevLead=n,this.lead=e,e.show(),n&&(n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&n.hide()))}},{key:"exitAnimationComplete",value:function(){this.members.forEach(function(e){var t=e.options,n=e.resumingFrom;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}},{key:"scheduleRender",value:function(){this.members.forEach(function(e){e.instance&&e.scheduleRender(!1)})}},{key:"removeLeadSnapshot",value:function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}]),e}(),_i=["","X","Y","Z"],_o=0;function _a(e,t,n,r){var i=t.latestValues;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function _s(e){var t=e.attachResizeListener,n=e.defaultParent,r=e.measureScroll,i=e.checkIsScrollRoot,o=e.resetTransform;function a(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null==n?void 0:n();(0,dz._)(this,a),this.id=_o++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=function(){return e.update()},this.projectionUpdateScheduled=!1,this.checkUpdateFailed=function(){e.isUpdating&&(e.isUpdating=!1,e.clearAllSnapshots())},this.updateProjection=function(){e.projectionUpdateScheduled=!1,e.nodes.forEach(_c),e.nodes.forEach(_g),e.nodes.forEach(_x),e.nodes.forEach(_d)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=t,this.root=r?r.root||r:this,this.path=r?(0,en._)(r.path).concat([r]):[],this.parent=r,this.depth=r?r.depth+1:0;for(var i=0;i<this.path.length;i++)this.path[i].shouldResetTransform=!0;this.root===this&&(this.nodes=new _t)}return(0,dW._)(a,[{key:"addEventListener",value:function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new w1),this.eventHandlers.get(e).add(t)}},{key:"notifyListeners",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this.eventHandlers.get(e);i&&i.notify.apply(i,(0,en._)(n))}},{key:"hasListeners",value:function(e){return this.eventHandlers.has(e)}},{key:"mount",value:function(e){var n=this;if(!this.instance){this.isSVG=wX(e)&&!(wX(e)&&"svg"===e.tagName),this.instance=e;var r=this.options,i=r.layoutId,o=r.layout,a=r.visualElement;if(a&&!a.current&&a.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(o||i)&&(this.isLayoutDirty=!0),t){var s,l=0,u=function(){return n.root.updateBlockedByResize=!1};xm.read(function(){l=window.innerWidth}),t(e,function(){var e,t,r=window.innerWidth;r!==l&&(l=r,n.root.updateBlockedByResize=!0,s&&s(),e=xL.now(),t=function(n){var r=n.timestamp-e;r>=250&&(xv(t),u(r-250))},xm.setup(t,!0),s=function(){return xv(t)},ww.hasAnimatedSinceResize&&(ww.hasAnimatedSinceResize=!1,n.nodes.forEach(_v)))})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&a&&(i||o)&&this.addEventListener("didUpdate",function(e){var t=e.delta,r=e.hasLayoutChanged,i=e.hasRelativeLayoutChanged,o=e.layout;if(n.isTreeAnimationBlocked()){n.target=void 0,n.relativeTarget=void 0;return}var s=n.options.transition||a.getDefaultTransition()||_S,l=a.getProps(),u=l.onLayoutAnimationStart,c=l.onLayoutAnimationComplete,d=!n.targetLayout||!wU(n.targetLayout,o),p=!r&&i;if(n.options.layoutRoot||n.resumeFrom||p||r&&(d||!n.currentAnimation)){n.resumeFrom&&(n.resumingFrom=n.resumeFrom,n.resumingFrom.resumingFrom=void 0);var f=(0,td._)((0,b._)({},bq(s,"layout")),{onPlay:u,onComplete:c});(a.shouldReduceMotion||n.options.layoutRoot)&&(f.delay=0,f.type=!1),n.startAnimation(f),n.setAnimationOrigin(t,p)}else r||_v(n),n.isLead()&&n.options.onExitComplete&&n.options.onExitComplete();n.targetLayout=o})}}},{key:"unmount",value:function(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);var e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),xv(this.updateProjection)}},{key:"blockUpdate",value:function(){this.updateManuallyBlocked=!0}},{key:"unblockUpdate",value:function(){this.updateManuallyBlocked=!1}},{key:"isUpdateBlocked",value:function(){return this.updateManuallyBlocked||this.updateBlockedByResize}},{key:"isTreeAnimationBlocked",value:function(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}},{key:"startUpdate",value:function(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_y),this.animationId++)}},{key:"getTransformTemplate",value:function(){var e=this.options.visualElement;return e&&e.getProps().transformTemplate}},{key:"willUpdate",value:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root!==t){var n=t.options.visualElement;if(n){var r=n.props[w7];if(window.MotionHasOptimisedAnimation(r,"transform")){var i=t.options,o=i.layout,a=i.layoutId;window.MotionCancelOptimisedAnimation(r,"transform",xm,!(o||a))}var s=t.parent;s&&!s.hasCheckedOptimisedAppear&&e(s)}}}(this),this.root.isUpdating||this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var t=0;t<this.path.length;t++){var n=this.path[t];n.shouldResetTransform=!0,n.updateScroll("snapshot"),n.options.layoutRoot&&n.willUpdate(!1)}var r=this.options,i=r.layoutId,o=r.layout;if(void 0!==i||o){var a=this.getTransformTemplate();this.prevTransformTemplateValue=a?a(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}}},{key:"update",value:function(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_f);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(_h);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(_m),this.nodes.forEach(_l),this.nodes.forEach(_u)):this.nodes.forEach(_h),this.clearAllSnapshots();var e=xL.now();xg.delta=xN(0,1e3/60,e-xg.timestamp),xg.timestamp=e,xg.isProcessing=!0,xx.update.process(xg),xx.preRender.process(xg),xx.render.process(xg),xg.isProcessing=!1}},{key:"didUpdate",value:function(){this.updateScheduled||(this.updateScheduled=!0,wj.read(this.scheduleUpdate))}},{key:"clearAllSnapshots",value:function(){this.nodes.forEach(_p),this.sharedNodes.forEach(_b)}},{key:"scheduleUpdateProjection",value:function(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xm.preRender(this.updateProjection,!1,!0))}},{key:"scheduleCheckAfterUnmount",value:function(){var e=this;xm.postRender(function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()})}},{key:"updateSnapshot",value:function(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||b4(this.snapshot.measuredBox.x)||b4(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}},{key:"updateLayout",value:function(){if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var e=0;e<this.path.length;e++)this.path[e].updateScroll();var t=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=xc(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);var n=this.options.visualElement;n&&n.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}}},{key:"updateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){var n=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:n,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:n}}}},{key:"resetTransform",value:function(){if(o){var e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!wO(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||xS(this.latestValues)||i)&&(o(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}}},{key:"measure",value:function(){var e,t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=this.measurePageBox(),r=this.removeElementScroll(n);return t&&(r=this.removeTransform(r)),_T((e=r).x),_T(e.y),{animationId:this.root.animationId,measuredBox:n,layoutBox:r,latestValues:{},source:this.id}}},{key:"measurePageBox",value:function(){var e,t=this.options.visualElement;if(!t)return xc();var n=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(_P))){var r=this.root.scroll;r&&(xP(n.x,r.offset.x),xP(n.y,r.offset.y))}return n}},{key:"removeElementScroll",value:function(e){var t,n=xc();if(wV(n,e),null==(t=this.scroll)?void 0:t.wasRoot)return n;for(var r=0;r<this.path.length;r++){var i=this.path[r],o=i.scroll,a=i.options;i!==this.root&&o&&a.layoutScroll&&(o.wasRoot&&wV(n,e),xP(n.x,o.offset.x),xP(n.y,o.offset.y))}return n}},{key:"applyTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=xc();wV(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&xR(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),xS(i.latestValues)&&xR(n,i.latestValues)}return xS(this.latestValues)&&xR(n,this.latestValues),n}},{key:"removeTransform",value:function(e){var t=xc();wV(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n];if(r.instance&&xS(r.latestValues)){xj(r.latestValues)&&r.updateSnapshot();var i=xc();wV(i,r.measurePageBox()),wA(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,i)}}return xS(this.latestValues)&&wA(t,this.latestValues),t}},{key:"setTargetDelta",value:function(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}},{key:"setOptions",value:function(e){this.options=(0,td._)((0,b._)({},this.options,e),{crossfade:void 0===e.crossfade||e.crossfade})}},{key:"clearMeasurements",value:function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}},{key:"forceRelativeParentToResolveTarget",value:function(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xg.timestamp&&this.relativeParent.resolveTargetDelta(!0)}},{key:"resolveTargetDelta",value:function(){var e,t,n,r,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);var a=!!this.resumingFrom||this!==o;if(i||a&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(r=this.parent)?void 0:r.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize){var s=this.options,l=s.layout,u=s.layoutId;if(this.layout&&(l||u)){this.resolvedRelativeTargetAt=xg.timestamp;var c=this.getClosestProjectingParent();c&&this.linkedParentVersion!==c.layoutVersion&&!c.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(c&&c.layout?this.createRelativeTarget(c,this.layout.layoutBox,c.layout.layoutBox):this.removeRelativeTarget()),(this.relativeTarget||this.targetDelta)&&((this.target||(this.target=xc(),this.targetWithTransforms=xc()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target)?(this.forceRelativeParentToResolveTarget(),e=this.target,t=this.relativeTarget,n=this.relativeParent.target,b8(e.x,t.x,n.x),b8(e.y,t.y,n.y)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wV(this.target,this.layout.layoutBox),xI(this.target,this.targetDelta)):wV(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,c&&!!c.resumingFrom==!!this.resumingFrom&&!c.options.layoutScroll&&c.target&&1!==this.animationProgress?this.createRelativeTarget(c,this.target,c.target):this.relativeParent=this.relativeTarget=void 0))}}}},{key:"getClosestProjectingParent",value:function(){if(!(!this.parent||xj(this.parent.latestValues)||xk(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}},{key:"isProjecting",value:function(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}},{key:"createRelativeTarget",value:function(e,t,n){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xc(),this.relativeTargetOrigin=xc(),b9(this.relativeTargetOrigin,t,n),wV(this.relativeTarget,this.relativeTargetOrigin)}},{key:"removeRelativeTarget",value:function(){this.relativeParent=this.relativeTarget=void 0}},{key:"calcProjection",value:function(){var e,t=this.getLead(),n=!!this.resumingFrom||this!==t,r=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===xg.timestamp&&(r=!1),!r){var i=this.options,o=i.layout,a=i.layoutId;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(o||a)){wV(this.layoutCorrected,this.layout.layoutBox);var s=this.treeScale.x,l=this.treeScale.y;!function(e,t,n){var r,i,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=n.length;if(a){t.x=t.y=1;for(var s=0;s<a;s++){i=(r=n[s]).projectionDelta;var l=r.options.visualElement;(!l||!l.props.style||"contents"!==l.props.style.display)&&(o&&r.options.layoutScroll&&r.scroll&&r!==r.root&&xR(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,xI(e,i)),o&&xS(r.latestValues)&&xR(e,r.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}}(this.layoutCorrected,this.treeScale,this.path,n),t.layout&&!t.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(t.target=t.layout.layoutBox,t.targetWithTransforms=xc());var u=t.target;if(!u){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(wM(this.prevProjectionDelta.x,this.projectionDelta.x),wM(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),b5(this.projectionDelta,this.layoutCorrected,u,this.latestValues),this.treeScale.x===s&&this.treeScale.y===l&&wG(this.projectionDelta.x,this.prevProjectionDelta.x)&&wG(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",u))}}}},{key:"hide",value:function(){this.isVisible=!1}},{key:"show",value:function(){this.isVisible=!0}},{key:"scheduleRender",value:function(){var e,t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(null==(e=this.options.visualElement)||e.scheduleRender(),t){var n=this.getStack();n&&n.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}},{key:"createProjectionDeltas",value:function(){this.prevProjectionDelta=xl(),this.projectionDelta=xl(),this.projectionDeltaWithTransform=xl()}},{key:"setAnimationOrigin",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.snapshot,o=i?i.latestValues:{},a=(0,b._)({},this.latestValues),s=xl();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!r;var l=xc(),u=(i?i.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),d=!c||c.members.length<=1,p=!!(u&&!d&&!0===this.options.crossfade&&!this.path.some(_j));this.animationProgress=0,this.mixTargetDelta=function(r){var i,c,f,h,m,v,g=r/1e3;if(_w(s.x,e.x,g),_w(s.y,e.y,g),n.setTargetDelta(s),n.relativeTarget&&n.relativeTargetOrigin&&n.layout&&n.relativeParent&&n.relativeParent.layout){b9(l,n.layout.layoutBox,n.relativeParent.layout.layoutBox),i=n.relativeTarget,c=n.relativeTargetOrigin,f=l,h=g,__(i.x,c.x,f.x,h),__(i.y,c.y,f.y,h),t&&(m=n.relativeTarget,v=t,wL(m.x,v.x)&&wL(m.y,v.y))&&(n.isProjectionDirty=!1),t||(t=xc()),wV(t,n.relativeTarget)}u&&(n.animationValues=a,function(e,t,n,r,i,o){i?(e.opacity=xw(0,null!=(a=n.opacity)?a:1,w$(r)),e.opacityExit=xw(null!=(s=t.opacity)?s:1,0,wY(r))):o&&(e.opacity=xw(null!=(l=t.opacity)?l:1,null!=(u=n.opacity)?u:1,r));for(var a,s,l,u,c=0;c<wW;c++){var d="border".concat(wz[c],"Radius"),p=wK(t,d),f=wK(n,d);(void 0!==p||void 0!==f)&&(p||(p=0),f||(f=0),0===p||0===f||wq(p)===wq(f)?(e[d]=Math.max(xw(wH(p),wH(f),r),0),(yt.test(f)||yt.test(p))&&(e[d]+="%")):e[d]=f)}(t.rotate||n.rotate)&&(e.rotate=xw(t.rotate||0,n.rotate||0,r))}(a,o,n.latestValues,g,p,d)),n.root.scheduleUpdateProjection(),n.scheduleRender(),n.animationProgress=g},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}},{key:"startAnimation",value:function(e){var t,n,r,i=this;this.notifyListeners("animationStart"),null==(t=this.currentAnimation)||t.stop(),null==(r=this.resumingFrom)||null==(n=r.currentAnimation)||n.stop(),this.pendingAnimation&&(xv(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xm.update(function(){var t,n,r;ww.hasAnimatedSinceResize=!0,xG.layout++,i.motionValue||(i.motionValue=w3(0)),t=i.motionValue,n=(0,td._)((0,b._)({},e),{velocity:0,isSync:!0,onUpdate:function(t){i.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:function(){xG.layout--},onComplete:function(){xG.layout--,e.onComplete&&e.onComplete(),i.completeAnimation()}}),(r=xD(t)?t:w3(t)).start(bZ("",r,[0,1e3],n)),i.currentAnimation=r.animation,i.resumingFrom&&(i.resumingFrom.currentAnimation=i.currentAnimation),i.pendingAnimation=void 0})}},{key:"completeAnimation",value:function(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);var e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}},{key:"finishAnimation",value:function(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}},{key:"applyTransformsToTarget",value:function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,r=e.layout,i=e.latestValues;if(t&&n&&r){if(this!==e&&this.layout&&r&&_I(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||xc();var o=b4(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+o;var a=b4(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+a}wV(t,n),xR(t,i),b5(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}},{key:"registerSharedNode",value:function(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new _r),this.sharedNodes.get(e).add(t);var n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}},{key:"isLead",value:function(){var e=this.getStack();return!e||e.lead===this}},{key:"getLead",value:function(){var e;return this.options.layoutId&&(null==(e=this.getStack())?void 0:e.lead)||this}},{key:"getPrevLead",value:function(){var e;return this.options.layoutId?null==(e=this.getStack())?void 0:e.prevLead:void 0}},{key:"getStack",value:function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)}},{key:"promote",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needsReset,n=e.transition,r=e.preserveFollowOpacity,i=this.getStack();i&&i.promote(this,r),t&&(this.projectionDelta=void 0,this.needsReset=!0),n&&this.setOptions({transition:n})}},{key:"relegate",value:function(){var e=this.getStack();return!!e&&e.relegate(this)}},{key:"resetSkewAndRotation",value:function(){var e=this.options.visualElement;if(e){var t=!1,n=e.latestValues;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),t){var r={};n.z&&_a("z",e,r,this.animationValues);for(var i=0;i<_i.length;i++)_a("rotate".concat(_i[i]),e,r,this.animationValues),_a("skew".concat(_i[i]),e,r,this.animationValues);for(var o in e.render(),r)e.setStaticValue(o,r[o]),this.animationValues&&(this.animationValues[o]=r[o]);e.scheduleRender()}}}},{key:"applyProjectionStyles",value:function(e,t){if(this.instance&&!this.isSVG){if(!this.isVisible){e.visibility="hidden";return}var n,r,i=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=_n(null==t?void 0:t.pointerEvents)||"",e.transform=i?i(this.latestValues,""):"none";return}var o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target){this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=_n(null==t?void 0:t.pointerEvents)||""),this.hasProjected&&!xS(this.latestValues)&&(e.transform=i?i({},""):"none",this.hasProjected=!1);return}e.visibility="";var a=o.animationValues||o.latestValues;this.applyTransformsToTarget();var s=function(e,t,n){var r="",i=e.x.translate/t.x,o=e.y.translate/t.y,a=(null==n?void 0:n.z)||0;if((i||o||a)&&(r="translate3d(".concat(i,"px, ").concat(o,"px, ").concat(a,"px) ")),(1!==t.x||1!==t.y)&&(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){var s=n.transformPerspective,l=n.rotate,u=n.rotateX,c=n.rotateY,d=n.skewX,p=n.skewY;s&&(r="perspective(".concat(s,"px) ").concat(r)),l&&(r+="rotate(".concat(l,"deg) ")),u&&(r+="rotateX(".concat(u,"deg) ")),c&&(r+="rotateY(".concat(c,"deg) ")),d&&(r+="skewX(".concat(d,"deg) ")),p&&(r+="skewY(".concat(p,"deg) "))}var f=e.x.scale*t.x,h=e.y.scale*t.y;return(1!==f||1!==h)&&(r+="scale(".concat(f,", ").concat(h,")")),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,a);i&&(s=i(a,s)),e.transform=s;var l=this.projectionDelta,u=l.x,c=l.y;for(var d in e.transformOrigin="".concat(100*u.origin,"% ").concat(100*c.origin,"% 0"),o.animationValues?e.opacity=o===this?null!=(r=null!=(n=a.opacity)?n:this.latestValues.opacity)?r:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:e.opacity=o===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0,w6)if(void 0!==a[d]){var p=w6[d],f=p.correct,h=p.applyTo,m=p.isCSSVariable,v="none"===s?a[d]:f(a[d],o);if(h)for(var g=h.length,x=0;x<g;x++)e[h[x]]=v;else m?this.options.visualElement.renderState.vars[d]=v:e[d]=v}this.options.layoutId&&(e.pointerEvents=o===this?_n(null==t?void 0:t.pointerEvents)||"":"none")}}},{key:"clearSnapshot",value:function(){this.resumeFrom=this.snapshot=void 0}},{key:"resetTree",value:function(){this.root.nodes.forEach(function(e){var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(_f),this.root.sharedNodes.clear()}}]),a}function _l(e){e.updateLayout()}function _u(e){var t,n=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){var r=e.layout,i=r.layoutBox,o=r.measuredBox,a=e.options.animationType,s=n.source!==e.layout.source;"size"===a?xy(function(e){var t=s?n.measuredBox[e]:n.layoutBox[e],r=b4(t);t.min=i[e].min,t.max=t.min+r}):_I(a,n.layoutBox,i)&&xy(function(t){var r=s?n.measuredBox[t]:n.layoutBox[t],o=b4(i[t]);r.max=r.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[t].max=e.relativeTarget[t].min+o)});var l=xl();b5(l,i,n.layoutBox);var u=xl();s?b5(u,e.applyTransform(o,!0),n.measuredBox):b5(u,i,n.layoutBox);var c=!wO(l),d=!1;if(!e.resumeFrom){var p=e.getClosestProjectingParent();if(p&&!p.resumeFrom){var f=p.snapshot,h=p.layout;if(f&&h){var m=xc();b9(m,n.layoutBox,f.layoutBox);var v=xc();b9(v,i,h.layoutBox),wU(m,v)||(d=!0),p.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=m,e.relativeParent=p)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:u,layoutDelta:l,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(e.isLead()){var g=e.options.onExitComplete;g&&g()}e.options.transition=void 0}function _c(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function _d(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function _p(e){e.clearSnapshot()}function _f(e){e.clearMeasurements()}function _h(e){e.isLayoutDirty=!1}function _m(e){var t=e.options.visualElement;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function _v(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function _g(e){e.resolveTargetDelta()}function _x(e){e.calcProjection()}function _y(e){e.resetSkewAndRotation()}function _b(e){e.removeLeadSnapshot()}function _w(e,t,n){e.translate=xw(t.translate,0,n),e.scale=xw(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function __(e,t,n,r){e.min=xw(t.min,n.min,r),e.max=xw(t.max,n.max,r)}function _j(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var _S={duration:.45,ease:[.4,0,.1,1]},_k=function(e){return"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e)},_C=_k("applewebkit/")&&!_k("chrome/")?Math.round:xa;function _T(e){e.min=_C(e.min),e.max=_C(e.max)}function _I(e,t,n){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(wN(t)-wN(n)))}function _P(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}var _E=_s({attachResizeListener:function(e,t){return b1(e,"resize",t)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),_R={current:void 0},_A=_s({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!_R.current){var e=new _E({});e.mount(window),e.setOptions({layoutScroll:!0}),_R.current=e}return _R.current},resetTransform:function(e,t){e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:function(e){return"fixed"===window.getComputedStyle(e).position}});function _D(e){var t=[{},{}];return null==e||e.values.forEach(function(e,n){t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function _V(e,t,n,r){if("function"==typeof t){var i=(0,z._)(_D(r),2),o=i[0],a=i[1];t=t(void 0!==n?n:e.custom,o,a)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){var s=(0,z._)(_D(r),2),l=s[0],u=s[1];t=t(void 0!==n?n:e.custom,l,u)}return t}function _M(e,t,n){var r=e.getProps();return _V(r,t,void 0!==n?n:r.custom,e)}var _F=new Set(["width","height","top","left","right","bottom"].concat((0,en._)(bg))),_O=function(e){return Array.isArray(e)};function _L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.delay,i=void 0===r?0:r,o=n.transitionOverride,a=n.type,s=t.transition,l=void 0===s?e.getDefaultTransition():s,u=t.transitionEnd,c=(0,iz._)(t,["transition","transitionEnd"]);o&&(l=o);var d=[],p=a&&e.animationState&&e.animationState.getState()[a];for(var f in c){var h,m=e.getValue(f,null!=(h=e.latestValues[f])?h:null),v=c[f];if(!(void 0===v||p&&function(e,t){var n=e.protectedKeys,r=e.needsAnimating,i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}(p,f))){var g=(0,b._)({delay:i},bq(l||{},f)),x=m.get();if(void 0===x||m.isAnimating||Array.isArray(v)||v!==x||g.velocity){var y=!1;if(window.MotionHandoffAnimation){var w=e.props[w7];if(w){var _=window.MotionHandoffAnimation(w,f,xm);null!==_&&(g.startTime=_,y=!0)}}xV(e,f),m.start(bZ(f,m,v,e.shouldReduceMotion&&_F.has(f)?{type:!1}:g,e,y));var j=m.animation;j&&d.push(j)}}}return u&&Promise.all(d).then(function(){xm.update(function(){u&&function(e,t){var n=_M(e,t)||{},r=n.transitionEnd,i=(n.transition,(0,iz._)(n,["transitionEnd","transition"]));for(var o in i=(0,b._)({},i,void 0===r?{}:r)){var a,s=_O(a=i[o])?a[a.length-1]||0:a;e.hasValue(o)?e.getValue(o).set(s):e.addValue(o,w3(s))}}(e,u)})}),d}function _B(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=Array.from(e).sort(function(e,t){return e.sortNodePosition(t)}).indexOf(t),a=e.size,s=(a-1)*r;return"function"==typeof n?n(o,a):1===i?o*r:s-o*r}function _U(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=_M(e,t,"exit"===r.type?null==(n=e.presenceContext)?void 0:n.custom:void 0),o=(i||{}).transition,a=void 0===o?e.getDefaultTransition()||{}:o;r.transitionOverride&&(a=r.transitionOverride);var s=i?function(){return Promise.all(_L(e,i,r))}:function(){return Promise.resolve()},l=e.variantChildren&&e.variantChildren.size?function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=a.delayChildren;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6?arguments[6]:void 0,s=[],l=!0,u=!1,c=void 0;try{for(var d,p=e.variantChildren[Symbol.iterator]();!(l=(d=p.next()).done);l=!0)!function(){var l=d.value;l.notify("AnimationStart",t),s.push(_U(l,t,(0,td._)((0,b._)({},a),{delay:n+("function"==typeof r?0:r)+_B(e.variantChildren,l,r,i,o)})).then(function(){return l.notify("AnimationComplete",t)}))}()}catch(e){u=!0,c=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}return Promise.all(s)}(e,t,n,void 0===i?0:i,a.staggerChildren,a.staggerDirection,r)}:function(){return Promise.resolve()},u=a.when;if(!u)return Promise.all([s(),l(r.delay)]);var c=(0,z._)("beforeChildren"===u?[s,l]:[l,s],2),d=c[0],p=c[1];return d().then(function(){return p()})}function _N(e){return"string"==typeof e||Array.isArray(e)}var _G=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_z=["initial"].concat((0,en._)(_G)),_W=_z.length;function _H(e){return null!==e&&(void 0===e?"undefined":(0,ty._)(e))==="object"&&"function"==typeof e.start}function _q(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var _K=(0,en._)(_G).reverse(),_$=_G.length;function _Y(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _Q(){return{animate:_Y(!0),whileInView:_Y(),whileHover:_Y(),whileTap:_Y(),whileDrag:_Y(),whileFocus:_Y(),exit:_Y()}}var _X=function(e){function t(e){var n;return(0,dz._)(this,t),n=(0,g0._)(this,t,[e]),e.animationState||(e.animationState=function(e){var t=function(t){return Promise.all(t.map(function(t){return function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t))n=Promise.all(t.map(function(t){return _U(e,t,r)}));else if("string"==typeof t)n=_U(e,t,r);else{var i="function"==typeof t?_M(e,t,r.custom):t;n=Promise.all(_L(e,i,r))}return n.then(function(){e.notify("AnimationComplete",t)})}(e,t.animation,t.options)}))},n=_Q(),r=!0;function i(i){for(var o=e.props,a=function e(t){if(t){if(!t.isControllingVariants){var n=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(n.initial=t.props.initial),n}for(var r={},i=0;i<_W;i++){var o=_z[i],a=t.props[o];(_N(a)||!1===a)&&(r[o]=a)}return r}}(e.parent)||{},s=[],l=new Set,u={},c=1/0,d=0;d<_$;d++)!function(t){var d,p,f=_K[t],h=n[f],m=void 0!==o[f]?o[f]:a[f],v=_N(m),g=f===i?h.isActive:null;!1===g&&(c=t);var x=m===a[f]&&m!==o[f]&&v;if(x&&r&&e.manuallyAnimateOnMount&&(x=!1),h.protectedKeys=(0,b._)({},u),!(!h.isActive&&null===g||!m&&!h.prevProp||_H(m))&&"boolean"!=typeof m){var y=(d=h.prevProp,"string"==typeof(p=m)?p!==d:!!Array.isArray(p)&&!_q(p,d)),w=y||f===i&&h.isActive&&!x&&v||t>c&&v,_=!1,j=Array.isArray(m)?m:[m],S=j.reduce(function(t,n){var r,i=_M(e,n,"exit"===f?null==(r=e.presenceContext)?void 0:r.custom:void 0);if(i){i.transition;var o=i.transitionEnd,a=(0,iz._)(i,["transition","transitionEnd"]);t=(0,b._)({},t,a,o)}return t},{});!1===g&&(S={});var k=h.prevResolvedValues,C=void 0===k?{}:k,T=(0,b._)({},C,S),I=function(t){w=!0,l.has(t)&&(_=!0,l.delete(t)),h.needsAnimating[t]=!0;var n=e.getValue(t);n&&(n.liveStyle=!1)};for(var P in T){var E=S[P],R=C[P];!u.hasOwnProperty(P)&&((_O(E)&&_O(R)?_q(E,R):E===R)?void 0!==E&&l.has(P)?I(P):h.protectedKeys[P]=!0:null!=E?I(P):l.add(P))}h.prevProp=m,h.prevResolvedValues=S,h.isActive&&(u=(0,b._)({},u,S)),r&&e.blockInitialAnimation&&(w=!1);var A=x&&y,D=!A||_;w&&D&&s.push.apply(s,(0,en._)(j.map(function(t){var n={type:f};if("string"==typeof t&&r&&!A&&e.manuallyAnimateOnMount&&e.parent){var i=e.parent,o=_M(i,t);if(i.enteringChildren&&o){var a=(o.transition||{}).delayChildren;n.delay=_B(i.enteringChildren,e,a)}}return{animation:t,options:n}})))}}(d);if(l.size){var p={};if("boolean"!=typeof o.initial){var f=_M(e,Array.isArray(o.initial)?o.initial[0]:o.initial);f&&f.transition&&(p.transition=f.transition)}l.forEach(function(t){var n=e.getBaseTarget(t),r=e.getValue(t);r&&(r.liveStyle=!0),p[t]=null!=n?n:null}),s.push({animation:p})}var h=!!s.length;return r&&(!1===o.initial||o.initial===o.animate)&&!e.manuallyAnimateOnMount&&(h=!1),r=!1,h?t(s):Promise.resolve()}return{animateChanges:i,setActive:function(t,r){if(n[t].isActive===r)return Promise.resolve();null==(o=e.variantChildren)||o.forEach(function(e){var n;return null==(n=e.animationState)?void 0:n.setActive(t,r)}),n[t].isActive=r;var o,a=i(t);for(var s in n)n[s].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:function(){return n},reset:function(){n=_Q()}}}(e)),n}return(0,g1._)(t,e),(0,dW._)(t,[{key:"updateAnimationControlsSubscription",value:function(){var e=this.node.getProps().animate;_H(e)&&(this.unmountControls=e.subscribe(this.node))}},{key:"mount",value:function(){this.updateAnimationControlsSubscription()}},{key:"update",value:function(){this.node.getProps().animate!==(this.node.prevProps||{}).animate&&this.updateAnimationControlsSubscription()}},{key:"unmount",value:function(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}}]),t}(xo),_Z=0,_J=function(e){function t(){var e;return(0,dz._)(this,t),e=(0,g0._)(this,t,arguments),e.id=_Z++,e}return(0,g1._)(t,e),(0,dW._)(t,[{key:"update",value:function(){var e=this;if(this.node.presenceContext){var t=this.node.presenceContext,n=t.isPresent,r=t.onExitComplete,i=(this.node.prevPresenceContext||{}).isPresent;if(this.node.animationState&&n!==i){var o=this.node.animationState.setActive("exit",!n);r&&!n&&o.then(function(){r(e.id)})}}}},{key:"mount",value:function(){var e=this.node.presenceContext||{},t=e.register,n=e.onExitComplete;n&&n(this.id),t&&(this.unmount=t(this.id))}},{key:"unmount",value:function(){}}]),t}(xo);function _0(e,t){var n=function(e,t,n){if((0,tx._)(e,EventTarget))return[e];if("string"==typeof e){var r=document.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}(e),r=new AbortController;return[n,(0,td._)((0,b._)({passive:!0},t),{signal:r.signal}),function(){return r.abort()}]}function _1(e){return!("touch"===e.pointerType||b2.x||b2.y)}function _2(e,t,n){var r=e.props;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);var i=r["onHover"+n];i&&xm.postRender(function(){return i(t,we(t))})}var _4=function(e){function t(){return(0,dz._)(this,t),(0,g0._)(this,t,arguments)}return(0,g1._)(t,e),(0,dW._)(t,[{key:"mount",value:function(){var e=this,t=this.node.current;t&&(this.unmount=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,z._)(_0(e,n),3),i=r[0],o=r[1],a=r[2],s=function(e){if(_1(e)){var n=e.target,r=t(n,e);if("function"==typeof r&&n){var i=function(e){_1(e)&&(r(e),n.removeEventListener("pointerleave",i))};n.addEventListener("pointerleave",i,o)}}};return i.forEach(function(e){e.addEventListener("pointerenter",s,o)}),a}(t,function(t,n){return _2(e.node,n,"Start"),function(t){return _2(e.node,t,"End")}}))}},{key:"unmount",value:function(){}}]),t}(xo),_3=function(e){function t(){var e;return(0,dz._)(this,t),e=(0,g0._)(this,t,arguments),e.isActive=!1,e}return(0,g1._)(t,e),(0,dW._)(t,[{key:"onFocus",value:function(){var e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}},{key:"onBlur",value:function(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}},{key:"mount",value:function(){var e=this;this.unmount=xU(b1(this.node.current,"focus",function(){return e.onFocus()}),b1(this.node.current,"blur",function(){return e.onBlur()}))}},{key:"unmount",value:function(){}}]),t}(xo),_5=function(e,t){return!!t&&(e===t||_5(e,t.parentElement))},_8=new WeakSet;function _6(e){return function(t){"Enter"===t.key&&e(t)}}function _9(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}var _7=function(e,t){var n=e.currentTarget;if(n){var r=_6(function(){if(!_8.has(n)){_9(n,"down");var e=_6(function(){_9(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",function(){return _9(n,"cancel")},t)}});n.addEventListener("keydown",r,t),n.addEventListener("blur",function(){return n.removeEventListener("keydown",r)},t)}};function je(e){return b7(e)&&!(b2.x||b2.y)}function jt(e,t,n){var r=e.props;if(!(0,tx._)(e.current,HTMLButtonElement)||!e.current.disabled){e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);var i=r["onTap"+("End"===n?"":n)];i&&xm.postRender(function(){return i(t,we(t))})}}var jn=function(e){function t(){return(0,dz._)(this,t),(0,g0._)(this,t,arguments)}return(0,g1._)(t,e),(0,dW._)(t,[{key:"mount",value:function(){var e=this,t=this.node.current;t&&(this.unmount=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,z._)(_0(e,n),3),i=r[0],o=r[1],a=r[2],s=function(e){var r=e.currentTarget;if(je(e)){_8.add(r);var i=t(r,e),a=function(e,t){window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",l),_8.has(r)&&_8.delete(r),je(e)&&"function"==typeof i&&i(e,{success:t})},s=function(e){a(e,r===window||r===document||n.useGlobalTarget||_5(r,e.target))},l=function(e){a(e,!1)};window.addEventListener("pointerup",s,o),window.addEventListener("pointercancel",l,o)}};return i.forEach(function(e){(n.useGlobalTarget?window:e).addEventListener("pointerdown",s,o),g4(e)&&(e.addEventListener("focus",function(e){return _7(e,o)}),b0(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),a}(t,function(t,n){return jt(e.node,n,"Start"),function(t,n){var r=n.success;return jt(e.node,t,r?"End":"Cancel")}},{useGlobalTarget:this.node.props.globalTapTarget}))}},{key:"unmount",value:function(){}}]),t}(xo),jr=new WeakMap,ji=new WeakMap,jo=function(e){var t=jr.get(e.target);t&&t(e)},ja=function(e){e.forEach(jo)},js={some:0,all:1},jl=function(e){function t(){var e;return(0,dz._)(this,t),e=(0,g0._)(this,t,arguments),e.hasEnteredView=!1,e.isInView=!1,e}return(0,g1._)(t,e),(0,dW._)(t,[{key:"startObserver",value:function(){var e,t,n,r,i,o,a,s,l=this;this.unmount();var u=this.node.getProps().viewport,c=void 0===u?{}:u,d=c.root,p=c.margin,f=c.amount,h=void 0===f?"some":f,m=c.once,v={root:d?d.current:void 0,rootMargin:p,threshold:"number"==typeof h?h:js[h]};return e=this.node.current,t=function(e){var t=e.isIntersecting;if(l.isInView!==t){if(l.isInView=t,m&&!t&&l.hasEnteredView)return;t&&(l.hasEnteredView=!0),l.node.animationState&&l.node.animationState.setActive("whileInView",t);var n=l.node.getProps(),r=n.onViewportEnter,i=n.onViewportLeave,o=t?r:i;o&&o(e)}},n=v.root,r=(0,iz._)(v,["root"]),i=n||document,ji.has(i)||ji.set(i,{}),(o=ji.get(i))[a=JSON.stringify(r)]||(o[a]=new IntersectionObserver(ja,(0,b._)({root:n},r))),s=o[a],jr.set(e,t),s.observe(e),function(){jr.delete(e),s.unobserve(e)}}},{key:"mount",value:function(){this.startObserver()}},{key:"update",value:function(){if("undefined"!=typeof IntersectionObserver){var e=this.node;["amount","margin","root"].some(function(e){var t=e.viewport,n=void 0===t?{}:t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.viewport,o=void 0===i?{}:i;return function(e){return n[e]!==o[e]}}(e.props,e.prevProps))&&this.startObserver()}}},{key:"unmount",value:function(){}}]),t}(xo),ju=e.i(663355),jc=e.i(862470),jd=new Set(["brightness","contrast","saturate","opacity"]);function jp(e){var t=(0,z._)(e.slice(0,-1).split("("),2),n=t[0],r=t[1];if("drop-shadow"===n)return e;var i=(0,z._)(r.match(x2)||[],1)[0];if(!i)return e;var o=r.replace(i,""),a=+!!jd.has(n);return i!==r&&(a*=100),n+"("+a+o+")"}var jf=RegExp("\\b([a-z-]*)\\(.*?\\)","gu"),jh=(0,td._)((0,b._)({},yv),{getAnimatableNone:function(e){var t=e.match(jf);return t?t.map(jp).join(" "):e}}),jm=(0,td._)((0,b._)({},xZ),{transform:Math.round}),jv=(0,td._)((0,b._)({borderWidth:yn,borderTopWidth:yn,borderRightWidth:yn,borderBottomWidth:yn,borderLeftWidth:yn,borderRadius:yn,radius:yn,borderTopLeftRadius:yn,borderTopRightRadius:yn,borderBottomRightRadius:yn,borderBottomLeftRadius:yn,width:yn,maxWidth:yn,height:yn,maxHeight:yn,top:yn,right:yn,bottom:yn,left:yn,inset:yn,insetBlock:yn,insetBlockStart:yn,insetBlockEnd:yn,insetInline:yn,insetInlineStart:yn,insetInlineEnd:yn,padding:yn,paddingTop:yn,paddingRight:yn,paddingBottom:yn,paddingLeft:yn,paddingBlock:yn,paddingBlockStart:yn,paddingBlockEnd:yn,paddingInline:yn,paddingInlineStart:yn,paddingInlineEnd:yn,margin:yn,marginTop:yn,marginRight:yn,marginBottom:yn,marginLeft:yn,marginBlock:yn,marginBlockStart:yn,marginBlockEnd:yn,marginInline:yn,marginInlineStart:yn,marginInlineEnd:yn,backgroundPositionX:yn,backgroundPositionY:yn},{rotate:ye,rotateX:ye,rotateY:ye,rotateZ:ye,scale:x0,scaleX:x0,scaleY:x0,scaleZ:x0,skew:ye,skewX:ye,skewY:ye,distance:yn,translateX:yn,translateY:yn,translateZ:yn,x:yn,y:yn,z:yn,perspective:yn,transformPerspective:yn,opacity:xJ,originX:yo,originY:yo,originZ:yn}),{zIndex:jm,fillOpacity:xJ,strokeOpacity:xJ,numOctaves:jm}),jg=(0,td._)((0,b._)({},jv),{color:ys,backgroundColor:ys,outlineColor:ys,fill:ys,stroke:ys,borderColor:ys,borderTopColor:ys,borderRightColor:ys,borderBottomColor:ys,borderLeftColor:ys,filter:jh,WebkitFilter:jh}),jx=function(e){return jg[e]},jy=function(e){return function(t){return t.test(e)}},jb=[xZ,yn,yt,ye,yi,yr,{test:function(e){return"auto"===e},parse:function(e){return e}}],jw=function(e){return jb.find(jy(e))},j_=function(e){return RegExp("^-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)$","u").test(e)},jj=RegExp("^var\\(--(?:([\\w-]+)|([\\w-]+), ?([a-zA-Z\\d ()%#.,-]+))\\)","u"),jS=function(e){return RegExp("^0[^.\\s]+$","u").test(e)};function jk(e,t){var n=jx(e);return n!==jh&&(n=yv),n.getAnimatableNone?n.getAnimatableNone(t):void 0}var jC=new Set(["auto","none","0"]),jT=function(e){function t(e,n,r,i,o){return(0,dz._)(this,t),(0,g0._)(this,t,[e,n,r,i,o,!0])}return(0,g1._)(t,e),(0,dW._)(t,[{key:"readKeyframes",value:function(){var e=this.unresolvedKeyframes,n=this.element,r=this.name;if(n&&n.current){(0,ju._)((0,jc._)(t.prototype),"readKeyframes",this).call(this);for(var i=0;i<e.length;i++){var o=e[i];if("string"==typeof o&&xY(o=o.trim())){var a=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;xH(r<=4,'Max CSS variable fallback depth detected in property "'.concat(t,'". This may indicate a circular fallback dependency.'),"max-css-var-depth");var i=(0,z._)(function(e){var t=jj.exec(e);if(!t)return[,];var n=(0,z._)(t,4),r=n[1],i=n[2],o=n[3];return["--".concat(null!=r?r:i),o]}(t),2),o=i[0],a=i[1];if(o){var s=window.getComputedStyle(n).getPropertyValue(o);if(s){var l=s.trim();return j_(l)?parseFloat(l):l}return xY(a)?e(a,n,r+1):a}}(o,n.current);void 0!==a&&(e[i]=a),i===e.length-1&&(this.finalKeyframe=o)}}if(this.resolveNoneKeyframes(),_F.has(r)&&2===e.length){var s=(0,z._)(e,2),l=s[0],u=s[1],c=jw(l),d=jw(u);if(xX(l)!==xX(u)&&b_[r]){this.needsMeasurement=!0;return}if(c!==d)if(by(c)&&by(d))for(var p=0;p<e.length;p++){var f=e[p];"string"==typeof f&&(e[p]=parseFloat(f))}else b_[r]&&(this.needsMeasurement=!0)}}}},{key:"resolveNoneKeyframes",value:function(){for(var e,t=this.unresolvedKeyframes,n=this.name,r=[],i=0;i<t.length;i++)(null===t[i]||("number"==typeof(e=t[i])?0===e:null===e||"none"===e||"0"===e||jS(e)))&&r.push(i);r.length&&function(e,t,n){for(var r=0,i=void 0;r<e.length&&!i;){var o=e[r];"string"==typeof o&&!jC.has(o)&&yp(o).values.length&&(i=e[r]),r++}if(i&&n){var a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)e[u.value]=jk(n,i)}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}}}(t,r,n)}},{key:"measureInitialState",value:function(){var e=this.element,t=this.unresolvedKeyframes,n=this.name;if(e&&e.current){"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=b_[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;var r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}}},{key:"measureEndState",value:function(){var e,t=this.element,n=this.name,r=this.unresolvedKeyframes;if(t&&t.current){var i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);var o=r.length-1,a=r[o];r[o]=b_[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(function(e){var n=(0,z._)(e,2),r=n[0],i=n[1];t.getValue(r).set(i)}),this.resolveNoneKeyframes()}}}]),t}(bP),jI=(0,en._)(jb).concat([ys,yv]),jP={current:null},jE={current:!1},jR="undefined"!=typeof window,jA=new WeakMap;function jD(e){return _H(e.animate)||_z.some(function(t){return _N(e[t])})}function jV(e){return!!(jD(e)||e.variants)}var jM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],jF={},jO=function(e){function t(){var e;return(0,dz._)(this,t),e=(0,g0._)(this,t,arguments),e.KeyframeResolver=jT,e}return(0,g1._)(t,e),(0,dW._)(t,[{key:"sortInstanceNodePosition",value:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1}},{key:"getBaseTargetFromProps",value:function(e,t){var n=e.style;return n?n[t]:void 0}},{key:"removeValueFromRenderState",value:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]}},{key:"handleChildMotionValue",value:function(){var e=this;this.childSubscription&&(this.childSubscription(),delete this.childSubscription);var t=this.props.children;xD(t)&&(this.childSubscription=t.on("change",function(t){e.current&&(e.current.textContent="".concat(t))}))}}]),t}(function(){function e(t){var n=this,r=t.parent,i=t.props,o=t.presenceContext,a=t.reducedMotionConfig,s=t.blockInitialAnimation,l=t.visualState,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,dz._)(this,e),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=bP,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=function(){return n.notify("Update",n.latestValues)},this.render=function(){n.current&&(n.triggerBuild(),n.renderInstance(n.current,n.renderState,n.props.style,n.projection))},this.renderScheduledAt=0,this.scheduleRender=function(){var e=xL.now();n.renderScheduledAt<e&&(n.renderScheduledAt=e,xm.render(n.render,!1,!0))};var c=l.latestValues,d=l.renderState;this.latestValues=c,this.baseTarget=(0,b._)({},c),this.initialValues=i.initial?(0,b._)({},c):{},this.renderState=d,this.parent=r,this.props=i,this.presenceContext=o,this.depth=r?r.depth+1:0,this.reducedMotionConfig=a,this.options=u,this.blockInitialAnimation=!!s,this.isControllingVariants=jD(i),this.isVariantNode=jV(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(r&&r.current);var p=this.scrapeMotionValuesFromProps(i,{},this),f=(p.willChange,(0,iz._)(p,["willChange"]));for(var h in f){var m=f[h];void 0!==c[h]&&xD(m)&&m.set(c[h])}}return(0,dW._)(e,[{key:"scrapeMotionValuesFromProps",value:function(e,t,n){return{}}},{key:"mount",value:function(e){var t,n=this;this.current=e,jA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(function(e,t){return n.bindToMotionValue(t,e)}),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:(jE.current||function(){if(jE.current=!0,jR)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return jP.current=e.matches};e.addEventListener("change",t),t()}else jP.current=!1}(),this.shouldReduceMotion=jP.current),null==(t=this.parent)||t.addChild(this),this.update(this.props,this.presenceContext)}},{key:"unmount",value:function(){var e;for(var t in this.projection&&this.projection.unmount(),xv(this.notifyUpdate),xv(this.render),this.valueSubscriptions.forEach(function(e){return e()}),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null==(e=this.parent)||e.removeChild(this),this.events)this.events[t].clear();for(var n in this.features){var r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}},{key:"addChild",value:function(e){this.children.add(e),null!=this.enteringChildren||(this.enteringChildren=new Set),this.enteringChildren.add(e)}},{key:"removeChild",value:function(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}},{key:"bindToMotionValue",value:function(e,t){var n,r=this;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();var i=bx.has(e);i&&this.onBindTransform&&this.onBindTransform();var o=t.on("change",function(t){r.latestValues[e]=t,r.props.onUpdate&&xm.preRender(r.notifyUpdate),i&&r.projection&&(r.projection.isTransformDirty=!0),r.scheduleRender()});"undefined"!=typeof window&&window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,function(){o(),n&&n(),t.owner&&t.stop()})}},{key:"sortNodePosition",value:function(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}},{key:"updateFeatures",value:function(){var e="animation";for(e in jF){var t=jF[e];if(t){var n=t.isEnabled,r=t.Feature;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){var i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}}},{key:"triggerBuild",value:function(){this.build(this.renderState,this.latestValues,this.props)}},{key:"measureViewportBox",value:function(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xc()}},{key:"getStaticValue",value:function(e){return this.latestValues[e]}},{key:"setStaticValue",value:function(e,t){this.latestValues[e]=t}},{key:"update",value:function(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(var n=0;n<jM.length;n++){var r=jM[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);var i=e["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=function(e,t,n){for(var r in t){var i=t[r],o=n[r];if(xD(i))e.addValue(r,i);else if(xD(o))e.addValue(r,w3(i,{owner:e}));else if(o!==i)if(e.hasValue(r)){var a=e.getValue(r);!0===a.liveStyle?a.jump(i):a.hasAnimated||a.set(i)}else{var s=e.getStaticValue(r);e.addValue(r,w3(void 0!==s?s:i,{owner:e}))}}for(var l in n)void 0===t[l]&&e.removeValue(l);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}},{key:"getProps",value:function(){return this.props}},{key:"getVariant",value:function(e){return this.props.variants?this.props.variants[e]:void 0}},{key:"getDefaultTransition",value:function(){return this.props.transition}},{key:"getTransformPagePoint",value:function(){return this.props.transformPagePoint}},{key:"getClosestVariantNode",value:function(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}},{key:"addVariantChild",value:function(e){var t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),function(){return t.variantChildren.delete(e)}}},{key:"addValue",value:function(e,t){var n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}},{key:"removeValue",value:function(e){this.values.delete(e);var t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}},{key:"hasValue",value:function(e){return this.values.has(e)}},{key:"getValue",value:function(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];var n=this.values.get(e);return void 0===n&&void 0!==t&&(n=w3(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}},{key:"readValue",value:function(e,t){var n,r,i=void 0===this.latestValues[e]&&this.current?null!=(r=this.getBaseTargetFromProps(this.props,e))?r:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return null!=i&&("string"==typeof i&&(j_(i)||jS(i))?i=parseFloat(i):(n=i,!jI.find(jy(n))&&yv.test(t)&&(i=jk(e,t))),this.setBaseTarget(e,xD(i)?i.get():i)),xD(i)?i.get():i}},{key:"setBaseTarget",value:function(e,t){this.baseTarget[e]=t}},{key:"getBaseTarget",value:function(e){var t=this.props.initial;if("string"==typeof t||(void 0===t?"undefined":(0,ty._)(t))==="object"){var n,r,i=_V(this.props,t,null==(r=this.presenceContext)?void 0:r.custom);i&&(n=i[e])}if(t&&void 0!==n)return n;var o=this.getBaseTargetFromProps(this.props,e);return void 0===o||xD(o)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:o}},{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=new w1),this.events[e].add(t)}},{key:"notify",value:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.events[e]&&(t=this.events[e]).notify.apply(t,(0,en._)(r))}},{key:"scheduleRenderMicrotask",value:function(){wj.render(this.render)}}]),e}()),jL=function(e,t){return t&&"number"==typeof e?t.transform(e):e},jB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},jU=bg.length;function jN(e,t,n){var r=e.style,i=e.vars,o=e.transformOrigin,a=!1,s=!1;for(var l in t){var u=t[l];if(bx.has(l)){a=!0;continue}if(xK(l)){i[l]=u;continue}var c=jL(u,jv[l]);l.startsWith("origin")?(s=!0,o[l]=c):r[l]=c}if(!t.transform&&(a||n?r.transform=function(e,t,n){for(var r="",i=!0,o=0;o<jU;o++){var a=bg[o],s=e[a];if(void 0!==s){var l=!0;if(!(l="number"==typeof s?s===+!!a.startsWith("scale"):0===parseFloat(s))||n){var u=jL(s,jv[a]);if(!l){i=!1;var c=jB[a]||a;r+="".concat(c,"(").concat(u,") ")}n&&(t[a]=u)}}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),s){var d=o.originX,p=o.originY,f=o.originZ;r.transformOrigin="".concat(void 0===d?"50%":d," ").concat(void 0===p?"50%":p," ").concat(void 0===f?0:f)}}var jG={offset:"stroke-dashoffset",array:"stroke-dasharray"},jz={offset:"strokeDashoffset",array:"strokeDasharray"},jW=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function jH(e,t,n,r,i){var o=t.attrX,a=t.attrY,s=t.attrScale,l=t.pathLength,u=t.pathSpacing,c=t.pathOffset;if(jN(e,(0,iz._)(t,["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"]),r),n){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};var d=e.attrs,p=e.style;d.transform&&(p.transform=d.transform,delete d.transform),(p.transform||d.transformOrigin)&&(p.transformOrigin=null!=(v=d.transformOrigin)?v:"50% 50%",delete d.transformOrigin),p.transform&&(p.transformBox=null!=(g=null==i?void 0:i.transformBox)?g:"fill-box",delete d.transformBox);var f=!0,h=!1,m=void 0;try{for(var v,g,x,y=jW[Symbol.iterator]();!(f=(x=y.next()).done);f=!0){var b=x.value;void 0!==d[b]&&(p[b]=d[b],delete d[b])}}catch(e){h=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(h)throw m}}void 0!==o&&(d.x=o),void 0!==a&&(d.y=a),void 0!==s&&(d.scale=s),void 0!==l&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4)||void 0===arguments[4]||arguments[4];e.pathLength=1;var o=i?jG:jz;e[o.offset]=yn.transform(-r);var a=yn.transform(t),s=yn.transform(n);e[o.array]="".concat(a," ").concat(s)}(d,l,void 0===u?1:u,void 0===c?0:c,!1)}var jq=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),jK=function(e){return"string"==typeof e&&"svg"===e.toLowerCase()};function j$(e,t,n,r){var i,o=t.style,a=t.vars,s=e.style;for(i in o)s[i]=o[i];for(i in null==r||r.applyProjectionStyles(s,n),a)s.setProperty(i,a[i])}function jY(e,t){var n=t.layout,r=t.layoutId;return bx.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!w6[e]||"opacity"===e)}function jQ(e,t,n){var r,i=e.style,o=null==t?void 0:t.style,a={};if(!i)return a;for(var s in i)(xD(i[s])||o&&xD(o[s])||jY(s,e)||(null==n||null==(r=n.getValue(s))?void 0:r.liveStyle)!==void 0)&&(a[s]=i[s]);return a}function jX(e,t,n){var r=jQ(e,t,n);for(var i in e)(xD(e[i])||xD(t[i]))&&(r[-1!==bg.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]);return r}var jZ=function(e){function t(){var e;return(0,dz._)(this,t),e=(0,g0._)(this,t,arguments),e.type="svg",e.isSVGTag=!1,e.measureInstanceViewportBox=xc,e}return(0,g1._)(t,e),(0,dW._)(t,[{key:"getBaseTargetFromProps",value:function(e,t){return e[t]}},{key:"readValueFromInstance",value:function(e,t){if(bx.has(t)){var n=jx(t);return n&&n.default||0}return t=jq.has(t)?t:w9(t),e.getAttribute(t)}},{key:"scrapeMotionValuesFromProps",value:function(e,t,n){return jX(e,t,n)}},{key:"build",value:function(e,t,n){jH(e,t,this.isSVGTag,n.transformTemplate,n.style)}},{key:"renderInstance",value:function(e,t,n,r){for(var i in j$(e,t,void 0,r),t.attrs)e.setAttribute(jq.has(i)?i:w9(i),t.attrs[i])}},{key:"mount",value:function(e){this.isSVGTag=jK(e.tagName),(0,ju._)((0,jc._)(t.prototype),"mount",this).call(this,e)}}]),t}(jO),jJ=function(e){function t(){var e;return(0,dz._)(this,t),e=(0,g0._)(this,t,arguments),e.type="html",e.renderInstance=j$,e}return(0,g1._)(t,e),(0,dW._)(t,[{key:"readValueFromInstance",value:function(e,t){if(bx.has(t)){var n;return(null==(n=this.projection)?void 0:n.isProjecting)?bf(t):bm(e,t)}var r=window.getComputedStyle(e),i=(xK(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof i?i.trim():i}},{key:"measureInstanceViewportBox",value:function(e,t){return xA(e,t.transformPagePoint)}},{key:"build",value:function(e,t,n){jN(e,t,n.transformTemplate)}},{key:"scrapeMotionValuesFromProps",value:function(e,t,n){return jQ(e,t,n)}}]),t}(jO),j0=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function j1(e){if("string"!=typeof e||e.includes("-"));else if(j0.indexOf(e)>-1||RegExp("[A-Z]","u").test(e))return!0;return!1}var j2=(0,b._)({renderer:function(e,t){var n;return(null!=(n=t.isSVG)?n:j1(e))?new jZ(t):new jJ(t,{allowProjection:e!==W.Fragment})}},{animation:{Feature:_X},exit:{Feature:_J}},{inView:{Feature:jl},tap:{Feature:jn},focus:{Feature:_3},hover:{Feature:_4}}),j4=(0,b._)({},j2,{pan:{Feature:wb},drag:{Feature:wx,ProjectionNode:_A,MeasureLayout:wT}},{layout:{ProjectionNode:_A,MeasureLayout:wT}}),j3=(0,W.createContext)(null),j5=function(e){return!e.isLayoutDirty&&e.willUpdate(!1)},j8=function(e){return!0===e},j6=function(e){var t,n,r,i,o,a,s,l,u,c=e.children,d=e.id,p=e.inherit,f=void 0===p||p,h=(0,W.useContext)(gY),m=(0,W.useContext)(j3),v=(0,z._)((t=(0,W.useRef)(!1),gZ(function(){return t.current=!0,function(){t.current=!1}},[]),n=t,i=(r=(0,z._)((0,W.useState)(0),2))[0],o=r[1],a=(0,W.useCallback)(function(){n.current&&o(i+1)},[i]),[(0,W.useCallback)(function(){return xm.postRender(a)},[a]),i]),2),g=v[0],x=v[1],y=(0,W.useRef)(null),w=h.id||m;null===y.current&&((j8(!0===f)||"id"===f)&&w&&(d=d?w+"-"+d:w),y.current={id:d,group:j8(f)&&h.group||(s=new Set,l=new WeakMap,{add:function(e){s.add(e),l.set(e,e.addEventListener("willUpdate",u))},remove:function(e){s.delete(e);var t=l.get(e);t&&(t(),l.delete(e)),u()},dirty:u=function(){return s.forEach(j5)}})});var _=(0,W.useMemo)(function(){return(0,td._)((0,b._)({},y.current),{forceRender:g})},[x]);return(0,g$.jsx)(gY.Provider,{value:_,children:c})},j9=(0,W.createContext)({strict:!1}),j7={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Se=!1;function St(){var e=function(e){t[e]={isEnabled:function(t){return j7[e].some(function(e){return!!t[e]})}}};if(!Se){var t={};for(var n in j7)e(n);jF=t,Se=!0}return jF}function Sn(e){var t=St();for(var n in e)t[n]=(0,b._)({},t[n],e[n]);jF=t}function Sr(e){var t=e.children,n=e.features,r=e.strict,i=(0,z._)((0,W.useState)(!Si(n)),2)[1],o=(0,W.useRef)(void 0);if(!Si(n)){var a=n.renderer,s=(0,iz._)(n,["renderer"]);o.current=a,Sn(s)}return(0,W.useEffect)(function(){Si(n)&&n().then(function(e){var t=e.renderer;Sn((0,iz._)(e,["renderer"])),o.current=t,i(!0)})},[]),(0,g$.jsx)(j9.Provider,{value:{renderer:o.current,strict:void 0!==r&&r},children:t})}function Si(e){return"function"==typeof e}var So=(0,W.createContext)({});function Sa(e){return Array.isArray(e)?e.join(" "):e}var Ss=function(){return{style:{},transform:{},transformOrigin:{},vars:{}}};function Sl(e,t,n){for(var r in t)xD(t[r])||jY(r,n)||(e[r]=t[r])}var Su=function(){return(0,td._)((0,b._)({},Ss()),{attrs:{}})},Sc=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sd(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Sc.has(e)}var Sp=function(e){return!Sd(e)};try{f=e.r(958863).default,"function"==typeof f&&(Sp=function(e){return e.startsWith("on")?!Sd(e):f(e)})}catch(e){}var Sf=function(e){return function(t,n){var r=(0,W.useContext)(So),i=(0,W.useContext)(gJ),o=function(){var n,o;return n=e.scrapeMotionValuesFromProps,o=e.createRenderState,{latestValues:function(e,t,n,r){var i={},o=r(e,{});for(var a in o)i[a]=_n(o[a]);var s=e.initial,l=e.animate,u=jD(e),c=jV(e);t&&c&&!u&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===l&&(l=t.animate));var d=!!n&&!1===n.initial,p=(d=d||!1===s)?l:s;if(p&&"boolean"!=typeof p&&!_H(p))for(var f=Array.isArray(p)?p:[p],h=0;h<f.length;h++){var m=_V(e,f[h]);if(m){var v=m.transitionEnd,g=(m.transition,(0,iz._)(m,["transitionEnd","transition"]));for(var x in g){var y=g[x];if(Array.isArray(y)){var b=d?y.length-1:0;y=y[b]}null!==y&&(i[x]=y)}for(var w in v)i[w]=v[w]}}return i}(t,r,i,n),renderState:o()}};return n?o():gQ(o)}},Sh=Sf({scrapeMotionValuesFromProps:jQ,createRenderState:Ss}),Sm=Sf({scrapeMotionValuesFromProps:jX,createRenderState:Su}),Sv=Symbol.for("motionComponentSymbol"),Sg=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.forwardMotionProps,o=void 0!==i&&i,a=r.type,s=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;s&&Sn(s);var u=a?"svg"===a:j1(e),c=u?Sm:Sh;function d(t,n){var r,i,a,s,d,p,f=(0,td._)((0,b._)({},(0,W.useContext)(g3),t),{layoutId:(r=t.layoutId,(i=(0,W.useContext)(gY).id)&&void 0!==r?i+"-"+r:r)}),h=f.isStatic,m=(E=(P=function(e,t){if(jD(e)){var n=e.initial,r=e.animate;return{initial:!1===n||_N(n)?n:void 0,animate:_N(r)?r:void 0}}return!1!==e.inherit?t:{}}(t,(0,W.useContext)(So))).initial,R=P.animate,(0,W.useMemo)(function(){return{initial:E,animate:R}},[Sa(E),Sa(R)])),v=c(t,h);if(!h&&gX){(0,W.useContext)(j9).strict;var g,x,y,w,_,j,S,k,C,T,I,P,E,R,A,D,V,M,F,O,L,B,U,N,G,z,H,q,K,$,Y=function(e){var t=St(),n=t.drag,r=t.layout;if(!n&&!r)return{};var i=(0,b._)({},n,r);return{MeasureLayout:(null==n?void 0:n.isEnabled(e))||(null==r?void 0:r.isEnabled(e))?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(f);p=Y.MeasureLayout,A=l,D=Y.ProjectionNode,L=(0,W.useContext)(So).visualElement,B=(0,W.useContext)(j9),U=(0,W.useContext)(gJ),N=(0,W.useContext)(g3).reducedMotion,G=(0,W.useRef)(null),A=A||B.renderer,!G.current&&A&&(G.current=A(e,{visualState:v,parent:L,props:f,presenceContext:U,blockInitialAnimation:!!U&&!1===U.initial,reducedMotionConfig:N,isSVG:u})),z=G.current,H=(0,W.useContext)(wS),z&&!z.projection&&D&&("html"===z.type||"svg"===z.type)&&(g=G.current,x=f,y=D,w=H,_=x.layoutId,j=x.layout,S=x.drag,k=x.dragConstraints,C=x.layoutScroll,T=x.layoutRoot,I=x.layoutCrossfade,g.projection=new y(g.latestValues,x["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(g.parent)),g.projection.setOptions({layoutId:_,layout:j,alwaysMeasureLayout:!!S||k&&wr(k),visualElement:g,animationType:"string"==typeof j?j:"both",initialPromotionConfig:w,crossfade:I,layoutScroll:C,layoutRoot:T})),q=(0,W.useRef)(!1),(0,W.useInsertionEffect)(function(){z&&q.current&&z.update(f,U)}),K=f[w7],$=(0,W.useRef)(!!K&&!(null==(V=(M=window).MotionHandoffIsComplete)?void 0:V.call(M,K))&&(null==(F=(O=window).MotionHasOptimisedAnimation)?void 0:F.call(O,K))),gZ(function(){z&&(q.current=!0,window.MotionIsMounted=!0,z.updateFeatures(),z.scheduleRenderMicrotask(),$.current&&z.animationState&&z.animationState.animateChanges())}),(0,W.useEffect)(function(){z&&(!$.current&&z.animationState&&z.animationState.animateChanges(),$.current&&(queueMicrotask(function(){var e,t;null==(e=(t=window).MotionHandoffMarkAsComplete)||e.call(t,K)}),$.current=!1),z.enteringChildren=void 0)}),m.visualElement=z}return(0,g$.jsxs)(So.Provider,{value:m,children:[p&&m.visualElement?(0,g$.jsx)(p,(0,b._)({visualElement:m.visualElement},f)):null,function(e,t,n,r,i){var o=r.latestValues,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6?arguments[6]:void 0,l=((null!=s?s:j1(e))?function(e,t,n,r){var i=(0,W.useMemo)(function(){var n=Su();return jH(n,t,jK(r),e.transformTemplate,e.style),(0,td._)((0,b._)({},n.attrs),{style:(0,b._)({},n.style)})},[t]);if(e.style){var o={};Sl(o,e.style,e),i.style=(0,b._)({},o,i.style)}return i}:function(e,t){var n,r,i={},o=(Sl(n={},e.style||{},e),Object.assign(n,(r=e.transformTemplate,(0,W.useMemo)(function(){var e=Ss();return jN(e,t,r),Object.assign({},e.vars,e.style)},[t]))),n);return e.drag&&!1!==e.dragListener&&(i.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=o,i})(t,o,i,e),u=function(e,t,n){var r={};for(var i in e)("values"!==i||"object"!==(0,ty._)(e.values))&&(Sp(i)||!0===n&&Sd(i)||!t&&!Sd(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(t,"string"==typeof e,a),c=e!==W.Fragment?(0,td._)((0,b._)({},u,l),{ref:n}):{},d=t.children,p=(0,W.useMemo)(function(){return xD(d)?d.get():d},[d]);return(0,W.createElement)(e,(0,td._)((0,b._)({},c),{children:p}))}(e,t,(a=m.visualElement,s=(0,W.useRef)(n),(0,W.useInsertionEffect)(function(){s.current=n}),d=(0,W.useRef)(null),(0,W.useCallback)(function(e){if(e){var t;null==(t=v.onMount)||t.call(v,e)}a&&(e?a.mount(e):a.unmount());var n=s.current;if("function"==typeof n)if(e){var r=n(e);"function"==typeof r&&(d.current=r)}else d.current?(d.current(),d.current=null):n(e);else n&&(n.current=e)},[a])),v,h,o,u)]})}d.displayName="motion.".concat("string"==typeof e?e:"create(".concat(null!=(n=null!=(t=e.displayName)?t:e.name)?n:"",")"));var p=(0,W.forwardRef)(d);return p[Sv]=e,p}("div",void 0),Sx=e.i(873667);function Sy(e){return(0,x.jsxs)(r4.default,(0,td._)((0,b._)({},e),{children:[(0,x.jsx)("path",{d:"M4.395 4.403a.75.75 0 0 1 1.06 1.06 9.251 9.251 0 0 0 0 13.074.75.75 0 1 1-1.06 1.06 10.75 10.75 0 0 1 0-15.194ZM18.545 4.403a.75.75 0 0 1 1.06 0 10.752 10.752 0 0 1 0 15.194.75.75 0 1 1-1.06-1.06 9.25 9.25 0 0 0 0-13.073.75.75 0 0 1 0-1.061Z"}),(0,x.jsx)("path",{d:"M7.223 7.231a.75.75 0 0 1 1.061 1.06 5.25 5.25 0 0 0 0 7.419.75.75 0 0 1-1.061 1.06 6.751 6.751 0 0 1 0-9.539ZM15.717 7.23a.751.751 0 0 1 1.061.001 6.752 6.752 0 0 1 0 9.538.751.751 0 0 1-1.062-1.06 5.252 5.252 0 0 0 0-7.417.751.751 0 0 1 0-1.062Z"}),(0,x.jsx)("path",{fillRule:"evenodd",d:"M12 9.25a2.75 2.75 0 1 1 0 5.5 2.75 2.75 0 0 1 0-5.5Zm0 1.5a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z",clipRule:"evenodd"})]}))}var Sb=e.i(593767),Sw=e.i(568430),S_=e.i(536262),Sj=e.i(705539),SS=e.i(784701),Sk=e.i(798406);function SC(e){var t,n,r,i,o,a,s=e.item,l=e.onAddToChat,u=e.onSendToAgent,c=e.onUpdateStatus,d=(0,z._)((0,W.useState)(null),2),p=d[0],f=d[1],h=(0,z._)((0,W.useState)(!1),2),m=h[0],v=h[1],g=(0,z._)((0,W.useState)(!1),2),y=g[0],b=g[1],w=(0,W.useRef)(null),_=(0,ld.useTrackClick)().trackClick;(0,W.useEffect)(function(){w.current&&b(w.current.scrollHeight>240)},[s.feedbackText]);var j=s.topic&&SS.INBOX_TOPIC_CONFIG[s.topic]?SS.INBOX_TOPIC_CONFIG[s.topic]:SS.INBOX_TOPIC_CONFIG.other,S=null!=(r=s.user.displayName)?r:s.user.username,k=(t=s.feedbackText,(n=s.topic)&&"other"!==n&&SS.INBOX_TOPIC_CONFIG[n]?'{{"replit-type": "inbox_topic", "topic": "'.concat(n,'"}} ').concat(t):t),C=(0,W.useCallback)(function(){var e;_({productArea:"agent_inbox",target:"inbox_add_to_chat_button"}),l(k,null!=(e=s.screenshots)?e:void 0),c(s.id,"acknowledged")},[_,l,c,k,s.id,s.screenshots]),T=(0,W.useCallback)(function(){var e;_({productArea:"agent_inbox",target:"inbox_send_to_agent_button"}),u(k,null!=(e=s.screenshots)?e:void 0),c(s.id,"implemented")},[_,u,c,k,s.id,s.screenshots]),I=(0,W.useCallback)(function(){_({productArea:"agent_inbox",target:"inbox_resolve_button"}),c(s.id,"dismissed")},[_,c,s.id]),P=(0,W.useCallback)(function(){_({productArea:"agent_inbox",target:"inbox_delete_button"}),c(s.id,"deleted")},[_,c,s.id]),E=(0,W.useCallback)(function(){_({productArea:"agent_inbox",target:"inbox_restore_button"}),c(s.id,"pending")},[_,c,s.id]),A=(0,W.useCallback)(function(){_({productArea:"agent_inbox",target:"inbox_unresolve_button"}),c(s.id,"pending")},[_,c,s.id]),D="pending"===s.status,M="deleted"===s.status,O="dismissed"===s.status||"acknowledged"===s.status||"implemented"===s.status,L=(0,W.useCallback)(function(e){_({productArea:"agent_inbox",target:"inbox_screenshot_thumbnail"}),f(e)},[_]),B=(0,W.useCallback)(function(){f(null)},[]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(V.ShadesSurface,{elevate:"2x",br:8,gap:8,pb:8,pt:6,px:8,style:M?{opacity:.6}:void 0,children:[(0,x.jsxs)(F.View,{row:!0,align:"center",justify:"space-between",children:[(0,x.jsx)(sN.Pill,{text:null!=(i=null==j?void 0:j.label)?i:"Other",colorway:null!=(o=null==j?void 0:j.colorway)?o:"grey",variant:"muted",compact:!0}),(0,x.jsxs)(F.View,{row:!0,gap:4,children:[D?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(oM.IconButton,{alt:"Add to chat",onClick:C,children:(0,x.jsx)(Sb.default,{})}),(0,x.jsx)(oM.IconButton,{alt:"Send to agent",onClick:T,children:(0,x.jsx)(iL.default,{})})]}):null,M?(0,x.jsx)(oM.IconButton,{alt:"Restore",onClick:E,children:(0,x.jsx)(S_.default,{})}):O?(0,x.jsxs)(sU.PopupMenu,{trigger:(0,x.jsx)(oM.IconButton,{alt:"More actions",children:(0,x.jsx)(aT.default,{})}),"aria-label":"Feedback actions",children:[(0,x.jsx)(sU.MenuItem,{label:"Unresolve",labelProps:{variant:"small"},icon:(0,x.jsx)(Sj.default,{size:12}),onAction:A}),(0,x.jsx)(sU.MenuItem,{label:"Delete",labelProps:{variant:"small"},icon:(0,x.jsx)(su.default,{size:12}),onAction:P})]}):(0,x.jsxs)(sU.PopupMenu,{trigger:(0,x.jsx)(oM.IconButton,{alt:"More actions",children:(0,x.jsx)(aT.default,{})}),"aria-label":"Feedback actions",children:[(0,x.jsx)(sU.MenuItem,{label:"Resolve",labelProps:{variant:"small"},icon:(0,x.jsx)(Sx.default,{size:12}),onAction:I}),(0,x.jsx)(sU.MenuItem,{label:"Delete",labelProps:{variant:"small"},icon:(0,x.jsx)(su.default,{size:12}),onAction:P})]})]})]}),(0,x.jsxs)(F.View,{row:!0,gap:4,align:"center",children:[(0,x.jsx)(sB.Avatar,{src:s.user.image,username:s.user.username,fullName:null!=(a=s.user.fullName)?a:void 0,size:20,ringColor:"transparent"}),(0,x.jsxs)(F.View,{row:!0,gap:8,align:"baseline",children:[(0,x.jsx)(eA.Text,{color:"dimmer",children:S}),(0,x.jsx)(s2.Timestamp,{date:s.timeCreated,textColor:"dimmest",textVariant:"small",live:!0})]})]}),(0,x.jsxs)(F.View,{children:[(0,x.jsx)(F.View,{innerRef:w,clsx:[Sk.default.feedbackText,(0,R._)({},Sk.default.feedbackTextCollapsed,!m),(0,R._)({},Sk.default.feedbackTextFaded,!m&&y)],children:(0,x.jsx)(eA.Text,{children:s.feedbackText})}),y?(0,x.jsx)(eE.Button,{clsx:Sk.default.showButton,text:m?"Show less":"Show more",iconRight:m?(0,x.jsx)(Sw.default,{}):(0,x.jsx)(uz.default,{}),variant:"underlinedOnHover",size:"small",onClick:function(){return v(!m)}}):null]}),s.screenshots&&s.screenshots.length>0?(0,x.jsx)(SV,{screenshots:s.screenshots,onScreenshotClick:L}):null]}),(0,x.jsx)(SM,{isOpen:null!==p,screenshotUrl:p,onClose:B})]})}var ST=e.i(903673),SI=e.i(399978),SP=e.i(913811),SE=e.i(230776),SR=e.i(445059),SA=e.i(124803);function SD(e){var t=e.url,n=e.index,r=e.onClick,i=(0,z._)((0,W.useState)(!1),2),o=i[0],a=i[1];return(0,x.jsxs)("button",{type:"button",onClick:function(){return r(t)},clsx:SA.default.screenshotThumbnailButton,"aria-label":"View screenshot ".concat(n+1),children:[!o&&(0,x.jsx)(V.ShadesSurface,{br:4,clsx:SA.default.thumbnailShimmer,style:{width:80,height:60,position:"absolute"}}),(0,x.jsx)(gz.default,{src:t,alt:"Screenshot ".concat(n+1),width:80,height:60,unoptimized:!0,loading:"lazy",clsx:SA.default.screenshotThumbnail,onLoad:function(){return a(!0)},style:{opacity:+!!o}})]})}function SV(e){var t=e.screenshots,n=e.onScreenshotClick;if(!t||0===t.length)return null;var r=t.filter(function(e){return null!==e});return 0===r.length?null:(0,x.jsx)(F.View,{row:!0,wrap:!0,gap:8,pt:4,children:r.map(function(e,t){return(0,x.jsx)(SD,{url:e,index:t,onClick:n},t)})})}function SM(e){var t=e.isOpen,n=e.screenshotUrl,r=e.onClose,i=(0,z._)((0,W.useState)(!0),2),o=i[0],a=i[1];return((0,W.useEffect)(function(){t&&n&&a(!0)},[t,n]),n)?(0,x.jsx)(ez.Modal,{isOpen:t,onRequestClose:r,maxWidth:872,centered:!0,noPadding:!0,children:(0,x.jsxs)(F.View,{align:"center",justify:"center",p:16,children:[o?(0,x.jsx)(V.ShadesSurface,{br:8,clsx:SA.default.loadingShimmer,style:{width:840,height:600}}):null,(0,x.jsx)(gz.default,{src:n,alt:"Screenshot preview",width:840,height:600,clsx:SA.default.modalImage,onLoad:function(){return a(!1)},unoptimized:!0,style:{display:o?"none":"block"}})]})}):null}function SF(e){var t=e.item,n=e.onAddToChat,r=e.onSendToAgent,i=e.onUpdateStatus;return(0,x.jsx)(Sg,{layout:!0,initial:{opacity:0,scale:.92,y:-8},animate:{opacity:1,scale:1,y:0,x:0,rotate:0},exit:{opacity:0,x:60,scale:.97,rotate:.8,transition:{duration:.3,ease:[.4,0,1,1]}},transition:{type:"spring",stiffness:400,damping:25,mass:.8,layout:{duration:.3,ease:[.4,0,.2,1]}},children:(0,x.jsx)(SC,{item:t,onAddToChat:n,onSendToAgent:r,onUpdateStatus:i})})}function SO(){var e,t,n,r,i,o,a,s,l,u,c=is({variables:{replId:(0,e3.default)()}}).data,d=(t=(0,at.useChatter)(),n=(0,te.default)().showError,r=(0,ek.useObservable)(t.sessions.agent.current),i=(0,ep.useAgentLayout)(),o=(0,ep.useOpenAgentWithPrompt)(),a=(0,tv.default)().fs,s=(0,mj.useIsAgentOptimisticallyWorking)(),l=(0,SP.useSetQueueIsOpen)(),{addToChat:(0,W.useCallback)(function(e,t){o({promptValue:e,attachments:t})},[o]),sendToAgent:(0,W.useCallback)(function(e,o){return(0,er._)(function(){var u,c,d,p,f,h,m,v,g,x,y,b,w;return(0,ei._)(this,function(_){switch(_.label){case 0:if(_.trys.push([0,16,,17]),u=r)return[3,2];return[4,t.sessions.create({sessionType:ae.SessionType.AGENT_SESSION})];case 1:if(!(c=_.sent()).ok)throw Error("Failed to create Agent session");u=c.payload,_.label=2;case 2:if(i.toggle(!0),d=[],!(o&&o.length>0))return[3,11];return[4,gk({urls:o,sentryContext:{sessionId:u.id}})];case 3:p=_.sent(),f=!0,h=!1,m=void 0,_.label=4;case 4:_.trys.push([4,9,10,11]),v=function(){var e,t,n,r;return(0,ei._)(this,function(i){switch(i.label){case 0:t=(e=x.value).fileName,n=e.file,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,SI.uploadFiles)({parentPath:SR.ATTACHED_ASSETS_PATH,files:[n],fs:a,onError:function(e){throw e}})];case 2:return i.sent(),d.push({path:"".concat(SR.ATTACHED_ASSETS_PATH,"/").concat(t),mimeType:n.type,file:n,isLoading:!1}),[3,4];case 3:return r=i.sent(),o9.withScope(function(e){e.setTag("agent-inbox-feedback-to-agent",!0),e.setTag("session-id",u.id),o9.captureException(r,{extra:{message:"Error uploading screenshot",sessionId:u.id,fileName:t}})}),[3,4];case 4:return[2]}})},g=p[Symbol.iterator](),_.label=5;case 5:if(f=(x=g.next()).done)return[3,8];return[5,(0,ST._)(v())];case 6:_.sent(),_.label=7;case 7:return f=!0,[3,5];case 8:return[3,11];case 9:return y=_.sent(),h=!0,m=y,[3,11];case 10:try{f||null==g.return||g.return()}finally{if(h)throw m}return[7];case 11:if(!s)return[3,13];return b=(0,SE.packContentsForQueuedMessage)({text:e,attachedFiles:d}),[4,t.queue.enqueue({contents:b})];case 12:if(!_.sent().ok)throw Error("Failed to queue Agent message");return l(!0),[3,15];case 13:return[4,u.appendEvent({kind:"message",message:e,intent:ae.MessageAction.AGENT,uploadedFiles:d.map(function(e){return{path:e.path,mimeType:e.mimeType}})})];case 14:_.sent(),_.label=15;case 15:return[3,17];case 16:return w=_.sent(),o9.withScope(function(e){e.setTag("agent-inbox-feedback-to-agent",!0),o9.captureException(w)}),n("Error sending feedback to Agent"),[3,17];case 17:return[2]}})})()},[t.sessions,t.queue,r,i,n,a,s,l])}),p=d.addToChat,f=d.sendToAgent,h=(0,z._)((u=(0,b._)({},ii,void 0),r9.useMutation(iu,u)),1)[0],m=(0,z._)([(0,ip.useValue)(iv),(0,ip.useSet)(iv)],2),v=m[0],g=m[1],y=(0,nX.useDeploymentCurrentBuild)(),w=(0,rN.usePreferences)("agentPosition"),_=w.preferences.agentPosition,j=w.update,S=(0,ld.useTrackClick)().trackClick,k=(null==c||null==(e=c.getRepl)?void 0:e.__typename)==="Repl"?c.getRepl.agentFeedback:null,C=function(e,t,n){var r=function(e,t){(0,gH.default)(2,arguments);var n=(0,gq.default)(t);return(0,gK.default)(e,-n)}(new Date,7);switch(t){case"new":default:return e.filter(function(e){return"pending"===e.status});case"resolved":return e.filter(function(e){return"dismissed"===e.status||"acknowledged"===e.status||"implemented"===e.status});case"current_deployment":return e.filter(function(e){var t;return"pending"===e.status&&n&&(null==(t=e.build)?void 0:t.id)===n});case"recently_deleted":return e.filter(function(e){return"deleted"===e.status&&function(e,t){(0,gH.default)(2,arguments);var n=(0,gW.default)(e),r=(0,gW.default)(t);return n.getTime()>r.getTime()}(new Date(e.timeUpdated),r)})}}((null==k?void 0:k.__typename)==="ReplAgentFeedback"?k.items:[],v,null==y?void 0:y.id),T=0===C.length,I=(0,W.useCallback)(function(e){if("all"!==e){var t=(0,en._)(e)[0];t&&(S({productArea:"agent_inbox",target:"inbox_filter_menu_item"}),g(t))}},[S,g]),P=(0,W.useCallback)(function(){S({productArea:"agent_inbox",target:"inbox_sidebar_move_button"}),j({agentPosition:"leftSidebar"===_?"rightSidebar":"leftSidebar"})},[S,_,j]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(F.View,{row:!0,gap:4,align:"center",pl:6,pr:4,children:[(0,x.jsx)(F.View,{grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:(0,x.jsx)(eA.Text,{children:"Inbox"})}),(0,x.jsxs)(sU.PopupMenu,{trigger:(0,x.jsx)(eE.Button,{text:ih[v],iconRight:(0,x.jsx)(lx.default,{}),size:"xsmall",variant:"nofill"}),"aria-label":"Inbox filter",selectionMode:"single",selectedKeys:new Set([v]),onSelectionChange:I,children:[(0,x.jsx)(sU.MenuItem,{id:"new",label:ih.new,labelProps:{variant:"small"},icon:(0,x.jsx)(uv.default,{size:12}),iconRight:"new"===v?(0,x.jsx)(lS.default,{}):null}),(0,x.jsx)(sU.MenuItem,{id:"resolved",label:ih.resolved,labelProps:{variant:"small"},icon:(0,x.jsx)(Sx.default,{size:12}),iconRight:"resolved"===v?(0,x.jsx)(lS.default,{}):null}),(0,x.jsx)(sU.MenuItem,{id:"current_deployment",label:ih.current_deployment,labelProps:{variant:"small"},icon:(0,x.jsx)(Sy,{size:12}),iconRight:"current_deployment"===v?(0,x.jsx)(lS.default,{}):null}),(0,x.jsx)(sU.MenuItem,{id:"recently_deleted",label:ih.recently_deleted,labelProps:{variant:"small"},icon:(0,x.jsx)(su.default,{size:12}),iconRight:"recently_deleted"===v?(0,x.jsx)(lS.default,{}):null})]}),(0,x.jsx)(sU.PopupMenu,{trigger:(0,x.jsx)(oM.IconButton,{alt:"More options",children:(0,x.jsx)(aT.default,{color:D.tokens.foregroundDimmest})}),"aria-label":"Inbox options",children:(0,x.jsx)(sU.MenuItem,{label:"Move sidebar to the ".concat("leftSidebar"===_?"left":"right"),labelProps:{variant:"small"},icon:"leftSidebar"===_?(0,x.jsx)(i9.default,{size:12}):(0,x.jsx)(i7.default,{size:12}),onAction:P})})]}),(0,x.jsxs)(F.View,{grow:!0,shrink:!0,clsx:SA.default.scrollableContent,children:[(0,x.jsx)(Sr,{features:j4,children:(0,x.jsx)(j6,{children:(0,x.jsx)(F.View,{clsx:SA.default.filterContainer,children:(0,x.jsx)(F.View,{gap:10,p:8,clsx:SA.default.itemsContainer,children:(0,x.jsx)(xi,{initial:!1,mode:"popLayout",children:C.map(function(e){return(0,x.jsx)(SF,{item:e,onAddToChat:p,onSendToAgent:f,onUpdateStatus:function(e,t){return h({variables:{input:{id:e,status:t}}})}},e.id)})})})},v)})}),T?(0,x.jsxs)(F.View,{align:"center",pt:64,gap:8,clsx:SA.default.emptyState,children:[(0,x.jsx)(r3,{size:24}),(0,x.jsx)(eA.Text,{color:"dimmer",children:"Inbox is empty"})]}):null]})]})}var SL=e.i(978497),SB=e.i(779830),SU=e.i(160290),SN=e.i(710078),SG=e.i(939040),Sz=e.i(491694),SW=(0,D.cvarsFrom)("Search.module.css",["--input-height"]),SH={type:"context",icon:(0,x.jsx)(rc.default,{}),label:"",description:"Search"};function Sq(e){var t=(0,tv.default)().fs,n=(0,ex.useGetRecentFiles)(),r=(0,ep.useOpenFile)(),i=(0,rJ.useShouldHideFileInWorkspace)(),o=(0,W.useMemo)(function(){var e=(0,r$.createFindOrCreateFileCommand)({openFile:r,fs:t,shouldHideFile:i,getRecentFiles:n});return e.data=SH,delete e.match,e},[r,t,i,n]);return(0,x.jsx)(F.View,{onContextMenu:e.onContextMenu,clsx:Sz.default.root,style:(0,R._)({},SW.inputHeight,"32px"),children:(0,x.jsx)(eW.CommandBar,{fullWidth:!0,command:o,openOnInput:!0,compact:!0})})}var SK=e.i(483570),S$=e.i(312421),SY=e.i(714312),SQ=e.i(712771),SX=e.i(840111),SZ=e.i(780671),SJ=e.i(240913),S0=e.i(133294),S1=e.i(185511),S2=e.i(274526),S4=e.i(714603);function S3(e){var t=e.size,n=e.iconUrl,r=e.name;return(0,x.jsx)(pd.default,{src:n,width:t,height:t,alt:"Icon for file opener: ".concat(r)})}var S5=/[*]{2}\/[*]\.([a-z0-9.]+)/,S8=e.i(943124);function S6(e){var t,n,r,i,o,a,s,l,u,c,d,p,f,h,m,v,g,y,w,_,j,S,k,C,T,I,P,E,R,A,D,V,M,O,L,B,U,N,G,H,q,K,$,Q,X=e.onClose,Z=(t=(0,e3.default)(),r=(n=(0,z._)((0,W.useState)(null),2))[0],i=n[1],o=(0,ep.useOpenFile)(),a=(0,S$.useTrackOpenFile)(),s=(0,rJ.useShouldHideFileInWorkspace)(!0),l=(0,W.useCallback)(function(e){return!s(e.filename)},[s]),u=(0,tv.default)().fs,c=(0,rN.usePreferences)("multiselectModifierKey").preferences,d=(0,ep.useCommitFileInWorkspace)(),p="cmdOrCtrlKey"===c.multiselectModifierKey?"cmdOrCtrlKey":"altKey",f=(0,ex.useGetRecentFiles)(),h=(0,W.useCallback)(function(e){return(0,SY.getFileExtensionSuggestions)(e,f)},[f]),m=(0,dF.useContextMenu)().onContextMenu,v=(0,e3.default)(),g=(0,tv.default)().fs,y=(0,ep.useOpenFile)(),w=(0,ep.useInsertPaneToEdge)(),_=(0,ep.useExtensionFileHandlers)(),j=(0,ts.useExtensionCommands)(tO.ContributionType.FiletreeContextMenu),S=(0,ep.useFiletypeAssociations)(),k=(0,ep.useAssociateFiletype)(),C=(0,Y.useFlag)({controlName:"flag-folder-downloads"}),T=(0,Y.useFlag)({controlName:"flag-direct-file-downloads"}),I=(0,ep.useSetFiletypeAssociationRequest)(),P=(0,W.useCallback)(function(e){var t=e.extensionId,n=e.fileExtension,r=e.fileHandlerId,i=S[n];i&&i.extensionId===t&&i.fileHandlerId===r||I(e)},[I,S]),E=(0,W.useCallback)(function(e,t){var n=e.path,r=[{data:{type:"group",key:"rename"},commands:function(){return[(0,S2.getRenameCommand)(function(){return t.rename(n)})]}}];(0,nk.isOTFile)(n)&&r.push({data:{type:"group",key:"saveFile"},commands:function(){return[(0,S2.getSaveCommand)(function(){return(0,er._)(function(){return(0,ei._)(this,function(e){switch(e.label){case 0:return[4,g.flush(new Set([n]),nT.FlushSource.MANUAL_SAVE)];case 1:return e.sent(),[2]}})})()})]}}),r.push({data:{type:"group",key:"open"},commands:function(){return function(e){var t=e.path,n=e.getSelectedNodes,r=e.openFile,i=[{type:nT.FileType.File,path:t}],o=!0,a=!1,s=void 0;try{for(var l,u=n()[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=(0,z._)(l.value,2),d=c[0],p=c[1];p!==nT.FileType.Directory&&d!==t&&i.push({path:d,type:p})}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var f=i.length,h=1===f?"Open":"Open ".concat(f," files");return[{label:h,icon:(0,x.jsx)(SQ.default,{}),run:function(){var e=!0,t=!1,n=void 0;try{for(var o,a=i[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s=o.value;r({path:s.path,newTab:!0})}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}},{label:h+" in split",icon:(0,x.jsx)(i9.default,{}),run:function(){var e=(0,wZ._)(i),t=e[0],n=e.slice(1);r({path:t.path,newPane:!0});var o=!0,a=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r({path:c.path,newTab:!0})}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}}].map(function(e){var t=e.label,n=e.icon,r=e.run;return{match:ef.matchLabel,data:{type:"action",label:t,icon:n,run:r}}})}({path:n,getSelectedNodes:t.getSelectedNodes,openFile:y})}});var i=function(e){var t=function(e){var t=r[e],i=(0,pA.globToRegExp)(t.glob);if(!i||!i.exec(n))return"continue";var s=S5.exec(t.glob),l=t.icon?t.icon:t.extension.manifest.icon,u=t.name?t.name:t.extension.manifest.name,d=l?(0,tc.getAssetUrl)(t.extension.baseUrl,l):null;c.push({match:ef.matchLabel,data:{type:"action",icon:d?(0,x.jsx)(S3,{size:16,name:u,iconUrl:d}):(0,x.jsx)(SQ.default,{}),label:"Open with "+u,run:function(){s&&a({extensionId:t.extension.extensionId,fileHandlerId:e,fileExtension:s[1]}),o({path:n,opener:{paneType:"extension",supports:function(){return!0},extensionFileHandler:t}})}}})},n=e.path,r=e.handlers,i=e.filetypeAssociations,o=e.openFile,a=e.requestAssociateFiletype,s=e.associateFiletype,l=(0,SZ.getFileExtension)(n),u=l?i[l]:null,c=[];for(var d in r)t(d);return u&&l&&c.length&&c.push({match:ef.matchLabel,data:{icon:(0,x.jsx)(su.default,{}),type:"action",label:"Use default opener",run:function(){s({fileExtension:l,newAssociation:null})}}}),c}({path:n,handlers:_,filetypeAssociations:S,requestAssociateFiletype:P,associateFiletype:k,openFile:y});return i.length&&r.push({data:{type:"group",key:"extensions"},commands:function(){return i}}),r.push({data:{type:"group",key:"copy"},commands:function(){return(0,S2.getCopyCommands)(n)}}),r.push((0,S2.getDuplicateCommand)(function(){return(0,er._)(function(){var e;return(0,ei._)(this,function(r){switch(r.label){case 0:e=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,S0.default)(n,g)];case 2:return e=r.sent(),[3,4];case 3:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 4:return(0,S4.default)({replId:v,action:"duplicated",fileType:nT.FileType.File}),t.rename(e),[2]}})})()})),r.push((0,S1.createDownloadCommand)(n,g,T)),r.push({data:{type:"group",key:"deleteFile"},commands:function(){return[(0,S2.getDeleteCommand)(function(){return t.deleteNodes(e)})]}}),r.push({data:{type:"group",key:"extensions"},commands:function(){return(0,er._)(function(){var e;return(0,ei._)(this,function(t){switch(t.label){case 0:return e=[{data:{filePath:n,fileType:nT.FileType.File}}],[4,Promise.all(j.map(function(t){return(0,er._)(function(){var n;return(0,ei._)(this,function(r){switch(r.label){case 0:return[4,t.create({path:e})];case 1:if(!(n=r.sent()))return[2,null];return[2,(0,tu.wrapExtensionCommand)(n,{path:e})]}})})()}))];case 1:return[2,t.sent().filter(Boolean)]}})})()}}),r},[_,S,P,k,y,g,T,v,j]),R=(0,vG.useSetAreHiddenFilesVisible)(),A=(0,vG.useAreHiddenFilesVisible)(),V=(D=(0,rN.usePreferences)("agentPosition")).preferences.agentPosition,M=D.update,O=(0,W.useCallback)(function(e,t){var n=e.path,r=n===SJ.ROOT_PATH,i=r?[]:[{data:{type:"group",key:"rename"},commands:function(){return[(0,S2.getRenameCommand)(function(){return t.rename(e.path)})]}}];if(i.push({data:{type:"group",key:"search"},commands:function(){var t;return[(t=e.path,{match:ef.matchLabel,data:{type:"action",icon:(0,x.jsx)(rc.default,{}),label:"Search this directory",run:function(){w({pane:{type:"searchReplace",data:{initialIncludeGlob:"".concat(t,"/**")}},edge:"right"})}}})]}}),i.push.apply(i,(0,en._)((0,S2.getCreateCommands)(function(n){return t.create(n,e.path)}))),i.push({data:{type:"group",key:"openShell"},commands:function(){return[{match:ef.matchLabel,data:{type:"action",label:"Open shell here",icon:(0,x.jsx)(SX.default,{}),run:function(){w({pane:{type:"shell",data:{initialPwd:n}},edge:"left"})}}}]}}),r||i.push({data:{type:"group",key:"copy"},commands:function(){return(0,S2.getCopyCommands)(n)}}),t.getExpandedDirs()&&i.push({match:ef.matchLabel,data:{icon:(0,x.jsx)(hB.default,{}),type:"action",label:"Collapse "+(r?"all":"child folders"),run:function(){var e=t.getExpandedDirs(n);e&&t.collapse((0,en._)(e))}}}),!r&&C&&i.push({data:{type:"group",key:"downloadFolder"},commands:function(){return[(0,S1.createDownloadFolderCommand)(n)]}}),r||i.push({data:{type:"group",key:"deleteFile"},commands:function(){return[(0,S2.getDeleteCommand)(function(){return t.deleteNodes(e)})]}}),r&&i.push({data:{type:"group",key:"hiddenFiles"},commands:function(){return[{match:ef.matchLabel,data:{type:"action",label:(A?"Hide":"Show")+" hidden files",icon:A?(0,x.jsx)(si.default,{}):(0,x.jsx)(SQ.default,{}),run:function(){R(!A)}}}]}}),i.push({data:{type:"group",key:"extensions"},commands:function(){return(0,er._)(function(){var e;return(0,ei._)(this,function(t){switch(t.label){case 0:return e=[{data:{dirPath:n,fileType:nT.FileType.Directory}}],[4,Promise.all(j.map(function(t){return(0,er._)(function(){var n;return(0,ei._)(this,function(r){switch(r.label){case 0:return[4,t.create({path:e})];case 1:if(!(n=r.sent()))return[2,null];return[2,(0,tu.wrapExtensionCommand)(n,{path:e})]}})})()}))];case 1:return[2,t.sent().filter(Boolean)]}})})()}}),r){var o={type:"action",label:"Move sidebar to the "+("leftSidebar"===V?"left":"right"),icon:"leftSidebar"===V?(0,x.jsx)(i9.default,{}):(0,x.jsx)(i7.default,{}),run:function(){M({agentPosition:"leftSidebar"===V?"rightSidebar":"leftSidebar"})}};i.push({data:{type:"group",key:"move"},commands:function(){return[{match:ef.matchLabel,data:o}]}})}return i},[A,R,j,w,C,M,V]),L=(0,W.useCallback)(function(e,t){return{data:{type:"context",label:"Search actions",icon:(0,x.jsx)(rc.default,{})},commands:function(){return e.type===nT.FileType.Directory?O(e,t):E(e,t)}}},[E,O]),B=(0,vG.useSetFileRenameInProgress)(),U=(0,SU.useFiletree)({fs:u,filter:l,fontSize:13,onFileDoubleClick:function(e,t){d(t)},onFileSelect:function(e){var t=e.path,n=e.type,r=e.event,i="click"===n&&"altKey"===p?(0,iD.getCmdOrCtrl)(r):r.altKey;o({path:t,newTab:i}),a(t,{newTab:i})},onCreate:function(e){e.type===nT.FileType.File&&o({opener:{paneType:(0,em.getPaneTypeForFile)({path:e.path})},path:e.path})},multiselectModifierKey:p,onConflicts:function(e){return i({type:"conflicts",data:e})},onDeleteNodes:function(e){return i({type:"deleteNode",data:e})},onContextMenu:function(e,t){return m(e,{command:L(t,U)})},autocomplete:h,localCacheKey:t+":sidebar",onFileRenameStart:B,onFileRenameEnd:function(){return B(null)}}),N=(0,SK.useFileTreeGitStatus)(),(0,W.useEffect)(function(){return U.setFileStatus(N)},[U,N]),G=(0,ex.useObservableActiveFile)(),(0,W.useEffect)(function(){var e=function(e){return(0,er._)(function(){return(0,ei._)(this,function(t){switch(t.label){case 0:if(null===e)return U.select(null),[2];return[4,U.select({path:e,type:nT.FileType.File})];case 1:if(t.sent(),G.current!==e)return[2];return U.scrollToPath(e),[2]}})})()};return e(G.current),G.subscribe(e)},[G,U]),H=(0,ep.useSidebar)(),q=(0,i1.default)(H.activeContent),K=(0,ex.useObservableRevealFile)(),$=(0,ex.useSetRevealFile)(),(0,W.useEffect)(function(){var e=function(e){return(0,er._)(function(){return(0,ei._)(this,function(t){switch(t.label){case 0:if(null===e)return[2];return"filetree"!==q&&H.toggleContent("filetree"),[4,U.select({path:e,type:nT.FileType.File})];case 1:return t.sent(),U.scrollToPath(e),$(null),[2]}})})()};return e(K.current),K.subscribe(e)},[K,$,U,H,q]),Q=(0,W.useCallback)(function(e){return m(e,{command:L({type:nT.FileType.Directory,path:"."},U)})},[U,L,m]),{filetree:U,activeModal:r,closeModal:function(){return i(null)},onRootContextMenu:Q}),J=Z.filetree,ee=Z.activeModal,et=Z.closeModal,eo=Z.onRootContextMenu;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(F.View,{clsx:S8.default.header,row:!0,gap:4,align:"center",pl:6,pr:4,children:[(0,x.jsx)(F.View,{grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:(0,x.jsx)(eA.Text,{css:S8.default.title,children:"Files"})}),(0,x.jsxs)(F.View,{row:!0,gap:0,align:"center",children:[(0,x.jsx)(oM.IconButton,{dataCy:"filetree-add-file",alt:"New file",onClick:function(){J.create(nT.FileType.File)},children:(0,x.jsx)(hN.default,{})}),(0,x.jsx)(oM.IconButton,{alt:"New folder",onClick:function(){J.create(nT.FileType.Directory)},children:(0,x.jsx)(SL.default,{})}),(0,x.jsx)(SB.RootActions,{closeFiletree:X,filetree:J})]})]}),(0,x.jsxs)(F.View,{clsx:S8.default.content,grow:!0,shrink:!0,children:[(0,x.jsx)(Sq,{onContextMenu:eo}),(0,x.jsx)(F.View,{grow:!0,shrink:!0,dataCy:"sidebar-filetree-section",children:(0,x.jsx)(SU.Filetree,{store:J.store})})]}),(0,x.jsxs)(ez.Modal,{isOpen:!!ee,onRequestClose:et,children:[(null==ee?void 0:ee.type)==="conflicts"?(0,x.jsx)(SN.default,{paths:ee.data.conflicts.map(function(e){return e.path}),onCancel:et,onConfirm:function(){var e=ee.data;"move"===e.type?J.move({nodes:e.nodes,to:e.to,overwrite:!0}):J.upload({files:e.files,parentPath:e.to,overwrite:!0}),et()}}):null,(null==ee?void 0:ee.type)==="deleteNode"?(0,x.jsx)(oX.default,(0,td._)((0,b._)({},(0,SG.getDeleteText)(ee.data.nodes)),{delete:function(){return ee.data.confirm()},hideModal:et})):null]})]})}function S9(){var e=(0,ep.useSidebar)(),t=(0,ep.useAgentLayout)(),n=(0,i1.default)(t.agentFiletreeOrder),r=(0,W.useRef)(null);return(0,x.jsx)(gP,{gutter:t.gutter,side:"agent-filetree"===n?"left":"right",onPointerDown:function(t){(0,dh.measureMouseMove)(t,{start:function(){(0,tx._)(document.activeElement,HTMLElement)&&(r.current=document.activeElement),e.resize.start()},move:function(t){var n=t.delta;e.resize.update(n.x)},end:function(){var t,n;e.resize.end(),null==(n=r.current)||null==(t=n.focus)||t.call(n),r.current=null}})},onDoubleClick:function(){e.closeSidebar()}})}var S7=(0,D.cvarsFrom)("index.module.css",["--width","--height","--transform","--pointer-events","--opacity","--z-index"]),ke=(0,W.memo)(function(){var e,t,n=(0,W.useRef)(null),r=(0,ep.useSidebar)(),i=r.view,o=(0,i1.default)(r.activeContent);t=is({variables:{replId:e=(0,e3.default)()}}).subscribeToMore,(0,W.useEffect)(function(){return t({document:il,variables:{replId:e},updateQuery:function(e,t){var n,r=null==(n=t.subscriptionData.data)?void 0:n.agentFeedback;return r?(0,r5.produce)(e,function(e){if((null==(t=e.getRepl)?void 0:t.__typename)==="Repl"&&(null==(n=e.getRepl.agentFeedback)?void 0:n.__typename)==="ReplAgentFeedback"){var t,n,i=e.getRepl.agentFeedback.items,o=i.findIndex(function(e){return e.id===r.id});o>=0?i[o]=r:i.unshift(r),e.getRepl.agentFeedback.pendingCount=i.filter(function(e){return"pending"===e.status}).length}}):e}})},[e,t]);var a=ig().isAvailable;(0,W.useEffect)(function(){"inbox"!==o||a||r.closeSidebar()},[o,a,r]),(0,ds.useStyleSet)(n,da(i,r.getTransitionEnabled),function(e){var t;return t={},(0,R._)(t,S7.width,e.width+"px"),(0,R._)(t,S7.height,e.height+"px"),(0,R._)(t,S7.transform,"translate(".concat(e.x,"px, ").concat(e.y,"px)")),(0,R._)(t,S7.pointerEvents,e.isOpen?"all":"none"),(0,R._)(t,S7.opacity,e.opacity.toString()),(0,R._)(t,S7.zIndex,iM.zIndexLevels.filetreeDragLayer.toString()),t});var s=(0,W.useCallback)(function(){r.closeSidebar()},[r]);return(0,x.jsxs)(V.ShadesSurface,{clsx:S8.default.root,innerRef:n,elevate:!1,children:["filetree"===o?(0,x.jsx)(S6,{onClose:s}):null,"inbox"===o?(0,x.jsx)(SO,{}):null,(0,x.jsx)(S9,{})]})}),kt=e.i(732964),kn=e.i(718632),kr=e.i(755181);function ki(e){var t,n,r,i,o=e.repl,a=e.currentUser,s=(0,y.useRouter)(),l=(0,J.useQueryParam)("enterInAgentMode","boolean"),u=(0,J.useQueryParam)("enterInExpertMode","boolean"),c=(0,J.useQueryParam)("popupId","string"),d=(0,Z.isInBonsaiWebview)(s),p=(0,Z.doesBonsaiWebviewSupportFeature)(s,"workspace2"),f=(0,gj.useFilePaneFlag)(),h=(0,z._)((0,W.useState)(function(){var e;return(0,ev.createPaneUI)({config:(e=(0,mV.createPaneUIConfig)(),(0,td._)((0,b._)({},e),{webview:mA,commands:pe,tutorial:mg,extension:pp,extensionStore:f1,replAuth:f5,searchReplace:mt,deployments:mF.deploymentsUI,config:pi,integrations:mO.integrationsUI,extensionDevtools:fY,csvPreview:mM.csvPreviewUI,agentChat:d9,agentProgress:mL.unsupportedUI,multiplayer:mL.unsupportedUI})),filePaneFlag:f})}),1)[0],m=null;c?m=gG((0,dt.getPopupState)(c),h.decode):o.layoutState&&(m=gG(o.layoutState,h.decode));var v=!!o.config.isAgentStack;m||(i=u?"split-with-console":v?"split-with-automations":"split-with-webview");var g=(t=(0,J.useQueryParam)("deploymentPane","boolean"),n=(0,J.useQueryParam)("projectPane","boolean"),(0,Q.default)(function(){return t?{type:"deployments"}:n?{type:"project"}:void 0},[t,n])),w=(!!(null==(r=o.origin)?void 0:r.id)||u)&&!o.config.isInPlanningPhase,_=(l||!!o.config.isInPlanningPhase)&&!o.config.figmaUrl&&!w;return(0,x.jsx)(cX.TrackingHierarchyProvider,{hierarchy:{page:"workspace"},children:(0,x.jsxs)(ee.Pid2Provider,{currentUsername:a.username,replId:o.id,children:[(0,x.jsx)(oY.SessionProvider,{children:(0,x.jsx)(de.LayoutStoreProvider,{initialPane:g,savedLayoutState:m,popupId:c,agentCenteredLayout:_,agentLayoutVariation:i,agentPosition:a.workspacePreferences.agentPosition,children:(0,x.jsx)(v1,{tour:null,userId:a.id,children:(0,x.jsx)(ko,{ui:h,repl:o,currentUser:a,isBonsaiWebview:d,doesBonsaiSupportWorkspace2:p},o.id)})})}),(0,x.jsx)(et.default,{})]})})}function ko(e){var t,n,r,i,o,a,s,l,u,c,d,p,f,h,m,v,g,y,b=e.repl,w=e.currentUser,_=e.isBonsaiWebview,j=e.doesBonsaiSupportWorkspace2,S=e.ui,k=(t=(0,ep.useOpenFile)(),n=(0,ep.useOpenMultipleFiles)(),r=(0,ep.useOpenMultipleURLs)(),i=(0,va.useThrowBsod)(),o=(0,Y.useFlag)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1}),s=(a=(0,z._)((0,W.useState)(!1),2))[0],l=a[1],c=(u=(0,z._)((0,W.useState)(!1),2))[0],d=u[1],p=(0,sY.useUpdatePresence)(),f=(0,sY.useGetColorForUser)(),h=(0,Y.useFlag)({controlName:"flag-open-telemetry-tracing"}),m=(0,Y.useFlag)({controlName:"flag-multi-lsp-connections"}),v=(0,Q.default)(function(){return{onPresenceCommand:p,getColorForUser:f,onUnrecoverableError:(0,v3.default)({origin:"replEnvironmentDesktop: services/unrecoverableError",tags:{environment:"desktop"},onNonBsodUnrecoverableError:function(e){e===K.NonBsodErrorType.NotAllowed?l(!0):e===K.NonBsodErrorType.RequiresRefresh&&d(!0)},throwBsod:i}),openFile:t,openMultipleFiles:n,openMultipleURLs:r,enableUserEvents:o,enableMultipleLSPClientsPerFile:m,openTelemetryTracing:h,enableReplspaceSshTokenPassthrough:!0}},[o,t,n,r,i,p,f,h,m]),g=(0,v2.useCreateServices)(v),(0,Q.default)(function(){return{services:g,isPleaseRefresh:c,isNotAllowed:s}},[g,c,s])),C=k.services,T=k.isPleaseRefresh,I=k.isNotAllowed;(0,X.usePid1ConnectionMonitor)(null==C?void 0:C.container);var P=(0,Y.useFlag)({controlName:"flag-build-score-survey"}),E=(0,Q.default)(function(){return(0,oU.initKeybindings)(null==w?void 0:w.keybindings.keybindings)},[w]);if(!C)return(0,x.jsx)(N,{});var R=b.authorizations.useAdvancedChat.isAuthorized;return(0,x.jsx)(q.AiProvider,{replId:b.id,currentUser:w,hasAccessToAdvancedModel:R,orgId:null==(y=b.org)?void 0:y.id,renderEmptyState:function(){return(0,x.jsx)(N,{})},children:(0,x.jsx)(v9.ContextMenuProvider,{children:(0,x.jsxs)(oq,{services:C,ui:S,repl:b,userKeybindings:E,children:[(0,x.jsxs)(dP.default,{origin:"ErrorBoundary: ReplEnvironmentDesktop Top level",bsod:!0,children:[(0,x.jsx)(od,{}),(0,x.jsx)(iE,{isAdmin:w.isAdmin,isSubscribed:w.isSubscribed}),(0,x.jsx)(gb.default,{repl:b}),_&&!j?(0,x.jsx)(o3,{}):null,(0,x.jsx)(e$,{}),(0,x.jsx)(o$,{}),(0,x.jsx)(vJ,{repl:b,currentUser:w}),(0,x.jsx)(am,{}),(0,x.jsx)(ad,{}),(0,x.jsx)(ks,{repl:b}),(0,x.jsx)(n$,{}),(0,x.jsx)(nz,{}),(0,x.jsx)(v7,{}),(0,x.jsx)(ge.default,{}),(0,x.jsx)(gp,{}),(0,x.jsx)(mX,{replId:b.id}),(0,x.jsx)(gx.default,{isOpen:I}),(0,x.jsx)(gy.default,{isOpen:T}),(0,x.jsx)(kn.GitInShellConfirmModal,{}),(0,x.jsx)(kt.DefaultBucketAccessConfirmModal,{}),(0,x.jsx)(nB,{}),(0,x.jsx)(oZ,{}),(0,x.jsx)(gt.DisconnectedModal,{}),(0,x.jsx)(rV,{}),(0,x.jsx)(gw.ConvertedToProjectModal,{repl:b}),P?(0,x.jsx)(g_.BuildScoreSurveyTopLevelHook,{}):null]}),(0,x.jsx)(ka,{replId:b.id})]})})})}function ka(e){var t=e.replId,n=(0,z._)((0,va.useBsod)(),1)[0],r=(0,z._)((0,H.useSaveReplLayoutStateMutation)(),1)[0],i=(0,W.useCallback)(function(){r({variables:{input:{replId:t,state:{}}}})},[r,t]);return(0,W.useEffect)(function(){n&&i()},[n,i]),(0,x.jsx)(v4.default,{})}var ks=(0,W.memo)(function(e){var t,n,r,i,o,a,s,l,u=e.repl,c=(t=(0,ep.useUpdateContainer)(),n=(0,ep.useGetContainer)(),r=(0,$.default)(),i=(0,ay.useIsMac)(),o=(0,ay.useIsWindows)(),a=(i||o)&&r?O.HEADER_HEIGHT:0,s=(0,W.useRef)(null),l=(0,ax.default)(function(e){var r=e.width,i=e.height;if(r&&i&&s.current){var o=s.current.getBoundingClientRect(),l=o.top,u={width:r,height:i,x:o.left,y:l-a};(0,tt.default)(u,n())||t(u)}}),(0,W.useCallback)(function(e){s.current=e,l(e)},[l])),d=(0,ep.useContainerElementIsInitialized)(),p=(0,ep.usePaneIds)(),f=(0,ep.useHandleIds)(),h=(0,ep.useHeaderIds)(),m=(0,W.useRef)(null),v=(0,W.useCallback)(function(e){c(e),m.current=e},[c]),g=(0,$.default)();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(V.ShadesSurface,{innerRef:v,clsx:[kr.default.contentContainer,(0,R._)({},kr.default.desktopApp,g)],elevate:!1,children:[d?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c2,{repl:u}),(0,x.jsx)(ke,{}),(0,x.jsxs)("main",{id:"main-content",children:[f.map(function(e){return(0,x.jsx)(m1,{handleId:e},e)}),h.map(function(e){return(0,x.jsx)(d2,{headerId:e},e)}),p.map(function(e){return(0,x.jsx)(dD,{paneId:e},e)}),0===p.length?(0,x.jsx)(gM,{}):null]}),(0,x.jsx)(c7.DropPreview,{}),(0,x.jsx)(c9.DropPoints,{}),(0,x.jsx)(oj,{}),(0,x.jsx)(dM.ContextMenu,{}),(0,x.jsx)(gD,{})]}):null,(0,x.jsx)(v6,{})]}),d?null:(0,x.jsx)(N,{})]})}),kl=e.i(745844);function ku(){return(0,x.jsx)(iB.Global,{styles:[{body:{overscrollBehaviorX:"none"}}]})}var kc=e.i(80366),kd=e.i(722313),kp=e.i(507187),kf=e.i(932495),kh=e.i(714260),km=e.i(788124),kv=e.i(578134),kg=e.i(662792),kx=e.i(838720);e.s(["default",0,function(){var e,t,n,r,i,o,a,s=null,l=(0,y.useRouter)().query;if(!l.replUrl)throw Error("Expected replUrl to be set");if(!l.replId)throw Error("Expected replId to be set");var u=l.replId.toString(),c=(e={variables:{replId:u,environment:(0,kp.useEnvironment)(),platform:(0,kf.usePlatform)()},ssr:!!l.ssr},t=(0,b._)({},T,e),j.useQuery(I,t)),d=c.data,p=c.loading,f=c.error,h=(null==d?void 0:d.currentUser)||void 0,m=(null==d?void 0:d.getRepl)&&("Repl"===d.getRepl.__typename||"ReplRedirect"===d.getRepl.__typename)?d.getRepl:null,v=(null==d||null==(n=d.getRepl)?void 0:n.__typename)==="ReplOrgPermissionDeniedError"?d.getRepl:null,g=(null==d||null==(r=d.getRepl)?void 0:r.__typename)==="NotFoundError"?d.getRepl:null,w=(null==d||null==(i=d.getRepl)?void 0:i.__typename)==="UnauthorizedError"||(null==d||null==(o=d.getRepl)?void 0:o.__typename)==="UserError"?d.getRepl:null,_=(null==m?void 0:m.__typename)==="Repl"?m:null,S=null!=(a=null==_?void 0:_.description)?a:void 0,k=null==f?void 0:f.message,C=!!(h&&!h.isVerified);return s=v?(0,x.jsx)(G.ReplOrgPermissionDeniedError,{ownerUsername:v.ownerUsername,ownerImage:v.ownerImage}):C?(0,x.jsx)(F.View,{clsx:kx.default.emailVerificationWrapper,grow:!0,shrink:!0,children:(0,x.jsx)(P.default,{})}):k?(0,x.jsx)(F.View,{align:"center",justify:"center",grow:!0,shrink:!0,children:(0,x.jsx)(eA.Text,{multiline:!1,children:"Something went wrong loading the Repl. Please reload the page and try again."})}):g||w?(0,x.jsx)(kg.default,{}):p?(0,x.jsx)(N,{animation:!0}):_&&h?(0,x.jsx)(kh.default.Provider,{value:_.id,children:(0,x.jsx)(ki,{repl:_,currentUser:h},_.id)}):(0,x.jsx)(N,{animation:!0}),(0,x.jsx)(km.default,{children:(0,x.jsxs)(kv.default,{dataCy:"workspace-page",title:"".concat((null==_?void 0:_.title)||"Loading..."),description:S,noHeader:!C||!!v,noMain:!C||!!v,noSidebar:!C||!!v,noFooter:!0,hideEmailVerify:!0,children:[_?(0,x.jsx)(kd.OEmbedHead,{replPath:_.url}):null,(0,x.jsx)(E.OpenTelemetryTracer,{}),(0,x.jsxs)(s1.Surface,{clsx:kx.default.surface,children:[(0,x.jsx)(kl.HideBodyOverflow,{}),(0,x.jsx)(ku,{}),s]}),(0,x.jsx)(kc.default,{replId:u})]})})}],453926)},545749,(e,t,n)=>{var r="/replEnvironmentDesktop";(window.__NEXT_P=window.__NEXT_P||[]).push([r,function(){return e.r(453926)}]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([r])})}]);

//# debugId=713701ec-d31b-814e-0fa8-9651fdf713da
//# sourceMappingURL=3bc25c4ae9929608.js.map